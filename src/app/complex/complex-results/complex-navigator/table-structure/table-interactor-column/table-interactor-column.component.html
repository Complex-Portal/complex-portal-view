<div class="Complex-navigator">
  <table class="interactors-table">
    <!-- Interactors' column -->
    <ng-container *ngFor=" let interactor of enrichedInteractors; let i=index">
      <tr *ngIf="!interactor.hidden">
        <ng-container *ngFor="let oneType of ranges" class="interactorsOrdering">
          <td *ngIf="oneType[2]===i" [attr.rowspan]="oneType[1]" class="interactorSeparation"
              title="{{oneType[0]}}">
            <div class="interactorNameContainer" [style.--rowspanSize]="oneType[1]">
              {{ oneType[0] }}
            </div>
          </td>
        </ng-container>
        <td class="interactorsColumn">
          <cp-table-interactor-name
            [interactorName]="interactor.interactor.name"
            [interactorType]="interactor.interactor.interactorType"
            [interactorId]="interactor.interactor.identifier"
          ></cp-table-interactor-name>
          <!-- Icon for the expandable -->
          <div class="container" *ngIf="interactor.isSubComplex">
            <a title="{{ interactor.interactor.name }} interactors" (click)="toggleSubcomplexExpandable(i)">
              {{ interactor.interactor.identifier }}
              <i class="icon icon-common" data-icon="&#xf078;"
                 style="font-size:small; margin-top: 2px"></i>
            </a>
          </div>
          <cp-table-interactor-external-link
            [interactorId]="interactor.interactor.identifier"
            [interactorType]="interactor.interactor.interactorType"
            [identifierLink]="interactor.interactor.identifierLink"
          ></cp-table-interactor-external-link>
        </td>
        <!-- Interactors' stoichiometry -->
        <ng-container *ngFor="let complex of enrichedComplexes">
          <td class="intStoich">
            <cp-table-main-interactor
              [complex]="complex"
              [i]="i"
              [enrichedInteractors]="enrichedInteractors"
            ></cp-table-main-interactor>
          </td>
        </ng-container>
        <div class="spaceHolder" *ngIf="complexSearch.elements.length>6"></div>
      </tr>
      <!-- Expandable menu for subcomplexes -->
      <ng-container *ngIf="interactor.expanded">
        <ng-container *ngIf="!!interactor.subComponents">
          <tr *ngFor="let el of interactor.subComponents; let j=index"
              class="expandedRows"
              [ngClass]="{'firstExpandedRow': j === 0, 'lastExpandedRow': j === interactor.subComponents.length - 1}">
            <td [attr.rowspan]="interactor.subComponents.length" class="interactorSeparation"
                title="{{interactor.interactor.name}}'s interactors"
                *ngIf="(interactorsSorting === 'Type' && j===0) || (interactorsSorting === 'Organism' && j===0)">
              <div class="interactorSeparationName"> {{ interactor.interactor.name }} interactors</div>
            </td>
            <td class="subComponentColumn">
              <div>
                <cp-table-interactor-name
                  [interactorName]="el.name"
                  [interactorType]="el.interactorType"
                  [interactorId]="el.identifier"
                ></cp-table-interactor-name>
              </div>
              <cp-table-interactor-external-link
                [interactorId]="el.identifier"
                [interactorType]="el.interactorType"
                [identifierLink]="el.identifierLink"
              ></cp-table-interactor-external-link>
            </td>
            <ng-container *ngFor="let complex of enrichedComplexes">
              <td class="intStoich">
                <cp-table-subcomponent-interactor
                  [complex]="complex"
                  [i]="i"
                  [j]="j"
                  [enrichedInteractors]="enrichedInteractors"
                ></cp-table-subcomponent-interactor>
              </td>
            </ng-container>
            <div class="spaceHolder" *ngIf="complexSearch.elements.length>6"></div>
          </tr>
        </ng-container>
      </ng-container>
    </ng-container>
  </table>
</div>
