<div class="Complex-navigator">
  <table class="interactors-table">
    <!-- Interactors' column -->
    <ng-container *ngFor="let interactor of enrichedInteractors; let i=index">
      <ng-container>
        <tr *ngIf="!interactor.hidden">
          <td>
            <div style="font-weight: bold">
              {{ interactor.interactor.name }}
              <i class="{{interactorTypeIcon(interactor.interactor)}}"
                 title="{{interactor.interactor.interactorType}}"></i>
              <!-- Adding of the icons to access details of the interactor -->
              <a [routerLink]="['/complex/search']"
                 [queryParams]="{query: interactor.interactor.identifier, page: 1}"
                 target="_blank">
                <i class="icon icon-functional small" data-icon="1"
                   title="Complexes containing this interactor"></i>
              </a>
            </div>
            <!-- Icon for the expandable -->
            <div class="container" *ngIf="interactor.isSubComplex">
              {{ interactor.interactor.identifier }}
              <a title="{{ interactor.interactor.name }}'s interactors" (click)="toggleSubcomplexExpandable(i)">
                <i class="icon icon-common" data-icon="&#xf078;"
                   style="font-size:small; margin-top: 2px"></i>
              </a>
            </div>
            <div *ngIf="showExternalLink(interactor.interactor)" class="interactorType">
              <a href="{{interactor.interactor.identifierLink}}" target="_blank">{{ interactor.interactor.identifier }}
                <i class="icon icon-generic small" data-icon="x"></i>
              </a>
            </div>
          </td>
          <!-- Interactors' stoichiometry -->
          <ng-container *ngFor="let complex of complexSearch.elements">
            <td>
              <div [ngClass]="displayTopLineClass(complex, i)"></div>
              <ng-container *ngIf="!!findInteractorInComplex(complex, interactor.interactor.identifier)">
                <div class="stoichNum" title="{{ getStochiometry(complex, interactor.interactor.identifier) }}">
                  {{ stochiometryOfInteractors(complex, interactor.interactor.identifier) }}
                </div>
              </ng-container>
              <ng-container class="stoichComponent"
                            *ngIf="findInteractorsInSubComplex(complex, interactor.interactor.identifier).length > 0">
                <!-- subcomplexes' interactors' stoichiometry -->
                <div class="stoichNum"
                     title="{{ getStoichiometrySubComplex(complex, interactor.interactor.identifier) }}">
                  {{ stoichiometryOfInteractorsMainTable(complex, interactor.interactor.identifier) }}
                </div>
              </ng-container>
              <div [ngClass]="displayBottomLineClass(complex, i)"></div>
            </td>
          </ng-container>
        </tr>
        <!-- Expandable menu for subcomplexes -->
        <ng-container *ngIf="interactor.expanded">
          <ng-container *ngIf="!!interactor.subComponents">
            <tr *ngFor="let el of interactor.subComponents; let j=index">
              <td style="background: #8b9394">
                <div style="font-weight: bold">
                  <a [routerLink]="['/complex/search']"
                     [queryParams]="{query: el.identifier, page: 1}"
                     target="_blank">
                    {{ el.name }}
                    <i class="{{interactorTypeIcon(el)}}" title="{{interactor.interactor.interactorType}}"></i>
                    <i class="icon icon-functional small" data-icon="1"
                       title="More complexes containing this interactor"></i>
                  </a>
                </div>
                <div *ngIf="showExternalLink(el)" class="interactorType">
                  <a href="{{el.identifierLink}}" target="_blank">{{ el.identifier }}
                    <i class="icon icon-generic small" data-icon="x" title="More information"></i>
                  </a>
                </div>
              </td>
              <ng-container *ngFor="let complex of complexSearch.elements">
                <td style="background: #8b9394;">
                  <div [ngClass]="displayTopLineClassExpanded(complex, interactor, i, j)"></div>
                  <ng-container *ngIf="!!findInteractorInComplex(complex, el.identifier)">
                    <div class="stoichNum"
                         title="{{ getStochiometry(complex, el.identifier) }}">
                      {{ stochiometryOfInteractors(complex, el.identifier) }}
                    </div>
                  </ng-container>
                  <ng-container
                    *ngIf="!!findInteractorInExpandedSubComplex(interactor, complex, el.identifier)">
                    <!-- subcomplexes' interactors' stoichiometry -->
                    <div class="stoichNum"
                         title="{{ getStochiometryInExpandedSubComplex(interactor, el.identifier) }}">
                      {{ stoichiometryOfInteractorsExpandable(interactor, el.identifier) }}
                    </div>
                  </ng-container>
                  <div [ngClass]="displayBottomLineClassExpanded(complex, interactor, i, j)"></div>
                </td>
              </ng-container>
            </tr>
          </ng-container>
        </ng-container>
      </ng-container>
    </ng-container>
  </table>
</div>
