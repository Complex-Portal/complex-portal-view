<div class="Complex-navigator">
  <table class="interactors-table"
         [ngClass]="{'inheritedWidth': complexes().length > 6}"
         [style.--cols]="complexes().length">
    @for (interactor of navigatorComponents(); track i; let i = $index) {
      @if (!interactor.hidden) {
        <tr [class.ortholog]="!!interactor.isOrthologGroup && state.mergeOrthologs">
          @for (range of ranges; track range.value) {
            @if (range.start === i) {
              <td [attr.rowspan]="range.length" class="interactorSeparation"
                  [matTooltip]="state.componentsSorting() === NavigatorComponentSorting.ORGANISM ? (range.value | species) : range.value">
                <div class="interactorNameContainer" [style.--rowspanSize]="range.length">
                  @if (state.componentsSorting() === NavigatorComponentSorting.ORGANISM) {
                    {{ range.value | species:true }}
                  } @else {
                    {{ range.value }}
                  }
                </div>
              </td>
            }
          }
          <td class="interactorsColumn horizontalHeader"
              [class.fixedWidth]="fixedWidth()"
              [style]="ranges.length!=0 ? 'left:3ch':''">
            <cp-table-interactor-name [interactor]="interactor">
            </cp-table-interactor-name>
            <!-- Icon for the expandable -->
            @if (interactor.hasSubComponents) {
              <div class="container">
                <a (click)="toggleSubcomplexExpandable(i)"
                   [matTooltip]="interactor.expandTooltip">
                  {{ interactor.expandLabel }}
                  <i class="icon icon-common" data-icon="&#xf078;"
                     style="font-size:small;
                "></i>
                </a>
              </div>
            }
            <div class="shadow right" [class.visible]="shadowVisible()"></div>
          </td>
          <!-- Interactors' stoichiometry -->
          @for (complex of navigatorComplexes; track complex.complex.complexAC) {
            <td class="intStoich"
                [class.fixedWidth]="fixedWidth()"
                [class.predicted]="complex.complex.predictedComplex">
              <cp-table-main-interactor
                [complex]="complex"
                [i]="i"
                [navigatorComponents]="navigatorComponents()"
              ></cp-table-main-interactor>
            </td>
          }
          @if (complexes().length > 6) {
            <div [class.sorting]="isSorting()" class="spaceHolder"></div>
          }
        </tr>
      }
      <!-- Expandable menu for subcomplexes -->
      @if (interactor.expanded) {
        @if (!!interactor.subComponents) {
          @for (subComponent of interactor.subComponents; track subComponent; let j = $index) {
            <tr
              class="expandedRows"
              [ngClass]="getExpandedRowClass(j, interactor.subComponents.length)">
              @if (j === 0 && isSorting()) {
                <td [attr.rowspan]="interactor.subComponents.length" class="interactorSeparation"
                    [matTooltip]="interactor.expandTooltip"
                >
                  <div class="interactorSeparationName"
                       [style.--rowspanSize]="interactor.subComponents.length"> {{ interactor.expandTooltip }}
                  </div>
                </td>
              }
              <td class="subComponentColumn horizontalHeader"
                  [class.fixedWidth]="fixedWidth()"
                  [style]="ranges.length!=0 ? 'left:3ch':''">
                <div>
                  <cp-table-interactor-name
                    [interactor]="subComponent"
                  ></cp-table-interactor-name>
                </div>
              </td>
              @for (complex of navigatorComplexes; track complex.complex.complexAC) {
                <td class="intStoich"
                    [class.fixedWidth]="fixedWidth()"
                    [class.predicted]="complex.complex.predictedComplex">
                  <cp-table-subcomponent-interactor
                    [complex]="complex"
                    [i]="i"
                    [j]="j"
                    [navigatorComponents]="navigatorComponents()"
                  ></cp-table-subcomponent-interactor>
                </td>
              }
              @if (navigatorComplexes.length > 6) {
                <div [class.sorting]="isSorting()" class="spaceHolder"></div>
              }
            </tr>
          }
        }
      }
    }
  </table>
</div>
