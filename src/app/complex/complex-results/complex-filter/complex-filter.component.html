<div class="filters row">
  <div class="columns medium-6"><h3>Filters</h3></div>
  <div class="columns medium-6">
    @if (anyFiltersSelected()) {
      <div>
        <a class="button" (click)="resetAllFilters()"><i class="icon icon-common" data-icon="ï‡¸"></i> Reset filters</a>
      </div>
    }
  </div>
  <div class="columns medium-12">
    @if (facets().predicted_complex_f) {
      <div>
        <b>Complex Type</b>
        <ul class="no-bullet">
          @for (facet of sortedPredictedComplexFacets(); track facet.name) {
            <li [class.predicted]="facet.name === 'true'">
              <label>
                <input type="checkbox" #filter value="{{facet.name}}"
                       (change)="changePredictedFilter(filter.value, filter.checked)"
                       [checked]="isSelected(facet.name, predictedFilter())">
                <span class="tag">{{ formatPredictedFacetValue(facet.name) }}</span><span
                class="count">{{ facet.count }}</span>
              </label>
            </li>
          }
        </ul>
      </div>
    }

    @if (facets().confidence_score_f) {
      <div>
        <b>Confidence Score</b>
        <div class="confidence-container">
          <div class="slider-container" #sliderContainer>
            <!-- -18 for knob size -->
            <mat-slider [min]="1" [max]="5" [showTickMarks]="true" [style.width.px]="sliderContainer.clientHeight - 18">
              <input matSliderThumb [value]="6 - minConfidence()" (valueChange)="minConfidence.set(6 - $event)">
            </mat-slider>
          </div>
          <div class="stars" [style.gap.px]="confidenceGap()">
            @for (confidence of reversedConfidence(); track confidence.value) {
              <div class="star-container" [class.predicted]="confidence.value <= 2" [matTooltip]="confidence.label"
                   [style.gap.px]="confidenceGap()" (click)="minConfidence.set(confidence.value)">
                @for (star of confidence.stars; track $index) {
                  <i class="icon icon-common icon-star" [ngClass]="star"></i>
                }
                <span class="count margin-left-small"
                      [class.checked]="confidence.value >= minConfidence()">{{ confidence.count }}</span>
              </div>
            }
          </div>
        </div>
      </div>
    }

    @if (facets().species_f) {
      <div>
        <b>Species</b>
        <ul class="no-bullet">
          @for (facet of facets().species_f; track facet.name) {
            <li>
              <label [matTooltip]="facet.name">
                <input type="checkbox" #filter value="{{facet.name}}"
                       (change)="changeSpeciesFilter(filter.value, filter.checked)"
                       [checked]="isSelected(facet.name, speciesFilter())">
                <span>
                  @if (facetOrganismIcon(facet.name).startsWith('icon')) {
                    <i
                      [ngClass]="facetOrganismIcon(facet.name)" style="font-size: large;"></i>
                  } @else {
                    <img [src]="facetOrganismIcon(facet.name)" alt="" width="18px" height="18px"/>
                  }
                </span>
                {{ facet.name | species:true }} <span class="count">{{ facet.count }}</span>
              </label>
            </li>
          }
        </ul>
      </div>
    }

    @if (facets().pbiorole_f) {
      <div>
        <b>Biological Role</b>
        <ul class="no-bullet">
          @for (facet of facets().pbiorole_f; track facet.name) {
            <li>
              <label>
                <input type="checkbox" #filter value="{{facet.name}}"
                       (change)="changeBiologicalRoleFilter(filter.value, filter.checked)"
                       [checked]="isSelected(facet.name, bioRoleFilter())">
                {{ facet.name }} <span class="count">{{ facet.count }}</span>
              </label>
            </li>
          }
        </ul>
      </div>
    }

    @if (facets().ptype_f) {
      <div>
        <b>Component Type</b>
        <ul class="no-bullet">
          @for (facet of facets().ptype_f; track facet.name) {
            <li>
              <label>
                <input type="checkbox" #filter value="{{facet.name}}"
                       (change)="changeInteractorTypeFilter(filter.value, filter.checked)"
                       [checked]="isSelected(facet.name, interactorTypeFilter())">
                <span>
                  <i [ngClass]="facetTypeIcon(facet.name)" style="font-size: large;"></i>
                </span>
                {{ facet.name }} <span class="count">{{ facet.count }}</span>
              </label>
            </li>
          }
        </ul>
      </div>
    }

    @if (!facets().species_f && !facets().pbiorole_f && !facets().ptype_f && !facets().predicted_complex_f && !facets().confidence_score_f) {
      <div>
        <h6>No filters available</h6>
      </div>
    }
  </div>
</div>
