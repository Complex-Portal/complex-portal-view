"use strict";(self.webpackChunkcomplex_portal_view=self.webpackChunkcomplex_portal_view||[]).push([[358],{74358:function(e,t,n){n.r(t),n.d(t,{ComplexResultsModule:function(){return Ie}});var i=n(38583),r=n(57040);class o{constructor(e,t,n,i,r){this._identifier=e,this._identifierLink=t,this._name=n,this._description=i,this._interactorType=r}get identifier(){return this._identifier}get identifierLink(){return this._identifierLink}get name(){return this._name}get description(){return this._description}get interactorType(){return this._interactorType}}var c=n(10639),s=n(35076),a=n(20658),l=n(39075),p=n(8991);function d(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"li",5),c.TgZ(1,"a",6),c.NdJ("click",function(){return c.CHM(e),c.oxw().getPreviousPage()}),c._uU(2,"\xab Previous"),c.qZA(),c.qZA()}}function u(e,t){if(1&e&&(c.TgZ(0,"li",9),c.TgZ(1,"span",10),c._uU(2,"You're on page"),c.qZA(),c._uU(3),c.qZA()),2&e){const e=c.oxw().$implicit;c.xp6(3),c.Oqu(e[0])}}function h(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"li"),c.TgZ(1,"a",6),c.NdJ("click",function(){c.CHM(e);const t=c.oxw().$implicit;return c.oxw().getPage(t[0])}),c._uU(2),c.qZA(),c.qZA()}if(2&e){const e=c.oxw().$implicit;c.xp6(2),c.Oqu(e[0])}}function g(e,t){if(1&e&&(c.ynx(0),c.YNc(1,u,4,1,"li",7),c.YNc(2,h,3,1,"li",8),c.BQk()),2&e){const e=t.$implicit;c.xp6(1),c.Q6J("ngIf","true"==e[1]),c.xp6(1),c.Q6J("ngIf","false"==e[1])}}function x(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"li",11),c.TgZ(1,"a",6),c.NdJ("click",function(){return c.CHM(e),c.oxw().getNextPage()}),c._uU(2,"Next \xbb"),c.qZA(),c.qZA()}}let m=(()=>{class e{constructor(){this.onPageChange=new c.vpe}ngOnInit(){this.updatePaginatior()}ngOnChanges(e){this.updatePaginatior()}updatePaginatior(){let e,t;for(this.pagination=[],this._lastPageIndex<5?(e=1,t=this._lastPageIndex):1===this._currentPageIndex||2===this._currentPageIndex?(e=1,t=5):this._currentPageIndex===this._lastPageIndex||this._currentPageIndex===this._lastPageIndex-1?(e=this._lastPageIndex-4,t=this._lastPageIndex):(e=this._currentPageIndex-2,t=this._currentPageIndex+2);e<=t;)this._pagination.push(e===this._currentPageIndex?[[this._currentPageIndex],[!0]]:[[e],[!1]]),e++}getFirstPage(){this.onPageChange.emit(1)}getLastPage(){this.onPageChange.emit(this.lastPageIndex)}getPage(e){this.onPageChange.emit(e)}getPreviousPage(){this.onPageChange.emit(this.currentPageIndex-1)}getNextPage(){this.onPageChange.emit(this.currentPageIndex+1)}get lastPageIndex(){return this._lastPageIndex}set lastPageIndex(e){this._lastPageIndex=e}get currentPageIndex(){return this._currentPageIndex}set currentPageIndex(e){this._currentPageIndex=e}get pagination(){return this._pagination}set pagination(e){this._pagination=e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Xpm({type:e,selectors:[["cp-complex-paginator"]],inputs:{lastPageIndex:"lastPageIndex",currentPageIndex:"currentPageIndex"},outputs:{onPageChange:"onPageChange"},features:[c.TTD],decls:7,vars:5,consts:[[1,"text-center"],["role","navigation","aria-label","Pagination",1,"pagination","text-center"],["class","arrow unavailable","aria-disabled","true",4,"ngIf"],[4,"ngFor","ngForOf"],["class","arrow",4,"ngIf"],["aria-disabled","true",1,"arrow","unavailable"],[3,"click"],["class","current",4,"ngIf"],[4,"ngIf"],[1,"current"],[1,"show-for-sr"],[1,"arrow"]],template:function(e,t){1&e&&(c.TgZ(0,"div"),c.TgZ(1,"h5",0),c._uU(2),c.qZA(),c.TgZ(3,"ul",1),c.YNc(4,d,3,0,"li",2),c.YNc(5,g,3,2,"ng-container",3),c.YNc(6,x,3,0,"li",4),c.qZA(),c.qZA()),2&e&&(c.xp6(2),c.AsE("",t.currentPageIndex," of ",t.lastPageIndex,""),c.xp6(2),c.Q6J("ngIf",1!=t.currentPageIndex),c.xp6(1),c.Q6J("ngForOf",t.pagination),c.xp6(1),c.Q6J("ngIf",t.currentPageIndex!=t.lastPageIndex))},directives:[i.O5,i.sg],styles:[""]}),e})();function f(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div"),c.TgZ(1,"a",4),c.NdJ("click",function(){return c.CHM(e),c.oxw().resetAllFilters()}),c._UZ(2,"i",5),c._uU(3," Reset filters"),c.qZA(),c.qZA()}}function I(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div"),c.TgZ(1,"input",11,12),c.NdJ("change",function(){c.CHM(e);const t=c.MAs(2);return c.oxw(3).changeSpeciesFilter(t.value,t.checked)}),c.qZA(),c._uU(3),c.qZA()}if(2&e){const e=c.oxw().$implicit;c.xp6(1),c.s9C("value",e.name),c.xp6(2),c.AsE(" ",e.name," (",e.count,") ")}}function Z(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div"),c.TgZ(1,"input",13,12),c.NdJ("change",function(){c.CHM(e);const t=c.MAs(2);return c.oxw(3).changeSpeciesFilter(t.value,t.checked)}),c.qZA(),c._uU(3),c.qZA()}if(2&e){const e=c.oxw().$implicit;c.xp6(1),c.s9C("value",e.name),c.xp6(2),c.AsE(" ",e.name," (",e.count,") ")}}function _(e,t){if(1&e&&(c.TgZ(0,"li"),c.TgZ(1,"div",8),c.YNc(2,I,4,3,"div",9),c.YNc(3,Z,4,3,"div",10),c.qZA(),c.qZA()),2&e){const e=t.$implicit,n=c.oxw(2);c.xp6(1),c.Q6J("ngSwitch",n.isSelected(e.name,n.spicesFilter)),c.xp6(1),c.Q6J("ngSwitchCase",!0)}}function C(e,t){if(1&e&&(c.TgZ(0,"div"),c.TgZ(1,"b"),c._uU(2,"Species"),c.qZA(),c.TgZ(3,"ul",6),c.YNc(4,_,4,2,"li",7),c.qZA(),c.qZA()),2&e){const e=c.oxw();c.xp6(4),c.Q6J("ngForOf",e.facets.species_f)}}function y(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div"),c.TgZ(1,"input",11,12),c.NdJ("change",function(){c.CHM(e);const t=c.MAs(2);return c.oxw(3).changeBiologicalRoleFilter(t.value,t.checked)}),c.qZA(),c._uU(3),c.qZA()}if(2&e){const e=c.oxw().$implicit;c.xp6(1),c.s9C("value",e.name),c.xp6(2),c.AsE(" ",e.name," (",e.count,") ")}}function T(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div"),c.TgZ(1,"input",13,12),c.NdJ("change",function(){c.CHM(e);const t=c.MAs(2);return c.oxw(3).changeBiologicalRoleFilter(t.value,t.checked)}),c.qZA(),c._uU(3),c.qZA()}if(2&e){const e=c.oxw().$implicit;c.xp6(1),c.s9C("value",e.name),c.xp6(2),c.AsE(" ",e.name," (",e.count,") ")}}function b(e,t){if(1&e&&(c.TgZ(0,"li"),c.TgZ(1,"div",8),c.YNc(2,y,4,3,"div",9),c.YNc(3,T,4,3,"div",10),c.qZA(),c.qZA()),2&e){const e=t.$implicit,n=c.oxw(2);c.xp6(1),c.Q6J("ngSwitch",n.isSelected(e.name,n.bioRoleFilter)),c.xp6(1),c.Q6J("ngSwitchCase",!0)}}function F(e,t){if(1&e&&(c.TgZ(0,"div"),c.TgZ(1,"b"),c._uU(2,"Biological Role"),c.qZA(),c.TgZ(3,"ul",6),c.YNc(4,b,4,2,"li",7),c.qZA(),c.qZA()),2&e){const e=c.oxw();c.xp6(4),c.Q6J("ngForOf",e.facets.pbiorole_f)}}function S(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div"),c.TgZ(1,"input",11,12),c.NdJ("change",function(){c.CHM(e);const t=c.MAs(2);return c.oxw(3).changeInteractorTypeFilter(t.value,t.checked)}),c.qZA(),c._uU(3),c.qZA()}if(2&e){const e=c.oxw().$implicit;c.xp6(1),c.s9C("value",e.name),c.xp6(2),c.AsE(" ",e.name," (",e.count,") ")}}function v(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div"),c.TgZ(1,"input",13,12),c.NdJ("change",function(){c.CHM(e);const t=c.MAs(2);return c.oxw(3).changeInteractorTypeFilter(t.value,t.checked)}),c.qZA(),c._uU(3),c.qZA()}if(2&e){const e=c.oxw().$implicit;c.xp6(1),c.s9C("value",e.name),c.xp6(2),c.AsE(" ",e.name," (",e.count,") ")}}function A(e,t){if(1&e&&(c.TgZ(0,"li"),c.TgZ(1,"div",8),c.YNc(2,S,4,3,"div",9),c.YNc(3,v,4,3,"div",10),c.qZA(),c.qZA()),2&e){const e=t.$implicit,n=c.oxw(2);c.xp6(1),c.Q6J("ngSwitch",n.isSelected(e.name,n.interactorTypeFilter)),c.xp6(1),c.Q6J("ngSwitchCase",!0)}}function q(e,t){if(1&e&&(c.TgZ(0,"div"),c.TgZ(1,"b"),c._uU(2,"Interactor Type"),c.qZA(),c.TgZ(3,"ul",6),c.YNc(4,A,4,2,"li",7),c.qZA(),c.qZA()),2&e){const e=c.oxw();c.xp6(4),c.Q6J("ngForOf",e.facets.ptype_f)}}function w(e,t){1&e&&(c.TgZ(0,"div"),c.TgZ(1,"h6"),c._uU(2,"No filters available"),c.qZA(),c.qZA())}let P=(()=>{class e{constructor(e){this.googleAnalyticsService=e,this.onSpicesFilterChanged=new c.vpe,this.onBiologicalRoleFilterChanged=new c.vpe,this.onInteractorTypeFilterChanged=new c.vpe,this.onResetAllFilters=new c.vpe}ngOnInit(){}changeSpeciesFilter(e,t){t?(this.spicesFilter.push(e),this.googleAnalyticsService.fireAddedFilterEvent(e)):(this.spicesFilter.splice(this.spicesFilter.indexOf(e),1),this.googleAnalyticsService.fireRemovedFilterEvent(e)),this.onSpicesFilterChanged.emit(this.spicesFilter)}changeBiologicalRoleFilter(e,t){t?(this.bioRoleFilter.push(e),this.googleAnalyticsService.fireAddedFilterEvent(e)):(this.bioRoleFilter.splice(this.bioRoleFilter.indexOf(e),1),this.googleAnalyticsService.fireRemovedFilterEvent(e)),this.onBiologicalRoleFilterChanged.emit(this.bioRoleFilter)}changeInteractorTypeFilter(e,t){t?(this.interactorTypeFilter.push(e),this.googleAnalyticsService.fireAddedFilterEvent(e)):(this.interactorTypeFilter.splice(this.interactorTypeFilter.indexOf(e),1),this.googleAnalyticsService.fireRemovedFilterEvent(e)),this.onInteractorTypeFilterChanged.emit(this.interactorTypeFilter)}resetAllFilters(){this.onResetAllFilters.emit(!0)}anyFiltersSelected(){return 0!==this._spicesFilter.length||0!==this._bioRoleFilter.length||0!==this._interactorTypeFilter.length}isSelected(e,t){return-1!==t.indexOf(e)}get facets(){return this._facets}set facets(e){this._facets=e}get spicesFilter(){return this._spicesFilter}set spicesFilter(e){this._spicesFilter=e}get bioRoleFilter(){return this._bioRoleFilter}set bioRoleFilter(e){this._bioRoleFilter=e}get interactorTypeFilter(){return this._interactorTypeFilter}set interactorTypeFilter(e){this._interactorTypeFilter=e}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(p.y))},e.\u0275cmp=c.Xpm({type:e,selectors:[["cp-complex-filter"]],inputs:{facets:"facets",spicesFilter:"spicesFilter",bioRoleFilter:"bioRoleFilter",interactorTypeFilter:"interactorTypeFilter"},outputs:{onSpicesFilterChanged:"onSpicesFilterChanged",onBiologicalRoleFilterChanged:"onBiologicalRoleFilterChanged",onInteractorTypeFilterChanged:"onInteractorTypeFilterChanged",onResetAllFilters:"onResetAllFilters"},decls:11,vars:5,consts:[[1,"filters","row"],[1,"columns","medium-6"],[4,"ngIf"],[1,"columns","medium-12"],[1,"button",3,"click"],["data-icon","d",1,"icon","icon-functional"],[1,"no-bullet"],[4,"ngFor","ngForOf"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["type","checkbox","checked","",3,"value","change"],["filter",""],["type","checkbox",3,"value","change"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"h3"),c._uU(3,"Filters"),c.qZA(),c.qZA(),c.TgZ(4,"div",1),c.YNc(5,f,4,0,"div",2),c.qZA(),c.TgZ(6,"div",3),c.YNc(7,C,5,1,"div",2),c.YNc(8,F,5,1,"div",2),c.YNc(9,q,5,1,"div",2),c.YNc(10,w,3,0,"div",2),c.qZA(),c.qZA()),2&e&&(c.xp6(5),c.Q6J("ngIf",t.anyFiltersSelected()),c.xp6(2),c.Q6J("ngIf",t.facets.species_f),c.xp6(1),c.Q6J("ngIf",t.facets.pbiorole_f),c.xp6(1),c.Q6J("ngIf",t.facets.ptype_f),c.xp6(1),c.Q6J("ngIf",!t.facets.species_f&&!t.facets.pbiorole_f&&!t.facets.ptype_f))},directives:[i.O5,i.sg,i.RF,i.n9,i.ED],styles:[""]}),e})();const N=function(e){return["/complex",e]};function J(e,t){if(1&e&&(c.TgZ(0,"div"),c._uU(1),c.TgZ(2,"a",2),c._uU(3,"..."),c.qZA(),c.qZA()),2&e){const e=c.oxw().$implicit;c.xp6(1),c.hij(" ",e.description,""),c.xp6(1),c.Q6J("routerLink",c.VKq(2,N,e.complexAC))}}function O(e,t){if(1&e&&(c.TgZ(0,"div"),c._uU(1),c.TgZ(2,"a",2),c._uU(3,"..."),c.qZA(),c.qZA()),2&e){const e=c.oxw().$implicit;c.xp6(1),c.hij(" ",e.description.substr(0,250),""),c.xp6(1),c.Q6J("routerLink",c.VKq(2,N,e.complexAC))}}function k(e,t){if(1&e&&(c.TgZ(0,"li"),c.TgZ(1,"h3"),c.TgZ(2,"a",2),c._uU(3),c.qZA(),c.qZA(),c.TgZ(4,"div",3),c.TgZ(5,"b"),c._uU(6,"Complex AC:"),c.qZA(),c._uU(7),c.TgZ(8,"b"),c._uU(9,"Organism:"),c.qZA(),c._uU(10),c._UZ(11,"br"),c.TgZ(12,"b"),c._uU(13,"Description:"),c.qZA(),c.YNc(14,J,4,4,"div",4),c.YNc(15,O,4,4,"div",4),c.qZA(),c.qZA()),2&e){const e=t.$implicit;c.xp6(2),c.Q6J("routerLink",c.VKq(6,N,e.complexAC)),c.xp6(1),c.Oqu(e.complexName),c.xp6(4),c.hij(" ",e.complexAC," / "),c.xp6(3),c.hij(" (",e.organismName,")"),c.xp6(4),c.Q6J("ngIf",e.description.length<=250),c.xp6(1),c.Q6J("ngIf",e.description.length>250)}}let Q=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Xpm({type:e,selectors:[["cp-complex-list"]],inputs:{complexSearch:"complexSearch"},decls:2,vars:1,consts:[[1,"no-bullet"],[4,"ngFor","ngForOf"],[3,"routerLink"],[1,"description",2,"background-color","white"],[4,"ngIf"]],template:function(e,t){1&e&&(c.TgZ(0,"ul",0),c.YNc(1,k,16,8,"li",1),c.qZA()),2&e&&(c.xp6(1),c.Q6J("ngForOf",t.complexSearch.elements))},directives:[i.sg,s.yS,i.O5],styles:[""]}),e})();const R=function(e){return["/complex",e]};function U(e,t){if(1&e&&(c.TgZ(0,"th"),c.TgZ(1,"div",5),c.TgZ(2,"a",6),c.TgZ(3,"div",7),c._uU(4),c._UZ(5,"i",8),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e){const e=t.$implicit;c.xp6(2),c.s9C("title",e.complexAC),c.Q6J("routerLink",c.VKq(3,R,e.complexAC)),c.xp6(2),c.hij(" ",e.complexName," ")}}let M=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Xpm({type:e,selectors:[["cp-table-header"]],inputs:{complexSearch:"complexSearch"},decls:9,vars:1,consts:[[1,"Complex-navigator"],[1,"CN-table"],["rowspan","2",1,"intHeader"],["colspan","15",1,"compHeader"],[4,"ngFor","ngForOf"],[1,"complexInTable"],["target","_blank",3,"routerLink","title"],[1,"txt"],["data-icon","x",1,"icon","icon-generic","small"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"table",1),c.TgZ(2,"tr"),c.TgZ(3,"th",2),c._uU(4,"Interactors"),c.qZA(),c.TgZ(5,"th",3),c._uU(6,"Complexes"),c.qZA(),c.qZA(),c.TgZ(7,"tr"),c.YNc(8,U,6,5,"th",4),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(8),c.Q6J("ngForOf",t.complexSearch.elements))},directives:[i.sg,s.yS],styles:[".compHeader[_ngcontent-%COMP%]{position:sticky;top:0;z-index:3;height:40px;text-align:left;font-size:medium;border:1px solid #0a494c;padding-left:10px}.intHeader[_ngcontent-%COMP%]{position:sticky;top:0;left:0;z-index:4;font-size:medium;border:1px solid #0a494c;min-width:130px;max-width:130px}th[_ngcontent-%COMP%]{position:sticky;z-index:2;text-align:center;top:0;background-color:#389198;border:1px solid #0a494c;min-width:140px;max-width:140px;height:200px;font-size:small;padding-left:5px;padding-right:5px}th[_ngcontent-%COMP%]   .txt[_ngcontent-%COMP%]{text-align:center;width:100%;height:200%;color:#e6e6e6}#CN-table[_ngcontent-%COMP%]{width:100%}"]}),e})();class L{constructor(e,t,n,i,r,o){this._identifier=e,this._identifierLink=t,this._name=n,this._description=i,this._stochiometry=r,this._interactorType=o}get identifier(){return this._identifier}get identifierLink(){return this._identifierLink}get name(){return this._name}get description(){return this._description}get stochiometry(){return this._stochiometry}get interactorType(){return this._interactorType}}var E=n(25917),Y=n(88002);function $(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",10),c._uU(1),c.TgZ(2,"a",11),c.NdJ("click",function(){c.CHM(e);const t=c.oxw(2).index;return c.oxw().toggleSubcomplexExpandable(t)}),c._UZ(3,"i",12),c.qZA(),c.qZA()}if(2&e){const e=c.oxw(2).$implicit;c.xp6(1),c.hij(" ",e.interactor.identifier," "),c.xp6(1),c.MGl("title","",e.interactor.name,"'s interactors")}}function V(e,t){if(1&e&&(c.TgZ(0,"div",13),c.TgZ(1,"a",14),c._uU(2),c._UZ(3,"i",15),c.qZA(),c.qZA()),2&e){const e=c.oxw(2).$implicit;c.xp6(1),c.s9C("href",e.interactor.identifierLink,c.LSH),c.xp6(1),c.hij("",e.interactor.identifier," ")}}function B(e,t){if(1&e&&(c.ynx(0),c.TgZ(1,"div",18),c._uU(2),c.qZA(),c.BQk()),2&e){const e=c.oxw().$implicit,t=c.oxw(2).$implicit,n=c.oxw();c.xp6(1),c.s9C("title",n.getStochiometry(e.complex,t.interactor.identifier)),c.xp6(1),c.hij(" ",n.stochiometryOfInteractors(e.complex,t.interactor.identifier)," ")}}function H(e,t){if(1&e&&(c.ynx(0,19),c.TgZ(1,"div",18),c._uU(2),c.qZA(),c.BQk()),2&e){const e=c.oxw().$implicit,t=c.oxw(2).$implicit,n=c.oxw();c.xp6(1),c.s9C("title",n.getStoichiometrySubComplex(e.complex,t.interactor.identifier)),c.xp6(1),c.hij(" ",n.stoichiometryOfInteractorsMainTable(e.complex,t.interactor.identifier)," ")}}function z(e,t){if(1&e&&(c.ynx(0),c.TgZ(1,"td"),c._UZ(2,"div",16),c.YNc(3,B,3,2,"ng-container",3),c.YNc(4,H,3,2,"ng-container",17),c._UZ(5,"div",16),c.qZA(),c.BQk()),2&e){const e=t.$implicit,n=c.oxw(2),i=n.index,r=n.$implicit,o=c.oxw();c.xp6(2),c.Q6J("ngClass",o.displayTopLineClass(e,i)),c.xp6(1),c.Q6J("ngIf",!!o.findInteractorInComplex(e.complex,r.interactor.identifier)),c.xp6(1),c.Q6J("ngIf",o.findInteractorsInSubComplex(e.complex,r.interactor.identifier).length>0),c.xp6(1),c.Q6J("ngClass",o.displayBottomLineClass(e,i))}}const j=function(){return["/complex/search"]},D=function(e){return{query:e,page:1}};function X(e,t){if(1&e&&(c.TgZ(0,"tr"),c.TgZ(1,"td"),c.TgZ(2,"div",4),c._uU(3),c._UZ(4,"i",5),c.TgZ(5,"a",6),c._UZ(6,"i",7),c.qZA(),c.qZA(),c.YNc(7,$,4,2,"div",8),c.YNc(8,V,4,2,"div",9),c.qZA(),c.YNc(9,z,6,4,"ng-container",2),c.qZA()),2&e){const e=c.oxw().$implicit,t=c.oxw();c.xp6(3),c.hij(" ",e.interactor.name," "),c.xp6(1),c.Tol(t.interactorTypeIcon(e.interactor)),c.s9C("title",e.interactor.interactorType),c.xp6(1),c.Q6J("routerLink",c.DdM(10,j))("queryParams",c.VKq(11,D,e.interactor.identifier)),c.xp6(2),c.Q6J("ngIf",e.isSubComplex),c.xp6(1),c.Q6J("ngIf",t.showExternalLink(e.interactor)),c.xp6(1),c.Q6J("ngForOf",t.enrichedComplexes)}}function K(e,t){if(1&e&&(c.TgZ(0,"div",13),c.TgZ(1,"a",14),c._uU(2),c._UZ(3,"i",22),c.qZA(),c.qZA()),2&e){const e=c.oxw().$implicit;c.xp6(1),c.s9C("href",e.identifierLink,c.LSH),c.xp6(1),c.hij("",e.identifier," ")}}function W(e,t){if(1&e&&(c.ynx(0),c.TgZ(1,"div",18),c._uU(2),c.qZA(),c.BQk()),2&e){const e=c.oxw().$implicit,t=c.oxw().$implicit,n=c.oxw(4);c.xp6(1),c.s9C("title",n.getStochiometry(e.complex,t.identifier)),c.xp6(1),c.hij(" ",n.stochiometryOfInteractors(e.complex,t.identifier)," ")}}function G(e,t){if(1&e&&(c.ynx(0),c.TgZ(1,"div",18),c._uU(2),c.qZA(),c.BQk()),2&e){const e=c.oxw(2).$implicit,t=c.oxw(3).$implicit,n=c.oxw();c.xp6(1),c.s9C("title",n.getStochiometryInExpandedSubComplex(t,e.identifier)),c.xp6(1),c.hij(" ",n.stoichiometryOfInteractorsExpandable(t,e.identifier)," ")}}function ee(e,t){if(1&e&&(c.ynx(0),c.TgZ(1,"td",20),c._UZ(2,"div",16),c.YNc(3,W,3,2,"ng-container",3),c.YNc(4,G,3,2,"ng-container",3),c._UZ(5,"div",16),c.qZA(),c.BQk()),2&e){const e=t.$implicit,n=c.oxw(),i=n.index,r=n.$implicit,o=c.oxw(3),s=o.index,a=o.$implicit,l=c.oxw();c.xp6(2),c.Q6J("ngClass",l.displayTopLineClassExpanded(e,s,i)),c.xp6(1),c.Q6J("ngIf",!!l.findInteractorInComplex(e.complex,r.identifier)),c.xp6(1),c.Q6J("ngIf",!!l.findInteractorInExpandedSubComplex(a,e.complex,r.identifier)),c.xp6(1),c.Q6J("ngClass",l.displayBottomLineClassExpanded(e,s,i))}}function te(e,t){if(1&e&&(c.TgZ(0,"tr"),c.TgZ(1,"td",20),c.TgZ(2,"div",4),c.TgZ(3,"a",6),c._uU(4),c._UZ(5,"i",5),c._UZ(6,"i",21),c.qZA(),c.qZA(),c.YNc(7,K,4,2,"div",9),c.qZA(),c.YNc(8,ee,6,4,"ng-container",2),c.qZA()),2&e){const e=t.$implicit,n=c.oxw(3).$implicit,i=c.oxw();c.xp6(3),c.Q6J("routerLink",c.DdM(9,j))("queryParams",c.VKq(10,D,e.identifier)),c.xp6(1),c.hij(" ",e.name," "),c.xp6(1),c.Tol(i.interactorTypeIcon(e)),c.s9C("title",n.interactor.interactorType),c.xp6(2),c.Q6J("ngIf",i.showExternalLink(e)),c.xp6(1),c.Q6J("ngForOf",i.enrichedComplexes)}}function ne(e,t){if(1&e&&(c.ynx(0),c.YNc(1,te,9,12,"tr",2),c.BQk()),2&e){const e=c.oxw(2).$implicit;c.xp6(1),c.Q6J("ngForOf",e.subComponents)}}function ie(e,t){if(1&e&&(c.ynx(0),c.YNc(1,ne,2,1,"ng-container",3),c.BQk()),2&e){const e=c.oxw().$implicit;c.xp6(1),c.Q6J("ngIf",!!e.subComponents)}}function re(e,t){if(1&e&&(c.ynx(0),c.ynx(1),c.YNc(2,X,10,13,"tr",3),c.YNc(3,ie,2,1,"ng-container",3),c.BQk(),c.BQk()),2&e){const e=t.$implicit;c.xp6(2),c.Q6J("ngIf",!e.hidden),c.xp6(1),c.Q6J("ngIf",e.expanded)}}let oe=(()=>{class e{constructor(e){this.complexPortalService=e}ngOnInit(){}get enrichedInteractors(){return this._enrichedInteractors}get enrichedComplexes(){return this._enrichedComplexes}set interactors(e){this._enrichedInteractors=[];for(const t of e){const e="stable complex"===t.interactorType,n={interactor:t,hidden:!1,isSubComplex:e,expanded:!1,subComponents:null,partOfComplex:[]};e&&this.loadSubInteractors(n).subscribe(e=>n.subComponents=e),this._enrichedInteractors.push(n)}this.calculateAllStartAndEndIndexes()}findInteractorInComplex(e,t){return e.components.find(e=>e.identifier===t)}findInteractorsInSubComplex(e,t){return this._enrichedInteractors.filter(e=>e.isSubComplex).filter(t=>e.components.some(e=>e.identifier===t.interactor.identifier)).filter(e=>!!e.subComponents).map(e=>e.subComponents.find(e=>e.identifier===t)).filter(e=>!!e)}findInteractorInExpandedSubComplex(e,t,n){return t.components.some(t=>t.identifier===e.interactor.identifier)?e.subComponents.find(e=>e.identifier===n):null}stochiometryOfInteractors(e,t){const n=this.findInteractorInComplex(e,t);return n?this.formatStochiometryValues(n.stochiometry):null}stoichiometryOfInteractorsExpandable(e,t){const n=this.findInteractorInSubcomplex(e,t);return n?this.formatStochiometryValues(n.stochiometry):null}stoichiometryOfInteractorsMainTable(e,t){const n=this.findInteractorsInSubComplex(e,t);if(n.length>0){const e=this.addedStoichiometryValues(n);return e?e[0]===e[1]?e[0].toString():`${e[0]}, ${e[1]}`:" "}return null}getStochiometry(e,t){const n=this.findInteractorInComplex(e,t);return n?n.stochiometry?"Stoichiometry values: "+n.stochiometry:"No stoichiometry data available":null}getStoichiometrySubComplex(e,t){const n=this.findInteractorsInSubComplex(e,t);if(n.length>0){const e=this.addedStoichiometryValues(n);return e?`Stoichiometry values: minValue: ${e[0]}, maxValue: ${e[1]}`:"No stoichiometry data available"}return null}getStochiometryInExpandedSubComplex(e,t){const n=this.findInteractorInSubcomplex(e,t);return n?n.stochiometry?"Stoichiometry values: "+n.stochiometry:"No stoichiometry data available":null}showExternalLink(e){return"stable complex"!==e.interactorType&&!!e.identifierLink}toggleSubcomplexExpandable(e){if(this._enrichedInteractors[e].expanded=!this._enrichedInteractors[e].expanded,this._enrichedInteractors[e].expanded){for(let t=0;t<this._enrichedInteractors.length;t++)e!==t&&(this._enrichedInteractors[t].expanded=!1);if(this._enrichedInteractors[e].subComponents){const t=this._enrichedInteractors[e].subComponents.map(e=>e.identifier);for(let n=0;n<this._enrichedInteractors.length;n++)e!==n&&(this._enrichedInteractors[n].hidden=!!t.includes(this._enrichedInteractors[n].interactor.identifier))}}else for(let t=0;t<this._enrichedInteractors.length;t++)this._enrichedInteractors[t].hidden=!1;this.calculateAllStartAndEndIndexes()}interactorTypeIcon(e){switch(e.interactorType){case"small molecule":return"icon icon-conceptual icon-chemical";case"protein":case"peptide":return"icon icon-conceptual icon-proteins";case"stable complex":return"icon icon-conceptual icon-systems";case"molecule set":return"icon icon-generic icon-math";case"single stranded deoxyribonucleic acid":case"double stranded deoxyribonucleic acid":case"small nuclear rna":case"small nucleolar rna":case"ribosomal rna":case"messenger rna":case"transfer rna":case"signal recognition particle rna":case"ribonucleic acid":case"nucleic acid":case"long non-coding ribonucleic acid":return"icon icon-conceptual icon-dna"}}loadSubInteractors(e){const t=this.complexSearch.elements.find(t=>t.complexAC===e.interactor.identifier);return t?(0,E.of)(t.components):this.complexPortalService.getComplexAc(e.interactor.identifier).pipe((0,Y.U)(e=>e.participants.map(e=>new L(e.identifier,e.identifierLink,e.name,e.description,e.stochiometry,e.interactorType))))}findInteractorInSubcomplex(e,t){return e.subComponents.find(e=>e.identifier===t)}fetchValuesFromStochiometry(e){return e.match("minValue: ([0-9+]), maxValue: ([0-9+])")}formatStochiometryValues(e){if(e){const t=this.fetchValuesFromStochiometry(e);if(t){const e=parseInt(t[1]),n=parseInt(t[2]);return e===n?e.toString():`${e}, ${n}`}}return" "}addedStoichiometryValues(e){let t=null,n=null;for(const i of e)if(i.stochiometry){const e=this.fetchValuesFromStochiometry(i.stochiometry);e&&(null===t&&(t=0),null===n&&(n=0),t+=parseInt(e[1]),n+=parseInt(e[2]))}return null!==t&&null!==n?[t,n]:null}calculateAllStartAndEndIndexes(){this._enrichedComplexes=[];for(const e of this.complexSearch.elements)this._enrichedComplexes.push(this.calculateStartAndEndIndexes(e))}getMinValue(e,t){return null===t?e:null===e?t:Math.min(e,t)}displayTopLineClass(e,t){return this.doesLineCrossInteractorCell(e,t)||this.doesLineEndOnInteractorCell(e,t)?"verticalLine":"transparentVerticalLine"}displayBottomLineClass(e,t){return this.doesLineCrossInteractorCell(e,t)||this.doesLineStartOnInteractorCell(e,t)?"verticalLine":"transparentVerticalLine"}displayTopLineClassExpanded(e,t,n){return this.doesLineCrossSubcomponentCell(e,t,n)||this.doesLineEndOnSubcomponentCell(e,t,n)?"verticalLine":"transparentVerticalLine"}displayBottomLineClassExpanded(e,t,n){return this.doesLineCrossSubcomponentCell(e,t,n)||this.doesLineStartOnSubcomponentCell(e,t,n)?"verticalLine":"transparentVerticalLine"}getMaxValue(e,t){return null===t?e:null===e?t:Math.max(e,t)}calculateStartAndEndIndexes(e){const t=[],n={complex:e,startInteractorIndex:null,endInteractorIndex:null,startSubComponentIndex:null,endSubComponentIndex:null};for(let i=0;i<this._enrichedInteractors.length;i++)if(!this._enrichedInteractors[i].hidden)for(let r=0;r<e.components.length;r++)if(e.components[r].identifier===this._enrichedInteractors[i].interactor.identifier)n.startInteractorIndex=this.getMinValue(n.startInteractorIndex,i),n.endInteractorIndex=this.getMaxValue(n.endInteractorIndex,i),this._enrichedInteractors[i].isSubComplex&&this._enrichedInteractors[i].subComponents&&(this._enrichedInteractors[i].subComponents.forEach(e=>t.push(e.identifier)),this._enrichedInteractors[i].expanded&&(n.startSubComponentIndex=-1,n.endSubComponentIndex=this._enrichedInteractors[i].subComponents.length-1));else if(this._enrichedInteractors[i].isSubComplex&&this._enrichedInteractors[i].subComponents&&this._enrichedInteractors[i].expanded)for(let t=0;t<this._enrichedInteractors[i].subComponents.length;t++)e.components[r].identifier===this._enrichedInteractors[i].subComponents[t].identifier&&(n.startInteractorIndex=this.getMinValue(n.startInteractorIndex,i),n.endInteractorIndex=this.getMaxValue(n.endInteractorIndex,i),n.startSubComponentIndex=this.getMinValue(n.startSubComponentIndex,t),n.endSubComponentIndex=this.getMaxValue(n.endSubComponentIndex,t));for(let i=0;i<this._enrichedInteractors.length;i++)this._enrichedInteractors[i].hidden||t.includes(this._enrichedInteractors[i].interactor.identifier)&&(n.startInteractorIndex=this.getMinValue(n.startInteractorIndex,i),n.endInteractorIndex=this.getMaxValue(n.endInteractorIndex,i));return n}doesLineCrossInteractorCell(e,t){return!(null==e.startInteractorIndex||null==e.endInteractorIndex||!(e.startInteractorIndex<t&&e.endInteractorIndex>t||e.startInteractorIndex<t&&e.endInteractorIndex===t&&this._enrichedInteractors[t].isSubComplex&&this._enrichedInteractors[t].expanded&&null!=e.startSubComponentIndex&&null!=e.endSubComponentIndex))}doesLineStartOnInteractorCell(e,t){return!(null==e.startInteractorIndex||e.startInteractorIndex!==t||this._enrichedInteractors[t].isSubComplex&&!e.complex.components.some(e=>this._enrichedInteractors[t].interactor.identifier===e.identifier))}doesLineEndOnInteractorCell(e,t){return null!=e.endInteractorIndex&&e.endInteractorIndex===t&&e.startInteractorIndex<t&&e.endInteractorIndex===t&&!(this._enrichedInteractors[t].isSubComplex&&this._enrichedInteractors[t].expanded&&null!=e.startSubComponentIndex&&null!=e.endSubComponentIndex)}doesLineCrossSubcomponentCell(e,t,n){return null!=e.startInteractorIndex&&null!=e.endInteractorIndex&&(e.startInteractorIndex<t&&e.endInteractorIndex>t||null!=e.startSubComponentIndex&&null!=e.endSubComponentIndex&&(e.startSubComponentIndex<n&&e.endSubComponentIndex>n||e.startInteractorIndex<t&&e.endSubComponentIndex>n||e.startSubComponentIndex<n&&e.endInteractorIndex>t))}doesLineStartOnSubcomponentCell(e,t,n){return null!=e.startInteractorIndex&&e.startInteractorIndex===t&&null!=e.startSubComponentIndex&&e.startSubComponentIndex===n&&!e.complex.components.some(e=>this._enrichedInteractors[t].interactor.identifier===e.identifier)}doesLineEndOnSubcomponentCell(e,t,n){return null!=e.endInteractorIndex&&e.endInteractorIndex===t&&null!=e.endSubComponentIndex&&e.endSubComponentIndex===n}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(a.H))},e.\u0275cmp=c.Xpm({type:e,selectors:[["cp-table-interactor-column"]],inputs:{complexSearch:"complexSearch",interactors:"interactors"},decls:3,vars:1,consts:[[1,"Complex-navigator"],[1,"interactors-table"],[4,"ngFor","ngForOf"],[4,"ngIf"],[2,"font-weight","bold"],[3,"title"],["target","_blank",3,"routerLink","queryParams"],["data-icon","1","title","Complexes containing this interactor",1,"icon","icon-functional","small"],["class","container",4,"ngIf"],["class","interactorType",4,"ngIf"],[1,"container"],[3,"title","click"],["data-icon","\uf078",1,"icon","icon-common",2,"font-size","small","margin-top","2px"],[1,"interactorType"],["target","_blank",3,"href"],["data-icon","x",1,"icon","icon-generic","small"],[3,"ngClass"],["class","stoichComponent",4,"ngIf"],[1,"stoichNum",3,"title"],[1,"stoichComponent"],[2,"background","#8b9394"],["data-icon","1","title","More complexes containing this interactor",1,"icon","icon-functional","small"],["data-icon","x","title","More information",1,"icon","icon-generic","small"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"table",1),c.YNc(2,re,4,2,"ng-container",2),c.qZA(),c.qZA()),2&e&&(c.xp6(2),c.Q6J("ngForOf",t.enrichedInteractors))},directives:[i.sg,i.O5,s.yS,i.mk],styles:["td[_ngcontent-%COMP%]:first-child{position:sticky;left:0;z-index:3;border:1px solid #0a494c;background-color:#e6e6e6;max-height:50px;min-height:50px;min-width:130px;max-width:130px;padding-left:5px}td[_ngcontent-%COMP%]{border:1px solid #0a494c;height:50px;max-width:140px;min-width:140px;font-size:small}#interactors-table[_ngcontent-%COMP%]{width:100%}.stoichNum[_ngcontent-%COMP%]{width:3ch;height:3ch;border-radius:3ch;background-color:#389198;text-align:center;color:#fff;font-size:small;z-index:2;margin-left:auto;margin-right:auto}.verticalLine[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;min-width:1%;max-width:1%;max-height:50%;min-height:50%;border-right:5px solid #389198;z-index:0}.transparentVerticalLine[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;min-width:1%;max-width:1%;max-height:50%;min-height:50%;border-right:0;z-index:0}"]}),e})(),ce=(()=>{class e{constructor(e){this.router=e}ngOnInit(){}get interactors(){return this._interactors}set interactors(e){this._interactors=e}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(s.F0))},e.\u0275cmp=c.Xpm({type:e,selectors:[["cp-table-structure"]],inputs:{complexSearch:"complexSearch",interactors:"interactors"},decls:5,vars:3,consts:[[1,"complexNavigatorTable"],[1,"header"],[3,"complexSearch"],[1,"interactors"],[3,"complexSearch","interactors"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._UZ(2,"cp-table-header",2),c.qZA(),c.TgZ(3,"div",3),c._UZ(4,"cp-table-interactor-column",4),c.qZA(),c.qZA()),2&e&&(c.xp6(2),c.Q6J("complexSearch",t.complexSearch),c.xp6(2),c.Q6J("complexSearch",t.complexSearch)("interactors",t.interactors))},directives:[M,oe],styles:[".complexNavigatorTable[_ngcontent-%COMP%]{max-height:750px;border-collapse:separate;overflow:scroll;width:100%}.header[_ngcontent-%COMP%]{position:sticky;top:0;width:100%;z-index:4;color:#e6e6e6}.interactors[_ngcontent-%COMP%]{width:100%;top:-20px;position:relative}"]}),e})(),se=(()=>{class e{constructor(e){this.router=e}ngOnInit(){}get interactors(){return this._interactors}set interactors(e){this._interactors=e}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(s.F0))},e.\u0275cmp=c.Xpm({type:e,selectors:[["cp-complex-navigator"]],inputs:{complexSearch:"complexSearch",interactors:"interactors"},decls:2,vars:2,consts:[[3,"complexSearch","interactors"]],template:function(e,t){1&e&&(c.TgZ(0,"div"),c._UZ(1,"cp-table-structure",0),c.qZA()),2&e&&(c.xp6(1),c.Q6J("complexSearch",t.complexSearch)("interactors",t.interactors))},directives:[ce],styles:[""]}),e})();var ae=n(8324);function le(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"cp-complex-filter",15),c.NdJ("onResetAllFilters",function(){return c.CHM(e),c.oxw(3).onResetAllFilters()})("onSpicesFilterChanged",function(t){return c.CHM(e),c.oxw(3).onSpicesFilterChanged(t)})("onBiologicalRoleFilterChanged",function(t){return c.CHM(e),c.oxw(3).onBiologicalRoleFilterChanged(t)})("onInteractorTypeFilterChanged",function(t){return c.CHM(e),c.oxw(3).onInteractorTypeFilterChanged(t)}),c.qZA()}if(2&e){const e=c.oxw(3);c.Q6J("spicesFilter",e.spicesFilter)("bioRoleFilter",e.bioRoleFilter)("interactorTypeFilter",e.interactorTypeFilter)("facets",e.complexSearch.facets)}}function pe(e,t){if(1&e&&(c.TgZ(0,"div",16),c._UZ(1,"cp-complex-list",17),c.qZA()),2&e){const e=c.oxw(3);c.xp6(1),c.Q6J("complexSearch",e.complexSearch)}}function de(e,t){if(1&e&&(c.TgZ(0,"div",18),c._UZ(1,"cp-complex-navigator",19),c.qZA()),2&e){const e=c.oxw(3);c.xp6(1),c.Q6J("complexSearch",e.complexSearch)("interactors",e.allInteractorsInComplexSearch)}}function ue(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",5),c.TgZ(1,"h2",6),c._uU(2),c.qZA(),c.TgZ(3,"div",7),c.YNc(4,le,1,4,"cp-complex-filter",8),c.qZA(),c.TgZ(5,"div",9),c.TgZ(6,"cp-complex-paginator",10),c.NdJ("onPageChange",function(t){return c.CHM(e),c.oxw(2).onPageChange(t)}),c.qZA(),c.TgZ(7,"div",11),c.TgZ(8,"input",12),c.NdJ("click",function(){return c.CHM(e),c.oxw(2).toggleDisplayType()}),c.qZA(),c.qZA(),c.YNc(9,pe,2,1,"div",13),c.YNc(10,de,2,2,"div",14),c.TgZ(11,"cp-complex-paginator",10),c.NdJ("onPageChange",function(t){return c.CHM(e),c.oxw(2).onPageChange(t)}),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=c.oxw(2);c.xp6(2),c.hij("Total number of results: ",e.complexSearch.totalNumberOfResults," "),c.xp6(2),c.Q6J("ngIf",e.spicesFilter&&e.bioRoleFilter&&e.interactorTypeFilter),c.xp6(2),c.Q6J("currentPageIndex",e.currentPageIndex)("lastPageIndex",e.lastPageIndex),c.xp6(3),c.Q6J("ngIf",0==e.DisplayType),c.xp6(1),c.Q6J("ngIf",e.DisplayType),c.xp6(1),c.Q6J("currentPageIndex",e.currentPageIndex)("lastPageIndex",e.lastPageIndex)}}function he(e,t){if(1&e&&(c.TgZ(0,"div",20),c.TgZ(1,"h2"),c._uU(2,"No Complex Portal results found"),c.qZA(),c.TgZ(3,"h3"),c._uU(4,"We're sorry but we couldn't find anything that matched your search for: "),c.TgZ(5,"b"),c._uU(6),c.qZA(),c.qZA(),c.TgZ(7,"h4"),c._uU(8,"Please consider refining your terms:"),c.qZA(),c.TgZ(9,"ul"),c.TgZ(10,"li"),c._uU(11,"Make sure all words are spelled correctly"),c.qZA(),c.TgZ(12,"li"),c._uU(13,"Try different keywords"),c.qZA(),c.TgZ(14,"li"),c._uU(15,"Be more precise: use gene or protein IDs, e.g. Ndc80 or Q04571"),c.qZA(),c.TgZ(16,"li"),c._uU(17,'Remove quotes around phrases to search for each word individually. bike shed will often show more results than "bike shed" '),c.qZA(),c.qZA(),c.qZA()),2&e){const e=c.oxw(2);c.xp6(6),c.Oqu(e.query)}}function ge(e,t){if(1&e&&(c.ynx(0),c.YNc(1,ue,12,8,"div",3),c.YNc(2,he,18,1,"div",4),c.BQk()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngIf",0!==e.complexSearch.totalNumberOfResults),c.xp6(1),c.Q6J("ngIf",0===e.complexSearch.totalNumberOfResults)}}function xe(e,t){if(1&e&&c._UZ(0,"cp-progress-spinner",21),2&e){const e=c.oxw();c.Q6J("query",e.query)}}let me=(()=>{class e{constructor(e,t,n,i,r){this.route=e,this.router=t,this.complexPortalService=n,this.titleService=i,this.googleAnalyticsService=r,this._pageSize=15,this._allInteractorsInComplexSearch=[],this.DisplayType=!0}ngOnInit(){this.titleService.setTitle("Complex Portal - Results"),this._allInteractorsInComplexSearch=[],this.route.queryParams.subscribe(e=>{this._query=e.query,this._spicesFilter=e.species?e.species.split("+"):[],this._bioRoleFilter=e.bioRole?e.bioRole.split("+"):[],this._interactorTypeFilter=e.interactorType?e.interactorType.split("+"):[],this._currentPageIndex=e.page?Number(e.page):1,this.requestComplexResults(),document.body.scrollTop=0})}ngAfterViewInit(){}requestComplexResults(){this.complexPortalService.findComplex(this.query,this.spicesFilter,this.bioRoleFilter,this.interactorTypeFilter,this.currentPageIndex,this.pageSize).subscribe(e=>{if(this.complexSearch=e,this._allInteractorsInComplexSearch=[],0!==this.complexSearch.totalNumberOfResults){this.lastPageIndex=Math.ceil(e.totalNumberOfResults/this.pageSize);for(let t=0;t<e.elements.length;t++)for(const n of e.elements[t].components)this._allInteractorsInComplexSearch.some(e=>e.identifier===n.identifier)||this._allInteractorsInComplexSearch.push(new o(n.identifier,n.identifierLink,n.name,n.description,n.interactorType))}r.R.hide()})}reloadPage(){const e={};e.query=this._query,e.page=this._currentPageIndex,void 0!==this._spicesFilter&&0!==this._spicesFilter.length&&(e.species=this.prepareFiltersForParams(this.spicesFilter)),void 0!==this._bioRoleFilter&&0!==this._bioRoleFilter.length&&(e.bioRole=this.prepareFiltersForParams(this._bioRoleFilter)),void 0!==this._interactorTypeFilter&&0!==this._interactorTypeFilter.length&&(e.interactorType=this.prepareFiltersForParams(this._interactorTypeFilter)),this.router.navigate([],{queryParams:e}),r.R.hide();const t=this.getFilterCount();1<t&&this.googleAnalyticsService.fireMultiFilterEvent(t.toString())}prepareFiltersForParams(e){return e.toString().replace(/,/g,"+")}getFilterCount(){return this._spicesFilter.length+this._interactorTypeFilter.length+this._bioRoleFilter.length}onPageChange(e){this.currentPageIndex=e,this.reloadPage()}onResetAllFilters(){this.spicesFilter=[],this.bioRoleFilter=[],this.interactorTypeFilter=[],this.currentPageIndex=1,this.reloadPage()}onSpicesFilterChanged(e){this.spicesFilter=e,this.currentPageIndex=1,this.reloadPage()}onBiologicalRoleFilterChanged(e){this.bioRoleFilter=e,this.currentPageIndex=1,this.reloadPage()}onInteractorTypeFilterChanged(e){this.interactorTypeFilter=e,this.currentPageIndex=1,this.reloadPage()}get query(){return this._query}set query(e){this._query=e}get currentPageIndex(){return this._currentPageIndex}set currentPageIndex(e){this._currentPageIndex=e}get complexSearch(){return this._complexSearch}set complexSearch(e){this._complexSearch=e}get lastPageIndex(){return this._lastPageIndex}set lastPageIndex(e){this._lastPageIndex=e}get pageSize(){return this._pageSize}set pageSize(e){this._pageSize=e}get spicesFilter(){return this._spicesFilter}set spicesFilter(e){this._spicesFilter=e}get bioRoleFilter(){return this._bioRoleFilter}set bioRoleFilter(e){this._bioRoleFilter=e}get interactorTypeFilter(){return this._interactorTypeFilter}set interactorTypeFilter(e){this._interactorTypeFilter=e}get allInteractorsInComplexSearch(){return this._allInteractorsInComplexSearch}set allInteractorsInComplexSearch(e){this._allInteractorsInComplexSearch=e}toggleDisplayType(){this.DisplayType=!this.DisplayType}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(s.gz),c.Y36(s.F0),c.Y36(a.H),c.Y36(l.Dx),c.Y36(p.y))},e.\u0275cmp=c.Xpm({type:e,selectors:[["cp-complex-results"]],decls:4,vars:2,consts:[[1,"margin-top-large","margin-bottom-large","row"],[4,"ngIf","ngIfElse"],["loadingSpinner",""],["class","columns medium-12",4,"ngIf"],["class","columns medium-12 callout alert",4,"ngIf"],[1,"columns","medium-12"],[1,"padding-left-large"],[1,"columns","medium-4"],[3,"spicesFilter","bioRoleFilter","interactorTypeFilter","facets","onResetAllFilters","onSpicesFilterChanged","onBiologicalRoleFilterChanged","onInteractorTypeFilterChanged",4,"ngIf"],[1,"columns","medium-8"],[3,"currentPageIndex","lastPageIndex","onPageChange"],[1,"displayButton",2,"text-align","center"],["type","submit","name","submit","value","View list",1,"button",3,"click"],["class","listOfResults",4,"ngIf"],["class","Complex-navigator",4,"ngIf"],[3,"spicesFilter","bioRoleFilter","interactorTypeFilter","facets","onResetAllFilters","onSpicesFilterChanged","onBiologicalRoleFilterChanged","onInteractorTypeFilterChanged"],[1,"listOfResults"],[3,"complexSearch"],[1,"Complex-navigator"],[3,"complexSearch","interactors"],[1,"columns","medium-12","callout","alert"],[3,"query"]],template:function(e,t){if(1&e&&(c.TgZ(0,"div",0),c.YNc(1,ge,3,2,"ng-container",1),c.YNc(2,xe,1,1,"ng-template",null,2,c.W1O),c.qZA()),2&e){const e=c.MAs(3);c.xp6(1),c.Q6J("ngIf",t.complexSearch)("ngIfElse",e)}},directives:[i.O5,m,P,Q,se,ae.O],styles:[""]}),e})();var fe=n(45103);let Ie=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[s.Bz.forChild([{path:"",component:me}]),i.ez,fe.L]]}),e})()}}]);