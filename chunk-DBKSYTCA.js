import{a as qf,b as Wf,c as jf,d as px}from"./chunk-IOPNKNVR.js";import{a as Gf,q as dx}from"./chunk-XO2EEWBG.js";import{m as Po,o as lx,p as fx}from"./chunk-DXHSLUOH.js";import{M as hx,a as ja,b as ax,c as ai,g as bi,h as Qu}from"./chunk-UTZTMAPQ.js";import{a as mx}from"./chunk-LSI53L4Q.js";import{$a as tx,Ha as Ku,Ja as yr,Jb as ox,La as Yt,Ma as J1,Mb as sx,Nb as ux,Oa as B0,Ob as cx,Pa as ex,Y as Y1,a as L0,b as F0,ba as Z1,c as tl,ca as zf,e as ys,f as eA,g as Wa,h as Xe,ha as K1,i as U0,j as $1,la as Q1,ma as qn,mb as rx,rb as nx,z as X1,zb as ix}from"./chunk-3HN62C7F.js";var xx=ys((Ju,xs)=>{var V0=function(){"use strict";var t=function(i){"use strict";function r(Re){return typeof Re=="function"||typeof Re=="object"&&Re!==null}function e(Re){return typeof Re=="function"}function o(Re){return typeof Re=="object"&&Re!==null}var s;Array.isArray?s=Array.isArray:s=function(Re){return Object.prototype.toString.call(Re)==="[object Array]"};var d=s,p=0,x,l,_=function(Ne,ze){R[p]=Ne,R[p+1]=ze,p+=2,p===2&&(l?l(D):N())};function v(Re){l=Re}function c(Re){_=Re}var h=typeof window<"u"?window:void 0,f=h||{},m=f.MutationObserver||f.WebKitMutationObserver,b=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",w=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function C(){return function(){process.nextTick(D)}}function E(){return function(){x(D)}}function S(){var Re=0,Ne=new m(D),ze=document.createTextNode("");return Ne.observe(ze,{characterData:!0}),function(){ze.data=Re=++Re%2}}function M(){var Re=new MessageChannel;return Re.port1.onmessage=D,function(){Re.port2.postMessage(0)}}function A(){return function(){setTimeout(D,1)}}var R=new Array(1e3);function D(){for(var Re=0;Re<p;Re+=2){var Ne=R[Re],ze=R[Re+1];Ne(ze),R[Re]=void 0,R[Re+1]=void 0}p=0}var N;b?N=C():m?N=S():w?N=M():N=A();function I(Re,Ne){var ze=this,et=new this.constructor(K);et[ie]===void 0&&yt(et);var it=ze._state;if(it){var at=arguments[it-1];_(function(){Ie(it,et,at,ze._result)})}else Fe(ze,et,Re,Ne);return et}var L=I;function Y(Re){var Ne=this;if(Re&&typeof Re=="object"&&Re.constructor===Ne)return Re;var ze=new Ne(K);return Z(ze,Re),ze}var J=Y,ie=Math.random().toString(36).substring(16);function K(){}var Q=void 0,ne=1,ue=2,fe=new Qe;function ge(){return new TypeError("You cannot resolve a promise with itself")}function ye(){return new TypeError("A promises callback cannot return that same promise.")}function pe(Re){try{return Re.then}catch(Ne){return fe.error=Ne,fe}}function de(Re,Ne,ze,et){try{Re.call(Ne,ze,et)}catch(it){return it}}function he(Re,Ne,ze){_(function(et){var it=!1,at=de(ze,Ne,function(vt){it||(it=!0,Ne!==vt?Z(et,vt):Ee(et,vt))},function(vt){it||(it=!0,De(et,vt))},"Settle: "+(et._label||" unknown promise"));!it&&at&&(it=!0,De(et,at))},Re)}function _e(Re,Ne){Ne._state===ne?Ee(Re,Ne._result):Ne._state===ue?De(Re,Ne._result):Fe(Ne,void 0,function(ze){Z(Re,ze)},function(ze){De(Re,ze)})}function ve(Re,Ne,ze){Ne.constructor===Re.constructor&&ze===L&&constructor.resolve===J?_e(Re,Ne):ze===fe?De(Re,fe.error):ze===void 0?Ee(Re,Ne):e(ze)?he(Re,Ne,ze):Ee(Re,Ne)}function Z(Re,Ne){Re===Ne?De(Re,ge()):r(Ne)?ve(Re,Ne,pe(Ne)):Ee(Re,Ne)}function be(Re){Re._onerror&&Re._onerror(Re._result),Ue(Re)}function Ee(Re,Ne){Re._state===Q&&(Re._result=Ne,Re._state=ne,Re._subscribers.length!==0&&_(Ue,Re))}function De(Re,Ne){Re._state===Q&&(Re._state=ue,Re._result=Ne,_(be,Re))}function Fe(Re,Ne,ze,et){var it=Re._subscribers,at=it.length;Re._onerror=null,it[at]=Ne,it[at+ne]=ze,it[at+ue]=et,at===0&&Re._state&&_(Ue,Re)}function Ue(Re){var Ne=Re._subscribers,ze=Re._state;if(Ne.length!==0){for(var et,it,at=Re._result,vt=0;vt<Ne.length;vt+=3)et=Ne[vt],it=Ne[vt+ze],et?Ie(ze,et,it,at):it(at);Re._subscribers.length=0}}function Qe(){this.error=null}var Ke=new Qe;function Te(Re,Ne){try{return Re(Ne)}catch(ze){return Ke.error=ze,Ke}}function Ie(Re,Ne,ze,et){var it=e(ze),at,vt,jt,Nt;if(it){if(at=Te(ze,et),at===Ke?(Nt=!0,vt=at.error,at=null):jt=!0,Ne===at){De(Ne,ye());return}}else at=et,jt=!0;Ne._state!==Q||(it&&jt?Z(Ne,at):Nt?De(Ne,vt):Re===ne?Ee(Ne,at):Re===ue&&De(Ne,at))}function ke(Re,Ne){try{Ne(function(et){Z(Re,et)},function(et){De(Re,et)})}catch(ze){De(Re,ze)}}var nt=0;function dt(){return nt++}function yt(Re){Re[ie]=nt++,Re._state=void 0,Re._result=void 0,Re._subscribers=[]}function gt(Re){return new It(this,Re).promise}var xt=gt;function tt(Re){var Ne=this;return d(Re)?new Ne(function(ze,et){for(var it=Re.length,at=0;at<it;at++)Ne.resolve(Re[at]).then(ze,et)}):new Ne(function(ze,et){et(new TypeError("You must pass an array to race."))})}var pt=tt;function At(Re){var Ne=this,ze=new Ne(K);return De(ze,Re),ze}var Tt=At;function Ct(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function Bt(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var nr=$t;function $t(Re){this[ie]=dt(),this._result=this._state=void 0,this._subscribers=[],K!==Re&&(typeof Re!="function"&&Ct(),this instanceof $t?ke(this,Re):Bt())}$t.all=xt,$t.race=pt,$t.resolve=J,$t.reject=Tt,$t._setScheduler=v,$t._setAsap=c,$t._asap=_,$t.prototype={constructor:$t,then:L,catch:function(Re){return this.then(null,Re)}};var It=Lt;function Lt(Re,Ne){this._instanceConstructor=Re,this.promise=new Re(K),this.promise[ie]||yt(this.promise),Array.isArray(Ne)?(this._input=Ne,this.length=Ne.length,this._remaining=Ne.length,this._result=new Array(this.length),this.length===0?Ee(this.promise,this._result):(this.length=this.length||0,this._enumerate(),this._remaining===0&&Ee(this.promise,this._result))):De(this.promise,Pt())}function Pt(){return new Error("Array Methods must be provided an Array")}Lt.prototype._enumerate=function(){for(var Re=this.length,Ne=this._input,ze=0;this._state===Q&&ze<Re;ze++)this._eachEntry(Ne[ze],ze)},Lt.prototype._eachEntry=function(Re,Ne){var ze=this._instanceConstructor,et=ze.resolve;if(et===J){var it=pe(Re);if(it===L&&Re._state!==Q)this._settledAt(Re._state,Ne,Re._result);else if(typeof it!="function")this._remaining--,this._result[Ne]=Re;else if(ze===nr){var at=new ze(K);ve(at,Re,it),this._willSettleAt(at,Ne)}else this._willSettleAt(new ze(function(vt){vt(Re)}),Ne)}else this._willSettleAt(et(Re),Ne)},Lt.prototype._settledAt=function(Re,Ne,ze){var et=this.promise;et._state===Q&&(this._remaining--,Re===ue?De(et,ze):this._result[Ne]=ze),this._remaining===0&&Ee(et,this._result)},Lt.prototype._willSettleAt=function(Re,Ne){var ze=this;Fe(Re,void 0,function(et){ze._settledAt(ne,Ne,et)},function(et){ze._settledAt(ue,Ne,et)})};function He(){var Re;if(typeof global<"u")Re=global;else if(typeof self<"u")Re=self;else try{Re=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var Ne=Re.Promise;Ne&&Object.prototype.toString.call(Ne.resolve())==="[object Promise]"&&!Ne.cast||(Re.Promise=nr)}var Be=He,Ge={Promise:nr,polyfill:Be};Be(),i.ES6Promise=Ge},n;if(typeof window<"u"&&window&&window.Promise)n=window.Promise;else if(typeof global<"u"&&global&&global.Promise)n=global.Promise;else{var a={};t(a),n=a.ES6Promise.Promise}var u={};(function(i,r,e){var o={function:!0,object:!0};function s(re){return re&&re.Object===Object?re:null}var d=o[typeof Ju]&&Ju&&!Ju.nodeType?Ju:null,p=o[typeof xs]&&xs&&!xs.nodeType?xs:null,x=s(d&&p&&typeof global=="object"&&global),l=s(o[typeof self]&&self),_=s(o[typeof window]&&window),v=p&&p.exports===d?d:null,c=s(o[typeof this]&&this),h=x||_!==(c&&c.window)&&_||l||c||Function("return this")(),f={internals:{},config:{Promise:r},helpers:{}},m=f.helpers.noop=function(){},b=f.helpers.identity=function(re){return re},w=f.helpers.defaultNow=Date.now,C=f.helpers.defaultComparer=function(re,te){return gr(re,te)},E=f.helpers.defaultSubComparer=function(re,te){return re>te?1:re<te?-1:0},S=f.helpers.defaultKeySerializer=function(re){return re.toString()},M=f.helpers.defaultError=function(re){throw re},A=f.helpers.isPromise=function(re){return!!re&&typeof re.subscribe!="function"&&typeof re.then=="function"},R=f.helpers.isFunction=function(){var re=function(te){return typeof te=="function"||!1};return re(/x/)&&(re=function(te){return typeof te=="function"&&toString.call(te)=="[object Function]"}),re}();function D(re){for(var te=re.length,ae=new Array(te),le=0;le<te;le++)ae[le]=re[le];return ae}var N={e:{}};function I(re){return function(){try{return re.apply(this,arguments)}catch(ae){return N.e=ae,N}}}var L=f.internals.tryCatch=function(te){if(!R(te))throw new TypeError("fn must be a function");return I(te)};function Y(re){throw re}f.config.longStackSupport=!1;var J=!1,ie=L(function(){throw new Error})();J=!!ie.e&&!!ie.e.stack;var K=pe(),Q,ne="From previous event:";function ue(re,te){if(J&&te.stack&&typeof re=="object"&&re!==null&&re.stack&&re.stack.indexOf(ne)===-1){for(var ae=[],le=te;le;le=le.source)le.stack&&ae.unshift(le.stack);ae.unshift(re.stack);var xe=ae.join(`
`+ne+`
`);re.stack=fe(xe)}}function fe(re){for(var te=re.split(`
`),ae=[],le=0,xe=te.length;le<xe;le++){var Le=te[le];!ge(Le)&&!ye(Le)&&Le&&ae.push(Le)}return ae.join(`
`)}function ge(re){var te=de(re);if(!te)return!1;var ae=te[0],le=te[1];return ae===Q&&le>=K&&le<=Q5}function ye(re){return re.indexOf("(module.js:")!==-1||re.indexOf("(node.js:")!==-1}function pe(){if(J)try{throw new Error}catch(le){var re=le.stack.split(`
`),te=re[0].indexOf("@")>0?re[1]:re[2],ae=de(te);return ae?(Q=ae[0],ae[1]):void 0}}function de(re){var te=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(re);if(te)return[te[1],Number(te[2])];var ae=/at ([^ ]+):(\d+):(?:\d+)$/.exec(re);if(ae)return[ae[1],Number(ae[2])];var le=/.*@(.+):(\d+)$/.exec(re);if(le)return[le[1],Number(le[2])]}var he=f.EmptyError=function(){this.message="Sequence contains no elements.",Error.call(this)};he.prototype=Object.create(Error.prototype),he.prototype.name="EmptyError";var _e=f.ObjectDisposedError=function(){this.message="Object has been disposed",Error.call(this)};_e.prototype=Object.create(Error.prototype),_e.prototype.name="ObjectDisposedError";var ve=f.ArgumentOutOfRangeError=function(){this.message="Argument out of range",Error.call(this)};ve.prototype=Object.create(Error.prototype),ve.prototype.name="ArgumentOutOfRangeError";var Z=f.NotSupportedError=function(re){this.message=re||"This operation is not supported",Error.call(this)};Z.prototype=Object.create(Error.prototype),Z.prototype.name="NotSupportedError";var be=f.NotImplementedError=function(re){this.message=re||"This operation is not implemented",Error.call(this)};be.prototype=Object.create(Error.prototype),be.prototype.name="NotImplementedError";var Ee=f.helpers.notImplemented=function(){throw new be},De=f.helpers.notSupported=function(){throw new Z},Fe=typeof Symbol=="function"&&Symbol.iterator||"_es6shim_iterator_";h.Set&&typeof new h.Set()["@@iterator"]=="function"&&(Fe="@@iterator");var Ue=f.doneEnumerator={done:!0,value:e},Qe=f.helpers.isIterable=function(re){return re&&re[Fe]!==e},Ke=f.helpers.isArrayLike=function(re){return re&&re.length!==e};f.helpers.iterator=Fe;var Te=f.internals.bindCallback=function(re,te,ae){if(typeof te>"u")return re;switch(ae){case 0:return function(){return re.call(te)};case 1:return function(le){return re.call(te,le)};case 2:return function(le,xe){return re.call(te,le,xe)};case 3:return function(le,xe,Le){return re.call(te,le,xe,Le)}}return function(){return re.apply(te,arguments)}},Ie=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],ke=Ie.length,nt="[object Arguments]",dt="[object Array]",yt="[object Boolean]",gt="[object Date]",xt="[object Error]",tt="[object Function]",pt="[object Map]",At="[object Number]",Tt="[object Object]",Ct="[object RegExp]",Bt="[object Set]",nr="[object String]",$t="[object WeakMap]",It="[object ArrayBuffer]",Lt="[object Float32Array]",Pt="[object Float64Array]",He="[object Int8Array]",Be="[object Int16Array]",Ge="[object Int32Array]",Re="[object Uint8Array]",Ne="[object Uint8ClampedArray]",ze="[object Uint16Array]",et="[object Uint32Array]",it={};it[Lt]=it[Pt]=it[He]=it[Be]=it[Ge]=it[Re]=it[Ne]=it[ze]=it[et]=!0,it[nt]=it[dt]=it[It]=it[yt]=it[gt]=it[xt]=it[tt]=it[pt]=it[At]=it[Tt]=it[Ct]=it[Bt]=it[nr]=it[$t]=!1;var at=Object.prototype,vt=at.hasOwnProperty,jt=at.toString,Nt=Math.pow(2,53)-1,Dt=Object.keys||function(){var re=Object.prototype.hasOwnProperty,te=!{toString:null}.propertyIsEnumerable("toString"),ae=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],le=ae.length;return function(xe){if(typeof xe!="object"&&(typeof xe!="function"||xe===null))throw new TypeError("Object.keys called on non-object");var Le=[],Je,lt;for(Je in xe)re.call(xe,Je)&&Le.push(Je);if(te)for(lt=0;lt<le;lt++)re.call(xe,ae[lt])&&Le.push(ae[lt]);return Le}}();function Gt(re,te,ae,le,xe,Le){var Je=Dt(re),lt=Je.length,zt=Dt(te),tr=zt.length;if(lt!==tr&&!le)return!1;for(var Qt=lt,ar;Qt--;)if(ar=Je[Qt],!(le?ar in te:vt.call(te,ar)))return!1;for(var zr=le;++Qt<lt;){ar=Je[Qt];var Yn=re[ar],Ei=te[ar],oi;if(!(oi===e?ae(Yn,Ei,le,xe,Le):oi))return!1;zr||(zr=ar==="constructor")}if(!zr){var Jn=re.constructor,ki=te.constructor;if(Jn!==ki&&"constructor"in re&&"constructor"in te&&!(typeof Jn=="function"&&Jn instanceof Jn&&typeof ki=="function"&&ki instanceof ki))return!1}return!0}function or(re,te,ae){switch(ae){case yt:case gt:return+re==+te;case xt:return re.name===te.name&&re.message===te.message;case At:return re!==+re?te!==+te:re===+te;case Ct:case nr:return re===te+""}return!1}var Jt=f.internals.isObject=function(re){var te=typeof re;return!!re&&(te==="object"||te==="function")};function pr(re){return!!re&&typeof re=="object"}function lr(re){return typeof re=="number"&&re>-1&&re%1===0&&re<=Nt}var Lr=function(){try{Object({toString:0}+"")}catch{return function(){return!1}}return function(re){return typeof re.toString!="function"&&typeof(re+"")=="string"}}();function Or(re){return pr(re)&&lr(re.length)&&!!it[jt.call(re)]}var Sn=Array.isArray||function(re){return pr(re)&&lr(re.length)&&jt.call(re)===dt};function Ht(re,te){for(var ae=-1,le=re.length;++ae<le;)if(te(re[ae],ae,re))return!0;return!1}function sr(re,te,ae,le,xe,Le){var Je=-1,lt=re.length,zt=te.length;if(lt!==zt&&!(le&&zt>lt))return!1;for(;++Je<lt;){var tr=re[Je],Qt=te[Je],ar;if(ar!==e){if(ar)continue;return!1}if(le){if(!Ht(te,function(zr){return tr===zr||ae(tr,zr,le,xe,Le)}))return!1}else if(!(tr===Qt||ae(tr,Qt,le,xe,Le)))return!1}return!0}function Sr(re,te,ae,le,xe,Le){var Je=Sn(re),lt=Sn(te),zt=dt,tr=dt;Je||(zt=jt.call(re),zt===nt?zt=Tt:zt!==Tt&&(Je=Or(re))),lt||(tr=jt.call(te),tr===nt&&(tr=Tt));var Qt=zt===Tt&&!Lr(re),ar=tr===Tt&&!Lr(te),zr=zt===tr;if(zr&&!(Je||Qt))return or(re,te,zt);if(!le){var Yn=Qt&&vt.call(re,"__wrapped__"),Ei=ar&&vt.call(te,"__wrapped__");if(Yn||Ei)return ae(Yn?re.value():re,Ei?te.value():te,le,xe,Le)}if(!zr)return!1;xe||(xe=[]),Le||(Le=[]);for(var oi=xe.length;oi--;)if(xe[oi]===re)return Le[oi]===te;xe.push(re),Le.push(te);var Jn=(Je?sr:Gt)(re,te,ae,le,xe,Le);return xe.pop(),Le.pop(),Jn}function Fr(re,te,ae,le,xe){return re===te?!0:re==null||te==null||!Jt(re)&&!pr(te)?re!==re&&te!==te:Sr(re,te,Fr,ae,le,xe)}var gr=f.internals.isEqual=function(re,te){return Fr(re,te)},tn={}.hasOwnProperty,Vn=Array.prototype.slice,Rt=f.internals.inherits=function(re,te){function ae(){this.constructor=re}ae.prototype=te.prototype,re.prototype=new ae},Ur=f.internals.addProperties=function(re){for(var te=[],ae=1,le=arguments.length;ae<le;ae++)te.push(arguments[ae]);for(var xe=0,Le=te.length;xe<Le;xe++){var Je=te[xe];for(var lt in Je)re[lt]=Je[lt]}},Zr=f.internals.addRef=function(re,te){return new oo(function(ae){return new kr(te.getDisposable(),re.subscribe(ae))})};function xn(re,te){for(var ae=new Array(re),le=0;le<re;le++)ae[le]=te();return ae}var Tr=f.CompositeDisposable=function(){var re=[],te,ae;if(Array.isArray(arguments[0]))re=arguments[0];else for(ae=arguments.length,re=new Array(ae),te=0;te<ae;te++)re[te]=arguments[te];this.disposables=re,this.isDisposed=!1,this.length=re.length},Wn=Tr.prototype;Wn.add=function(re){this.isDisposed?re.dispose():(this.disposables.push(re),this.length++)},Wn.remove=function(re){var te=!1;if(!this.isDisposed){var ae=this.disposables.indexOf(re);ae!==-1&&(te=!0,this.disposables.splice(ae,1),this.length--,re.dispose())}return te},Wn.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var re=this.disposables.length,te=new Array(re),ae=0;ae<re;ae++)te[ae]=this.disposables[ae];for(this.disposables=[],this.length=0,ae=0;ae<re;ae++)te[ae].dispose()}};var mn=f.Disposable=function(re){this.isDisposed=!1,this.action=re||m};mn.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)};var Pr=mn.create=function(re){return new mn(re)},qr=mn.empty={dispose:m},Hn=mn.isDisposable=function(re){return re&&R(re.dispose)},nn=mn.checkDisposed=function(re){if(re.isDisposed)throw new _e},jn=mn._fixup=function(re){return Hn(re)?re:qr},dr=f.SingleAssignmentDisposable=function(){this.isDisposed=!1,this.current=null};dr.prototype.getDisposable=function(){return this.current},dr.prototype.setDisposable=function(re){if(this.current)throw new Error("Disposable has already been assigned");var te=this.isDisposed;!te&&(this.current=re),te&&re&&re.dispose()},dr.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var re=this.current;this.current=null,re&&re.dispose()}};var Br=f.SerialDisposable=function(){this.isDisposed=!1,this.current=null};Br.prototype.getDisposable=function(){return this.current},Br.prototype.setDisposable=function(re){var te=this.isDisposed;if(!te){var ae=this.current;this.current=re}ae&&ae.dispose(),te&&re&&re.dispose()},Br.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var re=this.current;this.current=null}re&&re.dispose()};var kr=f.BinaryDisposable=function(re,te){this._first=re,this._second=te,this.isDisposed=!1};kr.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var re=this._first;this._first=null,re&&re.dispose();var te=this._second;this._second=null,te&&te.dispose()}};var Ar=f.NAryDisposable=function(re){this._disposables=re,this.isDisposed=!1};Ar.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var re=0,te=this._disposables.length;re<te;re++)this._disposables[re].dispose();this._disposables.length=0}};var ni=f.RefCountDisposable=function(){function re(ae){this.disposable=ae,this.disposable.count++,this.isInnerDisposed=!1}re.prototype.dispose=function(){!this.disposable.isDisposed&&!this.isInnerDisposed&&(this.isInnerDisposed=!0,this.disposable.count--,this.disposable.count===0&&this.disposable.isPrimaryDisposed&&(this.disposable.isDisposed=!0,this.disposable.underlyingDisposable.dispose()))};function te(ae){this.underlyingDisposable=ae,this.isDisposed=!1,this.isPrimaryDisposed=!1,this.count=0}return te.prototype.dispose=function(){!this.isDisposed&&!this.isPrimaryDisposed&&(this.isPrimaryDisposed=!0,this.count===0&&(this.isDisposed=!0,this.underlyingDisposable.dispose()))},te.prototype.getDisposable=function(){return this.isDisposed?qr:new re(this)},te}(),kn=f.internals.ScheduledItem=function(re,te,ae,le,xe){this.scheduler=re,this.state=te,this.action=ae,this.dueTime=le,this.comparer=xe||E,this.disposable=new dr};kn.prototype.invoke=function(){this.disposable.setDisposable(this.invokeCore())},kn.prototype.compareTo=function(re){return this.comparer(this.dueTime,re.dueTime)},kn.prototype.isCancelled=function(){return this.disposable.isDisposed},kn.prototype.invokeCore=function(){return jn(this.action(this.scheduler,this.state))};var $r=f.Scheduler=function(){function re(){}re.isScheduler=function(ae){return ae instanceof re};var te=re.prototype;return te.schedule=function(ae,le){throw new be},te.scheduleFuture=function(ae,le,xe){var Le=le;return Le instanceof Date&&(Le=Le-this.now()),Le=re.normalize(Le),Le===0?this.schedule(ae,xe):this._scheduleFuture(ae,Le,xe)},te._scheduleFuture=function(ae,le,xe){throw new be},re.now=w,re.prototype.now=w,re.normalize=function(ae){return ae<0&&(ae=0),ae},re}(),bn=$r.normalize,on=$r.isScheduler;(function(re){function te(le,xe){var Le=xe[0],Je=xe[1],lt=new Tr;return Je(Le,zt),lt;function zt(tr){var Qt=!1,ar=!1,zr=le.schedule(tr,Yn);ar||(lt.add(zr),Qt=!0);function Yn(Ei,oi){return Qt?lt.remove(zr):ar=!0,Je(oi,zt),qr}}}function ae(le,xe){var Le=xe[0],Je=xe[1],lt=new Tr;return Je(Le,zt),lt;function zt(tr,Qt){var ar=!1,zr=!1,Yn=le.scheduleFuture(tr,Qt,Ei);zr||(lt.add(Yn),ar=!0);function Ei(oi,Jn){return ar?lt.remove(Yn):zr=!0,Je(Jn,zt),qr}}}re.scheduleRecursive=function(le,xe){return this.schedule([le,xe],te)},re.scheduleRecursiveFuture=function(le,xe,Le){return this.scheduleFuture([le,Le],xe,ae)}})($r.prototype),function(re){re.schedulePeriodic=function(te,ae,le){if(typeof h.setInterval>"u")throw new Z;ae=bn(ae);var xe=te,Le=h.setInterval(function(){xe=le(xe)},ae);return Pr(function(){h.clearInterval(Le)})}}($r.prototype);var Ui=function(re){Rt(te,re);function te(){re.call(this)}return te.prototype.schedule=function(ae,le){return jn(le(this,ae))},te}($r),ln=$r.immediate=new Ui,Ai=function(re){var te;function ae(){for(;te.length>0;){var xe=te.dequeue();!xe.isCancelled()&&xe.invoke()}}Rt(le,re);function le(){re.call(this)}return le.prototype.schedule=function(xe,Le){var Je=new kn(this,xe,Le,this.now());if(te)te.enqueue(Je);else{te=new Xo(4),te.enqueue(Je);var lt=L(ae)();te=null,lt===N&&Y(lt.e)}return Je.disposable},le.prototype.scheduleRequired=function(){return!te},le}($r),fn=$r.currentThread=new Ai,Ji=f.internals.SchedulePeriodicRecursive=function(){function re(ae){return function(xe,Le){Le(0,ae._period);var Je=L(ae._action)(ae._state);Je===N&&(ae._cancel.dispose(),Y(Je.e)),ae._state=Je}}function te(ae,le,xe,Le){this._scheduler=ae,this._state=le,this._period=xe,this._action=Le}return te.prototype.start=function(){var ae=new dr;return this._cancel=ae,ae.setDisposable(this._scheduler.scheduleRecursiveFuture(0,this._period,re(this))),ae},te}(),ii,eo,Bi=function(){var re,te=m;if(h.setTimeout)re=h.setTimeout,te=h.clearTimeout;else if(h.WScript)re=function(ae,le){h.WScript.Sleep(le),ae()};else throw new Z;return{setTimeout:re,clearTimeout:te}}(),to=Bi.setTimeout,ha=Bi.clearTimeout;(function(){var re=1,te={},ae=!1;eo=function(Qt){delete te[Qt]};function le(Qt){if(ae)to(function(){le(Qt)},0);else{var ar=te[Qt];if(ar){ae=!0;var zr=L(ar)();eo(Qt),ae=!1,zr===N&&Y(zr.e)}}}var xe=new RegExp("^"+String(toString).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),Le=typeof(Le=x&&v&&x.setImmediate)=="function"&&!xe.test(Le)&&Le;function Je(){if(!h.postMessage||h.importScripts)return!1;var Qt=!1,ar=h.onmessage;return h.onmessage=function(){Qt=!0},h.postMessage("","*"),h.onmessage=ar,Qt}if(R(Le))ii=function(Qt){var ar=re++;return te[ar]=Qt,Le(function(){le(ar)}),ar};else if(typeof process<"u"&&{}.toString.call(process)==="[object process]")ii=function(Qt){var ar=re++;return te[ar]=Qt,process.nextTick(function(){le(ar)}),ar};else if(Je()){var lt="ms.rx.schedule"+Math.random(),zt=function(Qt){typeof Qt.data=="string"&&Qt.data.substring(0,lt.length)===lt&&le(Qt.data.substring(lt.length))};h.addEventListener("message",zt,!1),ii=function(Qt){var ar=re++;return te[ar]=Qt,h.postMessage(lt+ar,"*"),ar}}else if(h.MessageChannel){var tr=new h.MessageChannel;tr.port1.onmessage=function(Qt){le(Qt.data)},ii=function(Qt){var ar=re++;return te[ar]=Qt,tr.port2.postMessage(ar),ar}}else"document"in h&&"onreadystatechange"in h.document.createElement("script")?ii=function(Qt){var ar=h.document.createElement("script"),zr=re++;return te[zr]=Qt,ar.onreadystatechange=function(){le(zr),ar.onreadystatechange=null,ar.parentNode.removeChild(ar),ar=null},h.document.documentElement.appendChild(ar),zr}:ii=function(Qt){var ar=re++;return te[ar]=Qt,to(function(){le(ar)},0),ar}})();var di=function(re){Rt(te,re);function te(){re.call(this)}function ae(Je,lt,zt,tr){return function(){Je.setDisposable(mn._fixup(lt(zt,tr)))}}function le(Je){this._id=Je,this.isDisposed=!1}le.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,eo(this._id))};function xe(Je){this._id=Je,this.isDisposed=!1}xe.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,ha(this._id))},te.prototype.schedule=function(Je,lt){var zt=new dr,tr=ii(ae(zt,lt,this,Je));return new kr(zt,new le(tr))},te.prototype._scheduleFuture=function(Je,lt,zt){if(lt===0)return this.schedule(Je,zt);var tr=new dr,Qt=to(ae(tr,zt,this,Je),lt);return new kr(tr,new xe(Qt))};function Le(Je,lt,zt){return function(){lt(Je,zt)}}return te.prototype.scheduleLongRunning=function(Je,lt){var zt=Pr(m);return ii(Le(Je,lt,zt)),zt},te}($r),ro=$r.default=$r.async=new di;function $o(re,te){this.id=re,this.value=te}$o.prototype.compareTo=function(re){var te=this.value.compareTo(re.value);return te===0&&(te=this.id-re.id),te};var Xo=f.internals.PriorityQueue=function(re){this.items=new Array(re),this.length=0},an=Xo.prototype;an.isHigherPriority=function(re,te){return this.items[re].compareTo(this.items[te])<0},an.percolate=function(re){if(!(re>=this.length||re<0)){var te=re-1>>1;if(!(te<0||te===re)&&this.isHigherPriority(re,te)){var ae=this.items[re];this.items[re]=this.items[te],this.items[te]=ae,this.percolate(te)}}},an.heapify=function(re){if(+re||(re=0),!(re>=this.length||re<0)){var te=2*re+1,ae=2*re+2,le=re;if(te<this.length&&this.isHigherPriority(te,le)&&(le=te),ae<this.length&&this.isHigherPriority(ae,le)&&(le=ae),le!==re){var xe=this.items[re];this.items[re]=this.items[le],this.items[le]=xe,this.heapify(le)}}},an.peek=function(){return this.items[0].value},an.removeAt=function(re){this.items[re]=this.items[--this.length],this.items[this.length]=e,this.heapify()},an.dequeue=function(){var re=this.peek();return this.removeAt(0),re},an.enqueue=function(re){var te=this.length++;this.items[te]=new $o(Xo.count++,re),this.percolate(te)},an.remove=function(re){for(var te=0;te<this.length;te++)if(this.items[te].value===re)return this.removeAt(te),!0;return!1},Xo.count=0;var qi=f.Notification=function(){function re(){}return re.prototype._accept=function(te,ae,le){throw new be},re.prototype._acceptObserver=function(te,ae,le){throw new be},re.prototype.accept=function(te,ae,le){return te&&typeof te=="object"?this._acceptObserver(te):this._accept(te,ae,le)},re.prototype.toObservable=function(te){var ae=this;return on(te)||(te=ln),new oo(function(le){return te.schedule(ae,function(xe,Le){Le._acceptObserver(le),Le.kind==="N"&&le.onCompleted()})})},re}(),za=function(re){Rt(te,re);function te(ae){this.value=ae,this.kind="N"}return te.prototype._accept=function(ae){return ae(this.value)},te.prototype._acceptObserver=function(ae){return ae.onNext(this.value)},te.prototype.toString=function(){return"OnNext("+this.value+")"},te}(qi),ci=function(re){Rt(te,re);function te(ae){this.error=ae,this.kind="E"}return te.prototype._accept=function(ae,le){return le(this.error)},te.prototype._acceptObserver=function(ae){return ae.onError(this.error)},te.prototype.toString=function(){return"OnError("+this.error+")"},te}(qi),no=function(re){Rt(te,re);function te(){this.kind="C"}return te.prototype._accept=function(ae,le,xe){return xe()},te.prototype._acceptObserver=function(ae){return ae.onCompleted()},te.prototype.toString=function(){return"OnCompleted()"},te}(qi),ho=qi.createOnNext=function(re){return new za(re)},Ci=qi.createOnError=function(re){return new ci(re)},To=qi.createOnCompleted=function(){return new no},Wi=f.Observer=function(){},po=Wi.create=function(re,te,ae){return re||(re=m),te||(te=M),ae||(ae=m),new Me(re,te,ae)},oe=f.internals.AbstractObserver=function(re){Rt(te,re);function te(){this.isStopped=!1}return te.prototype.next=Ee,te.prototype.error=Ee,te.prototype.completed=Ee,te.prototype.onNext=function(ae){!this.isStopped&&this.next(ae)},te.prototype.onError=function(ae){this.isStopped||(this.isStopped=!0,this.error(ae))},te.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.completed())},te.prototype.dispose=function(){this.isStopped=!0},te.prototype.fail=function(ae){return this.isStopped?!1:(this.isStopped=!0,this.error(ae),!0)},te}(Wi),Me=f.AnonymousObserver=function(re){Rt(te,re);function te(ae,le,xe){re.call(this),this._onNext=ae,this._onError=le,this._onCompleted=xe}return te.prototype.next=function(ae){this._onNext(ae)},te.prototype.error=function(ae){this._onError(ae)},te.prototype.completed=function(){this._onCompleted()},te}(oe),We,Ve=f.Observable=function(){function re(ae,le){return function(xe){var Le=xe.onError;return xe.onError=function(Je){ue(Je,ae),Le.call(xe,Je)},le.call(ae,xe)}}function te(){if(f.config.longStackSupport&&J){var ae=this._subscribe,le=L(Y)(new Error).e;this.stack=le.stack.substring(le.stack.indexOf(`
`)+1),this._subscribe=re(this,ae)}}return We=te.prototype,te.isObservable=function(ae){return ae&&R(ae.subscribe)},We.subscribe=We.forEach=function(ae,le,xe){return this._subscribe(typeof ae=="object"?ae:po(ae,le,xe))},We.subscribeOnNext=function(ae,le){return this._subscribe(po(typeof le<"u"?function(xe){ae.call(le,xe)}:ae))},We.subscribeOnError=function(ae,le){return this._subscribe(po(null,typeof le<"u"?function(xe){ae.call(le,xe)}:ae))},We.subscribeOnCompleted=function(ae,le){return this._subscribe(po(null,null,typeof le<"u"?function(){ae.call(le)}:ae))},te}(),ot=f.internals.ScheduledObserver=function(re){Rt(te,re);function te(Je,lt){re.call(this),this.scheduler=Je,this.observer=lt,this.isAcquired=!1,this.hasFaulted=!1,this.queue=[],this.disposable=new Br}function ae(Je,lt){return function(){Je.onNext(lt)}}function le(Je,lt){return function(){Je.onError(lt)}}function xe(Je){return function(){Je.onCompleted()}}te.prototype.next=function(Je){this.queue.push(ae(this.observer,Je))},te.prototype.error=function(Je){this.queue.push(le(this.observer,Je))},te.prototype.completed=function(){this.queue.push(xe(this.observer))};function Le(Je,lt){var zt;if(Je.queue.length>0)zt=Je.queue.shift();else{Je.isAcquired=!1;return}var tr=L(zt)();if(tr===N)return Je.queue=[],Je.hasFaulted=!0,Y(tr.e);lt(Je)}return te.prototype.ensureActive=function(){var Je=!1;!this.hasFaulted&&this.queue.length>0&&(Je=!this.isAcquired,this.isAcquired=!0),Je&&this.disposable.setDisposable(this.scheduler.scheduleRecursive(this,Le))},te.prototype.dispose=function(){re.prototype.dispose.call(this),this.disposable.dispose()},te}(oe),ct=f.ObservableBase=function(re){Rt(le,re);function te(xe){return xe&&R(xe.dispose)?xe:R(xe)?Pr(xe):qr}function ae(xe,Le){var Je=Le[0],lt=Le[1],zt=L(lt.subscribeCore).call(lt,Je);zt===N&&!Je.fail(N.e)&&Y(N.e),Je.setDisposable(te(zt))}function le(){re.call(this)}return le.prototype._subscribe=function(xe){var Le=new q1(xe),Je=[Le,this];return fn.scheduleRequired()?fn.schedule(Je,ae):ae(null,Je),Le},le.prototype.subscribeCore=Ee,le}(Ve),Ye=f.FlatMapObservable=function(re){Rt(te,re);function te(le,xe,Le,Je){this.resultSelector=R(Le)?Le:null,this.selector=Te(R(xe)?xe:function(){return xe},Je,3),this.source=le,re.call(this)}te.prototype.subscribeCore=function(le){return this.source.subscribe(new ae(le,this.selector,this.resultSelector,this))},Rt(ae,oe);function ae(le,xe,Le,Je){this.i=0,this.selector=xe,this.resultSelector=Le,this.source=Je,this.o=le,oe.call(this)}return ae.prototype._wrapResult=function(le,xe,Le){return this.resultSelector?le.map(function(Je,lt){return this.resultSelector(xe,Je,Le,lt)},this):le},ae.prototype.next=function(le){var xe=this.i++,Le=L(this.selector)(le,xe,this.source);if(Le===N)return this.o.onError(Le.e);A(Le)&&(Le=fi(Le)),(Ke(Le)||Qe(Le))&&(Le=Ve.from(Le)),this.o.onNext(this._wrapResult(Le,le,xe))},ae.prototype.error=function(le){this.o.onError(le)},ae.prototype.completed=function(){this.o.onCompleted()},te}(ct),st=f.internals.Enumerable=function(){};function wt(re){this._s=re,this.isDisposed=!1}wt.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.isDisposed=!0)};var St=function(re){Rt(te,re);function te(xe){this.sources=xe,re.call(this)}function ae(xe,Le){if(!xe.isDisposed){var Je=L(xe.e.next).call(xe.e);if(Je===N)return xe.o.onError(Je.e);if(Je.done)return xe.o.onCompleted();var lt=Je.value;A(lt)&&(lt=fi(lt));var zt=new dr;xe.subscription.setDisposable(zt),zt.setDisposable(lt.subscribe(new le(xe,Le)))}}te.prototype.subscribeCore=function(xe){var Le=new Br,Je={isDisposed:!1,o:xe,subscription:Le,e:this.sources[Fe]()},lt=fn.scheduleRecursive(Je,ae);return new Ar([Le,lt,new wt(Je)])};function le(xe,Le){this._state=xe,this._recurse=Le,oe.call(this)}return Rt(le,oe),le.prototype.next=function(xe){this._state.o.onNext(xe)},le.prototype.error=function(xe){this._state.o.onError(xe)},le.prototype.completed=function(){this._recurse(this._state)},te}(ct);st.prototype.concat=function(){return new St(this)};var z=function(re){function te(xe){this.sources=xe,re.call(this)}Rt(te,re);function ae(xe,Le){if(!xe.isDisposed){var Je=L(xe.e.next).call(xe.e);if(Je===N)return xe.o.onError(Je.e);if(Je.done)return xe.lastError!==null?xe.o.onError(xe.lastError):xe.o.onCompleted();var lt=Je.value;A(lt)&&(lt=fi(lt));var zt=new dr;xe.subscription.setDisposable(zt),zt.setDisposable(lt.subscribe(new le(xe,Le)))}}te.prototype.subscribeCore=function(xe){var Le=new Br,Je={isDisposed:!1,e:this.sources[Fe](),subscription:Le,lastError:null,o:xe},lt=fn.scheduleRecursive(Je,ae);return new Ar([Le,lt,new wt(Je)])};function le(xe,Le){this._state=xe,this._recurse=Le,oe.call(this)}return Rt(le,oe),le.prototype.next=function(xe){this._state.o.onNext(xe)},le.prototype.error=function(xe){this._state.lastError=xe,this._recurse(this._state)},le.prototype.completed=function(){this._state.o.onCompleted()},te}(ct);st.prototype.catchError=function(){return new z(this)};var ee=function(re){Rt(te,re);function te(le,xe){this.v=le,this.c=xe??-1}te.prototype[Fe]=function(){return new ae(this)};function ae(le){this.v=le.v,this.l=le.c}return ae.prototype.next=function(){return this.l===0?Ue:(this.l>0&&this.l--,{done:!1,value:this.v})},te}(st),ce=st.repeat=function(re,te){return new ee(re,te)},me=function(re){Rt(te,re);function te(le,xe,Le){this.s=le,this.fn=xe?Te(xe,Le,3):null}te.prototype[Fe]=function(){return new ae(this)};function ae(le){this.i=-1,this.s=le.s,this.l=this.s.length,this.fn=le.fn}return ae.prototype.next=function(){return++this.i<this.l?{done:!1,value:this.fn?this.fn(this.s[this.i],this.i,this.s):this.s[this.i]}:Ue},te}(st),Se=st.of=function(re,te,ae){return new me(re,te,ae)},Ce=function(re){Rt(te,re);function te(le){this.source=le,re.call(this)}te.prototype.subscribeCore=function(le){return this.source.subscribe(new ae(le))},Rt(ae,oe);function ae(le){this.o=le,this.a=[],oe.call(this)}return ae.prototype.next=function(le){this.a.push(le)},ae.prototype.error=function(le){this.o.onError(le)},ae.prototype.completed=function(){this.o.onNext(this.a),this.o.onCompleted()},te}(ct);We.toArray=function(){return new Ce(this)},Ve.create=function(re,te){return new oo(re,te)};var Pe=function(re){Rt(te,re);function te(ae){this._f=ae,re.call(this)}return te.prototype.subscribeCore=function(ae){var le=L(this._f)();return le===N?pi(le.e).subscribe(ae):(A(le)&&(le=fi(le)),le.subscribe(ae))},te}(ct),$e=Ve.defer=function(re){return new Pe(re)},qe=function(re){Rt(te,re);function te(xe){this.scheduler=xe,re.call(this)}te.prototype.subscribeCore=function(xe){var Le=new ae(xe,this.scheduler);return Le.run()};function ae(xe,Le){this.observer=xe,this.scheduler=Le}function le(xe,Le){return Le.onCompleted(),qr}return ae.prototype.run=function(){var xe=this.observer;return this.scheduler===ln?le(null,xe):this.scheduler.schedule(xe,le)},te}(ct),rt=new qe(ln),_t=Ve.empty=function(re){return on(re)||(re=ln),re===ln?rt:new qe(re)},Mt=function(re){Rt(te,re);function te(le,xe,Le){this._iterable=le,this._fn=xe,this._scheduler=Le,re.call(this)}function ae(le,xe,Le){return function(lt,zt){var tr=L(xe.next).call(xe);if(tr===N)return le.onError(tr.e);if(tr.done)return le.onCompleted();var Qt=tr.value;if(R(Le)&&(Qt=L(Le)(Qt,lt),Qt===N))return le.onError(Qt.e);le.onNext(Qt),zt(lt+1)}}return te.prototype.subscribeCore=function(le){var xe=Object(this._iterable),Le=$n(xe);return this._scheduler.scheduleRecursive(0,ae(le,Le,this._fn))},te}(ct),mt=Math.pow(2,53)-1;function Ut(re){this._s=re}Ut.prototype[Fe]=function(){return new xr(this._s)};function xr(re){this._s=re,this._l=re.length,this._i=0}xr.prototype[Fe]=function(){return this},xr.prototype.next=function(){return this._i<this._l?{done:!1,value:this._s.charAt(this._i++)}:Ue};function Cr(re){this._a=re}Cr.prototype[Fe]=function(){return new er(this._a)};function er(re){this._a=re,this._l=Rr(re),this._i=0}er.prototype[Fe]=function(){return this},er.prototype.next=function(){return this._i<this._l?{done:!1,value:this._a[this._i++]}:Ue};function En(re){return typeof re=="number"&&h.isFinite(re)}function Tn(re){return re!==re}function $n(re){var te=re[Fe],ae;if(!te&&typeof re=="string")return ae=new Ut(re),ae[Fe]();if(!te&&re.length!==e)return ae=new Cr(re),ae[Fe]();if(!te)throw new TypeError("Object is not iterable");return re[Fe]()}function Mn(re){var te=+re;return te===0||isNaN(te)?te:te<0?-1:1}function Rr(re){var te=+re.length;return isNaN(te)?0:te===0||!En(te)?te:(te=Mn(te)*Math.floor(Math.abs(te)),te<=0?0:te>mt?mt:te)}var Qn=Ve.from=function(re,te,ae,le){if(re==null)throw new Error("iterable cannot be null.");if(te&&!R(te))throw new Error("mapFn when provided must be a function");if(te)var xe=Te(te,ae,2);return on(le)||(le=fn),new Mt(re,xe,le)},Hr=function(re){Rt(te,re);function te(le,xe){this._args=le,this._scheduler=xe,re.call(this)}function ae(le,xe){var Le=xe.length;return function(lt,zt){lt<Le?(le.onNext(xe[lt]),zt(lt+1)):le.onCompleted()}}return te.prototype.subscribeCore=function(le){return this._scheduler.scheduleRecursive(0,ae(le,this._args))},te}(ct),Mr=Ve.fromArray=function(re,te){return on(te)||(te=fn),new Hr(re,te)},_n=function(re){Rt(te,re);function te(){re.call(this)}return te.prototype.subscribeCore=function(ae){return qr},te}(ct),io=new _n,zn=Ve.never=function(){return io};function In(re,te){return on(re)||(re=fn),new Hr(te,re)}Ve.of=function(){for(var re=arguments.length,te=new Array(re),ae=0;ae<re;ae++)te[ae]=arguments[ae];return new Hr(te,fn)},Ve.ofWithScheduler=function(re){for(var te=arguments.length,ae=new Array(te-1),le=1;le<te;le++)ae[le-1]=arguments[le];return new Hr(ae,re)};var Pn=function(re){Rt(te,re);function te(le,xe){this._o=le,this._keys=Object.keys(le),this._scheduler=xe,re.call(this)}function ae(le,xe,Le){return function(lt,zt){if(lt<Le.length){var tr=Le[lt];le.onNext([tr,xe[tr]]),zt(lt+1)}else le.onCompleted()}}return te.prototype.subscribeCore=function(le){return this._scheduler.scheduleRecursive(0,ae(le,this._o,this._keys))},te}(ct);Ve.pairs=function(re,te){return te||(te=fn),new Pn(re,te)};var hn=function(re){Rt(te,re);function te(le,xe,Le){this.start=le,this.rangeCount=xe,this.scheduler=Le,re.call(this)}function ae(le,xe,Le){return function(lt,zt){lt<xe?(Le.onNext(le+lt),zt(lt+1)):Le.onCompleted()}}return te.prototype.subscribeCore=function(le){return this.scheduler.scheduleRecursive(0,ae(this.start,this.rangeCount,le))},te}(ct);Ve.range=function(re,te,ae){return on(ae)||(ae=fn),new hn(re,te,ae)};var ji=function(re){Rt(te,re);function te(ae,le,xe){this.value=ae,this.repeatCount=le??-1,this.scheduler=xe,re.call(this)}return te.prototype.subscribeCore=function(ae){var le=new Kr(ae,this);return le.run()},te}(ct);function Kr(re,te){this.observer=re,this.parent=te}Kr.prototype.run=function(){var re=this.observer,te=this.parent.value;function ae(le,xe){if((le===-1||le>0)&&(re.onNext(te),le>0&&le--),le===0)return re.onCompleted();xe(le)}return this.parent.scheduler.scheduleRecursive(this.parent.repeatCount,ae)},Ve.repeat=function(re,te,ae){return on(ae)||(ae=fn),new ji(re,te,ae)};var vn=function(re){Rt(te,re);function te(le,xe){this._value=le,this._scheduler=xe,re.call(this)}te.prototype.subscribeCore=function(le){var xe=[this._value,le];return this._scheduler===ln?ae(null,xe):this._scheduler.schedule(xe,ae)};function ae(le,xe){var Le=xe[0],Je=xe[1];return Je.onNext(Le),Je.onCompleted(),qr}return te}(ct),gi=Ve.return=Ve.just=function(re,te){return on(te)||(te=ln),new vn(re,te)},Si=function(re){Rt(te,re);function te(le,xe){this._error=le,this._scheduler=xe,re.call(this)}te.prototype.subscribeCore=function(le){var xe=[this._error,le];return this._scheduler===ln?ae(null,xe):this._scheduler.schedule(xe,ae)};function ae(le,xe){var Le=xe[0],Je=xe[1];return Je.onError(Le),qr}return te}(ct),pi=Ve.throw=function(re,te){return on(te)||(te=ln),new Si(re,te)},$i=function(re){Rt(te,re);function te(ae,le){this.source=ae,this._fn=le,re.call(this)}return te.prototype.subscribeCore=function(ae){var le=new dr,xe=new Br;return xe.setDisposable(le),le.setDisposable(this.source.subscribe(new wn(ae,xe,this._fn))),xe},te}(ct),wn=function(re){Rt(te,re);function te(ae,le,xe){this._o=ae,this._s=le,this._fn=xe,re.call(this)}return te.prototype.next=function(ae){this._o.onNext(ae)},te.prototype.completed=function(){return this._o.onCompleted()},te.prototype.error=function(ae){var le=L(this._fn)(ae);if(le===N)return this._o.onError(le.e);A(le)&&(le=fi(le));var xe=new dr;this._s.setDisposable(xe),xe.setDisposable(le.subscribe(this._o))},te}(oe);We.catch=function(re){return R(re)?new $i(this,re):Qr([this,re])};var Qr=Ve.catch=function(){var re;if(Array.isArray(arguments[0]))re=arguments[0];else{var te=arguments.length;re=new Array(te);for(var ae=0;ae<te;ae++)re[ae]=arguments[ae]}return Se(re).catchError()};We.combineLatest=function(){for(var re=arguments.length,te=new Array(re),ae=0;ae<re;ae++)te[ae]=arguments[ae];return Array.isArray(te[0])?te[0].unshift(this):te.unshift(this),Gn.apply(this,te)};var mo=function(re){Rt(te,re);function te(ae,le){this._params=ae,this._cb=le,re.call(this)}return te.prototype.subscribeCore=function(ae){for(var le=this._params.length,xe=new Array(le),Le={hasValue:xn(le,Ft),hasValueAll:!1,isDone:xn(le,Ft),values:new Array(le)},Je=0;Je<le;Je++){var lt=this._params[Je],zt=new dr;xe[Je]=zt,A(lt)&&(lt=fi(lt)),zt.setDisposable(lt.subscribe(new sn(ae,Je,this._cb,Le)))}return new Ar(xe)},te}(ct),sn=function(re){Rt(te,re);function te(le,xe,Le,Je){this._o=le,this._i=xe,this._cb=Le,this._state=Je,re.call(this)}function ae(le){return function(xe,Le){return Le!==le}}return te.prototype.next=function(le){if(this._state.values[this._i]=le,this._state.hasValue[this._i]=!0,this._state.hasValueAll||(this._state.hasValueAll=this._state.hasValue.every(b))){var xe=L(this._cb).apply(null,this._state.values);if(xe===N)return this._o.onError(xe.e);this._o.onNext(xe)}else this._state.isDone.filter(ae(this._i)).every(b)&&this._o.onCompleted()},te.prototype.error=function(le){this._o.onError(le)},te.prototype.completed=function(){this._state.isDone[this._i]=!0,this._state.isDone.every(b)&&this._o.onCompleted()},te}(oe),Gn=Ve.combineLatest=function(){for(var re=arguments.length,te=new Array(re),ae=0;ae<re;ae++)te[ae]=arguments[ae];var le=R(te[re-1])?te.pop():ur;return Array.isArray(te[0])&&(te=te[0]),new mo(te,le)};We.concat=function(){for(var re=[],te=0,ae=arguments.length;te<ae;te++)re.push(arguments[te]);return re.unshift(this),un.apply(null,re)};var vo=function(re){Rt(te,re);function te(ae,le){this._s=ae,this._fn=le,re.call(this)}return te.prototype.next=function(ae){this._s.o.onNext(ae)},te.prototype.error=function(ae){this._s.o.onError(ae)},te.prototype.completed=function(){this._s.i++,this._fn(this._s)},te}(oe),Ri=function(re){Rt(te,re);function te(le){this._sources=le,re.call(this)}function ae(le,xe){if(!le.disposable.isDisposed){if(le.i===le.sources.length)return le.o.onCompleted();var Le=le.sources[le.i];A(Le)&&(Le=fi(Le));var Je=new dr;le.subscription.setDisposable(Je),Je.setDisposable(Le.subscribe(new vo(le,xe)))}}return te.prototype.subscribeCore=function(le){var xe=new Br,Le=Pr(m),Je={o:le,i:0,subscription:xe,disposable:Le,sources:this._sources},lt=ln.scheduleRecursive(Je,ae);return new Ar([xe,Le,lt])},te}(ct),un=Ve.concat=function(){var re;if(Array.isArray(arguments[0]))re=arguments[0];else{re=new Array(arguments.length);for(var te=0,ae=arguments.length;te<ae;te++)re[te]=arguments[te]}return new Ri(re)};We.concatAll=function(){return this.merge(1)};var Yr=function(re){Rt(te,re);function te(ae,le){this.source=ae,this.maxConcurrent=le,re.call(this)}return te.prototype.subscribeCore=function(ae){var le=new Tr;return le.add(this.source.subscribe(new Zt(ae,this.maxConcurrent,le))),le},te}(ct),Zt=function(re){function te(le,xe,Le){this.o=le,this.max=xe,this.g=Le,this.done=!1,this.q=[],this.activeCount=0,re.call(this)}Rt(te,re),te.prototype.handleSubscribe=function(le){var xe=new dr;this.g.add(xe),A(le)&&(le=fi(le)),xe.setDisposable(le.subscribe(new ae(this,xe)))},te.prototype.next=function(le){this.activeCount<this.max?(this.activeCount++,this.handleSubscribe(le)):this.q.push(le)},te.prototype.error=function(le){this.o.onError(le)},te.prototype.completed=function(){this.done=!0,this.activeCount===0&&this.o.onCompleted()};function ae(le,xe){this.parent=le,this.sad=xe,re.call(this)}return Rt(ae,re),ae.prototype.next=function(le){this.parent.o.onNext(le)},ae.prototype.error=function(le){this.parent.o.onError(le)},ae.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.q.length>0?this.parent.handleSubscribe(this.parent.q.shift()):(this.parent.activeCount--,this.parent.done&&this.parent.activeCount===0&&this.parent.o.onCompleted())},te}(oe);We.merge=function(re){return typeof re!="number"?Jr(this,re):new Yr(this,re)};var Jr=Ve.merge=function(){var re,te=[],ae,le=arguments.length;if(arguments[0])if(on(arguments[0]))for(re=arguments[0],ae=1;ae<le;ae++)te.push(arguments[ae]);else for(re=ln,ae=0;ae<le;ae++)te.push(arguments[ae]);else for(re=ln,ae=1;ae<le;ae++)te.push(arguments[ae]);return Array.isArray(te[0])&&(te=te[0]),In(re,te).mergeAll()},yi=f.CompositeError=function(re){this.innerErrors=re,this.message="This contains multiple errors. Check the innerErrors",Error.call(this)};yi.prototype=Object.create(Error.prototype),yi.prototype.name="CompositeError";var go=function(re){Rt(te,re);function te(ae){this.source=ae,re.call(this)}return te.prototype.subscribeCore=function(ae){var le=new Tr,xe=new dr,Le={isStopped:!1,errors:[],o:ae};return le.add(xe),xe.setDisposable(this.source.subscribe(new yo(le,Le))),le},te}(ct),yo=function(re){Rt(te,re);function te(xe,Le){this._group=xe,this._state=Le,re.call(this)}function ae(xe,Le){Le.length===0?xe.onCompleted():Le.length===1?xe.onError(Le[0]):xe.onError(new yi(Le))}te.prototype.next=function(xe){var Le=new dr;this._group.add(Le),A(xe)&&(xe=fi(xe)),Le.setDisposable(xe.subscribe(new le(Le,this._group,this._state)))},te.prototype.error=function(xe){this._state.errors.push(xe),this._state.isStopped=!0,this._group.length===1&&ae(this._state.o,this._state.errors)},te.prototype.completed=function(){this._state.isStopped=!0,this._group.length===1&&ae(this._state.o,this._state.errors)},Rt(le,re);function le(xe,Le,Je){this._inner=xe,this._group=Le,this._state=Je,re.call(this)}return le.prototype.next=function(xe){this._state.o.onNext(xe)},le.prototype.error=function(xe){this._state.errors.push(xe),this._group.remove(this._inner),this._state.isStopped&&this._group.length===1&&ae(this._state.o,this._state.errors)},le.prototype.completed=function(){this._group.remove(this._inner),this._state.isStopped&&this._group.length===1&&ae(this._state.o,this._state.errors)},te}(oe);Ve.mergeDelayError=function(){var re;if(Array.isArray(arguments[0]))re=arguments[0];else{var te=arguments.length;re=new Array(te);for(var ae=0;ae<te;ae++)re[ae]=arguments[ae]}var le=In(null,re);return new go(le)};var dn=function(re){Rt(te,re);function te(ae){this.source=ae,re.call(this)}return te.prototype.subscribeCore=function(ae){var le=new Tr,xe=new dr;return le.add(xe),xe.setDisposable(this.source.subscribe(new li(ae,le))),le},te}(ct),li=function(re){function te(le,xe){this.o=le,this.g=xe,this.done=!1,re.call(this)}Rt(te,re),te.prototype.next=function(le){var xe=new dr;this.g.add(xe),A(le)&&(le=fi(le)),xe.setDisposable(le.subscribe(new ae(this,xe)))},te.prototype.error=function(le){this.o.onError(le)},te.prototype.completed=function(){this.done=!0,this.g.length===1&&this.o.onCompleted()};function ae(le,xe){this.parent=le,this.sad=xe,re.call(this)}return Rt(ae,re),ae.prototype.next=function(le){this.parent.o.onNext(le)},ae.prototype.error=function(le){this.parent.o.onError(le)},ae.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.done&&this.parent.g.length===1&&this.parent.o.onCompleted()},te}(oe);We.mergeAll=function(){return new dn(this)};var Vi=function(re){Rt(te,re);function te(ae,le){this._s=ae,this._o=A(le)?fi(le):le,this._open=!1,re.call(this)}return te.prototype.subscribeCore=function(ae){var le=new dr;le.setDisposable(this._s.subscribe(new Ln(ae,this))),A(this._o)&&(this._o=fi(this._o));var xe=new dr;return xe.setDisposable(this._o.subscribe(new Xn(ae,this,xe))),new kr(le,xe)},te}(ct),Ln=function(re){Rt(te,re);function te(ae,le){this._o=ae,this._p=le,re.call(this)}return te.prototype.next=function(ae){this._p._open&&this._o.onNext(ae)},te.prototype.error=function(ae){this._o.onError(ae)},te.prototype.onCompleted=function(){this._p._open&&this._o.onCompleted()},te}(oe),Xn=function(re){Rt(te,re);function te(ae,le,xe){this._o=ae,this._p=le,this._r=xe,re.call(this)}return te.prototype.next=function(){this._p._open=!0,this._r.dispose()},te.prototype.error=function(ae){this._o.onError(ae)},te.prototype.onCompleted=function(){this._r.dispose()},te}(oe);We.skipUntil=function(re){return new Vi(this,re)};var Yo=function(re){Rt(te,re);function te(xe){this.source=xe,re.call(this)}te.prototype.subscribeCore=function(xe){var Le=new Br,Je=this.source.subscribe(new ae(xe,Le));return new kr(Je,Le)},Rt(ae,oe);function ae(xe,Le){this.o=xe,this.inner=Le,this.stopped=!1,this.latest=0,this.hasLatest=!1,oe.call(this)}ae.prototype.next=function(xe){var Le=new dr,Je=++this.latest;this.hasLatest=!0,this.inner.setDisposable(Le),A(xe)&&(xe=fi(xe)),Le.setDisposable(xe.subscribe(new le(this,Je)))},ae.prototype.error=function(xe){this.o.onError(xe)},ae.prototype.completed=function(){this.stopped=!0,!this.hasLatest&&this.o.onCompleted()},Rt(le,oe);function le(xe,Le){this.parent=xe,this.id=Le,oe.call(this)}return le.prototype.next=function(xe){this.parent.latest===this.id&&this.parent.o.onNext(xe)},le.prototype.error=function(xe){this.parent.latest===this.id&&this.parent.o.onError(xe)},le.prototype.completed=function(){this.parent.latest===this.id&&(this.parent.hasLatest=!1,this.parent.stopped&&this.parent.o.onCompleted())},te}(ct);We.switch=We.switchLatest=function(){return new Yo(this)};var da=function(re){Rt(te,re);function te(ae,le){this.source=ae,this.other=A(le)?fi(le):le,re.call(this)}return te.prototype.subscribeCore=function(ae){return new kr(this.source.subscribe(ae),this.other.subscribe(new xi(ae)))},te}(ct),xi=function(re){Rt(te,re);function te(ae){this._o=ae,re.call(this)}return te.prototype.next=function(){this._o.onCompleted()},te.prototype.error=function(ae){this._o.onError(ae)},te.prototype.onCompleted=m,te}(oe);We.takeUntil=function(re){return new da(this,re)};var Ot=function(re){Rt(te,re);function te(ae,le,xe){this._s=ae,this._ss=le,this._cb=xe,re.call(this)}return te.prototype.subscribeCore=function(ae){for(var le=this._ss.length,xe={hasValue:xn(le,Ft),hasValueAll:!1,values:new Array(le)},Le=this._ss.length,Je=new Array(Le+1),lt=0;lt<Le;lt++){var zt=this._ss[lt],tr=new dr;A(zt)&&(zt=fi(zt)),tr.setDisposable(zt.subscribe(new Ze(ae,lt,xe))),Je[lt]=tr}var Qt=new dr;return Qt.setDisposable(this._s.subscribe(new ht(ae,this._cb,xe))),Je[Le]=Qt,new Ar(Je)},te}(ct),Ze=function(re){Rt(te,re);function te(ae,le,xe){this._o=ae,this._i=le,this._state=xe,re.call(this)}return te.prototype.next=function(ae){this._state.values[this._i]=ae,this._state.hasValue[this._i]=!0,this._state.hasValueAll=this._state.hasValue.every(b)},te.prototype.error=function(ae){this._o.onError(ae)},te.prototype.completed=m,te}(oe),ht=function(re){Rt(te,re);function te(ae,le,xe){this._o=ae,this._cb=le,this._state=xe,re.call(this)}return te.prototype.next=function(ae){var le=[ae].concat(this._state.values);if(this._state.hasValueAll){var xe=L(this._cb).apply(null,le);if(xe===N)return this._o.onError(xe.e);this._o.onNext(xe)}},te.prototype.error=function(ae){this._o.onError(ae)},te.prototype.completed=function(){this._o.onCompleted()},te}(oe);We.withLatestFrom=function(){if(arguments.length===0)throw new Error("invalid arguments");for(var re=arguments.length,te=new Array(re),ae=0;ae<re;ae++)te[ae]=arguments[ae];var le=R(te[re-1])?te.pop():ur;return Array.isArray(te[0])&&(te=te[0]),new Ot(this,te,le)};var bt=function(re){Rt(te,re);function te(ae,le){this._s=ae,this._cb=le,re.call(this)}return te.prototype.subscribeCore=function(ae){for(var le=this._s.length,xe=new Array(le),Le=xn(le,Ft),Je=xn(le,Kt),lt=0;lt<le;lt++){var zt=this._s[lt],tr=new dr;xe[lt]=tr,A(zt)&&(zt=fi(zt)),tr.setDisposable(zt.subscribe(new kt(ae,lt,this,Je,Le)))}return new Ar(xe)},te}(ct),kt=function(re){Rt(te,re);function te(Le,Je,lt,zt,tr){this._o=Le,this._i=Je,this._p=lt,this._q=zt,this._d=tr,re.call(this)}function ae(Le){return Le.length>0}function le(Le){return Le.shift()}function xe(Le){return function(Je,lt){return lt!==Le}}return te.prototype.next=function(Le){if(this._q[this._i].push(Le),this._q.every(ae)){var Je=this._q.map(le),lt=L(this._p._cb).apply(null,Je);if(lt===N)return this._o.onError(lt.e);this._o.onNext(lt)}else this._d.filter(xe(this._i)).every(b)&&this._o.onCompleted()},te.prototype.error=function(Le){this._o.onError(Le)},te.prototype.completed=function(){this._d[this._i]=!0,this._d.every(b)&&this._o.onCompleted()},te}(oe);We.zip=function(){if(arguments.length===0)throw new Error("invalid arguments");for(var re=arguments.length,te=new Array(re),ae=0;ae<re;ae++)te[ae]=arguments[ae];var le=R(te[re-1])?te.pop():ur;Array.isArray(te[0])&&(te=te[0]);var xe=this;return te.unshift(xe),new bt(te,le)},Ve.zip=function(){for(var re=arguments.length,te=new Array(re),ae=0;ae<re;ae++)te[ae]=arguments[ae];Array.isArray(te[0])&&(te=R(te[1])?te[0].concat(te[1]):te[0]);var le=te.shift();return le.zip.apply(le,te)};function Ft(){return!1}function Kt(){return[]}function ur(){for(var re=arguments.length,te=new Array(re),ae=0;ae<re;ae++)te[ae]=arguments[ae];return te}var br=function(re){Rt(te,re);function te(ae,le){this.sources=ae,this._cb=le,re.call(this)}return te.prototype.subscribeCore=function(ae){for(var le=this.sources,xe=le.length,Le=new Array(xe),Je={q:xn(xe,Kt),done:xn(xe,Ft),cb:this._cb,o:ae},lt=0;lt<xe;lt++)(function(zt){var tr=le[zt],Qt=new dr;(Ke(tr)||Qe(tr))&&(tr=Qn(tr)),Le[zt]=Qt,Qt.setDisposable(tr.subscribe(new hr(Je,zt)))})(lt);return new Ar(Le)},te}(ct),hr=function(re){Rt(te,re);function te(Le,Je){this._s=Le,this._i=Je,re.call(this)}function ae(Le){return Le.length>0}function le(Le){return Le.shift()}function xe(Le){return function(Je,lt){return lt!==Le}}return te.prototype.next=function(Le){if(this._s.q[this._i].push(Le),this._s.q.every(ae)){var Je=this._s.q.map(le),lt=L(this._s.cb).apply(null,Je);if(lt===N)return this._s.o.onError(lt.e);this._s.o.onNext(lt)}else this._s.done.filter(xe(this._i)).every(b)&&this._s.o.onCompleted()},te.prototype.error=function(Le){this._s.o.onError(Le)},te.prototype.completed=function(){this._s.done[this._i]=!0,this._s.done.every(b)&&this._s.o.onCompleted()},te}(oe);We.zipIterable=function(){if(arguments.length===0)throw new Error("invalid arguments");for(var re=arguments.length,te=new Array(re),ae=0;ae<re;ae++)te[ae]=arguments[ae];var le=R(te[re-1])?te.pop():ur,xe=this;return te.unshift(xe),new br(te,le)};function Xr(re){return function(ae){return re.subscribe(ae)}}We.asObservable=function(){return new oo(Xr(this),this)};var Ir=function(re){Rt(te,re);function te(ae){this.source=ae,re.call(this)}return te.prototype.subscribeCore=function(ae){return this.source.subscribe(new ir(ae))},te}(ct),ir=function(re){Rt(te,re);function te(ae){this._o=ae,re.call(this)}return te.prototype.next=function(ae){ae.accept(this._o)},te.prototype.error=function(ae){this._o.onError(ae)},te.prototype.completed=function(){this._o.onCompleted()},te}(oe);We.dematerialize=function(){return new Ir(this)};var W=function(re){Rt(te,re);function te(ae,le,xe){this.source=ae,this.keyFn=le,this.comparer=xe,re.call(this)}return te.prototype.subscribeCore=function(ae){return this.source.subscribe(new se(ae,this.keyFn,this.comparer))},te}(ct),se=function(re){Rt(te,re);function te(ae,le,xe){this.o=ae,this.keyFn=le,this.comparer=xe,this.hasCurrentKey=!1,this.currentKey=null,re.call(this)}return te.prototype.next=function(ae){var le=ae,xe;if(R(this.keyFn)&&(le=L(this.keyFn)(ae),le===N))return this.o.onError(le.e);if(this.hasCurrentKey&&(xe=L(this.comparer)(this.currentKey,le),xe===N))return this.o.onError(xe.e);(!this.hasCurrentKey||!xe)&&(this.hasCurrentKey=!0,this.currentKey=le,this.o.onNext(ae))},te.prototype.error=function(ae){this.o.onError(ae)},te.prototype.completed=function(){this.o.onCompleted()},te}(oe);We.distinctUntilChanged=function(re,te){return te||(te=C),new W(this,re,te)};var we=function(re){Rt(te,re);function te(le,xe,Le,Je){this.source=le,this._oN=xe,this._oE=Le,this._oC=Je,re.call(this)}te.prototype.subscribeCore=function(le){return this.source.subscribe(new ae(le,this))},Rt(ae,oe);function ae(le,xe){this.o=le,this.t=!xe._oN||R(xe._oN)?po(xe._oN||m,xe._oE||m,xe._oC||m):xe._oN,this.isStopped=!1,oe.call(this)}return ae.prototype.next=function(le){var xe=L(this.t.onNext).call(this.t,le);xe===N&&this.o.onError(xe.e),this.o.onNext(le)},ae.prototype.error=function(le){var xe=L(this.t.onError).call(this.t,le);if(xe===N)return this.o.onError(xe.e);this.o.onError(le)},ae.prototype.completed=function(){var le=L(this.t.onCompleted).call(this.t);if(le===N)return this.o.onError(le.e);this.o.onCompleted()},te}(ct);We.do=We.tap=We.doAction=function(re,te,ae){return new we(this,re,te,ae)},We.doOnNext=We.tapOnNext=function(re,te){return this.tap(typeof te<"u"?function(ae){re.call(te,ae)}:re)},We.doOnError=We.tapOnError=function(re,te){return this.tap(m,typeof te<"u"?function(ae){re.call(te,ae)}:re)},We.doOnCompleted=We.tapOnCompleted=function(re,te){return this.tap(m,null,typeof te<"u"?function(){re.call(te)}:re)};var Ae=function(re){Rt(te,re);function te(le,xe,Le){this.source=le,this._fn=Te(xe,Le,0),re.call(this)}te.prototype.subscribeCore=function(le){var xe=L(this.source.subscribe).call(this.source,le);return xe===N&&(this._fn(),Y(xe.e)),new ae(xe,this._fn)};function ae(le,xe){this.isDisposed=!1,this._s=le,this._fn=xe}return ae.prototype.dispose=function(){if(!this.isDisposed){var le=L(this._s.dispose).call(this._s);this._fn(),le===N&&Y(le.e)}},te}(ct);We.finally=function(re,te){return new Ae(this,re,te)};var Oe=function(re){Rt(te,re);function te(le){this.source=le,re.call(this)}te.prototype.subscribeCore=function(le){return this.source.subscribe(new ae(le))};function ae(le){this.o=le,this.isStopped=!1}return ae.prototype.onNext=m,ae.prototype.onError=function(le){this.isStopped||(this.isStopped=!0,this.o.onError(le))},ae.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},ae.prototype.dispose=function(){this.isStopped=!0},ae.prototype.fail=function(le){return this.isStopped?!1:(this.isStopped=!0,this.observer.onError(le),!0)},te}(ct);We.ignoreElements=function(){return new Oe(this)};var je=function(re){Rt(te,re);function te(ae,le){this.source=ae,re.call(this)}return te.prototype.subscribeCore=function(ae){return this.source.subscribe(new ut(ae))},te}(ct),ut=function(re){Rt(te,re);function te(ae){this._o=ae,re.call(this)}return te.prototype.next=function(ae){this._o.onNext(ho(ae))},te.prototype.error=function(ae){this._o.onNext(Ci(ae)),this._o.onCompleted()},te.prototype.completed=function(){this._o.onNext(To()),this._o.onCompleted()},te}(oe);We.materialize=function(){return new je(this)},We.repeat=function(re){return ce(this,re).concat()},We.retry=function(re){return ce(this,re).catchError()};var ft=function(re){function te(le){return{isDisposed:!1,dispose:function(){this.isDisposed||(this.isDisposed=!0,le.isDisposed=!0)}}}function ae(le,xe){this.source=le,this._notifier=xe,re.call(this)}return Rt(ae,re),ae.prototype.subscribeCore=function(le){var xe=new pa,Le=new pa,Je=this._notifier(xe),lt=Je.subscribe(Le),zt=this.source["@@iterator"](),tr={isDisposed:!1},Qt,ar=new Br,zr=fn.scheduleRecursive(null,function(Yn,Ei){if(!tr.isDisposed){var oi=zt.next();if(oi.done){Qt?le.onError(Qt):le.onCompleted();return}var Jn=oi.value;A(Jn)&&(Jn=fi(Jn));var ki=new dr,Ga=new dr;ar.setDisposable(new kr(Ga,ki)),ki.setDisposable(Jn.subscribe(function(qa){le.onNext(qa)},function(qa){Ga.setDisposable(Le.subscribe(Ei,function(J5){le.onError(J5)},function(){le.onCompleted()})),xe.onNext(qa),ki.dispose()},function(){le.onCompleted()}))}});return new Ar([lt,ar,zr,te(tr)])},ae}(ct);We.retryWhen=function(re){return new ft(Et(this),re)};function Et(re){return{"@@iterator":function(){return{next:function(){return{done:!1,value:re}}}}}}var Vt=function(re){function te(le){return{isDisposed:!1,dispose:function(){this.isDisposed||(this.isDisposed=!0,le.isDisposed=!0)}}}function ae(le,xe){this.source=le,this._notifier=xe,re.call(this)}return Rt(ae,re),ae.prototype.subscribeCore=function(le){var xe=new pa,Le=new pa,Je=this._notifier(xe),lt=Je.subscribe(Le),zt=this.source["@@iterator"](),tr={isDisposed:!1},Qt,ar=new Br,zr=fn.scheduleRecursive(null,function(Yn,Ei){if(!tr.isDisposed){var oi=zt.next();if(oi.done){Qt?le.onError(Qt):le.onCompleted();return}var Jn=oi.value;A(Jn)&&(Jn=fi(Jn));var ki=new dr,Ga=new dr;ar.setDisposable(new kr(Ga,ki)),ki.setDisposable(Jn.subscribe(function(qa){le.onNext(qa)},function(qa){le.onError(qa)},function(){Ga.setDisposable(Le.subscribe(Ei,function(qa){le.onError(qa)},function(){le.onCompleted()})),xe.onNext(null),ki.dispose()}))}});return new Ar([lt,ar,zr,te(tr)])},ae}(ct);We.repeatWhen=function(re){return new Vt(Et(this),re)};var Wt=function(re){Rt(te,re);function te(ae,le,xe,Le){this.source=ae,this.accumulator=le,this.hasSeed=xe,this.seed=Le,re.call(this)}return te.prototype.subscribeCore=function(ae){return this.source.subscribe(new mr(ae,this))},te}(ct),mr=function(re){Rt(te,re);function te(ae,le){this._o=ae,this._p=le,this._fn=le.accumulator,this._hs=le.hasSeed,this._s=le.seed,this._ha=!1,this._a=null,this._hv=!1,this._i=0,re.call(this)}return te.prototype.next=function(ae){if(!this._hv&&(this._hv=!0),this._ha?this._a=L(this._fn)(this._a,ae,this._i,this._p):(this._a=this._hs?L(this._fn)(this._s,ae,this._i,this._p):ae,this._ha=!0),this._a===N)return this._o.onError(this._a.e);this._o.onNext(this._a),this._i++},te.prototype.error=function(ae){this._o.onError(ae)},te.prototype.completed=function(){!this._hv&&this._hs&&this._o.onNext(this._s),this._o.onCompleted()},te}(oe);We.scan=function(){var re=!1,te,ae=arguments[0];return arguments.length===2&&(re=!0,te=arguments[1]),new Wt(this,ae,re,te)};var _r=function(re){Rt(te,re);function te(ae,le){this.source=ae,this._c=le,re.call(this)}return te.prototype.subscribeCore=function(ae){return this.source.subscribe(new jr(ae,this._c))},te}(ct),jr=function(re){Rt(te,re);function te(ae,le){this._o=ae,this._c=le,this._q=[],re.call(this)}return te.prototype.next=function(ae){this._q.push(ae),this._q.length>this._c&&this._o.onNext(this._q.shift())},te.prototype.error=function(ae){this._o.onError(ae)},te.prototype.completed=function(){this._o.onCompleted()},te}(oe);We.skipLast=function(re){if(re<0)throw new ve;return new _r(this,re)},We.startWith=function(){var re,te,ae=0;arguments.length&&on(arguments[0])?(te=arguments[0],ae=1):te=ln;for(var le=[],xe=ae,Le=arguments.length;xe<Le;xe++)le.push(arguments[xe]);return un.apply(null,[Mr(le,te),this])};var en=function(re){Rt(te,re);function te(ae,le){this._o=ae,this._c=le,this._q=[],re.call(this)}return te.prototype.next=function(ae){this._q.push(ae),this._q.length>this._c&&this._q.shift()},te.prototype.error=function(ae){this._o.onError(ae)},te.prototype.completed=function(){for(;this._q.length>0;)this._o.onNext(this._q.shift());this._o.onCompleted()},te}(oe);We.takeLast=function(re){if(re<0)throw new ve;var te=this;return new oo(function(ae){return te.subscribe(new en(ae,re))},te)},We.flatMapConcat=We.concatMap=function(re,te,ae){return new Ye(this,re,te,ae).merge(1)};var Fn=function(re){Rt(te,re);function te(xe,Le,Je){this.source=xe,this.selector=Te(Le,Je,3),re.call(this)}function ae(xe,Le){return function(Je,lt,zt){return xe.call(this,Le.selector(Je,lt,zt),lt,zt)}}te.prototype.internalMap=function(xe,Le){return new te(this.source,ae(xe,this),Le)},te.prototype.subscribeCore=function(xe){return this.source.subscribe(new le(xe,this.selector,this))},Rt(le,oe);function le(xe,Le,Je){this.o=xe,this.selector=Le,this.source=Je,this.i=0,oe.call(this)}return le.prototype.next=function(xe){var Le=L(this.selector)(xe,this.i++,this.source);if(Le===N)return this.o.onError(Le.e);this.o.onNext(Le)},le.prototype.error=function(xe){this.o.onError(xe)},le.prototype.completed=function(){this.o.onCompleted()},te}(ct);We.map=We.select=function(re,te){var ae=typeof re=="function"?re:function(){return re};return this instanceof Fn?this.internalMap(ae,te):new Fn(this,ae,te)};function Mo(re,te){return function(le){for(var xe=le,Le=0;Le<te;Le++){var Je=xe[re[Le]];if(typeof Je<"u")xe=Je;else return e}return xe}}We.pluck=function(){var re=arguments.length,te=new Array(re);if(re===0)throw new Error("List of properties cannot be empty.");for(var ae=0;ae<re;ae++)te[ae]=arguments[ae];return this.map(Mo(te,re))},We.flatMap=We.selectMany=We.mergeMap=function(re,te,ae){return new Ye(this,re,te,ae).mergeAll()},We.flatMapLatest=We.switchMap=function(re,te,ae){return new Ye(this,re,te,ae).switchLatest()};var Io=function(re){Rt(te,re);function te(le,xe){this.source=le,this._count=xe,re.call(this)}te.prototype.subscribeCore=function(le){return this.source.subscribe(new ae(le,this._count))};function ae(le,xe){this._o=le,this._r=xe,oe.call(this)}return Rt(ae,oe),ae.prototype.next=function(le){this._r<=0?this._o.onNext(le):this._r--},ae.prototype.error=function(le){this._o.onError(le)},ae.prototype.completed=function(){this._o.onCompleted()},te}(ct);We.skip=function(re){if(re<0)throw new ve;return new Io(this,re)};var Zu=function(re){Rt(te,re);function te(ae,le){this.source=ae,this._fn=le,re.call(this)}return te.prototype.subscribeCore=function(ae){return this.source.subscribe(new m5(ae,this))},te}(ct),m5=function(re){Rt(te,re);function te(ae,le){this._o=ae,this._p=le,this._i=0,this._r=!1,re.call(this)}return te.prototype.next=function(ae){if(!this._r){var le=L(this._p._fn)(ae,this._i++,this._p);if(le===N)return this._o.onError(le.e);this._r=!le}this._r&&this._o.onNext(ae)},te.prototype.error=function(ae){this._o.onError(ae)},te.prototype.completed=function(){this._o.onCompleted()},te}(oe);We.skipWhile=function(re,te){var ae=Te(re,te,3);return new Zu(this,ae)};var v5=function(re){Rt(te,re);function te(le,xe){this.source=le,this._count=xe,re.call(this)}te.prototype.subscribeCore=function(le){return this.source.subscribe(new ae(le,this._count))};function ae(le,xe){this._o=le,this._c=xe,this._r=xe,oe.call(this)}return Rt(ae,oe),ae.prototype.next=function(le){this._r-- >0&&(this._o.onNext(le),this._r<=0&&this._o.onCompleted())},ae.prototype.error=function(le){this._o.onError(le)},ae.prototype.completed=function(){this._o.onCompleted()},te}(ct);We.take=function(re,te){if(re<0)throw new ve;return re===0?_t(te):new v5(this,re)};var g5=function(re){Rt(te,re);function te(ae,le){this.source=ae,this._fn=le,re.call(this)}return te.prototype.subscribeCore=function(ae){return this.source.subscribe(new y5(ae,this))},te}(ct),y5=function(re){Rt(te,re);function te(ae,le){this._o=ae,this._p=le,this._i=0,this._r=!0,re.call(this)}return te.prototype.next=function(ae){if(this._r&&(this._r=L(this._p._fn)(ae,this._i++,this._p),this._r===N))return this._o.onError(this._r.e);this._r?this._o.onNext(ae):this._o.onCompleted()},te.prototype.error=function(ae){this._o.onError(ae)},te.prototype.completed=function(){this._o.onCompleted()},te}(oe);We.takeWhile=function(re,te){var ae=Te(re,te,3);return new g5(this,ae)};var L1=function(re){Rt(te,re);function te(xe,Le,Je){this.source=xe,this.predicate=Te(Le,Je,3),re.call(this)}te.prototype.subscribeCore=function(xe){return this.source.subscribe(new le(xe,this.predicate,this))};function ae(xe,Le){return function(Je,lt,zt){return Le.predicate(Je,lt,zt)&&xe.call(this,Je,lt,zt)}}te.prototype.internalFilter=function(xe,Le){return new te(this.source,ae(xe,this),Le)},Rt(le,oe);function le(xe,Le,Je){this.o=xe,this.predicate=Le,this.source=Je,this.i=0,oe.call(this)}return le.prototype.next=function(xe){var Le=L(this.predicate)(xe,this.i++,this.source);if(Le===N)return this.o.onError(Le.e);Le&&this.o.onNext(xe)},le.prototype.error=function(xe){this.o.onError(xe)},le.prototype.completed=function(){this.o.onCompleted()},te}(ct);We.filter=We.where=function(re,te){return this instanceof L1?this.internalFilter(re,te):new L1(this,re,te)};function x5(re,te,ae,le){var xe=new Hf;return le.push(b5(xe,te,ae)),re.apply(te,le),xe.asObservable()}function b5(re,te,ae){return function(){for(var xe=arguments.length,Le=new Array(xe),Je=0;Je<xe;Je++)Le[Je]=arguments[Je];if(R(ae)){if(Le=L(ae).apply(te,Le),Le===N)return re.onError(Le.e);re.onNext(Le)}else Le.length<=1?re.onNext(Le[0]):re.onNext(Le);re.onCompleted()}}Ve.fromCallback=function(re,te,ae){return function(){typeof te>"u"&&(te=this);for(var le=arguments.length,xe=new Array(le),Le=0;Le<le;Le++)xe[Le]=arguments[Le];return x5(re,te,ae,xe)}};function _5(re,te,ae,le){var xe=new Hf;return le.push(w5(xe,te,ae)),re.apply(te,le),xe.asObservable()}function w5(re,te,ae){return function(){var xe=arguments[0];if(xe)return re.onError(xe);for(var Le=arguments.length,Je=[],lt=1;lt<Le;lt++)Je[lt-1]=arguments[lt];if(R(ae)){var Je=L(ae).apply(te,Je);if(Je===N)return re.onError(Je.e);re.onNext(Je)}else Je.length<=1?re.onNext(Je[0]):re.onNext(Je);re.onCompleted()}}Ve.fromNodeCallback=function(re,te,ae){return function(){typeof te>"u"&&(te=this);for(var le=arguments.length,xe=new Array(le),Le=0;Le<le;Le++)xe[Le]=arguments[Le];return _5(re,te,ae,xe)}};function C5(re){return h.StaticNodeList?re instanceof h.StaticNodeList||re instanceof h.NodeList:Object.prototype.toString.call(re)==="[object NodeList]"}function F1(re,te,ae){this._e=re,this._n=te,this._fn=ae,this._e.addEventListener(this._n,this._fn,!1),this.isDisposed=!1}F1.prototype.dispose=function(){this.isDisposed||(this._e.removeEventListener(this._n,this._fn,!1),this.isDisposed=!0)};function U1(re,te,ae){var le=new Tr,xe=Object.prototype.toString.call(re);if(C5(re)||xe==="[object HTMLCollection]")for(var Le=0,Je=re.length;Le<Je;Le++)le.add(U1(re.item(Le),te,ae));else re&&le.add(new F1(re,te,ae));return le}f.config.useNativeEvents=!1;var S5=function(re){Rt(te,re);function te(le,xe,Le){this._el=le,this._n=xe,this._fn=Le,re.call(this)}function ae(le,xe){return function(){var Je=arguments[0];if(R(xe)&&(Je=L(xe).apply(null,arguments),Je===N))return le.onError(Je.e);le.onNext(Je)}}return te.prototype.subscribeCore=function(le){return U1(this._el,this._n,ae(le,this._fn))},te}(ct);Ve.fromEvent=function(re,te,ae){return re.addListener?B1(function(le){re.addListener(te,le)},function(le){re.removeListener(te,le)},ae):!f.config.useNativeEvents&&typeof re.on=="function"&&typeof re.off=="function"?B1(function(le){re.on(te,le)},function(le){re.off(te,le)},ae):new S5(re,te,ae).publish().refCount()};var E5=function(re){Rt(te,re);function te(xe,Le,Je){this._add=xe,this._del=Le,this._fn=Je,re.call(this)}function ae(xe,Le){return function(){var lt=arguments[0];if(R(Le)&&(lt=L(Le).apply(null,arguments),lt===N))return xe.onError(lt.e);xe.onNext(lt)}}te.prototype.subscribeCore=function(xe){var Le=ae(xe,this._fn),Je=this._add(Le);return new le(this._del,Le,Je)};function le(xe,Le,Je){this._del=xe,this._fn=Le,this._ret=Je,this.isDisposed=!1}return le.prototype.dispose=function(){this.isDisposed||(R(this._del)&&this._del(this._fn,this._ret),this.isDisposed=!0)},te}(ct),B1=Ve.fromEventPattern=function(re,te,ae){return new E5(re,te,ae).publish().refCount()},T5=function(re){Rt(te,re);function te(xe,Le){this._p=xe,this._s=Le,re.call(this)}function ae(xe,Le){var Je=Le[0],lt=Le[1];Je.onNext(lt),Je.onCompleted()}function le(xe,Le){var Je=Le[0],lt=Le[1];Je.onError(lt)}return te.prototype.subscribeCore=function(xe){var Le=new dr,Je=this,lt=this._p;return R(lt)&&(lt=L(lt)(),lt===N)?(xe.onError(lt.e),Le):(lt.then(function(zt){Le.setDisposable(Je._s.schedule([xe,zt],ae))},function(zt){Le.setDisposable(Je._s.schedule([xe,zt],le))}),Le)},te}(ct),fi=Ve.fromPromise=function(re,te){return te||(te=ro),new T5(re,te)};We.toPromise=function(re){if(re||(re=f.config.Promise),!re)throw new Z("Promise type not provided nor in Rx.config.Promise");var te=this;return new re(function(ae,le){var xe;te.subscribe(function(Le){xe=Le},le,function(){ae(xe)})})},Ve.startAsync=function(re){var te=L(re)();return te===N?pi(te.e):fi(te)};var M5=function(re){Rt(te,re);function te(ae,le,xe){this.source=ae,this._fn1=le,this._fn2=xe,re.call(this)}return te.prototype.subscribeCore=function(ae){var le=this.source.multicast(this._fn1());return new kr(this._fn2(le).subscribe(ae),le.connect())},te}(ct);We.multicast=function(re,te){return R(re)?new M5(this,re,te):new R5(this,re)},We.publish=function(re){return re&&R(re)?this.multicast(function(){return new pa},re):this.multicast(new pa)},We.share=function(){return this.publish().refCount()},We.publishLast=function(re){return re&&R(re)?this.multicast(function(){return new Hf},re):this.multicast(new Hf)},We.publishValue=function(re,te){return arguments.length===2?this.multicast(function(){return new W1(te)},re):this.multicast(new W1(re))},We.shareValue=function(re){return this.publishValue(re).refCount()},We.replay=function(re,te,ae,le){return re&&R(re)?this.multicast(function(){return new j1(te,ae,le)},re):this.multicast(new j1(te,ae,le))},We.shareReplay=function(re,te,ae){return this.replay(null,re,te,ae).refCount()};var A5=function(re){Rt(te,re);function te(le){this.source=le,this._count=0,this._connectableSubscription=null,re.call(this)}te.prototype.subscribeCore=function(le){var xe=this.source.subscribe(le);return++this._count===1&&(this._connectableSubscription=this.source.connect()),new ae(this,xe)};function ae(le,xe){this._p=le,this._s=xe,this.isDisposed=!1}return ae.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.dispose(),--this._p._count===0&&this._p._connectableSubscription.dispose())},te}(ct),R5=f.ConnectableObservable=function(re){Rt(te,re);function te(le,xe){this.source=le,this._connection=null,this._source=le.asObservable(),this._subject=xe,re.call(this)}function ae(le,xe){this._p=le,this._s=xe}return ae.prototype.dispose=function(){this._s&&(this._s.dispose(),this._s=null,this._p._connection=null)},te.prototype.connect=function(){if(!this._connection){if(this._subject.isStopped)return qr;var le=this._source.subscribe(this._subject);this._connection=new ae(this,le)}return this._connection},te.prototype._subscribe=function(le){return this._subject.subscribe(le)},te.prototype.refCount=function(){return new A5(this)},te}(Ve),k5=function(re){Rt(te,re);function te(le,xe){this._dt=le,this._s=xe,re.call(this)}te.prototype.subscribeCore=function(le){return this._s.scheduleFuture(le,this._dt,ae)};function ae(le,xe){xe.onNext(0),xe.onCompleted()}return te}(ct);function I5(re,te){return new k5(re,te)}function V1(re,te,ae){return new oo(function(le){var xe=re,Le=bn(te);return ae.scheduleRecursiveFuture(0,xe,function(Je,lt){if(Le>0){var zt=ae.now();xe=new Date(xe.getTime()+Le),xe.getTime()<=zt&&(xe=new Date(zt+Le))}le.onNext(Je),lt(Je+1,new Date(xe))})})}function H1(re,te,ae){return re===te?new oo(function(le){return ae.schedulePeriodic(0,te,function(xe){return le.onNext(xe),xe+1})}):$e(function(){return V1(new Date(ae.now()+re),te,ae)})}var P5=Ve.interval=function(re,te){return H1(re,re,on(te)?te:ro)},ZD=Ve.timer=function(re,te,ae){var le;return on(ae)||(ae=ro),te!=null&&typeof te=="number"?le=te:on(te)&&(ae=te),(re instanceof Date||typeof re=="number")&&le===e?I5(re,ae):re instanceof Date&&le!==e?V1(re,te,ae):H1(re,le,ae)};function z1(re,te,ae){return new oo(function(le){var xe=!1,Le=new Br,Je=null,lt=[],zt=!1,tr;return tr=re.materialize().timestamp(ae).subscribe(function(Qt){var ar,zr;Qt.value.kind==="E"?(lt=[],lt.push(Qt),Je=Qt.value.error,zr=!zt):(lt.push({value:Qt.value,timestamp:Qt.timestamp+te}),zr=!xe,xe=!0),zr&&(Je!==null?le.onError(Je):(ar=new dr,Le.setDisposable(ar),ar.setDisposable(ae.scheduleRecursiveFuture(null,te,function(Yn,Ei){var oi,Jn,ki,Ga;if(Je===null){zt=!0;do ki=null,lt.length>0&&lt[0].timestamp-ae.now()<=0&&(ki=lt.shift().value),ki!==null&&ki.accept(le);while(ki!==null);Ga=!1,Jn=0,lt.length>0?(Ga=!0,Jn=Math.max(0,lt[0].timestamp-ae.now())):xe=!1,oi=Je,zt=!1,oi!==null?le.onError(oi):Ga&&Ei(null,Jn)}}))))}),new kr(tr,Le)},re)}function D5(re,te,ae){return $e(function(){return z1(re,te-ae.now(),ae)})}function O5(re,te,ae){var le,xe;return R(te)?xe=te:(le=te,xe=ae),new oo(function(Le){var Je=new Tr,lt=!1,zt=new Br;function tr(){zt.setDisposable(re.subscribe(function(ar){var zr=L(xe)(ar);if(zr===N)return Le.onError(zr.e);var Yn=new dr;Je.add(Yn),Yn.setDisposable(zr.subscribe(function(){Le.onNext(ar),Je.remove(Yn),Qt()},function(Ei){Le.onError(Ei)},function(){Le.onNext(ar),Je.remove(Yn),Qt()}))},function(ar){Le.onError(ar)},function(){lt=!0,zt.dispose(),Qt()}))}function Qt(){lt&&Je.length===0&&Le.onCompleted()}return le?zt.setDisposable(le.subscribe(tr,function(ar){Le.onError(ar)},tr)):tr(),new kr(zt,Je)},re)}We.delay=function(){var re=arguments[0];if(typeof re=="number"||re instanceof Date){var te=re,ae=arguments[1];return on(ae)||(ae=ro),te instanceof Date?D5(this,te,ae):z1(this,te,ae)}else{if(Ve.isObservable(re)||R(re))return O5(this,re,arguments[1]);throw new Error("Invalid arguments")}};var N5=function(re){Rt(te,re);function te(ae,le,xe){on(xe)||(xe=ro),this.source=ae,this._dt=le,this._s=xe,re.call(this)}return te.prototype.subscribeCore=function(ae){var le=new Br;return new kr(this.source.subscribe(new L5(ae,this._dt,this._s,le)),le)},te}(ct),L5=function(re){Rt(te,re);function te(le,xe,Le,Je){this._o=le,this._d=xe,this._scheduler=Le,this._c=Je,this._v=null,this._hv=!1,this._id=0,re.call(this)}function ae(le,xe){xe.self._hv&&xe.self._id===xe.currentId&&xe.self._o.onNext(xe.x),xe.self._hv=!1}return te.prototype.next=function(le){this._hv=!0,this._v=le;var xe=++this._id,Le=new dr;this._c.setDisposable(Le),Le.setDisposable(this._scheduler.scheduleFuture(this,this._d,function(Je,lt){lt._hv&&lt._id===xe&&lt._o.onNext(le),lt._hv=!1}))},te.prototype.error=function(le){this._c.dispose(),this._o.onError(le),this._hv=!1,this._id++},te.prototype.completed=function(){this._c.dispose(),this._hv&&this._o.onNext(this._v),this._o.onCompleted(),this._hv=!1,this._id++},te}(oe);function F5(re,te){return new oo(function(ae){var le,xe=!1,Le=new Br,Je=0,lt=re.subscribe(function(zt){var tr=L(te)(zt);if(tr===N)return ae.onError(tr.e);A(tr)&&(tr=fi(tr)),xe=!0,le=zt,Je++;var Qt=Je,ar=new dr;Le.setDisposable(ar),ar.setDisposable(tr.subscribe(function(){xe&&Je===Qt&&ae.onNext(le),xe=!1,ar.dispose()},function(zr){ae.onError(zr)},function(){xe&&Je===Qt&&ae.onNext(le),xe=!1,ar.dispose()}))},function(zt){Le.dispose(),ae.onError(zt),xe=!1,Je++},function(){Le.dispose(),xe&&ae.onNext(le),ae.onCompleted(),xe=!1,Je++});return new kr(lt,Le)},re)}We.debounce=function(){if(R(arguments[0]))return F5(this,arguments[0]);if(typeof arguments[0]=="number")return new N5(this,arguments[0],arguments[1]);throw new Error("Invalid arguments")};var U5=function(re){Rt(te,re);function te(ae,le){this.source=ae,this._s=le,re.call(this)}return te.prototype.subscribeCore=function(ae){return this.source.subscribe(new B5(ae,this._s))},te}(ct),B5=function(re){Rt(te,re);function te(ae,le){this._o=ae,this._s=le,re.call(this)}return te.prototype.next=function(ae){this._o.onNext({value:ae,timestamp:this._s.now()})},te.prototype.error=function(ae){this._o.onError(ae)},te.prototype.completed=function(){this._o.onCompleted()},te}(oe);We.timestamp=function(re){return on(re)||(re=ro),new U5(this,re)};var G1=function(re){Rt(te,re);function te(ae,le){this.source=ae,this._sampler=le,re.call(this)}return te.prototype.subscribeCore=function(ae){var le={o:ae,atEnd:!1,value:null,hasValue:!1,sourceSubscription:new dr};return le.sourceSubscription.setDisposable(this.source.subscribe(new H5(le))),new kr(le.sourceSubscription,this._sampler.subscribe(new V5(le)))},te}(ct),V5=function(re){Rt(te,re);function te(ae){this._s=ae,re.call(this)}return te.prototype._handleMessage=function(){this._s.hasValue&&(this._s.hasValue=!1,this._s.o.onNext(this._s.value)),this._s.atEnd&&this._s.o.onCompleted()},te.prototype.next=function(){this._handleMessage()},te.prototype.error=function(ae){this._s.onError(ae)},te.prototype.completed=function(){this._handleMessage()},te}(oe),H5=function(re){Rt(te,re);function te(ae){this._s=ae,re.call(this)}return te.prototype.next=function(ae){this._s.hasValue=!0,this._s.value=ae},te.prototype.error=function(ae){this._s.o.onError(ae)},te.prototype.completed=function(){this._s.atEnd=!0,this._s.sourceSubscription.dispose()},te}(oe);We.sample=function(re,te){return on(te)||(te=ro),typeof re=="number"?new G1(this,P5(re,te)):new G1(this,re)};var Bf=f.TimeoutError=function(re){this.message=re||"Timeout has occurred",this.name="TimeoutError",Error.call(this)};Bf.prototype=Object.create(Error.prototype);function z5(re,te,ae,le){return R(te)&&(le=ae,ae=te,te=zn()),Ve.isObservable(le)||(le=pi(new Bf)),new oo(function(xe){var Le=new Br,Je=new Br,lt=new dr;Le.setDisposable(lt);var zt=0,tr=!1;function Qt(zr){var Yn=zt,Ei=new dr;function oi(){return tr=Yn===zt,tr}Je.setDisposable(Ei),Ei.setDisposable(zr.subscribe(function(){oi()&&Le.setDisposable(le.subscribe(xe)),Ei.dispose()},function(Jn){oi()&&xe.onError(Jn)},function(){oi()&&Le.setDisposable(le.subscribe(xe))}))}Qt(te);function ar(){var zr=!tr;return zr&&zt++,zr}return lt.setDisposable(re.subscribe(function(zr){if(ar()){xe.onNext(zr);var Yn=L(ae)(zr);if(Yn===N)return xe.onError(Yn.e);Qt(A(Yn)?fi(Yn):Yn)}},function(zr){ar()&&xe.onError(zr)},function(){ar()&&xe.onCompleted()})),new kr(Le,Je)},re)}function G5(re,te,ae,le){return on(ae)&&(le=ae,ae=pi(new Bf)),ae instanceof Error&&(ae=pi(ae)),on(le)||(le=ro),Ve.isObservable(ae)||(ae=pi(new Bf)),new oo(function(xe){var Le=0,Je=new dr,lt=new Br,zt=!1,tr=new Br;lt.setDisposable(Je);function Qt(){var ar=Le;tr.setDisposable(le.scheduleFuture(null,te,function(){zt=Le===ar,zt&&(A(ae)&&(ae=fi(ae)),lt.setDisposable(ae.subscribe(xe)))}))}return Qt(),Je.setDisposable(re.subscribe(function(ar){zt||(Le++,xe.onNext(ar),Qt())},function(ar){zt||(Le++,xe.onError(ar))},function(){zt||(Le++,xe.onCompleted())})),new kr(lt,tr)},re)}We.timeout=function(){var re=arguments[0];if(re instanceof Date||typeof re=="number")return G5(this,re,arguments[1],arguments[2]);if(Ve.isObservable(re)||R(re))return z5(this,re,arguments[1],arguments[2]);throw new Error("Invalid arguments")},We.throttle=function(re,te){on(te)||(te=ro);var ae=+re||0;if(ae<=0)throw new RangeError("windowDuration cannot be less or equal zero.");var le=this;return new oo(function(xe){var Le=0;return le.subscribe(function(Je){var lt=te.now();(Le===0||lt-Le>=ae)&&(Le=lt,xe.onNext(Je))},function(Je){xe.onError(Je)},function(){xe.onCompleted()})},le)};var q5=function(re){Rt(te,re);function te(ae,le){this.source=ae,this.controller=new pa,this.paused=!0,le&&le.subscribe?this.pauser=this.controller.merge(le):this.pauser=this.controller,re.call(this)}return te.prototype._subscribe=function(ae){var le=this.source.publish(),xe=le.subscribe(ae),Le=qr,Je=this.pauser.startWith(!this.paused).distinctUntilChanged().subscribe(function(lt){lt?Le=le.connect():(Le.dispose(),Le=qr)});return new Ar([xe,Le,Je])},te.prototype.pause=function(){this.paused=!0,this.controller.onNext(!1)},te.prototype.resume=function(){this.paused=!1,this.controller.onNext(!0)},te}(Ve);We.pausable=function(re){return new q5(this,re)};function W5(re,te,ae){return new oo(function(le){var xe=[!1,!1],Le=!1,Je=!1,lt=new Array(2),zt;function tr(Qt,ar){if(lt[ar]=Qt,xe[ar]=!0,Le||(Le=xe.every(b))){if(zt)return le.onError(zt);var zr=L(ae).apply(null,lt);if(zr===N)return le.onError(zr.e);le.onNext(zr)}Je&&lt[1]&&le.onCompleted()}return new kr(re.subscribe(function(Qt){tr(Qt,0)},function(Qt){lt[1]?le.onError(Qt):zt=Qt},function(){Je=!0,lt[1]&&le.onCompleted()}),te.subscribe(function(Qt){tr(Qt,1)},function(Qt){le.onError(Qt)},function(){Je=!0,tr(!0,1)}))},re)}var j5=function(re){Rt(te,re);function te(ae,le){this.source=ae,this.controller=new pa,this.paused=!0,le&&le.subscribe?this.pauser=this.controller.merge(le):this.pauser=this.controller,re.call(this)}return te.prototype._subscribe=function(ae){var le=[],xe;function Le(){for(;le.length>0;)ae.onNext(le.shift())}var Je=W5(this.source,this.pauser.startWith(!this.paused).distinctUntilChanged(),function(lt,zt){return{data:lt,shouldFire:zt}}).subscribe(function(lt){xe!==e&&lt.shouldFire!==xe?(xe=lt.shouldFire,lt.shouldFire&&Le()):(xe=lt.shouldFire,lt.shouldFire?ae.onNext(lt.data):le.push(lt.data))},function(lt){Le(),ae.onError(lt)},function(){Le(),ae.onCompleted()});return Je},te.prototype.pause=function(){this.paused=!0,this.controller.onNext(!1)},te.prototype.resume=function(){this.paused=!1,this.controller.onNext(!0)},te}(Ve);We.pausableBuffered=function(re){return new j5(this,re)};var $5=function(re){Rt(te,re);function te(ae,le,xe){re.call(this),this.subject=new X5(le,xe),this.source=ae.multicast(this.subject).refCount()}return te.prototype._subscribe=function(ae){return this.source.subscribe(ae)},te.prototype.request=function(ae){return this.subject.request(ae??-1)},te}(Ve),X5=function(re){Rt(te,re);function te(ae,le){ae==null&&(ae=!0),re.call(this),this.subject=new pa,this.enableQueue=ae,this.queue=ae?[]:null,this.requestedCount=0,this.requestedDisposable=null,this.error=null,this.hasFailed=!1,this.hasCompleted=!1,this.scheduler=le||fn}return Ur(te.prototype,Wi,{_subscribe:function(ae){return this.subject.subscribe(ae)},onCompleted:function(){this.hasCompleted=!0,!this.enableQueue||this.queue.length===0?(this.subject.onCompleted(),this.disposeCurrentRequest()):this.queue.push(qi.createOnCompleted())},onError:function(ae){this.hasFailed=!0,this.error=ae,!this.enableQueue||this.queue.length===0?(this.subject.onError(ae),this.disposeCurrentRequest()):this.queue.push(qi.createOnError(ae))},onNext:function(ae){this.requestedCount<=0?this.enableQueue&&this.queue.push(qi.createOnNext(ae)):(this.requestedCount--===0&&this.disposeCurrentRequest(),this.subject.onNext(ae))},_processRequest:function(ae){if(this.enableQueue)for(;this.queue.length>0&&(ae>0||this.queue[0].kind!=="N");){var le=this.queue.shift();le.accept(this.subject),le.kind==="N"?ae--:(this.disposeCurrentRequest(),this.queue=[])}return ae},request:function(ae){this.disposeCurrentRequest();var le=this;return this.requestedDisposable=this.scheduler.schedule(ae,function(xe,Le){var Je=le._processRequest(Le),lt=le.hasCompleted||le.hasFailed;if(!lt&&Je>0)return le.requestedCount=Je,Pr(function(){le.requestedCount=0})}),this.requestedDisposable},disposeCurrentRequest:function(){this.requestedDisposable&&(this.requestedDisposable.dispose(),this.requestedDisposable=null)}}),te}(Ve);We.controlled=function(re,te){return re&&on(re)&&(te=re,re=!0),re==null&&(re=!0),new $5(this,re,te)},We.pipe=function(re){var te=this.pausableBuffered();function ae(){te.resume()}return re.addListener("drain",ae),te.subscribe(function(le){!re.write(le)&&te.pause()},function(le){re.emit("error",le)},function(){!re._isStdio&&re.end(),re.removeListener("drain",ae)}),te.resume(),re};var Y5=function(re){Rt(te,re);function te(ae,le){this._o=ae,this._xform=le,re.call(this)}return te.prototype.next=function(ae){var le=L(this._xform["@@transducer/step"]).call(this._xform,this._o,ae);le===N&&this._o.onError(le.e)},te.prototype.error=function(ae){this._o.onError(ae)},te.prototype.completed=function(){this._xform["@@transducer/result"](this._o)},te}(oe);function Z5(re){return{"@@transducer/init":function(){return re},"@@transducer/step":function(te,ae){return te.onNext(ae)},"@@transducer/result":function(te){return te.onCompleted()}}}We.transduce=function(re){var te=this;return new oo(function(ae){var le=re(Z5(ae));return te.subscribe(new Y5(ae,le))},te)};var oo=f.AnonymousObservable=function(re){Rt(le,re);function te(xe){return xe&&R(xe.dispose)?xe:R(xe)?Pr(xe):qr}function ae(xe,Le){var Je=Le[0],lt=Le[1],zt=L(lt.__subscribe).call(lt,Je);zt===N&&!Je.fail(N.e)&&Y(N.e),Je.setDisposable(te(zt))}function le(xe,Le){this.source=Le,this.__subscribe=xe,re.call(this)}return le.prototype._subscribe=function(xe){var Le=new q1(xe),Je=[Le,this];return fn.scheduleRequired()?fn.schedule(Je,ae):ae(null,Je),Le},le}(Ve),q1=function(re){Rt(te,re);function te(le){re.call(this),this.observer=le,this.m=new dr}var ae=te.prototype;return ae.next=function(le){var xe=L(this.observer.onNext).call(this.observer,le);xe===N&&(this.dispose(),Y(xe.e))},ae.error=function(le){var xe=L(this.observer.onError).call(this.observer,le);this.dispose(),xe===N&&Y(xe.e)},ae.completed=function(){var le=L(this.observer.onCompleted).call(this.observer);this.dispose(),le===N&&Y(le.e)},ae.setDisposable=function(le){this.m.setDisposable(le)},ae.getDisposable=function(){return this.m.getDisposable()},ae.dispose=function(){re.prototype.dispose.call(this),this.m.dispose()},te}(oe),Vf=function(re,te){this._s=re,this._o=te};Vf.prototype.dispose=function(){if(!this._s.isDisposed&&this._o!==null){var re=this._s.observers.indexOf(this._o);this._s.observers.splice(re,1),this._o=null}};var pa=f.Subject=function(re){Rt(te,re);function te(){re.call(this),this.isDisposed=!1,this.isStopped=!1,this.observers=[],this.hasError=!1}return Ur(te.prototype,Wi.prototype,{_subscribe:function(ae){return nn(this),this.isStopped?this.hasError?(ae.onError(this.error),qr):(ae.onCompleted(),qr):(this.observers.push(ae),new Vf(this,ae))},hasObservers:function(){return nn(this),this.observers.length>0},onCompleted:function(){if(nn(this),!this.isStopped){this.isStopped=!0;for(var ae=0,le=D(this.observers),xe=le.length;ae<xe;ae++)le[ae].onCompleted();this.observers.length=0}},onError:function(ae){if(nn(this),!this.isStopped){this.isStopped=!0,this.error=ae,this.hasError=!0;for(var le=0,xe=D(this.observers),Le=xe.length;le<Le;le++)xe[le].onError(ae);this.observers.length=0}},onNext:function(ae){if(nn(this),!this.isStopped)for(var le=0,xe=D(this.observers),Le=xe.length;le<Le;le++)xe[le].onNext(ae)},dispose:function(){this.isDisposed=!0,this.observers=null}}),te.create=function(ae,le){return new K5(ae,le)},te}(Ve),Hf=f.AsyncSubject=function(re){Rt(te,re);function te(){re.call(this),this.isDisposed=!1,this.isStopped=!1,this.hasValue=!1,this.observers=[],this.hasError=!1}return Ur(te.prototype,Wi.prototype,{_subscribe:function(ae){return nn(this),this.isStopped?(this.hasError?ae.onError(this.error):(this.hasValue&&ae.onNext(this.value),ae.onCompleted()),qr):(this.observers.push(ae),new Vf(this,ae))},hasObservers:function(){return nn(this),this.observers.length>0},onCompleted:function(){var ae,le;if(nn(this),!this.isStopped){this.isStopped=!0;var xe=D(this.observers),le=xe.length;if(this.hasValue)for(ae=0;ae<le;ae++){var Le=xe[ae];Le.onNext(this.value),Le.onCompleted()}else for(ae=0;ae<le;ae++)xe[ae].onCompleted();this.observers.length=0}},onError:function(ae){if(nn(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=ae;for(var le=0,xe=D(this.observers),Le=xe.length;le<Le;le++)xe[le].onError(ae);this.observers.length=0}},onNext:function(ae){nn(this),!this.isStopped&&(this.value=ae,this.hasValue=!0)},dispose:function(){this.isDisposed=!0,this.observers=null,this.error=null,this.value=null}}),te}(Ve),K5=f.AnonymousSubject=function(re){Rt(te,re);function te(ae,le){this.observer=ae,this.observable=le,re.call(this)}return Ur(te.prototype,Wi.prototype,{_subscribe:function(ae){return this.observable.subscribe(ae)},onCompleted:function(){this.observer.onCompleted()},onError:function(ae){this.observer.onError(ae)},onNext:function(ae){this.observer.onNext(ae)}}),te}(Ve),W1=f.BehaviorSubject=function(re){Rt(te,re);function te(ae){re.call(this),this.value=ae,this.observers=[],this.isDisposed=!1,this.isStopped=!1,this.hasError=!1}return Ur(te.prototype,Wi.prototype,{_subscribe:function(ae){return nn(this),this.isStopped?(this.hasError?ae.onError(this.error):ae.onCompleted(),qr):(this.observers.push(ae),ae.onNext(this.value),new Vf(this,ae))},getValue:function(){return nn(this),this.hasError&&Y(this.error),this.value},hasObservers:function(){return nn(this),this.observers.length>0},onCompleted:function(){if(nn(this),!this.isStopped){this.isStopped=!0;for(var ae=0,le=D(this.observers),xe=le.length;ae<xe;ae++)le[ae].onCompleted();this.observers.length=0}},onError:function(ae){if(nn(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=ae;for(var le=0,xe=D(this.observers),Le=xe.length;le<Le;le++)xe[le].onError(ae);this.observers.length=0}},onNext:function(ae){if(nn(this),!this.isStopped){this.value=ae;for(var le=0,xe=D(this.observers),Le=xe.length;le<Le;le++)xe[le].onNext(ae)}},dispose:function(){this.isDisposed=!0,this.observers=null,this.value=null,this.error=null}}),te}(Ve),j1=f.ReplaySubject=function(re){var te=Math.pow(2,53)-1;function ae(xe,Le){return Pr(function(){Le.dispose(),!xe.isDisposed&&xe.observers.splice(xe.observers.indexOf(Le),1)})}Rt(le,re);function le(xe,Le,Je){this.bufferSize=xe??te,this.windowSize=Le??te,this.scheduler=Je||fn,this.q=[],this.observers=[],this.isStopped=!1,this.isDisposed=!1,this.hasError=!1,this.error=null,re.call(this)}return Ur(le.prototype,Wi.prototype,{_subscribe:function(xe){nn(this);var Le=new ot(this.scheduler,xe),Je=ae(this,Le);this._trim(this.scheduler.now()),this.observers.push(Le);for(var lt=0,zt=this.q.length;lt<zt;lt++)Le.onNext(this.q[lt].value);return this.hasError?Le.onError(this.error):this.isStopped&&Le.onCompleted(),Le.ensureActive(),Je},hasObservers:function(){return nn(this),this.observers.length>0},_trim:function(xe){for(;this.q.length>this.bufferSize;)this.q.shift();for(;this.q.length>0&&xe-this.q[0].interval>this.windowSize;)this.q.shift()},onNext:function(xe){if(nn(this),!this.isStopped){var Le=this.scheduler.now();this.q.push({interval:Le,value:xe}),this._trim(Le);for(var Je=0,lt=D(this.observers),zt=lt.length;Je<zt;Je++){var tr=lt[Je];tr.onNext(xe),tr.ensureActive()}}},onError:function(xe){if(nn(this),!this.isStopped){this.isStopped=!0,this.error=xe,this.hasError=!0;var Le=this.scheduler.now();this._trim(Le);for(var Je=0,lt=D(this.observers),zt=lt.length;Je<zt;Je++){var tr=lt[Je];tr.onError(xe),tr.ensureActive()}this.observers.length=0}},onCompleted:function(){if(nn(this),!this.isStopped){this.isStopped=!0;var xe=this.scheduler.now();this._trim(xe);for(var Le=0,Je=D(this.observers),lt=Je.length;Le<lt;Le++){var zt=Je[Le];zt.onCompleted(),zt.ensureActive()}this.observers.length=0}},dispose:function(){this.isDisposed=!0,this.observers=null}}),le}(Ve);f.Pauser=function(re){Rt(te,re);function te(){re.call(this)}return te.prototype.pause=function(){this.onNext(!1)},te.prototype.resume=function(){this.onNext(!0)},te}(pa),i.Rx=f;var Q5=pe()}).call(this,u,n);var g=u.Rx,y;(function(i){i.VERSION={number:"1.1.6",date:"June 26 2017"}})(y||(y={}));var y;(function(i){var r;(function(e){var o;(function(s){function d(S){return S.creator&&S.chunkSize}s.is=d;function p(S,M,A,R,D){return S.currentIndex>=S.chunkSize&&(S.currentIndex=0,S.current=S.creator(S.chunkSize),S.parts[S.parts.length]=S.current),S.current[S.currentIndex++]=M,S.current[S.currentIndex++]=A,S.current[S.currentIndex++]=R,S.current[S.currentIndex++]=D,S.elementCount++}s.add4=p;function x(S,M,A,R){return S.currentIndex>=S.chunkSize&&(S.currentIndex=0,S.current=S.creator(S.chunkSize),S.parts[S.parts.length]=S.current),S.current[S.currentIndex++]=M,S.current[S.currentIndex++]=A,S.current[S.currentIndex++]=R,S.elementCount++}s.add3=x;function l(S,M,A){return S.currentIndex>=S.chunkSize&&(S.currentIndex=0,S.current=S.creator(S.chunkSize),S.parts[S.parts.length]=S.current),S.current[S.currentIndex++]=M,S.current[S.currentIndex++]=A,S.elementCount++}s.add2=l;function _(S,M){return S.currentIndex>=S.chunkSize&&(S.currentIndex=0,S.current=S.creator(S.chunkSize),S.parts[S.parts.length]=S.current),S.current[S.currentIndex++]=M,S.elementCount++}s.add=_;function v(S){var M=S.creator(S.elementSize*S.elementCount),A=(S.parts.length-1)*S.chunkSize,R=0,D;if(S.parts.length>1)if(S.parts[0].buffer)for(var N=0;N<S.parts.length-1;N++)M.set(S.parts[N],S.chunkSize*N);else for(var N=0;N<S.parts.length-1;N++){R=S.chunkSize*N,D=S.parts[N];for(var I=0;I<S.chunkSize;I++)M[R+I]=D[I]}if(S.current.buffer&&S.currentIndex>=S.chunkSize)M.set(S.current,S.chunkSize*(S.parts.length-1));else for(var N=0;N<S.currentIndex;N++)M[A+N]=S.current[N];return M}s.compact=v;function c(S){return S===void 0&&(S=262144),E(function(M){return new Float32Array(M)},S,3)}s.forVertex3D=c;function h(S){return S===void 0&&(S=262144),E(function(M){return new Uint32Array(M)},S,3)}s.forIndexBuffer=h;function f(S){return S===void 0&&(S=131072),E(function(M){return new Int32Array(M)},S,2)}s.forTokenIndices=f;function m(S){return S===void 0&&(S=131072),E(function(M){return new Int32Array(M)},S,1)}s.forIndices=m;function b(S){return S===void 0&&(S=131072),E(function(M){return new Int32Array(M)},S,1)}s.forInt32=b;function w(S){return S===void 0&&(S=131072),E(function(M){return new Float32Array(M)},S,1)}s.forFloat32=w;function C(S){return S===void 0&&(S=131072),E(function(M){return[]},S,1)}s.forArray=C;function E(S,M,A){M=M|0,M<=0&&(M=1);var R=M*A,D=S(R);return{elementSize:A,chunkSize:R,creator:S,current:D,parts:[D],currentIndex:0,elementCount:0}}s.create=E})(o=e.ChunkedArray||(e.ChunkedArray={}))})(r=i.Utils||(i.Utils={}))})(y||(y={}));var y;(function(i){var r;(function(e){var o;(function(s){"use strict";function d(v,c,h){for(;c<h&&v.charCodeAt(c)===32;)c++;return p(v,c,h)}s.parseIntSkipTrailingWhitespace=d;function p(v,c,h){var f=0,m=1;for(v.charCodeAt(c)===45&&(m=-1,c++);c<h;c++){var b=v.charCodeAt(c)-48;if(b>9||b<0)return m*f|0;f=10*f+b|0}return m*f}s.parseInt=p;function x(v,c,h,f){return c.charCodeAt(h)===43&&h++,v*Math.pow(10,p(c,h,f))}function l(v,c,h){for(;c<h&&v.charCodeAt(c)===32;)c++;return _(v,c,h)}s.parseFloatSkipTrailingWhitespace=l;function _(v,c,h){var f=1,m=0,b=0,w=1;for(v.charCodeAt(c)===45&&(f=-1,++c);c<h;){var C=v.charCodeAt(c)-48;if(C>=0&&C<10)m=m*10+C,++c;else if(C===-2){for(++c;c<h;)if(C=v.charCodeAt(c)-48,C>=0&&C<10)b=10*b+C,w=10*w,++c;else return C===53||C===21?x(f*(m+b/w),v,c+1,h):f*(m+b/w);return f*(m+b/w)}else{if(C===53||C===21)return x(f*m,v,c+1,h);break}}return f*m}s.parseFloat=_})(o=e.FastNumberParsers||(e.FastNumberParsers={}))})(r=i.Utils||(i.Utils={}))})(y||(y={}));var y;(function(i){var r;(function(e){var o=[];(function(){for(var d="",p=0;p<512;p++)o[p]=d,d=d+" "})();var s;(function(d){function p(R){return R===void 0&&(R=512),{chunkData:[],chunkOffset:0,chunkCapacity:R,data:[]}}d.create=p;function x(R){return R.data.length?(R.chunkOffset>0&&(R.data[R.data.length]=R.chunkData.splice(0,R.chunkOffset).join("")),R.data.join("")):R.chunkData.length===R.chunkOffset?R.chunkData.join(""):R.chunkData.splice(0,R.chunkOffset).join("")}d.asString=x;function l(R,D){_(R);for(var N=0,I=R.data;N<I.length;N++){var L=I[N];D.writeString(L)}}d.writeTo=l;function _(R){R.chunkOffset>0&&(R.chunkData.length===R.chunkOffset?R.data[R.data.length]=R.chunkData.join(""):R.data[R.data.length]=R.chunkData.splice(0,R.chunkOffset).join(""),R.chunkOffset=0)}function v(R){h(R,`
`)}d.newline=v;function c(R,D){h(R,o[D])}d.whitespace=c;function h(R,D){D!=null&&(R.chunkOffset===R.chunkCapacity&&(R.data[R.data.length]=R.chunkData.join(""),R.chunkOffset=0),R.chunkData[R.chunkOffset++]=D)}d.write=h;function f(R,D){R.chunkOffset===R.chunkCapacity&&(R.data[R.data.length]=R.chunkData.join(""),R.chunkOffset=0),R.chunkData[R.chunkOffset++]=D}d.writeSafe=f;function m(R,D,N){D==null&&h(R,o[N]);var I=N-D.length;I>0&&h(R,o[I]),h(R,D)}d.writePadLeft=m;function b(R,D,N){D==null&&h(R,o[N]);var I=N-D.length;h(R,D),I>0&&h(R,o[I])}d.writePadRight=b;function w(R,D){h(R,""+D)}d.writeInteger=w;function C(R,D,N){var I=""+D,L=N-I.length;L>0&&h(R,o[L]),h(R,I)}d.writeIntegerPadLeft=C;function E(R,D,N){var I=""+D,L=N-I.length;h(R,I),L>0&&h(R,o[L])}d.writeIntegerPadRight=E;function S(R,D,N){h(R,""+Math.round(N*D)/N)}d.writeFloat=S;function M(R,D,N,I){var L=""+Math.round(N*D)/N,Y=I-L.length;Y>0&&h(R,o[Y]),h(R,L)}d.writeFloatPadLeft=M;function A(R,D,N,I){var L=""+Math.round(N*D)/N,Y=I-L.length;h(R,L),Y>0&&h(R,o[Y])}d.writeFloatPadRight=A})(s=e.StringWriter||(e.StringWriter={}))})(r=i.Utils||(i.Utils={}))})(y||(y={}));var y;(function(i){"use strict";var r=function(){function o(){this.isDefined=!1}return o.prototype.getString=function(s){return null},o.prototype.getInteger=function(s){return 0},o.prototype.getFloat=function(s){return 0},o.prototype.getValuePresence=function(s){return 1},o.prototype.areValuesEqual=function(s,d){return!0},o.prototype.stringEquals=function(s,d){return d===null},o}();i.UndefinedColumn=new r;var e;(function(o){function s(p,x,l,_,v){for(var c=[],h=1;h<=l;h++){for(var f=[],m=1;m<=_;m++)f[m-1]=p.getColumn(x+"["+h+"]["+m+"]").getFloat(v);c[h-1]=f}return c}o.getMatrix=s;function d(p,x,l,_,v){for(var c=[],h=1;h<=l;h++)c[h-1]=p.getColumn(x+"["+h+"]").getFloat(v);return c}o.getVector=d})(e=i.Category||(i.Category={}))})(y||(y={}));var y;(function(i){"use strict";var r;(function(s){function d(x,l){return l===void 0&&(l=-1),new e(x,l)}s.error=d;function p(x,l){return l===void 0&&(l=[]),new o(x,l)}s.success=p})(r=i.ParserResult||(i.ParserResult={}));var e=function(){function s(d,p){this.message=d,this.line=p,this.isError=!0}return s.prototype.toString=function(){return this.line>=0?"[Line "+this.line+"] "+this.message:this.message},s}();i.ParserError=e;var o=function(){function s(d,p){this.result=d,this.warnings=p,this.isError=!1}return s}();i.ParserSuccess=o})(y||(y={}));var y;(function(i){var r;(function(e){"use strict";var o;(function(v){function c(){return Object.create(null)}v.create=c;function h(f,m){if(m.length>6)return m;var b=f[m];return b!==void 0?b:(f[m]=m,m)}v.get=h})(o||(o={}));var s=function(){function v(c){this.dataBlocks=[],this.data=c}return v.prototype.toJSON=function(){return this.dataBlocks.map(function(c){return c.toJSON()})},v}();e.File=s;var d=function(){function v(c,h){this.header=h,this.data=c,this.categoryList=[],this.additionalData={},this.categoryMap=new Map}return Object.defineProperty(v.prototype,"categories",{get:function(){return this.categoryList},enumerable:!0,configurable:!0}),v.prototype.getCategory=function(c){return this.categoryMap.get(c)},v.prototype.addCategory=function(c){this.categoryList[this.categoryList.length]=c,this.categoryMap.set(c.name,c)},v.prototype.toJSON=function(){return{id:this.header,categories:this.categoryList.map(function(c){return c.toJSON()}),additionalData:this.additionalData}},v}();e.DataBlock=d;var p=function(){function v(c,h,f,m,b,w,C){this.name=h,this.tokens=w,this.data=c,this.startIndex=f,this.endIndex=m,this.columnCount=b.length,this.rowCount=C/b.length|0,this.columnIndices=new Map,this.columnNameList=[];for(var E=0;E<b.length;E++){var S=b[E].substr(h.length+1);this.columnIndices.set(S,E),this.columnNameList.push(S)}}return Object.defineProperty(v.prototype,"columnNames",{get:function(){return this.columnNameList},enumerable:!0,configurable:!0}),v.prototype.getColumn=function(c){var h=this.columnIndices.get(c);return h!==void 0?new _(this,this.data,c,h):i.UndefinedColumn},v.prototype.toJSON=function(){for(var c=[],h=this.data,f=this.tokens,m=this.columnNameList,b=o.create(),w=0;w<this.rowCount;w++){for(var C={},E=0;E<this.columnCount;E++){var S=(w*this.columnCount+E)*2;C[m[E]]=o.get(b,h.substring(f[S],f[S+1]))}c[w]=C}return{name:this.name,columns:m,rows:c}},v}();e.Category=p;var x=i.Utils.FastNumberParsers.parseInt,l=i.Utils.FastNumberParsers.parseFloat,_=function(){function v(c,h,f,m){this.data=h,this.name=f,this.index=m,this.stringPool=o.create(),this.isDefined=!0,this.tokens=c.tokens,this.columnCount=c.columnCount}return v.prototype.getString=function(c){var h=(c*this.columnCount+this.index)*2,f=o.get(this.stringPool,this.data.substring(this.tokens[h],this.tokens[h+1]));return f==="."||f==="?"?null:f},v.prototype.getInteger=function(c){var h=(c*this.columnCount+this.index)*2;return x(this.data,this.tokens[h],this.tokens[h+1])},v.prototype.getFloat=function(c){var h=(c*this.columnCount+this.index)*2;return l(this.data,this.tokens[h],this.tokens[h+1])},v.prototype.stringEquals=function(c,h){var f=(c*this.columnCount+this.index)*2,m=this.tokens[f],b=h.length;if(b!==this.tokens[f+1]-m)return!1;for(var w=0;w<b;w++)if(this.data.charCodeAt(w+m)!==h.charCodeAt(w))return!1;return!0},v.prototype.areValuesEqual=function(c,h){var f=(c*this.columnCount+this.index)*2,m=(h*this.columnCount+this.index)*2,b=this.tokens[f],w=this.tokens[m],C=this.tokens[f+1]-b;if(C!==this.tokens[m+1]-w)return!1;for(var E=0;E<C;E++)if(this.data.charCodeAt(E+b)!==this.data.charCodeAt(E+w))return!1;return!0},v.prototype.getValuePresence=function(c){var h=c*this.columnCount+this.index,f=this.tokens[2*h];if(this.tokens[2*h+1]-f!==1)return 0;var m=this.data.charCodeAt(f);return m===46?1:m===63?2:0},v}();e.Column=_})(r=i.Text||(i.Text={}))})(y||(y={}));var y;(function(i){var r;(function(e){"use strict";var o;(function(I){function L(ie){var K=new Int32Array(1.61*ie.tokens.length|0);K.set(ie.tokens),ie.tokens=K,ie.tokensLenMinus2=K.length-2|0}function Y(ie,K,Q){ie.count>=ie.tokensLenMinus2&&L(ie),ie.tokens[ie.count++]=K,ie.tokens[ie.count++]=Q}I.addToken=Y;function J(ie){return{tokensLenMinus2:ie-2|0,count:0,tokens:new Int32Array(ie)}}I.create=J})(o||(o={}));function s(I){for(;I.position<I.length;)switch(I.data.charCodeAt(I.position)){case 9:case 10:case 13:case 32:I.currentTokenEnd=I.position;return;default:++I.position;break}I.currentTokenEnd=I.position}function d(I,L){var Y,J;for(++I.position;I.position<I.length;)if(J=I.data.charCodeAt(I.position),J===L)switch(Y=I.data.charCodeAt(I.position+1),Y){case 9:case 10:case 13:case 32:I.currentTokenStart++,I.currentTokenEnd=I.position,I.isEscaped=!0,++I.position;return;default:if(Y===void 0){I.currentTokenStart++,I.currentTokenEnd=I.position,I.isEscaped=!0,++I.position;return}++I.position;break}else{if(J===10||J===13){I.currentTokenEnd=I.position;return}++I.position}I.currentTokenEnd=I.position}function p(I){for(var L=59,Y=I.position+1,J;Y<I.length;)if(J=I.data.charCodeAt(Y),J===59&&(L===10||L===13)){for(I.position=Y+1,I.currentTokenStart++,Y--,J=I.data.charCodeAt(Y);J===10||J===13;)Y--,J=I.data.charCodeAt(Y);I.currentTokenEnd=Y+1,I.isEscaped=!0;return}else(J===13||J===10&&L!==13)&&I.currentLineNumber++,L=J,++Y;return I.position=Y,L}function x(I){for(;I.position<I.length;){var L=I.data.charCodeAt(I.position);if(L===10||L===13)return;++I.position}}function l(I){for(var L=10;I.position<I.length;){var Y=I.data.charCodeAt(I.position);switch(Y){case 9:case 32:L=Y,++I.position;break;case 10:L!==13&&++I.currentLineNumber,L=Y,++I.position;break;case 13:L=Y,++I.position,++I.currentLineNumber;break;default:return L}}return L}function _(I){var L=I.data.charCodeAt(I.currentTokenStart);return!(L!==68&&L!==100||(L=I.data.charCodeAt(I.currentTokenStart+1),L!==65&&L!==97)||(L=I.data.charCodeAt(I.currentTokenStart+2),L!==84&&L!==116)||(L=I.data.charCodeAt(I.currentTokenStart+3),L!==65&&L!==97))}function v(I){var L=I.data.charCodeAt(I.currentTokenStart);return!(L!==83&&L!==115||(L=I.data.charCodeAt(I.currentTokenStart+1),L!==65&&L!==97)||(L=I.data.charCodeAt(I.currentTokenStart+2),L!==86&&L!==118)||(L=I.data.charCodeAt(I.currentTokenStart+3),L!==69&&L!==101))}function c(I){if(I.currentTokenEnd-I.currentTokenStart!==5)return!1;var L=I.data.charCodeAt(I.currentTokenStart);return!(L!==76&&L!==108||(L=I.data.charCodeAt(I.currentTokenStart+1),L!==79&&L!==111)||(L=I.data.charCodeAt(I.currentTokenStart+2),L!==79&&L!==111)||(L=I.data.charCodeAt(I.currentTokenStart+3),L!==80&&L!==112))}function h(I,L,Y){var J,ie=Y-L,K=I.currentTokenStart-L,Q=I.currentTokenEnd-I.currentTokenStart;if(Q<ie)return!1;for(J=L;J<Y;++J)if(I.data.charCodeAt(J)!==I.data.charCodeAt(J+K))return!1;return ie===Q||I.data.charCodeAt(J+K)===46}function f(I){var L;for(L=I.currentTokenStart;L<I.currentTokenEnd;++L)if(I.data.charCodeAt(L)===46)return L;return L}function m(I,L){return I.data.substring(I.currentTokenStart,L)}function b(I){return I.data.substring(I.currentTokenStart,I.currentTokenEnd)}function w(I){var L=l(I);if(I.position>=I.length){I.currentTokenType=6;return}I.currentTokenStart=I.position,I.currentTokenEnd=I.position,I.isEscaped=!1;var Y=I.data.charCodeAt(I.position);switch(Y){case 35:x(I),I.currentTokenType=5;break;case 34:case 39:d(I,Y),I.currentTokenType=3;break;case 59:L===10||L===13?p(I):s(I),I.currentTokenType=3;break;default:s(I),I.isEscaped?I.currentTokenType=3:I.data.charCodeAt(I.currentTokenStart)===95?I.currentTokenType=4:I.currentTokenEnd-I.currentTokenStart>=5&&I.data.charCodeAt(I.currentTokenStart+4)===95?_(I)?I.currentTokenType=0:v(I)?I.currentTokenType=1:c(I)?I.currentTokenType=2:I.currentTokenType=3:I.currentTokenType=3;break}}function C(I){for(w(I);I.currentTokenType===5;)w(I)}function E(I){return{data:I,length:I.length,position:0,currentTokenStart:0,currentTokenEnd:0,currentTokenType:6,currentLineNumber:1,isEscaped:!1}}function S(I,L){for(var Y=I.currentTokenStart,J=f(I),ie=m(I,J),K,Q=[],ne=o.create(512),ue=0,fe=!0;fe;){if(I.currentTokenType!==4||!h(I,Y,J)){fe=!1;break}if(K=b(I),C(I),I.currentTokenType!==3)return{hasError:!0,errorLine:I.currentLineNumber,errorMessage:"Expected value."};Q[Q.length]=K,o.addToken(ne,I.currentTokenStart,I.currentTokenEnd),ue++,C(I)}return L.addCategory(new e.Category(L.data,ie,Y,I.currentTokenStart,Q,ne.tokens,ue)),{hasError:!1,errorLine:0,errorMessage:""}}function M(I,L){var Y=I.currentTokenStart,J=I.currentLineNumber;C(I);for(var ie=m(I,f(I)),K=[],Q=o.create(ie==="_atom_site"?L.data.length/1.85|0:1024),ne=0;I.currentTokenType===4;)K[K.length]=b(I),C(I);for(;I.currentTokenType===3;)o.addToken(Q,I.currentTokenStart,I.currentTokenEnd),ne++,C(I);return ne%K.length!==0?{hasError:!0,errorLine:I.currentLineNumber,errorMessage:"The number of values for loop starting at line "+J+" is not a multiple of the number of columns."}:(L.addCategory(new e.Category(L.data,ie,Y,I.currentTokenStart,K,Q.tokens,ne)),{hasError:!1,errorLine:0,errorMessage:""})}function A(I,L){return i.ParserResult.error(L,I)}function R(I){return i.ParserResult.success(I)}function D(I){var L=E(I),Y,J,ie=new e.File(I),K=new e.DataBlock(I,"default"),Q=new e.DataBlock(I,"empty"),ne=!1,ue;for(C(L);L.currentTokenType!==6;){var fe=L.currentTokenType;if(fe===0){if(ne)return A(L.currentLineNumber,"Unexpected data block inside a save frame.");K.categories.length>0&&ie.dataBlocks.push(K),K=new e.DataBlock(I,I.substring(L.currentTokenStart+5,L.currentTokenEnd)),C(L)}else if(fe===1){if(J=I.substring(L.currentTokenStart+5,L.currentTokenEnd),J.length===0)Q.categories.length>0&&(ue=K.additionalData.saveFrames,ue||(ue=[],K.additionalData.saveFrames=ue),ue[ue.length]=Q),ne=!1;else{if(ne)return A(L.currentLineNumber,"Save frames cannot be nested.");ne=!0,Q=new e.DataBlock(I,J)}C(L)}else if(fe===2){if(Y=M(L,ne?Q:K),Y.hasError)return A(Y.errorLine,Y.errorMessage)}else if(fe===4){if(Y=S(L,ne?Q:K),Y.hasError)return A(Y.errorLine,Y.errorMessage)}else return A(L.currentLineNumber,"Unexpected token. Expected data_, loop_, or data name.")}return ne?A(L.currentLineNumber,"Unfinished save frame (`"+Q.header+"`)."):(K.categories.length>0&&ie.dataBlocks.push(K),R(ie))}function N(I){return D(I)}e.parse=N})(r=i.Text||(i.Text={}))})(y||(y={}));var y;(function(i){var r;(function(e){"use strict";var o=i.Utils.StringWriter,s=function(){function w(){this.writer=o.create(),this.encoded=!1,this.dataBlockCreated=!1}return w.prototype.startDataBlock=function(C){this.dataBlockCreated=!0,o.write(this.writer,"data_"+(C||"").replace(/[ \n\t]/g,"").toUpperCase()+`
#
`)},w.prototype.writeCategory=function(C,E){if(this.encoded)throw new Error("The writer contents have already been encoded, no more writing.");if(!this.dataBlockCreated)throw new Error("No data block created.");var S=!E||!E.length?[C(void 0)]:E.map(function(R){return C(R)}),M=S.filter(function(R){return R&&R.count>0});if(M.length){var A=M.reduce(function(R,D){return R+(D.count===void 0?1:D.count)},0);if(A)A===1?p(M[0],this.writer):x(M,this.writer);else return}},w.prototype.encode=function(){this.encoded=!0},w.prototype.flush=function(C){o.writeTo(this.writer,C)},w}();e.Writer=s;function d(w){return!!w&&w.indexOf(`
`)>=0}function p(w,C){for(var E=w.desc.fields,S=w.data,M=E.reduce(function(Y,J){return Math.max(Y,J.name.length)},0)+w.desc.name.length+5,A=0,R=E;A<R.length;A++){var D=R[A];o.writePadRight(C,w.desc.name+"."+D.name,M);var N=D.presence,I=N?N(S,0):0;if(I!==0)I===1?c(C):h(C);else{var L=D.string(S,0);d(L)?(m(C,L),o.newline(C)):f(C,L)}o.newline(C)}o.write(C,`#
`)}function x(w,C){l(C,"loop_");for(var E=w[0],S=E.desc.fields,M=0,A=S;M<A.length;M++){var R=A[M];l(C,E.desc.name+"."+R.name)}for(var D=0,N=w;D<N.length;D++)for(var I=N[D],L=I.data,Y=I.count,J=0;J<Y;J++){for(var ie=0,K=S;ie<K.length;ie++){var R=K[ie],Q=R.presence,ne=Q?Q(L,J):0;if(ne!==0)ne===1?c(C):h(C);else{var ue=R.string(L,J);d(ue)?(m(C,ue),o.newline(C)):f(C,ue)}}o.newline(C)}o.write(C,`#
`)}function l(w,C){o.write(w,C),o.newline(w)}function _(w,C){o.writeSafe(w,""+C+" ")}function v(w,C,E){o.writeSafe(w,""+Math.round(E*C)/E+" ")}function c(w){o.writeSafe(w,". ")}function h(w){o.writeSafe(w,"? ")}function f(w,C){if(!C){o.writeSafe(w,". ");return}for(var E=!1,S="'",M="' ",A=!1,R=!1,D=!1,N=0,I=C.length-1;N<I;N++){var L=C.charCodeAt(N);switch(L){case 9:A=!0;break;case 10:o.writeSafe(w,`
;`+C),o.writeSafe(w,`
; `);return;case 32:A=!0;break;case 34:if(R){o.writeSafe(w,`
;`+C),o.writeSafe(w,`
; `);return}D=!0,E=!0,S="'",M="' ";break;case 39:if(D){o.writeSafe(w,`
;`+C),o.writeSafe(w,`
; `);return}E=!0,R=!0,S='"',M='" ';break}}var Y=C.charCodeAt(0);!E&&(Y===35||Y===36||Y===59||Y===91||Y===93||A)&&(S="'",M="' ",E=!0),E?o.writeSafe(w,S+C+M):(o.write(w,C),o.writeSafe(w," "))}function m(w,C){o.writeSafe(w,`
;`+C),o.writeSafe(w,`
; `)}function b(w,C,E,S){for(var M=!1,A="'",R="' ",D=E;D<S-1;D++){var N=C.charCodeAt(D);switch(N){case 10:o.writeSafe(w,`
;`+C.substring(E,S)),o.writeSafe(w,`
; `);return;case 34:M=!0,A="'",R="' ";break;case 39:M=!0,A='"',R='" ';break}}!M&&C.charCodeAt(E)===59&&(A="'",R="' ",M=!0),M?(o.writeSafe(w,A+C.substring(E,S)),o.writeSafe(w,A)):(o.write(w,C.substring(E,S)),o.writeSafe(w," "))}})(r=i.Text||(i.Text={}))})(y||(y={}));var y;(function(i){var r;(function(e){var o;(function(s){function d(c,h){for(var f={},m=0;m<h;m++){var b=_(c);f[b]=_(c)}return f}function p(c,h){for(var f=new Uint8Array(h),m=c.offset,b=0;b<h;b++)f[b]=c.buffer[b+m];return c.offset+=h,f}function x(c,h){var f=s.utf8Read(c.buffer,c.offset,h);return c.offset+=h,f}function l(c,h){for(var f=new Array(h),m=0;m<h;m++)f[m]=_(c);return f}function _(c){var h=c.buffer[c.offset],f,m;if(!(h&128))return c.offset++,h;if((h&240)===128)return m=h&15,c.offset++,d(c,m);if((h&240)===144)return m=h&15,c.offset++,l(c,m);if((h&224)===160)return m=h&31,c.offset++,x(c,m);if((h&224)===224)return f=c.dataView.getInt8(c.offset),c.offset++,f;switch(h){case 192:return c.offset++,null;case 194:return c.offset++,!1;case 195:return c.offset++,!0;case 196:return m=c.dataView.getUint8(c.offset+1),c.offset+=2,p(c,m);case 197:return m=c.dataView.getUint16(c.offset+1),c.offset+=3,p(c,m);case 198:return m=c.dataView.getUint32(c.offset+1),c.offset+=5,p(c,m);case 202:return f=c.dataView.getFloat32(c.offset+1),c.offset+=5,f;case 203:return f=c.dataView.getFloat64(c.offset+1),c.offset+=9,f;case 204:return f=c.buffer[c.offset+1],c.offset+=2,f;case 205:return f=c.dataView.getUint16(c.offset+1),c.offset+=3,f;case 206:return f=c.dataView.getUint32(c.offset+1),c.offset+=5,f;case 208:return f=c.dataView.getInt8(c.offset+1),c.offset+=2,f;case 209:return f=c.dataView.getInt16(c.offset+1),c.offset+=3,f;case 210:return f=c.dataView.getInt32(c.offset+1),c.offset+=5,f;case 217:return m=c.dataView.getUint8(c.offset+1),c.offset+=2,x(c,m);case 218:return m=c.dataView.getUint16(c.offset+1),c.offset+=3,x(c,m);case 219:return m=c.dataView.getUint32(c.offset+1),c.offset+=5,x(c,m);case 220:return m=c.dataView.getUint16(c.offset+1),c.offset+=3,l(c,m);case 221:return m=c.dataView.getUint32(c.offset+1),c.offset+=5,l(c,m);case 222:return m=c.dataView.getUint16(c.offset+1),c.offset+=3,d(c,m);case 223:return m=c.dataView.getUint32(c.offset+1),c.offset+=5,d(c,m)}throw new Error("Unknown type 0x"+h.toString(16))}function v(c){return _({buffer:c,offset:0,dataView:new DataView(c.buffer)})}s.decode=v})(o=e.MessagePack||(e.MessagePack={}))})(r=i.Binary||(i.Binary={}))})(y||(y={}));var y;(function(i){var r;(function(e){var o;(function(s){function d(l){var _=new ArrayBuffer(p(l)),v=new DataView(_),c=new Uint8Array(_);return x(l,v,c,0),c}s.encode=d;function p(l){var _=typeof l;if(_==="string"){var v=s.utf8ByteCount(l);if(v<32)return 1+v;if(v<256)return 2+v;if(v<65536)return 3+v;if(v<4294967296)return 5+v}if(l instanceof Uint8Array){var c=l.byteLength;if(c<256)return 2+c;if(c<65536)return 3+c;if(c<4294967296)return 5+c}if(_==="number"){if(Math.floor(l)!==l)return 9;if(l>=0){if(l<128)return 1;if(l<256)return 2;if(l<65536)return 3;if(l<4294967296)return 5;throw new Error("Number too big 0x"+l.toString(16))}if(l>=-32)return 1;if(l>=-128)return 2;if(l>=-32768)return 3;if(l>=-2147483648)return 5;throw new Error("Number too small -0x"+l.toString(16).substr(1))}if(_==="boolean"||l===null||l===void 0)return 1;if(_==="object"){var h,f=0;if(Array.isArray(l)){h=l.length;for(var m=0;m<h;m++)f+=p(l[m])}else{var b=Object.keys(l);h=b.length;for(var m=0;m<h;m++){var w=b[m];f+=p(w)+p(l[w])}}if(h<16)return 1+f;if(h<65536)return 3+f;if(h<4294967296)return 5+f;throw new Error("Array or object too long 0x"+h.toString(16))}throw new Error("Unknown type "+_)}function x(l,_,v,c){var h=typeof l;if(h==="string"){var f=s.utf8ByteCount(l);if(f<32)return _.setUint8(c,f|160),s.utf8Write(v,c+1,l),1+f;if(f<256)return _.setUint8(c,217),_.setUint8(c+1,f),s.utf8Write(v,c+2,l),2+f;if(f<65536)return _.setUint8(c,218),_.setUint16(c+1,f),s.utf8Write(v,c+3,l),3+f;if(f<4294967296)return _.setUint8(c,219),_.setUint32(c+1,f),s.utf8Write(v,c+5,l),5+f}if(l instanceof Uint8Array){var m=l.byteLength,b=new Uint8Array(_.buffer);if(m<256)return _.setUint8(c,196),_.setUint8(c+1,m),b.set(l,c+2),2+m;if(m<65536)return _.setUint8(c,197),_.setUint16(c+1,m),b.set(l,c+3),3+m;if(m<4294967296)return _.setUint8(c,198),_.setUint32(c+1,m),b.set(l,c+5),5+m}if(h==="number"){if(!isFinite(l))throw new Error("Number not finite: "+l);if(Math.floor(l)!==l)return _.setUint8(c,203),_.setFloat64(c+1,l),9;if(l>=0){if(l<128)return _.setUint8(c,l),1;if(l<256)return _.setUint8(c,204),_.setUint8(c+1,l),2;if(l<65536)return _.setUint8(c,205),_.setUint16(c+1,l),3;if(l<4294967296)return _.setUint8(c,206),_.setUint32(c+1,l),5;throw new Error("Number too big 0x"+l.toString(16))}if(l>=-32)return _.setInt8(c,l),1;if(l>=-128)return _.setUint8(c,208),_.setInt8(c+1,l),2;if(l>=-32768)return _.setUint8(c,209),_.setInt16(c+1,l),3;if(l>=-2147483648)return _.setUint8(c,210),_.setInt32(c+1,l),5;throw new Error("Number too small -0x"+(-l).toString(16).substr(1))}if(l==null)return _.setUint8(c,192),1;if(h==="boolean")return _.setUint8(c,l?195:194),1;if(h==="object"){var w,C=0,E=Array.isArray(l),S=void 0;if(E?w=l.length:(S=Object.keys(l),w=S.length),w<16?(_.setUint8(c,w|(E?144:128)),C=1):w<65536?(_.setUint8(c,E?220:222),_.setUint16(c+1,w),C=3):w<4294967296&&(_.setUint8(c,E?221:223),_.setUint32(c+1,w),C=5),E)for(var M=0;M<w;M++)C+=x(l[M],_,v,c+C);else for(var A=0,R=S;A<R.length;A++){var D=R[A];C+=x(D,_,v,c+C),C+=x(l[D],_,v,c+C)}return C}throw new Error("Unknown type "+h)}})(o=e.MessagePack||(e.MessagePack={}))})(r=i.Binary||(i.Binary={}))})(y||(y={}));var y;(function(i){var r;(function(e){var o;(function(s){function d(v,c,h){for(var f=v.byteLength,m=0,b=h.length;m<b;m++){var w=h.charCodeAt(m);if(w<128){v[c++]=w>>>0&127|0;continue}if(w<2048){v[c++]=w>>>6&31|192,v[c++]=w>>>0&63|128;continue}if(w<65536){v[c++]=w>>>12&15|224,v[c++]=w>>>6&63|128,v[c++]=w>>>0&63|128;continue}if(w<1114112){v[c++]=w>>>18&7|240,v[c++]=w>>>12&63|128,v[c++]=w>>>6&63|128,v[c++]=w>>>0&63|128;continue}throw new Error("bad codepoint "+w)}}s.utf8Write=d;var p=function(){for(var v=[],c=0;c<1024;c++)v[c]=String.fromCharCode(c);return v}();function x(v){throw new Error(v)}function l(v,c,h){for(var f=p,m=void 0,b=[],w=512,C=0,E=c,S=c+h;E<S;E++){var M=v[E];M&128?(M&224)===192?b[C++]=f[(M&15)<<6|v[++E]&63]:(M&240)===224?b[C++]=String.fromCharCode((M&15)<<12|(v[++E]&63)<<6|(v[++E]&63)<<0):(M&248)===240?b[C++]=String.fromCharCode((M&7)<<18|(v[++E]&63)<<12|(v[++E]&63)<<6|(v[++E]&63)<<0):x("Invalid byte "+M.toString(16)):b[C++]=f[M],C===w&&(m=m||[],m[m.length]=b.join(""),C=0)}return m?(C>0&&(m[m.length]=b.slice(0,C).join("")),m.join("")):b.slice(0,C).join("")}s.utf8Read=l;function _(v){for(var c=0,h=0,f=v.length;h<f;h++){var m=v.charCodeAt(h);if(m<128){c+=1;continue}if(m<2048){c+=2;continue}if(m<65536){c+=3;continue}if(m<1114112){c+=4;continue}x("bad codepoint "+m)}return c}s.utf8ByteCount=_})(o=e.MessagePack||(e.MessagePack={}))})(r=i.Binary||(i.Binary={}))})(y||(y={}));var y;(function(i){var r;(function(e){"use strict";function o(d){for(var p=d.data,x=d.encoding.length-1;x>=0;x--)p=s.decodeStep(p,d.encoding[x]);return p}e.decode=o;var s;(function(d){function p(Y,J){switch(J.kind){case"ByteArray":switch(J.type){case 4:return Y;case 1:return v(Y);case 2:return f(Y);case 5:return m(Y);case 3:return b(Y);case 6:return w(Y);case 32:return C(Y);case 33:return E(Y);default:throw new Error("Unsupported ByteArray type.")}case"FixedPoint":return S(Y,J);case"IntervalQuantization":return M(Y,J);case"RunLength":return A(Y,J);case"Delta":return R(Y,J);case"IntegerPacking":return I(Y,J);case"StringArray":return L(Y,J)}}d.decodeStep=p;function x(Y,J){switch(Y){case 1:return new Int8Array(J);case 2:return new Int16Array(J);case 3:return new Int32Array(J);case 4:return new Uint8Array(J);case 5:return new Uint16Array(J);case 6:return new Uint32Array(J);default:throw new Error("Unsupported integer data type.")}}function l(Y,J){switch(Y){case 32:return new Float32Array(J);case 33:return new Float64Array(J);default:throw new Error("Unsupported floating data type.")}}var _=function(){var Y=new ArrayBuffer(2),J=new Uint8Array(Y),ie=new Uint16Array(Y);return J[0]=170,J[1]=187,ie[0]===48042}();function v(Y){return new Int8Array(Y.buffer,Y.byteOffset)}function c(Y,J){for(var ie=new ArrayBuffer(Y.length),K=new Uint8Array(ie),Q=0,ne=Y.length;Q<ne;Q+=J)for(var ue=0;ue<J;ue++)K[Q+J-ue-1]=Y[Q+ue];return ie}function h(Y,J,ie){return _?new ie(Y.buffer):new ie(c(Y,J))}function f(Y){return h(Y,2,Int16Array)}function m(Y){return h(Y,2,Uint16Array)}function b(Y){return h(Y,4,Int32Array)}function w(Y){return h(Y,4,Uint32Array)}function C(Y){return h(Y,4,Float32Array)}function E(Y){return h(Y,8,Float64Array)}function S(Y,J){for(var ie=Y.length,K=l(J.srcType,ie),Q=1/J.factor,ne=0;ne<ie;ne++)K[ne]=Q*Y[ne];return K}function M(Y,J){for(var ie=Y.length,K=l(J.srcType,ie),Q=(J.max-J.min)/(J.numSteps-1),ne=J.min,ue=0;ue<ie;ue++)K[ue]=ne+Q*Y[ue];return K}function A(Y,J){for(var ie=x(J.srcType,J.srcSize),K=0,Q=0,ne=Y.length;Q<ne;Q+=2)for(var ue=Y[Q],fe=Y[Q+1],ge=0;ge<fe;++ge)ie[K++]=ue;return ie}function R(Y,J){var ie=Y.length,K=x(J.srcType,ie);if(!ie)return K;K[0]=Y[0]+(J.origin|0);for(var Q=1;Q<ie;++Q)K[Q]=Y[Q]+K[Q-1];return K}function D(Y,J){for(var ie=J.byteCount===1?127:32767,K=-ie-1,Q=Y.length,ne=new Int32Array(J.srcSize),ue=0,fe=0;ue<Q;){for(var ge=0,ye=Y[ue];ye===ie||ye===K;)ge+=ye,ue++,ye=Y[ue];ge+=ye,ne[fe]=ge,ue++,fe++}return ne}function N(Y,J){for(var ie=J.byteCount===1?255:65535,K=Y.length,Q=new Int32Array(J.srcSize),ne=0,ue=0;ne<K;){for(var fe=0,ge=Y[ne];ge===ie;)fe+=ge,ne++,ge=Y[ne];fe+=ge,Q[ue]=fe,ne++,ue++}return Q}function I(Y,J){return J.isUnsigned?N(Y,J):D(Y,J)}function L(Y,J){for(var ie=J.stringData,K=o({encoding:J.offsetEncoding,data:J.offsets}),Q=o({encoding:J.dataEncoding,data:Y}),ne=Object.create(null),ue=new Array(Q.length),fe=0,ge=0,ye=Q;ge<ye.length;ge++){var pe=ye[ge];if(pe<0){ue[fe++]=null;continue}var de=ne[pe];de===void 0&&(de=ie.substring(K[pe],K[pe+1]),ne[pe]=de),ue[fe++]=de}return ue}})(s||(s={}))})(r=i.Binary||(i.Binary={}))})(y||(y={}));var y;(function(i){var r;(function(e){"use strict";var o=function(){function f(m){this.dataBlocks=m.dataBlocks.map(function(b){return new s(b)})}return f.prototype.toJSON=function(){return this.dataBlocks.map(function(m){return m.toJSON()})},f}();e.File=o;var s=function(){function f(m){this.additionalData={},this.header=m.header,this.categoryList=m.categories.map(function(E){return new d(E)}),this.categoryMap=new Map;for(var b=0,w=this.categoryList;b<w.length;b++){var C=w[b];this.categoryMap.set(C.name,C)}}return Object.defineProperty(f.prototype,"categories",{get:function(){return this.categoryList},enumerable:!0,configurable:!0}),f.prototype.getCategory=function(m){return this.categoryMap.get(m)},f.prototype.toJSON=function(){return{id:this.header,categories:this.categoryList.map(function(m){return m.toJSON()}),additionalData:this.additionalData}},f}();e.DataBlock=s;var d=function(){function f(m){this.name=m.name,this.columnCount=m.columns.length,this.rowCount=m.rowCount,this.columnNameList=[],this.encodedColumns=new Map;for(var b=0,w=m.columns;b<w.length;b++){var C=w[b];this.encodedColumns.set(C.name,C),this.columnNameList.push(C.name)}}return Object.defineProperty(f.prototype,"columnNames",{get:function(){return this.columnNameList},enumerable:!0,configurable:!0}),f.prototype.getColumn=function(m){var b=this.encodedColumns.get(m);return b?p(b):i.UndefinedColumn},f.prototype.toJSON=function(){for(var m=this,b=[],w=this.columnNameList.map(function(D){return{name:D,column:m.getColumn(D)}}),C=0;C<this.rowCount;C++){for(var E={},S=0,M=w;S<M.length;S++){var A=M[S],R=A.column.getValuePresence(C);R===0?E[A.name]=A.column.getString(C):R===1?E[A.name]=".":E[A.name]="?"}b[C]=E}return{name:this.name,columns:this.columnNames,rows:b}},f}();e.Category=d;function p(f){if(!f.data.data)return i.UndefinedColumn;var m=e.decode(f.data),b=void 0;return f.mask&&(b=e.decode(f.mask)),m.buffer&&m.byteLength&&m.BYTES_PER_ELEMENT?b?new v(m,b):new _(m):b?new h(m,b):new c(m)}var x=i.Utils.FastNumberParsers.parseInt,l=i.Utils.FastNumberParsers.parseFloat,_=function(){function f(m){this.data=m,this.isDefined=!0}return f.prototype.getString=function(m){return""+this.data[m]},f.prototype.getInteger=function(m){return this.data[m]|0},f.prototype.getFloat=function(m){return 1*this.data[m]},f.prototype.stringEquals=function(m,b){return this.data[m]===l(b,0,b.length)},f.prototype.areValuesEqual=function(m,b){return this.data[m]===this.data[b]},f.prototype.getValuePresence=function(m){return 0},f}(),v=function(){function f(m,b){this.data=m,this.mask=b,this.isDefined=!0}return f.prototype.getString=function(m){return this.mask[m]===0?""+this.data[m]:null},f.prototype.getInteger=function(m){return this.mask[m]===0?this.data[m]:0},f.prototype.getFloat=function(m){return this.mask[m]===0?this.data[m]:0},f.prototype.stringEquals=function(m,b){return this.mask[m]===0?this.data[m]===l(b,0,b.length):b==null},f.prototype.areValuesEqual=function(m,b){return this.data[m]===this.data[b]},f.prototype.getValuePresence=function(m){return this.mask[m]},f}(),c=function(){function f(m){this.data=m,this.isDefined=!0}return f.prototype.getString=function(m){return this.data[m]},f.prototype.getInteger=function(m){var b=this.data[m];return x(b,0,b.length)},f.prototype.getFloat=function(m){var b=this.data[m];return l(b,0,b.length)},f.prototype.stringEquals=function(m,b){return this.data[m]===b},f.prototype.areValuesEqual=function(m,b){return this.data[m]===this.data[b]},f.prototype.getValuePresence=function(m){return 0},f}(),h=function(){function f(m,b){this.data=m,this.mask=b,this.isDefined=!0}return f.prototype.getString=function(m){return this.mask[m]===0?this.data[m]:null},f.prototype.getInteger=function(m){if(this.mask[m]!==0)return 0;var b=this.data[m];return x(b||"",0,(b||"").length)},f.prototype.getFloat=function(m){if(this.mask[m]!==0)return 0;var b=this.data[m];return l(b||"",0,(b||"").length)},f.prototype.stringEquals=function(m,b){return this.data[m]===b},f.prototype.areValuesEqual=function(m,b){return this.data[m]===this.data[b]},f.prototype.getValuePresence=function(m){return this.mask[m]},f}()})(r=i.Binary||(i.Binary={}))})(y||(y={}));var y;(function(i){var r;(function(e){"use strict";var o=function(){function s(d){this.providers=d}return s.prototype.and=function(d){return new s(this.providers.concat([d]))},s.prototype.encode=function(d){for(var p=[],x=0,l=this.providers;x<l.length;x++){var _=l[x],v=_(d);if(!v.encodings.length)throw new Error("Encodings must be non-empty.");d=v.data;for(var c=0,h=v.encodings;c<h.length;c++){var f=h[c];p.push(f)}}if(!(d instanceof Uint8Array))throw new Error("The encoding must result in a Uint8Array. Fix your encoding chain.");return{encoding:p,data:d}},s}();e.Encoder=o,function(s){function d(I){return new s([I])}s.by=d;function p(I){return{encodings:[{kind:"ByteArray",type:4}],data:I}}function x(I){return{encodings:[{kind:"ByteArray",type:1}],data:new Uint8Array(I.buffer,I.byteOffset)}}var l=(D={},D[2]=function(I,L,Y){I.setInt16(2*L,Y,!0)},D[5]=function(I,L,Y){I.setUint16(2*L,Y,!0)},D[3]=function(I,L,Y){I.setInt32(4*L,Y,!0)},D[6]=function(I,L,Y){I.setUint32(4*L,Y,!0)},D[32]=function(I,L,Y){I.setFloat32(4*L,Y,!0)},D[33]=function(I,L,Y){I.setFloat64(8*L,Y,!0)},D),_=(N={},N[2]=2,N[5]=2,N[3]=4,N[6]=4,N[32]=4,N[33]=8,N);function v(I){var L=e.Encoding.getDataType(I);if(L===1)return x(I);if(L===4)return p(I);for(var Y=new Uint8Array(I.length*_[L]),J=l[L],ie=new DataView(Y.buffer),K=0,Q=I.length;K<Q;K++)J(ie,K,I[K]);return{encodings:[{kind:"ByteArray",type:L}],data:Y}}s.byteArray=v;function c(I,L){for(var Y=e.Encoding.getDataType(I),J=new Int32Array(I.length),ie=0,K=I.length;ie<K;ie++)J[ie]=Math.round(I[ie]*L);return{encodings:[{kind:"FixedPoint",factor:L,srcType:Y}],data:J}}function h(I){return function(L){return c(L,I)}}s.fixedPoint=h;function f(I,L,Y,J,ie){var K=e.Encoding.getDataType(I);if(!I.length)return{encodings:[{kind:"IntervalQuantization",min:L,max:Y,numSteps:J,srcType:K}],data:new Int32Array(0)};if(Y<L){var Q=L;L=Y,Y=Q}for(var ne=(Y-L)/(J-1),ue=new ie(I.length),fe=0,ge=I.length;fe<ge;fe++){var ye=I[fe];ye<=L?ue[fe]=0:ye>=Y?ue[fe]=J:ue[fe]=Math.round((ye-L)/ne)|0}return{encodings:[{kind:"IntervalQuantization",min:L,max:Y,numSteps:J,srcType:K}],data:ue}}function m(I,L,Y,J){return J===void 0&&(J=Int32Array),function(ie){return f(ie,I,L,Y,J)}}s.intervalQuantizaiton=m;function b(I){var L=e.Encoding.getDataType(I);if(L===void 0&&(I=new Int32Array(I),L=3),!I.length)return{encodings:[{kind:"RunLength",srcType:L,srcSize:0}],data:new Int32Array(0)};for(var Y=2,J=1,ie=I.length;J<ie;J++)I[J-1]!==I[J]&&(Y+=2);for(var K=new Int32Array(Y),Q=0,ne=1,J=1,ie=I.length;J<ie;J++)I[J-1]!==I[J]?(K[Q]=I[J-1],K[Q+1]=ne,ne=1,Q+=2):++ne;return K[Q]=I[I.length-1],K[Q+1]=ne,{encodings:[{kind:"RunLength",srcType:L,srcSize:I.length}],data:K}}s.runLength=b;function w(I){if(!e.Encoding.isSignedIntegerDataType(I))throw new Error("Only signed integer types can be encoded using delta encoding.");var L=e.Encoding.getDataType(I);if(L===void 0&&(I=new Int32Array(I),L=3),!I.length)return{encodings:[{kind:"Delta",origin:0,srcType:L}],data:new I.constructor(0)};var Y=new I.constructor(I.length),J=I[0];Y[0]=I[0];for(var ie=1,K=I.length;ie<K;ie++)Y[ie]=I[ie]-I[ie-1];return Y[0]=0,{encodings:[{kind:"Delta",origin:J,srcType:L}],data:Y}}s.delta=w;function C(I){for(var L=0,Y=I.length;L<Y;L++)if(I[L]<0)return!0;return!1}function E(I,L){for(var Y=-L-1,J=0,ie=0,K=I.length;ie<K;ie++){var Q=I[ie];Q===0?J+=1:Q>0?(J+=Math.ceil(Q/L),Q%L===0&&(J+=1)):(J+=Math.ceil(Q/Y),Q%Y===0&&(J+=1))}return J}function S(I){var L=C(I),Y=L?E(I,127):E(I,255),J=L?E(I,32767):E(I,65535);return I.length*4<J*2?{isSigned:L,size:I.length,bytesPerElement:4}:J*2<Y?{isSigned:L,size:J,bytesPerElement:2}:{isSigned:L,size:Y,bytesPerElement:1}}function M(I,L){for(var Y=L.isSigned?L.bytesPerElement===1?127:32767:L.bytesPerElement===1?255:65535,J=-Y-1,ie=I.length,K=L.isSigned?L.bytesPerElement===1?new Int8Array(L.size):new Int16Array(L.size):L.bytesPerElement===1?new Uint8Array(L.size):new Uint16Array(L.size),Q=0,ne=0;ne<ie;ne++){var ue=I[ne];if(ue>=0)for(;ue>=Y;)K[Q]=Y,++Q,ue-=Y;else for(;ue<=J;)K[Q]=J,++Q,ue-=J;K[Q]=ue,++Q}var fe=v(K);return{encodings:[{kind:"IntegerPacking",byteCount:L.bytesPerElement,isUnsigned:!L.isSigned,srcSize:ie},fe.encodings[0]],data:fe.data}}function A(I){if(!(I instanceof Int32Array))throw new Error("Integer packing can only be applied to Int32 data.");var L=S(I);return L.bytesPerElement===4?v(I):M(I,L)}s.integerPacking=A;function R(I){var L=Object.create(null),Y=[],J=0,ie=i.Utils.ChunkedArray.create(function(de){return new Int32Array(de)},1024,1),K=new Int32Array(I.length);i.Utils.ChunkedArray.add(ie,0);for(var Q=0,ne=0,ue=I;ne<ue.length;ne++){var fe=ue[ne];if(fe==null){K[Q++]=-1;continue}var ge=L[fe];ge===void 0&&(J+=fe.length,ge=Y.length,Y[ge]=fe,L[fe]=ge,i.Utils.ChunkedArray.add(ie,J)),K[Q++]=ge}var ye=s.by(w).and(A).encode(i.Utils.ChunkedArray.compact(ie)),pe=s.by(w).and(b).and(A).encode(K);return{encodings:[{kind:"StringArray",dataEncoding:pe.encoding,stringData:Y.join(""),offsetEncoding:ye.encoding,offsets:ye.data}],data:pe.data}}s.stringArray=R;var D,N}(o=e.Encoder||(e.Encoder={}))})(r=i.Binary||(i.Binary={}))})(y||(y={}));var y;(function(i){var r;(function(e){"use strict";e.VERSION="0.3.0";var o;(function(s){function d(x){var l;if(x instanceof Int8Array)l=1;else if(x instanceof Int16Array)l=2;else if(x instanceof Int32Array)l=3;else if(x instanceof Uint8Array)l=4;else if(x instanceof Uint16Array)l=5;else if(x instanceof Uint32Array)l=6;else if(x instanceof Float32Array)l=32;else if(x instanceof Float64Array)l=33;else throw new Error("Unsupported integer data type.");return l}s.getDataType=d;function p(x){return x instanceof Int8Array||x instanceof Int16Array||x instanceof Int32Array}s.isSignedIntegerDataType=p})(o=e.Encoding||(e.Encoding={}))})(r=i.Binary||(i.Binary={}))})(y||(y={}));var y;(function(i){var r;(function(e){"use strict";function o(d,p){for(var x=0;x<2;x++)if(d[x]>p[x])return!1;return!0}function s(d){var p=[0,3];try{var x=new Uint8Array(d),l=e.MessagePack.decode(x);if(!o(p,l.version.match(/(\d)\.(\d)\.\d/).slice(1)))return i.ParserResult.error("Unsupported format version. Current "+l.version+", required "+p.join(".")+".");var _=new e.File(l);return i.ParserResult.success(_)}catch(v){return i.ParserResult.error(""+v)}}e.parse=s})(r=i.Binary||(i.Binary={}))})(y||(y={}));var y;(function(i){var r;(function(e){"use strict";function o(d,p,x){var l,_=!1;d.typedArray?l=new d.typedArray(x):(_=!0,l=new Array(x));for(var v=new Uint8Array(x),c=d.presence,h=d.number?d.number:d.string,f=!0,m=0,b=0,w=p;b<w.length;b++)for(var C=w[b],E=C.data,S=0,M=C.count;S<M;S++){var A=c?c(E,S):0;A!==0?(v[m]=A,_&&(l[m]=null),f=!1):(v[m]=0,l[m]=h(E,S)),m++}var R=d.encoder?d.encoder:e.Encoder.by(e.Encoder.stringArray),D=R.encode(l),N=void 0;if(!f){var I=e.Encoder.by(e.Encoder.runLength).and(e.Encoder.byteArray).encode(v);I.data.length<v.length?N=I:N=e.Encoder.by(e.Encoder.byteArray).encode(v)}return{name:d.name,data:D,mask:N}}var s=function(){function d(p){this.dataBlocks=[],this.data={encoder:p,version:e.VERSION,dataBlocks:this.dataBlocks}}return d.prototype.startDataBlock=function(p){this.dataBlocks.push({header:(p||"").replace(/[ \n\t]/g,"").toUpperCase(),categories:[]})},d.prototype.writeCategory=function(p,x){if(!this.data)throw new Error("The writer contents have already been encoded, no more writing.");if(!this.dataBlocks.length)throw new Error("No data block created.");var l=!x||!x.length?[p(void 0)]:x.map(function(C){return p(C)}),_=l.filter(function(C){return C&&C.count>0});if(_.length){var v=_.reduce(function(C,E){return C+E.count},0);if(v){for(var c=_[0],h={name:c.desc.name,columns:[],rowCount:v},f=_.map(function(C){return{data:C.data,count:C.count}}),m=0,b=c.desc.fields;m<b.length;m++){var w=b[m];h.columns.push(o(w,f,v))}this.dataBlocks[this.dataBlocks.length-1].categories.push(h)}}},d.prototype.encode=function(){this.encodedData=e.MessagePack.encode(this.data),this.data=null,this.dataBlocks=null},d.prototype.flush=function(p){p.writeBinary(this.encodedData)},d}();e.Writer=s})(r=i.Binary||(i.Binary={}))})(y||(y={}));var T=y,k=function(){var i={REVISION:"71"};return Math.sign===void 0&&(Math.sign=function(r){return r<0?-1:r>0?1:+r}),i.log=function(){console.log.apply(console,arguments)},i.warn=function(){console.warn.apply(console,arguments)},i.error=function(){console.error.apply(console,arguments)},i.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},i.CullFaceNone=0,i.CullFaceBack=1,i.CullFaceFront=2,i.CullFaceFrontBack=3,i.FrontFaceDirectionCW=0,i.FrontFaceDirectionCCW=1,i.BasicShadowMap=0,i.PCFShadowMap=1,i.PCFSoftShadowMap=2,i.FrontSide=0,i.BackSide=1,i.DoubleSide=2,i.NoShading=0,i.FlatShading=1,i.SmoothShading=2,i.NoColors=0,i.FaceColors=1,i.VertexColors=2,i.NoBlending=0,i.NormalBlending=1,i.AdditiveBlending=2,i.SubtractiveBlending=3,i.MultiplyBlending=4,i.CustomBlending=5,i.AddEquation=100,i.SubtractEquation=101,i.ReverseSubtractEquation=102,i.MinEquation=103,i.MaxEquation=104,i.ZeroFactor=200,i.OneFactor=201,i.SrcColorFactor=202,i.OneMinusSrcColorFactor=203,i.SrcAlphaFactor=204,i.OneMinusSrcAlphaFactor=205,i.DstAlphaFactor=206,i.OneMinusDstAlphaFactor=207,i.DstColorFactor=208,i.OneMinusDstColorFactor=209,i.SrcAlphaSaturateFactor=210,i.MultiplyOperation=0,i.MixOperation=1,i.AddOperation=2,i.UVMapping=300,i.CubeReflectionMapping=301,i.CubeRefractionMapping=302,i.EquirectangularReflectionMapping=303,i.EquirectangularRefractionMapping=304,i.SphericalReflectionMapping=305,i.RepeatWrapping=1e3,i.ClampToEdgeWrapping=1001,i.MirroredRepeatWrapping=1002,i.NearestFilter=1003,i.NearestMipMapNearestFilter=1004,i.NearestMipMapLinearFilter=1005,i.LinearFilter=1006,i.LinearMipMapNearestFilter=1007,i.LinearMipMapLinearFilter=1008,i.UnsignedByteType=1009,i.ByteType=1010,i.ShortType=1011,i.UnsignedShortType=1012,i.IntType=1013,i.UnsignedIntType=1014,i.FloatType=1015,i.HalfFloatType=1025,i.UnsignedShort4444Type=1016,i.UnsignedShort5551Type=1017,i.UnsignedShort565Type=1018,i.AlphaFormat=1019,i.RGBFormat=1020,i.RGBAFormat=1021,i.LuminanceFormat=1022,i.LuminanceAlphaFormat=1023,i.RGBEFormat=i.RGBAFormat,i.RGB_S3TC_DXT1_Format=2001,i.RGBA_S3TC_DXT1_Format=2002,i.RGBA_S3TC_DXT3_Format=2003,i.RGBA_S3TC_DXT5_Format=2004,i.RGB_PVRTC_4BPPV1_Format=2100,i.RGB_PVRTC_2BPPV1_Format=2101,i.RGBA_PVRTC_4BPPV1_Format=2102,i.RGBA_PVRTC_2BPPV1_Format=2103,i.Projector=function(){i.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(r,e){i.warn("THREE.Projector: .projectVector() is now vector.project()."),r.project(e)},this.unprojectVector=function(r,e){i.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),r.unproject(e)},this.pickingRay=function(r,e){i.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},i.CanvasRenderer=function(){i.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElement("canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}},i.Color=function(r){return arguments.length===3?this.setRGB(arguments[0],arguments[1],arguments[2]):this.set(r)},i.Color.prototype={constructor:i.Color,r:1,g:1,b:1,set:function(r){return r instanceof i.Color?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r),this},setHex:function(r){return r=Math.floor(r),this.r=(r>>16&255)/255,this.g=(r>>8&255)/255,this.b=(r&255)/255,this},setRGB:function(r,e,o){return this.r=r,this.g=e,this.b=o,this},setHSL:function(r,e,o){if(e===0)this.r=this.g=this.b=o;else{var s=function(x,l,_){return _<0&&(_+=1),_>1&&(_-=1),_<.16666666666666666?x+(l-x)*6*_:_<.5?l:_<.6666666666666666?x+(l-x)*6*(.6666666666666666-_):x},d=o<=.5?o*(1+e):o+e-o*e,p=2*o-d;this.r=s(p,d,r+1/3),this.g=s(p,d,r),this.b=s(p,d,r-1/3)}return this},setStyle:function(r){if(/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.test(r)){var e=/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.exec(r);return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,this}if(/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.test(r)){var e=/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.exec(r);return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,this}if(/^\#([0-9a-f]{6})$/i.test(r)){var e=/^\#([0-9a-f]{6})$/i.exec(r);return this.setHex(parseInt(e[1],16)),this}if(/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(r)){var e=/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(r);return this.setHex(parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3],16)),this}if(/^(\w+)$/i.test(r))return this.setHex(i.ColorKeywords[r]),this},copy:function(r){return this.r=r.r,this.g=r.g,this.b=r.b,this},copyGammaToLinear:function(r,e){return e===void 0&&(e=2),this.r=Math.pow(r.r,e),this.g=Math.pow(r.g,e),this.b=Math.pow(r.b,e),this},copyLinearToGamma:function(r,e){e===void 0&&(e=2);var o=e>0?1/e:1;return this.r=Math.pow(r.r,o),this.g=Math.pow(r.g,o),this.b=Math.pow(r.b,o),this},convertGammaToLinear:function(){var r=this.r,e=this.g,o=this.b;return this.r=r*r,this.g=e*e,this.b=o*o,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return this.r*255<<16^this.g*255<<8^this.b*255<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(r){var e=r||{h:0,s:0,l:0},o=this.r,s=this.g,d=this.b,p=Math.max(o,s,d),x=Math.min(o,s,d),l,_,v=(x+p)/2;if(x===p)l=0,_=0;else{var c=p-x;switch(_=v<=.5?c/(p+x):c/(2-p-x),p){case o:l=(s-d)/c+(s<d?6:0);break;case s:l=(d-o)/c+2;break;case d:l=(o-s)/c+4;break}l/=6}return e.h=l,e.s=_,e.l=v,e},getStyle:function(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"},offsetHSL:function(r,e,o){var s=this.getHSL();return s.h+=r,s.s+=e,s.l+=o,this.setHSL(s.h,s.s,s.l),this},add:function(r){return this.r+=r.r,this.g+=r.g,this.b+=r.b,this},addColors:function(r,e){return this.r=r.r+e.r,this.g=r.g+e.g,this.b=r.b+e.b,this},addScalar:function(r){return this.r+=r,this.g+=r,this.b+=r,this},multiply:function(r){return this.r*=r.r,this.g*=r.g,this.b*=r.b,this},multiplyScalar:function(r){return this.r*=r,this.g*=r,this.b*=r,this},lerp:function(r,e){return this.r+=(r.r-this.r)*e,this.g+=(r.g-this.g)*e,this.b+=(r.b-this.b)*e,this},equals:function(r){return r.r===this.r&&r.g===this.g&&r.b===this.b},fromArray:function(r){return this.r=r[0],this.g=r[1],this.b=r[2],this},toArray:function(r,e){return r===void 0&&(r=[]),e===void 0&&(e=0),r[e]=this.r,r[e+1]=this.g,r[e+2]=this.b,r},clone:function(){return new i.Color().setRGB(this.r,this.g,this.b)}},i.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},i.Quaternion=function(r,e,o,s){this._x=r||0,this._y=e||0,this._z=o||0,this._w=s!==void 0?s:1},i.Quaternion.prototype={constructor:i.Quaternion,_x:0,_y:0,_z:0,_w:0,get x(){return this._x},set x(r){this._x=r,this.onChangeCallback()},get y(){return this._y},set y(r){this._y=r,this.onChangeCallback()},get z(){return this._z},set z(r){this._z=r,this.onChangeCallback()},get w(){return this._w},set w(r){this._w=r,this.onChangeCallback()},set:function(r,e,o,s){return this._x=r,this._y=e,this._z=o,this._w=s,this.onChangeCallback(),this},copy:function(r){return this._x=r.x,this._y=r.y,this._z=r.z,this._w=r.w,this.onChangeCallback(),this},setFromEuler:function(r,e){if(!(r instanceof i.Euler))throw new Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var o=Math.cos(r._x/2),s=Math.cos(r._y/2),d=Math.cos(r._z/2),p=Math.sin(r._x/2),x=Math.sin(r._y/2),l=Math.sin(r._z/2);return r.order==="XYZ"?(this._x=p*s*d+o*x*l,this._y=o*x*d-p*s*l,this._z=o*s*l+p*x*d,this._w=o*s*d-p*x*l):r.order==="YXZ"?(this._x=p*s*d+o*x*l,this._y=o*x*d-p*s*l,this._z=o*s*l-p*x*d,this._w=o*s*d+p*x*l):r.order==="ZXY"?(this._x=p*s*d-o*x*l,this._y=o*x*d+p*s*l,this._z=o*s*l+p*x*d,this._w=o*s*d-p*x*l):r.order==="ZYX"?(this._x=p*s*d-o*x*l,this._y=o*x*d+p*s*l,this._z=o*s*l-p*x*d,this._w=o*s*d+p*x*l):r.order==="YZX"?(this._x=p*s*d+o*x*l,this._y=o*x*d+p*s*l,this._z=o*s*l-p*x*d,this._w=o*s*d-p*x*l):r.order==="XZY"&&(this._x=p*s*d-o*x*l,this._y=o*x*d-p*s*l,this._z=o*s*l+p*x*d,this._w=o*s*d+p*x*l),e!==!1&&this.onChangeCallback(),this},setFromAxisAngle:function(r,e){var o=e/2,s=Math.sin(o);return this._x=r.x*s,this._y=r.y*s,this._z=r.z*s,this._w=Math.cos(o),this.onChangeCallback(),this},setFromRotationMatrix:function(r){var e=r.elements,o=e[0],s=e[4],d=e[8],p=e[1],x=e[5],l=e[9],_=e[2],v=e[6],c=e[10],h=o+x+c,f;return h>0?(f=.5/Math.sqrt(h+1),this._w=.25/f,this._x=(v-l)*f,this._y=(d-_)*f,this._z=(p-s)*f):o>x&&o>c?(f=2*Math.sqrt(1+o-x-c),this._w=(v-l)/f,this._x=.25*f,this._y=(s+p)/f,this._z=(d+_)/f):x>c?(f=2*Math.sqrt(1+x-o-c),this._w=(d-_)/f,this._x=(s+p)/f,this._y=.25*f,this._z=(l+v)/f):(f=2*Math.sqrt(1+c-o-x),this._w=(p-s)/f,this._x=(d+_)/f,this._y=(l+v)/f,this._z=.25*f),this.onChangeCallback(),this},setFromUnitVectors:function(){var r,e,o=1e-6;return function(s,d){return r===void 0&&(r=new i.Vector3),e=s.dot(d)+1,e<o?(e=0,Math.abs(s.x)>Math.abs(s.z)?r.set(-s.y,s.x,0):r.set(0,-s.z,s.y)):r.crossVectors(s,d),this._x=r.x,this._y=r.y,this._z=r.z,this._w=e,this.normalize(),this}}(),inverse:function(){return this.conjugate().normalize(),this},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(r){return this._x*r._x+this._y*r._y+this._z*r._z+this._w*r._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var r=this.length();return r===0?(this._x=0,this._y=0,this._z=0,this._w=1):(r=1/r,this._x=this._x*r,this._y=this._y*r,this._z=this._z*r,this._w=this._w*r),this.onChangeCallback(),this},multiply:function(r,e){return e!==void 0?(i.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(r,e)):this.multiplyQuaternions(this,r)},multiplyQuaternions:function(r,e){var o=r._x,s=r._y,d=r._z,p=r._w,x=e._x,l=e._y,_=e._z,v=e._w;return this._x=o*v+p*x+s*_-d*l,this._y=s*v+p*l+d*x-o*_,this._z=d*v+p*_+o*l-s*x,this._w=p*v-o*x-s*l-d*_,this.onChangeCallback(),this},multiplyVector3:function(r){return i.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),r.applyQuaternion(this)},slerp:function(r,e){if(e===0)return this;if(e===1)return this.copy(r);var o=this._x,s=this._y,d=this._z,p=this._w,x=p*r._w+o*r._x+s*r._y+d*r._z;if(x<0?(this._w=-r._w,this._x=-r._x,this._y=-r._y,this._z=-r._z,x=-x):this.copy(r),x>=1)return this._w=p,this._x=o,this._y=s,this._z=d,this;var l=Math.acos(x),_=Math.sqrt(1-x*x);if(Math.abs(_)<.001)return this._w=.5*(p+this._w),this._x=.5*(o+this._x),this._y=.5*(s+this._y),this._z=.5*(d+this._z),this;var v=Math.sin((1-e)*l)/_,c=Math.sin(e*l)/_;return this._w=p*v+this._w*c,this._x=o*v+this._x*c,this._y=s*v+this._y*c,this._z=d*v+this._z*c,this.onChangeCallback(),this},equals:function(r){return r._x===this._x&&r._y===this._y&&r._z===this._z&&r._w===this._w},fromArray:function(r,e){return e===void 0&&(e=0),this._x=r[e],this._y=r[e+1],this._z=r[e+2],this._w=r[e+3],this.onChangeCallback(),this},toArray:function(r,e){return r===void 0&&(r=[]),e===void 0&&(e=0),r[e]=this._x,r[e+1]=this._y,r[e+2]=this._z,r[e+3]=this._w,r},onChange:function(r){return this.onChangeCallback=r,this},onChangeCallback:function(){},clone:function(){return new i.Quaternion(this._x,this._y,this._z,this._w)}},i.Quaternion.slerp=function(r,e,o,s){return o.copy(r).slerp(e,s)},i.Vector2=function(r,e){this.x=r||0,this.y=e||0},i.Vector2.prototype={constructor:i.Vector2,set:function(r,e){return this.x=r,this.y=e,this},setX:function(r){return this.x=r,this},setY:function(r){return this.y=r,this},setComponent:function(r,e){switch(r){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+r)}},getComponent:function(r){switch(r){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+r)}},copy:function(r){return this.x=r.x,this.y=r.y,this},add:function(r,e){return e!==void 0?(i.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(r,e)):(this.x+=r.x,this.y+=r.y,this)},addScalar:function(r){return this.x+=r,this.y+=r,this},addVectors:function(r,e){return this.x=r.x+e.x,this.y=r.y+e.y,this},sub:function(r,e){return e!==void 0?(i.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(r,e)):(this.x-=r.x,this.y-=r.y,this)},subScalar:function(r){return this.x-=r,this.y-=r,this},subVectors:function(r,e){return this.x=r.x-e.x,this.y=r.y-e.y,this},multiply:function(r){return this.x*=r.x,this.y*=r.y,this},multiplyScalar:function(r){return this.x*=r,this.y*=r,this},divide:function(r){return this.x/=r.x,this.y/=r.y,this},divideScalar:function(r){if(r!==0){var e=1/r;this.x*=e,this.y*=e}else this.x=0,this.y=0;return this},min:function(r){return this.x>r.x&&(this.x=r.x),this.y>r.y&&(this.y=r.y),this},max:function(r){return this.x<r.x&&(this.x=r.x),this.y<r.y&&(this.y=r.y),this},clamp:function(r,e){return this.x<r.x?this.x=r.x:this.x>e.x&&(this.x=e.x),this.y<r.y?this.y=r.y:this.y>e.y&&(this.y=e.y),this},clampScalar:function(){var r,e;return function(o,s){return r===void 0&&(r=new i.Vector2,e=new i.Vector2),r.set(o,o),e.set(s,s),this.clamp(r,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(r){return this.x*r.x+this.y*r.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(r){return Math.sqrt(this.distanceToSquared(r))},distanceToSquared:function(r){var e=this.x-r.x,o=this.y-r.y;return e*e+o*o},setLength:function(r){var e=this.length();return e!==0&&r!==e&&this.multiplyScalar(r/e),this},lerp:function(r,e){return this.x+=(r.x-this.x)*e,this.y+=(r.y-this.y)*e,this},lerpVectors:function(r,e,o){return this.subVectors(e,r).multiplyScalar(o).add(r),this},equals:function(r){return r.x===this.x&&r.y===this.y},fromArray:function(r,e){return e===void 0&&(e=0),this.x=r[e],this.y=r[e+1],this},toArray:function(r,e){return r===void 0&&(r=[]),e===void 0&&(e=0),r[e]=this.x,r[e+1]=this.y,r},fromAttribute:function(r,e,o){return o===void 0&&(o=0),e=e*r.itemSize+o,this.x=r.array[e],this.y=r.array[e+1],this},clone:function(){return new i.Vector2(this.x,this.y)}},i.Vector3=function(r,e,o){this.x=r||0,this.y=e||0,this.z=o||0},i.Vector3.prototype={constructor:i.Vector3,set:function(r,e,o){return this.x=r,this.y=e,this.z=o,this},setX:function(r){return this.x=r,this},setY:function(r){return this.y=r,this},setZ:function(r){return this.z=r,this},setComponent:function(r,e){switch(r){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+r)}},getComponent:function(r){switch(r){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+r)}},copy:function(r){return this.x=r.x,this.y=r.y,this.z=r.z,this},add:function(r,e){return e!==void 0?(i.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(r,e)):(this.x+=r.x,this.y+=r.y,this.z+=r.z,this)},addScalar:function(r){return this.x+=r,this.y+=r,this.z+=r,this},addVectors:function(r,e){return this.x=r.x+e.x,this.y=r.y+e.y,this.z=r.z+e.z,this},sub:function(r,e){return e!==void 0?(i.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(r,e)):(this.x-=r.x,this.y-=r.y,this.z-=r.z,this)},subScalar:function(r){return this.x-=r,this.y-=r,this.z-=r,this},subVectors:function(r,e){return this.x=r.x-e.x,this.y=r.y-e.y,this.z=r.z-e.z,this},multiply:function(r,e){return e!==void 0?(i.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(r,e)):(this.x*=r.x,this.y*=r.y,this.z*=r.z,this)},multiplyScalar:function(r){return this.x*=r,this.y*=r,this.z*=r,this},multiplyVectors:function(r,e){return this.x=r.x*e.x,this.y=r.y*e.y,this.z=r.z*e.z,this},applyEuler:function(){var r;return function(e){return e instanceof i.Euler||i.error("THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order."),r===void 0&&(r=new i.Quaternion),this.applyQuaternion(r.setFromEuler(e)),this}}(),applyAxisAngle:function(){var r;return function(e,o){return r===void 0&&(r=new i.Quaternion),this.applyQuaternion(r.setFromAxisAngle(e,o)),this}}(),applyMatrix3:function(r){var e=this.x,o=this.y,s=this.z,d=r.elements;return this.x=d[0]*e+d[3]*o+d[6]*s,this.y=d[1]*e+d[4]*o+d[7]*s,this.z=d[2]*e+d[5]*o+d[8]*s,this},applyMatrix4:function(r){var e=this.x,o=this.y,s=this.z,d=r.elements;return this.x=d[0]*e+d[4]*o+d[8]*s+d[12],this.y=d[1]*e+d[5]*o+d[9]*s+d[13],this.z=d[2]*e+d[6]*o+d[10]*s+d[14],this},applyProjection:function(r){var e=this.x,o=this.y,s=this.z,d=r.elements,p=1/(d[3]*e+d[7]*o+d[11]*s+d[15]);return this.x=(d[0]*e+d[4]*o+d[8]*s+d[12])*p,this.y=(d[1]*e+d[5]*o+d[9]*s+d[13])*p,this.z=(d[2]*e+d[6]*o+d[10]*s+d[14])*p,this},applyQuaternion:function(r){var e=this.x,o=this.y,s=this.z,d=r.x,p=r.y,x=r.z,l=r.w,_=l*e+p*s-x*o,v=l*o+x*e-d*s,c=l*s+d*o-p*e,h=-d*e-p*o-x*s;return this.x=_*l+h*-d+v*-x-c*-p,this.y=v*l+h*-p+c*-d-_*-x,this.z=c*l+h*-x+_*-p-v*-d,this},project:function(){var r;return function(e){return r===void 0&&(r=new i.Matrix4),r.multiplyMatrices(e.projectionMatrix,r.getInverse(e.matrixWorld)),this.applyProjection(r)}}(),unproject:function(){var r;return function(e){return r===void 0&&(r=new i.Matrix4),r.multiplyMatrices(e.matrixWorld,r.getInverse(e.projectionMatrix)),this.applyProjection(r)}}(),transformDirection:function(r){var e=this.x,o=this.y,s=this.z,d=r.elements;return this.x=d[0]*e+d[4]*o+d[8]*s,this.y=d[1]*e+d[5]*o+d[9]*s,this.z=d[2]*e+d[6]*o+d[10]*s,this.normalize(),this},divide:function(r){return this.x/=r.x,this.y/=r.y,this.z/=r.z,this},divideScalar:function(r){if(r!==0){var e=1/r;this.x*=e,this.y*=e,this.z*=e}else this.x=0,this.y=0,this.z=0;return this},min:function(r){return this.x>r.x&&(this.x=r.x),this.y>r.y&&(this.y=r.y),this.z>r.z&&(this.z=r.z),this},max:function(r){return this.x<r.x&&(this.x=r.x),this.y<r.y&&(this.y=r.y),this.z<r.z&&(this.z=r.z),this},clamp:function(r,e){return this.x<r.x?this.x=r.x:this.x>e.x&&(this.x=e.x),this.y<r.y?this.y=r.y:this.y>e.y&&(this.y=e.y),this.z<r.z?this.z=r.z:this.z>e.z&&(this.z=e.z),this},clampScalar:function(){var r,e;return function(o,s){return r===void 0&&(r=new i.Vector3,e=new i.Vector3),r.set(o,o,o),e.set(s,s,s),this.clamp(r,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(r){return this.x*r.x+this.y*r.y+this.z*r.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(r){var e=this.length();return e!==0&&r!==e&&this.multiplyScalar(r/e),this},lerp:function(r,e){return this.x+=(r.x-this.x)*e,this.y+=(r.y-this.y)*e,this.z+=(r.z-this.z)*e,this},lerpVectors:function(r,e,o){return this.subVectors(e,r).multiplyScalar(o).add(r),this},cross:function(r,e){if(e!==void 0)return i.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(r,e);var o=this.x,s=this.y,d=this.z;return this.x=s*r.z-d*r.y,this.y=d*r.x-o*r.z,this.z=o*r.y-s*r.x,this},crossVectors:function(r,e){var o=r.x,s=r.y,d=r.z,p=e.x,x=e.y,l=e.z;return this.x=s*l-d*x,this.y=d*p-o*l,this.z=o*x-s*p,this},projectOnVector:function(){var r,e;return function(o){return r===void 0&&(r=new i.Vector3),r.copy(o).normalize(),e=this.dot(r),this.copy(r).multiplyScalar(e)}}(),projectOnPlane:function(){var r;return function(e){return r===void 0&&(r=new i.Vector3),r.copy(this).projectOnVector(e),this.sub(r)}}(),reflect:function(){var r;return function(e){return r===void 0&&(r=new i.Vector3),this.sub(r.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(r){var e=this.dot(r)/(this.length()*r.length());return Math.acos(i.Math.clamp(e,-1,1))},distanceTo:function(r){return Math.sqrt(this.distanceToSquared(r))},distanceToSquared:function(r){var e=this.x-r.x,o=this.y-r.y,s=this.z-r.z;return e*e+o*o+s*s},setEulerFromRotationMatrix:function(r,e){i.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(r,e){i.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(r){return i.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(r)},getScaleFromMatrix:function(r){return i.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(r)},getColumnFromMatrix:function(r,e){return i.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(r,e)},setFromMatrixPosition:function(r){return this.x=r.elements[12],this.y=r.elements[13],this.z=r.elements[14],this},setFromMatrixScale:function(r){var e=this.set(r.elements[0],r.elements[1],r.elements[2]).length(),o=this.set(r.elements[4],r.elements[5],r.elements[6]).length(),s=this.set(r.elements[8],r.elements[9],r.elements[10]).length();return this.x=e,this.y=o,this.z=s,this},setFromMatrixColumn:function(r,e){var o=r*4,s=e.elements;return this.x=s[o],this.y=s[o+1],this.z=s[o+2],this},equals:function(r){return r.x===this.x&&r.y===this.y&&r.z===this.z},fromArray:function(r,e){return e===void 0&&(e=0),this.x=r[e],this.y=r[e+1],this.z=r[e+2],this},toArray:function(r,e){return r===void 0&&(r=[]),e===void 0&&(e=0),r[e]=this.x,r[e+1]=this.y,r[e+2]=this.z,r},fromAttribute:function(r,e,o){return o===void 0&&(o=0),e=e*r.itemSize+o,this.x=r.array[e],this.y=r.array[e+1],this.z=r.array[e+2],this},clone:function(){return new i.Vector3(this.x,this.y,this.z)}},i.Vector4=function(r,e,o,s){this.x=r||0,this.y=e||0,this.z=o||0,this.w=s!==void 0?s:1},i.Vector4.prototype={constructor:i.Vector4,set:function(r,e,o,s){return this.x=r,this.y=e,this.z=o,this.w=s,this},setX:function(r){return this.x=r,this},setY:function(r){return this.y=r,this},setZ:function(r){return this.z=r,this},setW:function(r){return this.w=r,this},setComponent:function(r,e){switch(r){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+r)}},getComponent:function(r){switch(r){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+r)}},copy:function(r){return this.x=r.x,this.y=r.y,this.z=r.z,this.w=r.w!==void 0?r.w:1,this},add:function(r,e){return e!==void 0?(i.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(r,e)):(this.x+=r.x,this.y+=r.y,this.z+=r.z,this.w+=r.w,this)},addScalar:function(r){return this.x+=r,this.y+=r,this.z+=r,this.w+=r,this},addVectors:function(r,e){return this.x=r.x+e.x,this.y=r.y+e.y,this.z=r.z+e.z,this.w=r.w+e.w,this},sub:function(r,e){return e!==void 0?(i.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(r,e)):(this.x-=r.x,this.y-=r.y,this.z-=r.z,this.w-=r.w,this)},subScalar:function(r){return this.x-=r,this.y-=r,this.z-=r,this.w-=r,this},subVectors:function(r,e){return this.x=r.x-e.x,this.y=r.y-e.y,this.z=r.z-e.z,this.w=r.w-e.w,this},multiplyScalar:function(r){return this.x*=r,this.y*=r,this.z*=r,this.w*=r,this},applyMatrix4:function(r){var e=this.x,o=this.y,s=this.z,d=this.w,p=r.elements;return this.x=p[0]*e+p[4]*o+p[8]*s+p[12]*d,this.y=p[1]*e+p[5]*o+p[9]*s+p[13]*d,this.z=p[2]*e+p[6]*o+p[10]*s+p[14]*d,this.w=p[3]*e+p[7]*o+p[11]*s+p[15]*d,this},divideScalar:function(r){if(r!==0){var e=1/r;this.x*=e,this.y*=e,this.z*=e,this.w*=e}else this.x=0,this.y=0,this.z=0,this.w=1;return this},setAxisAngleFromQuaternion:function(r){this.w=2*Math.acos(r.w);var e=Math.sqrt(1-r.w*r.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=r.x/e,this.y=r.y/e,this.z=r.z/e),this},setAxisAngleFromRotationMatrix:function(r){var e,o,s,d,p=.01,x=.1,l=r.elements,_=l[0],v=l[4],c=l[8],h=l[1],f=l[5],m=l[9],b=l[2],w=l[6],C=l[10];if(Math.abs(v-h)<p&&Math.abs(c-b)<p&&Math.abs(m-w)<p){if(Math.abs(v+h)<x&&Math.abs(c+b)<x&&Math.abs(m+w)<x&&Math.abs(_+f+C-3)<x)return this.set(1,0,0,0),this;e=Math.PI;var E=(_+1)/2,S=(f+1)/2,M=(C+1)/2,A=(v+h)/4,R=(c+b)/4,D=(m+w)/4;return E>S&&E>M?E<p?(o=0,s=.707106781,d=.707106781):(o=Math.sqrt(E),s=A/o,d=R/o):S>M?S<p?(o=.707106781,s=0,d=.707106781):(s=Math.sqrt(S),o=A/s,d=D/s):M<p?(o=.707106781,s=.707106781,d=0):(d=Math.sqrt(M),o=R/d,s=D/d),this.set(o,s,d,e),this}var N=Math.sqrt((w-m)*(w-m)+(c-b)*(c-b)+(h-v)*(h-v));return Math.abs(N)<.001&&(N=1),this.x=(w-m)/N,this.y=(c-b)/N,this.z=(h-v)/N,this.w=Math.acos((_+f+C-1)/2),this},min:function(r){return this.x>r.x&&(this.x=r.x),this.y>r.y&&(this.y=r.y),this.z>r.z&&(this.z=r.z),this.w>r.w&&(this.w=r.w),this},max:function(r){return this.x<r.x&&(this.x=r.x),this.y<r.y&&(this.y=r.y),this.z<r.z&&(this.z=r.z),this.w<r.w&&(this.w=r.w),this},clamp:function(r,e){return this.x<r.x?this.x=r.x:this.x>e.x&&(this.x=e.x),this.y<r.y?this.y=r.y:this.y>e.y&&(this.y=e.y),this.z<r.z?this.z=r.z:this.z>e.z&&(this.z=e.z),this.w<r.w?this.w=r.w:this.w>e.w&&(this.w=e.w),this},clampScalar:function(){var r,e;return function(o,s){return r===void 0&&(r=new i.Vector4,e=new i.Vector4),r.set(o,o,o,o),e.set(s,s,s,s),this.clamp(r,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(r){return this.x*r.x+this.y*r.y+this.z*r.z+this.w*r.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(r){var e=this.length();return e!==0&&r!==e&&this.multiplyScalar(r/e),this},lerp:function(r,e){return this.x+=(r.x-this.x)*e,this.y+=(r.y-this.y)*e,this.z+=(r.z-this.z)*e,this.w+=(r.w-this.w)*e,this},lerpVectors:function(r,e,o){return this.subVectors(e,r).multiplyScalar(o).add(r),this},equals:function(r){return r.x===this.x&&r.y===this.y&&r.z===this.z&&r.w===this.w},fromArray:function(r,e){return e===void 0&&(e=0),this.x=r[e],this.y=r[e+1],this.z=r[e+2],this.w=r[e+3],this},toArray:function(r,e){return r===void 0&&(r=[]),e===void 0&&(e=0),r[e]=this.x,r[e+1]=this.y,r[e+2]=this.z,r[e+3]=this.w,r},fromAttribute:function(r,e,o){return o===void 0&&(o=0),e=e*r.itemSize+o,this.x=r.array[e],this.y=r.array[e+1],this.z=r.array[e+2],this.w=r.array[e+3],this},clone:function(){return new i.Vector4(this.x,this.y,this.z,this.w)}},i.Euler=function(r,e,o,s){this._x=r||0,this._y=e||0,this._z=o||0,this._order=s||i.Euler.DefaultOrder},i.Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],i.Euler.DefaultOrder="XYZ",i.Euler.prototype={constructor:i.Euler,_x:0,_y:0,_z:0,_order:i.Euler.DefaultOrder,get x(){return this._x},set x(r){this._x=r,this.onChangeCallback()},get y(){return this._y},set y(r){this._y=r,this.onChangeCallback()},get z(){return this._z},set z(r){this._z=r,this.onChangeCallback()},get order(){return this._order},set order(r){this._order=r,this.onChangeCallback()},set:function(r,e,o,s){return this._x=r,this._y=e,this._z=o,this._order=s||this._order,this.onChangeCallback(),this},copy:function(r){return this._x=r._x,this._y=r._y,this._z=r._z,this._order=r._order,this.onChangeCallback(),this},setFromRotationMatrix:function(r,e,o){var s=i.Math.clamp,d=r.elements,p=d[0],x=d[4],l=d[8],_=d[1],v=d[5],c=d[9],h=d[2],f=d[6],m=d[10];return e=e||this._order,e==="XYZ"?(this._y=Math.asin(s(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(-c,m),this._z=Math.atan2(-x,p)):(this._x=Math.atan2(f,v),this._z=0)):e==="YXZ"?(this._x=Math.asin(-s(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(l,m),this._z=Math.atan2(_,v)):(this._y=Math.atan2(-h,p),this._z=0)):e==="ZXY"?(this._x=Math.asin(s(f,-1,1)),Math.abs(f)<.99999?(this._y=Math.atan2(-h,m),this._z=Math.atan2(-x,v)):(this._y=0,this._z=Math.atan2(_,p))):e==="ZYX"?(this._y=Math.asin(-s(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(f,m),this._z=Math.atan2(_,p)):(this._x=0,this._z=Math.atan2(-x,v))):e==="YZX"?(this._z=Math.asin(s(_,-1,1)),Math.abs(_)<.99999?(this._x=Math.atan2(-c,v),this._y=Math.atan2(-h,p)):(this._x=0,this._y=Math.atan2(l,m))):e==="XZY"?(this._z=Math.asin(-s(x,-1,1)),Math.abs(x)<.99999?(this._x=Math.atan2(f,v),this._y=Math.atan2(l,p)):(this._x=Math.atan2(-c,m),this._y=0)):i.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,o!==!1&&this.onChangeCallback(),this},setFromQuaternion:function(){var r;return function(e,o,s){return r===void 0&&(r=new i.Matrix4),r.makeRotationFromQuaternion(e),this.setFromRotationMatrix(r,o,s),this}}(),setFromVector3:function(r,e){return this.set(r.x,r.y,r.z,e||this._order)},reorder:function(){var r=new i.Quaternion;return function(e){r.setFromEuler(this),this.setFromQuaternion(r,e)}}(),equals:function(r){return r._x===this._x&&r._y===this._y&&r._z===this._z&&r._order===this._order},fromArray:function(r){return this._x=r[0],this._y=r[1],this._z=r[2],r[3]!==void 0&&(this._order=r[3]),this.onChangeCallback(),this},toArray:function(r,e){return r===void 0&&(r=[]),e===void 0&&(e=0),r[e]=this._x,r[e+1]=this._y,r[e+2]=this._z,r[e+3]=this._order,r},toVector3:function(r){return r?r.set(this._x,this._y,this._z):new i.Vector3(this._x,this._y,this._z)},onChange:function(r){return this.onChangeCallback=r,this},onChangeCallback:function(){},clone:function(){return new i.Euler(this._x,this._y,this._z,this._order)}},i.Line3=function(r,e){this.start=r!==void 0?r:new i.Vector3,this.end=e!==void 0?e:new i.Vector3},i.Line3.prototype={constructor:i.Line3,set:function(r,e){return this.start.copy(r),this.end.copy(e),this},copy:function(r){return this.start.copy(r.start),this.end.copy(r.end),this},center:function(r){var e=r||new i.Vector3;return e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(r){var e=r||new i.Vector3;return e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(r,e){var o=e||new i.Vector3;return this.delta(o).multiplyScalar(r).add(this.start)},closestPointToPointParameter:function(){var r=new i.Vector3,e=new i.Vector3;return function(o,s){r.subVectors(o,this.start),e.subVectors(this.end,this.start);var d=e.dot(e),p=e.dot(r),x=p/d;return s&&(x=i.Math.clamp(x,0,1)),x}}(),closestPointToPoint:function(r,e,o){var s=this.closestPointToPointParameter(r,e),d=o||new i.Vector3;return this.delta(d).multiplyScalar(s).add(this.start)},applyMatrix4:function(r){return this.start.applyMatrix4(r),this.end.applyMatrix4(r),this},equals:function(r){return r.start.equals(this.start)&&r.end.equals(this.end)},clone:function(){return new i.Line3().copy(this)}},i.Box2=function(r,e){this.min=r!==void 0?r:new i.Vector2(1/0,1/0),this.max=e!==void 0?e:new i.Vector2(-1/0,-1/0)},i.Box2.prototype={constructor:i.Box2,set:function(r,e){return this.min.copy(r),this.max.copy(e),this},setFromPoints:function(r){this.makeEmpty();for(var e=0,o=r.length;e<o;e++)this.expandByPoint(r[e]);return this},setFromCenterAndSize:function(){var r=new i.Vector2;return function(e,o){var s=r.copy(o).multiplyScalar(.5);return this.min.copy(e).sub(s),this.max.copy(e).add(s),this}}(),copy:function(r){return this.min.copy(r.min),this.max.copy(r.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(r){var e=r||new i.Vector2;return e.addVectors(this.min,this.max).multiplyScalar(.5)},size:function(r){var e=r||new i.Vector2;return e.subVectors(this.max,this.min)},expandByPoint:function(r){return this.min.min(r),this.max.max(r),this},expandByVector:function(r){return this.min.sub(r),this.max.add(r),this},expandByScalar:function(r){return this.min.addScalar(-r),this.max.addScalar(r),this},containsPoint:function(r){return!(r.x<this.min.x||r.x>this.max.x||r.y<this.min.y||r.y>this.max.y)},containsBox:function(r){return this.min.x<=r.min.x&&r.max.x<=this.max.x&&this.min.y<=r.min.y&&r.max.y<=this.max.y},getParameter:function(r,e){var o=e||new i.Vector2;return o.set((r.x-this.min.x)/(this.max.x-this.min.x),(r.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(r){return!(r.max.x<this.min.x||r.min.x>this.max.x||r.max.y<this.min.y||r.min.y>this.max.y)},clampPoint:function(r,e){var o=e||new i.Vector2;return o.copy(r).clamp(this.min,this.max)},distanceToPoint:function(){var r=new i.Vector2;return function(e){var o=r.copy(e).clamp(this.min,this.max);return o.sub(e).length()}}(),intersect:function(r){return this.min.max(r.min),this.max.min(r.max),this},union:function(r){return this.min.min(r.min),this.max.max(r.max),this},translate:function(r){return this.min.add(r),this.max.add(r),this},equals:function(r){return r.min.equals(this.min)&&r.max.equals(this.max)},clone:function(){return new i.Box2().copy(this)}},i.Box3=function(r,e){this.min=r!==void 0?r:new i.Vector3(1/0,1/0,1/0),this.max=e!==void 0?e:new i.Vector3(-1/0,-1/0,-1/0)},i.Box3.prototype={constructor:i.Box3,set:function(r,e){return this.min.copy(r),this.max.copy(e),this},setFromPoints:function(r){this.makeEmpty();for(var e=0,o=r.length;e<o;e++)this.expandByPoint(r[e]);return this},setFromCenterAndSize:function(){var r=new i.Vector3;return function(e,o){var s=r.copy(o).multiplyScalar(.5);return this.min.copy(e).sub(s),this.max.copy(e).add(s),this}}(),setFromObject:function(){var r=new i.Vector3;return function(e){var o=this;return e.updateMatrixWorld(!0),this.makeEmpty(),e.traverse(function(s){var d=s.geometry;if(d!==void 0){if(d instanceof i.Geometry)for(var p=d.vertices,x=0,l=p.length;x<l;x++)r.copy(p[x]),r.applyMatrix4(s.matrixWorld),o.expandByPoint(r);else if(d instanceof i.BufferGeometry&&d.attributes.position!==void 0)for(var _=d.attributes.position.array,x=0,l=_.length;x<l;x+=3)r.set(_[x],_[x+1],_[x+2]),r.applyMatrix4(s.matrixWorld),o.expandByPoint(r)}}),this}}(),copy:function(r){return this.min.copy(r.min),this.max.copy(r.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(r){var e=r||new i.Vector3;return e.addVectors(this.min,this.max).multiplyScalar(.5)},size:function(r){var e=r||new i.Vector3;return e.subVectors(this.max,this.min)},expandByPoint:function(r){return this.min.min(r),this.max.max(r),this},expandByVector:function(r){return this.min.sub(r),this.max.add(r),this},expandByScalar:function(r){return this.min.addScalar(-r),this.max.addScalar(r),this},containsPoint:function(r){return!(r.x<this.min.x||r.x>this.max.x||r.y<this.min.y||r.y>this.max.y||r.z<this.min.z||r.z>this.max.z)},containsBox:function(r){return this.min.x<=r.min.x&&r.max.x<=this.max.x&&this.min.y<=r.min.y&&r.max.y<=this.max.y&&this.min.z<=r.min.z&&r.max.z<=this.max.z},getParameter:function(r,e){var o=e||new i.Vector3;return o.set((r.x-this.min.x)/(this.max.x-this.min.x),(r.y-this.min.y)/(this.max.y-this.min.y),(r.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(r){return!(r.max.x<this.min.x||r.min.x>this.max.x||r.max.y<this.min.y||r.min.y>this.max.y||r.max.z<this.min.z||r.min.z>this.max.z)},clampPoint:function(r,e){var o=e||new i.Vector3;return o.copy(r).clamp(this.min,this.max)},distanceToPoint:function(){var r=new i.Vector3;return function(e){var o=r.copy(e).clamp(this.min,this.max);return o.sub(e).length()}}(),getBoundingSphere:function(){var r=new i.Vector3;return function(e){var o=e||new i.Sphere;return o.center=this.center(),o.radius=this.size(r).length()*.5,o}}(),intersect:function(r){return this.min.max(r.min),this.max.min(r.max),this},union:function(r){return this.min.min(r.min),this.max.max(r.max),this},applyMatrix4:function(){var r=[new i.Vector3,new i.Vector3,new i.Vector3,new i.Vector3,new i.Vector3,new i.Vector3,new i.Vector3,new i.Vector3];return function(e){return r[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),r[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),r[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),r[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),r[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),r[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),r[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),r[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.makeEmpty(),this.setFromPoints(r),this}}(),translate:function(r){return this.min.add(r),this.max.add(r),this},equals:function(r){return r.min.equals(this.min)&&r.max.equals(this.max)},clone:function(){return new i.Box3().copy(this)}},i.Matrix3=function(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length>0&&i.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")},i.Matrix3.prototype={constructor:i.Matrix3,set:function(r,e,o,s,d,p,x,l,_){var v=this.elements;return v[0]=r,v[3]=e,v[6]=o,v[1]=s,v[4]=d,v[7]=p,v[2]=x,v[5]=l,v[8]=_,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},copy:function(r){var e=r.elements;return this.set(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8]),this},multiplyVector3:function(r){return i.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),r.applyMatrix3(this)},multiplyVector3Array:function(r){return i.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(r)},applyToVector3Array:function(){var r=new i.Vector3;return function(e,o,s){o===void 0&&(o=0),s===void 0&&(s=e.length);for(var d=0,p=o;d<s;d+=3,p+=3)r.x=e[p],r.y=e[p+1],r.z=e[p+2],r.applyMatrix3(this),e[p]=r.x,e[p+1]=r.y,e[p+2]=r.z;return e}}(),multiplyScalar:function(r){var e=this.elements;return e[0]*=r,e[3]*=r,e[6]*=r,e[1]*=r,e[4]*=r,e[7]*=r,e[2]*=r,e[5]*=r,e[8]*=r,this},determinant:function(){var r=this.elements,e=r[0],o=r[1],s=r[2],d=r[3],p=r[4],x=r[5],l=r[6],_=r[7],v=r[8];return e*p*v-e*x*_-o*d*v+o*x*l+s*d*_-s*p*l},getInverse:function(r,e){var o=r.elements,s=this.elements;s[0]=o[10]*o[5]-o[6]*o[9],s[1]=-o[10]*o[1]+o[2]*o[9],s[2]=o[6]*o[1]-o[2]*o[5],s[3]=-o[10]*o[4]+o[6]*o[8],s[4]=o[10]*o[0]-o[2]*o[8],s[5]=-o[6]*o[0]+o[2]*o[4],s[6]=o[9]*o[4]-o[5]*o[8],s[7]=-o[9]*o[0]+o[1]*o[8],s[8]=o[5]*o[0]-o[1]*o[4];var d=o[0]*s[0]+o[1]*s[3]+o[2]*s[6];if(d===0){var p="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(e)throw new Error(p);return i.warn(p),this.identity(),this}return this.multiplyScalar(1/d),this},transpose:function(){var r,e=this.elements;return r=e[1],e[1]=e[3],e[3]=r,r=e[2],e[2]=e[6],e[6]=r,r=e[5],e[5]=e[7],e[7]=r,this},flattenToArrayOffset:function(r,e){var o=this.elements;return r[e]=o[0],r[e+1]=o[1],r[e+2]=o[2],r[e+3]=o[3],r[e+4]=o[4],r[e+5]=o[5],r[e+6]=o[6],r[e+7]=o[7],r[e+8]=o[8],r},getNormalMatrix:function(r){return this.getInverse(r).transpose(),this},transposeIntoArray:function(r){var e=this.elements;return r[0]=e[0],r[1]=e[3],r[2]=e[6],r[3]=e[1],r[4]=e[4],r[5]=e[7],r[6]=e[2],r[7]=e[5],r[8]=e[8],this},fromArray:function(r){return this.elements.set(r),this},toArray:function(){var r=this.elements;return[r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8]]},clone:function(){return new i.Matrix3().fromArray(this.elements)}},i.Matrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length>0&&i.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")},i.Matrix4.prototype={constructor:i.Matrix4,set:function(r,e,o,s,d,p,x,l,_,v,c,h,f,m,b,w){var C=this.elements;return C[0]=r,C[4]=e,C[8]=o,C[12]=s,C[1]=d,C[5]=p,C[9]=x,C[13]=l,C[2]=_,C[6]=v,C[10]=c,C[14]=h,C[3]=f,C[7]=m,C[11]=b,C[15]=w,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},copy:function(r){return this.elements.set(r.elements),this},extractPosition:function(r){return i.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(r)},copyPosition:function(r){var e=this.elements,o=r.elements;return e[12]=o[12],e[13]=o[13],e[14]=o[14],this},extractBasis:function(r,e,o){var s=this.elements;return r.set(s[0],s[1],s[2]),e.set(s[4],s[5],s[6]),o.set(s[8],s[9],s[10]),this},makeBasis:function(r,e,o){return this.set(r.x,e.x,o.x,0,r.y,e.y,o.y,0,r.z,e.z,o.z,0,0,0,0,1),this},extractRotation:function(){var r=new i.Vector3;return function(e){var o=this.elements,s=e.elements,d=1/r.set(s[0],s[1],s[2]).length(),p=1/r.set(s[4],s[5],s[6]).length(),x=1/r.set(s[8],s[9],s[10]).length();return o[0]=s[0]*d,o[1]=s[1]*d,o[2]=s[2]*d,o[4]=s[4]*p,o[5]=s[5]*p,o[6]=s[6]*p,o[8]=s[8]*x,o[9]=s[9]*x,o[10]=s[10]*x,this}}(),makeRotationFromEuler:function(r){r instanceof i.Euler||i.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,o=r.x,s=r.y,d=r.z,p=Math.cos(o),x=Math.sin(o),l=Math.cos(s),_=Math.sin(s),v=Math.cos(d),c=Math.sin(d);if(r.order==="XYZ"){var h=p*v,f=p*c,m=x*v,b=x*c;e[0]=l*v,e[4]=-l*c,e[8]=_,e[1]=f+m*_,e[5]=h-b*_,e[9]=-x*l,e[2]=b-h*_,e[6]=m+f*_,e[10]=p*l}else if(r.order==="YXZ"){var w=l*v,C=l*c,E=_*v,S=_*c;e[0]=w+S*x,e[4]=E*x-C,e[8]=p*_,e[1]=p*c,e[5]=p*v,e[9]=-x,e[2]=C*x-E,e[6]=S+w*x,e[10]=p*l}else if(r.order==="ZXY"){var w=l*v,C=l*c,E=_*v,S=_*c;e[0]=w-S*x,e[4]=-p*c,e[8]=E+C*x,e[1]=C+E*x,e[5]=p*v,e[9]=S-w*x,e[2]=-p*_,e[6]=x,e[10]=p*l}else if(r.order==="ZYX"){var h=p*v,f=p*c,m=x*v,b=x*c;e[0]=l*v,e[4]=m*_-f,e[8]=h*_+b,e[1]=l*c,e[5]=b*_+h,e[9]=f*_-m,e[2]=-_,e[6]=x*l,e[10]=p*l}else if(r.order==="YZX"){var M=p*l,A=p*_,R=x*l,D=x*_;e[0]=l*v,e[4]=D-M*c,e[8]=R*c+A,e[1]=c,e[5]=p*v,e[9]=-x*v,e[2]=-_*v,e[6]=A*c+R,e[10]=M-D*c}else if(r.order==="XZY"){var M=p*l,A=p*_,R=x*l,D=x*_;e[0]=l*v,e[4]=-c,e[8]=_*v,e[1]=M*c+D,e[5]=p*v,e[9]=A*c-R,e[2]=R*c-A,e[6]=x*v,e[10]=D*c+M}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},setRotationFromQuaternion:function(r){return i.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(r)},makeRotationFromQuaternion:function(r){var e=this.elements,o=r.x,s=r.y,d=r.z,p=r.w,x=o+o,l=s+s,_=d+d,v=o*x,c=o*l,h=o*_,f=s*l,m=s*_,b=d*_,w=p*x,C=p*l,E=p*_;return e[0]=1-(f+b),e[4]=c-E,e[8]=h+C,e[1]=c+E,e[5]=1-(v+b),e[9]=m-w,e[2]=h-C,e[6]=m+w,e[10]=1-(v+f),e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},lookAt:function(){var r=new i.Vector3,e=new i.Vector3,o=new i.Vector3;return function(s,d,p){var x=this.elements;return o.subVectors(s,d).normalize(),o.length()===0&&(o.z=1),r.crossVectors(p,o).normalize(),r.length()===0&&(o.x+=1e-4,r.crossVectors(p,o).normalize()),e.crossVectors(o,r),x[0]=r.x,x[4]=e.x,x[8]=o.x,x[1]=r.y,x[5]=e.y,x[9]=o.y,x[2]=r.z,x[6]=e.z,x[10]=o.z,this}}(),multiply:function(r,e){return e!==void 0?(i.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(r,e)):this.multiplyMatrices(this,r)},multiplyMatrices:function(r,e){var o=r.elements,s=e.elements,d=this.elements,p=o[0],x=o[4],l=o[8],_=o[12],v=o[1],c=o[5],h=o[9],f=o[13],m=o[2],b=o[6],w=o[10],C=o[14],E=o[3],S=o[7],M=o[11],A=o[15],R=s[0],D=s[4],N=s[8],I=s[12],L=s[1],Y=s[5],J=s[9],ie=s[13],K=s[2],Q=s[6],ne=s[10],ue=s[14],fe=s[3],ge=s[7],ye=s[11],pe=s[15];return d[0]=p*R+x*L+l*K+_*fe,d[4]=p*D+x*Y+l*Q+_*ge,d[8]=p*N+x*J+l*ne+_*ye,d[12]=p*I+x*ie+l*ue+_*pe,d[1]=v*R+c*L+h*K+f*fe,d[5]=v*D+c*Y+h*Q+f*ge,d[9]=v*N+c*J+h*ne+f*ye,d[13]=v*I+c*ie+h*ue+f*pe,d[2]=m*R+b*L+w*K+C*fe,d[6]=m*D+b*Y+w*Q+C*ge,d[10]=m*N+b*J+w*ne+C*ye,d[14]=m*I+b*ie+w*ue+C*pe,d[3]=E*R+S*L+M*K+A*fe,d[7]=E*D+S*Y+M*Q+A*ge,d[11]=E*N+S*J+M*ne+A*ye,d[15]=E*I+S*ie+M*ue+A*pe,this},multiplyToArray:function(r,e,o){var s=this.elements;return this.multiplyMatrices(r,e),o[0]=s[0],o[1]=s[1],o[2]=s[2],o[3]=s[3],o[4]=s[4],o[5]=s[5],o[6]=s[6],o[7]=s[7],o[8]=s[8],o[9]=s[9],o[10]=s[10],o[11]=s[11],o[12]=s[12],o[13]=s[13],o[14]=s[14],o[15]=s[15],this},multiplyScalar:function(r){var e=this.elements;return e[0]*=r,e[4]*=r,e[8]*=r,e[12]*=r,e[1]*=r,e[5]*=r,e[9]*=r,e[13]*=r,e[2]*=r,e[6]*=r,e[10]*=r,e[14]*=r,e[3]*=r,e[7]*=r,e[11]*=r,e[15]*=r,this},multiplyVector3:function(r){return i.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),r.applyProjection(this)},multiplyVector4:function(r){return i.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),r.applyMatrix4(this)},multiplyVector3Array:function(r){return i.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(r)},applyToVector3Array:function(){var r=new i.Vector3;return function(e,o,s){o===void 0&&(o=0),s===void 0&&(s=e.length);for(var d=0,p=o;d<s;d+=3,p+=3)r.x=e[p],r.y=e[p+1],r.z=e[p+2],r.applyMatrix4(this),e[p]=r.x,e[p+1]=r.y,e[p+2]=r.z;return e}}(),rotateAxis:function(r){i.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),r.transformDirection(this)},crossVector:function(r){return i.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),r.applyMatrix4(this)},determinant:function(){var r=this.elements,e=r[0],o=r[4],s=r[8],d=r[12],p=r[1],x=r[5],l=r[9],_=r[13],v=r[2],c=r[6],h=r[10],f=r[14],m=r[3],b=r[7],w=r[11],C=r[15];return m*(+d*l*c-s*_*c-d*x*h+o*_*h+s*x*f-o*l*f)+b*(+e*l*f-e*_*h+d*p*h-s*p*f+s*_*v-d*l*v)+w*(+e*_*c-e*x*f-d*p*c+o*p*f+d*x*v-o*_*v)+C*(-s*x*v-e*l*c+e*x*h+s*p*c-o*p*h+o*l*v)},transpose:function(){var r=this.elements,e;return e=r[1],r[1]=r[4],r[4]=e,e=r[2],r[2]=r[8],r[8]=e,e=r[6],r[6]=r[9],r[9]=e,e=r[3],r[3]=r[12],r[12]=e,e=r[7],r[7]=r[13],r[13]=e,e=r[11],r[11]=r[14],r[14]=e,this},flattenToArrayOffset:function(r,e){var o=this.elements;return r[e]=o[0],r[e+1]=o[1],r[e+2]=o[2],r[e+3]=o[3],r[e+4]=o[4],r[e+5]=o[5],r[e+6]=o[6],r[e+7]=o[7],r[e+8]=o[8],r[e+9]=o[9],r[e+10]=o[10],r[e+11]=o[11],r[e+12]=o[12],r[e+13]=o[13],r[e+14]=o[14],r[e+15]=o[15],r},getPosition:function(){var r=new i.Vector3;return function(){i.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");var e=this.elements;return r.set(e[12],e[13],e[14])}}(),setPosition:function(r){var e=this.elements;return e[12]=r.x,e[13]=r.y,e[14]=r.z,this},getInverse:function(r,e){var o=this.elements,s=r.elements,d=s[0],p=s[4],x=s[8],l=s[12],_=s[1],v=s[5],c=s[9],h=s[13],f=s[2],m=s[6],b=s[10],w=s[14],C=s[3],E=s[7],S=s[11],M=s[15];o[0]=c*w*E-h*b*E+h*m*S-v*w*S-c*m*M+v*b*M,o[4]=l*b*E-x*w*E-l*m*S+p*w*S+x*m*M-p*b*M,o[8]=x*h*E-l*c*E+l*v*S-p*h*S-x*v*M+p*c*M,o[12]=l*c*m-x*h*m-l*v*b+p*h*b+x*v*w-p*c*w,o[1]=h*b*C-c*w*C-h*f*S+_*w*S+c*f*M-_*b*M,o[5]=x*w*C-l*b*C+l*f*S-d*w*S-x*f*M+d*b*M,o[9]=l*c*C-x*h*C-l*_*S+d*h*S+x*_*M-d*c*M,o[13]=x*h*f-l*c*f+l*_*b-d*h*b-x*_*w+d*c*w,o[2]=v*w*C-h*m*C+h*f*E-_*w*E-v*f*M+_*m*M,o[6]=l*m*C-p*w*C-l*f*E+d*w*E+p*f*M-d*m*M,o[10]=p*h*C-l*v*C+l*_*E-d*h*E-p*_*M+d*v*M,o[14]=l*v*f-p*h*f-l*_*m+d*h*m+p*_*w-d*v*w,o[3]=c*m*C-v*b*C-c*f*E+_*b*E+v*f*S-_*m*S,o[7]=p*b*C-x*m*C+x*f*E-d*b*E-p*f*S+d*m*S,o[11]=x*v*C-p*c*C-x*_*E+d*c*E+p*_*S-d*v*S,o[15]=p*c*f-x*v*f+x*_*m-d*c*m-p*_*b+d*v*b;var A=d*o[0]+_*o[4]+f*o[8]+C*o[12];if(A==0){var R="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(e)throw new Error(R);return i.warn(R),this.identity(),this}return this.multiplyScalar(1/A),this},translate:function(r){i.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(r){i.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(r){i.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(r){i.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(r,e){i.error("THREE.Matrix4: .rotateByAxis() has been removed.")},scale:function(r){var e=this.elements,o=r.x,s=r.y,d=r.z;return e[0]*=o,e[4]*=s,e[8]*=d,e[1]*=o,e[5]*=s,e[9]*=d,e[2]*=o,e[6]*=s,e[10]*=d,e[3]*=o,e[7]*=s,e[11]*=d,this},getMaxScaleOnAxis:function(){var r=this.elements,e=r[0]*r[0]+r[1]*r[1]+r[2]*r[2],o=r[4]*r[4]+r[5]*r[5]+r[6]*r[6],s=r[8]*r[8]+r[9]*r[9]+r[10]*r[10];return Math.sqrt(Math.max(e,Math.max(o,s)))},makeTranslation:function(r,e,o){return this.set(1,0,0,r,0,1,0,e,0,0,1,o,0,0,0,1),this},makeRotationX:function(r){var e=Math.cos(r),o=Math.sin(r);return this.set(1,0,0,0,0,e,-o,0,0,o,e,0,0,0,0,1),this},makeRotationY:function(r){var e=Math.cos(r),o=Math.sin(r);return this.set(e,0,o,0,0,1,0,0,-o,0,e,0,0,0,0,1),this},makeRotationZ:function(r){var e=Math.cos(r),o=Math.sin(r);return this.set(e,-o,0,0,o,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(r,e){var o=Math.cos(e),s=Math.sin(e),d=1-o,p=r.x,x=r.y,l=r.z,_=d*p,v=d*x;return this.set(_*p+o,_*x-s*l,_*l+s*x,0,_*x+s*l,v*x+o,v*l-s*p,0,_*l-s*x,v*l+s*p,d*l*l+o,0,0,0,0,1),this},makeScale:function(r,e,o){return this.set(r,0,0,0,0,e,0,0,0,0,o,0,0,0,0,1),this},compose:function(r,e,o){return this.makeRotationFromQuaternion(e),this.scale(o),this.setPosition(r),this},decompose:function(){var r=new i.Vector3,e=new i.Matrix4;return function(o,s,d){var p=this.elements,x=r.set(p[0],p[1],p[2]).length(),l=r.set(p[4],p[5],p[6]).length(),_=r.set(p[8],p[9],p[10]).length(),v=this.determinant();v<0&&(x=-x),o.x=p[12],o.y=p[13],o.z=p[14],e.elements.set(this.elements);var c=1/x,h=1/l,f=1/_;return e.elements[0]*=c,e.elements[1]*=c,e.elements[2]*=c,e.elements[4]*=h,e.elements[5]*=h,e.elements[6]*=h,e.elements[8]*=f,e.elements[9]*=f,e.elements[10]*=f,s.setFromRotationMatrix(e),d.x=x,d.y=l,d.z=_,this}}(),makeFrustum:function(r,e,o,s,d,p){var x=this.elements,l=2*d/(e-r),_=2*d/(s-o),v=(e+r)/(e-r),c=(s+o)/(s-o),h=-(p+d)/(p-d),f=-2*p*d/(p-d);return x[0]=l,x[4]=0,x[8]=v,x[12]=0,x[1]=0,x[5]=_,x[9]=c,x[13]=0,x[2]=0,x[6]=0,x[10]=h,x[14]=f,x[3]=0,x[7]=0,x[11]=-1,x[15]=0,this},makePerspective:function(r,e,o,s){var d=o*Math.tan(i.Math.degToRad(r*.5)),p=-d,x=p*e,l=d*e;return this.makeFrustum(x,l,p,d,o,s)},makeOrthographic:function(r,e,o,s,d,p){var x=this.elements,l=e-r,_=o-s,v=p-d,c=(e+r)/l,h=(o+s)/_,f=(p+d)/v;return x[0]=2/l,x[4]=0,x[8]=0,x[12]=-c,x[1]=0,x[5]=2/_,x[9]=0,x[13]=-h,x[2]=0,x[6]=0,x[10]=-2/v,x[14]=-f,x[3]=0,x[7]=0,x[11]=0,x[15]=1,this},fromArray:function(r){return this.elements.set(r),this},toArray:function(){var r=this.elements;return[r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15]]},clone:function(){return new i.Matrix4().fromArray(this.elements)}},i.Ray=function(r,e){this.origin=r!==void 0?r:new i.Vector3,this.direction=e!==void 0?e:new i.Vector3},i.Ray.prototype={constructor:i.Ray,set:function(r,e){return this.origin.copy(r),this.direction.copy(e),this},copy:function(r){return this.origin.copy(r.origin),this.direction.copy(r.direction),this},at:function(r,e){var o=e||new i.Vector3;return o.copy(this.direction).multiplyScalar(r).add(this.origin)},recast:function(){var r=new i.Vector3;return function(e){return this.origin.copy(this.at(e,r)),this}}(),closestPointToPoint:function(r,e){var o=e||new i.Vector3;o.subVectors(r,this.origin);var s=o.dot(this.direction);return s<0?o.copy(this.origin):o.copy(this.direction).multiplyScalar(s).add(this.origin)},distanceToPoint:function(){var r=new i.Vector3;return function(e){var o=r.subVectors(e,this.origin).dot(this.direction);return o<0?this.origin.distanceTo(e):(r.copy(this.direction).multiplyScalar(o).add(this.origin),r.distanceTo(e))}}(),distanceSqToSegment:function(){var r=new i.Vector3,e=new i.Vector3,o=new i.Vector3;return function(s,d,p,x){r.copy(s).add(d).multiplyScalar(.5),e.copy(d).sub(s).normalize(),o.copy(this.origin).sub(r);var l=s.distanceTo(d)*.5,_=-this.direction.dot(e),v=o.dot(this.direction),c=-o.dot(e),h=o.lengthSq(),f=Math.abs(1-_*_),m,b,w,C;if(f>0)if(m=_*c-v,b=_*v-c,C=l*f,m>=0)if(b>=-C)if(b<=C){var E=1/f;m*=E,b*=E,w=m*(m+_*b+2*v)+b*(_*m+b+2*c)+h}else b=l,m=Math.max(0,-(_*b+v)),w=-m*m+b*(b+2*c)+h;else b=-l,m=Math.max(0,-(_*b+v)),w=-m*m+b*(b+2*c)+h;else b<=-C?(m=Math.max(0,-(-_*l+v)),b=m>0?-l:Math.min(Math.max(-l,-c),l),w=-m*m+b*(b+2*c)+h):b<=C?(m=0,b=Math.min(Math.max(-l,-c),l),w=b*(b+2*c)+h):(m=Math.max(0,-(_*l+v)),b=m>0?l:Math.min(Math.max(-l,-c),l),w=-m*m+b*(b+2*c)+h);else b=_>0?-l:l,m=Math.max(0,-(_*b+v)),w=-m*m+b*(b+2*c)+h;return p&&p.copy(this.direction).multiplyScalar(m).add(this.origin),x&&x.copy(e).multiplyScalar(b).add(r),w}}(),isIntersectionSphere:function(r){return this.distanceToPoint(r.center)<=r.radius},intersectSphere:function(){var r=new i.Vector3;return function(e,o){r.subVectors(e.center,this.origin);var s=r.dot(this.direction),d=r.dot(r)-s*s,p=e.radius*e.radius;if(d>p)return null;var x=Math.sqrt(p-d),l=s-x,_=s+x;return l<0&&_<0?null:l<0?this.at(_,o):this.at(l,o)}}(),isIntersectionPlane:function(r){var e=r.distanceToPoint(this.origin);if(e===0)return!0;var o=r.normal.dot(this.direction);return o*e<0},distanceToPlane:function(r){var e=r.normal.dot(this.direction);if(e==0)return r.distanceToPoint(this.origin)==0?0:null;var o=-(this.origin.dot(r.normal)+r.constant)/e;return o>=0?o:null},intersectPlane:function(r,e){var o=this.distanceToPlane(r);return o===null?null:this.at(o,e)},isIntersectionBox:function(){var r=new i.Vector3;return function(e){return this.intersectBox(e,r)!==null}}(),intersectBox:function(r,e){var o,s,d,p,x,l,_=1/this.direction.x,v=1/this.direction.y,c=1/this.direction.z,h=this.origin;return _>=0?(o=(r.min.x-h.x)*_,s=(r.max.x-h.x)*_):(o=(r.max.x-h.x)*_,s=(r.min.x-h.x)*_),v>=0?(d=(r.min.y-h.y)*v,p=(r.max.y-h.y)*v):(d=(r.max.y-h.y)*v,p=(r.min.y-h.y)*v),o>p||d>s||((d>o||o!==o)&&(o=d),(p<s||s!==s)&&(s=p),c>=0?(x=(r.min.z-h.z)*c,l=(r.max.z-h.z)*c):(x=(r.max.z-h.z)*c,l=(r.min.z-h.z)*c),o>l||x>s)||((x>o||o!==o)&&(o=x),(l<s||s!==s)&&(s=l),s<0)?null:this.at(o>=0?o:s,e)},intersectTriangle:function(){var r=new i.Vector3,e=new i.Vector3,o=new i.Vector3,s=new i.Vector3;return function(d,p,x,l,_){e.subVectors(p,d),o.subVectors(x,d),s.crossVectors(e,o);var v=this.direction.dot(s),c;if(v>0){if(l)return null;c=1}else if(v<0)c=-1,v=-v;else return null;r.subVectors(this.origin,d);var h=c*this.direction.dot(o.crossVectors(r,o));if(h<0)return null;var f=c*this.direction.dot(e.cross(r));if(f<0||h+f>v)return null;var m=-c*r.dot(s);return m<0?null:this.at(m/v,_)}}(),applyMatrix4:function(r){return this.direction.add(this.origin).applyMatrix4(r),this.origin.applyMatrix4(r),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(r){return r.origin.equals(this.origin)&&r.direction.equals(this.direction)},clone:function(){return new i.Ray().copy(this)}},i.Sphere=function(r,e){this.center=r!==void 0?r:new i.Vector3,this.radius=e!==void 0?e:0},i.Sphere.prototype={constructor:i.Sphere,set:function(r,e){return this.center.copy(r),this.radius=e,this},setFromPoints:function(){var r=new i.Box3;return function(e,o){var s=this.center;o!==void 0?s.copy(o):r.setFromPoints(e).center(s);for(var d=0,p=0,x=e.length;p<x;p++)d=Math.max(d,s.distanceToSquared(e[p]));return this.radius=Math.sqrt(d),this}}(),copy:function(r){return this.center.copy(r.center),this.radius=r.radius,this},empty:function(){return this.radius<=0},containsPoint:function(r){return r.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(r){return r.distanceTo(this.center)-this.radius},intersectsSphere:function(r){var e=this.radius+r.radius;return r.center.distanceToSquared(this.center)<=e*e},clampPoint:function(r,e){var o=this.center.distanceToSquared(r),s=e||new i.Vector3;return s.copy(r),o>this.radius*this.radius&&(s.sub(this.center).normalize(),s.multiplyScalar(this.radius).add(this.center)),s},getBoundingBox:function(r){var e=r||new i.Box3;return e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(r){return this.center.applyMatrix4(r),this.radius=this.radius*r.getMaxScaleOnAxis(),this},translate:function(r){return this.center.add(r),this},equals:function(r){return r.center.equals(this.center)&&r.radius===this.radius},clone:function(){return new i.Sphere().copy(this)}},i.Frustum=function(r,e,o,s,d,p){this.planes=[r!==void 0?r:new i.Plane,e!==void 0?e:new i.Plane,o!==void 0?o:new i.Plane,s!==void 0?s:new i.Plane,d!==void 0?d:new i.Plane,p!==void 0?p:new i.Plane]},i.Frustum.prototype={constructor:i.Frustum,set:function(r,e,o,s,d,p){var x=this.planes;return x[0].copy(r),x[1].copy(e),x[2].copy(o),x[3].copy(s),x[4].copy(d),x[5].copy(p),this},copy:function(r){for(var e=this.planes,o=0;o<6;o++)e[o].copy(r.planes[o]);return this},setFromMatrix:function(r){var e=this.planes,o=r.elements,s=o[0],d=o[1],p=o[2],x=o[3],l=o[4],_=o[5],v=o[6],c=o[7],h=o[8],f=o[9],m=o[10],b=o[11],w=o[12],C=o[13],E=o[14],S=o[15];return e[0].setComponents(x-s,c-l,b-h,S-w).normalize(),e[1].setComponents(x+s,c+l,b+h,S+w).normalize(),e[2].setComponents(x+d,c+_,b+f,S+C).normalize(),e[3].setComponents(x-d,c-_,b-f,S-C).normalize(),e[4].setComponents(x-p,c-v,b-m,S-E).normalize(),e[5].setComponents(x+p,c+v,b+m,S+E).normalize(),this},intersectsObject:function(){var r=new i.Sphere;return function(e){var o=e.geometry;return o.boundingSphere===null&&o.computeBoundingSphere(),r.copy(o.boundingSphere),r.applyMatrix4(e.matrixWorld),this.intersectsSphere(r)}}(),intersectsSphere:function(r){for(var e=this.planes,o=r.center,s=-r.radius,d=0;d<6;d++){var p=e[d].distanceToPoint(o);if(p<s)return!1}return!0},intersectsBox:function(){var r=new i.Vector3,e=new i.Vector3;return function(o){for(var s=this.planes,d=0;d<6;d++){var p=s[d];r.x=p.normal.x>0?o.min.x:o.max.x,e.x=p.normal.x>0?o.max.x:o.min.x,r.y=p.normal.y>0?o.min.y:o.max.y,e.y=p.normal.y>0?o.max.y:o.min.y,r.z=p.normal.z>0?o.min.z:o.max.z,e.z=p.normal.z>0?o.max.z:o.min.z;var x=p.distanceToPoint(r),l=p.distanceToPoint(e);if(x<0&&l<0)return!1}return!0}}(),containsPoint:function(r){for(var e=this.planes,o=0;o<6;o++)if(e[o].distanceToPoint(r)<0)return!1;return!0},clone:function(){return new i.Frustum().copy(this)}},i.Plane=function(r,e){this.normal=r!==void 0?r:new i.Vector3(1,0,0),this.constant=e!==void 0?e:0},i.Plane.prototype={constructor:i.Plane,set:function(r,e){return this.normal.copy(r),this.constant=e,this},setComponents:function(r,e,o,s){return this.normal.set(r,e,o),this.constant=s,this},setFromNormalAndCoplanarPoint:function(r,e){return this.normal.copy(r),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(){var r=new i.Vector3,e=new i.Vector3;return function(o,s,d){var p=r.subVectors(d,s).cross(e.subVectors(o,s)).normalize();return this.setFromNormalAndCoplanarPoint(p,o),this}}(),copy:function(r){return this.normal.copy(r.normal),this.constant=r.constant,this},normalize:function(){var r=1/this.normal.length();return this.normal.multiplyScalar(r),this.constant*=r,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(r){return this.normal.dot(r)+this.constant},distanceToSphere:function(r){return this.distanceToPoint(r.center)-r.radius},projectPoint:function(r,e){return this.orthoPoint(r,e).sub(r).negate()},orthoPoint:function(r,e){var o=this.distanceToPoint(r),s=e||new i.Vector3;return s.copy(this.normal).multiplyScalar(o)},isIntersectionLine:function(r){var e=this.distanceToPoint(r.start),o=this.distanceToPoint(r.end);return e<0&&o>0||o<0&&e>0},intersectLine:function(){var r=new i.Vector3;return function(e,o){var s=o||new i.Vector3,d=e.delta(r),p=this.normal.dot(d);if(p==0)return this.distanceToPoint(e.start)==0?s.copy(e.start):void 0;var x=-(e.start.dot(this.normal)+this.constant)/p;if(!(x<0||x>1))return s.copy(d).multiplyScalar(x).add(e.start)}}(),coplanarPoint:function(r){var e=r||new i.Vector3;return e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var r=new i.Vector3,e=new i.Vector3,o=new i.Matrix3;return function(s,d){var p=d||o.getNormalMatrix(s),x=r.copy(this.normal).applyMatrix3(p),l=this.coplanarPoint(e);return l.applyMatrix4(s),this.setFromNormalAndCoplanarPoint(x,l),this}}(),translate:function(r){return this.constant=this.constant-r.dot(this.normal),this},equals:function(r){return r.normal.equals(this.normal)&&r.constant==this.constant},clone:function(){return new i.Plane().copy(this)}},i.Math={generateUUID:function(){var r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),e=new Array(36),o=0,s;return function(){for(var d=0;d<36;d++)d==8||d==13||d==18||d==23?e[d]="-":d==14?e[d]="4":(o<=2&&(o=33554432+Math.random()*16777216|0),s=o&15,o=o>>4,e[d]=r[d==19?s&3|8:s]);return e.join("")}}(),clamp:function(r,e,o){return r<e?e:r>o?o:r},clampBottom:function(r,e){return r<e?e:r},mapLinear:function(r,e,o,s,d){return s+(r-e)*(d-s)/(o-e)},smoothstep:function(r,e,o){return r<=e?0:r>=o?1:(r=(r-e)/(o-e),r*r*(3-2*r))},smootherstep:function(r,e,o){return r<=e?0:r>=o?1:(r=(r-e)/(o-e),r*r*r*(r*(r*6-15)+10))},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(r,e){return Math.floor(this.randFloat(r,e))},randFloat:function(r,e){return r+Math.random()*(e-r)},randFloatSpread:function(r){return r*(.5-Math.random())},degToRad:function(){var r=Math.PI/180;return function(e){return e*r}}(),radToDeg:function(){var r=180/Math.PI;return function(e){return e*r}}(),isPowerOfTwo:function(r){return(r&r-1)===0&&r!==0},nextPowerOfTwo:function(r){return r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r++,r}},i.Spline=function(r){this.points=r;var e=[],o={x:0,y:0,z:0},s,d,p,x,l,_,v,c,h;this.initFromArray=function(m){this.points=[];for(var b=0;b<m.length;b++)this.points[b]={x:m[b][0],y:m[b][1],z:m[b][2]}},this.getPoint=function(m){return s=(this.points.length-1)*m,d=Math.floor(s),p=s-d,e[0]=d===0?d:d-1,e[1]=d,e[2]=d>this.points.length-2?this.points.length-1:d+1,e[3]=d>this.points.length-3?this.points.length-1:d+2,_=this.points[e[0]],v=this.points[e[1]],c=this.points[e[2]],h=this.points[e[3]],x=p*p,l=p*x,o.x=f(_.x,v.x,c.x,h.x,p,x,l),o.y=f(_.y,v.y,c.y,h.y,p,x,l),o.z=f(_.z,v.z,c.z,h.z,p,x,l),o},this.getControlPointsArray=function(){var m,b,w=this.points.length,C=[];for(m=0;m<w;m++)b=this.points[m],C[m]=[b.x,b.y,b.z];return C},this.getLength=function(m){var b,w,C,E,S=0,M=0,A=0,R=new i.Vector3,D=new i.Vector3,N=[],I=0;for(N[0]=0,m||(m=100),C=this.points.length*m,R.copy(this.points[0]),b=1;b<C;b++)w=b/C,E=this.getPoint(w),D.copy(E),I+=D.distanceTo(R),R.copy(E),S=(this.points.length-1)*w,M=Math.floor(S),M!=A&&(N[M]=I,A=M);return N[N.length]=I,{chunks:N,total:I}},this.reparametrizeByArcLength=function(m){var b,w,C,E,S,M,A,R,D=[],N=new i.Vector3,I=this.getLength();for(D.push(N.copy(this.points[0]).clone()),b=1;b<this.points.length;b++){for(M=I.chunks[b]-I.chunks[b-1],A=Math.ceil(m*M/I.total),E=(b-1)/(this.points.length-1),S=b/(this.points.length-1),w=1;w<A-1;w++)C=E+w*(1/A)*(S-E),R=this.getPoint(C),D.push(N.copy(R).clone());D.push(N.copy(this.points[b]).clone())}this.points=D};function f(m,b,w,C,E,S,M){var A=(w-m)*.5,R=(C-b)*.5;return(2*(b-w)+A+R)*M+(-3*(b-w)-2*A-R)*S+A*E+b}},i.Triangle=function(r,e,o){this.a=r!==void 0?r:new i.Vector3,this.b=e!==void 0?e:new i.Vector3,this.c=o!==void 0?o:new i.Vector3},i.Triangle.normal=function(){var r=new i.Vector3;return function(e,o,s,d){var p=d||new i.Vector3;p.subVectors(s,o),r.subVectors(e,o),p.cross(r);var x=p.lengthSq();return x>0?p.multiplyScalar(1/Math.sqrt(x)):p.set(0,0,0)}}(),i.Triangle.barycoordFromPoint=function(){var r=new i.Vector3,e=new i.Vector3,o=new i.Vector3;return function(s,d,p,x,l){r.subVectors(x,d),e.subVectors(p,d),o.subVectors(s,d);var _=r.dot(r),v=r.dot(e),c=r.dot(o),h=e.dot(e),f=e.dot(o),m=_*h-v*v,b=l||new i.Vector3;if(m==0)return b.set(-2,-1,-1);var w=1/m,C=(h*c-v*f)*w,E=(_*f-v*c)*w;return b.set(1-C-E,E,C)}}(),i.Triangle.containsPoint=function(){var r=new i.Vector3;return function(e,o,s,d){var p=i.Triangle.barycoordFromPoint(e,o,s,d,r);return p.x>=0&&p.y>=0&&p.x+p.y<=1}}(),i.Triangle.prototype={constructor:i.Triangle,set:function(r,e,o){return this.a.copy(r),this.b.copy(e),this.c.copy(o),this},setFromPointsAndIndices:function(r,e,o,s){return this.a.copy(r[e]),this.b.copy(r[o]),this.c.copy(r[s]),this},copy:function(r){return this.a.copy(r.a),this.b.copy(r.b),this.c.copy(r.c),this},area:function(){var r=new i.Vector3,e=new i.Vector3;return function(){return r.subVectors(this.c,this.b),e.subVectors(this.a,this.b),r.cross(e).length()*.5}}(),midpoint:function(r){var e=r||new i.Vector3;return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(r){return i.Triangle.normal(this.a,this.b,this.c,r)},plane:function(r){var e=r||new i.Plane;return e.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(r,e){return i.Triangle.barycoordFromPoint(r,this.a,this.b,this.c,e)},containsPoint:function(r){return i.Triangle.containsPoint(r,this.a,this.b,this.c)},equals:function(r){return r.a.equals(this.a)&&r.b.equals(this.b)&&r.c.equals(this.c)},clone:function(){return new i.Triangle().copy(this)}},i.Clock=function(r){this.autoStart=r!==void 0?r:!0,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1},i.Clock.prototype={constructor:i.Clock,start:function(){this.startTime=self.performance!==void 0&&self.performance.now!==void 0?self.performance.now():Date.now(),this.oldTime=this.startTime,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var r=0;if(this.autoStart&&!this.running&&this.start(),this.running){var e=self.performance!==void 0&&self.performance.now!==void 0?self.performance.now():Date.now();r=.001*(e-this.oldTime),this.oldTime=e,this.elapsedTime+=r}return r}},i.EventDispatcher=function(){},i.EventDispatcher.prototype={constructor:i.EventDispatcher,apply:function(r){r.addEventListener=i.EventDispatcher.prototype.addEventListener,r.hasEventListener=i.EventDispatcher.prototype.hasEventListener,r.removeEventListener=i.EventDispatcher.prototype.removeEventListener,r.dispatchEvent=i.EventDispatcher.prototype.dispatchEvent},addEventListener:function(r,e){this._listeners===void 0&&(this._listeners={});var o=this._listeners;o[r]===void 0&&(o[r]=[]),o[r].indexOf(e)===-1&&o[r].push(e)},hasEventListener:function(r,e){if(this._listeners===void 0)return!1;var o=this._listeners;return o[r]!==void 0&&o[r].indexOf(e)!==-1},removeEventListener:function(r,e){if(this._listeners!==void 0){var o=this._listeners,s=o[r];if(s!==void 0){var d=s.indexOf(e);d!==-1&&s.splice(d,1)}}},dispatchEvent:function(r){if(this._listeners!==void 0){var e=this._listeners,o=e[r.type];if(o!==void 0){r.target=this;for(var s=[],d=o.length,p=0;p<d;p++)s[p]=o[p];for(var p=0;p<d;p++)s[p].call(this,r)}}}},function(r){r.Raycaster=function(s,d,p,x){this.ray=new r.Ray(s,d),this.near=p||0,this.far=x||1/0,this.params={Sprite:{},Mesh:{},PointCloud:{threshold:1},LOD:{},Line:{}}};var e=function(s,d){return s.distance-d.distance},o=function(s,d,p,x){if(s.raycast(d,p),x===!0)for(var l=s.children,_=0,v=l.length;_<v;_++)o(l[_],d,p,!0)};r.Raycaster.prototype={constructor:r.Raycaster,precision:1e-4,linePrecision:1,set:function(s,d){this.ray.set(s,d)},setFromCamera:function(s,d){d instanceof r.PerspectiveCamera?(this.ray.origin.copy(d.position),this.ray.direction.set(s.x,s.y,.5).unproject(d).sub(d.position).normalize()):d instanceof r.OrthographicCamera?(this.ray.origin.set(s.x,s.y,-1).unproject(d),this.ray.direction.set(0,0,-1).transformDirection(d.matrixWorld)):r.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(s,d){var p=[];return o(s,this,p,d),p.sort(e),p},intersectObjects:function(s,d){var p=[];if(!(s instanceof Array))return r.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),p;for(var x=0,l=s.length;x<l;x++)o(s[x],this,p,d);return p.sort(e),p}}}(i),i.Object3D=function(){Object.defineProperty(this,"id",{value:i.Object3DIdCount++}),this.uuid=i.Math.generateUUID(),this.name="",this.type="Object3D",this.parent=void 0,this.children=[],this.up=i.Object3D.DefaultUp.clone();var r=new i.Vector3,e=new i.Euler,o=new i.Quaternion,s=new i.Vector3(1,1,1),d=function(){o.setFromEuler(e,!1)},p=function(){e.setFromQuaternion(o,void 0,!1)};e.onChange(d),o.onChange(p),Object.defineProperties(this,{position:{enumerable:!0,value:r},rotation:{enumerable:!0,value:e},quaternion:{enumerable:!0,value:o},scale:{enumerable:!0,value:s}}),this.rotationAutoUpdate=!0,this.matrix=new i.Matrix4,this.matrixWorld=new i.Matrix4,this.matrixAutoUpdate=!0,this.matrixWorldNeedsUpdate=!1,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}},i.Object3D.DefaultUp=new i.Vector3(0,1,0),i.Object3D.prototype={constructor:i.Object3D,get eulerOrder(){return i.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order."),this.rotation.order},set eulerOrder(r){i.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order."),this.rotation.order=r},get useQuaternion(){i.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set useQuaternion(r){i.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},applyMatrix:function(r){this.matrix.multiplyMatrices(r,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(r,e){this.quaternion.setFromAxisAngle(r,e)},setRotationFromEuler:function(r){this.quaternion.setFromEuler(r,!0)},setRotationFromMatrix:function(r){this.quaternion.setFromRotationMatrix(r)},setRotationFromQuaternion:function(r){this.quaternion.copy(r)},rotateOnAxis:function(){var r=new i.Quaternion;return function(e,o){return r.setFromAxisAngle(e,o),this.quaternion.multiply(r),this}}(),rotateX:function(){var r=new i.Vector3(1,0,0);return function(e){return this.rotateOnAxis(r,e)}}(),rotateY:function(){var r=new i.Vector3(0,1,0);return function(e){return this.rotateOnAxis(r,e)}}(),rotateZ:function(){var r=new i.Vector3(0,0,1);return function(e){return this.rotateOnAxis(r,e)}}(),translateOnAxis:function(){var r=new i.Vector3;return function(e,o){return r.copy(e).applyQuaternion(this.quaternion),this.position.add(r.multiplyScalar(o)),this}}(),translate:function(r,e){return i.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,r)},translateX:function(){var r=new i.Vector3(1,0,0);return function(e){return this.translateOnAxis(r,e)}}(),translateY:function(){var r=new i.Vector3(0,1,0);return function(e){return this.translateOnAxis(r,e)}}(),translateZ:function(){var r=new i.Vector3(0,0,1);return function(e){return this.translateOnAxis(r,e)}}(),localToWorld:function(r){return r.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var r=new i.Matrix4;return function(e){return e.applyMatrix4(r.getInverse(this.matrixWorld))}}(),lookAt:function(){var r=new i.Matrix4;return function(e){r.lookAt(e,this.position,this.up),this.quaternion.setFromRotationMatrix(r)}}(),add:function(r){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return r===this?(i.error("THREE.Object3D.add: object can't be added as a child of itself.",r),this):(r instanceof i.Object3D?(r.parent!==void 0&&r.parent.remove(r),r.parent=this,r.dispatchEvent({type:"added"}),this.children.push(r)):i.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",r),this)},remove:function(r){if(arguments.length>1)for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);var o=this.children.indexOf(r);o!==-1&&(r.parent=void 0,r.dispatchEvent({type:"removed"}),this.children.splice(o,1))},getChildByName:function(r){return i.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(r)},getObjectById:function(r){return this.getObjectByProperty("id",r)},getObjectByName:function(r){return this.getObjectByProperty("name",r)},getObjectByProperty:function(r,e){if(this[r]===e)return this;for(var o=0,s=this.children.length;o<s;o++){var d=this.children[o],p=d.getObjectByProperty(r,e);if(p!==void 0)return p}},getWorldPosition:function(r){var e=r||new i.Vector3;return this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var r=new i.Vector3,e=new i.Vector3;return function(o){var s=o||new i.Quaternion;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(r,s,e),s}}(),getWorldRotation:function(){var r=new i.Quaternion;return function(e){var o=e||new i.Euler;return this.getWorldQuaternion(r),o.setFromQuaternion(r,this.rotation.order,!1)}}(),getWorldScale:function(){var r=new i.Vector3,e=new i.Quaternion;return function(o){var s=o||new i.Vector3;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(r,e,s),s}}(),getWorldDirection:function(){var r=new i.Quaternion;return function(e){var o=e||new i.Vector3;return this.getWorldQuaternion(r),o.set(0,0,1).applyQuaternion(r)}}(),raycast:function(){},traverse:function(r){r(this);for(var e=0,o=this.children.length;e<o;e++)this.children[e].traverse(r)},traverseVisible:function(r){if(this.visible!==!1){r(this);for(var e=0,o=this.children.length;e<o;e++)this.children[e].traverseVisible(r)}},traverseAncestors:function(r){this.parent&&(r(this.parent),this.parent.traverseAncestors(r))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(r){this.matrixAutoUpdate===!0&&this.updateMatrix(),(this.matrixWorldNeedsUpdate===!0||r===!0)&&(this.parent===void 0?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,r=!0);for(var e=0,o=this.children.length;e<o;e++)this.children[e].updateMatrixWorld(r)},toJSON:function(){var r={metadata:{version:4.3,type:"Object",generator:"ObjectExporter"}},e={},o=function(x){if(r.geometries===void 0&&(r.geometries=[]),e[x.uuid]===void 0){var l=x.toJSON();delete l.metadata,e[x.uuid]=l,r.geometries.push(l)}return x.uuid},s={},d=function(x){if(r.materials===void 0&&(r.materials=[]),s[x.uuid]===void 0){var l=x.toJSON();delete l.metadata,s[x.uuid]=l,r.materials.push(l)}return x.uuid},p=function(x){var l={};if(l.uuid=x.uuid,l.type=x.type,x.name!==""&&(l.name=x.name),JSON.stringify(x.userData)!=="{}"&&(l.userData=x.userData),x.visible!==!0&&(l.visible=x.visible),x instanceof i.PerspectiveCamera?(l.fov=x.fov,l.aspect=x.aspect,l.near=x.near,l.far=x.far):x instanceof i.OrthographicCamera?(l.left=x.left,l.right=x.right,l.top=x.top,l.bottom=x.bottom,l.near=x.near,l.far=x.far):x instanceof i.AmbientLight?l.color=x.color.getHex():x instanceof i.DirectionalLight?(l.color=x.color.getHex(),l.intensity=x.intensity):x instanceof i.PointLight?(l.color=x.color.getHex(),l.intensity=x.intensity,l.distance=x.distance,l.decay=x.decay):x instanceof i.SpotLight?(l.color=x.color.getHex(),l.intensity=x.intensity,l.distance=x.distance,l.angle=x.angle,l.exponent=x.exponent,l.decay=x.decay):x instanceof i.HemisphereLight?(l.color=x.color.getHex(),l.groundColor=x.groundColor.getHex()):x instanceof i.Mesh||x instanceof i.Line||x instanceof i.PointCloud?(l.geometry=o(x.geometry),l.material=d(x.material),x instanceof i.Line&&(l.mode=x.mode)):x instanceof i.Sprite&&(l.material=d(x.material)),l.matrix=x.matrix.toArray(),x.children.length>0){l.children=[];for(var _=0;_<x.children.length;_++)l.children.push(p(x.children[_]))}return l};return r.object=p(this),r},clone:function(r,e){if(r===void 0&&(r=new i.Object3D),e===void 0&&(e=!0),r.name=this.name,r.up.copy(this.up),r.position.copy(this.position),r.quaternion.copy(this.quaternion),r.scale.copy(this.scale),r.rotationAutoUpdate=this.rotationAutoUpdate,r.matrix.copy(this.matrix),r.matrixWorld.copy(this.matrixWorld),r.matrixAutoUpdate=this.matrixAutoUpdate,r.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,r.visible=this.visible,r.castShadow=this.castShadow,r.receiveShadow=this.receiveShadow,r.frustumCulled=this.frustumCulled,r.userData=JSON.parse(JSON.stringify(this.userData)),e===!0)for(var o=0;o<this.children.length;o++){var s=this.children[o];r.add(s.clone())}return r}},i.EventDispatcher.prototype.apply(i.Object3D.prototype),i.Object3DIdCount=0,i.Face3=function(r,e,o,s,d,p){this.a=r,this.b=e,this.c=o,this.normal=s instanceof i.Vector3?s:new i.Vector3,this.vertexNormals=s instanceof Array?s:[],this.color=d instanceof i.Color?d:new i.Color,this.vertexColors=d instanceof Array?d:[],this.vertexTangents=[],this.materialIndex=p!==void 0?p:0},i.Face3.prototype={constructor:i.Face3,clone:function(){var r=new i.Face3(this.a,this.b,this.c);r.normal.copy(this.normal),r.color.copy(this.color),r.materialIndex=this.materialIndex;for(var e=0,o=this.vertexNormals.length;e<o;e++)r.vertexNormals[e]=this.vertexNormals[e].clone();for(var e=0,o=this.vertexColors.length;e<o;e++)r.vertexColors[e]=this.vertexColors[e].clone();for(var e=0,o=this.vertexTangents.length;e<o;e++)r.vertexTangents[e]=this.vertexTangents[e].clone();return r}},i.Face4=function(r,e,o,s,d,p,x){return i.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new i.Face3(r,e,o,d,p,x)},i.BufferAttribute=function(r,e){this.array=r,this.itemSize=e,this.needsUpdate=!1},i.BufferAttribute.prototype={constructor:i.BufferAttribute,get length(){return this.array.length},copyAt:function(r,e,o){r*=this.itemSize,o*=e.itemSize;for(var s=0,d=this.itemSize;s<d;s++)this.array[r+s]=e.array[o+s];return this},set:function(r,e){return e===void 0&&(e=0),this.array.set(r,e),this},setX:function(r,e){return this.array[r*this.itemSize]=e,this},setY:function(r,e){return this.array[r*this.itemSize+1]=e,this},setZ:function(r,e){return this.array[r*this.itemSize+2]=e,this},setXY:function(r,e,o){return r*=this.itemSize,this.array[r]=e,this.array[r+1]=o,this},setXYZ:function(r,e,o,s){return r*=this.itemSize,this.array[r]=e,this.array[r+1]=o,this.array[r+2]=s,this},setXYZW:function(r,e,o,s,d){return r*=this.itemSize,this.array[r]=e,this.array[r+1]=o,this.array[r+2]=s,this.array[r+3]=d,this},clone:function(){return new i.BufferAttribute(new this.array.constructor(this.array),this.itemSize)}},i.Int8Attribute=function(r,e){return i.warn("THREE.Int8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new i.BufferAttribute(r,e)},i.Uint8Attribute=function(r,e){return i.warn("THREE.Uint8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new i.BufferAttribute(r,e)},i.Uint8ClampedAttribute=function(r,e){return i.warn("THREE.Uint8ClampedAttribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new i.BufferAttribute(r,e)},i.Int16Attribute=function(r,e){return i.warn("THREE.Int16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new i.BufferAttribute(r,e)},i.Uint16Attribute=function(r,e){return i.warn("THREE.Uint16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new i.BufferAttribute(r,e)},i.Int32Attribute=function(r,e){return i.warn("THREE.Int32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new i.BufferAttribute(r,e)},i.Uint32Attribute=function(r,e){return i.warn("THREE.Uint32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new i.BufferAttribute(r,e)},i.Float32Attribute=function(r,e){return i.warn("THREE.Float32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new i.BufferAttribute(r,e)},i.Float64Attribute=function(r,e){return i.warn("THREE.Float64Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new i.BufferAttribute(r,e)},i.DynamicBufferAttribute=function(r,e){i.BufferAttribute.call(this,r,e),this.updateRange={offset:0,count:-1}},i.DynamicBufferAttribute.prototype=Object.create(i.BufferAttribute.prototype),i.DynamicBufferAttribute.prototype.constructor=i.DynamicBufferAttribute,i.DynamicBufferAttribute.prototype.clone=function(){return new i.DynamicBufferAttribute(new this.array.constructor(this.array),this.itemSize)},i.BufferGeometry=function(){Object.defineProperty(this,"id",{value:i.GeometryIdCount++}),this.uuid=i.Math.generateUUID(),this.name="",this.type="BufferGeometry",this.attributes={},this.attributesKeys=[],this.drawcalls=[],this.offsets=this.drawcalls,this.boundingBox=null,this.boundingSphere=null},i.BufferGeometry.prototype={constructor:i.BufferGeometry,addAttribute:function(r,e){if(!(e instanceof i.BufferAttribute)){i.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.attributes[r]={array:arguments[1],itemSize:arguments[2]};return}this.attributes[r]=e,this.attributesKeys=Object.keys(this.attributes)},getAttribute:function(r){return this.attributes[r]},addDrawCall:function(r,e,o){this.drawcalls.push({start:r,count:e,index:o!==void 0?o:0})},applyMatrix:function(r){var e=this.attributes.position;e!==void 0&&(r.applyToVector3Array(e.array),e.needsUpdate=!0);var o=this.attributes.normal;if(o!==void 0){var s=new i.Matrix3().getNormalMatrix(r);s.applyToVector3Array(o.array),o.needsUpdate=!0}this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere()},center:function(){this.computeBoundingBox();var r=this.boundingBox.center().negate();return this.applyMatrix(new i.Matrix4().setPosition(r)),r},fromGeometry:function(r,e){e=e||{vertexColors:i.NoColors};var o=r.vertices,s=r.faces,d=r.faceVertexUvs,p=e.vertexColors,x=d[0].length>0,l=s[0].vertexNormals.length==3,_=new Float32Array(s.length*3*3);this.addAttribute("position",new i.BufferAttribute(_,3));var v=new Float32Array(s.length*3*3);if(this.addAttribute("normal",new i.BufferAttribute(v,3)),p!==i.NoColors){var c=new Float32Array(s.length*3*3);this.addAttribute("color",new i.BufferAttribute(c,3))}if(x===!0){var h=new Float32Array(s.length*3*2);this.addAttribute("uv",new i.BufferAttribute(h,2))}for(var f=0,m=0,b=0;f<s.length;f++,m+=6,b+=9){var w=s[f],C=o[w.a],E=o[w.b],S=o[w.c];if(_[b]=C.x,_[b+1]=C.y,_[b+2]=C.z,_[b+3]=E.x,_[b+4]=E.y,_[b+5]=E.z,_[b+6]=S.x,_[b+7]=S.y,_[b+8]=S.z,l===!0){var M=w.vertexNormals[0],A=w.vertexNormals[1],R=w.vertexNormals[2];v[b]=M.x,v[b+1]=M.y,v[b+2]=M.z,v[b+3]=A.x,v[b+4]=A.y,v[b+5]=A.z,v[b+6]=R.x,v[b+7]=R.y,v[b+8]=R.z}else{var D=w.normal;v[b]=D.x,v[b+1]=D.y,v[b+2]=D.z,v[b+3]=D.x,v[b+4]=D.y,v[b+5]=D.z,v[b+6]=D.x,v[b+7]=D.y,v[b+8]=D.z}if(p===i.FaceColors){var N=w.color;c[b]=N.r,c[b+1]=N.g,c[b+2]=N.b,c[b+3]=N.r,c[b+4]=N.g,c[b+5]=N.b,c[b+6]=N.r,c[b+7]=N.g,c[b+8]=N.b}else if(p===i.VertexColors){var I=w.vertexColors[0],L=w.vertexColors[1],Y=w.vertexColors[2];c[b]=I.r,c[b+1]=I.g,c[b+2]=I.b,c[b+3]=L.r,c[b+4]=L.g,c[b+5]=L.b,c[b+6]=Y.r,c[b+7]=Y.g,c[b+8]=Y.b}if(x===!0){var J=d[0][f][0],ie=d[0][f][1],K=d[0][f][2];h[m]=J.x,h[m+1]=J.y,h[m+2]=ie.x,h[m+3]=ie.y,h[m+4]=K.x,h[m+5]=K.y}}return this.computeBoundingSphere(),this},computeBoundingBox:function(){var r=new i.Vector3;return function(){this.boundingBox===null&&(this.boundingBox=new i.Box3);var e=this.attributes.position.array;if(e){var o=this.boundingBox;o.makeEmpty();for(var s=0,d=e.length;s<d;s+=3)r.set(e[s],e[s+1],e[s+2]),o.expandByPoint(r)}(e===void 0||e.length===0)&&(this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0)),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&i.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.')}}(),computeBoundingSphere:function(){var r=new i.Box3,e=new i.Vector3;return function(){this.boundingSphere===null&&(this.boundingSphere=new i.Sphere);var o=this.attributes.position.array;if(o){r.makeEmpty();for(var s=this.boundingSphere.center,d=0,p=o.length;d<p;d+=3)e.set(o[d],o[d+1],o[d+2]),r.expandByPoint(e);r.center(s);for(var x=0,d=0,p=o.length;d<p;d+=3)e.set(o[d],o[d+1],o[d+2]),x=Math.max(x,s.distanceToSquared(e));this.boundingSphere.radius=Math.sqrt(x),isNaN(this.boundingSphere.radius)&&i.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var r=this.attributes;if(r.position){var e=r.position.array;if(r.normal===void 0)this.addAttribute("normal",new i.BufferAttribute(new Float32Array(e.length),3));else for(var d=r.normal.array,o=0,s=d.length;o<s;o++)d[o]=0;var d=r.normal.array,p,x,l,_=new i.Vector3,v=new i.Vector3,c=new i.Vector3,h=new i.Vector3,f=new i.Vector3;if(r.index)for(var m=r.index.array,b=this.offsets.length>0?this.offsets:[{start:0,count:m.length,index:0}],w=0,C=b.length;w<C;++w)for(var E=b[w].start,S=b[w].count,M=b[w].index,o=E,s=E+S;o<s;o+=3)p=(M+m[o])*3,x=(M+m[o+1])*3,l=(M+m[o+2])*3,_.fromArray(e,p),v.fromArray(e,x),c.fromArray(e,l),h.subVectors(c,v),f.subVectors(_,v),h.cross(f),d[p]+=h.x,d[p+1]+=h.y,d[p+2]+=h.z,d[x]+=h.x,d[x+1]+=h.y,d[x+2]+=h.z,d[l]+=h.x,d[l+1]+=h.y,d[l+2]+=h.z;else for(var o=0,s=e.length;o<s;o+=9)_.fromArray(e,o),v.fromArray(e,o+3),c.fromArray(e,o+6),h.subVectors(c,v),f.subVectors(_,v),h.cross(f),d[o]=h.x,d[o+1]=h.y,d[o+2]=h.z,d[o+3]=h.x,d[o+4]=h.y,d[o+5]=h.z,d[o+6]=h.x,d[o+7]=h.y,d[o+8]=h.z;this.normalizeNormals(),r.normal.needsUpdate=!0}},computeTangents:function(){if(this.attributes.index===void 0||this.attributes.position===void 0||this.attributes.normal===void 0||this.attributes.uv===void 0){i.warn("THREE.BufferGeometry: Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");return}var r=this.attributes.index.array,e=this.attributes.position.array,o=this.attributes.normal.array,s=this.attributes.uv.array,d=e.length/3;this.attributes.tangent===void 0&&this.addAttribute("tangent",new i.BufferAttribute(new Float32Array(4*d),4));for(var p=this.attributes.tangent.array,x=[],l=[],_=0;_<d;_++)x[_]=new i.Vector3,l[_]=new i.Vector3;var v=new i.Vector3,c=new i.Vector3,h=new i.Vector3,f=new i.Vector2,m=new i.Vector2,b=new i.Vector2,w,C,E,S,M,A,R,D,N,I,L,Y=new i.Vector3,J=new i.Vector3;function ie(Ke,Te,Ie){v.fromArray(e,Ke*3),c.fromArray(e,Te*3),h.fromArray(e,Ie*3),f.fromArray(s,Ke*2),m.fromArray(s,Te*2),b.fromArray(s,Ie*2),w=c.x-v.x,C=h.x-v.x,E=c.y-v.y,S=h.y-v.y,M=c.z-v.z,A=h.z-v.z,R=m.x-f.x,D=b.x-f.x,N=m.y-f.y,I=b.y-f.y,L=1/(R*I-D*N),Y.set((I*w-N*C)*L,(I*E-N*S)*L,(I*M-N*A)*L),J.set((R*C-D*w)*L,(R*S-D*E)*L,(R*A-D*M)*L),x[Ke].add(Y),x[Te].add(Y),x[Ie].add(Y),l[Ke].add(J),l[Te].add(J),l[Ie].add(J)}var K,Q,ne,ue,fe,ge,ye;this.drawcalls.length===0&&this.addDrawCall(0,r.length,0);var pe=this.drawcalls;for(ne=0,ue=pe.length;ne<ue;++ne){var de=pe[ne].start,he=pe[ne].count,_e=pe[ne].index;for(K=de,Q=de+he;K<Q;K+=3)fe=_e+r[K],ge=_e+r[K+1],ye=_e+r[K+2],ie(fe,ge,ye)}var ve=new i.Vector3,Z=new i.Vector3,be=new i.Vector3,Ee=new i.Vector3,De,Fe,Ue;function Qe(Ke){be.fromArray(o,Ke*3),Ee.copy(be),Fe=x[Ke],ve.copy(Fe),ve.sub(be.multiplyScalar(be.dot(Fe))).normalize(),Z.crossVectors(Ee,Fe),Ue=Z.dot(l[Ke]),De=Ue<0?-1:1,p[Ke*4]=ve.x,p[Ke*4+1]=ve.y,p[Ke*4+2]=ve.z,p[Ke*4+3]=De}for(ne=0,ue=pe.length;ne<ue;++ne){var de=pe[ne].start,he=pe[ne].count,_e=pe[ne].index;for(K=de,Q=de+he;K<Q;K+=3)fe=_e+r[K],ge=_e+r[K+1],ye=_e+r[K+2],Qe(fe),Qe(ge),Qe(ye)}},computeOffsets:function(r){r===void 0&&(r=65535);for(var e=this.attributes.index.array,o=this.attributes.position.array,s=e.length/3,d=new Uint16Array(e.length),p=0,x=0,l=[{start:0,count:0,index:0}],_=l[0],v=0,c=0,h=new Int32Array(6),f=new Int32Array(o.length),m=new Int32Array(o.length),b=0;b<o.length;b++)f[b]=-1,m[b]=-1;for(var w=0;w<s;w++){c=0;for(var C=0;C<3;C++){var E=e[w*3+C];f[E]==-1?(h[C*2]=E,h[C*2+1]=-1,c++):f[E]<_.index?(h[C*2]=E,h[C*2+1]=-1,v++):(h[C*2]=E,h[C*2+1]=f[E])}var S=x+c;if(S>_.index+r){var M={start:p,count:0,index:x};l.push(M),_=M;for(var A=0;A<6;A+=2){var R=h[A+1];R>-1&&R<_.index&&(h[A+1]=-1)}}for(var A=0;A<6;A+=2){var E=h[A],R=h[A+1];R===-1&&(R=x++),f[E]=R,m[R]=E,d[p++]=R-_.index,_.count++}}return this.reorderBuffers(d,m,x),this.offsets=l,this.drawcalls=l,l},merge:function(r,e){if(!(r instanceof i.BufferGeometry)){i.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",r);return}e===void 0&&(e=0);var o=this.attributes;for(var s in o)if(r.attributes[s]!==void 0)for(var d=o[s],p=d.array,x=r.attributes[s],l=x.array,_=x.itemSize,v=0,c=_*e;v<l.length;v++,c++)p[c]=l[v];return this},normalizeNormals:function(){for(var r=this.attributes.normal.array,e,o,s,d,p=0,x=r.length;p<x;p+=3)e=r[p],o=r[p+1],s=r[p+2],d=1/Math.sqrt(e*e+o*o+s*s),r[p]*=d,r[p+1]*=d,r[p+2]*=d},reorderBuffers:function(r,e,o){var s={};for(var d in this.attributes)if(d!="index"){var p=this.attributes[d].array;s[d]=new p.constructor(this.attributes[d].itemSize*o)}for(var x=0;x<o;x++){var l=e[x];for(var d in this.attributes)if(d!="index")for(var _=this.attributes[d].array,v=this.attributes[d].itemSize,c=s[d],h=0;h<v;h++)c[x*v+h]=_[l*v+h]}this.attributes.index.array=r;for(var d in this.attributes)d!="index"&&(this.attributes[d].array=s[d],this.attributes[d].numItems=this.attributes[d].itemSize*o)},toJSON:function(){var r={metadata:{version:4,type:"BufferGeometry",generator:"BufferGeometryExporter"},uuid:this.uuid,type:this.type,data:{attributes:{}}},e=this.attributes,o=this.offsets,s=this.boundingSphere;for(var d in e){var p=e[d],x=Array.prototype.slice.call(p.array);r.data.attributes[d]={itemSize:p.itemSize,type:p.array.constructor.name,array:x}}return o.length>0&&(r.data.offsets=JSON.parse(JSON.stringify(o))),s!==null&&(r.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),r},clone:function(){var r=new i.BufferGeometry;for(var e in this.attributes){var o=this.attributes[e];r.addAttribute(e,o.clone())}for(var s=0,d=this.offsets.length;s<d;s++){var p=this.offsets[s];r.offsets.push({start:p.start,index:p.index,count:p.count})}return r},dispose:function(){this.dispatchEvent({type:"dispose"})}},i.EventDispatcher.prototype.apply(i.BufferGeometry.prototype),i.Geometry=function(){Object.defineProperty(this,"id",{value:i.GeometryIdCount++}),this.uuid=i.Math.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphColors=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.hasTangents=!1,this.dynamic=!0,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.tangentsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1},i.Geometry.prototype={constructor:i.Geometry,applyMatrix:function(r){for(var e=new i.Matrix3().getNormalMatrix(r),o=0,s=this.vertices.length;o<s;o++){var d=this.vertices[o];d.applyMatrix4(r)}for(var o=0,s=this.faces.length;o<s;o++){var p=this.faces[o];p.normal.applyMatrix3(e).normalize();for(var x=0,l=p.vertexNormals.length;x<l;x++)p.vertexNormals[x].applyMatrix3(e).normalize()}this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0},fromBufferGeometry:function(r){for(var e=this,o=r.attributes,s=o.position.array,d=o.index!==void 0?o.index.array:void 0,p=o.normal!==void 0?o.normal.array:void 0,x=o.color!==void 0?o.color.array:void 0,l=o.uv!==void 0?o.uv.array:void 0,_=[],v=[],c=0,h=0;c<s.length;c+=3,h+=2)e.vertices.push(new i.Vector3(s[c],s[c+1],s[c+2])),p!==void 0&&_.push(new i.Vector3(p[c],p[c+1],p[c+2])),x!==void 0&&e.colors.push(new i.Color(x[c],x[c+1],x[c+2])),l!==void 0&&v.push(new i.Vector2(l[h],l[h+1]));var f=function(M,A,R){var D=p!==void 0?[_[M].clone(),_[A].clone(),_[R].clone()]:[],N=x!==void 0?[e.colors[M].clone(),e.colors[A].clone(),e.colors[R].clone()]:[];e.faces.push(new i.Face3(M,A,R,D,N)),l!==void 0&&e.faceVertexUvs[0].push([v[M].clone(),v[A].clone(),v[R].clone()])};if(d!==void 0){var m=r.drawcalls;if(m.length>0)for(var c=0;c<m.length;c++)for(var b=m[c],w=b.start,C=b.count,E=b.index,h=w,S=w+C;h<S;h+=3)f(E+d[h],E+d[h+1],E+d[h+2]);else for(var c=0;c<d.length;c+=3)f(d[c],d[c+1],d[c+2])}else for(var c=0;c<s.length/3;c+=3)f(c,c+1,c+2);return this.computeFaceNormals(),r.boundingBox!==null&&(this.boundingBox=r.boundingBox.clone()),r.boundingSphere!==null&&(this.boundingSphere=r.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var r=this.boundingBox.center().negate();return this.applyMatrix(new i.Matrix4().setPosition(r)),r},computeFaceNormals:function(){for(var r=new i.Vector3,e=new i.Vector3,o=0,s=this.faces.length;o<s;o++){var d=this.faces[o],p=this.vertices[d.a],x=this.vertices[d.b],l=this.vertices[d.c];r.subVectors(l,x),e.subVectors(p,x),r.cross(e),r.normalize(),d.normal.copy(r)}},computeVertexNormals:function(r){var e,o,s,d,p,x;for(x=new Array(this.vertices.length),e=0,o=this.vertices.length;e<o;e++)x[e]=new i.Vector3;if(r){var l,_,v,c=new i.Vector3,h=new i.Vector3;for(s=0,d=this.faces.length;s<d;s++)p=this.faces[s],l=this.vertices[p.a],_=this.vertices[p.b],v=this.vertices[p.c],c.subVectors(v,_),h.subVectors(l,_),c.cross(h),x[p.a].add(c),x[p.b].add(c),x[p.c].add(c)}else for(s=0,d=this.faces.length;s<d;s++)p=this.faces[s],x[p.a].add(p.normal),x[p.b].add(p.normal),x[p.c].add(p.normal);for(e=0,o=this.vertices.length;e<o;e++)x[e].normalize();for(s=0,d=this.faces.length;s<d;s++)p=this.faces[s],p.vertexNormals[0]=x[p.a].clone(),p.vertexNormals[1]=x[p.b].clone(),p.vertexNormals[2]=x[p.c].clone()},computeMorphNormals:function(){var r,e,o,s,d;for(o=0,s=this.faces.length;o<s;o++)for(d=this.faces[o],d.__originalFaceNormal?d.__originalFaceNormal.copy(d.normal):d.__originalFaceNormal=d.normal.clone(),d.__originalVertexNormals||(d.__originalVertexNormals=[]),r=0,e=d.vertexNormals.length;r<e;r++)d.__originalVertexNormals[r]?d.__originalVertexNormals[r].copy(d.vertexNormals[r]):d.__originalVertexNormals[r]=d.vertexNormals[r].clone();var p=new i.Geometry;for(p.faces=this.faces,r=0,e=this.morphTargets.length;r<e;r++){if(!this.morphNormals[r]){this.morphNormals[r]={},this.morphNormals[r].faceNormals=[],this.morphNormals[r].vertexNormals=[];var x=this.morphNormals[r].faceNormals,l=this.morphNormals[r].vertexNormals,v,c;for(o=0,s=this.faces.length;o<s;o++)v=new i.Vector3,c={a:new i.Vector3,b:new i.Vector3,c:new i.Vector3},x.push(v),l.push(c)}var _=this.morphNormals[r];p.vertices=this.morphTargets[r].vertices,p.computeFaceNormals(),p.computeVertexNormals();var v,c;for(o=0,s=this.faces.length;o<s;o++)d=this.faces[o],v=_.faceNormals[o],c=_.vertexNormals[o],v.copy(d.normal),c.a.copy(d.vertexNormals[0]),c.b.copy(d.vertexNormals[1]),c.c.copy(d.vertexNormals[2])}for(o=0,s=this.faces.length;o<s;o++)d=this.faces[o],d.normal=d.__originalFaceNormal,d.vertexNormals=d.__originalVertexNormals},computeTangents:function(){var r,e,o,s,d,p,x,l,_,v,c,h,f,m,b,w,C,E,S,M,A,R,D,N,I,L,Y,J=[],ie=[],K=new i.Vector3,Q=new i.Vector3,ne=new i.Vector3,ue=new i.Vector3,fe=new i.Vector3,ge;for(o=0,s=this.vertices.length;o<s;o++)J[o]=new i.Vector3,ie[o]=new i.Vector3;function ye(de,he,_e,ve,Z,be,Ee){_=de.vertices[he],v=de.vertices[_e],c=de.vertices[ve],h=l[Z],f=l[be],m=l[Ee],b=v.x-_.x,w=c.x-_.x,C=v.y-_.y,E=c.y-_.y,S=v.z-_.z,M=c.z-_.z,A=f.x-h.x,R=m.x-h.x,D=f.y-h.y,N=m.y-h.y,I=1/(A*N-R*D),K.set((N*b-D*w)*I,(N*C-D*E)*I,(N*S-D*M)*I),Q.set((A*w-R*b)*I,(A*E-R*C)*I,(A*M-R*S)*I),J[he].add(K),J[_e].add(K),J[ve].add(K),ie[he].add(Q),ie[_e].add(Q),ie[ve].add(Q)}for(r=0,e=this.faces.length;r<e;r++)x=this.faces[r],l=this.faceVertexUvs[0][r],ye(this,x.a,x.b,x.c,0,1,2);var pe=["a","b","c","d"];for(r=0,e=this.faces.length;r<e;r++)for(x=this.faces[r],d=0;d<Math.min(x.vertexNormals.length,3);d++)fe.copy(x.vertexNormals[d]),p=x[pe[d]],L=J[p],ne.copy(L),ne.sub(fe.multiplyScalar(fe.dot(L))).normalize(),ue.crossVectors(x.vertexNormals[d],L),Y=ue.dot(ie[p]),ge=Y<0?-1:1,x.vertexTangents[d]=new i.Vector4(ne.x,ne.y,ne.z,ge);this.hasTangents=!0},computeLineDistances:function(){for(var r=0,e=this.vertices,o=0,s=e.length;o<s;o++)o>0&&(r+=e[o].distanceTo(e[o-1])),this.lineDistances[o]=r},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new i.Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new i.Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(r,e,o){if(!(r instanceof i.Geometry)){i.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",r);return}var s,d=this.vertices.length,p=this.vertices,x=r.vertices,l=this.faces,_=r.faces,v=this.faceVertexUvs[0],c=r.faceVertexUvs[0];o===void 0&&(o=0),e!==void 0&&(s=new i.Matrix3().getNormalMatrix(e));for(var h=0,f=x.length;h<f;h++){var m=x[h],b=m.clone();e!==void 0&&b.applyMatrix4(e),p.push(b)}for(h=0,f=_.length;h<f;h++){var w=_[h],C,E,S,M=w.vertexNormals,A=w.vertexColors;C=new i.Face3(w.a+d,w.b+d,w.c+d),C.normal.copy(w.normal),s!==void 0&&C.normal.applyMatrix3(s).normalize();for(var R=0,D=M.length;R<D;R++)E=M[R].clone(),s!==void 0&&E.applyMatrix3(s).normalize(),C.vertexNormals.push(E);C.color.copy(w.color);for(var R=0,D=A.length;R<D;R++)S=A[R],C.vertexColors.push(S.clone());C.materialIndex=w.materialIndex+o,l.push(C)}for(h=0,f=c.length;h<f;h++){var N=c[h],I=[];if(N!==void 0){for(var R=0,D=N.length;R<D;R++)I.push(N[R].clone());v.push(I)}}},mergeMesh:function(r){if(!(r instanceof i.Mesh)){i.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",r);return}r.matrixAutoUpdate&&r.updateMatrix(),this.merge(r.geometry,r.matrix)},mergeVertices:function(){var r={},e=[],o=[],s,d,p=4,x=Math.pow(10,p),l,_,v,c,h,f;for(l=0,_=this.vertices.length;l<_;l++)s=this.vertices[l],d=Math.round(s.x*x)+"_"+Math.round(s.y*x)+"_"+Math.round(s.z*x),r[d]===void 0?(r[d]=l,e.push(this.vertices[l]),o[l]=e.length-1):o[l]=o[r[d]];var m=[];for(l=0,_=this.faces.length;l<_;l++){v=this.faces[l],v.a=o[v.a],v.b=o[v.b],v.c=o[v.c],c=[v.a,v.b,v.c];for(var b=-1,w=0;w<3;w++)if(c[w]==c[(w+1)%3]){b=w,m.push(l);break}}for(l=m.length-1;l>=0;l--){var C=m[l];for(this.faces.splice(C,1),h=0,f=this.faceVertexUvs.length;h<f;h++)this.faceVertexUvs[h].splice(C,1)}var E=this.vertices.length-e.length;return this.vertices=e,E},toJSON:function(){var r={metadata:{version:4,type:"BufferGeometry",generator:"BufferGeometryExporter"},uuid:this.uuid,type:this.type};if(this.name!==""&&(r.name=this.name),this.parameters!==void 0){var e=this.parameters;for(var o in e)e[o]!==void 0&&(r[o]=e[o]);return r}for(var s=[],d=0;d<this.vertices.length;d++){var p=this.vertices[d];s.push(p.x,p.y,p.z)}for(var x=[],l=[],_={},v=[],c={},h=[],f={},d=0;d<this.faces.length;d++){var m=this.faces[d],b=!1,w=!1,C=this.faceVertexUvs[0][d]!==void 0,E=m.normal.length()>0,S=m.vertexNormals.length>0,M=m.color.r!==1||m.color.g!==1||m.color.b!==1,A=m.vertexColors.length>0,R=0;if(R=L(R,0,0),R=L(R,1,b),R=L(R,2,w),R=L(R,3,C),R=L(R,4,E),R=L(R,5,S),R=L(R,6,M),R=L(R,7,A),x.push(R),x.push(m.a,m.b,m.c),C){var D=this.faceVertexUvs[0][d];x.push(ie(D[0]),ie(D[1]),ie(D[2]))}if(E&&x.push(Y(m.normal)),S){var N=m.vertexNormals;x.push(Y(N[0]),Y(N[1]),Y(N[2]))}if(M&&x.push(J(m.color)),A){var I=m.vertexColors;x.push(J(I[0]),J(I[1]),J(I[2]))}}function L(K,Q,ne){return ne?K|1<<Q:K&~(1<<Q)}function Y(K){var Q=K.x.toString()+K.y.toString()+K.z.toString();return _[Q]!==void 0||(_[Q]=l.length/3,l.push(K.x,K.y,K.z)),_[Q]}function J(K){var Q=K.r.toString()+K.g.toString()+K.b.toString();return c[Q]!==void 0||(c[Q]=v.length,v.push(K.getHex())),c[Q]}function ie(K){var Q=K.x.toString()+K.y.toString();return f[Q]!==void 0||(f[Q]=h.length/2,h.push(K.x,K.y)),f[Q]}return r.data={},r.data.vertices=s,r.data.normals=l,v.length>0&&(r.data.colors=v),h.length>0&&(r.data.uvs=[h]),r.data.faces=x,r},clone:function(){for(var r=new i.Geometry,e=this.vertices,o=0,s=e.length;o<s;o++)r.vertices.push(e[o].clone());for(var d=this.faces,o=0,s=d.length;o<s;o++)r.faces.push(d[o].clone());for(var o=0,s=this.faceVertexUvs.length;o<s;o++){var p=this.faceVertexUvs[o];r.faceVertexUvs[o]===void 0&&(r.faceVertexUvs[o]=[]);for(var x=0,l=p.length;x<l;x++){for(var _=p[x],v=[],c=0,h=_.length;c<h;c++){var f=_[c];v.push(f.clone())}r.faceVertexUvs[o].push(v)}}return r},dispose:function(){this.dispatchEvent({type:"dispose"})}},i.EventDispatcher.prototype.apply(i.Geometry.prototype),i.GeometryIdCount=0,i.Camera=function(){i.Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new i.Matrix4,this.projectionMatrix=new i.Matrix4},i.Camera.prototype=Object.create(i.Object3D.prototype),i.Camera.prototype.constructor=i.Camera,i.Camera.prototype.getWorldDirection=function(){var r=new i.Quaternion;return function(e){var o=e||new i.Vector3;return this.getWorldQuaternion(r),o.set(0,0,-1).applyQuaternion(r)}}(),i.Camera.prototype.lookAt=function(){var r=new i.Matrix4;return function(e){r.lookAt(this.position,e,this.up),this.quaternion.setFromRotationMatrix(r)}}(),i.Camera.prototype.clone=function(r){return r===void 0&&(r=new i.Camera),i.Object3D.prototype.clone.call(this,r),r.matrixWorldInverse.copy(this.matrixWorldInverse),r.projectionMatrix.copy(this.projectionMatrix),r},i.CubeCamera=function(r,e,o){i.Object3D.call(this),this.type="CubeCamera";var s=90,d=1,p=new i.PerspectiveCamera(s,d,r,e);p.up.set(0,-1,0),p.lookAt(new i.Vector3(1,0,0)),this.add(p);var x=new i.PerspectiveCamera(s,d,r,e);x.up.set(0,-1,0),x.lookAt(new i.Vector3(-1,0,0)),this.add(x);var l=new i.PerspectiveCamera(s,d,r,e);l.up.set(0,0,1),l.lookAt(new i.Vector3(0,1,0)),this.add(l);var _=new i.PerspectiveCamera(s,d,r,e);_.up.set(0,0,-1),_.lookAt(new i.Vector3(0,-1,0)),this.add(_);var v=new i.PerspectiveCamera(s,d,r,e);v.up.set(0,-1,0),v.lookAt(new i.Vector3(0,0,1)),this.add(v);var c=new i.PerspectiveCamera(s,d,r,e);c.up.set(0,-1,0),c.lookAt(new i.Vector3(0,0,-1)),this.add(c),this.renderTarget=new i.WebGLRenderTargetCube(o,o,{format:i.RGBFormat,magFilter:i.LinearFilter,minFilter:i.LinearFilter}),this.updateCubeMap=function(h,f){var m=this.renderTarget,b=m.generateMipmaps;m.generateMipmaps=!1,m.activeCubeFace=0,h.render(f,p,m),m.activeCubeFace=1,h.render(f,x,m),m.activeCubeFace=2,h.render(f,l,m),m.activeCubeFace=3,h.render(f,_,m),m.activeCubeFace=4,h.render(f,v,m),m.generateMipmaps=b,m.activeCubeFace=5,h.render(f,c,m)}},i.CubeCamera.prototype=Object.create(i.Object3D.prototype),i.CubeCamera.prototype.constructor=i.CubeCamera,i.OrthographicCamera=function(r,e,o,s,d,p){i.Camera.call(this),this.type="OrthographicCamera",this.zoom=1,this.left=r,this.right=e,this.top=o,this.bottom=s,this.near=d!==void 0?d:.1,this.far=p!==void 0?p:2e3,this.updateProjectionMatrix()},i.OrthographicCamera.prototype=Object.create(i.Camera.prototype),i.OrthographicCamera.prototype.constructor=i.OrthographicCamera,i.OrthographicCamera.prototype.updateProjectionMatrix=function(){var r=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),o=(this.right+this.left)/2,s=(this.top+this.bottom)/2;this.projectionMatrix.makeOrthographic(o-r,o+r,s+e,s-e,this.near,this.far)},i.OrthographicCamera.prototype.clone=function(){var r=new i.OrthographicCamera;return i.Camera.prototype.clone.call(this,r),r.zoom=this.zoom,r.left=this.left,r.right=this.right,r.top=this.top,r.bottom=this.bottom,r.near=this.near,r.far=this.far,r.projectionMatrix.copy(this.projectionMatrix),r},i.PerspectiveCamera=function(r,e,o,s){i.Camera.call(this),this.type="PerspectiveCamera",this.zoom=1,this.fov=r!==void 0?r:50,this.aspect=e!==void 0?e:1,this.near=o!==void 0?o:.1,this.far=s!==void 0?s:2e3,this.updateProjectionMatrix()},i.PerspectiveCamera.prototype=Object.create(i.Camera.prototype),i.PerspectiveCamera.prototype.constructor=i.PerspectiveCamera,i.PerspectiveCamera.prototype.setLens=function(r,e){e===void 0&&(e=24),this.fov=2*i.Math.radToDeg(Math.atan(e/(r*2))),this.updateProjectionMatrix()},i.PerspectiveCamera.prototype.setViewOffset=function(r,e,o,s,d,p){this.fullWidth=r,this.fullHeight=e,this.x=o,this.y=s,this.width=d,this.height=p,this.updateProjectionMatrix()},i.PerspectiveCamera.prototype.updateProjectionMatrix=function(){var r=i.Math.radToDeg(2*Math.atan(Math.tan(i.Math.degToRad(this.fov)*.5)/this.zoom));if(this.fullWidth){var e=this.fullWidth/this.fullHeight,o=Math.tan(i.Math.degToRad(r*.5))*this.near,s=-o,d=e*s,p=e*o,x=Math.abs(p-d),l=Math.abs(o-s);this.projectionMatrix.makeFrustum(d+this.x*x/this.fullWidth,d+(this.x+this.width)*x/this.fullWidth,o-(this.y+this.height)*l/this.fullHeight,o-this.y*l/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(r,this.aspect,this.near,this.far)},i.PerspectiveCamera.prototype.clone=function(){var r=new i.PerspectiveCamera;return i.Camera.prototype.clone.call(this,r),r.zoom=this.zoom,r.fov=this.fov,r.aspect=this.aspect,r.near=this.near,r.far=this.far,r.projectionMatrix.copy(this.projectionMatrix),r},i.Light=function(r){i.Object3D.call(this),this.type="Light",this.color=new i.Color(r)},i.Light.prototype=Object.create(i.Object3D.prototype),i.Light.prototype.constructor=i.Light,i.Light.prototype.clone=function(r){return r===void 0&&(r=new i.Light),i.Object3D.prototype.clone.call(this,r),r.color.copy(this.color),r},i.AmbientLight=function(r){i.Light.call(this,r),this.type="AmbientLight"},i.AmbientLight.prototype=Object.create(i.Light.prototype),i.AmbientLight.prototype.constructor=i.AmbientLight,i.AmbientLight.prototype.clone=function(){var r=new i.AmbientLight;return i.Light.prototype.clone.call(this,r),r},i.AreaLight=function(r,e){i.Light.call(this,r),this.type="AreaLight",this.normal=new i.Vector3(0,-1,0),this.right=new i.Vector3(1,0,0),this.intensity=e!==void 0?e:1,this.width=1,this.height=1,this.constantAttenuation=1.5,this.linearAttenuation=.5,this.quadraticAttenuation=.1},i.AreaLight.prototype=Object.create(i.Light.prototype),i.AreaLight.prototype.constructor=i.AreaLight,i.DirectionalLight=function(r,e){i.Light.call(this,r),this.type="DirectionalLight",this.position.set(0,1,0),this.target=new i.Object3D,this.intensity=e!==void 0?e:1,this.castShadow=!1,this.onlyShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraLeft=-500,this.shadowCameraRight=500,this.shadowCameraTop=500,this.shadowCameraBottom=-500,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapWidth=512,this.shadowMapHeight=512,this.shadowCascade=!1,this.shadowCascadeOffset=new i.Vector3(0,0,-1e3),this.shadowCascadeCount=2,this.shadowCascadeBias=[0,0,0],this.shadowCascadeWidth=[512,512,512],this.shadowCascadeHeight=[512,512,512],this.shadowCascadeNearZ=[-1,.99,.998],this.shadowCascadeFarZ=[.99,.998,1],this.shadowCascadeArray=[],this.shadowMap=null,this.shadowMapSize=null,this.shadowCamera=null,this.shadowMatrix=null},i.DirectionalLight.prototype=Object.create(i.Light.prototype),i.DirectionalLight.prototype.constructor=i.DirectionalLight,i.DirectionalLight.prototype.clone=function(){var r=new i.DirectionalLight;return i.Light.prototype.clone.call(this,r),r.target=this.target.clone(),r.intensity=this.intensity,r.castShadow=this.castShadow,r.onlyShadow=this.onlyShadow,r.shadowCameraNear=this.shadowCameraNear,r.shadowCameraFar=this.shadowCameraFar,r.shadowCameraLeft=this.shadowCameraLeft,r.shadowCameraRight=this.shadowCameraRight,r.shadowCameraTop=this.shadowCameraTop,r.shadowCameraBottom=this.shadowCameraBottom,r.shadowCameraVisible=this.shadowCameraVisible,r.shadowBias=this.shadowBias,r.shadowDarkness=this.shadowDarkness,r.shadowMapWidth=this.shadowMapWidth,r.shadowMapHeight=this.shadowMapHeight,r.shadowCascade=this.shadowCascade,r.shadowCascadeOffset.copy(this.shadowCascadeOffset),r.shadowCascadeCount=this.shadowCascadeCount,r.shadowCascadeBias=this.shadowCascadeBias.slice(0),r.shadowCascadeWidth=this.shadowCascadeWidth.slice(0),r.shadowCascadeHeight=this.shadowCascadeHeight.slice(0),r.shadowCascadeNearZ=this.shadowCascadeNearZ.slice(0),r.shadowCascadeFarZ=this.shadowCascadeFarZ.slice(0),r},i.HemisphereLight=function(r,e,o){i.Light.call(this,r),this.type="HemisphereLight",this.position.set(0,100,0),this.groundColor=new i.Color(e),this.intensity=o!==void 0?o:1},i.HemisphereLight.prototype=Object.create(i.Light.prototype),i.HemisphereLight.prototype.constructor=i.HemisphereLight,i.HemisphereLight.prototype.clone=function(){var r=new i.HemisphereLight;return i.Light.prototype.clone.call(this,r),r.groundColor.copy(this.groundColor),r.intensity=this.intensity,r},i.PointLight=function(r,e,o,s){i.Light.call(this,r),this.type="PointLight",this.intensity=e!==void 0?e:1,this.distance=o!==void 0?o:0,this.decay=s!==void 0?s:1},i.PointLight.prototype=Object.create(i.Light.prototype),i.PointLight.prototype.constructor=i.PointLight,i.PointLight.prototype.clone=function(){var r=new i.PointLight;return i.Light.prototype.clone.call(this,r),r.intensity=this.intensity,r.distance=this.distance,r.decay=this.decay,r},i.SpotLight=function(r,e,o,s,d,p){i.Light.call(this,r),this.type="SpotLight",this.position.set(0,1,0),this.target=new i.Object3D,this.intensity=e!==void 0?e:1,this.distance=o!==void 0?o:0,this.angle=s!==void 0?s:Math.PI/3,this.exponent=d!==void 0?d:10,this.decay=p!==void 0?p:1,this.castShadow=!1,this.onlyShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraFov=50,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapWidth=512,this.shadowMapHeight=512,this.shadowMap=null,this.shadowMapSize=null,this.shadowCamera=null,this.shadowMatrix=null},i.SpotLight.prototype=Object.create(i.Light.prototype),i.SpotLight.prototype.constructor=i.SpotLight,i.SpotLight.prototype.clone=function(){var r=new i.SpotLight;return i.Light.prototype.clone.call(this,r),r.target=this.target.clone(),r.intensity=this.intensity,r.distance=this.distance,r.angle=this.angle,r.exponent=this.exponent,r.decay=this.decay,r.castShadow=this.castShadow,r.onlyShadow=this.onlyShadow,r.shadowCameraNear=this.shadowCameraNear,r.shadowCameraFar=this.shadowCameraFar,r.shadowCameraFov=this.shadowCameraFov,r.shadowCameraVisible=this.shadowCameraVisible,r.shadowBias=this.shadowBias,r.shadowDarkness=this.shadowDarkness,r.shadowMapWidth=this.shadowMapWidth,r.shadowMapHeight=this.shadowMapHeight,r},i.Cache={files:{},add:function(r,e){this.files[r]=e},get:function(r){return this.files[r]},remove:function(r){delete this.files[r]},clear:function(){this.files={}}},i.Loader=function(r){this.showStatus=r,this.statusDomElement=r?i.Loader.prototype.addStatusElement():null,this.imageLoader=new i.ImageLoader,this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}},i.Loader.prototype={constructor:i.Loader,crossOrigin:void 0,addStatusElement:function(){var r=document.createElement("div");return r.style.position="absolute",r.style.right="0px",r.style.top="0px",r.style.fontSize="0.8em",r.style.textAlign="left",r.style.background="rgba(0,0,0,0.25)",r.style.color="#fff",r.style.width="120px",r.style.padding="0.5em 0.5em 0.5em 0.5em",r.style.zIndex=1e3,r.innerHTML="Loading ...",r},updateProgress:function(r){var e="Loaded ";r.total?e+=(100*r.loaded/r.total).toFixed(0)+"%":e+=(r.loaded/1024).toFixed(2)+" KB",this.statusDomElement.innerHTML=e},extractUrlBase:function(r){var e=r.split("/");return e.length===1?"./":(e.pop(),e.join("/")+"/")},initMaterials:function(r,e){for(var o=[],s=0;s<r.length;++s)o[s]=this.createMaterial(r[s],e);return o},needsTangents:function(r){for(var e=0,o=r.length;e<o;e++){var s=r[e];if(s instanceof i.ShaderMaterial)return!0}return!1},createMaterial:function(r,e){var o=this;function s(c){var h=Math.log(c)/Math.LN2;return Math.pow(2,Math.round(h))}function d(c,h,f,m,b,w,C){var E=e+f,S,M=i.Loader.Handlers.get(E);if(M!==null?S=M.load(E):(S=new i.Texture,M=o.imageLoader,M.crossOrigin=o.crossOrigin,M.load(E,function(R){if(i.Math.isPowerOfTwo(R.width)===!1||i.Math.isPowerOfTwo(R.height)===!1){var D=s(R.width),N=s(R.height),I=document.createElement("canvas");I.width=D,I.height=N;var L=I.getContext("2d");L.drawImage(R,0,0,D,N),S.image=I}else S.image=R;S.needsUpdate=!0})),S.sourceFile=f,m&&(S.repeat.set(m[0],m[1]),m[0]!==1&&(S.wrapS=i.RepeatWrapping),m[1]!==1&&(S.wrapT=i.RepeatWrapping)),b&&S.offset.set(b[0],b[1]),w){var A={repeat:i.RepeatWrapping,mirror:i.MirroredRepeatWrapping};A[w[0]]!==void 0&&(S.wrapS=A[w[0]]),A[w[1]]!==void 0&&(S.wrapT=A[w[1]])}C&&(S.anisotropy=C),c[h]=S}function p(c){return(c[0]*255<<16)+(c[1]*255<<8)+c[2]*255}var x="MeshLambertMaterial",l={color:15658734,opacity:1,map:null,lightMap:null,normalMap:null,bumpMap:null,wireframe:!1};if(r.shading){var _=r.shading.toLowerCase();_==="phong"?x="MeshPhongMaterial":_==="basic"&&(x="MeshBasicMaterial")}r.blending!==void 0&&i[r.blending]!==void 0&&(l.blending=i[r.blending]),r.transparent!==void 0&&(l.transparent=r.transparent),r.opacity!==void 0&&r.opacity<1&&(l.transparent=!0),r.depthTest!==void 0&&(l.depthTest=r.depthTest),r.depthWrite!==void 0&&(l.depthWrite=r.depthWrite),r.visible!==void 0&&(l.visible=r.visible),r.flipSided!==void 0&&(l.side=i.BackSide),r.doubleSided!==void 0&&(l.side=i.DoubleSide),r.wireframe!==void 0&&(l.wireframe=r.wireframe),r.vertexColors!==void 0&&(r.vertexColors==="face"?l.vertexColors=i.FaceColors:r.vertexColors&&(l.vertexColors=i.VertexColors)),r.colorDiffuse?l.color=p(r.colorDiffuse):r.DbgColor&&(l.color=r.DbgColor),r.colorSpecular&&(l.specular=p(r.colorSpecular)),r.colorEmissive&&(l.emissive=p(r.colorEmissive)),r.transparency!==void 0&&(console.warn("THREE.Loader: transparency has been renamed to opacity"),r.opacity=r.transparency),r.opacity!==void 0&&(l.opacity=r.opacity),r.specularCoef&&(l.shininess=r.specularCoef),r.mapDiffuse&&e&&d(l,"map",r.mapDiffuse,r.mapDiffuseRepeat,r.mapDiffuseOffset,r.mapDiffuseWrap,r.mapDiffuseAnisotropy),r.mapLight&&e&&d(l,"lightMap",r.mapLight,r.mapLightRepeat,r.mapLightOffset,r.mapLightWrap,r.mapLightAnisotropy),r.mapBump&&e&&d(l,"bumpMap",r.mapBump,r.mapBumpRepeat,r.mapBumpOffset,r.mapBumpWrap,r.mapBumpAnisotropy),r.mapNormal&&e&&d(l,"normalMap",r.mapNormal,r.mapNormalRepeat,r.mapNormalOffset,r.mapNormalWrap,r.mapNormalAnisotropy),r.mapSpecular&&e&&d(l,"specularMap",r.mapSpecular,r.mapSpecularRepeat,r.mapSpecularOffset,r.mapSpecularWrap,r.mapSpecularAnisotropy),r.mapAlpha&&e&&d(l,"alphaMap",r.mapAlpha,r.mapAlphaRepeat,r.mapAlphaOffset,r.mapAlphaWrap,r.mapAlphaAnisotropy),r.mapBumpScale&&(l.bumpScale=r.mapBumpScale),r.mapNormalFactor&&(l.normalScale=new i.Vector2(r.mapNormalFactor,r.mapNormalFactor));var v=new i[x](l);return r.DbgName!==void 0&&(v.name=r.DbgName),v}},i.Loader.Handlers={handlers:[],add:function(r,e){this.handlers.push(r,e)},get:function(r){for(var e=0,o=this.handlers.length;e<o;e+=2){var s=this.handlers[e],d=this.handlers[e+1];if(s.test(r))return d}return null}},i.XHRLoader=function(r){this.manager=r!==void 0?r:i.DefaultLoadingManager},i.XHRLoader.prototype={constructor:i.XHRLoader,load:function(r,e,o,s){var d=this,p=i.Cache.get(r);if(p!==void 0){e&&e(p);return}var x=new XMLHttpRequest;x.open("GET",r,!0),x.addEventListener("load",function(l){i.Cache.add(r,this.response),e&&e(this.response),d.manager.itemEnd(r)},!1),o!==void 0&&x.addEventListener("progress",function(l){o(l)},!1),s!==void 0&&x.addEventListener("error",function(l){s(l)},!1),this.crossOrigin!==void 0&&(x.crossOrigin=this.crossOrigin),this.responseType!==void 0&&(x.responseType=this.responseType),x.send(null),d.manager.itemStart(r)},setResponseType:function(r){this.responseType=r},setCrossOrigin:function(r){this.crossOrigin=r}},i.ImageLoader=function(r){this.manager=r!==void 0?r:i.DefaultLoadingManager},i.ImageLoader.prototype={constructor:i.ImageLoader,load:function(r,e,o,s){var d=this,p=i.Cache.get(r);if(p!==void 0){e(p);return}var x=document.createElement("img");return x.addEventListener("load",function(l){i.Cache.add(r,this),e&&e(this),d.manager.itemEnd(r)},!1),o!==void 0&&x.addEventListener("progress",function(l){o(l)},!1),s!==void 0&&x.addEventListener("error",function(l){s(l)},!1),this.crossOrigin!==void 0&&(x.crossOrigin=this.crossOrigin),x.src=r,d.manager.itemStart(r),x},setCrossOrigin:function(r){this.crossOrigin=r}},i.JSONLoader=function(r){i.Loader.call(this,r),this.withCredentials=!1},i.JSONLoader.prototype=Object.create(i.Loader.prototype),i.JSONLoader.prototype.constructor=i.JSONLoader,i.JSONLoader.prototype.load=function(r,e,o){o=o&&typeof o=="string"?o:this.extractUrlBase(r),this.onLoadStart(),this.loadAjaxJSON(this,r,e,o)},i.JSONLoader.prototype.loadAjaxJSON=function(r,e,o,s,d){var p=new XMLHttpRequest,x=0;p.onreadystatechange=function(){if(p.readyState===p.DONE)if(p.status===200||p.status===0){if(p.responseText){var l=JSON.parse(p.responseText),_=l.metadata;if(_!==void 0){if(_.type==="object"){i.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.");return}if(_.type==="scene"){i.error("THREE.JSONLoader: "+e+" seems to be a Scene. Use THREE.SceneLoader instead.");return}}var v=r.parse(l,s);o(v.geometry,v.materials)}else i.error("THREE.JSONLoader: "+e+" seems to be unreachable or the file is empty.");r.onLoadComplete()}else i.error("THREE.JSONLoader: Couldn't load "+e+" ("+p.status+")");else p.readyState===p.LOADING?d&&(x===0&&(x=p.getResponseHeader("Content-Length")),d({total:x,loaded:p.responseText.length})):p.readyState===p.HEADERS_RECEIVED&&d!==void 0&&(x=p.getResponseHeader("Content-Length"))},p.open("GET",e,!0),p.withCredentials=this.withCredentials,p.send(null)},i.JSONLoader.prototype.parse=function(r,e){var o=new i.Geometry,s=r.scale!==void 0?1/r.scale:1;d(s),p(),x(s),o.computeFaceNormals(),o.computeBoundingSphere();function d(_){function v(be,Ee){return be&1<<Ee}var c,h,f,m,b,w,C,E,S,M,A,R,D,N,I,L,Y,J,ie,K,Q,ne,ue,fe,ge,ye,pe,de=r.faces,he=r.vertices,_e=r.normals,ve=r.colors,Z=0;if(r.uvs!==void 0){for(c=0;c<r.uvs.length;c++)r.uvs[c].length&&Z++;for(c=0;c<Z;c++)o.faceVertexUvs[c]=[]}for(m=0,b=he.length;m<b;)J=new i.Vector3,J.x=he[m++]*_,J.y=he[m++]*_,J.z=he[m++]*_,o.vertices.push(J);for(m=0,b=de.length;m<b;)if(M=de[m++],A=v(M,0),R=v(M,1),D=v(M,3),N=v(M,4),I=v(M,5),L=v(M,6),Y=v(M,7),A){if(K=new i.Face3,K.a=de[m],K.b=de[m+1],K.c=de[m+3],Q=new i.Face3,Q.a=de[m+1],Q.b=de[m+2],Q.c=de[m+3],m+=4,R&&(S=de[m++],K.materialIndex=S,Q.materialIndex=S),f=o.faces.length,D)for(c=0;c<Z;c++)for(fe=r.uvs[c],o.faceVertexUvs[c][f]=[],o.faceVertexUvs[c][f+1]=[],h=0;h<4;h++)E=de[m++],ye=fe[E*2],pe=fe[E*2+1],ge=new i.Vector2(ye,pe),h!==2&&o.faceVertexUvs[c][f].push(ge),h!==0&&o.faceVertexUvs[c][f+1].push(ge);if(N&&(C=de[m++]*3,K.normal.set(_e[C++],_e[C++],_e[C]),Q.normal.copy(K.normal)),I)for(c=0;c<4;c++)C=de[m++]*3,ue=new i.Vector3(_e[C++],_e[C++],_e[C]),c!==2&&K.vertexNormals.push(ue),c!==0&&Q.vertexNormals.push(ue);if(L&&(w=de[m++],ne=ve[w],K.color.setHex(ne),Q.color.setHex(ne)),Y)for(c=0;c<4;c++)w=de[m++],ne=ve[w],c!==2&&K.vertexColors.push(new i.Color(ne)),c!==0&&Q.vertexColors.push(new i.Color(ne));o.faces.push(K),o.faces.push(Q)}else{if(ie=new i.Face3,ie.a=de[m++],ie.b=de[m++],ie.c=de[m++],R&&(S=de[m++],ie.materialIndex=S),f=o.faces.length,D)for(c=0;c<Z;c++)for(fe=r.uvs[c],o.faceVertexUvs[c][f]=[],h=0;h<3;h++)E=de[m++],ye=fe[E*2],pe=fe[E*2+1],ge=new i.Vector2(ye,pe),o.faceVertexUvs[c][f].push(ge);if(N&&(C=de[m++]*3,ie.normal.set(_e[C++],_e[C++],_e[C])),I)for(c=0;c<3;c++)C=de[m++]*3,ue=new i.Vector3(_e[C++],_e[C++],_e[C]),ie.vertexNormals.push(ue);if(L&&(w=de[m++],ie.color.setHex(ve[w])),Y)for(c=0;c<3;c++)w=de[m++],ie.vertexColors.push(new i.Color(ve[w]));o.faces.push(ie)}}function p(){var _=r.influencesPerVertex!==void 0?r.influencesPerVertex:2;if(r.skinWeights)for(var v=0,c=r.skinWeights.length;v<c;v+=_){var h=r.skinWeights[v],f=_>1?r.skinWeights[v+1]:0,m=_>2?r.skinWeights[v+2]:0,b=_>3?r.skinWeights[v+3]:0;o.skinWeights.push(new i.Vector4(h,f,m,b))}if(r.skinIndices)for(var v=0,c=r.skinIndices.length;v<c;v+=_){var w=r.skinIndices[v],C=_>1?r.skinIndices[v+1]:0,E=_>2?r.skinIndices[v+2]:0,S=_>3?r.skinIndices[v+3]:0;o.skinIndices.push(new i.Vector4(w,C,E,S))}o.bones=r.bones,o.bones&&o.bones.length>0&&(o.skinWeights.length!==o.skinIndices.length||o.skinIndices.length!==o.vertices.length)&&i.warn("THREE.JSONLoader: When skinning, number of vertices ("+o.vertices.length+"), skinIndices ("+o.skinIndices.length+"), and skinWeights ("+o.skinWeights.length+") should match."),o.animation=r.animation,o.animations=r.animations}function x(_){if(r.morphTargets!==void 0){var v,c,h,f,m,b;for(v=0,c=r.morphTargets.length;v<c;v++)for(o.morphTargets[v]={},o.morphTargets[v].name=r.morphTargets[v].name,o.morphTargets[v].vertices=[],m=o.morphTargets[v].vertices,b=r.morphTargets[v].vertices,h=0,f=b.length;h<f;h+=3){var w=new i.Vector3;w.x=b[h]*_,w.y=b[h+1]*_,w.z=b[h+2]*_,m.push(w)}}if(r.morphColors!==void 0){var v,c,C,E,S,M,A;for(v=0,c=r.morphColors.length;v<c;v++)for(o.morphColors[v]={},o.morphColors[v].name=r.morphColors[v].name,o.morphColors[v].colors=[],S=o.morphColors[v].colors,M=r.morphColors[v].colors,C=0,E=M.length;C<E;C+=3)A=new i.Color(16755200),A.setRGB(M[C],M[C+1],M[C+2]),S.push(A)}}if(r.materials===void 0||r.materials.length===0)return{geometry:o};var l=this.initMaterials(r.materials,e);return this.needsTangents(l)&&o.computeTangents(),{geometry:o,materials:l}},i.LoadingManager=function(r,e,o){var s=this,d=0,p=0;this.onLoad=r,this.onProgress=e,this.onError=o,this.itemStart=function(x){p++},this.itemEnd=function(x){d++,s.onProgress!==void 0&&s.onProgress(x,d,p),d===p&&s.onLoad!==void 0&&s.onLoad()}},i.DefaultLoadingManager=new i.LoadingManager,i.BufferGeometryLoader=function(r){this.manager=r!==void 0?r:i.DefaultLoadingManager},i.BufferGeometryLoader.prototype={constructor:i.BufferGeometryLoader,load:function(r,e,o,s){var d=this,p=new i.XHRLoader(d.manager);p.setCrossOrigin(this.crossOrigin),p.load(r,function(x){e(d.parse(JSON.parse(x)))},o,s)},setCrossOrigin:function(r){this.crossOrigin=r},parse:function(r){var e=new i.BufferGeometry,o=r.data.attributes;for(var s in o){var d=o[s],p=new self[d.type](d.array);e.addAttribute(s,new i.BufferAttribute(p,d.itemSize))}var x=r.data.offsets;x!==void 0&&(e.offsets=JSON.parse(JSON.stringify(x)));var l=r.data.boundingSphere;if(l!==void 0){var _=new i.Vector3;l.center!==void 0&&_.fromArray(l.center),e.boundingSphere=new i.Sphere(_,l.radius)}return e}},i.MaterialLoader=function(r){this.manager=r!==void 0?r:i.DefaultLoadingManager},i.MaterialLoader.prototype={constructor:i.MaterialLoader,load:function(r,e,o,s){var d=this,p=new i.XHRLoader(d.manager);p.setCrossOrigin(this.crossOrigin),p.load(r,function(x){e(d.parse(JSON.parse(x)))},o,s)},setCrossOrigin:function(r){this.crossOrigin=r},parse:function(r){var e=new i[r.type];if(r.color!==void 0&&e.color.setHex(r.color),r.emissive!==void 0&&e.emissive.setHex(r.emissive),r.specular!==void 0&&e.specular.setHex(r.specular),r.shininess!==void 0&&(e.shininess=r.shininess),r.uniforms!==void 0&&(e.uniforms=r.uniforms),r.vertexShader!==void 0&&(e.vertexShader=r.vertexShader),r.fragmentShader!==void 0&&(e.fragmentShader=r.fragmentShader),r.vertexColors!==void 0&&(e.vertexColors=r.vertexColors),r.shading!==void 0&&(e.shading=r.shading),r.blending!==void 0&&(e.blending=r.blending),r.side!==void 0&&(e.side=r.side),r.opacity!==void 0&&(e.opacity=r.opacity),r.transparent!==void 0&&(e.transparent=r.transparent),r.wireframe!==void 0&&(e.wireframe=r.wireframe),r.size!==void 0&&(e.size=r.size),r.sizeAttenuation!==void 0&&(e.sizeAttenuation=r.sizeAttenuation),r.materials!==void 0)for(var o=0,s=r.materials.length;o<s;o++)e.materials.push(this.parse(r.materials[o]));return e}},i.ObjectLoader=function(r){this.manager=r!==void 0?r:i.DefaultLoadingManager,this.texturePath=""},i.ObjectLoader.prototype={constructor:i.ObjectLoader,load:function(r,e,o,s){this.texturePath===""&&(this.texturePath=r.substring(0,r.lastIndexOf("/")+1));var d=this,p=new i.XHRLoader(d.manager);p.setCrossOrigin(this.crossOrigin),p.load(r,function(x){d.parse(JSON.parse(x),e)},o,s)},setTexturePath:function(r){this.texturePath=r},setCrossOrigin:function(r){this.crossOrigin=r},parse:function(r,e){var o=this.parseGeometries(r.geometries),s=this.parseImages(r.images,function(){e!==void 0&&e(x)}),d=this.parseTextures(r.textures,s),p=this.parseMaterials(r.materials,d),x=this.parseObject(r.object,o,p);return(r.images===void 0||r.images.length===0)&&e!==void 0&&e(x),x},parseGeometries:function(r){var e={};if(r!==void 0)for(var o=new i.JSONLoader,s=new i.BufferGeometryLoader,d=0,p=r.length;d<p;d++){var x,l=r[d];switch(l.type){case"PlaneGeometry":case"PlaneBufferGeometry":x=new i[l.type](l.width,l.height,l.widthSegments,l.heightSegments);break;case"BoxGeometry":case"CubeGeometry":x=new i.BoxGeometry(l.width,l.height,l.depth,l.widthSegments,l.heightSegments,l.depthSegments);break;case"CircleGeometry":x=new i.CircleGeometry(l.radius,l.segments);break;case"CylinderGeometry":x=new i.CylinderGeometry(l.radiusTop,l.radiusBottom,l.height,l.radialSegments,l.heightSegments,l.openEnded);break;case"SphereGeometry":x=new i.SphereGeometry(l.radius,l.widthSegments,l.heightSegments,l.phiStart,l.phiLength,l.thetaStart,l.thetaLength);break;case"IcosahedronGeometry":x=new i.IcosahedronGeometry(l.radius,l.detail);break;case"TorusGeometry":x=new i.TorusGeometry(l.radius,l.tube,l.radialSegments,l.tubularSegments,l.arc);break;case"TorusKnotGeometry":x=new i.TorusKnotGeometry(l.radius,l.tube,l.radialSegments,l.tubularSegments,l.p,l.q,l.heightScale);break;case"BufferGeometry":x=s.parse(l);break;case"Geometry":x=o.parse(l.data).geometry;break}x.uuid=l.uuid,l.name!==void 0&&(x.name=l.name),e[l.uuid]=x}return e},parseMaterials:function(r,e){var o={};if(r!==void 0)for(var s=function(v){return e[v]===void 0&&i.warn("THREE.ObjectLoader: Undefined texture",v),e[v]},d=new i.MaterialLoader,p=0,x=r.length;p<x;p++){var l=r[p],_=d.parse(l);_.uuid=l.uuid,l.name!==void 0&&(_.name=l.name),l.map!==void 0&&(_.map=s(l.map)),l.bumpMap!==void 0&&(_.bumpMap=s(l.bumpMap),l.bumpScale&&(_.bumpScale=new i.Vector2(l.bumpScale,l.bumpScale))),l.alphaMap!==void 0&&(_.alphaMap=s(l.alphaMap)),l.envMap!==void 0&&(_.envMap=s(l.envMap)),l.normalMap!==void 0&&(_.normalMap=s(l.normalMap),l.normalScale&&(_.normalScale=new i.Vector2(l.normalScale,l.normalScale))),l.lightMap!==void 0&&(_.lightMap=s(l.lightMap)),l.specularMap!==void 0&&(_.specularMap=s(l.specularMap)),o[l.uuid]=_}return o},parseImages:function(r,e){var o=this,s={};if(r!==void 0&&r.length>0){var d=new i.LoadingManager(e),p=new i.ImageLoader(d);p.setCrossOrigin(this.crossOrigin);for(var x=function(h){return o.manager.itemStart(h),p.load(h,function(){o.manager.itemEnd(h)})},l=0,_=r.length;l<_;l++){var v=r[l],c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(v.url)?v.url:o.texturePath+v.url;s[v.uuid]=x(c)}}return s},parseTextures:function(r,e){var o={};if(r!==void 0)for(var s=0,d=r.length;s<d;s++){var p=r[s];p.image===void 0&&i.warn('THREE.ObjectLoader: No "image" speficied for',p.uuid),e[p.image]===void 0&&i.warn("THREE.ObjectLoader: Undefined image",p.image);var x=new i.Texture(e[p.image]);x.needsUpdate=!0,x.uuid=p.uuid,p.name!==void 0&&(x.name=p.name),p.repeat!==void 0&&(x.repeat=new i.Vector2(p.repeat[0],p.repeat[1])),p.minFilter!==void 0&&(x.minFilter=i[p.minFilter]),p.magFilter!==void 0&&(x.magFilter=i[p.magFilter]),p.anisotropy!==void 0&&(x.anisotropy=p.anisotropy),p.wrap instanceof Array&&(x.wrapS=i[p.wrap[0]],x.wrapT=i[p.wrap[1]]),o[p.uuid]=x}return o},parseObject:function(){var r=new i.Matrix4;return function(e,o,s){var d,p=function(_){return o[_]===void 0&&i.warn("THREE.ObjectLoader: Undefined geometry",_),o[_]},x=function(_){return s[_]===void 0&&i.warn("THREE.ObjectLoader: Undefined material",_),s[_]};switch(e.type){case"Scene":d=new i.Scene;break;case"PerspectiveCamera":d=new i.PerspectiveCamera(e.fov,e.aspect,e.near,e.far);break;case"OrthographicCamera":d=new i.OrthographicCamera(e.left,e.right,e.top,e.bottom,e.near,e.far);break;case"AmbientLight":d=new i.AmbientLight(e.color);break;case"DirectionalLight":d=new i.DirectionalLight(e.color,e.intensity);break;case"PointLight":d=new i.PointLight(e.color,e.intensity,e.distance,e.decay);break;case"SpotLight":d=new i.SpotLight(e.color,e.intensity,e.distance,e.angle,e.exponent,e.decay);break;case"HemisphereLight":d=new i.HemisphereLight(e.color,e.groundColor,e.intensity);break;case"Mesh":d=new i.Mesh(p(e.geometry),x(e.material));break;case"Line":d=new i.Line(p(e.geometry),x(e.material),e.mode);break;case"PointCloud":d=new i.PointCloud(p(e.geometry),x(e.material));break;case"Sprite":d=new i.Sprite(x(e.material));break;case"Group":d=new i.Group;break;default:d=new i.Object3D}if(d.uuid=e.uuid,e.name!==void 0&&(d.name=e.name),e.matrix!==void 0?(r.fromArray(e.matrix),r.decompose(d.position,d.quaternion,d.scale)):(e.position!==void 0&&d.position.fromArray(e.position),e.rotation!==void 0&&d.rotation.fromArray(e.rotation),e.scale!==void 0&&d.scale.fromArray(e.scale)),e.visible!==void 0&&(d.visible=e.visible),e.userData!==void 0&&(d.userData=e.userData),e.children!==void 0)for(var l in e.children)d.add(this.parseObject(e.children[l],o,s));return d}}()},i.TextureLoader=function(r){this.manager=r!==void 0?r:i.DefaultLoadingManager},i.TextureLoader.prototype={constructor:i.TextureLoader,load:function(r,e,o,s){var d=this,p=new i.ImageLoader(d.manager);p.setCrossOrigin(this.crossOrigin),p.load(r,function(x){var l=new i.Texture(x);l.needsUpdate=!0,e!==void 0&&e(l)},o,s)},setCrossOrigin:function(r){this.crossOrigin=r}},i.DataTextureLoader=i.BinaryTextureLoader=function(){this._parser=null},i.BinaryTextureLoader.prototype={constructor:i.BinaryTextureLoader,load:function(r,e,o,s){var d=this,p=new i.DataTexture,x=new i.XHRLoader;return x.setResponseType("arraybuffer"),x.load(r,function(l){var _=d._parser(l);_&&(_.image!==void 0?p.image=_.image:_.data!==void 0&&(p.image.width=_.width,p.image.height=_.height,p.image.data=_.data),p.wrapS=_.wrapS!==void 0?_.wrapS:i.ClampToEdgeWrapping,p.wrapT=_.wrapT!==void 0?_.wrapT:i.ClampToEdgeWrapping,p.magFilter=_.magFilter!==void 0?_.magFilter:i.LinearFilter,p.minFilter=_.minFilter!==void 0?_.minFilter:i.LinearMipMapLinearFilter,p.anisotropy=_.anisotropy!==void 0?_.anisotropy:1,_.format!==void 0&&(p.format=_.format),_.type!==void 0&&(p.type=_.type),_.mipmaps!==void 0&&(p.mipmaps=_.mipmaps),_.mipmapCount===1&&(p.minFilter=i.LinearFilter),p.needsUpdate=!0,e&&e(p,_))},o,s),p}},i.CompressedTextureLoader=function(){this._parser=null},i.CompressedTextureLoader.prototype={constructor:i.CompressedTextureLoader,load:function(r,e,o){var s=this,d=[],p=new i.CompressedTexture;p.image=d;var x=new i.XHRLoader;if(x.setResponseType("arraybuffer"),r instanceof Array)for(var l=0,_=function(h){x.load(r[h],function(f){var m=s._parser(f,!0);d[h]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},l+=1,l===6&&(m.mipmapCount==1&&(p.minFilter=i.LinearFilter),p.format=m.format,p.needsUpdate=!0,e&&e(p))})},v=0,c=r.length;v<c;++v)_(v);else x.load(r,function(h){var f=s._parser(h,!0);if(f.isCubemap)for(var m=f.mipmaps.length/f.mipmapCount,b=0;b<m;b++){d[b]={mipmaps:[]};for(var w=0;w<f.mipmapCount;w++)d[b].mipmaps.push(f.mipmaps[b*f.mipmapCount+w]),d[b].format=f.format,d[b].width=f.width,d[b].height=f.height}else p.image.width=f.width,p.image.height=f.height,p.mipmaps=f.mipmaps;f.mipmapCount===1&&(p.minFilter=i.LinearFilter),p.format=f.format,p.needsUpdate=!0,e&&e(p)});return p}},i.Material=function(){Object.defineProperty(this,"id",{value:i.MaterialIdCount++}),this.uuid=i.Math.generateUUID(),this.name="",this.type="Material",this.side=i.FrontSide,this.opacity=1,this.transparent=!1,this.blending=i.NormalBlending,this.blendSrc=i.SrcAlphaFactor,this.blendDst=i.OneMinusSrcAlphaFactor,this.blendEquation=i.AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthTest=!0,this.depthWrite=!0,this.colorWrite=!0,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.overdraw=0,this.visible=!0,this._needsUpdate=!0},i.Material.prototype={constructor:i.Material,get needsUpdate(){return this._needsUpdate},set needsUpdate(r){r===!0&&this.update(),this._needsUpdate=r},setValues:function(r){if(r!==void 0)for(var e in r){var o=r[e];if(o===void 0){i.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if(e in this){var s=this[e];s instanceof i.Color?s.set(o):s instanceof i.Vector3&&o instanceof i.Vector3?s.copy(o):e=="overdraw"?this[e]=Number(o):this[e]=o}}},toJSON:function(){var r={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type};return this.name!==""&&(r.name=this.name),this instanceof i.MeshBasicMaterial?(r.color=this.color.getHex(),this.vertexColors!==i.NoColors&&(r.vertexColors=this.vertexColors),this.blending!==i.NormalBlending&&(r.blending=this.blending),this.side!==i.FrontSide&&(r.side=this.side)):this instanceof i.MeshLambertMaterial?(r.color=this.color.getHex(),r.emissive=this.emissive.getHex(),this.vertexColors!==i.NoColors&&(r.vertexColors=this.vertexColors),this.shading!==i.SmoothShading&&(r.shading=this.shading),this.blending!==i.NormalBlending&&(r.blending=this.blending),this.side!==i.FrontSide&&(r.side=this.side)):this instanceof i.MeshPhongMaterial?(r.color=this.color.getHex(),r.emissive=this.emissive.getHex(),r.specular=this.specular.getHex(),r.shininess=this.shininess,this.vertexColors!==i.NoColors&&(r.vertexColors=this.vertexColors),this.shading!==i.SmoothShading&&(r.shading=this.shading),this.blending!==i.NormalBlending&&(r.blending=this.blending),this.side!==i.FrontSide&&(r.side=this.side)):this instanceof i.MeshNormalMaterial?(this.blending!==i.NormalBlending&&(r.blending=this.blending),this.side!==i.FrontSide&&(r.side=this.side)):this instanceof i.MeshDepthMaterial?(this.blending!==i.NormalBlending&&(r.blending=this.blending),this.side!==i.FrontSide&&(r.side=this.side)):this instanceof i.PointCloudMaterial?(r.size=this.size,r.sizeAttenuation=this.sizeAttenuation,r.color=this.color.getHex(),this.vertexColors!==i.NoColors&&(r.vertexColors=this.vertexColors),this.blending!==i.NormalBlending&&(r.blending=this.blending)):this instanceof i.ShaderMaterial?(r.uniforms=this.uniforms,r.vertexShader=this.vertexShader,r.fragmentShader=this.fragmentShader):this instanceof i.SpriteMaterial&&(r.color=this.color.getHex()),this.opacity<1&&(r.opacity=this.opacity),this.transparent!==!1&&(r.transparent=this.transparent),this.wireframe!==!1&&(r.wireframe=this.wireframe),r},clone:function(r){return r===void 0&&(r=new i.Material),r.name=this.name,r.side=this.side,r.opacity=this.opacity,r.transparent=this.transparent,r.blending=this.blending,r.blendSrc=this.blendSrc,r.blendDst=this.blendDst,r.blendEquation=this.blendEquation,r.blendSrcAlpha=this.blendSrcAlpha,r.blendDstAlpha=this.blendDstAlpha,r.blendEquationAlpha=this.blendEquationAlpha,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.polygonOffset=this.polygonOffset,r.polygonOffsetFactor=this.polygonOffsetFactor,r.polygonOffsetUnits=this.polygonOffsetUnits,r.alphaTest=this.alphaTest,r.overdraw=this.overdraw,r.visible=this.visible,r},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},i.EventDispatcher.prototype.apply(i.Material.prototype),i.MaterialIdCount=0,i.LineBasicMaterial=function(r){i.Material.call(this),this.type="LineBasicMaterial",this.color=new i.Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.vertexColors=i.NoColors,this.fog=!0,this.setValues(r)},i.LineBasicMaterial.prototype=Object.create(i.Material.prototype),i.LineBasicMaterial.prototype.constructor=i.LineBasicMaterial,i.LineBasicMaterial.prototype.clone=function(){var r=new i.LineBasicMaterial;return i.Material.prototype.clone.call(this,r),r.color.copy(this.color),r.linewidth=this.linewidth,r.linecap=this.linecap,r.linejoin=this.linejoin,r.vertexColors=this.vertexColors,r.fog=this.fog,r},i.LineDashedMaterial=function(r){i.Material.call(this),this.type="LineDashedMaterial",this.color=new i.Color(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.vertexColors=!1,this.fog=!0,this.setValues(r)},i.LineDashedMaterial.prototype=Object.create(i.Material.prototype),i.LineDashedMaterial.prototype.constructor=i.LineDashedMaterial,i.LineDashedMaterial.prototype.clone=function(){var r=new i.LineDashedMaterial;return i.Material.prototype.clone.call(this,r),r.color.copy(this.color),r.linewidth=this.linewidth,r.scale=this.scale,r.dashSize=this.dashSize,r.gapSize=this.gapSize,r.vertexColors=this.vertexColors,r.fog=this.fog,r},i.MeshBasicMaterial=function(r){i.Material.call(this),this.type="MeshBasicMaterial",this.color=new i.Color(16777215),this.map=null,this.lightMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=i.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=i.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=i.NoColors,this.skinning=!1,this.morphTargets=!1,this.setValues(r)},i.MeshBasicMaterial.prototype=Object.create(i.Material.prototype),i.MeshBasicMaterial.prototype.constructor=i.MeshBasicMaterial,i.MeshBasicMaterial.prototype.clone=function(){var r=new i.MeshBasicMaterial;return i.Material.prototype.clone.call(this,r),r.color.copy(this.color),r.map=this.map,r.lightMap=this.lightMap,r.specularMap=this.specularMap,r.alphaMap=this.alphaMap,r.envMap=this.envMap,r.combine=this.combine,r.reflectivity=this.reflectivity,r.refractionRatio=this.refractionRatio,r.fog=this.fog,r.shading=this.shading,r.wireframe=this.wireframe,r.wireframeLinewidth=this.wireframeLinewidth,r.wireframeLinecap=this.wireframeLinecap,r.wireframeLinejoin=this.wireframeLinejoin,r.vertexColors=this.vertexColors,r.skinning=this.skinning,r.morphTargets=this.morphTargets,r},i.MeshLambertMaterial=function(r){i.Material.call(this),this.type="MeshLambertMaterial",this.color=new i.Color(16777215),this.emissive=new i.Color(0),this.wrapAround=!1,this.wrapRGB=new i.Vector3(1,1,1),this.map=null,this.lightMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=i.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=i.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=i.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(r)},i.MeshLambertMaterial.prototype=Object.create(i.Material.prototype),i.MeshLambertMaterial.prototype.constructor=i.MeshLambertMaterial,i.MeshLambertMaterial.prototype.clone=function(){var r=new i.MeshLambertMaterial;return i.Material.prototype.clone.call(this,r),r.color.copy(this.color),r.emissive.copy(this.emissive),r.wrapAround=this.wrapAround,r.wrapRGB.copy(this.wrapRGB),r.map=this.map,r.lightMap=this.lightMap,r.specularMap=this.specularMap,r.alphaMap=this.alphaMap,r.envMap=this.envMap,r.combine=this.combine,r.reflectivity=this.reflectivity,r.refractionRatio=this.refractionRatio,r.fog=this.fog,r.shading=this.shading,r.wireframe=this.wireframe,r.wireframeLinewidth=this.wireframeLinewidth,r.wireframeLinecap=this.wireframeLinecap,r.wireframeLinejoin=this.wireframeLinejoin,r.vertexColors=this.vertexColors,r.skinning=this.skinning,r.morphTargets=this.morphTargets,r.morphNormals=this.morphNormals,r},i.MeshPhongMaterial=function(r){i.Material.call(this),this.type="MeshPhongMaterial",this.color=new i.Color(16777215),this.emissive=new i.Color(0),this.specular=new i.Color(1118481),this.shininess=30,this.metal=!1,this.wrapAround=!1,this.wrapRGB=new i.Vector3(1,1,1),this.map=null,this.lightMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new i.Vector2(1,1),this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=i.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=i.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=i.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(r)},i.MeshPhongMaterial.prototype=Object.create(i.Material.prototype),i.MeshPhongMaterial.prototype.constructor=i.MeshPhongMaterial,i.MeshPhongMaterial.prototype.clone=function(){var r=new i.MeshPhongMaterial;return i.Material.prototype.clone.call(this,r),r.color.copy(this.color),r.emissive.copy(this.emissive),r.specular.copy(this.specular),r.shininess=this.shininess,r.metal=this.metal,r.wrapAround=this.wrapAround,r.wrapRGB.copy(this.wrapRGB),r.map=this.map,r.lightMap=this.lightMap,r.bumpMap=this.bumpMap,r.bumpScale=this.bumpScale,r.normalMap=this.normalMap,r.normalScale.copy(this.normalScale),r.specularMap=this.specularMap,r.alphaMap=this.alphaMap,r.envMap=this.envMap,r.combine=this.combine,r.reflectivity=this.reflectivity,r.refractionRatio=this.refractionRatio,r.fog=this.fog,r.shading=this.shading,r.wireframe=this.wireframe,r.wireframeLinewidth=this.wireframeLinewidth,r.wireframeLinecap=this.wireframeLinecap,r.wireframeLinejoin=this.wireframeLinejoin,r.vertexColors=this.vertexColors,r.skinning=this.skinning,r.morphTargets=this.morphTargets,r.morphNormals=this.morphNormals,r},i.MeshDepthMaterial=function(r){i.Material.call(this),this.type="MeshDepthMaterial",this.morphTargets=!1,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(r)},i.MeshDepthMaterial.prototype=Object.create(i.Material.prototype),i.MeshDepthMaterial.prototype.constructor=i.MeshDepthMaterial,i.MeshDepthMaterial.prototype.clone=function(){var r=new i.MeshDepthMaterial;return i.Material.prototype.clone.call(this,r),r.wireframe=this.wireframe,r.wireframeLinewidth=this.wireframeLinewidth,r},i.MeshNormalMaterial=function(r){i.Material.call(this,r),this.type="MeshNormalMaterial",this.wireframe=!1,this.wireframeLinewidth=1,this.morphTargets=!1,this.setValues(r)},i.MeshNormalMaterial.prototype=Object.create(i.Material.prototype),i.MeshNormalMaterial.prototype.constructor=i.MeshNormalMaterial,i.MeshNormalMaterial.prototype.clone=function(){var r=new i.MeshNormalMaterial;return i.Material.prototype.clone.call(this,r),r.wireframe=this.wireframe,r.wireframeLinewidth=this.wireframeLinewidth,r},i.MeshFaceMaterial=function(r){this.uuid=i.Math.generateUUID(),this.type="MeshFaceMaterial",this.materials=r instanceof Array?r:[]},i.MeshFaceMaterial.prototype={constructor:i.MeshFaceMaterial,toJSON:function(){for(var r={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},e=0,o=this.materials.length;e<o;e++)r.materials.push(this.materials[e].toJSON());return r},clone:function(){for(var r=new i.MeshFaceMaterial,e=0;e<this.materials.length;e++)r.materials.push(this.materials[e].clone());return r}},i.PointCloudMaterial=function(r){i.Material.call(this),this.type="PointCloudMaterial",this.color=new i.Color(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.vertexColors=i.NoColors,this.fog=!0,this.setValues(r)},i.PointCloudMaterial.prototype=Object.create(i.Material.prototype),i.PointCloudMaterial.prototype.constructor=i.PointCloudMaterial,i.PointCloudMaterial.prototype.clone=function(){var r=new i.PointCloudMaterial;return i.Material.prototype.clone.call(this,r),r.color.copy(this.color),r.map=this.map,r.size=this.size,r.sizeAttenuation=this.sizeAttenuation,r.vertexColors=this.vertexColors,r.fog=this.fog,r},i.ParticleBasicMaterial=function(r){return i.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointCloudMaterial."),new i.PointCloudMaterial(r)},i.ParticleSystemMaterial=function(r){return i.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointCloudMaterial."),new i.PointCloudMaterial(r)},i.ShaderMaterial=function(r){i.Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.attributes=null,this.vertexShader=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,this.fragmentShader=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,this.shading=i.SmoothShading,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.vertexColors=i.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.setValues(r)},i.ShaderMaterial.prototype=Object.create(i.Material.prototype),i.ShaderMaterial.prototype.constructor=i.ShaderMaterial,i.ShaderMaterial.prototype.clone=function(){var r=new i.ShaderMaterial;return i.Material.prototype.clone.call(this,r),r.fragmentShader=this.fragmentShader,r.vertexShader=this.vertexShader,r.uniforms=i.UniformsUtils.clone(this.uniforms),r.attributes=this.attributes,r.defines=this.defines,r.shading=this.shading,r.wireframe=this.wireframe,r.wireframeLinewidth=this.wireframeLinewidth,r.fog=this.fog,r.lights=this.lights,r.vertexColors=this.vertexColors,r.skinning=this.skinning,r.morphTargets=this.morphTargets,r.morphNormals=this.morphNormals,r},i.RawShaderMaterial=function(r){i.ShaderMaterial.call(this,r),this.type="RawShaderMaterial"},i.RawShaderMaterial.prototype=Object.create(i.ShaderMaterial.prototype),i.RawShaderMaterial.prototype.constructor=i.RawShaderMaterial,i.RawShaderMaterial.prototype.clone=function(){var r=new i.RawShaderMaterial;return i.ShaderMaterial.prototype.clone.call(this,r),r},i.SpriteMaterial=function(r){i.Material.call(this),this.type="SpriteMaterial",this.color=new i.Color(16777215),this.map=null,this.rotation=0,this.fog=!1,this.setValues(r)},i.SpriteMaterial.prototype=Object.create(i.Material.prototype),i.SpriteMaterial.prototype.constructor=i.SpriteMaterial,i.SpriteMaterial.prototype.clone=function(){var r=new i.SpriteMaterial;return i.Material.prototype.clone.call(this,r),r.color.copy(this.color),r.map=this.map,r.rotation=this.rotation,r.fog=this.fog,r},i.Texture=function(r,e,o,s,d,p,x,l,_){Object.defineProperty(this,"id",{value:i.TextureIdCount++}),this.uuid=i.Math.generateUUID(),this.name="",this.sourceFile="",this.image=r!==void 0?r:i.Texture.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=e!==void 0?e:i.Texture.DEFAULT_MAPPING,this.wrapS=o!==void 0?o:i.ClampToEdgeWrapping,this.wrapT=s!==void 0?s:i.ClampToEdgeWrapping,this.magFilter=d!==void 0?d:i.LinearFilter,this.minFilter=p!==void 0?p:i.LinearMipMapLinearFilter,this.anisotropy=_!==void 0?_:1,this.format=x!==void 0?x:i.RGBAFormat,this.type=l!==void 0?l:i.UnsignedByteType,this.offset=new i.Vector2(0,0),this.repeat=new i.Vector2(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this._needsUpdate=!1,this.onUpdate=null},i.Texture.DEFAULT_IMAGE=void 0,i.Texture.DEFAULT_MAPPING=i.UVMapping,i.Texture.prototype={constructor:i.Texture,get needsUpdate(){return this._needsUpdate},set needsUpdate(r){r===!0&&this.update(),this._needsUpdate=r},clone:function(r){return r===void 0&&(r=new i.Texture),r.image=this.image,r.mipmaps=this.mipmaps.slice(0),r.mapping=this.mapping,r.wrapS=this.wrapS,r.wrapT=this.wrapT,r.magFilter=this.magFilter,r.minFilter=this.minFilter,r.anisotropy=this.anisotropy,r.format=this.format,r.type=this.type,r.offset.copy(this.offset),r.repeat.copy(this.repeat),r.generateMipmaps=this.generateMipmaps,r.premultiplyAlpha=this.premultiplyAlpha,r.flipY=this.flipY,r.unpackAlignment=this.unpackAlignment,r},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},i.EventDispatcher.prototype.apply(i.Texture.prototype),i.TextureIdCount=0,i.CubeTexture=function(r,e,o,s,d,p,x,l,_){e=e!==void 0?e:i.CubeReflectionMapping,i.Texture.call(this,r,e,o,s,d,p,x,l,_),this.images=r},i.CubeTexture.prototype=Object.create(i.Texture.prototype),i.CubeTexture.prototype.constructor=i.CubeTexture,i.CubeTexture.clone=function(r){return r===void 0&&(r=new i.CubeTexture),i.Texture.prototype.clone.call(this,r),r.images=this.images,r},i.CompressedTexture=function(r,e,o,s,d,p,x,l,_,v,c){i.Texture.call(this,null,p,x,l,_,v,s,d,c),this.image={width:e,height:o},this.mipmaps=r,this.flipY=!1,this.generateMipmaps=!1},i.CompressedTexture.prototype=Object.create(i.Texture.prototype),i.CompressedTexture.prototype.constructor=i.CompressedTexture,i.CompressedTexture.prototype.clone=function(){var r=new i.CompressedTexture;return i.Texture.prototype.clone.call(this,r),r},i.DataTexture=function(r,e,o,s,d,p,x,l,_,v,c){i.Texture.call(this,null,p,x,l,_,v,s,d,c),this.image={data:r,width:e,height:o}},i.DataTexture.prototype=Object.create(i.Texture.prototype),i.DataTexture.prototype.constructor=i.DataTexture,i.DataTexture.prototype.clone=function(){var r=new i.DataTexture;return i.Texture.prototype.clone.call(this,r),r},i.VideoTexture=function(r,e,o,s,d,p,x,l,_){i.Texture.call(this,r,e,o,s,d,p,x,l,_),this.generateMipmaps=!1;var v=this,c=function(){requestAnimationFrame(c),r.readyState===r.HAVE_ENOUGH_DATA&&(v.needsUpdate=!0)};c()},i.VideoTexture.prototype=Object.create(i.Texture.prototype),i.VideoTexture.prototype.constructor=i.VideoTexture,i.Group=function(){i.Object3D.call(this),this.type="Group"},i.Group.prototype=Object.create(i.Object3D.prototype),i.Group.prototype.constructor=i.Group,i.PointCloud=function(r,e){i.Object3D.call(this),this.type="PointCloud",this.geometry=r!==void 0?r:new i.Geometry,this.material=e!==void 0?e:new i.PointCloudMaterial({color:Math.random()*16777215})},i.PointCloud.prototype=Object.create(i.Object3D.prototype),i.PointCloud.prototype.constructor=i.PointCloud,i.PointCloud.prototype.raycast=function(){var r=new i.Matrix4,e=new i.Ray;return function(o,s){var d=this,p=d.geometry,x=o.params.PointCloud.threshold;if(r.getInverse(this.matrixWorld),e.copy(o.ray).applyMatrix4(r),!(p.boundingBox!==null&&e.isIntersectionBox(p.boundingBox)===!1)){var l=x/((this.scale.x+this.scale.y+this.scale.z)/3),_=new i.Vector3,v=function(L,Y){var J=e.distanceToPoint(L);if(J<l){var ie=e.closestPointToPoint(L);ie.applyMatrix4(d.matrixWorld);var K=o.ray.origin.distanceTo(ie);s.push({distance:K,distanceToRay:J,point:ie.clone(),index:Y,face:null,object:d})}};if(p instanceof i.BufferGeometry){var c=p.attributes,h=c.position.array;if(c.index!==void 0){var f=c.index.array,m=p.offsets;if(m.length===0){var b={start:0,count:f.length,index:0};m=[b]}for(var w=0,C=m.length;w<C;++w)for(var E=m[w].start,S=m[w].count,M=m[w].index,A=E,R=E+S;A<R;A++){var D=M+f[A];_.fromArray(h,D*3),v(_,D)}}else for(var N=h.length/3,A=0;A<N;A++)_.set(h[3*A],h[3*A+1],h[3*A+2]),v(_,A)}else for(var I=this.geometry.vertices,A=0;A<I.length;A++)v(I[A],A)}}}(),i.PointCloud.prototype.clone=function(r){return r===void 0&&(r=new i.PointCloud(this.geometry,this.material)),i.Object3D.prototype.clone.call(this,r),r},i.ParticleSystem=function(r,e){return i.warn("THREE.ParticleSystem has been renamed to THREE.PointCloud."),new i.PointCloud(r,e)},i.Line=function(r,e,o){i.Object3D.call(this),this.type="Line",this.geometry=r!==void 0?r:new i.Geometry,this.material=e!==void 0?e:new i.LineBasicMaterial({color:Math.random()*16777215}),this.mode=o!==void 0?o:i.LineStrip},i.LineStrip=0,i.LinePieces=1,i.Line.prototype=Object.create(i.Object3D.prototype),i.Line.prototype.constructor=i.Line,i.Line.prototype.raycast=function(){var r=new i.Matrix4,e=new i.Ray,o=new i.Sphere;return function(s,d){var p=s.linePrecision,x=p*p,l=this.geometry;if(l.boundingSphere===null&&l.computeBoundingSphere(),o.copy(l.boundingSphere),o.applyMatrix4(this.matrixWorld),s.ray.isIntersectionSphere(o)!==!1){r.getInverse(this.matrixWorld),e.copy(s.ray).applyMatrix4(r);var _=new i.Vector3,v=new i.Vector3,c=new i.Vector3,h=new i.Vector3,f=this.mode===i.LineStrip?1:2;if(l instanceof i.BufferGeometry){var m=l.attributes;if(m.index!==void 0){var b=m.index.array,w=m.position.array,C=l.offsets;C.length===0&&(C=[{start:0,count:b.length,index:0}]);for(var E=0;E<C.length;E++)for(var S=C[E].start,M=C[E].count,A=C[E].index,R=S;R<S+M-1;R+=f){var D=A+b[R],N=A+b[R+1];_.fromArray(w,D*3),v.fromArray(w,N*3);var I=e.distanceSqToSegment(_,v,h,c);if(!(I>x)){var L=e.origin.distanceTo(h);L<s.near||L>s.far||d.push({distance:L,point:c.clone().applyMatrix4(this.matrixWorld),index:R,offsetIndex:E,face:null,faceIndex:null,object:this})}}}else for(var w=m.position.array,R=0;R<w.length/3-1;R+=f){_.fromArray(w,3*R),v.fromArray(w,3*R+3);var I=e.distanceSqToSegment(_,v,h,c);if(!(I>x)){var L=e.origin.distanceTo(h);L<s.near||L>s.far||d.push({distance:L,point:c.clone().applyMatrix4(this.matrixWorld),index:R,face:null,faceIndex:null,object:this})}}}else if(l instanceof i.Geometry)for(var Y=l.vertices,J=Y.length,R=0;R<J-1;R+=f){var I=e.distanceSqToSegment(Y[R],Y[R+1],h,c);if(!(I>x)){var L=e.origin.distanceTo(h);L<s.near||L>s.far||d.push({distance:L,point:c.clone().applyMatrix4(this.matrixWorld),index:R,face:null,faceIndex:null,object:this})}}}}}(),i.Line.prototype.clone=function(r){return r===void 0&&(r=new i.Line(this.geometry,this.material,this.mode)),i.Object3D.prototype.clone.call(this,r),r},i.Mesh=function(r,e){i.Object3D.call(this),this.type="Mesh",this.geometry=r!==void 0?r:new i.Geometry,this.material=e!==void 0?e:new i.MeshBasicMaterial({color:Math.random()*16777215}),this.updateMorphTargets()},i.Mesh.prototype=Object.create(i.Object3D.prototype),i.Mesh.prototype.constructor=i.Mesh,i.Mesh.prototype.updateMorphTargets=function(){if(this.geometry.morphTargets!==void 0&&this.geometry.morphTargets.length>0){this.morphTargetBase=-1,this.morphTargetForcedOrder=[],this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,e=this.geometry.morphTargets.length;r<e;r++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[r].name]=r}},i.Mesh.prototype.getMorphTargetIndexByName=function(r){return this.morphTargetDictionary[r]!==void 0?this.morphTargetDictionary[r]:(i.warn("THREE.Mesh.getMorphTargetIndexByName: morph target "+r+" does not exist. Returning 0."),0)},i.Mesh.prototype.raycast=function(){var r=new i.Matrix4,e=new i.Ray,o=new i.Sphere,s=new i.Vector3,d=new i.Vector3,p=new i.Vector3;return function(x,l){var _=this.geometry;if(_.boundingSphere===null&&_.computeBoundingSphere(),o.copy(_.boundingSphere),o.applyMatrix4(this.matrixWorld),x.ray.isIntersectionSphere(o)!==!1&&(r.getInverse(this.matrixWorld),e.copy(x.ray).applyMatrix4(r),!(_.boundingBox!==null&&e.isIntersectionBox(_.boundingBox)===!1))){if(_ instanceof i.BufferGeometry){var v=this.material;if(v===void 0)return;var c=_.attributes,h,f,m,b=x.precision;if(c.index!==void 0){var w=c.index.array,C=c.position.array,E=_.offsets;E.length===0&&(E=[{start:0,count:w.length,index:0}]);for(var S=0,M=E.length;S<M;++S)for(var A=E[S].start,R=E[S].count,D=E[S].index,N=A,I=A+R;N<I;N+=3){if(h=D+w[N],f=D+w[N+1],m=D+w[N+2],s.fromArray(C,h*3),d.fromArray(C,f*3),p.fromArray(C,m*3),v.side===i.BackSide)var L=e.intersectTriangle(p,d,s,!0);else var L=e.intersectTriangle(s,d,p,v.side!==i.DoubleSide);if(L!==null){L.applyMatrix4(this.matrixWorld);var Y=x.ray.origin.distanceTo(L);Y<b||Y<x.near||Y>x.far||l.push({distance:Y,point:L,face:new i.Face3(h,f,m,i.Triangle.normal(s,d,p)),faceIndex:null,object:this})}}}else for(var C=c.position.array,N=0,J=0,I=C.length;N<I;N+=3,J+=9){if(h=N,f=N+1,m=N+2,s.fromArray(C,J),d.fromArray(C,J+3),p.fromArray(C,J+6),v.side===i.BackSide)var L=e.intersectTriangle(p,d,s,!0);else var L=e.intersectTriangle(s,d,p,v.side!==i.DoubleSide);if(L!==null){L.applyMatrix4(this.matrixWorld);var Y=x.ray.origin.distanceTo(L);Y<b||Y<x.near||Y>x.far||l.push({distance:Y,point:L,face:new i.Face3(h,f,m,i.Triangle.normal(s,d,p)),faceIndex:null,object:this})}}}else if(_ instanceof i.Geometry)for(var ie=this.material instanceof i.MeshFaceMaterial,K=ie===!0?this.material.materials:null,h,f,m,b=x.precision,Q=_.vertices,ne=0,ue=_.faces.length;ne<ue;ne++){var fe=_.faces[ne],v=ie===!0?K[fe.materialIndex]:this.material;if(v!==void 0){if(h=Q[fe.a],f=Q[fe.b],m=Q[fe.c],v.morphTargets===!0){var ge=_.morphTargets,ye=this.morphTargetInfluences;s.set(0,0,0),d.set(0,0,0),p.set(0,0,0);for(var pe=0,de=ge.length;pe<de;pe++){var he=ye[pe];if(he!==0){var _e=ge[pe].vertices;s.x+=(_e[fe.a].x-h.x)*he,s.y+=(_e[fe.a].y-h.y)*he,s.z+=(_e[fe.a].z-h.z)*he,d.x+=(_e[fe.b].x-f.x)*he,d.y+=(_e[fe.b].y-f.y)*he,d.z+=(_e[fe.b].z-f.z)*he,p.x+=(_e[fe.c].x-m.x)*he,p.y+=(_e[fe.c].y-m.y)*he,p.z+=(_e[fe.c].z-m.z)*he}}s.add(h),d.add(f),p.add(m),h=s,f=d,m=p}if(v.side===i.BackSide)var L=e.intersectTriangle(m,f,h,!0);else var L=e.intersectTriangle(h,f,m,v.side!==i.DoubleSide);if(L!==null){L.applyMatrix4(this.matrixWorld);var Y=x.ray.origin.distanceTo(L);Y<b||Y<x.near||Y>x.far||l.push({distance:Y,point:L,face:fe,faceIndex:ne,object:this})}}}}}}(),i.Mesh.prototype.clone=function(r,e){return r===void 0&&(r=new i.Mesh(this.geometry,this.material)),i.Object3D.prototype.clone.call(this,r,e),r},i.Bone=function(r){i.Object3D.call(this),this.type="Bone",this.skin=r},i.Bone.prototype=Object.create(i.Object3D.prototype),i.Bone.prototype.constructor=i.Bone,i.Skeleton=function(r,e,o){if(this.useVertexTexture=o!==void 0?o:!0,this.identityMatrix=new i.Matrix4,r=r||[],this.bones=r.slice(0),this.useVertexTexture){var s;this.bones.length>256?s=64:this.bones.length>64?s=32:this.bones.length>16?s=16:s=8,this.boneTextureWidth=s,this.boneTextureHeight=s,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new i.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,i.RGBAFormat,i.FloatType),this.boneTexture.minFilter=i.NearestFilter,this.boneTexture.magFilter=i.NearestFilter,this.boneTexture.generateMipmaps=!1,this.boneTexture.flipY=!1}else this.boneMatrices=new Float32Array(16*this.bones.length);if(e===void 0)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{i.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[];for(var d=0,p=this.bones.length;d<p;d++)this.boneInverses.push(new i.Matrix4)}},i.Skeleton.prototype.calculateInverses=function(){this.boneInverses=[];for(var r=0,e=this.bones.length;r<e;r++){var o=new i.Matrix4;this.bones[r]&&o.getInverse(this.bones[r].matrixWorld),this.boneInverses.push(o)}},i.Skeleton.prototype.pose=function(){for(var r,e=0,o=this.bones.length;e<o;e++)r=this.bones[e],r&&r.matrixWorld.getInverse(this.boneInverses[e]);for(var e=0,o=this.bones.length;e<o;e++)r=this.bones[e],r&&(r.parent?(r.matrix.getInverse(r.parent.matrixWorld),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))},i.Skeleton.prototype.update=function(){var r=new i.Matrix4;return function(){for(var e=0,o=this.bones.length;e<o;e++){var s=this.bones[e]?this.bones[e].matrixWorld:this.identityMatrix;r.multiplyMatrices(s,this.boneInverses[e]),r.flattenToArrayOffset(this.boneMatrices,e*16)}this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),i.SkinnedMesh=function(r,e,o){i.Mesh.call(this,r,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new i.Matrix4,this.bindMatrixInverse=new i.Matrix4;var s=[];if(this.geometry&&this.geometry.bones!==void 0){for(var d,p,x,l,_,v=0,c=this.geometry.bones.length;v<c;++v)p=this.geometry.bones[v],x=p.pos,l=p.rotq,_=p.scl,d=new i.Bone(this),s.push(d),d.name=p.name,d.position.set(x[0],x[1],x[2]),d.quaternion.set(l[0],l[1],l[2],l[3]),_!==void 0?d.scale.set(_[0],_[1],_[2]):d.scale.set(1,1,1);for(var v=0,c=this.geometry.bones.length;v<c;++v)p=this.geometry.bones[v],p.parent!==-1?s[p.parent].add(s[v]):this.add(s[v])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new i.Skeleton(s,void 0,o))},i.SkinnedMesh.prototype=Object.create(i.Mesh.prototype),i.SkinnedMesh.prototype.constructor=i.SkinnedMesh,i.SkinnedMesh.prototype.bind=function(r,e){this.skeleton=r,e===void 0&&(this.updateMatrixWorld(!0),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},i.SkinnedMesh.prototype.pose=function(){this.skeleton.pose()},i.SkinnedMesh.prototype.normalizeSkinWeights=function(){if(this.geometry instanceof i.Geometry)for(var r=0;r<this.geometry.skinIndices.length;r++){var e=this.geometry.skinWeights[r],o=1/e.lengthManhattan();o!==1/0?e.multiplyScalar(o):e.set(1)}},i.SkinnedMesh.prototype.updateMatrixWorld=function(r){i.Mesh.prototype.updateMatrixWorld.call(this,!0),this.bindMode==="attached"?this.bindMatrixInverse.getInverse(this.matrixWorld):this.bindMode==="detached"?this.bindMatrixInverse.getInverse(this.bindMatrix):i.warn("THREE.SkinnedMesh unreckognized bindMode: "+this.bindMode)},i.SkinnedMesh.prototype.clone=function(r){return r===void 0&&(r=new i.SkinnedMesh(this.geometry,this.material,this.useVertexTexture)),i.Mesh.prototype.clone.call(this,r),r},i.MorphAnimMesh=function(r,e){i.Mesh.call(this,r,e),this.type="MorphAnimMesh",this.duration=1e3,this.mirroredLoop=!1,this.time=0,this.lastKeyframe=0,this.currentKeyframe=0,this.direction=1,this.directionBackwards=!1,this.setFrameRange(0,this.geometry.morphTargets.length-1)},i.MorphAnimMesh.prototype=Object.create(i.Mesh.prototype),i.MorphAnimMesh.prototype.constructor=i.MorphAnimMesh,i.MorphAnimMesh.prototype.setFrameRange=function(r,e){this.startKeyframe=r,this.endKeyframe=e,this.length=this.endKeyframe-this.startKeyframe+1},i.MorphAnimMesh.prototype.setDirectionForward=function(){this.direction=1,this.directionBackwards=!1},i.MorphAnimMesh.prototype.setDirectionBackward=function(){this.direction=-1,this.directionBackwards=!0},i.MorphAnimMesh.prototype.parseAnimations=function(){var r=this.geometry;r.animations||(r.animations={});for(var e,o=r.animations,s=/([a-z]+)_?(\d+)/,d=0,p=r.morphTargets.length;d<p;d++){var x=r.morphTargets[d],l=x.name.match(s);if(l&&l.length>1){var _=l[1];o[_]||(o[_]={start:1/0,end:-1/0});var v=o[_];d<v.start&&(v.start=d),d>v.end&&(v.end=d),e||(e=_)}}r.firstAnimation=e},i.MorphAnimMesh.prototype.setAnimationLabel=function(r,e,o){this.geometry.animations||(this.geometry.animations={}),this.geometry.animations[r]={start:e,end:o}},i.MorphAnimMesh.prototype.playAnimation=function(r,e){var o=this.geometry.animations[r];o?(this.setFrameRange(o.start,o.end),this.duration=1e3*((o.end-o.start)/e),this.time=0):i.warn("THREE.MorphAnimMesh: animation["+r+"] undefined in .playAnimation()")},i.MorphAnimMesh.prototype.updateAnimation=function(r){var e=this.duration/this.length;this.time+=this.direction*r,this.mirroredLoop?(this.time>this.duration||this.time<0)&&(this.direction*=-1,this.time>this.duration&&(this.time=this.duration,this.directionBackwards=!0),this.time<0&&(this.time=0,this.directionBackwards=!1)):(this.time=this.time%this.duration,this.time<0&&(this.time+=this.duration));var o=this.startKeyframe+i.Math.clamp(Math.floor(this.time/e),0,this.length-1);o!==this.currentKeyframe&&(this.morphTargetInfluences[this.lastKeyframe]=0,this.morphTargetInfluences[this.currentKeyframe]=1,this.morphTargetInfluences[o]=0,this.lastKeyframe=this.currentKeyframe,this.currentKeyframe=o);var s=this.time%e/e;this.directionBackwards&&(s=1-s),this.morphTargetInfluences[this.currentKeyframe]=s,this.morphTargetInfluences[this.lastKeyframe]=1-s},i.MorphAnimMesh.prototype.interpolateTargets=function(r,e,o){for(var s=this.morphTargetInfluences,d=0,p=s.length;d<p;d++)s[d]=0;r>-1&&(s[r]=1-o),e>-1&&(s[e]=o)},i.MorphAnimMesh.prototype.clone=function(r){return r===void 0&&(r=new i.MorphAnimMesh(this.geometry,this.material)),r.duration=this.duration,r.mirroredLoop=this.mirroredLoop,r.time=this.time,r.lastKeyframe=this.lastKeyframe,r.currentKeyframe=this.currentKeyframe,r.direction=this.direction,r.directionBackwards=this.directionBackwards,i.Mesh.prototype.clone.call(this,r),r},i.LOD=function(){i.Object3D.call(this),this.objects=[]},i.LOD.prototype=Object.create(i.Object3D.prototype),i.LOD.prototype.constructor=i.LOD,i.LOD.prototype.addLevel=function(r,e){e===void 0&&(e=0),e=Math.abs(e);for(var o=0;o<this.objects.length&&!(e<this.objects[o].distance);o++);this.objects.splice(o,0,{distance:e,object:r}),this.add(r)},i.LOD.prototype.getObjectForDistance=function(r){for(var e=1,o=this.objects.length;e<o&&!(r<this.objects[e].distance);e++);return this.objects[e-1].object},i.LOD.prototype.raycast=function(){var r=new i.Vector3;return function(e,o){r.setFromMatrixPosition(this.matrixWorld);var s=e.ray.origin.distanceTo(r);this.getObjectForDistance(s).raycast(e,o)}}(),i.LOD.prototype.update=function(){var r=new i.Vector3,e=new i.Vector3;return function(o){if(this.objects.length>1){r.setFromMatrixPosition(o.matrixWorld),e.setFromMatrixPosition(this.matrixWorld);var s=r.distanceTo(e);this.objects[0].object.visible=!0;for(var d=1,p=this.objects.length;d<p&&s>=this.objects[d].distance;d++)this.objects[d-1].object.visible=!1,this.objects[d].object.visible=!0;for(;d<p;d++)this.objects[d].object.visible=!1}}}(),i.LOD.prototype.clone=function(r){r===void 0&&(r=new i.LOD),i.Object3D.prototype.clone.call(this,r);for(var e=0,o=this.objects.length;e<o;e++){var s=this.objects[e].object.clone();s.visible=e===0,r.addLevel(s,this.objects[e].distance)}return r},i.Sprite=function(){var r=new Uint16Array([0,1,2,0,2,3]),e=new Float32Array([-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0]),o=new Float32Array([0,0,1,0,1,1,0,1]),s=new i.BufferGeometry;return s.addAttribute("index",new i.BufferAttribute(r,1)),s.addAttribute("position",new i.BufferAttribute(e,3)),s.addAttribute("uv",new i.BufferAttribute(o,2)),function(d){i.Object3D.call(this),this.type="Sprite",this.geometry=s,this.material=d!==void 0?d:new i.SpriteMaterial}}(),i.Sprite.prototype=Object.create(i.Object3D.prototype),i.Sprite.prototype.constructor=i.Sprite,i.Sprite.prototype.raycast=function(){var r=new i.Vector3;return function(e,o){r.setFromMatrixPosition(this.matrixWorld);var s=e.ray.distanceToPoint(r);s>this.scale.x||o.push({distance:s,point:this.position,face:null,object:this})}}(),i.Sprite.prototype.clone=function(r){return r===void 0&&(r=new i.Sprite(this.material)),i.Object3D.prototype.clone.call(this,r),r},i.Particle=i.Sprite,i.LensFlare=function(r,e,o,s,d){i.Object3D.call(this),this.lensFlares=[],this.positionScreen=new i.Vector3,this.customUpdateCallback=void 0,r!==void 0&&this.add(r,e,o,s,d)},i.LensFlare.prototype=Object.create(i.Object3D.prototype),i.LensFlare.prototype.constructor=i.LensFlare,i.LensFlare.prototype.add=function(r,e,o,s,d,p){e===void 0&&(e=-1),o===void 0&&(o=0),p===void 0&&(p=1),d===void 0&&(d=new i.Color(16777215)),s===void 0&&(s=i.NormalBlending),o=Math.min(o,Math.max(0,o)),this.lensFlares.push({texture:r,size:e,distance:o,x:0,y:0,z:0,scale:1,rotation:1,opacity:p,color:d,blending:s})},i.LensFlare.prototype.updateLensFlares=function(){var r,e=this.lensFlares.length,o,s=-this.positionScreen.x*2,d=-this.positionScreen.y*2;for(r=0;r<e;r++)o=this.lensFlares[r],o.x=this.positionScreen.x+s*o.distance,o.y=this.positionScreen.y+d*o.distance,o.wantedRotation=o.x*Math.PI*.25,o.rotation+=(o.wantedRotation-o.rotation)*.25},i.Scene=function(){i.Object3D.call(this),this.type="Scene",this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0},i.Scene.prototype=Object.create(i.Object3D.prototype),i.Scene.prototype.constructor=i.Scene,i.Scene.prototype.clone=function(r){return r===void 0&&(r=new i.Scene),i.Object3D.prototype.clone.call(this,r),this.fog!==null&&(r.fog=this.fog.clone()),this.overrideMaterial!==null&&(r.overrideMaterial=this.overrideMaterial.clone()),r.autoUpdate=this.autoUpdate,r.matrixAutoUpdate=this.matrixAutoUpdate,r},i.Fog=function(r,e,o){this.name="",this.color=new i.Color(r),this.near=e!==void 0?e:1,this.far=o!==void 0?o:1e3},i.Fog.prototype.clone=function(){return new i.Fog(this.color.getHex(),this.near,this.far)},i.FogExp2=function(r,e){this.name="",this.color=new i.Color(r),this.density=e!==void 0?e:25e-5},i.FogExp2.prototype.clone=function(){return new i.FogExp2(this.color.getHex(),this.density)},i.ShaderChunk={},i.ShaderChunk.common=`#define PI 3.14159
#define PI2 6.28318
#define RECIPROCAL_PI2 0.15915494
#define LOG2 1.442695
#define EPSILON 1e-6

float square( in float a ) { return a*a; }
vec2  square( in vec2 a )  { return vec2( a.x*a.x, a.y*a.y ); }
vec3  square( in vec3 a )  { return vec3( a.x*a.x, a.y*a.y, a.z*a.z ); }
vec4  square( in vec4 a )  { return vec4( a.x*a.x, a.y*a.y, a.z*a.z, a.w*a.w ); }
float saturate( in float a ) { return clamp( a, 0.0, 1.0 ); }
vec2  saturate( in vec2 a )  { return clamp( a, 0.0, 1.0 ); }
vec3  saturate( in vec3 a )  { return clamp( a, 0.0, 1.0 ); }
vec4  saturate( in vec4 a )  { return clamp( a, 0.0, 1.0 ); }
float average( in float a ) { return a; }
float average( in vec2 a )  { return ( a.x + a.y) * 0.5; }
float average( in vec3 a )  { return ( a.x + a.y + a.z) / 3.0; }
float average( in vec4 a )  { return ( a.x + a.y + a.z + a.w) * 0.25; }
float whiteCompliment( in float a ) { return saturate( 1.0 - a ); }
vec2  whiteCompliment( in vec2 a )  { return saturate( vec2(1.0) - a ); }
vec3  whiteCompliment( in vec3 a )  { return saturate( vec3(1.0) - a ); }
vec4  whiteCompliment( in vec4 a )  { return saturate( vec4(1.0) - a ); }
vec3 transformDirection( in vec3 normal, in mat4 matrix ) {
	return normalize( ( matrix * vec4( normal, 0.0 ) ).xyz );
}
// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations
vec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {
	return normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal) {
	float distance = dot( planeNormal, point-pointOnPlane );
	return point - distance * planeNormal;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return pointOnLine + lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) );
}
float calcLightAttenuation( float lightDistance, float cutoffDistance, float decayExponent ) {
	if ( decayExponent > 0.0 ) {
	  return pow( saturate( 1.0 - lightDistance / cutoffDistance ), decayExponent );
	}
	return 1.0;
}

vec3 inputToLinear( in vec3 a ) {
#ifdef GAMMA_INPUT
	return pow( a, vec3( float( GAMMA_FACTOR ) ) );
#else
	return a;
#endif
}
vec3 linearToOutput( in vec3 a ) {
#ifdef GAMMA_OUTPUT
	return pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );
#else
	return a;
#endif
}
`,i.ShaderChunk.alphatest_fragment=`#ifdef ALPHATEST

	if ( diffuseColor.a < ALPHATEST ) discard;

#endif
`,i.ShaderChunk.lights_lambert_vertex=`vLightFront = vec3( 0.0 );

#ifdef DOUBLE_SIDED

	vLightBack = vec3( 0.0 );

#endif

transformedNormal = normalize( transformedNormal );

#if MAX_DIR_LIGHTS > 0

for( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {

	vec3 dirVector = transformDirection( directionalLightDirection[ i ], viewMatrix );

	float dotProduct = dot( transformedNormal, dirVector );
	vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );

	#ifdef DOUBLE_SIDED

		vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );

		#ifdef WRAP_AROUND

			vec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );

		#endif

	#endif

	#ifdef WRAP_AROUND

		vec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );
		directionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );

		#ifdef DOUBLE_SIDED

			directionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );

		#endif

	#endif

	vLightFront += directionalLightColor[ i ] * directionalLightWeighting;

	#ifdef DOUBLE_SIDED

		vLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;

	#endif

}

#endif

#if MAX_POINT_LIGHTS > 0

	for( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {

		vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );
		vec3 lVector = lPosition.xyz - mvPosition.xyz;

		float attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );

		lVector = normalize( lVector );
		float dotProduct = dot( transformedNormal, lVector );

		vec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );

		#ifdef DOUBLE_SIDED

			vec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );

			#ifdef WRAP_AROUND

				vec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );

			#endif

		#endif

		#ifdef WRAP_AROUND

			vec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );
			pointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );

			#ifdef DOUBLE_SIDED

				pointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );

			#endif

		#endif

		vLightFront += pointLightColor[ i ] * pointLightWeighting * attenuation;

		#ifdef DOUBLE_SIDED

			vLightBack += pointLightColor[ i ] * pointLightWeightingBack * attenuation;

		#endif

	}

#endif

#if MAX_SPOT_LIGHTS > 0

	for( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {

		vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );
		vec3 lVector = lPosition.xyz - mvPosition.xyz;

		float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );

		if ( spotEffect > spotLightAngleCos[ i ] ) {

			spotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );

			float attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );

			lVector = normalize( lVector );

			float dotProduct = dot( transformedNormal, lVector );
			vec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );

			#ifdef DOUBLE_SIDED

				vec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );

				#ifdef WRAP_AROUND

					vec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );

				#endif

			#endif

			#ifdef WRAP_AROUND

				vec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );
				spotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );

				#ifdef DOUBLE_SIDED

					spotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );

				#endif

			#endif

			vLightFront += spotLightColor[ i ] * spotLightWeighting * attenuation * spotEffect;

			#ifdef DOUBLE_SIDED

				vLightBack += spotLightColor[ i ] * spotLightWeightingBack * attenuation * spotEffect;

			#endif

		}

	}

#endif

#if MAX_HEMI_LIGHTS > 0

	for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {

		vec3 lVector = transformDirection( hemisphereLightDirection[ i ], viewMatrix );

		float dotProduct = dot( transformedNormal, lVector );

		float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;
		float hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;

		vLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );

		#ifdef DOUBLE_SIDED

			vLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );

		#endif

	}

#endif

vLightFront += ambientLightColor;

#ifdef DOUBLE_SIDED

	vLightBack += ambientLightColor;

#endif
`,i.ShaderChunk.map_particle_pars_fragment=`#ifdef USE_MAP

	uniform vec4 offsetRepeat;
	uniform sampler2D map;

#endif
`,i.ShaderChunk.default_vertex=`#ifdef USE_SKINNING

	vec4 mvPosition = modelViewMatrix * skinned;

#elif defined( USE_MORPHTARGETS )

	vec4 mvPosition = modelViewMatrix * vec4( morphed, 1.0 );

#else

	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );

#endif

gl_Position = projectionMatrix * mvPosition;
`,i.ShaderChunk.map_pars_fragment=`#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )

	varying vec2 vUv;

#endif

#ifdef USE_MAP

	uniform sampler2D map;

#endif`,i.ShaderChunk.skinnormal_vertex=`#ifdef USE_SKINNING

	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;

	#ifdef USE_MORPHNORMALS

	vec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );

	#else

	vec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );

	#endif

#endif
`,i.ShaderChunk.logdepthbuf_pars_vertex=`#ifdef USE_LOGDEPTHBUF

	#ifdef USE_LOGDEPTHBUF_EXT

		varying float vFragDepth;

	#endif

	uniform float logDepthBufFC;

#endif`,i.ShaderChunk.lightmap_pars_vertex=`#ifdef USE_LIGHTMAP

	varying vec2 vUv2;

#endif`,i.ShaderChunk.lights_phong_fragment=`#ifndef FLAT_SHADED

	vec3 normal = normalize( vNormal );

	#ifdef DOUBLE_SIDED

		normal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );

	#endif

#else

	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );

#endif

vec3 viewPosition = normalize( vViewPosition );

#ifdef USE_NORMALMAP

	normal = perturbNormal2Arb( -vViewPosition, normal );

#elif defined( USE_BUMPMAP )

	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );

#endif

vec3 totalDiffuseLight = vec3( 0.0 );
vec3 totalSpecularLight = vec3( 0.0 );

#if MAX_POINT_LIGHTS > 0

	for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {

		vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );
		vec3 lVector = lPosition.xyz + vViewPosition.xyz;

		float attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );

		lVector = normalize( lVector );

		// diffuse

		float dotProduct = dot( normal, lVector );

		#ifdef WRAP_AROUND

			float pointDiffuseWeightFull = max( dotProduct, 0.0 );
			float pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );

			vec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );

		#else

			float pointDiffuseWeight = max( dotProduct, 0.0 );

		#endif

		totalDiffuseLight += pointLightColor[ i ] * pointDiffuseWeight * attenuation;

				// specular

		vec3 pointHalfVector = normalize( lVector + viewPosition );
		float pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );
		float pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );

		float specularNormalization = ( shininess + 2.0 ) / 8.0;

		vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, pointHalfVector ), 0.0 ), 5.0 );
		totalSpecularLight += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * attenuation * specularNormalization;

	}

#endif

#if MAX_SPOT_LIGHTS > 0

	for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {

		vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );
		vec3 lVector = lPosition.xyz + vViewPosition.xyz;

		float attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );

		lVector = normalize( lVector );

		float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );

		if ( spotEffect > spotLightAngleCos[ i ] ) {

			spotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );

			// diffuse

			float dotProduct = dot( normal, lVector );

			#ifdef WRAP_AROUND

				float spotDiffuseWeightFull = max( dotProduct, 0.0 );
				float spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );

				vec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );

			#else

				float spotDiffuseWeight = max( dotProduct, 0.0 );

			#endif

			totalDiffuseLight += spotLightColor[ i ] * spotDiffuseWeight * attenuation * spotEffect;

			// specular

			vec3 spotHalfVector = normalize( lVector + viewPosition );
			float spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );
			float spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );

			float specularNormalization = ( shininess + 2.0 ) / 8.0;

			vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, spotHalfVector ), 0.0 ), 5.0 );
			totalSpecularLight += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * attenuation * specularNormalization * spotEffect;

		}

	}

#endif

#if MAX_DIR_LIGHTS > 0

	for( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {

		vec3 dirVector = transformDirection( directionalLightDirection[ i ], viewMatrix );

		// diffuse

		float dotProduct = dot( normal, dirVector );

		#ifdef WRAP_AROUND

			float dirDiffuseWeightFull = max( dotProduct, 0.0 );
			float dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );

			vec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );

		#else

			float dirDiffuseWeight = max( dotProduct, 0.0 );

		#endif

		totalDiffuseLight += directionalLightColor[ i ] * dirDiffuseWeight;

		// specular

		vec3 dirHalfVector = normalize( dirVector + viewPosition );
		float dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );
		float dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );

		/*
		// fresnel term from skin shader
		const float F0 = 0.128;

		float base = 1.0 - dot( viewPosition, dirHalfVector );
		float exponential = pow( base, 5.0 );

		float fresnel = exponential + F0 * ( 1.0 - exponential );
		*/

		/*
		// fresnel term from fresnel shader
		const float mFresnelBias = 0.08;
		const float mFresnelScale = 0.3;
		const float mFresnelPower = 5.0;

		float fresnel = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( -viewPosition ), normal ), mFresnelPower );
		*/

		float specularNormalization = ( shininess + 2.0 ) / 8.0;

		// 		dirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization * fresnel;

		vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );
		totalSpecularLight += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;


	}

#endif

#if MAX_HEMI_LIGHTS > 0

	for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {

		vec3 lVector = transformDirection( hemisphereLightDirection[ i ], viewMatrix );

		// diffuse

		float dotProduct = dot( normal, lVector );
		float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;

		vec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );

		totalDiffuseLight += hemiColor;

		// specular (sky light)

		vec3 hemiHalfVectorSky = normalize( lVector + viewPosition );
		float hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;
		float hemiSpecularWeightSky = specularStrength * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );

		// specular (ground light)

		vec3 lVectorGround = -lVector;

		vec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );
		float hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;
		float hemiSpecularWeightGround = specularStrength * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );

		float dotProductGround = dot( normal, lVectorGround );

		float specularNormalization = ( shininess + 2.0 ) / 8.0;

		vec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );
		vec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );
		totalSpecularLight += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );

	}

#endif

#ifdef METAL

	outgoingLight += diffuseColor.rgb * ( totalDiffuseLight + ambientLightColor ) * specular + totalSpecularLight + emissive;

#else

	outgoingLight += diffuseColor.rgb * ( totalDiffuseLight + ambientLightColor ) + totalSpecularLight + emissive;

#endif
`,i.ShaderChunk.fog_pars_fragment=`#ifdef USE_FOG

	uniform vec3 fogColor;

	#ifdef FOG_EXP2

		uniform float fogDensity;

	#else

		uniform float fogNear;
		uniform float fogFar;
	#endif

#endif`,i.ShaderChunk.morphnormal_vertex=`#ifdef USE_MORPHNORMALS

	vec3 morphedNormal = vec3( 0.0 );

	morphedNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];
	morphedNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];
	morphedNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];
	morphedNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];

	morphedNormal += normal;

#endif`,i.ShaderChunk.envmap_pars_fragment=`#ifdef USE_ENVMAP

	uniform float reflectivity;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	uniform float flipEnvMap;

	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )

		uniform float refractionRatio;

	#else

		varying vec3 vReflect;

	#endif

#endif
`,i.ShaderChunk.logdepthbuf_fragment=`#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)

	gl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;

#endif`,i.ShaderChunk.normalmap_pars_fragment=`#ifdef USE_NORMALMAP

	uniform sampler2D normalMap;
	uniform vec2 normalScale;

	// Per-Pixel Tangent Space Normal Mapping
	// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html

	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {

		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );

		vec3 S = normalize( q0 * st1.t - q1 * st0.t );
		vec3 T = normalize( -q0 * st1.s + q1 * st0.s );
		vec3 N = normalize( surf_norm );

		vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
		mapN.xy = normalScale * mapN.xy;
		mat3 tsn = mat3( S, T, N );
		return normalize( tsn * mapN );

	}

#endif
`,i.ShaderChunk.lights_phong_pars_vertex=`#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )

	varying vec3 vWorldPosition;

#endif
`,i.ShaderChunk.lightmap_pars_fragment=`#ifdef USE_LIGHTMAP

	varying vec2 vUv2;
	uniform sampler2D lightMap;

#endif`,i.ShaderChunk.shadowmap_vertex=`#ifdef USE_SHADOWMAP

	for( int i = 0; i < MAX_SHADOWS; i ++ ) {

		vShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;

	}

#endif`,i.ShaderChunk.lights_phong_vertex=`#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )

	vWorldPosition = worldPosition.xyz;

#endif`,i.ShaderChunk.map_fragment=`#ifdef USE_MAP

	vec4 texelColor = texture2D( map, vUv );

	texelColor.xyz = inputToLinear( texelColor.xyz );

	diffuseColor *= texelColor;

#endif`,i.ShaderChunk.lightmap_vertex=`#ifdef USE_LIGHTMAP

	vUv2 = uv2;

#endif`,i.ShaderChunk.map_particle_fragment=`#ifdef USE_MAP

	diffuseColor *= texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );

#endif
`,i.ShaderChunk.color_pars_fragment=`#ifdef USE_COLOR

	varying vec3 vColor;

#endif
`,i.ShaderChunk.color_vertex=`#ifdef USE_COLOR

	vColor.xyz = inputToLinear( color.xyz );

#endif`,i.ShaderChunk.skinning_vertex=`#ifdef USE_SKINNING

	#ifdef USE_MORPHTARGETS

	vec4 skinVertex = bindMatrix * vec4( morphed, 1.0 );

	#else

	vec4 skinVertex = bindMatrix * vec4( position, 1.0 );

	#endif

	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	skinned  = bindMatrixInverse * skinned;

#endif
`,i.ShaderChunk.envmap_pars_vertex=`#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )

	varying vec3 vReflect;

	uniform float refractionRatio;

#endif
`,i.ShaderChunk.linear_to_gamma_fragment=`
	outgoingLight = linearToOutput( outgoingLight );
`,i.ShaderChunk.color_pars_vertex=`#ifdef USE_COLOR

	varying vec3 vColor;

#endif`,i.ShaderChunk.lights_lambert_pars_vertex=`uniform vec3 ambientLightColor;

#if MAX_DIR_LIGHTS > 0

	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];
	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];

#endif

#if MAX_HEMI_LIGHTS > 0

	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];
	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];
	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];

#endif

#if MAX_POINT_LIGHTS > 0

	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];
	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];
	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];
	uniform float pointLightDecay[ MAX_POINT_LIGHTS ];

#endif

#if MAX_SPOT_LIGHTS > 0

	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];
	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];
	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];
	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];
	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];
	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];
	uniform float spotLightDecay[ MAX_SPOT_LIGHTS ];

#endif

#ifdef WRAP_AROUND

	uniform vec3 wrapRGB;

#endif
`,i.ShaderChunk.map_pars_vertex=`#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )

	varying vec2 vUv;
	uniform vec4 offsetRepeat;

#endif
`,i.ShaderChunk.envmap_fragment=`#ifdef USE_ENVMAP

	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )

		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );

		// Transforming Normal Vectors with the Inverse Transformation
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );

		#ifdef ENVMAP_MODE_REFLECTION

			vec3 reflectVec = reflect( cameraToVertex, worldNormal );

		#else

			vec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );

		#endif

	#else

		vec3 reflectVec = vReflect;

	#endif

	#ifdef DOUBLE_SIDED
		float flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );
	#else
		float flipNormal = 1.0;
	#endif

	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );

	#elif defined( ENVMAP_TYPE_EQUIREC )
		vec2 sampleUV;
		sampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );
		sampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;
		vec4 envColor = texture2D( envMap, sampleUV );

	#elif defined( ENVMAP_TYPE_SPHERE )
		vec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));
		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );
	#endif

	envColor.xyz = inputToLinear( envColor.xyz );

	#ifdef ENVMAP_BLENDING_MULTIPLY

		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );

	#elif defined( ENVMAP_BLENDING_MIX )

		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );

	#elif defined( ENVMAP_BLENDING_ADD )

		outgoingLight += envColor.xyz * specularStrength * reflectivity;

	#endif

#endif
`,i.ShaderChunk.specularmap_pars_fragment=`#ifdef USE_SPECULARMAP

	uniform sampler2D specularMap;

#endif`,i.ShaderChunk.logdepthbuf_vertex=`#ifdef USE_LOGDEPTHBUF

	gl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;

	#ifdef USE_LOGDEPTHBUF_EXT

		vFragDepth = 1.0 + gl_Position.w;

#else

		gl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;

	#endif

#endif`,i.ShaderChunk.morphtarget_pars_vertex=`#ifdef USE_MORPHTARGETS

	#ifndef USE_MORPHNORMALS

	uniform float morphTargetInfluences[ 8 ];

	#else

	uniform float morphTargetInfluences[ 4 ];

	#endif

#endif`,i.ShaderChunk.specularmap_fragment=`float specularStrength;

#ifdef USE_SPECULARMAP

	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;

#else

	specularStrength = 1.0;

#endif`,i.ShaderChunk.fog_fragment=`#ifdef USE_FOG

	#ifdef USE_LOGDEPTHBUF_EXT

		float depth = gl_FragDepthEXT / gl_FragCoord.w;

	#else

		float depth = gl_FragCoord.z / gl_FragCoord.w;

	#endif

	#ifdef FOG_EXP2

		float fogFactor = exp2( - square( fogDensity ) * square( depth ) * LOG2 );
		fogFactor = whiteCompliment( fogFactor );

	#else

		float fogFactor = smoothstep( fogNear, fogFar, depth );

	#endif
	
	outgoingLight = mix( outgoingLight, fogColor, fogFactor );

#endif`,i.ShaderChunk.bumpmap_pars_fragment=`#ifdef USE_BUMPMAP

	uniform sampler2D bumpMap;
	uniform float bumpScale;

	// Derivative maps - bump mapping unparametrized surfaces by Morten Mikkelsen
	// http://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html

	// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)

	vec2 dHdxy_fwd() {

		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );

		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;

		return vec2( dBx, dBy );

	}

	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {

		vec3 vSigmaX = dFdx( surf_pos );
		vec3 vSigmaY = dFdy( surf_pos );
		vec3 vN = surf_norm;		// normalized

		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );

		float fDet = dot( vSigmaX, R1 );

		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );

	}

#endif
`,i.ShaderChunk.defaultnormal_vertex=`#ifdef USE_SKINNING

	vec3 objectNormal = skinnedNormal.xyz;

#elif defined( USE_MORPHNORMALS )

	vec3 objectNormal = morphedNormal;

#else

	vec3 objectNormal = normal;

#endif

#ifdef FLIP_SIDED

	objectNormal = -objectNormal;

#endif

vec3 transformedNormal = normalMatrix * objectNormal;
`,i.ShaderChunk.lights_phong_pars_fragment=`uniform vec3 ambientLightColor;

#if MAX_DIR_LIGHTS > 0

	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];
	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];

#endif

#if MAX_HEMI_LIGHTS > 0

	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];
	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];
	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];

#endif

#if MAX_POINT_LIGHTS > 0

	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];

	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];
	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];
	uniform float pointLightDecay[ MAX_POINT_LIGHTS ];

#endif

#if MAX_SPOT_LIGHTS > 0

	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];
	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];
	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];
	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];
	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];
	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];
	uniform float spotLightDecay[ MAX_SPOT_LIGHTS ];

#endif

#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )

	varying vec3 vWorldPosition;

#endif

#ifdef WRAP_AROUND

	uniform vec3 wrapRGB;

#endif

varying vec3 vViewPosition;

#ifndef FLAT_SHADED

	varying vec3 vNormal;

#endif
`,i.ShaderChunk.skinbase_vertex=`#ifdef USE_SKINNING

	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );

#endif`,i.ShaderChunk.map_vertex=`#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )

	vUv = uv * offsetRepeat.zw + offsetRepeat.xy;

#endif`,i.ShaderChunk.lightmap_fragment=`#ifdef USE_LIGHTMAP

	outgoingLight *= diffuseColor.xyz * texture2D( lightMap, vUv2 ).xyz;

#endif`,i.ShaderChunk.shadowmap_pars_vertex=`#ifdef USE_SHADOWMAP

	varying vec4 vShadowCoord[ MAX_SHADOWS ];
	uniform mat4 shadowMatrix[ MAX_SHADOWS ];

#endif`,i.ShaderChunk.color_fragment=`#ifdef USE_COLOR

	diffuseColor.rgb *= vColor;

#endif`,i.ShaderChunk.morphtarget_vertex=`#ifdef USE_MORPHTARGETS

	vec3 morphed = vec3( 0.0 );
	morphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];
	morphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];
	morphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];
	morphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];

	#ifndef USE_MORPHNORMALS

	morphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];
	morphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];
	morphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];
	morphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];

	#endif

	morphed += position;

#endif`,i.ShaderChunk.envmap_vertex=`#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )

	vec3 worldNormal = transformDirection( objectNormal, modelMatrix );

	vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );

	#ifdef ENVMAP_MODE_REFLECTION

		vReflect = reflect( cameraToVertex, worldNormal );

	#else

		vReflect = refract( cameraToVertex, worldNormal, refractionRatio );

	#endif

#endif
`,i.ShaderChunk.shadowmap_fragment=`#ifdef USE_SHADOWMAP

	#ifdef SHADOWMAP_DEBUG

		vec3 frustumColors[3];
		frustumColors[0] = vec3( 1.0, 0.5, 0.0 );
		frustumColors[1] = vec3( 0.0, 1.0, 0.8 );
		frustumColors[2] = vec3( 0.0, 0.5, 1.0 );

	#endif

	#ifdef SHADOWMAP_CASCADE

		int inFrustumCount = 0;

	#endif

	float fDepth;
	vec3 shadowColor = vec3( 1.0 );

	for( int i = 0; i < MAX_SHADOWS; i ++ ) {

		vec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;

				// if ( something && something ) breaks ATI OpenGL shader compiler
				// if ( all( something, something ) ) using this instead

		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );

				// don't shadow pixels outside of light frustum
				// use just first frustum (for cascades)
				// don't shadow pixels behind far plane of light frustum

		#ifdef SHADOWMAP_CASCADE

			inFrustumCount += int( inFrustum );
			bvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );

		#else

			bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );

		#endif

		bool frustumTest = all( frustumTestVec );

		if ( frustumTest ) {

			shadowCoord.z += shadowBias[ i ];

			#if defined( SHADOWMAP_TYPE_PCF )

						// Percentage-close filtering
						// (9 pixel kernel)
						// http://fabiensanglard.net/shadowmappingPCF/

				float shadow = 0.0;

		/*
						// nested loops breaks shader compiler / validator on some ATI cards when using OpenGL
						// must enroll loop manually

				for ( float y = -1.25; y <= 1.25; y += 1.25 )
					for ( float x = -1.25; x <= 1.25; x += 1.25 ) {

						vec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );

								// doesn't seem to produce any noticeable visual difference compared to simple texture2D lookup
								//vec4 rgbaDepth = texture2DProj( shadowMap[ i ], vec4( vShadowCoord[ i ].w * ( vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy ), 0.05, vShadowCoord[ i ].w ) );

						float fDepth = unpackDepth( rgbaDepth );

						if ( fDepth < shadowCoord.z )
							shadow += 1.0;

				}

				shadow /= 9.0;

		*/

				const float shadowDelta = 1.0 / 9.0;

				float xPixelOffset = 1.0 / shadowMapSize[ i ].x;
				float yPixelOffset = 1.0 / shadowMapSize[ i ].y;

				float dx0 = -1.25 * xPixelOffset;
				float dy0 = -1.25 * yPixelOffset;
				float dx1 = 1.25 * xPixelOffset;
				float dy1 = 1.25 * yPixelOffset;

				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );
				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;

				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );
				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;

				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );
				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;

				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );
				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;

				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );
				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;

				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );
				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;

				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );
				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;

				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );
				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;

				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );
				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;

				shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );

			#elif defined( SHADOWMAP_TYPE_PCF_SOFT )

						// Percentage-close filtering
						// (9 pixel kernel)
						// http://fabiensanglard.net/shadowmappingPCF/

				float shadow = 0.0;

				float xPixelOffset = 1.0 / shadowMapSize[ i ].x;
				float yPixelOffset = 1.0 / shadowMapSize[ i ].y;

				float dx0 = -1.0 * xPixelOffset;
				float dy0 = -1.0 * yPixelOffset;
				float dx1 = 1.0 * xPixelOffset;
				float dy1 = 1.0 * yPixelOffset;

				mat3 shadowKernel;
				mat3 depthKernel;

				depthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );
				depthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );
				depthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );
				depthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );
				depthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );
				depthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );
				depthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );
				depthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );
				depthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );

				vec3 shadowZ = vec3( shadowCoord.z );
				shadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));
				shadowKernel[0] *= vec3(0.25);

				shadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));
				shadowKernel[1] *= vec3(0.25);

				shadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));
				shadowKernel[2] *= vec3(0.25);

				vec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );

				shadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );
				shadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );

				vec4 shadowValues;
				shadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );
				shadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );
				shadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );
				shadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );

				shadow = dot( shadowValues, vec4( 1.0 ) );

				shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );

			#else

				vec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );
				float fDepth = unpackDepth( rgbaDepth );

				if ( fDepth < shadowCoord.z )

		// spot with multiple shadows is darker

					shadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );

		// spot with multiple shadows has the same color as single shadow spot

		// 					shadowColor = min( shadowColor, vec3( shadowDarkness[ i ] ) );

			#endif

		}


		#ifdef SHADOWMAP_DEBUG

			#ifdef SHADOWMAP_CASCADE

				if ( inFrustum && inFrustumCount == 1 ) outgoingLight *= frustumColors[ i ];

			#else

				if ( inFrustum ) outgoingLight *= frustumColors[ i ];

			#endif

		#endif

	}

	// NOTE: I am unsure if this is correct in linear space.  -bhouston, Dec 29, 2014
	shadowColor = inputToLinear( shadowColor );

	outgoingLight = outgoingLight * shadowColor;

#endif
`,i.ShaderChunk.worldpos_vertex=`#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )

	#ifdef USE_SKINNING

		vec4 worldPosition = modelMatrix * skinned;

	#elif defined( USE_MORPHTARGETS )

		vec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );

	#else

		vec4 worldPosition = modelMatrix * vec4( position, 1.0 );

	#endif

#endif
`,i.ShaderChunk.shadowmap_pars_fragment=`#ifdef USE_SHADOWMAP

	uniform sampler2D shadowMap[ MAX_SHADOWS ];
	uniform vec2 shadowMapSize[ MAX_SHADOWS ];

	uniform float shadowDarkness[ MAX_SHADOWS ];
	uniform float shadowBias[ MAX_SHADOWS ];

	varying vec4 vShadowCoord[ MAX_SHADOWS ];

	float unpackDepth( const in vec4 rgba_depth ) {

		const vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );
		float depth = dot( rgba_depth, bit_shift );
		return depth;

	}

#endif`,i.ShaderChunk.skinning_pars_vertex=`#ifdef USE_SKINNING

	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;

	#ifdef BONE_TEXTURE

		uniform sampler2D boneTexture;
		uniform int boneTextureWidth;
		uniform int boneTextureHeight;

		mat4 getBoneMatrix( const in float i ) {

			float j = i * 4.0;
			float x = mod( j, float( boneTextureWidth ) );
			float y = floor( j / float( boneTextureWidth ) );

			float dx = 1.0 / float( boneTextureWidth );
			float dy = 1.0 / float( boneTextureHeight );

			y = dy * ( y + 0.5 );

			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );

			mat4 bone = mat4( v1, v2, v3, v4 );

			return bone;

		}

	#else

		uniform mat4 boneGlobalMatrices[ MAX_BONES ];

		mat4 getBoneMatrix( const in float i ) {

			mat4 bone = boneGlobalMatrices[ int(i) ];
			return bone;

		}

	#endif

#endif
`,i.ShaderChunk.logdepthbuf_pars_fragment=`#ifdef USE_LOGDEPTHBUF

	uniform float logDepthBufFC;

	#ifdef USE_LOGDEPTHBUF_EXT

		#extension GL_EXT_frag_depth : enable
		varying float vFragDepth;

	#endif

#endif`,i.ShaderChunk.alphamap_fragment=`#ifdef USE_ALPHAMAP

	diffuseColor.a *= texture2D( alphaMap, vUv ).g;

#endif
`,i.ShaderChunk.alphamap_pars_fragment=`#ifdef USE_ALPHAMAP

	uniform sampler2D alphaMap;

#endif
`,i.UniformsUtils={merge:function(r){for(var e={},o=0;o<r.length;o++){var s=this.clone(r[o]);for(var d in s)e[d]=s[d]}return e},clone:function(r){var e={};for(var o in r){e[o]={};for(var s in r[o]){var d=r[o][s];d instanceof i.Color||d instanceof i.Vector2||d instanceof i.Vector3||d instanceof i.Vector4||d instanceof i.Matrix4||d instanceof i.Texture?e[o][s]=d.clone():d instanceof Array?e[o][s]=d.slice():e[o][s]=d}}return e}},i.UniformsLib={common:{diffuse:{type:"c",value:new i.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new i.Vector4(0,0,1,1)},lightMap:{type:"t",value:null},specularMap:{type:"t",value:null},alphaMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"f",value:-1},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:.98},morphTargetInfluences:{type:"f",value:0}},bump:{bumpMap:{type:"t",value:null},bumpScale:{type:"f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new i.Vector2(1,1)}},fog:{fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new i.Color(16777215)}},lights:{ambientLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]},directionalLightColor:{type:"fv",value:[]},hemisphereLightDirection:{type:"fv",value:[]},hemisphereLightSkyColor:{type:"fv",value:[]},hemisphereLightGroundColor:{type:"fv",value:[]},pointLightColor:{type:"fv",value:[]},pointLightPosition:{type:"fv",value:[]},pointLightDistance:{type:"fv1",value:[]},pointLightDecay:{type:"fv1",value:[]},spotLightColor:{type:"fv",value:[]},spotLightPosition:{type:"fv",value:[]},spotLightDirection:{type:"fv",value:[]},spotLightDistance:{type:"fv1",value:[]},spotLightAngleCos:{type:"fv1",value:[]},spotLightExponent:{type:"fv1",value:[]},spotLightDecay:{type:"fv1",value:[]}},particle:{psColor:{type:"c",value:new i.Color(15658734)},opacity:{type:"f",value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new i.Vector4(0,0,1,1)},fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new i.Color(16777215)}},shadowmap:{shadowMap:{type:"tv",value:[]},shadowMapSize:{type:"v2v",value:[]},shadowBias:{type:"fv1",value:[]},shadowDarkness:{type:"fv1",value:[]},shadowMatrix:{type:"m4v",value:[]}}},i.ShaderLib={basic:{uniforms:i.UniformsUtils.merge([i.UniformsLib.common,i.UniformsLib.fog,i.UniformsLib.shadowmap]),vertexShader:[i.ShaderChunk.common,i.ShaderChunk.map_pars_vertex,i.ShaderChunk.lightmap_pars_vertex,i.ShaderChunk.envmap_pars_vertex,i.ShaderChunk.color_pars_vertex,i.ShaderChunk.morphtarget_pars_vertex,i.ShaderChunk.skinning_pars_vertex,i.ShaderChunk.shadowmap_pars_vertex,i.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",i.ShaderChunk.map_vertex,i.ShaderChunk.lightmap_vertex,i.ShaderChunk.color_vertex,i.ShaderChunk.skinbase_vertex,"	#ifdef USE_ENVMAP",i.ShaderChunk.morphnormal_vertex,i.ShaderChunk.skinnormal_vertex,i.ShaderChunk.defaultnormal_vertex,"	#endif",i.ShaderChunk.morphtarget_vertex,i.ShaderChunk.skinning_vertex,i.ShaderChunk.default_vertex,i.ShaderChunk.logdepthbuf_vertex,i.ShaderChunk.worldpos_vertex,i.ShaderChunk.envmap_vertex,i.ShaderChunk.shadowmap_vertex,"}"].join(`
`),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;",i.ShaderChunk.common,i.ShaderChunk.color_pars_fragment,i.ShaderChunk.map_pars_fragment,i.ShaderChunk.alphamap_pars_fragment,i.ShaderChunk.lightmap_pars_fragment,i.ShaderChunk.envmap_pars_fragment,i.ShaderChunk.fog_pars_fragment,i.ShaderChunk.shadowmap_pars_fragment,i.ShaderChunk.specularmap_pars_fragment,i.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	vec3 outgoingLight = vec3( 0.0 );","	vec4 diffuseColor = vec4( diffuse, opacity );",i.ShaderChunk.logdepthbuf_fragment,i.ShaderChunk.map_fragment,i.ShaderChunk.color_fragment,i.ShaderChunk.alphamap_fragment,i.ShaderChunk.alphatest_fragment,i.ShaderChunk.specularmap_fragment,"	outgoingLight = diffuseColor.rgb;",i.ShaderChunk.lightmap_fragment,i.ShaderChunk.envmap_fragment,i.ShaderChunk.shadowmap_fragment,i.ShaderChunk.linear_to_gamma_fragment,i.ShaderChunk.fog_fragment,"	gl_FragColor = vec4( outgoingLight, diffuseColor.a );","}"].join(`
`)},lambert:{uniforms:i.UniformsUtils.merge([i.UniformsLib.common,i.UniformsLib.fog,i.UniformsLib.lights,i.UniformsLib.shadowmap,{emissive:{type:"c",value:new i.Color(0)},wrapRGB:{type:"v3",value:new i.Vector3(1,1,1)}}]),vertexShader:["#define LAMBERT","varying vec3 vLightFront;","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","#endif",i.ShaderChunk.common,i.ShaderChunk.map_pars_vertex,i.ShaderChunk.lightmap_pars_vertex,i.ShaderChunk.envmap_pars_vertex,i.ShaderChunk.lights_lambert_pars_vertex,i.ShaderChunk.color_pars_vertex,i.ShaderChunk.morphtarget_pars_vertex,i.ShaderChunk.skinning_pars_vertex,i.ShaderChunk.shadowmap_pars_vertex,i.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",i.ShaderChunk.map_vertex,i.ShaderChunk.lightmap_vertex,i.ShaderChunk.color_vertex,i.ShaderChunk.morphnormal_vertex,i.ShaderChunk.skinbase_vertex,i.ShaderChunk.skinnormal_vertex,i.ShaderChunk.defaultnormal_vertex,i.ShaderChunk.morphtarget_vertex,i.ShaderChunk.skinning_vertex,i.ShaderChunk.default_vertex,i.ShaderChunk.logdepthbuf_vertex,i.ShaderChunk.worldpos_vertex,i.ShaderChunk.envmap_vertex,i.ShaderChunk.lights_lambert_vertex,i.ShaderChunk.shadowmap_vertex,"}"].join(`
`),fragmentShader:["uniform vec3 diffuse;","uniform vec3 emissive;","uniform float opacity;","varying vec3 vLightFront;","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","#endif",i.ShaderChunk.common,i.ShaderChunk.color_pars_fragment,i.ShaderChunk.map_pars_fragment,i.ShaderChunk.alphamap_pars_fragment,i.ShaderChunk.lightmap_pars_fragment,i.ShaderChunk.envmap_pars_fragment,i.ShaderChunk.fog_pars_fragment,i.ShaderChunk.shadowmap_pars_fragment,i.ShaderChunk.specularmap_pars_fragment,i.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	vec3 outgoingLight = vec3( 0.0 );","	vec4 diffuseColor = vec4( diffuse, opacity );",i.ShaderChunk.logdepthbuf_fragment,i.ShaderChunk.map_fragment,i.ShaderChunk.color_fragment,i.ShaderChunk.alphamap_fragment,i.ShaderChunk.alphatest_fragment,i.ShaderChunk.specularmap_fragment,"	#ifdef DOUBLE_SIDED","		if ( gl_FrontFacing )","			outgoingLight += diffuseColor.rgb * vLightFront + emissive;","		else","			outgoingLight += diffuseColor.rgb * vLightBack + emissive;","	#else","		outgoingLight += diffuseColor.rgb * vLightFront + emissive;","	#endif",i.ShaderChunk.lightmap_fragment,i.ShaderChunk.envmap_fragment,i.ShaderChunk.shadowmap_fragment,i.ShaderChunk.linear_to_gamma_fragment,i.ShaderChunk.fog_fragment,"	gl_FragColor = vec4( outgoingLight, diffuseColor.a );","}"].join(`
`)},phong:{uniforms:i.UniformsUtils.merge([i.UniformsLib.common,i.UniformsLib.bump,i.UniformsLib.normalmap,i.UniformsLib.fog,i.UniformsLib.lights,i.UniformsLib.shadowmap,{emissive:{type:"c",value:new i.Color(0)},specular:{type:"c",value:new i.Color(1118481)},shininess:{type:"f",value:30},wrapRGB:{type:"v3",value:new i.Vector3(1,1,1)}}]),vertexShader:["#define PHONG","varying vec3 vViewPosition;","#ifndef FLAT_SHADED","	varying vec3 vNormal;","#endif",i.ShaderChunk.common,i.ShaderChunk.map_pars_vertex,i.ShaderChunk.lightmap_pars_vertex,i.ShaderChunk.envmap_pars_vertex,i.ShaderChunk.lights_phong_pars_vertex,i.ShaderChunk.color_pars_vertex,i.ShaderChunk.morphtarget_pars_vertex,i.ShaderChunk.skinning_pars_vertex,i.ShaderChunk.shadowmap_pars_vertex,i.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",i.ShaderChunk.map_vertex,i.ShaderChunk.lightmap_vertex,i.ShaderChunk.color_vertex,i.ShaderChunk.morphnormal_vertex,i.ShaderChunk.skinbase_vertex,i.ShaderChunk.skinnormal_vertex,i.ShaderChunk.defaultnormal_vertex,"#ifndef FLAT_SHADED","	vNormal = normalize( transformedNormal );","#endif",i.ShaderChunk.morphtarget_vertex,i.ShaderChunk.skinning_vertex,i.ShaderChunk.default_vertex,i.ShaderChunk.logdepthbuf_vertex,"	vViewPosition = -mvPosition.xyz;",i.ShaderChunk.worldpos_vertex,i.ShaderChunk.envmap_vertex,i.ShaderChunk.lights_phong_vertex,i.ShaderChunk.shadowmap_vertex,"}"].join(`
`),fragmentShader:["#define PHONG","uniform vec3 diffuse;","uniform vec3 emissive;","uniform vec3 specular;","uniform float shininess;","uniform float opacity;",i.ShaderChunk.common,i.ShaderChunk.color_pars_fragment,i.ShaderChunk.map_pars_fragment,i.ShaderChunk.alphamap_pars_fragment,i.ShaderChunk.lightmap_pars_fragment,i.ShaderChunk.envmap_pars_fragment,i.ShaderChunk.fog_pars_fragment,i.ShaderChunk.lights_phong_pars_fragment,i.ShaderChunk.shadowmap_pars_fragment,i.ShaderChunk.bumpmap_pars_fragment,i.ShaderChunk.normalmap_pars_fragment,i.ShaderChunk.specularmap_pars_fragment,i.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	vec3 outgoingLight = vec3( 0.0 );","	vec4 diffuseColor = vec4( diffuse, opacity );",i.ShaderChunk.logdepthbuf_fragment,i.ShaderChunk.map_fragment,i.ShaderChunk.color_fragment,i.ShaderChunk.alphamap_fragment,i.ShaderChunk.alphatest_fragment,i.ShaderChunk.specularmap_fragment,i.ShaderChunk.lights_phong_fragment,i.ShaderChunk.lightmap_fragment,i.ShaderChunk.envmap_fragment,i.ShaderChunk.shadowmap_fragment,i.ShaderChunk.linear_to_gamma_fragment,i.ShaderChunk.fog_fragment,"	gl_FragColor = vec4( outgoingLight, diffuseColor.a );","}"].join(`
`)},particle_basic:{uniforms:i.UniformsUtils.merge([i.UniformsLib.particle,i.UniformsLib.shadowmap]),vertexShader:["uniform float size;","uniform float scale;",i.ShaderChunk.common,i.ShaderChunk.color_pars_vertex,i.ShaderChunk.shadowmap_pars_vertex,i.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",i.ShaderChunk.color_vertex,"	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","	#ifdef USE_SIZEATTENUATION","		gl_PointSize = size * ( scale / length( mvPosition.xyz ) );","	#else","		gl_PointSize = size;","	#endif","	gl_Position = projectionMatrix * mvPosition;",i.ShaderChunk.logdepthbuf_vertex,i.ShaderChunk.worldpos_vertex,i.ShaderChunk.shadowmap_vertex,"}"].join(`
`),fragmentShader:["uniform vec3 psColor;","uniform float opacity;",i.ShaderChunk.common,i.ShaderChunk.color_pars_fragment,i.ShaderChunk.map_particle_pars_fragment,i.ShaderChunk.fog_pars_fragment,i.ShaderChunk.shadowmap_pars_fragment,i.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	vec3 outgoingLight = vec3( 0.0 );","	vec4 diffuseColor = vec4( psColor, opacity );",i.ShaderChunk.logdepthbuf_fragment,i.ShaderChunk.map_particle_fragment,i.ShaderChunk.color_fragment,i.ShaderChunk.alphatest_fragment,"	outgoingLight = diffuseColor.rgb;",i.ShaderChunk.shadowmap_fragment,i.ShaderChunk.fog_fragment,"	gl_FragColor = vec4( outgoingLight, diffuseColor.a );","}"].join(`
`)},dashed:{uniforms:i.UniformsUtils.merge([i.UniformsLib.common,i.UniformsLib.fog,{scale:{type:"f",value:1},dashSize:{type:"f",value:1},totalSize:{type:"f",value:2}}]),vertexShader:["uniform float scale;","attribute float lineDistance;","varying float vLineDistance;",i.ShaderChunk.common,i.ShaderChunk.color_pars_vertex,i.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",i.ShaderChunk.color_vertex,"	vLineDistance = scale * lineDistance;","	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","	gl_Position = projectionMatrix * mvPosition;",i.ShaderChunk.logdepthbuf_vertex,"}"].join(`
`),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;","uniform float dashSize;","uniform float totalSize;","varying float vLineDistance;",i.ShaderChunk.common,i.ShaderChunk.color_pars_fragment,i.ShaderChunk.fog_pars_fragment,i.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	if ( mod( vLineDistance, totalSize ) > dashSize ) {","		discard;","	}","	vec3 outgoingLight = vec3( 0.0 );","	vec4 diffuseColor = vec4( diffuse, opacity );",i.ShaderChunk.logdepthbuf_fragment,i.ShaderChunk.color_fragment,"	outgoingLight = diffuseColor.rgb;",i.ShaderChunk.fog_fragment,"	gl_FragColor = vec4( outgoingLight, diffuseColor.a );","}"].join(`
`)},depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2e3},opacity:{type:"f",value:1}},vertexShader:[i.ShaderChunk.common,i.ShaderChunk.morphtarget_pars_vertex,i.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",i.ShaderChunk.morphtarget_vertex,i.ShaderChunk.default_vertex,i.ShaderChunk.logdepthbuf_vertex,"}"].join(`
`),fragmentShader:["uniform float mNear;","uniform float mFar;","uniform float opacity;",i.ShaderChunk.common,i.ShaderChunk.logdepthbuf_pars_fragment,"void main() {",i.ShaderChunk.logdepthbuf_fragment,"	#ifdef USE_LOGDEPTHBUF_EXT","		float depth = gl_FragDepthEXT / gl_FragCoord.w;","	#else","		float depth = gl_FragCoord.z / gl_FragCoord.w;","	#endif","	float color = 1.0 - smoothstep( mNear, mFar, depth );","	gl_FragColor = vec4( vec3( color ), opacity );","}"].join(`
`)},normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:["varying vec3 vNormal;",i.ShaderChunk.common,i.ShaderChunk.morphtarget_pars_vertex,i.ShaderChunk.logdepthbuf_pars_vertex,"void main() {","	vNormal = normalize( normalMatrix * normal );",i.ShaderChunk.morphtarget_vertex,i.ShaderChunk.default_vertex,i.ShaderChunk.logdepthbuf_vertex,"}"].join(`
`),fragmentShader:["uniform float opacity;","varying vec3 vNormal;",i.ShaderChunk.common,i.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );",i.ShaderChunk.logdepthbuf_fragment,"}"].join(`
`)},cube:{uniforms:{tCube:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",i.ShaderChunk.common,i.ShaderChunk.logdepthbuf_pars_vertex,"void main() {","	vWorldPosition = transformDirection( position, modelMatrix );","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",i.ShaderChunk.logdepthbuf_vertex,"}"].join(`
`),fragmentShader:["uniform samplerCube tCube;","uniform float tFlip;","varying vec3 vWorldPosition;",i.ShaderChunk.common,i.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );",i.ShaderChunk.logdepthbuf_fragment,"}"].join(`
`)},equirect:{uniforms:{tEquirect:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",i.ShaderChunk.common,i.ShaderChunk.logdepthbuf_pars_vertex,"void main() {","	vWorldPosition = transformDirection( position, modelMatrix );","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",i.ShaderChunk.logdepthbuf_vertex,"}"].join(`
`),fragmentShader:["uniform sampler2D tEquirect;","uniform float tFlip;","varying vec3 vWorldPosition;",i.ShaderChunk.common,i.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","vec3 direction = normalize( vWorldPosition );","vec2 sampleUV;","sampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );","sampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;","gl_FragColor = texture2D( tEquirect, sampleUV );",i.ShaderChunk.logdepthbuf_fragment,"}"].join(`
`)},depthRGBA:{uniforms:{},vertexShader:[i.ShaderChunk.common,i.ShaderChunk.morphtarget_pars_vertex,i.ShaderChunk.skinning_pars_vertex,i.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",i.ShaderChunk.skinbase_vertex,i.ShaderChunk.morphtarget_vertex,i.ShaderChunk.skinning_vertex,i.ShaderChunk.default_vertex,i.ShaderChunk.logdepthbuf_vertex,"}"].join(`
`),fragmentShader:[i.ShaderChunk.common,i.ShaderChunk.logdepthbuf_pars_fragment,"vec4 pack_depth( const in float depth ) {","	const vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );","	const vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );","	vec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );","	res -= res.xxyz * bit_mask;","	return res;","}","void main() {",i.ShaderChunk.logdepthbuf_fragment,"	#ifdef USE_LOGDEPTHBUF_EXT","		gl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );","	#else","		gl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );","	#endif","}"].join(`
`)}},i.WebGLRenderer=function(r){r=r||{};var e=r.canvas!==void 0?r.canvas:document.createElement("canvas"),o=r.context!==void 0?r.context:null,s=1,d=r.precision!==void 0?r.precision:"highp",p=r.alpha!==void 0?r.alpha:!1,x=r.depth!==void 0?r.depth:!0,l=r.stencil!==void 0?r.stencil:!0,_=r.antialias!==void 0?r.antialias:!1,v=r.premultipliedAlpha!==void 0?r.premultipliedAlpha:!0,c=r.preserveDrawingBuffer!==void 0?r.preserveDrawingBuffer:!1,h=r.logarithmicDepthBuffer!==void 0?r.logarithmicDepthBuffer:!1,f=new i.Color(0),m=0,b=[],w={},C=[],E=[],S=[],M=[],A=[];this.domElement=e,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.shadowMapEnabled=!1,this.shadowMapType=i.PCFShadowMap,this.shadowMapCullFace=i.CullFaceFront,this.shadowMapDebug=!1,this.shadowMapCascade=!1,this.maxMorphTargets=8,this.maxMorphNormals=4,this.autoScaleCubemaps=!0,this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}};var R=this,D=[],N=null,I=null,L=-1,Y="",J=null,ie=0,K=0,Q=0,ne=e.width,ue=e.height,fe=0,ge=0,ye=new i.Frustum,pe=new i.Matrix4,de=new i.Vector3,he=new i.Vector3,_e=!0,ve={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[],decays:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[],decays:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}},Z,be=function(oe){oe.preventDefault(),Ke(),Qe(),w={}};try{var Ee={alpha:p,depth:x,stencil:l,antialias:_,premultipliedAlpha:v,preserveDrawingBuffer:c};if(Z=o||e.getContext("webgl",Ee)||e.getContext("experimental-webgl",Ee),Z===null)throw e.getContext("webgl")!==null?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";e.addEventListener("webglcontextlost",be,!1)}catch(oe){i.error("THREE.WebGLRenderer: "+oe)}this.dispose=function(){e.removeEventListener("webglcontextlost",be,!1)};var De=new i.WebGLState(Z,Ci);Z.getShaderPrecisionFormat===void 0&&(Z.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}});var Fe=new i.WebGLExtensions(Z);Fe.get("OES_texture_float"),Fe.get("OES_texture_float_linear"),Fe.get("OES_texture_half_float"),Fe.get("OES_texture_half_float_linear"),Fe.get("OES_standard_derivatives"),h&&Fe.get("EXT_frag_depth");var Ue=function(oe,Me,We,Ve){v===!0&&(oe*=Ve,Me*=Ve,We*=Ve),Z.clearColor(oe,Me,We,Ve)},Qe=function(){Z.clearColor(0,0,0,1),Z.clearDepth(1),Z.clearStencil(0),Z.enable(Z.DEPTH_TEST),Z.depthFunc(Z.LEQUAL),Z.frontFace(Z.CCW),Z.cullFace(Z.BACK),Z.enable(Z.CULL_FACE),Z.enable(Z.BLEND),Z.blendEquation(Z.FUNC_ADD),Z.blendFunc(Z.SRC_ALPHA,Z.ONE_MINUS_SRC_ALPHA),Z.viewport(K,Q,ne,ue),Ue(f.r,f.g,f.b,m)},Ke=function(){N=null,J=null,Y="",L=-1,_e=!0,De.reset()};Qe(),this.context=Z,this.state=De;var Te=Z.getParameter(Z.MAX_TEXTURE_IMAGE_UNITS),Ie=Z.getParameter(Z.MAX_VERTEX_TEXTURE_IMAGE_UNITS),ke=Z.getParameter(Z.MAX_TEXTURE_SIZE),nt=Z.getParameter(Z.MAX_CUBE_MAP_TEXTURE_SIZE),dt=Ie>0,yt=dt&&Fe.get("OES_texture_float"),gt=Z.getShaderPrecisionFormat(Z.VERTEX_SHADER,Z.HIGH_FLOAT),xt=Z.getShaderPrecisionFormat(Z.VERTEX_SHADER,Z.MEDIUM_FLOAT),tt=Z.getShaderPrecisionFormat(Z.FRAGMENT_SHADER,Z.HIGH_FLOAT),pt=Z.getShaderPrecisionFormat(Z.FRAGMENT_SHADER,Z.MEDIUM_FLOAT),At=function(){var oe;return function(){if(oe!==void 0)return oe;if(oe=[],Fe.get("WEBGL_compressed_texture_pvrtc")||Fe.get("WEBGL_compressed_texture_s3tc"))for(var Me=Z.getParameter(Z.COMPRESSED_TEXTURE_FORMATS),We=0;We<Me.length;We++)oe.push(Me[We]);return oe}}(),Tt=gt.precision>0&&tt.precision>0,Ct=xt.precision>0&&pt.precision>0;d==="highp"&&!Tt&&(Ct?(d="mediump",i.warn("THREE.WebGLRenderer: highp not supported, using mediump.")):(d="lowp",i.warn("THREE.WebGLRenderer: highp and mediump not supported, using lowp."))),d==="mediump"&&!Ct&&(d="lowp",i.warn("THREE.WebGLRenderer: mediump not supported, using lowp."));var Bt=new i.ShadowMapPlugin(this,b,w,C),nr=new i.SpritePlugin(this,M),$t=new i.LensFlarePlugin(this,A);this.getContext=function(){return Z},this.forceContextLoss=function(){Fe.get("WEBGL_lose_context").loseContext()},this.supportsVertexTextures=function(){return dt},this.supportsFloatTextures=function(){return Fe.get("OES_texture_float")},this.supportsHalfFloatTextures=function(){return Fe.get("OES_texture_half_float")},this.supportsStandardDerivatives=function(){return Fe.get("OES_standard_derivatives")},this.supportsCompressedTextureS3TC=function(){return Fe.get("WEBGL_compressed_texture_s3tc")},this.supportsCompressedTexturePVRTC=function(){return Fe.get("WEBGL_compressed_texture_pvrtc")},this.supportsBlendMinMax=function(){return Fe.get("EXT_blend_minmax")},this.getMaxAnisotropy=function(){var oe;return function(){if(oe!==void 0)return oe;var Me=Fe.get("EXT_texture_filter_anisotropic");return oe=Me!==null?Z.getParameter(Me.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,oe}}(),this.getPrecision=function(){return d},this.getPixelRatio=function(){return s},this.setPixelRatio=function(oe){s=oe},this.setSize=function(oe,Me,We){e.width=oe*s,e.height=Me*s,We!==!1&&(e.style.width=oe+"px",e.style.height=Me+"px"),this.setViewport(0,0,oe,Me)},this.setViewport=function(oe,Me,We,Ve){K=oe*s,Q=Me*s,ne=We*s,ue=Ve*s,Z.viewport(K,Q,ne,ue)},this.setScissor=function(oe,Me,We,Ve){Z.scissor(oe*s,Me*s,We*s,Ve*s)},this.enableScissorTest=function(oe){oe?Z.enable(Z.SCISSOR_TEST):Z.disable(Z.SCISSOR_TEST)},this.getClearColor=function(){return f},this.setClearColor=function(oe,Me){f.set(oe),m=Me!==void 0?Me:1,Ue(f.r,f.g,f.b,m)},this.getClearAlpha=function(){return m},this.setClearAlpha=function(oe){m=oe,Ue(f.r,f.g,f.b,m)},this.clear=function(oe,Me,We){var Ve=0;(oe===void 0||oe)&&(Ve|=Z.COLOR_BUFFER_BIT),(Me===void 0||Me)&&(Ve|=Z.DEPTH_BUFFER_BIT),(We===void 0||We)&&(Ve|=Z.STENCIL_BUFFER_BIT),Z.clear(Ve)},this.clearColor=function(){Z.clear(Z.COLOR_BUFFER_BIT)},this.clearDepth=function(){Z.clear(Z.DEPTH_BUFFER_BIT)},this.clearStencil=function(){Z.clear(Z.STENCIL_BUFFER_BIT)},this.clearTarget=function(oe,Me,We,Ve){this.setRenderTarget(oe),this.clear(Me,We,Ve)},this.resetGLState=Ke;function It(oe){oe.__webglVertexBuffer=Z.createBuffer(),oe.__webglColorBuffer=Z.createBuffer(),R.info.memory.geometries++}function Lt(oe){oe.__webglVertexBuffer=Z.createBuffer(),oe.__webglColorBuffer=Z.createBuffer(),oe.__webglLineDistanceBuffer=Z.createBuffer(),R.info.memory.geometries++}function Pt(oe){oe.__webglVertexBuffer=Z.createBuffer(),oe.__webglNormalBuffer=Z.createBuffer(),oe.__webglTangentBuffer=Z.createBuffer(),oe.__webglColorBuffer=Z.createBuffer(),oe.__webglUVBuffer=Z.createBuffer(),oe.__webglUV2Buffer=Z.createBuffer(),oe.__webglSkinIndicesBuffer=Z.createBuffer(),oe.__webglSkinWeightsBuffer=Z.createBuffer(),oe.__webglFaceBuffer=Z.createBuffer(),oe.__webglLineBuffer=Z.createBuffer();var Me=oe.numMorphTargets;if(Me){oe.__webglMorphTargetsBuffers=[];for(var We=0,Ve=Me;We<Ve;We++)oe.__webglMorphTargetsBuffers.push(Z.createBuffer())}var ot=oe.numMorphNormals;if(ot){oe.__webglMorphNormalsBuffers=[];for(var We=0,Ve=ot;We<Ve;We++)oe.__webglMorphNormalsBuffers.push(Z.createBuffer())}R.info.memory.geometries++}var He=function(oe){var Me=oe.target;Me.traverse(function(We){We.removeEventListener("remove",He),jn(We)})},Be=function(oe){var Me=oe.target;Me.removeEventListener("dispose",Be),et(Me)},Ge=function(oe){var Me=oe.target;Me.removeEventListener("dispose",Ge),it(Me),R.info.memory.textures--},Re=function(oe){var Me=oe.target;Me.removeEventListener("dispose",Re),at(Me),R.info.memory.textures--},Ne=function(oe){var Me=oe.target;Me.removeEventListener("dispose",Ne),vt(Me)},ze=function(oe){for(var Me=["__webglVertexBuffer","__webglNormalBuffer","__webglTangentBuffer","__webglColorBuffer","__webglUVBuffer","__webglUV2Buffer","__webglSkinIndicesBuffer","__webglSkinWeightsBuffer","__webglFaceBuffer","__webglLineBuffer","__webglLineDistanceBuffer"],We=0,Ve=Me.length;We<Ve;We++){var ot=Me[We];oe[ot]!==void 0&&(Z.deleteBuffer(oe[ot]),delete oe[ot])}if(oe.__webglCustomAttributesList!==void 0){for(var ot in oe.__webglCustomAttributesList)Z.deleteBuffer(oe.__webglCustomAttributesList[ot].buffer);delete oe.__webglCustomAttributesList}R.info.memory.geometries--},et=function(oe){if(delete oe.__webglInit,oe instanceof i.BufferGeometry){for(var Me in oe.attributes){var We=oe.attributes[Me];We.buffer!==void 0&&(Z.deleteBuffer(We.buffer),delete We.buffer)}R.info.memory.geometries--}else{var Ve=Zr[oe.id];if(Ve!==void 0){for(var ot=0,ct=Ve.length;ot<ct;ot++){var Ye=Ve[ot];if(Ye.numMorphTargets!==void 0){for(var st=0,wt=Ye.numMorphTargets;st<wt;st++)Z.deleteBuffer(Ye.__webglMorphTargetsBuffers[st]);delete Ye.__webglMorphTargetsBuffers}if(Ye.numMorphNormals!==void 0){for(var st=0,wt=Ye.numMorphNormals;st<wt;st++)Z.deleteBuffer(Ye.__webglMorphNormalsBuffers[st]);delete Ye.__webglMorphNormalsBuffers}ze(Ye)}delete Zr[oe.id]}else ze(oe)}Y=""},it=function(oe){if(oe.image&&oe.image.__webglTextureCube)Z.deleteTexture(oe.image.__webglTextureCube),delete oe.image.__webglTextureCube;else{if(oe.__webglInit===void 0)return;Z.deleteTexture(oe.__webglTexture),delete oe.__webglTexture,delete oe.__webglInit}},at=function(oe){if(!(!oe||oe.__webglTexture===void 0)){if(Z.deleteTexture(oe.__webglTexture),delete oe.__webglTexture,oe instanceof i.WebGLRenderTargetCube)for(var Me=0;Me<6;Me++)Z.deleteFramebuffer(oe.__webglFramebuffer[Me]),Z.deleteRenderbuffer(oe.__webglRenderbuffer[Me]);else Z.deleteFramebuffer(oe.__webglFramebuffer),Z.deleteRenderbuffer(oe.__webglRenderbuffer);delete oe.__webglFramebuffer,delete oe.__webglRenderbuffer}},vt=function(oe){var Me=oe.program.program;if(Me!==void 0){oe.program=void 0;var We,Ve,ot,ct=!1;for(We=0,Ve=D.length;We<Ve;We++)if(ot=D[We],ot.program===Me){ot.usedTimes--,ot.usedTimes===0&&(ct=!0);break}if(ct===!0){var Ye=[];for(We=0,Ve=D.length;We<Ve;We++)ot=D[We],ot.program!==Me&&Ye.push(ot);D=Ye,Z.deleteProgram(Me),R.info.memory.programs--}}};function jt(oe){var Me=oe.geometry,We=oe.material,Ve=Me.vertices.length;if(We.attributes){Me.__webglCustomAttributesList===void 0&&(Me.__webglCustomAttributesList=[]);for(var ot in We.attributes){var ct=We.attributes[ot];if(!ct.__webglInitialized||ct.createUniqueBuffers){ct.__webglInitialized=!0;var Ye=1;ct.type==="v2"?Ye=2:ct.type==="v3"?Ye=3:ct.type==="v4"?Ye=4:ct.type==="c"&&(Ye=3),ct.size=Ye,ct.array=new Float32Array(Ve*Ye),ct.buffer=Z.createBuffer(),ct.buffer.belongsToAttribute=ot,ct.needsUpdate=!0}Me.__webglCustomAttributesList.push(ct)}}}function Nt(oe,Me){var We=oe.vertices.length;oe.__vertexArray=new Float32Array(We*3),oe.__colorArray=new Float32Array(We*3),oe.__webglParticleCount=We,jt(Me)}function Dt(oe,Me){var We=oe.vertices.length;oe.__vertexArray=new Float32Array(We*3),oe.__colorArray=new Float32Array(We*3),oe.__lineDistanceArray=new Float32Array(We*1),oe.__webglLineCount=We,jt(Me)}function Gt(oe,Me){var We=Me.geometry,Ve=oe.faces3,ot=Ve.length*3,ct=Ve.length*1,Ye=Ve.length*3,st=or(Me,oe);oe.__vertexArray=new Float32Array(ot*3),oe.__normalArray=new Float32Array(ot*3),oe.__colorArray=new Float32Array(ot*3),oe.__uvArray=new Float32Array(ot*2),We.faceVertexUvs.length>1&&(oe.__uv2Array=new Float32Array(ot*2)),We.hasTangents&&(oe.__tangentArray=new Float32Array(ot*4)),Me.geometry.skinWeights.length&&Me.geometry.skinIndices.length&&(oe.__skinIndexArray=new Float32Array(ot*4),oe.__skinWeightArray=new Float32Array(ot*4));var wt=Fe.get("OES_element_index_uint")!==null&&ct>21845?Uint32Array:Uint16Array;oe.__typeArray=wt,oe.__faceArray=new wt(ct*3),oe.__lineArray=new wt(Ye*2);var St=oe.numMorphTargets;if(St){oe.__morphTargetsArrays=[];for(var z=0,ee=St;z<ee;z++)oe.__morphTargetsArrays.push(new Float32Array(ot*3))}var ce=oe.numMorphNormals;if(ce){oe.__morphNormalsArrays=[];for(var z=0,ee=ce;z<ee;z++)oe.__morphNormalsArrays.push(new Float32Array(ot*3))}if(oe.__webglFaceCount=ct*3,oe.__webglLineCount=Ye*2,st.attributes){oe.__webglCustomAttributesList===void 0&&(oe.__webglCustomAttributesList=[]);for(var me in st.attributes){var Se=st.attributes[me],Ce={};for(var Pe in Se)Ce[Pe]=Se[Pe];if(!Ce.__webglInitialized||Ce.createUniqueBuffers){Ce.__webglInitialized=!0;var $e=1;Ce.type==="v2"?$e=2:Ce.type==="v3"?$e=3:Ce.type==="v4"?$e=4:Ce.type==="c"&&($e=3),Ce.size=$e,Ce.array=new Float32Array(ot*$e),Ce.buffer=Z.createBuffer(),Ce.buffer.belongsToAttribute=me,Se.needsUpdate=!0,Ce.__original=Se}oe.__webglCustomAttributesList.push(Ce)}}oe.__inittedArrays=!0}function or(oe,Me){return oe.material instanceof i.MeshFaceMaterial?oe.material.materials[Me.materialIndex]:oe.material}function Jt(oe){return!(oe instanceof i.MeshPhongMaterial)&&oe.shading===i.FlatShading}function pr(oe,Me,We){var Ve,ot,ct,Ye,st,wt=oe.vertices,St=wt.length,z=oe.colors,ee=z.length,ce=oe.__vertexArray,me=oe.__colorArray,Se=oe.verticesNeedUpdate,Ce=oe.colorsNeedUpdate,Pe=oe.__webglCustomAttributesList,$e,qe,rt,_t,Mt,mt;if(Se){for(Ve=0;Ve<St;Ve++)ct=wt[Ve],Ye=Ve*3,ce[Ye]=ct.x,ce[Ye+1]=ct.y,ce[Ye+2]=ct.z;Z.bindBuffer(Z.ARRAY_BUFFER,oe.__webglVertexBuffer),Z.bufferData(Z.ARRAY_BUFFER,ce,Me)}if(Ce){for(ot=0;ot<ee;ot++)st=z[ot],Ye=ot*3,me[Ye]=st.r,me[Ye+1]=st.g,me[Ye+2]=st.b;Z.bindBuffer(Z.ARRAY_BUFFER,oe.__webglColorBuffer),Z.bufferData(Z.ARRAY_BUFFER,me,Me)}if(Pe)for($e=0,qe=Pe.length;$e<qe;$e++){if(mt=Pe[$e],mt.needsUpdate&&(mt.boundTo===void 0||mt.boundTo==="vertices")){if(_t=mt.value.length,Ye=0,mt.size===1)for(rt=0;rt<_t;rt++)mt.array[rt]=mt.value[rt];else if(mt.size===2)for(rt=0;rt<_t;rt++)Mt=mt.value[rt],mt.array[Ye]=Mt.x,mt.array[Ye+1]=Mt.y,Ye+=2;else if(mt.size===3)if(mt.type==="c")for(rt=0;rt<_t;rt++)Mt=mt.value[rt],mt.array[Ye]=Mt.r,mt.array[Ye+1]=Mt.g,mt.array[Ye+2]=Mt.b,Ye+=3;else for(rt=0;rt<_t;rt++)Mt=mt.value[rt],mt.array[Ye]=Mt.x,mt.array[Ye+1]=Mt.y,mt.array[Ye+2]=Mt.z,Ye+=3;else if(mt.size===4)for(rt=0;rt<_t;rt++)Mt=mt.value[rt],mt.array[Ye]=Mt.x,mt.array[Ye+1]=Mt.y,mt.array[Ye+2]=Mt.z,mt.array[Ye+3]=Mt.w,Ye+=4}Z.bindBuffer(Z.ARRAY_BUFFER,mt.buffer),Z.bufferData(Z.ARRAY_BUFFER,mt.array,Me),mt.needsUpdate=!1}}function lr(oe,Me){var We,Ve,ot,ct,Ye,st,wt=oe.vertices,St=oe.colors,z=oe.lineDistances,ee=wt.length,ce=St.length,me=z.length,Se=oe.__vertexArray,Ce=oe.__colorArray,Pe=oe.__lineDistanceArray,$e=oe.verticesNeedUpdate,qe=oe.colorsNeedUpdate,rt=oe.lineDistancesNeedUpdate,_t=oe.__webglCustomAttributesList,Mt,mt,Ut,xr,Cr,er;if($e){for(We=0;We<ee;We++)ct=wt[We],Ye=We*3,Se[Ye]=ct.x,Se[Ye+1]=ct.y,Se[Ye+2]=ct.z;Z.bindBuffer(Z.ARRAY_BUFFER,oe.__webglVertexBuffer),Z.bufferData(Z.ARRAY_BUFFER,Se,Me)}if(qe){for(Ve=0;Ve<ce;Ve++)st=St[Ve],Ye=Ve*3,Ce[Ye]=st.r,Ce[Ye+1]=st.g,Ce[Ye+2]=st.b;Z.bindBuffer(Z.ARRAY_BUFFER,oe.__webglColorBuffer),Z.bufferData(Z.ARRAY_BUFFER,Ce,Me)}if(rt){for(ot=0;ot<me;ot++)Pe[ot]=z[ot];Z.bindBuffer(Z.ARRAY_BUFFER,oe.__webglLineDistanceBuffer),Z.bufferData(Z.ARRAY_BUFFER,Pe,Me)}if(_t){for(Mt=0,mt=_t.length;Mt<mt;Mt++)if(er=_t[Mt],er.needsUpdate&&(er.boundTo===void 0||er.boundTo==="vertices")){if(Ye=0,xr=er.value.length,er.size===1)for(Ut=0;Ut<xr;Ut++)er.array[Ut]=er.value[Ut];else if(er.size===2)for(Ut=0;Ut<xr;Ut++)Cr=er.value[Ut],er.array[Ye]=Cr.x,er.array[Ye+1]=Cr.y,Ye+=2;else if(er.size===3)if(er.type==="c")for(Ut=0;Ut<xr;Ut++)Cr=er.value[Ut],er.array[Ye]=Cr.r,er.array[Ye+1]=Cr.g,er.array[Ye+2]=Cr.b,Ye+=3;else for(Ut=0;Ut<xr;Ut++)Cr=er.value[Ut],er.array[Ye]=Cr.x,er.array[Ye+1]=Cr.y,er.array[Ye+2]=Cr.z,Ye+=3;else if(er.size===4)for(Ut=0;Ut<xr;Ut++)Cr=er.value[Ut],er.array[Ye]=Cr.x,er.array[Ye+1]=Cr.y,er.array[Ye+2]=Cr.z,er.array[Ye+3]=Cr.w,Ye+=4;Z.bindBuffer(Z.ARRAY_BUFFER,er.buffer),Z.bufferData(Z.ARRAY_BUFFER,er.array,Me),er.needsUpdate=!1}}}function Lr(oe,Me,We,Ve,ot){if(oe.__inittedArrays){var ct=Jt(ot),Ye,st,wt,St,z,ee,ce,me,Se,Ce,Pe,$e,qe,rt,_t,Mt,mt,Ut,xr,Cr,er,En,Tn,$n,Mn,Rr,Qn,Hr,Mr,_n,io,zn,In,Pn,hn,ji,Kr,vn,gi,Si,pi=0,$i=0,wn=0,Qr=0,mo=0,sn=0,Gn=0,vo=0,Ri=0,un=0,Yr=0,Zt=0,Jr,yi=oe.__vertexArray,go=oe.__uvArray,yo=oe.__uv2Array,dn=oe.__normalArray,li=oe.__tangentArray,Vi=oe.__colorArray,Ln=oe.__skinIndexArray,Xn=oe.__skinWeightArray,Yo=oe.__morphTargetsArrays,da=oe.__morphNormalsArrays,xi=oe.__webglCustomAttributesList,Ot,Ze=oe.__faceArray,ht=oe.__lineArray,bt=Me.geometry,kt=bt.verticesNeedUpdate,Ft=bt.elementsNeedUpdate,Kt=bt.uvsNeedUpdate,ur=bt.normalsNeedUpdate,br=bt.tangentsNeedUpdate,hr=bt.colorsNeedUpdate,Xr=bt.morphTargetsNeedUpdate,Ir=bt.vertices,ir=oe.faces3,W=bt.faces,se=bt.faceVertexUvs[0],we=bt.faceVertexUvs[1],Ae=bt.skinIndices,Oe=bt.skinWeights,je=bt.morphTargets,ut=bt.morphNormals;if(kt){for(Ye=0,st=ir.length;Ye<st;Ye++)St=W[ir[Ye]],$e=Ir[St.a],qe=Ir[St.b],rt=Ir[St.c],yi[$i]=$e.x,yi[$i+1]=$e.y,yi[$i+2]=$e.z,yi[$i+3]=qe.x,yi[$i+4]=qe.y,yi[$i+5]=qe.z,yi[$i+6]=rt.x,yi[$i+7]=rt.y,yi[$i+8]=rt.z,$i+=9;Z.bindBuffer(Z.ARRAY_BUFFER,oe.__webglVertexBuffer),Z.bufferData(Z.ARRAY_BUFFER,yi,We)}if(Xr)for(hn=0,ji=je.length;hn<ji;hn++){for(Yr=0,Ye=0,st=ir.length;Ye<st;Ye++)gi=ir[Ye],St=W[gi],$e=je[hn].vertices[St.a],qe=je[hn].vertices[St.b],rt=je[hn].vertices[St.c],Kr=Yo[hn],Kr[Yr]=$e.x,Kr[Yr+1]=$e.y,Kr[Yr+2]=$e.z,Kr[Yr+3]=qe.x,Kr[Yr+4]=qe.y,Kr[Yr+5]=qe.z,Kr[Yr+6]=rt.x,Kr[Yr+7]=rt.y,Kr[Yr+8]=rt.z,ot.morphNormals&&(ct?(Ut=ut[hn].faceNormals[gi],xr=Ut,Cr=Ut):(Si=ut[hn].vertexNormals[gi],Ut=Si.a,xr=Si.b,Cr=Si.c),vn=da[hn],vn[Yr]=Ut.x,vn[Yr+1]=Ut.y,vn[Yr+2]=Ut.z,vn[Yr+3]=xr.x,vn[Yr+4]=xr.y,vn[Yr+5]=xr.z,vn[Yr+6]=Cr.x,vn[Yr+7]=Cr.y,vn[Yr+8]=Cr.z),Yr+=9;Z.bindBuffer(Z.ARRAY_BUFFER,oe.__webglMorphTargetsBuffers[hn]),Z.bufferData(Z.ARRAY_BUFFER,Yo[hn],We),ot.morphNormals&&(Z.bindBuffer(Z.ARRAY_BUFFER,oe.__webglMorphNormalsBuffers[hn]),Z.bufferData(Z.ARRAY_BUFFER,da[hn],We))}if(Oe.length){for(Ye=0,st=ir.length;Ye<st;Ye++)St=W[ir[Ye]],$n=Oe[St.a],Mn=Oe[St.b],Rr=Oe[St.c],Xn[un]=$n.x,Xn[un+1]=$n.y,Xn[un+2]=$n.z,Xn[un+3]=$n.w,Xn[un+4]=Mn.x,Xn[un+5]=Mn.y,Xn[un+6]=Mn.z,Xn[un+7]=Mn.w,Xn[un+8]=Rr.x,Xn[un+9]=Rr.y,Xn[un+10]=Rr.z,Xn[un+11]=Rr.w,Qn=Ae[St.a],Hr=Ae[St.b],Mr=Ae[St.c],Ln[un]=Qn.x,Ln[un+1]=Qn.y,Ln[un+2]=Qn.z,Ln[un+3]=Qn.w,Ln[un+4]=Hr.x,Ln[un+5]=Hr.y,Ln[un+6]=Hr.z,Ln[un+7]=Hr.w,Ln[un+8]=Mr.x,Ln[un+9]=Mr.y,Ln[un+10]=Mr.z,Ln[un+11]=Mr.w,un+=12;un>0&&(Z.bindBuffer(Z.ARRAY_BUFFER,oe.__webglSkinIndicesBuffer),Z.bufferData(Z.ARRAY_BUFFER,Ln,We),Z.bindBuffer(Z.ARRAY_BUFFER,oe.__webglSkinWeightsBuffer),Z.bufferData(Z.ARRAY_BUFFER,Xn,We))}if(hr){for(Ye=0,st=ir.length;Ye<st;Ye++)St=W[ir[Ye]],ce=St.vertexColors,me=St.color,ce.length===3&&ot.vertexColors===i.VertexColors?(er=ce[0],En=ce[1],Tn=ce[2]):(er=me,En=me,Tn=me),Vi[Ri]=er.r,Vi[Ri+1]=er.g,Vi[Ri+2]=er.b,Vi[Ri+3]=En.r,Vi[Ri+4]=En.g,Vi[Ri+5]=En.b,Vi[Ri+6]=Tn.r,Vi[Ri+7]=Tn.g,Vi[Ri+8]=Tn.b,Ri+=9;Ri>0&&(Z.bindBuffer(Z.ARRAY_BUFFER,oe.__webglColorBuffer),Z.bufferData(Z.ARRAY_BUFFER,Vi,We))}if(br&&bt.hasTangents){for(Ye=0,st=ir.length;Ye<st;Ye++)St=W[ir[Ye]],Se=St.vertexTangents,_t=Se[0],Mt=Se[1],mt=Se[2],li[Gn]=_t.x,li[Gn+1]=_t.y,li[Gn+2]=_t.z,li[Gn+3]=_t.w,li[Gn+4]=Mt.x,li[Gn+5]=Mt.y,li[Gn+6]=Mt.z,li[Gn+7]=Mt.w,li[Gn+8]=mt.x,li[Gn+9]=mt.y,li[Gn+10]=mt.z,li[Gn+11]=mt.w,Gn+=12;Z.bindBuffer(Z.ARRAY_BUFFER,oe.__webglTangentBuffer),Z.bufferData(Z.ARRAY_BUFFER,li,We)}if(ur){for(Ye=0,st=ir.length;Ye<st;Ye++)if(St=W[ir[Ye]],z=St.vertexNormals,ee=St.normal,z.length===3&&ct===!1)for(_n=0;_n<3;_n++)zn=z[_n],dn[sn]=zn.x,dn[sn+1]=zn.y,dn[sn+2]=zn.z,sn+=3;else for(_n=0;_n<3;_n++)dn[sn]=ee.x,dn[sn+1]=ee.y,dn[sn+2]=ee.z,sn+=3;Z.bindBuffer(Z.ARRAY_BUFFER,oe.__webglNormalBuffer),Z.bufferData(Z.ARRAY_BUFFER,dn,We)}if(Kt&&se){for(Ye=0,st=ir.length;Ye<st;Ye++)if(wt=ir[Ye],Ce=se[wt],Ce!==void 0)for(_n=0;_n<3;_n++)In=Ce[_n],go[wn]=In.x,go[wn+1]=In.y,wn+=2;wn>0&&(Z.bindBuffer(Z.ARRAY_BUFFER,oe.__webglUVBuffer),Z.bufferData(Z.ARRAY_BUFFER,go,We))}if(Kt&&we){for(Ye=0,st=ir.length;Ye<st;Ye++)if(wt=ir[Ye],Pe=we[wt],Pe!==void 0)for(_n=0;_n<3;_n++)Pn=Pe[_n],yo[Qr]=Pn.x,yo[Qr+1]=Pn.y,Qr+=2;Qr>0&&(Z.bindBuffer(Z.ARRAY_BUFFER,oe.__webglUV2Buffer),Z.bufferData(Z.ARRAY_BUFFER,yo,We))}if(Ft){for(Ye=0,st=ir.length;Ye<st;Ye++)Ze[mo]=pi,Ze[mo+1]=pi+1,Ze[mo+2]=pi+2,mo+=3,ht[vo]=pi,ht[vo+1]=pi+1,ht[vo+2]=pi,ht[vo+3]=pi+2,ht[vo+4]=pi+1,ht[vo+5]=pi+2,vo+=6,pi+=3;Z.bindBuffer(Z.ELEMENT_ARRAY_BUFFER,oe.__webglFaceBuffer),Z.bufferData(Z.ELEMENT_ARRAY_BUFFER,Ze,We),Z.bindBuffer(Z.ELEMENT_ARRAY_BUFFER,oe.__webglLineBuffer),Z.bufferData(Z.ELEMENT_ARRAY_BUFFER,ht,We)}if(xi){for(_n=0,io=xi.length;_n<io;_n++)if(Ot=xi[_n],!!Ot.__original.needsUpdate){if(Zt=0,Ot.size===1){if(Ot.boundTo===void 0||Ot.boundTo==="vertices")for(Ye=0,st=ir.length;Ye<st;Ye++)St=W[ir[Ye]],Ot.array[Zt]=Ot.value[St.a],Ot.array[Zt+1]=Ot.value[St.b],Ot.array[Zt+2]=Ot.value[St.c],Zt+=3;else if(Ot.boundTo==="faces")for(Ye=0,st=ir.length;Ye<st;Ye++)Jr=Ot.value[ir[Ye]],Ot.array[Zt]=Jr,Ot.array[Zt+1]=Jr,Ot.array[Zt+2]=Jr,Zt+=3}else if(Ot.size===2){if(Ot.boundTo===void 0||Ot.boundTo==="vertices")for(Ye=0,st=ir.length;Ye<st;Ye++)St=W[ir[Ye]],$e=Ot.value[St.a],qe=Ot.value[St.b],rt=Ot.value[St.c],Ot.array[Zt]=$e.x,Ot.array[Zt+1]=$e.y,Ot.array[Zt+2]=qe.x,Ot.array[Zt+3]=qe.y,Ot.array[Zt+4]=rt.x,Ot.array[Zt+5]=rt.y,Zt+=6;else if(Ot.boundTo==="faces")for(Ye=0,st=ir.length;Ye<st;Ye++)Jr=Ot.value[ir[Ye]],$e=Jr,qe=Jr,rt=Jr,Ot.array[Zt]=$e.x,Ot.array[Zt+1]=$e.y,Ot.array[Zt+2]=qe.x,Ot.array[Zt+3]=qe.y,Ot.array[Zt+4]=rt.x,Ot.array[Zt+5]=rt.y,Zt+=6}else if(Ot.size===3){var ft;if(Ot.type==="c"?ft=["r","g","b"]:ft=["x","y","z"],Ot.boundTo===void 0||Ot.boundTo==="vertices")for(Ye=0,st=ir.length;Ye<st;Ye++)St=W[ir[Ye]],$e=Ot.value[St.a],qe=Ot.value[St.b],rt=Ot.value[St.c],Ot.array[Zt]=$e[ft[0]],Ot.array[Zt+1]=$e[ft[1]],Ot.array[Zt+2]=$e[ft[2]],Ot.array[Zt+3]=qe[ft[0]],Ot.array[Zt+4]=qe[ft[1]],Ot.array[Zt+5]=qe[ft[2]],Ot.array[Zt+6]=rt[ft[0]],Ot.array[Zt+7]=rt[ft[1]],Ot.array[Zt+8]=rt[ft[2]],Zt+=9;else if(Ot.boundTo==="faces")for(Ye=0,st=ir.length;Ye<st;Ye++)Jr=Ot.value[ir[Ye]],$e=Jr,qe=Jr,rt=Jr,Ot.array[Zt]=$e[ft[0]],Ot.array[Zt+1]=$e[ft[1]],Ot.array[Zt+2]=$e[ft[2]],Ot.array[Zt+3]=qe[ft[0]],Ot.array[Zt+4]=qe[ft[1]],Ot.array[Zt+5]=qe[ft[2]],Ot.array[Zt+6]=rt[ft[0]],Ot.array[Zt+7]=rt[ft[1]],Ot.array[Zt+8]=rt[ft[2]],Zt+=9;else if(Ot.boundTo==="faceVertices")for(Ye=0,st=ir.length;Ye<st;Ye++)Jr=Ot.value[ir[Ye]],$e=Jr[0],qe=Jr[1],rt=Jr[2],Ot.array[Zt]=$e[ft[0]],Ot.array[Zt+1]=$e[ft[1]],Ot.array[Zt+2]=$e[ft[2]],Ot.array[Zt+3]=qe[ft[0]],Ot.array[Zt+4]=qe[ft[1]],Ot.array[Zt+5]=qe[ft[2]],Ot.array[Zt+6]=rt[ft[0]],Ot.array[Zt+7]=rt[ft[1]],Ot.array[Zt+8]=rt[ft[2]],Zt+=9}else if(Ot.size===4){if(Ot.boundTo===void 0||Ot.boundTo==="vertices")for(Ye=0,st=ir.length;Ye<st;Ye++)St=W[ir[Ye]],$e=Ot.value[St.a],qe=Ot.value[St.b],rt=Ot.value[St.c],Ot.array[Zt]=$e.x,Ot.array[Zt+1]=$e.y,Ot.array[Zt+2]=$e.z,Ot.array[Zt+3]=$e.w,Ot.array[Zt+4]=qe.x,Ot.array[Zt+5]=qe.y,Ot.array[Zt+6]=qe.z,Ot.array[Zt+7]=qe.w,Ot.array[Zt+8]=rt.x,Ot.array[Zt+9]=rt.y,Ot.array[Zt+10]=rt.z,Ot.array[Zt+11]=rt.w,Zt+=12;else if(Ot.boundTo==="faces")for(Ye=0,st=ir.length;Ye<st;Ye++)Jr=Ot.value[ir[Ye]],$e=Jr,qe=Jr,rt=Jr,Ot.array[Zt]=$e.x,Ot.array[Zt+1]=$e.y,Ot.array[Zt+2]=$e.z,Ot.array[Zt+3]=$e.w,Ot.array[Zt+4]=qe.x,Ot.array[Zt+5]=qe.y,Ot.array[Zt+6]=qe.z,Ot.array[Zt+7]=qe.w,Ot.array[Zt+8]=rt.x,Ot.array[Zt+9]=rt.y,Ot.array[Zt+10]=rt.z,Ot.array[Zt+11]=rt.w,Zt+=12;else if(Ot.boundTo==="faceVertices")for(Ye=0,st=ir.length;Ye<st;Ye++)Jr=Ot.value[ir[Ye]],$e=Jr[0],qe=Jr[1],rt=Jr[2],Ot.array[Zt]=$e.x,Ot.array[Zt+1]=$e.y,Ot.array[Zt+2]=$e.z,Ot.array[Zt+3]=$e.w,Ot.array[Zt+4]=qe.x,Ot.array[Zt+5]=qe.y,Ot.array[Zt+6]=qe.z,Ot.array[Zt+7]=qe.w,Ot.array[Zt+8]=rt.x,Ot.array[Zt+9]=rt.y,Ot.array[Zt+10]=rt.z,Ot.array[Zt+11]=rt.w,Zt+=12}Z.bindBuffer(Z.ARRAY_BUFFER,Ot.buffer),Z.bufferData(Z.ARRAY_BUFFER,Ot.array,We)}}Ve&&(delete oe.__inittedArrays,delete oe.__colorArray,delete oe.__normalArray,delete oe.__tangentArray,delete oe.__uvArray,delete oe.__uv2Array,delete oe.__faceArray,delete oe.__vertexArray,delete oe.__lineArray,delete oe.__skinIndexArray,delete oe.__skinWeightArray)}}this.renderBufferImmediate=function(oe,Me,We){if(De.initAttributes(),oe.hasPositions&&!oe.__webglVertexBuffer&&(oe.__webglVertexBuffer=Z.createBuffer()),oe.hasNormals&&!oe.__webglNormalBuffer&&(oe.__webglNormalBuffer=Z.createBuffer()),oe.hasUvs&&!oe.__webglUvBuffer&&(oe.__webglUvBuffer=Z.createBuffer()),oe.hasColors&&!oe.__webglColorBuffer&&(oe.__webglColorBuffer=Z.createBuffer()),oe.hasPositions&&(Z.bindBuffer(Z.ARRAY_BUFFER,oe.__webglVertexBuffer),Z.bufferData(Z.ARRAY_BUFFER,oe.positionArray,Z.DYNAMIC_DRAW),De.enableAttribute(Me.attributes.position),Z.vertexAttribPointer(Me.attributes.position,3,Z.FLOAT,!1,0,0)),oe.hasNormals){if(Z.bindBuffer(Z.ARRAY_BUFFER,oe.__webglNormalBuffer),!(We instanceof i.MeshPhongMaterial)&&We.shading===i.FlatShading){var Ve,ot,ct,Ye,st,wt,St,z,ee,ce,me,Se,Ce,Pe,$e=oe.count*3;for(Pe=0;Pe<$e;Pe+=9)Ce=oe.normalArray,Ye=Ce[Pe],St=Ce[Pe+1],ce=Ce[Pe+2],st=Ce[Pe+3],z=Ce[Pe+4],me=Ce[Pe+5],wt=Ce[Pe+6],ee=Ce[Pe+7],Se=Ce[Pe+8],Ve=(Ye+st+wt)/3,ot=(St+z+ee)/3,ct=(ce+me+Se)/3,Ce[Pe]=Ve,Ce[Pe+1]=ot,Ce[Pe+2]=ct,Ce[Pe+3]=Ve,Ce[Pe+4]=ot,Ce[Pe+5]=ct,Ce[Pe+6]=Ve,Ce[Pe+7]=ot,Ce[Pe+8]=ct}Z.bufferData(Z.ARRAY_BUFFER,oe.normalArray,Z.DYNAMIC_DRAW),De.enableAttribute(Me.attributes.normal),Z.vertexAttribPointer(Me.attributes.normal,3,Z.FLOAT,!1,0,0)}oe.hasUvs&&We.map&&(Z.bindBuffer(Z.ARRAY_BUFFER,oe.__webglUvBuffer),Z.bufferData(Z.ARRAY_BUFFER,oe.uvArray,Z.DYNAMIC_DRAW),De.enableAttribute(Me.attributes.uv),Z.vertexAttribPointer(Me.attributes.uv,2,Z.FLOAT,!1,0,0)),oe.hasColors&&We.vertexColors!==i.NoColors&&(Z.bindBuffer(Z.ARRAY_BUFFER,oe.__webglColorBuffer),Z.bufferData(Z.ARRAY_BUFFER,oe.colorArray,Z.DYNAMIC_DRAW),De.enableAttribute(Me.attributes.color),Z.vertexAttribPointer(Me.attributes.color,3,Z.FLOAT,!1,0,0)),De.disableUnusedAttributes(),Z.drawArrays(Z.TRIANGLES,0,oe.count),oe.count=0};function Or(oe,Me,We,Ve){for(var ot=We.attributes,ct=Me.attributes,Ye=Me.attributesKeys,st=0,wt=Ye.length;st<wt;st++){var St=Ye[st],z=ct[St];if(z>=0){var ee=ot[St];if(ee!==void 0){var ce=ee.itemSize;Z.bindBuffer(Z.ARRAY_BUFFER,ee.buffer),De.enableAttribute(z),Z.vertexAttribPointer(z,ce,Z.FLOAT,!1,0,Ve*ce*4)}else oe.defaultAttributeValues!==void 0&&(oe.defaultAttributeValues[St].length===2?Z.vertexAttrib2fv(z,oe.defaultAttributeValues[St]):oe.defaultAttributeValues[St].length===3&&Z.vertexAttrib3fv(z,oe.defaultAttributeValues[St]))}}De.disableUnusedAttributes()}this.renderBufferDirect=function(oe,Me,We,Ve,ot,ct){if(Ve.visible!==!1){qr(ct);var Ye=ni(oe,Me,We,Ve,ct),st=!1,wt=Ve.wireframe?1:0,St="direct_"+ot.id+"_"+Ye.id+"_"+wt;if(St!==Y&&(Y=St,st=!0),st&&De.initAttributes(),ct instanceof i.Mesh){var z=Ve.wireframe===!0?Z.LINES:Z.TRIANGLES,ee=ot.attributes.index;if(ee){var ce,me;ee.array instanceof Uint32Array&&Fe.get("OES_element_index_uint")?(ce=Z.UNSIGNED_INT,me=4):(ce=Z.UNSIGNED_SHORT,me=2);var Se=ot.offsets;if(Se.length===0)st&&(Or(Ve,Ye,ot,0),Z.bindBuffer(Z.ELEMENT_ARRAY_BUFFER,ee.buffer)),Z.drawElements(z,ee.array.length,ce,0),R.info.render.calls++,R.info.render.vertices+=ee.array.length,R.info.render.faces+=ee.array.length/3;else{st=!0;for(var Ce=0,Pe=Se.length;Ce<Pe;Ce++){var $e=Se[Ce].index;st&&(Or(Ve,Ye,ot,$e),Z.bindBuffer(Z.ELEMENT_ARRAY_BUFFER,ee.buffer)),Z.drawElements(z,Se[Ce].count,ce,Se[Ce].start*me),R.info.render.calls++,R.info.render.vertices+=Se[Ce].count,R.info.render.faces+=Se[Ce].count/3}}}else{st&&Or(Ve,Ye,ot,0);var qe=ot.attributes.position;Z.drawArrays(z,0,qe.array.length/qe.itemSize),R.info.render.calls++,R.info.render.vertices+=qe.array.length/qe.itemSize,R.info.render.faces+=qe.array.length/(3*qe.itemSize)}}else if(ct instanceof i.PointCloud){var z=Z.POINTS,ee=ot.attributes.index;if(ee){var ce,me;ee.array instanceof Uint32Array&&Fe.get("OES_element_index_uint")?(ce=Z.UNSIGNED_INT,me=4):(ce=Z.UNSIGNED_SHORT,me=2);var Se=ot.offsets;if(Se.length===0)st&&(Or(Ve,Ye,ot,0),Z.bindBuffer(Z.ELEMENT_ARRAY_BUFFER,ee.buffer)),Z.drawElements(z,ee.array.length,ce,0),R.info.render.calls++,R.info.render.points+=ee.array.length;else{Se.length>1&&(st=!0);for(var Ce=0,Pe=Se.length;Ce<Pe;Ce++){var $e=Se[Ce].index;st&&(Or(Ve,Ye,ot,$e),Z.bindBuffer(Z.ELEMENT_ARRAY_BUFFER,ee.buffer)),Z.drawElements(z,Se[Ce].count,ce,Se[Ce].start*me),R.info.render.calls++,R.info.render.points+=Se[Ce].count}}}else{st&&Or(Ve,Ye,ot,0);var qe=ot.attributes.position,Se=ot.offsets;if(Se.length===0)Z.drawArrays(z,0,qe.array.length/3),R.info.render.calls++,R.info.render.points+=qe.array.length/3;else for(var Ce=0,Pe=Se.length;Ce<Pe;Ce++)Z.drawArrays(z,Se[Ce].index,Se[Ce].count),R.info.render.calls++,R.info.render.points+=Se[Ce].count}}else if(ct instanceof i.Line){var z=ct.mode===i.LineStrip?Z.LINE_STRIP:Z.LINES;De.setLineWidth(Ve.linewidth*s);var ee=ot.attributes.index;if(ee){var ce,me;ee.array instanceof Uint32Array?(ce=Z.UNSIGNED_INT,me=4):(ce=Z.UNSIGNED_SHORT,me=2);var Se=ot.offsets;if(Se.length===0)st&&(Or(Ve,Ye,ot,0),Z.bindBuffer(Z.ELEMENT_ARRAY_BUFFER,ee.buffer)),Z.drawElements(z,ee.array.length,ce,0),R.info.render.calls++,R.info.render.vertices+=ee.array.length;else{Se.length>1&&(st=!0);for(var Ce=0,Pe=Se.length;Ce<Pe;Ce++){var $e=Se[Ce].index;st&&(Or(Ve,Ye,ot,$e),Z.bindBuffer(Z.ELEMENT_ARRAY_BUFFER,ee.buffer)),Z.drawElements(z,Se[Ce].count,ce,Se[Ce].start*me),R.info.render.calls++,R.info.render.vertices+=Se[Ce].count}}}else{st&&Or(Ve,Ye,ot,0);var qe=ot.attributes.position,Se=ot.offsets;if(Se.length===0)Z.drawArrays(z,0,qe.array.length/3),R.info.render.calls++,R.info.render.vertices+=qe.array.length/3;else for(var Ce=0,Pe=Se.length;Ce<Pe;Ce++)Z.drawArrays(z,Se[Ce].index,Se[Ce].count),R.info.render.calls++,R.info.render.vertices+=Se[Ce].count}}}},this.renderBuffer=function(oe,Me,We,Ve,ot,ct){if(Ve.visible!==!1){qr(ct);var Ye=ni(oe,Me,We,Ve,ct),st=Ye.attributes,wt=!1,St=Ve.wireframe?1:0,z=ot.id+"_"+Ye.id+"_"+St;if(z!==Y&&(Y=z,wt=!0),wt&&De.initAttributes(),!Ve.morphTargets&&st.position>=0?wt&&(Z.bindBuffer(Z.ARRAY_BUFFER,ot.__webglVertexBuffer),De.enableAttribute(st.position),Z.vertexAttribPointer(st.position,3,Z.FLOAT,!1,0,0)):ct.morphTargetBase&&Sn(Ve,ot,ct),wt){if(ot.__webglCustomAttributesList)for(var ee=0,ce=ot.__webglCustomAttributesList.length;ee<ce;ee++){var me=ot.__webglCustomAttributesList[ee];st[me.buffer.belongsToAttribute]>=0&&(Z.bindBuffer(Z.ARRAY_BUFFER,me.buffer),De.enableAttribute(st[me.buffer.belongsToAttribute]),Z.vertexAttribPointer(st[me.buffer.belongsToAttribute],me.size,Z.FLOAT,!1,0,0))}st.color>=0&&(ct.geometry.colors.length>0||ct.geometry.faces.length>0?(Z.bindBuffer(Z.ARRAY_BUFFER,ot.__webglColorBuffer),De.enableAttribute(st.color),Z.vertexAttribPointer(st.color,3,Z.FLOAT,!1,0,0)):Ve.defaultAttributeValues!==void 0&&Z.vertexAttrib3fv(st.color,Ve.defaultAttributeValues.color)),st.normal>=0&&(Z.bindBuffer(Z.ARRAY_BUFFER,ot.__webglNormalBuffer),De.enableAttribute(st.normal),Z.vertexAttribPointer(st.normal,3,Z.FLOAT,!1,0,0)),st.tangent>=0&&(Z.bindBuffer(Z.ARRAY_BUFFER,ot.__webglTangentBuffer),De.enableAttribute(st.tangent),Z.vertexAttribPointer(st.tangent,4,Z.FLOAT,!1,0,0)),st.uv>=0&&(ct.geometry.faceVertexUvs[0]?(Z.bindBuffer(Z.ARRAY_BUFFER,ot.__webglUVBuffer),De.enableAttribute(st.uv),Z.vertexAttribPointer(st.uv,2,Z.FLOAT,!1,0,0)):Ve.defaultAttributeValues!==void 0&&Z.vertexAttrib2fv(st.uv,Ve.defaultAttributeValues.uv)),st.uv2>=0&&(ct.geometry.faceVertexUvs[1]?(Z.bindBuffer(Z.ARRAY_BUFFER,ot.__webglUV2Buffer),De.enableAttribute(st.uv2),Z.vertexAttribPointer(st.uv2,2,Z.FLOAT,!1,0,0)):Ve.defaultAttributeValues!==void 0&&Z.vertexAttrib2fv(st.uv2,Ve.defaultAttributeValues.uv2)),Ve.skinning&&st.skinIndex>=0&&st.skinWeight>=0&&(Z.bindBuffer(Z.ARRAY_BUFFER,ot.__webglSkinIndicesBuffer),De.enableAttribute(st.skinIndex),Z.vertexAttribPointer(st.skinIndex,4,Z.FLOAT,!1,0,0),Z.bindBuffer(Z.ARRAY_BUFFER,ot.__webglSkinWeightsBuffer),De.enableAttribute(st.skinWeight),Z.vertexAttribPointer(st.skinWeight,4,Z.FLOAT,!1,0,0)),st.lineDistance>=0&&(Z.bindBuffer(Z.ARRAY_BUFFER,ot.__webglLineDistanceBuffer),De.enableAttribute(st.lineDistance),Z.vertexAttribPointer(st.lineDistance,1,Z.FLOAT,!1,0,0))}if(De.disableUnusedAttributes(),ct instanceof i.Mesh){var Se=ot.__typeArray===Uint32Array?Z.UNSIGNED_INT:Z.UNSIGNED_SHORT;Ve.wireframe?(De.setLineWidth(Ve.wireframeLinewidth*s),wt&&Z.bindBuffer(Z.ELEMENT_ARRAY_BUFFER,ot.__webglLineBuffer),Z.drawElements(Z.LINES,ot.__webglLineCount,Se,0)):(wt&&Z.bindBuffer(Z.ELEMENT_ARRAY_BUFFER,ot.__webglFaceBuffer),Z.drawElements(Z.TRIANGLES,ot.__webglFaceCount,Se,0)),R.info.render.calls++,R.info.render.vertices+=ot.__webglFaceCount,R.info.render.faces+=ot.__webglFaceCount/3}else if(ct instanceof i.Line){var Ce=ct.mode===i.LineStrip?Z.LINE_STRIP:Z.LINES;De.setLineWidth(Ve.linewidth*s),Z.drawArrays(Ce,0,ot.__webglLineCount),R.info.render.calls++}else ct instanceof i.PointCloud&&(Z.drawArrays(Z.POINTS,0,ot.__webglParticleCount),R.info.render.calls++,R.info.render.points+=ot.__webglParticleCount)}};function Sn(oe,Me,We){var Ve=oe.program.attributes;if(We.morphTargetBase!==-1&&Ve.position>=0?(Z.bindBuffer(Z.ARRAY_BUFFER,Me.__webglMorphTargetsBuffers[We.morphTargetBase]),De.enableAttribute(Ve.position),Z.vertexAttribPointer(Ve.position,3,Z.FLOAT,!1,0,0)):Ve.position>=0&&(Z.bindBuffer(Z.ARRAY_BUFFER,Me.__webglVertexBuffer),De.enableAttribute(Ve.position),Z.vertexAttribPointer(Ve.position,3,Z.FLOAT,!1,0,0)),We.morphTargetForcedOrder.length)for(var ot=0,ct=We.morphTargetForcedOrder,Ye=We.morphTargetInfluences,st;ot<oe.numSupportedMorphTargets&&ot<ct.length;)st=Ve["morphTarget"+ot],st>=0&&(Z.bindBuffer(Z.ARRAY_BUFFER,Me.__webglMorphTargetsBuffers[ct[ot]]),De.enableAttribute(st),Z.vertexAttribPointer(st,3,Z.FLOAT,!1,0,0)),st=Ve["morphNormal"+ot],st>=0&&oe.morphNormals&&(Z.bindBuffer(Z.ARRAY_BUFFER,Me.__webglMorphNormalsBuffers[ct[ot]]),De.enableAttribute(st),Z.vertexAttribPointer(st,3,Z.FLOAT,!1,0,0)),We.__webglMorphTargetInfluences[ot]=Ye[ct[ot]],ot++;else{var wt=[],Ye=We.morphTargetInfluences,St=We.geometry.morphTargets;Ye.length>St.length&&(console.warn("THREE.WebGLRenderer: Influences array is bigger than morphTargets array."),Ye.length=St.length);for(var z=0,ee=Ye.length;z<ee;z++){var ce=Ye[z];wt.push([ce,z])}wt.length>oe.numSupportedMorphTargets?(wt.sort(Sr),wt.length=oe.numSupportedMorphTargets):wt.length>oe.numSupportedMorphNormals?wt.sort(Sr):wt.length===0&&wt.push([0,0]);for(var st,ot=0,me=oe.numSupportedMorphTargets;ot<me;ot++)if(wt[ot]){var Se=wt[ot][1];st=Ve["morphTarget"+ot],st>=0&&(Z.bindBuffer(Z.ARRAY_BUFFER,Me.__webglMorphTargetsBuffers[Se]),De.enableAttribute(st),Z.vertexAttribPointer(st,3,Z.FLOAT,!1,0,0)),st=Ve["morphNormal"+ot],st>=0&&oe.morphNormals&&(Z.bindBuffer(Z.ARRAY_BUFFER,Me.__webglMorphNormalsBuffers[Se]),De.enableAttribute(st),Z.vertexAttribPointer(st,3,Z.FLOAT,!1,0,0)),We.__webglMorphTargetInfluences[ot]=Ye[Se]}else We.__webglMorphTargetInfluences[ot]=0}oe.program.uniforms.morphTargetInfluences!==null&&Z.uniform1fv(oe.program.uniforms.morphTargetInfluences,We.__webglMorphTargetInfluences)}function Ht(oe,Me){return oe.object.renderOrder!==Me.object.renderOrder?oe.object.renderOrder-Me.object.renderOrder:oe.material.id!==Me.material.id?oe.material.id-Me.material.id:oe.z!==Me.z?oe.z-Me.z:oe.id-Me.id}function sr(oe,Me){return oe.object.renderOrder!==Me.object.renderOrder?oe.object.renderOrder-Me.object.renderOrder:oe.z!==Me.z?Me.z-oe.z:oe.id-Me.id}function Sr(oe,Me){return Me[0]-oe[0]}this.render=function(oe,Me,We,Ve){if(!(Me instanceof i.Camera)){i.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}var ot=oe.fog;Y="",L=-1,J=null,_e=!0,oe.autoUpdate===!0&&oe.updateMatrixWorld(),Me.parent===void 0&&Me.updateMatrixWorld(),oe.traverse(function(z){z instanceof i.SkinnedMesh&&z.skeleton.update()}),Me.matrixWorldInverse.getInverse(Me.matrixWorld),pe.multiplyMatrices(Me.projectionMatrix,Me.matrixWorldInverse),ye.setFromMatrix(pe),b.length=0,E.length=0,S.length=0,M.length=0,A.length=0,Fr(oe),R.sortObjects===!0&&(E.sort(Ht),S.sort(sr)),Bt.render(oe,Me),R.info.render.calls=0,R.info.render.vertices=0,R.info.render.faces=0,R.info.render.points=0,this.setRenderTarget(We),(this.autoClear||Ve)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil);for(var ct=0,Ye=C.length;ct<Ye;ct++){var st=C[ct],wt=st.object;wt.visible&&(ha(wt,Me),Vn(st))}if(oe.overrideMaterial){var St=oe.overrideMaterial;Ar(St),gr(E,Me,b,ot,St),gr(S,Me,b,ot,St),tn(C,"",Me,b,ot,St)}else De.setBlending(i.NoBlending),gr(E,Me,b,ot,null),tn(C,"opaque",Me,b,ot,null),gr(S,Me,b,ot,null),tn(C,"transparent",Me,b,ot,null);nr.render(oe,Me),$t.render(oe,Me,fe,ge),We&&We.generateMipmaps&&We.minFilter!==i.NearestFilter&&We.minFilter!==i.LinearFilter&&no(We),De.setDepthTest(!0),De.setDepthWrite(!0),De.setColorWrite(!0)};function Fr(oe){if(oe.visible!==!1){if(!(oe instanceof i.Scene||oe instanceof i.Group))if(Ur(oe),oe instanceof i.Light)b.push(oe);else if(oe instanceof i.Sprite)M.push(oe);else if(oe instanceof i.LensFlare)A.push(oe);else{var Me=w[oe.id];if(Me&&(oe.frustumCulled===!1||ye.intersectsObject(oe)===!0))for(var We=0,Ve=Me.length;We<Ve;We++){var ot=Me[We];Rt(ot),ot.render=!0,R.sortObjects===!0&&(de.setFromMatrixPosition(oe.matrixWorld),de.applyProjection(pe),ot.z=de.z)}}for(var We=0,Ve=oe.children.length;We<Ve;We++)Fr(oe.children[We])}}function gr(oe,Me,We,Ve,ot){for(var ct,Ye=0,st=oe.length;Ye<st;Ye++){var wt=oe[Ye],St=wt.object,z=wt.buffer;if(ha(St,Me),ot)ct=ot;else{if(ct=wt.material,!ct)continue;Ar(ct)}R.setMaterialFaces(ct),z instanceof i.BufferGeometry?R.renderBufferDirect(Me,We,Ve,ct,z,St):R.renderBuffer(Me,We,Ve,ct,z,St)}}function tn(oe,Me,We,Ve,ot,ct){for(var Ye,st=0,wt=oe.length;st<wt;st++){var St=oe[st],z=St.object;if(z.visible){if(ct)Ye=ct;else{if(Ye=St[Me],!Ye)continue;Ar(Ye)}R.renderImmediateObject(We,Ve,ot,Ye,z)}}}this.renderImmediateObject=function(oe,Me,We,Ve,ot){var ct=ni(oe,Me,We,Ve,ot);Y="",R.setMaterialFaces(Ve),ot.immediateRenderCallback?ot.immediateRenderCallback(ct,Z,ye):ot.render(function(Ye){R.renderBufferImmediate(Ye,ct,Ve)})};function Vn(oe){var Me=oe.object,We=Me.material;We.transparent?(oe.transparent=We,oe.opaque=null):(oe.opaque=We,oe.transparent=null)}function Rt(oe){var Me=oe.object,We=oe.buffer,Ve=Me.geometry,ot=Me.material;if(ot instanceof i.MeshFaceMaterial){var ct=Ve instanceof i.BufferGeometry?0:We.materialIndex;ot=ot.materials[ct],oe.material=ot,ot.transparent?S.push(oe):E.push(oe)}else ot&&(oe.material=ot,ot.transparent?S.push(oe):E.push(oe))}function Ur(oe){oe.__webglInit===void 0&&(oe.__webglInit=!0,oe._modelViewMatrix=new i.Matrix4,oe._normalMatrix=new i.Matrix3,oe.addEventListener("removed",He));var Me=oe.geometry;if(Me===void 0||Me.__webglInit===void 0&&(Me.__webglInit=!0,Me.addEventListener("dispose",Be),Me instanceof i.BufferGeometry?R.info.memory.geometries++:oe instanceof i.Mesh?Wn(oe,Me):oe instanceof i.Line?Me.__webglVertexBuffer===void 0&&(Lt(Me),Dt(Me,oe),Me.verticesNeedUpdate=!0,Me.colorsNeedUpdate=!0,Me.lineDistancesNeedUpdate=!0):oe instanceof i.PointCloud&&Me.__webglVertexBuffer===void 0&&(It(Me),Nt(Me,oe),Me.verticesNeedUpdate=!0,Me.colorsNeedUpdate=!0)),oe.__webglActive===void 0)if(oe.__webglActive=!0,oe instanceof i.Mesh){if(Me instanceof i.BufferGeometry)mn(w,Me,oe);else if(Me instanceof i.Geometry)for(var We=Zr[Me.id],Ve=0,ot=We.length;Ve<ot;Ve++)mn(w,We[Ve],oe)}else oe instanceof i.Line||oe instanceof i.PointCloud?mn(w,Me,oe):(oe instanceof i.ImmediateRenderObject||oe.immediateRenderCallback)&&Pr(C,oe)}var Zr={},xn=0;function Tr(oe,Me){for(var We=Fe.get("OES_element_index_uint")?4294967296:65535,Ve,ot={},ct=oe.morphTargets.length,Ye=oe.morphNormals.length,st,wt={},St=[],z=0,ee=oe.faces.length;z<ee;z++){var ce=oe.faces[z],me=Me?ce.materialIndex:0;me in ot||(ot[me]={hash:me,counter:0}),Ve=ot[me].hash+"_"+ot[me].counter,Ve in wt||(st={id:xn++,faces3:[],materialIndex:me,vertices:0,numMorphTargets:ct,numMorphNormals:Ye},wt[Ve]=st,St.push(st)),wt[Ve].vertices+3>We&&(ot[me].counter+=1,Ve=ot[me].hash+"_"+ot[me].counter,Ve in wt||(st={id:xn++,faces3:[],materialIndex:me,vertices:0,numMorphTargets:ct,numMorphNormals:Ye},wt[Ve]=st,St.push(st))),wt[Ve].faces3.push(z),wt[Ve].vertices+=3}return St}function Wn(oe,Me){var We=oe.material,Ve=!1;(Zr[Me.id]===void 0||Me.groupsNeedUpdate===!0)&&(delete w[oe.id],Zr[Me.id]=Tr(Me,We instanceof i.MeshFaceMaterial),Me.groupsNeedUpdate=!1);for(var ot=Zr[Me.id],ct=0,Ye=ot.length;ct<Ye;ct++){var st=ot[ct];st.__webglVertexBuffer===void 0?(Pt(st),Gt(st,oe),Me.verticesNeedUpdate=!0,Me.morphTargetsNeedUpdate=!0,Me.elementsNeedUpdate=!0,Me.uvsNeedUpdate=!0,Me.normalsNeedUpdate=!0,Me.tangentsNeedUpdate=!0,Me.colorsNeedUpdate=!0,Ve=!0):Ve=!1,(Ve||oe.__webglActive===void 0)&&mn(w,st,oe)}oe.__webglActive=!0}function mn(oe,Me,We){var Ve=We.id;oe[Ve]=oe[Ve]||[],oe[Ve].push({id:Ve,buffer:Me,object:We,material:null,z:0})}function Pr(oe,Me){oe.push({id:null,object:Me,opaque:null,transparent:null,z:0})}function qr(oe){var Me=oe.geometry;if(Me instanceof i.BufferGeometry)for(var We=Me.attributes,Ve=Me.attributesKeys,ot=0,ct=Ve.length;ot<ct;ot++){var Ye=Ve[ot],st=We[Ye],wt=Ye==="index"?Z.ELEMENT_ARRAY_BUFFER:Z.ARRAY_BUFFER;st.buffer===void 0?(st.buffer=Z.createBuffer(),Z.bindBuffer(wt,st.buffer),Z.bufferData(wt,st.array,st instanceof i.DynamicBufferAttribute?Z.DYNAMIC_DRAW:Z.STATIC_DRAW),st.needsUpdate=!1):st.needsUpdate===!0&&(Z.bindBuffer(wt,st.buffer),st.updateRange===void 0||st.updateRange.count===-1?Z.bufferSubData(wt,0,st.array):st.updateRange.count===0?console.error("THREE.WebGLRenderer.updateObject: using updateRange for THREE.DynamicBufferAttribute and marked as needsUpdate but count is 0, ensure you are using set methods or updating manually."):(Z.bufferSubData(wt,st.updateRange.offset*st.array.BYTES_PER_ELEMENT,st.array.subarray(st.updateRange.offset,st.updateRange.offset+st.updateRange.count)),st.updateRange.count=0),st.needsUpdate=!1)}else if(oe instanceof i.Mesh){Me.groupsNeedUpdate===!0&&Wn(oe,Me);for(var St=Zr[Me.id],ot=0,z=St.length;ot<z;ot++){var ee=St[ot],ce=or(oe,ee),me=ce.attributes&&Hn(ce);(Me.verticesNeedUpdate||Me.morphTargetsNeedUpdate||Me.elementsNeedUpdate||Me.uvsNeedUpdate||Me.normalsNeedUpdate||Me.colorsNeedUpdate||Me.tangentsNeedUpdate||me)&&Lr(ee,oe,Z.DYNAMIC_DRAW,!Me.dynamic,ce)}Me.verticesNeedUpdate=!1,Me.morphTargetsNeedUpdate=!1,Me.elementsNeedUpdate=!1,Me.uvsNeedUpdate=!1,Me.normalsNeedUpdate=!1,Me.colorsNeedUpdate=!1,Me.tangentsNeedUpdate=!1,ce.attributes&&nn(ce)}else if(oe instanceof i.Line){var ce=or(oe,Me),me=ce.attributes&&Hn(ce);(Me.verticesNeedUpdate||Me.colorsNeedUpdate||Me.lineDistancesNeedUpdate||me)&&lr(Me,Z.DYNAMIC_DRAW),Me.verticesNeedUpdate=!1,Me.colorsNeedUpdate=!1,Me.lineDistancesNeedUpdate=!1,ce.attributes&&nn(ce)}else if(oe instanceof i.PointCloud){var ce=or(oe,Me),me=ce.attributes&&Hn(ce);(Me.verticesNeedUpdate||Me.colorsNeedUpdate||me)&&pr(Me,Z.DYNAMIC_DRAW,oe),Me.verticesNeedUpdate=!1,Me.colorsNeedUpdate=!1,ce.attributes&&nn(ce)}}function Hn(oe){for(var Me in oe.attributes)if(oe.attributes[Me].needsUpdate)return!0;return!1}function nn(oe){for(var Me in oe.attributes)oe.attributes[Me].needsUpdate=!1}function jn(oe){oe instanceof i.Mesh||oe instanceof i.PointCloud||oe instanceof i.Line?delete w[oe.id]:(oe instanceof i.ImmediateRenderObject||oe.immediateRenderCallback)&&dr(C,oe),delete oe.__webglInit,delete oe._modelViewMatrix,delete oe._normalMatrix,delete oe.__webglActive}function dr(oe,Me){for(var We=oe.length-1;We>=0;We--)oe[We].object===Me&&oe.splice(We,1)}var Br={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointCloudMaterial:"particle_basic"};function kr(oe,Me,We,Ve){oe.addEventListener("dispose",Ne);var ot=Br[oe.type];if(ot){var ct=i.ShaderLib[ot];oe.__webglShader={uniforms:i.UniformsUtils.clone(ct.uniforms),vertexShader:ct.vertexShader,fragmentShader:ct.fragmentShader}}else oe.__webglShader={uniforms:oe.uniforms,vertexShader:oe.vertexShader,fragmentShader:oe.fragmentShader};var Ye=Wi(Me),st=po(Me),wt=To(Ve),St={precision:d,supportsVertexTextures:dt,map:!!oe.map,envMap:!!oe.envMap,envMapMode:oe.envMap&&oe.envMap.mapping,lightMap:!!oe.lightMap,bumpMap:!!oe.bumpMap,normalMap:!!oe.normalMap,specularMap:!!oe.specularMap,alphaMap:!!oe.alphaMap,combine:oe.combine,vertexColors:oe.vertexColors,fog:We,useFog:oe.fog,fogExp:We instanceof i.FogExp2,flatShading:oe.shading===i.FlatShading,sizeAttenuation:oe.sizeAttenuation,logarithmicDepthBuffer:h,skinning:oe.skinning,maxBones:wt,useVertexTexture:yt&&Ve&&Ve.skeleton&&Ve.skeleton.useVertexTexture,morphTargets:oe.morphTargets,morphNormals:oe.morphNormals,maxMorphTargets:R.maxMorphTargets,maxMorphNormals:R.maxMorphNormals,maxDirLights:Ye.directional,maxPointLights:Ye.point,maxSpotLights:Ye.spot,maxHemiLights:Ye.hemi,maxShadows:st,shadowMapEnabled:R.shadowMapEnabled&&Ve.receiveShadow&&st>0,shadowMapType:R.shadowMapType,shadowMapDebug:R.shadowMapDebug,shadowMapCascade:R.shadowMapCascade,alphaTest:oe.alphaTest,metal:oe.metal,wrapAround:oe.wrapAround,doubleSided:oe.side===i.DoubleSide,flipSided:oe.side===i.BackSide},z=[];if(ot?z.push(ot):(z.push(oe.fragmentShader),z.push(oe.vertexShader)),oe.defines!==void 0)for(var ee in oe.defines)z.push(ee),z.push(oe.defines[ee]);for(var ee in St)z.push(ee),z.push(St[ee]);for(var ce=z.join(),me,Se=0,Ce=D.length;Se<Ce;Se++){var Pe=D[Se];if(Pe.code===ce){me=Pe,me.usedTimes++;break}}me===void 0&&(me=new i.WebGLProgram(R,ce,oe,St),D.push(me),R.info.memory.programs=D.length),oe.program=me;var $e=me.attributes;if(oe.morphTargets){oe.numSupportedMorphTargets=0;for(var qe,rt="morphTarget",_t=0;_t<R.maxMorphTargets;_t++)qe=rt+_t,$e[qe]>=0&&oe.numSupportedMorphTargets++}if(oe.morphNormals){oe.numSupportedMorphNormals=0;var qe,rt="morphNormal";for(_t=0;_t<R.maxMorphNormals;_t++)qe=rt+_t,$e[qe]>=0&&oe.numSupportedMorphNormals++}oe.uniformsList=[];for(var Mt in oe.__webglShader.uniforms){var mt=oe.program.uniforms[Mt];mt&&oe.uniformsList.push([oe.__webglShader.uniforms[Mt],mt])}}function Ar(oe){oe.transparent===!0?De.setBlending(oe.blending,oe.blendEquation,oe.blendSrc,oe.blendDst,oe.blendEquationAlpha,oe.blendSrcAlpha,oe.blendDstAlpha):De.setBlending(i.NoBlending),De.setDepthTest(oe.depthTest),De.setDepthWrite(oe.depthWrite),De.setColorWrite(oe.colorWrite),De.setPolygonOffset(oe.polygonOffset,oe.polygonOffsetFactor,oe.polygonOffsetUnits)}function ni(oe,Me,We,Ve,ot){ie=0,Ve.needsUpdate&&(Ve.program&&vt(Ve),kr(Ve,Me,We,ot),Ve.needsUpdate=!1),Ve.morphTargets&&(ot.__webglMorphTargetInfluences||(ot.__webglMorphTargetInfluences=new Float32Array(R.maxMorphTargets)));var ct=!1,Ye=!1,st=!1,wt=Ve.program,St=wt.uniforms,z=Ve.__webglShader.uniforms;if(wt.id!==N&&(Z.useProgram(wt.program),N=wt.id,ct=!0,Ye=!0,st=!0),Ve.id!==L&&(L===-1&&(st=!0),L=Ve.id,Ye=!0),(ct||oe!==J)&&(Z.uniformMatrix4fv(St.projectionMatrix,!1,oe.projectionMatrix.elements),h&&Z.uniform1f(St.logDepthBufFC,2/(Math.log(oe.far+1)/Math.LN2)),oe!==J&&(J=oe),(Ve instanceof i.ShaderMaterial||Ve instanceof i.MeshPhongMaterial||Ve.envMap)&&St.cameraPosition!==null&&(de.setFromMatrixPosition(oe.matrixWorld),Z.uniform3f(St.cameraPosition,de.x,de.y,de.z)),(Ve instanceof i.MeshPhongMaterial||Ve instanceof i.MeshLambertMaterial||Ve instanceof i.MeshBasicMaterial||Ve instanceof i.ShaderMaterial||Ve.skinning)&&St.viewMatrix!==null&&Z.uniformMatrix4fv(St.viewMatrix,!1,oe.matrixWorldInverse.elements)),Ve.skinning)if(ot.bindMatrix&&St.bindMatrix!==null&&Z.uniformMatrix4fv(St.bindMatrix,!1,ot.bindMatrix.elements),ot.bindMatrixInverse&&St.bindMatrixInverse!==null&&Z.uniformMatrix4fv(St.bindMatrixInverse,!1,ot.bindMatrixInverse.elements),yt&&ot.skeleton&&ot.skeleton.useVertexTexture){if(St.boneTexture!==null){var ee=Bi();Z.uniform1i(St.boneTexture,ee),R.setTexture(ot.skeleton.boneTexture,ee)}St.boneTextureWidth!==null&&Z.uniform1i(St.boneTextureWidth,ot.skeleton.boneTextureWidth),St.boneTextureHeight!==null&&Z.uniform1i(St.boneTextureHeight,ot.skeleton.boneTextureHeight)}else ot.skeleton&&ot.skeleton.boneMatrices&&St.boneGlobalMatrices!==null&&Z.uniformMatrix4fv(St.boneGlobalMatrices,!1,ot.skeleton.boneMatrices);return Ye&&(We&&Ve.fog&&Ui(z,We),(Ve instanceof i.MeshPhongMaterial||Ve instanceof i.MeshLambertMaterial||Ve.lights)&&(_e&&(st=!0,ro(Me),_e=!1),st?(fn(z,ve),Ji(z,!0)):Ji(z,!1)),(Ve instanceof i.MeshBasicMaterial||Ve instanceof i.MeshLambertMaterial||Ve instanceof i.MeshPhongMaterial)&&kn(z,Ve),Ve instanceof i.LineBasicMaterial?$r(z,Ve):Ve instanceof i.LineDashedMaterial?($r(z,Ve),bn(z,Ve)):Ve instanceof i.PointCloudMaterial?on(z,Ve):Ve instanceof i.MeshPhongMaterial?ln(z,Ve):Ve instanceof i.MeshLambertMaterial?Ai(z,Ve):Ve instanceof i.MeshDepthMaterial?(z.mNear.value=oe.near,z.mFar.value=oe.far,z.opacity.value=Ve.opacity):Ve instanceof i.MeshNormalMaterial&&(z.opacity.value=Ve.opacity),ot.receiveShadow&&!Ve._shadowPass&&ii(z,Me),to(Ve.uniformsList)),eo(St,ot),St.modelMatrix!==null&&Z.uniformMatrix4fv(St.modelMatrix,!1,ot.matrixWorld.elements),wt}function kn(oe,Me){oe.opacity.value=Me.opacity,oe.diffuse.value=Me.color,oe.map.value=Me.map,oe.lightMap.value=Me.lightMap,oe.specularMap.value=Me.specularMap,oe.alphaMap.value=Me.alphaMap,Me.bumpMap&&(oe.bumpMap.value=Me.bumpMap,oe.bumpScale.value=Me.bumpScale),Me.normalMap&&(oe.normalMap.value=Me.normalMap,oe.normalScale.value.copy(Me.normalScale));var We;if(Me.map?We=Me.map:Me.specularMap?We=Me.specularMap:Me.normalMap?We=Me.normalMap:Me.bumpMap?We=Me.bumpMap:Me.alphaMap&&(We=Me.alphaMap),We!==void 0){var Ve=We.offset,ot=We.repeat;oe.offsetRepeat.value.set(Ve.x,Ve.y,ot.x,ot.y)}oe.envMap.value=Me.envMap,oe.flipEnvMap.value=Me.envMap instanceof i.WebGLRenderTargetCube?1:-1,oe.reflectivity.value=Me.reflectivity,oe.refractionRatio.value=Me.refractionRatio}function $r(oe,Me){oe.diffuse.value=Me.color,oe.opacity.value=Me.opacity}function bn(oe,Me){oe.dashSize.value=Me.dashSize,oe.totalSize.value=Me.dashSize+Me.gapSize,oe.scale.value=Me.scale}function on(oe,Me){if(oe.psColor.value=Me.color,oe.opacity.value=Me.opacity,oe.size.value=Me.size,oe.scale.value=e.height/2,oe.map.value=Me.map,Me.map!==null){var We=Me.map.offset,Ve=Me.map.repeat;oe.offsetRepeat.value.set(We.x,We.y,Ve.x,Ve.y)}}function Ui(oe,Me){oe.fogColor.value=Me.color,Me instanceof i.Fog?(oe.fogNear.value=Me.near,oe.fogFar.value=Me.far):Me instanceof i.FogExp2&&(oe.fogDensity.value=Me.density)}function ln(oe,Me){oe.shininess.value=Me.shininess,oe.emissive.value=Me.emissive,oe.specular.value=Me.specular,Me.wrapAround&&oe.wrapRGB.value.copy(Me.wrapRGB)}function Ai(oe,Me){oe.emissive.value=Me.emissive,Me.wrapAround&&oe.wrapRGB.value.copy(Me.wrapRGB)}function fn(oe,Me){oe.ambientLightColor.value=Me.ambient,oe.directionalLightColor.value=Me.directional.colors,oe.directionalLightDirection.value=Me.directional.positions,oe.pointLightColor.value=Me.point.colors,oe.pointLightPosition.value=Me.point.positions,oe.pointLightDistance.value=Me.point.distances,oe.pointLightDecay.value=Me.point.decays,oe.spotLightColor.value=Me.spot.colors,oe.spotLightPosition.value=Me.spot.positions,oe.spotLightDistance.value=Me.spot.distances,oe.spotLightDirection.value=Me.spot.directions,oe.spotLightAngleCos.value=Me.spot.anglesCos,oe.spotLightExponent.value=Me.spot.exponents,oe.spotLightDecay.value=Me.spot.decays,oe.hemisphereLightSkyColor.value=Me.hemi.skyColors,oe.hemisphereLightGroundColor.value=Me.hemi.groundColors,oe.hemisphereLightDirection.value=Me.hemi.positions}function Ji(oe,Me){oe.ambientLightColor.needsUpdate=Me,oe.directionalLightColor.needsUpdate=Me,oe.directionalLightDirection.needsUpdate=Me,oe.pointLightColor.needsUpdate=Me,oe.pointLightPosition.needsUpdate=Me,oe.pointLightDistance.needsUpdate=Me,oe.pointLightDecay.needsUpdate=Me,oe.spotLightColor.needsUpdate=Me,oe.spotLightPosition.needsUpdate=Me,oe.spotLightDistance.needsUpdate=Me,oe.spotLightDirection.needsUpdate=Me,oe.spotLightAngleCos.needsUpdate=Me,oe.spotLightExponent.needsUpdate=Me,oe.spotLightDecay.needsUpdate=Me,oe.hemisphereLightSkyColor.needsUpdate=Me,oe.hemisphereLightGroundColor.needsUpdate=Me,oe.hemisphereLightDirection.needsUpdate=Me}function ii(oe,Me){if(oe.shadowMatrix)for(var We=0,Ve=0,ot=Me.length;Ve<ot;Ve++){var ct=Me[Ve];ct.castShadow&&(ct instanceof i.SpotLight||ct instanceof i.DirectionalLight&&!ct.shadowCascade)&&(oe.shadowMap.value[We]=ct.shadowMap,oe.shadowMapSize.value[We]=ct.shadowMapSize,oe.shadowMatrix.value[We]=ct.shadowMatrix,oe.shadowDarkness.value[We]=ct.shadowDarkness,oe.shadowBias.value[We]=ct.shadowBias,We++)}}function eo(oe,Me){Z.uniformMatrix4fv(oe.modelViewMatrix,!1,Me._modelViewMatrix.elements),oe.normalMatrix&&Z.uniformMatrix3fv(oe.normalMatrix,!1,Me._normalMatrix.elements)}function Bi(){var oe=ie;return oe>=Te&&i.warn("WebGLRenderer: trying to use "+oe+" texture units while this GPU supports only "+Te),ie+=1,oe}function to(oe){for(var Me,We,Ve,ot=0,ct=oe.length;ot<ct;ot++){var Ye=oe[ot][0];if(Ye.needsUpdate!==!1){var st=Ye.type,wt=Ye.value,St=oe[ot][1];switch(st){case"1i":Z.uniform1i(St,wt);break;case"1f":Z.uniform1f(St,wt);break;case"2f":Z.uniform2f(St,wt[0],wt[1]);break;case"3f":Z.uniform3f(St,wt[0],wt[1],wt[2]);break;case"4f":Z.uniform4f(St,wt[0],wt[1],wt[2],wt[3]);break;case"1iv":Z.uniform1iv(St,wt);break;case"3iv":Z.uniform3iv(St,wt);break;case"1fv":Z.uniform1fv(St,wt);break;case"2fv":Z.uniform2fv(St,wt);break;case"3fv":Z.uniform3fv(St,wt);break;case"4fv":Z.uniform4fv(St,wt);break;case"Matrix3fv":Z.uniformMatrix3fv(St,!1,wt);break;case"Matrix4fv":Z.uniformMatrix4fv(St,!1,wt);break;case"i":Z.uniform1i(St,wt);break;case"f":Z.uniform1f(St,wt);break;case"v2":Z.uniform2f(St,wt.x,wt.y);break;case"v3":Z.uniform3f(St,wt.x,wt.y,wt.z);break;case"v4":Z.uniform4f(St,wt.x,wt.y,wt.z,wt.w);break;case"c":Z.uniform3f(St,wt.r,wt.g,wt.b);break;case"iv1":Z.uniform1iv(St,wt);break;case"iv":Z.uniform3iv(St,wt);break;case"fv1":Z.uniform1fv(St,wt);break;case"fv":Z.uniform3fv(St,wt);break;case"v2v":Ye._array===void 0&&(Ye._array=new Float32Array(2*wt.length));for(var z=0,ee=wt.length;z<ee;z++)Ve=z*2,Ye._array[Ve]=wt[z].x,Ye._array[Ve+1]=wt[z].y;Z.uniform2fv(St,Ye._array);break;case"v3v":Ye._array===void 0&&(Ye._array=new Float32Array(3*wt.length));for(var z=0,ee=wt.length;z<ee;z++)Ve=z*3,Ye._array[Ve]=wt[z].x,Ye._array[Ve+1]=wt[z].y,Ye._array[Ve+2]=wt[z].z;Z.uniform3fv(St,Ye._array);break;case"v4v":Ye._array===void 0&&(Ye._array=new Float32Array(4*wt.length));for(var z=0,ee=wt.length;z<ee;z++)Ve=z*4,Ye._array[Ve]=wt[z].x,Ye._array[Ve+1]=wt[z].y,Ye._array[Ve+2]=wt[z].z,Ye._array[Ve+3]=wt[z].w;Z.uniform4fv(St,Ye._array);break;case"m3":Z.uniformMatrix3fv(St,!1,wt.elements);break;case"m3v":Ye._array===void 0&&(Ye._array=new Float32Array(9*wt.length));for(var z=0,ee=wt.length;z<ee;z++)wt[z].flattenToArrayOffset(Ye._array,z*9);Z.uniformMatrix3fv(St,!1,Ye._array);break;case"m4":Z.uniformMatrix4fv(St,!1,wt.elements);break;case"m4v":Ye._array===void 0&&(Ye._array=new Float32Array(16*wt.length));for(var z=0,ee=wt.length;z<ee;z++)wt[z].flattenToArrayOffset(Ye._array,z*16);Z.uniformMatrix4fv(St,!1,Ye._array);break;case"t":if(Me=wt,We=Bi(),Z.uniform1i(St,We),!Me)continue;Me instanceof i.CubeTexture||Me.image instanceof Array&&Me.image.length===6?an(Me,We):Me instanceof i.WebGLRenderTargetCube?qi(Me,We):R.setTexture(Me,We);break;case"tv":Ye._array===void 0&&(Ye._array=[]);for(var z=0,ee=Ye.value.length;z<ee;z++)Ye._array[z]=Bi();Z.uniform1iv(St,Ye._array);for(var z=0,ee=Ye.value.length;z<ee;z++)Me=Ye.value[z],We=Ye._array[z],Me&&R.setTexture(Me,We);break;default:i.warn("THREE.WebGLRenderer: Unknown uniform type: "+st)}}}}function ha(oe,Me){oe._modelViewMatrix.multiplyMatrices(Me.matrixWorldInverse,oe.matrixWorld),oe._normalMatrix.getNormalMatrix(oe._modelViewMatrix)}function di(oe,Me,We,Ve){oe[Me]=We.r*Ve,oe[Me+1]=We.g*Ve,oe[Me+2]=We.b*Ve}function ro(oe){var Me,We,Ve,ot=0,ct=0,Ye=0,st,wt,St,z,ee,ce=ve,me=ce.directional.colors,Se=ce.directional.positions,Ce=ce.point.colors,Pe=ce.point.positions,$e=ce.point.distances,qe=ce.point.decays,rt=ce.spot.colors,_t=ce.spot.positions,Mt=ce.spot.distances,mt=ce.spot.directions,Ut=ce.spot.anglesCos,xr=ce.spot.exponents,Cr=ce.spot.decays,er=ce.hemi.skyColors,En=ce.hemi.groundColors,Tn=ce.hemi.positions,$n=0,Mn=0,Rr=0,Qn=0,Hr=0,Mr=0,_n=0,io=0,zn=0,In=0,Pn=0,hn=0;for(Me=0,We=oe.length;Me<We;Me++)if(Ve=oe[Me],!Ve.onlyShadow){if(st=Ve.color,z=Ve.intensity,ee=Ve.distance,Ve instanceof i.AmbientLight){if(!Ve.visible)continue;ot+=st.r,ct+=st.g,Ye+=st.b}else if(Ve instanceof i.DirectionalLight){if(Hr+=1,!Ve.visible)continue;he.setFromMatrixPosition(Ve.matrixWorld),de.setFromMatrixPosition(Ve.target.matrixWorld),he.sub(de),he.normalize(),zn=$n*3,Se[zn]=he.x,Se[zn+1]=he.y,Se[zn+2]=he.z,di(me,zn,st,z),$n+=1}else if(Ve instanceof i.PointLight){if(Mr+=1,!Ve.visible)continue;In=Mn*3,di(Ce,In,st,z),de.setFromMatrixPosition(Ve.matrixWorld),Pe[In]=de.x,Pe[In+1]=de.y,Pe[In+2]=de.z,$e[Mn]=ee,qe[Mn]=Ve.distance===0?0:Ve.decay,Mn+=1}else if(Ve instanceof i.SpotLight){if(_n+=1,!Ve.visible)continue;Pn=Rr*3,di(rt,Pn,st,z),he.setFromMatrixPosition(Ve.matrixWorld),_t[Pn]=he.x,_t[Pn+1]=he.y,_t[Pn+2]=he.z,Mt[Rr]=ee,de.setFromMatrixPosition(Ve.target.matrixWorld),he.sub(de),he.normalize(),mt[Pn]=he.x,mt[Pn+1]=he.y,mt[Pn+2]=he.z,Ut[Rr]=Math.cos(Ve.angle),xr[Rr]=Ve.exponent,Cr[Rr]=Ve.distance===0?0:Ve.decay,Rr+=1}else if(Ve instanceof i.HemisphereLight){if(io+=1,!Ve.visible)continue;he.setFromMatrixPosition(Ve.matrixWorld),he.normalize(),hn=Qn*3,Tn[hn]=he.x,Tn[hn+1]=he.y,Tn[hn+2]=he.z,wt=Ve.color,St=Ve.groundColor,di(er,hn,wt,z),di(En,hn,St,z),Qn+=1}}for(Me=$n*3,We=Math.max(me.length,Hr*3);Me<We;Me++)me[Me]=0;for(Me=Mn*3,We=Math.max(Ce.length,Mr*3);Me<We;Me++)Ce[Me]=0;for(Me=Rr*3,We=Math.max(rt.length,_n*3);Me<We;Me++)rt[Me]=0;for(Me=Qn*3,We=Math.max(er.length,io*3);Me<We;Me++)er[Me]=0;for(Me=Qn*3,We=Math.max(En.length,io*3);Me<We;Me++)En[Me]=0;ce.directional.length=$n,ce.point.length=Mn,ce.spot.length=Rr,ce.hemi.length=Qn,ce.ambient[0]=ot,ce.ambient[1]=ct,ce.ambient[2]=Ye}this.setFaceCulling=function(oe,Me){oe===i.CullFaceNone?Z.disable(Z.CULL_FACE):(Me===i.FrontFaceDirectionCW?Z.frontFace(Z.CW):Z.frontFace(Z.CCW),oe===i.CullFaceBack?Z.cullFace(Z.BACK):oe===i.CullFaceFront?Z.cullFace(Z.FRONT):Z.cullFace(Z.FRONT_AND_BACK),Z.enable(Z.CULL_FACE))},this.setMaterialFaces=function(oe){De.setDoubleSided(oe.side===i.DoubleSide),De.setFlipSided(oe.side===i.BackSide)};function $o(oe,Me,We){var Ve;We?(Z.texParameteri(oe,Z.TEXTURE_WRAP_S,Ci(Me.wrapS)),Z.texParameteri(oe,Z.TEXTURE_WRAP_T,Ci(Me.wrapT)),Z.texParameteri(oe,Z.TEXTURE_MAG_FILTER,Ci(Me.magFilter)),Z.texParameteri(oe,Z.TEXTURE_MIN_FILTER,Ci(Me.minFilter))):(Z.texParameteri(oe,Z.TEXTURE_WRAP_S,Z.CLAMP_TO_EDGE),Z.texParameteri(oe,Z.TEXTURE_WRAP_T,Z.CLAMP_TO_EDGE),(Me.wrapS!==i.ClampToEdgeWrapping||Me.wrapT!==i.ClampToEdgeWrapping)&&i.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping. ( "+Me.sourceFile+" )"),Z.texParameteri(oe,Z.TEXTURE_MAG_FILTER,ho(Me.magFilter)),Z.texParameteri(oe,Z.TEXTURE_MIN_FILTER,ho(Me.minFilter)),Me.minFilter!==i.NearestFilter&&Me.minFilter!==i.LinearFilter&&i.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter. ( "+Me.sourceFile+" )")),Ve=Fe.get("EXT_texture_filter_anisotropic"),Ve&&Me.type!==i.FloatType&&Me.type!==i.HalfFloatType&&(Me.anisotropy>1||Me.__currentAnisotropy)&&(Z.texParameterf(oe,Ve.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Me.anisotropy,R.getMaxAnisotropy())),Me.__currentAnisotropy=Me.anisotropy)}this.uploadTexture=function(oe){oe.__webglInit===void 0&&(oe.__webglInit=!0,oe.addEventListener("dispose",Ge),oe.__webglTexture=Z.createTexture(),R.info.memory.textures++),Z.bindTexture(Z.TEXTURE_2D,oe.__webglTexture),Z.pixelStorei(Z.UNPACK_FLIP_Y_WEBGL,oe.flipY),Z.pixelStorei(Z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,oe.premultiplyAlpha),Z.pixelStorei(Z.UNPACK_ALIGNMENT,oe.unpackAlignment),oe.image=Xo(oe.image,ke);var Me=oe.image,We=i.Math.isPowerOfTwo(Me.width)&&i.Math.isPowerOfTwo(Me.height),Ve=Ci(oe.format),ot=Ci(oe.type);$o(Z.TEXTURE_2D,oe,We);var ct,Ye=oe.mipmaps;if(oe instanceof i.DataTexture)if(Ye.length>0&&We){for(var st=0,wt=Ye.length;st<wt;st++)ct=Ye[st],Z.texImage2D(Z.TEXTURE_2D,st,Ve,ct.width,ct.height,0,Ve,ot,ct.data);oe.generateMipmaps=!1}else Z.texImage2D(Z.TEXTURE_2D,0,Ve,Me.width,Me.height,0,Ve,ot,Me.data);else if(oe instanceof i.CompressedTexture)for(var st=0,wt=Ye.length;st<wt;st++)ct=Ye[st],oe.format!==i.RGBAFormat&&oe.format!==i.RGBFormat?At().indexOf(Ve)>-1?Z.compressedTexImage2D(Z.TEXTURE_2D,st,Ve,ct.width,ct.height,0,ct.data):i.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Z.texImage2D(Z.TEXTURE_2D,st,Ve,ct.width,ct.height,0,Ve,ot,ct.data);else if(Ye.length>0&&We){for(var st=0,wt=Ye.length;st<wt;st++)ct=Ye[st],Z.texImage2D(Z.TEXTURE_2D,st,Ve,Ve,ot,ct);oe.generateMipmaps=!1}else Z.texImage2D(Z.TEXTURE_2D,0,Ve,Ve,ot,oe.image);oe.generateMipmaps&&We&&Z.generateMipmap(Z.TEXTURE_2D),oe.needsUpdate=!1,oe.onUpdate&&oe.onUpdate()},this.setTexture=function(oe,Me){Z.activeTexture(Z.TEXTURE0+Me),oe.needsUpdate?R.uploadTexture(oe):Z.bindTexture(Z.TEXTURE_2D,oe.__webglTexture)};function Xo(oe,Me){if(oe.width>Me||oe.height>Me){var We=Me/Math.max(oe.width,oe.height),Ve=document.createElement("canvas");Ve.width=Math.floor(oe.width*We),Ve.height=Math.floor(oe.height*We);var ot=Ve.getContext("2d");return ot.drawImage(oe,0,0,oe.width,oe.height,0,0,Ve.width,Ve.height),i.warn("THREE.WebGLRenderer: image is too big ("+oe.width+"x"+oe.height+"). Resized to "+Ve.width+"x"+Ve.height,oe),Ve}return oe}function an(oe,Me){if(oe.image.length===6)if(oe.needsUpdate){oe.image.__webglTextureCube||(oe.addEventListener("dispose",Ge),oe.image.__webglTextureCube=Z.createTexture(),R.info.memory.textures++),Z.activeTexture(Z.TEXTURE0+Me),Z.bindTexture(Z.TEXTURE_CUBE_MAP,oe.image.__webglTextureCube),Z.pixelStorei(Z.UNPACK_FLIP_Y_WEBGL,oe.flipY);for(var We=oe instanceof i.CompressedTexture,Ve=oe.image[0]instanceof i.DataTexture,ot=[],ct=0;ct<6;ct++)R.autoScaleCubemaps&&!We&&!Ve?ot[ct]=Xo(oe.image[ct],nt):ot[ct]=Ve?oe.image[ct].image:oe.image[ct];var Ye=ot[0],st=i.Math.isPowerOfTwo(Ye.width)&&i.Math.isPowerOfTwo(Ye.height),wt=Ci(oe.format),St=Ci(oe.type);$o(Z.TEXTURE_CUBE_MAP,oe,st);for(var ct=0;ct<6;ct++)if(!We)Ve?Z.texImage2D(Z.TEXTURE_CUBE_MAP_POSITIVE_X+ct,0,wt,ot[ct].width,ot[ct].height,0,wt,St,ot[ct].data):Z.texImage2D(Z.TEXTURE_CUBE_MAP_POSITIVE_X+ct,0,wt,wt,St,ot[ct]);else for(var z,ee=ot[ct].mipmaps,ce=0,me=ee.length;ce<me;ce++)z=ee[ce],oe.format!==i.RGBAFormat&&oe.format!==i.RGBFormat?At().indexOf(wt)>-1?Z.compressedTexImage2D(Z.TEXTURE_CUBE_MAP_POSITIVE_X+ct,ce,wt,z.width,z.height,0,z.data):i.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setCubeTexture()"):Z.texImage2D(Z.TEXTURE_CUBE_MAP_POSITIVE_X+ct,ce,wt,z.width,z.height,0,wt,St,z.data);oe.generateMipmaps&&st&&Z.generateMipmap(Z.TEXTURE_CUBE_MAP),oe.needsUpdate=!1,oe.onUpdate&&oe.onUpdate()}else Z.activeTexture(Z.TEXTURE0+Me),Z.bindTexture(Z.TEXTURE_CUBE_MAP,oe.image.__webglTextureCube)}function qi(oe,Me){Z.activeTexture(Z.TEXTURE0+Me),Z.bindTexture(Z.TEXTURE_CUBE_MAP,oe.__webglTexture)}function za(oe,Me,We){Z.bindFramebuffer(Z.FRAMEBUFFER,oe),Z.framebufferTexture2D(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,We,Me.__webglTexture,0)}function ci(oe,Me){Z.bindRenderbuffer(Z.RENDERBUFFER,oe),Me.depthBuffer&&!Me.stencilBuffer?(Z.renderbufferStorage(Z.RENDERBUFFER,Z.DEPTH_COMPONENT16,Me.width,Me.height),Z.framebufferRenderbuffer(Z.FRAMEBUFFER,Z.DEPTH_ATTACHMENT,Z.RENDERBUFFER,oe)):Me.depthBuffer&&Me.stencilBuffer?(Z.renderbufferStorage(Z.RENDERBUFFER,Z.DEPTH_STENCIL,Me.width,Me.height),Z.framebufferRenderbuffer(Z.FRAMEBUFFER,Z.DEPTH_STENCIL_ATTACHMENT,Z.RENDERBUFFER,oe)):Z.renderbufferStorage(Z.RENDERBUFFER,Z.RGBA4,Me.width,Me.height)}this.setRenderTarget=function(oe){var Me=oe instanceof i.WebGLRenderTargetCube;if(oe&&oe.__webglFramebuffer===void 0){oe.depthBuffer===void 0&&(oe.depthBuffer=!0),oe.stencilBuffer===void 0&&(oe.stencilBuffer=!0),oe.addEventListener("dispose",Re),oe.__webglTexture=Z.createTexture(),R.info.memory.textures++;var We=i.Math.isPowerOfTwo(oe.width)&&i.Math.isPowerOfTwo(oe.height),Ve=Ci(oe.format),ot=Ci(oe.type);if(Me){oe.__webglFramebuffer=[],oe.__webglRenderbuffer=[],Z.bindTexture(Z.TEXTURE_CUBE_MAP,oe.__webglTexture),$o(Z.TEXTURE_CUBE_MAP,oe,We);for(var ct=0;ct<6;ct++)oe.__webglFramebuffer[ct]=Z.createFramebuffer(),oe.__webglRenderbuffer[ct]=Z.createRenderbuffer(),Z.texImage2D(Z.TEXTURE_CUBE_MAP_POSITIVE_X+ct,0,Ve,oe.width,oe.height,0,Ve,ot,null),za(oe.__webglFramebuffer[ct],oe,Z.TEXTURE_CUBE_MAP_POSITIVE_X+ct),ci(oe.__webglRenderbuffer[ct],oe);We&&Z.generateMipmap(Z.TEXTURE_CUBE_MAP)}else oe.__webglFramebuffer=Z.createFramebuffer(),oe.shareDepthFrom?oe.__webglRenderbuffer=oe.shareDepthFrom.__webglRenderbuffer:oe.__webglRenderbuffer=Z.createRenderbuffer(),Z.bindTexture(Z.TEXTURE_2D,oe.__webglTexture),$o(Z.TEXTURE_2D,oe,We),Z.texImage2D(Z.TEXTURE_2D,0,Ve,oe.width,oe.height,0,Ve,ot,null),za(oe.__webglFramebuffer,oe,Z.TEXTURE_2D),oe.shareDepthFrom?oe.depthBuffer&&!oe.stencilBuffer?Z.framebufferRenderbuffer(Z.FRAMEBUFFER,Z.DEPTH_ATTACHMENT,Z.RENDERBUFFER,oe.__webglRenderbuffer):oe.depthBuffer&&oe.stencilBuffer&&Z.framebufferRenderbuffer(Z.FRAMEBUFFER,Z.DEPTH_STENCIL_ATTACHMENT,Z.RENDERBUFFER,oe.__webglRenderbuffer):ci(oe.__webglRenderbuffer,oe),We&&Z.generateMipmap(Z.TEXTURE_2D);Me?Z.bindTexture(Z.TEXTURE_CUBE_MAP,null):Z.bindTexture(Z.TEXTURE_2D,null),Z.bindRenderbuffer(Z.RENDERBUFFER,null),Z.bindFramebuffer(Z.FRAMEBUFFER,null)}var Ye,st,wt,St,z;oe?(Me?Ye=oe.__webglFramebuffer[oe.activeCubeFace]:Ye=oe.__webglFramebuffer,st=oe.width,wt=oe.height,St=0,z=0):(Ye=null,st=ne,wt=ue,St=K,z=Q),Ye!==I&&(Z.bindFramebuffer(Z.FRAMEBUFFER,Ye),Z.viewport(St,z,st,wt),I=Ye),fe=st,ge=wt},this.readRenderTargetPixels=function(oe,Me,We,Ve,ot,ct){if(!(oe instanceof i.WebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}if(oe.__webglFramebuffer){if(oe.format!==i.RGBAFormat){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA format. readPixels can read only RGBA format.");return}var Ye=!1;oe.__webglFramebuffer!==I&&(Z.bindFramebuffer(Z.FRAMEBUFFER,oe.__webglFramebuffer),Ye=!0),Z.checkFramebufferStatus(Z.FRAMEBUFFER)===Z.FRAMEBUFFER_COMPLETE?Z.readPixels(Me,We,Ve,ot,Z.RGBA,Z.UNSIGNED_BYTE,ct):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."),Ye&&Z.bindFramebuffer(Z.FRAMEBUFFER,I)}};function no(oe){oe instanceof i.WebGLRenderTargetCube?(Z.bindTexture(Z.TEXTURE_CUBE_MAP,oe.__webglTexture),Z.generateMipmap(Z.TEXTURE_CUBE_MAP),Z.bindTexture(Z.TEXTURE_CUBE_MAP,null)):(Z.bindTexture(Z.TEXTURE_2D,oe.__webglTexture),Z.generateMipmap(Z.TEXTURE_2D),Z.bindTexture(Z.TEXTURE_2D,null))}function ho(oe){return oe===i.NearestFilter||oe===i.NearestMipMapNearestFilter||oe===i.NearestMipMapLinearFilter?Z.NEAREST:Z.LINEAR}function Ci(oe){var Me;if(oe===i.RepeatWrapping)return Z.REPEAT;if(oe===i.ClampToEdgeWrapping)return Z.CLAMP_TO_EDGE;if(oe===i.MirroredRepeatWrapping)return Z.MIRRORED_REPEAT;if(oe===i.NearestFilter)return Z.NEAREST;if(oe===i.NearestMipMapNearestFilter)return Z.NEAREST_MIPMAP_NEAREST;if(oe===i.NearestMipMapLinearFilter)return Z.NEAREST_MIPMAP_LINEAR;if(oe===i.LinearFilter)return Z.LINEAR;if(oe===i.LinearMipMapNearestFilter)return Z.LINEAR_MIPMAP_NEAREST;if(oe===i.LinearMipMapLinearFilter)return Z.LINEAR_MIPMAP_LINEAR;if(oe===i.UnsignedByteType)return Z.UNSIGNED_BYTE;if(oe===i.UnsignedShort4444Type)return Z.UNSIGNED_SHORT_4_4_4_4;if(oe===i.UnsignedShort5551Type)return Z.UNSIGNED_SHORT_5_5_5_1;if(oe===i.UnsignedShort565Type)return Z.UNSIGNED_SHORT_5_6_5;if(oe===i.ByteType)return Z.BYTE;if(oe===i.ShortType)return Z.SHORT;if(oe===i.UnsignedShortType)return Z.UNSIGNED_SHORT;if(oe===i.IntType)return Z.INT;if(oe===i.UnsignedIntType)return Z.UNSIGNED_INT;if(oe===i.FloatType)return Z.FLOAT;if(Me=Fe.get("OES_texture_half_float"),Me!==null&&oe===i.HalfFloatType)return Me.HALF_FLOAT_OES;if(oe===i.AlphaFormat)return Z.ALPHA;if(oe===i.RGBFormat)return Z.RGB;if(oe===i.RGBAFormat)return Z.RGBA;if(oe===i.LuminanceFormat)return Z.LUMINANCE;if(oe===i.LuminanceAlphaFormat)return Z.LUMINANCE_ALPHA;if(oe===i.AddEquation)return Z.FUNC_ADD;if(oe===i.SubtractEquation)return Z.FUNC_SUBTRACT;if(oe===i.ReverseSubtractEquation)return Z.FUNC_REVERSE_SUBTRACT;if(oe===i.ZeroFactor)return Z.ZERO;if(oe===i.OneFactor)return Z.ONE;if(oe===i.SrcColorFactor)return Z.SRC_COLOR;if(oe===i.OneMinusSrcColorFactor)return Z.ONE_MINUS_SRC_COLOR;if(oe===i.SrcAlphaFactor)return Z.SRC_ALPHA;if(oe===i.OneMinusSrcAlphaFactor)return Z.ONE_MINUS_SRC_ALPHA;if(oe===i.DstAlphaFactor)return Z.DST_ALPHA;if(oe===i.OneMinusDstAlphaFactor)return Z.ONE_MINUS_DST_ALPHA;if(oe===i.DstColorFactor)return Z.DST_COLOR;if(oe===i.OneMinusDstColorFactor)return Z.ONE_MINUS_DST_COLOR;if(oe===i.SrcAlphaSaturateFactor)return Z.SRC_ALPHA_SATURATE;if(Me=Fe.get("WEBGL_compressed_texture_s3tc"),Me!==null){if(oe===i.RGB_S3TC_DXT1_Format)return Me.COMPRESSED_RGB_S3TC_DXT1_EXT;if(oe===i.RGBA_S3TC_DXT1_Format)return Me.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(oe===i.RGBA_S3TC_DXT3_Format)return Me.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(oe===i.RGBA_S3TC_DXT5_Format)return Me.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(Me=Fe.get("WEBGL_compressed_texture_pvrtc"),Me!==null){if(oe===i.RGB_PVRTC_4BPPV1_Format)return Me.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(oe===i.RGB_PVRTC_2BPPV1_Format)return Me.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(oe===i.RGBA_PVRTC_4BPPV1_Format)return Me.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(oe===i.RGBA_PVRTC_2BPPV1_Format)return Me.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(Me=Fe.get("EXT_blend_minmax"),Me!==null){if(oe===i.MinEquation)return Me.MIN_EXT;if(oe===i.MaxEquation)return Me.MAX_EXT}return 0}function To(oe){if(yt&&oe&&oe.skeleton&&oe.skeleton.useVertexTexture)return 1024;var Me=Z.getParameter(Z.MAX_VERTEX_UNIFORM_VECTORS),We=Math.floor((Me-20)/4),Ve=We;return oe!==void 0&&oe instanceof i.SkinnedMesh&&(Ve=Math.min(oe.skeleton.bones.length,Ve),Ve<oe.skeleton.bones.length&&i.warn("WebGLRenderer: too many bones - "+oe.skeleton.bones.length+", this GPU supports just "+Ve+" (try OpenGL instead of ANGLE)")),Ve}function Wi(oe){for(var Me=0,We=0,Ve=0,ot=0,ct=0,Ye=oe.length;ct<Ye;ct++){var st=oe[ct];st.onlyShadow||st.visible===!1||(st instanceof i.DirectionalLight&&Me++,st instanceof i.PointLight&&We++,st instanceof i.SpotLight&&Ve++,st instanceof i.HemisphereLight&&ot++)}return{directional:Me,point:We,spot:Ve,hemi:ot}}function po(oe){for(var Me=0,We=0,Ve=oe.length;We<Ve;We++){var ot=oe[We];ot.castShadow&&(ot instanceof i.SpotLight&&Me++,ot instanceof i.DirectionalLight&&!ot.shadowCascade&&Me++)}return Me}this.initMaterial=function(){i.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},this.addPrePlugin=function(){i.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},this.addPostPlugin=function(){i.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},this.updateShadowMap=function(){i.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}},i.WebGLRenderTarget=function(r,e,o){this.width=r,this.height=e,o=o||{},this.wrapS=o.wrapS!==void 0?o.wrapS:i.ClampToEdgeWrapping,this.wrapT=o.wrapT!==void 0?o.wrapT:i.ClampToEdgeWrapping,this.magFilter=o.magFilter!==void 0?o.magFilter:i.LinearFilter,this.minFilter=o.minFilter!==void 0?o.minFilter:i.LinearMipMapLinearFilter,this.anisotropy=o.anisotropy!==void 0?o.anisotropy:1,this.offset=new i.Vector2(0,0),this.repeat=new i.Vector2(1,1),this.format=o.format!==void 0?o.format:i.RGBAFormat,this.type=o.type!==void 0?o.type:i.UnsignedByteType,this.depthBuffer=o.depthBuffer!==void 0?o.depthBuffer:!0,this.stencilBuffer=o.stencilBuffer!==void 0?o.stencilBuffer:!0,this.generateMipmaps=!0,this.shareDepthFrom=o.shareDepthFrom!==void 0?o.shareDepthFrom:null},i.WebGLRenderTarget.prototype={constructor:i.WebGLRenderTarget,setSize:function(r,e){(this.width!==r||this.height!==e)&&(this.width=r,this.height=e,this.dispose())},clone:function(){var r=new i.WebGLRenderTarget(this.width,this.height);return r.wrapS=this.wrapS,r.wrapT=this.wrapT,r.magFilter=this.magFilter,r.minFilter=this.minFilter,r.anisotropy=this.anisotropy,r.offset.copy(this.offset),r.repeat.copy(this.repeat),r.format=this.format,r.type=this.type,r.depthBuffer=this.depthBuffer,r.stencilBuffer=this.stencilBuffer,r.generateMipmaps=this.generateMipmaps,r.shareDepthFrom=this.shareDepthFrom,r},dispose:function(){this.dispatchEvent({type:"dispose"})}},i.EventDispatcher.prototype.apply(i.WebGLRenderTarget.prototype),i.WebGLRenderTargetCube=function(r,e,o){i.WebGLRenderTarget.call(this,r,e,o),this.activeCubeFace=0},i.WebGLRenderTargetCube.prototype=Object.create(i.WebGLRenderTarget.prototype),i.WebGLRenderTargetCube.prototype.constructor=i.WebGLRenderTargetCube,i.WebGLExtensions=function(r){var e={};this.get=function(o){if(e[o]!==void 0)return e[o];var s;switch(o){case"EXT_texture_filter_anisotropic":s=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=r.getExtension(o)}return s===null&&i.warn("THREE.WebGLRenderer: "+o+" extension not supported."),e[o]=s,s}},i.WebGLProgram=function(){var r=0,e=function(d){var p,x,l=[];for(var _ in d)p=d[_],p!==!1&&(x="#define "+_+" "+p,l.push(x));return l.join(`
`)},o=function(d,p,x){for(var l={},_=0,v=x.length;_<v;_++){var c=x[_];l[c]=d.getUniformLocation(p,c)}return l},s=function(d,p,x){for(var l={},_=0,v=x.length;_<v;_++){var c=x[_];l[c]=d.getAttribLocation(p,c)}return l};return function(d,p,x,l){var _=d,v=_.context,c=x.defines,h=x.__webglShader.uniforms,f=x.attributes,m=x.__webglShader.vertexShader,b=x.__webglShader.fragmentShader,w=x.index0AttributeName;w===void 0&&l.morphTargets===!0&&(w="position");var C="SHADOWMAP_TYPE_BASIC";l.shadowMapType===i.PCFShadowMap?C="SHADOWMAP_TYPE_PCF":l.shadowMapType===i.PCFSoftShadowMap&&(C="SHADOWMAP_TYPE_PCF_SOFT");var E="ENVMAP_TYPE_CUBE",S="ENVMAP_MODE_REFLECTION",M="ENVMAP_BLENDING_MULTIPLY";if(l.envMap){switch(x.envMap.mapping){case i.CubeReflectionMapping:case i.CubeRefractionMapping:E="ENVMAP_TYPE_CUBE";break;case i.EquirectangularReflectionMapping:case i.EquirectangularRefractionMapping:E="ENVMAP_TYPE_EQUIREC";break;case i.SphericalReflectionMapping:E="ENVMAP_TYPE_SPHERE";break}switch(x.envMap.mapping){case i.CubeRefractionMapping:case i.EquirectangularRefractionMapping:S="ENVMAP_MODE_REFRACTION";break}switch(x.combine){case i.MultiplyOperation:M="ENVMAP_BLENDING_MULTIPLY";break;case i.MixOperation:M="ENVMAP_BLENDING_MIX";break;case i.AddOperation:M="ENVMAP_BLENDING_ADD";break}}var A=d.gammaFactor>0?d.gammaFactor:1,R=e(c),D=v.createProgram(),N,I;x instanceof i.RawShaderMaterial?(N="",I=""):(N=["precision "+l.precision+" float;","precision "+l.precision+" int;",R,l.supportsVertexTextures?"#define VERTEX_TEXTURES":"",_.gammaInput?"#define GAMMA_INPUT":"",_.gammaOutput?"#define GAMMA_OUTPUT":"","#define GAMMA_FACTOR "+A,"#define MAX_DIR_LIGHTS "+l.maxDirLights,"#define MAX_POINT_LIGHTS "+l.maxPointLights,"#define MAX_SPOT_LIGHTS "+l.maxSpotLights,"#define MAX_HEMI_LIGHTS "+l.maxHemiLights,"#define MAX_SHADOWS "+l.maxShadows,"#define MAX_BONES "+l.maxBones,l.map?"#define USE_MAP":"",l.envMap?"#define USE_ENVMAP":"",l.envMap?"#define "+S:"",l.lightMap?"#define USE_LIGHTMAP":"",l.bumpMap?"#define USE_BUMPMAP":"",l.normalMap?"#define USE_NORMALMAP":"",l.specularMap?"#define USE_SPECULARMAP":"",l.alphaMap?"#define USE_ALPHAMAP":"",l.vertexColors?"#define USE_COLOR":"",l.flatShading?"#define FLAT_SHADED":"",l.skinning?"#define USE_SKINNING":"",l.useVertexTexture?"#define BONE_TEXTURE":"",l.morphTargets?"#define USE_MORPHTARGETS":"",l.morphNormals?"#define USE_MORPHNORMALS":"",l.wrapAround?"#define WRAP_AROUND":"",l.doubleSided?"#define DOUBLE_SIDED":"",l.flipSided?"#define FLIP_SIDED":"",l.shadowMapEnabled?"#define USE_SHADOWMAP":"",l.shadowMapEnabled?"#define "+C:"",l.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",l.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",l.sizeAttenuation?"#define USE_SIZEATTENUATION":"",l.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","attribute vec2 uv2;","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",""].join(`
`),I=[l.bumpMap||l.normalMap||l.flatShading?"#extension GL_OES_standard_derivatives : enable":"","precision "+l.precision+" float;","precision "+l.precision+" int;",R,"#define MAX_DIR_LIGHTS "+l.maxDirLights,"#define MAX_POINT_LIGHTS "+l.maxPointLights,"#define MAX_SPOT_LIGHTS "+l.maxSpotLights,"#define MAX_HEMI_LIGHTS "+l.maxHemiLights,"#define MAX_SHADOWS "+l.maxShadows,l.alphaTest?"#define ALPHATEST "+l.alphaTest:"",_.gammaInput?"#define GAMMA_INPUT":"",_.gammaOutput?"#define GAMMA_OUTPUT":"","#define GAMMA_FACTOR "+A,l.useFog&&l.fog?"#define USE_FOG":"",l.useFog&&l.fogExp?"#define FOG_EXP2":"",l.map?"#define USE_MAP":"",l.envMap?"#define USE_ENVMAP":"",l.envMap?"#define "+E:"",l.envMap?"#define "+S:"",l.envMap?"#define "+M:"",l.lightMap?"#define USE_LIGHTMAP":"",l.bumpMap?"#define USE_BUMPMAP":"",l.normalMap?"#define USE_NORMALMAP":"",l.specularMap?"#define USE_SPECULARMAP":"",l.alphaMap?"#define USE_ALPHAMAP":"",l.vertexColors?"#define USE_COLOR":"",l.flatShading?"#define FLAT_SHADED":"",l.metal?"#define METAL":"",l.wrapAround?"#define WRAP_AROUND":"",l.doubleSided?"#define DOUBLE_SIDED":"",l.flipSided?"#define FLIP_SIDED":"",l.shadowMapEnabled?"#define USE_SHADOWMAP":"",l.shadowMapEnabled?"#define "+C:"",l.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",l.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",l.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",""].join(`
`));var L=new i.WebGLShader(v,v.VERTEX_SHADER,N+m),Y=new i.WebGLShader(v,v.FRAGMENT_SHADER,I+b);v.attachShader(D,L),v.attachShader(D,Y),w!==void 0&&v.bindAttribLocation(D,0,w),v.linkProgram(D);var J=v.getProgramInfoLog(D);v.getProgramParameter(D,v.LINK_STATUS)===!1&&i.error("THREE.WebGLProgram: shader error: "+v.getError(),"gl.VALIDATE_STATUS",v.getProgramParameter(D,v.VALIDATE_STATUS),"gl.getPRogramInfoLog",J),v.deleteShader(L),v.deleteShader(Y);var ie=["viewMatrix","modelViewMatrix","projectionMatrix","normalMatrix","modelMatrix","cameraPosition","morphTargetInfluences","bindMatrix","bindMatrixInverse"];l.useVertexTexture?(ie.push("boneTexture"),ie.push("boneTextureWidth"),ie.push("boneTextureHeight")):ie.push("boneGlobalMatrices"),l.logarithmicDepthBuffer&&ie.push("logDepthBufFC");for(var K in h)ie.push(K);this.uniforms=o(v,D,ie),ie=["position","normal","uv","uv2","tangent","color","skinIndex","skinWeight","lineDistance"];for(var Q=0;Q<l.maxMorphTargets;Q++)ie.push("morphTarget"+Q);for(var Q=0;Q<l.maxMorphNormals;Q++)ie.push("morphNormal"+Q);for(var ne in f)ie.push(ne);return this.attributes=s(v,D,ie),this.attributesKeys=Object.keys(this.attributes),this.id=r++,this.code=p,this.usedTimes=1,this.program=D,this.vertexShader=L,this.fragmentShader=Y,this}}(),i.WebGLShader=function(){var r=function(e){for(var o=e.split(`
`),s=0;s<o.length;s++)o[s]=s+1+": "+o[s];return o.join(`
`)};return function(e,o,s){var d=e.createShader(o);return e.shaderSource(d,s),e.compileShader(d),e.getShaderParameter(d,e.COMPILE_STATUS)===!1&&i.error("THREE.WebGLShader: Shader couldn't compile."),d}}(),i.WebGLState=function(r,e){var o=new Uint8Array(16),s=new Uint8Array(16),d=null,p=null,x=null,l=null,_=null,v=null,c=null,h=null,f=null,m=null,b=null,w=null,C=null,E=null,S=null,M=null;this.initAttributes=function(){for(var A=0,R=o.length;A<R;A++)o[A]=0},this.enableAttribute=function(A){o[A]=1,s[A]===0&&(r.enableVertexAttribArray(A),s[A]=1)},this.disableUnusedAttributes=function(){for(var A=0,R=s.length;A<R;A++)s[A]!==o[A]&&(r.disableVertexAttribArray(A),s[A]=0)},this.setBlending=function(A,R,D,N,I,L,Y){A!==d&&(A===i.NoBlending?r.disable(r.BLEND):A===i.AdditiveBlending?(r.enable(r.BLEND),r.blendEquation(r.FUNC_ADD),r.blendFunc(r.SRC_ALPHA,r.ONE)):A===i.SubtractiveBlending?(r.enable(r.BLEND),r.blendEquation(r.FUNC_ADD),r.blendFunc(r.ZERO,r.ONE_MINUS_SRC_COLOR)):A===i.MultiplyBlending?(r.enable(r.BLEND),r.blendEquation(r.FUNC_ADD),r.blendFunc(r.ZERO,r.SRC_COLOR)):A===i.CustomBlending?r.enable(r.BLEND):(r.enable(r.BLEND),r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD),r.blendFuncSeparate(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA)),d=A),A===i.CustomBlending?(I=I||R,L=L||D,Y=Y||N,(R!==p||I!==_)&&(r.blendEquationSeparate(e(R),e(I)),p=R,_=I),(D!==x||N!==l||L!==v||Y!==c)&&(r.blendFuncSeparate(e(D),e(N),e(L),e(Y)),x=D,l=N,v=L,c=Y)):(p=null,x=null,l=null,_=null,v=null,c=null)},this.setDepthTest=function(A){h!==A&&(A?r.enable(r.DEPTH_TEST):r.disable(r.DEPTH_TEST),h=A)},this.setDepthWrite=function(A){f!==A&&(r.depthMask(A),f=A)},this.setColorWrite=function(A){m!==A&&(r.colorMask(A,A,A,A),m=A)},this.setDoubleSided=function(A){b!==A&&(A?r.disable(r.CULL_FACE):r.enable(r.CULL_FACE),b=A)},this.setFlipSided=function(A){w!==A&&(A?r.frontFace(r.CW):r.frontFace(r.CCW),w=A)},this.setLineWidth=function(A){A!==C&&(r.lineWidth(A),C=A)},this.setPolygonOffset=function(A,R,D){E!==A&&(A?r.enable(r.POLYGON_OFFSET_FILL):r.disable(r.POLYGON_OFFSET_FILL),E=A),A&&(S!==R||M!==D)&&(r.polygonOffset(R,D),S=R,M=D)},this.reset=function(){for(var A=0;A<s.length;A++)s[A]=0;d=null,h=null,f=null,m=null,b=null,w=null}},i.LensFlarePlugin=function(r,e){var o=r.context,s,d,p,x,l,_,v,c,h=function(){var m=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),b=new Uint16Array([0,1,2,0,2,3]);s=o.createBuffer(),d=o.createBuffer(),o.bindBuffer(o.ARRAY_BUFFER,s),o.bufferData(o.ARRAY_BUFFER,m,o.STATIC_DRAW),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,d),o.bufferData(o.ELEMENT_ARRAY_BUFFER,b,o.STATIC_DRAW),v=o.createTexture(),c=o.createTexture(),o.bindTexture(o.TEXTURE_2D,v),o.texImage2D(o.TEXTURE_2D,0,o.RGB,16,16,0,o.RGB,o.UNSIGNED_BYTE,null),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),o.bindTexture(o.TEXTURE_2D,c),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,16,16,0,o.RGBA,o.UNSIGNED_BYTE,null),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),_=o.getParameter(o.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;var w;_?w={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join(`
`),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join(`
`)}:w={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uv;","vec2 pos = position;","if( renderType == 2 ) {","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join(`
`),fragmentShader:["precision mediump float;","uniform lowp int renderType;","uniform sampler2D map;","uniform sampler2D occlusionMap;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","void main() {","if( renderType == 0 ) {","gl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );","} else if( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","float visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;","visibility = ( 1.0 - visibility / 4.0 );","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * visibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join(`
`)},p=f(w),x={vertex:o.getAttribLocation(p,"position"),uv:o.getAttribLocation(p,"uv")},l={renderType:o.getUniformLocation(p,"renderType"),map:o.getUniformLocation(p,"map"),occlusionMap:o.getUniformLocation(p,"occlusionMap"),opacity:o.getUniformLocation(p,"opacity"),color:o.getUniformLocation(p,"color"),scale:o.getUniformLocation(p,"scale"),rotation:o.getUniformLocation(p,"rotation"),screenPosition:o.getUniformLocation(p,"screenPosition")}};this.render=function(m,b,w,C){if(e.length!==0){var E=new i.Vector3,S=C/w,M=w*.5,A=C*.5,R=16/C,D=new i.Vector2(R*S,R),N=new i.Vector3(1,1,0),I=new i.Vector2(1,1);p===void 0&&h(),o.useProgram(p),o.enableVertexAttribArray(x.vertex),o.enableVertexAttribArray(x.uv),o.uniform1i(l.occlusionMap,0),o.uniform1i(l.map,1),o.bindBuffer(o.ARRAY_BUFFER,s),o.vertexAttribPointer(x.vertex,2,o.FLOAT,!1,2*8,0),o.vertexAttribPointer(x.uv,2,o.FLOAT,!1,2*8,8),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,d),o.disable(o.CULL_FACE),o.depthMask(!1);for(var L=0,Y=e.length;L<Y;L++){R=16/C,D.set(R*S,R);var J=e[L];if(E.set(J.matrixWorld.elements[12],J.matrixWorld.elements[13],J.matrixWorld.elements[14]),E.applyMatrix4(b.matrixWorldInverse),E.applyProjection(b.projectionMatrix),N.copy(E),I.x=N.x*M+M,I.y=N.y*A+A,_||I.x>0&&I.x<w&&I.y>0&&I.y<C){o.activeTexture(o.TEXTURE1),o.bindTexture(o.TEXTURE_2D,v),o.copyTexImage2D(o.TEXTURE_2D,0,o.RGB,I.x-8,I.y-8,16,16,0),o.uniform1i(l.renderType,0),o.uniform2f(l.scale,D.x,D.y),o.uniform3f(l.screenPosition,N.x,N.y,N.z),o.disable(o.BLEND),o.enable(o.DEPTH_TEST),o.drawElements(o.TRIANGLES,6,o.UNSIGNED_SHORT,0),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,c),o.copyTexImage2D(o.TEXTURE_2D,0,o.RGBA,I.x-8,I.y-8,16,16,0),o.uniform1i(l.renderType,1),o.disable(o.DEPTH_TEST),o.activeTexture(o.TEXTURE1),o.bindTexture(o.TEXTURE_2D,v),o.drawElements(o.TRIANGLES,6,o.UNSIGNED_SHORT,0),J.positionScreen.copy(N),J.customUpdateCallback?J.customUpdateCallback(J):J.updateLensFlares(),o.uniform1i(l.renderType,2),o.enable(o.BLEND);for(var ie=0,K=J.lensFlares.length;ie<K;ie++){var Q=J.lensFlares[ie];Q.opacity>.001&&Q.scale>.001&&(N.x=Q.x,N.y=Q.y,N.z=Q.z,R=Q.size*Q.scale/C,D.x=R*S,D.y=R,o.uniform3f(l.screenPosition,N.x,N.y,N.z),o.uniform2f(l.scale,D.x,D.y),o.uniform1f(l.rotation,Q.rotation),o.uniform1f(l.opacity,Q.opacity),o.uniform3f(l.color,Q.color.r,Q.color.g,Q.color.b),r.state.setBlending(Q.blending,Q.blendEquation,Q.blendSrc,Q.blendDst),r.setTexture(Q.texture,1),o.drawElements(o.TRIANGLES,6,o.UNSIGNED_SHORT,0))}}}o.enable(o.CULL_FACE),o.enable(o.DEPTH_TEST),o.depthMask(!0),r.resetGLState()}};function f(m){var b=o.createProgram(),w=o.createShader(o.FRAGMENT_SHADER),C=o.createShader(o.VERTEX_SHADER),E="precision "+r.getPrecision()+` float;
`;return o.shaderSource(w,E+m.fragmentShader),o.shaderSource(C,E+m.vertexShader),o.compileShader(w),o.compileShader(C),o.attachShader(b,w),o.attachShader(b,C),o.linkProgram(b),b}},i.ShadowMapPlugin=function(r,e,o,s){var d=r.context,p,x,l,_,v=new i.Frustum,c=new i.Matrix4,h=new i.Vector3,f=new i.Vector3,m=new i.Vector3,b=[],w=i.ShaderLib.depthRGBA,C=i.UniformsUtils.clone(w.uniforms);p=new i.ShaderMaterial({uniforms:C,vertexShader:w.vertexShader,fragmentShader:w.fragmentShader}),x=new i.ShaderMaterial({uniforms:C,vertexShader:w.vertexShader,fragmentShader:w.fragmentShader,morphTargets:!0}),l=new i.ShaderMaterial({uniforms:C,vertexShader:w.vertexShader,fragmentShader:w.fragmentShader,skinning:!0}),_=new i.ShaderMaterial({uniforms:C,vertexShader:w.vertexShader,fragmentShader:w.fragmentShader,morphTargets:!0,skinning:!0}),p._shadowPass=!0,x._shadowPass=!0,l._shadowPass=!0,_._shadowPass=!0,this.render=function(D,N){if(r.shadowMapEnabled!==!1){var I,L,Y,J,ie,K,Q,ne,ue,fe,ge,ye,pe,de=[],he=0,_e=null;for(d.clearColor(1,1,1,1),d.disable(d.BLEND),d.enable(d.CULL_FACE),d.frontFace(d.CCW),r.shadowMapCullFace===i.CullFaceFront?d.cullFace(d.FRONT):d.cullFace(d.BACK),r.state.setDepthTest(!0),I=0,L=e.length;I<L;I++)if(pe=e[I],!!pe.castShadow)if(pe instanceof i.DirectionalLight&&pe.shadowCascade)for(ie=0;ie<pe.shadowCascadeCount;ie++){var ve;if(pe.shadowCascadeArray[ie])ve=pe.shadowCascadeArray[ie];else{ve=S(pe,ie),ve.originalCamera=N;var Z=new i.Gyroscope;Z.position.copy(pe.shadowCascadeOffset),Z.add(ve),Z.add(ve.target),N.add(Z),pe.shadowCascadeArray[ie]=ve}M(pe,ie),de[he]=ve,he++}else de[he]=pe,he++;for(I=0,L=de.length;I<L;I++){if(pe=de[I],!pe.shadowMap){var be=i.LinearFilter;r.shadowMapType===i.PCFSoftShadowMap&&(be=i.NearestFilter);var Ee={minFilter:be,magFilter:be,format:i.RGBAFormat};pe.shadowMap=new i.WebGLRenderTarget(pe.shadowMapWidth,pe.shadowMapHeight,Ee),pe.shadowMapSize=new i.Vector2(pe.shadowMapWidth,pe.shadowMapHeight),pe.shadowMatrix=new i.Matrix4}if(!pe.shadowCamera){if(pe instanceof i.SpotLight)pe.shadowCamera=new i.PerspectiveCamera(pe.shadowCameraFov,pe.shadowMapWidth/pe.shadowMapHeight,pe.shadowCameraNear,pe.shadowCameraFar);else if(pe instanceof i.DirectionalLight)pe.shadowCamera=new i.OrthographicCamera(pe.shadowCameraLeft,pe.shadowCameraRight,pe.shadowCameraTop,pe.shadowCameraBottom,pe.shadowCameraNear,pe.shadowCameraFar);else{i.error("THREE.ShadowMapPlugin: Unsupported light type for shadow",pe);continue}D.add(pe.shadowCamera),D.autoUpdate===!0&&D.updateMatrixWorld()}pe.shadowCameraVisible&&!pe.cameraHelper&&(pe.cameraHelper=new i.CameraHelper(pe.shadowCamera),D.add(pe.cameraHelper)),pe.isVirtual&&ve.originalCamera==N&&A(N,pe),K=pe.shadowMap,Q=pe.shadowMatrix,ne=pe.shadowCamera,ne.position.setFromMatrixPosition(pe.matrixWorld),m.setFromMatrixPosition(pe.target.matrixWorld),ne.lookAt(m),ne.updateMatrixWorld(),ne.matrixWorldInverse.getInverse(ne.matrixWorld),pe.cameraHelper&&(pe.cameraHelper.visible=pe.shadowCameraVisible),pe.shadowCameraVisible&&pe.cameraHelper.update(),Q.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),Q.multiply(ne.projectionMatrix),Q.multiply(ne.matrixWorldInverse),c.multiplyMatrices(ne.projectionMatrix,ne.matrixWorldInverse),v.setFromMatrix(c),r.setRenderTarget(K),r.clear(),b.length=0,E(D,D,ne);var De,Fe,Ue;for(Y=0,J=b.length;Y<J;Y++)ge=b[Y],ye=ge.object,ue=ge.buffer,De=R(ye),Fe=ye.geometry.morphTargets!==void 0&&ye.geometry.morphTargets.length>0&&De.morphTargets,Ue=ye instanceof i.SkinnedMesh&&De.skinning,ye.customDepthMaterial?fe=ye.customDepthMaterial:Ue?fe=Fe?_:l:Fe?fe=x:fe=p,r.setMaterialFaces(De),ue instanceof i.BufferGeometry?r.renderBufferDirect(ne,e,_e,fe,ue,ye):r.renderBuffer(ne,e,_e,fe,ue,ye);for(Y=0,J=s.length;Y<J;Y++)ge=s[Y],ye=ge.object,ye.visible&&ye.castShadow&&(ye._modelViewMatrix.multiplyMatrices(ne.matrixWorldInverse,ye.matrixWorld),r.renderImmediateObject(ne,e,_e,p,ye))}var Qe=r.getClearColor(),Ke=r.getClearAlpha();d.clearColor(Qe.r,Qe.g,Qe.b,Ke),d.enable(d.BLEND),r.shadowMapCullFace===i.CullFaceFront&&d.cullFace(d.BACK),r.resetGLState()}};function E(D,N,I){if(N.visible){var L=o[N.id];if(L&&N.castShadow&&(N.frustumCulled===!1||v.intersectsObject(N)===!0))for(var Y=0,J=L.length;Y<J;Y++){var ie=L[Y];N._modelViewMatrix.multiplyMatrices(I.matrixWorldInverse,N.matrixWorld),b.push(ie)}for(var Y=0,J=N.children.length;Y<J;Y++)E(D,N.children[Y],I)}}function S(D,N){var I=new i.DirectionalLight;I.isVirtual=!0,I.onlyShadow=!0,I.castShadow=!0,I.shadowCameraNear=D.shadowCameraNear,I.shadowCameraFar=D.shadowCameraFar,I.shadowCameraLeft=D.shadowCameraLeft,I.shadowCameraRight=D.shadowCameraRight,I.shadowCameraBottom=D.shadowCameraBottom,I.shadowCameraTop=D.shadowCameraTop,I.shadowCameraVisible=D.shadowCameraVisible,I.shadowDarkness=D.shadowDarkness,I.shadowBias=D.shadowCascadeBias[N],I.shadowMapWidth=D.shadowCascadeWidth[N],I.shadowMapHeight=D.shadowCascadeHeight[N],I.pointsWorld=[],I.pointsFrustum=[];for(var L=I.pointsWorld,Y=I.pointsFrustum,J=0;J<8;J++)L[J]=new i.Vector3,Y[J]=new i.Vector3;var ie=D.shadowCascadeNearZ[N],K=D.shadowCascadeFarZ[N];return Y[0].set(-1,-1,ie),Y[1].set(1,-1,ie),Y[2].set(-1,1,ie),Y[3].set(1,1,ie),Y[4].set(-1,-1,K),Y[5].set(1,-1,K),Y[6].set(-1,1,K),Y[7].set(1,1,K),I}function M(D,N){var I=D.shadowCascadeArray[N];I.position.copy(D.position),I.target.position.copy(D.target.position),I.lookAt(I.target),I.shadowCameraVisible=D.shadowCameraVisible,I.shadowDarkness=D.shadowDarkness,I.shadowBias=D.shadowCascadeBias[N];var L=D.shadowCascadeNearZ[N],Y=D.shadowCascadeFarZ[N],J=I.pointsFrustum;J[0].z=L,J[1].z=L,J[2].z=L,J[3].z=L,J[4].z=Y,J[5].z=Y,J[6].z=Y,J[7].z=Y}function A(D,N){var I=N.shadowCamera,L=N.pointsFrustum,Y=N.pointsWorld;h.set(1/0,1/0,1/0),f.set(-1/0,-1/0,-1/0);for(var J=0;J<8;J++){var ie=Y[J];ie.copy(L[J]),ie.unproject(D),ie.applyMatrix4(I.matrixWorldInverse),ie.x<h.x&&(h.x=ie.x),ie.x>f.x&&(f.x=ie.x),ie.y<h.y&&(h.y=ie.y),ie.y>f.y&&(f.y=ie.y),ie.z<h.z&&(h.z=ie.z),ie.z>f.z&&(f.z=ie.z)}I.left=h.x,I.right=f.x,I.top=f.y,I.bottom=h.y,I.updateProjectionMatrix()}function R(D){return D.material instanceof i.MeshFaceMaterial?D.material.materials[0]:D.material}},i.SpritePlugin=function(r,e){var o=r.context,s,d,p,x,l,_,v=new i.Vector3,c=new i.Quaternion,h=new i.Vector3,f=function(){var w=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),C=new Uint16Array([0,1,2,0,2,3]);s=o.createBuffer(),d=o.createBuffer(),o.bindBuffer(o.ARRAY_BUFFER,s),o.bufferData(o.ARRAY_BUFFER,w,o.STATIC_DRAW),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,d),o.bufferData(o.ELEMENT_ARRAY_BUFFER,C,o.STATIC_DRAW),p=m(),x={position:o.getAttribLocation(p,"position"),uv:o.getAttribLocation(p,"uv")},l={uvOffset:o.getUniformLocation(p,"uvOffset"),uvScale:o.getUniformLocation(p,"uvScale"),rotation:o.getUniformLocation(p,"rotation"),scale:o.getUniformLocation(p,"scale"),color:o.getUniformLocation(p,"color"),map:o.getUniformLocation(p,"map"),opacity:o.getUniformLocation(p,"opacity"),modelViewMatrix:o.getUniformLocation(p,"modelViewMatrix"),projectionMatrix:o.getUniformLocation(p,"projectionMatrix"),fogType:o.getUniformLocation(p,"fogType"),fogDensity:o.getUniformLocation(p,"fogDensity"),fogNear:o.getUniformLocation(p,"fogNear"),fogFar:o.getUniformLocation(p,"fogFar"),fogColor:o.getUniformLocation(p,"fogColor"),alphaTest:o.getUniformLocation(p,"alphaTest")};var E=document.createElement("canvas");E.width=8,E.height=8;var S=E.getContext("2d");S.fillStyle="white",S.fillRect(0,0,8,8),_=new i.Texture(E),_.needsUpdate=!0};this.render=function(w,C){if(e.length!==0){p===void 0&&f(),o.useProgram(p),o.enableVertexAttribArray(x.position),o.enableVertexAttribArray(x.uv),o.disable(o.CULL_FACE),o.enable(o.BLEND),o.bindBuffer(o.ARRAY_BUFFER,s),o.vertexAttribPointer(x.position,2,o.FLOAT,!1,2*8,0),o.vertexAttribPointer(x.uv,2,o.FLOAT,!1,2*8,8),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,d),o.uniformMatrix4fv(l.projectionMatrix,!1,C.projectionMatrix.elements),o.activeTexture(o.TEXTURE0),o.uniform1i(l.map,0);var E=0,S=0,M=w.fog;M?(o.uniform3f(l.fogColor,M.color.r,M.color.g,M.color.b),M instanceof i.Fog?(o.uniform1f(l.fogNear,M.near),o.uniform1f(l.fogFar,M.far),o.uniform1i(l.fogType,1),E=1,S=1):M instanceof i.FogExp2&&(o.uniform1f(l.fogDensity,M.density),o.uniform1i(l.fogType,2),E=2,S=2)):(o.uniform1i(l.fogType,0),E=0,S=0);for(var A=0,R=e.length;A<R;A++){var D=e[A];D._modelViewMatrix.multiplyMatrices(C.matrixWorldInverse,D.matrixWorld),D.z=-D._modelViewMatrix.elements[14]}e.sort(b);for(var N=[],A=0,R=e.length;A<R;A++){var D=e[A],I=D.material;o.uniform1f(l.alphaTest,I.alphaTest),o.uniformMatrix4fv(l.modelViewMatrix,!1,D._modelViewMatrix.elements),D.matrixWorld.decompose(v,c,h),N[0]=h.x,N[1]=h.y;var L=0;w.fog&&I.fog&&(L=S),E!==L&&(o.uniform1i(l.fogType,L),E=L),I.map!==null?(o.uniform2f(l.uvOffset,I.map.offset.x,I.map.offset.y),o.uniform2f(l.uvScale,I.map.repeat.x,I.map.repeat.y)):(o.uniform2f(l.uvOffset,0,0),o.uniform2f(l.uvScale,1,1)),o.uniform1f(l.opacity,I.opacity),o.uniform3f(l.color,I.color.r,I.color.g,I.color.b),o.uniform1f(l.rotation,I.rotation),o.uniform2fv(l.scale,N),r.state.setBlending(I.blending,I.blendEquation,I.blendSrc,I.blendDst),r.state.setDepthTest(I.depthTest),r.state.setDepthWrite(I.depthWrite),I.map&&I.map.image&&I.map.image.width?r.setTexture(I.map,0):r.setTexture(_,0),o.drawElements(o.TRIANGLES,6,o.UNSIGNED_SHORT,0)}o.enable(o.CULL_FACE),r.resetGLState()}};function m(){var w=o.createProgram(),C=o.createShader(o.VERTEX_SHADER),E=o.createShader(o.FRAGMENT_SHADER);return o.shaderSource(C,["precision "+r.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join(`
`)),o.shaderSource(E,["precision "+r.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join(`
`)),o.compileShader(C),o.compileShader(E),o.attachShader(w,C),o.attachShader(w,E),o.linkProgram(w),w}function b(w,C){return w.z!==C.z?C.z-w.z:C.id-w.id}},i.GeometryUtils={merge:function(r,e,o){i.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var s;e instanceof i.Mesh&&(e.matrixAutoUpdate&&e.updateMatrix(),s=e.matrix,e=e.geometry),r.merge(e,s,o)},center:function(r){return i.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),r.center()}},i.ImageUtils={crossOrigin:void 0,loadTexture:function(r,e,o,s){var d=new i.ImageLoader;d.crossOrigin=this.crossOrigin;var p=new i.Texture(void 0,e);return d.load(r,function(x){p.image=x,p.needsUpdate=!0,o&&o(p)},void 0,function(x){s&&s(x)}),p.sourceFile=r,p},loadTextureCube:function(r,e,o,s){var d=[],p=new i.ImageLoader;p.crossOrigin=this.crossOrigin;var x=new i.CubeTexture(d,e);x.flipY=!1;for(var l=0,_=function(h){p.load(r[h],function(f){x.images[h]=f,l+=1,l===6&&(x.needsUpdate=!0,o&&o(x))},void 0,s)},v=0,c=r.length;v<c;++v)_(v);return x},loadCompressedTexture:function(){i.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){i.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},getNormalMap:function(r,e){var o=function(J,ie){return[J[1]*ie[2]-J[2]*ie[1],J[2]*ie[0]-J[0]*ie[2],J[0]*ie[1]-J[1]*ie[0]]},s=function(J,ie){return[J[0]-ie[0],J[1]-ie[1],J[2]-ie[2]]},d=function(J){var ie=Math.sqrt(J[0]*J[0]+J[1]*J[1]+J[2]*J[2]);return[J[0]/ie,J[1]/ie,J[2]/ie]};e=e|1;var p=r.width,x=r.height,l=document.createElement("canvas");l.width=p,l.height=x;var _=l.getContext("2d");_.drawImage(r,0,0);for(var v=_.getImageData(0,0,p,x).data,c=_.createImageData(p,x),h=c.data,f=0;f<p;f++)for(var m=0;m<x;m++){var b=m-1<0?0:m-1,w=m+1>x-1?x-1:m+1,C=f-1<0?0:f-1,E=f+1>p-1?p-1:f+1,S=[],M=[0,0,v[(m*p+f)*4]/255*e];S.push([-1,0,v[(m*p+C)*4]/255*e]),S.push([-1,-1,v[(b*p+C)*4]/255*e]),S.push([0,-1,v[(b*p+f)*4]/255*e]),S.push([1,-1,v[(b*p+E)*4]/255*e]),S.push([1,0,v[(m*p+E)*4]/255*e]),S.push([1,1,v[(w*p+E)*4]/255*e]),S.push([0,1,v[(w*p+f)*4]/255*e]),S.push([-1,1,v[(w*p+C)*4]/255*e]);for(var A=[],R=S.length,D=0;D<R;D++){var N=S[D],I=S[(D+1)%R];N=s(N,M),I=s(I,M),A.push(d(o(N,I)))}for(var L=[0,0,0],D=0;D<A.length;D++)L[0]+=A[D][0],L[1]+=A[D][1],L[2]+=A[D][2];L[0]/=A.length,L[1]/=A.length,L[2]/=A.length;var Y=(m*p+f)*4;h[Y]=(L[0]+1)/2*255|0,h[Y+1]=(L[1]+1)/2*255|0,h[Y+2]=L[2]*255|0,h[Y+3]=255}return _.putImageData(c,0,0),l},generateDataTexture:function(r,e,o){for(var s=r*e,d=new Uint8Array(3*s),p=Math.floor(o.r*255),x=Math.floor(o.g*255),l=Math.floor(o.b*255),_=0;_<s;_++)d[_*3]=p,d[_*3+1]=x,d[_*3+2]=l;var v=new i.DataTexture(d,r,e,i.RGBFormat);return v.needsUpdate=!0,v}},i.SceneUtils={createMultiMaterialObject:function(r,e){for(var o=new i.Object3D,s=0,d=e.length;s<d;s++)o.add(new i.Mesh(r,e[s]));return o},detach:function(r,e,o){r.applyMatrix(e.matrixWorld),e.remove(r),o.add(r)},attach:function(r,e,o){var s=new i.Matrix4;s.getInverse(o.matrixWorld),r.applyMatrix(s),e.remove(r),o.add(r)}},i.FontUtils={faces:{},face:"helvetiker",weight:"normal",style:"normal",size:150,divisions:10,getFace:function(){try{return this.faces[this.face][this.weight][this.style]}catch{throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing."}},loadFace:function(r){var e=r.familyName.toLowerCase(),o=this;return o.faces[e]=o.faces[e]||{},o.faces[e][r.cssFontWeight]=o.faces[e][r.cssFontWeight]||{},o.faces[e][r.cssFontWeight][r.cssFontStyle]=r,o.faces[e][r.cssFontWeight][r.cssFontStyle]=r,r},drawText:function(r){var e,o=this.getFace(),s=this.size/o.resolution,d=0,p=String(r).split(""),x=p.length,l=[];for(e=0;e<x;e++){var _=new i.Path,v=this.extractGlyphPoints(p[e],o,s,d,_);d+=v.offset,l.push(v.path)}var c=d/2;return{paths:l,offset:c}},extractGlyphPoints:function(r,e,o,s,d){var p=[],x,l,_,v,c,h,f,m,b,w,C,E,S,M,A,R,D,N,I,L=e.glyphs[r]||e.glyphs["?"];if(L){if(L.o)for(v=L._cachedOutline||(L._cachedOutline=L.o.split(" ")),h=v.length,f=o,m=o,x=0;x<h;)switch(c=v[x++],c){case"m":b=v[x++]*f+s,w=v[x++]*m,d.moveTo(b,w);break;case"l":b=v[x++]*f+s,w=v[x++]*m,d.lineTo(b,w);break;case"q":if(C=v[x++]*f+s,E=v[x++]*m,A=v[x++]*f+s,R=v[x++]*m,d.quadraticCurveTo(A,R,C,E),I=p[p.length-1],I)for(S=I.x,M=I.y,l=1,_=this.divisions;l<=_;l++){var Y=l/_;i.Shape.Utils.b2(Y,S,A,C),i.Shape.Utils.b2(Y,M,R,E)}break;case"b":if(C=v[x++]*f+s,E=v[x++]*m,A=v[x++]*f+s,R=v[x++]*m,D=v[x++]*f+s,N=v[x++]*m,d.bezierCurveTo(A,R,D,N,C,E),I=p[p.length-1],I)for(S=I.x,M=I.y,l=1,_=this.divisions;l<=_;l++){var Y=l/_;i.Shape.Utils.b3(Y,S,A,D,C),i.Shape.Utils.b3(Y,M,R,N,E)}break}return{offset:L.ha*o,path:d}}}},i.FontUtils.generateShapes=function(r,e){e=e||{};var o=e.size!==void 0?e.size:100,s=e.curveSegments!==void 0?e.curveSegments:4,d=e.font!==void 0?e.font:"helvetiker",p=e.weight!==void 0?e.weight:"normal",x=e.style!==void 0?e.style:"normal";i.FontUtils.size=o,i.FontUtils.divisions=s,i.FontUtils.face=d,i.FontUtils.weight=p,i.FontUtils.style=x;for(var l=i.FontUtils.drawText(r),_=l.paths,v=[],c=0,h=_.length;c<h;c++)Array.prototype.push.apply(v,_[c].toShapes());return v},function(r){var e=1e-10,o=function(p,x){var l=p.length;if(l<3)return null;var _=[],v=[],c=[],h,f,m;if(s(p)>0)for(f=0;f<l;f++)v[f]=f;else for(f=0;f<l;f++)v[f]=l-1-f;var b=l,w=2*b;for(f=b-1;b>2;){if(w--<=0)return i.warn("THREE.FontUtils: Warning, unable to triangulate polygon! in Triangulate.process()"),x?c:_;if(h=f,b<=h&&(h=0),f=h+1,b<=f&&(f=0),m=f+1,b<=m&&(m=0),d(p,h,f,m,b,v)){var C,E,S,M,A;for(C=v[h],E=v[f],S=v[m],_.push([p[C],p[E],p[S]]),c.push([v[h],v[f],v[m]]),M=f,A=f+1;A<b;M++,A++)v[M]=v[A];b--,w=2*b}}return x?c:_},s=function(p){for(var x=p.length,l=0,_=x-1,v=0;v<x;_=v++)l+=p[_].x*p[v].y-p[v].x*p[_].y;return l*.5},d=function(p,x,l,_,v,c){var h,f,m,b,w,C,E,S,M;if(f=p[c[x]].x,m=p[c[x]].y,b=p[c[l]].x,w=p[c[l]].y,C=p[c[_]].x,E=p[c[_]].y,e>(b-f)*(E-m)-(w-m)*(C-f))return!1;var A,R,D,N,I,L,Y,J,ie,K,Q,ne,ue,fe,ge;for(A=C-b,R=E-w,D=f-C,N=m-E,I=b-f,L=w-m,h=0;h<v;h++)if(S=p[c[h]].x,M=p[c[h]].y,!(S===f&&M===m||S===b&&M===w||S===C&&M===E)&&(Y=S-f,J=M-m,ie=S-b,K=M-w,Q=S-C,ne=M-E,ge=A*K-R*ie,ue=I*J-L*Y,fe=D*ne-N*Q,ge>=-e&&fe>=-e&&ue>=-e))return!1;return!0};return r.Triangulate=o,r.Triangulate.area=s,r}(i.FontUtils),self._typeface_js={faces:i.FontUtils.faces,loadFace:i.FontUtils.loadFace},i.typeface_js=self._typeface_js,i.Audio=function(r){i.Object3D.call(this),this.type="Audio",this.context=r.context,this.source=this.context.createBufferSource(),this.source.onended=this.onEnded.bind(this),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.panner=this.context.createPanner(),this.panner.connect(this.gain),this.autoplay=!1,this.startTime=0,this.isPlaying=!1},i.Audio.prototype=Object.create(i.Object3D.prototype),i.Audio.prototype.constructor=i.Audio,i.Audio.prototype.load=function(r){var e=this,o=new XMLHttpRequest;return o.open("GET",r,!0),o.responseType="arraybuffer",o.onload=function(s){e.context.decodeAudioData(this.response,function(d){e.source.buffer=d,e.autoplay&&e.play()})},o.send(),this},i.Audio.prototype.play=function(){if(this.isPlaying===!0){i.warn("THREE.Audio: Audio is already playing.");return}var r=this.context.createBufferSource();r.buffer=this.source.buffer,r.loop=this.source.loop,r.onended=this.source.onended,r.connect(this.panner),r.start(0,this.startTime),this.isPlaying=!0,this.source=r},i.Audio.prototype.pause=function(){this.source.stop(),this.startTime=this.context.currentTime},i.Audio.prototype.stop=function(){this.source.stop(),this.startTime=0},i.Audio.prototype.onEnded=function(){this.isPlaying=!1},i.Audio.prototype.setLoop=function(r){this.source.loop=r},i.Audio.prototype.setRefDistance=function(r){this.panner.refDistance=r},i.Audio.prototype.setRolloffFactor=function(r){this.panner.rolloffFactor=r},i.Audio.prototype.setVolume=function(r){this.gain.gain.value=r},i.Audio.prototype.updateMatrixWorld=function(){var r=new i.Vector3;return function(e){i.Object3D.prototype.updateMatrixWorld.call(this,e),r.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(r.x,r.y,r.z)}}(),i.AudioListener=function(){i.Object3D.call(this),this.type="AudioListener",this.context=new(window.AudioContext||window.webkitAudioContext)},i.AudioListener.prototype=Object.create(i.Object3D.prototype),i.AudioListener.prototype.constructor=i.AudioListener,i.AudioListener.prototype.updateMatrixWorld=function(){var r=new i.Vector3,e=new i.Quaternion,o=new i.Vector3,s=new i.Vector3,d=new i.Vector3,p=new i.Vector3;return function(x){i.Object3D.prototype.updateMatrixWorld.call(this,x);var l=this.context.listener,_=this.up;this.matrixWorld.decompose(r,e,o),s.set(0,0,-1).applyQuaternion(e),d.subVectors(r,p),l.setPosition(r.x,r.y,r.z),l.setOrientation(s.x,s.y,s.z,_.x,_.y,_.z),l.setVelocity(d.x,d.y,d.z),p.copy(r)}}(),i.Curve=function(){},i.Curve.prototype.getPoint=function(r){return i.warn("THREE.Curve: Warning, getPoint() not implemented!"),null},i.Curve.prototype.getPointAt=function(r){var e=this.getUtoTmapping(r);return this.getPoint(e)},i.Curve.prototype.getPoints=function(r){r||(r=5);var e,o=[];for(e=0;e<=r;e++)o.push(this.getPoint(e/r));return o},i.Curve.prototype.getSpacedPoints=function(r){r||(r=5);var e,o=[];for(e=0;e<=r;e++)o.push(this.getPointAt(e/r));return o},i.Curve.prototype.getLength=function(){var r=this.getLengths();return r[r.length-1]},i.Curve.prototype.getLengths=function(r){if(r||(r=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length==r+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e=[],o,s=this.getPoint(0),d,p=0;for(e.push(0),d=1;d<=r;d++)o=this.getPoint(d/r),p+=o.distanceTo(s),e.push(p),s=o;return this.cacheArcLengths=e,e},i.Curve.prototype.updateArcLengths=function(){this.needsUpdate=!0,this.getLengths()},i.Curve.prototype.getUtoTmapping=function(r,e){var o=this.getLengths(),s=0,d=o.length,p;e?p=e:p=r*o[d-1];for(var x=0,l=d-1,_;x<=l;)if(s=Math.floor(x+(l-x)/2),_=o[s]-p,_<0)x=s+1;else if(_>0)l=s-1;else{l=s;break}if(s=l,o[s]==p){var m=s/(d-1);return m}var v=o[s],c=o[s+1],h=c-v,f=(p-v)/h,m=(s+f)/(d-1);return m},i.Curve.prototype.getTangent=function(r){var e=1e-4,o=r-e,s=r+e;o<0&&(o=0),s>1&&(s=1);var d=this.getPoint(o),p=this.getPoint(s),x=p.clone().sub(d);return x.normalize()},i.Curve.prototype.getTangentAt=function(r){var e=this.getUtoTmapping(r);return this.getTangent(e)},i.Curve.Utils={tangentQuadraticBezier:function(r,e,o,s){return 2*(1-r)*(o-e)+2*r*(s-o)},tangentCubicBezier:function(r,e,o,s,d){return-3*e*(1-r)*(1-r)+3*o*(1-r)*(1-r)-6*r*o*(1-r)+6*r*s*(1-r)-3*r*r*s+3*r*r*d},tangentSpline:function(r,e,o,s,d){var p=6*r*r-6*r,x=3*r*r-4*r+1,l=-6*r*r+6*r,_=3*r*r-2*r;return p+x+l+_},interpolate:function(r,e,o,s,d){var p=(o-r)*.5,x=(s-e)*.5,l=d*d,_=d*l;return(2*e-2*o+p+x)*_+(-3*e+3*o-2*p-x)*l+p*d+e}},i.Curve.create=function(r,e){return r.prototype=Object.create(i.Curve.prototype),r.prototype.constructor=r,r.prototype.getPoint=e,r},i.CurvePath=function(){this.curves=[],this.bends=[],this.autoClose=!1},i.CurvePath.prototype=Object.create(i.Curve.prototype),i.CurvePath.prototype.constructor=i.CurvePath,i.CurvePath.prototype.add=function(r){this.curves.push(r)},i.CurvePath.prototype.checkConnection=function(){},i.CurvePath.prototype.closePath=function(){var r=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);r.equals(e)||this.curves.push(new i.LineCurve(e,r))},i.CurvePath.prototype.getPoint=function(r){for(var e=r*this.getLength(),o=this.getCurveLengths(),s=0,d,p;s<o.length;){if(o[s]>=e){d=o[s]-e,p=this.curves[s];var x=1-d/p.getLength();return p.getPointAt(x)}s++}return null},i.CurvePath.prototype.getLength=function(){var r=this.getCurveLengths();return r[r.length-1]},i.CurvePath.prototype.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;var r=[],e=0,o,s=this.curves.length;for(o=0;o<s;o++)e+=this.curves[o].getLength(),r.push(e);return this.cacheLengths=r,r},i.CurvePath.prototype.getBoundingBox=function(){var r=this.getPoints(),e,o,s,d,p,x;e=o=Number.NEGATIVE_INFINITY,d=p=Number.POSITIVE_INFINITY;var l,_,v,c,h=r[0]instanceof i.Vector3;for(c=h?new i.Vector3:new i.Vector2,_=0,v=r.length;_<v;_++)l=r[_],l.x>e?e=l.x:l.x<d&&(d=l.x),l.y>o?o=l.y:l.y<p&&(p=l.y),h&&(l.z>s?s=l.z:l.z<x&&(x=l.z)),c.add(l);var f={minX:d,minY:p,maxX:e,maxY:o};return h&&(f.maxZ=s,f.minZ=x),f},i.CurvePath.prototype.createPointsGeometry=function(r){var e=this.getPoints(r,!0);return this.createGeometry(e)},i.CurvePath.prototype.createSpacedPointsGeometry=function(r){var e=this.getSpacedPoints(r,!0);return this.createGeometry(e)},i.CurvePath.prototype.createGeometry=function(r){for(var e=new i.Geometry,o=0;o<r.length;o++)e.vertices.push(new i.Vector3(r[o].x,r[o].y,r[o].z||0));return e},i.CurvePath.prototype.addWrapPath=function(r){this.bends.push(r)},i.CurvePath.prototype.getTransformedPoints=function(r,e){var o=this.getPoints(r),s,d;for(e||(e=this.bends),s=0,d=e.length;s<d;s++)o=this.getWrapPoints(o,e[s]);return o},i.CurvePath.prototype.getTransformedSpacedPoints=function(r,e){var o=this.getSpacedPoints(r),s,d;for(e||(e=this.bends),s=0,d=e.length;s<d;s++)o=this.getWrapPoints(o,e[s]);return o},i.CurvePath.prototype.getWrapPoints=function(r,e){var o=this.getBoundingBox(),s,d,p,x,l,_;for(s=0,d=r.length;s<d;s++){p=r[s],x=p.x,l=p.y,_=x/o.maxX,_=e.getUtoTmapping(_,x);var v=e.getPoint(_),c=e.getTangent(_);c.set(-c.y,c.x).multiplyScalar(l),p.x=v.x+c.x,p.y=v.y+c.y}return r},i.Gyroscope=function(){i.Object3D.call(this)},i.Gyroscope.prototype=Object.create(i.Object3D.prototype),i.Gyroscope.prototype.constructor=i.Gyroscope,i.Gyroscope.prototype.updateMatrixWorld=function(){var r=new i.Vector3,e=new i.Quaternion,o=new i.Vector3,s=new i.Vector3,d=new i.Quaternion,p=new i.Vector3;return function(x){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||x)&&(this.parent?(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorld.decompose(s,d,p),this.matrix.decompose(r,e,o),this.matrixWorld.compose(s,e,p)):this.matrixWorld.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,x=!0);for(var l=0,_=this.children.length;l<_;l++)this.children[l].updateMatrixWorld(x)}}(),i.Path=function(r){i.CurvePath.call(this),this.actions=[],r&&this.fromPoints(r)},i.Path.prototype=Object.create(i.CurvePath.prototype),i.Path.prototype.constructor=i.Path,i.PathActions={MOVE_TO:"moveTo",LINE_TO:"lineTo",QUADRATIC_CURVE_TO:"quadraticCurveTo",BEZIER_CURVE_TO:"bezierCurveTo",CSPLINE_THRU:"splineThru",ARC:"arc",ELLIPSE:"ellipse"},i.Path.prototype.fromPoints=function(r){this.moveTo(r[0].x,r[0].y);for(var e=1,o=r.length;e<o;e++)this.lineTo(r[e].x,r[e].y)},i.Path.prototype.moveTo=function(r,e){var o=Array.prototype.slice.call(arguments);this.actions.push({action:i.PathActions.MOVE_TO,args:o})},i.Path.prototype.lineTo=function(r,e){var o=Array.prototype.slice.call(arguments),s=this.actions[this.actions.length-1].args,d=s[s.length-2],p=s[s.length-1],x=new i.LineCurve(new i.Vector2(d,p),new i.Vector2(r,e));this.curves.push(x),this.actions.push({action:i.PathActions.LINE_TO,args:o})},i.Path.prototype.quadraticCurveTo=function(r,e,o,s){var d=Array.prototype.slice.call(arguments),p=this.actions[this.actions.length-1].args,x=p[p.length-2],l=p[p.length-1],_=new i.QuadraticBezierCurve(new i.Vector2(x,l),new i.Vector2(r,e),new i.Vector2(o,s));this.curves.push(_),this.actions.push({action:i.PathActions.QUADRATIC_CURVE_TO,args:d})},i.Path.prototype.bezierCurveTo=function(r,e,o,s,d,p){var x=Array.prototype.slice.call(arguments),l=this.actions[this.actions.length-1].args,_=l[l.length-2],v=l[l.length-1],c=new i.CubicBezierCurve(new i.Vector2(_,v),new i.Vector2(r,e),new i.Vector2(o,s),new i.Vector2(d,p));this.curves.push(c),this.actions.push({action:i.PathActions.BEZIER_CURVE_TO,args:x})},i.Path.prototype.splineThru=function(r){var e=Array.prototype.slice.call(arguments),o=this.actions[this.actions.length-1].args,s=o[o.length-2],d=o[o.length-1],p=[new i.Vector2(s,d)];Array.prototype.push.apply(p,r);var x=new i.SplineCurve(p);this.curves.push(x),this.actions.push({action:i.PathActions.CSPLINE_THRU,args:e})},i.Path.prototype.arc=function(r,e,o,s,d,p){var x=this.actions[this.actions.length-1].args,l=x[x.length-2],_=x[x.length-1];this.absarc(r+l,e+_,o,s,d,p)},i.Path.prototype.absarc=function(r,e,o,s,d,p){this.absellipse(r,e,o,o,s,d,p)},i.Path.prototype.ellipse=function(r,e,o,s,d,p,x){var l=this.actions[this.actions.length-1].args,_=l[l.length-2],v=l[l.length-1];this.absellipse(r+_,e+v,o,s,d,p,x)},i.Path.prototype.absellipse=function(r,e,o,s,d,p,x){var l=Array.prototype.slice.call(arguments),_=new i.EllipseCurve(r,e,o,s,d,p,x);this.curves.push(_);var v=_.getPoint(1);l.push(v.x),l.push(v.y),this.actions.push({action:i.PathActions.ELLIPSE,args:l})},i.Path.prototype.getSpacedPoints=function(r,e){r||(r=40);for(var o=[],s=0;s<r;s++)o.push(this.getPoint(s/r));return o},i.Path.prototype.getPoints=function(r,e){if(this.useSpacedPoints)return console.log("tata"),this.getSpacedPoints(r,e);r=r||12;var o=[],s,d,p,x,l,_,v,c,h,f,m,b,w,C,E,S,M,A;for(s=0,d=this.actions.length;s<d;s++)switch(p=this.actions[s],x=p.action,l=p.args,x){case i.PathActions.MOVE_TO:o.push(new i.Vector2(l[0],l[1]));break;case i.PathActions.LINE_TO:o.push(new i.Vector2(l[0],l[1]));break;case i.PathActions.QUADRATIC_CURVE_TO:for(_=l[2],v=l[3],f=l[0],m=l[1],o.length>0?(C=o[o.length-1],b=C.x,w=C.y):(C=this.actions[s-1].args,b=C[C.length-2],w=C[C.length-1]),E=1;E<=r;E++)S=E/r,M=i.Shape.Utils.b2(S,b,f,_),A=i.Shape.Utils.b2(S,w,m,v),o.push(new i.Vector2(M,A));break;case i.PathActions.BEZIER_CURVE_TO:for(_=l[4],v=l[5],f=l[0],m=l[1],c=l[2],h=l[3],o.length>0?(C=o[o.length-1],b=C.x,w=C.y):(C=this.actions[s-1].args,b=C[C.length-2],w=C[C.length-1]),E=1;E<=r;E++)S=E/r,M=i.Shape.Utils.b3(S,b,f,c,_),A=i.Shape.Utils.b3(S,w,m,h,v),o.push(new i.Vector2(M,A));break;case i.PathActions.CSPLINE_THRU:C=this.actions[s-1].args;var R=new i.Vector2(C[C.length-2],C[C.length-1]),D=[R],N=r*l[0].length;D=D.concat(l[0]);var I=new i.SplineCurve(D);for(E=1;E<=N;E++)o.push(I.getPointAt(E/N));break;case i.PathActions.ARC:var Y=l[0],J=l[1],L=l[2],Q=l[3],ne=l[4],ue=!!l[5],fe=ne-Q,ge,ye=r*2;for(E=1;E<=ye;E++)S=E/ye,ue||(S=1-S),ge=Q+S*fe,M=Y+L*Math.cos(ge),A=J+L*Math.sin(ge),o.push(new i.Vector2(M,A));break;case i.PathActions.ELLIPSE:var Y=l[0],J=l[1],ie=l[2],K=l[3],Q=l[4],ne=l[5],ue=!!l[6],fe=ne-Q,ge,ye=r*2;for(E=1;E<=ye;E++)S=E/ye,ue||(S=1-S),ge=Q+S*fe,M=Y+ie*Math.cos(ge),A=J+K*Math.sin(ge),o.push(new i.Vector2(M,A));break}var pe=o[o.length-1],de=1e-10;return Math.abs(pe.x-o[0].x)<de&&Math.abs(pe.y-o[0].y)<de&&o.splice(o.length-1,1),e&&o.push(o[0]),o},i.Path.prototype.toShapes=function(r,e){function o(Q){var ne,ue,fe,ge,ye,pe=[],de=new i.Path;for(ne=0,ue=Q.length;ne<ue;ne++)fe=Q[ne],ye=fe.args,ge=fe.action,ge==i.PathActions.MOVE_TO&&de.actions.length!=0&&(pe.push(de),de=new i.Path),de[ge].apply(de,ye);return de.actions.length!=0&&pe.push(de),pe}function s(Q){for(var ne=[],ue=0,fe=Q.length;ue<fe;ue++){var ge=Q[ue],ye=new i.Shape;ye.actions=ge.actions,ye.curves=ge.curves,ne.push(ye)}return ne}function d(Q,ne){for(var ue=1e-10,fe=ne.length,ge=!1,ye=fe-1,pe=0;pe<fe;ye=pe++){var de=ne[ye],he=ne[pe],_e=he.x-de.x,ve=he.y-de.y;if(Math.abs(ve)>ue){if(ve<0&&(de=ne[pe],_e=-_e,he=ne[ye],ve=-ve),Q.y<de.y||Q.y>he.y)continue;if(Q.y==de.y){if(Q.x==de.x)return!0}else{var Z=ve*(Q.x-de.x)-_e*(Q.y-de.y);if(Z==0)return!0;if(Z<0)continue;ge=!ge}}else{if(Q.y!=de.y)continue;if(he.x<=Q.x&&Q.x<=de.x||de.x<=Q.x&&Q.x<=he.x)return!0}}return ge}var p=o(this.actions);if(p.length==0)return[];if(e===!0)return s(p);var x,l,_,v=[];if(p.length==1)return l=p[0],_=new i.Shape,_.actions=l.actions,_.curves=l.curves,v.push(_),v;var c=!i.Shape.Utils.isClockWise(p[0].getPoints());c=r?!c:c;var h=[],f=[],m=[],b=0,w;f[b]=void 0,m[b]=[];var C,E;for(C=0,E=p.length;C<E;C++)l=p[C],w=l.getPoints(),x=i.Shape.Utils.isClockWise(w),x=r?!x:x,x?(!c&&f[b]&&b++,f[b]={s:new i.Shape,p:w},f[b].s.actions=l.actions,f[b].s.curves=l.curves,c&&b++,m[b]=[]):m[b].push({h:l,p:w[0]});if(!f[0])return s(p);if(f.length>1){for(var S=!1,M=[],A=0,R=f.length;A<R;A++)h[A]=[];for(var A=0,R=f.length;A<R;A++)for(var D=m[A],N=0;N<D.length;N++){for(var I=D[N],L=!0,Y=0;Y<f.length;Y++)d(I.p,f[Y].p)&&(A!=Y&&M.push({froms:A,tos:Y,hole:N}),L?(L=!1,h[Y].push(I)):S=!0);L&&h[A].push(I)}M.length>0&&(S||(m=h))}var J,ie,K;for(C=0,E=f.length;C<E;C++)for(_=f[C].s,v.push(_),J=m[C],ie=0,K=J.length;ie<K;ie++)_.holes.push(J[ie].h);return v},i.Shape=function(){i.Path.apply(this,arguments),this.holes=[]},i.Shape.prototype=Object.create(i.Path.prototype),i.Shape.prototype.constructor=i.Shape,i.Shape.prototype.extrude=function(r){var e=new i.ExtrudeGeometry(this,r);return e},i.Shape.prototype.makeGeometry=function(r){var e=new i.ShapeGeometry(this,r);return e},i.Shape.prototype.getPointsHoles=function(r){var e,o=this.holes.length,s=[];for(e=0;e<o;e++)s[e]=this.holes[e].getTransformedPoints(r,this.bends);return s},i.Shape.prototype.getSpacedPointsHoles=function(r){var e,o=this.holes.length,s=[];for(e=0;e<o;e++)s[e]=this.holes[e].getTransformedSpacedPoints(r,this.bends);return s},i.Shape.prototype.extractAllPoints=function(r){return{shape:this.getTransformedPoints(r),holes:this.getPointsHoles(r)}},i.Shape.prototype.extractPoints=function(r){return this.useSpacedPoints?this.extractAllSpacedPoints(r):this.extractAllPoints(r)},i.Shape.prototype.extractAllSpacedPoints=function(r){return{shape:this.getTransformedSpacedPoints(r),holes:this.getSpacedPointsHoles(r)}},i.Shape.Utils={triangulateShape:function(r,e){function o(S,M,A){return S.x!=M.x?S.x<M.x?S.x<=A.x&&A.x<=M.x:M.x<=A.x&&A.x<=S.x:S.y<M.y?S.y<=A.y&&A.y<=M.y:M.y<=A.y&&A.y<=S.y}function s(S,M,A,R,D){var N=1e-10,I=M.x-S.x,L=M.y-S.y,Y=R.x-A.x,J=R.y-A.y,ie=S.x-A.x,K=S.y-A.y,Q=L*Y-I*J,ne=L*ie-I*K;if(Math.abs(Q)>N){var ue;if(Q>0){if(ne<0||ne>Q)return[];if(ue=J*ie-Y*K,ue<0||ue>Q)return[]}else{if(ne>0||ne<Q)return[];if(ue=J*ie-Y*K,ue>0||ue<Q)return[]}if(ue==0)return D&&(ne==0||ne==Q)?[]:[S];if(ue==Q)return D&&(ne==0||ne==Q)?[]:[M];if(ne==0)return[A];if(ne==Q)return[R];var fe=ue/Q;return[{x:S.x+fe*I,y:S.y+fe*L}]}else{if(ne!=0||J*ie!=Y*K)return[];var ge=I==0&&L==0,ye=Y==0&&J==0;if(ge&&ye)return S.x!=A.x||S.y!=A.y?[]:[S];if(ge)return o(A,R,S)?[S]:[];if(ye)return o(S,M,A)?[A]:[];var pe,de,he,_e,ve,Z,be,Ee;return I!=0?(S.x<M.x?(pe=S,he=S.x,de=M,_e=M.x):(pe=M,he=M.x,de=S,_e=S.x),A.x<R.x?(ve=A,be=A.x,Z=R,Ee=R.x):(ve=R,be=R.x,Z=A,Ee=A.x)):(S.y<M.y?(pe=S,he=S.y,de=M,_e=M.y):(pe=M,he=M.y,de=S,_e=S.y),A.y<R.y?(ve=A,be=A.y,Z=R,Ee=R.y):(ve=R,be=R.y,Z=A,Ee=A.y)),he<=be?_e<be?[]:_e==be?D?[]:[ve]:_e<=Ee?[ve,de]:[ve,Z]:he>Ee?[]:he==Ee?D?[]:[pe]:_e<=Ee?[pe,de]:[pe,Z]}}function d(S,M,A,R){var D=1e-10,N=M.x-S.x,I=M.y-S.y,L=A.x-S.x,Y=A.y-S.y,J=R.x-S.x,ie=R.y-S.y,K=N*Y-I*L,Q=N*ie-I*J;if(Math.abs(K)>D){var ne=J*Y-ie*L;return K>0?Q>=0&&ne>=0:Q>=0||ne>=0}else return Q>0}function p(S,M){var A=S.concat(),R;function D(be,Ee){var De=A.length-1,Fe=be-1;Fe<0&&(Fe=De);var Ue=be+1;Ue>De&&(Ue=0);var Qe=d(A[be],A[Fe],A[Ue],R[Ee]);if(!Qe)return!1;var Ke=R.length-1,Te=Ee-1;Te<0&&(Te=Ke);var Ie=Ee+1;return Ie>Ke&&(Ie=0),Qe=d(R[Ee],R[Te],R[Ie],A[be]),!!Qe}function N(be,Ee){var De,Fe,Ue;for(De=0;De<A.length;De++)if(Fe=De+1,Fe%=A.length,Ue=s(be,Ee,A[De],A[Fe],!0),Ue.length>0)return!0;return!1}var I=[];function L(be,Ee){var De,Fe,Ue,Qe,Ke;for(De=0;De<I.length;De++)for(Fe=M[I[De]],Ue=0;Ue<Fe.length;Ue++)if(Qe=Ue+1,Qe%=Fe.length,Ke=s(be,Ee,Fe[Ue],Fe[Qe],!0),Ke.length>0)return!0;return!1}for(var Y,J,ie,K,Q,ne,ue=[],fe,ge,ye,pe,de=0,he=M.length;de<he;de++)I.push(de);for(var _e=0,ve=I.length*2;I.length>0;){if(ve--,ve<0){console.log("Infinite Loop! Holes left:"+I.length+", Probably Hole outside Shape!");break}for(J=_e;J<A.length;J++){ie=A[J],Y=-1;for(var de=0;de<I.length;de++)if(Q=I[de],ne=ie.x+":"+ie.y+":"+Q,ue[ne]===void 0){R=M[Q];for(var Z=0;Z<R.length;Z++)if(K=R[Z],!!D(J,Z)&&!N(ie,K)&&!L(ie,K)){Y=Z,I.splice(de,1),fe=A.slice(0,J+1),ge=A.slice(J),ye=R.slice(Y),pe=R.slice(0,Y+1),A=fe.concat(ye).concat(pe).concat(ge),_e=J;break}if(Y>=0)break;ue[ne]=!0}if(Y>=0)break}}return A}for(var x,l,_,v,c,h,f={},m=r.concat(),b=0,w=e.length;b<w;b++)Array.prototype.push.apply(m,e[b]);for(x=0,l=m.length;x<l;x++)c=m[x].x+":"+m[x].y,f[c]!==void 0&&i.warn("THREE.Shape: Duplicate point",c),f[c]=x;var C=p(r,e),E=i.FontUtils.Triangulate(C,!1);for(x=0,l=E.length;x<l;x++)for(v=E[x],_=0;_<3;_++)c=v[_].x+":"+v[_].y,h=f[c],h!==void 0&&(v[_]=h);return E.concat()},isClockWise:function(r){return i.FontUtils.Triangulate.area(r)<0},b2p0:function(r,e){var o=1-r;return o*o*e},b2p1:function(r,e){return 2*(1-r)*r*e},b2p2:function(r,e){return r*r*e},b2:function(r,e,o,s){return this.b2p0(r,e)+this.b2p1(r,o)+this.b2p2(r,s)},b3p0:function(r,e){var o=1-r;return o*o*o*e},b3p1:function(r,e){var o=1-r;return 3*o*o*r*e},b3p2:function(r,e){var o=1-r;return 3*o*r*r*e},b3p3:function(r,e){return r*r*r*e},b3:function(r,e,o,s,d){return this.b3p0(r,e)+this.b3p1(r,o)+this.b3p2(r,s)+this.b3p3(r,d)}},i.LineCurve=function(r,e){this.v1=r,this.v2=e},i.LineCurve.prototype=Object.create(i.Curve.prototype),i.LineCurve.prototype.constructor=i.LineCurve,i.LineCurve.prototype.getPoint=function(r){var e=this.v2.clone().sub(this.v1);return e.multiplyScalar(r).add(this.v1),e},i.LineCurve.prototype.getPointAt=function(r){return this.getPoint(r)},i.LineCurve.prototype.getTangent=function(r){var e=this.v2.clone().sub(this.v1);return e.normalize()},i.QuadraticBezierCurve=function(r,e,o){this.v0=r,this.v1=e,this.v2=o},i.QuadraticBezierCurve.prototype=Object.create(i.Curve.prototype),i.QuadraticBezierCurve.prototype.constructor=i.QuadraticBezierCurve,i.QuadraticBezierCurve.prototype.getPoint=function(r){var e=new i.Vector2;return e.x=i.Shape.Utils.b2(r,this.v0.x,this.v1.x,this.v2.x),e.y=i.Shape.Utils.b2(r,this.v0.y,this.v1.y,this.v2.y),e},i.QuadraticBezierCurve.prototype.getTangent=function(r){var e=new i.Vector2;return e.x=i.Curve.Utils.tangentQuadraticBezier(r,this.v0.x,this.v1.x,this.v2.x),e.y=i.Curve.Utils.tangentQuadraticBezier(r,this.v0.y,this.v1.y,this.v2.y),e.normalize()},i.CubicBezierCurve=function(r,e,o,s){this.v0=r,this.v1=e,this.v2=o,this.v3=s},i.CubicBezierCurve.prototype=Object.create(i.Curve.prototype),i.CubicBezierCurve.prototype.constructor=i.CubicBezierCurve,i.CubicBezierCurve.prototype.getPoint=function(r){var e,o;return e=i.Shape.Utils.b3(r,this.v0.x,this.v1.x,this.v2.x,this.v3.x),o=i.Shape.Utils.b3(r,this.v0.y,this.v1.y,this.v2.y,this.v3.y),new i.Vector2(e,o)},i.CubicBezierCurve.prototype.getTangent=function(r){var e,o;e=i.Curve.Utils.tangentCubicBezier(r,this.v0.x,this.v1.x,this.v2.x,this.v3.x),o=i.Curve.Utils.tangentCubicBezier(r,this.v0.y,this.v1.y,this.v2.y,this.v3.y);var s=new i.Vector2(e,o);return s.normalize(),s},i.SplineCurve=function(r){this.points=r??[]},i.SplineCurve.prototype=Object.create(i.Curve.prototype),i.SplineCurve.prototype.constructor=i.SplineCurve,i.SplineCurve.prototype.getPoint=function(r){var e=this.points,o=(e.length-1)*r,s=Math.floor(o),d=o-s,p=e[s==0?s:s-1],x=e[s],l=e[s>e.length-2?e.length-1:s+1],_=e[s>e.length-3?e.length-1:s+2],v=new i.Vector2;return v.x=i.Curve.Utils.interpolate(p.x,x.x,l.x,_.x,d),v.y=i.Curve.Utils.interpolate(p.y,x.y,l.y,_.y,d),v},i.EllipseCurve=function(r,e,o,s,d,p,x){this.aX=r,this.aY=e,this.xRadius=o,this.yRadius=s,this.aStartAngle=d,this.aEndAngle=p,this.aClockwise=x},i.EllipseCurve.prototype=Object.create(i.Curve.prototype),i.EllipseCurve.prototype.constructor=i.EllipseCurve,i.EllipseCurve.prototype.getPoint=function(r){var e=this.aEndAngle-this.aStartAngle;e<0&&(e+=Math.PI*2),e>Math.PI*2&&(e-=Math.PI*2);var o;this.aClockwise===!0?o=this.aEndAngle+(1-r)*(Math.PI*2-e):o=this.aStartAngle+r*e;var s=new i.Vector2;return s.x=this.aX+this.xRadius*Math.cos(o),s.y=this.aY+this.yRadius*Math.sin(o),s},i.ArcCurve=function(r,e,o,s,d,p){i.EllipseCurve.call(this,r,e,o,o,s,d,p)},i.ArcCurve.prototype=Object.create(i.EllipseCurve.prototype),i.ArcCurve.prototype.constructor=i.ArcCurve,i.LineCurve3=i.Curve.create(function(r,e){this.v1=r,this.v2=e},function(r){var e=new i.Vector3;return e.subVectors(this.v2,this.v1),e.multiplyScalar(r),e.add(this.v1),e}),i.QuadraticBezierCurve3=i.Curve.create(function(r,e,o){this.v0=r,this.v1=e,this.v2=o},function(r){var e=new i.Vector3;return e.x=i.Shape.Utils.b2(r,this.v0.x,this.v1.x,this.v2.x),e.y=i.Shape.Utils.b2(r,this.v0.y,this.v1.y,this.v2.y),e.z=i.Shape.Utils.b2(r,this.v0.z,this.v1.z,this.v2.z),e}),i.CubicBezierCurve3=i.Curve.create(function(r,e,o,s){this.v0=r,this.v1=e,this.v2=o,this.v3=s},function(r){var e=new i.Vector3;return e.x=i.Shape.Utils.b3(r,this.v0.x,this.v1.x,this.v2.x,this.v3.x),e.y=i.Shape.Utils.b3(r,this.v0.y,this.v1.y,this.v2.y,this.v3.y),e.z=i.Shape.Utils.b3(r,this.v0.z,this.v1.z,this.v2.z,this.v3.z),e}),i.SplineCurve3=i.Curve.create(function(r){this.points=r??[]},function(r){var e=this.points,o=(e.length-1)*r,s=Math.floor(o),d=o-s,p=e[s==0?s:s-1],x=e[s],l=e[s>e.length-2?e.length-1:s+1],_=e[s>e.length-3?e.length-1:s+2],v=new i.Vector3;return v.x=i.Curve.Utils.interpolate(p.x,x.x,l.x,_.x,d),v.y=i.Curve.Utils.interpolate(p.y,x.y,l.y,_.y,d),v.z=i.Curve.Utils.interpolate(p.z,x.z,l.z,_.z,d),v}),i.ClosedSplineCurve3=i.Curve.create(function(r){this.points=r??[]},function(r){var e=this.points,o=(e.length-0)*r,s=Math.floor(o),d=o-s;s+=s>0?0:(Math.floor(Math.abs(s)/e.length)+1)*e.length;var p=e[(s-1)%e.length],x=e[s%e.length],l=e[(s+1)%e.length],_=e[(s+2)%e.length],v=new i.Vector3;return v.x=i.Curve.Utils.interpolate(p.x,x.x,l.x,_.x,d),v.y=i.Curve.Utils.interpolate(p.y,x.y,l.y,_.y,d),v.z=i.Curve.Utils.interpolate(p.z,x.z,l.z,_.z,d),v}),i.AnimationHandler={LINEAR:0,CATMULLROM:1,CATMULLROM_FORWARD:2,add:function(){i.warn("THREE.AnimationHandler.add() has been deprecated.")},get:function(){i.warn("THREE.AnimationHandler.get() has been deprecated.")},remove:function(){i.warn("THREE.AnimationHandler.remove() has been deprecated.")},animations:[],init:function(r){if(r.initialized===!0)return r;for(var e=0;e<r.hierarchy.length;e++){for(var o=0;o<r.hierarchy[e].keys.length;o++)if(r.hierarchy[e].keys[o].time<0&&(r.hierarchy[e].keys[o].time=0),r.hierarchy[e].keys[o].rot!==void 0&&!(r.hierarchy[e].keys[o].rot instanceof i.Quaternion)){var s=r.hierarchy[e].keys[o].rot;r.hierarchy[e].keys[o].rot=new i.Quaternion().fromArray(s)}if(r.hierarchy[e].keys.length&&r.hierarchy[e].keys[0].morphTargets!==void 0){for(var d={},o=0;o<r.hierarchy[e].keys.length;o++)for(var p=0;p<r.hierarchy[e].keys[o].morphTargets.length;p++){var x=r.hierarchy[e].keys[o].morphTargets[p];d[x]=-1}r.hierarchy[e].usedMorphTargets=d;for(var o=0;o<r.hierarchy[e].keys.length;o++){var l={};for(var x in d){for(var p=0;p<r.hierarchy[e].keys[o].morphTargets.length;p++)if(r.hierarchy[e].keys[o].morphTargets[p]===x){l[x]=r.hierarchy[e].keys[o].morphTargetsInfluences[p];break}p===r.hierarchy[e].keys[o].morphTargets.length&&(l[x]=0)}r.hierarchy[e].keys[o].morphTargetsInfluences=l}}for(var o=1;o<r.hierarchy[e].keys.length;o++)r.hierarchy[e].keys[o].time===r.hierarchy[e].keys[o-1].time&&(r.hierarchy[e].keys.splice(o,1),o--);for(var o=0;o<r.hierarchy[e].keys.length;o++)r.hierarchy[e].keys[o].index=o}return r.initialized=!0,r},parse:function(r){var e=function(d,p){p.push(d);for(var x=0;x<d.children.length;x++)e(d.children[x],p)},o=[];if(r instanceof i.SkinnedMesh)for(var s=0;s<r.skeleton.bones.length;s++)o.push(r.skeleton.bones[s]);else e(r,o);return o},play:function(r){this.animations.indexOf(r)===-1&&this.animations.push(r)},stop:function(r){var e=this.animations.indexOf(r);e!==-1&&this.animations.splice(e,1)},update:function(r){for(var e=0;e<this.animations.length;e++)this.animations[e].resetBlendWeights();for(var e=0;e<this.animations.length;e++)this.animations[e].update(r)}},i.Animation=function(r,e){this.root=r,this.data=i.AnimationHandler.init(e),this.hierarchy=i.AnimationHandler.parse(r),this.currentTime=0,this.timeScale=1,this.isPlaying=!1,this.loop=!0,this.weight=0,this.interpolationType=i.AnimationHandler.LINEAR},i.Animation.prototype={constructor:i.Animation,keyTypes:["pos","rot","scl"],play:function(r,e){this.currentTime=r!==void 0?r:0,this.weight=e!==void 0?e:1,this.isPlaying=!0,this.reset(),i.AnimationHandler.play(this)},stop:function(){this.isPlaying=!1,i.AnimationHandler.stop(this)},reset:function(){for(var r=0,e=this.hierarchy.length;r<e;r++){var o=this.hierarchy[r];o.animationCache===void 0&&(o.animationCache={animations:{},blending:{positionWeight:0,quaternionWeight:0,scaleWeight:0}});var s=this.data.name,d=o.animationCache.animations,p=d[s];p===void 0&&(p={prevKey:{pos:0,rot:0,scl:0},nextKey:{pos:0,rot:0,scl:0},originalMatrix:o.matrix},d[s]=p);for(var x=0;x<3;x++){for(var l=this.keyTypes[x],_=this.data.hierarchy[r].keys[0],v=this.getNextKeyWith(l,r,1);v.time<this.currentTime&&v.index>_.index;)_=v,v=this.getNextKeyWith(l,r,v.index+1);p.prevKey[l]=_,p.nextKey[l]=v}}},resetBlendWeights:function(){for(var r=0,e=this.hierarchy.length;r<e;r++){var o=this.hierarchy[r],s=o.animationCache;if(s!==void 0){var d=s.blending;d.positionWeight=0,d.quaternionWeight=0,d.scaleWeight=0}}},update:function(){var r=[],e=new i.Vector3,o=new i.Vector3,s=new i.Quaternion,d=function(x,l){var _=[],v=[],c,h,f,m,b,w,C,E,S;return c=(x.length-1)*l,h=Math.floor(c),f=c-h,_[0]=h===0?h:h-1,_[1]=h,_[2]=h>x.length-2?h:h+1,_[3]=h>x.length-3?h:h+2,w=x[_[0]],C=x[_[1]],E=x[_[2]],S=x[_[3]],m=f*f,b=f*m,v[0]=p(w[0],C[0],E[0],S[0],f,m,b),v[1]=p(w[1],C[1],E[1],S[1],f,m,b),v[2]=p(w[2],C[2],E[2],S[2],f,m,b),v},p=function(x,l,_,v,c,h,f){var m=(_-x)*.5,b=(v-l)*.5;return(2*(l-_)+m+b)*f+(-3*(l-_)-2*m-b)*h+m*c+l};return function(x){if(this.isPlaying!==!1&&(this.currentTime+=x*this.timeScale,this.weight!==0)){var l=this.data.length;(this.currentTime>l||this.currentTime<0)&&(this.loop?(this.currentTime%=l,this.currentTime<0&&(this.currentTime+=l),this.reset()):this.stop());for(var _=0,v=this.hierarchy.length;_<v;_++)for(var c=this.hierarchy[_],h=c.animationCache.animations[this.data.name],f=c.animationCache.blending,m=0;m<3;m++){var b=this.keyTypes[m],w=h.prevKey[b],C=h.nextKey[b];if(this.timeScale>0&&C.time<=this.currentTime||this.timeScale<0&&w.time>=this.currentTime){for(w=this.data.hierarchy[_].keys[0],C=this.getNextKeyWith(b,_,1);C.time<this.currentTime&&C.index>w.index;)w=C,C=this.getNextKeyWith(b,_,C.index+1);h.prevKey[b]=w,h.nextKey[b]=C}var E=(this.currentTime-w.time)/(C.time-w.time),S=w[b],M=C[b];if(E<0&&(E=0),E>1&&(E=1),b==="pos"){if(this.interpolationType===i.AnimationHandler.LINEAR){o.x=S[0]+(M[0]-S[0])*E,o.y=S[1]+(M[1]-S[1])*E,o.z=S[2]+(M[2]-S[2])*E;var A=this.weight/(this.weight+f.positionWeight);c.position.lerp(o,A),f.positionWeight+=this.weight}else if(this.interpolationType===i.AnimationHandler.CATMULLROM||this.interpolationType===i.AnimationHandler.CATMULLROM_FORWARD){r[0]=this.getPrevKeyWith("pos",_,w.index-1).pos,r[1]=S,r[2]=M,r[3]=this.getNextKeyWith("pos",_,C.index+1).pos,E=E*.33+.33;var R=d(r,E),A=this.weight/(this.weight+f.positionWeight);f.positionWeight+=this.weight;var D=c.position;if(D.x=D.x+(R[0]-D.x)*A,D.y=D.y+(R[1]-D.y)*A,D.z=D.z+(R[2]-D.z)*A,this.interpolationType===i.AnimationHandler.CATMULLROM_FORWARD){var N=d(r,E*1.01);e.set(N[0],N[1],N[2]),e.sub(D),e.y=0,e.normalize();var I=Math.atan2(e.x,e.z);c.rotation.set(0,I,0)}}}else if(b==="rot")if(i.Quaternion.slerp(S,M,s,E),f.quaternionWeight===0)c.quaternion.copy(s),f.quaternionWeight=this.weight;else{var A=this.weight/(this.weight+f.quaternionWeight);i.Quaternion.slerp(c.quaternion,s,c.quaternion,A),f.quaternionWeight+=this.weight}else if(b==="scl"){o.x=S[0]+(M[0]-S[0])*E,o.y=S[1]+(M[1]-S[1])*E,o.z=S[2]+(M[2]-S[2])*E;var A=this.weight/(this.weight+f.scaleWeight);c.scale.lerp(o,A),f.scaleWeight+=this.weight}}return!0}}}(),getNextKeyWith:function(r,e,o){var s=this.data.hierarchy[e].keys;for(this.interpolationType===i.AnimationHandler.CATMULLROM||this.interpolationType===i.AnimationHandler.CATMULLROM_FORWARD?o=o<s.length-1?o:s.length-1:o=o%s.length;o<s.length;o++)if(s[o][r]!==void 0)return s[o];return this.data.hierarchy[e].keys[0]},getPrevKeyWith:function(r,e,o){var s=this.data.hierarchy[e].keys;for(this.interpolationType===i.AnimationHandler.CATMULLROM||this.interpolationType===i.AnimationHandler.CATMULLROM_FORWARD?o=o>0?o:0:o=o>=0?o:o+s.length;o>=0;o--)if(s[o][r]!==void 0)return s[o];return this.data.hierarchy[e].keys[s.length-1]}},i.KeyFrameAnimation=function(r){this.root=r.node,this.data=i.AnimationHandler.init(r),this.hierarchy=i.AnimationHandler.parse(this.root),this.currentTime=0,this.timeScale=.001,this.isPlaying=!1,this.isPaused=!0,this.loop=!0;for(var e=0,o=this.hierarchy.length;e<o;e++){var s=this.data.hierarchy[e].keys,d=this.data.hierarchy[e].sids,p=this.hierarchy[e];if(s.length&&d){for(var x=0;x<d.length;x++){var l=d[x],_=this.getNextKeyWith(l,e,0);_&&_.apply(l)}p.matrixAutoUpdate=!1,this.data.hierarchy[e].node.updateMatrix(),p.matrixWorldNeedsUpdate=!0}}},i.KeyFrameAnimation.prototype={constructor:i.KeyFrameAnimation,play:function(r){if(this.currentTime=r!==void 0?r:0,this.isPlaying===!1){this.isPlaying=!0;var e,o=this.hierarchy.length,s,d;for(e=0;e<o;e++){s=this.hierarchy[e],d=this.data.hierarchy[e],d.animationCache===void 0&&(d.animationCache={},d.animationCache.prevKey=null,d.animationCache.nextKey=null,d.animationCache.originalMatrix=s.matrix);var p=this.data.hierarchy[e].keys;p.length&&(d.animationCache.prevKey=p[0],d.animationCache.nextKey=p[1],this.startTime=Math.min(p[0].time,this.startTime),this.endTime=Math.max(p[p.length-1].time,this.endTime))}this.update(0)}this.isPaused=!1,i.AnimationHandler.play(this)},stop:function(){this.isPlaying=!1,this.isPaused=!1,i.AnimationHandler.stop(this);for(var r=0;r<this.data.hierarchy.length;r++){var e=this.hierarchy[r],o=this.data.hierarchy[r];if(o.animationCache!==void 0){var s=o.animationCache.originalMatrix;s.copy(e.matrix),e.matrix=s,delete o.animationCache}}},update:function(r){if(this.isPlaying!==!1){this.currentTime+=r*this.timeScale;var e=this.data.length;this.loop===!0&&this.currentTime>e&&(this.currentTime%=e),this.currentTime=Math.min(this.currentTime,e);for(var o=0,s=this.hierarchy.length;o<s;o++){var d=this.hierarchy[o],p=this.data.hierarchy[o],x=p.keys,l=p.animationCache;if(x.length){var _=l.prevKey,v=l.nextKey;if(v.time<=this.currentTime){for(;v.time<this.currentTime&&v.index>_.index;)_=v,v=x[_.index+1];l.prevKey=_,l.nextKey=v}v.time>=this.currentTime?_.interpolate(v,this.currentTime):_.interpolate(v,v.time),this.data.hierarchy[o].node.updateMatrix(),d.matrixWorldNeedsUpdate=!0}}}},getNextKeyWith:function(r,e,o){var s=this.data.hierarchy[e].keys;for(o=o%s.length;o<s.length;o++)if(s[o].hasTarget(r))return s[o];return s[0]},getPrevKeyWith:function(r,e,o){var s=this.data.hierarchy[e].keys;for(o=o>=0?o:o+s.length;o>=0;o--)if(s[o].hasTarget(r))return s[o];return s[s.length-1]}},i.MorphAnimation=function(r){this.mesh=r,this.frames=r.morphTargetInfluences.length,this.currentTime=0,this.duration=1e3,this.loop=!0,this.lastFrame=0,this.currentFrame=0,this.isPlaying=!1},i.MorphAnimation.prototype={constructor:i.MorphAnimation,play:function(){this.isPlaying=!0},pause:function(){this.isPlaying=!1},update:function(r){if(this.isPlaying!==!1){this.currentTime+=r,this.loop===!0&&this.currentTime>this.duration&&(this.currentTime%=this.duration),this.currentTime=Math.min(this.currentTime,this.duration);var e=this.duration/this.frames,o=Math.floor(this.currentTime/e),s=this.mesh.morphTargetInfluences;o!=this.currentFrame&&(s[this.lastFrame]=0,s[this.currentFrame]=1,s[o]=0,this.lastFrame=this.currentFrame,this.currentFrame=o),s[o]=this.currentTime%e/e,s[this.lastFrame]=1-s[o]}}},i.BoxGeometry=function(r,e,o,s,d,p){i.Geometry.call(this),this.type="BoxGeometry",this.parameters={width:r,height:e,depth:o,widthSegments:s,heightSegments:d,depthSegments:p},this.widthSegments=s||1,this.heightSegments=d||1,this.depthSegments=p||1;var x=this,l=r/2,_=e/2,v=o/2;c("z","y",-1,-1,o,e,l,0),c("z","y",1,-1,o,e,-l,1),c("x","z",1,1,r,o,_,2),c("x","z",1,-1,r,o,-_,3),c("x","y",1,-1,r,e,v,4),c("x","y",-1,-1,r,e,-v,5);function c(h,f,m,b,w,C,E,S){var M,A,R,D=x.widthSegments,N=x.heightSegments,I=w/2,L=C/2,Y=x.vertices.length;h==="x"&&f==="y"||h==="y"&&f==="x"?M="z":h==="x"&&f==="z"||h==="z"&&f==="x"?(M="y",N=x.depthSegments):(h==="z"&&f==="y"||h==="y"&&f==="z")&&(M="x",D=x.depthSegments);var J=D+1,ie=N+1,K=w/D,Q=C/N,ne=new i.Vector3;for(ne[M]=E>0?1:-1,R=0;R<ie;R++)for(A=0;A<J;A++){var ue=new i.Vector3;ue[h]=(A*K-I)*m,ue[f]=(R*Q-L)*b,ue[M]=E,x.vertices.push(ue)}for(R=0;R<N;R++)for(A=0;A<D;A++){var fe=A+J*R,ge=A+J*(R+1),ye=A+1+J*(R+1),pe=A+1+J*R,de=new i.Vector2(A/D,1-R/N),he=new i.Vector2(A/D,1-(R+1)/N),_e=new i.Vector2((A+1)/D,1-(R+1)/N),ve=new i.Vector2((A+1)/D,1-R/N),Z=new i.Face3(fe+Y,ge+Y,pe+Y);Z.normal.copy(ne),Z.vertexNormals.push(ne.clone(),ne.clone(),ne.clone()),Z.materialIndex=S,x.faces.push(Z),x.faceVertexUvs[0].push([de,he,ve]),Z=new i.Face3(ge+Y,ye+Y,pe+Y),Z.normal.copy(ne),Z.vertexNormals.push(ne.clone(),ne.clone(),ne.clone()),Z.materialIndex=S,x.faces.push(Z),x.faceVertexUvs[0].push([he.clone(),_e,ve.clone()])}}this.mergeVertices()},i.BoxGeometry.prototype=Object.create(i.Geometry.prototype),i.BoxGeometry.prototype.constructor=i.BoxGeometry,i.CircleGeometry=function(r,e,o,s){i.Geometry.call(this),this.type="CircleGeometry",this.parameters={radius:r,segments:e,thetaStart:o,thetaLength:s},r=r||50,e=e!==void 0?Math.max(3,e):8,o=o!==void 0?o:0,s=s!==void 0?s:Math.PI*2;var d,p=[],x=new i.Vector3,l=new i.Vector2(.5,.5);for(this.vertices.push(x),p.push(l),d=0;d<=e;d++){var _=new i.Vector3,v=o+d/e*s;_.x=r*Math.cos(v),_.y=r*Math.sin(v),this.vertices.push(_),p.push(new i.Vector2((_.x/r+1)/2,(_.y/r+1)/2))}var c=new i.Vector3(0,0,1);for(d=1;d<=e;d++)this.faces.push(new i.Face3(d,d+1,0,[c.clone(),c.clone(),c.clone()])),this.faceVertexUvs[0].push([p[d].clone(),p[d+1].clone(),l.clone()]);this.computeFaceNormals(),this.boundingSphere=new i.Sphere(new i.Vector3,r)},i.CircleGeometry.prototype=Object.create(i.Geometry.prototype),i.CircleGeometry.prototype.constructor=i.CircleGeometry,i.CubeGeometry=function(r,e,o,s,d,p){return i.warn("THREE.CubeGeometry has been renamed to THREE.BoxGeometry."),new i.BoxGeometry(r,e,o,s,d,p)},i.CylinderGeometry=function(r,e,o,s,d,p,x,l){i.Geometry.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:r,radiusBottom:e,height:o,radialSegments:s,heightSegments:d,openEnded:p,thetaStart:x,thetaLength:l},r=r!==void 0?r:20,e=e!==void 0?e:20,o=o!==void 0?o:100,s=s||8,d=d||1,p=p!==void 0?p:!1,x=x!==void 0?x:0,l=l!==void 0?l:2*Math.PI;var _=o/2,v,c,h=[],f=[];for(c=0;c<=d;c++){var m=[],b=[],w=c/d,C=w*(e-r)+r;for(v=0;v<=s;v++){var E=v/s,S=new i.Vector3;S.x=C*Math.sin(E*l+x),S.y=-w*o+_,S.z=C*Math.cos(E*l+x),this.vertices.push(S),m.push(this.vertices.length-1),b.push(new i.Vector2(E,1-w))}h.push(m),f.push(b)}var M=(e-r)/o,A,R;for(v=0;v<s;v++)for(r!==0?(A=this.vertices[h[0][v]].clone(),R=this.vertices[h[0][v+1]].clone()):(A=this.vertices[h[1][v]].clone(),R=this.vertices[h[1][v+1]].clone()),A.setY(Math.sqrt(A.x*A.x+A.z*A.z)*M).normalize(),R.setY(Math.sqrt(R.x*R.x+R.z*R.z)*M).normalize(),c=0;c<d;c++){var D=h[c][v],N=h[c+1][v],I=h[c+1][v+1],L=h[c][v+1],Y=A.clone(),J=A.clone(),ie=R.clone(),K=R.clone(),Q=f[c][v].clone(),ne=f[c+1][v].clone(),ue=f[c+1][v+1].clone(),fe=f[c][v+1].clone();this.faces.push(new i.Face3(D,N,L,[Y,J,K])),this.faceVertexUvs[0].push([Q,ne,fe]),this.faces.push(new i.Face3(N,I,L,[J.clone(),ie,K.clone()])),this.faceVertexUvs[0].push([ne.clone(),ue,fe.clone()])}if(p===!1&&r>0)for(this.vertices.push(new i.Vector3(0,_,0)),v=0;v<s;v++){var D=h[0][v],N=h[0][v+1],I=this.vertices.length-1,Y=new i.Vector3(0,1,0),J=new i.Vector3(0,1,0),ie=new i.Vector3(0,1,0),Q=f[0][v].clone(),ne=f[0][v+1].clone(),ue=new i.Vector2(ne.x,0);this.faces.push(new i.Face3(D,N,I,[Y,J,ie])),this.faceVertexUvs[0].push([Q,ne,ue])}if(p===!1&&e>0)for(this.vertices.push(new i.Vector3(0,-_,0)),v=0;v<s;v++){var D=h[d][v+1],N=h[d][v],I=this.vertices.length-1,Y=new i.Vector3(0,-1,0),J=new i.Vector3(0,-1,0),ie=new i.Vector3(0,-1,0),Q=f[d][v+1].clone(),ne=f[d][v].clone(),ue=new i.Vector2(ne.x,1);this.faces.push(new i.Face3(D,N,I,[Y,J,ie])),this.faceVertexUvs[0].push([Q,ne,ue])}this.computeFaceNormals()},i.CylinderGeometry.prototype=Object.create(i.Geometry.prototype),i.CylinderGeometry.prototype.constructor=i.CylinderGeometry,i.ExtrudeGeometry=function(r,e){if(typeof r>"u"){r=[];return}i.Geometry.call(this),this.type="ExtrudeGeometry",r=r instanceof Array?r:[r],this.addShapeList(r,e),this.computeFaceNormals()},i.ExtrudeGeometry.prototype=Object.create(i.Geometry.prototype),i.ExtrudeGeometry.prototype.constructor=i.ExtrudeGeometry,i.ExtrudeGeometry.prototype.addShapeList=function(r,e){for(var o=r.length,s=0;s<o;s++){var d=r[s];this.addShape(d,e)}},i.ExtrudeGeometry.prototype.addShape=function(r,e){var o=e.amount!==void 0?e.amount:100,s=e.bevelThickness!==void 0?e.bevelThickness:6,d=e.bevelSize!==void 0?e.bevelSize:s-2,p=e.bevelSegments!==void 0?e.bevelSegments:3,x=e.bevelEnabled!==void 0?e.bevelEnabled:!0,l=e.curveSegments!==void 0?e.curveSegments:12,_=e.steps!==void 0?e.steps:1,v=e.extrudePath,c,h=!1,f=e.material,m=e.extrudeMaterial,b=e.UVGenerator!==void 0?e.UVGenerator:i.ExtrudeGeometry.WorldUVGenerator,w,C,E,S;v&&(c=v.getSpacedPoints(_),h=!0,x=!1,w=e.frames!==void 0?e.frames:new i.TubeGeometry.FrenetFrames(v,_,!1),C=new i.Vector3,E=new i.Vector3,S=new i.Vector3),x||(p=0,s=0,d=0);var M,A,R,D=this,N=this.vertices.length,I=r.extractPoints(l),L=I.shape,Y=I.holes,J=!i.Shape.Utils.isClockWise(L);if(J){for(L=L.reverse(),A=0,R=Y.length;A<R;A++)M=Y[A],i.Shape.Utils.isClockWise(M)&&(Y[A]=M.reverse());J=!1}var ie=i.Shape.Utils.triangulateShape(L,Y),K=L;for(A=0,R=Y.length;A<R;A++)M=Y[A],L=L.concat(M);function Q(gt,xt,tt){return xt||i.error("THREE.ExtrudeGeometry: vec does not exist"),xt.clone().multiplyScalar(tt).add(gt)}var ne,ue,fe,ge,ye,pe=L.length,de,he=ie.length;function _e(gt,xt,tt){var pt=1e-10,At,Tt,Ct=1,Bt=gt.x-xt.x,nr=gt.y-xt.y,$t=tt.x-gt.x,It=tt.y-gt.y,Lt=Bt*Bt+nr*nr,Pt=Bt*It-nr*$t;if(Math.abs(Pt)>pt){var He=Math.sqrt(Lt),Be=Math.sqrt($t*$t+It*It),Ge=xt.x-nr/He,Re=xt.y+Bt/He,Ne=tt.x-It/Be,ze=tt.y+$t/Be,et=((Ne-Ge)*It-(ze-Re)*$t)/(Bt*It-nr*$t);At=Ge+Bt*et-gt.x,Tt=Re+nr*et-gt.y;var it=At*At+Tt*Tt;if(it<=2)return new i.Vector2(At,Tt);Ct=Math.sqrt(it/2)}else{var at=!1;Bt>pt?$t>pt&&(at=!0):Bt<-pt?$t<-pt&&(at=!0):Math.sign(nr)==Math.sign(It)&&(at=!0),at?(At=-nr,Tt=Bt,Ct=Math.sqrt(Lt)):(At=Bt,Tt=nr,Ct=Math.sqrt(Lt/2))}return new i.Vector2(At/Ct,Tt/Ct)}for(var ve=[],Z=0,be=K.length,Ee=be-1,De=Z+1;Z<be;Z++,Ee++,De++)Ee===be&&(Ee=0),De===be&&(De=0),ve[Z]=_e(K[Z],K[Ee],K[De]);var Fe=[],Ue,Qe=ve.concat();for(A=0,R=Y.length;A<R;A++){for(M=Y[A],Ue=[],Z=0,be=M.length,Ee=be-1,De=Z+1;Z<be;Z++,Ee++,De++)Ee===be&&(Ee=0),De===be&&(De=0),Ue[Z]=_e(M[Z],M[Ee],M[De]);Fe.push(Ue),Qe=Qe.concat(Ue)}for(ne=0;ne<p;ne++){for(fe=ne/p,ge=s*(1-fe),ue=d*Math.sin(fe*Math.PI/2),Z=0,be=K.length;Z<be;Z++)ye=Q(K[Z],ve[Z],ue),nt(ye.x,ye.y,-ge);for(A=0,R=Y.length;A<R;A++)for(M=Y[A],Ue=Fe[A],Z=0,be=M.length;Z<be;Z++)ye=Q(M[Z],Ue[Z],ue),nt(ye.x,ye.y,-ge)}for(ue=d,Z=0;Z<pe;Z++)ye=x?Q(L[Z],Qe[Z],ue):L[Z],h?(E.copy(w.normals[0]).multiplyScalar(ye.x),C.copy(w.binormals[0]).multiplyScalar(ye.y),S.copy(c[0]).add(E).add(C),nt(S.x,S.y,S.z)):nt(ye.x,ye.y,0);var Ke;for(Ke=1;Ke<=_;Ke++)for(Z=0;Z<pe;Z++)ye=x?Q(L[Z],Qe[Z],ue):L[Z],h?(E.copy(w.normals[Ke]).multiplyScalar(ye.x),C.copy(w.binormals[Ke]).multiplyScalar(ye.y),S.copy(c[Ke]).add(E).add(C),nt(S.x,S.y,S.z)):nt(ye.x,ye.y,o/_*Ke);for(ne=p-1;ne>=0;ne--){for(fe=ne/p,ge=s*(1-fe),ue=d*Math.sin(fe*Math.PI/2),Z=0,be=K.length;Z<be;Z++)ye=Q(K[Z],ve[Z],ue),nt(ye.x,ye.y,o+ge);for(A=0,R=Y.length;A<R;A++)for(M=Y[A],Ue=Fe[A],Z=0,be=M.length;Z<be;Z++)ye=Q(M[Z],Ue[Z],ue),h?nt(ye.x,ye.y+c[_-1].y,c[_-1].x+ge):nt(ye.x,ye.y,o+ge)}Te(),Ie();function Te(){if(x){var gt=0,xt=pe*gt;for(Z=0;Z<he;Z++)de=ie[Z],dt(de[2]+xt,de[1]+xt,de[0]+xt);for(gt=_+p*2,xt=pe*gt,Z=0;Z<he;Z++)de=ie[Z],dt(de[0]+xt,de[1]+xt,de[2]+xt)}else{for(Z=0;Z<he;Z++)de=ie[Z],dt(de[2],de[1],de[0]);for(Z=0;Z<he;Z++)de=ie[Z],dt(de[0]+pe*_,de[1]+pe*_,de[2]+pe*_)}}function Ie(){var gt=0;for(ke(K,gt),gt+=K.length,A=0,R=Y.length;A<R;A++)M=Y[A],ke(M,gt),gt+=M.length}function ke(gt,xt){var tt,pt;for(Z=gt.length;--Z>=0;){tt=Z,pt=Z-1,pt<0&&(pt=gt.length-1);var At=0,Tt=_+p*2;for(At=0;At<Tt;At++){var Ct=pe*At,Bt=pe*(At+1),nr=xt+tt+Ct,$t=xt+pt+Ct,It=xt+pt+Bt,Lt=xt+tt+Bt;yt(nr,$t,It,Lt,gt,At,Tt,tt,pt)}}}function nt(gt,xt,tt){D.vertices.push(new i.Vector3(gt,xt,tt))}function dt(gt,xt,tt){gt+=N,xt+=N,tt+=N,D.faces.push(new i.Face3(gt,xt,tt,null,null,f));var pt=b.generateTopUV(D,gt,xt,tt);D.faceVertexUvs[0].push(pt)}function yt(gt,xt,tt,pt,At,Tt,Ct,Bt,nr){gt+=N,xt+=N,tt+=N,pt+=N,D.faces.push(new i.Face3(gt,xt,pt,null,null,m)),D.faces.push(new i.Face3(xt,tt,pt,null,null,m));var $t=b.generateSideWallUV(D,gt,xt,tt,pt);D.faceVertexUvs[0].push([$t[0],$t[1],$t[3]]),D.faceVertexUvs[0].push([$t[1],$t[2],$t[3]])}},i.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(r,e,o,s){var d=r.vertices,p=d[e],x=d[o],l=d[s];return[new i.Vector2(p.x,p.y),new i.Vector2(x.x,x.y),new i.Vector2(l.x,l.y)]},generateSideWallUV:function(r,e,o,s,d){var p=r.vertices,x=p[e],l=p[o],_=p[s],v=p[d];return Math.abs(x.y-l.y)<.01?[new i.Vector2(x.x,1-x.z),new i.Vector2(l.x,1-l.z),new i.Vector2(_.x,1-_.z),new i.Vector2(v.x,1-v.z)]:[new i.Vector2(x.y,1-x.z),new i.Vector2(l.y,1-l.z),new i.Vector2(_.y,1-_.z),new i.Vector2(v.y,1-v.z)]}},i.ShapeGeometry=function(r,e){i.Geometry.call(this),this.type="ShapeGeometry",r instanceof Array||(r=[r]),this.addShapeList(r,e),this.computeFaceNormals()},i.ShapeGeometry.prototype=Object.create(i.Geometry.prototype),i.ShapeGeometry.prototype.constructor=i.ShapeGeometry,i.ShapeGeometry.prototype.addShapeList=function(r,e){for(var o=0,s=r.length;o<s;o++)this.addShape(r[o],e);return this},i.ShapeGeometry.prototype.addShape=function(r,e){e===void 0&&(e={});var o=e.curveSegments!==void 0?e.curveSegments:12,s=e.material,d=e.UVGenerator===void 0?i.ExtrudeGeometry.WorldUVGenerator:e.UVGenerator,p,x,l,_=this.vertices.length,v=r.extractPoints(o),c=v.shape,h=v.holes,f=!i.Shape.Utils.isClockWise(c);if(f){for(c=c.reverse(),p=0,x=h.length;p<x;p++)l=h[p],i.Shape.Utils.isClockWise(l)&&(h[p]=l.reverse());f=!1}var m=i.Shape.Utils.triangulateShape(c,h),b=c;for(p=0,x=h.length;p<x;p++)l=h[p],c=c.concat(l);var w,C=c.length,E,S=m.length;for(p=0;p<C;p++)w=c[p],this.vertices.push(new i.Vector3(w.x,w.y,0));for(p=0;p<S;p++){E=m[p];var M=E[0]+_,A=E[1]+_,R=E[2]+_;this.faces.push(new i.Face3(M,A,R,null,null,s)),this.faceVertexUvs[0].push(d.generateTopUV(this,M,A,R))}},i.LatheGeometry=function(r,e,o,s){i.Geometry.call(this),this.type="LatheGeometry",this.parameters={points:r,segments:e,phiStart:o,phiLength:s},e=e||12,o=o||0,s=s||2*Math.PI;for(var d=1/(r.length-1),p=1/e,x=0,l=e;x<=l;x++)for(var _=o+x*p*s,v=Math.cos(_),c=Math.sin(_),h=0,f=r.length;h<f;h++){var m=r[h],b=new i.Vector3;b.x=v*m.x-c*m.y,b.y=c*m.x+v*m.y,b.z=m.z,this.vertices.push(b)}for(var w=r.length,x=0,l=e;x<l;x++)for(var h=0,f=r.length-1;h<f;h++){var C=h+w*x,E=C,S=C+w,v=C+1+w,M=C+1,A=x*p,R=h*d,D=A+p,N=R+d;this.faces.push(new i.Face3(E,S,M)),this.faceVertexUvs[0].push([new i.Vector2(A,R),new i.Vector2(D,R),new i.Vector2(A,N)]),this.faces.push(new i.Face3(S,v,M)),this.faceVertexUvs[0].push([new i.Vector2(D,R),new i.Vector2(D,N),new i.Vector2(A,N)])}this.mergeVertices(),this.computeFaceNormals(),this.computeVertexNormals()},i.LatheGeometry.prototype=Object.create(i.Geometry.prototype),i.LatheGeometry.prototype.constructor=i.LatheGeometry,i.PlaneGeometry=function(r,e,o,s){console.info("THREE.PlaneGeometry: Consider using THREE.PlaneBufferGeometry for lower memory footprint."),i.Geometry.call(this),this.type="PlaneGeometry",this.parameters={width:r,height:e,widthSegments:o,heightSegments:s},this.fromBufferGeometry(new i.PlaneBufferGeometry(r,e,o,s))},i.PlaneGeometry.prototype=Object.create(i.Geometry.prototype),i.PlaneGeometry.prototype.constructor=i.PlaneGeometry,i.PlaneBufferGeometry=function(r,e,o,s){i.BufferGeometry.call(this),this.type="PlaneBufferGeometry",this.parameters={width:r,height:e,widthSegments:o,heightSegments:s};for(var d=r/2,p=e/2,x=o||1,l=s||1,_=x+1,v=l+1,c=r/x,h=e/l,f=new Float32Array(_*v*3),m=new Float32Array(_*v*3),b=new Float32Array(_*v*2),w=0,C=0,E=0;E<v;E++)for(var S=E*h-p,M=0;M<_;M++){var A=M*c-d;f[w]=A,f[w+1]=-S,m[w+2]=1,b[C]=M/x,b[C+1]=1-E/l,w+=3,C+=2}w=0;for(var R=new(f.length/3>65535?Uint32Array:Uint16Array)(x*l*6),E=0;E<l;E++)for(var M=0;M<x;M++){var D=M+_*E,N=M+_*(E+1),I=M+1+_*(E+1),L=M+1+_*E;R[w]=D,R[w+1]=N,R[w+2]=L,R[w+3]=N,R[w+4]=I,R[w+5]=L,w+=6}this.addAttribute("index",new i.BufferAttribute(R,1)),this.addAttribute("position",new i.BufferAttribute(f,3)),this.addAttribute("normal",new i.BufferAttribute(m,3)),this.addAttribute("uv",new i.BufferAttribute(b,2))},i.PlaneBufferGeometry.prototype=Object.create(i.BufferGeometry.prototype),i.PlaneBufferGeometry.prototype.constructor=i.PlaneBufferGeometry,i.RingGeometry=function(r,e,o,s,d,p){i.Geometry.call(this),this.type="RingGeometry",this.parameters={innerRadius:r,outerRadius:e,thetaSegments:o,phiSegments:s,thetaStart:d,thetaLength:p},r=r||0,e=e||50,d=d!==void 0?d:0,p=p!==void 0?p:Math.PI*2,o=o!==void 0?Math.max(3,o):8,s=s!==void 0?Math.max(1,s):8;var x,l,_=[],v=r,c=(e-r)/s;for(x=0;x<s+1;x++){for(l=0;l<o+1;l++){var h=new i.Vector3,f=d+l/o*p;h.x=v*Math.cos(f),h.y=v*Math.sin(f),this.vertices.push(h),_.push(new i.Vector2((h.x/e+1)/2,(h.y/e+1)/2))}v+=c}var m=new i.Vector3(0,0,1);for(x=0;x<s;x++){var b=x*(o+1);for(l=0;l<o;l++){var f=l+b,w=f,C=f+o+1,E=f+o+2;this.faces.push(new i.Face3(w,C,E,[m.clone(),m.clone(),m.clone()])),this.faceVertexUvs[0].push([_[w].clone(),_[C].clone(),_[E].clone()]),w=f,C=f+o+2,E=f+1,this.faces.push(new i.Face3(w,C,E,[m.clone(),m.clone(),m.clone()])),this.faceVertexUvs[0].push([_[w].clone(),_[C].clone(),_[E].clone()])}}this.computeFaceNormals(),this.boundingSphere=new i.Sphere(new i.Vector3,v)},i.RingGeometry.prototype=Object.create(i.Geometry.prototype),i.RingGeometry.prototype.constructor=i.RingGeometry,i.SphereGeometry=function(r,e,o,s,d,p,x){i.Geometry.call(this),this.type="SphereGeometry",this.parameters={radius:r,widthSegments:e,heightSegments:o,phiStart:s,phiLength:d,thetaStart:p,thetaLength:x},r=r||50,e=Math.max(3,Math.floor(e)||8),o=Math.max(2,Math.floor(o)||6),s=s!==void 0?s:0,d=d!==void 0?d:Math.PI*2,p=p!==void 0?p:0,x=x!==void 0?x:Math.PI;var l,_,v=[],c=[];for(_=0;_<=o;_++){var h=[],f=[];for(l=0;l<=e;l++){var m=l/e,b=_/o,w=new i.Vector3;w.x=-r*Math.cos(s+m*d)*Math.sin(p+b*x),w.y=r*Math.cos(p+b*x),w.z=r*Math.sin(s+m*d)*Math.sin(p+b*x),this.vertices.push(w),h.push(this.vertices.length-1),f.push(new i.Vector2(m,1-b))}v.push(h),c.push(f)}for(_=0;_<o;_++)for(l=0;l<e;l++){var C=v[_][l+1],E=v[_][l],S=v[_+1][l],M=v[_+1][l+1],A=this.vertices[C].clone().normalize(),R=this.vertices[E].clone().normalize(),D=this.vertices[S].clone().normalize(),N=this.vertices[M].clone().normalize(),I=c[_][l+1].clone(),L=c[_][l].clone(),Y=c[_+1][l].clone(),J=c[_+1][l+1].clone();Math.abs(this.vertices[C].y)===r?(I.x=(I.x+L.x)/2,this.faces.push(new i.Face3(C,S,M,[A,D,N])),this.faceVertexUvs[0].push([I,Y,J])):Math.abs(this.vertices[S].y)===r?(Y.x=(Y.x+J.x)/2,this.faces.push(new i.Face3(C,E,S,[A,R,D])),this.faceVertexUvs[0].push([I,L,Y])):(this.faces.push(new i.Face3(C,E,M,[A,R,N])),this.faceVertexUvs[0].push([I,L,J]),this.faces.push(new i.Face3(E,S,M,[R.clone(),D,N.clone()])),this.faceVertexUvs[0].push([L.clone(),Y,J.clone()]))}this.computeFaceNormals(),this.boundingSphere=new i.Sphere(new i.Vector3,r)},i.SphereGeometry.prototype=Object.create(i.Geometry.prototype),i.SphereGeometry.prototype.constructor=i.SphereGeometry,i.TextGeometry=function(r,e){e=e||{};var o=i.FontUtils.generateShapes(r,e);e.amount=e.height!==void 0?e.height:50,e.bevelThickness===void 0&&(e.bevelThickness=10),e.bevelSize===void 0&&(e.bevelSize=8),e.bevelEnabled===void 0&&(e.bevelEnabled=!1),i.ExtrudeGeometry.call(this,o,e),this.type="TextGeometry"},i.TextGeometry.prototype=Object.create(i.ExtrudeGeometry.prototype),i.TextGeometry.prototype.constructor=i.TextGeometry,i.TorusGeometry=function(r,e,o,s,d){i.Geometry.call(this),this.type="TorusGeometry",this.parameters={radius:r,tube:e,radialSegments:o,tubularSegments:s,arc:d},r=r||100,e=e||40,o=o||8,s=s||6,d=d||Math.PI*2;for(var p=new i.Vector3,x=[],l=[],_=0;_<=o;_++)for(var v=0;v<=s;v++){var c=v/s*d,h=_/o*Math.PI*2;p.x=r*Math.cos(c),p.y=r*Math.sin(c);var f=new i.Vector3;f.x=(r+e*Math.cos(h))*Math.cos(c),f.y=(r+e*Math.cos(h))*Math.sin(c),f.z=e*Math.sin(h),this.vertices.push(f),x.push(new i.Vector2(v/s,_/o)),l.push(f.clone().sub(p).normalize())}for(var _=1;_<=o;_++)for(var v=1;v<=s;v++){var m=(s+1)*_+v-1,b=(s+1)*(_-1)+v-1,w=(s+1)*(_-1)+v,C=(s+1)*_+v,E=new i.Face3(m,b,C,[l[m].clone(),l[b].clone(),l[C].clone()]);this.faces.push(E),this.faceVertexUvs[0].push([x[m].clone(),x[b].clone(),x[C].clone()]),E=new i.Face3(b,w,C,[l[b].clone(),l[w].clone(),l[C].clone()]),this.faces.push(E),this.faceVertexUvs[0].push([x[b].clone(),x[w].clone(),x[C].clone()])}this.computeFaceNormals()},i.TorusGeometry.prototype=Object.create(i.Geometry.prototype),i.TorusGeometry.prototype.constructor=i.TorusGeometry,i.TorusKnotGeometry=function(r,e,o,s,d,p,x){i.Geometry.call(this),this.type="TorusKnotGeometry",this.parameters={radius:r,tube:e,radialSegments:o,tubularSegments:s,p:d,q:p,heightScale:x},r=r||100,e=e||40,o=o||64,s=s||8,d=d||2,p=p||3,x=x||1;for(var l=new Array(o),_=new i.Vector3,v=new i.Vector3,c=new i.Vector3,h=0;h<o;++h){l[h]=new Array(s);var f=h/o*2*d*Math.PI,m=Q(f,p,d,r,x),b=Q(f+.01,p,d,r,x);_.subVectors(b,m),v.addVectors(b,m),c.crossVectors(_,v),v.crossVectors(c,_),c.normalize(),v.normalize();for(var w=0;w<s;++w){var C=w/s*2*Math.PI,E=-e*Math.cos(C),S=e*Math.sin(C),M=new i.Vector3;M.x=m.x+E*v.x+S*c.x,M.y=m.y+E*v.y+S*c.y,M.z=m.z+E*v.z+S*c.z,l[h][w]=this.vertices.push(M)-1}}for(var h=0;h<o;++h)for(var w=0;w<s;++w){var A=(h+1)%o,R=(w+1)%s,D=l[h][w],N=l[A][w],I=l[A][R],L=l[h][R],Y=new i.Vector2(h/o,w/s),J=new i.Vector2((h+1)/o,w/s),ie=new i.Vector2((h+1)/o,(w+1)/s),K=new i.Vector2(h/o,(w+1)/s);this.faces.push(new i.Face3(D,N,L)),this.faceVertexUvs[0].push([Y,J,K]),this.faces.push(new i.Face3(N,I,L)),this.faceVertexUvs[0].push([J.clone(),ie,K.clone()])}this.computeFaceNormals(),this.computeVertexNormals();function Q(ne,ue,fe,ge,ye){var pe=Math.cos(ne),de=Math.sin(ne),he=ue/fe*ne,_e=Math.cos(he),ve=ge*(2+_e)*.5*pe,Z=ge*(2+_e)*de*.5,be=ye*ge*Math.sin(he)*.5;return new i.Vector3(ve,Z,be)}},i.TorusKnotGeometry.prototype=Object.create(i.Geometry.prototype),i.TorusKnotGeometry.prototype.constructor=i.TorusKnotGeometry,i.TubeGeometry=function(r,e,o,s,d,p){i.Geometry.call(this),this.type="TubeGeometry",this.parameters={path:r,segments:e,radius:o,radialSegments:s,closed:d},e=e||64,o=o||1,s=s||8,d=d||!1,p=p||i.TubeGeometry.NoTaper;var x=[],l=this,_,v,c,h=e+1,f,m,b,w,C,E,S=new i.Vector3,M,A,R,D,N,I,L,Y,J,ie,K,Q,ne=new i.TubeGeometry.FrenetFrames(r,e,d),ue=ne.tangents,fe=ne.normals,ge=ne.binormals;this.tangents=ue,this.normals=fe,this.binormals=ge;function ye(pe,de,he){return l.vertices.push(new i.Vector3(pe,de,he))-1}for(M=0;M<h;M++)for(x[M]=[],f=M/(h-1),E=r.getPointAt(f),_=ue[M],v=fe[M],c=ge[M],b=o*p(f),A=0;A<s;A++)m=A/s*2*Math.PI,w=-b*Math.cos(m),C=b*Math.sin(m),S.copy(E),S.x+=w*v.x+C*c.x,S.y+=w*v.y+C*c.y,S.z+=w*v.z+C*c.z,x[M][A]=ye(S.x,S.y,S.z);for(M=0;M<e;M++)for(A=0;A<s;A++)R=d?(M+1)%e:M+1,D=(A+1)%s,N=x[M][A],I=x[R][A],L=x[R][D],Y=x[M][D],J=new i.Vector2(M/e,A/s),ie=new i.Vector2((M+1)/e,A/s),K=new i.Vector2((M+1)/e,(A+1)/s),Q=new i.Vector2(M/e,(A+1)/s),this.faces.push(new i.Face3(N,I,Y)),this.faceVertexUvs[0].push([J,ie,Q]),this.faces.push(new i.Face3(I,L,Y)),this.faceVertexUvs[0].push([ie.clone(),K,Q.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},i.TubeGeometry.prototype=Object.create(i.Geometry.prototype),i.TubeGeometry.prototype.constructor=i.TubeGeometry,i.TubeGeometry.NoTaper=function(r){return 1},i.TubeGeometry.SinusoidalTaper=function(r){return Math.sin(Math.PI*r)},i.TubeGeometry.FrenetFrames=function(r,e,o){var s=new i.Vector3,d=[],p=[],x=[],l=new i.Vector3,_=new i.Matrix4,v=e+1,c,h=1e-4,f,m,b,w,C,E;for(this.tangents=d,this.normals=p,this.binormals=x,C=0;C<v;C++)E=C/(v-1),d[C]=r.getTangentAt(E),d[C].normalize();S();function S(){p[0]=new i.Vector3,x[0]=new i.Vector3,f=Number.MAX_VALUE,m=Math.abs(d[0].x),b=Math.abs(d[0].y),w=Math.abs(d[0].z),m<=f&&(f=m,s.set(1,0,0)),b<=f&&(f=b,s.set(0,1,0)),w<=f&&s.set(0,0,1),l.crossVectors(d[0],s).normalize(),p[0].crossVectors(d[0],l),x[0].crossVectors(d[0],p[0])}for(C=1;C<v;C++)p[C]=p[C-1].clone(),x[C]=x[C-1].clone(),l.crossVectors(d[C-1],d[C]),l.length()>h&&(l.normalize(),c=Math.acos(i.Math.clamp(d[C-1].dot(d[C]),-1,1)),p[C].applyMatrix4(_.makeRotationAxis(l,c))),x[C].crossVectors(d[C],p[C]);if(o)for(c=Math.acos(i.Math.clamp(p[0].dot(p[v-1]),-1,1)),c/=v-1,d[0].dot(l.crossVectors(p[0],p[v-1]))>0&&(c=-c),C=1;C<v;C++)p[C].applyMatrix4(_.makeRotationAxis(d[C],c*C)),x[C].crossVectors(d[C],p[C])},i.PolyhedronGeometry=function(r,e,o,s){i.Geometry.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:r,indices:e,radius:o,detail:s},o=o||1,s=s||0;for(var d=this,p=0,x=r.length;p<x;p+=3)A(new i.Vector3(r[p],r[p+1],r[p+2]));for(var l=this.vertices,_=[],p=0,v=0,x=e.length;p<x;p+=3,v++){var c=l[e[p]],h=l[e[p+1]],f=l[e[p+2]];_[v]=new i.Face3(c.index,h.index,f.index,[c.clone(),h.clone(),f.clone()])}for(var m=new i.Vector3,p=0,x=_.length;p<x;p++)D(_[p],s);for(var p=0,x=this.faceVertexUvs[0].length;p<x;p++){var b=this.faceVertexUvs[0][p],w=b[0].x,C=b[1].x,E=b[2].x,S=Math.max(w,Math.max(C,E)),M=Math.min(w,Math.min(C,E));S>.9&&M<.1&&(w<.2&&(b[0].x+=1),C<.2&&(b[1].x+=1),E<.2&&(b[2].x+=1))}for(var p=0,x=this.vertices.length;p<x;p++)this.vertices[p].multiplyScalar(o);this.mergeVertices(),this.computeFaceNormals(),this.boundingSphere=new i.Sphere(new i.Vector3,o);function A(Y){var J=Y.normalize().clone();J.index=d.vertices.push(J)-1;var ie=N(Y)/2/Math.PI+.5,K=I(Y)/Math.PI+.5;return J.uv=new i.Vector2(ie,1-K),J}function R(Y,J,ie){var K=new i.Face3(Y.index,J.index,ie.index,[Y.clone(),J.clone(),ie.clone()]);d.faces.push(K),m.copy(Y).add(J).add(ie).divideScalar(3);var Q=N(m);d.faceVertexUvs[0].push([L(Y.uv,Y,Q),L(J.uv,J,Q),L(ie.uv,ie,Q)])}function D(Y,J){for(var ie=Math.pow(2,J),K=A(d.vertices[Y.a]),Q=A(d.vertices[Y.b]),ne=A(d.vertices[Y.c]),ue=[],fe=0;fe<=ie;fe++){ue[fe]=[];for(var ge=A(K.clone().lerp(ne,fe/ie)),ye=A(Q.clone().lerp(ne,fe/ie)),pe=ie-fe,de=0;de<=pe;de++)de==0&&fe==ie?ue[fe][de]=ge:ue[fe][de]=A(ge.clone().lerp(ye,de/pe))}for(var fe=0;fe<ie;fe++)for(var de=0;de<2*(ie-fe)-1;de++){var he=Math.floor(de/2);de%2==0?R(ue[fe][he+1],ue[fe+1][he],ue[fe][he]):R(ue[fe][he+1],ue[fe+1][he+1],ue[fe+1][he])}}function N(Y){return Math.atan2(Y.z,-Y.x)}function I(Y){return Math.atan2(-Y.y,Math.sqrt(Y.x*Y.x+Y.z*Y.z))}function L(Y,J,ie){return ie<0&&Y.x===1&&(Y=new i.Vector2(Y.x-1,Y.y)),J.x===0&&J.z===0&&(Y=new i.Vector2(ie/2/Math.PI+.5,Y.y)),Y.clone()}},i.PolyhedronGeometry.prototype=Object.create(i.Geometry.prototype),i.PolyhedronGeometry.prototype.constructor=i.PolyhedronGeometry,i.DodecahedronGeometry=function(r,e){this.parameters={radius:r,detail:e};var o=(1+Math.sqrt(5))/2,s=1/o,d=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-o,0,-s,o,0,s,-o,0,s,o,-s,-o,0,-s,o,0,s,-o,0,s,o,0,-o,0,-s,o,0,-s,-o,0,s,o,0,s],p=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];i.PolyhedronGeometry.call(this,d,p,r,e)},i.DodecahedronGeometry.prototype=Object.create(i.Geometry.prototype),i.DodecahedronGeometry.prototype.constructor=i.DodecahedronGeometry,i.IcosahedronGeometry=function(r,e){var o=(1+Math.sqrt(5))/2,s=[-1,o,0,1,o,0,-1,-o,0,1,-o,0,0,-1,o,0,1,o,0,-1,-o,0,1,-o,o,0,-1,o,0,1,-o,0,-1,-o,0,1],d=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];i.PolyhedronGeometry.call(this,s,d,r,e),this.type="IcosahedronGeometry",this.parameters={radius:r,detail:e}},i.IcosahedronGeometry.prototype=Object.create(i.Geometry.prototype),i.IcosahedronGeometry.prototype.constructor=i.IcosahedronGeometry,i.OctahedronGeometry=function(r,e){this.parameters={radius:r,detail:e};var o=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],s=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];i.PolyhedronGeometry.call(this,o,s,r,e),this.type="OctahedronGeometry",this.parameters={radius:r,detail:e}},i.OctahedronGeometry.prototype=Object.create(i.Geometry.prototype),i.OctahedronGeometry.prototype.constructor=i.OctahedronGeometry,i.TetrahedronGeometry=function(r,e){var o=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],s=[2,1,0,0,3,2,1,3,0,2,3,1];i.PolyhedronGeometry.call(this,o,s,r,e),this.type="TetrahedronGeometry",this.parameters={radius:r,detail:e}},i.TetrahedronGeometry.prototype=Object.create(i.Geometry.prototype),i.TetrahedronGeometry.prototype.constructor=i.TetrahedronGeometry,i.ParametricGeometry=function(r,e,o){i.Geometry.call(this),this.type="ParametricGeometry",this.parameters={func:r,slices:e,stacks:o};var s=this.vertices,d=this.faces,p=this.faceVertexUvs[0],x,l,_,v,c,h=e+1;for(x=0;x<=o;x++)for(c=x/o,l=0;l<=e;l++)v=l/e,_=r(v,c),s.push(_);var f,m,b,w,C,E,S,M;for(x=0;x<o;x++)for(l=0;l<e;l++)f=x*h+l,m=x*h+l+1,b=(x+1)*h+l+1,w=(x+1)*h+l,C=new i.Vector2(l/e,x/o),E=new i.Vector2((l+1)/e,x/o),S=new i.Vector2((l+1)/e,(x+1)/o),M=new i.Vector2(l/e,(x+1)/o),d.push(new i.Face3(f,m,w)),p.push([C,E,M]),d.push(new i.Face3(m,b,w)),p.push([E.clone(),S,M.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},i.ParametricGeometry.prototype=Object.create(i.Geometry.prototype),i.ParametricGeometry.prototype.constructor=i.ParametricGeometry,i.AxisHelper=function(r){r=r||1;var e=new Float32Array([0,0,0,r,0,0,0,0,0,0,r,0,0,0,0,0,0,r]),o=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]),s=new i.BufferGeometry;s.addAttribute("position",new i.BufferAttribute(e,3)),s.addAttribute("color",new i.BufferAttribute(o,3));var d=new i.LineBasicMaterial({vertexColors:i.VertexColors});i.Line.call(this,s,d,i.LinePieces)},i.AxisHelper.prototype=Object.create(i.Line.prototype),i.AxisHelper.prototype.constructor=i.AxisHelper,i.ArrowHelper=function(){var r=new i.Geometry;r.vertices.push(new i.Vector3(0,0,0),new i.Vector3(0,1,0));var e=new i.CylinderGeometry(0,.5,1,5,1);return e.applyMatrix(new i.Matrix4().makeTranslation(0,-.5,0)),function(o,s,d,p,x,l){i.Object3D.call(this),p===void 0&&(p=16776960),d===void 0&&(d=1),x===void 0&&(x=.2*d),l===void 0&&(l=.2*x),this.position.copy(s),this.line=new i.Line(r,new i.LineBasicMaterial({color:p})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new i.Mesh(e,new i.MeshBasicMaterial({color:p})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(o),this.setLength(d,x,l)}}(),i.ArrowHelper.prototype=Object.create(i.Object3D.prototype),i.ArrowHelper.prototype.constructor=i.ArrowHelper,i.ArrowHelper.prototype.setDirection=function(){var r=new i.Vector3,e;return function(o){o.y>.99999?this.quaternion.set(0,0,0,1):o.y<-.99999?this.quaternion.set(1,0,0,0):(r.set(o.z,0,-o.x).normalize(),e=Math.acos(o.y),this.quaternion.setFromAxisAngle(r,e))}}(),i.ArrowHelper.prototype.setLength=function(r,e,o){e===void 0&&(e=.2*r),o===void 0&&(o=.2*e),this.line.scale.set(1,r-e,1),this.line.updateMatrix(),this.cone.scale.set(o,e,o),this.cone.position.y=r,this.cone.updateMatrix()},i.ArrowHelper.prototype.setColor=function(r){this.line.material.color.set(r),this.cone.material.color.set(r)},i.BoxHelper=function(r){var e=new i.BufferGeometry;e.addAttribute("position",new i.BufferAttribute(new Float32Array(72),3)),i.Line.call(this,e,new i.LineBasicMaterial({color:16776960}),i.LinePieces),r!==void 0&&this.update(r)},i.BoxHelper.prototype=Object.create(i.Line.prototype),i.BoxHelper.prototype.constructor=i.BoxHelper,i.BoxHelper.prototype.update=function(r){var e=r.geometry;e.boundingBox===null&&e.computeBoundingBox();var o=e.boundingBox.min,s=e.boundingBox.max,d=this.geometry.attributes.position.array;d[0]=s.x,d[1]=s.y,d[2]=s.z,d[3]=o.x,d[4]=s.y,d[5]=s.z,d[6]=o.x,d[7]=s.y,d[8]=s.z,d[9]=o.x,d[10]=o.y,d[11]=s.z,d[12]=o.x,d[13]=o.y,d[14]=s.z,d[15]=s.x,d[16]=o.y,d[17]=s.z,d[18]=s.x,d[19]=o.y,d[20]=s.z,d[21]=s.x,d[22]=s.y,d[23]=s.z,d[24]=s.x,d[25]=s.y,d[26]=o.z,d[27]=o.x,d[28]=s.y,d[29]=o.z,d[30]=o.x,d[31]=s.y,d[32]=o.z,d[33]=o.x,d[34]=o.y,d[35]=o.z,d[36]=o.x,d[37]=o.y,d[38]=o.z,d[39]=s.x,d[40]=o.y,d[41]=o.z,d[42]=s.x,d[43]=o.y,d[44]=o.z,d[45]=s.x,d[46]=s.y,d[47]=o.z,d[48]=s.x,d[49]=s.y,d[50]=s.z,d[51]=s.x,d[52]=s.y,d[53]=o.z,d[54]=o.x,d[55]=s.y,d[56]=s.z,d[57]=o.x,d[58]=s.y,d[59]=o.z,d[60]=o.x,d[61]=o.y,d[62]=s.z,d[63]=o.x,d[64]=o.y,d[65]=o.z,d[66]=s.x,d[67]=o.y,d[68]=s.z,d[69]=s.x,d[70]=o.y,d[71]=o.z,this.geometry.attributes.position.needsUpdate=!0,this.geometry.computeBoundingSphere(),this.matrix=r.matrixWorld,this.matrixAutoUpdate=!1},i.BoundingBoxHelper=function(r,e){var o=e!==void 0?e:8947848;this.object=r,this.box=new i.Box3,i.Mesh.call(this,new i.BoxGeometry(1,1,1),new i.MeshBasicMaterial({color:o,wireframe:!0}))},i.BoundingBoxHelper.prototype=Object.create(i.Mesh.prototype),i.BoundingBoxHelper.prototype.constructor=i.BoundingBoxHelper,i.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object),this.box.size(this.scale),this.box.center(this.position)},i.CameraHelper=function(r){var e=new i.Geometry,o=new i.LineBasicMaterial({color:16777215,vertexColors:i.FaceColors}),s={},d=16755200,p=16711680,x=43775,l=16777215,_=3355443;v("n1","n2",d),v("n2","n4",d),v("n4","n3",d),v("n3","n1",d),v("f1","f2",d),v("f2","f4",d),v("f4","f3",d),v("f3","f1",d),v("n1","f1",d),v("n2","f2",d),v("n3","f3",d),v("n4","f4",d),v("p","n1",p),v("p","n2",p),v("p","n3",p),v("p","n4",p),v("u1","u2",x),v("u2","u3",x),v("u3","u1",x),v("c","t",l),v("p","c",_),v("cn1","cn2",_),v("cn3","cn4",_),v("cf1","cf2",_),v("cf3","cf4",_);function v(h,f,m){c(h,m),c(f,m)}function c(h,f){e.vertices.push(new i.Vector3),e.colors.push(new i.Color(f)),s[h]===void 0&&(s[h]=[]),s[h].push(e.vertices.length-1)}i.Line.call(this,e,o,i.LinePieces),this.camera=r,this.matrix=r.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()},i.CameraHelper.prototype=Object.create(i.Line.prototype),i.CameraHelper.prototype.constructor=i.CameraHelper,i.CameraHelper.prototype.update=function(){var r,e,o=new i.Vector3,s=new i.Camera,d=function(p,x,l,_){o.set(x,l,_).unproject(s);var v=e[p];if(v!==void 0)for(var c=0,h=v.length;c<h;c++)r.vertices[v[c]].copy(o)};return function(){r=this.geometry,e=this.pointMap;var p=1,x=1;s.projectionMatrix.copy(this.camera.projectionMatrix),d("c",0,0,-1),d("t",0,0,1),d("n1",-p,-x,-1),d("n2",p,-x,-1),d("n3",-p,x,-1),d("n4",p,x,-1),d("f1",-p,-x,1),d("f2",p,-x,1),d("f3",-p,x,1),d("f4",p,x,1),d("u1",p*.7,x*1.1,-1),d("u2",-p*.7,x*1.1,-1),d("u3",0,x*2,-1),d("cf1",-p,0,1),d("cf2",p,0,1),d("cf3",0,-x,1),d("cf4",0,x,1),d("cn1",-p,0,-1),d("cn2",p,0,-1),d("cn3",0,-x,-1),d("cn4",0,x,-1),r.verticesNeedUpdate=!0}}(),i.DirectionalLightHelper=function(r,e){i.Object3D.call(this),this.light=r,this.light.updateMatrixWorld(),this.matrix=r.matrixWorld,this.matrixAutoUpdate=!1,e=e||1;var o=new i.Geometry;o.vertices.push(new i.Vector3(-e,e,0),new i.Vector3(e,e,0),new i.Vector3(e,-e,0),new i.Vector3(-e,-e,0),new i.Vector3(-e,e,0));var s=new i.LineBasicMaterial({fog:!1});s.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.lightPlane=new i.Line(o,s),this.add(this.lightPlane),o=new i.Geometry,o.vertices.push(new i.Vector3,new i.Vector3),s=new i.LineBasicMaterial({fog:!1}),s.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine=new i.Line(o,s),this.add(this.targetLine),this.update()},i.DirectionalLightHelper.prototype=Object.create(i.Object3D.prototype),i.DirectionalLightHelper.prototype.constructor=i.DirectionalLightHelper,i.DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},i.DirectionalLightHelper.prototype.update=function(){var r=new i.Vector3,e=new i.Vector3,o=new i.Vector3;return function(){r.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),o.subVectors(e,r),this.lightPlane.lookAt(o),this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine.geometry.vertices[1].copy(o),this.targetLine.geometry.verticesNeedUpdate=!0,this.targetLine.material.color.copy(this.lightPlane.material.color)}}(),i.EdgesHelper=function(r,e,o){var s=e!==void 0?e:16777215;o=o!==void 0?o:1;var d=Math.cos(i.Math.degToRad(o)),p=[0,0],x={},l=function(N,I){return N-I},_=["a","b","c"],v=new i.BufferGeometry,c;r.geometry instanceof i.BufferGeometry?(c=new i.Geometry,c.fromBufferGeometry(r.geometry)):c=r.geometry.clone(),c.mergeVertices(),c.computeFaceNormals();for(var h=c.vertices,f=c.faces,m=0,b=0,w=f.length;b<w;b++)for(var C=f[b],E=0;E<3;E++){p[0]=C[_[E]],p[1]=C[_[(E+1)%3]],p.sort(l);var S=p.toString();x[S]===void 0?(x[S]={vert1:p[0],vert2:p[1],face1:b,face2:void 0},m++):x[S].face2=b}var M=new Float32Array(m*2*3),A=0;for(var S in x){var R=x[S];if(R.face2===void 0||f[R.face1].normal.dot(f[R.face2].normal)<=d){var D=h[R.vert1];M[A++]=D.x,M[A++]=D.y,M[A++]=D.z,D=h[R.vert2],M[A++]=D.x,M[A++]=D.y,M[A++]=D.z}}v.addAttribute("position",new i.BufferAttribute(M,3)),i.Line.call(this,v,new i.LineBasicMaterial({color:s}),i.LinePieces),this.matrix=r.matrixWorld,this.matrixAutoUpdate=!1},i.EdgesHelper.prototype=Object.create(i.Line.prototype),i.EdgesHelper.prototype.constructor=i.EdgesHelper,i.FaceNormalsHelper=function(r,e,o,s){this.object=r,this.size=e!==void 0?e:1;for(var d=o!==void 0?o:16776960,p=s!==void 0?s:1,x=new i.Geometry,l=this.object.geometry.faces,_=0,v=l.length;_<v;_++)x.vertices.push(new i.Vector3,new i.Vector3);i.Line.call(this,x,new i.LineBasicMaterial({color:d,linewidth:p}),i.LinePieces),this.matrixAutoUpdate=!1,this.normalMatrix=new i.Matrix3,this.update()},i.FaceNormalsHelper.prototype=Object.create(i.Line.prototype),i.FaceNormalsHelper.prototype.constructor=i.FaceNormalsHelper,i.FaceNormalsHelper.prototype.update=function(){var r=this.geometry.vertices,e=this.object,o=e.geometry.vertices,s=e.geometry.faces,d=e.matrixWorld;e.updateMatrixWorld(!0),this.normalMatrix.getNormalMatrix(d);for(var p=0,x=0,l=s.length;p<l;p++,x+=2){var _=s[p];r[x].copy(o[_.a]).add(o[_.b]).add(o[_.c]).divideScalar(3).applyMatrix4(d),r[x+1].copy(_.normal).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size).add(r[x])}return this.geometry.verticesNeedUpdate=!0,this},i.GridHelper=function(r,e){var o=new i.Geometry,s=new i.LineBasicMaterial({vertexColors:i.VertexColors});this.color1=new i.Color(4473924),this.color2=new i.Color(8947848);for(var d=-r;d<=r;d+=e){o.vertices.push(new i.Vector3(-r,0,d),new i.Vector3(r,0,d),new i.Vector3(d,0,-r),new i.Vector3(d,0,r));var p=d===0?this.color1:this.color2;o.colors.push(p,p,p,p)}i.Line.call(this,o,s,i.LinePieces)},i.GridHelper.prototype=Object.create(i.Line.prototype),i.GridHelper.prototype.constructor=i.GridHelper,i.GridHelper.prototype.setColors=function(r,e){this.color1.set(r),this.color2.set(e),this.geometry.colorsNeedUpdate=!0},i.HemisphereLightHelper=function(r,e){i.Object3D.call(this),this.light=r,this.light.updateMatrixWorld(),this.matrix=r.matrixWorld,this.matrixAutoUpdate=!1,this.colors=[new i.Color,new i.Color];var o=new i.SphereGeometry(e,4,2);o.applyMatrix(new i.Matrix4().makeRotationX(-Math.PI/2));for(var s=0,d=8;s<d;s++)o.faces[s].color=this.colors[s<4?0:1];var p=new i.MeshBasicMaterial({vertexColors:i.FaceColors,wireframe:!0});this.lightSphere=new i.Mesh(o,p),this.add(this.lightSphere),this.update()},i.HemisphereLightHelper.prototype=Object.create(i.Object3D.prototype),i.HemisphereLightHelper.prototype.constructor=i.HemisphereLightHelper,i.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose(),this.lightSphere.material.dispose()},i.HemisphereLightHelper.prototype.update=function(){var r=new i.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity),this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity),this.lightSphere.lookAt(r.setFromMatrixPosition(this.light.matrixWorld).negate()),this.lightSphere.geometry.colorsNeedUpdate=!0}}(),i.PointLightHelper=function(r,e){this.light=r,this.light.updateMatrixWorld();var o=new i.SphereGeometry(e,4,2),s=new i.MeshBasicMaterial({wireframe:!0,fog:!1});s.color.copy(this.light.color).multiplyScalar(this.light.intensity),i.Mesh.call(this,o,s),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1},i.PointLightHelper.prototype=Object.create(i.Mesh.prototype),i.PointLightHelper.prototype.constructor=i.PointLightHelper,i.PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},i.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},i.SkeletonHelper=function(r){this.bones=this.getBoneList(r);for(var e=new i.Geometry,o=0;o<this.bones.length;o++){var s=this.bones[o];s.parent instanceof i.Bone&&(e.vertices.push(new i.Vector3),e.vertices.push(new i.Vector3),e.colors.push(new i.Color(0,0,1)),e.colors.push(new i.Color(0,1,0)))}var d=new i.LineBasicMaterial({vertexColors:i.VertexColors,depthTest:!1,depthWrite:!1,transparent:!0});i.Line.call(this,e,d,i.LinePieces),this.root=r,this.matrix=r.matrixWorld,this.matrixAutoUpdate=!1,this.update()},i.SkeletonHelper.prototype=Object.create(i.Line.prototype),i.SkeletonHelper.prototype.constructor=i.SkeletonHelper,i.SkeletonHelper.prototype.getBoneList=function(r){var e=[];r instanceof i.Bone&&e.push(r);for(var o=0;o<r.children.length;o++)e.push.apply(e,this.getBoneList(r.children[o]));return e},i.SkeletonHelper.prototype.update=function(){for(var r=this.geometry,e=new i.Matrix4().getInverse(this.root.matrixWorld),o=new i.Matrix4,s=0,d=0;d<this.bones.length;d++){var p=this.bones[d];p.parent instanceof i.Bone&&(o.multiplyMatrices(e,p.matrixWorld),r.vertices[s].setFromMatrixPosition(o),o.multiplyMatrices(e,p.parent.matrixWorld),r.vertices[s+1].setFromMatrixPosition(o),s+=2)}r.verticesNeedUpdate=!0,r.computeBoundingSphere()},i.SpotLightHelper=function(r){i.Object3D.call(this),this.light=r,this.light.updateMatrixWorld(),this.matrix=r.matrixWorld,this.matrixAutoUpdate=!1;var e=new i.CylinderGeometry(0,1,1,8,1,!0);e.applyMatrix(new i.Matrix4().makeTranslation(0,-.5,0)),e.applyMatrix(new i.Matrix4().makeRotationX(-Math.PI/2));var o=new i.MeshBasicMaterial({wireframe:!0,fog:!1});this.cone=new i.Mesh(e,o),this.add(this.cone),this.update()},i.SpotLightHelper.prototype=Object.create(i.Object3D.prototype),i.SpotLightHelper.prototype.constructor=i.SpotLightHelper,i.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},i.SpotLightHelper.prototype.update=function(){var r=new i.Vector3,e=new i.Vector3;return function(){var o=this.light.distance?this.light.distance:1e4,s=o*Math.tan(this.light.angle);this.cone.scale.set(s,s,o),r.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(e.sub(r)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),i.VertexNormalsHelper=function(r,e,o,s){this.object=r,this.size=e!==void 0?e:1;for(var d=o!==void 0?o:16711680,p=s!==void 0?s:1,x=new i.Geometry,l=r.geometry.faces,_=0,v=l.length;_<v;_++)for(var c=l[_],h=0,f=c.vertexNormals.length;h<f;h++)x.vertices.push(new i.Vector3,new i.Vector3);i.Line.call(this,x,new i.LineBasicMaterial({color:d,linewidth:p}),i.LinePieces),this.matrixAutoUpdate=!1,this.normalMatrix=new i.Matrix3,this.update()},i.VertexNormalsHelper.prototype=Object.create(i.Line.prototype),i.VertexNormalsHelper.prototype.constructor=i.VertexNormalsHelper,i.VertexNormalsHelper.prototype.update=function(r){var e=new i.Vector3;return function(o){var s=["a","b","c","d"];this.object.updateMatrixWorld(!0),this.normalMatrix.getNormalMatrix(this.object.matrixWorld);for(var d=this.geometry.vertices,p=this.object.geometry.vertices,x=this.object.geometry.faces,l=this.object.matrixWorld,_=0,v=0,c=x.length;v<c;v++)for(var h=x[v],f=0,m=h.vertexNormals.length;f<m;f++){var b=h[s[f]],w=p[b],C=h.vertexNormals[f];d[_].copy(w).applyMatrix4(l),e.copy(C).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size),e.add(d[_]),_=_+1,d[_].copy(e),_=_+1}return this.geometry.verticesNeedUpdate=!0,this}}(),i.VertexTangentsHelper=function(r,e,o,s){this.object=r,this.size=e!==void 0?e:1;for(var d=o!==void 0?o:255,p=s!==void 0?s:1,x=new i.Geometry,l=r.geometry.faces,_=0,v=l.length;_<v;_++)for(var c=l[_],h=0,f=c.vertexTangents.length;h<f;h++)x.vertices.push(new i.Vector3),x.vertices.push(new i.Vector3);i.Line.call(this,x,new i.LineBasicMaterial({color:d,linewidth:p}),i.LinePieces),this.matrixAutoUpdate=!1,this.update()},i.VertexTangentsHelper.prototype=Object.create(i.Line.prototype),i.VertexTangentsHelper.prototype.constructor=i.VertexTangentsHelper,i.VertexTangentsHelper.prototype.update=function(r){var e=new i.Vector3;return function(o){var s=["a","b","c","d"];this.object.updateMatrixWorld(!0);for(var d=this.geometry.vertices,p=this.object.geometry.vertices,x=this.object.geometry.faces,l=this.object.matrixWorld,_=0,v=0,c=x.length;v<c;v++)for(var h=x[v],f=0,m=h.vertexTangents.length;f<m;f++){var b=h[s[f]],w=p[b],C=h.vertexTangents[f];d[_].copy(w).applyMatrix4(l),e.copy(C).transformDirection(l).multiplyScalar(this.size),e.add(d[_]),_=_+1,d[_].copy(e),_=_+1}return this.geometry.verticesNeedUpdate=!0,this}}(),i.WireframeHelper=function(r,e){var o=e!==void 0?e:16777215,s=[0,0],d={},p=function(Q,ne){return Q-ne},x=["a","b","c"],l=new i.BufferGeometry;if(r.geometry instanceof i.Geometry){for(var _=r.geometry.vertices,v=r.geometry.faces,c=0,h=new Uint32Array(6*v.length),f=0,m=v.length;f<m;f++)for(var b=v[f],w=0;w<3;w++){s[0]=b[x[w]],s[1]=b[x[(w+1)%3]],s.sort(p);var C=s.toString();d[C]===void 0&&(h[2*c]=s[0],h[2*c+1]=s[1],d[C]=!0,c++)}for(var E=new Float32Array(c*2*3),f=0,m=c;f<m;f++)for(var w=0;w<2;w++){var S=_[h[2*f+w]],M=6*f+3*w;E[M+0]=S.x,E[M+1]=S.y,E[M+2]=S.z}l.addAttribute("position",new i.BufferAttribute(E,3))}else if(r.geometry instanceof i.BufferGeometry)if(r.geometry.attributes.index!==void 0){var _=r.geometry.attributes.position.array,A=r.geometry.attributes.index.array,R=r.geometry.drawcalls,c=0;R.length===0&&(R=[{count:A.length,index:0,start:0}]);for(var h=new Uint32Array(2*A.length),D=0,N=R.length;D<N;++D)for(var I=R[D].start,L=R[D].count,M=R[D].index,f=I,Y=I+L;f<Y;f+=3)for(var w=0;w<3;w++){s[0]=M+A[f+w],s[1]=M+A[f+(w+1)%3],s.sort(p);var C=s.toString();d[C]===void 0&&(h[2*c]=s[0],h[2*c+1]=s[1],d[C]=!0,c++)}for(var E=new Float32Array(c*2*3),f=0,m=c;f<m;f++)for(var w=0;w<2;w++){var M=6*f+3*w,J=3*h[2*f+w];E[M+0]=_[J],E[M+1]=_[J+1],E[M+2]=_[J+2]}l.addAttribute("position",new i.BufferAttribute(E,3))}else{for(var _=r.geometry.attributes.position.array,c=_.length/3,ie=c/3,E=new Float32Array(c*2*3),f=0,m=ie;f<m;f++)for(var w=0;w<3;w++){var M=18*f+6*w,K=9*f+3*w;E[M+0]=_[K],E[M+1]=_[K+1],E[M+2]=_[K+2];var J=9*f+3*((w+1)%3);E[M+3]=_[J],E[M+4]=_[J+1],E[M+5]=_[J+2]}l.addAttribute("position",new i.BufferAttribute(E,3))}i.Line.call(this,l,new i.LineBasicMaterial({color:o}),i.LinePieces),this.matrix=r.matrixWorld,this.matrixAutoUpdate=!1},i.WireframeHelper.prototype=Object.create(i.Line.prototype),i.WireframeHelper.prototype.constructor=i.WireframeHelper,i.ImmediateRenderObject=function(){i.Object3D.call(this),this.render=function(r){}},i.ImmediateRenderObject.prototype=Object.create(i.Object3D.prototype),i.ImmediateRenderObject.prototype.constructor=i.ImmediateRenderObject,i.MorphBlendMesh=function(r,e){i.Mesh.call(this,r,e),this.animationsMap={},this.animationsList=[];var o=this.geometry.morphTargets.length,s="__default",d=0,p=o-1,x=o/1;this.createAnimation(s,d,p,x),this.setAnimationWeight(s,1)},i.MorphBlendMesh.prototype=Object.create(i.Mesh.prototype),i.MorphBlendMesh.prototype.constructor=i.MorphBlendMesh,i.MorphBlendMesh.prototype.createAnimation=function(r,e,o,s){var d={startFrame:e,endFrame:o,length:o-e+1,fps:s,duration:(o-e)/s,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[r]=d,this.animationsList.push(d)},i.MorphBlendMesh.prototype.autoCreateAnimations=function(r){for(var e=/([a-z]+)_?(\d+)/,o,s={},d=this.geometry,p=0,x=d.morphTargets.length;p<x;p++){var l=d.morphTargets[p],_=l.name.match(e);if(_&&_.length>1){var v=_[1];s[v]||(s[v]={start:1/0,end:-1/0});var c=s[v];p<c.start&&(c.start=p),p>c.end&&(c.end=p),o||(o=v)}}for(var v in s){var c=s[v];this.createAnimation(v,c.start,c.end,r)}this.firstAnimation=o},i.MorphBlendMesh.prototype.setAnimationDirectionForward=function(r){var e=this.animationsMap[r];e&&(e.direction=1,e.directionBackwards=!1)},i.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(r){var e=this.animationsMap[r];e&&(e.direction=-1,e.directionBackwards=!0)},i.MorphBlendMesh.prototype.setAnimationFPS=function(r,e){var o=this.animationsMap[r];o&&(o.fps=e,o.duration=(o.end-o.start)/o.fps)},i.MorphBlendMesh.prototype.setAnimationDuration=function(r,e){var o=this.animationsMap[r];o&&(o.duration=e,o.fps=(o.end-o.start)/o.duration)},i.MorphBlendMesh.prototype.setAnimationWeight=function(r,e){var o=this.animationsMap[r];o&&(o.weight=e)},i.MorphBlendMesh.prototype.setAnimationTime=function(r,e){var o=this.animationsMap[r];o&&(o.time=e)},i.MorphBlendMesh.prototype.getAnimationTime=function(r){var e=0,o=this.animationsMap[r];return o&&(e=o.time),e},i.MorphBlendMesh.prototype.getAnimationDuration=function(r){var e=-1,o=this.animationsMap[r];return o&&(e=o.duration),e},i.MorphBlendMesh.prototype.playAnimation=function(r){var e=this.animationsMap[r];e?(e.time=0,e.active=!0):i.warn("THREE.MorphBlendMesh: animation["+r+"] undefined in .playAnimation()")},i.MorphBlendMesh.prototype.stopAnimation=function(r){var e=this.animationsMap[r];e&&(e.active=!1)},i.MorphBlendMesh.prototype.update=function(r){for(var e=0,o=this.animationsList.length;e<o;e++){var s=this.animationsList[e];if(s.active){var d=s.duration/s.length;s.time+=s.direction*r,s.mirroredLoop?(s.time>s.duration||s.time<0)&&(s.direction*=-1,s.time>s.duration&&(s.time=s.duration,s.directionBackwards=!0),s.time<0&&(s.time=0,s.directionBackwards=!1)):(s.time=s.time%s.duration,s.time<0&&(s.time+=s.duration));var p=s.startFrame+i.Math.clamp(Math.floor(s.time/d),0,s.length-1),x=s.weight;p!==s.currentFrame&&(this.morphTargetInfluences[s.lastFrame]=0,this.morphTargetInfluences[s.currentFrame]=1*x,this.morphTargetInfluences[p]=0,s.lastFrame=s.currentFrame,s.currentFrame=p);var l=s.time%d/d;s.directionBackwards&&(l=1-l),this.morphTargetInfluences[s.currentFrame]=l*x,this.morphTargetInfluences[s.lastFrame]=(1-l)*x}}},function(){var r=0,e=/MSIE (\d+\.\d+);/.test(navigator.userAgent),o=!!navigator.userAgent.match(/Trident\/7.0/),s=navigator.userAgent.indexOf("rv:11.0");e&&(r=new Number(RegExp.$1)),navigator.appVersion.indexOf("MSIE 10")!=-1&&(r=10),o&&s!=-1&&(r=11),r>0&&(HTMLElement.prototype.getBoundingClientRect=function(){var d=HTMLElement.prototype.getBoundingClientRect;return function(){try{return d.apply(this,arguments)}catch{return{left:"",right:"",top:"",bottom:""}}}}())}(),i}(),V;(function(i,r){V=r()})({},function(){"use strict";var i=Array.prototype.slice;function r(W,se){se&&(W.prototype=Object.create(se.prototype)),W.prototype.constructor=W}function e(W){return p(W)?W:Ue(W)}r(o,e);function o(W){return x(W)?W:Qe(W)}r(s,e);function s(W){return l(W)?W:Ke(W)}r(d,e);function d(W){return p(W)&&!_(W)?W:Te(W)}function p(W){return!!(W&&W[c])}function x(W){return!!(W&&W[h])}function l(W){return!!(W&&W[f])}function _(W){return x(W)||l(W)}function v(W){return!!(W&&W[m])}e.isIterable=p,e.isKeyed=x,e.isIndexed=l,e.isAssociative=_,e.isOrdered=v,e.Keyed=o,e.Indexed=s,e.Set=d;var c="@@__IMMUTABLE_ITERABLE__@@",h="@@__IMMUTABLE_KEYED__@@",f="@@__IMMUTABLE_INDEXED__@@",m="@@__IMMUTABLE_ORDERED__@@",b="delete",w=5,C=1<<w,E=C-1,S={},M={value:!1},A={value:!1};function R(W){return W.value=!1,W}function D(W){W&&(W.value=!0)}function N(){}function I(W,se){se=se||0;for(var we=Math.max(0,W.length-se),Ae=new Array(we),Oe=0;Oe<we;Oe++)Ae[Oe]=W[Oe+se];return Ae}function L(W){return W.size===void 0&&(W.size=W.__iterate(J)),W.size}function Y(W,se){if(typeof se!="number"){var we=se>>>0;if(""+we!==se||we===4294967295)return NaN;se=we}return se<0?L(W)+se:se}function J(){return!0}function ie(W,se,we){return(W===0||we!==void 0&&W<=-we)&&(se===void 0||we!==void 0&&se>=we)}function K(W,se){return ne(W,se,0)}function Q(W,se){return ne(W,se,se)}function ne(W,se,we){return W===void 0?we:W<0?Math.max(0,se+W):se===void 0?W:Math.min(se,W)}var ue=0,fe=1,ge=2,ye=typeof Symbol=="function"&&Symbol.iterator,pe="@@iterator",de=ye||pe;function he(W){this.next=W}he.prototype.toString=function(){return"[Iterator]"},he.KEYS=ue,he.VALUES=fe,he.ENTRIES=ge,he.prototype.inspect=he.prototype.toSource=function(){return this.toString()},he.prototype[de]=function(){return this};function _e(W,se,we,Ae){var Oe=W===0?se:W===1?we:[se,we];return Ae?Ae.value=Oe:Ae={value:Oe,done:!1},Ae}function ve(){return{value:void 0,done:!0}}function Z(W){return!!De(W)}function be(W){return W&&typeof W.next=="function"}function Ee(W){var se=De(W);return se&&se.call(W)}function De(W){var se=W&&(ye&&W[ye]||W[pe]);if(typeof se=="function")return se}function Fe(W){return W&&typeof W.length=="number"}r(Ue,e);function Ue(W){return W==null?tt():p(W)?W.toSeq():Tt(W)}Ue.of=function(){return Ue(arguments)},Ue.prototype.toSeq=function(){return this},Ue.prototype.toString=function(){return this.__toString("Seq {","}")},Ue.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},Ue.prototype.__iterate=function(W,se){return Bt(this,W,se,!0)},Ue.prototype.__iterator=function(W,se){return nr(this,W,se,!0)},r(Qe,Ue);function Qe(W){return W==null?tt().toKeyedSeq():p(W)?x(W)?W.toSeq():W.fromEntrySeq():pt(W)}Qe.prototype.toKeyedSeq=function(){return this},r(Ke,Ue);function Ke(W){return W==null?tt():p(W)?x(W)?W.entrySeq():W.toIndexedSeq():At(W)}Ke.of=function(){return Ke(arguments)},Ke.prototype.toIndexedSeq=function(){return this},Ke.prototype.toString=function(){return this.__toString("Seq [","]")},Ke.prototype.__iterate=function(W,se){return Bt(this,W,se,!1)},Ke.prototype.__iterator=function(W,se){return nr(this,W,se,!1)},r(Te,Ue);function Te(W){return(W==null?tt():p(W)?x(W)?W.entrySeq():W:At(W)).toSetSeq()}Te.of=function(){return Te(arguments)},Te.prototype.toSetSeq=function(){return this},Ue.isSeq=gt,Ue.Keyed=Qe,Ue.Set=Te,Ue.Indexed=Ke;var Ie="@@__IMMUTABLE_SEQ__@@";Ue.prototype[Ie]=!0,r(ke,Ke);function ke(W){this._array=W,this.size=W.length}ke.prototype.get=function(W,se){return this.has(W)?this._array[Y(this,W)]:se},ke.prototype.__iterate=function(W,se){for(var we=this._array,Ae=we.length-1,Oe=0;Oe<=Ae;Oe++)if(W(we[se?Ae-Oe:Oe],Oe,this)===!1)return Oe+1;return Oe},ke.prototype.__iterator=function(W,se){var we=this._array,Ae=we.length-1,Oe=0;return new he(function(){return Oe>Ae?ve():_e(W,Oe,we[se?Ae-Oe++:Oe++])})},r(nt,Qe);function nt(W){var se=Object.keys(W);this._object=W,this._keys=se,this.size=se.length}nt.prototype.get=function(W,se){return se!==void 0&&!this.has(W)?se:this._object[W]},nt.prototype.has=function(W){return this._object.hasOwnProperty(W)},nt.prototype.__iterate=function(W,se){for(var we=this._object,Ae=this._keys,Oe=Ae.length-1,je=0;je<=Oe;je++){var ut=Ae[se?Oe-je:je];if(W(we[ut],ut,this)===!1)return je+1}return je},nt.prototype.__iterator=function(W,se){var we=this._object,Ae=this._keys,Oe=Ae.length-1,je=0;return new he(function(){var ut=Ae[se?Oe-je:je];return je++>Oe?ve():_e(W,ut,we[ut])})},nt.prototype[m]=!0,r(dt,Ke);function dt(W){this._iterable=W,this.size=W.length||W.size}dt.prototype.__iterateUncached=function(W,se){if(se)return this.cacheResult().__iterate(W,se);var we=this._iterable,Ae=Ee(we),Oe=0;if(be(Ae))for(var je;!(je=Ae.next()).done&&W(je.value,Oe++,this)!==!1;);return Oe},dt.prototype.__iteratorUncached=function(W,se){if(se)return this.cacheResult().__iterator(W,se);var we=this._iterable,Ae=Ee(we);if(!be(Ae))return new he(ve);var Oe=0;return new he(function(){var je=Ae.next();return je.done?je:_e(W,Oe++,je.value)})},r(yt,Ke);function yt(W){this._iterator=W,this._iteratorCache=[]}yt.prototype.__iterateUncached=function(W,se){if(se)return this.cacheResult().__iterate(W,se);for(var we=this._iterator,Ae=this._iteratorCache,Oe=0;Oe<Ae.length;)if(W(Ae[Oe],Oe++,this)===!1)return Oe;for(var je;!(je=we.next()).done;){var ut=je.value;if(Ae[Oe]=ut,W(ut,Oe++,this)===!1)break}return Oe},yt.prototype.__iteratorUncached=function(W,se){if(se)return this.cacheResult().__iterator(W,se);var we=this._iterator,Ae=this._iteratorCache,Oe=0;return new he(function(){if(Oe>=Ae.length){var je=we.next();if(je.done)return je;Ae[Oe]=je.value}return _e(W,Oe,Ae[Oe++])})};function gt(W){return!!(W&&W[Ie])}var xt;function tt(){return xt||(xt=new ke([]))}function pt(W){var se=Array.isArray(W)?new ke(W).fromEntrySeq():be(W)?new yt(W).fromEntrySeq():Z(W)?new dt(W).fromEntrySeq():typeof W=="object"?new nt(W):void 0;if(!se)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+W);return se}function At(W){var se=Ct(W);if(!se)throw new TypeError("Expected Array or iterable object of values: "+W);return se}function Tt(W){var se=Ct(W)||typeof W=="object"&&new nt(W);if(!se)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+W);return se}function Ct(W){return Fe(W)?new ke(W):be(W)?new yt(W):Z(W)?new dt(W):void 0}function Bt(W,se,we,Ae){var Oe=W._cache;if(Oe){for(var je=Oe.length-1,ut=0;ut<=je;ut++){var ft=Oe[we?je-ut:ut];if(se(ft[1],Ae?ft[0]:ut,W)===!1)return ut+1}return ut}return W.__iterateUncached(se,we)}function nr(W,se,we,Ae){var Oe=W._cache;if(Oe){var je=Oe.length-1,ut=0;return new he(function(){var ft=Oe[we?je-ut:ut];return ut++>je?ve():_e(se,Ae?ft[0]:ut-1,ft[1])})}return W.__iteratorUncached(se,we)}function $t(W,se){return se?It(se,W,"",{"":W}):Lt(W)}function It(W,se,we,Ae){return Array.isArray(se)?W.call(Ae,we,Ke(se).map(function(Oe,je){return It(W,Oe,je,se)})):Pt(se)?W.call(Ae,we,Qe(se).map(function(Oe,je){return It(W,Oe,je,se)})):se}function Lt(W){return Array.isArray(W)?Ke(W).map(Lt).toList():Pt(W)?Qe(W).map(Lt).toMap():W}function Pt(W){return W&&(W.constructor===Object||W.constructor===void 0)}function He(W,se){if(W===se||W!==W&&se!==se)return!0;if(!W||!se)return!1;if(typeof W.valueOf=="function"&&typeof se.valueOf=="function"){if(W=W.valueOf(),se=se.valueOf(),W===se||W!==W&&se!==se)return!0;if(!W||!se)return!1}return!!(typeof W.equals=="function"&&typeof se.equals=="function"&&W.equals(se))}function Be(W,se){if(W===se)return!0;if(!p(se)||W.size!==void 0&&se.size!==void 0&&W.size!==se.size||W.__hash!==void 0&&se.__hash!==void 0&&W.__hash!==se.__hash||x(W)!==x(se)||l(W)!==l(se)||v(W)!==v(se))return!1;if(W.size===0&&se.size===0)return!0;var we=!_(W);if(v(W)){var Ae=W.entries();return se.every(function(Et,Vt){var Wt=Ae.next().value;return Wt&&He(Wt[1],Et)&&(we||He(Wt[0],Vt))})&&Ae.next().done}var Oe=!1;if(W.size===void 0)if(se.size===void 0)typeof W.cacheResult=="function"&&W.cacheResult();else{Oe=!0;var je=W;W=se,se=je}var ut=!0,ft=se.__iterate(function(Et,Vt){if(we?!W.has(Et):Oe?!He(Et,W.get(Vt,S)):!He(W.get(Vt,S),Et))return ut=!1,!1});return ut&&W.size===ft}r(Ge,Ke);function Ge(W,se){if(!(this instanceof Ge))return new Ge(W,se);if(this._value=W,this.size=se===void 0?1/0:Math.max(0,se),this.size===0){if(Re)return Re;Re=this}}Ge.prototype.toString=function(){return this.size===0?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},Ge.prototype.get=function(W,se){return this.has(W)?this._value:se},Ge.prototype.includes=function(W){return He(this._value,W)},Ge.prototype.slice=function(W,se){var we=this.size;return ie(W,se,we)?this:new Ge(this._value,Q(se,we)-K(W,we))},Ge.prototype.reverse=function(){return this},Ge.prototype.indexOf=function(W){return He(this._value,W)?0:-1},Ge.prototype.lastIndexOf=function(W){return He(this._value,W)?this.size:-1},Ge.prototype.__iterate=function(W,se){for(var we=0;we<this.size;we++)if(W(this._value,we,this)===!1)return we+1;return we},Ge.prototype.__iterator=function(W,se){var we=this,Ae=0;return new he(function(){return Ae<we.size?_e(W,Ae++,we._value):ve()})},Ge.prototype.equals=function(W){return W instanceof Ge?He(this._value,W._value):Be(W)};var Re;function Ne(W,se){if(!W)throw new Error(se)}r(ze,Ke);function ze(W,se,we){if(!(this instanceof ze))return new ze(W,se,we);if(Ne(we!==0,"Cannot step a Range by 0"),W=W||0,se===void 0&&(se=1/0),we=we===void 0?1:Math.abs(we),se<W&&(we=-we),this._start=W,this._end=se,this._step=we,this.size=Math.max(0,Math.ceil((se-W)/we-1)+1),this.size===0){if(et)return et;et=this}}ze.prototype.toString=function(){return this.size===0?"Range []":"Range [ "+this._start+"..."+this._end+(this._step!==1?" by "+this._step:"")+" ]"},ze.prototype.get=function(W,se){return this.has(W)?this._start+Y(this,W)*this._step:se},ze.prototype.includes=function(W){var se=(W-this._start)/this._step;return se>=0&&se<this.size&&se===Math.floor(se)},ze.prototype.slice=function(W,se){return ie(W,se,this.size)?this:(W=K(W,this.size),se=Q(se,this.size),se<=W?new ze(0,0):new ze(this.get(W,this._end),this.get(se,this._end),this._step))},ze.prototype.indexOf=function(W){var se=W-this._start;if(se%this._step===0){var we=se/this._step;if(we>=0&&we<this.size)return we}return-1},ze.prototype.lastIndexOf=function(W){return this.indexOf(W)},ze.prototype.__iterate=function(W,se){for(var we=this.size-1,Ae=this._step,Oe=se?this._start+we*Ae:this._start,je=0;je<=we;je++){if(W(Oe,je,this)===!1)return je+1;Oe+=se?-Ae:Ae}return je},ze.prototype.__iterator=function(W,se){var we=this.size-1,Ae=this._step,Oe=se?this._start+we*Ae:this._start,je=0;return new he(function(){var ut=Oe;return Oe+=se?-Ae:Ae,je>we?ve():_e(W,je++,ut)})},ze.prototype.equals=function(W){return W instanceof ze?this._start===W._start&&this._end===W._end&&this._step===W._step:Be(this,W)};var et;r(it,e);function it(){throw TypeError("Abstract")}r(at,it);function at(){}r(vt,it);function vt(){}r(jt,it);function jt(){}it.Keyed=at,it.Indexed=vt,it.Set=jt;var Nt=typeof Math.imul=="function"&&Math.imul(4294967295,2)===-2?Math.imul:function(se,we){se=se|0,we=we|0;var Ae=se&65535,Oe=we&65535;return Ae*Oe+((se>>>16)*Oe+Ae*(we>>>16)<<16>>>0)|0};function Dt(W){return W>>>1&1073741824|W&3221225471}function Gt(W){if(W===!1||W===null||W===void 0||typeof W.valueOf=="function"&&(W=W.valueOf(),W===!1||W===null||W===void 0))return 0;if(W===!0)return 1;var se=typeof W;if(se==="number"){var we=W|0;for(we!==W&&(we^=W*4294967295);W>4294967295;)W/=4294967295,we^=W;return Dt(we)}if(se==="string")return W.length>Fr?or(W):Jt(W);if(typeof W.hashCode=="function")return W.hashCode();if(se==="object")return pr(W);if(typeof W.toString=="function")return Jt(W.toString());throw new Error("Value type "+se+" cannot be hashed.")}function or(W){var se=Vn[W];return se===void 0&&(se=Jt(W),tn===gr&&(tn=0,Vn={}),tn++,Vn[W]=se),se}function Jt(W){for(var se=0,we=0;we<W.length;we++)se=31*se+W.charCodeAt(we)|0;return Dt(se)}function pr(W){var se;if(Sn&&(se=Ht.get(W),se!==void 0)||(se=W[Sr],se!==void 0)||!Lr&&(se=W.propertyIsEnumerable&&W.propertyIsEnumerable[Sr],se!==void 0||(se=Or(W),se!==void 0)))return se;if(se=++sr,sr&1073741824&&(sr=0),Sn)Ht.set(W,se);else{if(lr!==void 0&&lr(W)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(Lr)Object.defineProperty(W,Sr,{enumerable:!1,configurable:!1,writable:!1,value:se});else if(W.propertyIsEnumerable!==void 0&&W.propertyIsEnumerable===W.constructor.prototype.propertyIsEnumerable)W.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},W.propertyIsEnumerable[Sr]=se;else if(W.nodeType!==void 0)W[Sr]=se;else throw new Error("Unable to set a non-enumerable property on object.")}return se}var lr=Object.isExtensible,Lr=function(){try{return Object.defineProperty({},"@",{}),!0}catch{return!1}}();function Or(W){if(W&&W.nodeType>0)switch(W.nodeType){case 1:return W.uniqueID;case 9:return W.documentElement&&W.documentElement.uniqueID}}var Sn=typeof WeakMap=="function",Ht;Sn&&(Ht=new WeakMap);var sr=0,Sr="__immutablehash__";typeof Symbol=="function"&&(Sr=Symbol(Sr));var Fr=16,gr=255,tn=0,Vn={};function Rt(W){Ne(W!==1/0,"Cannot perform this action with an infinite size.")}r(Ur,at);function Ur(W){return W==null?Ar():Zr(W)&&!v(W)?W:Ar().withMutations(function(se){var we=o(W);Rt(we.size),we.forEach(function(Ae,Oe){return se.set(Oe,Ae)})})}Ur.of=function(){var W=i.call(arguments,0);return Ar().withMutations(function(se){for(var we=0;we<W.length;we+=2){if(we+1>=W.length)throw new Error("Missing value for key: "+W[we]);se.set(W[we],W[we+1])}})},Ur.prototype.toString=function(){return this.__toString("Map {","}")},Ur.prototype.get=function(W,se){return this._root?this._root.get(0,void 0,W,se):se},Ur.prototype.set=function(W,se){return ni(this,W,se)},Ur.prototype.setIn=function(W,se){return this.updateIn(W,S,function(){return se})},Ur.prototype.remove=function(W){return ni(this,W,S)},Ur.prototype.deleteIn=function(W){return this.updateIn(W,function(){return S})},Ur.prototype.update=function(W,se,we){return arguments.length===1?W(this):this.updateIn([W],se,we)},Ur.prototype.updateIn=function(W,se,we){we||(we=se,se=void 0);var Ae=eo(this,ji(W),se,we);return Ae===S?void 0:Ae},Ur.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Ar()},Ur.prototype.merge=function(){return Ai(this,void 0,arguments)},Ur.prototype.mergeWith=function(W){var se=i.call(arguments,1);return Ai(this,W,se)},Ur.prototype.mergeIn=function(W){var se=i.call(arguments,1);return this.updateIn(W,Ar(),function(we){return typeof we.merge=="function"?we.merge.apply(we,se):se[se.length-1]})},Ur.prototype.mergeDeep=function(){return Ai(this,fn,arguments)},Ur.prototype.mergeDeepWith=function(W){var se=i.call(arguments,1);return Ai(this,Ji(W),se)},Ur.prototype.mergeDeepIn=function(W){var se=i.call(arguments,1);return this.updateIn(W,Ar(),function(we){return typeof we.mergeDeep=="function"?we.mergeDeep.apply(we,se):se[se.length-1]})},Ur.prototype.sort=function(W){return st(Mn(this,W))},Ur.prototype.sortBy=function(W,se){return st(Mn(this,se,W))},Ur.prototype.withMutations=function(W){var se=this.asMutable();return W(se),se.wasAltered()?se.__ensureOwner(this.__ownerID):this},Ur.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new N)},Ur.prototype.asImmutable=function(){return this.__ensureOwner()},Ur.prototype.wasAltered=function(){return this.__altered},Ur.prototype.__iterator=function(W,se){return new nn(this,W,se)},Ur.prototype.__iterate=function(W,se){var we=this,Ae=0;return this._root&&this._root.iterate(function(Oe){return Ae++,W(Oe[1],Oe[0],we)},se),Ae},Ur.prototype.__ensureOwner=function(W){return W===this.__ownerID?this:W?Br(this.size,this._root,W,this.__hash):(this.__ownerID=W,this.__altered=!1,this)};function Zr(W){return!!(W&&W[xn])}Ur.isMap=Zr;var xn="@@__IMMUTABLE_MAP__@@",Tr=Ur.prototype;Tr[xn]=!0,Tr[b]=Tr.remove,Tr.removeIn=Tr.deleteIn;function Wn(W,se){this.ownerID=W,this.entries=se}Wn.prototype.get=function(W,se,we,Ae){for(var Oe=this.entries,je=0,ut=Oe.length;je<ut;je++)if(He(we,Oe[je][0]))return Oe[je][1];return Ae},Wn.prototype.update=function(W,se,we,Ae,Oe,je,ut){for(var ft=Oe===S,Et=this.entries,Vt=0,Wt=Et.length;Vt<Wt&&!He(Ae,Et[Vt][0]);Vt++);var mr=Vt<Wt;if(mr?Et[Vt][1]===Oe:ft)return this;if(D(ut),(ft||!mr)&&D(je),!(ft&&Et.length===1)){if(!mr&&!ft&&Et.length>=ro)return on(W,Et,Ae,Oe);var _r=W&&W===this.ownerID,jr=_r?Et:I(Et);return mr?ft?Vt===Wt-1?jr.pop():jr[Vt]=jr.pop():jr[Vt]=[Ae,Oe]:jr.push([Ae,Oe]),_r?(this.entries=jr,this):new Wn(W,jr)}};function mn(W,se,we){this.ownerID=W,this.bitmap=se,this.nodes=we}mn.prototype.get=function(W,se,we,Ae){se===void 0&&(se=Gt(we));var Oe=1<<((W===0?se:se>>>W)&E),je=this.bitmap;return je&Oe?this.nodes[Bi(je&Oe-1)].get(W+w,se,we,Ae):Ae},mn.prototype.update=function(W,se,we,Ae,Oe,je,ut){we===void 0&&(we=Gt(Ae));var ft=(se===0?we:we>>>se)&E,Et=1<<ft,Vt=this.bitmap,Wt=(Vt&Et)!==0;if(!Wt&&Oe===S)return this;var mr=Bi(Vt&Et-1),_r=this.nodes,jr=Wt?_r[mr]:void 0,en=kn(jr,W,se+w,we,Ae,Oe,je,ut);if(en===jr)return this;if(!Wt&&en&&_r.length>=$o)return ln(W,_r,Vt,ft,en);if(Wt&&!en&&_r.length===2&&$r(_r[mr^1]))return _r[mr^1];if(Wt&&en&&_r.length===1&&$r(en))return en;var Fn=W&&W===this.ownerID,Mo=Wt?en?Vt:Vt^Et:Vt|Et,Io=Wt?en?to(_r,mr,en,Fn):di(_r,mr,Fn):ha(_r,mr,en,Fn);return Fn?(this.bitmap=Mo,this.nodes=Io,this):new mn(W,Mo,Io)};function Pr(W,se,we){this.ownerID=W,this.count=se,this.nodes=we}Pr.prototype.get=function(W,se,we,Ae){se===void 0&&(se=Gt(we));var Oe=(W===0?se:se>>>W)&E,je=this.nodes[Oe];return je?je.get(W+w,se,we,Ae):Ae},Pr.prototype.update=function(W,se,we,Ae,Oe,je,ut){we===void 0&&(we=Gt(Ae));var ft=(se===0?we:we>>>se)&E,Et=Oe===S,Vt=this.nodes,Wt=Vt[ft];if(Et&&!Wt)return this;var mr=kn(Wt,W,se+w,we,Ae,Oe,je,ut);if(mr===Wt)return this;var _r=this.count;if(!Wt)_r++;else if(!mr&&(_r--,_r<Xo))return Ui(W,Vt,_r,ft);var jr=W&&W===this.ownerID,en=to(Vt,ft,mr,jr);return jr?(this.count=_r,this.nodes=en,this):new Pr(W,_r,en)};function qr(W,se,we){this.ownerID=W,this.keyHash=se,this.entries=we}qr.prototype.get=function(W,se,we,Ae){for(var Oe=this.entries,je=0,ut=Oe.length;je<ut;je++)if(He(we,Oe[je][0]))return Oe[je][1];return Ae},qr.prototype.update=function(W,se,we,Ae,Oe,je,ut){we===void 0&&(we=Gt(Ae));var ft=Oe===S;if(we!==this.keyHash)return ft?this:(D(ut),D(je),bn(this,W,se,we,[Ae,Oe]));for(var Et=this.entries,Vt=0,Wt=Et.length;Vt<Wt&&!He(Ae,Et[Vt][0]);Vt++);var mr=Vt<Wt;if(mr?Et[Vt][1]===Oe:ft)return this;if(D(ut),(ft||!mr)&&D(je),ft&&Wt===2)return new Hn(W,this.keyHash,Et[Vt^1]);var _r=W&&W===this.ownerID,jr=_r?Et:I(Et);return mr?ft?Vt===Wt-1?jr.pop():jr[Vt]=jr.pop():jr[Vt]=[Ae,Oe]:jr.push([Ae,Oe]),_r?(this.entries=jr,this):new qr(W,this.keyHash,jr)};function Hn(W,se,we){this.ownerID=W,this.keyHash=se,this.entry=we}Hn.prototype.get=function(W,se,we,Ae){return He(we,this.entry[0])?this.entry[1]:Ae},Hn.prototype.update=function(W,se,we,Ae,Oe,je,ut){var ft=Oe===S,Et=He(Ae,this.entry[0]);if(Et?Oe===this.entry[1]:ft)return this;if(D(ut),ft){D(je);return}return Et?W&&W===this.ownerID?(this.entry[1]=Oe,this):new Hn(W,this.keyHash,[Ae,Oe]):(D(je),bn(this,W,se,Gt(Ae),[Ae,Oe]))},Wn.prototype.iterate=qr.prototype.iterate=function(W,se){for(var we=this.entries,Ae=0,Oe=we.length-1;Ae<=Oe;Ae++)if(W(we[se?Oe-Ae:Ae])===!1)return!1},mn.prototype.iterate=Pr.prototype.iterate=function(W,se){for(var we=this.nodes,Ae=0,Oe=we.length-1;Ae<=Oe;Ae++){var je=we[se?Oe-Ae:Ae];if(je&&je.iterate(W,se)===!1)return!1}},Hn.prototype.iterate=function(W,se){return W(this.entry)},r(nn,he);function nn(W,se,we){this._type=se,this._reverse=we,this._stack=W._root&&dr(W._root)}nn.prototype.next=function(){for(var W=this._type,se=this._stack;se;){var we=se.node,Ae=se.index++,Oe;if(we.entry){if(Ae===0)return jn(W,we.entry)}else if(we.entries){if(Oe=we.entries.length-1,Ae<=Oe)return jn(W,we.entries[this._reverse?Oe-Ae:Ae])}else if(Oe=we.nodes.length-1,Ae<=Oe){var je=we.nodes[this._reverse?Oe-Ae:Ae];if(je){if(je.entry)return jn(W,je.entry);se=this._stack=dr(je,se)}continue}se=this._stack=this._stack.__prev}return ve()};function jn(W,se){return _e(W,se[0],se[1])}function dr(W,se){return{node:W,index:0,__prev:se}}function Br(W,se,we,Ae){var Oe=Object.create(Tr);return Oe.size=W,Oe._root=se,Oe.__ownerID=we,Oe.__hash=Ae,Oe.__altered=!1,Oe}var kr;function Ar(){return kr||(kr=Br(0))}function ni(W,se,we){var Ae,Oe;if(W._root){var je=R(M),ut=R(A);if(Ae=kn(W._root,W.__ownerID,0,void 0,se,we,je,ut),!ut.value)return W;Oe=W.size+(je.value?we===S?-1:1:0)}else{if(we===S)return W;Oe=1,Ae=new Wn(W.__ownerID,[[se,we]])}return W.__ownerID?(W.size=Oe,W._root=Ae,W.__hash=void 0,W.__altered=!0,W):Ae?Br(Oe,Ae):Ar()}function kn(W,se,we,Ae,Oe,je,ut,ft){return W?W.update(se,we,Ae,Oe,je,ut,ft):je===S?W:(D(ft),D(ut),new Hn(se,Ae,[Oe,je]))}function $r(W){return W.constructor===Hn||W.constructor===qr}function bn(W,se,we,Ae,Oe){if(W.keyHash===Ae)return new qr(se,Ae,[W.entry,Oe]);var je=(we===0?W.keyHash:W.keyHash>>>we)&E,ut=(we===0?Ae:Ae>>>we)&E,ft,Et=je===ut?[bn(W,se,we+w,Ae,Oe)]:(ft=new Hn(se,Ae,Oe),je<ut?[W,ft]:[ft,W]);return new mn(se,1<<je|1<<ut,Et)}function on(W,se,we,Ae){W||(W=new N);for(var Oe=new Hn(W,Gt(we),[we,Ae]),je=0;je<se.length;je++){var ut=se[je];Oe=Oe.update(W,0,void 0,ut[0],ut[1])}return Oe}function Ui(W,se,we,Ae){for(var Oe=0,je=0,ut=new Array(we),ft=0,Et=1,Vt=se.length;ft<Vt;ft++,Et<<=1){var Wt=se[ft];Wt!==void 0&&ft!==Ae&&(Oe|=Et,ut[je++]=Wt)}return new mn(W,Oe,ut)}function ln(W,se,we,Ae,Oe){for(var je=0,ut=new Array(C),ft=0;we!==0;ft++,we>>>=1)ut[ft]=we&1?se[je++]:void 0;return ut[Ae]=Oe,new Pr(W,je+1,ut)}function Ai(W,se,we){for(var Ae=[],Oe=0;Oe<we.length;Oe++){var je=we[Oe],ut=o(je);p(je)||(ut=ut.map(function(ft){return $t(ft)})),Ae.push(ut)}return ii(W,se,Ae)}function fn(W,se,we){return W&&W.mergeDeep&&p(se)?W.mergeDeep(se):He(W,se)?W:se}function Ji(W){return function(se,we,Ae){if(se&&se.mergeDeepWith&&p(we))return se.mergeDeepWith(W,we);var Oe=W(se,we,Ae);return He(se,Oe)?se:Oe}}function ii(W,se,we){return we=we.filter(function(Ae){return Ae.size!==0}),we.length===0?W:W.size===0&&!W.__ownerID&&we.length===1?W.constructor(we[0]):W.withMutations(function(Ae){for(var Oe=se?function(ut,ft){Ae.update(ft,S,function(Et){return Et===S?ut:se(Et,ut,ft)})}:function(ut,ft){Ae.set(ft,ut)},je=0;je<we.length;je++)we[je].forEach(Oe)})}function eo(W,se,we,Ae){var Oe=W===S,je=se.next();if(je.done){var ut=Oe?we:W,ft=Ae(ut);return ft===ut?W:ft}Ne(Oe||W&&W.set,"invalid keyPath");var Et=je.value,Vt=Oe?S:W.get(Et,S),Wt=eo(Vt,se,we,Ae);return Wt===Vt?W:Wt===S?W.remove(Et):(Oe?Ar():W).set(Et,Wt)}function Bi(W){return W=W-(W>>1&1431655765),W=(W&858993459)+(W>>2&858993459),W=W+(W>>4)&252645135,W=W+(W>>8),W=W+(W>>16),W&127}function to(W,se,we,Ae){var Oe=Ae?W:I(W);return Oe[se]=we,Oe}function ha(W,se,we,Ae){var Oe=W.length+1;if(Ae&&se+1===Oe)return W[se]=we,W;for(var je=new Array(Oe),ut=0,ft=0;ft<Oe;ft++)ft===se?(je[ft]=we,ut=-1):je[ft]=W[ft+ut];return je}function di(W,se,we){var Ae=W.length-1;if(we&&se===Ae)return W.pop(),W;for(var Oe=new Array(Ae),je=0,ut=0;ut<Ae;ut++)ut===se&&(je=1),Oe[ut]=W[ut+je];return Oe}var ro=C/4,$o=C/2,Xo=C/4;r(an,vt);function an(W){var se=po();if(W==null)return se;if(qi(W))return W;var we=s(W),Ae=we.size;return Ae===0?se:(Rt(Ae),Ae>0&&Ae<C?To(0,Ae,w,null,new no(we.toArray())):se.withMutations(function(Oe){Oe.setSize(Ae),we.forEach(function(je,ut){return Oe.set(ut,je)})}))}an.of=function(){return this(arguments)},an.prototype.toString=function(){return this.__toString("List [","]")},an.prototype.get=function(W,se){if(W=Y(this,W),W>=0&&W<this.size){W+=this._origin;var we=Ve(this,W);return we&&we.array[W&E]}return se},an.prototype.set=function(W,se){return oe(this,W,se)},an.prototype.remove=function(W){return this.has(W)?W===0?this.shift():W===this.size-1?this.pop():this.splice(W,1):this},an.prototype.insert=function(W,se){return this.splice(W,0,se)},an.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=w,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):po()},an.prototype.push=function(){var W=arguments,se=this.size;return this.withMutations(function(we){ot(we,0,se+W.length);for(var Ae=0;Ae<W.length;Ae++)we.set(se+Ae,W[Ae])})},an.prototype.pop=function(){return ot(this,0,-1)},an.prototype.unshift=function(){var W=arguments;return this.withMutations(function(se){ot(se,-W.length);for(var we=0;we<W.length;we++)se.set(we,W[we])})},an.prototype.shift=function(){return ot(this,1)},an.prototype.merge=function(){return ct(this,void 0,arguments)},an.prototype.mergeWith=function(W){var se=i.call(arguments,1);return ct(this,W,se)},an.prototype.mergeDeep=function(){return ct(this,fn,arguments)},an.prototype.mergeDeepWith=function(W){var se=i.call(arguments,1);return ct(this,Ji(W),se)},an.prototype.setSize=function(W){return ot(this,0,W)},an.prototype.slice=function(W,se){var we=this.size;return ie(W,se,we)?this:ot(this,K(W,we),Q(se,we))},an.prototype.__iterator=function(W,se){var we=0,Ae=Ci(this,se);return new he(function(){var Oe=Ae();return Oe===ho?ve():_e(W,we++,Oe)})},an.prototype.__iterate=function(W,se){for(var we=0,Ae=Ci(this,se),Oe;(Oe=Ae())!==ho&&W(Oe,we++,this)!==!1;);return we},an.prototype.__ensureOwner=function(W){return W===this.__ownerID?this:W?To(this._origin,this._capacity,this._level,this._root,this._tail,W,this.__hash):(this.__ownerID=W,this)};function qi(W){return!!(W&&W[za])}an.isList=qi;var za="@@__IMMUTABLE_LIST__@@",ci=an.prototype;ci[za]=!0,ci[b]=ci.remove,ci.setIn=Tr.setIn,ci.deleteIn=ci.removeIn=Tr.removeIn,ci.update=Tr.update,ci.updateIn=Tr.updateIn,ci.mergeIn=Tr.mergeIn,ci.mergeDeepIn=Tr.mergeDeepIn,ci.withMutations=Tr.withMutations,ci.asMutable=Tr.asMutable,ci.asImmutable=Tr.asImmutable,ci.wasAltered=Tr.wasAltered;function no(W,se){this.array=W,this.ownerID=se}no.prototype.removeBefore=function(W,se,we){if(we===se?1<<se:this.array.length===0)return this;var Ae=we>>>se&E;if(Ae>=this.array.length)return new no([],W);var Oe=Ae===0,je;if(se>0){var ut=this.array[Ae];if(je=ut&&ut.removeBefore(W,se-w,we),je===ut&&Oe)return this}if(Oe&&!je)return this;var ft=We(this,W);if(!Oe)for(var Et=0;Et<Ae;Et++)ft.array[Et]=void 0;return je&&(ft.array[Ae]=je),ft},no.prototype.removeAfter=function(W,se,we){if(we===(se?1<<se:0)||this.array.length===0)return this;var Ae=we-1>>>se&E;if(Ae>=this.array.length)return this;var Oe;if(se>0){var je=this.array[Ae];if(Oe=je&&je.removeAfter(W,se-w,we),Oe===je&&Ae===this.array.length-1)return this}var ut=We(this,W);return ut.array.splice(Ae+1),Oe&&(ut.array[Ae]=Oe),ut};var ho={};function Ci(W,se){var we=W._origin,Ae=W._capacity,Oe=Ye(Ae),je=W._tail;return ut(W._root,W._level,0);function ut(Vt,Wt,mr){return Wt===0?ft(Vt,mr):Et(Vt,Wt,mr)}function ft(Vt,Wt){var mr=Wt===Oe?je&&je.array:Vt&&Vt.array,_r=Wt>we?0:we-Wt,jr=Ae-Wt;return jr>C&&(jr=C),function(){if(_r===jr)return ho;var en=se?--jr:_r++;return mr&&mr[en]}}function Et(Vt,Wt,mr){var _r,jr=Vt&&Vt.array,en=mr>we?0:we-mr>>Wt,Fn=(Ae-mr>>Wt)+1;return Fn>C&&(Fn=C),function(){do{if(_r){var Mo=_r();if(Mo!==ho)return Mo;_r=null}if(en===Fn)return ho;var Io=se?--Fn:en++;_r=ut(jr&&jr[Io],Wt-w,mr+(Io<<Wt))}while(!0)}}}function To(W,se,we,Ae,Oe,je,ut){var ft=Object.create(ci);return ft.size=se-W,ft._origin=W,ft._capacity=se,ft._level=we,ft._root=Ae,ft._tail=Oe,ft.__ownerID=je,ft.__hash=ut,ft.__altered=!1,ft}var Wi;function po(){return Wi||(Wi=To(0,0,w))}function oe(W,se,we){if(se=Y(W,se),se!==se)return W;if(se>=W.size||se<0)return W.withMutations(function(ut){se<0?ot(ut,se).set(0,we):ot(ut,0,se+1).set(se,we)});se+=W._origin;var Ae=W._tail,Oe=W._root,je=R(A);return se>=Ye(W._capacity)?Ae=Me(Ae,W.__ownerID,0,se,we,je):Oe=Me(Oe,W.__ownerID,W._level,se,we,je),je.value?W.__ownerID?(W._root=Oe,W._tail=Ae,W.__hash=void 0,W.__altered=!0,W):To(W._origin,W._capacity,W._level,Oe,Ae):W}function Me(W,se,we,Ae,Oe,je){var ut=Ae>>>we&E,ft=W&&ut<W.array.length;if(!ft&&Oe===void 0)return W;var Et;if(we>0){var Vt=W&&W.array[ut],Wt=Me(Vt,se,we-w,Ae,Oe,je);return Wt===Vt?W:(Et=We(W,se),Et.array[ut]=Wt,Et)}return ft&&W.array[ut]===Oe?W:(D(je),Et=We(W,se),Oe===void 0&&ut===Et.array.length-1?Et.array.pop():Et.array[ut]=Oe,Et)}function We(W,se){return se&&W&&se===W.ownerID?W:new no(W?W.array.slice():[],se)}function Ve(W,se){if(se>=Ye(W._capacity))return W._tail;if(se<1<<W._level+w){for(var we=W._root,Ae=W._level;we&&Ae>0;)we=we.array[se>>>Ae&E],Ae-=w;return we}}function ot(W,se,we){se!==void 0&&(se=se|0),we!==void 0&&(we=we|0);var Ae=W.__ownerID||new N,Oe=W._origin,je=W._capacity,ut=Oe+se,ft=we===void 0?je:we<0?je+we:Oe+we;if(ut===Oe&&ft===je)return W;if(ut>=ft)return W.clear();for(var Et=W._level,Vt=W._root,Wt=0;ut+Wt<0;)Vt=new no(Vt&&Vt.array.length?[void 0,Vt]:[],Ae),Et+=w,Wt+=1<<Et;Wt&&(ut+=Wt,Oe+=Wt,ft+=Wt,je+=Wt);for(var mr=Ye(je),_r=Ye(ft);_r>=1<<Et+w;)Vt=new no(Vt&&Vt.array.length?[Vt]:[],Ae),Et+=w;var jr=W._tail,en=_r<mr?Ve(W,ft-1):_r>mr?new no([],Ae):jr;if(jr&&_r>mr&&ut<je&&jr.array.length){Vt=We(Vt,Ae);for(var Fn=Vt,Mo=Et;Mo>w;Mo-=w){var Io=mr>>>Mo&E;Fn=Fn.array[Io]=We(Fn.array[Io],Ae)}Fn.array[mr>>>w&E]=jr}if(ft<je&&(en=en&&en.removeAfter(Ae,0,ft)),ut>=_r)ut-=_r,ft-=_r,Et=w,Vt=null,en=en&&en.removeBefore(Ae,0,ut);else if(ut>Oe||_r<mr){for(Wt=0;Vt;){var Zu=ut>>>Et&E;if(Zu!==_r>>>Et&E)break;Zu&&(Wt+=(1<<Et)*Zu),Et-=w,Vt=Vt.array[Zu]}Vt&&ut>Oe&&(Vt=Vt.removeBefore(Ae,Et,ut-Wt)),Vt&&_r<mr&&(Vt=Vt.removeAfter(Ae,Et,_r-Wt)),Wt&&(ut-=Wt,ft-=Wt)}return W.__ownerID?(W.size=ft-ut,W._origin=ut,W._capacity=ft,W._level=Et,W._root=Vt,W._tail=en,W.__hash=void 0,W.__altered=!0,W):To(ut,ft,Et,Vt,en)}function ct(W,se,we){for(var Ae=[],Oe=0,je=0;je<we.length;je++){var ut=we[je],ft=s(ut);ft.size>Oe&&(Oe=ft.size),p(ut)||(ft=ft.map(function(Et){return $t(Et)})),Ae.push(ft)}return Oe>W.size&&(W=W.setSize(Oe)),ii(W,se,Ae)}function Ye(W){return W<C?0:W-1>>>w<<w}r(st,Ur);function st(W){return W==null?ee():wt(W)?W:ee().withMutations(function(se){var we=o(W);Rt(we.size),we.forEach(function(Ae,Oe){return se.set(Oe,Ae)})})}st.of=function(){return this(arguments)},st.prototype.toString=function(){return this.__toString("OrderedMap {","}")},st.prototype.get=function(W,se){var we=this._map.get(W);return we!==void 0?this._list.get(we)[1]:se},st.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):ee()},st.prototype.set=function(W,se){return ce(this,W,se)},st.prototype.remove=function(W){return ce(this,W,S)},st.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},st.prototype.__iterate=function(W,se){var we=this;return this._list.__iterate(function(Ae){return Ae&&W(Ae[1],Ae[0],we)},se)},st.prototype.__iterator=function(W,se){return this._list.fromEntrySeq().__iterator(W,se)},st.prototype.__ensureOwner=function(W){if(W===this.__ownerID)return this;var se=this._map.__ensureOwner(W),we=this._list.__ensureOwner(W);return W?St(se,we,W,this.__hash):(this.__ownerID=W,this._map=se,this._list=we,this)};function wt(W){return Zr(W)&&v(W)}st.isOrderedMap=wt,st.prototype[m]=!0,st.prototype[b]=st.prototype.remove;function St(W,se,we,Ae){var Oe=Object.create(st.prototype);return Oe.size=W?W.size:0,Oe._map=W,Oe._list=se,Oe.__ownerID=we,Oe.__hash=Ae,Oe}var z;function ee(){return z||(z=St(Ar(),po()))}function ce(W,se,we){var Ae=W._map,Oe=W._list,je=Ae.get(se),ut=je!==void 0,ft,Et;if(we===S){if(!ut)return W;Oe.size>=C&&Oe.size>=Ae.size*2?(Et=Oe.filter(function(Vt,Wt){return Vt!==void 0&&je!==Wt}),ft=Et.toKeyedSeq().map(function(Vt){return Vt[0]}).flip().toMap(),W.__ownerID&&(ft.__ownerID=Et.__ownerID=W.__ownerID)):(ft=Ae.remove(se),Et=je===Oe.size-1?Oe.pop():Oe.set(je,void 0))}else if(ut){if(we===Oe.get(je)[1])return W;ft=Ae,Et=Oe.set(je,[se,we])}else ft=Ae.set(se,Oe.size),Et=Oe.set(Oe.size,[se,we]);return W.__ownerID?(W.size=ft.size,W._map=ft,W._list=Et,W.__hash=void 0,W):St(ft,Et)}r(me,Qe);function me(W,se){this._iter=W,this._useKeys=se,this.size=W.size}me.prototype.get=function(W,se){return this._iter.get(W,se)},me.prototype.has=function(W){return this._iter.has(W)},me.prototype.valueSeq=function(){return this._iter.valueSeq()},me.prototype.reverse=function(){var W=this,se=rt(this,!0);return this._useKeys||(se.valueSeq=function(){return W._iter.toSeq().reverse()}),se},me.prototype.map=function(W,se){var we=this,Ae=qe(this,W,se);return this._useKeys||(Ae.valueSeq=function(){return we._iter.toSeq().map(W,se)}),Ae},me.prototype.__iterate=function(W,se){var we=this,Ae;return this._iter.__iterate(this._useKeys?function(Oe,je){return W(Oe,je,we)}:(Ae=se?io(this):0,function(Oe){return W(Oe,se?--Ae:Ae++,we)}),se)},me.prototype.__iterator=function(W,se){if(this._useKeys)return this._iter.__iterator(W,se);var we=this._iter.__iterator(fe,se),Ae=se?io(this):0;return new he(function(){var Oe=we.next();return Oe.done?Oe:_e(W,se?--Ae:Ae++,Oe.value,Oe)})},me.prototype[m]=!0,r(Se,Ke);function Se(W){this._iter=W,this.size=W.size}Se.prototype.includes=function(W){return this._iter.includes(W)},Se.prototype.__iterate=function(W,se){var we=this,Ae=0;return this._iter.__iterate(function(Oe){return W(Oe,Ae++,we)},se)},Se.prototype.__iterator=function(W,se){var we=this._iter.__iterator(fe,se),Ae=0;return new he(function(){var Oe=we.next();return Oe.done?Oe:_e(W,Ae++,Oe.value,Oe)})},r(Ce,Te);function Ce(W){this._iter=W,this.size=W.size}Ce.prototype.has=function(W){return this._iter.includes(W)},Ce.prototype.__iterate=function(W,se){var we=this;return this._iter.__iterate(function(Ae){return W(Ae,Ae,we)},se)},Ce.prototype.__iterator=function(W,se){var we=this._iter.__iterator(fe,se);return new he(function(){var Ae=we.next();return Ae.done?Ae:_e(W,Ae.value,Ae.value,Ae)})},r(Pe,Qe);function Pe(W){this._iter=W,this.size=W.size}Pe.prototype.entrySeq=function(){return this._iter.toSeq()},Pe.prototype.__iterate=function(W,se){var we=this;return this._iter.__iterate(function(Ae){if(Ae){_n(Ae);var Oe=p(Ae);return W(Oe?Ae.get(1):Ae[1],Oe?Ae.get(0):Ae[0],we)}},se)},Pe.prototype.__iterator=function(W,se){var we=this._iter.__iterator(fe,se);return new he(function(){for(;;){var Ae=we.next();if(Ae.done)return Ae;var Oe=Ae.value;if(Oe){_n(Oe);var je=p(Oe);return _e(W,je?Oe.get(0):Oe[0],je?Oe.get(1):Oe[1],Ae)}}})},Se.prototype.cacheResult=me.prototype.cacheResult=Ce.prototype.cacheResult=Pe.prototype.cacheResult=Pn;function $e(W){var se=In(W);return se._iter=W,se.size=W.size,se.flip=function(){return W},se.reverse=function(){var we=W.reverse.apply(this);return we.flip=function(){return W.reverse()},we},se.has=function(we){return W.includes(we)},se.includes=function(we){return W.has(we)},se.cacheResult=Pn,se.__iterateUncached=function(we,Ae){var Oe=this;return W.__iterate(function(je,ut){return we(ut,je,Oe)!==!1},Ae)},se.__iteratorUncached=function(we,Ae){if(we===ge){var Oe=W.__iterator(we,Ae);return new he(function(){var je=Oe.next();if(!je.done){var ut=je.value[0];je.value[0]=je.value[1],je.value[1]=ut}return je})}return W.__iterator(we===fe?ue:fe,Ae)},se}function qe(W,se,we){var Ae=In(W);return Ae.size=W.size,Ae.has=function(Oe){return W.has(Oe)},Ae.get=function(Oe,je){var ut=W.get(Oe,S);return ut===S?je:se.call(we,ut,Oe,W)},Ae.__iterateUncached=function(Oe,je){var ut=this;return W.__iterate(function(ft,Et,Vt){return Oe(se.call(we,ft,Et,Vt),Et,ut)!==!1},je)},Ae.__iteratorUncached=function(Oe,je){var ut=W.__iterator(ge,je);return new he(function(){var ft=ut.next();if(ft.done)return ft;var Et=ft.value,Vt=Et[0];return _e(Oe,Vt,se.call(we,Et[1],Vt,W),ft)})},Ae}function rt(W,se){var we=In(W);return we._iter=W,we.size=W.size,we.reverse=function(){return W},W.flip&&(we.flip=function(){var Ae=$e(W);return Ae.reverse=function(){return W.flip()},Ae}),we.get=function(Ae,Oe){return W.get(se?Ae:-1-Ae,Oe)},we.has=function(Ae){return W.has(se?Ae:-1-Ae)},we.includes=function(Ae){return W.includes(Ae)},we.cacheResult=Pn,we.__iterate=function(Ae,Oe){var je=this;return W.__iterate(function(ut,ft){return Ae(ut,ft,je)},!Oe)},we.__iterator=function(Ae,Oe){return W.__iterator(Ae,!Oe)},we}function _t(W,se,we,Ae){var Oe=In(W);return Ae&&(Oe.has=function(je){var ut=W.get(je,S);return ut!==S&&!!se.call(we,ut,je,W)},Oe.get=function(je,ut){var ft=W.get(je,S);return ft!==S&&se.call(we,ft,je,W)?ft:ut}),Oe.__iterateUncached=function(je,ut){var ft=this,Et=0;return W.__iterate(function(Vt,Wt,mr){if(se.call(we,Vt,Wt,mr))return Et++,je(Vt,Ae?Wt:Et-1,ft)},ut),Et},Oe.__iteratorUncached=function(je,ut){var ft=W.__iterator(ge,ut),Et=0;return new he(function(){for(;;){var Vt=ft.next();if(Vt.done)return Vt;var Wt=Vt.value,mr=Wt[0],_r=Wt[1];if(se.call(we,_r,mr,W))return _e(je,Ae?mr:Et++,_r,Vt)}})},Oe}function Mt(W,se,we){var Ae=Ur().asMutable();return W.__iterate(function(Oe,je){Ae.update(se.call(we,Oe,je,W),0,function(ut){return ut+1})}),Ae.asImmutable()}function mt(W,se,we){var Ae=x(W),Oe=(v(W)?st():Ur()).asMutable();W.__iterate(function(ut,ft){Oe.update(se.call(we,ut,ft,W),function(Et){return Et=Et||[],Et.push(Ae?[ft,ut]:ut),Et})});var je=zn(W);return Oe.map(function(ut){return Mr(W,je(ut))})}function Ut(W,se,we,Ae){var Oe=W.size;if(se!==void 0&&(se=se|0),we!==void 0&&(we=we|0),ie(se,we,Oe))return W;var je=K(se,Oe),ut=Q(we,Oe);if(je!==je||ut!==ut)return Ut(W.toSeq().cacheResult(),se,we,Ae);var ft=ut-je,Et;ft===ft&&(Et=ft<0?0:ft);var Vt=In(W);return Vt.size=Et===0?Et:W.size&&Et||void 0,!Ae&&gt(W)&&Et>=0&&(Vt.get=function(Wt,mr){return Wt=Y(this,Wt),Wt>=0&&Wt<Et?W.get(Wt+je,mr):mr}),Vt.__iterateUncached=function(Wt,mr){var _r=this;if(Et===0)return 0;if(mr)return this.cacheResult().__iterate(Wt,mr);var jr=0,en=!0,Fn=0;return W.__iterate(function(Mo,Io){if(!(en&&(en=jr++<je)))return Fn++,Wt(Mo,Ae?Io:Fn-1,_r)!==!1&&Fn!==Et}),Fn},Vt.__iteratorUncached=function(Wt,mr){if(Et!==0&&mr)return this.cacheResult().__iterator(Wt,mr);var _r=Et!==0&&W.__iterator(Wt,mr),jr=0,en=0;return new he(function(){for(;jr++<je;)_r.next();if(++en>Et)return ve();var Fn=_r.next();return Ae||Wt===fe?Fn:Wt===ue?_e(Wt,en-1,void 0,Fn):_e(Wt,en-1,Fn.value[1],Fn)})},Vt}function xr(W,se,we){var Ae=In(W);return Ae.__iterateUncached=function(Oe,je){var ut=this;if(je)return this.cacheResult().__iterate(Oe,je);var ft=0;return W.__iterate(function(Et,Vt,Wt){return se.call(we,Et,Vt,Wt)&&++ft&&Oe(Et,Vt,ut)}),ft},Ae.__iteratorUncached=function(Oe,je){var ut=this;if(je)return this.cacheResult().__iterator(Oe,je);var ft=W.__iterator(ge,je),Et=!0;return new he(function(){if(!Et)return ve();var Vt=ft.next();if(Vt.done)return Vt;var Wt=Vt.value,mr=Wt[0],_r=Wt[1];return se.call(we,_r,mr,ut)?Oe===ge?Vt:_e(Oe,mr,_r,Vt):(Et=!1,ve())})},Ae}function Cr(W,se,we,Ae){var Oe=In(W);return Oe.__iterateUncached=function(je,ut){var ft=this;if(ut)return this.cacheResult().__iterate(je,ut);var Et=!0,Vt=0;return W.__iterate(function(Wt,mr,_r){if(!(Et&&(Et=se.call(we,Wt,mr,_r))))return Vt++,je(Wt,Ae?mr:Vt-1,ft)}),Vt},Oe.__iteratorUncached=function(je,ut){var ft=this;if(ut)return this.cacheResult().__iterator(je,ut);var Et=W.__iterator(ge,ut),Vt=!0,Wt=0;return new he(function(){var mr,_r,jr;do{if(mr=Et.next(),mr.done)return Ae||je===fe?mr:je===ue?_e(je,Wt++,void 0,mr):_e(je,Wt++,mr.value[1],mr);var en=mr.value;_r=en[0],jr=en[1],Vt&&(Vt=se.call(we,jr,_r,ft))}while(Vt);return je===ge?mr:_e(je,_r,jr,mr)})},Oe}function er(W,se){var we=x(W),Ae=[W].concat(se).map(function(ut){return p(ut)?we&&(ut=o(ut)):ut=we?pt(ut):At(Array.isArray(ut)?ut:[ut]),ut}).filter(function(ut){return ut.size!==0});if(Ae.length===0)return W;if(Ae.length===1){var Oe=Ae[0];if(Oe===W||we&&x(Oe)||l(W)&&l(Oe))return Oe}var je=new ke(Ae);return we?je=je.toKeyedSeq():l(W)||(je=je.toSetSeq()),je=je.flatten(!0),je.size=Ae.reduce(function(ut,ft){if(ut!==void 0){var Et=ft.size;if(Et!==void 0)return ut+Et}},0),je}function En(W,se,we){var Ae=In(W);return Ae.__iterateUncached=function(Oe,je){var ut=0,ft=!1;function Et(Vt,Wt){var mr=this;Vt.__iterate(function(_r,jr){return(!se||Wt<se)&&p(_r)?Et(_r,Wt+1):Oe(_r,we?jr:ut++,mr)===!1&&(ft=!0),!ft},je)}return Et(W,0),ut},Ae.__iteratorUncached=function(Oe,je){var ut=W.__iterator(Oe,je),ft=[],Et=0;return new he(function(){for(;ut;){var Vt=ut.next();if(Vt.done!==!1){ut=ft.pop();continue}var Wt=Vt.value;if(Oe===ge&&(Wt=Wt[1]),(!se||ft.length<se)&&p(Wt))ft.push(ut),ut=Wt.__iterator(Oe,je);else return we?Vt:_e(Oe,Et++,Wt,Vt)}return ve()})},Ae}function Tn(W,se,we){var Ae=zn(W);return W.toSeq().map(function(Oe,je){return Ae(se.call(we,Oe,je,W))}).flatten(!0)}function $n(W,se){var we=In(W);return we.size=W.size&&W.size*2-1,we.__iterateUncached=function(Ae,Oe){var je=this,ut=0;return W.__iterate(function(ft,Et){return(!ut||Ae(se,ut++,je)!==!1)&&Ae(ft,ut++,je)!==!1},Oe),ut},we.__iteratorUncached=function(Ae,Oe){var je=W.__iterator(fe,Oe),ut=0,ft;return new he(function(){return(!ft||ut%2)&&(ft=je.next(),ft.done)?ft:ut%2?_e(Ae,ut++,se):_e(Ae,ut++,ft.value,ft)})},we}function Mn(W,se,we){se||(se=hn);var Ae=x(W),Oe=0,je=W.toSeq().map(function(ut,ft){return[ft,ut,Oe++,we?we(ut,ft,W):ut]}).toArray();return je.sort(function(ut,ft){return se(ut[3],ft[3])||ut[2]-ft[2]}).forEach(Ae?function(ut,ft){je[ft].length=2}:function(ut,ft){je[ft]=ut[1]}),Ae?Qe(je):l(W)?Ke(je):Te(je)}function Rr(W,se,we){if(se||(se=hn),we){var Ae=W.toSeq().map(function(Oe,je){return[Oe,we(Oe,je,W)]}).reduce(function(Oe,je){return Qn(se,Oe[1],je[1])?je:Oe});return Ae&&Ae[0]}else return W.reduce(function(Oe,je){return Qn(se,Oe,je)?je:Oe})}function Qn(W,se,we){var Ae=W(we,se);return Ae===0&&we!==se&&(we==null||we!==we)||Ae>0}function Hr(W,se,we){var Ae=In(W);return Ae.size=new ke(we).map(function(Oe){return Oe.size}).min(),Ae.__iterate=function(Oe,je){for(var ut=this.__iterator(fe,je),ft,Et=0;!(ft=ut.next()).done&&Oe(ft.value,Et++,this)!==!1;);return Et},Ae.__iteratorUncached=function(Oe,je){var ut=we.map(function(Vt){return Vt=e(Vt),Ee(je?Vt.reverse():Vt)}),ft=0,Et=!1;return new he(function(){var Vt;return Et||(Vt=ut.map(function(Wt){return Wt.next()}),Et=Vt.some(function(Wt){return Wt.done})),Et?ve():_e(Oe,ft++,se.apply(null,Vt.map(function(Wt){return Wt.value})))})},Ae}function Mr(W,se){return gt(W)?se:W.constructor(se)}function _n(W){if(W!==Object(W))throw new TypeError("Expected [K, V] tuple: "+W)}function io(W){return Rt(W.size),L(W)}function zn(W){return x(W)?o:l(W)?s:d}function In(W){return Object.create((x(W)?Qe:l(W)?Ke:Te).prototype)}function Pn(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):Ue.prototype.cacheResult.call(this)}function hn(W,se){return W>se?1:W<se?-1:0}function ji(W){var se=Ee(W);if(!se){if(!Fe(W))throw new TypeError("Expected iterable or array-like: "+W);se=Ee(e(W))}return se}r(Kr,at);function Kr(W,se){var we,Ae=function(ut){if(ut instanceof Ae)return ut;if(!(this instanceof Ae))return new Ae(ut);if(!we){we=!0;var ft=Object.keys(W);pi(Oe,ft),Oe.size=ft.length,Oe._name=se,Oe._keys=ft,Oe._defaultValues=W}this._map=Ur(ut)},Oe=Ae.prototype=Object.create(vn);return Oe.constructor=Ae,Ae}Kr.prototype.toString=function(){return this.__toString(Si(this)+" {","}")},Kr.prototype.has=function(W){return this._defaultValues.hasOwnProperty(W)},Kr.prototype.get=function(W,se){if(!this.has(W))return se;var we=this._defaultValues[W];return this._map?this._map.get(W,we):we},Kr.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var W=this.constructor;return W._empty||(W._empty=gi(this,Ar()))},Kr.prototype.set=function(W,se){if(!this.has(W))throw new Error('Cannot set unknown key "'+W+'" on '+Si(this));if(this._map&&!this._map.has(W)){var we=this._defaultValues[W];if(se===we)return this}var Ae=this._map&&this._map.set(W,se);return this.__ownerID||Ae===this._map?this:gi(this,Ae)},Kr.prototype.remove=function(W){if(!this.has(W))return this;var se=this._map&&this._map.remove(W);return this.__ownerID||se===this._map?this:gi(this,se)},Kr.prototype.wasAltered=function(){return this._map.wasAltered()},Kr.prototype.__iterator=function(W,se){var we=this;return o(this._defaultValues).map(function(Ae,Oe){return we.get(Oe)}).__iterator(W,se)},Kr.prototype.__iterate=function(W,se){var we=this;return o(this._defaultValues).map(function(Ae,Oe){return we.get(Oe)}).__iterate(W,se)},Kr.prototype.__ensureOwner=function(W){if(W===this.__ownerID)return this;var se=this._map&&this._map.__ensureOwner(W);return W?gi(this,se,W):(this.__ownerID=W,this._map=se,this)};var vn=Kr.prototype;vn[b]=vn.remove,vn.deleteIn=vn.removeIn=Tr.removeIn,vn.merge=Tr.merge,vn.mergeWith=Tr.mergeWith,vn.mergeIn=Tr.mergeIn,vn.mergeDeep=Tr.mergeDeep,vn.mergeDeepWith=Tr.mergeDeepWith,vn.mergeDeepIn=Tr.mergeDeepIn,vn.setIn=Tr.setIn,vn.update=Tr.update,vn.updateIn=Tr.updateIn,vn.withMutations=Tr.withMutations,vn.asMutable=Tr.asMutable,vn.asImmutable=Tr.asImmutable;function gi(W,se,we){var Ae=Object.create(Object.getPrototypeOf(W));return Ae._map=se,Ae.__ownerID=we,Ae}function Si(W){return W._name||W.constructor.name||"Record"}function pi(W,se){try{se.forEach($i.bind(void 0,W))}catch{}}function $i(W,se){Object.defineProperty(W,se,{get:function(){return this.get(se)},set:function(we){Ne(this.__ownerID,"Cannot set on an immutable record."),this.set(se,we)}})}r(wn,jt);function wn(W){return W==null?un():Qr(W)&&!v(W)?W:un().withMutations(function(se){var we=d(W);Rt(we.size),we.forEach(function(Ae){return se.add(Ae)})})}wn.of=function(){return this(arguments)},wn.fromKeys=function(W){return this(o(W).keySeq())},wn.prototype.toString=function(){return this.__toString("Set {","}")},wn.prototype.has=function(W){return this._map.has(W)},wn.prototype.add=function(W){return Gn(this,this._map.set(W,!0))},wn.prototype.remove=function(W){return Gn(this,this._map.remove(W))},wn.prototype.clear=function(){return Gn(this,this._map.clear())},wn.prototype.union=function(){var W=i.call(arguments,0);return W=W.filter(function(se){return se.size!==0}),W.length===0?this:this.size===0&&!this.__ownerID&&W.length===1?this.constructor(W[0]):this.withMutations(function(se){for(var we=0;we<W.length;we++)d(W[we]).forEach(function(Ae){return se.add(Ae)})})},wn.prototype.intersect=function(){var W=i.call(arguments,0);if(W.length===0)return this;W=W.map(function(we){return d(we)});var se=this;return this.withMutations(function(we){se.forEach(function(Ae){W.every(function(Oe){return Oe.includes(Ae)})||we.remove(Ae)})})},wn.prototype.subtract=function(){var W=i.call(arguments,0);if(W.length===0)return this;W=W.map(function(we){return d(we)});var se=this;return this.withMutations(function(we){se.forEach(function(Ae){W.some(function(Oe){return Oe.includes(Ae)})&&we.remove(Ae)})})},wn.prototype.merge=function(){return this.union.apply(this,arguments)},wn.prototype.mergeWith=function(W){var se=i.call(arguments,1);return this.union.apply(this,se)},wn.prototype.sort=function(W){return Yr(Mn(this,W))},wn.prototype.sortBy=function(W,se){return Yr(Mn(this,se,W))},wn.prototype.wasAltered=function(){return this._map.wasAltered()},wn.prototype.__iterate=function(W,se){var we=this;return this._map.__iterate(function(Ae,Oe){return W(Oe,Oe,we)},se)},wn.prototype.__iterator=function(W,se){return this._map.map(function(we,Ae){return Ae}).__iterator(W,se)},wn.prototype.__ensureOwner=function(W){if(W===this.__ownerID)return this;var se=this._map.__ensureOwner(W);return W?this.__make(se,W):(this.__ownerID=W,this._map=se,this)};function Qr(W){return!!(W&&W[mo])}wn.isSet=Qr;var mo="@@__IMMUTABLE_SET__@@",sn=wn.prototype;sn[mo]=!0,sn[b]=sn.remove,sn.mergeDeep=sn.merge,sn.mergeDeepWith=sn.mergeWith,sn.withMutations=Tr.withMutations,sn.asMutable=Tr.asMutable,sn.asImmutable=Tr.asImmutable,sn.__empty=un,sn.__make=vo;function Gn(W,se){return W.__ownerID?(W.size=se.size,W._map=se,W):se===W._map?W:se.size===0?W.__empty():W.__make(se)}function vo(W,se){var we=Object.create(sn);return we.size=W?W.size:0,we._map=W,we.__ownerID=se,we}var Ri;function un(){return Ri||(Ri=vo(Ar()))}r(Yr,wn);function Yr(W){return W==null?yo():Zt(W)?W:yo().withMutations(function(se){var we=d(W);Rt(we.size),we.forEach(function(Ae){return se.add(Ae)})})}Yr.of=function(){return this(arguments)},Yr.fromKeys=function(W){return this(o(W).keySeq())},Yr.prototype.toString=function(){return this.__toString("OrderedSet {","}")};function Zt(W){return Qr(W)&&v(W)}Yr.isOrderedSet=Zt;var Jr=Yr.prototype;Jr[m]=!0,Jr.__empty=yo,Jr.__make=yi;function yi(W,se){var we=Object.create(Jr);return we.size=W?W.size:0,we._map=W,we.__ownerID=se,we}var go;function yo(){return go||(go=yi(ee()))}r(dn,vt);function dn(W){return W==null?da():li(W)?W:da().unshiftAll(W)}dn.of=function(){return this(arguments)},dn.prototype.toString=function(){return this.__toString("Stack [","]")},dn.prototype.get=function(W,se){var we=this._head;for(W=Y(this,W);we&&W--;)we=we.next;return we?we.value:se},dn.prototype.peek=function(){return this._head&&this._head.value},dn.prototype.push=function(){if(arguments.length===0)return this;for(var W=this.size+arguments.length,se=this._head,we=arguments.length-1;we>=0;we--)se={value:arguments[we],next:se};return this.__ownerID?(this.size=W,this._head=se,this.__hash=void 0,this.__altered=!0,this):Xn(W,se)},dn.prototype.pushAll=function(W){if(W=s(W),W.size===0)return this;Rt(W.size);var se=this.size,we=this._head;return W.reverse().forEach(function(Ae){se++,we={value:Ae,next:we}}),this.__ownerID?(this.size=se,this._head=we,this.__hash=void 0,this.__altered=!0,this):Xn(se,we)},dn.prototype.pop=function(){return this.slice(1)},dn.prototype.unshift=function(){return this.push.apply(this,arguments)},dn.prototype.unshiftAll=function(W){return this.pushAll(W)},dn.prototype.shift=function(){return this.pop.apply(this,arguments)},dn.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):da()},dn.prototype.slice=function(W,se){if(ie(W,se,this.size))return this;var we=K(W,this.size),Ae=Q(se,this.size);if(Ae!==this.size)return vt.prototype.slice.call(this,W,se);for(var Oe=this.size-we,je=this._head;we--;)je=je.next;return this.__ownerID?(this.size=Oe,this._head=je,this.__hash=void 0,this.__altered=!0,this):Xn(Oe,je)},dn.prototype.__ensureOwner=function(W){return W===this.__ownerID?this:W?Xn(this.size,this._head,W,this.__hash):(this.__ownerID=W,this.__altered=!1,this)},dn.prototype.__iterate=function(W,se){if(se)return this.reverse().__iterate(W);for(var we=0,Ae=this._head;Ae&&W(Ae.value,we++,this)!==!1;)Ae=Ae.next;return we},dn.prototype.__iterator=function(W,se){if(se)return this.reverse().__iterator(W);var we=0,Ae=this._head;return new he(function(){if(Ae){var Oe=Ae.value;return Ae=Ae.next,_e(W,we++,Oe)}return ve()})};function li(W){return!!(W&&W[Vi])}dn.isStack=li;var Vi="@@__IMMUTABLE_STACK__@@",Ln=dn.prototype;Ln[Vi]=!0,Ln.withMutations=Tr.withMutations,Ln.asMutable=Tr.asMutable,Ln.asImmutable=Tr.asImmutable,Ln.wasAltered=Tr.wasAltered;function Xn(W,se,we,Ae){var Oe=Object.create(Ln);return Oe.size=W,Oe._head=se,Oe.__ownerID=we,Oe.__hash=Ae,Oe.__altered=!1,Oe}var Yo;function da(){return Yo||(Yo=Xn(0))}function xi(W,se){var we=function(Ae){W.prototype[Ae]=se[Ae]};return Object.keys(se).forEach(we),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(se).forEach(we),W}e.Iterator=he,xi(e,{toArray:function(){Rt(this.size);var W=new Array(this.size||0);return this.valueSeq().__iterate(function(se,we){W[we]=se}),W},toIndexedSeq:function(){return new Se(this)},toJS:function(){return this.toSeq().map(function(W){return W&&typeof W.toJS=="function"?W.toJS():W}).__toJS()},toJSON:function(){return this.toSeq().map(function(W){return W&&typeof W.toJSON=="function"?W.toJSON():W}).__toJS()},toKeyedSeq:function(){return new me(this,!0)},toMap:function(){return Ur(this.toKeyedSeq())},toObject:function(){Rt(this.size);var W={};return this.__iterate(function(se,we){W[we]=se}),W},toOrderedMap:function(){return st(this.toKeyedSeq())},toOrderedSet:function(){return Yr(x(this)?this.valueSeq():this)},toSet:function(){return wn(x(this)?this.valueSeq():this)},toSetSeq:function(){return new Ce(this)},toSeq:function(){return l(this)?this.toIndexedSeq():x(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return dn(x(this)?this.valueSeq():this)},toList:function(){return an(x(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(W,se){return this.size===0?W+se:W+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+se},concat:function(){var W=i.call(arguments,0);return Mr(this,er(this,W))},includes:function(W){return this.some(function(se){return He(se,W)})},entries:function(){return this.__iterator(ge)},every:function(W,se){Rt(this.size);var we=!0;return this.__iterate(function(Ae,Oe,je){if(!W.call(se,Ae,Oe,je))return we=!1,!1}),we},filter:function(W,se){return Mr(this,_t(this,W,se,!0))},find:function(W,se,we){var Ae=this.findEntry(W,se);return Ae?Ae[1]:we},findEntry:function(W,se){var we;return this.__iterate(function(Ae,Oe,je){if(W.call(se,Ae,Oe,je))return we=[Oe,Ae],!1}),we},findLastEntry:function(W,se){return this.toSeq().reverse().findEntry(W,se)},forEach:function(W,se){return Rt(this.size),this.__iterate(se?W.bind(se):W)},join:function(W){Rt(this.size),W=W!==void 0?""+W:",";var se="",we=!0;return this.__iterate(function(Ae){we?we=!1:se+=W,se+=Ae!=null?Ae.toString():""}),se},keys:function(){return this.__iterator(ue)},map:function(W,se){return Mr(this,qe(this,W,se))},reduce:function(W,se,we){Rt(this.size);var Ae,Oe;return arguments.length<2?Oe=!0:Ae=se,this.__iterate(function(je,ut,ft){Oe?(Oe=!1,Ae=je):Ae=W.call(we,Ae,je,ut,ft)}),Ae},reduceRight:function(W,se,we){var Ae=this.toKeyedSeq().reverse();return Ae.reduce.apply(Ae,arguments)},reverse:function(){return Mr(this,rt(this,!0))},slice:function(W,se){return Mr(this,Ut(this,W,se,!0))},some:function(W,se){return!this.every(kt(W),se)},sort:function(W){return Mr(this,Mn(this,W))},values:function(){return this.__iterator(fe)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==void 0?this.size===0:!this.some(function(){return!0})},count:function(W,se){return L(W?this.toSeq().filter(W,se):this)},countBy:function(W,se){return Mt(this,W,se)},equals:function(W){return Be(this,W)},entrySeq:function(){var W=this;if(W._cache)return new ke(W._cache);var se=W.toSeq().map(bt).toIndexedSeq();return se.fromEntrySeq=function(){return W.toSeq()},se},filterNot:function(W,se){return this.filter(kt(W),se)},findLast:function(W,se,we){return this.toKeyedSeq().reverse().find(W,se,we)},first:function(){return this.find(J)},flatMap:function(W,se){return Mr(this,Tn(this,W,se))},flatten:function(W){return Mr(this,En(this,W,!0))},fromEntrySeq:function(){return new Pe(this)},get:function(W,se){return this.find(function(we,Ae){return He(Ae,W)},void 0,se)},getIn:function(W,se){for(var we=this,Ae=ji(W),Oe;!(Oe=Ae.next()).done;){var je=Oe.value;if(we=we&&we.get?we.get(je,S):S,we===S)return se}return we},groupBy:function(W,se){return mt(this,W,se)},has:function(W){return this.get(W,S)!==S},hasIn:function(W){return this.getIn(W,S)!==S},isSubset:function(W){return W=typeof W.includes=="function"?W:e(W),this.every(function(se){return W.includes(se)})},isSuperset:function(W){return W=typeof W.isSubset=="function"?W:e(W),W.isSubset(this)},keySeq:function(){return this.toSeq().map(ht).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},max:function(W){return Rr(this,W)},maxBy:function(W,se){return Rr(this,se,W)},min:function(W){return Rr(this,W?Ft(W):br)},minBy:function(W,se){return Rr(this,se?Ft(se):br,W)},rest:function(){return this.slice(1)},skip:function(W){return this.slice(Math.max(0,W))},skipLast:function(W){return Mr(this,this.toSeq().reverse().skip(W).reverse())},skipWhile:function(W,se){return Mr(this,Cr(this,W,se,!0))},skipUntil:function(W,se){return this.skipWhile(kt(W),se)},sortBy:function(W,se){return Mr(this,Mn(this,se,W))},take:function(W){return this.slice(0,Math.max(0,W))},takeLast:function(W){return Mr(this,this.toSeq().reverse().take(W).reverse())},takeWhile:function(W,se){return Mr(this,xr(this,W,se))},takeUntil:function(W,se){return this.takeWhile(kt(W),se)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=hr(this))}});var Ot=e.prototype;Ot[c]=!0,Ot[de]=Ot.values,Ot.__toJS=Ot.toArray,Ot.__toStringMapper=Kt,Ot.inspect=Ot.toSource=function(){return this.toString()},Ot.chain=Ot.flatMap,Ot.contains=Ot.includes,function(){try{Object.defineProperty(Ot,"length",{get:function(){if(!e.noLengthWarning){var W;try{throw new Error}catch(se){W=se.stack}if(W.indexOf("_wrapObject")===-1)return console&&console.warn&&console.warn("iterable.length has been deprecated, use iterable.size or iterable.count(). This warning will become a silent error in a future version. "+W),this.size}}})}catch{}}(),xi(o,{flip:function(){return Mr(this,$e(this))},findKey:function(W,se){var we=this.findEntry(W,se);return we&&we[0]},findLastKey:function(W,se){return this.toSeq().reverse().findKey(W,se)},keyOf:function(W){return this.findKey(function(se){return He(se,W)})},lastKeyOf:function(W){return this.findLastKey(function(se){return He(se,W)})},mapEntries:function(W,se){var we=this,Ae=0;return Mr(this,this.toSeq().map(function(Oe,je){return W.call(se,[je,Oe],Ae++,we)}).fromEntrySeq())},mapKeys:function(W,se){var we=this;return Mr(this,this.toSeq().flip().map(function(Ae,Oe){return W.call(se,Ae,Oe,we)}).flip())}});var Ze=o.prototype;Ze[h]=!0,Ze[de]=Ot.entries,Ze.__toJS=Ot.toObject,Ze.__toStringMapper=function(W,se){return JSON.stringify(se)+": "+Kt(W)},xi(s,{toKeyedSeq:function(){return new me(this,!1)},filter:function(W,se){return Mr(this,_t(this,W,se,!1))},findIndex:function(W,se){var we=this.findEntry(W,se);return we?we[0]:-1},indexOf:function(W){var se=this.toKeyedSeq().keyOf(W);return se===void 0?-1:se},lastIndexOf:function(W){var se=this.toKeyedSeq().reverse().keyOf(W);return se===void 0?-1:se},reverse:function(){return Mr(this,rt(this,!1))},slice:function(W,se){return Mr(this,Ut(this,W,se,!1))},splice:function(W,se){var we=arguments.length;if(se=Math.max(se|0,0),we===0||we===2&&!se)return this;W=K(W,W<0?this.count():this.size);var Ae=this.slice(0,W);return Mr(this,we===1?Ae:Ae.concat(I(arguments,2),this.slice(W+se)))},findLastIndex:function(W,se){var we=this.toKeyedSeq().findLastKey(W,se);return we===void 0?-1:we},first:function(){return this.get(0)},flatten:function(W){return Mr(this,En(this,W,!1))},get:function(W,se){return W=Y(this,W),W<0||this.size===1/0||this.size!==void 0&&W>this.size?se:this.find(function(we,Ae){return Ae===W},void 0,se)},has:function(W){return W=Y(this,W),W>=0&&(this.size!==void 0?this.size===1/0||W<this.size:this.indexOf(W)!==-1)},interpose:function(W){return Mr(this,$n(this,W))},interleave:function(){var W=[this].concat(I(arguments)),se=Hr(this.toSeq(),Ke.of,W),we=se.flatten(!0);return se.size&&(we.size=se.size*W.length),Mr(this,we)},last:function(){return this.get(-1)},skipWhile:function(W,se){return Mr(this,Cr(this,W,se,!1))},zip:function(){var W=[this].concat(I(arguments));return Mr(this,Hr(this,ur,W))},zipWith:function(W){var se=I(arguments);return se[0]=this,Mr(this,Hr(this,W,se))}}),s.prototype[f]=!0,s.prototype[m]=!0,xi(d,{get:function(W,se){return this.has(W)?W:se},includes:function(W){return this.has(W)},keySeq:function(){return this.valueSeq()}}),d.prototype.has=Ot.includes,d.prototype.contains=d.prototype.includes,xi(Qe,o.prototype),xi(Ke,s.prototype),xi(Te,d.prototype),xi(at,o.prototype),xi(vt,s.prototype),xi(jt,d.prototype);function ht(W,se){return se}function bt(W,se){return[se,W]}function kt(W){return function(){return!W.apply(this,arguments)}}function Ft(W){return function(){return-W.apply(this,arguments)}}function Kt(W){return typeof W=="string"?JSON.stringify(W):W}function ur(){return I(arguments)}function br(W,se){return W<se?1:W>se?-1:0}function hr(W){if(W.size===1/0)return 0;var se=v(W),we=x(W),Ae=se?1:0,Oe=W.__iterate(we?se?function(je,ut){Ae=31*Ae+Ir(Gt(je),Gt(ut))|0}:function(je,ut){Ae=Ae+Ir(Gt(je),Gt(ut))|0}:se?function(je){Ae=31*Ae+Gt(je)|0}:function(je){Ae=Ae+Gt(je)|0});return Xr(Oe,Ae)}function Xr(W,se){return se=Nt(se,3432918353),se=Nt(se<<15|se>>>-15,461845907),se=Nt(se<<13|se>>>-13,5),se=(se+3864292196|0)^W,se=Nt(se^se>>>16,2246822507),se=Nt(se^se>>>13,3266489909),se=Dt(se^se>>>16),se}function Ir(W,se){return W^se+2654435769+(W<<6)+(W>>2)|0}var ir={Iterable:e,Seq:Ue,Collection:it,Map:Ur,OrderedMap:st,List:an,Stack:dn,Set:wn,OrderedSet:Yr,Record:Kr,Range:ze,Repeat:Ge,is:He,fromJS:$t};return ir});var F={};(function(){"use strict";function i(He){throw He}var r=void 0,e=!0,o=this;function s(He,Be){var Ge=He.split("."),Re=o;!(Ge[0]in Re)&&Re.execScript&&Re.execScript("var "+Ge[0]);for(var Ne;Ge.length&&(Ne=Ge.shift());)!Ge.length&&Be!==r?Re[Ne]=Be:Re=Re[Ne]?Re[Ne]:Re[Ne]={}}var d=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u"&&typeof DataView<"u";function p(He,Be){this.index=typeof Be=="number"?Be:0,this.m=0,this.buffer=He instanceof(d?Uint8Array:Array)?He:new(d?Uint8Array:Array)(32768),2*this.buffer.length<=this.index&&i(Error("invalid index")),this.buffer.length<=this.index&&this.f()}p.prototype.f=function(){var He=this.buffer,Be,Ge=He.length,Re=new(d?Uint8Array:Array)(Ge<<1);if(d)Re.set(He);else for(Be=0;Be<Ge;++Be)Re[Be]=He[Be];return this.buffer=Re},p.prototype.d=function(He,Be,Ge){var Re=this.buffer,Ne=this.index,ze=this.m,et=Re[Ne],it;if(Ge&&1<Be&&(He=8<Be?(h[He&255]<<24|h[He>>>8&255]<<16|h[He>>>16&255]<<8|h[He>>>24&255])>>32-Be:h[He]>>8-Be),8>Be+ze)et=et<<Be|He,ze+=Be;else for(it=0;it<Be;++it)et=et<<1|He>>Be-it-1&1,++ze===8&&(ze=0,Re[Ne++]=h[et],et=0,Ne===Re.length&&(Re=this.f()));Re[Ne]=et,this.buffer=Re,this.m=ze,this.index=Ne},p.prototype.finish=function(){var He=this.buffer,Be=this.index,Ge;return 0<this.m&&(He[Be]<<=8-this.m,He[Be]=h[He[Be]],Be++),d?Ge=He.subarray(0,Be):(He.length=Be,Ge=He),Ge};var x=new(d?Uint8Array:Array)(256),l;for(l=0;256>l;++l){for(var c=l,_=c,v=7,c=c>>>1;c;c>>>=1)_<<=1,_|=c&1,--v;x[l]=(_<<v&255)>>>0}var h=x;function f(He,Be,Ge){var Re,Ne=typeof Be=="number"?Be:Be=0,ze=typeof Ge=="number"?Ge:He.length;for(Re=-1,Ne=ze&7;Ne--;++Be)Re=Re>>>8^b[(Re^He[Be])&255];for(Ne=ze>>3;Ne--;Be+=8)Re=Re>>>8^b[(Re^He[Be])&255],Re=Re>>>8^b[(Re^He[Be+1])&255],Re=Re>>>8^b[(Re^He[Be+2])&255],Re=Re>>>8^b[(Re^He[Be+3])&255],Re=Re>>>8^b[(Re^He[Be+4])&255],Re=Re>>>8^b[(Re^He[Be+5])&255],Re=Re>>>8^b[(Re^He[Be+6])&255],Re=Re>>>8^b[(Re^He[Be+7])&255];return(Re^4294967295)>>>0}var m=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],b=d?new Uint32Array(m):m;function w(){}w.prototype.getName=function(){return this.name},w.prototype.getData=function(){return this.data},w.prototype.Y=function(){return this.Z},s("Zlib.GunzipMember",w),s("Zlib.GunzipMember.prototype.getName",w.prototype.getName),s("Zlib.GunzipMember.prototype.getData",w.prototype.getData),s("Zlib.GunzipMember.prototype.getMtime",w.prototype.Y);function C(He){this.buffer=new(d?Uint16Array:Array)(2*He),this.length=0}C.prototype.getParent=function(He){return 2*((He-2)/4|0)},C.prototype.push=function(He,Be){var Ge,Re,Ne=this.buffer,ze;for(Ge=this.length,Ne[this.length++]=Be,Ne[this.length++]=He;0<Ge&&(Re=this.getParent(Ge),Ne[Ge]>Ne[Re]);)ze=Ne[Ge],Ne[Ge]=Ne[Re],Ne[Re]=ze,ze=Ne[Ge+1],Ne[Ge+1]=Ne[Re+1],Ne[Re+1]=ze,Ge=Re;return this.length},C.prototype.pop=function(){var He,Be,Ge=this.buffer,Re,Ne,ze;for(Be=Ge[0],He=Ge[1],this.length-=2,Ge[0]=Ge[this.length],Ge[1]=Ge[this.length+1],ze=0;Ne=2*ze+2,!(Ne>=this.length);){if(Ne+2<this.length&&Ge[Ne+2]>Ge[Ne]&&(Ne+=2),Ge[Ne]>Ge[ze])Re=Ge[ze],Ge[ze]=Ge[Ne],Ge[Ne]=Re,Re=Ge[ze+1],Ge[ze+1]=Ge[Ne+1],Ge[Ne+1]=Re;else break;ze=Ne}return{index:He,value:Be,length:this.length}};function E(He){var Be=He.length,Ge=0,Re=Number.POSITIVE_INFINITY,Ne,ze,et,it,at,vt,jt,Nt,Dt,Gt;for(Nt=0;Nt<Be;++Nt)He[Nt]>Ge&&(Ge=He[Nt]),He[Nt]<Re&&(Re=He[Nt]);for(Ne=1<<Ge,ze=new(d?Uint32Array:Array)(Ne),et=1,it=0,at=2;et<=Ge;){for(Nt=0;Nt<Be;++Nt)if(He[Nt]===et){for(vt=0,jt=it,Dt=0;Dt<et;++Dt)vt=vt<<1|jt&1,jt>>=1;for(Gt=et<<16|Nt,Dt=vt;Dt<Ne;Dt+=at)ze[Dt]=Gt;++it}++et,it<<=1,at<<=1}return[ze,Ge,Re]}function S(He,Be){this.k=M,this.I=0,this.input=d&&He instanceof Array?new Uint8Array(He):He,this.b=0,Be&&(Be.lazy&&(this.I=Be.lazy),typeof Be.compressionType=="number"&&(this.k=Be.compressionType),Be.outputBuffer&&(this.a=d&&Be.outputBuffer instanceof Array?new Uint8Array(Be.outputBuffer):Be.outputBuffer),typeof Be.outputIndex=="number"&&(this.b=Be.outputIndex)),this.a||(this.a=new(d?Uint8Array:Array)(32768))}var M=2,A={NONE:0,v:1,o:M,ba:3},R=[],D;for(D=0;288>D;D++)switch(e){case 143>=D:R.push([D+48,8]);break;case 255>=D:R.push([D-144+400,9]);break;case 279>=D:R.push([D-256+0,7]);break;case 287>=D:R.push([D-280+192,8]);break;default:i("invalid literal: "+D)}S.prototype.g=function(){var He,Be,Ge,Re,Ne=this.input;switch(this.k){case 0:for(Ge=0,Re=Ne.length;Ge<Re;){Be=d?Ne.subarray(Ge,Ge+65535):Ne.slice(Ge,Ge+65535),Ge+=Be.length;var ze=Be,et=Ge===Re,it=r,at=r,vt=r,jt=r,Nt=r,Dt=this.a,Gt=this.b;if(d){for(Dt=new Uint8Array(this.a.buffer);Dt.length<=Gt+ze.length+5;)Dt=new Uint8Array(Dt.length<<1);Dt.set(this.a)}if(it=et?1:0,Dt[Gt++]=it|0,at=ze.length,vt=~at+65536&65535,Dt[Gt++]=at&255,Dt[Gt++]=at>>>8&255,Dt[Gt++]=vt&255,Dt[Gt++]=vt>>>8&255,d)Dt.set(ze,Gt),Gt+=ze.length,Dt=Dt.subarray(0,Gt);else{for(jt=0,Nt=ze.length;jt<Nt;++jt)Dt[Gt++]=ze[jt];Dt.length=Gt}this.b=Gt,this.a=Dt}break;case 1:var or=new p(d?new Uint8Array(this.a.buffer):this.a,this.b);or.d(1,1,e),or.d(1,2,e);var Jt=Y(this,Ne),pr,lr,Lr;for(pr=0,lr=Jt.length;pr<lr;pr++)if(Lr=Jt[pr],p.prototype.d.apply(or,R[Lr]),256<Lr)or.d(Jt[++pr],Jt[++pr],e),or.d(Jt[++pr],5),or.d(Jt[++pr],Jt[++pr],e);else if(Lr===256)break;this.a=or.finish(),this.b=this.a.length;break;case M:var Or=new p(d?new Uint8Array(this.a.buffer):this.a,this.b),Sn,Ht,sr,Sr,Fr,gr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],tn,Vn,Rt,Ur,Zr,xn=Array(19),Tr,Wn,mn,Pr,qr;for(Sn=M,Or.d(1,1,e),Or.d(Sn,2,e),Ht=Y(this,Ne),tn=ie(this.W,15),Vn=Q(tn),Rt=ie(this.V,7),Ur=Q(Rt),sr=286;257<sr&&tn[sr-1]===0;sr--);for(Sr=30;1<Sr&&Rt[Sr-1]===0;Sr--);var Hn=sr,nn=Sr,jn=new(d?Uint32Array:Array)(Hn+nn),dr,Br,kr,Ar,ni=new(d?Uint32Array:Array)(316),kn,$r,bn=new(d?Uint8Array:Array)(19);for(dr=Br=0;dr<Hn;dr++)jn[Br++]=tn[dr];for(dr=0;dr<nn;dr++)jn[Br++]=Rt[dr];if(!d)for(dr=0,Ar=bn.length;dr<Ar;++dr)bn[dr]=0;for(dr=kn=0,Ar=jn.length;dr<Ar;dr+=Br){for(Br=1;dr+Br<Ar&&jn[dr+Br]===jn[dr];++Br);if(kr=Br,jn[dr]===0)if(3>kr)for(;0<kr--;)ni[kn++]=0,bn[0]++;else for(;0<kr;)$r=138>kr?kr:138,$r>kr-3&&$r<kr&&($r=kr-3),10>=$r?(ni[kn++]=17,ni[kn++]=$r-3,bn[17]++):(ni[kn++]=18,ni[kn++]=$r-11,bn[18]++),kr-=$r;else if(ni[kn++]=jn[dr],bn[jn[dr]]++,kr--,3>kr)for(;0<kr--;)ni[kn++]=jn[dr],bn[jn[dr]]++;else for(;0<kr;)$r=6>kr?kr:6,$r>kr-3&&$r<kr&&($r=kr-3),ni[kn++]=16,ni[kn++]=$r-3,bn[16]++,kr-=$r}for(He=d?ni.subarray(0,kn):ni.slice(0,kn),Zr=ie(bn,7),Pr=0;19>Pr;Pr++)xn[Pr]=Zr[gr[Pr]];for(Fr=19;4<Fr&&xn[Fr-1]===0;Fr--);for(Tr=Q(Zr),Or.d(sr-257,5,e),Or.d(Sr-1,5,e),Or.d(Fr-4,4,e),Pr=0;Pr<Fr;Pr++)Or.d(xn[Pr],3,e);for(Pr=0,qr=He.length;Pr<qr;Pr++)if(Wn=He[Pr],Or.d(Tr[Wn],Zr[Wn],e),16<=Wn){switch(Pr++,Wn){case 16:mn=2;break;case 17:mn=3;break;case 18:mn=7;break;default:i("invalid code: "+Wn)}Or.d(He[Pr],mn,e)}var on=[Vn,tn],Ui=[Ur,Rt],ln,Ai,fn,Ji,ii,eo,Bi,to;for(ii=on[0],eo=on[1],Bi=Ui[0],to=Ui[1],ln=0,Ai=Ht.length;ln<Ai;++ln)if(fn=Ht[ln],Or.d(ii[fn],eo[fn],e),256<fn)Or.d(Ht[++ln],Ht[++ln],e),Ji=Ht[++ln],Or.d(Bi[Ji],to[Ji],e),Or.d(Ht[++ln],Ht[++ln],e);else if(fn===256)break;this.a=Or.finish(),this.b=this.a.length;break;default:i("invalid compression type")}return this.a};function N(He,Be){this.length=He,this.Q=Be}var I=function(){function He(Ne){switch(e){case Ne===3:return[257,Ne-3,0];case Ne===4:return[258,Ne-4,0];case Ne===5:return[259,Ne-5,0];case Ne===6:return[260,Ne-6,0];case Ne===7:return[261,Ne-7,0];case Ne===8:return[262,Ne-8,0];case Ne===9:return[263,Ne-9,0];case Ne===10:return[264,Ne-10,0];case 12>=Ne:return[265,Ne-11,1];case 14>=Ne:return[266,Ne-13,1];case 16>=Ne:return[267,Ne-15,1];case 18>=Ne:return[268,Ne-17,1];case 22>=Ne:return[269,Ne-19,2];case 26>=Ne:return[270,Ne-23,2];case 30>=Ne:return[271,Ne-27,2];case 34>=Ne:return[272,Ne-31,2];case 42>=Ne:return[273,Ne-35,3];case 50>=Ne:return[274,Ne-43,3];case 58>=Ne:return[275,Ne-51,3];case 66>=Ne:return[276,Ne-59,3];case 82>=Ne:return[277,Ne-67,4];case 98>=Ne:return[278,Ne-83,4];case 114>=Ne:return[279,Ne-99,4];case 130>=Ne:return[280,Ne-115,4];case 162>=Ne:return[281,Ne-131,5];case 194>=Ne:return[282,Ne-163,5];case 226>=Ne:return[283,Ne-195,5];case 257>=Ne:return[284,Ne-227,5];case Ne===258:return[285,Ne-258,0];default:i("invalid length: "+Ne)}}var Be=[],Ge,Re;for(Ge=3;258>=Ge;Ge++)Re=He(Ge),Be[Ge]=Re[2]<<24|Re[1]<<16|Re[0];return Be}(),L=d?new Uint32Array(I):I;function Y(He,Be){function Ge(Or,Sn){var Ht=Or.Q,sr=[],Sr=0,Fr;Fr=L[Or.length],sr[Sr++]=Fr&65535,sr[Sr++]=Fr>>16&255,sr[Sr++]=Fr>>24;var gr;switch(e){case Ht===1:gr=[0,Ht-1,0];break;case Ht===2:gr=[1,Ht-2,0];break;case Ht===3:gr=[2,Ht-3,0];break;case Ht===4:gr=[3,Ht-4,0];break;case 6>=Ht:gr=[4,Ht-5,1];break;case 8>=Ht:gr=[5,Ht-7,1];break;case 12>=Ht:gr=[6,Ht-9,2];break;case 16>=Ht:gr=[7,Ht-13,2];break;case 24>=Ht:gr=[8,Ht-17,3];break;case 32>=Ht:gr=[9,Ht-25,3];break;case 48>=Ht:gr=[10,Ht-33,4];break;case 64>=Ht:gr=[11,Ht-49,4];break;case 96>=Ht:gr=[12,Ht-65,5];break;case 128>=Ht:gr=[13,Ht-97,5];break;case 192>=Ht:gr=[14,Ht-129,6];break;case 256>=Ht:gr=[15,Ht-193,6];break;case 384>=Ht:gr=[16,Ht-257,7];break;case 512>=Ht:gr=[17,Ht-385,7];break;case 768>=Ht:gr=[18,Ht-513,8];break;case 1024>=Ht:gr=[19,Ht-769,8];break;case 1536>=Ht:gr=[20,Ht-1025,9];break;case 2048>=Ht:gr=[21,Ht-1537,9];break;case 3072>=Ht:gr=[22,Ht-2049,10];break;case 4096>=Ht:gr=[23,Ht-3073,10];break;case 6144>=Ht:gr=[24,Ht-4097,11];break;case 8192>=Ht:gr=[25,Ht-6145,11];break;case 12288>=Ht:gr=[26,Ht-8193,12];break;case 16384>=Ht:gr=[27,Ht-12289,12];break;case 24576>=Ht:gr=[28,Ht-16385,13];break;case 32768>=Ht:gr=[29,Ht-24577,13];break;default:i("invalid distance")}Fr=gr,sr[Sr++]=Fr[0],sr[Sr++]=Fr[1],sr[Sr++]=Fr[2];var tn,Vn;for(tn=0,Vn=sr.length;tn<Vn;++tn)Dt[Gt++]=sr[tn];Jt[sr[0]]++,pr[sr[3]]++,or=Or.length+Sn-1,Nt=null}var Re,Ne,ze,et,it,at={},vt,jt,Nt,Dt=d?new Uint16Array(2*Be.length):[],Gt=0,or=0,Jt=new(d?Uint32Array:Array)(286),pr=new(d?Uint32Array:Array)(30),lr=He.I,Lr;if(!d){for(ze=0;285>=ze;)Jt[ze++]=0;for(ze=0;29>=ze;)pr[ze++]=0}for(Jt[256]=1,Re=0,Ne=Be.length;Re<Ne;++Re){for(ze=it=0,et=3;ze<et&&Re+ze!==Ne;++ze)it=it<<8|Be[Re+ze];if(at[it]===r&&(at[it]=[]),vt=at[it],!(0<or--)){for(;0<vt.length&&32768<Re-vt[0];)vt.shift();if(Re+3>=Ne){for(Nt&&Ge(Nt,-1),ze=0,et=Ne-Re;ze<et;++ze)Lr=Be[Re+ze],Dt[Gt++]=Lr,++Jt[Lr];break}0<vt.length?(jt=J(Be,Re,vt),Nt?Nt.length<jt.length?(Lr=Be[Re-1],Dt[Gt++]=Lr,++Jt[Lr],Ge(jt,0)):Ge(Nt,-1):jt.length<lr?Nt=jt:Ge(jt,0)):Nt?Ge(Nt,-1):(Lr=Be[Re],Dt[Gt++]=Lr,++Jt[Lr])}vt.push(Re)}return Dt[Gt++]=256,Jt[256]++,He.W=Jt,He.V=pr,d?Dt.subarray(0,Gt):Dt}function J(He,Be,Ge){var Re,Ne,ze=0,et,it,at,vt,jt=He.length;it=0,vt=Ge.length;e:for(;it<vt;it++){if(Re=Ge[vt-it-1],et=3,3<ze){for(at=ze;3<at;at--)if(He[Re+at-1]!==He[Be+at-1])continue e;et=ze}for(;258>et&&Be+et<jt&&He[Re+et]===He[Be+et];)++et;if(et>ze&&(Ne=Re,ze=et),et===258)break}return new N(ze,Be-Ne)}function ie(He,Be){var Ge=He.length,Re=new C(572),Ne=new(d?Uint8Array:Array)(Ge),ze,et,it,at,vt;if(!d)for(at=0;at<Ge;at++)Ne[at]=0;for(at=0;at<Ge;++at)0<He[at]&&Re.push(at,He[at]);if(ze=Array(Re.length/2),et=new(d?Uint32Array:Array)(Re.length/2),ze.length===1)return Ne[Re.pop().index]=1,Ne;for(at=0,vt=Re.length/2;at<vt;++at)ze[at]=Re.pop(),et[at]=ze[at].value;for(it=K(et,et.length,Be),at=0,vt=ze.length;at<vt;++at)Ne[ze[at].index]=it[at];return Ne}function K(He,Be,Ge){function Re(lr){var Lr=at[lr][vt[lr]];Lr===Be?(Re(lr+1),Re(lr+1)):--et[Lr],++vt[lr]}var Ne=new(d?Uint16Array:Array)(Ge),ze=new(d?Uint8Array:Array)(Ge),et=new(d?Uint8Array:Array)(Be),it=Array(Ge),at=Array(Ge),vt=Array(Ge),jt=(1<<Ge)-Be,Nt=1<<Ge-1,Dt,Gt,or,Jt,pr;for(Ne[Ge-1]=Be,Gt=0;Gt<Ge;++Gt)jt<Nt?ze[Gt]=0:(ze[Gt]=1,jt-=Nt),jt<<=1,Ne[Ge-2-Gt]=(Ne[Ge-1-Gt]/2|0)+Be;for(Ne[0]=ze[0],it[0]=Array(Ne[0]),at[0]=Array(Ne[0]),Gt=1;Gt<Ge;++Gt)Ne[Gt]>2*Ne[Gt-1]+ze[Gt]&&(Ne[Gt]=2*Ne[Gt-1]+ze[Gt]),it[Gt]=Array(Ne[Gt]),at[Gt]=Array(Ne[Gt]);for(Dt=0;Dt<Be;++Dt)et[Dt]=Ge;for(or=0;or<Ne[Ge-1];++or)it[Ge-1][or]=He[or],at[Ge-1][or]=or;for(Dt=0;Dt<Ge;++Dt)vt[Dt]=0;for(ze[Ge-1]===1&&(--et[0],++vt[Ge-1]),Gt=Ge-2;0<=Gt;--Gt){for(Jt=Dt=0,pr=vt[Gt+1],or=0;or<Ne[Gt];or++)Jt=it[Gt+1][pr]+it[Gt+1][pr+1],Jt>He[Dt]?(it[Gt][or]=Jt,at[Gt][or]=Be,pr+=2):(it[Gt][or]=He[Dt],at[Gt][or]=Dt,++Dt);vt[Gt]=0,ze[Gt]===1&&Re(Gt)}return et}function Q(He){var Be=new(d?Uint16Array:Array)(He.length),Ge=[],Re=[],Ne=0,ze,et,it,at;for(ze=0,et=He.length;ze<et;ze++)Ge[He[ze]]=(Ge[He[ze]]|0)+1;for(ze=1,et=16;ze<=et;ze++)Re[ze]=Ne,Ne+=Ge[ze]|0,Ne<<=1;for(ze=0,et=He.length;ze<et;ze++)for(Ne=Re[He[ze]],Re[He[ze]]+=1,it=Be[ze]=0,at=He[ze];it<at;it++)Be[ze]=Be[ze]<<1|Ne&1,Ne>>>=1;return Be}function ne(He,Be){this.input=He,this.b=this.c=0,this.i={},Be&&(Be.flags&&(this.i=Be.flags),typeof Be.filename=="string"&&(this.filename=Be.filename),typeof Be.comment=="string"&&(this.A=Be.comment),Be.deflateOptions&&(this.l=Be.deflateOptions)),this.l||(this.l={})}ne.prototype.g=function(){var He,Be,Ge,Re,Ne,ze,et,it,at=new(d?Uint8Array:Array)(32768),vt=0,jt=this.input,Nt=this.c,Dt=this.filename,Gt=this.A;if(at[vt++]=31,at[vt++]=139,at[vt++]=8,He=0,this.i.fname&&(He|=ge),this.i.fcomment&&(He|=ye),this.i.fhcrc&&(He|=fe),at[vt++]=He,Be=(Date.now?Date.now():+new Date)/1e3|0,at[vt++]=Be&255,at[vt++]=Be>>>8&255,at[vt++]=Be>>>16&255,at[vt++]=Be>>>24&255,at[vt++]=0,at[vt++]=ue,this.i.fname!==r){for(et=0,it=Dt.length;et<it;++et)ze=Dt.charCodeAt(et),255<ze&&(at[vt++]=ze>>>8&255),at[vt++]=ze&255;at[vt++]=0}if(this.i.comment){for(et=0,it=Gt.length;et<it;++et)ze=Gt.charCodeAt(et),255<ze&&(at[vt++]=ze>>>8&255),at[vt++]=ze&255;at[vt++]=0}return this.i.fhcrc&&(Ge=f(at,0,vt)&65535,at[vt++]=Ge&255,at[vt++]=Ge>>>8&255),this.l.outputBuffer=at,this.l.outputIndex=vt,Ne=new S(jt,this.l),at=Ne.g(),vt=Ne.b,d&&(vt+8>at.buffer.byteLength?(this.a=new Uint8Array(vt+8),this.a.set(new Uint8Array(at.buffer)),at=this.a):at=new Uint8Array(at.buffer)),Re=f(jt,r,r),at[vt++]=Re&255,at[vt++]=Re>>>8&255,at[vt++]=Re>>>16&255,at[vt++]=Re>>>24&255,it=jt.length,at[vt++]=it&255,at[vt++]=it>>>8&255,at[vt++]=it>>>16&255,at[vt++]=it>>>24&255,this.c=Nt,d&&vt<at.length&&(this.a=at=at.subarray(0,vt)),at};var ue=255,fe=2,ge=8,ye=16;s("Zlib.Gzip",ne),s("Zlib.Gzip.prototype.compress",ne.prototype.g);function pe(He,Be){switch(this.p=[],this.q=32768,this.e=this.j=this.c=this.u=0,this.input=d?new Uint8Array(He):He,this.w=!1,this.r=he,this.M=!1,(Be||!(Be={}))&&(Be.index&&(this.c=Be.index),Be.bufferSize&&(this.q=Be.bufferSize),Be.bufferType&&(this.r=Be.bufferType),Be.resize&&(this.M=Be.resize)),this.r){case de:this.b=32768,this.a=new(d?Uint8Array:Array)(32768+this.q+258);break;case he:this.b=0,this.a=new(d?Uint8Array:Array)(this.q),this.f=this.U,this.B=this.R,this.s=this.T;break;default:i(Error("invalid inflate mode"))}}var de=0,he=1,_e={O:de,N:he};pe.prototype.h=function(){for(;!this.w;){var He=pt(this,3);switch(He&1&&(this.w=e),He>>>=1,He){case 0:var Be=this.input,Ge=this.c,Re=this.a,Ne=this.b,ze=Be.length,et=r,it=r,at=Re.length,vt=r;switch(this.e=this.j=0,Ge+1>=ze&&i(Error("invalid uncompressed block header: LEN")),et=Be[Ge++]|Be[Ge++]<<8,Ge+1>=ze&&i(Error("invalid uncompressed block header: NLEN")),it=Be[Ge++]|Be[Ge++]<<8,et===~it&&i(Error("invalid uncompressed block header: length verify")),Ge+et>Be.length&&i(Error("input buffer is broken")),this.r){case de:for(;Ne+et>Re.length;){if(vt=at-Ne,et-=vt,d)Re.set(Be.subarray(Ge,Ge+vt),Ne),Ne+=vt,Ge+=vt;else for(;vt--;)Re[Ne++]=Be[Ge++];this.b=Ne,Re=this.f(),Ne=this.b}break;case he:for(;Ne+et>Re.length;)Re=this.f({F:2});break;default:i(Error("invalid inflate mode"))}if(d)Re.set(Be.subarray(Ge,Ge+et),Ne),Ne+=et,Ge+=et;else for(;et--;)Re[Ne++]=Be[Ge++];this.c=Ge,this.b=Ne,this.a=Re;break;case 1:this.s(dt,tt);break;case 2:Tt(this);break;default:i(Error("unknown BTYPE: "+He))}}return this.B()};var ve=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Z=d?new Uint16Array(ve):ve,be=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],Ee=d?new Uint16Array(be):be,De=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],Fe=d?new Uint8Array(De):De,Ue=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],Qe=d?new Uint16Array(Ue):Ue,Ke=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Te=d?new Uint8Array(Ke):Ke,Ie=new(d?Uint8Array:Array)(288),ke,nt;for(ke=0,nt=Ie.length;ke<nt;++ke)Ie[ke]=143>=ke?8:255>=ke?9:279>=ke?7:8;var dt=E(Ie),yt=new(d?Uint8Array:Array)(30),gt,xt;for(gt=0,xt=yt.length;gt<xt;++gt)yt[gt]=5;var tt=E(yt);function pt(He,Be){for(var Ge=He.j,Re=He.e,Ne=He.input,ze=He.c,et=Ne.length,it;Re<Be;)ze>=et&&i(Error("input buffer is broken")),Ge|=Ne[ze++]<<Re,Re+=8;return it=Ge&(1<<Be)-1,He.j=Ge>>>Be,He.e=Re-Be,He.c=ze,it}function At(He,Be){for(var Ge=He.j,Re=He.e,Ne=He.input,ze=He.c,et=Ne.length,it=Be[0],at=Be[1],vt,jt;Re<at&&!(ze>=et);)Ge|=Ne[ze++]<<Re,Re+=8;return vt=it[Ge&(1<<at)-1],jt=vt>>>16,He.j=Ge>>jt,He.e=Re-jt,He.c=ze,vt&65535}function Tt(He){function Be(jt,Nt,Dt){var Gt,or=this.J,Jt,pr;for(pr=0;pr<jt;)switch(Gt=At(this,Nt),Gt){case 16:for(Jt=3+pt(this,2);Jt--;)Dt[pr++]=or;break;case 17:for(Jt=3+pt(this,3);Jt--;)Dt[pr++]=0;or=0;break;case 18:for(Jt=11+pt(this,7);Jt--;)Dt[pr++]=0;or=0;break;default:or=Dt[pr++]=Gt}return this.J=or,Dt}var Ge=pt(He,5)+257,Re=pt(He,5)+1,Ne=pt(He,4)+4,ze=new(d?Uint8Array:Array)(Z.length),et,it,at,vt;for(vt=0;vt<Ne;++vt)ze[Z[vt]]=pt(He,3);if(!d)for(vt=Ne,Ne=ze.length;vt<Ne;++vt)ze[Z[vt]]=0;et=E(ze),it=new(d?Uint8Array:Array)(Ge),at=new(d?Uint8Array:Array)(Re),He.J=0,He.s(E(Be.call(He,Ge,et,it)),E(Be.call(He,Re,et,at)))}pe.prototype.s=function(He,Be){var Ge=this.a,Re=this.b;this.C=He;for(var Ne=Ge.length-258,ze,et,it,at;(ze=At(this,He))!==256;)if(256>ze)Re>=Ne&&(this.b=Re,Ge=this.f(),Re=this.b),Ge[Re++]=ze;else for(et=ze-257,at=Ee[et],0<Fe[et]&&(at+=pt(this,Fe[et])),ze=At(this,Be),it=Qe[ze],0<Te[ze]&&(it+=pt(this,Te[ze])),Re>=Ne&&(this.b=Re,Ge=this.f(),Re=this.b);at--;)Ge[Re]=Ge[Re++-it];for(;8<=this.e;)this.e-=8,this.c--;this.b=Re},pe.prototype.T=function(He,Be){var Ge=this.a,Re=this.b;this.C=He;for(var Ne=Ge.length,ze,et,it,at;(ze=At(this,He))!==256;)if(256>ze)Re>=Ne&&(Ge=this.f(),Ne=Ge.length),Ge[Re++]=ze;else for(et=ze-257,at=Ee[et],0<Fe[et]&&(at+=pt(this,Fe[et])),ze=At(this,Be),it=Qe[ze],0<Te[ze]&&(it+=pt(this,Te[ze])),Re+at>Ne&&(Ge=this.f(),Ne=Ge.length);at--;)Ge[Re]=Ge[Re++-it];for(;8<=this.e;)this.e-=8,this.c--;this.b=Re},pe.prototype.f=function(){var He=new(d?Uint8Array:Array)(this.b-32768),Be=this.b-32768,Ge,Re,Ne=this.a;if(d)He.set(Ne.subarray(32768,He.length));else for(Ge=0,Re=He.length;Ge<Re;++Ge)He[Ge]=Ne[Ge+32768];if(this.p.push(He),this.u+=He.length,d)Ne.set(Ne.subarray(Be,Be+32768));else for(Ge=0;32768>Ge;++Ge)Ne[Ge]=Ne[Be+Ge];return this.b=32768,Ne},pe.prototype.U=function(He){var Be,Ge=this.input.length/this.c+1|0,Re,Ne,ze,et=this.input,it=this.a;return He&&(typeof He.F=="number"&&(Ge=He.F),typeof He.P=="number"&&(Ge+=He.P)),2>Ge?(Re=(et.length-this.c)/this.C[2],ze=258*(Re/2)|0,Ne=ze<it.length?it.length+ze:it.length<<1):Ne=it.length*Ge,d?(Be=new Uint8Array(Ne),Be.set(it)):Be=it,this.a=Be},pe.prototype.B=function(){var He=0,Be=this.a,Ge=this.p,Re,Ne=new(d?Uint8Array:Array)(this.u+(this.b-32768)),ze,et,it,at;if(Ge.length===0)return d?this.a.subarray(32768,this.b):this.a.slice(32768,this.b);for(ze=0,et=Ge.length;ze<et;++ze)for(Re=Ge[ze],it=0,at=Re.length;it<at;++it)Ne[He++]=Re[it];for(ze=32768,et=this.b;ze<et;++ze)Ne[He++]=Be[ze];return this.p=[],this.buffer=Ne},pe.prototype.R=function(){var He,Be=this.b;return d?this.M?(He=new Uint8Array(Be),He.set(this.a.subarray(0,Be))):He=this.a.subarray(0,Be):(this.a.length>Be&&(this.a.length=Be),He=this.a),this.buffer=He};function Ct(He){this.input=He,this.c=0,this.t=[],this.D=!1}Ct.prototype.X=function(){return this.D||this.h(),this.t.slice()},Ct.prototype.h=function(){for(var He=this.input.length;this.c<He;){var Be=new w,Ge=r,Re=r,Ne=r,ze=r,et=r,it=r,at=r,vt=r,jt=r,Nt=this.input,Dt=this.c;switch(Be.G=Nt[Dt++],Be.H=Nt[Dt++],(Be.G!==31||Be.H!==139)&&i(Error("invalid file signature:"+Be.G+","+Be.H)),Be.z=Nt[Dt++],Be.z){case 8:break;default:i(Error("unknown compression method: "+Be.z))}if(Be.n=Nt[Dt++],vt=Nt[Dt++]|Nt[Dt++]<<8|Nt[Dt++]<<16|Nt[Dt++]<<24,Be.Z=new Date(1e3*vt),Be.fa=Nt[Dt++],Be.ea=Nt[Dt++],0<(Be.n&4)&&(Be.aa=Nt[Dt++]|Nt[Dt++]<<8,Dt+=Be.aa),0<(Be.n&ge)){for(at=[],it=0;0<(et=Nt[Dt++]);)at[it++]=String.fromCharCode(et);Be.name=at.join("")}if(0<(Be.n&ye)){for(at=[],it=0;0<(et=Nt[Dt++]);)at[it++]=String.fromCharCode(et);Be.A=at.join("")}0<(Be.n&fe)&&(Be.S=f(Nt,0,Dt)&65535,Be.S!==(Nt[Dt++]|Nt[Dt++]<<8)&&i(Error("invalid header crc16"))),Ge=Nt[Nt.length-4]|Nt[Nt.length-3]<<8|Nt[Nt.length-2]<<16|Nt[Nt.length-1]<<24,Nt.length-Dt-4-4<512*Ge&&(ze=Ge),Re=new pe(Nt,{index:Dt,bufferSize:ze}),Be.data=Ne=Re.h(),Dt=Re.c,Be.ca=jt=(Nt[Dt++]|Nt[Dt++]<<8|Nt[Dt++]<<16|Nt[Dt++]<<24)>>>0,f(Ne,r,r)!==jt&&i(Error("invalid CRC-32 checksum: 0x"+f(Ne,r,r).toString(16)+" / 0x"+jt.toString(16))),Be.da=Ge=(Nt[Dt++]|Nt[Dt++]<<8|Nt[Dt++]<<16|Nt[Dt++]<<24)>>>0,(Ne.length&4294967295)!==Ge&&i(Error("invalid input size: "+(Ne.length&4294967295)+" / "+Ge)),this.t.push(Be),this.c=Dt}this.D=e;var Gt=this.t,or,Jt,pr=0,lr=0,Lr;for(or=0,Jt=Gt.length;or<Jt;++or)lr+=Gt[or].data.length;if(d)for(Lr=new Uint8Array(lr),or=0;or<Jt;++or)Lr.set(Gt[or].data,pr),pr+=Gt[or].data.length;else{for(Lr=[],or=0;or<Jt;++or)Lr[or]=Gt[or].data;Lr=Array.prototype.concat.apply([],Lr)}return Lr},s("Zlib.Gunzip",Ct),s("Zlib.Gunzip.prototype.decompress",Ct.prototype.h),s("Zlib.Gunzip.prototype.getMembers",Ct.prototype.X);function Bt(He){if(typeof He=="string"){var Be=He.split(""),Ge,Re;for(Ge=0,Re=Be.length;Ge<Re;Ge++)Be[Ge]=(Be[Ge].charCodeAt(0)&255)>>>0;He=Be}for(var Ne=1,ze=0,et=He.length,it,at=0;0<et;){it=1024<et?1024:et,et-=it;do Ne+=He[at++],ze+=Ne;while(--it);Ne%=65521,ze%=65521}return(ze<<16|Ne)>>>0}function nr(He,Be){var Ge,Re;switch(this.input=He,this.c=0,(Be||!(Be={}))&&(Be.index&&(this.c=Be.index),Be.verify&&(this.$=Be.verify)),Ge=He[this.c++],Re=He[this.c++],Ge&15){case $t:this.method=$t;break;default:i(Error("unsupported compression method"))}((Ge<<8)+Re)%31!==0&&i(Error("invalid fcheck flag:"+((Ge<<8)+Re)%31)),Re&32&&i(Error("fdict flag is not supported")),this.L=new pe(He,{index:this.c,bufferSize:Be.bufferSize,bufferType:Be.bufferType,resize:Be.resize})}nr.prototype.h=function(){var He=this.input,Be,Ge;return Be=this.L.h(),this.c=this.L.c,this.$&&(Ge=(He[this.c++]<<24|He[this.c++]<<16|He[this.c++]<<8|He[this.c++])>>>0,Ge!==Bt(Be)&&i(Error("invalid adler-32 checksum"))),Be};var $t=8;function It(He,Be){this.input=He,this.a=new(d?Uint8Array:Array)(32768),this.k=Lt.o;var Ge={},Re;(Be||!(Be={}))&&typeof Be.compressionType=="number"&&(this.k=Be.compressionType);for(Re in Be)Ge[Re]=Be[Re];Ge.outputBuffer=this.a,this.K=new S(this.input,Ge)}var Lt=A;It.prototype.g=function(){var He,Be,Ge,Re,Ne,ze,et,it=0;switch(et=this.a,He=$t,He){case $t:Be=Math.LOG2E*Math.log(32768)-8;break;default:i(Error("invalid compression method"))}switch(Ge=Be<<4|He,et[it++]=Ge,He){case $t:switch(this.k){case Lt.NONE:Ne=0;break;case Lt.v:Ne=1;break;case Lt.o:Ne=2;break;default:i(Error("unsupported compression type"))}break;default:i(Error("invalid compression method"))}return Re=Ne<<6|0,et[it++]=Re|31-(256*Ge+Re)%31,ze=Bt(this.input),this.K.b=it,et=this.K.g(),it=et.length,d&&(et=new Uint8Array(et.buffer),et.length<=it+4&&(this.a=new Uint8Array(et.length+4),this.a.set(et),et=this.a),et=et.subarray(0,it+4)),et[it++]=ze>>24&255,et[it++]=ze>>16&255,et[it++]=ze>>8&255,et[it++]=ze&255,et};function Pt(He,Be){var Ge,Re,Ne,ze;if(Object.keys)Ge=Object.keys(Be);else for(Re in Ge=[],Ne=0,Be)Ge[Ne++]=Re;for(Ne=0,ze=Ge.length;Ne<ze;++Ne)Re=Ge[Ne],s(He+"."+Re,Be[Re])}s("Zlib.Inflate",nr),s("Zlib.Inflate.prototype.decompress",nr.prototype.h),Pt("Zlib.Inflate.BufferType",{ADAPTIVE:_e.N,BLOCK:_e.O}),s("Zlib.Deflate",It),s("Zlib.Deflate.compress",function(He,Be){return new It(He,Be).g()}),s("Zlib.Deflate.prototype.compress",It.prototype.g),Pt("Zlib.Deflate.CompressionType",{NONE:Lt.NONE,FIXED:Lt.v,DYNAMIC:Lt.o})}).call(F);var G=F.Zlib,X;(function(){var i={},r={};(function(e){if(typeof i=="object"&&typeof r<"u")r.exports=e();else if(typeof define=="function"&&define.amd)define([],e);else{var o;o=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this,o.React=e()}})(function(){return function e(o,s,d){function p(_,v){if(!s[_]){if(!o[_]){var c=void 0;if(!v&&c)return c(_,!0);if(x)return x(_,!0);var h=new Error("Cannot find __module__ '"+_+"'");throw h.code="__module___NOT_FOUND",h}var f=s[_]={exports:{}};o[_][0].call(f.exports,function(m){var b=o[_][1][m];return p(b||m)},f,f.exports,e,o,s,d)}return s[_].exports}for(var x=void 0,l=0;l<d.length;l++)p(d[l]);return p}({1:[function(e,o,s){"use strict";function d(l){var _={"=":"=0",":":"=2"};return"$"+(""+l).replace(/[=:]/g,function(v){return _[v]})}function p(l){var _=/(=0|=2)/g,v={"=0":"=","=2":":"};return(""+(l[0]==="."&&l[1]==="$"?l.substring(2):l.substring(1))).replace(_,function(c){return v[c]})}var x={escape:d,unescape:p};o.exports=x},{}],2:[function(e,o,s){"use strict";var d=e(19),p=(e(24),function(m){var b=this;if(b.instancePool.length){var w=b.instancePool.pop();return b.call(w,m),w}return new b(m)}),x=function(m,b){var w=this;if(w.instancePool.length){var C=w.instancePool.pop();return w.call(C,m,b),C}return new w(m,b)},l=function(m,b,w){var C=this;if(C.instancePool.length){var E=C.instancePool.pop();return C.call(E,m,b,w),E}return new C(m,b,w)},_=function(m,b,w,C){var E=this;if(E.instancePool.length){var S=E.instancePool.pop();return E.call(S,m,b,w,C),S}return new E(m,b,w,C)},v=function(m){var b=this;m instanceof b||d("25"),m.destructor(),b.instancePool.length<b.poolSize&&b.instancePool.push(m)},c=p,h=function(m,b){var w=m;return w.instancePool=[],w.getPooled=b||c,w.poolSize||(w.poolSize=10),w.release=v,w},f={addPoolingTo:h,oneArgumentPooler:p,twoArgumentPooler:x,threeArgumentPooler:l,fourArgumentPooler:_};o.exports=f},{19:19,24:24}],3:[function(e,o,s){"use strict";var d=e(26),p=e(4),x=e(5),l=e(7),_=e(8),v=e(11),c=e(13),h=e(15),f=e(18),m=_.createElement,b=_.createFactory,w=_.cloneElement,C=d,E=function(M){return M},S={Children:{map:x.map,forEach:x.forEach,count:x.count,toArray:x.toArray,only:f},Component:p.Component,PureComponent:p.PureComponent,createElement:m,cloneElement:w,isValidElement:_.isValidElement,PropTypes:v,createClass:h,createFactory:b,createMixin:E,DOM:l,version:c,__spread:C};o.exports=S},{11:11,13:13,15:15,18:18,26:26,4:4,5:5,7:7,8:8}],4:[function(e,o,s){"use strict";function d(h,f,m){this.props=h,this.context=f,this.refs=c,this.updater=m||v}function p(h,f,m){this.props=h,this.context=f,this.refs=c,this.updater=m||v}function x(){}var l=e(19),_=e(26),v=e(10),c=(e(14),e(23));e(24),e(17),d.prototype.isReactComponent={},d.prototype.setState=function(h,f){typeof h!="object"&&typeof h!="function"&&h!=null&&l("85"),this.updater.enqueueSetState(this,h),f&&this.updater.enqueueCallback(this,f,"setState")},d.prototype.forceUpdate=function(h){this.updater.enqueueForceUpdate(this),h&&this.updater.enqueueCallback(this,h,"forceUpdate")},x.prototype=d.prototype,p.prototype=new x,p.prototype.constructor=p,_(p.prototype,d.prototype),p.prototype.isPureReactComponent=!0,o.exports={Component:d,PureComponent:p}},{10:10,14:14,17:17,19:19,23:23,24:24,26:26}],5:[function(e,o,s){"use strict";function d(N){return(""+N).replace(R,"$&/")}function p(N,I){this.func=N,this.context=I,this.count=0}function x(N,I,L){var Y=N.func,J=N.context;Y.call(J,I,N.count++)}function l(N,I,L){if(N==null)return N;var Y=p.getPooled(I,L);S(N,x,Y),p.release(Y)}function _(N,I,L,Y){this.result=N,this.keyPrefix=I,this.func=L,this.context=Y,this.count=0}function v(N,I,L){var Y=N.result,J=N.keyPrefix,ie=N.func,K=N.context,Q=ie.call(K,I,N.count++);Array.isArray(Q)?c(Q,Y,L,E.thatReturnsArgument):Q!=null&&(C.isValidElement(Q)&&(Q=C.cloneAndReplaceKey(Q,J+(!Q.key||I&&I.key===Q.key?"":d(Q.key)+"/")+L)),Y.push(Q))}function c(N,I,L,Y,J){var ie="";L!=null&&(ie=d(L)+"/");var K=_.getPooled(I,ie,Y,J);S(N,v,K),_.release(K)}function h(N,I,L){if(N==null)return N;var Y=[];return c(N,Y,null,I,L),Y}function f(N,I,L){return null}function m(N,I){return S(N,f,null)}function b(N){var I=[];return c(N,I,null,E.thatReturnsArgument),I}var w=e(2),C=e(8),E=e(22),S=e(20),M=w.twoArgumentPooler,A=w.fourArgumentPooler,R=/\/+/g;p.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},w.addPoolingTo(p,M),_.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},w.addPoolingTo(_,A);var D={forEach:l,map:h,mapIntoWithKeyPrefixInternal:c,count:m,toArray:b};o.exports=D},{2:2,20:20,22:22,8:8}],6:[function(e,o,s){"use strict";var d={current:null};o.exports=d},{}],7:[function(e,o,s){"use strict";var d=e(8),p=d.createFactory,x={a:p("a"),abbr:p("abbr"),address:p("address"),area:p("area"),article:p("article"),aside:p("aside"),audio:p("audio"),b:p("b"),base:p("base"),bdi:p("bdi"),bdo:p("bdo"),big:p("big"),blockquote:p("blockquote"),body:p("body"),br:p("br"),button:p("button"),canvas:p("canvas"),caption:p("caption"),cite:p("cite"),code:p("code"),col:p("col"),colgroup:p("colgroup"),data:p("data"),datalist:p("datalist"),dd:p("dd"),del:p("del"),details:p("details"),dfn:p("dfn"),dialog:p("dialog"),div:p("div"),dl:p("dl"),dt:p("dt"),em:p("em"),embed:p("embed"),fieldset:p("fieldset"),figcaption:p("figcaption"),figure:p("figure"),footer:p("footer"),form:p("form"),h1:p("h1"),h2:p("h2"),h3:p("h3"),h4:p("h4"),h5:p("h5"),h6:p("h6"),head:p("head"),header:p("header"),hgroup:p("hgroup"),hr:p("hr"),html:p("html"),i:p("i"),iframe:p("iframe"),img:p("img"),input:p("input"),ins:p("ins"),kbd:p("kbd"),keygen:p("keygen"),label:p("label"),legend:p("legend"),li:p("li"),link:p("link"),main:p("main"),map:p("map"),mark:p("mark"),menu:p("menu"),menuitem:p("menuitem"),meta:p("meta"),meter:p("meter"),nav:p("nav"),noscript:p("noscript"),object:p("object"),ol:p("ol"),optgroup:p("optgroup"),option:p("option"),output:p("output"),p:p("p"),param:p("param"),picture:p("picture"),pre:p("pre"),progress:p("progress"),q:p("q"),rp:p("rp"),rt:p("rt"),ruby:p("ruby"),s:p("s"),samp:p("samp"),script:p("script"),section:p("section"),select:p("select"),small:p("small"),source:p("source"),span:p("span"),strong:p("strong"),style:p("style"),sub:p("sub"),summary:p("summary"),sup:p("sup"),table:p("table"),tbody:p("tbody"),td:p("td"),textarea:p("textarea"),tfoot:p("tfoot"),th:p("th"),thead:p("thead"),time:p("time"),title:p("title"),tr:p("tr"),track:p("track"),u:p("u"),ul:p("ul"),var:p("var"),video:p("video"),wbr:p("wbr"),circle:p("circle"),clipPath:p("clipPath"),defs:p("defs"),ellipse:p("ellipse"),g:p("g"),image:p("image"),line:p("line"),linearGradient:p("linearGradient"),mask:p("mask"),path:p("path"),pattern:p("pattern"),polygon:p("polygon"),polyline:p("polyline"),radialGradient:p("radialGradient"),rect:p("rect"),stop:p("stop"),svg:p("svg"),text:p("text"),tspan:p("tspan")};o.exports=x},{8:8}],8:[function(e,o,s){"use strict";function d(f){return f.ref!==void 0}function p(f){return f.key!==void 0}var x=e(26),l=e(6),_=(e(25),e(14),Object.prototype.hasOwnProperty),v=e(9),c={key:!0,ref:!0,__self:!0,__source:!0},h=function(f,m,b,w,C,E,S){return{$$typeof:v,type:f,key:m,ref:b,props:S,_owner:E}};h.createElement=function(f,m,b){var w,C={},E=null,S=null;if(m!=null){d(m)&&(S=m.ref),p(m)&&(E=""+m.key),m.__self===void 0||m.__self,m.__source===void 0||m.__source;for(w in m)_.call(m,w)&&!c.hasOwnProperty(w)&&(C[w]=m[w])}var M=arguments.length-2;if(M===1)C.children=b;else if(M>1){for(var A=Array(M),R=0;R<M;R++)A[R]=arguments[R+2];C.children=A}if(f&&f.defaultProps){var D=f.defaultProps;for(w in D)C[w]===void 0&&(C[w]=D[w])}return h(f,E,S,0,0,l.current,C)},h.createFactory=function(f){var m=h.createElement.bind(null,f);return m.type=f,m},h.cloneAndReplaceKey=function(f,m){return h(f.type,m,f.ref,f._self,f._source,f._owner,f.props)},h.cloneElement=function(f,m,b){var w,C=x({},f.props),E=f.key,S=f.ref,M=(f._self,f._source,f._owner);if(m!=null){d(m)&&(S=m.ref,M=l.current),p(m)&&(E=""+m.key);var A;f.type&&f.type.defaultProps&&(A=f.type.defaultProps);for(w in m)_.call(m,w)&&!c.hasOwnProperty(w)&&(m[w]===void 0&&A!==void 0?C[w]=A[w]:C[w]=m[w])}var R=arguments.length-2;if(R===1)C.children=b;else if(R>1){for(var D=Array(R),N=0;N<R;N++)D[N]=arguments[N+2];C.children=D}return h(f.type,E,S,0,0,M,C)},h.isValidElement=function(f){return typeof f=="object"&&f!==null&&f.$$typeof===v},o.exports=h},{14:14,25:25,26:26,6:6,9:9}],9:[function(e,o,s){"use strict";var d=typeof Symbol=="function"&&Symbol.for&&Symbol.for("react.element")||60103;o.exports=d},{}],10:[function(e,o,s){"use strict";var d=(e(25),{isMounted:function(p){return!1},enqueueCallback:function(p,x){},enqueueForceUpdate:function(p){},enqueueReplaceState:function(p,x){},enqueueSetState:function(p,x){}});o.exports=d},{25:25}],11:[function(e,o,s){"use strict";var d=e(8),p=d.isValidElement,x=e(28);o.exports=x(p)},{28:28,8:8}],12:[function(e,o,s){"use strict";var d=e(26),p=e(3),x=d(p,{__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:e(6)}});o.exports=x},{26:26,3:3,6:6}],13:[function(e,o,s){"use strict";o.exports="15.6.1"},{}],14:[function(e,o,s){"use strict";o.exports=!1},{}],15:[function(e,o,s){"use strict";var d=e(4),p=d.Component,x=e(8),l=x.isValidElement,_=e(10),v=e(21);o.exports=v(p,l,_)},{10:10,21:21,4:4,8:8}],16:[function(e,o,s){"use strict";function d(l){var _=l&&(p&&l[p]||l[x]);if(typeof _=="function")return _}var p=typeof Symbol=="function"&&Symbol.iterator,x="@@iterator";o.exports=d},{}],17:[function(e,o,s){"use strict";var d=function(){};o.exports=d},{}],18:[function(e,o,s){"use strict";function d(l){return x.isValidElement(l)||p("143"),l}var p=e(19),x=e(8);e(24),o.exports=d},{19:19,24:24,8:8}],19:[function(e,o,s){"use strict";function d(p){for(var x=arguments.length-1,l="Minified React error #"+p+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+p,_=0;_<x;_++)l+="&args[]="+encodeURIComponent(arguments[_+1]);l+=" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";var v=new Error(l);throw v.name="Invariant Violation",v.framesToPop=1,v}o.exports=d},{}],20:[function(e,o,s){"use strict";function d(m,b){return m&&typeof m=="object"&&m.key!=null?c.escape(m.key):b.toString(36)}function p(m,b,w,C){var E=typeof m;if(E!=="undefined"&&E!=="boolean"||(m=null),m===null||E==="string"||E==="number"||E==="object"&&m.$$typeof===_)return w(C,m,b===""?h+d(m,0):b),1;var S,M,A=0,R=b===""?h:b+f;if(Array.isArray(m))for(var D=0;D<m.length;D++)S=m[D],M=R+d(S,D),A+=p(S,M,w,C);else{var N=v(m);if(N){var I,L=N.call(m);if(N!==m.entries)for(var Y=0;!(I=L.next()).done;)S=I.value,M=R+d(S,Y++),A+=p(S,M,w,C);else for(;!(I=L.next()).done;){var J=I.value;J&&(S=J[1],M=R+c.escape(J[0])+f+d(S,0),A+=p(S,M,w,C))}}else if(E==="object"){var ie=String(m);l("31",ie==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":ie,"")}}return A}function x(m,b,w){return m==null?0:p(m,"",b,w)}var l=e(19),_=(e(6),e(9)),v=e(16),c=(e(24),e(1)),h=(e(25),"."),f=":";o.exports=x},{1:1,16:16,19:19,24:24,25:25,6:6,9:9}],21:[function(e,o,s){"use strict";function d(c){return c}function p(c,h,f){function m(K,Q){var ne=N.hasOwnProperty(Q)?N[Q]:null;J.hasOwnProperty(Q)&&_(ne==="OVERRIDE_BASE","ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",Q),K&&_(ne==="DEFINE_MANY"||ne==="DEFINE_MANY_MERGED","ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",Q)}function b(K,Q){if(Q){_(typeof Q!="function","ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),_(!h(Q),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var ne=K.prototype,ue=ne.__reactAutoBindPairs;Q.hasOwnProperty(v)&&I.mixins(K,Q.mixins);for(var fe in Q)if(Q.hasOwnProperty(fe)&&fe!==v){var ge=Q[fe],ye=ne.hasOwnProperty(fe);if(m(ye,fe),I.hasOwnProperty(fe))I[fe](K,ge);else{var pe=N.hasOwnProperty(fe),de=typeof ge=="function",he=de&&!pe&&!ye&&Q.autobind!==!1;if(he)ue.push(fe,ge),ne[fe]=ge;else if(ye){var _e=N[fe];_(pe&&(_e==="DEFINE_MANY_MERGED"||_e==="DEFINE_MANY"),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",_e,fe),_e==="DEFINE_MANY_MERGED"?ne[fe]=E(ne[fe],ge):_e==="DEFINE_MANY"&&(ne[fe]=S(ne[fe],ge))}else ne[fe]=ge}}}}function w(K,Q){if(Q)for(var ne in Q){var ue=Q[ne];if(Q.hasOwnProperty(ne)){var fe=ne in I;_(!fe,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',ne);var ge=ne in K;_(!ge,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",ne),K[ne]=ue}}}function C(K,Q){_(K&&Q&&typeof K=="object"&&typeof Q=="object","mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var ne in Q)Q.hasOwnProperty(ne)&&(_(K[ne]===void 0,"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",ne),K[ne]=Q[ne]);return K}function E(K,Q){return function(){var ne=K.apply(this,arguments),ue=Q.apply(this,arguments);if(ne==null)return ue;if(ue==null)return ne;var fe={};return C(fe,ne),C(fe,ue),fe}}function S(K,Q){return function(){K.apply(this,arguments),Q.apply(this,arguments)}}function M(K,Q){var ne=Q.bind(K);return ne}function A(K){for(var Q=K.__reactAutoBindPairs,ne=0;ne<Q.length;ne+=2){var ue=Q[ne],fe=Q[ne+1];K[ue]=M(K,fe)}}function R(K){var Q=function(ue,fe,ge){this.__reactAutoBindPairs.length&&A(this),this.props=ue,this.context=fe,this.refs=l,this.updater=ge||f,this.state=null;var ye=this.getInitialState?this.getInitialState():null;_(typeof ye=="object"&&!Array.isArray(ye),"%s.getInitialState(): must return an object or null",Q.displayName||"ReactCompositeComponent"),this.state=ye};Q.prototype=new ie,Q.prototype.constructor=Q,Q.prototype.__reactAutoBindPairs=[],D.forEach(b.bind(null,Q)),b(Q,L),b(Q,K),b(Q,Y),Q.getDefaultProps&&(Q.defaultProps=Q.getDefaultProps()),_(Q.prototype.render,"createClass(...): Class specification must implement a `render` method.");for(var ne in N)Q.prototype[ne]||(Q.prototype[ne]=null);return Q}var D=[],N={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},I={displayName:function(K,Q){K.displayName=Q},mixins:function(K,Q){if(Q)for(var ne=0;ne<Q.length;ne++)b(K,Q[ne])},childContextTypes:function(K,Q){K.childContextTypes=x({},K.childContextTypes,Q)},contextTypes:function(K,Q){K.contextTypes=x({},K.contextTypes,Q)},getDefaultProps:function(K,Q){K.getDefaultProps?K.getDefaultProps=E(K.getDefaultProps,Q):K.getDefaultProps=Q},propTypes:function(K,Q){K.propTypes=x({},K.propTypes,Q)},statics:function(K,Q){w(K,Q)},autobind:function(){}},L={componentDidMount:function(){this.__isMounted=!0}},Y={componentWillUnmount:function(){this.__isMounted=!1}},J={replaceState:function(K,Q){this.updater.enqueueReplaceState(this,K,Q)},isMounted:function(){return!!this.__isMounted}},ie=function(){};return x(ie.prototype,c.prototype,J),R}var x=e(26),l=e(23),_=e(24),v="mixins";o.exports=p},{23:23,24:24,25:25,26:26}],22:[function(e,o,s){"use strict";function d(x){return function(){return x}}var p=function(){};p.thatReturns=d,p.thatReturnsFalse=d(!1),p.thatReturnsTrue=d(!0),p.thatReturnsNull=d(null),p.thatReturnsThis=function(){return this},p.thatReturnsArgument=function(x){return x},o.exports=p},{}],23:[function(e,o,s){"use strict";var d={};o.exports=d},{}],24:[function(e,o,s){"use strict";function d(x,l,_,v,c,h,f,m){if(p(l),!x){var b;if(l===void 0)b=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var w=[_,v,c,h,f,m],C=0;b=new Error(l.replace(/%s/g,function(){return w[C++]})),b.name="Invariant Violation"}throw b.framesToPop=1,b}}var p=function(x){};o.exports=d},{}],25:[function(e,o,s){"use strict";var d=e(22),p=d;o.exports=p},{22:22}],26:[function(e,o,s){"use strict";function d(_){if(_==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(_)}var p=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable;o.exports=function(){try{if(!Object.assign)return!1;var _=new String("abc");if(_[5]="de",Object.getOwnPropertyNames(_)[0]==="5")return!1;for(var v={},c=0;c<10;c++)v["_"+String.fromCharCode(c)]=c;if(Object.getOwnPropertyNames(v).map(function(f){return v[f]}).join("")!=="0123456789")return!1;var h={};return"abcdefghijklmnopqrst".split("").forEach(function(f){h[f]=f}),Object.keys(Object.assign({},h)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(_,v){for(var c,h,f=d(_),m=1;m<arguments.length;m++){c=Object(arguments[m]);for(var b in c)x.call(c,b)&&(f[b]=c[b]);if(p){h=p(c);for(var w=0;w<h.length;w++)l.call(c,h[w])&&(f[h[w]]=c[h[w]])}}return f}},{}],27:[function(e,o,s){"use strict";function d(p,x,l,_,v){}o.exports=d},{24:24,25:25,30:30}],28:[function(e,o,s){"use strict";var d=e(29);o.exports=function(p){return d(p,!1)}},{29:29}],29:[function(e,o,s){"use strict";var d=e(22),p=e(24),x=e(25),l=e(30),_=e(27);o.exports=function(v,c){function h(ue){var fe=ue&&(ie&&ue[ie]||ue[K]);if(typeof fe=="function")return fe}function f(ue,fe){return ue===fe?ue!==0||1/ue==1/fe:ue!==ue&&fe!==fe}function m(ue){this.message=ue,this.stack=""}function b(ue){function fe(ye,pe,de,he,_e,ve,Z){return he=he||Q,ve=ve||de,Z!==l&&c&&p(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types"),pe[de]==null?ye?new m(pe[de]===null?"The "+_e+" `"+ve+"` is marked as required in `"+he+"`, but its value is `null`.":"The "+_e+" `"+ve+"` is marked as required in `"+he+"`, but its value is `undefined`."):null:ue(pe,de,he,_e,ve)}var ge=fe.bind(null,!1);return ge.isRequired=fe.bind(null,!0),ge}function w(ue){function fe(ge,ye,pe,de,he,_e){var ve=ge[ye];return I(ve)!==ue?new m("Invalid "+de+" `"+he+"` of type `"+L(ve)+"` supplied to `"+pe+"`, expected `"+ue+"`."):null}return b(fe)}function C(ue){function fe(ge,ye,pe,de,he){if(typeof ue!="function")return new m("Property `"+he+"` of component `"+pe+"` has invalid PropType notation inside arrayOf.");var _e=ge[ye];if(!Array.isArray(_e))return new m("Invalid "+de+" `"+he+"` of type `"+I(_e)+"` supplied to `"+pe+"`, expected an array.");for(var ve=0;ve<_e.length;ve++){var Z=ue(_e,ve,pe,de,he+"["+ve+"]",l);if(Z instanceof Error)return Z}return null}return b(fe)}function E(ue){function fe(ge,ye,pe,de,he){if(!(ge[ye]instanceof ue)){var _e=ue.name||Q;return new m("Invalid "+de+" `"+he+"` of type `"+J(ge[ye])+"` supplied to `"+pe+"`, expected instance of `"+_e+"`.")}return null}return b(fe)}function S(ue){function fe(ge,ye,pe,de,he){for(var _e=ge[ye],ve=0;ve<ue.length;ve++)if(f(_e,ue[ve]))return null;return new m("Invalid "+de+" `"+he+"` of value `"+_e+"` supplied to `"+pe+"`, expected one of "+JSON.stringify(ue)+".")}return Array.isArray(ue)?b(fe):d.thatReturnsNull}function M(ue){function fe(ge,ye,pe,de,he){if(typeof ue!="function")return new m("Property `"+he+"` of component `"+pe+"` has invalid PropType notation inside objectOf.");var _e=ge[ye],ve=I(_e);if(ve!=="object")return new m("Invalid "+de+" `"+he+"` of type `"+ve+"` supplied to `"+pe+"`, expected an object.");for(var Z in _e)if(_e.hasOwnProperty(Z)){var be=ue(_e,Z,pe,de,he+"."+Z,l);if(be instanceof Error)return be}return null}return b(fe)}function A(ue){function fe(pe,de,he,_e,ve){for(var Z=0;Z<ue.length;Z++)if((0,ue[Z])(pe,de,he,_e,ve,l)==null)return null;return new m("Invalid "+_e+" `"+ve+"` supplied to `"+he+"`.")}if(!Array.isArray(ue))return d.thatReturnsNull;for(var ge=0;ge<ue.length;ge++){var ye=ue[ge];if(typeof ye!="function")return x(!1,"Invalid argument supplid to oneOfType. Expected an array of check functions, but received %s at index %s.",Y(ye),ge),d.thatReturnsNull}return b(fe)}function R(ue){function fe(ge,ye,pe,de,he){var _e=ge[ye],ve=I(_e);if(ve!=="object")return new m("Invalid "+de+" `"+he+"` of type `"+ve+"` supplied to `"+pe+"`, expected `object`.");for(var Z in ue){var be=ue[Z];if(be){var Ee=be(_e,Z,pe,de,he+"."+Z,l);if(Ee)return Ee}}return null}return b(fe)}function D(ue){switch(typeof ue){case"number":case"string":case"undefined":return!0;case"boolean":return!ue;case"object":if(Array.isArray(ue))return ue.every(D);if(ue===null||v(ue))return!0;var fe=h(ue);if(!fe)return!1;var ge,ye=fe.call(ue);if(fe!==ue.entries){for(;!(ge=ye.next()).done;)if(!D(ge.value))return!1}else for(;!(ge=ye.next()).done;){var pe=ge.value;if(pe&&!D(pe[1]))return!1}return!0;default:return!1}}function N(ue,fe){return ue==="symbol"||fe["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&fe instanceof Symbol}function I(ue){var fe=typeof ue;return Array.isArray(ue)?"array":ue instanceof RegExp?"object":N(fe,ue)?"symbol":fe}function L(ue){if(ue==null)return""+ue;var fe=I(ue);if(fe==="object"){if(ue instanceof Date)return"date";if(ue instanceof RegExp)return"regexp"}return fe}function Y(ue){var fe=L(ue);switch(fe){case"array":case"object":return"an "+fe;case"boolean":case"date":case"regexp":return"a "+fe;default:return fe}}function J(ue){return ue.constructor&&ue.constructor.name?ue.constructor.name:Q}var ie=typeof Symbol=="function"&&Symbol.iterator,K="@@iterator",Q="<<anonymous>>",ne={array:w("array"),bool:w("boolean"),func:w("function"),number:w("number"),object:w("object"),string:w("string"),symbol:w("symbol"),any:function(){return b(d.thatReturnsNull)}(),arrayOf:C,element:function(){function ue(fe,ge,ye,pe,de){var he=fe[ge];return v(he)?null:new m("Invalid "+pe+" `"+de+"` of type `"+I(he)+"` supplied to `"+ye+"`, expected a single ReactElement.")}return b(ue)}(),instanceOf:E,node:function(){function ue(fe,ge,ye,pe,de){return D(fe[ge])?null:new m("Invalid "+pe+" `"+de+"` supplied to `"+ye+"`, expected a ReactNode.")}return b(ue)}(),objectOf:M,oneOf:S,oneOfType:A,shape:R};return m.prototype=Error.prototype,ne.checkPropTypes=_,ne.PropTypes=ne,ne}},{22:22,24:24,25:25,27:27,30:30}],30:[function(e,o,s){"use strict";o.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},{}]},{},[12])(12)}),X=r.exports})();var P;(function(){var i={},r={};(function(e){if(typeof i=="object"&&typeof r<"u")r.exports=e(X);else{var o;o=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this,o.ReactDOM=e(o.React)}})(function(e){return function(o){return function(){return function s(d,p,x){function l(c,h){if(!p[c]){if(!d[c]){var f=void 0;if(!h&&f)return f(c,!0);if(_)return _(c,!0);var m=new Error("Cannot find __module__ '"+c+"'");throw m.code="__module___NOT_FOUND",m}var b=p[c]={exports:{}};d[c][0].call(b.exports,function(w){var C=d[c][1][w];return l(C||w)},b,b.exports,s,d,p,x)}return p[c].exports}for(var _=void 0,v=0;v<x.length;v++)l(x[v]);return l}({1:[function(s,d,p){"use strict";var x={Properties:{"aria-current":0,"aria-details":0,"aria-disabled":0,"aria-hidden":0,"aria-invalid":0,"aria-keyshortcuts":0,"aria-label":0,"aria-roledescription":0,"aria-autocomplete":0,"aria-checked":0,"aria-expanded":0,"aria-haspopup":0,"aria-level":0,"aria-modal":0,"aria-multiline":0,"aria-multiselectable":0,"aria-orientation":0,"aria-placeholder":0,"aria-pressed":0,"aria-readonly":0,"aria-required":0,"aria-selected":0,"aria-sort":0,"aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,"aria-valuetext":0,"aria-atomic":0,"aria-busy":0,"aria-live":0,"aria-relevant":0,"aria-dropeffect":0,"aria-grabbed":0,"aria-activedescendant":0,"aria-colcount":0,"aria-colindex":0,"aria-colspan":0,"aria-controls":0,"aria-describedby":0,"aria-errormessage":0,"aria-flowto":0,"aria-labelledby":0,"aria-owns":0,"aria-posinset":0,"aria-rowcount":0,"aria-rowindex":0,"aria-rowspan":0,"aria-setsize":0},DOMAttributeNames:{},DOMPropertyNames:{}};d.exports=x},{}],2:[function(s,d,p){"use strict";var x=s(33),l=s(132),_={focusDOMComponent:function(){l(x.getNodeFromInstance(this))}};d.exports=_},{132:132,33:33}],3:[function(s,d,p){"use strict";function x(ue){return(ue.ctrlKey||ue.altKey||ue.metaKey)&&!(ue.ctrlKey&&ue.altKey)}function l(ue){switch(ue){case"topCompositionStart":return ie.compositionStart;case"topCompositionEnd":return ie.compositionEnd;case"topCompositionUpdate":return ie.compositionUpdate}}function _(ue,fe){return ue==="topKeyDown"&&fe.keyCode===R}function v(ue,fe){switch(ue){case"topKeyUp":return A.indexOf(fe.keyCode)!==-1;case"topKeyDown":return fe.keyCode!==R;case"topKeyPress":case"topMouseDown":case"topBlur":return!0;default:return!1}}function c(ue){var fe=ue.detail;return typeof fe=="object"&&"data"in fe?fe.data:null}function h(ue,fe,ge,ye){var pe,de;if(D?pe=l(ue):Q?v(ue,ge)&&(pe=ie.compositionEnd):_(ue,ge)&&(pe=ie.compositionStart),!pe)return null;L&&(Q||pe!==ie.compositionStart?pe===ie.compositionEnd&&Q&&(de=Q.getData()):Q=E.getPooled(ye));var he=S.getPooled(pe,fe,ge,ye);if(de)he.data=de;else{var _e=c(ge);_e!==null&&(he.data=_e)}return w.accumulateTwoPhaseDispatches(he),he}function f(ue,fe){switch(ue){case"topCompositionEnd":return c(fe);case"topKeyPress":return fe.which!==Y?null:(K=!0,J);case"topTextInput":var ge=fe.data;return ge===J&&K?null:ge;default:return null}}function m(ue,fe){if(Q){if(ue==="topCompositionEnd"||!D&&v(ue,fe)){var ge=Q.getData();return E.release(Q),Q=null,ge}return null}switch(ue){case"topPaste":return null;case"topKeyPress":return fe.which&&!x(fe)?String.fromCharCode(fe.which):null;case"topCompositionEnd":return L?null:fe.data;default:return null}}function b(ue,fe,ge,ye){var pe;if(!(pe=I?f(ue,ge):m(ue,ge)))return null;var de=M.getPooled(ie.beforeInput,fe,ge,ye);return de.data=pe,w.accumulateTwoPhaseDispatches(de),de}var w=s(19),C=s(124),E=s(20),S=s(78),M=s(82),A=[9,13,27,32],R=229,D=C.canUseDOM&&"CompositionEvent"in window,N=null;C.canUseDOM&&"documentMode"in document&&(N=document.documentMode);var I=C.canUseDOM&&"TextEvent"in window&&!N&&!function(){var ue=window.opera;return typeof ue=="object"&&typeof ue.version=="function"&&parseInt(ue.version(),10)<=12}(),L=C.canUseDOM&&(!D||N&&N>8&&N<=11),Y=32,J=String.fromCharCode(Y),ie={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["topCompositionEnd","topKeyPress","topTextInput","topPaste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:["topBlur","topCompositionEnd","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:["topBlur","topCompositionStart","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:["topBlur","topCompositionUpdate","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]}},K=!1,Q=null,ne={eventTypes:ie,extractEvents:function(ue,fe,ge,ye){return[h(ue,fe,ge,ye),b(ue,fe,ge,ye)]}};d.exports=ne},{124:124,19:19,20:20,78:78,82:82}],4:[function(s,d,p){"use strict";function x(h,f){return h+f.charAt(0).toUpperCase()+f.substring(1)}var l={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_=["Webkit","ms","Moz","O"];Object.keys(l).forEach(function(h){_.forEach(function(f){l[x(f,h)]=l[h]})});var v={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},c={isUnitlessNumber:l,shorthandPropertyExpansions:v};d.exports=c},{}],5:[function(s,d,p){"use strict";var x=s(4),l=s(124),_=(s(58),s(126),s(94)),v=s(137),c=s(141),h=(s(143),c(function(C){return v(C)})),f=!1,m="cssFloat";if(l.canUseDOM){var b=document.createElement("div").style;try{b.font=""}catch{f=!0}document.documentElement.style.cssFloat===void 0&&(m="styleFloat")}var w={createMarkupForStyles:function(C,E){var S="";for(var M in C)if(C.hasOwnProperty(M)){var A=M.indexOf("--")===0,R=C[M];R!=null&&(S+=h(M)+":",S+=_(M,R,E,A)+";")}return S||null},setValueForStyles:function(C,E,S){var M=C.style;for(var A in E)if(E.hasOwnProperty(A)){var R=A.indexOf("--")===0,D=_(A,E[A],S,R);if(A!=="float"&&A!=="cssFloat"||(A=m),R)M.setProperty(A,D);else if(D)M[A]=D;else{var N=f&&x.shorthandPropertyExpansions[A];if(N)for(var I in N)M[I]="";else M[A]=""}}}};d.exports=w},{124:124,126:126,137:137,141:141,143:143,4:4,58:58,94:94}],6:[function(s,d,p){"use strict";function x(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")}var l=s(113),_=s(24),v=(s(138),function(){function c(h){x(this,c),this._callbacks=null,this._contexts=null,this._arg=h}return c.prototype.enqueue=function(h,f){this._callbacks=this._callbacks||[],this._callbacks.push(h),this._contexts=this._contexts||[],this._contexts.push(f)},c.prototype.notifyAll=function(){var h=this._callbacks,f=this._contexts,m=this._arg;if(h&&f){h.length!==f.length&&l("24"),this._callbacks=null,this._contexts=null;for(var b=0;b<h.length;b++)h[b].call(f[b],m);h.length=0,f.length=0}},c.prototype.checkpoint=function(){return this._callbacks?this._callbacks.length:0},c.prototype.rollback=function(h){this._callbacks&&this._contexts&&(this._callbacks.length=h,this._contexts.length=h)},c.prototype.reset=function(){this._callbacks=null,this._contexts=null},c.prototype.destructor=function(){this.reset()},c}());d.exports=_.addPoolingTo(v)},{113:113,138:138,24:24}],7:[function(s,d,p){"use strict";function x(ve,Z,be){var Ee=K.getPooled(ge.change,ve,Z,be);return Ee.type="change",L.accumulateTwoPhaseDispatches(Ee),Ee}function l(ve){var Z=ve.nodeName&&ve.nodeName.toLowerCase();return Z==="select"||Z==="input"&&ve.type==="file"}function _(ve){var Z=x(pe,ve,ne(ve));ie.batchedUpdates(v,Z)}function v(ve){I.enqueueEvents(ve),I.processEventQueue(!1)}function c(ve,Z){ye=ve,pe=Z,ye.attachEvent("onchange",_)}function h(){ye&&(ye.detachEvent("onchange",_),ye=null,pe=null)}function f(ve,Z){var be=Q.updateValueIfChanged(ve),Ee=Z.simulated===!0&&_e._allowSimulatedPassThrough;if(be||Ee)return ve}function m(ve,Z){if(ve==="topChange")return Z}function b(ve,Z,be){ve==="topFocus"?(h(),c(Z,be)):ve==="topBlur"&&h()}function w(ve,Z){ye=ve,pe=Z,ye.attachEvent("onpropertychange",E)}function C(){ye&&(ye.detachEvent("onpropertychange",E),ye=null,pe=null)}function E(ve){ve.propertyName==="value"&&f(pe,ve)&&_(ve)}function S(ve,Z,be){ve==="topFocus"?(C(),w(Z,be)):ve==="topBlur"&&C()}function M(ve,Z,be){if(ve==="topSelectionChange"||ve==="topKeyUp"||ve==="topKeyDown")return f(pe,be)}function A(ve){var Z=ve.nodeName;return Z&&Z.toLowerCase()==="input"&&(ve.type==="checkbox"||ve.type==="radio")}function R(ve,Z,be){if(ve==="topClick")return f(Z,be)}function D(ve,Z,be){if(ve==="topInput"||ve==="topChange")return f(Z,be)}function N(ve,Z){if(ve!=null){var be=ve._wrapperState||Z._wrapperState;if(be&&be.controlled&&Z.type==="number"){var Ee=""+Z.value;Z.getAttribute("value")!==Ee&&Z.setAttribute("value",Ee)}}}var I=s(16),L=s(19),Y=s(124),J=s(33),ie=s(71),K=s(80),Q=s(108),ne=s(102),ue=s(110),fe=s(111),ge={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:["topBlur","topChange","topClick","topFocus","topInput","topKeyDown","topKeyUp","topSelectionChange"]}},ye=null,pe=null,de=!1;Y.canUseDOM&&(de=ue("change")&&(!document.documentMode||document.documentMode>8));var he=!1;Y.canUseDOM&&(he=ue("input")&&(!("documentMode"in document)||document.documentMode>9));var _e={eventTypes:ge,_allowSimulatedPassThrough:!0,_isInputEventSupported:he,extractEvents:function(ve,Z,be,Ee){var De,Fe,Ue=Z?J.getNodeFromInstance(Z):window;if(l(Ue)?de?De=m:Fe=b:fe(Ue)?he?De=D:(De=M,Fe=S):A(Ue)&&(De=R),De){var Qe=De(ve,Z,be);if(Qe)return x(Qe,be,Ee)}Fe&&Fe(ve,Ue,Z),ve==="topBlur"&&N(Z,Ue)}};d.exports=_e},{102:102,108:108,110:110,111:111,124:124,16:16,19:19,33:33,71:71,80:80}],8:[function(s,d,p){"use strict";function x(R,D){return Array.isArray(D)&&(D=D[1]),D?D.nextSibling:R.firstChild}function l(R,D,N){m.insertTreeBefore(R,D,N)}function _(R,D,N){Array.isArray(D)?c(R,D[0],D[1],N):S(R,D,N)}function v(R,D){if(Array.isArray(D)){var N=D[1];D=D[0],h(R,D,N),R.removeChild(N)}R.removeChild(D)}function c(R,D,N,I){for(var L=D;;){var Y=L.nextSibling;if(S(R,L,I),L===N)break;L=Y}}function h(R,D,N){for(;;){var I=D.nextSibling;if(I===N)break;R.removeChild(I)}}function f(R,D,N){var I=R.parentNode,L=R.nextSibling;L===D?N&&S(I,document.createTextNode(N),L):N?(E(L,N),h(I,L,D)):h(I,R,D)}var m=s(9),b=s(13),w=(s(33),s(58),s(93)),C=s(115),E=s(116),S=w(function(R,D,N){R.insertBefore(D,N)}),M=b.dangerouslyReplaceNodeWithMarkup,A={dangerouslyReplaceNodeWithMarkup:M,replaceDelimitedText:f,processUpdates:function(R,D){for(var N=0;N<D.length;N++){var I=D[N];switch(I.type){case"INSERT_MARKUP":l(R,I.content,x(R,I.afterNode));break;case"MOVE_EXISTING":_(R,I.fromNode,x(R,I.afterNode));break;case"SET_MARKUP":C(R,I.content);break;case"TEXT_CONTENT":E(R,I.content);break;case"REMOVE_NODE":v(R,I.fromNode)}}}};d.exports=A},{115:115,116:116,13:13,33:33,58:58,9:9,93:93}],9:[function(s,d,p){"use strict";function x(M){if(E){var A=M.node,R=M.children;if(R.length)for(var D=0;D<R.length;D++)S(A,R[D],null);else M.html!=null?b(A,M.html):M.text!=null&&C(A,M.text)}}function l(M,A){M.parentNode.replaceChild(A.node,M),x(A)}function _(M,A){E?M.children.push(A):M.node.appendChild(A.node)}function v(M,A){E?M.html=A:b(M.node,A)}function c(M,A){E?M.text=A:C(M.node,A)}function h(){return this.node.nodeName}function f(M){return{node:M,children:[],html:null,text:null,toString:h}}var m=s(10),b=s(115),w=s(93),C=s(116),E=typeof document<"u"&&typeof document.documentMode=="number"||typeof navigator<"u"&&typeof navigator.userAgent=="string"&&/\bEdge\/\d/.test(navigator.userAgent),S=w(function(M,A,R){A.node.nodeType===11||A.node.nodeType===1&&A.node.nodeName.toLowerCase()==="object"&&(A.node.namespaceURI==null||A.node.namespaceURI===m.html)?(x(A),M.insertBefore(A.node,R)):(M.insertBefore(A.node,R),x(A))});f.insertTreeBefore=S,f.replaceChildWithTree=l,f.queueChild=_,f.queueHTML=v,f.queueText=c,d.exports=f},{10:10,115:115,116:116,93:93}],10:[function(s,d,p){"use strict";var x={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};d.exports=x},{}],11:[function(s,d,p){"use strict";function x(h,f){return(h&f)===f}var l=s(113),_=(s(138),{MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:24,HAS_OVERLOADED_BOOLEAN_VALUE:32,injectDOMPropertyConfig:function(h){var f=_,m=h.Properties||{},b=h.DOMAttributeNamespaces||{},w=h.DOMAttributeNames||{},C=h.DOMPropertyNames||{},E=h.DOMMutationMethods||{};h.isCustomAttribute&&c._isCustomAttributeFunctions.push(h.isCustomAttribute);for(var S in m){c.properties.hasOwnProperty(S)&&l("48",S);var M=S.toLowerCase(),A=m[S],R={attributeName:M,attributeNamespace:null,propertyName:S,mutationMethod:null,mustUseProperty:x(A,f.MUST_USE_PROPERTY),hasBooleanValue:x(A,f.HAS_BOOLEAN_VALUE),hasNumericValue:x(A,f.HAS_NUMERIC_VALUE),hasPositiveNumericValue:x(A,f.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:x(A,f.HAS_OVERLOADED_BOOLEAN_VALUE)};if(R.hasBooleanValue+R.hasNumericValue+R.hasOverloadedBooleanValue<=1||l("50",S),w.hasOwnProperty(S)){var D=w[S];R.attributeName=D}b.hasOwnProperty(S)&&(R.attributeNamespace=b[S]),C.hasOwnProperty(S)&&(R.propertyName=C[S]),E.hasOwnProperty(S)&&(R.mutationMethod=E[S]),c.properties[S]=R}}}),v=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",c={ID_ATTRIBUTE_NAME:"data-reactid",ROOT_ATTRIBUTE_NAME:"data-reactroot",ATTRIBUTE_NAME_START_CHAR:v,ATTRIBUTE_NAME_CHAR:v+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",properties:{},getPossibleStandardName:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(h){for(var f=0;f<c._isCustomAttributeFunctions.length;f++)if((0,c._isCustomAttributeFunctions[f])(h))return!0;return!1},injection:_};d.exports=c},{113:113,138:138}],12:[function(s,d,p){"use strict";function x(b){return!!f.hasOwnProperty(b)||!h.hasOwnProperty(b)&&(c.test(b)?(f[b]=!0,!0):(h[b]=!0,!1))}function l(b,w){return w==null||b.hasBooleanValue&&!w||b.hasNumericValue&&isNaN(w)||b.hasPositiveNumericValue&&w<1||b.hasOverloadedBooleanValue&&w===!1}var _=s(11),v=(s(33),s(58),s(112)),c=(s(143),new RegExp("^["+_.ATTRIBUTE_NAME_START_CHAR+"]["+_.ATTRIBUTE_NAME_CHAR+"]*$")),h={},f={},m={createMarkupForID:function(b){return _.ID_ATTRIBUTE_NAME+"="+v(b)},setAttributeForID:function(b,w){b.setAttribute(_.ID_ATTRIBUTE_NAME,w)},createMarkupForRoot:function(){return _.ROOT_ATTRIBUTE_NAME+'=""'},setAttributeForRoot:function(b){b.setAttribute(_.ROOT_ATTRIBUTE_NAME,"")},createMarkupForProperty:function(b,w){var C=_.properties.hasOwnProperty(b)?_.properties[b]:null;if(C){if(l(C,w))return"";var E=C.attributeName;return C.hasBooleanValue||C.hasOverloadedBooleanValue&&w===!0?E+'=""':E+"="+v(w)}return _.isCustomAttribute(b)?w==null?"":b+"="+v(w):null},createMarkupForCustomAttribute:function(b,w){return x(b)&&w!=null?b+"="+v(w):""},setValueForProperty:function(b,w,C){var E=_.properties.hasOwnProperty(w)?_.properties[w]:null;if(E){var S=E.mutationMethod;if(S)S(b,C);else{if(l(E,C))return void this.deleteValueForProperty(b,w);if(E.mustUseProperty)b[E.propertyName]=C;else{var M=E.attributeName,A=E.attributeNamespace;A?b.setAttributeNS(A,M,""+C):E.hasBooleanValue||E.hasOverloadedBooleanValue&&C===!0?b.setAttribute(M,""):b.setAttribute(M,""+C)}}}else if(_.isCustomAttribute(w))return void m.setValueForAttribute(b,w,C)},setValueForAttribute:function(b,w,C){x(w)&&(C==null?b.removeAttribute(w):b.setAttribute(w,""+C))},deleteValueForAttribute:function(b,w){b.removeAttribute(w)},deleteValueForProperty:function(b,w){var C=_.properties.hasOwnProperty(w)?_.properties[w]:null;if(C){var E=C.mutationMethod;if(E)E(b,void 0);else if(C.mustUseProperty){var S=C.propertyName;C.hasBooleanValue?b[S]=!1:b[S]=""}else b.removeAttribute(C.attributeName)}else _.isCustomAttribute(w)&&b.removeAttribute(w)}};d.exports=m},{11:11,112:112,143:143,33:33,58:58}],13:[function(s,d,p){"use strict";var x=s(113),l=s(9),_=s(124),v=s(129),c=s(130),h=(s(138),{dangerouslyReplaceNodeWithMarkup:function(f,m){if(_.canUseDOM||x("56"),m||x("57"),f.nodeName==="HTML"&&x("58"),typeof m=="string"){var b=v(m,c)[0];f.parentNode.replaceChild(b,f)}else l.replaceChildWithTree(f,m)}});d.exports=h},{113:113,124:124,129:129,130:130,138:138,9:9}],14:[function(s,d,p){"use strict";var x=["ResponderEventPlugin","SimpleEventPlugin","TapEventPlugin","EnterLeaveEventPlugin","ChangeEventPlugin","SelectEventPlugin","BeforeInputEventPlugin"];d.exports=x},{}],15:[function(s,d,p){"use strict";var x=s(19),l=s(33),_=s(84),v={mouseEnter:{registrationName:"onMouseEnter",dependencies:["topMouseOut","topMouseOver"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["topMouseOut","topMouseOver"]}},c={eventTypes:v,extractEvents:function(h,f,m,b){if(h==="topMouseOver"&&(m.relatedTarget||m.fromElement)||h!=="topMouseOut"&&h!=="topMouseOver")return null;var w;if(b.window===b)w=b;else{var C=b.ownerDocument;w=C?C.defaultView||C.parentWindow:window}var E,S;if(h==="topMouseOut"){E=f;var M=m.relatedTarget||m.toElement;S=M?l.getClosestInstanceFromNode(M):null}else E=null,S=f;if(E===S)return null;var A=E==null?w:l.getNodeFromInstance(E),R=S==null?w:l.getNodeFromInstance(S),D=_.getPooled(v.mouseLeave,E,m,b);D.type="mouseleave",D.target=A,D.relatedTarget=R;var N=_.getPooled(v.mouseEnter,S,m,b);return N.type="mouseenter",N.target=R,N.relatedTarget=A,x.accumulateEnterLeaveDispatches(D,N,E,S),[D,N]}};d.exports=c},{19:19,33:33,84:84}],16:[function(s,d,p){"use strict";function x(R){return R==="button"||R==="input"||R==="select"||R==="textarea"}function l(R,D,N){switch(R){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":return!(!N.disabled||!x(D));default:return!1}}var _=s(113),v=s(17),c=s(18),h=s(50),f=s(91),m=s(98),b=(s(138),{}),w=null,C=function(R,D){R&&(c.executeDispatchesInOrder(R,D),R.isPersistent()||R.constructor.release(R))},E=function(R){return C(R,!0)},S=function(R){return C(R,!1)},M=function(R){return"."+R._rootNodeID},A={injection:{injectEventPluginOrder:v.injectEventPluginOrder,injectEventPluginsByName:v.injectEventPluginsByName},putListener:function(R,D,N){typeof N!="function"&&_("94",D,typeof N);var I=M(R);(b[D]||(b[D]={}))[I]=N;var L=v.registrationName__module__s[D];L&&L.didPutListener&&L.didPutListener(R,D,N)},getListener:function(R,D){var N=b[D];if(l(D,R._currentElement.type,R._currentElement.props))return null;var I=M(R);return N&&N[I]},deleteListener:function(R,D){var N=v.registrationName__module__s[D];N&&N.willDeleteListener&&N.willDeleteListener(R,D);var I=b[D];I&&delete I[M(R)]},deleteAllListeners:function(R){var D=M(R);for(var N in b)if(b.hasOwnProperty(N)&&b[N][D]){var I=v.registrationName__module__s[N];I&&I.willDeleteListener&&I.willDeleteListener(R,N),delete b[N][D]}},extractEvents:function(R,D,N,I){for(var L,Y=v.plugins,J=0;J<Y.length;J++){var ie=Y[J];if(ie){var K=ie.extractEvents(R,D,N,I);K&&(L=f(L,K))}}return L},enqueueEvents:function(R){R&&(w=f(w,R))},processEventQueue:function(R){var D=w;w=null,R?m(D,E):m(D,S),w&&_("95"),h.rethrowCaughtError()},__purge:function(){b={}},__getListenerBank:function(){return b}};d.exports=A},{113:113,138:138,17:17,18:18,50:50,91:91,98:98}],17:[function(s,d,p){"use strict";function x(){if(c)for(var m in h){var b=h[m],w=c.indexOf(m);if(w>-1||v("96",m),!f.plugins[w]){b.extractEvents||v("97",m),f.plugins[w]=b;var C=b.eventTypes;for(var E in C)l(C[E],b,E)||v("98",E,m)}}}function l(m,b,w){f.eventNameDispatchConfigs.hasOwnProperty(w)&&v("99",w),f.eventNameDispatchConfigs[w]=m;var C=m.phasedRegistrationNames;if(C){for(var E in C)if(C.hasOwnProperty(E)){var S=C[E];_(S,b,w)}return!0}return!!m.registrationName&&(_(m.registrationName,b,w),!0)}function _(m,b,w){f.registrationName__module__s[m]&&v("100",m),f.registrationName__module__s[m]=b,f.registrationNameDependencies[m]=b.eventTypes[w].dependencies}var v=s(113),c=(s(138),null),h={},f={plugins:[],eventNameDispatchConfigs:{},registrationName__module__s:{},registrationNameDependencies:{},possibleRegistrationNames:null,injectEventPluginOrder:function(m){c&&v("101"),c=Array.prototype.slice.call(m),x()},injectEventPluginsByName:function(m){var b=!1;for(var w in m)if(m.hasOwnProperty(w)){var C=m[w];h.hasOwnProperty(w)&&h[w]===C||(h[w]&&v("102",w),h[w]=C,b=!0)}b&&x()},getPlugin__module__ForEvent:function(m){var b=m.dispatchConfig;if(b.registrationName)return f.registrationName__module__s[b.registrationName]||null;if(b.phasedRegistrationNames!==void 0){var w=b.phasedRegistrationNames;for(var C in w)if(w.hasOwnProperty(C)){var E=f.registrationName__module__s[w[C]];if(E)return E}}return null},_resetEventPlugins:function(){c=null;for(var m in h)h.hasOwnProperty(m)&&delete h[m];f.plugins.length=0;var b=f.eventNameDispatchConfigs;for(var w in b)b.hasOwnProperty(w)&&delete b[w];var C=f.registrationName__module__s;for(var E in C)C.hasOwnProperty(E)&&delete C[E]}};d.exports=f},{113:113,138:138}],18:[function(s,d,p){"use strict";function x(R){return R==="topMouseUp"||R==="topTouchEnd"||R==="topTouchCancel"}function l(R){return R==="topMouseMove"||R==="topTouchMove"}function _(R){return R==="topMouseDown"||R==="topTouchStart"}function v(R,D,N,I){var L=R.type||"unknown-event";R.currentTarget=A.getNodeFromInstance(I),D?S.invokeGuardedCallbackWithCatch(L,N,R):S.invokeGuardedCallback(L,N,R),R.currentTarget=null}function c(R,D){var N=R._dispatchListeners,I=R._dispatchInstances;if(Array.isArray(N))for(var L=0;L<N.length&&!R.isPropagationStopped();L++)v(R,D,N[L],I[L]);else N&&v(R,D,N,I);R._dispatchListeners=null,R._dispatchInstances=null}function h(R){var D=R._dispatchListeners,N=R._dispatchInstances;if(Array.isArray(D)){for(var I=0;I<D.length&&!R.isPropagationStopped();I++)if(D[I](R,N[I]))return N[I]}else if(D&&D(R,N))return N;return null}function f(R){var D=h(R);return R._dispatchInstances=null,R._dispatchListeners=null,D}function m(R){var D=R._dispatchListeners,N=R._dispatchInstances;Array.isArray(D)&&E("103"),R.currentTarget=D?A.getNodeFromInstance(N):null;var I=D?D(R):null;return R.currentTarget=null,R._dispatchListeners=null,R._dispatchInstances=null,I}function b(R){return!!R._dispatchListeners}var w,C,E=s(113),S=s(50),M=(s(138),s(143),{injectComponentTree:function(R){w=R},injectTreeTraversal:function(R){C=R}}),A={isEndish:x,isMoveish:l,isStartish:_,executeDirectDispatch:m,executeDispatchesInOrder:c,executeDispatchesInOrderStopAtTrue:f,hasDispatches:b,getInstanceFromNode:function(R){return w.getInstanceFromNode(R)},getNodeFromInstance:function(R){return w.getNodeFromInstance(R)},isAncestor:function(R,D){return C.isAncestor(R,D)},getLowestCommonAncestor:function(R,D){return C.getLowestCommonAncestor(R,D)},getParentInstance:function(R){return C.getParentInstance(R)},traverseTwoPhase:function(R,D,N){return C.traverseTwoPhase(R,D,N)},traverseEnterLeave:function(R,D,N,I,L){return C.traverseEnterLeave(R,D,N,I,L)},injection:M};d.exports=A},{113:113,138:138,143:143,50:50}],19:[function(s,d,p){"use strict";function x(D,N,I){var L=N.dispatchConfig.phasedRegistrationNames[I];return A(D,L)}function l(D,N,I){var L=x(D,I,N);L&&(I._dispatchListeners=S(I._dispatchListeners,L),I._dispatchInstances=S(I._dispatchInstances,D))}function _(D){D&&D.dispatchConfig.phasedRegistrationNames&&E.traverseTwoPhase(D._targetInst,l,D)}function v(D){if(D&&D.dispatchConfig.phasedRegistrationNames){var N=D._targetInst,I=N?E.getParentInstance(N):null;E.traverseTwoPhase(I,l,D)}}function c(D,N,I){if(I&&I.dispatchConfig.registrationName){var L=I.dispatchConfig.registrationName,Y=A(D,L);Y&&(I._dispatchListeners=S(I._dispatchListeners,Y),I._dispatchInstances=S(I._dispatchInstances,D))}}function h(D){D&&D.dispatchConfig.registrationName&&c(D._targetInst,null,D)}function f(D){M(D,_)}function m(D){M(D,v)}function b(D,N,I,L){E.traverseEnterLeave(I,L,c,D,N)}function w(D){M(D,h)}var C=s(16),E=s(18),S=s(91),M=s(98),A=(s(143),C.getListener),R={accumulateTwoPhaseDispatches:f,accumulateTwoPhaseDispatchesSkipTarget:m,accumulateDirectDispatches:w,accumulateEnterLeaveDispatches:b};d.exports=R},{143:143,16:16,18:18,91:91,98:98}],20:[function(s,d,p){"use strict";function x(c){this._root=c,this._startText=this.getText(),this._fallbackText=null}var l=s(144),_=s(24),v=s(106);l(x.prototype,{destructor:function(){this._root=null,this._startText=null,this._fallbackText=null},getText:function(){return"value"in this._root?this._root.value:this._root[v()]},getData:function(){if(this._fallbackText)return this._fallbackText;var c,h,f=this._startText,m=f.length,b=this.getText(),w=b.length;for(c=0;c<m&&f[c]===b[c];c++);var C=m-c;for(h=1;h<=C&&f[m-h]===b[w-h];h++);var E=h>1?1-h:void 0;return this._fallbackText=b.slice(c,E),this._fallbackText}}),_.addPoolingTo(x),d.exports=x},{106:106,144:144,24:24}],21:[function(s,d,p){"use strict";var x=s(11),l=x.injection.MUST_USE_PROPERTY,_=x.injection.HAS_BOOLEAN_VALUE,v=x.injection.HAS_NUMERIC_VALUE,c=x.injection.HAS_POSITIVE_NUMERIC_VALUE,h=x.injection.HAS_OVERLOADED_BOOLEAN_VALUE,f={isCustomAttribute:RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+x.ATTRIBUTE_NAME_CHAR+"]*$")),Properties:{accept:0,acceptCharset:0,accessKey:0,action:0,allowFullScreen:_,allowTransparency:0,alt:0,as:0,async:_,autoComplete:0,autoPlay:_,capture:_,cellPadding:0,cellSpacing:0,charSet:0,challenge:0,checked:l|_,cite:0,classID:0,className:0,cols:c,colSpan:0,content:0,contentEditable:0,contextMenu:0,controls:_,coords:0,crossOrigin:0,data:0,dateTime:0,default:_,defer:_,dir:0,disabled:_,download:h,draggable:0,encType:0,form:0,formAction:0,formEncType:0,formMethod:0,formNoValidate:_,formTarget:0,frameBorder:0,headers:0,height:0,hidden:_,high:0,href:0,hrefLang:0,htmlFor:0,httpEquiv:0,icon:0,id:0,inputMode:0,integrity:0,is:0,keyParams:0,keyType:0,kind:0,label:0,lang:0,list:0,loop:_,low:0,manifest:0,marginHeight:0,marginWidth:0,max:0,maxLength:0,media:0,mediaGroup:0,method:0,min:0,minLength:0,multiple:l|_,muted:l|_,name:0,nonce:0,noValidate:_,open:_,optimum:0,pattern:0,placeholder:0,playsInline:_,poster:0,preload:0,profile:0,radioGroup:0,readOnly:_,referrerPolicy:0,rel:0,required:_,reversed:_,role:0,rows:c,rowSpan:v,sandbox:0,scope:0,scoped:_,scrolling:0,seamless:_,selected:l|_,shape:0,size:c,sizes:0,span:c,spellCheck:0,src:0,srcDoc:0,srcLang:0,srcSet:0,start:v,step:0,style:0,summary:0,tabIndex:0,target:0,title:0,type:0,useMap:0,value:0,width:0,wmode:0,wrap:0,about:0,datatype:0,inlist:0,prefix:0,property:0,resource:0,typeof:0,vocab:0,autoCapitalize:0,autoCorrect:0,autoSave:0,color:0,itemProp:0,itemScope:_,itemType:0,itemID:0,itemRef:0,results:0,security:0,unselectable:0},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{},DOMMutationMethods:{value:function(m,b){if(b==null)return m.removeAttribute("value");(m.type!=="number"||m.hasAttribute("value")===!1||m.validity&&!m.validity.badInput&&m.ownerDocument.activeElement!==m)&&m.setAttribute("value",""+b)}}};d.exports=f},{11:11}],22:[function(s,d,p){"use strict";function x(v){var c={"=":"=0",":":"=2"};return"$"+(""+v).replace(/[=:]/g,function(h){return c[h]})}function l(v){var c=/(=0|=2)/g,h={"=0":"=","=2":":"};return(""+(v[0]==="."&&v[1]==="$"?v.substring(2):v.substring(1))).replace(c,function(f){return h[f]})}var _={escape:x,unescape:l};d.exports=_},{}],23:[function(s,d,p){"use strict";function x(M){M.checkedLink!=null&&M.valueLink!=null&&c("87")}function l(M){x(M),(M.value!=null||M.onChange!=null)&&c("88")}function _(M){x(M),(M.checked!=null||M.onChange!=null)&&c("89")}function v(M){if(M){var A=M.getName();if(A)return" Check the render method of `"+A+"`."}return""}var c=s(113),h=s(64),f=s(146),m=s(121),b=f(m.isValidElement),w=(s(138),s(143),{button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0}),C={value:function(M,A,R){return!M[A]||w[M.type]||M.onChange||M.readOnly||M.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(M,A,R){return!M[A]||M.onChange||M.readOnly||M.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:b.func},E={},S={checkPropTypes:function(M,A,R){for(var D in C){if(C.hasOwnProperty(D))var N=C[D](A,D,M,"prop",null,h);N instanceof Error&&!(N.message in E)&&(E[N.message]=!0,v(R))}},getValue:function(M){return M.valueLink?(l(M),M.valueLink.value):M.value},getChecked:function(M){return M.checkedLink?(_(M),M.checkedLink.value):M.checked},executeOnChange:function(M,A){return M.valueLink?(l(M),M.valueLink.requestChange(A.target.value)):M.checkedLink?(_(M),M.checkedLink.requestChange(A.target.checked)):M.onChange?M.onChange.call(void 0,A):void 0}};d.exports=S},{113:113,121:121,138:138,143:143,146:146,64:64}],24:[function(s,d,p){"use strict";var x=s(113),l=(s(138),function(w){var C=this;if(C.instancePool.length){var E=C.instancePool.pop();return C.call(E,w),E}return new C(w)}),_=function(w,C){var E=this;if(E.instancePool.length){var S=E.instancePool.pop();return E.call(S,w,C),S}return new E(w,C)},v=function(w,C,E){var S=this;if(S.instancePool.length){var M=S.instancePool.pop();return S.call(M,w,C,E),M}return new S(w,C,E)},c=function(w,C,E,S){var M=this;if(M.instancePool.length){var A=M.instancePool.pop();return M.call(A,w,C,E,S),A}return new M(w,C,E,S)},h=function(w){var C=this;w instanceof C||x("25"),w.destructor(),C.instancePool.length<C.poolSize&&C.instancePool.push(w)},f=l,m=function(w,C){var E=w;return E.instancePool=[],E.getPooled=C||f,E.poolSize||(E.poolSize=10),E.release=h,E},b={addPoolingTo:m,oneArgumentPooler:l,twoArgumentPooler:_,threeArgumentPooler:v,fourArgumentPooler:c};d.exports=b},{113:113,138:138}],25:[function(s,d,p){"use strict";function x(A){return Object.prototype.hasOwnProperty.call(A,S)||(A[S]=C++,b[A[S]]={}),b[A[S]]}var l,_=s(144),v=s(17),c=s(51),h=s(90),f=s(107),m=s(110),b={},w=!1,C=0,E={topAbort:"abort",topAnimationEnd:f("animationend")||"animationend",topAnimationIteration:f("animationiteration")||"animationiteration",topAnimationStart:f("animationstart")||"animationstart",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:f("transitionend")||"transitionend",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},S="_reactListenersID"+String(Math.random()).slice(2),M=_({},c,{ReactEventListener:null,injection:{injectReactEventListener:function(A){A.setHandleTopLevel(M.handleTopLevel),M.ReactEventListener=A}},setEnabled:function(A){M.ReactEventListener&&M.ReactEventListener.setEnabled(A)},isEnabled:function(){return!(!M.ReactEventListener||!M.ReactEventListener.isEnabled())},listenTo:function(A,R){for(var D=R,N=x(D),I=v.registrationNameDependencies[A],L=0;L<I.length;L++){var Y=I[L];N.hasOwnProperty(Y)&&N[Y]||(Y==="topWheel"?m("wheel")?M.ReactEventListener.trapBubbledEvent("topWheel","wheel",D):m("mousewheel")?M.ReactEventListener.trapBubbledEvent("topWheel","mousewheel",D):M.ReactEventListener.trapBubbledEvent("topWheel","DOMMouseScroll",D):Y==="topScroll"?m("scroll",!0)?M.ReactEventListener.trapCapturedEvent("topScroll","scroll",D):M.ReactEventListener.trapBubbledEvent("topScroll","scroll",M.ReactEventListener.WINDOW_HANDLE):Y==="topFocus"||Y==="topBlur"?(m("focus",!0)?(M.ReactEventListener.trapCapturedEvent("topFocus","focus",D),M.ReactEventListener.trapCapturedEvent("topBlur","blur",D)):m("focusin")&&(M.ReactEventListener.trapBubbledEvent("topFocus","focusin",D),M.ReactEventListener.trapBubbledEvent("topBlur","focusout",D)),N.topBlur=!0,N.topFocus=!0):E.hasOwnProperty(Y)&&M.ReactEventListener.trapBubbledEvent(Y,E[Y],D),N[Y]=!0)}},trapBubbledEvent:function(A,R,D){return M.ReactEventListener.trapBubbledEvent(A,R,D)},trapCapturedEvent:function(A,R,D){return M.ReactEventListener.trapCapturedEvent(A,R,D)},supportsEventPageXY:function(){if(!document.createEvent)return!1;var A=document.createEvent("MouseEvent");return A!=null&&"pageX"in A},ensureScrollValueMonitoring:function(){if(l===void 0&&(l=M.supportsEventPageXY()),!l&&!w){var A=h.refreshScrollValues;M.ReactEventListener.monitorScrollValue(A),w=!0}}});d.exports=M},{107:107,110:110,144:144,17:17,51:51,90:90}],26:[function(s,d,p){(function(x){"use strict";function l(m,b,w,C){var E=m[w]===void 0;b!=null&&E&&(m[w]=v(b,!0))}var _=s(66),v=s(109),c=(s(22),s(117)),h=s(118);s(143),x!==void 0&&x.env;var f={instantiateChildren:function(m,b,w,C){if(m==null)return null;var E={};return h(m,l,E),E},updateChildren:function(m,b,w,C,E,S,M,A,R){if(b||m){var D,N;for(D in b)if(b.hasOwnProperty(D)){N=m&&m[D];var I=N&&N._currentElement,L=b[D];if(N!=null&&c(I,L))_.receiveComponent(N,L,E,A),b[D]=N;else{N&&(C[D]=_.getHostNode(N),_.unmountComponent(N,!1));var Y=v(L,!0);b[D]=Y;var J=_.mountComponent(Y,E,S,M,A,R);w.push(J)}}for(D in m)!m.hasOwnProperty(D)||b&&b.hasOwnProperty(D)||(N=m[D],C[D]=_.getHostNode(N),_.unmountComponent(N,!1))}},unmountChildren:function(m,b){for(var w in m)if(m.hasOwnProperty(w)){var C=m[w];_.unmountComponent(C,b)}}};d.exports=f}).call(this,void 0)},{109:109,117:117,118:118,143:143,22:22,66:66}],27:[function(s,d,p){"use strict";var x=s(8),l=s(37),_={processChildrenUpdates:l.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkup:x.dangerouslyReplaceNodeWithMarkup};d.exports=_},{37:37,8:8}],28:[function(s,d,p){"use strict";var x=s(113),l=(s(138),!1),_={replaceNodeWithMarkup:null,processChildrenUpdates:null,injection:{injectEnvironment:function(v){l&&x("104"),_.replaceNodeWithMarkup=v.replaceNodeWithMarkup,_.processChildrenUpdates=v.processChildrenUpdates,l=!0}}};d.exports=_},{113:113,138:138}],29:[function(s,d,p){"use strict";function x(I){}function l(I){return!(!I.prototype||!I.prototype.isReactComponent)}function _(I){return!(!I.prototype||!I.prototype.isPureReactComponent)}var v=s(113),c=s(144),h=s(121),f=s(28),m=s(120),b=s(50),w=s(57),C=(s(58),s(62)),E=s(66),S=s(131),M=(s(138),s(142)),A=s(117),R=(s(143),{ImpureClass:0,PureClass:1,StatelessFunctional:2});x.prototype.render=function(){var I=w.get(this)._currentElement.type,L=I(this.props,this.context,this.updater);return L};var D=1,N={construct:function(I){this._currentElement=I,this._rootNodeID=0,this._compositeType=null,this._instance=null,this._hostParent=null,this._hostContainerInfo=null,this._updateBatchNumber=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedNodeType=null,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._topLevelWrapper=null,this._pendingCallbacks=null,this._calledComponentWillUnmount=!1},mountComponent:function(I,L,Y,J){this._context=J,this._mountOrder=D++,this._hostParent=L,this._hostContainerInfo=Y;var ie,K=this._currentElement.props,Q=this._processContext(J),ne=this._currentElement.type,ue=I.getUpdateQueue(),fe=l(ne),ge=this._constructComponent(fe,K,Q,ue);fe||ge!=null&&ge.render!=null?_(ne)?this._compositeType=R.PureClass:this._compositeType=R.ImpureClass:(ie=ge,ge===null||ge===!1||h.isValidElement(ge)||v("105",ne.displayName||ne.name||"Component"),ge=new x(ne),this._compositeType=R.StatelessFunctional),ge.props=K,ge.context=Q,ge.refs=S,ge.updater=ue,this._instance=ge,w.set(ge,this);var ye=ge.state;ye===void 0&&(ge.state=ye=null),(typeof ye!="object"||Array.isArray(ye))&&v("106",this.getName()||"ReactCompositeComponent"),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1;var pe;return pe=ge.unstable_handleError?this.performInitialMountWithErrorHandling(ie,L,Y,I,J):this.performInitialMount(ie,L,Y,I,J),ge.componentDidMount&&I.getReactMountReady().enqueue(ge.componentDidMount,ge),pe},_constructComponent:function(I,L,Y,J){return this._constructComponentWithoutOwner(I,L,Y,J)},_constructComponentWithoutOwner:function(I,L,Y,J){var ie=this._currentElement.type;return I?new ie(L,Y,J):ie(L,Y,J)},performInitialMountWithErrorHandling:function(I,L,Y,J,ie){var K,Q=J.checkpoint();try{K=this.performInitialMount(I,L,Y,J,ie)}catch(ne){J.rollback(Q),this._instance.unstable_handleError(ne),this._pendingStateQueue&&(this._instance.state=this._processPendingState(this._instance.props,this._instance.context)),Q=J.checkpoint(),this._renderedComponent.unmountComponent(!0),J.rollback(Q),K=this.performInitialMount(I,L,Y,J,ie)}return K},performInitialMount:function(I,L,Y,J,ie){var K=this._instance;K.componentWillMount&&(K.componentWillMount(),this._pendingStateQueue&&(K.state=this._processPendingState(K.props,K.context))),I===void 0&&(I=this._renderValidatedComponent());var Q=C.getType(I);this._renderedNodeType=Q;var ne=this._instantiateReactComponent(I,Q!==C.EMPTY);return this._renderedComponent=ne,E.mountComponent(ne,J,L,Y,this._processChildContext(ie),0)},getHostNode:function(){return E.getHostNode(this._renderedComponent)},unmountComponent:function(I){if(this._renderedComponent){var L=this._instance;if(L.componentWillUnmount&&!L._calledComponentWillUnmount)if(L._calledComponentWillUnmount=!0,I){var Y=this.getName()+".componentWillUnmount()";b.invokeGuardedCallback(Y,L.componentWillUnmount.bind(L))}else L.componentWillUnmount();this._renderedComponent&&(E.unmountComponent(this._renderedComponent,I),this._renderedNodeType=null,this._renderedComponent=null,this._instance=null),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=0,this._topLevelWrapper=null,w.remove(L)}},_maskContext:function(I){var L=this._currentElement.type,Y=L.contextTypes;if(!Y)return S;var J={};for(var ie in Y)J[ie]=I[ie];return J},_processContext:function(I){return this._maskContext(I)},_processChildContext:function(I){var L,Y=this._currentElement.type,J=this._instance;if(J.getChildContext&&(L=J.getChildContext()),L){typeof Y.childContextTypes!="object"&&v("107",this.getName()||"ReactCompositeComponent");for(var ie in L)ie in Y.childContextTypes||v("108",this.getName()||"ReactCompositeComponent",ie);return c({},I,L)}return I},_checkContextTypes:function(I,L,Y){},receiveComponent:function(I,L,Y){var J=this._currentElement,ie=this._context;this._pendingElement=null,this.updateComponent(L,J,I,ie,Y)},performUpdateIfNecessary:function(I){this._pendingElement!=null?E.receiveComponent(this,this._pendingElement,I,this._context):this._pendingStateQueue!==null||this._pendingForceUpdate?this.updateComponent(I,this._currentElement,this._currentElement,this._context,this._context):this._updateBatchNumber=null},updateComponent:function(I,L,Y,J,ie){var K=this._instance;K==null&&v("136",this.getName()||"ReactCompositeComponent");var Q,ne=!1;this._context===ie?Q=K.context:(Q=this._processContext(ie),ne=!0);var ue=L.props,fe=Y.props;L!==Y&&(ne=!0),ne&&K.componentWillReceiveProps&&K.componentWillReceiveProps(fe,Q);var ge=this._processPendingState(fe,Q),ye=!0;this._pendingForceUpdate||(K.shouldComponentUpdate?ye=K.shouldComponentUpdate(fe,ge,Q):this._compositeType===R.PureClass&&(ye=!M(ue,fe)||!M(K.state,ge))),this._updateBatchNumber=null,ye?(this._pendingForceUpdate=!1,this._performComponentUpdate(Y,fe,ge,Q,I,ie)):(this._currentElement=Y,this._context=ie,K.props=fe,K.state=ge,K.context=Q)},_processPendingState:function(I,L){var Y=this._instance,J=this._pendingStateQueue,ie=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!J)return Y.state;if(ie&&J.length===1)return J[0];for(var K=c({},ie?J[0]:Y.state),Q=ie?1:0;Q<J.length;Q++){var ne=J[Q];c(K,typeof ne=="function"?ne.call(Y,K,I,L):ne)}return K},_performComponentUpdate:function(I,L,Y,J,ie,K){var Q,ne,ue,fe=this._instance,ge=!!fe.componentDidUpdate;ge&&(Q=fe.props,ne=fe.state,ue=fe.context),fe.componentWillUpdate&&fe.componentWillUpdate(L,Y,J),this._currentElement=I,this._context=K,fe.props=L,fe.state=Y,fe.context=J,this._updateRenderedComponent(ie,K),ge&&ie.getReactMountReady().enqueue(fe.componentDidUpdate.bind(fe,Q,ne,ue),fe)},_updateRenderedComponent:function(I,L){var Y=this._renderedComponent,J=Y._currentElement,ie=this._renderValidatedComponent();if(A(J,ie))E.receiveComponent(Y,ie,I,this._processChildContext(L));else{var K=E.getHostNode(Y);E.unmountComponent(Y,!1);var Q=C.getType(ie);this._renderedNodeType=Q;var ne=this._instantiateReactComponent(ie,Q!==C.EMPTY);this._renderedComponent=ne;var ue=E.mountComponent(ne,I,this._hostParent,this._hostContainerInfo,this._processChildContext(L),0);this._replaceNodeWithMarkup(K,ue,Y)}},_replaceNodeWithMarkup:function(I,L,Y){f.replaceNodeWithMarkup(I,L,Y)},_renderValidatedComponentWithoutOwnerOrContext:function(){return this._instance.render()},_renderValidatedComponent:function(){var I;if(this._compositeType!==R.StatelessFunctional){m.current=this;try{I=this._renderValidatedComponentWithoutOwnerOrContext()}finally{m.current=null}}else I=this._renderValidatedComponentWithoutOwnerOrContext();return I===null||I===!1||h.isValidElement(I)||v("109",this.getName()||"ReactCompositeComponent"),I},attachRef:function(I,L){var Y=this.getPublicInstance();Y==null&&v("110");var J=L.getPublicInstance();(Y.refs===S?Y.refs={}:Y.refs)[I]=J},detachRef:function(I){delete this.getPublicInstance().refs[I]},getName:function(){var I=this._currentElement.type,L=this._instance&&this._instance.constructor;return I.displayName||L&&L.displayName||I.name||L&&L.name||null},getPublicInstance:function(){var I=this._instance;return this._compositeType===R.StatelessFunctional?null:I},_instantiateReactComponent:null};d.exports=N},{113:113,117:117,120:120,121:121,131:131,138:138,142:142,143:143,144:144,28:28,50:50,57:57,58:58,62:62,66:66}],30:[function(s,d,p){"use strict";var x=s(33),l=s(47),_=s(60),v=s(66),c=s(71),h=s(72),f=s(96),m=s(103),b=s(114);s(143),l.inject();var w={findDOMNode:f,render:_.render,unmountComponentAtNode:_.unmountComponentAtNode,version:h,unstable_batchedUpdates:c.batchedUpdates,unstable_renderSubtreeIntoContainer:b};typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({ComponentTree:{getClosestInstanceFromNode:x.getClosestInstanceFromNode,getNodeFromInstance:function(C){return C._renderedComponent&&(C=m(C)),C?x.getNodeFromInstance(C):null}},Mount:_,Reconciler:v}),d.exports=w},{103:103,114:114,143:143,33:33,47:47,60:60,66:66,71:71,72:72,96:96}],31:[function(s,d,p){"use strict";function x(tt){if(tt){var pt=tt._currentElement._owner||null;if(pt){var At=pt.getName();if(At)return" This DOM node was rendered by `"+At+"`."}}return""}function l(tt,pt){pt&&(nt[tt._tag]&&(pt.children!=null||pt.dangerouslySetInnerHTML!=null)&&M("137",tt._tag,tt._currentElement._owner?" Check the render method of "+tt._currentElement._owner.getName()+".":""),pt.dangerouslySetInnerHTML!=null&&(pt.children!=null&&M("60"),typeof pt.dangerouslySetInnerHTML=="object"&&Ue in pt.dangerouslySetInnerHTML||M("61")),pt.style!=null&&typeof pt.style!="object"&&M("62",x(tt)))}function _(tt,pt,At,Tt){if(!(Tt instanceof de)){var Ct=tt._hostContainerInfo,Bt=Ct._node&&Ct._node.nodeType===Ke,nr=Bt?Ct._node:Ct._ownerDocument;Ee(pt,nr),Tt.getReactMountReady().enqueue(v,{inst:tt,registrationName:pt,listener:At})}}function v(){var tt=this;J.putListener(tt.inst,tt.registrationName,tt.listener)}function c(){var tt=this;ue.postMountWrapper(tt)}function h(){var tt=this;ye.postMountWrapper(tt)}function f(){var tt=this;fe.postMountWrapper(tt)}function m(){_e.track(this)}function b(){var tt=this;tt._rootNodeID||M("63");var pt=be(tt);switch(pt||M("64"),tt._tag){case"iframe":case"object":tt._wrapperState.listeners=[K.trapBubbledEvent("topLoad","load",pt)];break;case"video":case"audio":tt._wrapperState.listeners=[];for(var At in Te)Te.hasOwnProperty(At)&&tt._wrapperState.listeners.push(K.trapBubbledEvent(At,Te[At],pt));break;case"source":tt._wrapperState.listeners=[K.trapBubbledEvent("topError","error",pt)];break;case"img":tt._wrapperState.listeners=[K.trapBubbledEvent("topError","error",pt),K.trapBubbledEvent("topLoad","load",pt)];break;case"form":tt._wrapperState.listeners=[K.trapBubbledEvent("topReset","reset",pt),K.trapBubbledEvent("topSubmit","submit",pt)];break;case"input":case"select":case"textarea":tt._wrapperState.listeners=[K.trapBubbledEvent("topInvalid","invalid",pt)]}}function w(){ge.postUpdateWrapper(this)}function C(tt){gt.call(yt,tt)||(dt.test(tt)||M("65",tt),yt[tt]=!0)}function E(tt,pt){return tt.indexOf("-")>=0||pt.is!=null}function S(tt){var pt=tt.type;C(pt),this._currentElement=tt,this._tag=pt.toLowerCase(),this._namespaceURI=null,this._renderedChildren=null,this._previousStyle=null,this._previousStyleCopy=null,this._hostNode=null,this._hostParent=null,this._rootNodeID=0,this._domID=0,this._hostContainerInfo=null,this._wrapperState=null,this._topLevelWrapper=null,this._flags=0}var M=s(113),A=s(144),R=s(2),D=s(5),N=s(9),I=s(10),L=s(11),Y=s(12),J=s(16),ie=s(17),K=s(25),Q=s(32),ne=s(33),ue=s(38),fe=s(39),ge=s(40),ye=s(43),pe=(s(58),s(61)),de=s(68),he=(s(130),s(95)),_e=(s(138),s(110),s(142),s(108)),ve=(s(119),s(143),Q),Z=J.deleteListener,be=ne.getNodeFromInstance,Ee=K.listenTo,De=ie.registrationName__module__s,Fe={string:!0,number:!0},Ue="__html",Qe={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null},Ke=11,Te={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},Ie={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},ke={listing:!0,pre:!0,textarea:!0},nt=A({menuitem:!0},Ie),dt=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,yt={},gt={}.hasOwnProperty,xt=1;S.displayName="ReactDOMComponent",S.Mixin={mountComponent:function(tt,pt,At,Tt){this._rootNodeID=xt++,this._domID=At._idCounter++,this._hostParent=pt,this._hostContainerInfo=At;var Ct=this._currentElement.props;switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":this._wrapperState={listeners:null},tt.getReactMountReady().enqueue(b,this);break;case"input":ue.mountWrapper(this,Ct,pt),Ct=ue.getHostProps(this,Ct),tt.getReactMountReady().enqueue(m,this),tt.getReactMountReady().enqueue(b,this);break;case"option":fe.mountWrapper(this,Ct,pt),Ct=fe.getHostProps(this,Ct);break;case"select":ge.mountWrapper(this,Ct,pt),Ct=ge.getHostProps(this,Ct),tt.getReactMountReady().enqueue(b,this);break;case"textarea":ye.mountWrapper(this,Ct,pt),Ct=ye.getHostProps(this,Ct),tt.getReactMountReady().enqueue(m,this),tt.getReactMountReady().enqueue(b,this)}l(this,Ct);var Bt,nr;pt!=null?(Bt=pt._namespaceURI,nr=pt._tag):At._tag&&(Bt=At._namespaceURI,nr=At._tag),(Bt==null||Bt===I.svg&&nr==="foreignobject")&&(Bt=I.html),Bt===I.html&&(this._tag==="svg"?Bt=I.svg:this._tag==="math"&&(Bt=I.mathml)),this._namespaceURI=Bt;var $t;if(tt.useCreateElement){var It,Lt=At._ownerDocument;if(Bt===I.html)if(this._tag==="script"){var Pt=Lt.createElement("div"),He=this._currentElement.type;Pt.innerHTML="<"+He+"></"+He+">",It=Pt.removeChild(Pt.firstChild)}else It=Ct.is?Lt.createElement(this._currentElement.type,Ct.is):Lt.createElement(this._currentElement.type);else It=Lt.createElementNS(Bt,this._currentElement.type);ne.precacheNode(this,It),this._flags|=ve.hasCachedChildNodes,this._hostParent||Y.setAttributeForRoot(It),this._updateDOMProperties(null,Ct,tt);var Be=N(It);this._createInitialChildren(tt,Ct,Tt,Be),$t=Be}else{var Ge=this._createOpenTagMarkupAndPutListeners(tt,Ct),Re=this._createContentMarkup(tt,Ct,Tt);$t=!Re&&Ie[this._tag]?Ge+"/>":Ge+">"+Re+"</"+this._currentElement.type+">"}switch(this._tag){case"input":tt.getReactMountReady().enqueue(c,this),Ct.autoFocus&&tt.getReactMountReady().enqueue(R.focusDOMComponent,this);break;case"textarea":tt.getReactMountReady().enqueue(h,this),Ct.autoFocus&&tt.getReactMountReady().enqueue(R.focusDOMComponent,this);break;case"select":case"button":Ct.autoFocus&&tt.getReactMountReady().enqueue(R.focusDOMComponent,this);break;case"option":tt.getReactMountReady().enqueue(f,this)}return $t},_createOpenTagMarkupAndPutListeners:function(tt,pt){var At="<"+this._currentElement.type;for(var Tt in pt)if(pt.hasOwnProperty(Tt)){var Ct=pt[Tt];if(Ct!=null)if(De.hasOwnProperty(Tt))Ct&&_(this,Tt,Ct,tt);else{Tt==="style"&&(Ct&&(Ct=this._previousStyleCopy=A({},pt.style)),Ct=D.createMarkupForStyles(Ct,this));var Bt=null;this._tag!=null&&E(this._tag,pt)?Qe.hasOwnProperty(Tt)||(Bt=Y.createMarkupForCustomAttribute(Tt,Ct)):Bt=Y.createMarkupForProperty(Tt,Ct),Bt&&(At+=" "+Bt)}}return tt.renderToStaticMarkup?At:(this._hostParent||(At+=" "+Y.createMarkupForRoot()),At+=" "+Y.createMarkupForID(this._domID))},_createContentMarkup:function(tt,pt,At){var Tt="",Ct=pt.dangerouslySetInnerHTML;if(Ct!=null)Ct.__html!=null&&(Tt=Ct.__html);else{var Bt=Fe[typeof pt.children]?pt.children:null,nr=Bt!=null?null:pt.children;if(Bt!=null)Tt=he(Bt);else if(nr!=null){var $t=this.mountChildren(nr,tt,At);Tt=$t.join("")}}return ke[this._tag]&&Tt.charAt(0)===`
`?`
`+Tt:Tt},_createInitialChildren:function(tt,pt,At,Tt){var Ct=pt.dangerouslySetInnerHTML;if(Ct!=null)Ct.__html!=null&&N.queueHTML(Tt,Ct.__html);else{var Bt=Fe[typeof pt.children]?pt.children:null,nr=Bt!=null?null:pt.children;if(Bt!=null)Bt!==""&&N.queueText(Tt,Bt);else if(nr!=null)for(var $t=this.mountChildren(nr,tt,At),It=0;It<$t.length;It++)N.queueChild(Tt,$t[It])}},receiveComponent:function(tt,pt,At){var Tt=this._currentElement;this._currentElement=tt,this.updateComponent(pt,Tt,tt,At)},updateComponent:function(tt,pt,At,Tt){var Ct=pt.props,Bt=this._currentElement.props;switch(this._tag){case"input":Ct=ue.getHostProps(this,Ct),Bt=ue.getHostProps(this,Bt);break;case"option":Ct=fe.getHostProps(this,Ct),Bt=fe.getHostProps(this,Bt);break;case"select":Ct=ge.getHostProps(this,Ct),Bt=ge.getHostProps(this,Bt);break;case"textarea":Ct=ye.getHostProps(this,Ct),Bt=ye.getHostProps(this,Bt)}switch(l(this,Bt),this._updateDOMProperties(Ct,Bt,tt),this._updateDOMChildren(Ct,Bt,tt,Tt),this._tag){case"input":ue.updateWrapper(this);break;case"textarea":ye.updateWrapper(this);break;case"select":tt.getReactMountReady().enqueue(w,this)}},_updateDOMProperties:function(tt,pt,At){var Tt,Ct,Bt;for(Tt in tt)if(!pt.hasOwnProperty(Tt)&&tt.hasOwnProperty(Tt)&&tt[Tt]!=null)if(Tt==="style"){var nr=this._previousStyleCopy;for(Ct in nr)nr.hasOwnProperty(Ct)&&(Bt=Bt||{},Bt[Ct]="");this._previousStyleCopy=null}else De.hasOwnProperty(Tt)?tt[Tt]&&Z(this,Tt):E(this._tag,tt)?Qe.hasOwnProperty(Tt)||Y.deleteValueForAttribute(be(this),Tt):(L.properties[Tt]||L.isCustomAttribute(Tt))&&Y.deleteValueForProperty(be(this),Tt);for(Tt in pt){var $t=pt[Tt],It=Tt==="style"?this._previousStyleCopy:tt?.[Tt];if(pt.hasOwnProperty(Tt)&&$t!==It&&($t!=null||It!=null)){if(Tt==="style")if($t?$t=this._previousStyleCopy=A({},$t):this._previousStyleCopy=null,It){for(Ct in It)!It.hasOwnProperty(Ct)||$t&&$t.hasOwnProperty(Ct)||(Bt=Bt||{},Bt[Ct]="");for(Ct in $t)$t.hasOwnProperty(Ct)&&It[Ct]!==$t[Ct]&&(Bt=Bt||{},Bt[Ct]=$t[Ct])}else Bt=$t;else if(De.hasOwnProperty(Tt))$t?_(this,Tt,$t,At):It&&Z(this,Tt);else if(E(this._tag,pt))Qe.hasOwnProperty(Tt)||Y.setValueForAttribute(be(this),Tt,$t);else if(L.properties[Tt]||L.isCustomAttribute(Tt)){var Lt=be(this);$t!=null?Y.setValueForProperty(Lt,Tt,$t):Y.deleteValueForProperty(Lt,Tt)}}}Bt&&D.setValueForStyles(be(this),Bt,this)},_updateDOMChildren:function(tt,pt,At,Tt){var Ct=Fe[typeof tt.children]?tt.children:null,Bt=Fe[typeof pt.children]?pt.children:null,nr=tt.dangerouslySetInnerHTML&&tt.dangerouslySetInnerHTML.__html,$t=pt.dangerouslySetInnerHTML&&pt.dangerouslySetInnerHTML.__html,It=Ct!=null?null:tt.children,Lt=Bt!=null?null:pt.children,Pt=Ct!=null||nr!=null,He=Bt!=null||$t!=null;It!=null&&Lt==null?this.updateChildren(null,At,Tt):Pt&&!He&&this.updateTextContent(""),Bt!=null?Ct!==Bt&&this.updateTextContent(""+Bt):$t!=null?nr!==$t&&this.updateMarkup(""+$t):Lt!=null&&this.updateChildren(Lt,At,Tt)},getHostNode:function(){return be(this)},unmountComponent:function(tt){switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":var pt=this._wrapperState.listeners;if(pt)for(var At=0;At<pt.length;At++)pt[At].remove();break;case"input":case"textarea":_e.stopTracking(this);break;case"html":case"head":case"body":M("66",this._tag)}this.unmountChildren(tt),ne.uncacheNode(this),J.deleteAllListeners(this),this._rootNodeID=0,this._domID=0,this._wrapperState=null},getPublicInstance:function(){return be(this)}},A(S.prototype,S.Mixin,pe.Mixin),d.exports=S},{10:10,108:108,11:11,110:110,113:113,119:119,12:12,130:130,138:138,142:142,143:143,144:144,16:16,17:17,2:2,25:25,32:32,33:33,38:38,39:39,40:40,43:43,5:5,58:58,61:61,68:68,9:9,95:95}],32:[function(s,d,p){"use strict";var x={hasCachedChildNodes:1};d.exports=x},{}],33:[function(s,d,p){"use strict";function x(R,D){return R.nodeType===1&&R.getAttribute(E)===String(D)||R.nodeType===8&&R.nodeValue===" react-text: "+D+" "||R.nodeType===8&&R.nodeValue===" react-empty: "+D+" "}function l(R){for(var D;D=R._renderedComponent;)R=D;return R}function _(R,D){var N=l(R);N._hostNode=D,D[M]=N}function v(R){var D=R._hostNode;D&&(delete D[M],R._hostNode=null)}function c(R,D){if(!(R._flags&S.hasCachedChildNodes)){var N=R._renderedChildren,I=D.firstChild;e:for(var L in N)if(N.hasOwnProperty(L)){var Y=N[L],J=l(Y)._domID;if(J!==0){for(;I!==null;I=I.nextSibling)if(x(I,J)){_(Y,I);continue e}b("32",J)}}R._flags|=S.hasCachedChildNodes}}function h(R){if(R[M])return R[M];for(var D=[];!R[M];){if(D.push(R),!R.parentNode)return null;R=R.parentNode}for(var N,I;R&&(I=R[M]);R=D.pop())N=I,D.length&&c(I,R);return N}function f(R){var D=h(R);return D!=null&&D._hostNode===R?D:null}function m(R){if(R._hostNode===void 0&&b("33"),R._hostNode)return R._hostNode;for(var D=[];!R._hostNode;)D.push(R),R._hostParent||b("34"),R=R._hostParent;for(;D.length;R=D.pop())c(R,R._hostNode);return R._hostNode}var b=s(113),w=s(11),C=s(32),E=(s(138),w.ID_ATTRIBUTE_NAME),S=C,M="__reactInternalInstance$"+Math.random().toString(36).slice(2),A={getClosestInstanceFromNode:h,getInstanceFromNode:f,getNodeFromInstance:m,precacheChildNodes:c,precacheNode:_,uncacheNode:v};d.exports=A},{11:11,113:113,138:138,32:32}],34:[function(s,d,p){"use strict";function x(_,v){return{_topLevelWrapper:_,_idCounter:1,_ownerDocument:v?v.nodeType===l?v:v.ownerDocument:null,_node:v,_tag:v?v.nodeName.toLowerCase():null,_namespaceURI:v?v.namespaceURI:null}}var l=(s(119),9);d.exports=x},{119:119}],35:[function(s,d,p){"use strict";var x=s(144),l=s(9),_=s(33),v=function(c){this._currentElement=null,this._hostNode=null,this._hostParent=null,this._hostContainerInfo=null,this._domID=0};x(v.prototype,{mountComponent:function(c,h,f,m){var b=f._idCounter++;this._domID=b,this._hostParent=h,this._hostContainerInfo=f;var w=" react-empty: "+this._domID+" ";if(c.useCreateElement){var C=f._ownerDocument,E=C.createComment(w);return _.precacheNode(this,E),l(E)}return c.renderToStaticMarkup?"":"<!--"+w+"-->"},receiveComponent:function(){},getHostNode:function(){return _.getNodeFromInstance(this)},unmountComponent:function(){_.uncacheNode(this)}}),d.exports=v},{144:144,33:33,9:9}],36:[function(s,d,p){"use strict";var x={useCreateElement:!0,useFiber:!1};d.exports=x},{}],37:[function(s,d,p){"use strict";var x=s(8),l=s(33),_={dangerouslyProcessChildrenUpdates:function(v,c){var h=l.getNodeFromInstance(v);x.processUpdates(h,c)}};d.exports=_},{33:33,8:8}],38:[function(s,d,p){"use strict";function x(){this._rootNodeID&&w.updateWrapper(this)}function l(C){return C.type==="checkbox"||C.type==="radio"?C.checked!=null:C.value!=null}function _(C){var E=this._currentElement.props,S=f.executeOnChange(E,C);b.asap(x,this);var M=E.name;if(E.type==="radio"&&M!=null){for(var A=m.getNodeFromInstance(this),R=A;R.parentNode;)R=R.parentNode;for(var D=R.querySelectorAll("input[name="+JSON.stringify(""+M)+'][type="radio"]'),N=0;N<D.length;N++){var I=D[N];if(I!==A&&I.form===A.form){var L=m.getInstanceFromNode(I);L||v("90"),b.asap(x,L)}}}return S}var v=s(113),c=s(144),h=s(12),f=s(23),m=s(33),b=s(71),w=(s(138),s(143),{getHostProps:function(C,E){var S=f.getValue(E),M=f.getChecked(E);return c({type:void 0,step:void 0,min:void 0,max:void 0},E,{defaultChecked:void 0,defaultValue:void 0,value:S??C._wrapperState.initialValue,checked:M??C._wrapperState.initialChecked,onChange:C._wrapperState.onChange})},mountWrapper:function(C,E){var S=E.defaultValue;C._wrapperState={initialChecked:E.checked!=null?E.checked:E.defaultChecked,initialValue:E.value!=null?E.value:S,listeners:null,onChange:_.bind(C),controlled:l(E)}},updateWrapper:function(C){var E=C._currentElement.props,S=E.checked;S!=null&&h.setValueForProperty(m.getNodeFromInstance(C),"checked",S||!1);var M=m.getNodeFromInstance(C),A=f.getValue(E);if(A!=null)if(A===0&&M.value==="")M.value="0";else if(E.type==="number"){var R=parseFloat(M.value,10)||0;(A!=R||A==R&&M.value!=A)&&(M.value=""+A)}else M.value!==""+A&&(M.value=""+A);else E.value==null&&E.defaultValue!=null&&M.defaultValue!==""+E.defaultValue&&(M.defaultValue=""+E.defaultValue),E.checked==null&&E.defaultChecked!=null&&(M.defaultChecked=!!E.defaultChecked)},postMountWrapper:function(C){var E=C._currentElement.props,S=m.getNodeFromInstance(C);switch(E.type){case"submit":case"reset":break;case"color":case"date":case"datetime":case"datetime-local":case"month":case"time":case"week":S.value="",S.value=S.defaultValue;break;default:S.value=S.value}var M=S.name;M!==""&&(S.name=""),S.defaultChecked=!S.defaultChecked,S.defaultChecked=!S.defaultChecked,M!==""&&(S.name=M)}});d.exports=w},{113:113,12:12,138:138,143:143,144:144,23:23,33:33,71:71}],39:[function(s,d,p){"use strict";function x(m){var b="";return _.Children.forEach(m,function(w){w!=null&&(typeof w=="string"||typeof w=="number"?b+=w:h||(h=!0))}),b}var l=s(144),_=s(121),v=s(33),c=s(40),h=(s(143),!1),f={mountWrapper:function(m,b,w){var C=null;if(w!=null){var E=w;E._tag==="optgroup"&&(E=E._hostParent),E!=null&&E._tag==="select"&&(C=c.getSelectValueContext(E))}var S=null;if(C!=null){var M;if(M=b.value!=null?b.value+"":x(b.children),S=!1,Array.isArray(C)){for(var A=0;A<C.length;A++)if(""+C[A]===M){S=!0;break}}else S=""+C===M}m._wrapperState={selected:S}},postMountWrapper:function(m){var b=m._currentElement.props;b.value!=null&&v.getNodeFromInstance(m).setAttribute("value",b.value)},getHostProps:function(m,b){var w=l({selected:void 0,children:void 0},b);m._wrapperState.selected!=null&&(w.selected=m._wrapperState.selected);var C=x(b.children);return C&&(w.children=C),w}};d.exports=f},{121:121,143:143,144:144,33:33,40:40}],40:[function(s,d,p){"use strict";function x(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=!1;var w=this._currentElement.props,C=c.getValue(w);C!=null&&l(this,!!w.multiple,C)}}function l(w,C,E){var S,M,A=h.getNodeFromInstance(w).options;if(C){for(S={},M=0;M<E.length;M++)S[""+E[M]]=!0;for(M=0;M<A.length;M++){var R=S.hasOwnProperty(A[M].value);A[M].selected!==R&&(A[M].selected=R)}}else{for(S=""+E,M=0;M<A.length;M++)if(A[M].value===S)return void(A[M].selected=!0);A.length&&(A[0].selected=!0)}}function _(w){var C=this._currentElement.props,E=c.executeOnChange(C,w);return this._rootNodeID&&(this._wrapperState.pendingUpdate=!0),f.asap(x,this),E}var v=s(144),c=s(23),h=s(33),f=s(71),m=(s(143),!1),b={getHostProps:function(w,C){return v({},C,{onChange:w._wrapperState.onChange,value:void 0})},mountWrapper:function(w,C){var E=c.getValue(C);w._wrapperState={pendingUpdate:!1,initialValue:E??C.defaultValue,listeners:null,onChange:_.bind(w),wasMultiple:!!C.multiple},C.value===void 0||C.defaultValue===void 0||m||(m=!0)},getSelectValueContext:function(w){return w._wrapperState.initialValue},postUpdateWrapper:function(w){var C=w._currentElement.props;w._wrapperState.initialValue=void 0;var E=w._wrapperState.wasMultiple;w._wrapperState.wasMultiple=!!C.multiple;var S=c.getValue(C);S!=null?(w._wrapperState.pendingUpdate=!1,l(w,!!C.multiple,S)):E!==!!C.multiple&&(C.defaultValue!=null?l(w,!!C.multiple,C.defaultValue):l(w,!!C.multiple,C.multiple?[]:""))}};d.exports=b},{143:143,144:144,23:23,33:33,71:71}],41:[function(s,d,p){"use strict";function x(C,E,S,M){return C===S&&E===M}function l(C){var E=document.selection,S=E.createRange(),M=S.text.length,A=S.duplicate();A.moveToElementText(C),A.setEndPoint("EndToStart",S);var R=A.text.length;return{start:R,end:R+M}}function _(C){var E=window.getSelection&&window.getSelection();if(!E||E.rangeCount===0)return null;var S=E.anchorNode,M=E.anchorOffset,A=E.focusNode,R=E.focusOffset,D=E.getRangeAt(0);try{D.startContainer.nodeType,D.endContainer.nodeType}catch{return null}var N=x(E.anchorNode,E.anchorOffset,E.focusNode,E.focusOffset),I=N?0:D.toString().length,L=D.cloneRange();L.selectNodeContents(C),L.setEnd(D.startContainer,D.startOffset);var Y=x(L.startContainer,L.startOffset,L.endContainer,L.endOffset),J=Y?0:L.toString().length,ie=J+I,K=document.createRange();K.setStart(S,M),K.setEnd(A,R);var Q=K.collapsed;return{start:Q?ie:J,end:Q?J:ie}}function v(C,E){var S,M,A=document.selection.createRange().duplicate();E.end===void 0?(S=E.start,M=S):E.start>E.end?(S=E.end,M=E.start):(S=E.start,M=E.end),A.moveToElementText(C),A.moveStart("character",S),A.setEndPoint("EndToStart",A),A.moveEnd("character",M-S),A.select()}function c(C,E){if(window.getSelection){var S=window.getSelection(),M=C[m()].length,A=Math.min(E.start,M),R=E.end===void 0?A:Math.min(E.end,M);if(!S.extend&&A>R){var D=R;R=A,A=D}var N=f(C,A),I=f(C,R);if(N&&I){var L=document.createRange();L.setStart(N.node,N.offset),S.removeAllRanges(),A>R?(S.addRange(L),S.extend(I.node,I.offset)):(L.setEnd(I.node,I.offset),S.addRange(L))}}}var h=s(124),f=s(105),m=s(106),b=h.canUseDOM&&"selection"in document&&!("getSelection"in window),w={getOffsets:b?l:_,setOffsets:b?v:c};d.exports=w},{105:105,106:106,124:124}],42:[function(s,d,p){"use strict";var x=s(113),l=s(144),_=s(8),v=s(9),c=s(33),h=s(95),f=(s(138),s(119),function(m){this._currentElement=m,this._stringText=""+m,this._hostNode=null,this._hostParent=null,this._domID=0,this._mountIndex=0,this._closingComment=null,this._commentNodes=null});l(f.prototype,{mountComponent:function(m,b,w,C){var E=w._idCounter++,S=" react-text: "+E+" ";if(this._domID=E,this._hostParent=b,m.useCreateElement){var M=w._ownerDocument,A=M.createComment(S),R=M.createComment(" /react-text "),D=v(M.createDocumentFragment());return v.queueChild(D,v(A)),this._stringText&&v.queueChild(D,v(M.createTextNode(this._stringText))),v.queueChild(D,v(R)),c.precacheNode(this,A),this._closingComment=R,D}var N=h(this._stringText);return m.renderToStaticMarkup?N:"<!--"+S+"-->"+N+"<!-- /react-text -->"},receiveComponent:function(m,b){if(m!==this._currentElement){this._currentElement=m;var w=""+m;if(w!==this._stringText){this._stringText=w;var C=this.getHostNode();_.replaceDelimitedText(C[0],C[1],w)}}},getHostNode:function(){var m=this._commentNodes;if(m)return m;if(!this._closingComment)for(var b=c.getNodeFromInstance(this),w=b.nextSibling;;){if(w==null&&x("67",this._domID),w.nodeType===8&&w.nodeValue===" /react-text "){this._closingComment=w;break}w=w.nextSibling}return m=[this._hostNode,this._closingComment],this._commentNodes=m,m},unmountComponent:function(){this._closingComment=null,this._commentNodes=null,c.uncacheNode(this)}}),d.exports=f},{113:113,119:119,138:138,144:144,33:33,8:8,9:9,95:95}],43:[function(s,d,p){"use strict";function x(){this._rootNodeID&&m.updateWrapper(this)}function l(b){var w=this._currentElement.props,C=c.executeOnChange(w,b);return f.asap(x,this),C}var _=s(113),v=s(144),c=s(23),h=s(33),f=s(71),m=(s(138),s(143),{getHostProps:function(b,w){return w.dangerouslySetInnerHTML!=null&&_("91"),v({},w,{value:void 0,defaultValue:void 0,children:""+b._wrapperState.initialValue,onChange:b._wrapperState.onChange})},mountWrapper:function(b,w){var C=c.getValue(w),E=C;if(C==null){var S=w.defaultValue,M=w.children;M!=null&&(S!=null&&_("92"),Array.isArray(M)&&(M.length<=1||_("93"),M=M[0]),S=""+M),S==null&&(S=""),E=S}b._wrapperState={initialValue:""+E,listeners:null,onChange:l.bind(b)}},updateWrapper:function(b){var w=b._currentElement.props,C=h.getNodeFromInstance(b),E=c.getValue(w);if(E!=null){var S=""+E;S!==C.value&&(C.value=S),w.defaultValue==null&&(C.defaultValue=S)}w.defaultValue!=null&&(C.defaultValue=w.defaultValue)},postMountWrapper:function(b){var w=h.getNodeFromInstance(b),C=w.textContent;C===b._wrapperState.initialValue&&(w.value=C)}});d.exports=m},{113:113,138:138,143:143,144:144,23:23,33:33,71:71}],44:[function(s,d,p){"use strict";function x(f,m){"_hostNode"in f||h("33"),"_hostNode"in m||h("33");for(var b=0,w=f;w;w=w._hostParent)b++;for(var C=0,E=m;E;E=E._hostParent)C++;for(;b-C>0;)f=f._hostParent,b--;for(;C-b>0;)m=m._hostParent,C--;for(var S=b;S--;){if(f===m)return f;f=f._hostParent,m=m._hostParent}return null}function l(f,m){for(("_hostNode"in f)||h("35"),("_hostNode"in m)||h("35");m;){if(m===f)return!0;m=m._hostParent}return!1}function _(f){return"_hostNode"in f||h("36"),f._hostParent}function v(f,m,b){for(var w=[];f;)w.push(f),f=f._hostParent;var C;for(C=w.length;C-- >0;)m(w[C],"captured",b);for(C=0;C<w.length;C++)m(w[C],"bubbled",b)}function c(f,m,b,w,C){for(var E=f&&m?x(f,m):null,S=[];f&&f!==E;)S.push(f),f=f._hostParent;for(var M=[];m&&m!==E;)M.push(m),m=m._hostParent;var A;for(A=0;A<S.length;A++)b(S[A],"bubbled",w);for(A=M.length;A-- >0;)b(M[A],"captured",C)}var h=s(113);s(138),d.exports={isAncestor:l,getLowestCommonAncestor:x,getParentInstance:_,traverseTwoPhase:v,traverseEnterLeave:c}},{113:113,138:138}],45:[function(s,d,p){"use strict";var x=s(121),l=s(30),_=l;x.addons&&(x.__SECRET_INJECTED_REACT_DOM_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_),d.exports=_},{121:121,30:30}],46:[function(s,d,p){"use strict";function x(){this.reinitializeTransaction()}var l=s(144),_=s(71),v=s(89),c=s(130),h={initialize:c,close:function(){w.isBatchingUpdates=!1}},f={initialize:c,close:_.flushBatchedUpdates.bind(_)},m=[f,h];l(x.prototype,v,{getTransactionWrappers:function(){return m}});var b=new x,w={isBatchingUpdates:!1,batchedUpdates:function(C,E,S,M,A,R){var D=w.isBatchingUpdates;return w.isBatchingUpdates=!0,D?C(E,S,M,A,R):b.perform(C,null,E,S,M,A,R)}};d.exports=w},{130:130,144:144,71:71,89:89}],47:[function(s,d,p){"use strict";function x(){Y||(Y=!0,R.EventEmitter.injectReactEventListener(A),R.EventPluginHub.injectEventPluginOrder(c),R.EventPluginUtils.injectComponentTree(w),R.EventPluginUtils.injectTreeTraversal(E),R.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:L,EnterLeaveEventPlugin:h,ChangeEventPlugin:v,SelectEventPlugin:I,BeforeInputEventPlugin:_}),R.HostComponent.injectGenericComponentClass(b),R.HostComponent.injectTextComponentClass(S),R.DOMProperty.injectDOMPropertyConfig(l),R.DOMProperty.injectDOMPropertyConfig(f),R.DOMProperty.injectDOMPropertyConfig(N),R.EmptyComponent.injectEmptyComponentFactory(function(J){return new C(J)}),R.Updates.injectReconcileTransaction(D),R.Updates.injectBatchingStrategy(M),R.Component.injectEnvironment(m))}var l=s(1),_=s(3),v=s(7),c=s(14),h=s(15),f=s(21),m=s(27),b=s(31),w=s(33),C=s(35),E=s(44),S=s(42),M=s(46),A=s(52),R=s(55),D=s(65),N=s(73),I=s(74),L=s(75),Y=!1;d.exports={inject:x}},{1:1,14:14,15:15,21:21,27:27,3:3,31:31,33:33,35:35,42:42,44:44,46:46,52:52,55:55,65:65,7:7,73:73,74:74,75:75}],48:[function(s,d,p){"use strict";var x=typeof Symbol=="function"&&Symbol.for&&Symbol.for("react.element")||60103;d.exports=x},{}],49:[function(s,d,p){"use strict";var x,l={injectEmptyComponentFactory:function(v){x=v}},_={create:function(v){return x(v)}};_.injection=l,d.exports=_},{}],50:[function(s,d,p){"use strict";function x(v,c,h){try{c(h)}catch(f){l===null&&(l=f)}}var l=null,_={invokeGuardedCallback:x,invokeGuardedCallbackWithCatch:x,rethrowCaughtError:function(){if(l){var v=l;throw l=null,v}}};d.exports=_},{}],51:[function(s,d,p){"use strict";function x(v){l.enqueueEvents(v),l.processEventQueue(!1)}var l=s(16),_={handleTopLevel:function(v,c,h,f){x(l.extractEvents(v,c,h,f))}};d.exports=_},{16:16}],52:[function(s,d,p){"use strict";function x(M){for(;M._hostParent;)M=M._hostParent;var A=b.getNodeFromInstance(M),R=A.parentNode;return b.getClosestInstanceFromNode(R)}function l(M,A){this.topLevelType=M,this.nativeEvent=A,this.ancestors=[]}function _(M){var A=C(M.nativeEvent),R=b.getClosestInstanceFromNode(A),D=R;do M.ancestors.push(D),D=D&&x(D);while(D);for(var N=0;N<M.ancestors.length;N++)R=M.ancestors[N],S._handleTopLevel(M.topLevelType,R,M.nativeEvent,C(M.nativeEvent))}function v(M){M(E(window))}var c=s(144),h=s(123),f=s(124),m=s(24),b=s(33),w=s(71),C=s(102),E=s(135);c(l.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),m.addPoolingTo(l,m.twoArgumentPooler);var S={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:f.canUseDOM?window:null,setHandleTopLevel:function(M){S._handleTopLevel=M},setEnabled:function(M){S._enabled=!!M},isEnabled:function(){return S._enabled},trapBubbledEvent:function(M,A,R){return R?h.listen(R,A,S.dispatchEvent.bind(null,M)):null},trapCapturedEvent:function(M,A,R){return R?h.capture(R,A,S.dispatchEvent.bind(null,M)):null},monitorScrollValue:function(M){var A=v.bind(null,M);h.listen(window,"scroll",A)},dispatchEvent:function(M,A){if(S._enabled){var R=l.getPooled(M,A);try{w.batchedUpdates(_,R)}finally{l.release(R)}}}};d.exports=S},{102:102,123:123,124:124,135:135,144:144,24:24,33:33,71:71}],53:[function(s,d,p){"use strict";var x={logTopLevelRenders:!1};d.exports=x},{}],54:[function(s,d,p){"use strict";function x(b){return c||v("111",b.type),new c(b)}function l(b){return new h(b)}function _(b){return b instanceof h}var v=s(113),c=(s(138),null),h=null,f={injectGenericComponentClass:function(b){c=b},injectTextComponentClass:function(b){h=b}},m={createInternalComponent:x,createInstanceForText:l,isTextComponent:_,injection:f};d.exports=m},{113:113,138:138}],55:[function(s,d,p){"use strict";var x=s(11),l=s(16),_=s(18),v=s(28),c=s(49),h=s(25),f=s(54),m=s(71),b={Component:v.injection,DOMProperty:x.injection,EmptyComponent:c.injection,EventPluginHub:l.injection,EventPluginUtils:_.injection,EventEmitter:h.injection,HostComponent:f.injection,Updates:m.injection};d.exports=b},{11:11,16:16,18:18,25:25,28:28,49:49,54:54,71:71}],56:[function(s,d,p){"use strict";function x(f){return _(document.documentElement,f)}var l=s(41),_=s(127),v=s(132),c=s(133),h={hasSelectionCapabilities:function(f){var m=f&&f.nodeName&&f.nodeName.toLowerCase();return m&&(m==="input"&&f.type==="text"||m==="textarea"||f.contentEditable==="true")},getSelectionInformation:function(){var f=c();return{focusedElem:f,selectionRange:h.hasSelectionCapabilities(f)?h.getSelection(f):null}},restoreSelection:function(f){var m=c(),b=f.focusedElem,w=f.selectionRange;m!==b&&x(b)&&(h.hasSelectionCapabilities(b)&&h.setSelection(b,w),v(b))},getSelection:function(f){var m;if("selectionStart"in f)m={start:f.selectionStart,end:f.selectionEnd};else if(document.selection&&f.nodeName&&f.nodeName.toLowerCase()==="input"){var b=document.selection.createRange();b.parentElement()===f&&(m={start:-b.moveStart("character",-f.value.length),end:-b.moveEnd("character",-f.value.length)})}else m=l.getOffsets(f);return m||{start:0,end:0}},setSelection:function(f,m){var b=m.start,w=m.end;if(w===void 0&&(w=b),"selectionStart"in f)f.selectionStart=b,f.selectionEnd=Math.min(w,f.value.length);else if(document.selection&&f.nodeName&&f.nodeName.toLowerCase()==="input"){var C=f.createTextRange();C.collapse(!0),C.moveStart("character",b),C.moveEnd("character",w-b),C.select()}else l.setOffsets(f,m)}};d.exports=h},{127:127,132:132,133:133,41:41}],57:[function(s,d,p){"use strict";var x={remove:function(l){l._reactInternalInstance=void 0},get:function(l){return l._reactInternalInstance},has:function(l){return l._reactInternalInstance!==void 0},set:function(l,_){l._reactInternalInstance=_}};d.exports=x},{}],58:[function(s,d,p){"use strict";d.exports={debugTool:null}},{}],59:[function(s,d,p){"use strict";var x=s(92),l=/\/?>/,_=/^<\!\-\-/,v={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(c){var h=x(c);return _.test(c)?c:c.replace(l," "+v.CHECKSUM_ATTR_NAME+'="'+h+'"$&')},canReuseMarkup:function(c,h){var f=h.getAttribute(v.CHECKSUM_ATTR_NAME);return f=f&&parseInt(f,10),x(c)===f}};d.exports=v},{92:92}],60:[function(s,d,p){"use strict";function x(Ee,De){for(var Fe=Math.min(Ee.length,De.length),Ue=0;Ue<Fe;Ue++)if(Ee.charAt(Ue)!==De.charAt(Ue))return Ue;return Ee.length===De.length?-1:Fe}function l(Ee){return Ee?Ee.nodeType===de?Ee.documentElement:Ee.firstChild:null}function _(Ee){return Ee.getAttribute&&Ee.getAttribute(ge)||""}function v(Ee,De,Fe,Ue,Qe){var Ke;if(I.logTopLevelRenders){var Te=Ee._currentElement.props.child,Ie=Te.type;Ke="React mount: "+(typeof Ie=="string"?Ie:Ie.displayName||Ie.name),console.time(Ke)}var ke=J.mountComponent(Ee,Fe,null,D(Ee,De),Qe,0);Ke&&console.timeEnd(Ke),Ee._renderedComponent._topLevelWrapper=Ee,be._mountImageIntoNode(ke,De,Ee,Ue,Fe)}function c(Ee,De,Fe,Ue){var Qe=K.ReactReconcileTransaction.getPooled(!Fe&&N.useCreateElement);Qe.perform(v,null,Ee,De,Qe,Fe,Ue),K.ReactReconcileTransaction.release(Qe)}function h(Ee,De,Fe){for(J.unmountComponent(Ee,Fe),De.nodeType===de&&(De=De.documentElement);De.lastChild;)De.removeChild(De.lastChild)}function f(Ee){var De=l(Ee);if(De){var Fe=R.getInstanceFromNode(De);return!(!Fe||!Fe._hostParent)}}function m(Ee){return!(!Ee||Ee.nodeType!==pe&&Ee.nodeType!==de&&Ee.nodeType!==he)}function b(Ee){var De=l(Ee),Fe=De&&R.getInstanceFromNode(De);return Fe&&!Fe._hostParent?Fe:null}function w(Ee){var De=b(Ee);return De?De._hostContainerInfo._topLevelWrapper:null}var C=s(113),E=s(9),S=s(11),M=s(121),A=s(25),R=(s(120),s(33)),D=s(34),N=s(36),I=s(53),L=s(57),Y=(s(58),s(59)),J=s(66),ie=s(70),K=s(71),Q=s(131),ne=s(109),ue=(s(138),s(115)),fe=s(117),ge=(s(143),S.ID_ATTRIBUTE_NAME),ye=S.ROOT_ATTRIBUTE_NAME,pe=1,de=9,he=11,_e={},ve=1,Z=function(){this.rootID=ve++};Z.prototype.isReactComponent={},Z.prototype.render=function(){return this.props.child},Z.isReactTopLevelWrapper=!0;var be={TopLevelWrapper:Z,_instancesByReactRootID:_e,scrollMonitor:function(Ee,De){De()},_updateRootComponent:function(Ee,De,Fe,Ue,Qe){return be.scrollMonitor(Ue,function(){ie.enqueueElementInternal(Ee,De,Fe),Qe&&ie.enqueueCallbackInternal(Ee,Qe)}),Ee},_renderNewRootComponent:function(Ee,De,Fe,Ue){m(De)||C("37"),A.ensureScrollValueMonitoring();var Qe=ne(Ee,!1);K.batchedUpdates(c,Qe,De,Fe,Ue);var Ke=Qe._instance.rootID;return _e[Ke]=Qe,Qe},renderSubtreeIntoContainer:function(Ee,De,Fe,Ue){return Ee!=null&&L.has(Ee)||C("38"),be._renderSubtreeIntoContainer(Ee,De,Fe,Ue)},_renderSubtreeIntoContainer:function(Ee,De,Fe,Ue){ie.validateCallback(Ue,"ReactDOM.render"),M.isValidElement(De)||C("39",typeof De=="string"?" Instead of passing a string like 'div', pass React.createElement('div') or <div />.":typeof De=="function"?" Instead of passing a class like Foo, pass React.createElement(Foo) or <Foo />.":De!=null&&De.props!==void 0?" This may be caused by unintentionally loading two independent copies of React.":"");var Qe,Ke=M.createElement(Z,{child:De});if(Ee){var Te=L.get(Ee);Qe=Te._processChildContext(Te._context)}else Qe=Q;var Ie=w(Fe);if(Ie){var ke=Ie._currentElement,nt=ke.props.child;if(fe(nt,De)){var dt=Ie._renderedComponent.getPublicInstance(),yt=Ue&&function(){Ue.call(dt)};return be._updateRootComponent(Ie,Ke,Qe,Fe,yt),dt}be.unmountComponentAtNode(Fe)}var gt=l(Fe),xt=gt&&!!_(gt),tt=f(Fe),pt=xt&&!Ie&&!tt,At=be._renderNewRootComponent(Ke,Fe,pt,Qe)._renderedComponent.getPublicInstance();return Ue&&Ue.call(At),At},render:function(Ee,De,Fe){return be._renderSubtreeIntoContainer(null,Ee,De,Fe)},unmountComponentAtNode:function(Ee){m(Ee)||C("40");var De=w(Ee);return De?(delete _e[De._instance.rootID],K.batchedUpdates(h,De,Ee,!1),!0):(f(Ee),Ee.nodeType===1&&Ee.hasAttribute(ye),!1)},_mountImageIntoNode:function(Ee,De,Fe,Ue,Qe){if(m(De)||C("41"),Ue){var Ke=l(De);if(Y.canReuseMarkup(Ee,Ke))return void R.precacheNode(Fe,Ke);var Te=Ke.getAttribute(Y.CHECKSUM_ATTR_NAME);Ke.removeAttribute(Y.CHECKSUM_ATTR_NAME);var Ie=Ke.outerHTML;Ke.setAttribute(Y.CHECKSUM_ATTR_NAME,Te);var ke=Ee,nt=x(ke,Ie),dt=" (client) "+ke.substring(nt-20,nt+20)+`
 (server) `+Ie.substring(nt-20,nt+20);De.nodeType===de&&C("42",dt)}if(De.nodeType===de&&C("43"),Qe.useCreateElement){for(;De.lastChild;)De.removeChild(De.lastChild);E.insertTreeBefore(De,Ee,null)}else ue(De,Ee),R.precacheNode(Fe,De.firstChild)}};d.exports=be},{109:109,11:11,113:113,115:115,117:117,120:120,121:121,131:131,138:138,143:143,25:25,33:33,34:34,36:36,53:53,57:57,58:58,59:59,66:66,70:70,71:71,9:9}],61:[function(s,d,p){"use strict";function x(M,A,R){return{type:"INSERT_MARKUP",content:M,fromIndex:null,fromNode:null,toIndex:R,afterNode:A}}function l(M,A,R){return{type:"MOVE_EXISTING",content:null,fromIndex:M._mountIndex,fromNode:w.getHostNode(M),toIndex:R,afterNode:A}}function _(M,A){return{type:"REMOVE_NODE",content:null,fromIndex:M._mountIndex,fromNode:A,toIndex:null,afterNode:null}}function v(M){return{type:"SET_MARKUP",content:M,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function c(M){return{type:"TEXT_CONTENT",content:M,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function h(M,A){return A&&(M=M||[],M.push(A)),M}function f(M,A){b.processChildrenUpdates(M,A)}var m=s(113),b=s(28),w=(s(57),s(58),s(120),s(66)),C=s(26),E=(s(130),s(97)),S=(s(138),{Mixin:{_reconcilerInstantiateChildren:function(M,A,R){return C.instantiateChildren(M,A,R)},_reconcilerUpdateChildren:function(M,A,R,D,N,I){var L;return L=E(A,0),C.updateChildren(M,L,R,D,N,this,this._hostContainerInfo,I,0),L},mountChildren:function(M,A,R){var D=this._reconcilerInstantiateChildren(M,A,R);this._renderedChildren=D;var N=[],I=0;for(var L in D)if(D.hasOwnProperty(L)){var Y=D[L],J=w.mountComponent(Y,A,this,this._hostContainerInfo,R,0);Y._mountIndex=I++,N.push(J)}return N},updateTextContent:function(M){var A=this._renderedChildren;C.unmountChildren(A,!1);for(var R in A)A.hasOwnProperty(R)&&m("118");f(this,[c(M)])},updateMarkup:function(M){var A=this._renderedChildren;C.unmountChildren(A,!1);for(var R in A)A.hasOwnProperty(R)&&m("118");f(this,[v(M)])},updateChildren:function(M,A,R){this._updateChildren(M,A,R)},_updateChildren:function(M,A,R){var D=this._renderedChildren,N={},I=[],L=this._reconcilerUpdateChildren(D,M,I,N,A,R);if(L||D){var Y,J=null,ie=0,K=0,Q=0,ne=null;for(Y in L)if(L.hasOwnProperty(Y)){var ue=D&&D[Y],fe=L[Y];ue===fe?(J=h(J,this.moveChild(ue,ne,ie,K)),K=Math.max(ue._mountIndex,K),ue._mountIndex=ie):(ue&&(K=Math.max(ue._mountIndex,K)),J=h(J,this._mountChildAtIndex(fe,I[Q],ne,ie,A,R)),Q++),ie++,ne=w.getHostNode(fe)}for(Y in N)N.hasOwnProperty(Y)&&(J=h(J,this._unmountChild(D[Y],N[Y])));J&&f(this,J),this._renderedChildren=L}},unmountChildren:function(M){var A=this._renderedChildren;C.unmountChildren(A,M),this._renderedChildren=null},moveChild:function(M,A,R,D){if(M._mountIndex<D)return l(M,A,R)},createChild:function(M,A,R){return x(R,A,M._mountIndex)},removeChild:function(M,A){return _(M,A)},_mountChildAtIndex:function(M,A,R,D,N,I){return M._mountIndex=D,this.createChild(M,R,A)},_unmountChild:function(M,A){var R=this.removeChild(M,A);return M._mountIndex=null,R}}});d.exports=S},{113:113,120:120,130:130,138:138,26:26,28:28,57:57,58:58,66:66,97:97}],62:[function(s,d,p){"use strict";var x=s(113),l=s(121),_=(s(138),{HOST:0,COMPOSITE:1,EMPTY:2,getType:function(v){return v===null||v===!1?_.EMPTY:l.isValidElement(v)?typeof v.type=="function"?_.COMPOSITE:_.HOST:void x("26",v)}});d.exports=_},{113:113,121:121,138:138}],63:[function(s,d,p){"use strict";function x(v){return!(!v||typeof v.attachRef!="function"||typeof v.detachRef!="function")}var l=s(113),_=(s(138),{addComponentAsRefTo:function(v,c,h){x(h)||l("119"),h.attachRef(c,v)},removeComponentAsRefFrom:function(v,c,h){x(h)||l("120");var f=h.getPublicInstance();f&&f.refs[c]===v.getPublicInstance()&&h.detachRef(c)}});d.exports=_},{113:113,138:138}],64:[function(s,d,p){"use strict";d.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},{}],65:[function(s,d,p){"use strict";function x(M){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=_.getPooled(null),this.useCreateElement=M}var l=s(144),_=s(6),v=s(24),c=s(25),h=s(56),f=(s(58),s(89)),m=s(70),b={initialize:h.getSelectionInformation,close:h.restoreSelection},w={initialize:function(){var M=c.isEnabled();return c.setEnabled(!1),M},close:function(M){c.setEnabled(M)}},C={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},E=[b,w,C],S={getTransactionWrappers:function(){return E},getReactMountReady:function(){return this.reactMountReady},getUpdateQueue:function(){return m},checkpoint:function(){return this.reactMountReady.checkpoint()},rollback:function(M){this.reactMountReady.rollback(M)},destructor:function(){_.release(this.reactMountReady),this.reactMountReady=null}};l(x.prototype,f,S),v.addPoolingTo(x),d.exports=x},{144:144,24:24,25:25,56:56,58:58,6:6,70:70,89:89}],66:[function(s,d,p){"use strict";function x(){l.attachRefs(this,this._currentElement)}var l=s(67),_=(s(58),s(143),{mountComponent:function(v,c,h,f,m,b){var w=v.mountComponent(c,h,f,m,b);return v._currentElement&&v._currentElement.ref!=null&&c.getReactMountReady().enqueue(x,v),w},getHostNode:function(v){return v.getHostNode()},unmountComponent:function(v,c){l.detachRefs(v,v._currentElement),v.unmountComponent(c)},receiveComponent:function(v,c,h,f){var m=v._currentElement;if(c!==m||f!==v._context){var b=l.shouldUpdateRefs(m,c);b&&l.detachRefs(v,m),v.receiveComponent(c,h,f),b&&v._currentElement&&v._currentElement.ref!=null&&h.getReactMountReady().enqueue(x,v)}},performUpdateIfNecessary:function(v,c,h){v._updateBatchNumber===h&&v.performUpdateIfNecessary(c)}});d.exports=_},{143:143,58:58,67:67}],67:[function(s,d,p){"use strict";function x(c,h,f){typeof c=="function"?c(h.getPublicInstance()):_.addComponentAsRefTo(h,c,f)}function l(c,h,f){typeof c=="function"?c(null):_.removeComponentAsRefFrom(h,c,f)}var _=s(63),v={};v.attachRefs=function(c,h){if(h!==null&&typeof h=="object"){var f=h.ref;f!=null&&x(f,c,h._owner)}},v.shouldUpdateRefs=function(c,h){var f=null,m=null;c!==null&&typeof c=="object"&&(f=c.ref,m=c._owner);var b=null,w=null;return h!==null&&typeof h=="object"&&(b=h.ref,w=h._owner),f!==b||typeof b=="string"&&w!==m},v.detachRefs=function(c,h){if(h!==null&&typeof h=="object"){var f=h.ref;f!=null&&l(f,c,h._owner)}},d.exports=v},{63:63}],68:[function(s,d,p){"use strict";function x(b){this.reinitializeTransaction(),this.renderToStaticMarkup=b,this.useCreateElement=!1,this.updateQueue=new c(this)}var l=s(144),_=s(24),v=s(89),c=(s(58),s(69)),h=[],f={enqueue:function(){}},m={getTransactionWrappers:function(){return h},getReactMountReady:function(){return f},getUpdateQueue:function(){return this.updateQueue},destructor:function(){},checkpoint:function(){},rollback:function(){}};l(x.prototype,v,m),_.addPoolingTo(x),d.exports=x},{144:144,24:24,58:58,69:69,89:89}],69:[function(s,d,p){"use strict";function x(v,c){if(!(v instanceof c))throw new TypeError("Cannot call a class as a function")}var l=s(70),_=(s(143),function(){function v(c){x(this,v),this.transaction=c}return v.prototype.isMounted=function(c){return!1},v.prototype.enqueueCallback=function(c,h,f){this.transaction.isInTransaction()&&l.enqueueCallback(c,h,f)},v.prototype.enqueueForceUpdate=function(c){this.transaction.isInTransaction()&&l.enqueueForceUpdate(c)},v.prototype.enqueueReplaceState=function(c,h){this.transaction.isInTransaction()&&l.enqueueReplaceState(c,h)},v.prototype.enqueueSetState=function(c,h){this.transaction.isInTransaction()&&l.enqueueSetState(c,h)},v}());d.exports=_},{143:143,70:70}],70:[function(s,d,p){"use strict";function x(m){h.enqueueUpdate(m)}function l(m){var b=typeof m;if(b!=="object")return b;var w=m.constructor&&m.constructor.name||b,C=Object.keys(m);return C.length>0&&C.length<20?w+" (keys: "+C.join(", ")+")":w}function _(m,b){var w=c.get(m);return w||null}var v=s(113),c=(s(120),s(57)),h=(s(58),s(71)),f=(s(138),s(143),{isMounted:function(m){var b=c.get(m);return!!b&&!!b._renderedComponent},enqueueCallback:function(m,b,w){f.validateCallback(b,w);var C=_(m);if(!C)return null;C._pendingCallbacks?C._pendingCallbacks.push(b):C._pendingCallbacks=[b],x(C)},enqueueCallbackInternal:function(m,b){m._pendingCallbacks?m._pendingCallbacks.push(b):m._pendingCallbacks=[b],x(m)},enqueueForceUpdate:function(m){var b=_(m,"forceUpdate");b&&(b._pendingForceUpdate=!0,x(b))},enqueueReplaceState:function(m,b,w){var C=_(m,"replaceState");C&&(C._pendingStateQueue=[b],C._pendingReplaceState=!0,w!=null&&(f.validateCallback(w,"replaceState"),C._pendingCallbacks?C._pendingCallbacks.push(w):C._pendingCallbacks=[w]),x(C))},enqueueSetState:function(m,b){var w=_(m,"setState");w&&((w._pendingStateQueue||(w._pendingStateQueue=[])).push(b),x(w))},enqueueElementInternal:function(m,b,w){m._pendingElement=b,m._context=w,x(m)},validateCallback:function(m,b){m&&typeof m!="function"&&v("122",b,l(m))}});d.exports=f},{113:113,120:120,138:138,143:143,57:57,58:58,71:71}],71:[function(s,d,p){"use strict";function x(){Q.ReactReconcileTransaction&&I||m("123")}function l(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=w.getPooled(),this.reconcileTransaction=Q.ReactReconcileTransaction.getPooled(!0)}function _(ne,ue,fe,ge,ye,pe){return x(),I.batchedUpdates(ne,ue,fe,ge,ye,pe)}function v(ne,ue){return ne._mountOrder-ue._mountOrder}function c(ne){var ue=ne.dirtyComponentsLength;ue!==A.length&&m("124",ue,A.length),A.sort(v),R++;for(var fe=0;fe<ue;fe++){var ge=A[fe],ye=ge._pendingCallbacks;ge._pendingCallbacks=null;var pe;if(E.logTopLevelRenders){var de=ge;ge._currentElement.type.isReactTopLevelWrapper&&(de=ge._renderedComponent),pe="React update: "+de.getName(),console.time(pe)}if(S.performUpdateIfNecessary(ge,ne.reconcileTransaction,R),pe&&console.timeEnd(pe),ye)for(var he=0;he<ye.length;he++)ne.callbackQueue.enqueue(ye[he],ge.getPublicInstance())}}function h(ne){if(x(),!I.isBatchingUpdates)return void I.batchedUpdates(h,ne);A.push(ne),ne._updateBatchNumber==null&&(ne._updateBatchNumber=R+1)}function f(ne,ue){I.isBatchingUpdates||m("125"),D.enqueue(ne,ue),N=!0}var m=s(113),b=s(144),w=s(6),C=s(24),E=s(53),S=s(66),M=s(89),A=(s(138),[]),R=0,D=w.getPooled(),N=!1,I=null,L={initialize:function(){this.dirtyComponentsLength=A.length},close:function(){this.dirtyComponentsLength!==A.length?(A.splice(0,this.dirtyComponentsLength),ie()):A.length=0}},Y={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},J=[L,Y];b(l.prototype,M,{getTransactionWrappers:function(){return J},destructor:function(){this.dirtyComponentsLength=null,w.release(this.callbackQueue),this.callbackQueue=null,Q.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(ne,ue,fe){return M.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,ne,ue,fe)}}),C.addPoolingTo(l);var ie=function(){for(;A.length||N;){if(A.length){var ne=l.getPooled();ne.perform(c,null,ne),l.release(ne)}if(N){N=!1;var ue=D;D=w.getPooled(),ue.notifyAll(),w.release(ue)}}},K={injectReconcileTransaction:function(ne){ne||m("126"),Q.ReactReconcileTransaction=ne},injectBatchingStrategy:function(ne){ne||m("127"),typeof ne.batchedUpdates!="function"&&m("128"),typeof ne.isBatchingUpdates!="boolean"&&m("129"),I=ne}},Q={ReactReconcileTransaction:null,batchedUpdates:_,enqueueUpdate:h,flushBatchedUpdates:ie,injection:K,asap:f};d.exports=Q},{113:113,138:138,144:144,24:24,53:53,6:6,66:66,89:89}],72:[function(s,d,p){"use strict";d.exports="15.6.1"},{}],73:[function(s,d,p){"use strict";var x={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},l={accentHeight:"accent-height",accumulate:0,additive:0,alignmentBaseline:"alignment-baseline",allowReorder:"allowReorder",alphabetic:0,amplitude:0,arabicForm:"arabic-form",ascent:0,attributeName:"attributeName",attributeType:"attributeType",autoReverse:"autoReverse",azimuth:0,baseFrequency:"baseFrequency",baseProfile:"baseProfile",baselineShift:"baseline-shift",bbox:0,begin:0,bias:0,by:0,calcMode:"calcMode",capHeight:"cap-height",clip:0,clipPath:"clip-path",clipRule:"clip-rule",clipPathUnits:"clipPathUnits",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",contentScriptType:"contentScriptType",contentStyleType:"contentStyleType",cursor:0,cx:0,cy:0,d:0,decelerate:0,descent:0,diffuseConstant:"diffuseConstant",direction:0,display:0,divisor:0,dominantBaseline:"dominant-baseline",dur:0,dx:0,dy:0,edgeMode:"edgeMode",elevation:0,enableBackground:"enable-background",end:0,exponent:0,externalResourcesRequired:"externalResourcesRequired",fill:0,fillOpacity:"fill-opacity",fillRule:"fill-rule",filter:0,filterRes:"filterRes",filterUnits:"filterUnits",floodColor:"flood-color",floodOpacity:"flood-opacity",focusable:0,fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",glyphRef:"glyphRef",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",hanging:0,horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",ideographic:0,imageRendering:"image-rendering",in:0,in2:0,intercept:0,k:0,k1:0,k2:0,k3:0,k4:0,kernelMatrix:"kernelMatrix",kernelUnitLength:"kernelUnitLength",kerning:0,keyPoints:"keyPoints",keySplines:"keySplines",keyTimes:"keyTimes",lengthAdjust:"lengthAdjust",letterSpacing:"letter-spacing",lightingColor:"lighting-color",limitingConeAngle:"limitingConeAngle",local:0,markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",markerHeight:"markerHeight",markerUnits:"markerUnits",markerWidth:"markerWidth",mask:0,maskContentUnits:"maskContentUnits",maskUnits:"maskUnits",mathematical:0,mode:0,numOctaves:"numOctaves",offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pathLength:"pathLength",patternContentUnits:"patternContentUnits",patternTransform:"patternTransform",patternUnits:"patternUnits",pointerEvents:"pointer-events",points:0,pointsAtX:"pointsAtX",pointsAtY:"pointsAtY",pointsAtZ:"pointsAtZ",preserveAlpha:"preserveAlpha",preserveAspectRatio:"preserveAspectRatio",primitiveUnits:"primitiveUnits",r:0,radius:0,refX:"refX",refY:"refY",renderingIntent:"rendering-intent",repeatCount:"repeatCount",repeatDur:"repeatDur",requiredExtensions:"requiredExtensions",requiredFeatures:"requiredFeatures",restart:0,result:0,rotate:0,rx:0,ry:0,scale:0,seed:0,shapeRendering:"shape-rendering",slope:0,spacing:0,specularConstant:"specularConstant",specularExponent:"specularExponent",speed:0,spreadMethod:"spreadMethod",startOffset:"startOffset",stdDeviation:"stdDeviation",stemh:0,stemv:0,stitchTiles:"stitchTiles",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",string:0,stroke:0,strokeDasharray:"stroke-dasharray",strokeDashoffset:"stroke-dashoffset",strokeLinecap:"stroke-linecap",strokeLinejoin:"stroke-linejoin",strokeMiterlimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",surfaceScale:"surfaceScale",systemLanguage:"systemLanguage",tableValues:"tableValues",targetX:"targetX",targetY:"targetY",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",textLength:"textLength",to:0,transform:0,u1:0,u2:0,underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicode:0,unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",values:0,vectorEffect:"vector-effect",version:0,vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",viewBox:"viewBox",viewTarget:"viewTarget",visibility:0,widths:0,wordSpacing:"word-spacing",writingMode:"writing-mode",x:0,xHeight:"x-height",x1:0,x2:0,xChannelSelector:"xChannelSelector",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlns:0,xmlnsXlink:"xmlns:xlink",xmlLang:"xml:lang",xmlSpace:"xml:space",y:0,y1:0,y2:0,yChannelSelector:"yChannelSelector",z:0,zoomAndPan:"zoomAndPan"},_={Properties:{},DOMAttributeNamespaces:{xlinkActuate:x.xlink,xlinkArcrole:x.xlink,xlinkHref:x.xlink,xlinkRole:x.xlink,xlinkShow:x.xlink,xlinkTitle:x.xlink,xlinkType:x.xlink,xmlBase:x.xml,xmlLang:x.xml,xmlSpace:x.xml},DOMAttributeNames:{}};Object.keys(l).forEach(function(v){_.Properties[v]=0,l[v]&&(_.DOMAttributeNames[v]=l[v])}),d.exports=_},{}],74:[function(s,d,p){"use strict";function x(I){if("selectionStart"in I&&h.hasSelectionCapabilities(I))return{start:I.selectionStart,end:I.selectionEnd};if(window.getSelection){var L=window.getSelection();return{anchorNode:L.anchorNode,anchorOffset:L.anchorOffset,focusNode:L.focusNode,focusOffset:L.focusOffset}}if(document.selection){var Y=document.selection.createRange();return{parentElement:Y.parentElement(),text:Y.text,top:Y.boundingTop,left:Y.boundingLeft}}}function l(I,L){if(R||S==null||S!==m())return null;var Y=x(S);if(!A||!w(A,Y)){A=Y;var J=f.getPooled(E.select,M,I,L);return J.type="select",J.target=S,_.accumulateTwoPhaseDispatches(J),J}return null}var _=s(19),v=s(124),c=s(33),h=s(56),f=s(80),m=s(133),b=s(111),w=s(142),C=v.canUseDOM&&"documentMode"in document&&document.documentMode<=11,E={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:["topBlur","topContextMenu","topFocus","topKeyDown","topKeyUp","topMouseDown","topMouseUp","topSelectionChange"]}},S=null,M=null,A=null,R=!1,D=!1,N={eventTypes:E,extractEvents:function(I,L,Y,J){if(!D)return null;var ie=L?c.getNodeFromInstance(L):window;switch(I){case"topFocus":(b(ie)||ie.contentEditable==="true")&&(S=ie,M=L,A=null);break;case"topBlur":S=null,M=null,A=null;break;case"topMouseDown":R=!0;break;case"topContextMenu":case"topMouseUp":return R=!1,l(Y,J);case"topSelectionChange":if(C)break;case"topKeyDown":case"topKeyUp":return l(Y,J)}return null},didPutListener:function(I,L,Y){L==="onSelect"&&(D=!0)}};d.exports=N},{111:111,124:124,133:133,142:142,19:19,33:33,56:56,80:80}],75:[function(s,d,p){"use strict";function x(K){return"."+K._rootNodeID}function l(K){return K==="button"||K==="input"||K==="select"||K==="textarea"}var _=s(113),v=s(123),c=s(19),h=s(33),f=s(76),m=s(77),b=s(80),w=s(81),C=s(83),E=s(84),S=s(79),M=s(85),A=s(86),R=s(87),D=s(88),N=s(130),I=s(99),L=(s(138),{}),Y={};["abort","animationEnd","animationIteration","animationStart","blur","canPlay","canPlayThrough","click","contextMenu","copy","cut","doubleClick","drag","dragEnd","dragEnter","dragExit","dragLeave","dragOver","dragStart","drop","durationChange","emptied","encrypted","ended","error","focus","input","invalid","keyDown","keyPress","keyUp","load","loadedData","loadedMetadata","loadStart","mouseDown","mouseMove","mouseOut","mouseOver","mouseUp","paste","pause","play","playing","progress","rateChange","reset","scroll","seeked","seeking","stalled","submit","suspend","timeUpdate","touchCancel","touchEnd","touchMove","touchStart","transitionEnd","volumeChange","waiting","wheel"].forEach(function(K){var Q=K[0].toUpperCase()+K.slice(1),ne="on"+Q,ue="top"+Q,fe={phasedRegistrationNames:{bubbled:ne,captured:ne+"Capture"},dependencies:[ue]};L[K]=fe,Y[ue]=fe});var J={},ie={eventTypes:L,extractEvents:function(K,Q,ne,ue){var fe=Y[K];if(!fe)return null;var ge;switch(K){case"topAbort":case"topCanPlay":case"topCanPlayThrough":case"topDurationChange":case"topEmptied":case"topEncrypted":case"topEnded":case"topError":case"topInput":case"topInvalid":case"topLoad":case"topLoadedData":case"topLoadedMetadata":case"topLoadStart":case"topPause":case"topPlay":case"topPlaying":case"topProgress":case"topRateChange":case"topReset":case"topSeeked":case"topSeeking":case"topStalled":case"topSubmit":case"topSuspend":case"topTimeUpdate":case"topVolumeChange":case"topWaiting":ge=b;break;case"topKeyPress":if(I(ne)===0)return null;case"topKeyDown":case"topKeyUp":ge=C;break;case"topBlur":case"topFocus":ge=w;break;case"topClick":if(ne.button===2)return null;case"topDoubleClick":case"topMouseDown":case"topMouseMove":case"topMouseUp":case"topMouseOut":case"topMouseOver":case"topContextMenu":ge=E;break;case"topDrag":case"topDragEnd":case"topDragEnter":case"topDragExit":case"topDragLeave":case"topDragOver":case"topDragStart":case"topDrop":ge=S;break;case"topTouchCancel":case"topTouchEnd":case"topTouchMove":case"topTouchStart":ge=M;break;case"topAnimationEnd":case"topAnimationIteration":case"topAnimationStart":ge=f;break;case"topTransitionEnd":ge=A;break;case"topScroll":ge=R;break;case"topWheel":ge=D;break;case"topCopy":case"topCut":case"topPaste":ge=m}ge||_("86",K);var ye=ge.getPooled(fe,Q,ne,ue);return c.accumulateTwoPhaseDispatches(ye),ye},didPutListener:function(K,Q,ne){if(Q==="onClick"&&!l(K._tag)){var ue=x(K),fe=h.getNodeFromInstance(K);J[ue]||(J[ue]=v.listen(fe,"click",N))}},willDeleteListener:function(K,Q){if(Q==="onClick"&&!l(K._tag)){var ne=x(K);J[ne].remove(),delete J[ne]}}};d.exports=ie},{113:113,123:123,130:130,138:138,19:19,33:33,76:76,77:77,79:79,80:80,81:81,83:83,84:84,85:85,86:86,87:87,88:88,99:99}],76:[function(s,d,p){"use strict";function x(v,c,h,f){return l.call(this,v,c,h,f)}var l=s(80),_={animationName:null,elapsedTime:null,pseudoElement:null};l.augmentClass(x,_),d.exports=x},{80:80}],77:[function(s,d,p){"use strict";function x(v,c,h,f){return l.call(this,v,c,h,f)}var l=s(80),_={clipboardData:function(v){return"clipboardData"in v?v.clipboardData:window.clipboardData}};l.augmentClass(x,_),d.exports=x},{80:80}],78:[function(s,d,p){"use strict";function x(v,c,h,f){return l.call(this,v,c,h,f)}var l=s(80),_={data:null};l.augmentClass(x,_),d.exports=x},{80:80}],79:[function(s,d,p){"use strict";function x(v,c,h,f){return l.call(this,v,c,h,f)}var l=s(84),_={dataTransfer:null};l.augmentClass(x,_),d.exports=x},{84:84}],80:[function(s,d,p){"use strict";function x(f,m,b,w){this.dispatchConfig=f,this._targetInst=m,this.nativeEvent=b;var C=this.constructor.Interface;for(var E in C)if(C.hasOwnProperty(E)){var S=C[E];S?this[E]=S(b):E==="target"?this.target=w:this[E]=b[E]}var M=b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1;return this.isDefaultPrevented=M?v.thatReturnsTrue:v.thatReturnsFalse,this.isPropagationStopped=v.thatReturnsFalse,this}var l=s(144),_=s(24),v=s(130),c=(s(143),["dispatchConfig","_targetInst","nativeEvent","isDefaultPrevented","isPropagationStopped","_dispatchListeners","_dispatchInstances"]),h={type:null,target:null,currentTarget:v.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(f){return f.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};l(x.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=v.thatReturnsTrue)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=v.thatReturnsTrue)},persist:function(){this.isPersistent=v.thatReturnsTrue},isPersistent:v.thatReturnsFalse,destructor:function(){var f=this.constructor.Interface;for(var m in f)this[m]=null;for(var b=0;b<c.length;b++)this[c[b]]=null}}),x.Interface=h,x.augmentClass=function(f,m){var b=this,w=function(){};w.prototype=b.prototype;var C=new w;l(C,f.prototype),f.prototype=C,f.prototype.constructor=f,f.Interface=l({},b.Interface,m),f.augmentClass=b.augmentClass,_.addPoolingTo(f,_.fourArgumentPooler)},_.addPoolingTo(x,_.fourArgumentPooler),d.exports=x},{130:130,143:143,144:144,24:24}],81:[function(s,d,p){"use strict";function x(v,c,h,f){return l.call(this,v,c,h,f)}var l=s(87),_={relatedTarget:null};l.augmentClass(x,_),d.exports=x},{87:87}],82:[function(s,d,p){"use strict";function x(v,c,h,f){return l.call(this,v,c,h,f)}var l=s(80),_={data:null};l.augmentClass(x,_),d.exports=x},{80:80}],83:[function(s,d,p){"use strict";function x(f,m,b,w){return l.call(this,f,m,b,w)}var l=s(87),_=s(99),v=s(100),c=s(101),h={key:v,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:c,charCode:function(f){return f.type==="keypress"?_(f):0},keyCode:function(f){return f.type==="keydown"||f.type==="keyup"?f.keyCode:0},which:function(f){return f.type==="keypress"?_(f):f.type==="keydown"||f.type==="keyup"?f.keyCode:0}};l.augmentClass(x,h),d.exports=x},{100:100,101:101,87:87,99:99}],84:[function(s,d,p){"use strict";function x(h,f,m,b){return l.call(this,h,f,m,b)}var l=s(87),_=s(90),v=s(101),c={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:v,button:function(h){var f=h.button;return"which"in h?f:f===2?2:f===4?1:0},buttons:null,relatedTarget:function(h){return h.relatedTarget||(h.fromElement===h.srcElement?h.toElement:h.fromElement)},pageX:function(h){return"pageX"in h?h.pageX:h.clientX+_.currentScrollLeft},pageY:function(h){return"pageY"in h?h.pageY:h.clientY+_.currentScrollTop}};l.augmentClass(x,c),d.exports=x},{101:101,87:87,90:90}],85:[function(s,d,p){"use strict";function x(c,h,f,m){return l.call(this,c,h,f,m)}var l=s(87),_=s(101),v={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:_};l.augmentClass(x,v),d.exports=x},{101:101,87:87}],86:[function(s,d,p){"use strict";function x(v,c,h,f){return l.call(this,v,c,h,f)}var l=s(80),_={propertyName:null,elapsedTime:null,pseudoElement:null};l.augmentClass(x,_),d.exports=x},{80:80}],87:[function(s,d,p){"use strict";function x(c,h,f,m){return l.call(this,c,h,f,m)}var l=s(80),_=s(102),v={view:function(c){if(c.view)return c.view;var h=_(c);if(h.window===h)return h;var f=h.ownerDocument;return f?f.defaultView||f.parentWindow:window},detail:function(c){return c.detail||0}};l.augmentClass(x,v),d.exports=x},{102:102,80:80}],88:[function(s,d,p){"use strict";function x(v,c,h,f){return l.call(this,v,c,h,f)}var l=s(84),_={deltaX:function(v){return"deltaX"in v?v.deltaX:"wheelDeltaX"in v?-v.wheelDeltaX:0},deltaY:function(v){return"deltaY"in v?v.deltaY:"wheelDeltaY"in v?-v.wheelDeltaY:"wheelDelta"in v?-v.wheelDelta:0},deltaZ:null,deltaMode:null};l.augmentClass(x,_),d.exports=x},{84:84}],89:[function(s,d,p){"use strict";var x=s(113),l=(s(138),{}),_={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(v,c,h,f,m,b,w,C){this.isInTransaction()&&x("27");var E,S;try{this._isInTransaction=!0,E=!0,this.initializeAll(0),S=v.call(c,h,f,m,b,w,C),E=!1}finally{try{if(E)try{this.closeAll(0)}catch{}else this.closeAll(0)}finally{this._isInTransaction=!1}}return S},initializeAll:function(v){for(var c=this.transactionWrappers,h=v;h<c.length;h++){var f=c[h];try{this.wrapperInitData[h]=l,this.wrapperInitData[h]=f.initialize?f.initialize.call(this):null}finally{if(this.wrapperInitData[h]===l)try{this.initializeAll(h+1)}catch{}}}},closeAll:function(v){this.isInTransaction()||x("28");for(var c=this.transactionWrappers,h=v;h<c.length;h++){var f,m=c[h],b=this.wrapperInitData[h];try{f=!0,b!==l&&m.close&&m.close.call(this,b),f=!1}finally{if(f)try{this.closeAll(h+1)}catch{}}}this.wrapperInitData.length=0}};d.exports=_},{113:113,138:138}],90:[function(s,d,p){"use strict";var x={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(l){x.currentScrollLeft=l.x,x.currentScrollTop=l.y}};d.exports=x},{}],91:[function(s,d,p){"use strict";function x(_,v){return v==null&&l("30"),_==null?v:Array.isArray(_)?Array.isArray(v)?(_.push.apply(_,v),_):(_.push(v),_):Array.isArray(v)?[_].concat(v):[_,v]}var l=s(113);s(138),d.exports=x},{113:113,138:138}],92:[function(s,d,p){"use strict";function x(_){for(var v=1,c=0,h=0,f=_.length,m=-4&f;h<m;){for(var b=Math.min(h+4096,m);h<b;h+=4)c+=(v+=_.charCodeAt(h))+(v+=_.charCodeAt(h+1))+(v+=_.charCodeAt(h+2))+(v+=_.charCodeAt(h+3));v%=l,c%=l}for(;h<f;h++)c+=v+=_.charCodeAt(h);return v%=l,c%=l,v|c<<16}var l=65521;d.exports=x},{}],93:[function(s,d,p){"use strict";var x=function(l){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(_,v,c,h){MSApp.execUnsafeLocalFunction(function(){return l(_,v,c,h)})}:l};d.exports=x},{}],94:[function(s,d,p){"use strict";function x(v,c,h,f){if(c==null||typeof c=="boolean"||c==="")return"";var m=isNaN(c);return f||m||c===0||_.hasOwnProperty(v)&&_[v]?""+c:(typeof c=="string"&&(c=c.trim()),c+"px")}var l=s(4),_=(s(143),l.isUnitlessNumber);d.exports=x},{143:143,4:4}],95:[function(s,d,p){"use strict";function x(v){var c=""+v,h=_.exec(c);if(!h)return c;var f,m="",b=0,w=0;for(b=h.index;b<c.length;b++){switch(c.charCodeAt(b)){case 34:f="&quot;";break;case 38:f="&amp;";break;case 39:f="&#x27;";break;case 60:f="&lt;";break;case 62:f="&gt;";break;default:continue}w!==b&&(m+=c.substring(w,b)),w=b+1,m+=f}return w!==b?m+c.substring(w,b):m}function l(v){return typeof v=="boolean"||typeof v=="number"?""+v:x(v)}var _=/["'&<>]/;d.exports=l},{}],96:[function(s,d,p){"use strict";function x(h){if(h==null)return null;if(h.nodeType===1)return h;var f=v.get(h);if(f)return f=c(f),f?_.getNodeFromInstance(f):null;typeof h.render=="function"?l("44"):l("45",Object.keys(h))}var l=s(113),_=(s(120),s(33)),v=s(57),c=s(103);s(138),s(143),d.exports=x},{103:103,113:113,120:120,138:138,143:143,33:33,57:57}],97:[function(s,d,p){(function(x){"use strict";function l(c,h,f,m){if(c&&typeof c=="object"){var b=c;b[f]===void 0&&h!=null&&(b[f]=h)}}function _(c,h){if(c==null)return c;var f={};return v(c,l,f),f}var v=(s(22),s(118));s(143),x!==void 0&&x.env,d.exports=_}).call(this,void 0)},{118:118,143:143,22:22}],98:[function(s,d,p){"use strict";function x(l,_,v){Array.isArray(l)?l.forEach(_,v):l&&_.call(v,l)}d.exports=x},{}],99:[function(s,d,p){"use strict";function x(l){var _,v=l.keyCode;return"charCode"in l?(_=l.charCode)===0&&v===13&&(_=13):_=v,_>=32||_===13?_:0}d.exports=x},{}],100:[function(s,d,p){"use strict";function x(c){if(c.key){var h=_[c.key]||c.key;if(h!=="Unidentified")return h}if(c.type==="keypress"){var f=l(c);return f===13?"Enter":String.fromCharCode(f)}return c.type==="keydown"||c.type==="keyup"?v[c.keyCode]||"Unidentified":""}var l=s(99),_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},v={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};d.exports=x},{99:99}],101:[function(s,d,p){"use strict";function x(v){var c=this,h=c.nativeEvent;if(h.getModifierState)return h.getModifierState(v);var f=_[v];return!!f&&!!h[f]}function l(v){return x}var _={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};d.exports=l},{}],102:[function(s,d,p){"use strict";function x(l){var _=l.target||l.srcElement||window;return _.correspondingUseElement&&(_=_.correspondingUseElement),_.nodeType===3?_.parentNode:_}d.exports=x},{}],103:[function(s,d,p){"use strict";function x(_){for(var v;(v=_._renderedNodeType)===l.COMPOSITE;)_=_._renderedComponent;return v===l.HOST?_._renderedComponent:v===l.EMPTY?null:void 0}var l=s(62);d.exports=x},{62:62}],104:[function(s,d,p){"use strict";function x(v){var c=v&&(l&&v[l]||v[_]);if(typeof c=="function")return c}var l=typeof Symbol=="function"&&Symbol.iterator,_="@@iterator";d.exports=x},{}],105:[function(s,d,p){"use strict";function x(v){for(;v&&v.firstChild;)v=v.firstChild;return v}function l(v){for(;v;){if(v.nextSibling)return v.nextSibling;v=v.parentNode}}function _(v,c){for(var h=x(v),f=0,m=0;h;){if(h.nodeType===3){if(m=f+h.textContent.length,f<=c&&m>=c)return{node:h,offset:c-f};f=m}h=x(l(h))}}d.exports=_},{}],106:[function(s,d,p){"use strict";function x(){return!_&&l.canUseDOM&&(_="textContent"in document.documentElement?"textContent":"innerText"),_}var l=s(124),_=null;d.exports=x},{124:124}],107:[function(s,d,p){"use strict";function x(f,m){var b={};return b[f.toLowerCase()]=m.toLowerCase(),b["Webkit"+f]="webkit"+m,b["Moz"+f]="moz"+m,b["ms"+f]="MS"+m,b["O"+f]="o"+m.toLowerCase(),b}function l(f){if(c[f])return c[f];if(!v[f])return f;var m=v[f];for(var b in m)if(m.hasOwnProperty(b)&&b in h)return c[f]=m[b];return""}var _=s(124),v={animationend:x("Animation","AnimationEnd"),animationiteration:x("Animation","AnimationIteration"),animationstart:x("Animation","AnimationStart"),transitionend:x("Transition","TransitionEnd")},c={},h={};_.canUseDOM&&(h=document.createElement("div").style,"AnimationEvent"in window||(delete v.animationend.animation,delete v.animationiteration.animation,delete v.animationstart.animation),"TransitionEvent"in window||delete v.transitionend.transition),d.exports=l},{124:124}],108:[function(s,d,p){"use strict";function x(m){var b=m.type,w=m.nodeName;return w&&w.toLowerCase()==="input"&&(b==="checkbox"||b==="radio")}function l(m){return m._wrapperState.valueTracker}function _(m,b){m._wrapperState.valueTracker=b}function v(m){delete m._wrapperState.valueTracker}function c(m){var b;return m&&(b=x(m)?""+m.checked:m.value),b}var h=s(33),f={_getTrackerFromNode:function(m){return l(h.getInstanceFromNode(m))},track:function(m){if(!l(m)){var b=h.getNodeFromInstance(m),w=x(b)?"checked":"value",C=Object.getOwnPropertyDescriptor(b.constructor.prototype,w),E=""+b[w];b.hasOwnProperty(w)||typeof C.get!="function"||typeof C.set!="function"||(Object.defineProperty(b,w,{enumerable:C.enumerable,configurable:!0,get:function(){return C.get.call(this)},set:function(S){E=""+S,C.set.call(this,S)}}),_(m,{getValue:function(){return E},setValue:function(S){E=""+S},stopTracking:function(){v(m),delete b[w]}}))}},updateValueIfChanged:function(m){if(!m)return!1;var b=l(m);if(!b)return f.track(m),!0;var w=b.getValue(),C=c(h.getNodeFromInstance(m));return C!==w&&(b.setValue(C),!0)},stopTracking:function(m){var b=l(m);b&&b.stopTracking()}};d.exports=f},{33:33}],109:[function(s,d,p){"use strict";function x(w){if(w){var C=w.getName();if(C)return" Check the render method of `"+C+"`."}return""}function l(w){return typeof w=="function"&&w.prototype!==void 0&&typeof w.prototype.mountComponent=="function"&&typeof w.prototype.receiveComponent=="function"}function _(w,C){var E;if(w===null||w===!1)E=f.create(_);else if(typeof w=="object"){var S=w,M=S.type;if(typeof M!="function"&&typeof M!="string"){var A="";A+=x(S._owner),v("130",M==null?M:typeof M,A)}typeof S.type=="string"?E=m.createInternalComponent(S):l(S.type)?(E=new S.type(S),E.getHostNode||(E.getHostNode=E.getNativeNode)):E=new b(S)}else typeof w=="string"||typeof w=="number"?E=m.createInstanceForText(w):v("131",typeof w);return E._mountIndex=0,E._mountImage=null,E}var v=s(113),c=s(144),h=s(29),f=s(49),m=s(54),b=(s(122),s(138),s(143),function(w){this.construct(w)});c(b.prototype,h,{_instantiateReactComponent:_}),d.exports=_},{113:113,122:122,138:138,143:143,144:144,29:29,49:49,54:54}],110:[function(s,d,p){"use strict";function x(v,c){if(!_.canUseDOM||c&&!("addEventListener"in document))return!1;var h="on"+v,f=h in document;if(!f){var m=document.createElement("div");m.setAttribute(h,"return;"),f=typeof m[h]=="function"}return!f&&l&&v==="wheel"&&(f=document.implementation.hasFeature("Events.wheel","3.0")),f}var l,_=s(124);_.canUseDOM&&(l=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),d.exports=x},{124:124}],111:[function(s,d,p){"use strict";function x(_){var v=_&&_.nodeName&&_.nodeName.toLowerCase();return v==="input"?!!l[_.type]:v==="textarea"}var l={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};d.exports=x},{}],112:[function(s,d,p){"use strict";function x(_){return'"'+l(_)+'"'}var l=s(95);d.exports=x},{95:95}],113:[function(s,d,p){"use strict";function x(l){for(var _=arguments.length-1,v="Minified React error #"+l+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+l,c=0;c<_;c++)v+="&args[]="+encodeURIComponent(arguments[c+1]);v+=" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";var h=new Error(v);throw h.name="Invariant Violation",h.framesToPop=1,h}d.exports=x},{}],114:[function(s,d,p){"use strict";var x=s(60);d.exports=x.renderSubtreeIntoContainer},{60:60}],115:[function(s,d,p){"use strict";var x,l=s(124),_=s(10),v=/^[ \r\n\t\f]/,c=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,h=s(93),f=h(function(b,w){if(b.namespaceURI!==_.svg||"innerHTML"in b)b.innerHTML=w;else{x=x||document.createElement("div"),x.innerHTML="<svg>"+w+"</svg>";for(var C=x.firstChild;C.firstChild;)b.appendChild(C.firstChild)}});if(l.canUseDOM){var m=document.createElement("div");m.innerHTML=" ",m.innerHTML===""&&(f=function(b,w){if(b.parentNode&&b.parentNode.replaceChild(b,b),v.test(w)||w[0]==="<"&&c.test(w)){b.innerHTML="\uFEFF"+w;var C=b.firstChild;C.data.length===1?b.removeChild(C):C.deleteData(0,1)}else b.innerHTML=w}),m=null}d.exports=f},{10:10,124:124,93:93}],116:[function(s,d,p){"use strict";var x=s(124),l=s(95),_=s(115),v=function(c,h){if(h){var f=c.firstChild;if(f&&f===c.lastChild&&f.nodeType===3)return void(f.nodeValue=h)}c.textContent=h};x.canUseDOM&&("textContent"in document.documentElement||(v=function(c,h){if(c.nodeType===3)return void(c.nodeValue=h);_(c,l(h))})),d.exports=v},{115:115,124:124,95:95}],117:[function(s,d,p){"use strict";function x(l,_){var v=l===null||l===!1,c=_===null||_===!1;if(v||c)return v===c;var h=typeof l,f=typeof _;return h==="string"||h==="number"?f==="string"||f==="number":f==="object"&&l.type===_.type&&l.key===_.key}d.exports=x},{}],118:[function(s,d,p){"use strict";function x(w,C){return w&&typeof w=="object"&&w.key!=null?f.escape(w.key):C.toString(36)}function l(w,C,E,S){var M=typeof w;if(M!=="undefined"&&M!=="boolean"||(w=null),w===null||M==="string"||M==="number"||M==="object"&&w.$$typeof===c)return E(S,w,C===""?m+x(w,0):C),1;var A,R,D=0,N=C===""?m:C+b;if(Array.isArray(w))for(var I=0;I<w.length;I++)A=w[I],R=N+x(A,I),D+=l(A,R,E,S);else{var L=h(w);if(L){var Y,J=L.call(w);if(L!==w.entries)for(var ie=0;!(Y=J.next()).done;)A=Y.value,R=N+x(A,ie++),D+=l(A,R,E,S);else for(;!(Y=J.next()).done;){var K=Y.value;K&&(A=K[1],R=N+f.escape(K[0])+b+x(A,0),D+=l(A,R,E,S))}}else if(M==="object"){var Q=String(w);v("31",Q==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":Q,"")}}return D}function _(w,C,E){return w==null?0:l(w,"",C,E)}var v=s(113),c=(s(120),s(48)),h=s(104),f=(s(138),s(22)),m=(s(143),"."),b=":";d.exports=_},{104:104,113:113,120:120,138:138,143:143,22:22,48:48}],119:[function(s,d,p){"use strict";var x=(s(144),s(130)),l=(s(143),x);d.exports=l},{130:130,143:143,144:144}],120:[function(s,d,p){"use strict";var x=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;d.exports=x.ReactCurrentOwner},{}],121:[function(s,d,p){"use strict";d.exports=e},{}],122:[function(s,d,p){"use strict";var x=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;d.exports=x.getNextDebugID},{}],123:[function(s,d,p){"use strict";var x=s(130),l={listen:function(_,v,c){return _.addEventListener?(_.addEventListener(v,c,!1),{remove:function(){_.removeEventListener(v,c,!1)}}):_.attachEvent?(_.attachEvent("on"+v,c),{remove:function(){_.detachEvent("on"+v,c)}}):void 0},capture:function(_,v,c){return _.addEventListener?(_.addEventListener(v,c,!0),{remove:function(){_.removeEventListener(v,c,!0)}}):{remove:x}},registerDefault:function(){}};d.exports=l},{130:130}],124:[function(s,d,p){"use strict";var x=!(typeof window>"u"||!window.document||!window.document.createElement),l={canUseDOM:x,canUseWorkers:typeof Worker<"u",canUseEventListeners:x&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:x&&!!window.screen,isInWorker:!x};d.exports=l},{}],125:[function(s,d,p){"use strict";function x(_){return _.replace(l,function(v,c){return c.toUpperCase()})}var l=/-(.)/g;d.exports=x},{}],126:[function(s,d,p){"use strict";function x(v){return l(v.replace(_,"ms-"))}var l=s(125),_=/^-ms-/;d.exports=x},{125:125}],127:[function(s,d,p){"use strict";function x(_,v){return!(!_||!v)&&(_===v||!l(_)&&(l(v)?x(_,v.parentNode):"contains"in _?_.contains(v):!!_.compareDocumentPosition&&!!(16&_.compareDocumentPosition(v))))}var l=s(140);d.exports=x},{140:140}],128:[function(s,d,p){"use strict";function x(c){var h=c.length;if((Array.isArray(c)||typeof c!="object"&&typeof c!="function")&&v(!1),typeof h!="number"&&v(!1),h===0||h-1 in c||v(!1),typeof c.callee=="function"&&v(!1),c.hasOwnProperty)try{return Array.prototype.slice.call(c)}catch{}for(var f=Array(h),m=0;m<h;m++)f[m]=c[m];return f}function l(c){return!!c&&(typeof c=="object"||typeof c=="function")&&"length"in c&&!("setInterval"in c)&&typeof c.nodeType!="number"&&(Array.isArray(c)||"callee"in c||"item"in c)}function _(c){return l(c)?Array.isArray(c)?c.slice():x(c):[c]}var v=s(138);d.exports=_},{138:138}],129:[function(s,d,p){"use strict";function x(b){var w=b.match(m);return w&&w[1].toLowerCase()}function l(b,w){var C=f;f||h(!1);var E=x(b),S=E&&c(E);if(S){C.innerHTML=S[1]+b+S[2];for(var M=S[0];M--;)C=C.lastChild}else C.innerHTML=b;var A=C.getElementsByTagName("script");A.length&&(w||h(!1),v(A).forEach(w));for(var R=Array.from(C.childNodes);C.lastChild;)C.removeChild(C.lastChild);return R}var _=s(124),v=s(128),c=s(134),h=s(138),f=_.canUseDOM?document.createElement("div"):null,m=/^\s*<(\w+)/;d.exports=l},{124:124,128:128,134:134,138:138}],130:[function(s,d,p){"use strict";function x(_){return function(){return _}}var l=function(){};l.thatReturns=x,l.thatReturnsFalse=x(!1),l.thatReturnsTrue=x(!0),l.thatReturnsNull=x(null),l.thatReturnsThis=function(){return this},l.thatReturnsArgument=function(_){return _},d.exports=l},{}],131:[function(s,d,p){"use strict";var x={};d.exports=x},{}],132:[function(s,d,p){"use strict";function x(l){try{l.focus()}catch{}}d.exports=x},{}],133:[function(s,d,p){"use strict";function x(l){if((l=l||(typeof document<"u"?document:void 0))===void 0)return null;try{return l.activeElement||l.body}catch{return l.body}}d.exports=x},{}],134:[function(s,d,p){"use strict";function x(C){return v||_(!1),w.hasOwnProperty(C)||(C="*"),c.hasOwnProperty(C)||(v.innerHTML=C==="*"?"<link />":"<"+C+"></"+C+">",c[C]=!v.firstChild),c[C]?w[C]:null}var l=s(124),_=s(138),v=l.canUseDOM?document.createElement("div"):null,c={},h=[1,'<select multiple="true">',"</select>"],f=[1,"<table>","</table>"],m=[3,"<table><tbody><tr>","</tr></tbody></table>"],b=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],w={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:h,option:h,caption:f,colgroup:f,tbody:f,tfoot:f,thead:f,td:m,th:m};["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"].forEach(function(C){w[C]=b,c[C]=!0}),d.exports=x},{124:124,138:138}],135:[function(s,d,p){"use strict";function x(l){return l.Window&&l instanceof l.Window?{x:l.pageXOffset||l.document.documentElement.scrollLeft,y:l.pageYOffset||l.document.documentElement.scrollTop}:{x:l.scrollLeft,y:l.scrollTop}}d.exports=x},{}],136:[function(s,d,p){"use strict";function x(_){return _.replace(l,"-$1").toLowerCase()}var l=/([A-Z])/g;d.exports=x},{}],137:[function(s,d,p){"use strict";function x(v){return l(v).replace(_,"-ms-")}var l=s(136),_=/^ms-/;d.exports=x},{136:136}],138:[function(s,d,p){"use strict";function x(_,v,c,h,f,m,b,w){if(l(v),!_){var C;if(v===void 0)C=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var E=[c,h,f,m,b,w],S=0;C=new Error(v.replace(/%s/g,function(){return E[S++]})),C.name="Invariant Violation"}throw C.framesToPop=1,C}}var l=function(_){};d.exports=x},{}],139:[function(s,d,p){"use strict";function x(l){var _=l?l.ownerDocument||l:document,v=_.defaultView||window;return!(!l||!(typeof v.Node=="function"?l instanceof v.Node:typeof l=="object"&&typeof l.nodeType=="number"&&typeof l.nodeName=="string"))}d.exports=x},{}],140:[function(s,d,p){"use strict";function x(_){return l(_)&&_.nodeType==3}var l=s(139);d.exports=x},{139:139}],141:[function(s,d,p){"use strict";function x(l){var _={};return function(v){return _.hasOwnProperty(v)||(_[v]=l.call(this,v)),_[v]}}d.exports=x},{}],142:[function(s,d,p){"use strict";function x(v,c){return v===c?v!==0||c!==0||1/v==1/c:v!==v&&c!==c}function l(v,c){if(x(v,c))return!0;if(typeof v!="object"||v===null||typeof c!="object"||c===null)return!1;var h=Object.keys(v),f=Object.keys(c);if(h.length!==f.length)return!1;for(var m=0;m<h.length;m++)if(!_.call(c,h[m])||!x(v[h[m]],c[h[m]]))return!1;return!0}var _=Object.prototype.hasOwnProperty;d.exports=l},{}],143:[function(s,d,p){"use strict";var x=s(130),l=x;d.exports=l},{130:130}],144:[function(s,d,p){"use strict";function x(c){if(c==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(c)}var l=Object.getOwnPropertySymbols,_=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;d.exports=function(){try{if(!Object.assign)return!1;var c=new String("abc");if(c[5]="de",Object.getOwnPropertyNames(c)[0]==="5")return!1;for(var h={},f=0;f<10;f++)h["_"+String.fromCharCode(f)]=f;if(Object.getOwnPropertyNames(h).map(function(b){return h[b]}).join("")!=="0123456789")return!1;var m={};return"abcdefghijklmnopqrst".split("").forEach(function(b){m[b]=b}),Object.keys(Object.assign({},m)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(c,h){for(var f,m,b=x(c),w=1;w<arguments.length;w++){f=Object(arguments[w]);for(var C in f)_.call(f,C)&&(b[C]=f[C]);if(l){m=l(f);for(var E=0;E<m.length;E++)v.call(f,m[E])&&(b[m[E]]=f[m[E]])}}return b}},{}],145:[function(s,d,p){"use strict";function x(l,_,v,c,h){}d.exports=x},{138:138,143:143,148:148}],146:[function(s,d,p){"use strict";var x=s(147);d.exports=function(l){return x(l,!1)}},{147:147}],147:[function(s,d,p){"use strict";var x=s(130),l=s(138),_=s(143),v=s(148),c=s(145);d.exports=function(h,f){function m(ge){var ye=ge&&(Q&&ge[Q]||ge[ne]);if(typeof ye=="function")return ye}function b(ge,ye){return ge===ye?ge!==0||1/ge==1/ye:ge!==ge&&ye!==ye}function w(ge){this.message=ge,this.stack=""}function C(ge){function ye(de,he,_e,ve,Z,be,Ee){return ve=ve||ue,be=be||_e,Ee!==v&&f&&l(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types"),he[_e]==null?de?new w(he[_e]===null?"The "+Z+" `"+be+"` is marked as required in `"+ve+"`, but its value is `null`.":"The "+Z+" `"+be+"` is marked as required in `"+ve+"`, but its value is `undefined`."):null:ge(he,_e,ve,Z,be)}var pe=ye.bind(null,!1);return pe.isRequired=ye.bind(null,!0),pe}function E(ge){function ye(pe,de,he,_e,ve,Z){var be=pe[de];return Y(be)!==ge?new w("Invalid "+_e+" `"+ve+"` of type `"+J(be)+"` supplied to `"+he+"`, expected `"+ge+"`."):null}return C(ye)}function S(ge){function ye(pe,de,he,_e,ve){if(typeof ge!="function")return new w("Property `"+ve+"` of component `"+he+"` has invalid PropType notation inside arrayOf.");var Z=pe[de];if(!Array.isArray(Z))return new w("Invalid "+_e+" `"+ve+"` of type `"+Y(Z)+"` supplied to `"+he+"`, expected an array.");for(var be=0;be<Z.length;be++){var Ee=ge(Z,be,he,_e,ve+"["+be+"]",v);if(Ee instanceof Error)return Ee}return null}return C(ye)}function M(ge){function ye(pe,de,he,_e,ve){if(!(pe[de]instanceof ge)){var Z=ge.name||ue;return new w("Invalid "+_e+" `"+ve+"` of type `"+K(pe[de])+"` supplied to `"+he+"`, expected instance of `"+Z+"`.")}return null}return C(ye)}function A(ge){function ye(pe,de,he,_e,ve){for(var Z=pe[de],be=0;be<ge.length;be++)if(b(Z,ge[be]))return null;return new w("Invalid "+_e+" `"+ve+"` of value `"+Z+"` supplied to `"+he+"`, expected one of "+JSON.stringify(ge)+".")}return Array.isArray(ge)?C(ye):x.thatReturnsNull}function R(ge){function ye(pe,de,he,_e,ve){if(typeof ge!="function")return new w("Property `"+ve+"` of component `"+he+"` has invalid PropType notation inside objectOf.");var Z=pe[de],be=Y(Z);if(be!=="object")return new w("Invalid "+_e+" `"+ve+"` of type `"+be+"` supplied to `"+he+"`, expected an object.");for(var Ee in Z)if(Z.hasOwnProperty(Ee)){var De=ge(Z,Ee,he,_e,ve+"."+Ee,v);if(De instanceof Error)return De}return null}return C(ye)}function D(ge){function ye(he,_e,ve,Z,be){for(var Ee=0;Ee<ge.length;Ee++)if((0,ge[Ee])(he,_e,ve,Z,be,v)==null)return null;return new w("Invalid "+Z+" `"+be+"` supplied to `"+ve+"`.")}if(!Array.isArray(ge))return x.thatReturnsNull;for(var pe=0;pe<ge.length;pe++){var de=ge[pe];if(typeof de!="function")return _(!1,"Invalid argument supplid to oneOfType. Expected an array of check functions, but received %s at index %s.",ie(de),pe),x.thatReturnsNull}return C(ye)}function N(ge){function ye(pe,de,he,_e,ve){var Z=pe[de],be=Y(Z);if(be!=="object")return new w("Invalid "+_e+" `"+ve+"` of type `"+be+"` supplied to `"+he+"`, expected `object`.");for(var Ee in ge){var De=ge[Ee];if(De){var Fe=De(Z,Ee,he,_e,ve+"."+Ee,v);if(Fe)return Fe}}return null}return C(ye)}function I(ge){switch(typeof ge){case"number":case"string":case"undefined":return!0;case"boolean":return!ge;case"object":if(Array.isArray(ge))return ge.every(I);if(ge===null||h(ge))return!0;var ye=m(ge);if(!ye)return!1;var pe,de=ye.call(ge);if(ye!==ge.entries){for(;!(pe=de.next()).done;)if(!I(pe.value))return!1}else for(;!(pe=de.next()).done;){var he=pe.value;if(he&&!I(he[1]))return!1}return!0;default:return!1}}function L(ge,ye){return ge==="symbol"||ye["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&ye instanceof Symbol}function Y(ge){var ye=typeof ge;return Array.isArray(ge)?"array":ge instanceof RegExp?"object":L(ye,ge)?"symbol":ye}function J(ge){if(ge==null)return""+ge;var ye=Y(ge);if(ye==="object"){if(ge instanceof Date)return"date";if(ge instanceof RegExp)return"regexp"}return ye}function ie(ge){var ye=J(ge);switch(ye){case"array":case"object":return"an "+ye;case"boolean":case"date":case"regexp":return"a "+ye;default:return ye}}function K(ge){return ge.constructor&&ge.constructor.name?ge.constructor.name:ue}var Q=typeof Symbol=="function"&&Symbol.iterator,ne="@@iterator",ue="<<anonymous>>",fe={array:E("array"),bool:E("boolean"),func:E("function"),number:E("number"),object:E("object"),string:E("string"),symbol:E("symbol"),any:function(){return C(x.thatReturnsNull)}(),arrayOf:S,element:function(){function ge(ye,pe,de,he,_e){var ve=ye[pe];return h(ve)?null:new w("Invalid "+he+" `"+_e+"` of type `"+Y(ve)+"` supplied to `"+de+"`, expected a single ReactElement.")}return C(ge)}(),instanceOf:M,node:function(){function ge(ye,pe,de,he,_e){return I(ye[pe])?null:new w("Invalid "+he+" `"+_e+"` supplied to `"+de+"`, expected a ReactNode.")}return C(ge)}(),objectOf:R,oneOf:A,oneOfType:D,shape:N};return w.prototype=Error.prototype,fe.checkPropTypes=c,fe.PropTypes=fe,fe}},{130:130,138:138,143:143,145:145,148:148}],148:[function(s,d,p){"use strict";d.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},{}]},{},[45])(45)}()}()}),P=r.exports})();var O={};(function(i){var r={},e=r.webpackHotUpdate;r.webpackHotUpdate=function(ne,ue){I(ne,ue),e&&e(ne,ue)};function o(Q){var ne=document.getElementsByTagName("head")[0],ue=document.createElement("script");ue.type="text/javascript",ue.charset="utf-8",ue.src=K.p+""+Q+"."+x+".hot-update.js",ne.appendChild(ue)}function s(Q){if(typeof XMLHttpRequest>"u")return Q(new Error("No browser support"));try{var ne=new XMLHttpRequest,ue=K.p+""+x+".hot-update.json";ne.open("GET",ue,!0),ne.timeout=1e4,ne.send(null)}catch(fe){return Q(fe)}ne.onreadystatechange=function(){if(ne.readyState===4)if(ne.status===0)Q(new Error("Manifest request to "+ue+" timed out."));else if(ne.status===404)Q();else if(ne.status!==200&&ne.status!==304)Q(new Error("Manifest request to "+ue+" failed."));else{try{var fe=JSON.parse(ne.responseText)}catch(ge){Q(ge);return}Q(null,fe)}}}var d=!1;try{Object.defineProperty({},"x",{get:function(){}}),d=!0}catch{}var p=!0,x="cac23860c44b0ba80f83",l={},_=[];function v(Q){var ne=ie[Q];if(!ne)return K;var ue=function(ye){return ne.hot.active?ie[ye]?(ie[ye].parents.indexOf(Q)<0&&ie[ye].parents.push(Q),ne.children.indexOf(ye)<0&&ne.children.push(ye)):_=[Q]:(console.warn("[HMR] unexpected require("+ye+") from disposed module "+Q),_=[]),K(ye)};for(var fe in K)Object.prototype.hasOwnProperty.call(K,fe)&&(d?Object.defineProperty(ue,fe,function(ye){return{configurable:!0,enumerable:!0,get:function(){return K[ye]},set:function(pe){K[ye]=pe}}}(fe)):ue[fe]=K[fe]);function ge(ye,pe){f==="ready"&&m("prepare"),w++,K.e(ye,function(){try{pe.call(null,ue)}finally{de()}function de(){w--,f==="prepare"&&(C[ye]||L(ye),w===0&&b===0&&Y())}})}return d?Object.defineProperty(ue,"e",{enumerable:!0,value:ge}):ue.e=ge,ue}function c(Q){var ne={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],active:!0,accept:function(ue,fe){if(typeof ue>"u")ne._selfAccepted=!0;else if(typeof ue=="function")ne._selfAccepted=ue;else if(typeof ue=="object")for(var ge=0;ge<ue.length;ge++)ne._acceptedDependencies[ue[ge]]=fe;else ne._acceptedDependencies[ue]=fe},decline:function(ue){if(typeof ue>"u")ne._selfDeclined=!0;else if(typeof ue=="number")ne._declinedDependencies[ue]=!0;else for(var fe=0;fe<ue.length;fe++)ne._declinedDependencies[ue[fe]]=!0},dispose:function(ue){ne._disposeHandlers.push(ue)},addDisposeHandler:function(ue){ne._disposeHandlers.push(ue)},removeDisposeHandler:function(ue){var fe=ne._disposeHandlers.indexOf(ue);fe>=0&&ne._disposeHandlers.splice(fe,1)},check:N,apply:J,status:function(ue){if(!ue)return f;h.push(ue)},addStatusHandler:function(ue){h.push(ue)},removeStatusHandler:function(ue){var fe=h.indexOf(ue);fe>=0&&h.splice(fe,1)},data:l[Q]};return ne}var h=[],f="idle";function m(Q){f=Q;for(var ne=0;ne<h.length;ne++)h[ne].call(null,Q)}var b=0,w=0,C={},E={},S={},M,A,R;function D(Q){var ne=+Q+""===Q;return ne?+Q:Q}function N(Q,ne){if(f!=="idle")throw new Error("check() is only allowed in idle status");typeof Q=="function"?(p=!1,ne=Q):(p=Q,ne=ne||function(ue){if(ue)throw ue}),m("check"),s(function(ue,fe){if(ue)return ne(ue);if(!fe){m("idle"),ne(null,null);return}E={},S={},C={};for(var ge=0;ge<fe.c.length;ge++)S[fe.c[ge]]=!0;R=fe.h,m("prepare"),M=ne,A={};var ye=0;L(ye),f==="prepare"&&w===0&&b===0&&Y()})}function I(Q,ne){if(!(!S[Q]||!E[Q])){E[Q]=!1;for(var ue in ne)Object.prototype.hasOwnProperty.call(ne,ue)&&(A[ue]=ne[ue]);--b===0&&w===0&&Y()}}function L(Q){S[Q]?(E[Q]=!0,b++,o(Q)):C[Q]=!0}function Y(){m("ready");var Q=M;if(M=null,!!Q)if(p)J(p,Q);else{var ne=[];for(var ue in A)Object.prototype.hasOwnProperty.call(A,ue)&&ne.push(D(ue));Q(null,ne)}}function J(Q,ne){if(f!=="ready")throw new Error("apply() is only allowed in ready status");typeof Q=="function"?(ne=Q,Q={}):Q&&typeof Q=="object"?ne=ne||function(gt){if(gt)throw gt}:(Q={},ne=ne||function(gt){if(gt)throw gt});function ue(gt){for(var xt=[gt],tt={},pt=xt.slice();pt.length>0;){var At=pt.pop(),gt=ie[At];if(!(!gt||gt.hot._selfAccepted)){if(gt.hot._selfDeclined)return new Error("Aborted because of self decline: "+At);if(At===0)return;for(var Tt=0;Tt<gt.parents.length;Tt++){var Ct=gt.parents[Tt],Bt=ie[Ct];if(Bt.hot._declinedDependencies[At])return new Error("Aborted because of declined dependency: "+At+" in "+Ct);if(!(xt.indexOf(Ct)>=0)){if(Bt.hot._acceptedDependencies[At]){tt[Ct]||(tt[Ct]=[]),fe(tt[Ct],[At]);continue}delete tt[Ct],xt.push(Ct),pt.push(Ct)}}}}return[xt,tt]}function fe(gt,xt){for(var tt=0;tt<xt.length;tt++){var pt=xt[tt];gt.indexOf(pt)<0&&gt.push(pt)}}var ge={},ye=[],pe={};for(var de in A)if(Object.prototype.hasOwnProperty.call(A,de)){var he=D(de),_e=ue(he);if(!_e){if(Q.ignoreUnaccepted)continue;return m("abort"),ne(new Error("Aborted because "+he+" is not accepted"))}if(_e instanceof Error)return m("abort"),ne(_e);pe[he]=A[he],fe(ye,_e[0]);for(var he in _e[1])Object.prototype.hasOwnProperty.call(_e[1],he)&&(ge[he]||(ge[he]=[]),fe(ge[he],_e[1][he]))}for(var ve=[],Z=0;Z<ye.length;Z++){var he=ye[Z];ie[he]&&ie[he].hot._selfAccepted&&ve.push({module:he,errorHandler:ie[he].hot._selfAccepted})}m("dispose");for(var be=ye.slice();be.length>0;){var he=be.pop(),Ee=ie[he];if(Ee){for(var De={},Fe=Ee.hot._disposeHandlers,Ue=0;Ue<Fe.length;Ue++){var Qe=Fe[Ue];Qe(De)}l[he]=De,Ee.hot.active=!1,delete ie[he];for(var Ue=0;Ue<Ee.children.length;Ue++){var Ke=ie[Ee.children[Ue]];if(Ke){var Te=Ke.parents.indexOf(he);Te>=0&&Ke.parents.splice(Te,1)}}}}for(var he in ge)if(Object.prototype.hasOwnProperty.call(ge,he))for(var Ee=ie[he],Ie=ge[he],Ue=0;Ue<Ie.length;Ue++){var ke=Ie[Ue],Te=Ee.children.indexOf(ke);Te>=0&&Ee.children.splice(Te,1)}m("apply"),x=R;for(var he in pe)Object.prototype.hasOwnProperty.call(pe,he)&&(i[he]=pe[he]);var nt=null;for(var he in ge)if(Object.prototype.hasOwnProperty.call(ge,he)){for(var Ee=ie[he],Ie=ge[he],dt=[],Z=0;Z<Ie.length;Z++){var ke=Ie[Z],Qe=Ee.hot._acceptedDependencies[ke];dt.indexOf(Qe)>=0||dt.push(Qe)}for(var Z=0;Z<dt.length;Z++){var Qe=dt[Z];try{Qe(ge)}catch(Tt){nt||(nt=Tt)}}}for(var Z=0;Z<ve.length;Z++){var yt=ve[Z],he=yt.module;_=[he];try{K(he)}catch(tt){if(typeof yt.errorHandler=="function")try{yt.errorHandler(tt)}catch(pt){nt||(nt=pt)}else nt||(nt=tt)}}if(nt)return m("fail"),ne(nt);m("idle"),ne(null,ye)}var ie={};function K(Q){if(ie[Q])return ie[Q].exports;var ne=ie[Q]={exports:{},id:Q,loaded:!1,hot:c(Q),parents:_,children:[]};return i[Q].call(ne.exports,ne,ne.exports,v(Q)),ne.loaded=!0,ne.exports}return K.m=i,K.c=ie,K.p="build/",K.h=function(){return x},v(0)(0)})([function(i,r,e){i.exports=e(1)},function(i,r,e){"use strict";var o=e(2),s=d(o);function d(p){return p&&p.__esModule?p:{default:p}}O.ChromePicker=s.default},function(i,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Chrome=void 0;var o=Object.assign||function(D){for(var N=1;N<arguments.length;N++){var I=arguments[N];for(var L in I)Object.prototype.hasOwnProperty.call(I,L)&&(D[L]=I[L])}return D},s=function(){function D(N,I){for(var L=0;L<I.length;L++){var Y=I[L];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(N,Y.key,Y)}}return function(N,I,L){return I&&D(N.prototype,I),L&&D(N,L),N}}(),d=e(3),p=E(d),x=e(4),l=E(x),_=e(15),v=e(29),c=E(v),h=e(30),f=E(h),m=e(17),b=E(m),w=e(31),C=E(w);function E(D){return D&&D.__esModule?D:{default:D}}function S(D,N){if(!(D instanceof N))throw new TypeError("Cannot call a class as a function")}function M(D,N){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:D}function A(D,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);D.prototype=Object.create(N&&N.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(D,N):D.__proto__=N)}var R=r.Chrome=function(D){A(N,D);function N(){for(var I,L,Y,J,ie=arguments.length,K=Array(ie),Q=0;Q<ie;Q++)K[Q]=arguments[Q];return S(this,N),J=(L=(Y=M(this,(I=N.__proto__||Object.getPrototypeOf(N)).call.apply(I,[this].concat(K))),Y),Y.shouldComponentUpdate=b.default.bind(Y,Y,arguments[0],arguments[1]),Y.handleChange=function(ne){Y.props.onChange(ne)},L),M(Y,J)}return s(N,[{key:"classes",value:function(){return{default:{picker:{width:"100%"},saturation:{width:"100%",height:"48px",position:"relative",borderRadius:"0px",overflow:"hidden"},Saturation:{radius:"0px"},body:{padding:"0"},controls:{marginTop:"1px",display:"block"},swatch:{marginTop:"0px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{Absolute:"0 0 0 0",zIndex:2,borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+this.props.rgb.r+", "+this.props.rgb.g+", "+this.props.rgb.b+", "+this.props.rgb.a+")"},hue:{height:"16px",position:"relative",width:"100%"},Hue:{radius:"0"},colors:{marginTop:"1px",display:"flex",flexDirection:"row"}}}}},{key:"render",value:function(){var L=[];if(this.props.colors)for(var Y=0;Y<this.props.colors.length;Y++){var J=this.props.colors[Y];L.push(p.default.createElement(C.default,{key:J,color:J,active:J.replace("#","").toLowerCase()==this.props.hex,onClick:this.handleChange}))}return p.default.createElement("div",{style:this.styles().picker},p.default.createElement("div",{style:this.styles().saturation},p.default.createElement(_.Saturation,o({},this.styles().Saturation,this.props,{pointer:f.default,onChange:this.handleChange}))),p.default.createElement("div",{style:this.styles().body},p.default.createElement("div",{style:this.styles().hue},p.default.createElement(_.Hue,o({},this.styles().Hue,this.props,{pointer:c.default,onChange:this.handleChange}))),p.default.createElement("div",{style:this.styles().colors},L)))}}]),N}(l.default.Component);R.defaultProps={colors:["#000000","#808080","#FFFFFF","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#E20F2E"]},r.default=(0,_.ColorWrap)(R)},function(i,r){"use strict";i.exports=X},function(i,r,e){"use strict";i.exports={Component:e(5),inline:e(6),mixin:{css:e(6)}}},function(i,r,e){"use strict";function o(v,c){if(!(v instanceof c))throw new TypeError("Cannot call a class as a function")}function s(v,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);v.prototype=Object.create(c&&c.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(v,c):v.__proto__=c)}var d=function(){function v(c,h){for(var f=0;f<h.length;f++){var m=h[f];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(c,m.key,m)}}return function(c,h,f){return h&&v(c.prototype,h),f&&v(c,f),c}}(),p=function(v,c,h){for(var f=!0;f;){var m=v,b=c,w=h;f=!1,m===null&&(m=Function.prototype);var C=Object.getOwnPropertyDescriptor(m,b);if(C!==void 0){if("value"in C)return C.value;var E=C.get;return E===void 0?void 0:E.call(w)}var S=Object.getPrototypeOf(m);if(S===null)return;v=S,c=b,h=w,f=!0,C=S=void 0}},x=e(3),l=e(6),_=function(v){function c(){o(this,c),p(Object.getPrototypeOf(c.prototype),"constructor",this).apply(this,arguments)}return s(c,v),d(c,[{key:"css",value:function(h){return l.call(this,h)}},{key:"styles",value:function(){return this.css()}}]),c}(x.Component);_.contextTypes={mixins:x.PropTypes.object},i.exports=_},function(i,r,e){"use strict";var o=e(7),s=e(8),d=e(9);i.exports=function(p){var x=this;d=e(9);var l=[];if(!this.classes)throw console.warn("Define this.classes on `"+this.constructor.name+"`");s(this.classes());var _=function(C,E){x.classes()[C]?l.push(x.classes()[C]):C&&E&&E.warn===!0&&console.warn("The `"+C+"` css class does not exist on `"+x.constructor.name+"`")};_("default");for(var v in this.props){var c=this.props[v];o(c)||(c===!0?(_(v),_(v+"-true")):_(c?v+"-"+c:v+"-false"))}if(this.props&&this.props.activeBounds)for(var h=0;h<this.props.activeBounds.length;h++){var f=this.props.activeBounds[h];_(f)}for(var m in p){var b=p[m];b===!0&&_(m,{warn:!0})}var w={};return this.context&&this.context.mixins&&(w=this.context.mixins),d(l,w)}},function(i,r){function e(o){var s=typeof o;return!!o&&(s=="object"||s=="function")}i.exports=e},function(i,r,e){"use strict";var o=e(7);i.exports=function(s){for(var d in s){var p=s[d];if(o(p))for(var x in p){var l=p[x];o(l)||console.warn("Make sure the value of the element `"+d+"` is an object of css. You passed it `"+p+"`")}else console.warn("Make sure the value of `"+d+"` is an object of html elements. You passed it `"+p+"`")}}},function(i,r,e){"use strict";var o=e(10),s=e(14);i.exports=function(d,p){var x=o(d);return s(x,p)}},function(i,r,e){"use strict";var o=e(11),s=e(7),d=e(13);i.exports=function(p){return s(p)&&!d(p)?p:p.length===1?p[0]:o.recursive.apply(void 0,p)}},function(i,r,e){(function(o){(function(s){var d=function(v){return l(v===!0,!1,arguments)},p="merge";d.recursive=function(v){return l(v===!0,!0,arguments)},d.clone=function(v){var c=v,h=_(v),f,m;if(h==="array")for(c=[],m=v.length,f=0;f<m;++f)c[f]=d.clone(v[f]);else if(h==="object"){c={};for(f in v)c[f]=d.clone(v[f])}return c};function x(v,c){if(_(v)!=="object")return c;for(var h in c)_(v[h])==="object"&&_(c[h])==="object"?v[h]=x(v[h],c[h]):v[h]=c[h];return v}function l(v,c,h){var f=h[0],m=h.length;(v||_(f)!=="object")&&(f={});for(var b=0;b<m;++b){var w=h[b],C=_(w);if(C==="object")for(var E in w){var S=v?d.clone(w[E]):w[E];c?f[E]=x(f[E],S):f[E]=S}}return f}function _(v){return{}.toString.call(v).slice(8,-1).toLowerCase()}s?o.exports=d:window[p]=d})(typeof o=="object"&&o&&typeof o.exports=="object"&&o.exports)}).call(r,e(12)(i))},function(i,r){i.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(i,r){var e=Array.isArray;i.exports=e},function(i,r,e){"use strict";var o=e(7),s=e(13),d=e(11),p={borderRadius:function(l){return l!==null?{msBorderRadius:l,MozBorderRadius:l,OBorderRadius:l,WebkitBorderRadius:l,borderRadius:l}:void 0},boxShadow:function(l){return l!==null?{msBoxShadow:l,MozBoxShadow:l,OBoxShadow:l,WebkitBoxShadow:l,boxShadow:l}:void 0},userSelect:function(l){return l!==null?{WebkitTouchCallout:l,KhtmlUserSelect:l,MozUserSelect:l,msUserSelect:l,WebkitUserSelect:l,userSelect:l}:void 0},flex:function(l){return l!==null?{WebkitBoxFlex:l,MozBoxFlex:l,WebkitFlex:l,msFlex:l,flex:l}:void 0},flexBasis:function(l){return l!==null?{WebkitFlexBasis:l,flexBasis:l}:void 0},justifyContent:function(l){return l!==null?{WebkitJustifyContent:l,justifyContent:l}:void 0},transition:function(l){return l!==null?{msTransition:l,MozTransition:l,OTransition:l,WebkitTransition:l,transition:l}:void 0},transform:function(l){return l!==null?{msTransform:l,MozTransform:l,OTransform:l,WebkitTransform:l,transform:l}:void 0},Absolute:function(l){if(l!==null){var _=l.split(" ");return{position:"absolute",top:_[0],right:_[1],bottom:_[2],left:_[3]}}},Extend:function(l,_){var v=_[l];return v||void 0}},x=function l(_,v,c){var h=d(v,p),f={};for(var m in _){var b=_[m];if(o(b)&&!s(b))f[m]=l(b,v,_);else if(h[m]){var w=h[m](b,c);for(var C in w){var E=w[C];f[C]=E}}else f[m]=b}return f};i.exports=function(l,_,v){return x(l,_,v)}},function(i,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=e(16);Object.defineProperty(r,"Alpha",{enumerable:!0,get:function(){return l(o).default}});var s=e(20);Object.defineProperty(r,"Checkboard",{enumerable:!0,get:function(){return l(s).default}});var d=e(21);Object.defineProperty(r,"Hue",{enumerable:!0,get:function(){return l(d).default}});var p=e(22);Object.defineProperty(r,"Saturation",{enumerable:!0,get:function(){return l(p).default}});var x=e(24);Object.defineProperty(r,"ColorWrap",{enumerable:!0,get:function(){return l(x).default}});function l(_){return _&&_.__esModule?_:{default:_}}},function(i,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Alpha=void 0;var o=function(){function C(E,S){for(var M=0;M<S.length;M++){var A=S[M];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(E,A.key,A)}}return function(E,S,M){return S&&C(E.prototype,S),M&&C(E,M),E}}(),s=e(3),d=h(s),p=e(4),x=h(p),l=e(17),_=h(l),v=e(20),c=h(v);function h(C){return C&&C.__esModule?C:{default:C}}function f(C,E){if(!(C instanceof E))throw new TypeError("Cannot call a class as a function")}function m(C,E){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:C}function b(C,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);C.prototype=Object.create(E&&E.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(C,E):C.__proto__=E)}var w=r.Alpha=function(C){b(E,C);function E(){for(var S,M,A,R,D=arguments.length,N=Array(D),I=0;I<D;I++)N[I]=arguments[I];return f(this,E),R=(M=(A=m(this,(S=E.__proto__||Object.getPrototypeOf(E)).call.apply(S,[this].concat(N))),A),A.shouldComponentUpdate=_.default.bind(A,A,arguments[0],arguments[1]),A.handleChange=function(L,Y){!Y&&L.preventDefault();var J=A.refs.container,ie=J.clientWidth,K=(L.pageX||L.touches[0].pageX)-(J.getBoundingClientRect().left+window.pageXOffset),Q;K<0?Q=0:K>ie?Q=1:Q=Math.round(K*100/ie)/100,A.props.a!==Q&&A.props.onChange({h:A.props.hsl.h,s:A.props.hsl.s,l:A.props.hsl.l,a:Q,source:"rgb"})},A.handleMouseDown=function(L){A.handleChange(L,!0),window.addEventListener("mousemove",A.handleChange),window.addEventListener("mouseup",A.handleMouseUp)},A.handleMouseUp=function(){A.unbindEventListeners()},A.unbindEventListeners=function(){window.removeEventListener("mousemove",A.handleChange),window.removeEventListener("mouseup",A.handleMouseUp)},M),m(A,R)}return o(E,[{key:"classes",value:function(){return{default:{alpha:{Absolute:"0 0 0 0",borderRadius:this.props.radius},checkboard:{Absolute:"0 0 0 0",overflow:"hidden"},gradient:{Absolute:"0 0 0 0",background:"linear-gradient(to right, rgba("+this.props.rgb.r+", "+this.props.rgb.g+", "+this.props.rgb.b+", 0) 0%, rgba("+this.props.rgb.r+", "+this.props.rgb.g+", "+this.props.rgb.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",zIndex:"2",height:"100%",margin:"0 3px"},pointer:{zIndex:"2",position:"absolute",left:this.props.rgb.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}}}}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var M=d.default.createElement("div",{style:this.styles().slider});return this.props.pointer&&(M=d.default.createElement(this.props.pointer,this.props)),d.default.createElement("div",{style:this.styles().alpha},d.default.createElement("div",{style:this.styles().checkboard},d.default.createElement(c.default,null)),d.default.createElement("div",{style:this.styles().gradient}),d.default.createElement("div",{style:this.styles().container,ref:"container",onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},d.default.createElement("div",{style:this.styles().pointer,ref:"pointer"},M)))}}]),E}(x.default.Component);r.default=w},function(i,r,e){i.exports=e(18)},function(i,r,e){"use strict";var o=e(19);function s(d,p,x){return!o(d.props,p)||!o(d.state,x)}i.exports=s},function(i,r){"use strict";var e=Object.prototype.hasOwnProperty;function o(s,d){if(s===d)return!0;if(typeof s!="object"||s===null||typeof d!="object"||d===null)return!1;var p=Object.keys(s),x=Object.keys(d);if(p.length!==x.length)return!1;for(var l=e.bind(d),_=0;_<p.length;_++)if(!l(p[_])||s[p[_]]!==d[p[_]])return!1;return!0}i.exports=o},function(i,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Checkboard=void 0;var o=function(){function E(S,M){for(var A=0;A<M.length;A++){var R=M[A];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(S,R.key,R)}}return function(S,M,A){return M&&E(S.prototype,M),A&&E(S,A),S}}(),s=e(3),d=v(s),p=e(4),x=v(p),l=e(17),_=v(l);function v(E){return E&&E.__esModule?E:{default:E}}function c(E,S){if(!(E instanceof S))throw new TypeError("Cannot call a class as a function")}function h(E,S){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:E}function f(E,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);E.prototype=Object.create(S&&S.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(E,S):E.__proto__=S)}var m={};function b(E,S,M){if(typeof document>"u")return null;var A=document.createElement("canvas");A.width=A.height=M*2;var R=A.getContext("2d");return R?(R.fillStyle=E,R.fillRect(0,0,A.width,A.height),R.fillStyle=S,R.fillRect(0,0,M,M),R.translate(M,M),R.fillRect(0,0,M,M),A.toDataURL()):null}function w(E,S,M){var A=E+","+S+","+M;if(m[A])return m[A];var R=b(E,S,M);return m[A]=R,R}var C=r.Checkboard=function(E){f(S,E);function S(){for(var M,A,R,D,N=arguments.length,I=Array(N),L=0;L<N;L++)I[L]=arguments[L];return c(this,S),D=(A=(R=h(this,(M=S.__proto__||Object.getPrototypeOf(S)).call.apply(M,[this].concat(I))),R),R.shouldComponentUpdate=_.default.bind(R,R,arguments[0],arguments[1]),A),h(R,D)}return o(S,[{key:"classes",value:function(){var A=w(this.props.white,this.props.grey,this.props.size);return{default:{grid:{Absolute:"0 0 0 0",background:"url("+A+") center left"}}}}},{key:"render",value:function(){return d.default.createElement("div",{style:this.styles().grid,ref:"grid"})}}]),S}(x.default.Component);C.defaultProps={size:8,white:"#fff",grey:"#e6e6e6"},r.default=C},function(i,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Hue=void 0;var o=function(){function b(w,C){for(var E=0;E<C.length;E++){var S=C[E];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(w,S.key,S)}}return function(w,C,E){return C&&b(w.prototype,C),E&&b(w,E),w}}(),s=e(3),d=v(s),p=e(4),x=v(p),l=e(17),_=v(l);function v(b){return b&&b.__esModule?b:{default:b}}function c(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")}function h(b,w){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:b}function f(b,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);b.prototype=Object.create(w&&w.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(b,w):b.__proto__=w)}var m=r.Hue=function(b){f(w,b);function w(){for(var C,E,S,M,A=arguments.length,R=Array(A),D=0;D<A;D++)R[D]=arguments[D];return c(this,w),M=(E=(S=h(this,(C=w.__proto__||Object.getPrototypeOf(w)).call.apply(C,[this].concat(R))),S),S.shouldComponentUpdate=_.default.bind(S,S,arguments[0],arguments[1]),S.handleChange=function(N,I){!I&&N.preventDefault();var L=S.refs.container,Y=L.clientWidth,J=L.clientHeight,ie=(N.pageX||N.touches&&N.touches[0].pageX||0)-(L.getBoundingClientRect().left+window.pageXOffset),K=(N.pageY||N.touches&&N.touches[0].pageY||0)-(L.getBoundingClientRect().top+window.pageYOffset);if(S.props.direction==="vertical"){var Q;if(K<0)Q=359;else if(K>J)Q=0;else{var ne=-(K*100/J)+100;Q=360*ne/100}S.props.hsl.h!==Q&&S.props.onChange({h:Q,s:S.props.hsl.s,l:S.props.hsl.l,a:S.props.hsl.a,source:"rgb"})}else{var Q;if(ie<0)Q=0;else if(ie>Y)Q=359;else{var ne=ie*100/Y;Q=360*ne/100}S.props.hsl.h!==Q&&S.props.onChange({h:Q,s:S.props.hsl.s,l:S.props.hsl.l,a:S.props.hsl.a,source:"rgb"})}},S.handleMouseDown=function(N){S.handleChange(N,!0),window.addEventListener("mousemove",S.handleChange),window.addEventListener("mouseup",S.handleMouseUp)},S.handleMouseUp=function(){S.unbindEventListeners()},E),h(S,M)}return o(w,[{key:"classes",value:function(){return{default:{hue:{Absolute:"0 0 0 0",background:"linear-gradient(to right, #f00 0%, #ff0 17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%)",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{margin:"0 2px",position:"relative",height:"100%"},pointer:{zIndex:"2",position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},"direction-vertical":{hue:{background:"linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%)"},pointer:{left:"0",top:-(this.props.hsl.h*100/360)+100+"%"}}}}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var E=d.default.createElement("div",{style:this.styles().slider});return this.props.pointer&&(E=d.default.createElement(this.props.pointer,this.props)),d.default.createElement("div",{style:this.styles().hue},d.default.createElement("div",{style:this.styles().container,ref:"container",onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},d.default.createElement("div",{style:this.styles().pointer,ref:"pointer"},E)))}}]),w}(x.default.Component);r.default=m},function(i,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Saturation=void 0;var o=function(){function C(E,S){for(var M=0;M<S.length;M++){var A=S[M];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(E,A.key,A)}}return function(E,S,M){return S&&C(E.prototype,S),M&&C(E,M),E}}(),s=e(3),d=h(s),p=e(4),x=h(p),l=e(23),_=h(l),v=e(17),c=h(v);function h(C){return C&&C.__esModule?C:{default:C}}function f(C,E){if(!(C instanceof E))throw new TypeError("Cannot call a class as a function")}function m(C,E){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:C}function b(C,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);C.prototype=Object.create(E&&E.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(C,E):C.__proto__=E)}var w=r.Saturation=function(C){b(E,C);function E(S){f(this,E);var M=m(this,(E.__proto__||Object.getPrototypeOf(E)).call(this));return M.shouldComponentUpdate=c.default.bind(M,M,arguments[0],arguments[1]),M.handleChange=function(A,R){!R&&A.preventDefault();var D=M.refs.container,N=D.clientWidth,I=D.clientHeight,L=(A.pageX||A.touches[0].pageX)-(D.getBoundingClientRect().left+window.pageXOffset),Y=(A.pageY||A.touches[0].pageY)-(D.getBoundingClientRect().top+window.pageYOffset);L<0?L=0:L>N?L=N:Y<0?Y=0:Y>I&&(Y=I);var J=L*100/N,ie=-(Y*100/I)+100;M.throttle(M.props.onChange,{h:M.props.hsl.h,s:J,v:ie,a:M.props.hsl.a,source:"rgb"})},M.handleMouseDown=function(A){M.handleChange(A,!0),window.addEventListener("mousemove",M.handleChange),window.addEventListener("mouseup",M.handleMouseUp)},M.handleMouseUp=function(){M.unbindEventListeners()},M.throttle=(0,_.default)(function(A,R){A(R)},50),M}return o(E,[{key:"classes",value:function(){return{default:{color:{Absolute:"0 0 0 0",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{Absolute:"0 0 0 0",background:"linear-gradient(to right, #fff, rgba(255,255,255,0))"},black:{Absolute:"0 0 0 0",background:"linear-gradient(to top, #000, rgba(0,0,0,0))",boxShadow:this.props.shadow},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:"0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3), 0 0 1px 2px rgba(0,0,0,.4)",borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}}}}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var M=d.default.createElement("div",{style:this.styles().circle});return this.props.pointer&&(M=d.default.createElement(this.props.pointer,this.props)),d.default.createElement("div",{style:this.styles().color,ref:"container",onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},d.default.createElement("div",{style:this.styles().white},d.default.createElement("div",{style:this.styles().black}),d.default.createElement("div",{style:this.styles().pointer,ref:"pointer"},M)))}}]),E}(x.default.Component);r.default=w},function(i,r){(function(e){var o="Expected a function",s=NaN,d="[object Symbol]",p=/^\s+|\s+$/g,x=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,_=/^0o[0-7]+$/i,v=parseInt,c=typeof e=="object"&&e&&e.Object===Object&&e,h=typeof self=="object"&&self&&self.Object===Object&&self,f=c||h||Function("return this")(),m=Object.prototype,b=m.toString,w=Math.max,C=Math.min,E=function(){return f.Date.now()};function S(I,L,Y){var J,ie,K,Q,ne,ue,fe=0,ge=!1,ye=!1,pe=!0;if(typeof I!="function")throw new TypeError(o);L=N(L)||0,A(Y)&&(ge=!!Y.leading,ye="maxWait"in Y,K=ye?w(N(Y.maxWait)||0,L):K,pe="trailing"in Y?!!Y.trailing:pe);function de(Ue){var Qe=J,Ke=ie;return J=ie=void 0,fe=Ue,Q=I.apply(Ke,Qe),Q}function he(Ue){return fe=Ue,ne=setTimeout(Z,L),ge?de(Ue):Q}function _e(Ue){var Qe=Ue-ue,Ke=Ue-fe,Te=L-Qe;return ye?C(Te,K-Ke):Te}function ve(Ue){var Qe=Ue-ue,Ke=Ue-fe;return ue===void 0||Qe>=L||Qe<0||ye&&Ke>=K}function Z(){var Ue=E();if(ve(Ue))return be(Ue);ne=setTimeout(Z,_e(Ue))}function be(Ue){return ne=void 0,pe&&J?de(Ue):(J=ie=void 0,Q)}function Ee(){ne!==void 0&&clearTimeout(ne),fe=0,J=ue=ie=ne=void 0}function De(){return ne===void 0?Q:be(E())}function Fe(){var Ue=E(),Qe=ve(Ue);if(J=arguments,ie=this,ue=Ue,Qe){if(ne===void 0)return he(ue);if(ye)return ne=setTimeout(Z,L),de(ue)}return ne===void 0&&(ne=setTimeout(Z,L)),Q}return Fe.cancel=Ee,Fe.flush=De,Fe}function M(I,L,Y){var J=!0,ie=!0;if(typeof I!="function")throw new TypeError(o);return A(Y)&&(J="leading"in Y?!!Y.leading:J,ie="trailing"in Y?!!Y.trailing:ie),S(I,L,{leading:J,maxWait:L,trailing:ie})}function A(I){var L=typeof I;return!!I&&(L=="object"||L=="function")}function R(I){return!!I&&typeof I=="object"}function D(I){return typeof I=="symbol"||R(I)&&b.call(I)==d}function N(I){if(typeof I=="number")return I;if(D(I))return s;if(A(I)){var L=typeof I.valueOf=="function"?I.valueOf():I;I=A(L)?L+"":L}if(typeof I!="string")return I===0?I:+I;I=I.replace(p,"");var Y=l.test(I);return Y||_.test(I)?v(I.slice(2),Y?2:8):x.test(I)?s:+I}i.exports=M}).call(r,function(){return this}())},function(i,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ColorWrap=void 0;var o=Object.assign||function(R){for(var D=1;D<arguments.length;D++){var N=arguments[D];for(var I in N)Object.prototype.hasOwnProperty.call(N,I)&&(R[I]=N[I])}return R},s=function(){function R(D,N){for(var I=0;I<N.length;I++){var L=N[I];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(D,L.key,L)}}return function(D,N,I){return N&&R(D.prototype,N),I&&R(D,I),D}}(),d=e(3),p=C(d),x=e(11),l=C(x),_=e(25),v=C(_),c=e(26),h=C(c),f=e(27),m=C(f),b=e(17),w=C(b);function C(R){return R&&R.__esModule?R:{default:R}}function E(R,D){if(!(R instanceof D))throw new TypeError("Cannot call a class as a function")}function S(R,D){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D&&(typeof D=="object"||typeof D=="function")?D:R}function M(R,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);R.prototype=Object.create(D&&D.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(R,D):R.__proto__=D)}var A=r.ColorWrap=function(D){var N=function(I){M(L,I);function L(Y){E(this,L);var J=S(this,(L.__proto__||Object.getPrototypeOf(L)).call(this));return J.shouldComponentUpdate=w.default.bind(J,J,arguments[0],arguments[1]),J.handleChange=function(ie){if(ie=m.default.simpleCheckForValidColor(ie),ie){var K=m.default.toState(ie,ie.h||J.state.oldHue);J.setState(K),J.props.onChangeComplete&&J.debounce(J.props.onChangeComplete,K),J.props.onChange&&J.props.onChange(K)}},J.state=(0,l.default)(m.default.toState(Y.color,0),{visible:Y.display}),J.debounce=(0,h.default)(function(ie,K){ie(K)},100),J}return s(L,[{key:"componentWillReceiveProps",value:function(J){this.setState((0,l.default)(m.default.toState(J.color,this.state.oldHue),{visible:J.display}))}},{key:"render",value:function(){return p.default.createElement(D,o({},this.props,this.state,{onChange:this.handleChange}))}}]),L}(p.default.Component);return N.defaultProps={color:{h:250,s:.5,l:.2,a:1}},N};r.default=A},function(i,r){var e="[object Object]";function o(m){var b=!1;if(m!=null&&typeof m.toString!="function")try{b=!!(m+"")}catch{}return b}function s(m,b){return function(w){return m(b(w))}}var d=Function.prototype,p=Object.prototype,x=d.toString,l=p.hasOwnProperty,_=x.call(Object),v=p.toString,c=s(Object.getPrototypeOf,Object);function h(m){return!!m&&typeof m=="object"}function f(m){if(!h(m)||v.call(m)!=e||o(m))return!1;var b=c(m);if(b===null)return!0;var w=l.call(b,"constructor")&&b.constructor;return typeof w=="function"&&w instanceof w&&x.call(w)==_}i.exports=f},function(i,r){(function(e){var o="Expected a function",s=NaN,d="[object Symbol]",p=/^\s+|\s+$/g,x=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,_=/^0o[0-7]+$/i,v=parseInt,c=typeof e=="object"&&e&&e.Object===Object&&e,h=typeof self=="object"&&self&&self.Object===Object&&self,f=c||h||Function("return this")(),m=Object.prototype,b=m.toString,w=Math.max,C=Math.min,E=function(){return f.Date.now()};function S(N,I,L){var Y,J,ie,K,Q,ne,ue=0,fe=!1,ge=!1,ye=!0;if(typeof N!="function")throw new TypeError(o);I=D(I)||0,M(L)&&(fe=!!L.leading,ge="maxWait"in L,ie=ge?w(D(L.maxWait)||0,I):ie,ye="trailing"in L?!!L.trailing:ye);function pe(Fe){var Ue=Y,Qe=J;return Y=J=void 0,ue=Fe,K=N.apply(Qe,Ue),K}function de(Fe){return ue=Fe,Q=setTimeout(ve,I),fe?pe(Fe):K}function he(Fe){var Ue=Fe-ne,Qe=Fe-ue,Ke=I-Ue;return ge?C(Ke,ie-Qe):Ke}function _e(Fe){var Ue=Fe-ne,Qe=Fe-ue;return ne===void 0||Ue>=I||Ue<0||ge&&Qe>=ie}function ve(){var Fe=E();if(_e(Fe))return Z(Fe);Q=setTimeout(ve,he(Fe))}function Z(Fe){return Q=void 0,ye&&Y?pe(Fe):(Y=J=void 0,K)}function be(){Q!==void 0&&clearTimeout(Q),ue=0,Y=ne=J=Q=void 0}function Ee(){return Q===void 0?K:Z(E())}function De(){var Fe=E(),Ue=_e(Fe);if(Y=arguments,J=this,ne=Fe,Ue){if(Q===void 0)return de(ne);if(ge)return Q=setTimeout(ve,I),pe(ne)}return Q===void 0&&(Q=setTimeout(ve,I)),K}return De.cancel=be,De.flush=Ee,De}function M(N){var I=typeof N;return!!N&&(I=="object"||I=="function")}function A(N){return!!N&&typeof N=="object"}function R(N){return typeof N=="symbol"||A(N)&&b.call(N)==d}function D(N){if(typeof N=="number")return N;if(R(N))return s;if(M(N)){var I=typeof N.valueOf=="function"?N.valueOf():N;N=M(I)?I+"":I}if(typeof N!="string")return N===0?N:+N;N=N.replace(p,"");var L=l.test(N);return L||_.test(N)?v(N.slice(2),L?2:8):x.test(N)?s:+N}i.exports=S}).call(r,function(){return this}())},function(i,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=e(28),s=d(o);function d(p){return p&&p.__esModule?p:{default:p}}r.default={simpleCheckForValidColor:function(x){for(var l=["r","g","b","a","h","s","a","v"],_=0,v=0,c=0;c<l.length;c++){var h=l[c];x[h]&&(_++,isNaN(x[h])||v++)}if(_===v)return x},toState:function(x,l){var _=x.hex?(0,s.default)(x.hex):(0,s.default)(x),v=_.toHsl(),c=_.toHsv();return v.s===0&&(v.h=l||0,c.h=l||0),{hsl:v,hex:"#"+_.toHex(),rgb:_.toRgb(),hsv:c,oldHue:x.h||l||v.h,source:x.source}},isValidHex:function(x){return(0,s.default)(x).isValid()}}},function(i,r,e){var o;(function(){var s=/^[\s,#]+/,d=/\s+$/,p=0,x=Math,l=x.round,_=x.min,v=x.max,c=x.random;function h(Te,Ie){if(Te=Te||"",Ie=Ie||{},Te instanceof h)return Te;if(!(this instanceof h))return new h(Te,Ie);var ke=f(Te);this._originalInput=Te,this._r=ke.r,this._g=ke.g,this._b=ke.b,this._a=ke.a,this._roundA=l(100*this._a)/100,this._format=Ie.format||ke.format,this._gradientType=Ie.gradientType,this._r<1&&(this._r=l(this._r)),this._g<1&&(this._g=l(this._g)),this._b<1&&(this._b=l(this._b)),this._ok=ke.ok,this._tc_id=p++}h.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Te=this.toRgb();return(Te.r*299+Te.g*587+Te.b*114)/1e3},getLuminance:function(){var Te=this.toRgb(),Ie,ke,nt,dt,yt,gt;return Ie=Te.r/255,ke=Te.g/255,nt=Te.b/255,Ie<=.03928?dt=Ie/12.92:dt=Math.pow((Ie+.055)/1.055,2.4),ke<=.03928?yt=ke/12.92:yt=Math.pow((ke+.055)/1.055,2.4),nt<=.03928?gt=nt/12.92:gt=Math.pow((nt+.055)/1.055,2.4),.2126*dt+.7152*yt+.0722*gt},setAlpha:function(Te){return this._a=pe(Te),this._roundA=l(100*this._a)/100,this},toHsv:function(){var Te=C(this._r,this._g,this._b);return{h:Te.h*360,s:Te.s,v:Te.v,a:this._a}},toHsvString:function(){var Te=C(this._r,this._g,this._b),Ie=l(Te.h*360),ke=l(Te.s*100),nt=l(Te.v*100);return this._a==1?"hsv("+Ie+", "+ke+"%, "+nt+"%)":"hsva("+Ie+", "+ke+"%, "+nt+"%, "+this._roundA+")"},toHsl:function(){var Te=b(this._r,this._g,this._b);return{h:Te.h*360,s:Te.s,l:Te.l,a:this._a}},toHslString:function(){var Te=b(this._r,this._g,this._b),Ie=l(Te.h*360),ke=l(Te.s*100),nt=l(Te.l*100);return this._a==1?"hsl("+Ie+", "+ke+"%, "+nt+"%)":"hsla("+Ie+", "+ke+"%, "+nt+"%, "+this._roundA+")"},toHex:function(Te){return S(this._r,this._g,this._b,Te)},toHexString:function(Te){return"#"+this.toHex(Te)},toHex8:function(){return M(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:l(this._r),g:l(this._g),b:l(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+l(this._r)+", "+l(this._g)+", "+l(this._b)+")":"rgba("+l(this._r)+", "+l(this._g)+", "+l(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:l(de(this._r,255)*100)+"%",g:l(de(this._g,255)*100)+"%",b:l(de(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+l(de(this._r,255)*100)+"%, "+l(de(this._g,255)*100)+"%, "+l(de(this._b,255)*100)+"%)":"rgba("+l(de(this._r,255)*100)+"%, "+l(de(this._g,255)*100)+"%, "+l(de(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:ge[S(this._r,this._g,this._b,!0)]||!1},toFilter:function(Te){var Ie="#"+M(this._r,this._g,this._b,this._a),ke=Ie,nt=this._gradientType?"GradientType = 1, ":"";if(Te){var dt=h(Te);ke=dt.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+nt+"startColorstr="+Ie+",endColorstr="+ke+")"},toString:function(Te){var Ie=!!Te;Te=Te||this._format;var ke=!1,nt=this._a<1&&this._a>=0,dt=!Ie&&nt&&(Te==="hex"||Te==="hex6"||Te==="hex3"||Te==="name");return dt?Te==="name"&&this._a===0?this.toName():this.toRgbString():(Te==="rgb"&&(ke=this.toRgbString()),Te==="prgb"&&(ke=this.toPercentageRgbString()),(Te==="hex"||Te==="hex6")&&(ke=this.toHexString()),Te==="hex3"&&(ke=this.toHexString(!0)),Te==="hex8"&&(ke=this.toHex8String()),Te==="name"&&(ke=this.toName()),Te==="hsl"&&(ke=this.toHslString()),Te==="hsv"&&(ke=this.toHsvString()),ke||this.toHexString())},_applyModification:function(Te,Ie){var ke=Te.apply(null,[this].concat([].slice.call(Ie)));return this._r=ke._r,this._g=ke._g,this._b=ke._b,this.setAlpha(ke._a),this},lighten:function(){return this._applyModification(N,arguments)},brighten:function(){return this._applyModification(I,arguments)},darken:function(){return this._applyModification(L,arguments)},desaturate:function(){return this._applyModification(A,arguments)},saturate:function(){return this._applyModification(R,arguments)},greyscale:function(){return this._applyModification(D,arguments)},spin:function(){return this._applyModification(Y,arguments)},_applyCombination:function(Te,Ie){return Te.apply(null,[this].concat([].slice.call(Ie)))},analogous:function(){return this._applyCombination(ne,arguments)},complement:function(){return this._applyCombination(J,arguments)},monochromatic:function(){return this._applyCombination(ue,arguments)},splitcomplement:function(){return this._applyCombination(Q,arguments)},triad:function(){return this._applyCombination(ie,arguments)},tetrad:function(){return this._applyCombination(K,arguments)}},h.fromRatio=function(Te,Ie){if(typeof Te=="object"){var ke={};for(var nt in Te)Te.hasOwnProperty(nt)&&(nt==="a"?ke[nt]=Te[nt]:ke[nt]=Ee(Te[nt]));Te=ke}return h(Te,Ie)};function f(Te){var Ie={r:0,g:0,b:0},ke=1,nt=!1,dt=!1;return typeof Te=="string"&&(Te=Qe(Te)),typeof Te=="object"&&(Te.hasOwnProperty("r")&&Te.hasOwnProperty("g")&&Te.hasOwnProperty("b")?(Ie=m(Te.r,Te.g,Te.b),nt=!0,dt=String(Te.r).substr(-1)==="%"?"prgb":"rgb"):Te.hasOwnProperty("h")&&Te.hasOwnProperty("s")&&Te.hasOwnProperty("v")?(Te.s=Ee(Te.s,1),Te.v=Ee(Te.v,1),Ie=E(Te.h,Te.s,Te.v),nt=!0,dt="hsv"):Te.hasOwnProperty("h")&&Te.hasOwnProperty("s")&&Te.hasOwnProperty("l")&&(Te.s=Ee(Te.s),Te.l=Ee(Te.l),Ie=w(Te.h,Te.s,Te.l),nt=!0,dt="hsl"),Te.hasOwnProperty("a")&&(ke=Te.a)),ke=pe(ke),{ok:nt,format:Te.format||dt,r:_(255,v(Ie.r,0)),g:_(255,v(Ie.g,0)),b:_(255,v(Ie.b,0)),a:ke}}function m(Te,Ie,ke){return{r:de(Te,255)*255,g:de(Ie,255)*255,b:de(ke,255)*255}}function b(Te,Ie,ke){Te=de(Te,255),Ie=de(Ie,255),ke=de(ke,255);var nt=v(Te,Ie,ke),dt=_(Te,Ie,ke),yt,gt,xt=(nt+dt)/2;if(nt==dt)yt=gt=0;else{var tt=nt-dt;switch(gt=xt>.5?tt/(2-nt-dt):tt/(nt+dt),nt){case Te:yt=(Ie-ke)/tt+(Ie<ke?6:0);break;case Ie:yt=(ke-Te)/tt+2;break;case ke:yt=(Te-Ie)/tt+4;break}yt/=6}return{h:yt,s:gt,l:xt}}function w(Te,Ie,ke){var nt,dt,yt;Te=de(Te,360),Ie=de(Ie,100),ke=de(ke,100);function gt(pt,At,Tt){return Tt<0&&(Tt+=1),Tt>1&&(Tt-=1),Tt<.16666666666666666?pt+(At-pt)*6*Tt:Tt<.5?At:Tt<.6666666666666666?pt+(At-pt)*(.6666666666666666-Tt)*6:pt}if(Ie===0)nt=dt=yt=ke;else{var xt=ke<.5?ke*(1+Ie):ke+Ie-ke*Ie,tt=2*ke-xt;nt=gt(tt,xt,Te+.3333333333333333),dt=gt(tt,xt,Te),yt=gt(tt,xt,Te-.3333333333333333)}return{r:nt*255,g:dt*255,b:yt*255}}function C(Te,Ie,ke){Te=de(Te,255),Ie=de(Ie,255),ke=de(ke,255);var nt=v(Te,Ie,ke),dt=_(Te,Ie,ke),yt,gt,xt=nt,tt=nt-dt;if(gt=nt===0?0:tt/nt,nt==dt)yt=0;else{switch(nt){case Te:yt=(Ie-ke)/tt+(Ie<ke?6:0);break;case Ie:yt=(ke-Te)/tt+2;break;case ke:yt=(Te-Ie)/tt+4;break}yt/=6}return{h:yt,s:gt,v:xt}}function E(Te,Ie,ke){Te=de(Te,360)*6,Ie=de(Ie,100),ke=de(ke,100);var nt=x.floor(Te),dt=Te-nt,yt=ke*(1-Ie),gt=ke*(1-dt*Ie),xt=ke*(1-(1-dt)*Ie),tt=nt%6,pt=[ke,gt,yt,yt,xt,ke][tt],At=[xt,ke,ke,gt,yt,yt][tt],Tt=[yt,yt,xt,ke,ke,gt][tt];return{r:pt*255,g:At*255,b:Tt*255}}function S(Te,Ie,ke,nt){var dt=[be(l(Te).toString(16)),be(l(Ie).toString(16)),be(l(ke).toString(16))];return nt&&dt[0].charAt(0)==dt[0].charAt(1)&&dt[1].charAt(0)==dt[1].charAt(1)&&dt[2].charAt(0)==dt[2].charAt(1)?dt[0].charAt(0)+dt[1].charAt(0)+dt[2].charAt(0):dt.join("")}function M(Te,Ie,ke,nt){var dt=[be(De(nt)),be(l(Te).toString(16)),be(l(Ie).toString(16)),be(l(ke).toString(16))];return dt.join("")}h.equals=function(Te,Ie){return!Te||!Ie?!1:h(Te).toRgbString()==h(Ie).toRgbString()},h.random=function(){return h.fromRatio({r:c(),g:c(),b:c()})};function A(Te,Ie){Ie=Ie===0?0:Ie||10;var ke=h(Te).toHsl();return ke.s-=Ie/100,ke.s=he(ke.s),h(ke)}function R(Te,Ie){Ie=Ie===0?0:Ie||10;var ke=h(Te).toHsl();return ke.s+=Ie/100,ke.s=he(ke.s),h(ke)}function D(Te){return h(Te).desaturate(100)}function N(Te,Ie){Ie=Ie===0?0:Ie||10;var ke=h(Te).toHsl();return ke.l+=Ie/100,ke.l=he(ke.l),h(ke)}function I(Te,Ie){Ie=Ie===0?0:Ie||10;var ke=h(Te).toRgb();return ke.r=v(0,_(255,ke.r-l(255*-(Ie/100)))),ke.g=v(0,_(255,ke.g-l(255*-(Ie/100)))),ke.b=v(0,_(255,ke.b-l(255*-(Ie/100)))),h(ke)}function L(Te,Ie){Ie=Ie===0?0:Ie||10;var ke=h(Te).toHsl();return ke.l-=Ie/100,ke.l=he(ke.l),h(ke)}function Y(Te,Ie){var ke=h(Te).toHsl(),nt=(l(ke.h)+Ie)%360;return ke.h=nt<0?360+nt:nt,h(ke)}function J(Te){var Ie=h(Te).toHsl();return Ie.h=(Ie.h+180)%360,h(Ie)}function ie(Te){var Ie=h(Te).toHsl(),ke=Ie.h;return[h(Te),h({h:(ke+120)%360,s:Ie.s,l:Ie.l}),h({h:(ke+240)%360,s:Ie.s,l:Ie.l})]}function K(Te){var Ie=h(Te).toHsl(),ke=Ie.h;return[h(Te),h({h:(ke+90)%360,s:Ie.s,l:Ie.l}),h({h:(ke+180)%360,s:Ie.s,l:Ie.l}),h({h:(ke+270)%360,s:Ie.s,l:Ie.l})]}function Q(Te){var Ie=h(Te).toHsl(),ke=Ie.h;return[h(Te),h({h:(ke+72)%360,s:Ie.s,l:Ie.l}),h({h:(ke+216)%360,s:Ie.s,l:Ie.l})]}function ne(Te,Ie,ke){Ie=Ie||6,ke=ke||30;var nt=h(Te).toHsl(),dt=360/ke,yt=[h(Te)];for(nt.h=(nt.h-(dt*Ie>>1)+720)%360;--Ie;)nt.h=(nt.h+dt)%360,yt.push(h(nt));return yt}function ue(Te,Ie){Ie=Ie||6;for(var ke=h(Te).toHsv(),nt=ke.h,dt=ke.s,yt=ke.v,gt=[],xt=1/Ie;Ie--;)gt.push(h({h:nt,s:dt,v:yt})),yt=(yt+xt)%1;return gt}h.mix=function(Te,Ie,ke){ke=ke===0?0:ke||50;var nt=h(Te).toRgb(),dt=h(Ie).toRgb(),yt=ke/100,gt=yt*2-1,xt=dt.a-nt.a,tt;gt*xt==-1?tt=gt:tt=(gt+xt)/(1+gt*xt),tt=(tt+1)/2;var pt=1-tt,At={r:dt.r*tt+nt.r*pt,g:dt.g*tt+nt.g*pt,b:dt.b*tt+nt.b*pt,a:dt.a*yt+nt.a*(1-yt)};return h(At)},h.readability=function(Te,Ie){var ke=h(Te),nt=h(Ie);return(Math.max(ke.getLuminance(),nt.getLuminance())+.05)/(Math.min(ke.getLuminance(),nt.getLuminance())+.05)},h.isReadable=function(Te,Ie,ke){var nt=h.readability(Te,Ie),dt,yt;switch(yt=!1,dt=Ke(ke),dt.level+dt.size){case"AAsmall":case"AAAlarge":yt=nt>=4.5;break;case"AAlarge":yt=nt>=3;break;case"AAAsmall":yt=nt>=7;break}return yt},h.mostReadable=function(Te,Ie,ke){var nt=null,dt=0,yt,gt,xt,tt;ke=ke||{},gt=ke.includeFallbackColors,xt=ke.level,tt=ke.size;for(var pt=0;pt<Ie.length;pt++)yt=h.readability(Te,Ie[pt]),yt>dt&&(dt=yt,nt=h(Ie[pt]));return h.isReadable(Te,nt,{level:xt,size:tt})||!gt?nt:(ke.includeFallbackColors=!1,h.mostReadable(Te,["#fff","#000"],ke))};var fe=h.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},ge=h.hexNames=ye(fe);function ye(Te){var Ie={};for(var ke in Te)Te.hasOwnProperty(ke)&&(Ie[Te[ke]]=ke);return Ie}function pe(Te){return Te=parseFloat(Te),(isNaN(Te)||Te<0||Te>1)&&(Te=1),Te}function de(Te,Ie){ve(Te)&&(Te="100%");var ke=Z(Te);return Te=_(Ie,v(0,parseFloat(Te))),ke&&(Te=parseInt(Te*Ie,10)/100),x.abs(Te-Ie)<1e-6?1:Te%Ie/parseFloat(Ie)}function he(Te){return _(1,v(0,Te))}function _e(Te){return parseInt(Te,16)}function ve(Te){return typeof Te=="string"&&Te.indexOf(".")!=-1&&parseFloat(Te)===1}function Z(Te){return typeof Te=="string"&&Te.indexOf("%")!=-1}function be(Te){return Te.length==1?"0"+Te:""+Te}function Ee(Te,Ie){return Ie=Ie||100,Te<=1&&(Te=Te*Ie+"%"),Te}function De(Te){return Math.round(parseFloat(Te)*255).toString(16)}function Fe(Te){return _e(Te)/255}var Ue=function(){var Te="[-\\+]?\\d+%?",Ie="[-\\+]?\\d*\\.\\d+%?",ke="(?:"+Ie+")|(?:"+Te+")",nt="[\\s|\\(]+("+ke+")[,|\\s]+("+ke+")[,|\\s]+("+ke+")\\s*\\)?",dt="[\\s|\\(]+("+ke+")[,|\\s]+("+ke+")[,|\\s]+("+ke+")[,|\\s]+("+ke+")\\s*\\)?";return{rgb:new RegExp("rgb"+nt),rgba:new RegExp("rgba"+dt),hsl:new RegExp("hsl"+nt),hsla:new RegExp("hsla"+dt),hsv:new RegExp("hsv"+nt),hsva:new RegExp("hsva"+dt),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Qe(Te){Te=Te.replace(s,"").replace(d,"").toLowerCase();var Ie=!1;if(fe[Te])Te=fe[Te],Ie=!0;else if(Te=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var ke;return(ke=Ue.rgb.exec(Te))?{r:ke[1],g:ke[2],b:ke[3]}:(ke=Ue.rgba.exec(Te))?{r:ke[1],g:ke[2],b:ke[3],a:ke[4]}:(ke=Ue.hsl.exec(Te))?{h:ke[1],s:ke[2],l:ke[3]}:(ke=Ue.hsla.exec(Te))?{h:ke[1],s:ke[2],l:ke[3],a:ke[4]}:(ke=Ue.hsv.exec(Te))?{h:ke[1],s:ke[2],v:ke[3]}:(ke=Ue.hsva.exec(Te))?{h:ke[1],s:ke[2],v:ke[3],a:ke[4]}:(ke=Ue.hex8.exec(Te))?{a:Fe(ke[1]),r:_e(ke[2]),g:_e(ke[3]),b:_e(ke[4]),format:Ie?"name":"hex8"}:(ke=Ue.hex6.exec(Te))?{r:_e(ke[1]),g:_e(ke[2]),b:_e(ke[3]),format:Ie?"name":"hex"}:(ke=Ue.hex3.exec(Te))?{r:_e(ke[1]+""+ke[1]),g:_e(ke[2]+""+ke[2]),b:_e(ke[3]+""+ke[3]),format:Ie?"name":"hex"}:!1}function Ke(Te){var Ie,ke;return Te=Te||{level:"AA",size:"small"},Ie=(Te.level||"AA").toUpperCase(),ke=(Te.size||"small").toLowerCase(),Ie!=="AA"&&Ie!=="AAA"&&(Ie="AA"),ke!=="small"&&ke!=="large"&&(ke="small"),{level:Ie,size:ke}}typeof i<"u"&&i.exports?i.exports=h:(o=function(){return h}.call(r,e,r,i),o!==void 0&&(i.exports=o))})()},function(i,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ChromePointer=void 0;var o=function(){function b(w,C){for(var E=0;E<C.length;E++){var S=C[E];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(w,S.key,S)}}return function(w,C,E){return C&&b(w.prototype,C),E&&b(w,E),w}}(),s=e(3),d=v(s),p=e(4),x=v(p),l=e(17),_=v(l);function v(b){return b&&b.__esModule?b:{default:b}}function c(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")}function h(b,w){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:b}function f(b,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);b.prototype=Object.create(w&&w.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(b,w):b.__proto__=w)}var m=r.ChromePointer=function(b){f(w,b);function w(){for(var C,E,S,M,A=arguments.length,R=Array(A),D=0;D<A;D++)R[D]=arguments[D];return c(this,w),M=(E=(S=h(this,(C=w.__proto__||Object.getPrototypeOf(w)).call.apply(C,[this].concat(R))),S),S.shouldComponentUpdate=_.default.bind(S,S,arguments[0],arguments[1]),E),h(S,M)}return o(w,[{key:"classes",value:function(){return{default:{picker:{width:"10px",height:"16px",borderRadius:"5px",transform:"translate(-5px, 0px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}}}},{key:"render",value:function(){return d.default.createElement("div",{style:this.styles().picker})}}]),w}(x.default.Component);r.default=m},function(i,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ChromePointerCircle=void 0;var o=function(){function b(w,C){for(var E=0;E<C.length;E++){var S=C[E];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(w,S.key,S)}}return function(w,C,E){return C&&b(w.prototype,C),E&&b(w,E),w}}(),s=e(3),d=v(s),p=e(4),x=v(p),l=e(17),_=v(l);function v(b){return b&&b.__esModule?b:{default:b}}function c(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")}function h(b,w){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:b}function f(b,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);b.prototype=Object.create(w&&w.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(b,w):b.__proto__=w)}var m=r.ChromePointerCircle=function(b){f(w,b);function w(){for(var C,E,S,M,A=arguments.length,R=Array(A),D=0;D<A;D++)R[D]=arguments[D];return c(this,w),M=(E=(S=h(this,(C=w.__proto__||Object.getPrototypeOf(w)).call.apply(C,[this].concat(R))),S),S.shouldComponentUpdate=_.default.bind(S,S,arguments[0],arguments[1]),E),h(S,M)}return o(w,[{key:"classes",value:function(){return{default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}}}},{key:"render",value:function(){return d.default.createElement("div",{style:this.styles().picker})}}]),w}(x.default.Component);r.default=m},function(i,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CompactColor=void 0;var o=function(){function b(w,C){for(var E=0;E<C.length;E++){var S=C[E];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(w,S.key,S)}}return function(w,C,E){return C&&b(w.prototype,C),E&&b(w,E),w}}(),s=e(3),d=v(s),p=e(4),x=v(p),l=e(17),_=v(l);function v(b){return b&&b.__esModule?b:{default:b}}function c(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")}function h(b,w){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:b}function f(b,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);b.prototype=Object.create(w&&w.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(b,w):b.__proto__=w)}var m=r.CompactColor=function(b){f(w,b);function w(){for(var C,E,S,M,A=arguments.length,R=Array(A),D=0;D<A;D++)R[D]=arguments[D];return c(this,w),M=(E=(S=h(this,(C=w.__proto__||Object.getPrototypeOf(w)).call.apply(C,[this].concat(R))),S),S.shouldComponentUpdate=_.default.bind(S,S,arguments[0],arguments[1]),S.handleClick=function(){S.props.onClick({hex:S.props.color})},E),h(S,M)}return o(w,[{key:"classes",value:function(){return{default:{color:{background:this.props.color,height:"15px",cursor:"pointer",flexGrow:"1"}}}}},{key:"render",value:function(){return d.default.createElement("div",{style:this.styles().color,ref:"color",onClick:this.handleClick})}}]),w}(x.default.Component);r.default=m}]);var U;(function(i){i.Promise=n})(U||(U={})),function(i){var r;(function(e){"use strict";e.Rx=g,e.Promise=i.Promise;var o;(function(s){s.CIF=T})(o=e.Formats||(e.Formats={}))})(r=i.Core||(i.Core={}))}(U||(U={}));var U;(function(i){var r;(function(e){e.VERSION={number:"3.2.3",date:"Feb 1 2019"}})(r=i.Core||(i.Core={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";function d(){var _={},v=typeof document<"u"?document:void 0,c=!1,h=1,f;function m(N){for(var I=[],L=1;L<arguments.length;L++)I[L-1]=arguments[L];typeof N!="function"&&(N=new Function(""+N));var Y={callback:N,args:I};return _[h]=Y,f(h),h++}function b(N){delete _[N]}function w(N){var I=N.callback,L=N.args;switch(L.length){case 0:I();break;case 1:I(L[0]);break;case 2:I(L[0],L[1]);break;case 3:I(L[0],L[1],L[2]);break;default:I.apply(void 0,L);break}}function C(N){if(c)setTimeout(C,0,N);else{var I=_[N];if(I){c=!0;try{w(I)}finally{b(N),c=!1}}}}function E(){f=function(N){process.nextTick(function(){C(N)})}}function S(){var N=window;if(N&&N.postMessage&&!N.importScripts){var I=!0,L=N.onmessage;return N.onmessage=function(){I=!1},N.postMessage("","*"),N.onmessage=L,I}}function M(){var N=window,I="setImmediate$"+Math.random()+"$",L=function(Y){Y.source===N&&typeof Y.data=="string"&&Y.data.indexOf(I)===0&&C(+Y.data.slice(I.length))};window.addEventListener?window.addEventListener("message",L,!1):window.attachEvent("onmessage",L),f=function(Y){window.postMessage(I+Y,"*")}}function A(){var N=new MessageChannel;N.port1.onmessage=function(I){var L=I.data;C(L)},f=function(I){N.port2.postMessage(I)}}function R(){var N=v.documentElement;f=function(I){var L=v.createElement("script");L.onreadystatechange=function(){C(I),L.onreadystatechange=null,N.removeChild(L),L=null},N.appendChild(L)}}function D(){f=function(N){setTimeout(C,0,N)}}return typeof process<"u"&&{}.toString.call(process)==="[object process]"?E():S()?M():typeof MessageChannel<"u"?A():v&&"onreadystatechange"in v.createElement("script")?R():D(),{setImmediate:m,clearImmediate:b}}var p=function(){return typeof setImmediate<"u"?typeof window<"u"&&typeof window.setImmediate<"u"?{setImmediate:function(_){for(var v=[],c=1;c<arguments.length;c++)v[c-1]=arguments[c];return window.setImmediate.apply(window,[_].concat(v))},clearImmediate:function(_){return window.clearImmediate(_)}}:{setImmediate,clearImmediate:s.clearImmediate}:d()}();function x(_){p.setImmediate(_)}s.immediate=p.setImmediate,s.clearImmediate=p.clearImmediate;function l(){return new e.Promise(x)}s.immediatePromise=l})(o=e.Scheduler||(e.Scheduler={}))})(r=i.Core||(i.Core={}))})(U||(U={}));var H=this&&this.__awaiter||function(i,r,e,o){return new(e||(e=Promise))(function(s,d){function p(_){try{l(o.next(_))}catch(v){d(v)}}function x(_){try{l(o.throw(_))}catch(v){d(v)}}function l(_){_.done?s(_.value):new e(function(v){v(_.value)}).then(p,x)}l((o=o.apply(i,r||[])).next())})},q=this&&this.__generator||function(i,r){var e={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,s,d,p;return p={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function x(_){return function(v){return l([_,v])}}function l(_){if(o)throw new TypeError("Generator is already executing.");for(;e;)try{if(o=1,s&&(d=_[0]&2?s.return:_[0]?s.throw||((d=s.return)&&d.call(s),0):s.next)&&!(d=d.call(s,_[1])).done)return d;switch(s=0,d&&(_=[_[0]&2,d.value]),_[0]){case 0:case 1:d=_;break;case 4:return e.label++,{value:_[1],done:!1};case 5:e.label++,s=_[1],_=[0];continue;case 7:_=e.ops.pop(),e.trys.pop();continue;default:if(d=e.trys,!(d=d.length>0&&d[d.length-1])&&(_[0]===6||_[0]===2)){e=0;continue}if(_[0]===3&&(!d||_[1]>d[0]&&_[1]<d[3])){e.label=_[1];break}if(_[0]===6&&e.label<d[1]){e.label=d[1],d=_;break}if(d&&e.label<d[2]){e.label=d[2],e.ops.push(_);break}d[2]&&e.ops.pop(),e.trys.pop();continue}_=r.call(i,e)}catch(v){_=[6,v],s=0}finally{o=d=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},U;(function(i){var r;(function(e){"use strict";function o(p){return new s(p)}e.computation=o;var s=function(){function p(x){this.computation=x}return p.prototype.run=function(x){return this.runWithContext(x).result},p.prototype.runWithContext=function(x){var l=this,_=x||new d;return{progress:_.progressStream,result:new e.Promise(function(v,c){return H(l,void 0,void 0,function(){var h,f;return q(this,function(m){switch(m.label){case 0:return m.trys.push([0,2,3,4]),_.started(),[4,this.computation(_)];case 1:return h=m.sent(),v(h),[3,4];case 2:return f=m.sent(),p.PRINT_CONSOLE_ERROR&&console.error(f),c(f),[3,4];case 3:return _.finished(),[7];case 4:return[2]}})})})}},p}();e.Computation=s,function(p){p.PRINT_CONSOLE_ERROR=!1;function x(v){return o(function(){return e.Promise.resolve(v)})}p.resolve=x;function l(v){return o(function(){return e.Promise.reject(v)})}p.reject=l;function _(){return new d}p.createContext=_,p.Aborted="Aborted",p.UpdateProgressDelta=100}(s=e.Computation||(e.Computation={}));var d=function(){function p(){var x=this;this._abortRequested=!1,this._abortRequester=function(){x._abortRequested=!0},this.progressTick=new e.Rx.Subject,this._progress={message:"Working...",current:0,max:0,isIndeterminate:!0,requestAbort:void 0},this.progressStream=new e.Rx.BehaviorSubject(this._progress),this.startEndCounter=0,this.progressTick.throttle(1e3/15).subscribe(function(l){x.progressStream.onNext({message:l.message,isIndeterminate:l.isIndeterminate,current:l.current,max:l.max,requestAbort:l.requestAbort})})}return Object.defineProperty(p.prototype,"isAbortRequested",{get:function(){return this._abortRequested},enumerable:!0,configurable:!0}),p.prototype.checkAborted=function(){if(this._abortRequested)throw s.Aborted},p.prototype.requestAbort=function(){try{this._abortRequester&&this._abortRequester.call(null)}catch{}},Object.defineProperty(p.prototype,"progress",{get:function(){return this.progressTick},enumerable:!0,configurable:!0}),p.prototype.updateProgress=function(x,l,_,v){return _===void 0&&(_=NaN),v===void 0&&(v=NaN),this.checkAborted(),this._progress.message=x,typeof l=="boolean"?this._progress.requestAbort=l?this._abortRequester:void 0:(l&&(this._abortRequester=l),this._progress.requestAbort=l?this._abortRequester:void 0),isNaN(_)?this._progress.isIndeterminate=!0:(this._progress.isIndeterminate=!1,this._progress.current=_,this._progress.max=v),this.progressTick.onNext(this._progress),e.Scheduler.immediatePromise()},p.prototype.started=function(){this.startEndCounter++},p.prototype.finished=function(){if(this.startEndCounter--,this.startEndCounter<=0&&(this.progressTick.onCompleted(),this.progressStream.onCompleted()),this.startEndCounter<0)throw"Bug in code somewhere, Computation.resolve/reject called too many times."},p}()})(r=i.Core||(i.Core={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";function d(){var _=Object.create(null);return _.__=void 0,delete _.__,_}var p;(function(_){function v(b,w,C){for(var E=0,S=Object.keys(b);E<S.length;E++){var M=S[E],A=b[M];A!==void 0&&w(A,M,C)}}var c={set:function(b,w){this.data[b]===void 0&&w!==void 0&&this.size++,this.data[b]=w},get:function(b){return this.data[b]},delete:function(b){return this.data[b]===void 0?!1:(delete this.data[b],this.size--,!0)},has:function(b){return this.data[b]!==void 0},clear:function(){this.data=d(),this.size=0},forEach:function(b,w){v(this.data,b,w!==void 0?w:void 0)}};function h(){var b=Object.create(c);return b.data=d(),b.size=0,b}_.create=h;function f(b){for(var w=h(),C=0,E=b;C<E.length;C++){var S=E[C];w.set(S[0],S[1])}return w}_.ofArray=f;function m(b){for(var w=h(),C=0,E=Object.keys(b);C<E.length;C++){var S=E[C],M=b[S];w.set(S,M)}return w}_.ofObject=m})(p=s.FastMap||(s.FastMap={}));var x;(function(_){function v(m,b,w){for(var C=0,E=Object.keys(m);C<E.length;C++){var S=E[C];m[S]===null&&b(S,w)}}var c={add:function(m){return this.data[m]===null?!1:(this.data[m]=null,this.size++,!0)},delete:function(m){return this.data[m]!==null?!1:(delete this.data[m],this.size--,!0)},has:function(m){return this.data[m]===null},clear:function(){this.data=d(),this.size=0},forEach:function(m,b){v(this.data,m,b!==void 0?b:void 0)}};function h(){var m=Object.create(c);return m.data=d(),m.size=0,m}_.create=h;function f(m){for(var b=h(),w=0,C=m.length;w<C;w++)b.add(m[w]);return b}_.ofArray=f})(x=s.FastSet||(s.FastSet={}));var l;(function(_){var v=function(){function C(E){this.size=E}return C.prototype.has=function(E){return!1},C}(),c=function(){function C(E,S){this.idx=E,this.size=S}return C.prototype.has=function(E){return E===this.idx},C}(),h=function(){function C(E,S){this.mask=E,this.size=S}return C.prototype.has=function(E){return this.mask[E]},C}(),f=function(){function C(E){this.size=E}return C.prototype.has=function(E){return!0},C}();function m(C){return new f(C.data.atoms.count)}_.ofStructure=m;function b(C,E){var S=E.length;if(S===0)return new v(C);if(S===1)return new c(E[0],C);var M=S/C;if(M<.08333333333333333){for(var A=s.FastSet.create(),R=0,D=E;R<D.length;R++){var N=D[R];A.add(N)}return A}for(var I=new Int8Array(C),L=0,Y=E;L<Y.length;L++){var N=Y[L];I[N]=1}return new h(I,S)}_.ofIndices=b;function w(C){for(var E=0,S=0,M=C.fragments;S<M.length;S++){var A=M[S];E+=A.atomCount}var R=C.context.structure.data.atoms.count;if(E/R<.08333333333333333){for(var D=s.FastSet.create(),N=0,I=C.fragments;N<I.length;N++)for(var A=I[N],L=0,Y=A.atomIndices;L<Y.length;L++){var J=Y[L];D.add(J)}return D}else{for(var D=new Int8Array(R),ie=0,K=C.fragments;ie<K.length;ie++)for(var A=K[ie],Q=0,ne=A.atomIndices;Q<ne.length;Q++){var J=ne[Q];D[J]=1}for(var ue=0,J=0;J<R;J++)D[J]!==0&&ue++;return new h(D,ue)}}_.ofFragments=w})(l=s.Mask||(s.Mask={}))})(o=e.Utils||(e.Utils={}))})(r=i.Core||(i.Core={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";s.FastNumberParsers=e.Formats.CIF.Utils.FastNumberParsers;function d(x,l,_){for(var v,c=l,h=x,f=_,m=0,b=Object.keys(l);m<b.length;m++){var w=b[m];v=c[w],v!==void 0?h[w]=v:_&&(h[w]=f[w])}if(_)for(var C=0,E=Object.keys(_);C<E.length;C++){var w=E[C];v=h[w],v===void 0&&(h[w]=f[w])}return x}s.extend=d;function p(x,l){var _,v,c,h,f,m,b,w=0,C=0,E=!0,S=!1;l=Math.max(0,l)||0;var M=function(){var R=l-(performance.now()-h);if(R<=0){v&&clearTimeout(v);var D=b;v=m=b=void 0,D&&(w=performance.now(),c=x.apply(f,_),!m&&!v&&(_=f=null))}else m=setTimeout(M,R)},A=function(){m&&clearTimeout(m),v=m=b=void 0,(E||C!==l)&&(w=performance.now(),c=x.apply(f,_),!m&&!v&&(_=f=null))};return function(){_=arguments,h=performance.now(),f=this,b=E&&(m||!S);var R=!1,D=!1;if(C===0)D=S&&!m;else{!v&&!S&&(w=h);var N=C-(h-w),I=N<=0;I?(v&&(v=clearTimeout(v)),w=h,c=x.apply(f,_)):v||(v=setTimeout(A,N))}return R&&m?m=clearTimeout(m):!m&&l!==C&&(m=setTimeout(M,l)),D&&(R=!0,c=x.apply(f,_)),R&&!m&&!v&&(_=f=null),c}}s.debounce=p})(o=e.Utils||(e.Utils={}))})(r=i.Core||(i.Core={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";var d;(function(p){function x(m){return function(b){return new m(b)}}p.typedColumn=x;function l(){return function(m){return new Array(m)}}p.customColumn=l,p.stringColumn=function(m){return new Array(m)},p.stringNullColumn=function(m){return new Array(m)};function _(m){return new f(m)}p.builder=_;function v(m,b){for(var w=p.builder(b),C=0,E=Object.keys(m);C<E.length;C++){var S=E[C];if(Object.prototype.hasOwnProperty.call(m,S)){var M=m[S];M&&w.addColumn(S,M)}}return w.seal()}p.ofDefinition=v;function c(m,b){for(var w=Object.create(null),C=0,E=m.columns;C<E.length;C++){var S=E[C];(function(M,A,R,D){Object.defineProperty(A,M.name,{enumerable:!0,configurable:!1,get:function(){return D[R.index]}})})(S,w,b,m[S.name])}return w}var h=function(){function m(b,w,C){this.__rowIndexer={index:0},this.count=b,this.indices=new Int32Array(b),this.columns=[];for(var E=0;E<b;E++)this.indices[E]=E;for(var S=0,M=w;S<M.length;S++){var A=M[S],R=C[A.name];s.ChunkedArray.is(R)&&(R=s.ChunkedArray.compact(R)),Object.defineProperty(this,A.name,{enumerable:!0,configurable:!1,writable:!1,value:R}),this.columns[this.columns.length]=A}this.__row=c(this,this.__rowIndexer)}return m.prototype.getBuilder=function(b){for(var w=new f(b),C=0,E=this.columns;C<E.length;C++){var S=E[C];w.addColumn(S.name,S.creator)}return w},m.prototype.getRawData=function(){var b=this;return this.columns.map(function(w){return b[w.name]})},m.prototype.getRow=function(b){return this.__rowIndexer.index=b,this.__row},m}(),f=function(){function m(b){this.columns=[],this.count=b}return m.prototype.addColumn=function(b,w){var C=w(this.count);return Object.defineProperty(this,b,{enumerable:!0,configurable:!1,writable:!1,value:C}),this.columns[this.columns.length]={name:b,creator:w},C},m.prototype.addRawColumn=function(b,w,C){var E=C;return Object.defineProperty(this,b,{enumerable:!0,configurable:!1,writable:!1,value:E}),this.columns[this.columns.length]={name:b,creator:w},E},m.prototype.getRawData=function(){var b=this;return this.columns.map(function(w){return b[w.name]})},m.prototype.seal=function(){return new h(this.count,this.columns,this)},m}()})(d=s.DataTable||(s.DataTable={}))})(o=e.Utils||(e.Utils={}))})(r=i.Core||(i.Core={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";function d(c){var h=new Int32Array(c.size);return c.forEach(function(f,m){m.array[m.index++]=f},{array:h,index:0}),Array.prototype.sort.call(h,function(f,m){return f-m}),h}s.integerSetToSortedTypedArray=d;function p(c){for(var h=[],f=0;f<c;f++)h[f]=0;return h}s.makeNativeIntArray=p;function x(c){var h=[];if(!c)return h;h[0]=.1;for(var f=0;f<c;f++)h[f]=0;return h}s.makeNativeFloatArray=x;var l;(function(c){function h(L){return L.creator&&L.chunkSize}c.is=h;function f(L,Y,J,ie,K){return L.currentIndex>=L.chunkSize&&(L.currentIndex=0,L.current=L.creator(L.chunkSize),L.parts[L.parts.length]=L.current),L.current[L.currentIndex++]=Y,L.current[L.currentIndex++]=J,L.current[L.currentIndex++]=ie,L.current[L.currentIndex++]=K,L.elementCount++}c.add4=f;function m(L,Y,J,ie){return L.currentIndex>=L.chunkSize&&(L.currentIndex=0,L.current=L.creator(L.chunkSize),L.parts[L.parts.length]=L.current),L.current[L.currentIndex++]=Y,L.current[L.currentIndex++]=J,L.current[L.currentIndex++]=ie,L.elementCount++}c.add3=m;function b(L,Y,J){return L.currentIndex>=L.chunkSize&&(L.currentIndex=0,L.current=L.creator(L.chunkSize),L.parts[L.parts.length]=L.current),L.current[L.currentIndex++]=Y,L.current[L.currentIndex++]=J,L.elementCount++}c.add2=b;function w(L,Y){return L.currentIndex>=L.chunkSize&&(L.currentIndex=0,L.current=L.creator(L.chunkSize),L.parts[L.parts.length]=L.current),L.current[L.currentIndex++]=Y,L.elementCount++}c.add=w;function C(L){var Y=L.creator(L.elementSize*L.elementCount),J=(L.parts.length-1)*L.chunkSize,ie=0,K;if(L.parts.length===1&&L.chunkSize===L.elementCount)return L.parts[0];if(L.parts.length>1)if(L.parts[0].buffer)for(var Q=0;Q<L.parts.length-1;Q++)Y.set(L.parts[Q],L.chunkSize*Q);else for(var Q=0;Q<L.parts.length-1;Q++){ie=L.chunkSize*Q,K=L.parts[Q];for(var ne=0;ne<L.chunkSize;ne++)Y[ie+ne]=K[ne]}if(L.current.buffer&&L.currentIndex>=L.chunkSize)Y.set(L.current,L.chunkSize*(L.parts.length-1));else for(var Q=0;Q<L.currentIndex;Q++)Y[J+Q]=L.current[Q];return Y}c.compact=C;function E(L){return L===void 0&&(L=262144),I(function(Y){return new Float32Array(Y)},L,3)}c.forVertex3D=E;function S(L){return L===void 0&&(L=262144),I(function(Y){return new Uint32Array(Y)},L,3)}c.forIndexBuffer=S;function M(L){return L===void 0&&(L=131072),I(function(Y){return new Int32Array(Y)},L,2)}c.forTokenIndices=M;function A(L){return L===void 0&&(L=131072),I(function(Y){return new Int32Array(Y)},L,1)}c.forIndices=A;function R(L){return L===void 0&&(L=131072),I(function(Y){return new Int32Array(Y)},L,1)}c.forInt32=R;function D(L){return L===void 0&&(L=131072),I(function(Y){return new Float32Array(Y)},L,1)}c.forFloat32=D;function N(L){return L===void 0&&(L=131072),I(function(Y){return[]},L,1)}c.forArray=N;function I(L,Y,J){Y=Y|0,Y<=0&&(Y=1);var ie=Y*J,K=L(ie);return{elementSize:J,chunkSize:ie,creator:L,current:K,parts:[K],currentIndex:0,elementCount:0}}c.create=I})(l=s.ChunkedArray||(s.ChunkedArray={}));var _;(function(c){function h(D,N,I,L){var Y=D.array;Y[D.currentIndex++]=N,Y[D.currentIndex++]=I,Y[D.currentIndex++]=L,D.elementCount++}c.add3=h;function f(D,N,I){var L=D.array;L[D.currentIndex++]=N,L[D.currentIndex++]=I,D.elementCount++}c.add2=f;function m(D,N){D.array[D.currentIndex++]=N,D.elementCount++}c.add=m;function b(D){return R(function(N){return new Float32Array(N)},D,3)}c.forVertex3D=b;function w(D){return R(function(N){return new Int32Array(N)},D,3)}c.forIndexBuffer=w;function C(D){return R(function(N){return new Int32Array(N)},D,2)}c.forTokenIndices=C;function E(D){return R(function(N){return new Int32Array(N)},D,1)}c.forIndices=E;function S(D){return R(function(N){return new Int32Array(N)},D,1)}c.forInt32=S;function M(D){return R(function(N){return new Float32Array(N)},D,1)}c.forFloat32=M;function A(D){return R(function(N){return[]},D,1)}c.forArray=A;function R(D,N,I){return N=N|0,{array:D(N*I),currentIndex:0,elementCount:0}}c.create=R})(_=s.ArrayBuilder||(s.ArrayBuilder={}));function v(){return{_set:s.FastSet.create(),array:[]}}s.UniqueArray=v,function(c){function h(f,m){var b=f._set,w=f.array;b.has(m)||(b.add(m),w[w.length]=m)}c.add=h}(v=s.UniqueArray||(s.UniqueArray={}))})(o=e.Utils||(e.Utils={}))})(r=i.Core||(i.Core={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";var d;(function(x){x.perfGetTime=function(){return typeof window<"u"&&window.performance?function(){return window.performance.now()}:typeof process<"u"&&process.hrtime!=="undefined"?function(){var l=process.hrtime();return l[0]*1e3+l[1]/1e6}:function(){return+new Date}}()})(d||(d={}));var p=function(){function x(){this.starts=s.FastMap.create(),this.ends=s.FastMap.create()}return x.currentTime=function(){return d.perfGetTime()},x.prototype.start=function(l){this.starts.set(l,d.perfGetTime())},x.prototype.end=function(l){this.ends.set(l,d.perfGetTime())},x.format=function(l){if(isNaN(l))return"n/a";for(var _=Math.floor(l/(60*60*1e3)),v=Math.floor(l/(60*1e3)%60),c=Math.floor(l/1e3%60),h=Math.floor(l%1e3).toString();h.length<3;)h="0"+h;return _>0?_+"h"+v+"m"+c+"."+h+"s":v>0?v+"m"+c+"."+h+"s":c>0?c+"."+h+"s":l.toFixed(0)+"ms"},x.prototype.formatTime=function(l){return x.format(this.time(l))},x.prototype.formatTimeSum=function(){for(var l=[],_=0;_<arguments.length;_++)l[_]=arguments[_];return x.format(this.timeSum.apply(this,l))},x.prototype.time=function(l){var _=this.starts.get(l),v=this.ends.get(l);return this.starts.delete(l),this.ends.delete(l),v-_},x.prototype.timeSum=function(){for(var l=this,_=[],v=0;v<arguments.length;v++)_[v]=arguments[v];for(var c=0,h=0,f=_.map(function(b){return l.ends.get(b)-l.starts.get(b)});h<f.length;h++){var m=f[h];c+=m}return c},x}();s.PerformanceMonitor=p})(o=e.Utils||(e.Utils={}))})(r=i.Core||(i.Core={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";var d;(function(c){function h(C){return C.name&&C.parse}c.is=h;function f(C,E){E=E.toLowerCase().trim();for(var S=0,M=C;S<M.length;S++)for(var A=M[S],R=0,D=A.shortcuts;R<D.length;R++){var N=D[R];if(N.toLowerCase()===E)return A}}c.fromShortcut=f;function m(C){return new RegExp(C.extensions.map(function(E){return"(\\"+E+")"}).join("|")+"(\\.gz){0,1}$","i")}c.formatRegExp=m;function b(C){return C.map(function(E){return E.extensions.map(function(S){return S+","+S+".gz"}).join(",")}).join(",")}c.formatFileFilters=b;function w(C,E){for(var S=0,M=E;S<M.length;S++){var A=M[S];if(m(A).test(C))return A}}c.getFormat=w})(d=s.FormatInfo||(s.FormatInfo={}));var p;(function(c){function h(m,b){return b===void 0&&(b=-1),new x(m,b)}c.error=h;function f(m,b){return b===void 0&&(b=[]),new l(m,b)}c.success=f})(p=s.ParserResult||(s.ParserResult={}));var x=function(){function c(h,f){this.message=h,this.line=f,this.isError=!0}return c.prototype.toString=function(){return this.line>=0?"[Line "+this.line+"] "+this.message:this.message},c}();s.ParserError=x;var l=function(){function c(h,f){this.result=h,this.warnings=f,this.isError=!1}return c}();s.ParserSuccess=l;var _;(function(c){function h(b){var w=new Int32Array(Math.round(1.61*b.tokens.length));w.set(b.tokens),b.tokens=w,b.tokensLenMinus2=w.length-2}function f(b,w,C){b.count>=b.tokensLenMinus2&&h(b),b.tokens[b.count++]=w,b.tokens[b.count++]=C}c.addToken=f;function m(b){return{tokensLenMinus2:Math.round(b)-2,count:0,tokens:new Int32Array(b)}}c.create=m})(_=s.TokenIndexBuilder||(s.TokenIndexBuilder={}));var v;(function(c){function h(){return Object.create(null)}c.create=h;function f(m,b){if(b.length>6)return b;var w=m[b];return w!==void 0?w:(m[b]=b,b)}c.get=f})(v=s.ShortStringPool||(s.ShortStringPool={}))})(o=e.Formats||(e.Formats={}))})(r=i.Core||(i.Core={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){var x;(function(l){"use strict";var _;(function(pe){pe.ElementSymbol="X",pe.ResidueName="UNK",pe.AsymId="",pe.EntityId="1",pe.ModelId="1"})(_||(_={}));function v(pe,de,he,_e){var ve=e.Geometry.LinearAlgebra.Matrix4.identity(),Z,be;for(Z=1;Z<=3;Z++){for(be=1;be<=3;be++)e.Geometry.LinearAlgebra.Matrix4.setValue(ve,Z-1,be-1,pe.getColumn(de+"["+Z+"]["+be+"]").getFloat(_e));e.Geometry.LinearAlgebra.Matrix4.setValue(ve,Z-1,3,pe.getColumn(he+"["+Z+"]").getFloat(_e))}return ve}function c(pe,de,he){var _e=0;if(!he||!he.isDefined)return de;for(_e=pe+1;_e<de&&he.areValuesEqual(_e-1,_e);_e++);return _e}var h=["id","Cartn_x","Cartn_y","Cartn_z","label_atom_id","type_symbol","occupancy","B_iso_or_equiv","auth_atom_id","label_alt_id","label_comp_id","label_seq_id","label_asym_id","auth_comp_id","auth_seq_id","auth_asym_id","group_PDB","label_entity_id","pdbx_PDB_ins_code","pdbx_PDB_model_num"];function f(pe){for(var de=e.Utils.FastMap.create(),he=0,_e=h;he<_e.length;he++){var ve=_e[he];de.set(ve,pe.getColumn(ve))}return de}function m(pe,de,he){for(var _e=c(pe,de,he.get("pdbx_PDB_model_num")),ve=e.Utils.DataTable.ofDefinition(e.Structure.Tables.Atoms,_e-pe),Z=e.Utils.DataTable.ofDefinition(e.Structure.Tables.Positions,_e-pe),be=Z.x,Ee=he.get("Cartn_x"),De=Z.y,Fe=he.get("Cartn_y"),Ue=Z.z,Qe=he.get("Cartn_z"),Ke=ve.id,Te=he.get("id"),Ie=ve.altLoc,ke=he.get("label_alt_id"),nt=ve.rowIndex,dt=ve.residueIndex,yt=ve.chainIndex,gt=ve.entityIndex,xt=ve.name,tt=he.get("label_atom_id"),pt=ve.elementSymbol,At=he.get("type_symbol"),Tt=ve.occupancy,Ct=he.get("occupancy"),Bt=ve.tempFactor,nr=he.get("B_iso_or_equiv"),$t=ve.authName,It=he.get("auth_atom_id"),Lt=he.get("label_asym_id"),Pt=he.get("label_entity_id"),He=he.get("pdbx_PDB_ins_code"),Be=he.get("auth_seq_id"),Ge=he.get("pdbx_PDB_model_num"),Re=0,Ne=0,ze=0,et=pe,it=pe;it<_e;it++){var at=it-pe;Ke[at]=Te.getInteger(it),be[at]=Ee.getFloat(it),De[at]=Fe.getFloat(it),Ue[at]=Qe.getFloat(it),pt[at]=At.getString(it)||_.ElementSymbol,xt[at]=tt.getString(it)||pt[at],$t[at]=It.getString(it)||xt[at],Ie[at]=ke.getString(it),Tt[at]=Ct.getFloat(it),Bt[at]=nr.getFloat(it);var vt=!1,jt=!Be.areValuesEqual(et,it)||!He.areValuesEqual(et,it);Lt.areValuesEqual(et,it)||(vt=!0,jt=!0),Pt.areValuesEqual(et,it)||(ze++,vt=!0,jt=!0),jt&&Ne++,vt&&Re++,nt[at]=it,dt[at]=Ne,yt[at]=Re,gt[at]=ze,et=it}var Nt=Ge.isDefined&&Ge.getString(pe)||_.ModelId;return{atoms:ve,positions:Z,modelId:Nt,endRow:_e}}function b(pe,de){var he=de.count,_e=de.residueIndex,ve=de.chainIndex,Z=de.entityIndex,be=e.Utils.DataTable.ofDefinition(e.Structure.Tables.Residues,de.residueIndex[de.count-1]+1),Ee=e.Utils.DataTable.ofDefinition(e.Structure.Tables.Chains,de.chainIndex[de.count-1]+1),De=e.Utils.DataTable.ofDefinition(e.Structure.Tables.Entities,de.entityIndex[de.count-1]+1),Fe=be.name,Ue=be.seqNumber,Qe=be.asymId,Ke=be.authName,Te=be.authSeqNumber,Ie=be.authAsymId,ke=be.insCode,nt=be.entityId,dt=be.isHet,yt=be.atomStartIndex,gt=be.atomEndIndex,xt=be.chainIndex,tt=be.entityIndex,pt=Ee.asymId,At=Ee.entityId,Tt=Ee.authAsymId,Ct=Ee.atomStartIndex,Bt=Ee.atomEndIndex,nr=Ee.residueStartIndex,$t=Ee.residueEndIndex,It=Ee.entityIndex,Lt=De.entityId,Pt=De.type,He=De.atomStartIndex,Be=De.atomEndIndex,Ge=De.residueStartIndex,Re=De.residueEndIndex,Ne=De.chainStartIndex,ze=De.chainEndIndex,et=pe.get("label_comp_id"),it=pe.get("label_seq_id"),at=pe.get("label_asym_id"),vt=pe.get("auth_comp_id"),jt=pe.get("auth_seq_id"),Nt=pe.get("auth_asym_id"),Dt=pe.get("group_PDB"),Gt=pe.get("label_entity_id"),or=pe.get("pdbx_PDB_ins_code"),Jt=0,pr=0,lr=0,Lr=0,Or=0,Sn=0,Ht=0,sr=0,Sr=0,Fr=0;for(Fr=0;Fr<he;Fr++)_e[Fr]!==_e[Jt]&&(Fe[Ht]=et.getString(Jt)||_.ResidueName,Ue[Ht]=it.getInteger(Jt),Qe[Ht]=at.getString(Jt)||_.AsymId,Ke[Ht]=vt.getString(Jt)||Fe[Ht],Te[Ht]=jt.getInteger(Jt),Ie[Ht]=Nt.getString(Jt)||Qe[Ht],ke[Ht]=or.getString(Jt),nt[Ht]=Gt.getString(Jt)||_.EntityId,dt[Ht]=Dt.stringEquals(Jt,"HETATM")?1:0,yt[Ht]=Jt,gt[Ht]=Fr,xt[Ht]=sr,tt[Ht]=Sr,Ht++,Jt=Fr),ve[Fr]!==ve[pr]&&(pt[sr]=at.getString(pr)||_.AsymId,Tt[sr]=Nt.getString(pr)||pt[sr],At[sr]=Gt.getString(pr)||_.EntityId,nr[sr]=Sn,$t[sr]=Ht,Ct[sr]=pr,Bt[sr]=Fr,It[sr]=Sr,sr++,pr=Fr,Sn=Ht),Z[Fr]!==Z[lr]&&(Lt[Sr]=Gt.getString(lr)||_.EntityId,Pt[Sr]="unknown",He[Sr]=lr,Be[Sr]=Fr,Ge[Sr]=Or,Re[Sr]=Ht,Ne[Sr]=Lr,ze[Sr]=sr,Sr++,lr=Fr,Lr=sr,Or=Ht);return Lt[Sr]=Gt.getString(lr)||_.EntityId,Pt[Sr]="unknown",He[Sr]=lr,Be[Sr]=Fr,Ge[Sr]=Or,Re[Sr]=Ht+1,Ne[Sr]=Lr,ze[Sr]=sr+1,pt[sr]=at.getString(pr)||_.AsymId,Tt[sr]=Nt.getString(pr)||pt[sr],At[sr]=Gt.getString(pr)||_.EntityId,nr[sr]=Sn,$t[sr]=Ht+1,Ct[sr]=pr,Bt[sr]=Fr,It[sr]=Sr,Fe[Ht]=et.getString(Jt)||_.ResidueName,Ue[Ht]=it.getInteger(Jt),Qe[Ht]=at.getString(Jt)||_.AsymId,Ke[Ht]=vt.getString(Jt)||Fe[Ht],Te[Ht]=jt.getInteger(Jt),Ie[Ht]=Nt.getString(Jt)||Qe[Ht],ke[Ht]=or.getString(Jt),yt[Ht]=Jt,gt[Ht]=Fr,xt[Ht]=sr,tt[Ht]=Sr,dt[Ht]=Dt.stringEquals(Jt,"HETATM")?1:0,{residues:be,chains:Ee,entities:De}}function w(pe,de){var he;if(pe){var _e={},ve=pe.getColumn("type"),Z=pe.getColumn("id");for(he=0;he<pe.rowCount;he++){var be=(ve.getString(he)||"").toLowerCase(),Ee=Z.getString(he)||_.EntityId;switch(be){case"polymer":case"non-polymer":case"water":_e[Ee]=be;break;default:_e[Ee]="unknown";break}}for(he=0;he<de.count;he++){var De=_e[de.entityId[he]];De!==void 0&&(de.type[he]=De)}}}function C(pe,de,he,_e){return new e.Structure.PolyResidueIdentifier(de.getString(pe)||_.AsymId,he.getInteger(pe),_e.getString(pe))}var E={ALA:!0,ARG:!0,ASP:!0,CYS:!0,GLN:!0,GLU:!0,GLY:!0,HIS:!0,ILE:!0,LEU:!0,LYS:!0,MET:!0,PHE:!0,PRO:!0,SER:!0,THR:!0,TRP:!0,TYR:!0,VAL:!0,ASN:!0,PYL:!0,SEC:!0};function S(pe,de,he,_e){if(he.type[de.entityIndex[_e]]!=="polymer")return!1;for(var ve=!1,Z=!1,be=pe.name,Ee=0,De=de.atomStartIndex[_e],Fe=de.atomEndIndex[_e];De<Fe;De++){var Ue=be[De];if(!ve&&Ue==="CA"?(ve=!0,Ee++):!Z&&Ue==="O"&&(Z=!0,Ee++),Ee===2)break}return ve&&Z||ve&&!de.isHet[_e]}function M(pe,de,he,_e){if(E[de.name[_e]]||he.type[de.entityIndex[_e]]!=="polymer")return!1;var ve=pe.name,Z=0,be=de.atomStartIndex[_e],Ee=de.atomEndIndex[_e];if(Ee-be===1&&!de.isHet[be]&&ve[be]==="P")return!0;for(var De=be;De<Ee;De++){var Fe=ve[De];if((Fe==="O5'"||Fe==="C3'"||Fe==="N3"||Fe==="P")&&Z++,Z>=3)return!0}return!1}function A(pe,de,he,_e,ve,Z){for(var be=de.asymId,Ee=de.entityIndex,De=0,Fe=_e,Ue=_e,Qe=ve;Fe<Qe;){if(M(pe,de,he,Fe)){for(Ue=Fe+1;Ue<Qe&&be[Fe]===be[Ue]&&Ee[Fe]===Ee[Ue]&&M(pe,de,he,Ue);)Ue++;De=5}else if(S(pe,de,he,Fe)){for(Ue=Fe+1;Ue<Qe&&be[Fe]===be[Ue]&&Ee[Fe]===Ee[Ue]&&S(pe,de,he,Ue);)Ue++;De=4}else{for(Ue=Fe+1;Ue<Qe&&be[Fe]===be[Ue]&&Ee[Fe]===Ee[Ue]&&!M(pe,de,he,Ue)&&!S(pe,de,he,Ue);)Ue++;De=0}var Ke=new e.Structure.SecondaryStructureElement(De,new e.Structure.PolyResidueIdentifier(de.asymId[Fe],de.seqNumber[Fe],de.insCode[Fe]),new e.Structure.PolyResidueIdentifier(de.asymId[Ue-1],de.seqNumber[Ue-1],de.insCode[Ue-1]));Ke.startResidueIndex=Fe,Ke.endResidueIndex=Ue,Z[Z.length]=Ke,Fe=Ue}}function R(pe,de){for(var he=[],_e=pe.authSeqNumber,ve=0,Z=de;ve<Z.length;ve++){for(var be=Z[ve],Ee=be.startResidueIndex,De=be.endResidueIndex-1,Fe=be.startResidueIndex;Fe<De;Fe++)if(_e[Fe+1]-_e[Fe]!==1){var Ue=new e.Structure.SecondaryStructureElement(be.type,be.startResidueId,be.endResidueId,be.info);Ue.startResidueIndex=Ee,Ue.endResidueIndex=Fe+1,he[he.length]=Ue,Ee=Fe+1}if(Ee===be.startResidueIndex)he[he.length]=be;else{var Ue=new e.Structure.SecondaryStructureElement(be.type,be.startResidueId,be.endResidueId,be.info);Ue.startResidueIndex=Ee,Ue.endResidueIndex=be.endResidueIndex,he[he.length]=Ue}}return he}function D(pe,de){for(var he=de.residues,_e=he.count,ve=he.asymId,Z=he.seqNumber,be=he.insCode,Ee=void 0,De="",Fe=e.Utils.FastMap.create(),Ue=e.Utils.FastMap.create(),Qe=0,Ke=pe;Qe<Ke.length;Qe++){var Te=Ke[Qe];De=Te.startResidueId.asymId+" "+Te.startResidueId.seqNumber,Te.startResidueId.insCode&&(De+=" "+Te.startResidueId.insCode),Fe.set(De,Te),De=Te.endResidueId.asymId+" "+Te.endResidueId.seqNumber,Te.endResidueId.insCode&&(De+=" "+Te.endResidueId.insCode),Ue.set(De,Te)}for(var Ie=0;Ie<_e;Ie++)De=ve[Ie]+" "+Z[Ie],be[Ie]&&(De+=" "+be[Ie]),Ee=Fe.get(De),Ee&&(Ee.startResidueIndex=Ie,Ee.endResidueIndex=Ie+1),Ee=Ue.get(De),Ee&&(Ee.startResidueIndex<0&&(Ee.startResidueIndex=Ie),Ee.endResidueIndex=Ie+1);Ee&&(Ee.endResidueIndex=_e);for(var ke=[],nt=0,dt=pe;nt<dt.length;nt++){var Te=dt[nt];Te.startResidueIndex<0||Te.endResidueIndex<0||Te.type===3&&Te.length<3||Te.endResidueIndex>=0&&Te.startResidueIndex>=0&&(ke[ke.length]=Te)}ke.sort(function(tt,pt){return tt.startResidueIndex-pt.startResidueIndex});for(var Ie=0;Ie<ke.length-1;Ie++)ke[Ie+1].startResidueIndex-ke[Ie].endResidueIndex===-1&&ke[Ie+1].startResidueIndex++;if(!ke.length)return ke;for(var yt=[ke[0]],Ie=1;Ie<ke.length;Ie++){var gt=yt[yt.length-1],xt=ke[Ie];xt.startResidueIndex<gt.endResidueIndex?N(gt,xt):yt[yt.length]=xt}return yt}function N(pe,de){de.endResidueIndex>pe.endResidueIndex&&(pe.endResidueIndex=de.endResidueIndex)}function I(pe,de,he){var _e=[],ve=[],Z=pe.getCategory("_struct_conf"),be=pe.getCategory("_struct_sheet_range"),Ee;if(Z){var De=Z.getColumn("conf_type_id");if(De){var Fe=Z.getColumn("beg_label_asym_id"),Ue=Z.getColumn("beg_label_seq_id"),Qe=Z.getColumn("pdbx_beg_PDB_ins_code"),Ke=Z.getColumn("end_label_asym_id"),Te=Z.getColumn("end_label_seq_id"),Ie=Z.getColumn("pdbx_end_PDB_ins_code"),ke=Z.getColumn("pdbx_PDB_helix_class");for(Ee=0;Ee<Z.rowCount;Ee++){var nt=void 0;switch((De.getString(Ee)||"").toUpperCase()){case"HELX_P":nt=1;break;case"TURN_P":nt=2;break}nt&&(_e[_e.length]=new e.Structure.SecondaryStructureElement(nt,C(Ee,Fe,Ue,Qe),C(Ee,Ke,Te,Ie),{helixClass:ke.getString(Ee)}))}}}if(be){var Fe=be.getColumn("beg_label_asym_id"),Ue=be.getColumn("beg_label_seq_id"),Qe=be.getColumn("pdbx_beg_PDB_ins_code"),Ke=be.getColumn("end_label_asym_id"),Te=be.getColumn("end_label_seq_id"),Ie=be.getColumn("pdbx_end_PDB_ins_code"),dt=be.getColumn("symmetry"),yt=be.getColumn("sheet_id"),gt=be.getColumn("id");for(Ee=0;Ee<be.rowCount;Ee++)_e[_e.length]=new e.Structure.SecondaryStructureElement(3,C(Ee,Fe,Ue,Qe),C(Ee,Ke,Te,Ie),{symmetry:dt.getString(Ee),sheetId:yt.getString(Ee),id:gt.getString(Ee)})}var xt=_e.length>0?D(_e,he):[],tt=he.residues,pt=tt.count;if(xt.length===0)return A(de,tt,he.entities,0,pt,ve),R(tt,ve);var At=xt.length-1;for(xt[0].startResidueIndex>0&&A(de,tt,he.entities,0,xt[0].startResidueIndex,ve),Ee=0;Ee<At;Ee++)ve[ve.length]=xt[Ee],xt[Ee+1].startResidueIndex-xt[Ee].endResidueIndex>0&&A(de,tt,he.entities,xt[Ee].endResidueIndex,xt[Ee+1].startResidueIndex,ve);return ve[ve.length]=xt[At],xt[At].endResidueIndex<pt&&A(de,tt,he.entities,xt[At].endResidueIndex,pt,ve),R(tt,ve)}function L(pe,de){for(var he=pe.secondaryStructureIndex,_e=0,ve=0,Z=de;ve<Z.length;ve++){for(var be=Z[ve],Ee=be.startResidueIndex;Ee<be.endResidueIndex;Ee++)he[Ee]=_e;_e++}return he}function Y(pe,de,he,_e){for(var ve=pe.chains,Z=ve.asymId,be=ve.residueStartIndex,Ee=ve.residueEndIndex,De=ve.count,Fe=pe.residues,Ue=Fe.seqNumber,Qe=Fe.insCode,Ke=0;Ke<De;Ke++)if(Z[Ke]===de){for(var Te=be[Ke],Ie=Ee[Ke];Te<Ie;Te++)if(Ue[Te]===he&&Qe[Te]===_e)return Te}return-1}function J(pe,de,he,_e,ve){for(var Z=de.residues,be=Z.atomStartIndex,Ee=Z.atomEndIndex,De=pe.name,Fe=pe.altLoc,Ue=be[he],Qe=Ee[he];Ue<=Qe;Ue++)if(De[Ue]===_e&&Fe[Ue]===ve)return Ue;return-1}function ie(pe){var de=pe.getCategory("_pdbx_struct_mod_residue");if(de){for(var he=e.Utils.DataTable.ofDefinition(e.Structure.Tables.ModifiedResidues,de.rowCount),_e=de.getColumn("label_asym_id"),ve=de.getColumn("label_seq_id"),Z=de.getColumn("PDB_ins_code"),be=de.getColumn("parent_comp_id"),Ee=de.getColumn("details"),De=he.asymId,Fe=he.seqNumber,Ue=he.insCode,Qe=he.parent,Ke=he.details,Te=0,Ie=de.rowCount;Te<Ie;Te++)De[Te]=_e.getString(Te),Fe[Te]=ve.getInteger(Te),Ue[Te]=Z.getString(Te),Qe[Te]=be.getString(Te),Ke[Te]=Ee.getString(Te);return he}}function K(pe,de,he){var _e=pe.getCategory("_struct_conn");if(_e){for(var ve=function(gt){return{label_asym_id:_e.getColumn("ptnr"+gt+"_label_asym_id"),label_seq_id:_e.getColumn("ptnr"+gt+"_label_seq_id"),label_atom_id:_e.getColumn("ptnr"+gt+"_label_atom_id"),label_alt_id:_e.getColumn("pdbx_ptnr"+gt+"_label_alt_id"),ins_code:_e.getColumn("pdbx_ptnr"+gt+"_PDB_ins_code"),symmetry:_e.getColumn("ptnr"+gt+"_symmetry")}},Z=_e.getColumn("conn_type_id"),be=_e.getColumn("pdbx_dist_value"),Ee=_e.getColumn("pdbx_value_order"),De=ve(1),Fe=ve(2),Ue=ve(3),Qe=function(gt,xt){if(xt.label_asym_id.getValuePresence(gt)===0){var tt=Y(he,xt.label_asym_id.getString(gt),xt.label_seq_id.getInteger(gt),xt.ins_code.getString(gt));if(!(tt<0)){var pt=J(de,he,tt,xt.label_atom_id.getString(gt),xt.label_alt_id.getString(gt));if(!(pt<0))return{residueIndex:tt,atomIndex:pt,symmetry:xt.symmetry.getString(gt)||"1_555"}}}},Ke=function(gt){var xt=[],tt=Qe(gt,De);return tt&&xt.push(tt),tt=Qe(gt,Fe),tt&&xt.push(tt),tt=Qe(gt,Ue),tt&&xt.push(tt),xt},Te=[],Ie=0;Ie<_e.rowCount;Ie++){var ke=Ke(Ie);if(!(ke.length<2)){var nt=Z.getString(Ie),dt=(Ee.getString(Ie)||"").toLowerCase(),yt=0;switch(dt){case"sing":yt=1;break;case"doub":yt=2;break;case"trip":yt=3;break;case"quad":yt=4;break}switch(nt){case"disulf":yt=5;break;case"hydrog":yt=8;break;case"metalc":yt=6;break;case"saltbr":yt=7;break}Te.push({bondType:yt,distance:be.getFloat(Ie),partners:ke})}}return new e.Structure.StructConn(Te)}}function Q(pe){for(var de=/\(?([^\(\)]+)\)?]*/g,he,_e=[],ve=[];he=de.exec(pe);)_e[_e.length]=he[1];return _e.forEach(function(Z){var be=[];Z.split(",").forEach(function(Ee){var De=Ee.indexOf("-");if(De>0)for(var Fe=parseInt(Ee.substring(0,De)),Ue=parseInt(Ee.substr(De+1)),Qe=Fe;Qe<=Ue;Qe++)be[be.length]=Qe.toString();else be[be.length]=Ee.trim()}),ve[ve.length]=be}),ve}function ne(pe){var de=pe.getCategory("_pdbx_struct_assembly"),he=pe.getCategory("_pdbx_struct_assembly_gen"),_e=pe.getCategory("_pdbx_struct_oper_list");if(!(!de||!he||!_e)){var ve,Z={},be=[],Ee=e.Utils.FastMap.create(),De=he.getColumn("assembly_id"),Fe=he.getColumn("oper_expression"),Ue=he.getColumn("asym_id_list");for(ve=0;ve<he.rowCount;ve++){var Qe=De.getString(ve);if(!Qe)return;var Ke=Ee.get(Qe);Ke||(Ke=new e.Structure.AssemblyGen(Qe),Ee.set(Qe,Ke),be.push(Ke)),Ke.gens.push(new e.Structure.AssemblyGenEntry(Q(Fe.getString(ve)),Ue.getString(ve).split(",")))}var Te=_e.getColumn("id"),Ie=_e.getColumn("name");for(ve=0;ve<_e.rowCount;ve++){var ke=v(_e,"matrix","vector",ve);if(!ke)return;var nt=new e.Structure.AssemblyOperator(Te.getString(ve),Ie.getString(ve),ke);Z[nt.id]=nt}return new e.Structure.AssemblyInfo(Z,be)}}function ue(pe){var de=pe.getCategory("_cell"),he=pe.getCategory("_symmetry"),_e=pe.getCategory("_atom_sites"),ve="",Z=[1,1,1],be=[90,90,90],Ee=e.Geometry.LinearAlgebra.Matrix4.identity(),De=!1;if(!(!de||!he)&&(ve=he.getColumn("space_group_name_H-M").getString(0),Z=[de.getColumn("length_a").getFloat(0),de.getColumn("length_b").getFloat(0),de.getColumn("length_c").getFloat(0)],be=[de.getColumn("angle_alpha").getFloat(0),de.getColumn("angle_beta").getFloat(0),de.getColumn("angle_gamma").getFloat(0)],!(!ve||Z.every(function(tt){return isNaN(tt)||tt===0})||Z.every(function(tt){return isNaN(tt)||tt===0})))){var Fe=function(tt){return tt*tt},Ue=function(tt){return tt*Math.PI/180},Qe=Z[0],Ke=Z[1],Te=Z[2],Ie=Ue(be[0]),ke=Ue(be[1]),nt=Ue(be[2]),dt=Qe*Ke*Te*Math.sqrt(1-Fe(Math.cos(Ie))-Fe(Math.cos(ke))-Fe(Math.cos(nt))+2*Math.cos(Ie)*Math.cos(ke)*Math.cos(nt)),yt=e.Geometry.LinearAlgebra.Matrix4.ofRows([[Qe,Ke*Math.cos(nt),Te*Math.cos(ke),0],[0,Ke*Math.sin(nt),Te*(Math.cos(Ie)-Math.cos(ke)*Math.cos(nt))/Math.sin(nt),0],[0,0,dt/(Qe*Ke*Math.sin(nt)),0],[0,0,0,1]]),gt=e.Geometry.LinearAlgebra.Matrix4.identity();if(e.Geometry.LinearAlgebra.Matrix4.invert(gt,yt),_e){var xt=v(_e,"fract_transf_matrix","fract_transf_vector",0);xt&&(Ee=xt,e.Geometry.LinearAlgebra.Matrix4.areEqual(gt,xt,1e-4)||(De=!0))}else Ee=gt;return new e.Structure.SymmetryInfo(ve,Z,be,Ee,De)}}function fe(pe){if(!(!pe||!pe.rowCount)){for(var de=new e.Structure.ComponentBondInfo,he=pe.getColumn("comp_id"),_e=pe.getColumn("atom_id_1"),ve=pe.getColumn("atom_id_2"),Z=pe.getColumn("value_order"),be=pe.rowCount,Ee=de.newEntry(he.getString(0)),De=0;De<be;De++){var Fe=he.getString(De),Ue=_e.getString(De),Qe=ve.getString(De),Ke=Z.getString(De);Ee.id!==Fe&&(Ee=de.newEntry(Fe));var Te=void 0;switch(Ke.toLowerCase()){case"sing":Te=1;break;case"doub":case"delo":Te=2;break;case"trip":Te=3;break;case"quad":Te=4;break;default:Te=0;break}Ee.add(Ue,Qe,Te)}return de}}function ge(pe,de,he){var _e=m(pe,de.getCategory("_atom_site").rowCount,he),ve=_e.atoms,Z=_e.positions,be=_e.modelId,Ee=_e.endRow,De=b(he,ve),Fe=de.getCategory("_entry"),Ue;Fe&&Fe.getColumn("id").isDefined?Ue=Fe.getColumn("id").getString(0):Ue=de.header,w(de.getCategory("_entity"),De.entities);var Qe=I(de,ve,De);return L(De.residues,Qe),{model:e.Structure.Molecule.Model.create({id:Ue,modelId:be,data:{atoms:ve,residues:De.residues,chains:De.chains,entities:De.entities,bonds:{structConn:K(de,ve,De),component:fe(de.getCategory("_chem_comp_bond"))},modifiedResidues:ie(de),secondaryStructure:Qe,symmetryInfo:ue(de),assemblyInfo:ne(de)},positions:Z,source:e.Structure.Molecule.Model.Source.File}),endRow:Ee}}function ye(pe){var de=[],he=pe.getCategory("_atom_site"),_e=0;if(!he)throw"'_atom_site' category is missing in the input.";var ve=pe.getCategory("_entry"),Z=f(he),be;for(ve&&ve.getColumn("id").isDefined?be=ve.getColumn("id").getString(0):be=pe.header;_e<he.rowCount;){var Ee=ge(_e,pe,Z),De=Ee.model,Fe=Ee.endRow;de.push(De),_e=Fe}var Ue=void 0,Qe=pe.getCategory("_exptl");if(Qe){Ue=[];for(var Ke=Qe.getColumn("method"),Te=0;Te<Qe.rowCount;Te++)Ke.getValuePresence(Te)===0&&Ue.push(Ke.getString(Te))}return e.Structure.Molecule.create(be,de,{experimentMethods:Ue})}l.ofDataBlock=ye})(x=p.mmCIF||(p.mmCIF={}))})(d=s.Molecule||(s.Molecule={}))})(o=e.Formats||(e.Formats={}))})(r=i.Core||(i.Core={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){var x;(function(l){"use strict";var _=function(){function b(w,C,E,S){this.header=w,this.crystInfo=C,this.models=E,this.data=S}return b.prototype.makeEntities=function(){var w=["data_ent","loop_","_entity.id","_entity.type","_entity.src_method","_entity.pdbx_description","_entity.formula_weight","_entity.pdbx_number_of_molecules","_entity.details","_entity.pdbx_mutation","_entity.pdbx_fragment","_entity.pdbx_ec","1 polymer man polymer 0.0 0 ? ? ? ?","2 non-polymer syn non-polymer 0.0 0 ? ? ? ?","3 water nat water 0.0 0 ? ? ? ?"].join(`
`),C=s.CIF.Text.parse(w);if(C.isError)throw C.toString();return C.result.dataBlocks[0].getCategory("_entity")},b.prototype.toCifFile=function(){var w={dot:l.Parser.getDotRange(this.data.length),question:l.Parser.getQuestionmarkRange(this.data.length),numberTokens:l.Parser.getNumberRanges(this.data.length),data:this.data},C=new s.CIF.Text.File(this.data),E=new s.CIF.Text.DataBlock(this.data,this.header.id);if(C.dataBlocks.push(E),E.addCategory(this.makeEntities()),this.crystInfo){var S=this.crystInfo.toCifCategory(this.header.id),M=S.cell,A=S.symm;E.addCategory(M),E.addCategory(A)}return E.addCategory(this.models.toCifCategory(E,w)),C},b}();l.MoleculeData=_;var v=function(){function b(w){this.id=w}return b}();l.Header=v;var c=function(){function b(w){this.record=w}return b.prototype.getValue=function(w,C){var E=this.record.substr(6,9).trim();return E.length?E:"."},b.prototype.toCifCategory=function(w){var C=["_cell.entry_id           '"+w+"'","_cell.length_a           "+this.getValue(6,9),"_cell.length_b           "+this.getValue(15,9),"_cell.length_c           "+this.getValue(24,9),"_cell.angle_alpha        "+this.getValue(33,7),"_cell.angle_beta         "+this.getValue(40,7),"_cell.angle_gamma        "+this.getValue(48,7),"_cell.Z_PDB              "+this.getValue(66,4),"_cell.pdbx_unique_axis   ?","_symmetry.entry_id                         '"+w+"'","_symmetry.space_group_name_H-M             '"+this.getValue(55,11)+"'","_symmetry.pdbx_full_space_group_name_H-M   ?","_symmetry.cell_setting                     ?","_symmetry.Int_Tables_number                ?","_symmetry.space_group_name_Hall            ?"].join(`
`),E=s.CIF.Text.parse(C);if(E.isError)throw new Error(E.toString());return{cell:E.result.dataBlocks[0].getCategory("_cell"),symm:E.result.dataBlocks[0].getCategory("_symmetry")}},b}();l.CrystStructureInfo=c;var h=function(){function b(w,C){this.helixTokens=w,this.sheetTokens=C}return b.prototype.toCifCategory=function(w){},b}();l.SecondaryStructure=h;var f=function(){function b(w,C,E){this.idToken=w,this.atomTokens=C,this.atomCount=E}return b.prototype.writeToken=function(w,C){e.Utils.ArrayBuilder.add2(C,this.atomTokens[2*w],this.atomTokens[2*w+1])},b.prototype.writeTokenCond=function(w,C,E){var S=this.atomTokens[2*w],M=this.atomTokens[2*w+1];S===M?e.Utils.ArrayBuilder.add2(C,E.start,E.end):e.Utils.ArrayBuilder.add2(C,S,M)},b.prototype.writeRange=function(w,C){e.Utils.ArrayBuilder.add2(C,w.start,w.end)},b.prototype.tokenEquals=function(w,C,E,S){var M=E.length;if(M!==C-w)return!1;for(var A=E.length-1;A>=0;A--)if(S.charCodeAt(A+w)!==E.charCodeAt(A))return!1;return!0},b.prototype.getEntityType=function(w,C){var E=w*14;if(this.tokenEquals(this.atomTokens[2*E],this.atomTokens[2*E+1],"HETATM",C)){var S=this.atomTokens[2*(E+4)],M=this.atomTokens[2*(E+4)+1];return this.tokenEquals(S,M,"HOH",C)||this.tokenEquals(S,M,"WTR",C)||this.tokenEquals(S,M,"SOL",C)?3:2}else return 1},b.prototype.writeCifTokens=function(w,C,E){for(var S={RECORD:0,SERIAL:1,ATOM_NAME:2,ALT_LOC:3,RES_NAME:4,CHAIN_ID:5,RES_SEQN:6,INS_CODE:7,X:8,Y:9,Z:10,OCCUPANCY:11,TEMP_FACTOR:12,ELEMENT:13},M=14,A=0;A<this.atomCount;A++){var R=A*M;this.writeToken(R+S.RECORD,C),this.writeToken(R+S.SERIAL,C),this.writeToken(R+S.ELEMENT,C),this.writeToken(R+S.ATOM_NAME,C),this.writeTokenCond(R+S.ALT_LOC,C,E.dot),this.writeToken(R+S.RES_NAME,C),this.writeToken(R+S.CHAIN_ID,C),this.writeRange(E.numberTokens.get(this.getEntityType(A,E.data)),C),this.writeToken(R+S.RES_SEQN,C),this.writeTokenCond(R+S.INS_CODE,C,E.dot),this.writeToken(R+S.X,C),this.writeToken(R+S.Y,C),this.writeToken(R+S.Z,C),this.writeToken(R+S.OCCUPANCY,C),this.writeToken(R+S.TEMP_FACTOR,C),this.writeRange(E.question,C),this.writeRange(E.question,C),this.writeRange(E.question,C),this.writeRange(E.question,C),this.writeRange(E.question,C),this.writeRange(E.question,C),this.writeToken(R+S.RES_SEQN,C),this.writeToken(R+S.RES_NAME,C),this.writeToken(R+S.CHAIN_ID,C),this.writeToken(R+S.ATOM_NAME,C),this.writeRange(w,C)}},b.COLUMNS=["_atom_site.group_PDB","_atom_site.id","_atom_site.type_symbol","_atom_site.label_atom_id","_atom_site.label_alt_id","_atom_site.label_comp_id","_atom_site.label_asym_id","_atom_site.label_entity_id","_atom_site.label_seq_id","_atom_site.pdbx_PDB_ins_code","_atom_site.Cartn_x","_atom_site.Cartn_y","_atom_site.Cartn_z","_atom_site.occupancy","_atom_site.B_iso_or_equiv","_atom_site.Cartn_x_esd","_atom_site.Cartn_y_esd","_atom_site.Cartn_z_esd","_atom_site.occupancy_esd","_atom_site.B_iso_or_equiv_esd","_atom_site.pdbx_formal_charge","_atom_site.auth_seq_id","_atom_site.auth_comp_id","_atom_site.auth_asym_id","_atom_site.auth_atom_id","_atom_site.pdbx_PDB_model_num"],b}();l.ModelData=f;var m=function(){function b(w){this.models=w}return b.prototype.toCifCategory=function(w,C){for(var E=0,S=0,M=this.models;S<M.length;S++){var A=M[S];E+=A.atomCount}for(var R=26,D=e.Utils.ArrayBuilder.forTokenIndices(E*R),N=0,I=this.models;N<I.length;N++){var A=I[N];A.writeCifTokens(A.idToken,D,C)}return new s.CIF.Text.Category(w.data,"_atom_site",0,0,f.COLUMNS,D.array,E*R)},b}();l.ModelsData=m})(x=p.PDB||(p.PDB={}))})(d=s.Molecule||(s.Molecule={}))})(o=e.Formats||(e.Formats={}))})(r=i.Core||(i.Core={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){var x;(function(l){"use strict";var _=function(){function h(f){this.data=f,this.trimmedToken={start:0,end:0},this.line=0,this.position=0,this.length=f.length}return h.prototype.moveToNextLine=function(){for(;this.position<this.length&&this.data.charCodeAt(this.position)!==10;)this.position++;return this.position++,this.line++,this.position},h.prototype.moveToEndOfLine=function(){for(;this.position<this.length;){var f=this.data.charCodeAt(this.position);if(f===10||f===13)return this.position;this.position++}return this.position},h.prototype.startsWith=function(f,m){for(var b=m.length-1;b>=0;b--)if(this.data.charCodeAt(b+f)!==m.charCodeAt(b))return!1;return!0},h.prototype.trim=function(f,m){for(;f<m&&this.data.charCodeAt(f)===32;)f++;for(;m>f&&this.data.charCodeAt(m-1)===32;)m--;this.trimmedToken.start=f,this.trimmedToken.end=m},h.prototype.tokenizeAtomRecord=function(f){var m=this.position,b=this.position,w=this.moveToEndOfLine(),C=w-b;return C<60?!1:(this.trim(b,b+6),s.TokenIndexBuilder.addToken(f,this.trimmedToken.start,this.trimmedToken.end),b=m+6,this.trim(b,b+5),s.TokenIndexBuilder.addToken(f,this.trimmedToken.start,this.trimmedToken.end),b=m+12,this.trim(b,b+4),s.TokenIndexBuilder.addToken(f,this.trimmedToken.start,this.trimmedToken.end),this.data.charCodeAt(m+16)===32?s.TokenIndexBuilder.addToken(f,0,0):s.TokenIndexBuilder.addToken(f,m+16,m+17),b=m+17,this.trim(b,b+3),s.TokenIndexBuilder.addToken(f,this.trimmedToken.start,this.trimmedToken.end),s.TokenIndexBuilder.addToken(f,m+21,m+22),b=m+22,this.trim(b,b+4),s.TokenIndexBuilder.addToken(f,this.trimmedToken.start,this.trimmedToken.end),this.data.charCodeAt(m+26)===32?s.TokenIndexBuilder.addToken(f,0,0):s.TokenIndexBuilder.addToken(f,m+26,m+27),b=m+30,this.trim(b,b+8),s.TokenIndexBuilder.addToken(f,this.trimmedToken.start,this.trimmedToken.end),b=m+38,this.trim(b,b+8),s.TokenIndexBuilder.addToken(f,this.trimmedToken.start,this.trimmedToken.end),b=m+46,this.trim(b,b+8),s.TokenIndexBuilder.addToken(f,this.trimmedToken.start,this.trimmedToken.end),b=m+54,this.trim(b,b+6),s.TokenIndexBuilder.addToken(f,this.trimmedToken.start,this.trimmedToken.end),C>=66?(b=m+60,this.trim(b,b+6),s.TokenIndexBuilder.addToken(f,this.trimmedToken.start,this.trimmedToken.end)):s.TokenIndexBuilder.addToken(f,0,0),C>=78?(b=m+76,this.trim(b,b+2),this.trimmedToken.start<this.trimmedToken.end?s.TokenIndexBuilder.addToken(f,this.trimmedToken.start,this.trimmedToken.end):s.TokenIndexBuilder.addToken(f,m+12,m+13)):s.TokenIndexBuilder.addToken(f,m+12,m+13),!0)},h}(),v=function(){function h(){}return h.tokenizeAtom=function(f,m){if(!m.tokenizeAtomRecord(f))return new s.ParserError("Invalid ATOM/HETATM record.",m.line)},h.tokenize=function(f,m){for(var b=new _(m),w=m.length,C=s.TokenIndexBuilder.create(4096),E=0,S=[],M=void 0,A={start:0,end:0};b.position<w;){var R=!0;switch(m.charCodeAt(b.position)){case 65:if(b.startsWith(b.position,"ATOM")){C||(C=s.TokenIndexBuilder.create(4096));var D=h.tokenizeAtom(C,b);if(E++,D)return D}break;case 67:if(b.startsWith(b.position,"CRYST1")){var N=b.position,I=b.moveToEndOfLine();M=new l.CrystStructureInfo(m.substring(N,I))}break;case 69:if(b.startsWith(b.position,"ENDMDL")&&E>0)S.length===0&&(A={start:m.length+3,end:m.length+4}),C&&S.push(new l.ModelData(A,C.tokens,E)),E=0,C=null;else if(b.startsWith(b.position,"END")){var N=b.position,I=b.moveToEndOfLine();b.trim(N,I),b.trimmedToken.end-b.trimmedToken.start===3&&(R=!1)}break;case 72:if(b.startsWith(b.position,"HETATM")){C||(C=s.TokenIndexBuilder.create(4096));var D=h.tokenizeAtom(C,b);if(E++,D)return D}break;case 77:if(b.startsWith(b.position,"MODEL")){E>0&&(S.length===0&&(A={start:m.length+3,end:m.length+4}),C&&S.push(new l.ModelData(A,C.tokens,E)));var N=b.position+6,I=b.moveToEndOfLine();b.trim(N,I),A={start:b.trimmedToken.start,end:b.trimmedToken.end},(E>0||!C)&&(C=s.TokenIndexBuilder.create(4096)),E=0}break}if(b.moveToNextLine(),!R)break}var L=m+".?0123";return E>0&&(S.length===0&&(A={start:m.length+3,end:m.length+4}),C&&S.push(new l.ModelData(A,C.tokens,E))),new l.MoleculeData(new l.Header(f),M,new l.ModelsData(S),L)},h.getDotRange=function(f){return{start:f-6,end:f-5}},h.getNumberRanges=function(f){for(var m=e.Utils.FastMap.create(),b=0;b<4;b++)m.set(b,{start:f-4+b,end:f-3+b});return m},h.getQuestionmarkRange=function(f){return{start:f-5,end:f-4}},h.parse=function(f,m){var b=h.tokenize(f,m);return b instanceof s.ParserError?s.ParserResult.error(b.message,b.line):s.ParserResult.success(b.toCifFile())},h}();l.Parser=v;function c(h,f){return v.parse(h,f)}l.toCifFile=c})(x=p.PDB||(p.PDB={}))})(d=s.Molecule||(s.Molecule={}))})(o=e.Formats||(e.Formats={}))})(r=i.Core||(i.Core={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){var x;(function(l){function _(w,C){var E=w.split(/\r?\n/g),S=E[0].trim();S.length||(S="SDF");var M=E[3],A=+M.substr(0,3),R=+M.substr(3,3);return{id:C||S,atomCount:A,bondCount:R,atoms:e.Utils.DataTable.ofDefinition(e.Structure.Tables.Atoms,A),positions:e.Utils.DataTable.ofDefinition(e.Structure.Tables.Positions,A),bonds:e.Utils.DataTable.ofDefinition(e.Structure.Tables.Bonds,R),lines:E,currentLine:4,error:void 0,stringPool:s.ShortStringPool.create()}}function v(w,C){var E=C.lines[C.currentLine],S=C.atoms,M=C.positions,A=s.ShortStringPool.get(C.stringPool,E.substr(31,3).trim());S.id[w]=w,S.elementSymbol[w]=A,S.name[w]=A,S.authName[w]=A,S.occupancy[w]=1,S.rowIndex[w]=C.currentLine,M.x[w]=e.Utils.FastNumberParsers.parseFloatSkipTrailingWhitespace(E,0,10),M.y[w]=e.Utils.FastNumberParsers.parseFloatSkipTrailingWhitespace(E,10,20),M.z[w]=e.Utils.FastNumberParsers.parseFloatSkipTrailingWhitespace(E,20,30)}function c(w){for(var C=0;C<w.atomCount;C++)v(C,w),w.currentLine++}function h(w,C){var E=C.lines[C.currentLine],S=C.bonds;switch(S.atomAIndex[w]=e.Utils.FastNumberParsers.parseIntSkipTrailingWhitespace(E,0,3)-1,S.atomBIndex[w]=e.Utils.FastNumberParsers.parseIntSkipTrailingWhitespace(E,3,6)-1,e.Utils.FastNumberParsers.parseIntSkipTrailingWhitespace(E,6,9)){case 1:S.type[w]=1;break;case 2:S.type[w]=2;break;case 3:S.type[w]=3;break;case 4:S.type[w]=4;break;default:S.type[w]=0;break}}function f(w){for(var C=0;C<w.bondCount;C++)h(C,w),w.currentLine++}function m(w){var C=e.Utils.DataTable.ofDefinition(e.Structure.Tables.Residues,1),E=e.Utils.DataTable.ofDefinition(e.Structure.Tables.Chains,1),S=e.Utils.DataTable.ofDefinition(e.Structure.Tables.Entities,1);C.isHet[0]=1,C.insCode[0]=null,C.name[0]=C.authName[0]="UNK",C.atomEndIndex[0]=E.atomEndIndex[0]=S.atomEndIndex[0]=w.atomCount,C.asymId[0]=C.authAsymId[0]=E.asymId[0]=E.authAsymId[0]="X",C.entityId[0]=E.entityId[0]=S.entityId[0]="1",E.residueEndIndex[0]=S.residueEndIndex[0]=0,S.chainEndIndex[0]=1,S.type[0]="non-polymer";var M=new e.Structure.PolyResidueIdentifier("X",0,null),A=[new e.Structure.SecondaryStructureElement(0,M,M)];return A[0].startResidueIndex=0,A[0].endResidueIndex=1,e.Structure.Molecule.Model.create({id:w.id,modelId:"1",data:{atoms:w.atoms,residues:C,chains:E,entities:S,bonds:{input:w.bonds},secondaryStructure:A,symmetryInfo:void 0,assemblyInfo:void 0},positions:w.positions,source:e.Structure.Molecule.Model.Source.File})}function b(w,C){try{var E=_(w,C);c(E),f(E);var S=m(E);if(E.error)return s.ParserResult.error(E.error,E.currentLine+1);var M=e.Structure.Molecule.create(C||E.id,[S]);return s.ParserResult.success(M)}catch(A){return s.ParserResult.error(""+A)}}l.parse=b})(x=p.SDF||(p.SDF={}))})(d=s.Molecule||(s.Molecule={}))})(o=e.Formats||(e.Formats={}))})(r=i.Core||(i.Core={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){function x(_,v){var c=this;return function(h,f){return e.computation(function(m){return H(c,void 0,void 0,function(){var b,w,C;return q(this,function(E){switch(E.label){case 0:return[4,m.updateProgress("Parsing...")];case 1:if(E.sent(),b=v(h,f),b.isError)throw b.toString();if(w=b.result,!w.dataBlocks.length)throw"The "+_+" data does not contain a data block.";return[4,m.updateProgress("Creating representation...")];case 2:return E.sent(),C=p.mmCIF.ofDataBlock(w.dataBlocks[0]),[2,s.ParserResult.success(C,w.dataBlocks.length>1?["The input data contains multiple data blocks, only the first one was parsed. To parse all data blocks, use the function 'mmCIF.ofDataBlock' separately for each block."]:void 0)]}})})})}}var l;(function(_){var v=this;_.mmCIF={name:"mmCIF",shortcuts:["mmcif","cif"],extensions:[".cif"],parse:x("CIF",s.CIF.Text.parse)},_.mmBCIF={name:"mmCIF (Binary)",shortcuts:["mmbcif","bcif","binarycif"],extensions:[".bcif"],isBinary:!0,parse:x("BinaryCIF",s.CIF.Binary.parse)},_.PDB={name:"PDB",shortcuts:["pdb","ent"],extensions:[".pdb",".ent"],parse:x("PDB",function(c,h){return p.PDB.toCifFile(h&&h.id||"PDB",c)})},_.SDF={name:"SDF",shortcuts:["sdf","mol"],extensions:[".sdf",".mol"],parse:function(c,h){return e.computation(function(f){return H(v,void 0,void 0,function(){var m;return q(this,function(b){switch(b.label){case 0:return[4,f.updateProgress("Parsing...")];case 1:if(b.sent(),m=p.SDF.parse(c,h&&h.id||void 0),m.isError)throw m.toString();return[2,s.ParserResult.success(m.result)]}})})})}},_.All=[_.mmCIF,_.mmBCIF,_.PDB,_.SDF]})(l=p.SupportedFormats||(p.SupportedFormats={}))})(d=s.Molecule||(s.Molecule={}))})(o=e.Formats||(e.Formats={}))})(r=i.Core||(i.Core={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){"use strict";function x(v,c){for(var h=v.length,f=0;f<h;f++)v[f]=c}var l=function(){function v(c,h){this.data=c,this.dimensions=h,this.len=this.dimensions[0]*this.dimensions[1]*this.dimensions[2],this.nX=this.dimensions[0],this.nY=this.dimensions[1]}return Object.defineProperty(v.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),v.prototype.getAt=function(c){return this.data[c]},v.prototype.setAt=function(c,h){this.data[c]=h},v.prototype.get=function(c,h,f){return this.data[this.nX*(f*this.nY+h)+c|0]},v.prototype.set=function(c,h,f,m){this.data[this.nX*(f*this.nY+h)+c|0]=m},v.prototype.fill=function(c){x(this.data,c)},v}();p.Field3DZYX=l;function _(v,c,h){var f=Math.PI/180*h[0],m=Math.PI/180*h[1],b=Math.PI/180*h[2],w=c[0],C=c[1],E=c[2],S=Math.cos(m),M=(Math.cos(f)-Math.cos(m)*Math.cos(b))/Math.sin(b),A=Math.sqrt(1-S*S-M*M),R=[w,0,0],D=[Math.cos(b)*C,Math.sin(b)*C,0],N=[S*E,M*E,A*E];return{number:v,size:c,angles:h,basis:{x:R,y:D,z:N}}}p.createSpacegroup=_})(d=s.Density||(s.Density={}))})(o=e.Formats||(e.Formats={}))})(r=i.Core||(i.Core={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){var x;(function(l){function _(c){return v.parse(c)}l.parse=_;var v;(function(c){function h(w,C,E){for(var S=[],M=0;M<E;M++)S[M]=w(C+M);return S}function f(w){var C=1024,E=new DataView(w,0,C),S=[],M=!1,A=E.getInt32(3*4,!1);if(A!==2&&(M=!0,A=E.getInt32(12,!0),A!==2))return s.ParserResult.error("Only CCP4 mode 2 is supported.");var R=function(ue){return E.getInt32(ue*4,M)},D=function(ue){return E.getFloat32(ue*4,M)},N={extent:h(R,0,3),mode:A,nxyzStart:h(R,4,3),grid:h(R,7,3),cellSize:h(D,10,3),cellAngles:h(D,13,3),crs2xyz:h(R,16,3),min:D(19),max:D(20),mean:D(21),spacegroupNumber:R(22),symBytes:R(23),skewFlag:R(24),skewMatrix:h(D,25,9),skewTranslation:h(D,34,3),origin2k:h(D,49,3)},I=w.byteLength-4*N.extent[0]*N.extent[1]*N.extent[2];if(I!==C+N.symBytes)if(I===C)S.push("File contains bogus symmetry record.");else{if(I<C)return s.ParserResult.error("File appears truncated and doesn't match header.");if(I>C&&I<1048576)I=C+N.symBytes,S.push("File is larger than expected and doesn't match header. Continuing file load, good luck!");else return s.ParserResult.error("File is MUCH larger than expected and doesn't match header.")}N.grid[0]===0&&N.extent[0]>0&&(N.grid[0]=N.extent[0]-1,S.push("Fixed X interval count.")),N.grid[1]===0&&N.extent[1]>0&&(N.grid[1]=N.extent[1]-1,S.push("Fixed Y interval count.")),N.grid[2]===0&&N.extent[2]>0&&(N.grid[2]=N.extent[2]-1,S.push("Fixed Z interval count.")),N.crs2xyz[0]===0&&N.crs2xyz[1]===0&&N.crs2xyz[2]===0&&(S.push("All crs2xyz records are zero. Setting crs2xyz to 1, 2, 3."),N.crs2xyz=[1,2,3]),N.cellSize[0]===0&&N.cellSize[1]===0&&N.cellSize[2]===0&&(S.push("Cell dimensions are all zero. Setting to 1.0, 1.0, 1.0. Map file will not align with other structures."),N.cellSize[0]=1,N.cellSize[1]=1,N.cellSize[2]=1);var L=[0,0,0];L[N.crs2xyz[0]-1]=0,L[N.crs2xyz[1]-1]=1,L[N.crs2xyz[2]-1]=2;var Y;N.origin2k[0]===0&&N.origin2k[1]===0&&N.origin2k[2]===0?Y=[N.nxyzStart[L[0]],N.nxyzStart[L[1]],N.nxyzStart[L[2]]]:Y=[N.origin2k[L[0]],N.origin2k[L[1]],N.origin2k[L[2]]];var J=[N.extent[L[0]],N.extent[L[1]],N.extent[L[2]]],ie=new Uint16Array(new Uint8Array([18,52]).buffer)[0]===13330,K=M===ie?m(new Float32Array(w,C+N.symBytes,J[0]*J[1]*J[2]),M,J,N.extent,L,N.mean):b(new DataView(w,C+N.symBytes),M,J,N.extent,L,N.mean),Q=new p.Field3DZYX(K.data,J),ne={spacegroup:p.createSpacegroup(N.spacegroupNumber,N.cellSize,N.cellAngles),box:{origin:[Y[0]/N.grid[0],Y[1]/N.grid[1],Y[2]/N.grid[2]],dimensions:[J[0]/N.grid[0],J[1]/N.grid[1],J[2]/N.grid[2]],sampleCount:J},data:Q,valuesInfo:{min:N.min,max:N.max,mean:N.mean,sigma:K.sigma}};return s.ParserResult.success(ne,S)}c.parse=f;function m(w,C,E,S,M,A){var R=new Float32Array(E[0]*E[1]*E[2]),D=[0,0,0],N,I,L,Y,J,ie,K,Q,ne=0,ue=.1,fe=0,ge=.1,ye=M[0],pe=M[1],de=M[2];for(N=S[0],I=S[1],L=S[2],K=E[0],Q=E[0]*E[1],ie=0;ie<L;ie++)for(D[2]=ie,J=0;J<I;J++)for(D[1]=J,Y=0;Y<N;Y++)D[0]=Y,ue=w[ne],ge=ue-A,fe+=ge*ge,R[D[ye]+D[pe]*K+D[de]*Q]=ue,ne+=1;return fe/=N*I*L,fe=Math.sqrt(fe),{data:R,sigma:fe}}function b(w,C,E,S,M,A){var R=new Float32Array(E[0]*E[1]*E[2]),D=[0,0,0],N,I,L,Y,J,ie,K,Q,ne=0,ue=.1,fe=0,ge=.1,ye=M[0],pe=M[1],de=M[2];for(N=S[0],I=S[1],L=S[2],K=E[0],Q=E[0]*E[1],ie=0;ie<L;ie++)for(D[2]=ie,J=0;J<I;J++)for(D[1]=J,Y=0;Y<N;Y++)D[0]=Y,ue=w.getFloat32(ne,C),ge=ue-A,fe+=ge*ge,R[D[ye]+D[pe]*K+D[de]*Q]=ue,ne+=4;return fe/=N*I*L,fe=Math.sqrt(fe),{data:R,sigma:fe}}})(v||(v={}))})(x=p.CCP4||(p.CCP4={}))})(d=s.Density||(s.Density={}))})(o=e.Formats||(e.Formats={}))})(r=i.Core||(i.Core={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){var x;(function(l){function _(c){return c.getCategory("_density_info")?v.parseLegacy(c):c.getCategory("_volume_data_3d_info")?v.parse(c):s.ParserResult.error("Invalid data format.")}l.parse=_;var v;(function(c){function h(b){var w=b.getCategory("_volume_data_3d_info");if(!w)return s.ParserResult.error("_volume_data_3d_info category is missing.");if(!b.getCategory("_volume_data_3d"))return s.ParserResult.error("_volume_data_3d category is missing.");function C(L){for(var Y=[0,0,0],J=0;J<3;J++)Y[J]=w.getColumn(L+"["+J+"]").getFloat(0);return Y}function E(L){return w.getColumn(L).getFloat(0)}var S={name:w.getColumn("name").getString(0),axisOrder:C("axis_order"),origin:C("origin"),dimensions:C("dimensions"),sampleCount:C("sample_count"),spacegroupNumber:E("spacegroup_number")|0,cellSize:C("spacegroup_cell_size"),cellAngles:C("spacegroup_cell_angles"),mean:E("mean_sampled"),sigma:E("sigma_sampled")},M=[0,0,0];M[S.axisOrder[0]]=0,M[S.axisOrder[1]]=1,M[S.axisOrder[2]]=2;function A(L){return[L[M[0]],L[M[1]],L[M[2]]]}var R=A(S.sampleCount),D=m(b.getCategory("_volume_data_3d").getColumn("values"),R,S.sampleCount,M),N=new p.Field3DZYX(D.data,R),I={name:S.name,spacegroup:p.createSpacegroup(S.spacegroupNumber,S.cellSize,S.cellAngles),box:{origin:A(S.origin),dimensions:A(S.dimensions),sampleCount:R},data:N,valuesInfo:{min:D.min,max:D.max,mean:S.mean,sigma:S.sigma}};return s.ParserResult.success(I)}c.parse=h;function f(b){var w=b.getCategory("_density_info");if(!w)return s.ParserResult.error("_density_info category is missing.");if(!b.getCategory("_density_data"))return s.ParserResult.error("_density_data category is missing.");function C(L){for(var Y=[],J=0;J<3;J++)Y[J]=w.getColumn(L+"["+J+"]").getFloat(0);return Y}function E(L){return w.getColumn(L).getFloat(0)}var S={name:w.getColumn("name").getString(0),grid:C("grid"),axisOrder:C("axis_order"),extent:C("extent"),origin:C("origin"),cellSize:C("cell_size"),cellAngles:C("cell_angles"),mean:E("mean"),sigma:E("sigma"),spacegroupNumber:E("spacegroup_number")|0},M=[0,0,0];M[S.axisOrder[0]]=0,M[S.axisOrder[1]]=1,M[S.axisOrder[2]]=2;var A=[S.origin[M[0]],S.origin[M[1]],S.origin[M[2]]],R=[S.extent[M[0]],S.extent[M[1]],S.extent[M[2]]],D=m(b.getCategory("_density_data").getColumn("values"),R,S.extent,M),N=new p.Field3DZYX(D.data,R),I={name:S.name,spacegroup:p.createSpacegroup(S.spacegroupNumber,S.cellSize,S.cellAngles),box:{origin:[A[0]/S.grid[0],A[1]/S.grid[1],A[2]/S.grid[2]],dimensions:[R[0]/S.grid[0],R[1]/S.grid[1],R[2]/S.grid[2]],sampleCount:R},data:N,valuesInfo:{min:D.min,max:D.max,mean:S.mean,sigma:S.sigma}};return s.ParserResult.success(I)}c.parseLegacy=f;function m(b,w,C,E){for(var S=new Float32Array(w[0]*w[1]*w[2]),M=[0,0,0],A=E[0],R=E[1],D=E[2],N=C[0],I=C[1],L=C[2],Y=w[0],J=w[0]*w[1],ie=0,K=b.getFloat(0),Q=K,ne=0;ne<L;ne++){M[2]=ne;for(var ue=0;ue<I;ue++){M[1]=ue;for(var fe=0;fe<N;fe++){M[0]=fe;var ge=b.getFloat(ie);ie+=1,S[M[A]+M[R]*Y+M[D]*J]=ge,ge<K?K=ge:ge>Q&&(Q=ge)}}}return{data:S,min:K,max:Q}}})(v||(v={}))})(x=p.CIF||(p.CIF={}))})(d=s.Density||(s.Density={}))})(o=e.Formats||(e.Formats={}))})(r=i.Core||(i.Core={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){function x(_,v,c){var h=this;return e.computation(function(f){return H(h,void 0,void 0,function(){return q(this,function(m){switch(m.label){case 0:return[4,f.updateProgress("Parsing "+v+"...")];case 1:return m.sent(),[2,c(_)]}})})})}var l;(function(_){_.CCP4={name:"CCP4",shortcuts:["ccp4","map"],extensions:[".ccp4",".map"],isBinary:!0,parse:function(v){return x(v,"CCP4",function(c){return p.CCP4.parse(c)})}},_.All=[_.CCP4]})(l=p.SupportedFormats||(p.SupportedFormats={}))})(d=s.Density||(s.Density={}))})(o=e.Formats||(e.Formats={}))})(r=i.Core||(i.Core={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){function x(){return x.zero()}p.Matrix4=x,function(v){function c(){var K=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];return K[0]=0,K}v.zero=c;function h(){var K=c();return K[0]=1,K[1]=0,K[2]=0,K[3]=0,K[4]=0,K[5]=1,K[6]=0,K[7]=0,K[8]=0,K[9]=0,K[10]=1,K[11]=0,K[12]=0,K[13]=0,K[14]=0,K[15]=1,K}v.identity=h;function f(K){return K[0]=1,K[1]=0,K[2]=0,K[3]=0,K[4]=0,K[5]=1,K[6]=0,K[7]=0,K[8]=0,K[9]=0,K[10]=1,K[11]=0,K[12]=0,K[13]=0,K[14]=0,K[15]=1,K}v.fromIdentity=f;function m(K){var Q=c(),ne,ue,fe;for(ne=0;ne<4;ne++)for(fe=K[ne],ue=0;ue<4;ue++)Q[4*ue+ne]=fe[ue];return Q}v.ofRows=m;function b(K,Q,ne){for(var ue=0;ue<16;ue++)if(Math.abs(K[ue]-Q[ue])>ne)return!1;return!0}v.areEqual=b;function w(K,Q,ne,ue){K[4*ne+Q]=ue}v.setValue=w;function C(K,Q){return K[0]=Q[0],K[1]=Q[1],K[2]=Q[2],K[3]=Q[3],K[4]=Q[4],K[5]=Q[5],K[6]=Q[6],K[7]=Q[7],K[8]=Q[8],K[9]=Q[9],K[10]=Q[10],K[11]=Q[11],K[12]=Q[12],K[13]=Q[13],K[14]=Q[14],K[15]=Q[15],K}v.copy=C;function E(K){return v.copy(v.zero(),K)}v.clone=E;function S(K,Q){var ne=Q[0],ue=Q[1],fe=Q[2],ge=Q[3],ye=Q[4],pe=Q[5],de=Q[6],he=Q[7],_e=Q[8],ve=Q[9],Z=Q[10],be=Q[11],Ee=Q[12],De=Q[13],Fe=Q[14],Ue=Q[15],Qe=ne*pe-ue*ye,Ke=ne*de-fe*ye,Te=ne*he-ge*ye,Ie=ue*de-fe*pe,ke=ue*he-ge*pe,nt=fe*he-ge*de,dt=_e*De-ve*Ee,yt=_e*Fe-Z*Ee,gt=_e*Ue-be*Ee,xt=ve*Fe-Z*De,tt=ve*Ue-be*De,pt=Z*Ue-be*Fe,At=Qe*pt-Ke*tt+Te*xt+Ie*gt-ke*yt+nt*dt;return At?(At=1/At,K[0]=(pe*pt-de*tt+he*xt)*At,K[1]=(fe*tt-ue*pt-ge*xt)*At,K[2]=(De*nt-Fe*ke+Ue*Ie)*At,K[3]=(Z*ke-ve*nt-be*Ie)*At,K[4]=(de*gt-ye*pt-he*yt)*At,K[5]=(ne*pt-fe*gt+ge*yt)*At,K[6]=(Fe*Te-Ee*nt-Ue*Ke)*At,K[7]=(_e*nt-Z*Te+be*Ke)*At,K[8]=(ye*tt-pe*gt+he*dt)*At,K[9]=(ue*gt-ne*tt-ge*dt)*At,K[10]=(Ee*ke-De*Te+Ue*Qe)*At,K[11]=(ve*Te-_e*ke-be*Qe)*At,K[12]=(pe*yt-ye*xt-de*dt)*At,K[13]=(ne*xt-ue*yt+fe*dt)*At,K[14]=(De*Ke-Ee*Ie-Fe*Qe)*At,K[15]=(_e*Ie-ve*Ke+Z*Qe)*At,K):null}v.invert=S;function M(K,Q,ne){var ue=Q[0],fe=Q[1],ge=Q[2],ye=Q[3],pe=Q[4],de=Q[5],he=Q[6],_e=Q[7],ve=Q[8],Z=Q[9],be=Q[10],Ee=Q[11],De=Q[12],Fe=Q[13],Ue=Q[14],Qe=Q[15],Ke=ne[0],Te=ne[1],Ie=ne[2],ke=ne[3];return K[0]=Ke*ue+Te*pe+Ie*ve+ke*De,K[1]=Ke*fe+Te*de+Ie*Z+ke*Fe,K[2]=Ke*ge+Te*he+Ie*be+ke*Ue,K[3]=Ke*ye+Te*_e+Ie*Ee+ke*Qe,Ke=ne[4],Te=ne[5],Ie=ne[6],ke=ne[7],K[4]=Ke*ue+Te*pe+Ie*ve+ke*De,K[5]=Ke*fe+Te*de+Ie*Z+ke*Fe,K[6]=Ke*ge+Te*he+Ie*be+ke*Ue,K[7]=Ke*ye+Te*_e+Ie*Ee+ke*Qe,Ke=ne[8],Te=ne[9],Ie=ne[10],ke=ne[11],K[8]=Ke*ue+Te*pe+Ie*ve+ke*De,K[9]=Ke*fe+Te*de+Ie*Z+ke*Fe,K[10]=Ke*ge+Te*he+Ie*be+ke*Ue,K[11]=Ke*ye+Te*_e+Ie*Ee+ke*Qe,Ke=ne[12],Te=ne[13],Ie=ne[14],ke=ne[15],K[12]=Ke*ue+Te*pe+Ie*ve+ke*De,K[13]=Ke*fe+Te*de+Ie*Z+ke*Fe,K[14]=Ke*ge+Te*he+Ie*be+ke*Ue,K[15]=Ke*ye+Te*_e+Ie*Ee+ke*Qe,K}v.mul=M;function A(K,Q,ne,ue){return M(K,M(K,Q,ne),ue)}v.mul3=A;function R(K,Q,ne){var ue=ne[0],fe=ne[1],ge=ne[2],ye,pe,de,he,_e,ve,Z,be,Ee,De,Fe,Ue;return Q===K?(K[12]=Q[0]*ue+Q[4]*fe+Q[8]*ge+Q[12],K[13]=Q[1]*ue+Q[5]*fe+Q[9]*ge+Q[13],K[14]=Q[2]*ue+Q[6]*fe+Q[10]*ge+Q[14],K[15]=Q[3]*ue+Q[7]*fe+Q[11]*ge+Q[15]):(ye=Q[0],pe=Q[1],de=Q[2],he=Q[3],_e=Q[4],ve=Q[5],Z=Q[6],be=Q[7],Ee=Q[8],De=Q[9],Fe=Q[10],Ue=Q[11],K[0]=ye,K[1]=pe,K[2]=de,K[3]=he,K[4]=_e,K[5]=ve,K[6]=Z,K[7]=be,K[8]=Ee,K[9]=De,K[10]=Fe,K[11]=Ue,K[12]=ye*ue+_e*fe+Ee*ge+Q[12],K[13]=pe*ue+ve*fe+De*ge+Q[13],K[14]=de*ue+Z*fe+Fe*ge+Q[14],K[15]=he*ue+be*fe+Ue*ge+Q[15]),K}v.translate=R;function D(K,Q){return K[0]=1,K[1]=0,K[2]=0,K[3]=0,K[4]=0,K[5]=1,K[6]=0,K[7]=0,K[8]=0,K[9]=0,K[10]=1,K[11]=0,K[12]=Q[0],K[13]=Q[1],K[14]=Q[2],K[15]=1,K}v.fromTranslation=D;function N(K,Q,ne,ue){var fe=ue[0],ge=ue[1],ye=ue[2],pe=Math.sqrt(fe*fe+ge*ge+ye*ye),de,he,_e,ve,Z,be,Ee,De,Fe,Ue,Qe,Ke,Te,Ie,ke,nt,dt,yt,gt,xt,tt,pt,At,Tt;return Math.abs(pe)<1e-6?null:(pe=1/pe,fe*=pe,ge*=pe,ye*=pe,de=Math.sin(ne),he=Math.cos(ne),_e=1-he,ve=Q[0],Z=Q[1],be=Q[2],Ee=Q[3],De=Q[4],Fe=Q[5],Ue=Q[6],Qe=Q[7],Ke=Q[8],Te=Q[9],Ie=Q[10],ke=Q[11],nt=fe*fe*_e+he,dt=ge*fe*_e+ye*de,yt=ye*fe*_e-ge*de,gt=fe*ge*_e-ye*de,xt=ge*ge*_e+he,tt=ye*ge*_e+fe*de,pt=fe*ye*_e+ge*de,At=ge*ye*_e-fe*de,Tt=ye*ye*_e+he,K[0]=ve*nt+De*dt+Ke*yt,K[1]=Z*nt+Fe*dt+Te*yt,K[2]=be*nt+Ue*dt+Ie*yt,K[3]=Ee*nt+Qe*dt+ke*yt,K[4]=ve*gt+De*xt+Ke*tt,K[5]=Z*gt+Fe*xt+Te*tt,K[6]=be*gt+Ue*xt+Ie*tt,K[7]=Ee*gt+Qe*xt+ke*tt,K[8]=ve*pt+De*At+Ke*Tt,K[9]=Z*pt+Fe*At+Te*Tt,K[10]=be*pt+Ue*At+Ie*Tt,K[11]=Ee*pt+Qe*At+ke*Tt,Q!==K&&(K[12]=Q[12],K[13]=Q[13],K[14]=Q[14],K[15]=Q[15]),K)}v.rotate=N;function I(K,Q,ne){var ue=ne[0],fe=ne[1],ge=ne[2],ye=Math.sqrt(ue*ue+fe*fe+ge*ge),pe,de,he;return Math.abs(ye)<1e-6?f(K):(ye=1/ye,ue*=ye,fe*=ye,ge*=ye,pe=Math.sin(Q),de=Math.cos(Q),he=1-de,K[0]=ue*ue*he+de,K[1]=fe*ue*he+ge*pe,K[2]=ge*ue*he-fe*pe,K[3]=0,K[4]=ue*fe*he-ge*pe,K[5]=fe*fe*he+de,K[6]=ge*fe*he+ue*pe,K[7]=0,K[8]=ue*ge*he+fe*pe,K[9]=fe*ge*he-ue*pe,K[10]=ge*ge*he+de,K[11]=0,K[12]=0,K[13]=0,K[14]=0,K[15]=1,K)}v.fromRotation=I;function L(K,Q,ne){var ue=ne[0],fe=ne[1],ge=ne[2];return K[0]=Q[0]*ue,K[1]=Q[1]*ue,K[2]=Q[2]*ue,K[3]=Q[3]*ue,K[4]=Q[4]*fe,K[5]=Q[5]*fe,K[6]=Q[6]*fe,K[7]=Q[7]*fe,K[8]=Q[8]*ge,K[9]=Q[9]*ge,K[10]=Q[10]*ge,K[11]=Q[11]*ge,K[12]=Q[12],K[13]=Q[13],K[14]=Q[14],K[15]=Q[15],K}v.scale=L;function Y(K,Q){return K[0]=Q[0],K[1]=0,K[2]=0,K[3]=0,K[4]=0,K[5]=Q[1],K[6]=0,K[7]=0,K[8]=0,K[9]=0,K[10]=Q[2],K[11]=0,K[12]=0,K[13]=0,K[14]=0,K[15]=1,K}v.fromScaling=Y;function J(K){for(var Q="",ne=0;ne<4;ne++){for(var ue=0;ue<4;ue++)Q+=K[4*ue+ne].toString(),ue<3&&(Q+=" ");ne<3&&(Q+=`
`)}return Q}v.makeTable=J;function ie(K){var Q=K[0],ne=K[1],ue=K[2],fe=K[3],ge=K[4],ye=K[5],pe=K[6],de=K[7],he=K[8],_e=K[9],ve=K[10],Z=K[11],be=K[12],Ee=K[13],De=K[14],Fe=K[15],Ue=Q*ye-ne*ge,Qe=Q*pe-ue*ge,Ke=Q*de-fe*ge,Te=ne*pe-ue*ye,Ie=ne*de-fe*ye,ke=ue*de-fe*pe,nt=he*Ee-_e*be,dt=he*De-ve*be,yt=he*Fe-Z*be,gt=_e*De-ve*Ee,xt=_e*Fe-Z*Ee,tt=ve*Fe-Z*De;return Ue*tt-Qe*xt+Ke*gt+Te*yt-Ie*dt+ke*nt}v.determinant=ie}(x=p.Matrix4||(p.Matrix4={}));function l(v,c,h){return l.fromValues(v||0,c||0,h||0)}p.Vector3=l,function(v){function c(){var ye=[.1,0,0];return ye[0]=0,ye}v.zero=c;function h(ye){var pe=c();return pe[0]=ye[0],pe[1]=ye[1],pe[2]=ye[2],pe}v.clone=h;function f(ye){return b(ye.x,ye.y,ye.z)}v.fromObj=f;function m(ye){return{x:ye[0],y:ye[1],z:ye[2]}}v.toObj=m;function b(ye,pe,de){var he=c();return he[0]=ye,he[1]=pe,he[2]=de,he}v.fromValues=b;function w(ye,pe,de,he){return ye[0]=pe,ye[1]=de,ye[2]=he,ye}v.set=w;function C(ye,pe){return ye[0]=pe[0],ye[1]=pe[1],ye[2]=pe[2],ye}v.copy=C;function E(ye,pe,de){return ye[0]=pe[0]+de[0],ye[1]=pe[1]+de[1],ye[2]=pe[2]+de[2],ye}v.add=E;function S(ye,pe,de){return ye[0]=pe[0]-de[0],ye[1]=pe[1]-de[1],ye[2]=pe[2]-de[2],ye}v.sub=S;function M(ye,pe,de){return ye[0]=pe[0]*de,ye[1]=pe[1]*de,ye[2]=pe[2]*de,ye}v.scale=M;function A(ye,pe,de,he){return ye[0]=pe[0]+de[0]*he,ye[1]=pe[1]+de[1]*he,ye[2]=pe[2]+de[2]*he,ye}v.scaleAndAdd=A;function R(ye,pe){var de=pe[0]-ye[0],he=pe[1]-ye[1],_e=pe[2]-ye[2];return Math.sqrt(de*de+he*he+_e*_e)}v.distance=R;function D(ye,pe){var de=pe[0]-ye[0],he=pe[1]-ye[1],_e=pe[2]-ye[2];return de*de+he*he+_e*_e}v.squaredDistance=D;function N(ye){var pe=ye[0],de=ye[1],he=ye[2];return Math.sqrt(pe*pe+de*de+he*he)}v.magnitude=N;function I(ye){var pe=ye[0],de=ye[1],he=ye[2];return pe*pe+de*de+he*he}v.squaredMagnitude=I;function L(ye,pe){var de=pe[0],he=pe[1],_e=pe[2],ve=de*de+he*he+_e*_e;return ve>0&&(ve=1/Math.sqrt(ve),ye[0]=pe[0]*ve,ye[1]=pe[1]*ve,ye[2]=pe[2]*ve),ye}v.normalize=L;function Y(ye,pe){return ye[0]*pe[0]+ye[1]*pe[1]+ye[2]*pe[2]}v.dot=Y;function J(ye,pe,de){var he=pe[0],_e=pe[1],ve=pe[2],Z=de[0],be=de[1],Ee=de[2];return ye[0]=_e*Ee-ve*be,ye[1]=ve*Z-he*Ee,ye[2]=he*be-_e*Z,ye}v.cross=J;function ie(ye,pe,de,he){var _e=pe[0],ve=pe[1],Z=pe[2];return ye[0]=_e+he*(de[0]-_e),ye[1]=ve+he*(de[1]-ve),ye[2]=Z+he*(de[2]-Z),ye}v.lerp=ie;function K(ye,pe,de){var he=pe[0],_e=pe[1],ve=pe[2],Z=de[3]*he+de[7]*_e+de[11]*ve+de[15];return Z=Z||1,ye[0]=(de[0]*he+de[4]*_e+de[8]*ve+de[12])/Z,ye[1]=(de[1]*he+de[5]*_e+de[9]*ve+de[13])/Z,ye[2]=(de[2]*he+de[6]*_e+de[10]*ve+de[14])/Z,ye}v.transformMat4=K;var Q=c(),ne=c();function ue(ye,pe){C(Q,ye),C(ne,pe),L(Q,Q),L(ne,ne);var de=Y(Q,ne);return de>1?0:de<-1?Math.PI:Math.acos(de)}v.angle=ue;var fe=c();function ge(ye,pe,de){var he=ue(pe,de);if(Math.abs(he)<1e-4)return x.fromIdentity(ye);var _e=J(fe,pe,de),ve=I(_e);return ve<1e-4&&(Math.abs(Q[0]-1)<1e-6?w(_e,0,1,0):w(_e,1,0,0)),x.fromRotation(ye,he,_e)}v.makeRotation=ge}(l=p.Vector3||(p.Vector3={}));function _(v,c,h,f){return _.fromValues(v||0,c||0,h||0,f||0)}p.Vector4=_,function(v){function c(){var M=[.1,0,0,0];return M[0]=0,M}v.zero=c;function h(M){var A=c();return A[0]=M[0],A[1]=M[1],A[2]=M[2],A[3]=M[3],A}v.clone=h;function f(M,A,R,D){var N=c();return N[0]=M,N[1]=A,N[2]=R,N[3]=D,N}v.fromValues=f;function m(M,A,R,D,N){return M[0]=A,M[1]=R,M[2]=D,M[3]=N,M}v.set=m;function b(M,A){var R=A[0]-M[0],D=A[1]-M[1],N=A[2]-M[2],I=A[3]-M[3];return Math.sqrt(R*R+D*D+N*N+I*I)}v.distance=b;function w(M,A){var R=A[0]-M[0],D=A[1]-M[1],N=A[2]-M[2],I=A[3]-M[3];return R*R+D*D+N*N+I*I}v.squaredDistance=w;function C(M){var A=M[0],R=M[1],D=M[2],N=M[3];return Math.sqrt(A*A+R*R+D*D+N*N)}v.norm=C;function E(M){var A=M[0],R=M[1],D=M[2],N=M[3];return A*A+R*R+D*D+N*N}v.squaredNorm=E;function S(M,A,R){var D=A[0],N=A[1],I=A[2],L=A[3];return M[0]=R[0]*D+R[4]*N+R[8]*I+R[12]*L,M[1]=R[1]*D+R[5]*N+R[9]*I+R[13]*L,M[2]=R[2]*D+R[6]*N+R[10]*I+R[14]*L,M[3]=R[3]*D+R[7]*N+R[11]*I+R[15]*L,M}v.transform=S}(_=p.Vector4||(p.Vector4={}))})(d=s.LinearAlgebra||(s.LinearAlgebra={}))})(o=e.Geometry||(e.Geometry={}))})(r=i.Core||(i.Core={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";var d;(function(p){var x=s.LinearAlgebra.Vector3;function l(C){if(!C.normals){for(var E=new Float32Array(C.vertices.length),S=C.vertices,M=C.triangleIndices,A=x.zero(),R=x.zero(),D=x.zero(),N=x.zero(),I=x.zero(),L=x.zero(),Y=0;Y<M.length;Y+=3){var J=3*M[Y],ie=3*M[Y+1],K=3*M[Y+2];x.set(A,S[J],S[J+1],S[J+2]),x.set(R,S[ie],S[ie+1],S[ie+2]),x.set(D,S[K],S[K+1],S[K+2]),x.sub(N,D,R),x.sub(I,R,A),x.cross(L,N,I),E[J]+=L[0],E[J+1]+=L[1],E[J+2]+=L[2],E[ie]+=L[0],E[ie+1]+=L[1],E[ie+2]+=L[2],E[K]+=L[0],E[K+1]+=L[1],E[K+2]+=L[2]}for(var Y=0;Y<E.length;Y+=3){var Q=E[Y],ne=E[Y+1],ue=E[Y+2],fe=1/Math.sqrt(Q*Q+ne*ne+ue*ue);E[Y]*=fe,E[Y+1]*=fe,E[Y+2]*=fe}C.normals=E}}p.computeNormalsImmediate=l;function _(C){var E=this;return e.computation(function(S){return H(E,void 0,void 0,function(){return q(this,function(M){switch(M.label){case 0:return C.normals?[2,C]:[4,S.updateProgress("Computing normals...")];case 1:return M.sent(),l(C),[2,C]}})})})}p.computeNormals=_;function v(C,E,S,M){S[3*M]+=C[3*E],S[3*M+1]+=C[3*E+1],S[3*M+2]+=C[3*E+2]}function c(C,E,S,M){for(var A=C.triangleIndices.length,R=C.vertices,D=C.triangleIndices,N=0;N<A;N+=3){var I=D[N],L=D[N+1],Y=D[N+2];v(R,L,S,I),v(R,Y,S,I),v(R,I,S,L),v(R,Y,S,L),v(R,I,S,Y),v(R,L,S,Y)}for(var J=2*M,N=0,ie=C.vertexCount;N<ie;N++){var K=E[N]+J;S[3*N]=(S[3*N]+J*R[3*N])/K,S[3*N+1]=(S[3*N+1]+J*R[3*N+1])/K,S[3*N+2]=(S[3*N+2]+J*R[3*N+2])/K}}function h(C,E,S,M){return H(this,void 0,void 0,function(){var A,R,D,L,N,I,L,Y,J,ie,K;return q(this,function(Q){switch(Q.label){case 0:return[4,C.updateProgress("Smoothing surface...",!0)];case 1:for(Q.sent(),A=new Int32Array(E.vertexCount),R=E.triangleIndices.length,D=E.triangleIndices,L=0;L<R;L++)A[D[L]]+=2;return N=new Float32Array(E.vertices.length),I=e.Utils.PerformanceMonitor.currentTime(),[4,C.updateProgress("Smoothing surface...",!0)];case 2:Q.sent(),L=0,Q.label=3;case 3:if(!(L<S))return[3,6];if(L>0)for(Y=0,J=N.length;Y<J;Y++)N[Y]=0;return E.normals=void 0,c(E,A,N,M),ie=E.vertices,E.vertices=N,N=ie,K=e.Utils.PerformanceMonitor.currentTime(),K-I>e.Computation.UpdateProgressDelta?(I=K,[4,C.updateProgress("Smoothing surface...",!0,L+1,S)]):[3,5];case 4:Q.sent(),Q.label=5;case 5:return L++,[3,3];case 6:return[2,E]}})})}function f(C,E,S){var M=this;return E===void 0&&(E=1),S===void 0&&(S=1),E<1&&(E=0),E===0?e.Computation.resolve(C):e.computation(function(A){return H(M,void 0,void 0,function(){return q(this,function(R){switch(R.label){case 0:return[4,h(A,C,E,1.1*S/1.1)];case 1:return[2,R.sent()]}})})})}p.laplacianSmooth=f;function m(C){var E=this;return e.computation(function(S){return H(E,void 0,void 0,function(){var M,A,R,D,I,L,N,I,L,Y,J,ie;return q(this,function(K){switch(K.label){case 0:return C.boundingSphere?[2,C]:[4,S.updateProgress("Computing bounding sphere...")];case 1:for(K.sent(),M=C.vertices,A=0,R=0,D=0,I=0,L=C.vertices.length;I<L;I+=3)A+=M[I],R+=M[I+1],D+=M[I+2];for(A/=C.vertexCount,R/=C.vertexCount,D/=C.vertexCount,N=0,I=0,L=M.length;I<L;I+=3)Y=A-M[I],J=R-M[I+1],ie=D-M[I+2],N=Math.max(N,Y*Y+J*J+ie*ie);return C.boundingSphere={center:s.LinearAlgebra.Vector3.fromValues(A,R,D),radius:Math.sqrt(N)},[2,C]}})})})}p.computeBoundingSphere=m;function b(C,E){for(var S=s.LinearAlgebra.Vector3.zero(),M=s.LinearAlgebra.Vector3.transformMat4,A=C.vertices,R=0,D=C.vertices.length;R<D;R+=3)S[0]=A[R],S[1]=A[R+1],S[2]=A[R+2],M(S,S,E),A[R]=S[0],A[R+1]=S[1],A[R+2]=S[2];C.normals=void 0,C.boundingSphere=void 0}p.transformImmediate=b;function w(C,E){var S=this;return e.computation(function(M){return H(S,void 0,void 0,function(){return q(this,function(A){return M.updateProgress("Updating surface..."),b(C,E),[2,C]})})})}p.transform=w})(d=s.Surface||(s.Surface={}))})(o=e.Geometry||(e.Geometry={}))})(r=i.Core||(i.Core={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){var x;(function(c){function h(){return{min:[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],max:[-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE]}}c.createInfinite=h})(x=p.Box3D||(p.Box3D={}));var l;(function(c){function h(C,E,S){var M=C.buffer;M.squaredDistances[M.count]=E,M.elements[M.count++]=M.sourceElements[S]}c.add=h;function f(C){C.count=0}function m(C){return{sourceElements:C,elements:[],count:0,squaredDistances:[]}}function b(C,E,S,M,A){C.pivot[0]=E,C.pivot[1]=S,C.pivot[2]=M,C.radius=A,C.radiusSq=A*A,f(C.buffer)}c.update=b;function w(C,E){return{structure:C,buffer:m(E),pivot:[.1,.1,.1],radius:1.1,radiusSq:1.2100000000000002}}c.create=w})(l=p.QueryContext||(p.QueryContext={}));var _;(function(c){function h(b,w,C,E){b.data[b._count++]=w,b.data[b._count++]=C,b.data[b._count++]=E,b.boundsMin[0]=Math.min(w,b.boundsMin[0]),b.boundsMin[1]=Math.min(C,b.boundsMin[1]),b.boundsMin[2]=Math.min(E,b.boundsMin[2]),b.boundsMax[0]=Math.max(w,b.boundsMax[0]),b.boundsMax[1]=Math.max(C,b.boundsMax[1]),b.boundsMax[2]=Math.max(E,b.boundsMax[2])}c.add=h;function f(b){var w=new Float32Array(b*3|0),C=x.createInfinite(),E=C.min,S=C.max;return{_count:0,data:w,bounds:C,boundsMin:E,boundsMax:S}}c.create=f;function m(b){var w=c.add;return function(C,E,S){w(b,C,E,S)}}c.createAdder=m})(_||(_={}));function v(c,h){for(var f=_.create(c.length),m=new Int32Array(c.length),b=_.createAdder(f),w=0;w<c.length;w++)m[w]=w,h(c[w],b);return{elements:c,positions:f.data,bounds:f.bounds,indices:m}}p.createInputData=v})(d=s.Query3D||(s.Query3D={}))})(o=e.Geometry||(e.Geometry={}))})(r=i.Core||(i.Core={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){var x;(function(v){function c(b,w){var C=w.pivot,E=w.structure,S=E.indices,M=E.positions,A=w.radiusSq,R,D,N,I,L,Y;for(Y=b.startIndex;Y<b.endIndex;Y++)I=3*S[Y],R=C[0]-M[I],D=C[1]-M[I+1],N=C[2]-M[I+2],L=R*R+D*D+N*N,L<=A&&p.QueryContext.add(w,L,S[Y])}function h(b,w,C){var E=w.pivot[C],S=E<b.splitValue;(S?E+w.radius>b.splitValue:E-w.radius<b.splitValue)?(f(b.left,w,(C+1)%3),f(b.right,w,(C+1)%3)):f(S?b.left:b.right,w,(C+1)%3)}function f(b,w,C){b.startIndex!==b.endIndex&&(isNaN(b.splitValue)?c(b,w):h(b,w,C))}v.nearest=f;function m(b,w,C,E,S){return{splitValue:b,startIndex:w,endIndex:C,left:E,right:S}}v.create=m})(x||(x={}));var l;(function(v){function c(f,m,b,w){var C=b-m+1;if(C<=0)return f.emptyNode;if(C<=f.leafSize)return x.create(NaN,m,b+1,f.emptyNode,f.emptyNode);for(var E=f.bounds.min[w],S=f.bounds.max[w],M=.5*(E+S),A=0,R=m,D=b,N,I,L;R<D;){for(N=f.indices[D],f.indices[D]=f.indices[R],f.indices[R]=N;R<=b&&f.positions[3*f.indices[R]+w]<=M;)R++;for(;D>=m&&f.positions[3*f.indices[D]+w]>M;)D--}return A=R-1,f.bounds.max[w]=M,I=c(f,m,A,(w+1)%3),f.bounds.max[w]=S,f.bounds.min[w]=M,L=c(f,A+1,b,(w+1)%3),f.bounds.min[w]=E,x.create(M,m,b+1,I,L)}function h(f,m){var b=f.elements,w=f.positions,C=f.bounds,E=f.indices,S={bounds:C,positions:w,leafSize:m,indices:E,emptyNode:x.create(NaN,-1,-1,void 0,void 0)},M=c(S,0,E.length-1,0);return{root:M,indices:E,positions:w}}v.build=h})(l||(l={}));function _(v,c){c===void 0&&(c=32);var h=l.build(v,c);return function(){var f=p.QueryContext.create(h,v.elements);return function(m,b,w,C){return p.QueryContext.update(f,m,b,w,C),x.nearest(h.root,f,0),f.buffer}}}p.createSubdivisionTree=_})(d=s.Query3D||(s.Query3D={}))})(o=e.Geometry||(e.Geometry={}))})(r=i.Core||(i.Core={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){function x(c){for(var h=c.structure,f=h.min,m=f[0],b=f[1],w=f[2],C=h.size,E=C[0],S=C[1],M=C[2],A=h.bucketOffset,R=h.bucketCounts,D=h.bucketArray,N=h.grid,I=h.positions,L=c.radius,Y=c.radiusSq,J=c.pivot,ie=J[0],K=J[1],Q=J[2],ne=Math.max(0,ie-L-m>>3),ue=Math.max(0,K-L-b>>3),fe=Math.max(0,Q-L-w>>3),ge=Math.min(E,ie+L-m>>3),ye=Math.min(S,K+L-b>>3),pe=Math.min(M,Q+L-w>>3),de=ne;de<=ge;de++)for(var he=ue;he<=ye;he++)for(var _e=fe;_e<=pe;_e++){var ve=(de*S+he)*M+_e,Z=N[ve];if(Z>0)for(var be=Z-1,Ee=A[be],De=R[be],Fe=Ee+De,Ue=Ee;Ue<Fe;Ue++){var Qe=D[Ue],Ke=I[3*Qe+0]-ie,Te=I[3*Qe+1]-K,Ie=I[3*Qe+2]-Q,ke=Ke*Ke+Te*Te+Ie*Ie;ke<=Y&&p.QueryContext.add(c,ke,Qe)}}}function l(c){for(var h=c.bounds,f=c.size,m=f[0],b=f[1],w=f[2],C=c.positions,E=c.indices,S=m*b*w,M=E.length,A=h.min,R=A[0],D=A[1],N=A[2],I=0,L=new Uint32Array(S),Y=new Int32Array(M),J=0;J<M;J++){var ie=C[3*J+0]-R>>3,K=C[3*J+1]-D>>3,Q=C[3*J+2]-N>>3,ne=(ie*b+K)*w+Q;(L[ne]+=1)===1&&(I+=1),Y[J]=ne}for(var ue=new Int32Array(I),J=0,fe=0;J<S;J++){var ge=L[J];ge>0&&(L[J]=fe+1,ue[fe]=ge,fe+=1)}for(var ye=new Uint32Array(M),J=1;J<M;++J)ye[J]+=ye[J-1]+ue[J-1];for(var pe=new Int32Array(I),de=new Int32Array(M),J=0;J<M;J++){var he=L[Y[J]];if(he>0){var _e=he-1;de[ye[_e]+pe[_e]]=J,pe[_e]+=1}}return{size:c.size,bucketArray:de,bucketCounts:ue,bucketOffset:ye,grid:L,min:c.bounds.min,positions:C}}function _(c){var h=c.elements,f=c.positions,m=c.bounds,b=c.indices,w=[(m.max[0]-m.min[0]>>3)+1,(m.max[1]-m.min[1]>>3)+1,(m.max[2]-m.min[2]>>3)+1],C={size:w,positions:f,indices:b,bounds:m};return l(C)}function v(c){var h=_(c);return function(){var f=p.QueryContext.create(h,c.elements);return function(m,b,w,C){return p.QueryContext.update(f,m,b,w,C),x(f),f.buffer}}}p.createSpatialHash=v})(d=s.Query3D||(s.Query3D={}))})(o=e.Geometry||(e.Geometry={}))})(r=i.Core||(i.Core={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){"use strict";function x(v){var c=this;return e.computation(function(h){return H(c,void 0,void 0,function(){var f;return q(this,function(m){switch(m.label){case 0:return f=new l(v,h),[4,f.run()];case 1:return[2,m.sent()]}})})})}p.compute=x;var l=function(){function v(c,h){this.ctx=h,this.minX=0,this.minY=0,this.minZ=0,this.maxX=0,this.maxY=0,this.maxZ=0;var f=e.Utils.extend({},c);f.bottomLeft||(f.bottomLeft=[0,0,0]),f.topRight||(f.topRight=f.scalarField.dimensions),this.state=new _(f),this.minX=f.bottomLeft[0],this.minY=f.bottomLeft[1],this.minZ=f.bottomLeft[2],this.maxX=f.topRight[0]-1,this.maxY=f.topRight[1]-1,this.maxZ=f.topRight[2]-1,this.size=(this.maxX-this.minX)*(this.maxY-this.minY)*(this.maxZ-this.minZ),this.sliceSize=(this.maxX-this.minX)*(this.maxY-this.minY)}return v.prototype.doSlices=function(){return H(this,void 0,void 0,function(){var c,h,f,m;return q(this,function(b){switch(b.label){case 0:c=0,h=e.Utils.PerformanceMonitor.currentTime(),f=this.minZ,b.label=1;case 1:return f<this.maxZ?(this.slice(f),c+=this.sliceSize,m=e.Utils.PerformanceMonitor.currentTime(),m-h>e.Computation.UpdateProgressDelta?[4,this.ctx.updateProgress("Computing surface...",!0,c,this.size)]:[3,3]):[3,4];case 2:b.sent(),h=m,b.label=3;case 3:return f++,[3,1];case 4:return[2]}})})},v.prototype.slice=function(c){for(var h=this.minY;h<this.maxY;h++)for(var f=this.minX;f<this.maxX;f++)this.state.processCell(f,h,c);this.state.clearEdgeVertexIndexSlice(c)},v.prototype.finish=function(){var c=e.Utils.ChunkedArray.compact(this.state.vertexBuffer),h=e.Utils.ChunkedArray.compact(this.state.triangleBuffer);this.state.vertexBuffer=void 0,this.state.verticesOnEdges=void 0;var f={vertexCount:c.length/3|0,triangleCount:h.length/3|0,vertices:c,triangleIndices:h,annotation:this.state.annotate?e.Utils.ChunkedArray.compact(this.state.annotationBuffer):void 0};return f},v.prototype.run=function(){return H(this,void 0,void 0,function(){return q(this,function(c){switch(c.label){case 0:return[4,this.ctx.updateProgress("Computing surface...",!0,0,this.size)];case 1:return c.sent(),[4,this.doSlices()];case 2:return c.sent(),[4,this.ctx.updateProgress("Finalizing...")];case 3:return c.sent(),[2,this.finish()]}})})},v}(),_=function(){function v(c){this.vertList=[0,0,0,0,0,0,0,0,0,0,0,0],this.i=0,this.j=0,this.k=0,this.nX=c.scalarField.dimensions[0],this.nY=c.scalarField.dimensions[1],this.nZ=c.scalarField.dimensions[2],this.isoLevel=c.isoLevel,this.scalarField=c.scalarField,this.annotationField=c.annotationField;var h=c.topRight[0]-c.bottomLeft[0],f=c.topRight[1]-c.bottomLeft[1],m=c.topRight[2]-c.bottomLeft[2],b=Math.min(262144,Math.max(h*f*m/16,1024)|0),w=Math.min(65536,b*4);this.vertexBuffer=e.Utils.ChunkedArray.forVertex3D(b),this.triangleBuffer=e.Utils.ChunkedArray.create(function(C){return new Uint32Array(C)},w,3),this.annotate=!!c.annotationField,this.annotate&&(this.annotationBuffer=e.Utils.ChunkedArray.forInt32(b)),this.verticesOnEdges=new Int32Array(3*this.nX*this.nY*2)}return v.prototype.get3dOffsetFromEdgeInfo=function(c){return this.nX*((this.k+c.k)%2*this.nY+this.j+c.j)+this.i+c.i},v.prototype.clearEdgeVertexIndexSlice=function(c){for(var h=c%2===0?0:3*this.nX*this.nY,f=c%2===0?3*this.nX*this.nY:this.verticesOnEdges.length,m=h;m<f;m++)this.verticesOnEdges[m]=0},v.prototype.interpolate=function(c){var h=p.EdgeIdInfo[c],f=3*this.get3dOffsetFromEdgeInfo(h)+h.e,m=this.verticesOnEdges[f];if(m>0)return m-1|0;var b=p.CubeEdges[c],w=b.a,C=b.b,E=w.i+this.i,S=w.j+this.j,M=w.k+this.k,A=C.i+this.i,R=C.j+this.j,D=C.k+this.k,N=this.scalarField.get(E,S,M),I=this.scalarField.get(A,R,D),L=(this.isoLevel-N)/(N-I),Y=e.Utils.ChunkedArray.add3(this.vertexBuffer,E+L*(E-A),S+L*(S-R),M+L*(M-D))|0;if(this.verticesOnEdges[f]=Y+1,this.annotate){var J=L<.5?this.annotationField.get(E,S,M):this.annotationField.get(A,R,D);J<0&&(J=L<.5?this.annotationField.get(A,R,D):this.annotationField.get(E,S,M)),e.Utils.ChunkedArray.add(this.annotationBuffer,J)}return Y},v.prototype.processCell=function(c,h,f){var m=0;if(this.scalarField.get(c,h,f)<this.isoLevel&&(m|=1),this.scalarField.get(c+1,h,f)<this.isoLevel&&(m|=2),this.scalarField.get(c+1,h+1,f)<this.isoLevel&&(m|=4),this.scalarField.get(c,h+1,f)<this.isoLevel&&(m|=8),this.scalarField.get(c,h,f+1)<this.isoLevel&&(m|=16),this.scalarField.get(c+1,h,f+1)<this.isoLevel&&(m|=32),this.scalarField.get(c+1,h+1,f+1)<this.isoLevel&&(m|=64),this.scalarField.get(c,h+1,f+1)<this.isoLevel&&(m|=128),!(m===0||m===255)){this.i=c,this.j=h,this.k=f;var b=p.EdgeTable[m];(b&1)>0&&(this.vertList[0]=this.interpolate(0)),(b&2)>0&&(this.vertList[1]=this.interpolate(1)),(b&4)>0&&(this.vertList[2]=this.interpolate(2)),(b&8)>0&&(this.vertList[3]=this.interpolate(3)),(b&16)>0&&(this.vertList[4]=this.interpolate(4)),(b&32)>0&&(this.vertList[5]=this.interpolate(5)),(b&64)>0&&(this.vertList[6]=this.interpolate(6)),(b&128)>0&&(this.vertList[7]=this.interpolate(7)),(b&256)>0&&(this.vertList[8]=this.interpolate(8)),(b&512)>0&&(this.vertList[9]=this.interpolate(9)),(b&1024)>0&&(this.vertList[10]=this.interpolate(10)),(b&2048)>0&&(this.vertList[11]=this.interpolate(11));for(var w=p.TriTable[m],C=0;C<w.length;C+=3)e.Utils.ChunkedArray.add3(this.triangleBuffer,this.vertList[w[C]],this.vertList[w[C+1]],this.vertList[w[C+2]])}},v}()})(d=s.MarchingCubes||(s.MarchingCubes={}))})(o=e.Geometry||(e.Geometry={}))})(r=i.Core||(i.Core={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){var x=function(){function _(v,c,h){this.i=v|0,this.j=c|0,this.k=h|0}return _}();p.Index=x;var l=function(){function _(v,c){this.a=v,this.b=c}return _}();p.IndexPair=l,p.EdgesXY=[[],[0,3],[0,1],[1,3],[1,2],[0,1,1,2,2,3,0,3],[0,2],[2,3],[2,3],[0,2],[0,1,1,2,2,3,0,3],[1,2],[1,3],[0,1],[0,3],[]],p.EdgesXZ=[[],[0,8],[0,9],[9,8],[9,4],[0,9,9,4,4,8,0,8],[0,4],[4,8],[4,8],[0,4],[0,9,9,4,4,8,0,8],[9,4],[9,8],[0,9],[0,8],[]],p.EdgesYZ=[[],[3,8],[3,11],[11,8],[11,7],[3,11,11,7,7,8,3,8],[3,7],[7,8],[7,8],[3,7],[3,11,11,7,7,8,3,8],[11,7],[11,8],[3,11],[3,8],[]],p.CubeVertices=[new x(0,0,0),new x(1,0,0),new x(1,1,0),new x(0,1,0),new x(0,0,1),new x(1,0,1),new x(1,1,1),new x(0,1,1)],p.CubeEdges=[new l(p.CubeVertices[0],p.CubeVertices[1]),new l(p.CubeVertices[1],p.CubeVertices[2]),new l(p.CubeVertices[2],p.CubeVertices[3]),new l(p.CubeVertices[3],p.CubeVertices[0]),new l(p.CubeVertices[4],p.CubeVertices[5]),new l(p.CubeVertices[5],p.CubeVertices[6]),new l(p.CubeVertices[6],p.CubeVertices[7]),new l(p.CubeVertices[7],p.CubeVertices[4]),new l(p.CubeVertices[0],p.CubeVertices[4]),new l(p.CubeVertices[1],p.CubeVertices[5]),new l(p.CubeVertices[2],p.CubeVertices[6]),new l(p.CubeVertices[3],p.CubeVertices[7])],p.EdgeIdInfo=[{i:0,j:0,k:0,e:0},{i:1,j:0,k:0,e:1},{i:0,j:1,k:0,e:0},{i:0,j:0,k:0,e:1},{i:0,j:0,k:1,e:0},{i:1,j:0,k:1,e:1},{i:0,j:1,k:1,e:0},{i:0,j:0,k:1,e:1},{i:0,j:0,k:0,e:2},{i:1,j:0,k:0,e:2},{i:1,j:1,k:0,e:2},{i:0,j:1,k:0,e:2}],p.EdgeTable=[0,265,515,778,1030,1295,1541,1804,2060,2309,2575,2822,3082,3331,3593,3840,400,153,915,666,1430,1183,1941,1692,2460,2197,2975,2710,3482,3219,3993,3728,560,825,51,314,1590,1855,1077,1340,2620,2869,2111,2358,3642,3891,3129,3376,928,681,419,170,1958,1711,1445,1196,2988,2725,2479,2214,4010,3747,3497,3232,1120,1385,1635,1898,102,367,613,876,3180,3429,3695,3942,2154,2403,2665,2912,1520,1273,2035,1786,502,255,1013,764,3580,3317,4095,3830,2554,2291,3065,2800,1616,1881,1107,1370,598,863,85,348,3676,3925,3167,3414,2650,2899,2137,2384,1984,1737,1475,1226,966,719,453,204,4044,3781,3535,3270,3018,2755,2505,2240,2240,2505,2755,3018,3270,3535,3781,4044,204,453,719,966,1226,1475,1737,1984,2384,2137,2899,2650,3414,3167,3925,3676,348,85,863,598,1370,1107,1881,1616,2800,3065,2291,2554,3830,4095,3317,3580,764,1013,255,502,1786,2035,1273,1520,2912,2665,2403,2154,3942,3695,3429,3180,876,613,367,102,1898,1635,1385,1120,3232,3497,3747,4010,2214,2479,2725,2988,1196,1445,1711,1958,170,419,681,928,3376,3129,3891,3642,2358,2111,2869,2620,1340,1077,1855,1590,314,51,825,560,3728,3993,3219,3482,2710,2975,2197,2460,1692,1941,1183,1430,666,915,153,400,3840,3593,3331,3082,2822,2575,2309,2060,1804,1541,1295,1030,778,515,265,0],p.TriTable=[[],[0,8,3],[0,1,9],[1,8,3,9,8,1],[1,2,10],[0,8,3,1,2,10],[9,2,10,0,2,9],[2,8,3,2,10,8,10,9,8],[3,11,2],[0,11,2,8,11,0],[1,9,0,2,3,11],[1,11,2,1,9,11,9,8,11],[3,10,1,11,10,3],[0,10,1,0,8,10,8,11,10],[3,9,0,3,11,9,11,10,9],[9,8,10,10,8,11],[4,7,8],[4,3,0,7,3,4],[0,1,9,8,4,7],[4,1,9,4,7,1,7,3,1],[1,2,10,8,4,7],[3,4,7,3,0,4,1,2,10],[9,2,10,9,0,2,8,4,7],[2,10,9,2,9,7,2,7,3,7,9,4],[8,4,7,3,11,2],[11,4,7,11,2,4,2,0,4],[9,0,1,8,4,7,2,3,11],[4,7,11,9,4,11,9,11,2,9,2,1],[3,10,1,3,11,10,7,8,4],[1,11,10,1,4,11,1,0,4,7,11,4],[4,7,8,9,0,11,9,11,10,11,0,3],[4,7,11,4,11,9,9,11,10],[9,5,4],[9,5,4,0,8,3],[0,5,4,1,5,0],[8,5,4,8,3,5,3,1,5],[1,2,10,9,5,4],[3,0,8,1,2,10,4,9,5],[5,2,10,5,4,2,4,0,2],[2,10,5,3,2,5,3,5,4,3,4,8],[9,5,4,2,3,11],[0,11,2,0,8,11,4,9,5],[0,5,4,0,1,5,2,3,11],[2,1,5,2,5,8,2,8,11,4,8,5],[10,3,11,10,1,3,9,5,4],[4,9,5,0,8,1,8,10,1,8,11,10],[5,4,0,5,0,11,5,11,10,11,0,3],[5,4,8,5,8,10,10,8,11],[9,7,8,5,7,9],[9,3,0,9,5,3,5,7,3],[0,7,8,0,1,7,1,5,7],[1,5,3,3,5,7],[9,7,8,9,5,7,10,1,2],[10,1,2,9,5,0,5,3,0,5,7,3],[8,0,2,8,2,5,8,5,7,10,5,2],[2,10,5,2,5,3,3,5,7],[7,9,5,7,8,9,3,11,2],[9,5,7,9,7,2,9,2,0,2,7,11],[2,3,11,0,1,8,1,7,8,1,5,7],[11,2,1,11,1,7,7,1,5],[9,5,8,8,5,7,10,1,3,10,3,11],[5,7,0,5,0,9,7,11,0,1,0,10,11,10,0],[11,10,0,11,0,3,10,5,0,8,0,7,5,7,0],[11,10,5,7,11,5],[10,6,5],[0,8,3,5,10,6],[9,0,1,5,10,6],[1,8,3,1,9,8,5,10,6],[1,6,5,2,6,1],[1,6,5,1,2,6,3,0,8],[9,6,5,9,0,6,0,2,6],[5,9,8,5,8,2,5,2,6,3,2,8],[2,3,11,10,6,5],[11,0,8,11,2,0,10,6,5],[0,1,9,2,3,11,5,10,6],[5,10,6,1,9,2,9,11,2,9,8,11],[6,3,11,6,5,3,5,1,3],[0,8,11,0,11,5,0,5,1,5,11,6],[3,11,6,0,3,6,0,6,5,0,5,9],[6,5,9,6,9,11,11,9,8],[5,10,6,4,7,8],[4,3,0,4,7,3,6,5,10],[1,9,0,5,10,6,8,4,7],[10,6,5,1,9,7,1,7,3,7,9,4],[6,1,2,6,5,1,4,7,8],[1,2,5,5,2,6,3,0,4,3,4,7],[8,4,7,9,0,5,0,6,5,0,2,6],[7,3,9,7,9,4,3,2,9,5,9,6,2,6,9],[3,11,2,7,8,4,10,6,5],[5,10,6,4,7,2,4,2,0,2,7,11],[0,1,9,4,7,8,2,3,11,5,10,6],[9,2,1,9,11,2,9,4,11,7,11,4,5,10,6],[8,4,7,3,11,5,3,5,1,5,11,6],[5,1,11,5,11,6,1,0,11,7,11,4,0,4,11],[0,5,9,0,6,5,0,3,6,11,6,3,8,4,7],[6,5,9,6,9,11,4,7,9,7,11,9],[10,4,9,6,4,10],[4,10,6,4,9,10,0,8,3],[10,0,1,10,6,0,6,4,0],[8,3,1,8,1,6,8,6,4,6,1,10],[1,4,9,1,2,4,2,6,4],[3,0,8,1,2,9,2,4,9,2,6,4],[0,2,4,4,2,6],[8,3,2,8,2,4,4,2,6],[10,4,9,10,6,4,11,2,3],[0,8,2,2,8,11,4,9,10,4,10,6],[3,11,2,0,1,6,0,6,4,6,1,10],[6,4,1,6,1,10,4,8,1,2,1,11,8,11,1],[9,6,4,9,3,6,9,1,3,11,6,3],[8,11,1,8,1,0,11,6,1,9,1,4,6,4,1],[3,11,6,3,6,0,0,6,4],[6,4,8,11,6,8],[7,10,6,7,8,10,8,9,10],[0,7,3,0,10,7,0,9,10,6,7,10],[10,6,7,1,10,7,1,7,8,1,8,0],[10,6,7,10,7,1,1,7,3],[1,2,6,1,6,8,1,8,9,8,6,7],[2,6,9,2,9,1,6,7,9,0,9,3,7,3,9],[7,8,0,7,0,6,6,0,2],[7,3,2,6,7,2],[2,3,11,10,6,8,10,8,9,8,6,7],[2,0,7,2,7,11,0,9,7,6,7,10,9,10,7],[1,8,0,1,7,8,1,10,7,6,7,10,2,3,11],[11,2,1,11,1,7,10,6,1,6,7,1],[8,9,6,8,6,7,9,1,6,11,6,3,1,3,6],[0,9,1,11,6,7],[7,8,0,7,0,6,3,11,0,11,6,0],[7,11,6],[7,6,11],[3,0,8,11,7,6],[0,1,9,11,7,6],[8,1,9,8,3,1,11,7,6],[10,1,2,6,11,7],[1,2,10,3,0,8,6,11,7],[2,9,0,2,10,9,6,11,7],[6,11,7,2,10,3,10,8,3,10,9,8],[7,2,3,6,2,7],[7,0,8,7,6,0,6,2,0],[2,7,6,2,3,7,0,1,9],[1,6,2,1,8,6,1,9,8,8,7,6],[10,7,6,10,1,7,1,3,7],[10,7,6,1,7,10,1,8,7,1,0,8],[0,3,7,0,7,10,0,10,9,6,10,7],[7,6,10,7,10,8,8,10,9],[6,8,4,11,8,6],[3,6,11,3,0,6,0,4,6],[8,6,11,8,4,6,9,0,1],[9,4,6,9,6,3,9,3,1,11,3,6],[6,8,4,6,11,8,2,10,1],[1,2,10,3,0,11,0,6,11,0,4,6],[4,11,8,4,6,11,0,2,9,2,10,9],[10,9,3,10,3,2,9,4,3,11,3,6,4,6,3],[8,2,3,8,4,2,4,6,2],[0,4,2,4,6,2],[1,9,0,2,3,4,2,4,6,4,3,8],[1,9,4,1,4,2,2,4,6],[8,1,3,8,6,1,8,4,6,6,10,1],[10,1,0,10,0,6,6,0,4],[4,6,3,4,3,8,6,10,3,0,3,9,10,9,3],[10,9,4,6,10,4],[4,9,5,7,6,11],[0,8,3,4,9,5,11,7,6],[5,0,1,5,4,0,7,6,11],[11,7,6,8,3,4,3,5,4,3,1,5],[9,5,4,10,1,2,7,6,11],[6,11,7,1,2,10,0,8,3,4,9,5],[7,6,11,5,4,10,4,2,10,4,0,2],[3,4,8,3,5,4,3,2,5,10,5,2,11,7,6],[7,2,3,7,6,2,5,4,9],[9,5,4,0,8,6,0,6,2,6,8,7],[3,6,2,3,7,6,1,5,0,5,4,0],[6,2,8,6,8,7,2,1,8,4,8,5,1,5,8],[9,5,4,10,1,6,1,7,6,1,3,7],[1,6,10,1,7,6,1,0,7,8,7,0,9,5,4],[4,0,10,4,10,5,0,3,10,6,10,7,3,7,10],[7,6,10,7,10,8,5,4,10,4,8,10],[6,9,5,6,11,9,11,8,9],[3,6,11,0,6,3,0,5,6,0,9,5],[0,11,8,0,5,11,0,1,5,5,6,11],[6,11,3,6,3,5,5,3,1],[1,2,10,9,5,11,9,11,8,11,5,6],[0,11,3,0,6,11,0,9,6,5,6,9,1,2,10],[11,8,5,11,5,6,8,0,5,10,5,2,0,2,5],[6,11,3,6,3,5,2,10,3,10,5,3],[5,8,9,5,2,8,5,6,2,3,8,2],[9,5,6,9,6,0,0,6,2],[1,5,8,1,8,0,5,6,8,3,8,2,6,2,8],[1,5,6,2,1,6],[1,3,6,1,6,10,3,8,6,5,6,9,8,9,6],[10,1,0,10,0,6,9,5,0,5,6,0],[0,3,8,5,6,10],[10,5,6],[11,5,10,7,5,11],[11,5,10,11,7,5,8,3,0],[5,11,7,5,10,11,1,9,0],[10,7,5,10,11,7,9,8,1,8,3,1],[11,1,2,11,7,1,7,5,1],[0,8,3,1,2,7,1,7,5,7,2,11],[9,7,5,9,2,7,9,0,2,2,11,7],[7,5,2,7,2,11,5,9,2,3,2,8,9,8,2],[2,5,10,2,3,5,3,7,5],[8,2,0,8,5,2,8,7,5,10,2,5],[9,0,1,5,10,3,5,3,7,3,10,2],[9,8,2,9,2,1,8,7,2,10,2,5,7,5,2],[1,3,5,3,7,5],[0,8,7,0,7,1,1,7,5],[9,0,3,9,3,5,5,3,7],[9,8,7,5,9,7],[5,8,4,5,10,8,10,11,8],[5,0,4,5,11,0,5,10,11,11,3,0],[0,1,9,8,4,10,8,10,11,10,4,5],[10,11,4,10,4,5,11,3,4,9,4,1,3,1,4],[2,5,1,2,8,5,2,11,8,4,5,8],[0,4,11,0,11,3,4,5,11,2,11,1,5,1,11],[0,2,5,0,5,9,2,11,5,4,5,8,11,8,5],[9,4,5,2,11,3],[2,5,10,3,5,2,3,4,5,3,8,4],[5,10,2,5,2,4,4,2,0],[3,10,2,3,5,10,3,8,5,4,5,8,0,1,9],[5,10,2,5,2,4,1,9,2,9,4,2],[8,4,5,8,5,3,3,5,1],[0,4,5,1,0,5],[8,4,5,8,5,3,9,0,5,0,3,5],[9,4,5],[4,11,7,4,9,11,9,10,11],[0,8,3,4,9,7,9,11,7,9,10,11],[1,10,11,1,11,4,1,4,0,7,4,11],[3,1,4,3,4,8,1,10,4,7,4,11,10,11,4],[4,11,7,9,11,4,9,2,11,9,1,2],[9,7,4,9,11,7,9,1,11,2,11,1,0,8,3],[11,7,4,11,4,2,2,4,0],[11,7,4,11,4,2,8,3,4,3,2,4],[2,9,10,2,7,9,2,3,7,7,4,9],[9,10,7,9,7,4,10,2,7,8,7,0,2,0,7],[3,7,10,3,10,2,7,4,10,1,10,0,4,0,10],[1,10,2,8,7,4],[4,9,1,4,1,7,7,1,3],[4,9,1,4,1,7,0,8,1,8,7,1],[4,0,3,7,4,3],[4,8,7],[9,10,8,10,11,8],[3,0,9,3,9,11,11,9,10],[0,1,10,0,10,8,8,10,11],[3,1,10,11,3,10],[1,2,11,1,11,9,9,11,8],[3,0,9,3,9,11,1,2,9,2,11,9],[0,2,11,8,0,11],[3,2,11],[2,3,8,2,8,10,10,8,9],[9,10,2,0,9,2],[2,3,8,2,8,10,0,1,8,1,10,8],[1,10,2],[1,3,8,9,1,8],[0,9,1],[0,3,8],[]]})(d=s.MarchingCubes||(s.MarchingCubes={}))})(o=e.Geometry||(e.Geometry={}))})(r=i.Core||(i.Core={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){"use strict";var x=function(){function c(h){e.Utils.extend(this,h,{exactBoundary:!1,boundaryDelta:{dx:1.5,dy:1.5,dz:1.5},probeRadius:1.4,atomRadii:function(){return 1},density:1.1,interactive:!1,smoothingIterations:1}),this.exactBoundary&&(this.boundaryDelta={dx:0,dy:0,dz:0}),this.density<.05&&(this.density=.05)}return c}(),l=function(){function c(h,f){this.inputParameters=h,this.ctx=f,this.minX=Number.MAX_VALUE,this.minY=Number.MAX_VALUE,this.minZ=Number.MAX_VALUE,this.maxX=-Number.MAX_VALUE,this.maxY=-Number.MAX_VALUE,this.maxZ=-Number.MAX_VALUE,this.nX=0,this.nY=0,this.nZ=0,this.dX=.1,this.dY=.1,this.dZ=.1,this.field=new Float32Array(0),this.distanceField=new Float32Array(0),this.proximityMap=new Int32Array(0),this.minIndex={i:0,j:0,k:0},this.maxIndex={i:0,j:0,k:0},this.parameters=new x(h.parameters);var m=h.positions;this.x=m.x,this.y=m.y,this.z=m.z,this.atomIndices=h.atomIndices,this.parameters.density>=.99?this.vdwScaleFactor=1.000000001:this.vdwScaleFactor=1+(1-this.parameters.density*this.parameters.density)}return c.prototype.findBounds=function(){for(var h=0,f=this.atomIndices;h<f.length;h++){var m=f[h],b=this.parameters.exactBoundary?0:this.vdwScaleFactor*this.parameters.atomRadius(m)+this.parameters.probeRadius,w=this.x[m],C=this.y[m],E=this.z[m];b<0||(this.minX=Math.min(this.minX,w-b),this.minY=Math.min(this.minY,C-b),this.minZ=Math.min(this.minZ,E-b),this.maxX=Math.max(this.maxX,w+b),this.maxY=Math.max(this.maxY,C+b),this.maxZ=Math.max(this.maxZ,E+b))}this.minX===Number.MAX_VALUE&&(this.minX=this.minY=this.minZ=-1,this.maxX=this.maxY=this.maxZ=1),this.minX-=this.parameters.boundaryDelta.dx,this.minY-=this.parameters.boundaryDelta.dy,this.minZ-=this.parameters.boundaryDelta.dz,this.maxX+=this.parameters.boundaryDelta.dx,this.maxY+=this.parameters.boundaryDelta.dy,this.maxZ+=this.parameters.boundaryDelta.dz,this.nX=Math.floor((this.maxX-this.minX)*this.parameters.density),this.nY=Math.floor((this.maxY-this.minY)*this.parameters.density),this.nZ=Math.floor((this.maxZ-this.minZ)*this.parameters.density),this.nX=Math.min(this.nX,333),this.nY=Math.min(this.nY,333),this.nZ=Math.min(this.nZ,333),this.dX=(this.maxX-this.minX)/(this.nX-1),this.dY=(this.maxY-this.minY)/(this.nY-1),this.dZ=(this.maxZ-this.minZ)/(this.nZ-1)},c.prototype.initData=function(){var h=this.nX*this.nY*this.nZ;this.field=new Float32Array(h),this.distanceField=new Float32Array(h),this.proximityMap=new Int32Array(h);for(var f=Number.POSITIVE_INFINITY,m=0,b=this.proximityMap.length;m<b;m++)this.distanceField[m]=f,this.proximityMap[m]=-1},c.prototype.updateMinIndex=function(h,f,m){this.minIndex.i=Math.max(Math.floor((h-this.minX)/this.dX)|0,0),this.minIndex.j=Math.max(Math.floor((f-this.minY)/this.dY)|0,0),this.minIndex.k=Math.max(Math.floor((m-this.minZ)/this.dZ)|0,0)},c.prototype.updateMaxIndex=function(h,f,m){this.maxIndex.i=Math.min(Math.ceil((h-this.minX)/this.dX)|0,this.nX),this.maxIndex.j=Math.min(Math.ceil((f-this.minY)/this.dY)|0,this.nY),this.maxIndex.k=Math.min(Math.ceil((m-this.minZ)/this.dZ)|0,this.nZ)},c.prototype.addBall=function(h,f){var m=f*f,b=this.x[h],w=this.y[h],C=this.z[h];this.updateMinIndex(b-f,w-f,C-f),this.updateMaxIndex(b+f,w+f,C+f);var E=this.minIndex.i,S=this.minIndex.j,M=this.minIndex.k,A=this.maxIndex.i,R=this.maxIndex.j,D=this.maxIndex.k;b=this.minX-b,w=this.minY-w,C=this.minZ-C;for(var N=M;N<D;N++)for(var I=C+N*this.dZ,L=I*I,Y=N*this.nY,J=S;J<R;J++)for(var ie=w+J*this.dY,K=L+ie*ie,Q=this.nX*(Y+J),ne=E;ne<A;ne++){var ue=b+ne*this.dX,fe=K+ue*ue,ge=Q+ne,ye=m/(1e-6+fe)-1;fe<this.distanceField[ge]&&(this.proximityMap[ge]=h,this.distanceField[ge]=fe),ye>0&&(this.field[ge]+=ye)}},c.prototype.processChunks=function(){return H(this,void 0,void 0,function(){var h,f,m,b,w,C,E;return q(this,function(S){switch(S.label){case 0:return h=1e4,f=e.Utils.PerformanceMonitor.currentTime(),[4,this.ctx.updateProgress("Creating field...",!0)];case 1:S.sent(),m=0,b=this.atomIndices.length,S.label=2;case 2:return m<b?(w=this.atomIndices[m],C=this.vdwScaleFactor*this.parameters.atomRadius(w)+this.parameters.probeRadius,C>=0&&this.addBall(w,C),(m+1)%h!==0?[3,4]:(E=e.Utils.PerformanceMonitor.currentTime(),E-f>e.Computation.UpdateProgressDelta?(f=E,[4,this.ctx.updateProgress("Creating field...",!0,m,b)]):[3,4])):[3,5];case 3:S.sent(),S.label=4;case 4:return m++,[3,2];case 5:return[2]}})})},c.prototype.finish=function(){var h=s.LinearAlgebra.Matrix4.zero();s.LinearAlgebra.Matrix4.fromTranslation(h,[this.minX,this.minY,this.minZ]),h[0]=this.dX,h[5]=this.dY,h[10]=this.dZ;var f={data:{scalarField:new e.Formats.Density.Field3DZYX(this.field,[this.nX,this.nY,this.nZ]),annotationField:this.parameters.interactive?new e.Formats.Density.Field3DZYX(this.proximityMap,[this.nX,this.nY,this.nZ]):void 0,isoLevel:.05},bottomLeft:s.LinearAlgebra.Vector3.fromValues(this.minX,this.minY,this.minZ),topRight:s.LinearAlgebra.Vector3.fromValues(this.maxX,this.maxY,this.maxZ),transform:h,inputParameters:this.inputParameters,parameters:this.parameters};return this.distanceField=null,this.proximityMap=null,f},c.prototype.run=function(){return H(this,void 0,void 0,function(){return q(this,function(h){switch(h.label){case 0:return[4,this.ctx.updateProgress("Initializing...")];case 1:return h.sent(),this.findBounds(),this.initData(),[4,this.processChunks()];case 2:return h.sent(),[4,this.ctx.updateProgress("Finalizing...",void 0,this.atomIndices.length,this.atomIndices.length)];case 3:return h.sent(),[2,this.finish()]}})})},c}();function _(c){var h=this;return e.computation(function(f){return H(h,void 0,void 0,function(){var m;return q(this,function(b){switch(b.label){case 0:return m=new l(c,f),[4,m.run()];case 1:return[2,b.sent()]}})})})}p.createMolecularIsoFieldAsync=_;function v(c){var h=this;return e.computation(function(f){return H(h,void 0,void 0,function(){var m,b,w,C;return q(this,function(E){switch(E.label){case 0:return[4,_(c).run(f)];case 1:return m=E.sent(),[4,s.MarchingCubes.compute(m.data).run(f)];case 2:return b=E.sent(),[4,s.Surface.transform(b,m.transform).run(f)];case 3:return b=E.sent(),w=c.parameters&&c.parameters.smoothingIterations||1,C=1,c.parameters&&c.parameters.density<1&&(C=2/c.parameters.density),[4,s.Surface.laplacianSmooth(b,w,C).run(f)];case 4:return b=E.sent(),[2,{surface:b,usedParameters:m.parameters}]}})})})}p.computeMolecularSurfaceAsync=v})(d=s.MolecularSurface||(s.MolecularSurface={}))})(o=e.Geometry||(e.Geometry={}))})(r=i.Core||(i.Core={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";var d=e.Utils.DataTable,p=function(){function S(M){this.id=M,this.map=e.Utils.FastMap.create()}return S.prototype.add=function(M,A,R,D){D===void 0&&(D=!0);var N=this.map.get(M);if(N!==void 0){var I=N.get(A);I===void 0&&N.set(A,R)}else{var L=e.Utils.FastMap.create();L.set(A,R),this.map.set(M,L)}D&&this.add(A,M,R,!1)},S}();s.ComponentBondInfoEntry=p;var x=function(){function S(){this.entries=e.Utils.FastMap.create()}return S.prototype.newEntry=function(M){var A=new p(M);return this.entries.set(M,A),A},S}();s.ComponentBondInfo=x;var l=function(){function S(M,A,R){this.asymId=M,this.seqNumber=A,this.insCode=R}return S.areEqual=function(M,A,R,D,N){return M.asymId===R[A]&&M.seqNumber===D[A]&&M.insCode===N[A]},S.compare=function(M,A){return M.asymId===A.asymId?M.seqNumber===A.seqNumber?M.insCode===A.insCode?0:M.insCode===void 0?-1:A.insCode===void 0?1:M.insCode<A.insCode?-1:1:M.seqNumber<A.seqNumber?-1:1:M.asymId<A.asymId?-1:1},S.compareResidue=function(M,A,R,D,N){return M.asymId===R[A]?M.seqNumber===D[A]?M.insCode===N[A]?0:M.insCode===void 0?-1:N[A]===void 0?1:M.insCode<N[A]?-1:1:M.seqNumber<D[A]?-1:1:M.asymId<R[A]?-1:1},S}();s.PolyResidueIdentifier=l;var _=function(){function S(M,A,R,D){D===void 0&&(D={}),this.type=M,this.startResidueId=A,this.endResidueId=R,this.info=D,this.startResidueIndex=-1,this.endResidueIndex=-1}return Object.defineProperty(S.prototype,"length",{get:function(){return this.endResidueIndex-this.startResidueIndex},enumerable:!0,configurable:!0}),S}();s.SecondaryStructureElement=_;var v=function(){function S(M,A,R,D,N){this.spacegroupName=M,this.cellSize=A,this.cellAngles=R,this.toFracTransform=D,this.isNonStandardCrytalFrame=N}return S}();s.SymmetryInfo=v;var c=function(){function S(M){this.entries=M,this._residuePairIndex=void 0,this._atomIndex=void 0}return S._resKey=function(M,A){return M<A?M+"-"+A:A+"-"+M},S.prototype.getResiduePairIndex=function(){if(this._residuePairIndex)return this._residuePairIndex;this._residuePairIndex=e.Utils.FastMap.create();for(var M=0,A=this.entries;M<A.length;M++)for(var R=A[M],D=R.partners,N=D.length,I=0;I<N-1;I++)for(var L=I+I;L<N;L++){var Y=S._resKey(D[I].residueIndex,D[L].residueIndex);this._residuePairIndex.has(Y)?this._residuePairIndex.get(Y).push(R):this._residuePairIndex.set(Y,[R])}return this._residuePairIndex},S.prototype.getAtomIndex=function(){if(this._atomIndex)return this._atomIndex;this._atomIndex=e.Utils.FastMap.create();for(var M=0,A=this.entries;M<A.length;M++)for(var R=A[M],D=0,N=R.partners;D<N.length;D++){var I=N[D],L=I.atomIndex;this._atomIndex.has(L)?this._atomIndex.get(L).push(R):this._atomIndex.set(L,[R])}return this._atomIndex},S.prototype.getResidueEntries=function(M,A){return this.getResiduePairIndex().get(S._resKey(M,A))||S._emptyEntry},S.prototype.getAtomEntries=function(M){return this.getAtomIndex().get(M)||S._emptyEntry},S._emptyEntry=[],S}();s.StructConn=c;var h=function(){function S(M,A,R){this.id=M,this.name=A,this.operator=R}return S}();s.AssemblyOperator=h;var f=function(){function S(M,A){this.operators=M,this.asymIds=A}return S}();s.AssemblyGenEntry=f;var m=function(){function S(M){this.name=M,this.gens=[]}return S}();s.AssemblyGen=m;var b=function(){function S(M,A){this.operators=M,this.assemblies=A}return S}();s.AssemblyInfo=b;var w;(function(S){var M=d.typedColumn(Int32Array),A=d.typedColumn(Float32Array),R=d.stringColumn,D=d.stringNullColumn;S.Positions={x:A,y:A,z:A},S.Atoms={id:M,altLoc:R,residueIndex:M,chainIndex:M,entityIndex:M,name:R,elementSymbol:R,occupancy:A,tempFactor:A,authName:R,rowIndex:M},S.Residues={name:R,seqNumber:M,asymId:R,authName:R,authSeqNumber:M,authAsymId:R,insCode:D,entityId:R,isHet:d.typedColumn(Int8Array),atomStartIndex:M,atomEndIndex:M,chainIndex:M,entityIndex:M,secondaryStructureIndex:M},S.Chains={asymId:R,entityId:R,authAsymId:R,atomStartIndex:M,atomEndIndex:M,residueStartIndex:M,residueEndIndex:M,entityIndex:M,sourceChainIndex:void 0,operatorIndex:void 0},S.Entities={entityId:R,type:d.customColumn(),atomStartIndex:M,atomEndIndex:M,residueStartIndex:M,residueEndIndex:M,chainStartIndex:M,chainEndIndex:M},S.Bonds={atomAIndex:M,atomBIndex:M,type:d.typedColumn(Int8Array)},S.ModifiedResidues={asymId:R,seqNumber:M,insCode:D,parent:R,details:D}})(w=s.Tables||(s.Tables={}));var C=function(){function S(M,A,R){this.matrix=M,this.id=A,this.isIdentity=R}return S.prototype.apply=function(M){e.Geometry.LinearAlgebra.Vector3.transformMat4(M,M,this.matrix)},S.applyToModelUnsafe=function(M,A){for(var R=e.Geometry.LinearAlgebra.Vector3.zero(),D=A.positions,N=D.x,I=D.y,L=D.z,Y=0,J=A.positions.count;Y<J;Y++)R[0]=N[Y],R[1]=I[Y],R[2]=L[Y],e.Geometry.LinearAlgebra.Vector3.transformMat4(R,R,M),N[Y]=R[0],I[Y]=R[1],L[Y]=R[2]},S}();s.Operator=C;var E;(function(S){function M(R,D,N){return N===void 0&&(N={}),{id:R,models:D,properties:N}}S.create=M;var A;(function(R){function D(L){var Y=e.Utils.extend({},L),J=void 0;return Object.defineProperty(Y,"queryContext",{enumerable:!0,configurable:!1,get:function(){return J||(J=s.Query.Context.ofStructure(Y),J)}}),Y}R.create=D;var N;(function(L){L[L.File=0]="File",L[L.Computed=1]="Computed"})(N=R.Source||(R.Source={}));function I(L,Y,J){for(var ie=L.positions,K=ie.x,Q=ie.y,ne=ie.z,ue=L.positions.getBuilder(L.positions.count).seal(),fe=ue.x,ge=ue.y,ye=ue.z,pe=e.Geometry.LinearAlgebra.Vector3.zero(),de=0,he=L.positions.count;de<he;de++)J(Y,K[de],Q[de],ne[de],pe),fe[de]=pe[0],ge[de]=pe[1],ye[de]=pe[2];return D({id:L.id,modelId:L.modelId,data:L.data,positions:ue,parent:L.parent,source:L.source,operators:L.operators})}R.withTransformedXYZ=I})(A=S.Model||(S.Model={}))})(E=s.Molecule||(s.Molecule={}))})(o=e.Structure||(e.Structure={}))})(r=i.Core||(i.Core={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";function d(D){return D>=0&&D<=5}s.isBondTypeCovalent=d;var p={H:0,h:0,D:0,d:0,T:0,t:0,He:2,HE:2,he:2,Li:3,LI:3,li:3,Be:4,BE:4,be:4,B:5,b:5,C:6,c:6,N:7,n:7,O:8,o:8,F:9,f:9,Ne:10,NE:10,ne:10,Na:11,NA:11,na:11,Mg:12,MG:12,mg:12,Al:13,AL:13,al:13,Si:14,SI:14,si:14,P:15,p:15,S:16,s:16,Cl:17,CL:17,cl:17,Ar:18,AR:18,ar:18,K:19,k:19,Ca:20,CA:20,ca:20,Sc:21,SC:21,sc:21,Ti:22,TI:22,ti:22,V:23,v:23,Cr:24,CR:24,cr:24,Mn:25,MN:25,mn:25,Fe:26,FE:26,fe:26,Co:27,CO:27,co:27,Ni:28,NI:28,ni:28,Cu:29,CU:29,cu:29,Zn:30,ZN:30,zn:30,Ga:31,GA:31,ga:31,Ge:32,GE:32,ge:32,As:33,AS:33,as:33,Se:34,SE:34,se:34,Br:35,BR:35,br:35,Kr:36,KR:36,kr:36,Rb:37,RB:37,rb:37,Sr:38,SR:38,sr:38,Y:39,y:39,Zr:40,ZR:40,zr:40,Nb:41,NB:41,nb:41,Mo:42,MO:42,mo:42,Tc:43,TC:43,tc:43,Ru:44,RU:44,ru:44,Rh:45,RH:45,rh:45,Pd:46,PD:46,pd:46,Ag:47,AG:47,ag:47,Cd:48,CD:48,cd:48,In:49,IN:49,in:49,Sn:50,SN:50,sn:50,Sb:51,SB:51,sb:51,Te:52,TE:52,te:52,I:53,i:53,Xe:54,XE:54,xe:54,Cs:55,CS:55,cs:55,Ba:56,BA:56,ba:56,La:57,LA:57,la:57,Ce:58,CE:58,ce:58,Pr:59,PR:59,pr:59,Nd:60,ND:60,nd:60,Pm:61,PM:61,pm:61,Sm:62,SM:62,sm:62,Eu:63,EU:63,eu:63,Gd:64,GD:64,gd:64,Tb:65,TB:65,tb:65,Dy:66,DY:66,dy:66,Ho:67,HO:67,ho:67,Er:68,ER:68,er:68,Tm:69,TM:69,tm:69,Yb:70,YB:70,yb:70,Lu:71,LU:71,lu:71,Hf:72,HF:72,hf:72,Ta:73,TA:73,ta:73,W:74,w:74,Re:75,RE:75,re:75,Os:76,OS:76,os:76,Ir:77,IR:77,ir:77,Pt:78,PT:78,pt:78,Au:79,AU:79,au:79,Hg:80,HG:80,hg:80,Tl:81,TL:81,tl:81,Pb:82,PB:82,pb:82,Bi:83,BI:83,bi:83,Po:84,PO:84,po:84,At:85,AT:85,at:85,Rn:86,RN:86,rn:86,Fr:87,FR:87,fr:87,Ra:88,RA:88,ra:88,Ac:89,AC:89,ac:89,Th:90,TH:90,th:90,Pa:91,PA:91,pa:91,U:92,u:92,Np:93,NP:93,np:93,Pu:94,PU:94,pu:94,Am:95,AM:95,am:95,Cm:96,CM:96,cm:96,Bk:97,BK:97,bk:97,Cf:98,CF:98,cf:98,Es:99,ES:99,es:99,Fm:100,FM:100,fm:100,Md:101,MD:101,md:101,No:102,NO:102,no:102,Lr:103,LR:103,lr:103,Rf:104,RF:104,rf:104,Db:105,DB:105,db:105,Sg:106,SG:106,sg:106,Bh:107,BH:107,bh:107,Hs:108,HS:108,hs:108,Mt:109,MT:109,mt:109},x={0:1.42,1:1.42,3:2.7,4:2.7,6:1.75,7:1.6,8:1.52,11:2.7,12:2.7,13:2.7,14:1.9,15:1.9,16:1.9,17:1.8,19:2.7,20:2.7,21:2.7,22:2.7,23:2.7,24:2.7,25:2.7,26:2.7,27:2.7,28:2.7,29:2.7,30:2.7,31:2.7,33:2.68,37:2.7,38:2.7,39:2.7,40:2.7,41:2.7,42:2.7,43:2.7,44:2.7,45:2.7,46:2.7,47:2.7,48:2.7,49:2.7,50:2.7,55:2.7,56:2.7,57:2.7,58:2.7,59:2.7,60:2.7,61:2.7,62:2.7,63:2.7,64:2.7,65:2.7,66:2.7,67:2.7,68:2.7,69:2.7,70:2.7,71:2.7,72:2.7,73:2.7,74:2.7,75:2.7,76:2.7,77:2.7,78:2.7,79:2.7,80:2.7,81:2.7,82:2.7,83:2.7,87:2.7,88:2.7,89:2.7,90:2.7,91:2.7,92:2.7,93:2.7,94:2.7,95:2.7,96:2.7,97:2.7,98:2.7,99:2.7,100:2.7,101:2.7,102:2.7,103:2.7,104:2.7,105:2.7,106:2.7,107:2.7,108:2.7,109:2.88},l={0:.8,20:1.31,27:1.3,35:1.3,44:1.05,54:1,60:1.84,72:1.88,84:1.75,85:1.56,86:1.76,98:1.6,99:1.68,100:1.63,112:1.55,113:1.59,114:1.36,129:1.45,144:1.6,170:1.4,180:1.55,202:2.4,222:2.24,224:1.91,225:1.98,243:2.02,269:2,293:1.9,480:2.3,512:2.3,544:2.3,612:2.1,629:1.54,665:1,813:2.6,854:2.27,894:1.93,896:2.1,937:2.05,938:2.06,981:1.62,1258:2.68,1309:2.33,1484:1,1763:2.14,1823:2.48,1882:2.1,1944:1.72,2380:2.34,3367:2.44,3733:2.11,3819:2.6,3821:2.36,4736:2.75,5724:2.73,5959:2.63,6519:2.84,6750:2.87,8991:2.81},_=2.001,v=function(){for(var D=["LI","NA","K","RB","CS","FR","BE","MG","CA","SR","BA","RA","AL","GA","IN","SN","TL","PB","BI","SC","TI","V","CR","MN","FE","CO","NI","CU","ZN","Y","ZR","NB","MO","TC","RU","RH","PD","AG","CD","LA","HF","TA","W","RE","OS","IR","PT","AU","HG","AC","RF","DB","SG","BH","HS","MT","CE","PR","ND","PM","SM","EU","GD","TB","DY","HO","ER","TM","YB","LU","TH","PA","U","NP","PU","AM","CM","BK","CF","ES","FM","MD","NO","LR"],N=e.Utils.FastSet.create(),I=0,L=D;I<L.length;I++){var Y=L[I];N.add(p[Y])}return N}();function c(D,N){return D<N?(D+N)*(D+N+1)/2+N:(D+N)*(D+N+1)/2+D}function h(D){var N=p[D];return N===void 0?-1:N}function f(D,N){if(D<0||N<0)return-1;var I=l[c(D,N)];return I===void 0?-1:I}function m(D){if(D<0)return _;var N=x[D];return N===void 0?_:N}var b=p.H;function w(D){return D===b}function C(D){var N=p[D];return N===void 0?!1:v.has(N)}function E(D,N){var I=D.data.bonds.input;if(N.length===D.data.atoms.count)return I;for(var L=e.Utils.Mask.ofIndices(D.data.atoms.count,N),Y=I.atomAIndex,J=I.atomBIndex,ie=I.type,K=0,Q=0,ne=I.count;Q<ne;Q++)!L.has(Y[Q])||!L.has(J[Q])||K++;for(var ue=e.Utils.DataTable.ofDefinition(s.Tables.Bonds,K),fe=ue.atomAIndex,ge=ue.atomBIndex,ye=ue.type,pe=D.data.atoms.elementSymbol,de=0,Q=0,ne=I.count;Q<ne;Q++){var he=Y[Q],_e=J[Q];if(!(!L.has(he)||!L.has(_e))){fe[de]=he,ge[de]=_e;var ve=C(pe[he])||C(pe[_e]);ye[de]=ve?6:ie[Q],de++}}return ue}var S=e.Utils.ChunkedArray.add;function M(D,N){for(var I=D.model,L=D.mask,Y=D.atomA,J=D.atomB,ie=D.type,K=I.data.residues,Q=K.atomStartIndex,ne=K.atomEndIndex,ue=K.name,fe=I.data.atoms,ge=fe.name,ye=fe.altLoc,pe=fe.elementSymbol,de=I.data.bonds.component.entries.get(ue[N]).map,he=Q[N],_e=ne[N],ve=he;ve<_e-1;ve++)if(L.has(ve)){var Z=de.get(ge[ve]);if(Z){for(var be=ye[ve],Ee=C(pe[ve]),De=ve+1;De<_e;De++)if(L.has(De)){var Fe=ye[De];if(!(be&&Fe&&be!==Fe)){var Ue=Z.get(ge[De]);if(Ue!==void 0){var Qe=Ee||C(pe[De]);S(Y,ve),S(J,De),S(ie,Qe?6:Ue)}}}}}}function A(D,N,I){for(var L=3,Y=D.data.bonds,J=Y.structConn,ie=Y.component,K=D.positions,Q=K.x,ne=K.y,ue=K.z,fe=D.data.atoms,ge=fe.elementSymbol,ye=fe.residueIndex,pe=fe.altLoc,de=D.data.residues.name,he=D.queryContext.lookup3d(),_e=e.Utils.ChunkedArray.create(function(Nt){return new Int32Array(Nt)},N.length*1.33|0,1),ve=e.Utils.ChunkedArray.create(function(Nt){return new Int32Array(Nt)},N.length*1.33|0,1),Z=e.Utils.ChunkedArray.create(function(Nt){return new Uint8Array(Nt)},N.length*1.33|0,1),be=e.Utils.Mask.ofIndices(D.data.atoms.count,N),Ee={model:D,mask:be,atomA:_e,atomB:ve,type:Z},De=-1,Fe=!1,Ue=0,Qe=N;Ue<Qe.length;Ue++){var Ke=Qe[Ue],Te=ye[Ke];!I.forceCompute&&Te!==De&&(Fe=!!ie&&ie.entries.has(de[Te]),Fe&&M(Ee,Te)),De=Te;for(var Ie=h(ge[Ke]),ke=he(Q[Ke],ne[Ke],ue[Ke],L),nt=ke.elements,dt=ke.count,yt=ke.squaredDistances,gt=w(Ie),xt=m(Ie),tt=pe[Ke],pt=v.has(Ie),At=I.forceCompute?void 0:J&&J.getAtomEntries(Ke),Tt=0;Tt<dt;Tt++){var Ct=nt[Tt];if(!(Ct<=Ke||!be.has(Ct))){var Bt=pe[Ct];if(!(tt&&Bt&&tt!==Bt)){var nr=ye[Ct];if(!(Te===nr&&Fe)){var $t=h(ge[Ct]),It=w($t);if(!(gt&&It)){var Lt=Math.sqrt(yt[Tt]);if(Lt!==0){if(At){for(var Pt=!1,He=0,Be=At;He<Be.length;He++){for(var Ge=Be[He],Re=0,Ne=Ge.partners;Re<Ne.length;Re++){var ze=Ne[Re];if(ze.atomIndex===Ct){S(_e,Ke),S(ve,Ct),S(Z,Ge.bondType),Pt=!0;break}}if(Pt)break}if(Pt)continue}if(gt||It){Lt<I.maxHbondLength&&(S(_e,Ke),S(ve,Ct),S(Z,1));continue}var et=f(Ie,$t),it=et>0?et:$t<0?xt:Math.max(xt,m($t)),at=v.has($t);Lt<=it&&(S(_e,Ke),S(ve,Ct),S(Z,pt||at?6:1))}}}}}}}var vt=e.Utils.DataTable.builder(_e.elementCount);vt.addRawColumn("atomAIndex",function(Nt){return new Int32Array(Nt)},e.Utils.ChunkedArray.compact(_e)),vt.addRawColumn("atomBIndex",function(Nt){return new Int32Array(Nt)},e.Utils.ChunkedArray.compact(ve)),vt.addRawColumn("type",function(Nt){return new Uint8Array(Nt)},e.Utils.ChunkedArray.compact(Z));var jt=vt.seal();return jt}function R(D,N,I){return D.data.bonds.input?E(D,N):A(D,N,{maxHbondLength:I&&I.maxHbondLength||1.15,forceCompute:!!(I&&I.forceCompute)})}s.computeBonds=R})(o=e.Structure||(e.Structure={}))})(r=i.Core||(i.Core={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";var d=e.Geometry.LinearAlgebra.Matrix4,p=e.Geometry.LinearAlgebra.Vector4,x=function(){function _(v){if(this.info=v,this.temp=d.zero(),this.tempV=new Float64Array(4),l.Spacegroup[v.spacegroupName]===void 0)throw"'"+v.spacegroupName+"' is not a spacegroup recognized by the library.";this.space=this.getSpace(),this.operators=this.getOperators()}return Object.defineProperty(_.prototype,"operatorCount",{get:function(){return this.operators.length},enumerable:!0,configurable:!0}),_.prototype.getOperatorMatrix=function(v,c,h,f,m){return this.tempV[0]=c,this.tempV[1]=h,this.tempV[2]=f,d.fromTranslation(this.temp,this.tempV),d.mul(m,d.mul(m,d.mul(m,this.space.fromFrac,this.temp),this.operators[v]),this.space.toFrac),m},_.prototype.getSpace=function(){var v=this.info.toFracTransform,c=d.zero();return d.invert(c,v),{toFrac:v,fromFrac:c,baseX:p.transform(p.zero(),p.fromValues(1,0,0,1),v),baseY:p.transform(p.zero(),p.fromValues(0,1,0,1),v),baseZ:p.transform(p.zero(),p.fromValues(0,0,1,1),v)}},_.getOperator=function(v){var c=l.Transform[v[0]],h=l.Transform[v[1]],f=l.Transform[v[2]];return d.ofRows([c,h,f,[0,0,0,1]])},_.prototype.getOperators=function(){var v=l.Group[l.Spacegroup[this.info.spacegroupName]];return v.map(function(c){return _.getOperator(l.Operator[c])})},_}();s.Spacegroup=x;var l;(function(_){_.Transform=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[-1,0,0,0],[0,-1,0,0],[0,0,-1,0],[0,1,0,.5],[1,0,0,.5],[-1,0,0,.5],[0,0,1,.5],[0,-1,0,.5],[0,0,-1,.5],[1,0,0,.25],[0,-1,0,.25],[0,0,1,.25],[-1,0,0,.25],[0,1,0,.25],[0,-1,0,.75],[0,0,1,.75],[0,1,0,.75],[1,0,0,.75],[-1,0,0,.75],[0,0,-1,.25],[0,0,-1,.75],[1,-1,0,0],[-1,1,0,0],[0,0,1,.333333333333333],[0,0,1,.666666666666667],[1,0,0,.666666666666667],[0,1,0,.333333333333333],[0,-1,0,.666666666666667],[1,-1,0,.333333333333333],[-1,1,0,.666666666666667],[-1,0,0,.333333333333333],[1,0,0,.333333333333333],[0,1,0,.666666666666667],[0,-1,0,.333333333333333],[1,-1,0,.666666666666667],[-1,1,0,.333333333333333],[-1,0,0,.666666666666667],[0,0,-1,.333333333333333],[0,0,-1,.666666666666667],[0,0,1,.833333333333333],[0,0,1,.166666666666667],[0,0,-1,.833333333333333],[0,0,-1,.166666666666667]],_.Operator=[[0,1,2],[3,4,5],[3,1,5],[3,6,5],[7,6,2],[8,6,5],[0,4,2],[0,4,9],[7,10,2],[7,10,9],[0,10,2],[8,10,5],[3,1,11],[3,6,11],[0,10,9],[8,6,11],[3,4,2],[0,4,5],[3,4,9],[7,10,5],[8,4,9],[8,10,9],[8,10,2],[0,6,9],[3,10,9],[0,10,11],[7,1,9],[8,1,11],[7,4,11],[7,6,9],[7,10,11],[3,10,2],[8,1,5],[0,4,11],[3,1,2],[3,1,9],[7,4,2],[8,1,2],[8,1,9],[3,6,9],[7,4,9],[8,6,2],[8,6,9],[3,6,2],[12,13,14],[15,16,14],[12,17,18],[15,19,18],[20,13,18],[21,16,18],[20,17,14],[21,19,14],[0,1,5],[8,10,11],[7,6,11],[7,6,5],[8,4,2],[7,4,5],[7,1,5],[7,1,11],[0,10,5],[0,1,11],[0,6,11],[0,6,5],[3,10,11],[8,4,11],[15,13,22],[12,16,22],[15,17,23],[12,19,23],[21,13,23],[20,16,23],[21,17,22],[20,19,22],[4,0,2],[1,3,2],[4,0,14],[1,3,18],[4,0,9],[1,3,9],[4,0,18],[1,3,14],[10,7,9],[6,8,9],[4,7,14],[6,3,18],[10,0,18],[1,8,14],[1,3,5],[4,0,5],[6,8,11],[10,7,11],[1,3,11],[4,0,11],[10,7,2],[6,8,2],[3,10,22],[7,1,23],[8,4,23],[0,6,22],[1,0,5],[4,3,5],[1,0,23],[4,3,22],[10,7,14],[6,8,18],[8,6,22],[7,10,23],[4,3,11],[1,0,11],[1,0,22],[4,3,23],[10,7,18],[6,8,14],[8,6,23],[7,10,22],[6,7,11],[10,8,11],[8,1,23],[0,10,22],[3,6,22],[7,4,23],[4,3,2],[1,0,2],[10,8,2],[6,7,2],[4,3,9],[1,0,9],[10,8,9],[6,7,9],[4,8,14],[6,0,18],[10,3,18],[1,7,14],[4,8,18],[6,0,14],[10,3,14],[1,7,18],[6,7,5],[10,8,5],[6,8,5],[10,7,5],[8,1,22],[0,10,23],[3,6,23],[7,4,22],[4,24,2],[25,3,2],[4,24,26],[25,3,27],[4,24,27],[25,3,26],[28,29,26],[30,31,26],[32,33,26],[34,35,27],[36,37,27],[38,39,27],[2,0,1],[1,2,0],[1,25,5],[24,0,5],[39,36,40],[35,38,40],[37,34,40],[33,30,41],[29,32,41],[31,28,41],[5,3,4],[4,5,3],[25,1,5],[0,24,5],[24,4,5],[3,25,5],[4,3,41],[25,1,40],[24,4,41],[3,25,40],[4,3,40],[25,1,41],[24,4,40],[3,25,41],[35,34,40],[37,36,40],[39,38,40],[29,28,41],[31,30,41],[33,32,41],[3,5,4],[5,4,3],[25,1,2],[0,24,2],[24,4,2],[3,25,2],[25,1,9],[0,24,9],[24,4,9],[3,25,9],[30,33,26],[32,29,26],[28,31,26],[36,39,27],[38,35,27],[34,37,27],[0,2,1],[2,1,0],[30,33,42],[32,29,42],[28,31,42],[36,39,43],[38,35,43],[34,37,43],[7,9,6],[9,6,7],[25,1,11],[0,24,11],[24,4,11],[3,25,11],[35,34,44],[37,36,44],[39,38,44],[29,28,45],[31,30,45],[33,32,45],[8,11,10],[11,10,8],[1,25,2],[24,0,2],[1,25,42],[24,0,43],[1,25,43],[24,0,42],[1,25,27],[24,0,26],[1,25,26],[24,0,27],[1,25,9],[24,0,9],[4,24,5],[25,3,5],[4,24,11],[25,3,11],[1,0,40],[4,3,44],[0,24,45],[1,0,41],[4,3,45],[0,24,44],[0,24,40],[0,24,41],[2,3,4],[5,3,1],[5,0,4],[4,2,3],[1,5,3],[4,5,0],[2,7,6],[2,8,10],[5,8,6],[5,7,10],[1,9,7],[4,9,8],[1,11,8],[4,11,7],[9,0,6],[9,3,10],[11,3,6],[11,0,10],[6,2,7],[10,2,8],[6,5,8],[10,5,7],[9,7,1],[9,8,4],[11,8,1],[11,7,4],[6,9,0],[10,9,3],[6,11,3],[10,11,0],[9,7,6],[9,8,10],[11,8,6],[11,7,10],[6,9,7],[10,9,8],[6,11,8],[10,11,7],[2,3,10],[5,8,1],[11,0,4],[10,2,3],[1,5,8],[4,11,0],[5,0,1],[2,0,4],[2,3,1],[1,5,0],[4,2,0],[1,2,3],[11,8,10],[11,7,6],[9,7,10],[9,8,6],[10,11,8],[6,11,7],[10,9,7],[6,9,8],[5,8,10],[5,7,6],[2,7,10],[2,8,6],[4,11,8],[1,11,7],[4,9,7],[1,9,8],[11,3,10],[11,0,6],[9,0,10],[9,3,6],[10,5,8],[6,5,7],[10,2,7],[6,2,8],[11,8,4],[11,7,1],[9,7,4],[9,8,1],[10,11,3],[6,11,0],[10,9,0],[6,9,3],[22,15,13],[22,12,16],[14,12,13],[14,15,16],[13,22,15],[16,22,12],[13,14,12],[16,14,15],[22,21,17],[22,20,19],[14,20,17],[14,21,19],[13,23,21],[16,23,20],[13,18,20],[16,18,21],[23,15,17],[23,12,19],[18,12,17],[18,15,19],[17,22,21],[19,22,20],[17,14,20],[19,14,21],[23,21,13],[23,20,16],[18,20,13],[18,21,16],[17,23,15],[19,23,12],[17,18,12],[19,18,15],[5,0,6],[2,7,4],[9,3,1],[6,5,0],[4,2,7],[1,9,3],[0,2,4],[3,2,1],[0,5,1],[2,1,3],[2,4,0],[5,1,0],[7,9,10],[8,9,6],[7,11,6],[9,6,8],[9,10,7],[11,6,7],[1,7,11],[4,8,11],[1,8,9],[4,7,9],[0,9,10],[3,9,6],[3,11,10],[0,11,6],[2,6,8],[2,10,7],[5,6,7],[5,10,8],[6,0,11],[10,3,11],[6,3,9],[10,0,9],[7,2,10],[8,2,6],[8,5,10],[7,5,6],[9,1,8],[9,4,7],[11,1,7],[11,4,8],[7,9,4],[8,9,1],[8,11,4],[7,11,1],[9,6,3],[9,10,0],[11,6,0],[11,10,3],[19,12,23],[13,15,22],[16,21,18],[17,20,14],[20,14,17],[21,18,16],[15,22,13],[12,23,19],[18,16,21],[14,17,20],[23,19,12],[22,13,15],[19,20,22],[13,21,23],[16,15,14],[17,12,18],[20,18,13],[21,14,19],[15,23,17],[12,22,16],[18,19,15],[14,13,12],[23,16,20],[22,17,21],[16,12,22],[17,15,23],[19,21,14],[13,20,18],[12,14,13],[15,18,19],[21,22,17],[20,23,16],[14,16,15],[18,17,12],[22,19,20],[23,13,21],[16,20,23],[17,21,22],[19,15,18],[13,12,14],[12,18,17],[15,14,16],[21,23,13],[20,22,19],[14,19,21],[18,13,20],[22,16,12],[23,17,15],[19,12,22],[17,21,23],[16,15,18],[13,20,14],[20,14,13],[15,18,16],[21,23,17],[12,22,19],[18,16,15],[14,13,20],[22,19,12],[23,17,21],[3,2,4],[3,5,1],[0,5,4],[2,4,3],[5,1,3],[5,4,0],[1,7,9],[4,8,9],[1,8,11],[4,7,11],[0,9,6],[3,9,10],[3,11,6],[0,11,10],[2,6,7],[2,10,8],[5,6,8],[5,10,7],[6,0,9],[10,3,9],[6,3,11],[10,0,11],[7,2,6],[8,2,10],[8,5,6],[7,5,10],[9,1,7],[9,4,8],[11,1,8],[11,4,7],[7,9,1],[8,9,4],[8,11,1],[7,11,4],[9,6,0],[9,10,3],[11,6,3],[11,10,0],[8,9,10],[8,11,6],[7,11,10],[9,10,8],[11,6,8],[11,10,7],[6,0,2],[10,3,2],[6,3,5],[10,0,5],[7,2,1],[8,2,4],[8,5,1],[7,5,4],[9,1,0],[9,4,3],[11,1,3],[11,4,0],[1,7,2],[4,8,2],[1,8,5],[4,7,5],[0,9,1],[3,9,4],[3,11,1],[0,11,4],[2,6,0],[2,10,3],[5,6,3],[5,10,0],[0,2,6],[3,2,10],[3,5,6],[0,5,10],[2,1,7],[2,4,8],[5,1,8],[5,4,7],[16,12,14],[13,21,18],[19,15,23],[17,20,22],[12,14,16],[21,18,13],[15,23,19],[20,22,17],[14,16,12],[18,13,21],[23,19,15],[22,17,20],[19,20,18],[17,15,14],[16,21,22],[13,12,23],[20,18,19],[15,14,17],[21,22,16],[12,23,13],[18,19,20],[14,17,15],[22,16,21],[23,13,12],[6,0,5],[10,3,5],[6,3,2],[10,0,2],[7,2,4],[8,2,1],[8,5,4],[7,5,1],[9,1,3],[9,4,0],[11,1,0],[11,4,3],[1,7,5],[4,8,5],[1,8,2],[4,7,2],[0,9,4],[3,9,1],[3,11,4],[0,11,1],[2,6,3],[2,10,0],[5,6,0],[5,10,3],[0,2,10],[3,2,6],[3,5,10],[0,5,6],[2,1,8],[2,4,7],[5,1,7],[5,4,8],[21,17,23],[20,16,22],[12,13,18],[15,19,14],[23,21,17],[22,20,16],[18,12,13],[14,15,19],[17,23,21],[16,22,20],[13,18,12],[19,14,15],[21,13,22],[20,19,23],[12,17,14],[15,16,18],[23,15,13],[22,12,19],[18,20,17],[14,21,16],[17,22,15],[16,23,12],[13,14,20],[19,18,21],[15,17,22],[12,16,23],[20,13,14],[21,19,18],[22,21,13],[23,20,19],[14,12,17],[18,15,16],[13,23,15],[19,22,12],[17,18,20],[16,14,21],[15,13,23],[12,19,22],[20,17,18],[21,16,14],[22,15,17],[23,12,16],[14,20,13],[18,21,19],[13,22,21],[19,23,20],[17,14,12],[16,18,15],[6,5,3],[4,9,3],[9,3,4],[5,7,4],[4,5,7],[5,3,6]],_.Group=[[0],[0,1],[0,2],[0,3],[0,2,4,5],[0,6],[0,7],[0,6,4,8],[0,7,4,9],[0,6,2,1],[0,3,1,10],[0,6,2,1,4,8,5,11],[0,12,1,7],[0,1,13,14],[0,12,1,7,4,15,11,9],[0,16,2,17],[0,18,12,17],[0,16,5,19],[0,20,13,19],[0,18,12,17,4,21,15,19],[0,16,2,17,4,22,5,19],[0,16,2,17,23,24,13,25,26,20,27,28,4,22,5,19],[0,16,17,2,29,21,30,15],[0,20,13,19,29,31,32,33],[0,16,6,34],[0,18,7,34],[0,16,7,35],[0,16,36,37],[0,18,36,38],[0,16,14,39],[0,20,40,34],[0,16,8,41],[0,18,8,42],[0,16,9,42],[0,16,6,34,4,22,8,41],[0,18,7,34,4,21,9,41],[0,16,7,35,4,22,9,42],[0,16,6,34,23,24,14,39],[0,16,10,43,23,24,7,35],[0,16,36,37,23,24,9,42],[0,16,8,41,23,24,40,38],[0,16,6,34,23,24,14,39,26,20,40,38,4,22,8,41],[0,16,44,45,23,24,46,47,26,20,48,49,4,22,50,51],[0,16,6,34,29,21,9,42],[0,16,8,41,29,21,7,35],[0,16,36,37,29,21,14,39],[0,16,2,17,1,52,6,34],[0,16,2,17,53,54,9,42],[0,16,12,33,1,52,7,35],[0,16,2,17,11,55,8,41],[0,56,2,57,1,58,6,37],[0,56,15,25,1,58,9,39],[0,20,27,17,1,59,40,34],[0,56,12,28,1,58,7,38],[0,16,5,19,1,52,8,41],[0,22,13,28,1,55,14,38],[0,18,13,60,1,61,14,43],[0,16,15,30,1,52,9,42],[0,16,5,19,11,55,6,34],[0,21,12,19,1,54,7,41],[0,20,13,19,1,59,14,41],[0,20,3,30,1,59,10,42],[0,18,12,17,1,61,7,34,4,21,15,19,11,54,9,41],[0,24,13,17,1,62,14,34,4,20,27,19,11,59,40,41],[0,16,2,17,1,52,6,34,4,22,5,19,11,55,8,41],[0,16,12,33,1,52,7,35,4,22,15,30,11,55,9,42],[0,31,3,17,1,63,10,34,4,56,32,19,11,58,36,41],[0,22,2,19,64,59,14,38,4,16,5,17,65,62,40,39],[0,16,2,17,1,52,6,34,23,24,13,25,64,62,14,39,26,20,27,28,65,59,40,38,4,22,5,19,11,55,8,41],[0,16,2,17,66,67,44,45,23,24,13,25,68,69,46,47,26,20,27,28,70,71,48,49,4,22,5,19,72,73,50,51],[0,16,2,17,1,52,6,34,29,21,15,30,53,54,9,42],[0,16,5,19,1,52,8,41,29,21,12,33,53,54,7,35],[0,20,13,19,1,59,14,41,29,31,32,33,53,63,36,35],[0,31,3,17,1,63,10,34,29,20,27,30,53,59,40,42],[0,16,74,75],[0,18,76,77],[0,16,78,79],[0,18,80,81],[0,16,74,75,29,21,82,83],[0,21,84,85,29,16,86,87],[0,16,88,89],[0,16,88,89,29,21,90,91],[0,16,74,75,1,52,88,89],[0,16,78,79,1,52,92,93],[0,16,94,95,11,55,88,89],[0,16,82,83,53,54,88,89],[0,16,74,75,1,52,88,89,29,21,82,83,53,54,90,91],[0,21,84,85,96,97,88,91,29,16,86,87,98,99,90,89],[0,16,74,75,2,17,100,101],[0,16,94,95,5,19,100,101],[0,18,76,77,2,33,102,103],[0,18,104,105,106,107,100,108],[0,16,78,79,2,17,109,108],[0,16,82,83,15,30,100,101],[0,18,80,81,2,33,110,111],[0,18,112,113,114,115,100,108],[0,16,74,75,2,17,100,101,29,21,82,83,15,30,116,117],[0,21,84,85,118,119,116,101,29,16,86,87,120,121,100,117],[0,16,74,75,6,34,122,123],[0,16,74,75,8,41,124,125],[0,16,78,79,7,35,122,123],[0,16,82,83,9,42,122,123],[0,16,74,75,7,35,126,127],[0,16,74,75,9,42,128,129],[0,16,78,79,6,34,126,127],[0,16,78,79,8,41,128,129],[0,16,74,75,6,34,122,123,29,21,82,83,9,42,128,129],[0,16,74,75,7,35,126,127,29,21,82,83,8,41,124,125],[0,21,84,85,6,42,130,131,29,16,86,87,9,34,132,133],[0,21,84,85,7,41,134,135,29,16,86,87,8,35,136,137],[0,16,89,88,2,17,122,123],[0,16,89,88,12,33,126,127],[0,16,89,88,5,19,124,125],[0,16,89,88,15,30,128,129],[0,16,88,89,6,34,100,101],[0,16,89,88,7,35,109,108],[0,16,89,88,8,41,138,139],[0,16,89,88,9,42,116,117],[0,16,89,88,6,34,100,101,29,21,91,90,9,42,116,117],[0,16,89,88,7,35,109,108,29,21,91,90,8,41,138,139],[0,16,89,88,2,17,122,123,29,21,91,90,15,30,128,129],[0,16,89,88,118,121,132,131,29,21,91,90,120,119,130,133],[0,16,74,75,2,17,100,101,1,52,88,89,6,34,122,123],[0,16,74,75,12,33,109,108,1,52,88,89,7,35,126,127],[0,16,74,75,2,17,100,101,11,55,140,141,8,41,124,125],[0,16,74,75,2,17,100,101,53,54,90,91,9,42,128,129],[0,16,74,75,5,19,138,139,1,52,88,89,8,41,124,125],[0,16,74,75,15,30,116,117,1,52,88,89,9,42,128,129],[0,16,94,95,5,19,100,101,11,55,88,89,6,34,124,125],[0,16,94,95,15,30,109,108,11,55,88,89,7,35,128,129],[0,16,78,79,2,17,109,108,1,52,92,93,6,34,126,127],[0,16,78,79,12,33,100,101,1,52,92,93,7,35,122,123],[0,16,82,83,12,33,138,139,53,54,88,89,8,41,126,127],[0,16,82,83,2,17,116,117,53,54,88,89,9,42,122,123],[0,16,78,79,5,19,116,117,1,52,92,93,8,41,128,129],[0,16,82,83,15,30,100,101,1,52,90,91,9,42,122,123],[0,16,82,83,15,30,100,101,53,54,88,89,6,34,128,129],[0,16,82,83,5,19,109,108,53,54,88,89,7,35,124,125],[0,16,74,75,2,17,100,101,1,52,88,89,6,34,122,123,29,21,82,83,15,30,116,117,53,54,90,91,9,42,128,129],[0,16,74,75,12,33,109,108,1,52,88,89,7,35,126,127,29,21,82,83,5,19,138,139,53,54,90,91,8,41,124,125],[0,21,84,85,118,119,116,101,96,97,88,91,9,34,132,133,29,16,86,87,120,121,100,117,98,99,90,89,6,42,130,131],[0,21,84,85,142,143,138,108,96,97,88,91,8,35,136,137,29,16,86,87,144,145,109,139,98,99,90,89,7,41,134,135],[0,146,147],[0,148,149],[0,150,151],[0,146,147,152,153,154,155,156,157],[0,158,159],[0,146,147,1,160,161],[0,146,147,1,160,161,152,153,154,162,163,164,155,156,157,165,166,167],[0,158,159,1,168,169],[0,146,147,101,170,171],[0,146,147,100,172,173],[0,148,149,174,175,171],[0,148,149,100,176,177],[0,150,151,178,179,171],[0,150,151,100,180,181],[0,146,147,100,172,173,152,153,154,182,183,184,155,156,157,185,186,187],[0,158,159,101,188,189],[0,146,147,122,190,191],[0,146,147,123,192,193],[0,146,147,126,194,195],[0,146,147,127,196,197],[0,146,147,122,190,191,152,153,154,198,199,200,155,156,157,201,202,203],[0,158,159,123,204,205],[0,146,147,126,194,195,152,153,154,206,207,208,155,156,157,209,210,211],[0,158,159,129,212,213],[0,146,147,101,170,171,1,160,161,123,192,193],[0,146,147,108,214,215,1,160,161,127,196,197],[0,146,147,100,172,173,1,160,161,122,190,191],[0,146,147,109,216,217,1,160,161,126,194,195],[0,146,147,100,172,173,1,160,161,122,190,191,152,153,154,182,183,184,162,163,164,198,199,200,155,156,157,185,186,187,165,166,167,201,202,203],[0,158,159,101,188,189,1,168,169,123,204,205],[0,146,147,109,216,217,1,160,161,126,194,195,152,153,154,218,219,220,162,163,164,206,207,208,155,156,157,221,222,223,165,166,167,209,210,211],[0,158,159,117,224,225,1,168,169,129,212,213],[0,146,147,16,226,227],[0,148,149,18,228,229],[0,150,151,18,230,231],[0,150,151,16,232,233],[0,148,149,16,234,235],[0,146,147,18,236,237],[0,146,147,52,238,239],[0,146,147,16,226,227,1,160,161,52,238,239],[0,146,147,18,236,237,1,160,161,61,240,241],[0,146,147,16,226,227,100,172,173,101,170,171],[0,148,149,18,228,229,242,172,181,243,214,244],[0,150,151,18,230,231,245,172,177,246,214,247],[0,150,151,16,232,233,245,172,177,174,170,248],[0,148,149,16,234,235,242,172,181,178,170,249],[0,146,147,18,236,237,100,172,173,108,214,215],[0,146,147,16,226,227,122,190,191,123,192,193],[0,146,147,16,226,227,126,194,195,127,196,197],[0,146,147,18,236,237,126,194,195,123,192,193],[0,146,147,18,236,237,122,190,191,127,196,197],[0,146,147,52,238,239,122,190,191,101,170,171],[0,146,147,61,240,241,126,194,195,101,170,171],[0,146,147,52,238,239,100,172,173,123,192,193],[0,146,147,61,240,241,100,172,173,127,196,197],[0,146,147,16,226,227,100,172,173,101,170,171,1,160,161,52,239,238,122,190,191,123,192,193],[0,146,147,16,226,227,109,216,217,108,214,215,1,160,161,52,239,238,126,194,195,127,196,197],[0,146,147,18,236,237,109,216,217,101,170,171,1,160,161,61,241,240,126,194,195,123,192,193],[0,146,147,18,236,237,100,172,173,108,214,215,1,160,161,61,241,240,122,190,191,127,196,197],[0,16,2,17,158,250,251,252,159,253,254,255],[0,16,2,17,158,250,251,252,159,253,254,255,23,24,13,25,256,257,258,259,260,261,262,263,26,20,27,28,264,265,266,267,268,269,270,271,4,22,5,19,272,273,274,275,276,277,278,279],[0,16,2,17,158,250,251,252,159,253,254,255,29,21,15,30,280,281,282,283,284,285,286,287],[0,20,13,19,158,273,266,259,159,261,278,271],[0,20,13,19,158,273,266,259,159,261,278,271,29,31,32,33,280,288,289,290,284,291,292,293],[0,16,2,17,158,250,251,252,159,253,254,255,1,52,6,34,168,294,295,296,169,297,298,299],[0,16,2,17,158,250,251,252,159,253,254,255,53,54,9,42,300,301,302,303,304,305,306,307],[0,16,2,17,158,250,251,252,159,253,254,255,1,52,6,34,168,294,295,296,169,297,298,299,23,24,13,25,256,257,258,259,260,261,262,263,64,62,14,39,308,309,310,311,312,313,314,315,26,20,27,28,264,265,266,267,268,269,270,271,65,59,40,38,316,317,318,319,320,321,322,323,4,22,5,19,272,273,274,275,276,277,278,279,11,55,8,41,324,325,326,327,328,329,330,331],[0,16,2,17,158,250,251,252,159,253,254,255,66,67,44,45,332,333,334,335,336,337,338,339,23,24,13,25,256,257,258,259,260,261,262,263,68,69,46,47,340,341,342,343,344,345,346,347,26,20,27,28,264,265,266,267,268,269,270,271,70,71,48,49,348,349,350,351,352,353,354,355,4,22,5,19,272,273,274,275,276,277,278,279,72,73,50,51,356,357,358,359,360,361,362,363],[0,16,2,17,158,250,251,252,159,253,254,255,1,52,6,34,168,294,295,296,169,297,298,299,29,21,15,30,280,281,282,283,284,285,286,287,53,54,9,42,300,301,302,303,304,305,306,307],[0,20,13,19,158,273,266,259,159,261,278,271,1,59,14,41,168,325,318,311,169,313,330,323],[0,20,13,19,158,273,266,259,159,261,278,271,1,59,14,41,168,325,318,311,169,313,330,323,29,31,32,33,280,288,289,290,284,291,292,293,53,63,36,35,300,364,365,366,304,367,368,369],[0,16,2,17,158,250,251,252,159,253,254,255,100,101,75,74,370,371,188,372,373,374,375,189],[0,16,2,17,158,250,251,252,159,253,254,255,116,117,83,82,376,377,224,378,379,380,381,225],[0,16,2,17,158,250,251,252,159,253,254,255,100,101,75,74,370,371,188,372,373,374,375,189,23,24,13,25,256,257,258,259,260,261,262,263,382,383,384,385,386,387,388,389,390,391,392,393,26,20,27,28,264,265,266,267,268,269,270,271,394,395,396,397,398,399,400,401,402,403,404,405,4,22,5,19,272,273,274,275,276,277,278,279,138,139,95,94,406,407,408,409,410,411,412,413],[0,24,5,28,158,265,258,275,159,277,270,263,414,415,416,417,418,419,420,421,422,423,424,425,23,16,27,19,256,273,251,267,260,269,278,255,426,427,428,429,430,431,432,433,434,435,436,437,26,22,13,17,264,250,274,259,268,261,254,279,438,439,440,441,442,443,444,445,446,447,448,449,4,20,2,25,272,257,266,252,276,253,262,271,450,451,452,453,454,455,456,457,458,459,460,461],[0,16,2,17,158,250,251,252,159,253,254,255,100,101,75,74,370,371,188,372,373,374,375,189,29,21,15,30,280,281,282,283,284,285,286,287,116,117,83,82,376,377,224,378,379,380,381,225],[0,20,13,19,158,273,266,259,159,261,278,271,450,415,440,429,454,431,420,445,458,447,436,425],[0,20,13,19,158,273,266,259,159,261,278,271,462,463,464,465,466,467,468,469,470,471,472,473],[0,20,13,19,158,273,266,259,159,261,278,271,462,463,464,465,466,467,468,469,470,471,472,473,29,31,32,33,280,288,289,290,284,291,292,293,450,415,440,429,454,431,420,445,458,447,436,425],[0,16,2,17,158,250,251,252,159,253,254,255,123,122,88,89,204,474,475,476,205,477,478,479],[0,16,2,17,158,250,251,252,159,253,254,255,123,122,88,89,204,474,475,476,205,477,478,479,23,24,13,25,256,257,258,259,260,261,262,263,480,481,482,483,484,485,486,487,488,489,490,491,26,20,27,28,264,265,266,267,268,269,270,271,492,493,494,495,496,497,498,499,500,501,502,503,4,22,5,19,272,273,274,275,276,277,278,279,125,124,140,141,504,505,506,507,508,509,510,511],[0,16,2,17,158,250,251,252,159,253,254,255,123,122,88,89,204,474,475,476,205,477,478,479,29,21,15,30,280,281,282,283,284,285,286,287,129,128,90,91,212,512,513,514,213,515,516,517],[0,16,2,17,158,250,251,252,159,253,254,255,129,128,90,91,212,512,513,514,213,515,516,517],[0,16,2,17,158,250,251,252,159,253,254,255,129,128,90,91,212,512,513,514,213,515,516,517,23,24,13,25,256,257,258,259,260,261,262,263,518,519,520,521,522,523,524,525,526,527,528,529,26,20,27,28,264,265,266,267,268,269,270,271,530,531,532,533,534,535,536,537,538,539,540,541,4,22,5,19,272,273,274,275,276,277,278,279,127,126,92,93,542,543,544,545,546,547,548,549],[0,20,13,19,158,273,266,259,159,261,278,271,550,551,552,553,554,555,556,557,558,559,560,561,29,31,32,33,280,288,289,290,284,291,292,293,562,563,564,565,566,567,568,569,570,571,572,573],[0,16,2,17,158,250,251,252,159,253,254,255,100,101,75,74,370,371,188,372,373,374,375,189,1,52,6,34,168,294,295,296,169,297,298,299,122,123,89,88,475,476,204,474,479,478,477,205],[0,16,2,17,158,250,251,252,159,253,254,255,100,101,75,74,370,371,188,372,373,374,375,189,53,54,9,42,300,301,302,303,304,305,306,307,128,129,91,90,513,514,212,512,517,516,515,213],[0,16,2,17,158,250,251,252,159,253,254,255,116,117,83,82,376,377,224,378,379,380,381,225,1,52,6,34,168,294,295,296,169,297,298,299,128,129,91,90,513,514,212,512,517,516,515,213],[0,16,2,17,158,250,251,252,159,253,254,255,116,117,83,82,376,377,224,378,379,380,381,225,53,54,9,42,300,301,302,303,304,305,306,307,122,123,89,88,475,476,204,474,479,478,477,205],[0,16,2,17,158,250,251,252,159,253,254,255,100,101,75,74,370,371,188,372,373,374,375,189,1,52,6,34,168,294,295,296,169,297,298,299,122,123,89,88,475,476,204,474,479,478,477,205,23,24,13,25,256,257,258,259,260,261,262,263,382,383,384,385,386,387,388,389,390,391,392,393,64,62,14,39,308,309,310,311,312,313,314,315,481,480,483,482,486,487,484,485,491,490,489,488,26,20,27,28,264,265,266,267,268,269,270,271,394,395,396,397,398,399,400,401,402,403,404,405,65,59,40,38,316,317,318,319,320,321,322,323,493,492,495,494,498,499,496,497,503,502,501,500,4,22,5,19,272,273,274,275,276,277,278,279,138,139,95,94,406,407,408,409,410,411,412,413,11,55,8,41,324,325,326,327,328,329,330,331,124,125,141,140,506,507,504,505,511,510,509,508],[0,16,2,17,158,250,251,252,159,253,254,255,116,117,83,82,376,377,224,378,379,380,381,225,1,52,6,34,168,294,295,296,169,297,298,299,128,129,91,90,513,514,212,512,517,516,515,213,23,24,13,25,256,257,258,259,260,261,262,263,574,575,576,577,578,579,580,581,582,583,584,585,64,62,14,39,308,309,310,311,312,313,314,315,519,518,521,520,524,525,522,523,529,528,527,526,26,20,27,28,264,265,266,267,268,269,270,271,586,587,588,589,590,591,592,593,594,595,596,597,65,59,40,38,316,317,318,319,320,321,322,323,531,530,533,532,536,537,534,535,541,540,539,538,4,22,5,19,272,273,274,275,276,277,278,279,109,108,79,78,598,599,600,601,602,603,604,605,11,55,8,41,324,325,326,327,328,329,330,331,126,127,93,92,544,545,542,543,549,548,547,546],[0,24,5,28,158,265,258,275,159,277,270,263,414,415,416,417,418,419,420,421,422,423,424,425,66,69,50,49,332,349,342,359,336,361,354,347,493,123,483,140,498,507,204,485,503,490,509,205,23,16,27,19,256,273,251,267,260,269,278,255,426,427,428,429,430,431,432,433,434,435,436,437,68,67,48,51,340,357,334,351,344,353,362,339,124,480,89,494,506,499,484,474,511,478,501,488,26,22,13,17,264,250,274,259,268,261,254,279,438,439,440,441,442,443,444,445,446,447,448,449,70,73,46,45,348,333,358,343,352,345,338,363,122,492,141,482,475,487,496,505,479,510,489,500,4,20,2,25,272,257,266,252,276,253,262,271,450,451,452,453,454,455,456,457,458,459,460,461,72,71,44,47,356,341,350,335,360,337,346,355,481,125,495,88,486,476,504,497,491,502,477,508],[0,24,5,28,158,265,258,275,159,277,270,263,414,415,416,417,418,419,420,421,422,423,424,425,606,607,608,609,610,611,612,613,614,615,616,617,531,129,521,92,536,545,212,523,541,528,547,213,23,16,27,19,256,273,251,267,260,269,278,255,426,427,428,429,430,431,432,433,434,435,436,437,618,619,620,621,622,623,624,625,626,627,628,629,126,518,91,532,544,537,522,512,549,516,539,526,26,22,13,17,264,250,274,259,268,261,254,279,438,439,440,441,442,443,444,445,446,447,448,449,630,631,632,633,634,635,636,637,638,639,640,641,128,530,93,520,513,525,534,543,517,548,527,538,4,20,2,25,272,257,266,252,276,253,262,271,450,451,452,453,454,455,456,457,458,459,460,461,642,643,644,645,646,647,648,649,650,651,652,653,519,127,533,90,524,514,542,535,529,540,515,546],[0,16,2,17,158,250,251,252,159,253,254,255,100,101,75,74,370,371,188,372,373,374,375,189,1,52,6,34,168,294,295,296,169,297,298,299,122,123,89,88,475,476,204,474,479,478,477,205,29,21,15,30,280,281,282,283,284,285,286,287,116,117,83,82,376,377,224,378,379,380,381,225,53,54,9,42,300,301,302,303,304,305,306,307,128,129,91,90,513,514,212,512,517,516,515,213],[0,20,13,19,158,273,266,259,159,261,278,271,462,463,464,465,466,467,468,469,470,471,472,473,1,59,14,41,168,325,318,311,169,313,330,323,551,550,553,552,556,557,554,555,561,560,559,558,29,31,32,33,280,288,289,290,284,291,292,293,450,415,440,429,454,431,420,445,458,447,436,425,53,63,36,35,300,364,365,366,304,367,368,369,563,562,565,564,568,569,566,567,573,572,571,570],[0,16],[0,18],[0,16,26,20],[0,2,23,13],[0,3,4,32],[0,2,29,15],[0,3,29,27],[0,52],[0,63],[0,52,26,59],[0,63,26,54],[0,52,16,1],[0,18,1,61],[0,52,16,1,26,59,20,65],[0,31,1,63],[0,1,24,62],[0,31,1,63,26,21,65,54],[0,2,57,56],[0,60,3,16],[0,22,57,3],[0,2,28,20],[0,17,13,24],[0,20,19,13,4,24,17,27],[0,22,57,3,4,16,60,32],[0,22,57,3,23,20,30,12,26,24,33,15,4,16,60,32],[0,22,57,3,29,18,27,25],[0,22,3,57,1,55,10,37],[0,22,385,396,3,57,109,117],[0,22,57,3,159,279,654,655,158,274,656,657,29,18,25,27,284,658,262,269,280,659,257,267]],_.Spacegroup={"P 1":0,"P -1":1,"P 1 2 1":2,"P 1 21 1":3,"C 1 2 1":4,"P 1 m 1":5,"P 1 c 1":6,"C 1 m 1":7,"C 1 c 1":8,"P 1 2/m 1":9,"P 1 21/m 1":10,"C 1 2/m 1":11,"P 1 2/c 1":12,"P 1 21/c 1":13,"C 1 2/c 1":14,"P 2 2 2":15,"P 2 2 21":16,"P 21 21 2":17,"P 21 21 21":18,"C 2 2 21":19,"C 2 2 2":20,"F 2 2 2":21,"I 2 2 2":22,"I 21 21 21":23,"P m m 2":24,"P m c 21":25,"P c c 2":26,"P m a 2":27,"P c a 21":28,"P n c 2":29,"P m n 21":30,"P b a 2":31,"P n a 21":32,"P n n 2":33,"C m m 2":34,"C m c 21":35,"C c c 2":36,"A m m 2":37,"A b m 2":38,"A m a 2":39,"A b a 2":40,"F m m 2":41,"F d d 2":42,"I m m 2":43,"I b a 2":44,"I m a 2":45,"P 2/m 2/m 2/m":46,"P m m m":46,"P 2/n 2/n 2/n":47,"P n n n":47,"P 2/c 2/c 2/m":48,"P c c m":48,"P 2/b 2/a 2/n":49,"P b a n":49,"P 21/m 2/m 2/a":50,"P m m a":50,"P 2/n 21/n 2/a":51,"P n n a":51,"P 2/m 2/n 21/a":52,"P m n a":52,"P 21/c 2/c 2/a":53,"P c c a":53,"P 21/b 21/a 2/m":54,"P b a m":54,"P 21/c 21/c 2/n":55,"P c c n":55,"P 2/b 21/c 21/m":56,"P b c m":56,"P 21/n 21/n 2/m":57,"P n n m":57,"P 21/m 21/m 2/n":58,"P m m n":58,"P 21/b 2/c 21/n":59,"P b c n":59,"P 21/b 21/c 21/a":60,"P b c a":60,"P 21/n 21/m 21/a":61,"P n m a":61,"C 2/m 2/c 21/m":62,"C m c m":62,"C 2/m 2/c 21/a":63,"C m c a":63,"C 2/m 2/m 2/m":64,"C m m m":64,"C 2/c 2/c 2/m":65,"C c c m":65,"C 2/m 2/m 2/a":66,"C m m a":66,"C 2/c 2/c 2/a":67,"C c c a":67,"F 2/m 2/m 2/m":68,"F m m m":68,"F 2/d 2/d 2/d":69,"F d d d":69,"I 2/m 2/m 2/m":70,"I m m m":70,"I 2/b 2/a 2/m":71,"I b a m":71,"I 21/b 21/c 21/a":72,"I b c a":72,"I 21/m 21/m 21/a":73,"I m m a":73,"P 4":74,"P 41":75,"P 42":76,"P 43":77,"I 4":78,"I 41":79,"P -4":80,"I -4":81,"P 4/m":82,"P 42/m":83,"P 4/n":84,"P 42/n":85,"I 4/m":86,"I 41/a":87,"P 4 2 2":88,"P 4 21 2":89,"P 41 2 2":90,"P 41 21 2":91,"P 42 2 2":92,"P 42 21 2":93,"P 43 2 2":94,"P 43 21 2":95,"I 4 2 2":96,"I 41 2 2":97,"P 4 m m":98,"P 4 b m":99,"P 42 c m":100,"P 42 n m":101,"P 4 c c":102,"P 4 n c":103,"P 42 m c":104,"P 42 b c":105,"I 4 m m":106,"I 4 c m":107,"I 41 m d":108,"I 41 c d":109,"P -4 2 m":110,"P -4 2 c":111,"P -4 21 m":112,"P -4 21 c":113,"P -4 m 2":114,"P -4 c 2":115,"P -4 b 2":116,"P -4 n 2":117,"I -4 m 2":118,"I -4 c 2":119,"I -4 2 m":120,"I -4 2 d":121,"P 4/m 2/m 2/m":122,"P4/m m m":122,"P 4/m 2/c 2/c":123,"P4/m c c":123,"P 4/n 2/b 2/m":124,"P4/n b m":124,"P 4/n 2/n 2/c":125,"P4/n n c":125,"P 4/m 21/b 2/m":126,"P4/m b m":126,"P 4/m 21/n 2/c":127,"P4/m n c":127,"P 4/n 21/m 2/m":128,"P4/n m m":128,"P 4/n 2/c 2/c":129,"P4/n c c":129,"P 42/m 2/m 2/c":130,"P42/m m c":130,"P 42/m 2/c 2/m":131,"P42/m c m":131,"P 42/n 2/b 2/c":132,"P42/n b c":132,"P 42/n 2/n 2/m":133,"P42/n n m":133,"P 42/m 21/b 2/c":134,"P42/m b c":134,"P 42/m 21/n 2/m":135,"P42/m n m":135,"P 42/n 21/m 2/c":136,"P42/n m c":136,"P 42/n 21/c 2/m":137,"P42/n c m":137,"I 4/m 2/m 2/m":138,"I4/m m m":138,"I 4/m 2/c 2/m":139,"I4/m c m":139,"I 41/a 2/m 2/d":140,"I41/a m d":140,"I 41/a 2/c 2/d":141,"I41/a c d":141,"P 3":142,"P 31":143,"P 32":144,"H 3":145,"R 3":146,"P -3":147,"H -3":148,"R -3":149,"P 3 1 2":150,"P 3 2 1":151,"P 31 1 2":152,"P 31 2 1":153,"P 32 1 2":154,"P 32 2 1":155,"H 3 2":156,"R 3 2":157,"P 3 m 1":158,"P 3 1 m":159,"P 3 c 1":160,"P 3 1 c":161,"H 3 m":162,"R 3 m":163,"H 3 c":164,"R 3 c":165,"P -3 1 2/m":166,"P -3 1 m":166,"P -3 1 2/c":167,"P -3 1 c":167,"P -3 2/m 1":168,"P -3 m 1":168,"P -3 2/c 1":169,"P -3 c 1":169,"H -3 2/m":170,"H -3 m":170,"R -3 2/m":171,"R -3 m":171,"H -3 2/c":172,"H -3 c":172,"R -3 2/c":173,"R -3 c":173,"P 6":174,"P 61":175,"P 65":176,"P 62":177,"P 64":178,"P 63":179,"P -6":180,"P 6/m":181,"P 63/m":182,"P 6 2 2":183,"P 61 2 2":184,"P 65 2 2":185,"P 62 2 2":186,"P 64 2 2":187,"P 63 2 2":188,"P 6 m m":189,"P 6 c c":190,"P 63 c m":191,"P 63 m c":192,"P -6 m 2":193,"P -6 c 2":194,"P -6 2 m":195,"P -6 2 c":196,"P 6/m 2/m 2/m":197,"P 6/m m m":197,"P 6/m 2/c 2/c":198,"P 6/m c c":198,"P 63/m 2/c 2/m":199,"P 63/m c m":199,"P 63/m 2/m 2/c":200,"P 63/m m c":200,"P 2 3":201,"F 2 3":202,"I 2 3":203,"P 21 3":204,"I 21 3":205,"P 2/m -3":206,"P m -3":206,"P 2/n -3":207,"P n -3":207,"F 2/m -3":208,"F m -3":208,"F 2/d -3":209,"F d -3":209,"I 2/m -3":210,"I m -3":210,"P 21/a -3":211,"P a -3":211,"I 21/a -3":212,"I a -3":212,"P 4 3 2":213,"P 42 3 2":214,"F 4 3 2":215,"F 41 3 2":216,"I 4 3 2":217,"P 43 3 2":218,"P 41 3 2":219,"I 41 3 2":220,"P -4 3 m":221,"F -4 3 m":222,"I -4 3 m":223,"P -4 3 n":224,"F -4 3 c":225,"I -4 3 d":226,"P 4/m -3 2/m":227,"P m -3 m":227,"P 4/n -3 2/n":228,"P n -3 n":228,"P 42/m -3 2/n":229,"P m -3 n":229,"P 42/n -3 2/m":230,"P n -3 m":230,"F 4/m -3 2/m":231,"F m -3 m":231,"F 4/m -3 2/c":232,"F m -3 c":232,"F 41/d -3 2/m":233,"F d -3 m":233,"F 41/d -3 2/c":234,"F d -3 c":234,"I 4/m -3 2/m":235,"I m -3 m":235,"I 41/a -3 2/d":236,"I a -3 d":236,"P 1 1 2":237,"P 1 1 21":238,"B 1 1 2":239,"B 2":239,"A 1 2 1":240,"C 1 21 1":241,"I 1 2 1":242,"I 2":242,"I 1 21 1":243,"P 1 1 m":244,"P 1 1 b":245,"B 1 1 m":246,"B 1 1 b":247,"P 1 1 2/m":248,"P 1 1 21/m":249,"B 1 1 2/m":250,"P 1 1 2/b":251,"P 1 1 21/b":252,"B 1 1 2/b":253,"P 21 2 2":254,"P 2 21 2":255,"P 21 21 2 (a)":256,"P 21 2 21":257,"P 2 21 21":258,"C 2 2 21a)":259,"C 2 2 2a":260,"F 2 2 2a":261,"I 2 2 2a":262,"P 21/m 21/m 2/n a":263,"P 42 21 2a":264,"I 2 3a":265}})(l=s.SpacegroupTables||(s.SpacegroupTables={}))})(o=e.Structure||(e.Structure={}))})(r=i.Core||(i.Core={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";var d=e.Utils.DataTable,p;(function(v){var c=e.Geometry.LinearAlgebra.Matrix4,h=e.Geometry.LinearAlgebra.Vector3;function f(he,_e){for(var ve=he.x,Z=he.y,be=he.z,Ee=h.zero(),De=0,Fe=_e;De<Fe.length;De++){var Ue=Fe[De];Ee[0]+=ve[Ue],Ee[1]+=Z[Ue],Ee[2]+=be[Ue]}var Qe=_e.length>0?_e.length:1;Ee[0]/=Qe,Ee[1]/=Qe,Ee[2]/=Qe;for(var Ke=0,Te=0,Ie=_e;Te<Ie.length;Te++){var Ue=Ie[Te];Ke=Math.max(C(Ue,Ee,he),Ke)}return{center:Ee,radius:Math.sqrt(Ke)}}function m(he,_e,ve){return h.distance(he,ve.center)-(_e+ve.radius)}function b(he,_e,ve,Z,be,Ee){return Ee[0]=ve.x[_e],Ee[1]=ve.y[_e],Ee[2]=ve.z[_e],h.transformMat4(Ee,Ee,Z),m(Ee,ve.r[_e],he)<=be}function w(he,_e,ve){var Z=ve.x[he]-ve.cX[_e],be=ve.y[he]-ve.cY[_e],Ee=ve.z[he]-ve.cZ[_e];return Z*Z+be*be+Ee*Ee}function C(he,_e,ve){var Z=ve.x[he]-_e[0],be=ve.y[he]-_e[1],Ee=ve.z[he]-_e[2];return Z*Z+be*be+Ee*Ee}function E(he,_e,ve,Z){return{model:he,boundingInfo:_e,spacegroup:ve,radius:Z,transform:c.zero(),transformed:h.zero(),i:0,j:0,k:0,op:0}}function S(he,_e){return h.transformMat4(he.transformed,_e,he.transform)}function M(he){return A(he.i,he.j,he.k,he.op,c.clone(he.transform))}function A(he,_e,ve,Z,be){return{isIdentity:!he&&!_e&&!ve&&!Z,id:Z+1+"_"+(5+he)+(5+_e)+(5+ve),transform:be}}function R(he,_e){for(var ve=!0,Z=0;Z<4;Z++){for(var be=0;be<4;be++){var Ee=_e[4*be+Z];if(Z===be){if(Math.abs(Ee-1)>1e-7){ve=!1;break}}else if(Math.abs(Ee)>1e-7){ve=!1;break}}if(!ve)break}return{isIdentity:ve,id:he.toString(),transform:_e}}function D(he,_e){for(var ve=he.data.atoms,Z=he.data.residues,be=he.data.chains,Ee=he.data.entities,De=he.positions,Fe=De.x,Ue=De.y,Qe=De.z,Ke=d.builder(Ee.count),Te=Ke.addColumn("x",function(sr){return new Float64Array(sr)}),Ie=Ke.addColumn("y",function(sr){return new Float64Array(sr)}),ke=Ke.addColumn("z",function(sr){return new Float64Array(sr)}),nt=Ke.addColumn("r",function(sr){return new Float64Array(sr)}),dt=d.builder(be.count),yt=dt.addColumn("x",function(sr){return new Float64Array(sr)}),gt=dt.addColumn("y",function(sr){return new Float64Array(sr)}),xt=dt.addColumn("z",function(sr){return new Float64Array(sr)}),tt=dt.addColumn("r",function(sr){return new Float64Array(sr)}),pt=d.builder(Z.count),At=pt.addColumn("x",function(sr){return new Float64Array(sr)}),Tt=pt.addColumn("y",function(sr){return new Float64Array(sr)}),Ct=pt.addColumn("z",function(sr){return new Float64Array(sr)}),Bt=pt.addColumn("r",function(sr){return new Float64Array(sr)}),nr=h.zero(),$t=0,It=h.zero(),Lt=0,Pt=0,He=h.zero(),Be=0,Ge=h.zero(),Re=0,Ne=h.zero(),ze=0,et=0,it=Ee.count;et<it;et++){h.set(He,0,0,0);for(var at=Ee.chainStartIndex[et],vt=Ee.chainEndIndex[et];at<vt;at++){h.set(Ge,0,0,0);for(var jt=be.residueStartIndex[at],Nt=be.residueEndIndex[at];jt<Nt;jt++){h.set(Ne,0,0,0);for(var Dt=Z.atomStartIndex[jt],Gt=Z.atomEndIndex[jt];Dt<Gt;Dt++)Ne[0]+=Fe[Dt],Ne[1]+=Ue[Dt],Ne[2]+=Qe[Dt];h.add(nr,nr,Ne),Pt=Z.atomEndIndex[jt]-Z.atomStartIndex[jt],h.add(Ge,Ge,Ne),At[jt]=Ne[0]/Pt,Tt[jt]=Ne[1]/Pt,Ct[jt]=Ne[2]/Pt}h.add(He,He,Ge),Pt=be.atomEndIndex[at]-be.atomStartIndex[at],yt[at]=Ge[0]/Pt,gt[at]=Ge[1]/Pt,xt[at]=Ge[2]/Pt}Pt=Ee.atomEndIndex[et]-Ee.atomStartIndex[et],Te[et]=He[0]/Pt,Ie[et]=He[1]/Pt,ke[et]=He[2]/Pt}nr[0]/=ve.count,nr[1]/=ve.count,nr[2]/=ve.count;for(var or=0,Jt=_e;or<Jt.length;or++){var Dt=Jt[or];It[0]+=Fe[Dt],It[1]+=Ue[Dt],It[2]+=Qe[Dt]}var pr=_e.length>0?_e.length:1;It[0]/=pr,It[1]/=pr,It[2]/=pr;for(var lr={x:Fe,y:Ue,z:Qe,cX:Te,cY:Ie,cZ:ke},Lr={x:Fe,y:Ue,z:Qe,cX:yt,cY:gt,cZ:xt},Or={x:Fe,y:Ue,z:Qe,cX:At,cY:Tt,cZ:Ct},et=0,it=Ee.count;et<it;et++){Be=0;for(var at=Ee.chainStartIndex[et],vt=Ee.chainEndIndex[et];at<vt;at++){Re=0;for(var jt=be.residueStartIndex[at],Nt=be.residueEndIndex[at];jt<Nt;jt++){ze=0;for(var Dt=Z.atomStartIndex[jt],Gt=Z.atomEndIndex[jt];Dt<Gt;Dt++)ze=Math.max(ze,w(Dt,jt,Or)),Re=Math.max(Re,w(Dt,at,Lr)),Be=Math.max(Be,w(Dt,et,lr)),$t=Math.max($t,C(Dt,nr,Or));ze=Math.sqrt(ze),Bt[jt]=ze}Re=Math.sqrt(Re),tt[at]=Re}Be=Math.sqrt(Be),nt[et]=Be}$t=Math.sqrt($t);for(var Sn=0,Ht=_e;Sn<Ht.length;Sn++){var Dt=Ht[Sn];Lt=Math.max(Lt,C(Dt,It,Or))}return Lt=Math.sqrt(Lt),{entities:Ke.seal(),chains:dt.seal(),residues:pt.seal(),allAtoms:{center:nr,radius:$t},target:{center:It,radius:Lt}}}function N(he){var _e=he.boundingInfo,ve=he.spacegroup,Z=[];he.transform=c.identity(),Z[0]=M(he);for(var be=-3;be<=3;be++)for(var Ee=-3;Ee<=3;Ee++)for(var De=-3;De<=3;De++)for(var Fe=be===0&&Ee===0&&De===0?1:0,Ue=ve.operatorCount;Fe<Ue;Fe++){ve.getOperatorMatrix(Fe,be,Ee,De,he.transform),he.i=be,he.k=De,he.j=Ee,he.op=Fe;var Qe=S(he,_e.allAtoms.center),Ke=m(Qe,_e.allAtoms.radius,_e.target);Ke<he.radius&&(Z[Z.length]=M(he))}return Z}function I(he,_e){for(var ve=he.boundingInfo,Z=he.radius,be=ve.target,Ee=he.model,De=Ee.data.residues,Fe=Ee.data.chains,Ue=Ee.data.entities,Qe=e.Utils.ChunkedArray.create(function(It){return new Int32Array(It)},De.count,1),Ke=e.Utils.ChunkedArray.create(function(It){return new Int32Array(It)},De.count,1),Te=h.zero(),Ie=0,ke=0,nt=0,dt=0,yt=0,gt=Ue.count;yt<gt;yt++){Ie=0;for(var xt=!1,tt=0,pt=_e;tt<pt.length;tt++){for(var At=pt[tt],Tt=Ue.chainStartIndex[yt],Ct=Ue.chainEndIndex[yt];Tt<Ct;Tt++)if(b(be,Tt,ve.chains,At.transform,Z,Te)){for(var Bt=!1,nr=Fe.residueStartIndex[Tt],$t=Fe.residueEndIndex[Tt];nr<$t;nr++)b(be,nr,ve.residues,At.transform,Z,Te)&&(e.Utils.ChunkedArray.add(Qe,nr),e.Utils.ChunkedArray.add(Ke,Ie),ke+=De.atomEndIndex[nr]-De.atomStartIndex[nr],Bt=!0);Bt&&(nt+=1,xt=!0)}Ie++}xt&&dt++}return{residues:e.Utils.ChunkedArray.compact(Qe),operators:e.Utils.ChunkedArray.compact(Ke),atomCount:ke,chainCount:nt,entityCount:dt}}function L(he,_e,ve,Z,be){for(var Ee=0;Ee<be;Ee++)ve[Ee][Z]=he[Ee][_e]}function Y(he,_e,ve){for(var Z=he.data.residues,be=Z.chainIndex,Ee=Z.entityIndex,De=Z.atomStartIndex,Fe=Z.atomEndIndex,Ue=he.data.atoms,Qe=he.positions,Ke=Qe.x,Te=Qe.y,Ie=Qe.z,ke=d.builder(_e.atomCount),nt,dt,yt,gt,xt=[],tt=d.ofDefinition(s.Tables.Positions,_e.atomCount),pt=tt.x,At=tt.y,Tt=tt.z,Ct=he.data.entities.getBuilder(_e.entityCount),Bt=Ct,nr=he.data.entities.getRawData(),$t=Bt.getRawData(),It=Bt.chainStartIndex,Lt=Bt.chainEndIndex,Pt=Bt.residueStartIndex,He=Bt.residueEndIndex,Be=Bt.atomStartIndex,Ge=Bt.atomEndIndex,Re=0,Ne=he.data.chains.getBuilder(_e.chainCount),ze=Ne,et=he.data.chains.getRawData(),it=ze.getRawData(),at=ze.residueStartIndex,vt=ze.residueEndIndex,jt=ze.atomStartIndex,Nt=ze.atomEndIndex,Dt=ze.asymId,Gt=ze.authAsymId,or=ze.entityIndex,Jt=Ne.addColumn("sourceChainIndex",function(di){return new Int32Array(di)}),pr=Ne.addColumn("operatorIndex",function(di){return new Int32Array(di)}),lr=0,Lr=he.data.residues.getBuilder(_e.residues.length),Or=Lr,Sn=he.data.residues.getRawData(),Ht=Or.getRawData(),sr=Or.atomStartIndex,Sr=Or.atomEndIndex,Fr=Or.asymId,gr=Or.authAsymId,tn=Or.chainIndex,Vn=Or.entityIndex,Rt=0,Ur=he.data.atoms.columns;Rt<Ur.length;Rt++){var Zr=Ur[Rt],xn=ke.addColumn(Zr.name,Zr.creator);Zr.name==="residueIndex"?dt=xn:Zr.name==="chainIndex"?yt=xn:Zr.name==="entityIndex"?gt=xn:Zr.name==="id"?nt=xn:xt[xt.length]={src:Ue[Zr.name],target:xn}}var Tr=_e.residues,Wn=_e.operators,mn=e.Geometry.LinearAlgebra.Vector3.zero(),Pr=0,qr=Tr[0],Hn=be[qr],nn=Ee[qr],jn=Wn[0],dr,Br;L(nr,Ee[qr],$t,0,nr.length),It[0]=0,Pt[0]=0,Be[0]=0,L(et,be[qr],it,0,et.length),or[0]=0,at[0]=0,jt[0]=0,dr=he.data.chains.asymId[be[qr]],Br=he.data.chains.authAsymId[be[qr]];var kr=ve[Wn[0]];kr&&!kr.isIdentity&&(Dt[lr]=he.data.chains.asymId[be[qr]]+"-"+kr.id,Gt[lr]=he.data.chains.authAsymId[be[qr]]+"-"+kr.id,Jt[lr]=be[qr],pr[lr]=jn,dr=Dt[lr],Br=Gt[lr]);for(var Ar=0,ni=Tr.length;Ar<ni;Ar++){qr=Tr[Ar];var kn=Wn[Ar];kr=ve[kn],L(Sn,qr,Ht,Ar,Ht.length);var $r=Ee[qr],bn=be[qr],on=!1;$r!==nn?(vt[lr]=Ar,Nt[lr]=Pr,lr+=1,Lt[Re]=lr,He[Re]=Ar,Ge[Re]=Pr,Re+=1,L(nr,$r,$t,Re,nr.length),It[Re]=lr,Pt[Re]=Ar,Be[Re]=Pr,on=!0):(bn!==Hn||kn!==jn)&&(vt[lr]=Ar,Nt[lr]=Pr,lr+=1,on=!0),on&&(L(et,bn,it,lr,et.length),or[lr]=Re,at[lr]=Ar,jt[lr]=Pr,kr.isIdentity||(Dt[lr]=he.data.chains.asymId[bn]+"-"+kr.id,Gt[lr]=he.data.chains.authAsymId[bn]+"-"+kr.id),Jt[lr]=bn,pr[lr]=kn,dr=Dt[lr],Br=Gt[lr]),Hn=bn,nn=$r,jn=kn,tn[Ar]=lr,Vn[Ar]=Re,sr[Ar]=Pr,Fr[Ar]=dr,gr[Ar]=Br;for(var Ui=De[qr],ln=Fe[qr];Ui<ln;Ui++){h.set(mn,Ke[Ui],Te[Ui],Ie[Ui]),h.transformMat4(mn,mn,kr.transform),pt[Pr]=mn[0],At[Pr]=mn[1],Tt[Pr]=mn[2],nt[Pr]=Pr+1,dt[Pr]=Ar,yt[Pr]=lr,gt[Pr]=Re;for(var Ai=0,fn=xt;Ai<fn.length;Ai++){var xn=fn[Ai];xn.target[Pr]=xn.src[Ui]}Pr++}Sr[Ar]=Pr}Lt[Re]=lr+1,He[Re]=Tr.length,Ge[Re]=Pr,vt[lr]=Tr.length,Nt[lr]=Pr;var Ji=ke.seal(),ii=Lr.seal(),eo=Ne.seal(),Bi=Ct.seal(),to=ie(he,_e,ii),ha=he.data.bonds.structConn?J(he.data.bonds.structConn,ve,_e.residues,_e.operators,he.data.residues,ii):void 0;return s.Molecule.Model.create({id:he.id,modelId:he.modelId,data:{atoms:Ji,residues:ii,chains:eo,entities:Bi,bonds:{structConn:ha,component:he.data.bonds.component},secondaryStructure:to},positions:tt,parent:he,source:s.Molecule.Model.Source.Computed,operators:ve.map(function(di){return new s.Operator(di.transform,di.id,di.isIdentity)})})}function J(he,_e,ve,Z,be,Ee){for(var De=he.entries,Fe=e.Utils.FastMap.create(),Ue=0,Qe=_e.length;Ue<Qe;Ue++)Fe.set(_e[Ue].id,Ue);for(var Ke=e.Utils.FastMap.create(),Te=0,Ie=De;Te<Ie.length;Te++)for(var ke=Ie[Te],nt=0,dt=ke.partners;nt<dt.length;nt++){var yt=dt[nt];Ke.has(yt.residueIndex)||Ke.set(yt.residueIndex,e.Utils.FastMap.create())}for(var Ue=0,Qe=ve.length;Ue<Qe;Ue++){var gt=ve[Ue];Ke.has(gt)&&Ke.get(gt).set(Z[Ue],Ue)}for(var xt=be.atomStartIndex,tt=Ee.atomStartIndex,pt=[],At=0,Tt=De;At<Tt.length;At++){for(var ke=Tt[At],Ct=!0,Bt=0,nr=ke.partners;Bt<nr.length;Bt++){var yt=nr[Bt];if(yt.symmetry!=="1_555"){Ct=!1;break}}if(Ct)for(var $t=function(et,it){for(var at=!0,vt=0,jt=ke.partners;vt<jt.length;vt++){var Nt=jt[vt];if(!Ke.get(Nt.residueIndex).has(et)){at=!1;break}}if(!at)return"continue";pt.push({bondType:ke.bondType,distance:ke.distance,partners:ke.partners.map(function(Dt){var Gt=Ke.get(Dt.residueIndex).get(et);return{residueIndex:Gt,atomIndex:tt[Gt]+(Dt.atomIndex-xt[Dt.residueIndex]),symmetry:Dt.symmetry}})})},It=0,Lt=_e.length;It<Lt;It++)$t(It,Lt);else{for(var Pt=[],He=0,Be=ke.partners;He<Be.length;He++){var yt=Be[He];if(!Fe.has(yt.symmetry))break;var Ge=Fe.get(yt.symmetry),Re=Ke.get(yt.residueIndex);if(!Re.has(Ge))break;var Ne=Re.get(Ge);Pt.push({residueIndex:Ne,atomIndex:tt[Ne]+(yt.atomIndex-xt[yt.residueIndex]),symmetry:yt.symmetry})}Pt.length===ke.partners.length&&pt.push({bondType:ke.bondType,distance:ke.distance,partners:Pt})}}return new s.StructConn(pt)}function ie(he,_e,ve){for(var Z=he.data.residues.secondaryStructureIndex,be=he.data.secondaryStructure,Ee=ve.asymId,De=ve.seqNumber,Fe=ve.insCode,Ue=ve.secondaryStructureIndex,Qe=_e.residues,Ke=_e.operators,Te=Qe.length,Ie=[],ke=0;ke<Te;){for(var nt=ke,dt=Z[Qe[ke]],yt=Ke[ke];nt<Te&&Ke[nt]==yt&&Z[Qe[nt]]==dt;)nt++;var gt=be[dt],xt=new s.SecondaryStructureElement(gt.type,new s.PolyResidueIdentifier(Ee[ke],De[ke],Fe[ke]),new s.PolyResidueIdentifier(Ee[nt-1],De[nt-1],Fe[nt-1]),gt.info);xt.startResidueIndex=ke,xt.endResidueIndex=nt;for(var tt=Ie.length,pt=ke;pt<nt;pt++)Ue[pt]=tt;Ie[tt]=xt,ke=nt}return Ie}function K(he,_e,ve){var Z=he.data.symmetryInfo;if(!Z||Z.cellSize[0]<1.1&&Z.cellSize[1]<1.1&&Z.cellSize[2]<1.1)return he;var be;ve?be=s.Query.apply(ve,he).unionAtomIndices():be=he.data.atoms.indices;var Ee=D(he,be),De=new s.Spacegroup(Z),Fe=E(he,Ee,De,_e),Ue=N(Fe),Qe=I(Fe,Ue);return Y(he,Qe,Ue)}v.buildPivotGroupSymmetry=K;function Q(he,_e){for(var ve=f(he.positions,he.positions.indices),Z=new s.Spacegroup(he.data.symmetryInfo),be=c.zero(),Ee=h.zero(),De=[],Fe=-3;Fe<=3;Fe++)for(var Ue=-3;Ue<=3;Ue++)for(var Qe=-3;Qe<=3;Qe++)for(var Ke=0;Ke<Z.operatorCount;Ke++)if(Z.getOperatorMatrix(Ke,Fe,Ue,Qe,be),h.transformMat4(Ee,ve.center,be),!(m(Ee,ve.radius,ve)>_e)){var Te=c.zero();c.copy(Te,be),De.push(A(Fe,Ue,Qe,Ke,Te))}return De}function ne(he,_e){for(var ve=he.data,Z=ve.atoms,be=ve.chains,Ee=ve.entities,De=ve.residues,Fe=e.Utils.ArrayBuilder.create(function(tt){return new Int32Array(tt)},De.count*_e.length,1),Ue=e.Utils.ArrayBuilder.create(function(tt){return new Int32Array(tt)},De.count*_e.length,1),Qe=_e.length*Z.count,Ke=_e.length*be.count,Te=Ee.count,Ie=0,ke=Ee.count;Ie<ke;Ie++)for(var nt=0;nt<_e.length;nt++)for(var dt=Ee.chainStartIndex[Ie],yt=Ee.chainEndIndex[Ie];dt<yt;dt++)for(var gt=be.residueStartIndex[dt],xt=be.residueEndIndex[dt];gt<xt;gt++)e.Utils.ArrayBuilder.add(Fe,gt),e.Utils.ArrayBuilder.add(Ue,nt);return{residues:Fe.array,operators:Ue.array,atomCount:Qe,chainCount:Ke,entityCount:Te}}function ue(he,_e){var ve=he.data.symmetryInfo;if(!ve||ve.cellSize[0]<1.1&&ve.cellSize[1]<1.1&&ve.cellSize[2]<1.1)return he;var Z=Q(he,_e),be=ne(he,Z);return Y(he,be,Z)}v.buildMates=ue;function fe(he,_e,ve,Z){if(ve<0){_e[_e.length]=Z.slice(0);return}for(var be=he[ve],Ee=be.length,De=0;De<Ee;De++)Z[ve]=be[De],fe(he,_e,ve-1,Z)}function ge(he,_e,ve){for(var Z=he.data.assemblyInfo,be=[],Ee=ve,De=0,Fe=_e;De<Fe.length;De++){for(var Ue=Fe[De],Qe=c.identity(),Ke=0;Ke<Ue.length;Ke++)c.mul(Qe,Qe,Z.operators[Ue[Ke]].operator);Ee++,be[be.length]=R(Ee,Qe)}return be}function ye(he,_e,ve,Z,be){for(var Ee=he.data,De=Ee.chains,Fe=Ee.entities,Ue=Ee.residues,Qe=Z.residueIndices,Ke=Z.operatorIndices,Te=0,Ie=0,ke=0,nt=0,dt=Fe.count;nt<dt;nt++){for(var yt=be,gt=!1,xt=0,tt=ve;xt<tt.length;xt++){for(var pt=tt[xt],At=Fe.chainStartIndex[nt],Tt=Fe.chainEndIndex[nt];At<Tt;At++){for(var Ct=!1,Bt=De.residueStartIndex[At],nr=De.residueEndIndex[At];Bt<nr;Bt++)_e[Bt]&&(e.Utils.ChunkedArray.add(Qe,Bt),e.Utils.ChunkedArray.add(Ke,yt),Te+=Ue.atomEndIndex[Bt]-Ue.atomStartIndex[Bt],Ct=!0);Ct&&(Ie+=1,gt=!0)}yt++}gt&&ke++}Z.atomCount+=Te,Z.chainCount+=Ie,Z.entityCount+=ke}function pe(he,_e,ve){for(var Z,be=[],Ee=[],De=0;De<_e.operators.length;De++)Ee[De]="";fe(_e.operators,be,_e.operators.length-1,Ee);var Fe=ve.transforms.length,Ue=ge(he,be,ve.transforms.length);(Z=ve.transforms).push.apply(Z,Ue);var Qe=e.Utils.FastSet.create();_e.asymIds.forEach(function(nt){return Qe.add(nt)});for(var Ke=he.data.residues.asymId,Te=he.data.residues.count,Ie=ve.mask,ke=0;ke<Te;ke++)Ie[ke]=Qe.has(Ke[ke]);ye(he,Ie,Ue,ve,Fe)}v.buildAssemblyEntry=pe;function de(he,_e){for(var ve={atomCount:0,chainCount:0,entityCount:0,transforms:[],mask:new Int8Array(he.data.residues.count),residueIndices:e.Utils.ChunkedArray.create(function(Fe){return new Int32Array(Fe)},he.data.residues.count,1),operatorIndices:e.Utils.ChunkedArray.create(function(Fe){return new Int32Array(Fe)},he.data.residues.count,1)},Z=0,be=_e.gens;Z<be.length;Z++){var Ee=be[Z];pe(he,Ee,ve)}var De={residues:e.Utils.ChunkedArray.compact(ve.residueIndices),operators:e.Utils.ChunkedArray.compact(ve.operatorIndices),atomCount:ve.atomCount,chainCount:ve.chainCount,entityCount:ve.entityCount};return Y(he,De,ve.transforms)}v.buildAssembly=de})(p||(p={}));function x(v,c,h){return p.buildPivotGroupSymmetry(v,c,h)}s.buildPivotGroupSymmetry=x;function l(v,c){return p.buildMates(v,c)}s.buildSymmetryMates=l;function _(v,c){return p.buildAssembly(v,c)}s.buildAssembly=_})(o=e.Structure||(e.Structure={}))})(r=i.Core||(i.Core={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){function x(f,m){return p.Builder.toQuery(f)(m.queryContext)}p.apply=x;var l=function(){function f(m,b){this.mask=b,this.structure=m}return Object.defineProperty(f.prototype,"atomCount",{get:function(){return this.mask.size},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"isComplete",{get:function(){return this.mask.size===this.structure.data.atoms.count},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"lookup3d",{get:function(){return this.lazyLoopup3d||this.makeLookup3d(),this.lazyLoopup3d},enumerable:!0,configurable:!0}),f.prototype.hasAtom=function(m){return!!this.mask.has(m)},f.prototype.hasRange=function(m,b){for(var w=m;w<b;w++)if(this.mask.has(w))return!0;return!1},f.ofStructure=function(m){return new f(m,e.Utils.Mask.ofStructure(m))},f.ofFragments=function(m){return new f(m.context.structure,e.Utils.Mask.ofFragments(m))},f.ofAtomIndices=function(m,b){return new f(m,e.Utils.Mask.ofIndices(m.data.atoms.count,b))},f.prototype.makeLookup3d=function(){for(var m=new Int32Array(this.mask.size),b=0,w=this.structure.positions,C=w.x,E=w.y,S=w.z,M=0,A=this.structure.positions.count;M<A;M++)this.mask.has(M)&&(m[b++]=M);var R=e.Geometry.Query3D.createInputData(m,function(D,N){return N(C[D],E[D],S[D])});this.lazyLoopup3d=e.Geometry.Query3D.createSpatialHash(R)},f}();p.Context=l;var _=function(){function f(m,b,w){this._hashCode=0,this._hashComputed=!1,this.context=m,this.tag=b,this.atomIndices=w}return Object.defineProperty(f.prototype,"hashCode",{get:function(){if(this._hashComputed)return this._hashCode;for(var m=23,b=0,w=this.atomIndices;b<w.length;b++){var C=w[b];m=31*m+C|0}return this._hashCode=m,this._hashComputed=!0,m},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"id",{get:function(){return this.context.structure.id+"_"+this.tag},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"atomCount",{get:function(){return this.atomIndices.length},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"isHet",{get:function(){var m=this.context.structure.data.atoms.residueIndex[this.tag];return this.context.structure.data.residues.isHet[m]},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"fingerprint",{get:function(){if(this._fingerprint)return this._fingerprint;for(var m=this.residueIndices,b=this.context.structure.data.residues,w=b.name,C=b.asymId,E=b.seqNumber,S=b.insCode,M=[],A=0,R=m;A<R.length;A++){var D=R[A],N=w[D]+" "+C[D]+" "+E[D];S[D]&&(N+=" i:"+S[D]),M[M.length]=N}return M.join("-")},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"authFingerprint",{get:function(){if(this._authFingerprint)return this._authFingerprint;for(var m=this.residueIndices,b=this.context.structure.data.residues,w=b.authName,C=b.authAsymId,E=b.authSeqNumber,S=b.insCode,M=[],A=0,R=m;A<R.length;A++){var D=R[A],N=w[D]+" "+C[D]+" "+E[D];S[D]&&(N+=" i:"+S[D]),M[M.length]=N}return M.join("-")},enumerable:!0,configurable:!0}),f.prototype.find=function(m){var b=l.ofFragments(new v(this.context,[this]));return p.Builder.toQuery(m)(b)},f.prototype.computeIndices=function(){if(!this._residueIndices){for(var m=e.Utils.FastSet.create(),b=e.Utils.FastSet.create(),w=e.Utils.FastSet.create(),C=this.context.structure.data.atoms.residueIndex,E=this.context.structure.data.residues.chainIndex,S=this.context.structure.data.chains.entityIndex,M=0,A=this.atomIndices;M<A.length;M++){var R=A[M];m.add(C[R])}this._residueIndices=e.Utils.integerSetToSortedTypedArray(m);for(var D=0,N=this._residueIndices;D<N.length;D++){var R=N[D];b.add(E[R])}this._chainIndices=e.Utils.integerSetToSortedTypedArray(b);for(var I=0,L=this._chainIndices;I<L.length;I++){var R=L[I];w.add(S[R])}this._entityIndices=e.Utils.integerSetToSortedTypedArray(w)}},Object.defineProperty(f.prototype,"residueIndices",{get:function(){return this.computeIndices(),this._residueIndices},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"chainIndices",{get:function(){return this.computeIndices(),this._chainIndices},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"entityIndices",{get:function(){return this.computeIndices(),this._entityIndices},enumerable:!0,configurable:!0}),f.areEqual=function(m,b){if(m.atomCount!==b.atomCount)return!1;for(var w=m.atomIndices,C=b.atomIndices,E=0;E<w.length;E++)if(w[E]!==C[E])return!1;return m.tag===b.tag},f.ofSet=function(m,b){var w=new Int32Array(b.size);return b.forEach(function(C,E){E.array[E.index++]=C},{array:w,index:0}),Array.prototype.sort.call(w,function(C,E){return C-E}),new f(m,w[0],w)},f.ofArray=function(m,b,w){return new f(m,b,w)},f.ofIndex=function(m,b){var w=new Int32Array(1);return w[0]=b,new f(m,b,w)},f.ofIndexRange=function(m,b,w){for(var C=0,E=b;E<w;E++)m.hasAtom(E)&&C++;for(var S=new Int32Array(C),M=0,E=b;E<w;E++)m.hasAtom(E)&&(S[M++]=E);return new f(m,b,S)},f}();p.Fragment=_;var v=function(){function f(m,b){this.context=m,this.fragments=b}return f.empty=function(m){return new f(m,[])},Object.defineProperty(f.prototype,"length",{get:function(){return this.fragments.length},enumerable:!0,configurable:!0}),f.prototype.unionAtomIndices=function(){if(!this.length)return[];if(this.length===1)return this.fragments[0].atomIndices;for(var m=new Int8Array(this.context.structure.data.atoms.count),b=0,w=0,C=this.fragments;w<C.length;w++)for(var E=C[w],S=0,M=E.atomIndices;S<M.length;S++){var A=M[S];m[A]=1}for(var R=0,D=m;R<D.length;R++){var A=D[R];b+=A}for(var N=new Int32Array(b),I=0,A=0,L=m.length;A<L;A++)m[A]&&(N[I++]=A);return N},f.prototype.unionFragment=function(){if(!this.length)return new _(this.context,0,new Int32Array(0));if(this.length===1)return this.fragments[0];var m=this.unionAtomIndices();return new _(this.context,m[0],m)},f}();p.FragmentSeq=v;var c=function(){function f(m){this.ctx=m,this.fragments=[]}return f.prototype.add=function(m){this.fragments[this.fragments.length]=m},f.prototype.getSeq=function(){return new v(this.ctx,this.fragments)},f}();p.FragmentSeqBuilder=c;var h=function(){function f(m){this.ctx=m,this.fragments=[],this.byHash=e.Utils.FastMap.create()}return f.prototype.add=function(m){var b=m.hashCode;if(this.byHash.has(b)){for(var w=this.byHash.get(b),C=0,E=w;C<E.length;C++){var S=E[C];if(_.areEqual(m,S))return this}this.fragments[this.fragments.length]=m,w[w.length]=m}else this.fragments[this.fragments.length]=m,this.byHash.set(b,[m]);return this},f.prototype.getSeq=function(){return new v(this.ctx,this.fragments)},f}();p.HashFragmentSeqBuilder=h})(d=s.Query||(s.Query={}))})(o=e.Structure||(e.Structure={}))})(r=i.Core||(i.Core={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){var x;(function(Z){Z.BuilderPrototype={};function be(Qe,Ke){Z.BuilderPrototype[Qe]=function(){for(var Te=[],Ie=0;Ie<arguments.length;Ie++)Te[Ie]=arguments[Ie];return Ke.call.apply(Ke,[void 0,this].concat(Te))}}Z.registerModifier=be;function Ee(Qe){return Object.create(Z.BuilderPrototype,{compile:{writable:!1,configurable:!1,value:Qe}})}Z.build=Ee;function De(Qe){return!!Qe.compile}function Fe(Qe){if(typeof window>"u")throw"parse can only be called from a browser.";(0,eval)("with (LiteMol.Core.Structure.Query) { window.__LiteMol_query = "+Qe+"; }");var Ke=window.__LiteMol_query;return window.__LiteMol_query=void 0,Ke.compile()}Z.parse=Fe;function Ue(Qe){var Ke;return De(Qe)?Ke=Qe.compile():typeof Qe=="string"||Qe instanceof String?Ke=Fe(Qe):Ke=Qe,Ke}Z.toQuery=Ue})(x=p.Builder||(p.Builder={}));function l(){return x.build(function(){return ve.compileAllAtoms()})}p.allAtoms=l;function _(){for(var Z=[],be=0;be<arguments.length;be++)Z[be]=arguments[be];return x.build(function(){return ve.compileAtoms(Z,function(Ee){return Ee.data.atoms.elementSymbol})})}p.atomsByElement=_;function v(){for(var Z=[],be=0;be<arguments.length;be++)Z[be]=arguments[be];return x.build(function(){return ve.compileAtoms(Z,function(Ee){return Ee.data.atoms.name})})}p.atomsByName=v;function c(){for(var Z=[],be=0;be<arguments.length;be++)Z[be]=arguments[be];return x.build(function(){return ve.compileAtoms(Z,function(Ee){return Ee.data.atoms.id})})}p.atomsById=c;function h(){for(var Z=[],be=0;be<arguments.length;be++)Z[be]=arguments[be];return x.build(function(){return ve.compileAtomRanges(!1,Z,function(Ee){return Ee.data.residues})})}p.residues=h;function f(){for(var Z=[],be=0;be<arguments.length;be++)Z[be]=arguments[be];return x.build(function(){return ve.compileAtomRanges(!1,Z,function(Ee){return Ee.data.chains})})}p.chains=f;function m(){for(var Z=[],be=0;be<arguments.length;be++)Z[be]=arguments[be];return x.build(function(){return ve.compileAtomRanges(!1,Z,function(Ee){return Ee.data.entities})})}p.entities=m;function b(){for(var Z=[],be=0;be<arguments.length;be++)Z[be]=arguments[be];return x.build(function(){return ve.compileAtomRanges(!0,Z,function(Ee){return Ee.data.entities})})}p.notEntities=b;function w(){return x.build(function(){return ve.compileEverything()})}p.everything=w;function C(Z){return x.build(function(){return ve.compileFromIndices(!1,Z,function(be){return be.data.entities})})}p.entitiesFromIndices=C;function E(Z){return x.build(function(){return ve.compileFromIndices(!1,Z,function(be){return be.data.chains})})}p.chainsFromIndices=E;function S(Z){return x.build(function(){return ve.compileFromIndices(!1,Z,function(be){return be.data.residues})})}p.residuesFromIndices=S;function M(Z){return x.build(function(){return ve.compileAtomIndices(Z)})}p.atomsFromIndices=M;function A(Z,be,Ee,De){return x.build(function(){return ve.compileSequence(Z,be,Ee,De)})}p.sequence=A;function R(){return x.build(function(){return ve.compileHetGroups()})}p.hetGroups=R;function D(){return x.build(function(){return ve.compileNonHetPolymer()})}p.nonHetPolymer=D;function N(){for(var Z=[],be=0;be<arguments.length;be++)Z[be]=arguments[be];return x.build(function(){return ve.compilePolymerNames(Z,!1)})}p.polymerTrace=N;function I(){return ie(x.build(function(){return ve.compilePolymerNames(["CA","O","O5'","C3'","N3"],!1)}),R(),m({type:"water"}))}p.cartoons=I;function L(){return x.build(function(){return ve.compilePolymerNames(["N","CA","C","O","P","OP1","OP2","O3'","O5'","C3'","C5'","C4"],!1)})}p.backbone=L;function Y(){return x.build(function(){return ve.compilePolymerNames(["N","CA","C","O","P","OP1","OP2","O3'","O5'","C3'","C5'","C4"],!0)})}p.sidechain=Y;function J(Z,be){return x.build(function(){return ve.compileAtomsInBox(Z,be)})}p.atomsInBox=J;function ie(){for(var Z=[],be=0;be<arguments.length;be++)Z[be]=arguments[be];return x.build(function(){return ve.compileOr(Z)})}p.or=ie,x.registerModifier("complement",K);function K(Z){return x.build(function(){return ve.compileComplement(Z)})}p.complement=K,x.registerModifier("ambientResidues",Q);function Q(Z,be){return x.build(function(){return ve.compileAmbientResidues(Z,be)})}p.ambientResidues=Q,x.registerModifier("wholeResidues",ne);function ne(Z){return x.build(function(){return ve.compileWholeResidues(Z)})}p.wholeResidues=ne,x.registerModifier("union",ue);function ue(Z){return x.build(function(){return ve.compileUnion(Z)})}p.union=ue,x.registerModifier("inside",fe);function fe(Z,be){return x.build(function(){return ve.compileInside(Z,be)})}p.inside=fe,x.registerModifier("intersectWith",ge);function ge(Z,be){return x.build(function(){return ve.compileIntersectWith(Z,be)})}p.intersectWith=ge,x.registerModifier("flatten",ye);function ye(Z,be){return x.build(function(){return ve.compileFlatten(Z,be)})}p.flatten=ye,x.registerModifier("except",pe);function pe(Z,be){return x.build(function(){return ve.compileExcept(Z,be)})}p.except=pe;function de(){for(var Z=[],be=0;be<arguments.length;be++)Z[be]=arguments[be];return h.apply(void 0,Z.map(function(Ee){return{name:Ee}}))}p.residuesByName=de;function he(){for(var Z=[],be=0;be<arguments.length;be++)Z[be]=arguments[be];return h.apply(void 0,Z.map(function(Ee){return{authSeqNumber:Ee}}))}p.residuesById=he;function _e(){for(var Z=[],be=0;be<arguments.length;be++)Z[be]=arguments[be];return f.apply(void 0,Z.map(function(Ee){return{authAsymId:Ee}}))}p.chainsById=_e;var ve;(function(Z){var be=function(){function It(Lt,Pt){this.columns=[];for(var He=0,Be=Object.keys(Lt);He<Be.length;He++){var Ge=Be[He];Lt[Ge]!==void 0&&Pt[Ge]&&this.columns.push({value:Lt[Ge],array:Pt[Ge]})}}return It.prototype.isSatisfied=function(Lt){for(var Pt=0,He=this.columns;Pt<He.length;Pt++){var Be=He[Pt];if(Be.value!==Be.array[Lt])return!1}return!0},It}();function Ee(){return function(It){if(It.isComplete){var Lt=It.structure.data.atoms.indices;return new p.FragmentSeq(It,[new p.Fragment(It,Lt[0],Lt)])}for(var Pt=new Int32Array(It.atomCount),He=0,Be=0,Ge=It.structure.data.atoms.indices;Be<Ge.length;Be++){var Re=Ge[Be];It.hasAtom(Re)&&(Pt[He++]=Re)}return new p.FragmentSeq(It,[p.Fragment.ofArray(It,Pt[0],Pt)])}}Z.compileEverything=Ee;function De(){return function(It){for(var Lt=new p.FragmentSeqBuilder(It),Pt=0,He=It.structure.data.atoms.count;Pt<He;Pt++)It.hasAtom(Pt)&&Lt.add(p.Fragment.ofIndex(It,Pt));return Lt.getSeq()}}Z.compileAllAtoms=De;function Fe(It,Lt){return function(Pt){for(var He=e.Utils.FastSet.ofArray(It),Be=Lt(Pt.structure),Ge=new p.FragmentSeqBuilder(Pt),Re=0,Ne=Be.length;Re<Ne;Re++)Pt.hasAtom(Re)&&He.has(Be[Re])&&Ge.add(p.Fragment.ofIndex(Pt,Re));return Ge.getSeq()}}Z.compileAtoms=Fe;function Ue(It){return function(Lt){for(var Pt=0,He=0,Be=It;He<Be.length;He++){var Ge=Be[He];Lt.hasAtom(Ge)&&Pt++}if(!Pt)return p.FragmentSeq.empty(Lt);if(Pt===It.length)return new p.FragmentSeq(Lt,[p.Fragment.ofArray(Lt,It[0],It)]);for(var Re=0,Ne=new Int32Array(Pt),ze=0,et=It;ze<et.length;ze++){var Ge=et[ze];Lt.hasAtom(Ge)&&(Ne[Re++]=Ge)}return new p.FragmentSeq(Lt,[p.Fragment.ofArray(Lt,Ne[0],Ne)])}}Z.compileAtomIndices=Ue;function Qe(It,Lt,Pt){return function(He){var Be=Pt(He.structure),Ge=Be.atomStartIndex,Re=Be.atomEndIndex,Ne=new p.FragmentSeqBuilder(He);if(It)for(var ze=e.Utils.FastSet.ofArray(Lt),et=Be.count,it=0;it<et;it++)ze.has(it)||He.hasRange(Ge[it],Re[it])&&Ne.add(p.Fragment.ofIndexRange(He,Ge[it],Re[it]));else for(var at=0,vt=Lt;at<vt.length;at++){var it=vt[at];He.hasRange(Ge[it],Re[it])&&Ne.add(p.Fragment.ofIndexRange(He,Ge[it],Re[it]))}return Ne.getSeq()}}Z.compileFromIndices=Qe;function Ke(It,Lt,Pt){return function(He){for(var Be=Pt(He.structure),Ge=Be.atomStartIndex,Re=Be.atomEndIndex,Ne=new p.FragmentSeqBuilder(He),ze=Be.count,et=!1,it=Lt.map(function(Gt){return new be(Gt,Be)}),at=it.length===0,vt=0;vt<ze;vt++)if(He.hasRange(Ge[vt],Re[vt])){et=at;for(var jt=0,Nt=it;jt<Nt.length;jt++){var Dt=Nt[jt];if(Dt.isSatisfied(vt)){et=!0;break}}It&&(et=!et),et&&Ne.add(p.Fragment.ofIndexRange(He,Ge[vt],Re[vt]))}return Ne.getSeq()}}Z.compileAtomRanges=Ke;function Te(It,Lt,Pt,He){return function(Be){for(var Ge=Be.structure.data,Re=Ge.residues,Ne=Ge.chains,ze=Re.seqNumber,et=Re.authSeqNumber,it=Re.insCode,at=Re.atomStartIndex,vt=Re.atomEndIndex,jt=Ne.entityId,Nt=Ne.count,Dt=Ne.residueStartIndex,Gt=Ne.residueEndIndex,or=new p.FragmentSeqBuilder(Be),Jt=Be.structure.parent,pr=Ne.sourceChainIndex,lr=Jt&&pr,Lr=typeof Lt=="string"?{asymId:Lt}:Lt,Or=new be(Lr,lr?Jt.data.chains:Ne),Sn=typeof Lr.authAsymId=="string",Ht=Sn?et:ze,sr=Sn?Pt.authSeqNumber:Pt.seqNumber,Sr=Sn?He.authSeqNumber:He.seqNumber,Fr=0;Fr<Nt;Fr++)if(!(It&&jt[Fr]!==It||!Or.isSatisfied(lr?pr[Fr]:Fr))){for(var gr=Dt[Fr],tn=Gt[Fr],Vn=-1,Rt=-1;gr<tn;gr++)if(Ht[gr]>=sr&&Ht[gr]<=Sr){if(Pt.insCode&&it[gr]!==Pt.insCode)continue;Vn=gr;break}if(!(gr<0||gr===tn)){for(gr=Vn;gr<tn;gr++)if(Ht[gr]>=Sr){if(He.insCode&&Ht[gr]===Sr&&it[gr]!==He.insCode)continue;break}Rt=gr,Be.hasRange(at[Vn],vt[Rt])&&or.add(p.Fragment.ofIndexRange(Be,at[Vn],vt[Rt]))}}return or.getSeq()}}Z.compileSequence=Te;function Ie(){return function(It){for(var Lt=It.structure.data.residues,Pt=Lt.atomStartIndex,He=Lt.atomEndIndex,Be=Lt.isHet,Ge=Lt.entityIndex,Re=Lt.count,Ne=It.structure.data.entities.type,ze="water",et=new p.FragmentSeqBuilder(It),it=0;it<Re;it++)It.hasRange(Pt[it],He[it])&&Ne[Ge[it]]!==ze&&Be[it]&&et.add(p.Fragment.ofIndexRange(It,Pt[it],He[it]));return et.getSeq()}}Z.compileHetGroups=Ie;function ke(){return function(It){for(var Lt=It.structure.data.residues,Pt=Lt.atomStartIndex,He=Lt.atomEndIndex,Be=It.structure.data.entities,Ge=Be.type,Re=Be.count,Ne=Be.residueStartIndex,ze=Be.residueEndIndex,et="polymer",it=0,at=0;at<Re;at++)if(Ge[at]===et)for(var vt=Ne[at],jt=ze[at];vt<jt;vt++)for(var Nt=Pt[vt],Dt=He[vt];Nt<Dt;Nt++)It.hasAtom(Nt)&&it++;if(!it)return p.FragmentSeq.empty(It);for(var Gt=new Int32Array(it),or=0,at=0;at<Re;at++)if(Ge[at]===et)for(var vt=Ne[at],jt=ze[at];vt<jt;vt++)for(var Nt=Pt[vt],Dt=He[vt];Nt<Dt;Nt++)It.hasAtom(Nt)&&(Gt[or++]=Nt);return new p.FragmentSeq(It,[p.Fragment.ofArray(It,Gt[0],Gt)])}}Z.compileNonHetPolymer=ke;function nt(It,Lt){return function(Pt){for(var He=Pt.structure.positions,Be=He.x,Ge=He.y,Re=He.z,Ne=He.count,ze=[],et=0;et<Ne;et++)if(Pt.hasAtom(et)){var it=Be[et],at=Ge[et],vt=Re[et];it>=It.x&&it<=Lt.x&&at>=It.y&&at<=Lt.y&&vt>=It.z&&vt<=Lt.z&&(ze[ze.length]=et)}return ze.length?new p.FragmentSeq(Pt,[new p.Fragment(Pt,ze[0],ze)]):p.FragmentSeq.empty(Pt)}}Z.compileAtomsInBox=nt;function dt(It,Lt){var Pt=x.toQuery(It),He=x.toQuery(Lt);return function(Be){return new p.FragmentSeq(Be,Pt(p.Context.ofFragments(He(Be))).fragments)}}Z.compileInside=dt;function yt(It,Lt,Pt){for(var He=0,Be=0,Ge=Lt.atomIndices;Be<Ge.length;Be++){var Re=Ge[Be];Pt.has(Re)&&He++}if(He){for(var Ne=new Int32Array(He),ze=0,et=0,it=Lt.atomIndices;et<it.length;et++){var Re=it[et];Pt.has(Re)&&(Ne[ze++]=Re)}return p.Fragment.ofArray(It,Ne[0],Ne)}}function gt(It,Lt){var Pt=x.toQuery(It),He=x.toQuery(Lt);return function(Be){for(var Ge=Pt(Be),Re=e.Utils.Mask.ofFragments(He(Be)),Ne=new p.FragmentSeqBuilder(Be),ze=0,et=Ge.fragments;ze<et.length;ze++){var it=et[ze],at=yt(Be,it,Re);at&&Ne.add(at)}return Ne.getSeq()}}Z.compileIntersectWith=gt;function xt(It,Lt){var Pt=x.toQuery(It);return function(He){for(var Be=Pt(He).fragments,Ge=new p.FragmentSeqBuilder(He),Re,Ne=0;Ne<Be.length;Ne++)Re=Be[Ne],Lt(Re)&&Ge.add(Re);return Ge.getSeq()}}Z.compileFilter=xt;function tt(It){var Lt=x.toQuery(It);return function(Pt){for(var He=e.Utils.Mask.ofFragments(Lt(Pt)),Be=0,Ge=0,Re=0,Ne=Pt.structure.data.atoms.count;Re<Ne;Re++)Pt.hasAtom(Re)&&!He.has(Re)&&Be++;if(!Be)return p.FragmentSeq.empty(Pt);for(var ze=new Int32Array(Be),Re=0,Ne=Pt.structure.data.atoms.count;Re<Ne;Re++)Pt.hasAtom(Re)&&!He.has(Re)&&(ze[Ge++]=Re);return new p.FragmentSeq(Pt,[p.Fragment.ofArray(Pt,ze[0],ze)])}}Z.compileComplement=tt;function pt(It){var Lt=It.map(function(Pt){return x.toQuery(Pt)});return Lt.length===1?Lt[0]:function(Pt){for(var He=new p.HashFragmentSeqBuilder(Pt),Be=0,Ge=Lt;Be<Ge.length;Be++)for(var Re=Ge[Be],Ne=Re(Pt),ze=0,et=Ne.fragments;ze<et.length;ze++){var it=et[ze];He.add(it)}return He.getSeq()}}Z.compileOr=pt;function At(It){var Lt=x.toQuery(It);return function(Pt){for(var He=Lt(Pt).fragments,Be=e.Utils.FastSet.create(),Ge=0,Re,Ne=0;Ne<He.length;Ne++)for(Re=He[Ne].atomIndices,Ge=0;Ge<Re.length;Ge++)Be.add(Re[Ge]);return Be.size===0?p.FragmentSeq.empty(Pt):new p.FragmentSeq(Pt,[p.Fragment.ofSet(Pt,Be)])}}Z.compileUnion=At;function Tt(It,Lt){return function(Pt){var He=Pt.structure,Be=He.data.entities,Ge=He.data.atoms.name,Re=[],Ne=0,ze=e.Utils.FastSet.ofArray(It);if(Lt){for(var et=0;et<He.data.entities.count;et++)if(Be.type[et]==="polymer")for(var it=Be.atomStartIndex[et],at=Be.atomEndIndex[et],vt=it;vt<at;vt++)Pt.hasAtom(vt)&&!ze.has(Ge[vt])&&(Re[Ne++]=vt)}else for(var et=0;et<Be.count;et++)if(Be.type[et]==="polymer")for(var it=Be.atomStartIndex[et],at=Be.atomEndIndex[et],vt=it;vt<at;vt++)Pt.hasAtom(vt)&&ze.has(Ge[vt])&&(Re[Ne++]=vt);return Re.length?new p.FragmentSeq(Pt,[p.Fragment.ofArray(Pt,Re[0],new Int32Array(Re))]):p.FragmentSeq.empty(Pt)}}Z.compilePolymerNames=Tt;function Ct(It,Lt){var Pt=x.toQuery(It);return function(He){for(var Be=Pt(He),Ge=He.lookup3d(),Re=new p.HashFragmentSeqBuilder(He),Ne=He.structure.positions,ze=Ne.x,et=Ne.y,it=Ne.z,at=He.structure.data.atoms.residueIndex,vt=He.structure.data.residues.atomStartIndex,jt=He.structure.data.residues.atomEndIndex,Nt=0,Dt=Be.fragments;Nt<Dt.length;Nt++){for(var Gt=Dt[Nt],or=e.Utils.FastSet.create(),Jt=0,pr=Gt.atomIndices;Jt<pr.length;Jt++){var lr=pr[Jt];or.add(at[lr]);for(var Lr=Ge(ze[lr],et[lr],it[lr],Lt),Or=Lr.elements,Sn=Lr.count,Ht=0;Ht<Sn;Ht++)or.add(at[Or[Ht]])}var sr={count:0,start:vt,end:jt};or.forEach(function(gr,tn){tn.count+=tn.end[gr]-tn.start[gr]},sr);var Sr=new Int32Array(sr.count),Fr={indices:Sr,offset:0,start:vt,end:jt};or.forEach(function(gr,tn){for(var Vn=tn.start[gr],Rt=tn.end[gr];Vn<Rt;Vn++)tn.indices[tn.offset++]=Vn},Fr),Array.prototype.sort.call(Sr,function(gr,tn){return gr-tn}),Re.add(p.Fragment.ofArray(He,Sr[0],Sr))}return Re.getSeq()}}Z.compileAmbientResidues=Ct;function Bt(It){var Lt=x.toQuery(It);return function(Pt){for(var He=Lt(Pt),Be=new p.HashFragmentSeqBuilder(Pt),Ge=Pt.structure.data.atoms.residueIndex,Re=Pt.structure.data.residues.atomStartIndex,Ne=Pt.structure.data.residues.atomEndIndex,ze=0,et=He.fragments;ze<et.length;ze++){for(var it=et[ze],at=e.Utils.FastSet.create(),vt=0,jt=it.atomIndices;vt<jt.length;vt++){var Nt=jt[vt];at.add(Ge[Nt])}var Dt={count:0,start:Re,end:Ne};at.forEach(function(Jt,pr){pr.count+=pr.end[Jt]-pr.start[Jt]},Dt);var Gt=new Int32Array(Dt.count),or={indices:Gt,offset:0,start:Re,end:Ne};at.forEach(function(Jt,pr){for(var lr=pr.start[Jt],Lr=pr.end[Jt];lr<Lr;lr++)pr.indices[pr.offset++]=lr},or),Array.prototype.sort.call(Gt,function(Jt,pr){return Jt-pr}),Be.add(p.Fragment.ofArray(Pt,Gt[0],Gt))}return Be.getSeq()}}Z.compileWholeResidues=Bt;function nr(It,Lt){var Pt=x.toQuery(It);return function(He){for(var Be=Pt(He),Ge=new p.HashFragmentSeqBuilder(He),Re=0,Ne=Be.fragments;Re<Ne.length;Re++)for(var ze=Ne[Re],et=Lt(ze),it=0,at=et.fragments;it<at.length;it++){var vt=at[it];Ge.add(vt)}return Ge.getSeq()}}Z.compileFlatten=nr;function $t(It,Lt){var Pt=x.toQuery(It),He=x.toQuery(Lt);return function(Be){for(var Ge=Pt(Be),Re=e.Utils.Mask.ofFragments(He(Be)),Ne=new p.HashFragmentSeqBuilder(Be),ze=0,et=Ge.fragments;ze<et.length;ze++){for(var it=et[ze],at=0,vt=0,jt=it.atomIndices;vt<jt.length;vt++){var Nt=jt[vt];Re.has(Nt)||at++}if(at){for(var Dt=new Int32Array(at),Gt=0,or=0,Jt=it.atomIndices;or<Jt.length;or++){var Nt=Jt[or];Re.has(Nt)||(Dt[Gt++]=Nt)}Ne.add(p.Fragment.ofArray(Be,Dt[0],Dt))}}return Ne.getSeq()}}Z.compileExcept=$t})(ve=p.Compiler||(p.Compiler={}))})(d=s.Query||(s.Query={}))})(o=e.Structure||(e.Structure={}))})(r=i.Core||(i.Core={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){var x;(function(l){function _(C){return function(E){return function(S,M){return C(E(S,M))}}}function v(C){return function(E,S){return function(M,A){return C(E(M,A),S(M,A))}}}l.not=_(function(C){return!C}),l.and=v(function(C,E){return C&&E}),l.or=v(function(C,E){return C||E});var c=e.Utils.FastSet.ofArray(["N","CA","C","O","P","OP1","OP2","O3'","O5'","C3'","C5'","C4"]);l.backbone=function(C,E){return l.entityType(C,E)==="polymer"&&c.has(l.atomName(C,E))},l.sidechain=function(C,E){return l.entityType(C,E)==="polymer"&&!c.has(l.atomName(C,E))};function h(C){return function(E,S){return function(M,A){return C(E(M,A),S(M,A))}}}l.equal=h(function(C,E){return C===E}),l.notEqual=h(function(C,E){return C!==E}),l.greater=h(function(C,E){return C>E}),l.lesser=h(function(C,E){return C<E}),l.greaterEqual=h(function(C,E){return C>=E}),l.lesserEqual=h(function(C,E){return C<=E});function f(C,E,S){return function(M,A){var R=C(M,A);return R>=E&&R<=S}}l.inRange=f;function m(C){return function(){return C}}l.value=m;function b(C,E,S){return function(M,A){var R=M.structure;return S(E(R))[C(R.data.atoms)[A]]}}l.residueSeqNumber=b(function(C){return C.residueIndex},function(C){return C.data.residues},function(C){return C.seqNumber}),l.residueName=b(function(C){return C.residueIndex},function(C){return C.data.residues},function(C){return C.name}),l.elementSymbol=b(function(C){return C.indices},function(C){return C.data.atoms},function(C){return C.elementSymbol}),l.atomName=b(function(C){return C.indices},function(C){return C.data.atoms},function(C){return C.name}),l.entityType=b(function(C){return C.entityIndex},function(C){return C.data.entities},function(C){return C.type});function w(C){return p.Builder.build(function(){return function(E){for(var S=[],M=0,A=E.structure.data.atoms.count;M<A;M++)E.hasAtom(M)&&C(E,M)&&(S[S.length]=M);return S.length?new p.FragmentSeq(E,[p.Fragment.ofArray(E,S[0],new Int32Array(S))]):p.FragmentSeq.empty(E)}})}l.query=w})(x=p.Algebraic||(p.Algebraic={}))})(d=s.Query||(s.Query={}))})(o=e.Structure||(e.Structure={}))})(r=i.Core||(i.Core={}))})(U||(U={}));var U;(function(i){var r;(function(e){e.VERSION={number:"1.7.9",date:"June 8 2019"}})(r=i.Visualization||(i.Visualization={}))})(U||(U={}));var U;(function(i){var r;(function(e){e.THREE=k})(r=i.Visualization||(i.Visualization={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";var d=function(){function p(){}return p.getRandomColor=function(x){x===void 0&&(x=0);for(var l=0;;){l++;var _=p.randomMix({r:166/255,g:0,b:100/255},{r:1,g:1,b:0},{r:0,g:100/255,b:1},x),v=Math.abs(p.previous.r-_.r)+Math.abs(p.previous.g-_.g)+Math.abs(p.previous.b-_.b);if(v>100||l===10)return p.previous=_,_}},p.randomMix=function(x,l,_,v){var c=Math.floor(Math.random()*3)|0,h=c===0?Math.random()*v:Math.random(),f=c===1?Math.random()*v:Math.random(),m=c===2?Math.random()*v:Math.random(),b=h+f+m;return h/=b,f/=b,m/=b,{r:h*x.r+f*l.r+m*_.r,g:h*x.g+f*l.g+m*_.g,b:h*x.b+f*l.b+m*_.b}},p.interpolate=function(x,l,_,v,c,h){var f=h!==void 0?h:{r:.1,g:.1,b:.1},m=(c-x)/(_-x);return f.r=l.r+(v.r-l.r)*m,f.g=l.g+(v.g-l.g)*m,f.b=l.b+(v.b-l.b)*m,f},p.previous=p.randomMix({r:.75,g:0,b:.25},{r:1,g:.5,b:0},{r:0,g:.35,b:1},.5),p}();s.Palette=d})(o=e.Utils||(e.Utils={}))})(r=i.Visualization||(i.Visualization={}))})(U||(U={}));var U;(function(i){var r;(function(e){function o(){var d=document.createElement("canvas");try{var p=d.getContext("webgl")||d.getContext("experimental-webgl");return!!p}catch(x){return console.log(x),!1}}e.checkWebGL=o;var s=function(){function d(){}return d.setPickBase=function(p,x,l,_){var v=24,c=p<<v-x|l,h=c>>16&255,f=c>>8&255,m=c&255;_.r=h/255,_.g=f/255,_.b=m/255},d.setPickColor=function(p,x,l,_,v){var c=24,h=p<<c-x|l,f=h>>16&255,m=h>>8&255,b=h&255;_[v]=f/255,_[v+1]=m/255,_[v+2]=b/255},d.toSurface=function(p){for(var x=p.vertices.length*3,l=new Float32Array(x),_=new Float32Array(x),v=new Uint32Array(p.faces.length*3),c=Array(p.vertices.length),h=0;h<p.faces.length;h++){var f=p.faces[h];c[f.a]=f.vertexNormals[0],c[f.b]=f.vertexNormals[1],c[f.c]=f.vertexNormals[2],v[3*h]=f.a,v[3*h+1]=f.b,v[3*h+2]=f.c}for(var h=0;h<p.vertices.length;h++){var m=p.vertices[h];l[3*h]=m.x,l[3*h+1]=m.y,l[3*h+2]=m.z;var b=c[h];_[3*h]=b.x,_[3*h+1]=b.y,_[3*h+2]=b.z}return{vertices:l,vertexCount:p.vertices.length,triangleIndices:v,triangleCount:p.faces.length,normals:_}},d.toRawGeometry=function(p){var x=d.toSurface(p),l=x.vertices,_=x.vertexCount,v=x.triangleIndices,c=x.triangleCount,h=x.normals;return{vertices:l,vertexCount:_,indices:v,indexCount:c,normals:h,elementSize:3}},d.getIndexedBufferGeometry=function(p){for(var x=p.vertices.length*3,l=new Float32Array(x),_=new Float32Array(x),v=new Uint32Array(p.faces.length*3),c=Array(p.vertices.length),h=0;h<p.faces.length;h++){var f=p.faces[h];c[f.a]=f.vertexNormals[0],c[f.b]=f.vertexNormals[1],c[f.c]=f.vertexNormals[2],v[3*h]=f.a,v[3*h+1]=f.b,v[3*h+2]=f.c}for(var h=0;h<p.vertices.length;h++){var m=p.vertices[h];l[3*h]=m.x,l[3*h+1]=m.y,l[3*h+2]=m.z;var b=c[h];_[3*h]=b.x,_[3*h+1]=b.y,_[3*h+2]=b.z}var w=new e.THREE.BufferGeometry;return w.addAttribute("position",new e.THREE.BufferAttribute(l,3)),w.addAttribute("normal",new e.THREE.BufferAttribute(_,3)),w.addAttribute("index",new e.THREE.BufferAttribute(v,1)),w},d}();e.GeometryHelper=s})(r=i.Visualization||(i.Visualization={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(d){function p(S,M){M.r=S.r,M.g=S.g,M.b=S.b}d.copy=p;function x(S){var M=S.r,A=S.g,R=S.b;return{r:M,g:A,b:R}}d.clone=x;function l(S){return new e.THREE.Vector3(S.r,S.g,S.b)}d.toVector=l;function _(S){return{r:S.x,g:S.y,b:S.z}}d.fromVector=_;function v(S,M,A){return{r:S/255,g:M/255,b:A/255}}d.fromRgb=v;function c(S,M,A){return A<0&&(A+=1),A>1&&(A-=1),A<.16666666666666666?S+(M-S)*6*A:A<.5?M:A<.6666666666666666?S+(M-S)*(.6666666666666666-A)*6:S}function h(S,M,A){var R,D,N;if(M==0)R=D=N=A;else{var I=A<.5?A*(1+M):A+M-A*M,L=2*A-I;R=c(L,I,S+.3333333333333333),D=c(L,I,S),N=c(L,I,S-.3333333333333333)}return{r:R,g:D,b:N}}d.fromHsl=h;function f(S,M,A){var R,D,N=[];if(M===0)R=[A,A,A];else switch(S=S/60,D=Math.floor(S),N=[A*(1-M),A*(1-M*(S-D)),A*(1-M*(1-(S-D)))],D){case 0:R=[A,N[2],N[0]];break;case 1:R=[N[1],A,N[0]];break;case 2:R=[N[0],A,N[2]];break;case 3:R=[N[0],N[1],A];break;case 4:R=[N[2],N[0],A];break;default:R=[A,N[0],N[1]];break}return{r:R[0],g:R[1],b:R[2]}}d.fromHsv=f;function m(){return e.Utils.Palette.getRandomColor()}d.random=m;function b(S){return{r:(S>>16&255)/255,g:(S>>8&255)/255,b:(S&255)/255}}d.fromHex=b;function w(S){return S[0]!=="#"?b(0):S.length===4?w("#"+S[1]+S[1]+S[2]+S[2]+S[3]+S[3]):S.length===7?b(parseInt(S.substr(1),16)):b(0)}d.fromHexString=w;function C(S,M,A,R){R.r=S.r+(M.r-S.r)*A,R.g=S.g+(M.g-S.g)*A,R.b=S.b+(M.b-S.b)*A}d.interpolate=C;function E(S){return S.r!==void 0&&S.g!==void 0&&S.b!==void 0}d.isColor=E})(o=e.Color||(e.Color={}));var s;(function(d){var p;(function(C){C.HighlightColor={r:1,g:1,b:0},C.SelectionColor={r:.6705882352941176,g:.2784313725490196,b:.7176470588235294},C.UniformColor={r:.26666666666666666,g:.5098039215686274,b:255},C.Transparency={alpha:1,writeDepth:!1}})(p=d.Default||(d.Default={}));function x(C){var E=+C.transparency.alpha;return isNaN(E)&&(E=1),E<=.999}d.isTransparent=x;function l(C,E,S){var M=C.colors.get(E);return M||S}d.getColor=l;function _(C){C===void 0&&(C={});var E=C.colors,S=C.variables,M=S===void 0?i.Core.Utils.FastMap.create():S,A=C.transparency,R=A===void 0?p.Transparency:A,D=C.interactive,N=D===void 0?!0:D,I=C.disableFog,L=I===void 0?!1:I,Y=C.isSticky,J=Y===void 0?!1:Y,ie=i.Core.Utils.FastMap.create();E&&E.forEach(function(Q,ne){return ie.set(ne,Q)});var K=ie.get("Uniform");return K||(ie.set("Uniform",p.UniformColor),K=p.UniformColor),{colors:ie,variables:M,transparency:R,interactive:N,disableFog:L,isSticky:J,setElementColor:function(Q,ne){o.copy(K,ne)}}}d.createUniform=_;function v(C,E){E===void 0&&(E={});var S=E.colors,M=S===void 0?i.Core.Utils.FastMap.create():S,A=E.variables,R=A===void 0?i.Core.Utils.FastMap.create():A,D=E.transparency,N=D===void 0?p.Transparency:D,I=E.interactive,L=I===void 0?!0:I,Y=E.disableFog,J=Y===void 0?!1:Y,ie=E.isSticky,K=ie===void 0?!1:ie;return{colors:M,variables:R,transparency:N||p.Transparency,interactive:L,disableFog:J,isSticky:K,setElementColor:function(Q,ne){C.setColor(C.getProperty(Q),ne)}}}d.createMapping=v;function c(C,E,S){var M=new w(E,S);return{getProperty:C,setColor:function(A,R){return M.setColor(A,R)}}}d.createColorMapMapping=c;function h(C,E){var S=new b(E);return{getProperty:C,setColor:function(M,A){return S.setColor(M,A)}}}d.createPalleteMapping=h;function f(C,E){var S=new m(E);return{getProperty:C,setColor:function(M,A){return S.setColor(M,A)}}}d.createPalleteIndexMapping=f;var m=function(){function C(E){this.pallete=E}return C.prototype.setColor=function(E,S){var M=this.pallete[E];o.copy(M,S)},C}(),b=function(){function C(E){this.pallete=E,this.colorIndex=0,this.colorMap=i.Core.Utils.FastMap.create()}return C.prototype.setColor=function(E,S){var M=this.colorMap.get(E);M||(this.colorIndex=(this.colorIndex+1)%this.pallete.length|0,M=this.pallete[this.colorIndex],this.colorMap.set(E,M)),o.copy(M,S)},C}(),w=function(){function C(E,S){this.map=E,this.fallbackColor=S}return C.prototype.setColor=function(E,S){var M=this.map.get(E);M||(M=this.fallbackColor),o.copy(M,S)},C}()})(s=e.Theme||(e.Theme={}))})(r=i.Visualization||(i.Visualization={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o=function(){function s(){}return s.getPickMaterial=function(){return new e.THREE.ShaderMaterial({attributes:{pColor:{type:"v4",value:[]}},vertexShader:s.pickVertexShader,fragmentShader:s.pickFragmentShader,blending:e.THREE.NoBlending,shading:e.THREE.FlatShading,side:e.THREE.DoubleSide})},s.getPickExcludeMaterial=function(){return new e.THREE.MeshBasicMaterial({color:e.THREE.ColorKeywords.white,side:e.THREE.DoubleSide})},s.compareVectorAndColor=function(d,p){return d.x===p.r&&d.y===p.g&&d.z===p.b},s.updateMaterial=function(d,p,x){var l=!1;s.updateTransparencyAndFog(d,p,x)&&(l=!0),d instanceof e.THREE.ShaderMaterial&&s.updateHighlightColor(d,p)&&(l=!0),l&&(d.needsUpdate=!0)},s.updateHighlightColor=function(d,p){var x=!1,l=d.uniforms.selectionColor.value,_=e.Theme.getColor(p,"Selection",e.Theme.Default.SelectionColor);s.compareVectorAndColor(l,_)||(d.uniforms.selectionColor.value=e.Color.toVector(_),x=!0),l=d.uniforms.highlightColor.value;var v=e.Theme.getColor(p,"Highlight",e.Theme.Default.HighlightColor);return s.compareVectorAndColor(l,v)||(d.uniforms.highlightColor.value=e.Color.toVector(v),x=!0),x},s.updateTransparencyAndFog=function(d,p,x){var l=p.transparency,_=+l.alpha;isNaN(_)&&(_=1);var v=_<=.999,c=!!l.writeDepth;v||(_=1,c=!0),x&&(x.renderOrder=v?1:0);var h=!1;return(d instanceof e.THREE.MeshPhongMaterial||d instanceof e.THREE.MeshBasicMaterial||d instanceof e.THREE.ShaderMaterial)&&(d.transparent!==v&&(d.transparent=v,h=!0),d.depthWrite!==c&&(d.depthWrite=c,h=!0),d.opacity!==_&&(d.opacity=_,h=!0),d.fog!==!p.disableFog&&(d.fog=!p.disableFog,h=!0),d instanceof e.THREE.ShaderMaterial&&d.uniforms.opacity&&(d.uniforms.opacity.value=_)),h},s.getMeshMaterial=function(d,p){d===void 0&&(d=e.THREE.SmoothShading),p===void 0&&(p=!1);var x=s.shader,l=new e.THREE.ShaderMaterial({uniforms:e.THREE.UniformsUtils.clone(x.uniforms),attributes:{vState:{type:"f",value:[]}},lights:!0,fog:!0,vertexShader:x.vertexShader,fragmentShader:x.fragmentShader,shading:d,side:e.THREE.DoubleSide,vertexColors:e.THREE.VertexColors,blending:e.THREE.NormalBlending,wireframe:p,linewidth:1});return l},s.getPhongVertexColorMaterial=function(){return new e.THREE.MeshPhongMaterial({specular:11184810,shininess:2,shading:e.THREE.SmoothShading,vertexColors:e.THREE.VertexColors,side:e.THREE.DoubleSide,metal:!0})},s.getDefaultHighlightMaterial=function(){return new e.THREE.MeshPhongMaterial({color:16777215,specular:11184810,shininess:2,shading:e.THREE.SmoothShading,side:e.THREE.DoubleSide,metal:!0})},s.applyColorToBuffer=function(d,p){for(var x=d.array,l=0,_=x.length;l<_;l+=3)x[l]=p.r,x[l+1]=p.g,x[l+2]=p.b;d.needsUpdate=!0},s.applyColorToMap=function(d,p,x){for(var l=p.array,_={r:.45,g:.45,b:.45},v=d.vertexRanges,c=0,h=d.elementIndices;c<h.length;c++){var f=h[c],m=d.elementMap.get(f),b=d.elementRanges[2*m],w=d.elementRanges[2*m+1];if(b!==w){x(f,_);for(var C=b;C<w;C+=2)for(var E=v[C],S=v[C+1],M=E;M<S;M++)l[M*3]=_.r,l[M*3+1]=_.g,l[M*3+2]=_.b}}p.needsUpdate=!0},s.pickVertexShader=["attribute vec4 pColor;","varying vec4 pC;","void main() {","pC = pColor;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),s.pickFragmentShader=["varying vec4 pC;","void main() {","gl_FragColor = pC;","}"].join(`
`),s.shader={uniforms:e.THREE.UniformsUtils.merge([e.THREE.UniformsLib.common,e.THREE.UniformsLib.bump,e.THREE.UniformsLib.normalmap,e.THREE.UniformsLib.fog,e.THREE.UniformsLib.lights,e.THREE.UniformsLib.shadowmap,{emissive:{type:"c",value:new e.THREE.Color(0)},specular:{type:"c",value:new e.THREE.Color(1118481)},shininess:{type:"f",value:2},wrapRGB:{type:"v3",value:new e.THREE.Vector3(1,1,1)},highlightColor:{type:"v3",value:new e.THREE.Vector3(1,1,0)},selectionColor:{type:"v3",value:new e.THREE.Vector3(1,0,0)}}]),vertexShader:["#define PHONG","varying vec3 vViewPosition;","#ifndef FLAT_SHADED","	varying vec3 vNormal;","#endif",e.THREE.ShaderChunk.common,e.THREE.ShaderChunk.map_pars_vertex,e.THREE.ShaderChunk.lightmap_pars_vertex,e.THREE.ShaderChunk.envmap_pars_vertex,e.THREE.ShaderChunk.lights_phong_pars_vertex,e.THREE.ShaderChunk.color_pars_vertex,e.THREE.ShaderChunk.morphtarget_pars_vertex,e.THREE.ShaderChunk.skinning_pars_vertex,e.THREE.ShaderChunk.shadowmap_pars_vertex,e.THREE.ShaderChunk.logdepthbuf_pars_vertex,"attribute float vState;","varying float vS;","void main() {","   vS = vState;",e.THREE.ShaderChunk.map_vertex,e.THREE.ShaderChunk.lightmap_vertex,e.THREE.ShaderChunk.color_vertex,e.THREE.ShaderChunk.morphnormal_vertex,e.THREE.ShaderChunk.skinbase_vertex,e.THREE.ShaderChunk.skinnormal_vertex,e.THREE.ShaderChunk.defaultnormal_vertex,"#ifndef FLAT_SHADED","	vNormal = normalize( transformedNormal );","#endif",e.THREE.ShaderChunk.morphtarget_vertex,e.THREE.ShaderChunk.skinning_vertex,e.THREE.ShaderChunk.default_vertex,e.THREE.ShaderChunk.logdepthbuf_vertex,"	vViewPosition = -mvPosition.xyz;",e.THREE.ShaderChunk.worldpos_vertex,e.THREE.ShaderChunk.envmap_vertex,e.THREE.ShaderChunk.lights_phong_vertex,e.THREE.ShaderChunk.shadowmap_vertex,"}"].join(`
`),fragmentShader:["#define PHONG","uniform vec3 diffuse;","uniform vec3 emissive;","uniform vec3 specular;","uniform float shininess;","uniform float opacity;","uniform vec3 highlightColor;","uniform vec3 selectionColor;",e.THREE.ShaderChunk.common,e.THREE.ShaderChunk.color_pars_fragment,e.THREE.ShaderChunk.map_pars_fragment,e.THREE.ShaderChunk.alphamap_pars_fragment,e.THREE.ShaderChunk.lightmap_pars_fragment,e.THREE.ShaderChunk.envmap_pars_fragment,e.THREE.ShaderChunk.fog_pars_fragment,e.THREE.ShaderChunk.lights_phong_pars_fragment,e.THREE.ShaderChunk.shadowmap_pars_fragment,e.THREE.ShaderChunk.bumpmap_pars_fragment,e.THREE.ShaderChunk.normalmap_pars_fragment,e.THREE.ShaderChunk.specularmap_pars_fragment,e.THREE.ShaderChunk.logdepthbuf_pars_fragment,"varying float vS;","void main() {","	vec3 outgoingLight = vec3( 0.0 );","	vec4 diffuseColor;","   if (vS < 0.33) { diffuseColor = vec4( vColor, opacity ); }","   else if (vS - floor(vS + 0.1) > 0.33) { diffuseColor = vec4(highlightColor, opacity); }","	else { diffuseColor = vec4(selectionColor, opacity); }",e.THREE.ShaderChunk.logdepthbuf_fragment,e.THREE.ShaderChunk.map_fragment,e.THREE.ShaderChunk.alphamap_fragment,e.THREE.ShaderChunk.alphatest_fragment,e.THREE.ShaderChunk.specularmap_fragment,e.THREE.ShaderChunk.lights_phong_fragment,e.THREE.ShaderChunk.lightmap_fragment,e.THREE.ShaderChunk.envmap_fragment,e.THREE.ShaderChunk.shadowmap_fragment,e.THREE.ShaderChunk.linear_to_gamma_fragment,e.THREE.ShaderChunk.fog_fragment,"#ifdef USE_FOG","   if (diffuseColor.a > 0.99) { gl_FragColor = vec4( outgoingLight, diffuseColor.a ); }","   else { gl_FragColor = vec4( outgoingLight, (1.0 - fogFactor) * diffuseColor.a ); }","#else","	gl_FragColor = vec4( outgoingLight, diffuseColor.a );","#endif","}"].join(`
`)},s}();e.MaterialsHelper=o})(r=i.Visualization||(i.Visualization={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o=function(){function d(){}return d}();e.GeometryBase=o;var s=function(){function d(){this.id=-1,this.entity=void 0,this.centroid=new e.THREE.Vector3,this.radius=0,this.object=void 0,this.theme=void 0,this.disposeList=[],this.pickObject=void 0,this.pickBufferAttributes=[],this.dirty=!1,this.props={},this.tag=void 0}return d.prototype.updateVisibility=function(p){this.dirty=!0,this.object.visible=p,this.pickObject&&(this.pickObject.visible=this.getPickObjectVisibility(p))},d.prototype.getVisibility=function(){return this.object.visible},d.prototype.applyTheme=function(p){this.dirty=!0,this.theme=p,p.interactive?this.pickObject&&(this.pickObject.visible=this.object.visible):this.pickObject&&(this.pickObject.visible=!1),this.applyThemeInternal(p)},d.prototype.updateId=function(p,x){this.id=p;for(var l=0,_=this.pickBufferAttributes;l<_.length;l++){var v=_[l],c=v.array;if(x<=8)for(var h=0,f=c.length;h<f;h+=4)e.Selection.Picking.applySceneIdFast(this.id,h,c);else for(var h=0,f=c.length;h<f;h+=4)e.Selection.Picking.applySceneIdSlow(x-8,this.id,h,c);v.needsUpdate=!0}},d.prototype.dispose=function(){for(var p=0,x=this.disposeList;p<x.length;p++){var l=x[p];l&&l.dispose()}this.disposeList=[]},d.prototype.highlight=function(p){var x=this.highlightInternal(p);return this.dirty=this.dirty||x,x},d.prototype.applySelection=function(p,x){var l=this.applySelectionInternal(p,x);return this.dirty=this.dirty||l,l},d.prototype.getBoundingSphereOfSelection=function(p){},d.prototype.getPickObjectVisibility=function(p){return p&&this.theme.interactive},d}();e.Model=s})(r=i.Visualization||(i.Visualization={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o=function(){function s(d){this.scene=d,this.availableIds=[],this.list=[],this.map=i.Core.Utils.FastMap.create(),this.maxId=1,this._idWidth=8}return Object.defineProperty(s.prototype,"idWidth",{get:function(){return this._idWidth},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"all",{get:function(){return this.list},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"count",{get:function(){return this.map.size},enumerable:!0,configurable:!0}),s.prototype.getBySceneId=function(d){return this.map.get(d)},s.prototype.add=function(d,p){p===void 0&&(p=!0);var x=-1;this.availableIds.length?x=this.availableIds.pop():x=this.maxId++,this.map.set(x,d),this.list.push(d),d.updateId(x,8),d.object&&this.scene.scene.add(d.object),d.pickObject&&this.scene.pickScene.add(d.pickObject),p?this.scene.camera.reset():this.scene.forceRender()},s.prototype.dispose=function(d){d.object&&this.scene.scene.remove(d.object),d.pickObject&&this.scene.pickScene.remove(d.pickObject),d.dispose()},s.prototype.removeAndDispose=function(d){if(this.map.get(d.id)){this.availableIds.push(d.id),this.dispose(d),this.map.delete(d.id);var p=this.list.indexOf(d);this.list[p]=this.list[this.list.length-1],this.list.pop(),d.id===this.maxId&&this.maxId--,d.id=-1,this.scene.forceRender()}},s.prototype.clear=function(){for(var d=0,p=this.list;d<p.length;d++){var x=p[d];this.dispose(x)}this.list=[],this.maxId=0,this.availableIds=[],this.map.clear(),this.scene.forceRender()},s}();e.ModelStore=o})(r=i.Visualization||(i.Visualization={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(x){x[x.Perspective=0]="Perspective",x[x.Orthographic=1]="Orthographic"})(o=e.CameraType||(e.CameraType={}));var s=i.Core.Geometry.LinearAlgebra,d=function(){function x(l){var _=this;this.touchSlabOn=!1,this.touchStartPosition={x:0,y:0},this.touchPosition={x:0,y:0},this.radius=0,this.slabWheelRate=1/15,this._planeDelta=new i.Core.Rx.Subject,this.subs=[],this.enableWheel=!1,this.mouseMoveDelta=0,this.lastMousePosition=void 0,this.planeDelta=this._planeDelta;var v={wheel:function(c){return _.handleMouseWheel(c)},touchStart:function(c){return _.touchstart(c)},touchEnd:function(c){return _.touchend(c)},touchMove:function(c){return _.touchmove(c)},mouseMove:function(c){return _.mousemove(c)},mouseOut:function(){return _.mouseOut()}};l.addEventListener("mousewheel",v.wheel),l.addEventListener("DOMMouseScroll",v.wheel),l.addEventListener("mousemove",v.mouseMove),l.addEventListener("mouseout",v.mouseOut),l.addEventListener("touchstart",v.touchStart,!1),l.addEventListener("touchend",v.touchEnd,!1),l.addEventListener("touchmove",v.touchMove,!1),this.subs.push(function(){return l.removeEventListener("mousewheel",v.wheel)}),this.subs.push(function(){return l.removeEventListener("mousemove",v.mouseMove)}),this.subs.push(function(){return l.removeEventListener("mouseout",v.mouseOut)}),this.subs.push(function(){return l.removeEventListener("DOMMouseScroll",v.wheel)}),this.subs.push(function(){return l.removeEventListener("touchstart",v.touchStart,!1)}),this.subs.push(function(){return l.removeEventListener("touchend",v.touchEnd,!1)}),this.subs.push(function(){return l.removeEventListener("touchmove",v.touchMove,!1)})}return x.prototype.updateSize=function(l,_){this.height=_},x.prototype.updateRadius=function(l){this.radius=l},x.prototype.destroy=function(){for(var l=0,_=this.subs;l<_.length;l++){var v=_[l];v()}this.subs=[],this._planeDelta.onCompleted()},x.prototype.handleMouseWheel=function(l){if(this.enableWheel){l.stopPropagation&&l.stopPropagation(),l.preventDefault&&l.preventDefault();var _=0;l.wheelDelta?_=l.wheelDelta:l.detail&&(_=-l.detail);var v=_<0?1:-1;_=this.radius*this.slabWheelRate*v,this._planeDelta.onNext(_)}},x.prototype.touchstart=function(l){switch(l.touches.length){case 3:{this.touchStartPosition.x=0,this.touchStartPosition.y=0;for(var _=0;_<3;_++)this.touchStartPosition.x+=l.touches[_].clientX/3,this.touchStartPosition.y+=l.touches[_].clientY/3;this.touchSlabOn=!0;break}default:this.touchSlabOn=!1;break}},x.prototype.touchend=function(l){this.touchSlabOn=!1},x.prototype.touchmove=function(l){if(this.touchSlabOn){this.touchPosition.x=0,this.touchPosition.y=0;for(var _=0;_<3;_++)this.touchPosition.x+=l.touches[_].clientX/3,this.touchPosition.y+=l.touches[_].clientY/3;var v=-5*this.radius*(this.touchPosition.y-this.touchStartPosition.y)/this.height;this.touchStartPosition.x=this.touchPosition.x,this.touchStartPosition.y=this.touchPosition.y,this._planeDelta.onNext(v)}},x.prototype.mousemove=function(l){if(!this.lastMousePosition){this.lastMousePosition=[l.clientX,l.clientY,0];return}var _=[l.clientX,l.clientY,0];this.mouseMoveDelta+=s.Vector3.distance(_,this.lastMousePosition),this.lastMousePosition=_,this.mouseMoveDelta>15&&(this.enableWheel=!0)},x.prototype.mouseOut=function(){this.mouseMoveDelta=0,this.lastMousePosition=void 0,this.enableWheel=!1},x}();e.SlabControls=d;var p=function(){function x(l,_){this.scene=l,this.domElement=_,this.fog=new e.THREE.Fog(0,0,500),this.focusPoint=new e.THREE.Vector3(0,0,0),this.focusRadius=0,this.targetDistance=0,this.nearPlaneDistance=0,this.nearPlaneDelta=0,this.fogEnabled=!0,this.fogDelta=0,this.fogFactor=1,this.observers=[],this.setup()}return x.shouldInUpdateInclude=function(l){return!isNaN(l.centroid.x)&&l.getVisibility()},x.prototype.updateFocus=function(l){if(l.length){var _=l.filter(function(L){return x.shouldInUpdateInclude(L)}).sort(function(L,Y){return Y.radius-L.radius});if(_.length){for(var v=[_[0]],c=new e.THREE.Vector3,h=1;h<_.length;h++){for(var f=_[h],m=!0,b=0,w=v;b<w.length;b++){var C=w[b],E=c.subVectors(f.centroid,C.centroid).length();if(E<C.radius){m=!1;break}}m&&v.push(f)}var S=this.focusPoint;S.x=0,S.y=0,S.z=0;for(var M=0,A=v;M<A.length;M++){var C=A[M];S.add(C.centroid)}S.multiplyScalar(1/v.length);for(var R=0,D=0,N=_;D<N.length;D++){var I=N[D];R=Math.max(R,S.distanceTo(I.centroid)+I.radius)}this.focusRadius=R,this.slabControls.updateRadius(this.focusRadius)}}},x.prototype.focus=function(){this.controls.reset();var l=this.focusPoint;this.camera.position.set(l.x,l.y,l.z+4*this.focusRadius),this.camera.lookAt(l),this.controls.target.set(l.x,l.y,l.z),this.cameraUpdated()},x.prototype.reset=function(){this.nearPlaneDelta=0,this.fogDelta=0,this.updateFocus(this.scene.models.all),this.focus()},x.prototype.snapshot=function(){return this.controls.getState()},x.prototype.restore=function(l){this.controls.setState(l),this.scene.forceRender()},x.prototype.focusOnModel=function(){for(var l=[],_=0;_<arguments.length;_++)l[_]=arguments[_];this.updateFocus(l),this.nearPlaneDelta=0,this.fogDelta=0,this.controls.panAndMoveToDistance(this.focusPoint,this.focusRadius*4)},x.prototype.focusOnPoint=function(l,_){this.focusPoint.x=l.x,this.focusPoint.y=l.y,this.focusPoint.z=l.z,this.focusRadius=Math.max(_,1),this.slabControls.updateRadius(this.focusRadius),this.nearPlaneDelta=0,this.fogDelta=0,this.controls.panAndMoveToDistance(this.focusPoint,this.focusRadius*4)},x.prototype.move=function(l){this.controls.panTo(l)},x.prototype.updateSize=function(l,_){var v=this.camera;v instanceof e.THREE.PerspectiveCamera&&(v.aspect=l/_),this.slabControls.updateSize(l,_),this.camera.updateProjectionMatrix()},Object.defineProperty(x.prototype,"position",{get:function(){return this.camera.position},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"object",{get:function(){return this.camera},enumerable:!0,configurable:!0}),x.prototype.dispose=function(){this.slabControls&&(this.slabControls.destroy(),this.slabControls=void 0),this.unbindCamera&&(this.unbindCamera(),this.unbindCamera=void 0),this.controls&&(this.controls.destroy(),this.controls=void 0)},x.prototype.planeDeltaUpdate=function(l){var _=this.computeNearDistance(),v=_+this.nearPlaneDelta+l;l>0&&v>this.targetDistance&&(l=0),l<0&&v<.01&&(l=0),this.nearPlaneDelta+=l,this.fogDelta+=l,this.cameraUpdated()},x.prototype.computeNearDistance=function(){var l=this.controls.target.distanceTo(this.camera.position);return l>this.focusRadius?l-this.focusRadius:0},x.prototype.cameraUpdated=function(){var l=this.scene.options;this.fogEnabled=!!l.enableFog;var _=this.camera;_ instanceof e.THREE.PerspectiveCamera&&(_.fov=l.cameraFOV),this.targetDistance=this.controls.target.distanceTo(this.camera.position);var v=this.computeNearDistance()+this.nearPlaneDelta;if(this.camera.near=Math.max(.01,Math.min(v,this.targetDistance-.5)),l.enableFog){var c=this.targetDistance-this.camera.near+this.fogFactor*1*this.focusRadius-this.nearPlaneDelta,h=this.targetDistance-this.camera.near+this.fogFactor*2*this.focusRadius-this.nearPlaneDelta;this.fog.near=Math.max(c,.1),this.fog.far=Math.max(h,.2)}else this.fog.far=1000001,this.fog.near=1e6;this.camera.updateProjectionMatrix(),this.scene.forceRender();for(var f=0,m=this.observers;f<m.length;f++){var b=m[f];b.call(null,this)}},x.prototype.createCamera=function(){if(this.scene.options.cameraType===o.Perspective)this.camera=new e.THREE.PerspectiveCamera(this.scene.options.cameraFOV,this.scene.parentElement.clientWidth/this.scene.parentElement.clientHeight,.1,1e6);else{var l=this.scene.parentElement.clientWidth,_=this.scene.parentElement.clientHeight,v=100,c=_/l*v;this.camera=new e.THREE.OrthographicCamera(.5*v/-2,.5*v/2,c/2,c/-2,.1,1e6)}this.controls&&(this.controls.camera=this.camera,this.reset())},x.prototype.setup=function(){var l=this;this.dispose(),this.createCamera(),this.controls=new e.CameraControls(this.camera,this.domElement,this.scene);var _=this.scene.options.clearColor;this.fog.color.setRGB(_.r,_.g,_.b),this.scene.scene.fog=this.fog;var v=function(){return l.cameraUpdated()};this.slabControls=new d(this.domElement);var c=this.slabControls.planeDelta.subscribe(function(h){return l.planeDeltaUpdate(h)});this.controls.events.addEventListener("change",v),this.unbindCamera=function(){l.controls.events.removeEventListener("change",v),c.dispose(),l.observers=[]},this.reset()},x.prototype.observe=function(l){this.observers.push(l)},x.prototype.stopObserving=function(l){this.observers=this.observers.filter(function(_){return _!==l})},x}();e.Camera=p})(r=i.Visualization||(i.Visualization={}))})(U||(U={}));var U;(function(i){var r;(function(e){e.DefaultSceneOptions={alpha:!1,clearColor:{r:0,g:0,b:0},cameraSpeed:6,cameraFOV:30,cameraType:e.CameraType.Perspective,enableFog:!0,fogFactor:1};var o=function(){function x(l,_){this.renderState=l,this.domElement=_,this.position={x:0,y:0},this.lastPosition={x:0,y:0},this.isDirty=!0,this.rect={left:0,top:0,right:0,bottom:0},this.exactPosition={x:0,y:0},this.isInside=!1,this.isButtonDown=!1}return x.prototype.updateRect=function(){var l=this.domElement.getBoundingClientRect();this.rect.bottom=l.bottom,this.rect.top=l.top,this.rect.left=l.left,this.rect.right=l.right},x.prototype.updatePosition=function(l,_){this.position.x===l&&this.position.y===_||(this.isDirty=!0,this.position.x=l,this.position.y=_)},x.prototype.update=function(){return this.lastPosition.x===this.position.x&&this.lastPosition.y===this.position.y?!1:(this.lastPosition.x=this.position.x,this.lastPosition.y=this.position.y,!0)},x.prototype.setExactPosition=function(){if(this.isDirty){var l=Math.round((this.position.x-this.rect.left)/(this.rect.right-this.rect.left)*this.renderState.width)|0,_=Math.round((this.position.y-this.rect.top)/(this.rect.bottom-this.rect.top)*this.renderState.height)|0;this.exactPosition.x=l,this.exactPosition.y=_,this.isDirty=!1}},x}();e.MouseInfo=o;var s=function(){function x(){this.lights=[]}return x.prototype.setup=function(l){var _=new e.THREE.PointLight(11184810,.75);l.add(_),this.lights=[_];var v=new e.THREE.AmbientLight(10066329);l.add(v)},x.prototype.update=function(l){for(var _=0,v=this.lights;_<v.length;_++){var c=v[_];c.position.copy(l)}},x}();e.DefaultLighting=s;var d=function(){function x(){this.width=0,this.height=0,this.resizing=!1,this.rendered=!1,this.lastRenderTime=0,this.pickDelta=0,this.animationFrame=0}return x}();e.RenderState=d;var p=function(){function x(l,_){_===void 0&&(_={});var v=this;this.renderState=new d,this.pickInfo=new e.Selection.Pick,this.unbindEvents=[],this.models=new e.ModelStore(this),this.events=new e.THREE.EventDispatcher,this.initialResizeTimeout=void 0,this.clearHighlightsCall=function(){return v.clearHighlights(!0)},this.renderFunc=function(f){return v.render(f)},this.pickBuffer=new Uint8Array(4),_=i.Core.Utils.extend({},_,e.DefaultSceneOptions),this.options=_,this.parentElement=l,this.scene=new e.THREE.Scene,this.pickScene=new e.THREE.Scene,this.pickTarget=new e.THREE.WebGLRenderTarget(1,1,{format:e.THREE.RGBAFormat,minFilter:e.THREE.LinearFilter}),this.pickTarget.generateMipmaps=!1,this.renderer=new e.THREE.WebGLRenderer({antialias:!0,alpha:_.alpha,preserveDrawingBuffer:!0}),this.renderer.setPixelRatio(window.devicePixelRatio||1),this.renderer.setClearColor(new e.THREE.Color(_.clearColor.r,_.clearColor.g,_.clearColor.b)),this.renderer.autoClear=!0,this.renderer.sortObjects=!1,this.mouseInfo=new o(this.renderState,this.renderer.domElement),this.lighting=new s,this.lighting.setup(this.scene),this.parentElement.appendChild(this.renderer.domElement);var c=i.Core.Utils.debounce(function(){return v.handleResize()},150),h=function(){v.renderState.resizing=!0,c()};window.addEventListener("resize",h),document.addEventListener("resize",h),this.parentElement.addEventListener("resize",h),this.unbindEvents.push(function(){return window.removeEventListener("resize",h)}),this.unbindEvents.push(function(){return document.removeEventListener("resize",h)}),this.unbindEvents.push(function(){return v.parentElement.removeEventListener("resize",h)}),this.setupMouse(),this.camera=new e.Camera(this,this.renderer.domElement),this.handleResize(),this.renderer.clear(),this.needsRender(),this.renderState.animationFrame=requestAnimationFrame(this.renderFunc),this.initialResizeTimeout=setTimeout(function(){v.initialResizeTimeout=void 0,v.handleResize()},1e3)}return x.prototype.updateOptions=function(l){l=i.Core.Utils.extend({},l,this.options),l.fogFactor<.1?l.fogFactor=.1:l.fogFactor>1&&(l.fogFactor=1);var _=l.cameraType!==this.options.cameraType,v=l.clearColor;this.renderer.setClearColor(new e.THREE.Color(v.r,v.g,v.b)),this.renderer.setClearAlpha(l.alpha?0:1),this.camera.fog.color.setRGB(v.r,v.g,v.b),this.camera.fogFactor=l.fogFactor,this.camera.controls&&(this.camera.controls.rotateSpeed=l.cameraSpeed,this.camera.controls.zoomSpeed=l.cameraSpeed),this.options=l,_&&this.camera.createCamera(),this.camera.cameraUpdated(),this.forceRender()},x.prototype.setupMouse=function(){var l=this,_=function(w){l.mouseInfo.isInside||l.mouseInfo.updateRect(),l.mouseInfo.updatePosition(w.clientX,w.clientY),l.mouseInfo.isInside=!0},v=this.renderer.domElement;v.addEventListener("mousemove",_),this.unbindEvents.push(function(){return v.removeEventListener("mousemove",_)});var c=function(w){l.mouseInfo.isInside=!1,l.clearHighlights()};v.addEventListener("mouseleave",c),this.unbindEvents.push(function(){return v.removeEventListener("mouseleave",c)});var h=function(w){l.mouseInfo.isInside&&(l.mouseInfo.updateRect(),l.handleSelectStart(w.clientX,w.clientY)),l.mouseInfo.isButtonDown=!0,l.clearHighlights()};v.addEventListener("mousedown",h),this.unbindEvents.push(function(){return v.removeEventListener("mousedown",h)});var f=function(w){l.mouseInfo.isButtonDown=!1,l.needsRender(),l.handleSelectEnd(w.clientX,w.clientY),l.clearHighlights(!0)};window.addEventListener("mouseup",f),this.unbindEvents.push(function(){return window.removeEventListener("mouseup",f)});var m=function(w){l.mouseInfo.updateRect()};window.addEventListener("mousewheel",m),window.addEventListener("DOMMouseScroll",m),this.unbindEvents.push(function(){return window.removeEventListener("mousewheel",m)}),this.unbindEvents.push(function(){return window.removeEventListener("DOMMouseScroll",m)}),v.addEventListener("touchstart",m,!1),this.unbindEvents.push(function(){return v.removeEventListener("touchstart",m,!1)});var b=function(w){var C=w.touches;C.length||(C=w.changedTouches),C.length===1&&l.handleSelectEnd(C[0].clientX,C[0].clientY),setTimeout(l.clearHighlightsCall,1e3/15)};v.addEventListener("touchend",b,!1),this.unbindEvents.push(function(){return v.removeEventListener("touchend",b,!1)});try{v.addEventListener("touchcancel",b,!1),this.unbindEvents.push(function(){return v.removeEventListener("touchcancel",b,!1)})}catch{}},x.prototype.handleSelectStart=function(l,_){this.pickInfo.selectStart(l,_)},x.prototype.handleSelectEnd=function(l,_){if(this.pickInfo.selectEnd(l,_)){var v=this.handlePick(!0);this.dispatchSelectEvent(v)}},x.prototype.handleResize=function(){var l=this.parentElement.clientWidth,_=this.parentElement.clientHeight;if(this.camera.updateSize(l,_),this.renderState.height===_&&this.renderState.width===l){this.renderState.resizing=!1;return}this.renderState.width=l,this.renderState.height=_,this.renderer.setSize(l,_),this.pickTarget=new e.THREE.WebGLRenderTarget(l,_,{format:e.THREE.RGBAFormat,minFilter:e.THREE.LinearFilter}),this.pickTarget.generateMipmaps=!1,this.renderState.resizing=!1,this.mouseInfo.updateRect(),this.needsRender()},x.prototype.needsRender=function(){this.renderState.rendered=!1},x.prototype.checkDirty=function(){for(var l=!1,_=0,v=this.models.all;_<v.length;_++){var c=v[_];l=l||c.dirty,c.dirty=!1}return l},x.prototype.render=function(l){if(this.renderState.resizing){this.renderState.animationFrame=requestAnimationFrame(this.renderFunc);return}var _=l-this.renderState.lastRenderTime;this.renderState.pickDelta+=_,this.renderState.lastRenderTime=l,this.renderState.pickDelta>33.3333333&&(this.renderState.pickDelta=this.renderState.pickDelta%33.3333333,this.handlePick(!1));var v=this.checkDirty();v&&(this.renderState.rendered=!1),this.renderState.rendered||(this.lighting.update(this.camera.position),this.renderer.sortObjects=!0,this.renderer.render(this.scene,this.camera.object),this.renderer.sortObjects=!1,this.renderState.rendered=!0,this.mouseInfo.isButtonDown||(this.renderer.setClearAlpha(1),this.renderer.render(this.pickScene,this.camera.object,this.pickTarget),this.renderer.setClearAlpha(this.options.alpha?0:1))),this.renderState.animationFrame=requestAnimationFrame(this.renderFunc)},x.prototype.dispatchHoverEvent=function(){this.events.dispatchEvent({type:x.hoverEvent,target:null,data:this.pickInfo.getPickInfo()})},x.prototype.dispatchSelectEvent=function(l){l&&this.events.dispatchEvent({type:x.selectEvent,target:null,data:l})},x.prototype.clearHighlights=function(l){l===void 0&&(l=!0);var _=this.pickInfo,v=this.models.getBySceneId(_.currentPickId),c=!1;return v&&(c=v.highlightElement(_.currentPickElementId,!1)),c&&l&&this.needsRender(),this.pickInfo.reset()&&this.dispatchHoverEvent(),c},x.prototype.handlePick=function(l){if(!(!l&&(!this.mouseInfo.update()||this.mouseInfo.isButtonDown)||this.renderState.resizing)&&this.mouseInfo.isInside){this.mouseInfo.setExactPosition();var _=this.mouseInfo.exactPosition,v=this.pickTarget.height-_.y;if(!(this.pickTarget.width<_.x-1||_.x<.01||this.pickTarget.height<v-1||v<.01)){this.renderer.readRenderTargetPixels(this.pickTarget,_.x|0,v|0,1,1,this.pickBuffer);var c=e.Selection.Picking.getSceneId(this.models.idWidth,this.pickBuffer),h=e.Selection.Picking.getElementId(this.models.idWidth,this.pickBuffer),f=this.pickInfo;if(l){if(c===255)return;var m=this.models.getBySceneId(c);return m?{model:m,elements:m.getPickElements(h)}:void 0}else{if(c===f.currentPickId&&h===f.currentPickElementId)return;var b=this.clearHighlights(!1),m=this.models.getBySceneId(c);if(c===255||!m){b&&this.needsRender();return}f.currentPickId=c,f.currentPickElementId=h,(m.highlightElement(h,!0)||b)&&(this.needsRender(),f.current={model:m,elements:m.getPickElements(h)},this.dispatchHoverEvent());return}}}},x.prototype.resized=function(){this.handleResize()},x.prototype.forceRender=function(){this.needsRender()},x.prototype.clear=function(){this.models.clear()},x.prototype.downloadScreenshot=function(){var l=this.renderer.domElement.toDataURL("image/png"),_=document.createElement("a");"download"in _?(_.style.visibility="hidden",_.href=l,_.target="_blank",_.download="litemol_screenshot.png",document.body.appendChild(_),_.click(),_.remove()):window.open(l,"_blank")},x.prototype.destroy=function(){this.clear();for(var l=0,_=this.unbindEvents;l<_.length;l++){var v=_[l];try{v()}catch{}}for(this.initialResizeTimeout!==void 0&&(clearTimeout(this.initialResizeTimeout),this.initialResizeTimeout=void 0),this.unbindEvents=[],cancelAnimationFrame(this.renderState.animationFrame),this.scene=null,this.pickScene=null,this.camera.dispose(),this.camera=null,this.renderer&&this.renderer.dispose&&this.renderer.dispose(),this.renderer=null,this.pickTarget.dispose(),this.pickTarget=null;this.parentElement.lastChild;)this.parentElement.removeChild(this.parentElement.lastChild)},x.hoverEvent="hover",x.selectEvent="select",x}();e.Scene=p})(r=i.Visualization||(i.Visualization={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o=function(){function s(d,p,x){var l=this;this.camera=d,this.domElement=p,this.scene=x,this.enabled=!0,this.rotateSpeed=6,this.zoomSpeed=6,this.panSpeed=1,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.noRoll=!0,this.staticMoving=!0,this.dynamicDampingFactor=.2,this.minDistance=1.5,this.maxDistance=1e5,this.keys=[65,16,17],this.target=new e.THREE.Vector3,this.EPS=1e-6,this.lastPosition=new e.THREE.Vector3,this._state=-1,this._keyDownState=-1,this._prevState=-1,this._eye=new e.THREE.Vector3,this._rotateStart=new e.THREE.Vector3,this._rotateEnd=new e.THREE.Vector3,this._zoomStart=new e.THREE.Vector2,this._zoomEnd=new e.THREE.Vector2,this._touchZoomDistanceStart=0,this._touchZoomDistanceEnd=0,this._panStart=new e.THREE.Vector2,this._panEnd=new e.THREE.Vector2,this.target0=this.target.clone(),this.position0=this.camera.position.clone(),this.up0=this.camera.up.clone(),this.changeEvent={type:"change",target:void 0},this.startEvent={type:"start",target:void 0},this.endEvent={type:"end",target:void 0},this.events=new e.THREE.EventDispatcher,this._mouseOnScreen=new e.THREE.Vector2,this._mouseOnBallProjection=new e.THREE.Vector3,this._objectUp=new e.THREE.Vector3,this._mouseOnBall=new e.THREE.Vector3,this._rotationAxis=new e.THREE.Vector3,this._rotationQuaternion=new e.THREE.Quaternion,this._panMouseChange=new e.THREE.Vector2,this._panObjectUp=new e.THREE.Vector3,this._panPan=new e.THREE.Vector3,this._panToDelta=new e.THREE.Vector3,this._panToVector=new e.THREE.Vector3,this.eventHandlers={keydown:function(_){return l.keydown(_)},keyup:function(_){return l.keyup(_)},mousedown:function(_){return l.mousedown(_)},mouseup:function(_){return l.mouseup(_)},mousemove:function(_){return l.mousemove(_)},touchstart:function(_){return l.touchstart(_)},touchmove:function(_){return l.touchmove(_)},touchend:function(_){return l.touchend(_)}},this.init()}return s.prototype.getMouseOnScreen=function(){this.scene.mouseInfo.setExactPosition();var d=this.scene.renderState,p=this.scene.mouseInfo.exactPosition;return this._mouseOnScreen.set(p.x/d.width,p.y/d.height),this._mouseOnScreen},s.prototype.getMouseProjectionOnBall=function(){this.scene.mouseInfo.setExactPosition();var d=this.scene.renderState,p=this.scene.mouseInfo.exactPosition,x=.5*d.width,l=.5*d.height,_=(p.x-x)/(d.width*.5),v=-(p.y-l)/(d.height*.5);this._mouseOnBall.set(_,v,0);var c=this._mouseOnBall.length();return this.noRoll?c<Math.SQRT1_2?this._mouseOnBall.z=Math.sqrt(1-c*c):this._mouseOnBall.z=.5/c:c>1?this._mouseOnBall.normalize():this._mouseOnBall.z=Math.sqrt(1-c*c),this._eye.copy(this.camera.position).sub(this.target),this._mouseOnBallProjection.copy(this.camera.up).setLength(this._mouseOnBall.y),this._mouseOnBallProjection.add(this._objectUp.copy(this.camera.up).cross(this._eye).setLength(this._mouseOnBall.x)),this._mouseOnBallProjection.add(this._eye.setLength(this._mouseOnBall.z)),this._mouseOnBallProjection},s.prototype.rotateCamera=function(){var d=Math.acos(this._rotateStart.dot(this._rotateEnd)/this._rotateStart.length()/this._rotateEnd.length());d&&(this._rotationAxis.crossVectors(this._rotateStart,this._rotateEnd).normalize(),d*=this.rotateSpeed,this._rotationQuaternion.setFromAxisAngle(this._rotationAxis,-d),this._eye.applyQuaternion(this._rotationQuaternion),this.camera.up.applyQuaternion(this._rotationQuaternion),this._rotateEnd.applyQuaternion(this._rotationQuaternion),this.staticMoving?this._rotateStart.copy(this._rotateEnd):(this._rotationQuaternion.setFromAxisAngle(this._rotationAxis,d*(this.dynamicDampingFactor-1)),this._rotateStart.applyQuaternion(this._rotationQuaternion)))},s.prototype.zoomCamera=function(){if(this._state===4){var d=this._touchZoomDistanceStart/this._touchZoomDistanceEnd;this._touchZoomDistanceStart=this._touchZoomDistanceEnd,this._eye.multiplyScalar(d)}else{var d=1-(this._zoomEnd.y-this._zoomStart.y)*this.zoomSpeed;d!==1&&d>0&&(this._eye.multiplyScalar(d),this.staticMoving?this._zoomStart.copy(this._zoomEnd):this._zoomStart.y+=(this._zoomEnd.y-this._zoomStart.y)*this.dynamicDampingFactor)}},s.prototype.panCamera=function(){this._panMouseChange.copy(this._panEnd).sub(this._panStart),this._panMouseChange.lengthSq()&&(this._panMouseChange.multiplyScalar(this._eye.length()*this.panSpeed),this._panPan.copy(this._eye).cross(this.camera.up).setLength(this._panMouseChange.x),this._panPan.add(this._panObjectUp.copy(this.camera.up).setLength(this._panMouseChange.y)),this.camera.position.add(this._panPan),this.target.add(this._panPan),this.staticMoving?this._panStart.copy(this._panEnd):this._panStart.add(this._panMouseChange.subVectors(this._panEnd,this._panStart).multiplyScalar(this.dynamicDampingFactor)))},s.prototype.panTo=function(d){var p=d.x,x=d.y,l=d.z;this._panToVector.set(p,x,l),this._panToDelta.subVectors(this._panToVector,this.target),this.camera.position.add(this._panToDelta),this.camera.lookAt(this._panToVector),this.target.copy(this._panToVector),this._eye.subVectors(this.camera.position,this.target),this.lastPosition.copy(this.camera.position),this._panToDelta.lengthSq()>this.EPS&&this.events.dispatchEvent(this.changeEvent)},s.prototype.panAndMoveToDistance=function(d,p){var x=d.x,l=d.y,_=d.z;this._panToVector.set(x,l,_),this._panToDelta.subVectors(this._panToVector,this.target),this.camera.position.add(this._panToDelta),this.camera.lookAt(this._panToVector),this.target.copy(this._panToVector),this._eye.subVectors(this.camera.position,this.target),this._eye.setLength(p),this.camera.position.addVectors(this.target,this._eye),this.checkDistances(),this.lastPosition.copy(this.camera.position),this.events.dispatchEvent(this.changeEvent)},s.prototype.checkDistances=function(){(!this.noZoom||!this.noPan)&&(this._eye.lengthSq()>this.maxDistance*this.maxDistance&&this.camera.position.addVectors(this.target,this._eye.setLength(this.maxDistance)),this._eye.lengthSq()<this.minDistance*this.minDistance&&this.camera.position.addVectors(this.target,this._eye.setLength(this.minDistance)))},s.prototype.update=function(){this._eye.subVectors(this.camera.position,this.target),this.noRotate||this.rotateCamera(),this.noZoom||this.zoomCamera(),this.noPan||this.panCamera(),this.camera.position.addVectors(this.target,this._eye),this.checkDistances(),this.camera.lookAt(this.target),this.lastPosition.distanceToSquared(this.camera.position)>this.EPS&&(this.events.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.camera.position))},s.prototype.reset=function(){this._state=-1,this._prevState=-1,this.target.copy(this.target0),this.camera.position.copy(this.position0),this.camera.up.copy(this.up0),this._eye.subVectors(this.camera.position,this.target),this.camera.lookAt(this.target),this.events.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.camera.position)},s.prototype.getState=function(){return{state:this._state,prevState:this._prevState,target:this.target.clone(),objPos:this.camera.position.clone(),objUp:this.camera.up.clone(),eye:this._eye.clone(),lastPosition:this.lastPosition.clone()}},s.prototype.setState=function(d){this._state=d.state,this._prevState=d.prevState,this.target.copy(d.target),this.camera.position.copy(d.objPos),this.camera.up.copy(d.objUp),this._eye.copy(d.eye),this.camera.lookAt(this.target),this.events.dispatchEvent(this.changeEvent),this.lastPosition.copy(d.lastPosition)},s.prototype.keydown=function(d){this.enabled!==!1&&(window.removeEventListener("keydown",this.eventHandlers.keydown,!1),window.addEventListener("keyup",this.eventHandlers.keyup,!1),this._prevState=this._state,this._state===-1&&(d.keyCode===this.keys[0]&&!this.noRotate?this._state=0:d.keyCode===this.keys[2]&&!this.noZoom?this._state=2:d.keyCode===this.keys[1]&&!this.noPan&&(this._state=1),this._keyDownState=this._state))},s.prototype.keyup=function(d){this.enabled!==!1&&(this._state=this._prevState,this._keyDownState=-1,window.removeEventListener("keyup",this.eventHandlers.keyup,!1),window.addEventListener("keydown",this.eventHandlers.keydown,!1))},s.prototype.mousedown=function(d){this.enabled!==!1&&(d.preventDefault(),this.scene.mouseInfo.updatePosition(d.clientX,d.clientY),this._keyDownState!==-1&&(this._state=this._keyDownState),this._state===-1&&(this._state=d.button),this._state===0&&!this.noRotate?(this._rotateStart.copy(this.getMouseProjectionOnBall()),this._rotateEnd.copy(this._rotateStart)):this._state===2&&!this.noZoom?(this._zoomStart.copy(this.getMouseOnScreen()),this._zoomEnd.copy(this._zoomStart)):this._state===1&&!this.noPan&&(this._panStart.copy(this.getMouseOnScreen()),this._panEnd.copy(this._panStart)),window.addEventListener("mousemove",this.eventHandlers.mousemove,!1),window.addEventListener("mouseup",this.eventHandlers.mouseup,!1),this.events.dispatchEvent(this.startEvent))},s.prototype.mousemove=function(d){this.enabled!==!1&&(d.preventDefault(),this.scene.mouseInfo.updatePosition(d.clientX,d.clientY),this._state===0&&!this.noRotate?this._rotateEnd.copy(this.getMouseProjectionOnBall()):this._state===2&&!this.noZoom?this._zoomEnd.copy(this.getMouseOnScreen()):this._state===1&&!this.noPan&&this._panEnd.copy(this.getMouseOnScreen()),this.update())},s.prototype.mouseup=function(d){this.enabled!==!1&&(d.preventDefault(),this._state=-1,window.removeEventListener("mousemove",this.eventHandlers.mousemove,!1),window.removeEventListener("mouseup",this.eventHandlers.mouseup,!1),this.events.dispatchEvent(this.endEvent))},s.prototype.touchstart=function(d){if(this.enabled!==!1){switch(d.touches.length){case 1:this._state=3,this.scene.mouseInfo.updatePosition(d.touches[0].clientX,d.touches[0].clientY),this._rotateStart.copy(this.getMouseProjectionOnBall()),this._rotateEnd.copy(this._rotateStart);break;case 2:this._state=4;var p=d.touches[0].clientX-d.touches[1].clientX,x=d.touches[0].clientY-d.touches[1].clientY;this._touchZoomDistanceEnd=this._touchZoomDistanceStart=Math.sqrt(p*p+x*x);var l=(d.touches[0].clientX+d.touches[1].clientX)/2,_=(d.touches[0].clientY+d.touches[1].clientY)/2;this.scene.mouseInfo.updatePosition(l,_),this._panStart.copy(this.getMouseOnScreen()),this._panEnd.copy(this._panStart);break;default:this._state=-1}this.events.dispatchEvent(this.startEvent)}},s.prototype.touchmove=function(d){if(this.enabled!==!1)switch(d.preventDefault(),d.stopPropagation(),d.touches.length){case 1:this.scene.mouseInfo.updatePosition(d.touches[0].clientX,d.touches[0].clientY),this._rotateEnd.copy(this.getMouseProjectionOnBall()),this.update();break;case 2:var p=d.touches[0].clientX-d.touches[1].clientX,x=d.touches[0].clientY-d.touches[1].clientY;this._touchZoomDistanceEnd=Math.sqrt(p*p+x*x);var l=(d.touches[0].clientX+d.touches[1].clientX)/2,_=(d.touches[0].clientY+d.touches[1].clientY)/2;this.scene.mouseInfo.updatePosition(l,_),this._panEnd.copy(this.getMouseOnScreen()),this.update();break;default:this._state=-1}},s.prototype.touchend=function(d){if(this.enabled!==!1){var p=d.touches;switch(p.length||(p=d.changedTouches),p.length){case 1:this.scene.mouseInfo.updatePosition(p[0].clientX,p[0].clientY),this._rotateEnd.copy(this.getMouseProjectionOnBall()),this._rotateStart.copy(this._rotateEnd);break;case 2:this._touchZoomDistanceStart=this._touchZoomDistanceEnd=0;var x=(p[0].clientX+p[1].clientX)/2,l=(p[0].clientY+p[1].clientY)/2;this.scene.mouseInfo.updatePosition(x,l),this._panEnd.copy(this.getMouseOnScreen()),this._panStart.copy(this._panEnd);break}this._state=-1,this.events.dispatchEvent(this.endEvent)}},s.prototype.preventContextMenu=function(d){d.preventDefault()},s.prototype.init=function(){this.domElement.addEventListener("contextmenu",this.preventContextMenu,!1),this.domElement.addEventListener("mousedown",this.eventHandlers.mousedown,!1),this.domElement.addEventListener("touchstart",this.eventHandlers.touchstart,!1),this.domElement.addEventListener("touchend",this.eventHandlers.touchend,!1),this.domElement.addEventListener("touchmove",this.eventHandlers.touchmove,!1),window.addEventListener("keydown",this.eventHandlers.keydown,!1),this.update()},s.prototype.destroy=function(){this.domElement.removeEventListener("contextmenu",this.preventContextMenu,!1),this.domElement.removeEventListener("mousedown",this.eventHandlers.mousedown,!1),window.removeEventListener("keydown",this.eventHandlers.keydown,!1),this.domElement.removeEventListener("touchstart",this.eventHandlers.touchstart,!1),this.domElement.removeEventListener("touchend",this.eventHandlers.touchend,!1),this.domElement.removeEventListener("touchmove",this.eventHandlers.touchmove,!1),this.camera=void 0,this.domElement=void 0},s}();e.CameraControls=o})(r=i.Visualization||(i.Visualization={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d=function(){function h(){this.current=null,this.currentPickId=-1,this.currentPickElementId=-1,this.selectPos={x:0,y:0}}return h.prototype.getPickInfo=function(){return this.current?this.current.elements&&!this.current.elements.length?null:{model:this.current.model,elements:this.current.elements}:this.current},h.prototype.reset=function(){var f=this.current!==null;return this.currentPickId=-1,this.currentPickElementId=-1,this.current=null,f},h.prototype.selectStart=function(f,m){this.selectPos.x=f,this.selectPos.y=m},h.prototype.selectEnd=function(f,m){var b=f-this.selectPos.x,w=m-this.selectPos.y;return b*b+w*w<4.5},h}();s.Pick=d;var p;(function(h){function f(E,S){var M=E>>16&255,A=E>>8&255,R=E&255;S.r=R/255,S.g=A/255,S.b=M/255}h.assignPickColor=f;function m(E,S,M){M[S+3]=E/255}h.applySceneIdFast=m;function b(E,S,M,A){var R=(S&(1<<E)-1)<<8-E,D=S>>E;A[M+3]=D/255;var N=A[M+2]*255|0;A[M+2]=(N|R)/255}h.applySceneIdSlow=b;function w(E,S){var M=(1<<16-E)-1;return S[0]|S[1]<<8|(S[2]&M)<<16}h.getElementId=w;function C(E,S){var M=E-8,A=S[2]&(1<<M)-1<<8-M>>8-M,R=S[3]<<M;return A|R}h.getSceneId=C})(p=s.Picking||(s.Picking={}));var x=i.Core.Utils.ChunkedArray,l=function(){function h(f){this.elementMap=i.Core.Utils.FastMap.create(),this.elementIndex=0,this.elementRangeIndex=0,this.rangeIndex=0,this.added=0,this.elementIndices=x.create(function(m){return new Int32Array(m)},f,1),this.elementRanges=new Int32Array(2*f),this.vertexRanges=x.create(function(m){return new Int32Array(m)},f,2)}return h.prototype.startElement=function(f){this.elementIndex=f,this.elementRangeIndex=this.elementMap.size,this.rangeIndex=this.vertexRanges.elementCount,this.added=0},h.prototype.addVertexRange=function(f,m){this.added++,x.add2(this.vertexRanges,f,m)},h.prototype.endElement=function(){x.add(this.elementIndices,this.elementIndex),this.elementMap.set(this.elementIndex,this.elementRangeIndex),this.elementRanges[2*this.elementRangeIndex]=2*this.rangeIndex,this.elementRanges[2*this.elementRangeIndex+1]=2*(this.rangeIndex+this.added)},h.prototype.getMap=function(){return new _(x.compact(this.elementIndices),this.elementMap,this.elementRanges,x.compact(this.vertexRanges))},h}();s.VertexMapBuilder=l;var _=function(){function h(f,m,b,w){this.elementIndices=f,this.elementMap=m,this.elementRanges=b,this.vertexRanges=w}return h}();s.VertexMap=_;function v(h,f,m,b){var w=!1;if(b===3)for(var C=f;C<m;C++){var E=h[C],S=E|0;E-S<.33&&(h[C]=S+.55,w=!0)}else if(b===4)for(var C=f;C<m;C++){var E=h[C],S=E|0;E-S>.33&&(h[C]=S,w=!0)}else if(b===1)for(var C=f;C<m;C++)h[C]=h[C]+1,w=!0;else if(b===2){for(var C=f;C<m;C++)if(h[C]>.75){var E=h[C]-1;E<0&&(E=0),h[C]=E,w=!0}}else for(var C=f;C<m;C++){var E=h[C];h[C]=0,w=w||E!==0}return w}s.applyActionToRange=v;function c(h,f){var m=h.array,b=v(m,0,m.length,f);return b&&(h.needsUpdate=!0),b}s.applyActionToBuffer=c})(o=e.Selection||(e.Selection={}))})(r=i.Visualization||(i.Visualization={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";function d(c){var h=new e.THREE.BufferGeometry;return h.addAttribute("position",new e.THREE.BufferAttribute(c.vertices,3)),c.normals&&h.addAttribute("normal",new e.THREE.BufferAttribute(c.normals,3)),h.addAttribute("index",new e.THREE.BufferAttribute(c.indices,1)),h}s.toBufferGeometry=d;function p(c,h,f,m){c.addAttribute(h,new e.THREE.BufferAttribute(f,m))}s.addAttribute=p;var x=i.Core.Utils,l=x.ChunkedArray,_=x.ArrayBuilder,v;(function(c){function h(Ie,ke,nt){return nt===void 0&&(nt=3),{type:"Static",vertices:_.create(function(dt){return new Float32Array(dt)},Ie,3),indices:_.create(function(dt){return new Uint32Array(dt)},ke,nt),normals:nt===3?_.create(function(dt){return new Float32Array(dt)},Ie,3):void 0,elementSize:nt}}c.createStatic=h;function f(Ie,ke,nt){return nt===void 0&&(nt=3),{type:"Dynamic",vertices:l.create(function(dt){return new Float32Array(dt)},Ie,3),indices:l.create(function(dt){return new Uint32Array(dt)},ke,nt),normals:nt===3?l.create(function(dt){return new Float32Array(dt)},Ie,3):void 0,elementSize:nt}}c.createDynamic=f;var m=l.add2,b=l.add3,w=_.add2,C=_.add3,E=i.Core.Geometry,S=E.LinearAlgebra.Vector3,M=E.LinearAlgebra.Matrix4;function A(Ie,ke,nt,dt){for(var yt=0,gt=ke.length;yt<gt;yt+=3)dt(nt,ke[yt]+Ie,ke[yt+1]+Ie,ke[yt+2]+Ie)}var R=S.zero();function D(Ie,ke,nt,dt){for(var yt=R,gt=0,xt=ke.length;gt<xt;gt+=3)yt[0]=ke[gt],yt[1]=ke[gt+1],yt[2]=ke[gt+2],S.transformMat4(yt,yt,Ie),dt(nt,yt[0],yt[1],yt[2])}function N(Ie,ke,nt,dt){for(var yt=0,gt=ke.length;yt<gt;yt+=2)dt(nt,ke[yt]+Ie,ke[yt+1]+Ie)}function I(Ie){throw new Error(Ie)}var L=M.zero(),Y=M.zero(),J=M.zero(),ie=M.zero(),K=M.zero(),Q=S.fromValues(1,1,1),ne=S.zero();function ue(Ie,ke,nt,dt,yt){M.fromScaling(L,nt||Q),M.fromTranslation(Y,dt||ne),yt?M.copy(J,yt):M.fromIdentity(J),M.mul3(ie,Y,J,L);var gt=Ie.vertices.elementCount,xt=Ie.type==="Static"?C:b;D(ie,ke.vertices,Ie.vertices,xt),Ie.normals&&(ke.normals||I("geom is missing normals."),M.mul(K,J,L),D(K,ke.normals,Ie.normals,xt)),Ie.elementSize===2?N(gt,ke.indices,Ie.indices,Ie.type==="Static"?w:m):A(gt,ke.indices,Ie.indices,Ie.type==="Static"?C:b)}c.addRawTransformed=ue;function fe(Ie,ke,nt,dt){C(Ie.vertices,ke,nt,dt)}c.addVertex3s=fe;function ge(Ie,ke,nt,dt){C(Ie.normals,ke,nt,dt)}c.addNormal3s=ge;function ye(Ie,ke,nt,dt){C(Ie.indices,ke,nt,dt)}c.addIndex3s=ye;function pe(Ie,ke,nt,dt){b(Ie.vertices,ke,nt,dt)}c.addVertex3d=pe;function de(Ie,ke,nt,dt){b(Ie.normals,ke,nt,dt)}c.addNormal3d=de;function he(Ie,ke,nt,dt){b(Ie.indices,ke,nt,dt)}c.addIndex3d=he;var _e=void 0;function ve(){if(_e)return _e;_e=e.GeometryHelper.toRawGeometry(new e.THREE.BoxGeometry(1,1,1));for(var Ie=0;Ie<_e.vertices.length;Ie+=3)_e.vertices[Ie]+=.5;return _e}c.getDashTemplate=ve;var Z=S.zero(),be=S.zero(),Ee=S.zero(),De=S.fromValues(1,0,0),Fe=M.zero();function Ue(Ie,ke,nt,dt,yt,gt){var xt=S.sub(Ee,nt,ke),tt=S.magnitude(xt),pt=S.set(Z,dt,gt,gt),At=S.makeRotation(Fe,De,xt),Tt=ve(),Ct=be;S.copy(Ct,ke),S.normalize(xt,xt);var Bt=dt+yt;S.scale(xt,xt,Bt);for(var nr=0;nr<tt;nr+=Bt)nr+dt>tt&&(pt[0]=tt-nr),ue(Ie,Tt,pt,Ct,At),S.add(Ct,Ct,xt)}c.addDashedLine=Ue;function Qe(Ie){return Ie.array}function Ke(Ie){return l.compact(Ie)}function Te(Ie){var ke=Ie.type==="Static"?Qe:Ke;return s.toBufferGeometry({vertices:ke(Ie.vertices),vertexCount:Ie.vertices.elementCount,normals:Ie.normals&&ke(Ie.normals),indices:ke(Ie.indices),indexCount:Ie.indices.elementCount,elementSize:Ie.elementSize})}c.toBufferGeometry=Te})(v=s.Builder||(s.Builder={}))})(o=e.Geometry||(e.Geometry={}))})(r=i.Visualization||(i.Visualization={}))})(U||(U={}));var B=this&&this.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var o in e)e.hasOwnProperty(o)&&(r[o]=e[o])};return function(r,e){i(r,e);function o(){this.constructor=r}r.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),U;(function(i){var r;(function(e){var o;(function(s){"use strict";var d=i.Core.Utils.ChunkedArray;function p(N){for(var I=new Int32Array(N.data.annotation.length),L=N.data.annotation,Y=0,J=I.length;Y<J;Y++)I[Y]=Y;return Array.prototype.sort.call(I,function(ie,K){var Q=L[ie]-L[K];return Q||ie-K}),I}function x(N,I,L,Y){for(var J=N,ie=N+1;J<I;){for(;ie<I&&L[ie]-L[ie-1]<1.1;)ie++;Y.addVertexRange(L[J],L[ie-1]+1),J=ie,ie=ie+1}}function l(N){for(var I=p(N),L=N.data.annotation,Y=1,J=0,ie=I.length-1;J<ie;J++)L[I[J]]!==L[I[J+1]]&&Y++;for(var K=new e.Selection.VertexMapBuilder(Y),Q=new Int32Array(I.length),J=0,ie=I.length;J<ie;J++)Q[J]=L[I[J]];var ne=L[I[0]];K.startElement(ne);for(var J=0,ie=I.length;J<ie;J++){var ue=L[I[J]];ue!==ne&&(K.endElement(),K.startElement(ue),ne=ue);var fe=J;for(J++;ue===L[I[J]];)J++;var ge=J;J--,x(fe,ge,I,K)}return K.endElement(),K.getMap()}function _(N){var I=new e.Selection.VertexMapBuilder(1);return I.startElement(0),I.addVertexRange(0,N.vertexCount),I.endElement(),I.getMap()}function v(N){return H(this,void 0,void 0,function(){return q(this,function(I){switch(I.label){case 0:return[4,N.computation.updateProgress("Computing selection map...")];case 1:return I.sent(),N.data.annotation?N.geom.elementToVertexMap=l(N):N.geom.elementToVertexMap=_(N),[2]}})})}var c=1e5;function h(N,I){return H(this,void 0,void 0,function(){var L,Y,J,ie,K,Q,ne,ue,fe,ge,ye,pe,de,he,_e,ve,Z,be;return q(this,function(Ee){for(L=I.data.triangleIndices,Y=I.data.annotation,J=I.pickPlatesVertices,ie=I.pickPlatesTris,K=I.pickPlatesColors,Q=I.data.vertices,ne={r:.45,g:.45,b:.45},ue=I.pickTris,fe=0,ge=N,ye=Math.min(N+c,I.triCount);ge<ye;ge++){if(pe=L[3*ge],de=L[3*ge+1],he=L[3*ge+2],_e=Y[pe],ve=Y[de],Z=Y[he],_e===ve&&ve===Z){d.add3(ue,pe,de,he);continue}be=-1,_e===ve||_e===Z?be=_e:ve===Z&&(be=ve),d.add3(J,Q[3*pe],Q[3*pe+1],Q[3*pe+2]),d.add3(J,Q[3*de],Q[3*de+1],Q[3*de+2]),d.add3(J,Q[3*he],Q[3*he+1],Q[3*he+2]),d.add3(ie,fe++,fe++,fe++),be<0?(ne.r=0,ne.g=0,ne.b=0):e.Selection.Picking.assignPickColor(be,ne),d.add4(K,ne.r,ne.g,ne.b,0),d.add4(K,ne.r,ne.g,ne.b,0),d.add4(K,ne.r,ne.g,ne.b,0)}return I.platesVertexCount=I.platesVertexCount+fe,[2]})})}function f(N){return H(this,void 0,void 0,function(){var I,L,Y;return q(this,function(J){switch(J.label){case 0:I=i.Core.Utils.PerformanceMonitor.currentTime(),L=0,J.label=1;case 1:return L<N.triCount?(Y=i.Core.Utils.PerformanceMonitor.currentTime(),Y-I>i.Core.Computation.UpdateProgressDelta?(I=Y,[4,N.computation.updateProgress("Creating selection geometry...",!0,L,N.triCount)]):[3,3]):[3,5];case 2:J.sent(),J.label=3;case 3:h(L,N),J.label=4;case 4:return L+=c,[3,1];case 5:return[2]}})})}function m(N){var I={r:.45,g:.45,b:.45},L=N.data.annotation;N.pickTris=d.forIndexBuffer(N.triCount);for(var Y=N.pickColorBuffer,J=0,ie=N.vertexCount;J<ie;J++){var K=L[J];K>=0&&(e.Selection.Picking.assignPickColor(K+1,I),Y[J*4]=I.r,Y[J*4+1]=I.g,Y[J*4+2]=I.b)}}function b(N,I){var L=new e.THREE.BufferGeometry;L.addAttribute("position",N.position),L.addAttribute("index",N.index),L.addAttribute("pColor",new e.THREE.BufferAttribute(I.pickColorBuffer,4)),I.geom.pickGeometry=L,L=new e.THREE.BufferGeometry,L.addAttribute("position",new e.THREE.BufferAttribute(new Float32Array(0),3)),L.addAttribute("index",new e.THREE.BufferAttribute(new Uint32Array(0),1)),L.addAttribute("pColor",new e.THREE.BufferAttribute(new Float32Array(0),4)),I.geom.pickPlatesGeometry=L}function w(N,I){var L=new e.THREE.BufferGeometry;L.addAttribute("position",N.position),L.addAttribute("index",N.index),L.addAttribute("pColor",new e.THREE.BufferAttribute(I.pickColorBuffer,4)),I.geom.pickGeometry=L,L=new e.THREE.BufferGeometry,L.addAttribute("position",new e.THREE.BufferAttribute(d.compact(I.pickPlatesVertices),3)),L.addAttribute("index",new e.THREE.BufferAttribute(d.compact(I.pickPlatesTris),1)),L.addAttribute("pColor",new e.THREE.BufferAttribute(d.compact(I.pickPlatesColors),4)),I.geom.pickPlatesGeometry=L}function C(N,I,L,Y){if(L>Y){var J=L;L=Y,Y=J}I.add((L+Y)*(L+Y+1)/2+Y)&&d.add2(N,L,Y)}function E(N){for(var I=N.data.triangleIndices,L=d.create(function(ue){return new Uint32Array(ue)},1.5*N.triCount|0,2),Y=i.Core.Utils.FastSet.create(),J=0,ie=I.length;J<ie;J+=3){var K=I[J],Q=I[J+1],ne=I[J+2];C(L,Y,K,Q),C(L,Y,K,ne),C(L,Y,Q,ne)}return new e.THREE.BufferAttribute(d.compact(L),1)}function S(N){return{position:new e.THREE.BufferAttribute(N.data.vertices,3),index:new e.THREE.BufferAttribute(N.data.triangleIndices,1)}}function M(N,I,L){var Y=new e.THREE.BufferGeometry;Y.addAttribute("position",N.position),Y.addAttribute("normal",new e.THREE.BufferAttribute(L.data.normals,3)),Y.addAttribute("color",new e.THREE.BufferAttribute(new Float32Array(L.data.vertices.length),3)),I?Y.addAttribute("index",E(L)):Y.addAttribute("index",N.index),L.geom.geometry=Y,L.geom.vertexStateBuffer=new e.THREE.BufferAttribute(new Float32Array(L.data.vertices.length),1),Y.addAttribute("vState",L.geom.vertexStateBuffer)}function A(N,I){return H(this,void 0,void 0,function(){return q(this,function(L){switch(L.label){case 0:return[4,I.computation.updateProgress("Creating selection geometry...")];case 1:return L.sent(),I.pickColorBuffer=new Float32Array(I.vertexCount*4),I.data.annotation?[3,2]:(b(N,I),[2]);case 2:return m(I),I.pickPlatesVertices=d.forVertex3D(Math.max(I.vertexCount/10,10)),I.pickPlatesTris=d.forIndexBuffer(Math.max(I.triCount/10,10)),I.pickPlatesColors=d.create(function(Y){return new Float32Array(Y)},Math.max(I.vertexCount/10,10),4),I.platesVertexCount=0,[4,f(I)];case 3:L.sent(),w(N,I),L.label=4;case 4:return[2]}})})}function R(N,I,L){return H(this,void 0,void 0,function(){var Y,J;return q(this,function(ie){switch(ie.label){case 0:return Y={data:N,computation:I,geom:new D,vertexCount:N.vertices.length/3|0,triCount:N.triangleIndices.length/3|0},[4,I.updateProgress("Creating geometry...")];case 1:return ie.sent(),[4,i.Core.Geometry.Surface.computeNormals(N).run(I)];case 2:return ie.sent(),[4,i.Core.Geometry.Surface.computeBoundingSphere(N).run(I)];case 3:return ie.sent(),J=S(Y),[4,v(Y)];case 4:return ie.sent(),[4,A(J,Y)];case 5:return ie.sent(),M(J,L,Y),Y.geom.vertexToElementMap=Y.data.annotation,[2,Y.geom]}})})}s.buildGeometry=R;var D=function(N){B(I,N);function I(){var L=N.call(this)||this;return L.geometry=void 0,L.vertexToElementMap=void 0,L.elementToVertexMap=void 0,L.pickGeometry=void 0,L.pickPlatesGeometry=void 0,L.vertexStateBuffer=void 0,L}return I.prototype.dispose=function(){this.geometry.dispose(),this.pickGeometry&&(this.pickGeometry.dispose(),this.pickPlatesGeometry.dispose())},I}(e.GeometryBase);s.Geometry=D})(o=e.Surface||(e.Surface={}))})(r=i.Visualization||(i.Visualization={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";s.DefaultSurfaceModelParameters={isWireframe:!1,mapPickElements:void 0};var d=function(p){B(x,p);function x(){var l=p!==null&&p.apply(this,arguments)||this;return l._mapPickElements=void 0,l}return x.prototype.applySelectionInternal=function(l,_){for(var v=this.geometry.vertexStateBuffer,c=v.array,h=this.geometry.elementToVertexMap,f=h.vertexRanges,m=!1,b=0,w=l;b<w.length;b++){var C=w[b];if(h.elementMap.has(C)){var E=h.elementMap.get(C),S=h.elementRanges[2*E],M=h.elementRanges[2*E+1];if(S!==M)for(var A=S;A<M;A+=2){var R=f[A],D=f[A+1];m=e.Selection.applyActionToRange(c,R,D,_)||m}}}return m?(v.needsUpdate=!0,!0):!1},x.prototype.highlightElement=function(l,_){return this.surface.annotation?this.applySelection([l-1],_?3:4):this.highlightInternal(_)},x.prototype.highlightInternal=function(l){return e.Selection.applyActionToBuffer(this.geometry.vertexStateBuffer,l?3:4)},x.prototype.getPickElements=function(l){return l?this._mapPickElements?this._mapPickElements(l-1)||[]:[l-1]:[0]},x.prototype.getBoundingSphereOfSelection=function(l){if(!this.geometry.vertexToElementMap)return{radius:this.radius,center:i.Core.Geometry.LinearAlgebra.Vector3.fromObj(this.centroid)};for(var _=this.geometry.geometry.attributes.position.array,v=new e.THREE.Vector3,c=0,h=this.geometry.elementToVertexMap,f=h.vertexRanges,m=0,b=l;m<b.length;m++){var w=b[m];if(h.elementMap.has(w)){var C=h.elementMap.get(w),E=h.elementRanges[2*C],S=h.elementRanges[2*C+1];if(E!==S)for(var M=E;M<S;M+=2)for(var A=f[M],R=f[M+1],D=A;D<R;D++)v.x+=_[3*D],v.y+=_[3*D+1],v.z+=_[3*D+2],c++}}if(c){v.x=v.x/c,v.y=v.y/c,v.z=v.z/c;for(var N=new e.THREE.Vector3,I=0,L=0,Y=l;L<Y.length;L++){var w=Y[L];if(h.elementMap.has(w)){var C=h.elementMap.get(w),E=h.elementRanges[2*C],S=h.elementRanges[2*C+1];if(E!==S)for(var M=E;M<S;M+=2)for(var A=f[M],R=f[M+1],D=A;D<R;D++)N.x=_[3*D],N.y=_[3*D+1],N.z=_[3*D+2],I=Math.max(I,N.distanceToSquared(v))}}return I=Math.sqrt(I),{radius:I,center:i.Core.Geometry.LinearAlgebra.Vector3.fromObj(v)}}},x.prototype.applyThemeInternal=function(l){var _={r:0,g:0,b:0};e.MaterialsHelper.updateMaterial(this.material,l,this.object);var v=this.geometry.geometry.attributes.color.array,c=this.geometry.vertexToElementMap;if(c)for(var h=0,f=v.length/3|0;h<f;h++){var m=c[h];m<0?(_.r=0,_.g=0,_.b=0):l.setElementColor(m,_),v[3*h]=_.r,v[3*h+1]=_.g,v[3*h+2]=_.b}else{l.setElementColor(0,_);for(var h=0,f=v.length/3|0;h<f;h++)v[3*h]=_.r,v[3*h+1]=_.g,v[3*h+2]=_.b}this.pickObject&&(this.pickObject.visible=this.getPickObjectVisibility(this.object.visible)),this.geometry.geometry.getAttribute("color").needsUpdate=!0},x.prototype.getPickObjectVisibility=function(l){return e.Theme.isTransparent(this.theme)||!this.theme.interactive?!1:l},x.prototype.createObjects=function(){var l=new e.THREE.Mesh(this.geometry.geometry,this.material),_=void 0;if(this.geometry.pickGeometry){_=new e.THREE.Object3D;var v=new e.THREE.Mesh(this.geometry.pickGeometry,this.pickMaterial);_.add(v),v=new e.THREE.Mesh(this.geometry.pickPlatesGeometry,this.pickMaterial),_.add(v)}return{main:l,pick:_}},x.create=function(l,_){var v=this,c=_.surface,h=_.theme,f=_.parameters,m=f===void 0?s.DefaultSurfaceModelParameters:f,b=_.props;return i.Core.computation(function(w){return H(v,void 0,void 0,function(){var C,E,S,M;return q(this,function(A){switch(A.label){case 0:return[4,s.buildGeometry(c,w,!!m.isWireframe)];case 1:return C=A.sent(),E=new x,E._mapPickElements=m.mapPickElements,E.surface=c,E.material=e.MaterialsHelper.getMeshMaterial(e.THREE.FlatShading,!!m.isWireframe),E.geometry=C,E.pickMaterial=e.MaterialsHelper.getPickMaterial(),E.entity=l,S=c.boundingSphere.center,E.centroid=new e.THREE.Vector3(S[0],S[1],S[2]),E.radius=c.boundingSphere.radius,b&&(E.props=b),E.disposeList.push(E.geometry,E.material,E.pickMaterial),M=E.createObjects(),E.object=M.main,E.pickObject=M.pick,E.applyTheme(h),E.pickBufferAttributes=[E.geometry.pickGeometry.attributes.pColor,E.geometry.pickPlatesGeometry.attributes.pColor],[2,E]}})})})},x}(e.Model);s.Model=d})(o=e.Surface||(e.Surface={}))})(r=i.Visualization||(i.Visualization={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";var d=function(p){B(x,p);function x(){var l=p.call(this)||this;return l.geometry=void 0,l.center=new e.THREE.Vector3(0,0,0),l.radius=0,l}return x.prototype.dispose=function(){this.geometry.dispose()},x.create=function(l,_){for(var v=new x,c=new e.THREE.Vector3(0,0,0),h=0,f=l.length;h<f;h+=3)c.x+=l[h],c.y+=l[h+1],c.z+=l[h+2];c.multiplyScalar(1/(l.length/3));for(var m=0,h=0,f=l.length;h<f;h+=3){var b=c.x-l[h],w=c.y-l[h+1],C=c.z-l[h+2],E=b*b+w*w+C*C;E>m&&(m=E)}m=Math.sqrt(m);var S=new e.THREE.BufferGeometry;return S.addAttribute("position",new e.THREE.BufferAttribute(l,3)),S.addAttribute("index",new e.THREE.BufferAttribute(_,1)),v.geometry=S,v.center=c,v.radius=m,v},x}(e.GeometryBase);s.Geometry=d})(o=e.Lines||(e.Lines={}))})(r=i.Visualization||(i.Visualization={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";var d=function(p){B(x,p);function x(){return p!==null&&p.apply(this,arguments)||this}return x.prototype.applySelectionInternal=function(l,_){return!1},x.prototype.highlightElement=function(l,_){return this.applySelection([l],_?3:4)},x.prototype.highlightInternal=function(l){return!1},x.prototype.getPickElements=function(l){return[l]},x.prototype.applyThemeInternal=function(l){var _=l.colors.get("Uniform");this.material.color=new e.THREE.Color(_.r,_.g,_.b),this.material.needsUpdate=!0},x.prototype.getPickObjectVisibility=function(l){return!1},x.prototype.createObjects=function(){return{main:new e.THREE.Mesh(this.geometry.geometry,this.material),pick:void 0}},x.create=function(l,_){var v=this,c=_.geometry,h=_.theme,f=_.props;return i.Core.computation(function(m){return H(v,void 0,void 0,function(){var b,w;return q(this,function(C){return b=new x,b.material=new e.THREE.MeshBasicMaterial({wireframe:!0}),b.geometry=c,b.entity=l,b.centroid=c.center,b.radius=c.radius,f&&(b.props=f),b.disposeList.push(b.geometry,b.material),w=b.createObjects(),b.object=w.main,b.pickObject=void 0,b.applyTheme(h),b.pickBufferAttributes=[],[2,b]})})})},x}(e.Model);s.Model=d})(o=e.Lines||(e.Lines={}))})(r=i.Visualization||(i.Visualization={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";s.DefaultTextAtlasParams={font:["sans-serif"],size:36,style:"normal",variant:"normal",weight:"normal",outline:0,width:2048,height:2048};var d=i.Core.Utils.FastMap.create();function p(l){var _=JSON.stringify(l);if(d.has(_))return d.get(_);var v=new x(l);return d.set(_,v),v}s.getTextAtlas=p;var x=function(){function l(_){if(this.gamma=1,this.mapped=i.Core.Utils.FastMap.create(),this.state={scratchW:0,scratchH:0,currentX:0,currentY:0},this.lineHeight=0,this.params=i.Core.Utils.extend({},_,s.DefaultTextAtlasParams),typeof navigator<"u"){var v=navigator.userAgent;v.match(/Chrome/)&&v.match(/OS X/)&&(this.gamma=.5)}this.build(),this.populate(),this.texture=new e.THREE.Texture(this.canvas.canvas2),this.texture.flipY=!1,this.texture.needsUpdate=!0,this.canvas=void 0}return l.prototype.build=function(){var _=this.params,v=_.size+2*_.outline+Math.round(_.size/4),c=_.width/4,h=document.createElement("canvas");h.width=c,h.height=v;var f=h.getContext("2d");f.font=_.style+" "+_.variant+" "+_.weight+" "+_.size+"px "+_.font,f.fillStyle="#FF0000",f.textAlign="left",f.textBaseline="bottom",f.lineJoin="round";for(var m=[],b=_.outline*3,w=0;w<b;++w){var C=Math.max(0,-w*8+128-+!w*8),E=("00"+C.toString(16)).slice(-2);m.push("#"+E+E+E)}var S=new Uint8Array(c*v*2),M=new Uint8Array(_.width*_.height*4),A=document.createElement("canvas");A.width=_.width,A.height=_.height;var R=A.getContext("2d");this.canvas={canvas:h,ctx:f,canvas2:A,ctx2:R,maxWidth:c,colors:m,scratch:S,data:M},this.lineHeight=v},l.prototype.map=function(_){if(this.mapped.has(_))return this.mapped.get(_);this.draw(_);var v=this.state;v.currentX+v.scratchW>this.params.width&&(v.currentX=0,v.currentY+=v.scratchH),v.currentY+v.scratchH>this.params.height&&console.warn("TextAtlas canvas to small");var c={x:v.currentX,y:v.currentY,w:v.scratchW,h:v.scratchH};return this.mapped.set(_,c),this.canvas.ctx2.drawImage(this.canvas.canvas,0,0,v.scratchW,v.scratchH,v.currentX,v.currentY,v.scratchW,v.scratchH),v.currentX+=v.scratchW,c},l.prototype.getTextMetrics=function(_){return this.mapped.has(_)?this.mapped.get(_):this.placeholder},l.prototype.draw=function(_){var v=this,c=v.params,h=v.canvas,f=this.lineHeight,m=c.outline,b=h.ctx,w=h.scratch,C=h.maxWidth,E=h.colors,S=m,M=f-c.outline,A=b.measureText(_),R=Math.min(C,Math.ceil(A.width+2*S+1));b.clearRect(0,0,R,f);var D,N,I,L,Y;if(c.outline===0)for(b.fillText(_,S,M),L=b.getImageData(0,0,R,f),Y=L.data,I=3,D=0,N=Y.length/4;D<N;++D)w[D]=Y[I],I+=4;else{for(b.globalCompositeOperation="source-over",D=m+1;D>0;--D)I=D>1?D*2-2:D,b.strokeStyle=E[I-1],b.lineWidth=I,b.strokeText(_,S,M);b.globalCompositeOperation="multiply",b.fillStyle="#FF00FF",b.fillText(_,S,M),L=b.getImageData(0,0,R,f),Y=L.data,I=0;var J=this.gamma;for(D=0,N=Y.length/4;D<N;++D){var ie=Y[I],K=ie?Y[I+1]/ie:1;J===.5&&(K=Math.sqrt(K)),K=Math.min(1,Math.max(0,K));var Q=256-ie,ne=Q+(ie-Q)*K;w[D]=Math.max(0,Math.min(255,ne+2)),Y[I+3]=w[D],I+=4}}b.putImageData(L,0,0),this.state.scratchW=R,this.state.scratchH=f},l.prototype.populate=function(){this.placeholder=this.map("\uFFFD");for(var _=0;_<127;++_)this.map(String.fromCharCode(_));for(var _=128;_<255;++_)this.map(String.fromCharCode(_));for(var _=880;_<1023;++_)this.map(String.fromCharCode(_));for(var _=1024;_<1279;++_)this.map(String.fromCharCode(_));this.map("\u212B")},l}();s.TextAtlas=x})(o=e.Labels||(e.Labels={}))})(r=i.Visualization||(i.Visualization={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){"use strict";function x(h){var f=l(h);_(f),v(f);var m=c(f),b=new e.THREE.BufferGeometry;return b.addAttribute("position",new e.THREE.BufferAttribute(f.vertices,3)),b.addAttribute("index",new e.THREE.BufferAttribute(m,1)),b.addAttribute("color",new e.THREE.BufferAttribute(new Float32Array(f.quadCount*4*3),3)),b.addAttribute("mapping",new e.THREE.BufferAttribute(f.mapping,2)),b.addAttribute("inputTexCoord",new e.THREE.BufferAttribute(f.texCoords,2)),b.addAttribute("inputSize",new e.THREE.BufferAttribute(f.size,1)),{geometry:b,texture:f.textAtlas.texture,options:f.options}}p.create=x;function l(h){for(var f=i.Core.Utils.extend({},h.options,s.DefaultLabelsOptions),m=0,b=0,w=h.labels;b<w.length;b++){var C=w[b];m+=C.length}var E=s.getTextAtlas({font:[f.fontFamily],style:f.fontStyle,weight:f.fontWeight,size:f.fontSize,outline:f.useSDF?5:0}),S=m+h.labels.length;return{positions:h.positions,inputSizes:h.sizes,labels:h.labels,options:f,textAtlas:E,charCount:m,quadCount:S,vertices:new Float32Array(S*4*3),size:new Float32Array(S*4),texCoords:new Float32Array(S*4*2),mapping:new Float32Array(S*4*2)}}function _(h){for(var f=h.labels,m=h.positions,b=m.x,w=m.y,C=m.z,E=h.vertices,S=h.size,M=h.inputSizes,A=0,R=0;R<f.length;++R)for(var D=f[R],N=D.length+1,I=0;I<N;++I,++A)for(var L=0;L<4;L++){var Y=A*4*3+3*L;E[Y]=b[R],E[Y+1]=w[R],E[Y+2]=C[R],S[A*4+L]=M[R]}}function v(h){for(var f=h.textAtlas,m=h.labels,b=h.options.attachment,w=f.params.outline,C=f.lineHeight,E=f.lineHeight*h.options.backgroundMargin*.1-10,S=h.texCoords,M=h.mapping,A=0,R,D,N,I,L,Y,J,ie,K=0;K<m.length;++K){for(N=m[K],I=0,Y=N.length,L=0;L<Y;++L)R=f.getTextMetrics(N[L]),I+=R.w-2*w;for(b.indexOf("top")===0?ie=f.lineHeight/1.25:b.indexOf("middle")===0?ie=f.lineHeight/2.5:ie=0,b.indexOf("right")>0?J=I:b.indexOf("center")>0?J=I/2:J=0,J+=w,ie+=w,D=A*2*4,M[D+0]=-C/6-J-E,M[D+1]=C-ie+E,M[D+2]=-C/6-J-E,M[D+3]=0-1.2*ie-E,M[D+4]=I+C/6-J+2*w+E,M[D+5]=C-ie+E,M[D+6]=I+C/6-J+2*w+E,M[D+7]=0-1.2*ie-E,S[D+0]=10,S[D+2]=10,S[D+4]=10,S[D+6]=10,A+=1,I=0,L=0;L<Y;++L,++A){R=f.getTextMetrics(N[L]),D=A*2*4,M[D+0]=I-J,M[D+1]=R.h-ie,M[D+2]=I-J,M[D+3]=0-ie,M[D+4]=I+R.w-J,M[D+5]=R.h-ie,M[D+6]=I+R.w-J,M[D+7]=0-ie;var Q=f.params.width,ne=f.params.height;S[D+0]=R.x/Q,S[D+1]=R.y/ne,S[D+2]=R.x/Q,S[D+3]=(R.y+R.h)/ne,S[D+4]=(R.x+R.w)/Q,S[D+5]=R.y/ne,S[D+6]=(R.x+R.w)/Q,S[D+7]=(R.y+R.h)/ne,I+=R.w-2*w}}}function c(h){for(var f=new Uint32Array(h.quadCount*2*3),m=0,b=0;b<h.quadCount;b++)f[m++]=4*b,f[m++]=4*b+1,f[m++]=4*b+2,f[m++]=4*b+1,f[m++]=4*b+3,f[m++]=4*b+2;return f}})(d=s.Geometry||(s.Geometry={}))})(o=e.Labels||(e.Labels={}))})(r=i.Visualization||(i.Visualization={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){p.VERTEX_SHADER=`
uniform float xOffset;
uniform float yOffset;
uniform float zOffset;
uniform float sizeFactor;

varying vec2 texCoord;

attribute vec2 mapping;
attribute vec2 inputTexCoord;
attribute float inputSize;

`+e.THREE.ShaderChunk.color_pars_vertex+`
`+e.THREE.ShaderChunk.common+`

float matrixScale( in mat4 m ){
    vec4 r = m[ 0 ];
    return sqrt( r[ 0 ] * r[ 0 ] + r[ 1 ] * r[ 1 ] + r[ 2 ] * r[ 2 ] );
}

void main(void){

    `+e.THREE.ShaderChunk.color_vertex+`

    texCoord = inputTexCoord;

    float scale = matrixScale( modelViewMatrix );

    float _zOffset = zOffset * scale;
    if( texCoord.x == 10.0 ){
         _zOffset -= 0.001;
    }

    vec3 pos = position;
    vec4 cameraPos = modelViewMatrix * vec4( pos, 1.0 );
    vec4 cameraCornerPos = vec4( cameraPos.xyz, 1.0 );
    cameraCornerPos.xy += mapping * inputSize * sizeFactor * 0.01 * scale;
    cameraCornerPos.x += xOffset * scale;
    cameraCornerPos.y += yOffset * scale;
    cameraCornerPos.xyz += normalize( -cameraCornerPos.xyz ) * _zOffset;

    gl_Position = projectionMatrix * cameraCornerPos;
    //gl_Position.xyz = position.xyz;
}
`,p.FRAGMENT_SHADER=`
#extension GL_OES_standard_derivatives : enable

uniform sampler2D fontTexture;
uniform vec3 outlineColor;
uniform float outlineWidth;
uniform vec3 backgroundColor;
uniform float backgroundOpacity;

varying vec2 texCoord;

`+e.THREE.ShaderChunk.common+`
`+e.THREE.ShaderChunk.color_pars_fragment+`
`+e.THREE.ShaderChunk.fog_pars_fragment+`

const float smoothness = 16.0;
const float gamma = 2.2;

void main(){
    vec4 finalColor;

    if( texCoord.x > 1.0 ){
        if (backgroundOpacity < 0.05) discard;
        finalColor = vec4( backgroundColor, backgroundOpacity );
    }else{
        // retrieve signed distance
        float sdf = texture2D( fontTexture, texCoord ).a + outlineWidth;

        // perform adaptive anti-aliasing of the edges
        float w = clamp(
            smoothness * ( abs( dFdx( texCoord.x ) ) + abs( dFdy( texCoord.y ) ) ),
            0.0,
            0.5
        );
        float a = smoothstep( 0.5 - w, 0.5 + w, sdf );

        // gamma correction for linear attenuation
        a = pow( a, 1.0 / gamma );
        if( a < 0.2 ) discard;
        //a *= opacity;

        vec3 outgoingLight = vColor;
        if( outlineWidth > 0.0 && sdf < ( 0.5 + outlineWidth ) ){
            outgoingLight = outlineColor;
        }

        finalColor = vec4( outgoingLight, a );    
    }

    //gl_FragColor = finalColor;
    vec3 outgoingLight = finalColor.rgb;

    `+e.THREE.ShaderChunk.fog_fragment+`
    
    #ifdef USE_FOG
       float alpha = (1.0 - fogFactor) * finalColor.a;
       if (alpha < 0.05) discard;
       gl_FragColor = vec4( outgoingLight.rgb, alpha );
    #else
      gl_FragColor = finalColor;
    #endif
}
`})(d=s.Material||(s.Material={}))})(o=e.Labels||(e.Labels={}))})(r=i.Visualization||(i.Visualization={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){"use strict";function x(l){var _=e.THREE.UniformsUtils.merge([e.THREE.UniformsLib.common,e.THREE.UniformsLib.fog,{fontTexture:{type:"t",value:l},xOffset:{type:"f",value:0},yOffset:{type:"f",value:0},zOffset:{type:"f",value:0},sizeFactor:{type:"f",value:1},outlineWidth:{type:"f",value:0},outlineColor:{type:"v3",value:new e.THREE.Vector3(0,0,0)},backgroundColor:{type:"v3",value:new e.THREE.Vector3(0,0,0)},backgroundOpacity:{type:"f",value:.5}}]);_.fontTexture.value=l;var v=new e.THREE.ShaderMaterial({uniforms:_,attributes:{mapping:{type:"v2",value:null},inputTexCoord:{type:"v2",value:null},inputSize:{type:"f",value:null}},lights:!1,fog:!0,vertexShader:p.VERTEX_SHADER,fragmentShader:p.FRAGMENT_SHADER,shading:e.THREE.NoShading,side:e.THREE.DoubleSide,vertexColors:e.THREE.VertexColors,blending:e.THREE.NormalBlending,transparent:!1,wireframe:!1,linewidth:1});return v}p.create=x})(d=s.Material||(s.Material={}))})(o=e.Labels||(e.Labels={}))})(r=i.Visualization||(i.Visualization={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";s.DefaultLabelsOptions={fontFamily:"sans-serif",fontSize:32,fontStyle:"normal",fontWeight:"normal",useSDF:!0,attachment:"middle-center",backgroundMargin:1};var d=function(p){B(x,p);function x(){return p!==null&&p.apply(this,arguments)||this}return x.prototype.applySelectionInternal=function(l,_){return!1},x.prototype.getPickElements=function(l){return[]},x.prototype.highlightElement=function(l,_){return!1},x.prototype.highlightInternal=function(l){return!1},x.prototype.applyColoring=function(l){for(var _=this.geometry.attributes.color.array,v=0,c={r:.1,g:.1,b:.1},h=0,f=0,m=this.labels;f<m.length;f++){var b=m[f],w=b.length*4+4;l.setElementColor(h,c);for(var C=0;C<w;C++)_[v++]=c.r,_[v++]=c.g,_[v++]=c.b;h++}this.geometry.attributes.color.needsUpdate=!0},x.prototype.applyThemeInternal=function(l){this.applyColoring(l);var _=l.colors.get("Background")||e.Color.fromHexString("#333333"),v=l.variables.get("backgroundOpacity")!==void 0?l.variables.get("backgroundOpacity"):.5,c=l.colors.get("Outline")||e.Color.fromHexString("#222222"),h=l.variables.get("outlineWidth")?+l.variables.get("outlineWidth"):0,f=l.variables.get("sizeFactor")?+l.variables.get("sizeFactor"):1,m=this.material.uniforms;m.xOffset.value=l.variables.get("xOffset")||0,m.yOffset.value=l.variables.get("yOffset")||0,m.zOffset.value=l.variables.get("zOffset")||0,m.backgroundColor.value=new e.THREE.Vector3(_.r,_.g,_.b),m.backgroundOpacity.value=v,m.outlineColor.value=new e.THREE.Vector3(c.r,c.g,c.b),m.outlineWidth.value=h,m.sizeFactor.value=f,this.material.transparent=v<1,this.material.fog=!l.disableFog,this.material.needsUpdate=!0},x.create=function(l,_){var v=this;return i.Core.computation(function(c){return H(v,void 0,void 0,function(){var h,f,m,b;return q(this,function(w){switch(w.label){case 0:return[4,c.updateProgress("Creating labels geometry...")];case 1:return w.sent(),h=s.Geometry.create(_),f=h.geometry,m=h.texture,[4,c.updateProgress("Creating labels model...")];case 2:return w.sent(),b=new x,b.labels=_.labels,b.geometry=f,b.material=s.Material.create(m),b.entity=l,b.object=new e.THREE.Mesh(f,b.material),b.object.renderOrder=1,f.computeBoundingSphere(),b.centroid=f.boundingSphere.center,b.radius=f.boundingSphere.radius+4,b.applyTheme(_.theme),b.disposeList=[f,b.material],[2,b]}})})})},x}(e.Model);s.Model=d})(o=e.Labels||(e.Labels={}))})(r=i.Visualization||(i.Visualization={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){"use strict";p.DefaultBallsAndSticksModelParameters={tessalation:3,atomRadius:function(){return .4},hideBonds:!1,hideHydrogens:!1,bondRadius:.15,customMaxBondLengths:void 0};var x=function(l){B(_,l);function _(){return l!==null&&l.apply(this,arguments)||this}return _.prototype.applySelectionInternal=function(v,c){for(var h=this.ballsAndSticks.vertexStateBuffer,f=h.array,m=this.ballsAndSticks.atomVertexMap,b=m.vertexRanges,w=!1,C=0,E=v;C<E.length;C++){var S=E[C];if(m.elementMap.has(S)){var M=m.elementMap.get(S),A=m.elementRanges[2*M],R=m.elementRanges[2*M+1];if(A!==R)for(var D=A;D<R;D+=2){var N=b[D],I=b[D+1];w=e.Selection.applyActionToRange(f,N,I,c)||w}}}return w?(h.needsUpdate=!0,!0):!1},_.prototype.getPickElements=function(v){return[v]},_.prototype.highlightElement=function(v,c){return this.applySelection([v],c?3:4)},_.prototype.highlightInternal=function(v){return e.Selection.applyActionToBuffer(this.ballsAndSticks.vertexStateBuffer,v?3:4)},_.prototype.applyThemeInternal=function(v){var c=this,h=this.ballsAndSticks.atomVertexMap;e.MaterialsHelper.applyColorToMap(h,this.ballsAndSticks.atomsGeometry.attributes.color,function(m,b){return c.theme.setElementColor(m,b)});var f=e.Theme.getColor(v,"Bond",s.Colors.DefaultBondColor);e.MaterialsHelper.applyColorToBuffer(this.ballsAndSticks.bondsGeometry.attributes.color,f),e.MaterialsHelper.updateMaterial(this.material,v,this.object),e.MaterialsHelper.updateMaterial(this.bondsMaterial,v,this.object)},_.prototype.createObjects=function(){var v=new e.THREE.Object3D;v.add(new e.THREE.Mesh(this.ballsAndSticks.atomsGeometry,this.material)),v.add(new e.THREE.Mesh(this.ballsAndSticks.bondsGeometry,this.bondsMaterial));var c=new e.THREE.Mesh(this.ballsAndSticks.pickGeometry,this.pickMaterial);return{main:v,pick:c}},_.create=function(v,c){var h=this,f=c.model,m=c.atomIndices,b=c.theme,w=c.params,C=c.props;return i.Core.computation(function(E){return H(h,void 0,void 0,function(){var S,M,A;return q(this,function(R){switch(R.label){case 0:return[4,p.buildGeometry(f,w,m,E)];case 1:return S=R.sent(),M=new _,M.ballsAndSticks=S,M.material=e.MaterialsHelper.getMeshMaterial(),M.bondsMaterial=new e.THREE.MeshPhongMaterial({specular:11184810,shininess:1,shading:e.THREE.SmoothShading,side:e.THREE.FrontSide,vertexColors:e.THREE.VertexColors}),M.pickMaterial=e.MaterialsHelper.getPickMaterial(),M.entity=v,M.ballsAndSticks.atomsGeometry.computeBoundingSphere(),M.centroid=M.ballsAndSticks.atomsGeometry.boundingSphere.center,M.radius=M.ballsAndSticks.atomsGeometry.boundingSphere.radius,C&&(M.props=C),A=M.createObjects(),M.object=A.main,M.applyTheme(b),M.disposeList.push(M.ballsAndSticks,M.material,M.bondsMaterial,M.pickMaterial),M.pickObject=A.pick,M.pickBufferAttributes=[M.ballsAndSticks.pickGeometry.attributes.pColor],[2,M]}})})})},_}(e.Model);p.Model=x})(d=s.BallsAndSticks||(s.BallsAndSticks={}))})(o=e.Molecule||(e.Molecule={}))})(r=i.Visualization||(i.Visualization={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){"use strict";var x=i.Core.Geometry,l=x.LinearAlgebra.Vector3,_=x.LinearAlgebra.Matrix4,v=e.Geometry.Builder;function c(A){return A==="H"||A==="D"||A==="T"}function h(A,R,D){var N=A.data.atoms.elementSymbol,I=D.hideHydrogens,L=0;if(I)for(var Y=0,J=R;Y<J.length;Y++){var ie=J[Y];c(N[ie])||L++}else L=R.length;return L}function f(A,R,D){for(var N=i.Core.Structure.computeBonds(A,R,{maxHbondLength:D.customMaxBondLengths&&D.customMaxBondLengths.has("H")?D.customMaxBondLengths.get("H"):1.15}),I=1/(2*.15),L=A.data.atoms.elementSymbol,Y=D.hideHydrogens,J=0,ie=0,K=N.type,Q=N.count,ne=N.atomAIndex,ue=N.atomBIndex,fe=A.positions,ge=fe.x,ye=fe.y,pe=fe.z,de=0;de<Q;de++){var he=K[de],_e=ne[de],ve=ue[de];if(!(Y&&(c(L[_e])||c(L[ve])))){if(he===0||he===5)J+=1;else if(he>=1&&he<=4)J+=he;else if(he===6||he===7||he===8){var Z=ge[_e]-ge[ve],be=ye[_e]-ye[ve],Ee=pe[_e]-pe[ve],De=Math.sqrt(Z*Z+be*be+Ee*Ee);ie+=Math.ceil(I*De)}}}return{bonds:N,covalentStickCount:J,dashPartCount:ie}}var m=function(){function A(R,D){this.bondTemplate=R,this.builder=D,this.bondUpVector=l.fromValues(1,0,0),this.dir=l.zero(),this.scale=l.zero(),this.rotation=_.zero(),this.offset=l.zero(),this.a=l.zero(),this.b=l.zero()}return A}(),b;(function(A){var R={};function D(L){if(R[L])return R[L];var Y;switch(L){case 0:Y=2;break;case 1:Y=4;break;case 2:Y=6;break;case 3:Y=8;break;case 4:Y=10;break;case 5:Y=12;break;default:Y=14;break}var J=new e.THREE.TubeGeometry(new e.THREE.LineCurve3(new e.THREE.Vector3(0,0,0),new e.THREE.Vector3(1,0,0)),2,1,Y),ie=e.GeometryHelper.toRawGeometry(J);return R[L]=ie,ie}A.getBond=D;var N={};function I(L){if(N[L])return N[L];var Y,J=1;switch(L){case 0:Y=new e.THREE.OctahedronGeometry(J,0);break;case 1:Y=new e.THREE.OctahedronGeometry(J,1);break;case 2:Y=new e.THREE.IcosahedronGeometry(J,0);break;case 3:Y=new e.THREE.IcosahedronGeometry(J,1);break;case 4:Y=new e.THREE.IcosahedronGeometry(J,2);break;case 5:Y=new e.THREE.OctahedronGeometry(J,3);break;default:Y=new e.THREE.IcosahedronGeometry(J,3);break}var ie=e.GeometryHelper.toRawGeometry(Y);return N[L]=ie,ie}A.getAtom=I})(b||(b={}));var w=function(){function A(R,D,N){this.model=R,this.atomIndices=D,this.params=N,this.tessalation=this.params.tessalation,this.atomRadius=this.params.atomRadius,this.bondRadius=this.params.bondRadius,this.hideBonds=this.params.hideBonds,this.bondTemplate=b.getBond(this.tessalation),this.atomTemplate=b.getAtom(this.tessalation),this.dashTemplate=v.getDashTemplate(),this.atomCount=h(this.model,this.atomIndices,this.params),this.atomVertexCount=this.atomTemplate.vertexCount*this.atomCount,this.atomBuilder=v.createStatic(this.atomVertexCount,this.atomTemplate.indexCount*this.atomCount),this.atomColors=new Float32Array(this.atomVertexCount*3),this.atomPickColors=new Float32Array(this.atomVertexCount*4),this.atoms=this.model.data.atoms,this.positions=this.model.positions,this.cX=this.positions.x,this.cY=this.positions.y,this.cZ=this.positions.z,this.atomSymbols=this.atoms.elementSymbol,this.residueIndex=this.atoms.residueIndex,this.scale=l.zero(),this.translation=l.zero(),this.pickColor={r:.1,g:.1,b:.1},this.pickOffset=0,this.atomMapBuilder=new e.Selection.VertexMapBuilder(this.atomIndices.length),this.bs=void 0}return A}(),C=function(){function A(R){this.state=R,this.info=f(this.state.model,this.state.atomIndices,this.state.params),this.bondVertexCount=this.state.bondTemplate.vertexCount*this.info.covalentStickCount+this.state.dashTemplate.vertexCount*this.info.dashPartCount,this.bondBuilder=v.createStatic(this.bondVertexCount,this.state.bondTemplate.indexCount*this.info.covalentStickCount+this.state.dashTemplate.indexCount*this.info.dashPartCount),this.bondColors=new Float32Array(this.bondVertexCount*3),this.bondRadius=this.state.params.bondRadius,this.bondState=new m(this.state.bondTemplate,this.bondBuilder),this.bondCount=this.info.bonds.count}return A}(),E=function(){function A(){}return A.prototype.dispose=function(){this.atomsGeometry.dispose(),this.bondsGeometry.dispose(),this.pickGeometry.dispose()},A.addAtom=function(R,D){D.atomMapBuilder.startElement(R);var N=D.atomRadius(R);l.set(D.scale,N,N,N),l.set(D.translation,D.cX[R],D.cY[R],D.cZ[R]);var I=D.atomBuilder.vertices.elementCount;v.addRawTransformed(D.atomBuilder,D.atomTemplate,D.scale,D.translation,void 0),e.Selection.Picking.assignPickColor(R,D.pickColor);for(var L=0,Y=D.atomTemplate.vertexCount;L<Y;L++)D.atomPickColors[D.pickOffset++]=D.pickColor.r,D.atomPickColors[D.pickOffset++]=D.pickColor.g,D.atomPickColors[D.pickOffset++]=D.pickColor.b,D.pickOffset++;D.atomMapBuilder.addVertexRange(I,D.atomBuilder.vertices.elementCount),D.atomMapBuilder.endElement()},A.addBond=function(R,D,N){var I=N.info.bonds.atomAIndex[R],L=N.info.bonds.atomBIndex[R],Y=N.info.bonds.type[R];if(D.params.hideHydrogens){var J=D.model.data.atoms.elementSymbol;if(c(J[I])||c(J[L]))return}l.set(N.bondState.a,D.cX[I],D.cY[I],D.cZ[I]),l.set(N.bondState.b,D.cX[L],D.cY[L],D.cZ[L]);var ie=+N.bondRadius,K=2*ie/3,Q=ie/2,ne=N.bondState;switch(Y){case 0:case 1:case 5:A.addBondPart(ie,0,0,ne);break;case 2:A.addBondPart(Q,K,K,ne),A.addBondPart(Q,-K,-K,ne);break;case 3:A.addBondPart(Q,0,K,ne);var ue=Math.cos(Math.PI/6)*K,fe=Math.sin(Math.PI/6)*K;A.addBondPart(Q,-ue,-fe,ne),A.addBondPart(Q,ue,-fe,ne);break;case 4:A.addBondPart(Q/2,K,K,ne),A.addBondPart(Q/2,-K,-K,ne),A.addBondPart(Q/2,-K,K,ne),A.addBondPart(Q/2,K,-K,ne);break;case 6:case 7:case 8:A.addDashedBond(Q,ne);break}},A.addBondPart=function(R,D,N,I){var L=l.sub(I.dir,I.b,I.a),Y=l.magnitude(I.dir);l.set(I.scale,Y,R,R),l.makeRotation(I.rotation,I.bondUpVector,L),I.offset[0]=0,I.offset[1]=D,I.offset[2]=N,l.transformMat4(I.offset,I.offset,I.rotation),l.add(I.offset,I.offset,I.a),v.addRawTransformed(I.builder,I.bondTemplate,I.scale,I.offset,I.rotation)},A.addDashedBond=function(R,D){v.addDashedLine(D.builder,D.a,D.b,.15,.15,R)},A.getEmptyBondsGeometry=function(){var R=new e.THREE.BufferGeometry;return R.addAttribute("position",new e.THREE.BufferAttribute(new Float32Array(0),3)),R.addAttribute("normal",new e.THREE.BufferAttribute(new Float32Array(0),3)),R.addAttribute("index",new e.THREE.BufferAttribute(new Uint32Array(0),1)),R.addAttribute("color",new e.THREE.BufferAttribute(new Float32Array(0),3)),R},A.getBondsGeometry=function(R){var D=v.toBufferGeometry(R.bondBuilder);return e.Geometry.addAttribute(D,"color",R.bondColors,3),D},A.getAtomsGeometry=function(R){var D=v.toBufferGeometry(R.atomBuilder);e.Geometry.addAttribute(D,"color",R.atomColors,3);var N=new Float32Array(R.atomVertexCount),I=new e.THREE.BufferAttribute(N,1);D.addAttribute("vState",I);var L=new e.THREE.BufferGeometry;return L.addAttribute("position",D.getAttribute("position")),L.addAttribute("index",D.getAttribute("index")),L.addAttribute("pColor",new e.THREE.BufferAttribute(R.atomPickColors,4)),{vertexStateBuffer:I,atomsGeometry:D,atomsPickGeometry:L,atomVertexMap:R.atomMapBuilder.getMap()}},A.addAtoms=function(R,D){return H(this,void 0,void 0,function(){var N,I,L,Y,J,ie,K,Q,ne,ue;return q(this,function(fe){switch(fe.label){case 0:N=2500,I=i.Core.Utils.PerformanceMonitor.currentTime(),L=R.model.data.atoms.elementSymbol,Y=R.params.hideHydrogens,J=0,ie=R.atomIndices.length,fe.label=1;case 1:if(!(J<ie))return[3,4];for(K=J,Q=Math.min(J+N,R.atomIndices.length);K<Q;K++)ne=R.atomIndices[K],!(Y&&c(L[ne]))&&A.addAtom(ne,R);return ue=i.Core.Utils.PerformanceMonitor.currentTime(),ue-I>i.Core.Computation.UpdateProgressDelta?(I=ue,[4,D.updateProgress("Adding atoms...",!0,J,ie)]):[3,3];case 2:fe.sent(),fe.label=3;case 3:return J+=N,[3,1];case 4:return[2]}})})},A.addBondsChunks=function(R,D,N){return H(this,void 0,void 0,function(){var I,L,Y,J,ie,K;return q(this,function(Q){switch(Q.label){case 0:I=2500,L=i.Core.Utils.PerformanceMonitor.currentTime(),Y=0,Q.label=1;case 1:if(!(Y<D.bondCount))return[3,4];for(J=Y,ie=Math.min(Y+I,D.bondCount);J<ie;J++)A.addBond(J,R,D);return K=i.Core.Utils.PerformanceMonitor.currentTime(),K-L>i.Core.Computation.UpdateProgressDelta?(L=K,[4,N.updateProgress("Adding bonds...",!0,Y,D.bondCount)]):[3,3];case 2:Q.sent(),Q.label=3;case 3:return Y+=I,[3,1];case 4:return[2]}})})},A.addBonds=function(R,D){return H(this,void 0,void 0,function(){var N;return q(this,function(I){switch(I.label){case 0:return R.params.hideBonds?[2]:[4,D.updateProgress("Computing bonds...",!0)];case 1:return I.sent(),N=new C(R),R.bs=N,[4,A.addBondsChunks(R,N,D)];case 2:return I.sent(),[2]}})})},A.build=function(R,D,N,I){return H(this,void 0,void 0,function(){var L,Y,J;return q(this,function(ie){switch(ie.label){case 0:return[4,I.updateProgress("Creating atoms...")];case 1:return ie.sent(),L=new w(R,N,i.Core.Utils.extend({},D,p.DefaultBallsAndSticksModelParameters)),[4,A.addAtoms(L,I)];case 2:return ie.sent(),[4,A.addBonds(L,I)];case 3:return ie.sent(),[4,I.updateProgress("Finalizing...")];case 4:return ie.sent(),Y=new M,L.bs?Y.bondsGeometry=A.getBondsGeometry(L.bs):Y.bondsGeometry=A.getEmptyBondsGeometry(),J=A.getAtomsGeometry(L),Y.vertexStateBuffer=J.vertexStateBuffer,Y.atomsGeometry=J.atomsGeometry,Y.pickGeometry=J.atomsPickGeometry,Y.atomVertexMap=J.atomVertexMap,[2,Y]}})})},A}();function S(A,R,D,N){return E.build(A,R,D,N)}p.buildGeometry=S;var M=function(A){B(R,A);function R(){var D=A!==null&&A.apply(this,arguments)||this;return D.atomsGeometry=void 0,D.bondsGeometry=void 0,D.pickGeometry=void 0,D.atomVertexMap=void 0,D.vertexStateBuffer=void 0,D}return R.prototype.dispose=function(){this.atomsGeometry.dispose(),this.bondsGeometry.dispose(),this.pickGeometry.dispose()},R}(e.GeometryBase);p.BallsAndSticksGeometry=M})(d=s.BallsAndSticks||(s.BallsAndSticks={}))})(o=e.Molecule||(e.Molecule={}))})(r=i.Visualization||(i.Visualization={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){var x;(function(l){var _=function(c){B(h,c);function h(){var f=c!==null&&c.apply(this,arguments)||this;return f.geometry=void 0,f.pickGeometry=void 0,f.gapsGeometry=void 0,f.directionConesGeometry=void 0,f.vertexMap=void 0,f.vertexStateBuffer=void 0,f}return h.prototype.dispose=function(){this.geometry.dispose(),this.pickGeometry.dispose(),this.gapsGeometry&&this.gapsGeometry.dispose(),this.directionConesGeometry&&this.directionConesGeometry.dispose()},h}(e.GeometryBase);l.Data=_;function v(c,h,f,m,b,w){return H(this,void 0,void 0,function(){var C,E,S,M,A,R;return q(this,function(D){switch(D.label){case 0:return C=i.Core.Utils.extend({},m,l.CartoonsGeometryParams.Default),E={computation:w,model:c,atomIndices:h,linearSegments:f,parameters:m,isTrace:b,params:C,state:new l.CartoonsGeometryState(C,c.data.residues.count),units:void 0,strandArrays:{startIndex:c.data.residues.atomStartIndex,endIndex:c.data.residues.atomEndIndex,x:c.positions.x,y:c.positions.y,z:c.positions.z,name:c.data.atoms.name},strandTemplate:void 0,builder:new l.Builder,geom:new _},[4,E.computation.updateProgress("Building units...")];case 1:return D.sent(),E.units=l.CartoonAsymUnit.buildUnits(E.model,E.atomIndices,E.linearSegments),[4,l.buildUnitsAsync(E)];case 2:return D.sent(),E.strandTemplate&&E.strandTemplate.geometry.dispose(),E.geom.vertexMap=E.state.vertexMap.getMap(),[4,E.computation.updateProgress("Creating geometry...")];case 3:for(D.sent(),l.createGeometry(E),S=E.geom,M=0,A=Object.keys(E);M<A.length;M++)R=A[M],Object.prototype.hasOwnProperty.call(E,R)&&(E[R]=void 0);return[2,S]}})})}l.create=v})(x=p.Geometry||(p.Geometry={}))})(d=s.Cartoons||(s.Cartoons={}))})(o=e.Molecule||(e.Molecule={}))})(r=i.Visualization||(i.Visualization={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){var x;(function(l){var _=i.Core.Utils.ArrayBuilder,v=function(){function h(f,m,b){this.model=f,this.elements=m,this.linearSegmentCount=b,this.tempA=new e.THREE.Vector3,this.tempB=new e.THREE.Vector3,this.tempC=new e.THREE.Vector3,this.controlPoints=new Float32Array(0),this.torsionVectors=new Float32Array(0),this.normalVectors=new Float32Array(0),this.residueCount=0,this.structureStarts=i.Core.Utils.FastSet.create(),this.structureEnds=i.Core.Utils.FastSet.create(),this.residueType=[],this.residueIndex=new Int32Array(0),this.backboneOnly=!1,this.startResidueIndex=-1,this.endResidueIndex=-1;for(var w=0,C=this.elements;w<C.length;w++){var E=C[w];this.residueCount+=E.endResidueIndex-E.startResidueIndex}this.startResidueIndex=this.elements[0].startResidueIndex,this.endResidueIndex=this.elements[this.elements.length-1].endResidueIndex-1;var S=new c(this.residueCount);this.controlPointsBuilder=_.forVertex3D(this.residueCount*this.linearSegmentCount+1),this.torsionVectorsBuilder=_.forVertex3D(this.residueCount*this.linearSegmentCount+1),this.normalVectorsBuilder=_.forVertex3D(this.residueCount*this.linearSegmentCount+1),this.createControlPoints(S)}return h.prototype.createControlPoints=function(f){this.initPositions(f),this.initControlsPoints(f),this.computeSplines(f),this.controlPoints=this.controlPointsBuilder.array,this.torsionVectors=this.torsionVectorsBuilder.array,this.normalVectors=this.normalVectorsBuilder.array,this.controlPointsBuilder=null,this.torsionVectorsBuilder=null,this.normalVectorsBuilder=null},h.prototype.initPositions=function(f){for(var m=this.model.data.residues,b=this.model.data.atoms,w=this.model.positions,C={atomStartIndex:m.atomStartIndex,atomEndIndex:m.atomEndIndex,name:b.name,x:w.x,y:w.y,z:w.z},E=[],S=0,M=0,A=0,R=0,D=0,N=this.elements;D<N.length;D++){var I=N[D];for(this.structureStarts.add(I.startResidueIndex),this.structureEnds.add(I.endResidueIndex-1),M=I.startResidueIndex;M<I.endResidueIndex;M++){R++;var L=f.addResidue(M,C,I.type);L&&(I.type===1||I.type===3||I.type===5)&&A++,E[E.length]=I.type}}this.backboneOnly=A>R/4-1,this.residueIndex=new Int32Array(this.residueCount);for(var Y=0,J=this.elements;Y<J.length;Y++){var I=J[Y];for(M=I.startResidueIndex;M<I.endResidueIndex;M++)this.residueIndex[S++]=M}this.residueType=E,f.finishResidues();var ie=this.residueCount;if(f.residueType[0]=f.residueType[2],f.residueType[1]=f.residueType[3],f.residueType[f.residueType.length-2]=f.residueType[f.residueType.length-4],f.residueType[f.residueType.length-1]=f.residueType[f.residueType.length-3],ie>2){var K=2,Q=3,ne=4;f.residueType[0]!==5?(this.reflectPositions(f.uPositions,0,1,K,Q,Q,ne,.4,.6),this.reflectPositions(f.vPositions,0,1,K,Q,Q,ne,.4,.6)):(this.reflectPositions(f.uPositions,1,0,K,Q,Q,ne,.5,.5),this.reflectPositions(f.vPositions,1,0,K,Q,Q,ne,.5,.5)),K=ie+1,Q=ie,ne=ie-1,f.residueType[ie-1]!==5?(this.reflectPositions(f.uPositions,ie+2,ie+3,K,Q,Q,ne,.4,.6),this.reflectPositions(f.vPositions,ie+2,ie+3,K,Q,Q,ne,.4,.6)):(this.reflectPositions(f.uPositions,ie+2,ie+3,K,Q,Q,ne,.5,.5),this.reflectPositions(f.vPositions,ie+2,ie+3,K,Q,Q,ne,.5,.5))}else if(ie===2)for(M=0;M<2;M++)f.uPositions[3*M]=f.uPositions[6],f.uPositions[3*M+1]=f.uPositions[7],f.uPositions[3*M+2]=f.uPositions[8],f.vPositions[3*M]=f.vPositions[6],f.vPositions[3*M+1]=f.vPositions[7],f.vPositions[3*M+2]=f.vPositions[8],f.uPositions[(ie+2)*3+3*M]=f.uPositions[(ie+1)*3],f.uPositions[(ie+2)*3+3*M+1]=f.uPositions[(ie+1)*3+1],f.uPositions[(ie+2)*3+3*M+2]=f.uPositions[(ie+1)*3+2],f.vPositions[(ie+2)*3+3*M]=f.vPositions[(ie+1)*3],f.vPositions[(ie+2)*3+3*M+1]=f.vPositions[(ie+1)*3+1],f.vPositions[(ie+2)*3+3*M+2]=f.vPositions[(ie+1)*3+2];else for(var ue=[f.uPositions[6]-f.vPositions[6],f.uPositions[7]-f.vPositions[7],f.uPositions[8]-f.vPositions[8]],fe=0;fe<2;fe++)for(var ge=0;ge<3;ge++)f.uPositions[3*fe+ge]=f.uPositions[6+ge]-.5*(fe+1)*ue[ge],f.uPositions[9+3*fe+ge]=f.uPositions[6+ge]+.5*(fe+1)*ue[ge],f.vPositions[3*fe+ge]=f.vPositions[6+ge]+.5*(fe+1)*ue[ge],f.vPositions[9+3*fe+ge]=f.vPositions[6+ge]-.5*(fe+1)*ue[ge]},h.prototype.initControlsPoints=function(f){for(var m=new e.THREE.Vector3,b=f.uvLength-1,w=new e.THREE.Vector3,C=new e.THREE.Vector3,E=new e.THREE.Vector3,S=new e.THREE.Vector3,M=new e.THREE.Vector3,A=new e.THREE.Vector3,R=new e.THREE.Vector3,D=new e.THREE.Vector3,N=1,I=0;I<b;I++)M.set(f.uPositions[3*I],f.uPositions[3*I+1],f.uPositions[3*I+2]),A.set(f.vPositions[3*I],f.vPositions[3*I+1],f.vPositions[3*I+2]),I++,R.set(f.uPositions[3*I],f.uPositions[3*I+1],f.uPositions[3*I+2]),I--,D.set((M.x+R.x)/2,(M.y+R.y)/2,(M.z+R.z)/2),w.subVectors(R,M),C.subVectors(A,M),E.crossVectors(w,C),S.crossVectors(E,w),E.normalize(),S.normalize(),f.residueType[I]===N&&f.residueType[I+1]===N&&D.set(D.x+1.5*E.x,D.y+1.5*E.y,D.z+1.5*E.z),I>0&&S.angleTo(m)>Math.PI/2&&S.negate(),m.copy(S),w.addVectors(D,S),f.addControlPoint(D,w);f.finishContols()},h.prototype.computeSplines=function(f){for(var m=new e.THREE.Vector3,b=new e.THREE.Vector3,w=new e.THREE.Vector3,C=f.residueCount,E=f.pPositions,S=f.dPositions,M=new e.THREE.Vector3,A=new e.THREE.Vector3,R=new e.THREE.Vector3,D=new e.THREE.Vector3,N=new e.THREE.Vector3,I=new e.THREE.Vector3,L=new e.THREE.Vector3,Y=new e.THREE.Vector3,J=new e.THREE.Vector3,ie=new e.THREE.Vector3,K=0;K<C;K++){M.set(E[3*K],E[3*K+1],E[3*K+2]),K++,A.set(E[3*K],E[3*K+1],E[3*K+2]),K++,R.set(E[3*K],E[3*K+1],E[3*K+2]),K++,D.set(E[3*K],E[3*K+1],E[3*K+2]),K=K-3,N.set(S[3*K],S[3*K+1],S[3*K+2]),K++,I.set(S[3*K],S[3*K+1],S[3*K+2]),K++,L.set(S[3*K],S[3*K+1],S[3*K+2]),K++,Y.set(S[3*K],S[3*K+1],S[3*K+2]),K=K-3;for(var Q=1;Q<=this.linearSegmentCount;Q++){var ne=Q*1/this.linearSegmentCount;ne<.5?(h.spline(b,M,A,R,ne+.5),h.spline(w,N,I,L,ne+.5)):(h.spline(b,A,R,D,ne-.5),h.spline(w,I,L,Y,ne-.5)),K===0&&Q===1&&(h.spline(m,M,A,R,.5),h.spline(J,N,I,L,.5),h.reflect(ie,m,b,1),this.addSplineNode(ie,m,J)),this.addSplineNode(m,b,w),m.copy(b)}}},h.prototype.addSplineNode=function(f,m,b){_.add3(this.controlPointsBuilder,m.x,m.y,m.z);var w=this.tempA.subVectors(b,m);w.normalize(),_.add3(this.torsionVectorsBuilder,w.x,w.y,w.z);var C=this.tempB.subVectors(m,f),E=this.tempC.crossVectors(w,C);E.normalize(),_.add3(this.normalVectorsBuilder,E.x,E.y,E.z)},h.prototype.reflectPositions=function(f,m,b,w,C,E,S,M,A){this.tempA.set(f[3*w],f[3*w+1],f[3*w+2]),this.tempB.set(f[3*C],f[3*C+1],f[3*C+2]),h.reflect(this.tempC,this.tempA,this.tempB,M),f[3*m]=this.tempC.x,f[3*m+1]=this.tempC.y,f[3*m+2]=this.tempC.z,this.tempA.set(f[3*E],f[3*E+1],f[3*E+2]),this.tempB.set(f[3*S],f[3*S+1],f[3*S+2]),h.reflect(this.tempC,this.tempA,this.tempB,A),f[3*b]=this.tempC.x,f[3*b+1]=this.tempC.y,f[3*b+2]=this.tempC.z},h}();l.CartoonAsymUnit=v,function(h){function f(K,Q,ne,ue){K.set(Q.x-ue*(ne.x-Q.x),Q.y-ue*(ne.y-Q.y),Q.z-ue*(ne.z-Q.z))}h.reflect=f;function m(K,Q,ne,ue,fe){var ge=Math.pow(1-fe,2)/2,ye=Math.pow(fe,2)/2,pe=1-ge-ye,de=ge*Q.x+pe*ne.x+ye*ue.x,he=ge*Q.y+pe*ne.y+ye*ue.y,_e=ge*Q.z+pe*ne.z+ye*ue.z;K.set(de,he,_e)}h.spline=m;function b(K,Q,ne){for(var ue=new i.Core.Structure.SecondaryStructureElement(K.type,K.startResidueId,K.endResidueId),fe=K.startResidueIndex,ge=K.endResidueIndex,ye=fe;ye<ge;ye++)if(Q[ye]){for(ue.startResidueIndex!==ye&&(ue=new i.Core.Structure.SecondaryStructureElement(K.type,K.startResidueId,K.endResidueId),ue.startResidueIndex=ye);ye<ge&&Q[ye];)ye++;ue.endResidueIndex=ye,ne[ne.length]=ue}}h.maskSplit=b;function w(K,Q,ne,ue,fe,ge,ye){for(var pe=!1,de=!1,he=!1,_e=Q;_e<ne;_e++){var ve=ue[K[_e]];if(!pe&&ve===fe?pe=!0:!de&&ve===ge&&(de=!0),pe&&de)return!0;ve==="P"&&(he=!0)}return ye?pe:he}h.isCartoonLike=w;function C(K,Q){for(var ne=new Uint8Array(K.data.residues.count),ue=K.data.atoms,fe=ue.residueIndex,ge=ue.name,ye=K.data.residues.secondaryStructureIndex,pe=K.data.secondaryStructure,de=0,he=Q.length-1;de<he;de++){var _e=Q[de],ve=de,Z=fe[_e];for(de++;Z===fe[Q[de]];)de++;var be=pe[ye[Z]].type;be!==0&&(be===5?ne[Z]=+h.isCartoonLike(Q,ve,de,ge,"O5'","C3'",!1):ne[Z]=+h.isCartoonLike(Q,ve,de,ge,"CA","O",!0),de--)}return ne}h.createMask=C;function E(K){for(var Q=!1,ne=0,ue=K.data.secondaryStructure;ne<ue.length;ne++){var fe=ue[ne];if(fe.type===1||fe.type===3||fe.type===2)return!1;fe.type===4&&(Q=!0)}return Q}function S(K,Q){if(Q.type!==4)return[Q];for(var ne=[],ue=K.data.atoms.name,fe=K.data.residues,ge=fe.atomStartIndex,ye=fe.atomEndIndex,pe=new Int32Array(Q.endResidueIndex-Q.startResidueIndex),de=0,he=!0,_e=Q.startResidueIndex,ve=Q.endResidueIndex;_e<ve;_e++){for(var Z=!1,be=!1,Ee=ge[_e],De=ye[_e];Ee<De&&(ue[Ee]==="CA"?(Z||(pe[de++]=Ee),Z=!0):ue[Ee]==="O"&&(be=!0),!(be&&Z));Ee++);if(!Z||!be){he=!1;break}}return he?(L(K,pe,Q,ne),ne):[Q]}var M=[5.45,5.18,6.37],A=2.1,R=[6.1,10.4,13],D=1.42,N=new e.THREE.Vector3(0,0,0),I=new e.THREE.Vector3(0,0,0);function L(K,Q,ne,ue){for(var fe=new Int32Array(Q.length),ge=!1,ye=K.data.atoms.residueIndex,pe=0,de=Q.length;pe<de;pe++)Y(K,Q,pe,M,A)?(fe[pe]=1,ge=!0):Y(K,Q,pe,R,D)?(fe[pe]=3,ge=!0):fe[pe]=ne.type;if(!ge){ue.push(ne);return}for(var pe=0,de=fe.length;pe<de;pe++){var he=fe[pe];if(he!==ne.type){for(var _e=pe+1;_e<de&&he===fe[_e];)_e++;if(_e-pe>1){pe=_e-1;continue}for(var ve=pe;ve<_e;ve++)fe[ve]=ne.type;pe=_e-1}}for(var pe=0,de=fe.length;pe<de;pe++){for(var he=fe[pe],_e=pe+1;_e<de&&he===fe[_e];)_e++;var Z=new i.Core.Structure.SecondaryStructureElement(he,new i.Core.Structure.PolyResidueIdentifier("",pe,null),new i.Core.Structure.PolyResidueIdentifier("",_e,null));Z.startResidueIndex=ye[Q[pe]],Z.endResidueIndex=ye[Q[_e-1]]+1,ue.push(Z),pe=_e-1}}function Y(K,Q,ne,ue,fe){for(var ge=Q.length,ye=K.positions,pe=ye.x,de=ye.y,he=ye.z,_e=N,ve=I,Z=Math.max(0,ne-2);Z<=ne;Z++)for(var be=2;be<5;be++)if(!(Z+be>=ge)){var Ee=Q[Z],De=Q[Z+be];if(_e.set(pe[Ee],de[Ee],he[Ee]),ve.set(pe[De],de[De],he[De]),Math.abs(_e.distanceTo(ve)-ue[be-2])>fe)return!1}return!0}function J(K){if(K.length===0)throw"Cartoons cannot be constructred from this model/selection."}function ie(K,Q,ne){for(var ue=C(K,Q),fe=[],ge=E(K),ye=0,pe=K.data.secondaryStructure;ye<pe.length;ye++){var de=pe[ye];if(ge)for(var he=S(K,de),_e=0,ve=he;_e<ve.length;_e++){var Z=ve[_e];h.maskSplit(Z,ue,fe)}else h.maskSplit(de,ue,fe)}J(fe);var be=fe[0],Ee=K.data.residues.asymId,De=K.data.residues.authSeqNumber,Fe=[],Ue=[],Qe=0;be.type===Qe&&(be=null);for(var Ke=0,Te=fe;Ke<Te.length;Ke++){var de=Te[Ke];de.type===Qe?(Fe.length>0&&Ue.push(new h(K,Fe,ne)),be=null,Fe=[]):(be===null&&(be=de),Ee[be.endResidueIndex-1]!==Ee[de.startResidueIndex]||be!==de&&De[de.startResidueIndex]-De[be.endResidueIndex-1]>1||be.startResidueIndex!==de.startResidueIndex&&de.startResidueIndex-be.endResidueIndex>0?(Fe.length>0?Ue.push(new h(K,Fe,ne)):be!==null&&Ue.push(new h(K,[be],ne)),be=null,Fe=[de]):Fe[Fe.length]=de),be=de}return Fe.length>0&&Ue.push(new h(K,Fe,ne)),Ue}h.buildUnits=ie}(v=l.CartoonAsymUnit||(l.CartoonAsymUnit={}));var c=function(){function h(f){this.typeBuilder=_.forArray(1e4),this.residueType=[],this.uPositions=new Float32Array(0),this.vPositions=new Float32Array(0),this.pPositions=new Float32Array(0),this.dPositions=new Float32Array(0),this.uvLength=0,this.residueCount=0,this.typeBuilder=_.forArray(f+4),this.uPositionsBuilder=_.forVertex3D(f+4),this.vPositionsBuilder=_.forVertex3D(f+4),this.pPositionsBuilder=_.forVertex3D(f+4),this.dPositionsBuilder=_.forVertex3D(f+4),_.add(this.typeBuilder,0),_.add(this.typeBuilder,0),_.add3(this.uPositionsBuilder,0,0,0),_.add3(this.uPositionsBuilder,0,0,0),_.add3(this.vPositionsBuilder,0,0,0),_.add3(this.vPositionsBuilder,0,0,0)}return h.prototype.addResidue=function(f,m,b){var w=m.atomStartIndex[f],C=m.atomEndIndex[f],E=!1,S=!1,M=m.name;if(b!==5)for(var A=w;A<C&&(!E&&M[A]==="CA"?(_.add3(this.uPositionsBuilder,m.x[A],m.y[A],m.z[A]),E=!0):!S&&M[A]==="O"&&(_.add3(this.vPositionsBuilder,m.x[A],m.y[A],m.z[A]),S=!0),!(E&&S));A++);else if(C-w===1)_.add3(this.uPositionsBuilder,m.x[w],m.y[w],m.z[w]),E=!0;else{for(var R=-1,A=w;A<C&&(!E&&M[A]==="O5'"?(_.add3(this.uPositionsBuilder,m.x[A],m.y[A],m.z[A]),E=!0):!S&&M[A]==="C3'"&&(_.add3(this.vPositionsBuilder,m.x[A],m.y[A],m.z[A]),S=!0),M[A]==="P"&&(R=A),!(E&&S));A++);!E&&!S&&R>=0&&(_.add3(this.uPositionsBuilder,m.x[R],m.y[R],m.z[R]),E=!0)}var D=!1;if(S){if(!E){var N=this.vPositionsBuilder.array,I=N.length;_.add3(this.uPositionsBuilder,N[I-3],N[I-2],N[I-1]),D=!0}}else{var N=this.uPositionsBuilder.array,I=N.length;_.add3(this.vPositionsBuilder,N[I-3],N[I-2],N[I-1]),D=!0}return _.add(this.typeBuilder,b),D},h.prototype.finishResidues=function(){_.add(this.typeBuilder,0),_.add(this.typeBuilder,0),_.add3(this.uPositionsBuilder,0,0,0),_.add3(this.uPositionsBuilder,0,0,0),_.add3(this.vPositionsBuilder,0,0,0),_.add3(this.vPositionsBuilder,0,0,0),this.residueType=this.typeBuilder.array,this.uPositions=this.uPositionsBuilder.array,this.vPositions=this.vPositionsBuilder.array,this.typeBuilder=null,this.uPositionsBuilder=null,this.vPositionsBuilder=null,this.uvLength=this.residueType.length,this.residueCount=this.uvLength-4},h.prototype.addControlPoint=function(f,m){_.add3(this.pPositionsBuilder,f.x,f.y,f.z),_.add3(this.dPositionsBuilder,m.x,m.y,m.z)},h.prototype.finishContols=function(){this.pPositions=this.pPositionsBuilder.array,this.dPositions=this.dPositionsBuilder.array,this.pPositionsBuilder=null,this.dPositionsBuilder=null},h}()})(x=p.Geometry||(p.Geometry={}))})(d=s.Cartoons||(s.Cartoons={}))})(o=e.Molecule||(e.Molecule={}))})(r=i.Visualization||(i.Visualization={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){var x;(function(l){var _=function(){function K(){this.radialSegmentCount=10,this.turnWidth=.1,this.strandWidth=.15,this.nucleotideStrandLineWidth=.15,this.nucleotideStrandFactor=3,this.helixWidth=1.1,this.helixHeight=.1,this.sheetWidth=1.1,this.sheetHeight=.1,this.arrowWidth=1.7,this.tessalation=2}return K.Default=new K,K}();l.CartoonsGeometryParams=_;var v=e.Geometry.Builder,c=function(){function K(Q,ne){this.params=Q,this.residueCount=ne,this.residueIndex=0,this.builder=v.createDynamic(this.residueCount*8,this.residueCount*16),this.vs=this.builder.vertices,this.is=this.builder.indices,this.gapsBuilder=v.createDynamic(256,512),this.dCones=v.createDynamic(1,1),this.dConesInit=!1,this.translationMatrix=new e.THREE.Matrix4,this.scaleMatrix=new e.THREE.Matrix4,this.rotationMatrix=new e.THREE.Matrix4,this.invMatrix=new e.THREE.Matrix4,this.vertexMap=new e.Selection.VertexMapBuilder(ne)}return Object.defineProperty(K.prototype,"verticesDone",{get:function(){return this.vs.elementCount},enumerable:!0,configurable:!0}),Object.defineProperty(K.prototype,"trianglesDone",{get:function(){return this.is.elementCount},enumerable:!0,configurable:!0}),Object.defineProperty(K.prototype,"directionConesBuilder",{get:function(){return this.dConesInit?this.dCones:(this.dConesInit=!0,this.dCones=v.createDynamic(this.residueCount,this.residueCount),this.dCones)},enumerable:!0,configurable:!0}),K.prototype.addVertex=function(Q,ne){v.addVertex3d(this.builder,Q.x,Q.y,Q.z),v.addNormal3d(this.builder,ne.x,ne.y,ne.z)},K.prototype.addTriangle=function(Q,ne,ue){v.addIndex3d(this.builder,Q,ne,ue)},K.prototype.addTriangles=function(Q,ne,ue,fe,ge,ye){v.addIndex3d(this.builder,Q,ne,ue),v.addIndex3d(this.builder,fe,ge,ye)},K}();l.CartoonsGeometryState=c;function h(K){var Q=K.params.nucleotideStrandLineWidth,ne=K.params.tessalation,ue=0,fe=0,ge;switch(ne){case 0:fe=2,ue=1;break;case 1:fe=3,ue=2;break;case 2:fe=4,ue=2;break;case 3:fe=8,ue=4;break;case 4:fe=10,ue=6;break;case 5:fe=14,ue=6;break;default:fe=16,ue=8;break}for(var ye=[],pe=Math.PI/2/ue,de=0;de<=ue;de++)ye[de]=new e.THREE.Vector3(0,Q*Math.cos(de*pe),.1*Math.sin(de*pe)),ye[de].z+=.9;ge=new e.THREE.LatheGeometry([new e.THREE.Vector3(0,Q,0)].concat(ye),fe,Math.PI);var he=e.GeometryHelper.getIndexedBufferGeometry(ge);K.strandTemplate={vertex:he.attributes.position.array,normal:he.attributes.normal.array,index:he.attributes.index.array,geometry:he}}function f(K,Q){for(var ne=Q.state,ue=Q.params,fe=Q.builder,ge=0,ye=K.residueCount;ge<ye;ge++){ne.vertexMap.startElement(K.residueIndex[ge]);var pe=ne.verticesDone;ne.residueIndex=ge;var de=K.structureStarts.has(K.residueIndex[ge]),he=K.structureEnds.has(K.residueIndex[ge]);if(Q.isTrace||K.backboneOnly)switch(K.residueType[ge]){case 5:fe.addTube(K,ne,ue.strandWidth,ue.strandWidth,fe.hasP(K.residueIndex[ge],Q.strandArrays)?ue.nucleotideStrandFactor:1),(de||he)&&fe.addTubeCap(K,ne,ue.strandWidth,ue.strandWidth,de,he),Q.strandTemplate||h(Q),fe.addStrandLine(K,ne,Q.strandTemplate,Q.strandArrays,K.residueIndex[ge]);break;default:fe.addTube(K,ne,ue.turnWidth,ue.turnWidth,1),(de||he)&&fe.addTubeCap(K,ne,ue.turnWidth,ue.turnWidth,de,he);break}else switch(K.residueType[ge]){case 1:fe.addTube(K,ne,ue.helixWidth,ue.helixHeight,1),de?fe.addTubeCap(K,ne,ue.helixWidth,ue.helixHeight,!0,!1):he&&fe.addTubeCap(K,ne,ue.helixWidth,ue.helixHeight,!1,!0);break;case 3:fe.addSheet(K,ne,de,he),(de||he)&&fe.addSheetCap(K,ne,de,he);break;case 5:fe.addTube(K,ne,ue.strandWidth,ue.strandWidth,fe.hasP(K.residueIndex[ge],Q.strandArrays)?ue.nucleotideStrandFactor:1),(de||he)&&fe.addTubeCap(K,ne,ue.strandWidth,ue.strandWidth,de,he),Q.strandTemplate||h(Q),fe.addStrandLine(K,ne,Q.strandTemplate,Q.strandArrays,K.residueIndex[ge]);break;default:fe.addTube(K,ne,ue.turnWidth,ue.turnWidth,1),(de||he)&&fe.addTubeCap(K,ne,ue.turnWidth,ue.turnWidth,de,he);break}Q.parameters.showDirectionCones&&K.residueType[ge]!==5&&L(Q,K,2*ue.sheetHeight,ge),ne.vertexMap.addVertexRange(pe,ne.verticesDone),ne.vertexMap.endElement()}}l.buildUnit=f;function m(K,Q,ne){var ue=K.model.data.residues.chainIndex;return ue[Q.endResidueIndex]===ue[ne.endResidueIndex]}var b=i.Core.Geometry.LinearAlgebra.Vector3,w=i.Core.Geometry.LinearAlgebra.Matrix4;function C(K,Q,ne){var ue=Q.controlPoints.length,fe=Q.controlPoints,ge=ne.controlPoints,ye=b.fromValues(fe[ue-3],fe[ue-2],fe[ue-1]),pe=b.fromValues(ge[0],ge[1],ge[2]),de=K.state.params.turnWidth/2;v.addDashedLine(K.state.gapsBuilder,ye,pe,.5,.5,de)}var E=function(){var K=new e.THREE.CylinderGeometry(0,1,1,6,1),Q=e.GeometryHelper.toRawGeometry(K);return K.dispose(),Q}(),S=b.zero(),M=b.fromValues(0,1,0),A=b.zero(),R=b.zero(),D=b.zero(),N=b.zero(),I=w.identity();function L(K,Q,ne,ue){if(!(Q.residueCount<=2)){var fe=Q.controlPoints,ge=ue*Q.linearSegmentCount+(.35*Q.linearSegmentCount+1|0),ye=ue*Q.linearSegmentCount+(.85*Q.linearSegmentCount+1|0);if(!(ge===ye||3*ye>fe.length)){b.set(D,fe[3*ge],fe[3*ge+1],fe[3*ge+2]),b.set(A,fe[3*ge],fe[3*ge+1],fe[3*ge+2]),b.set(R,fe[3*ye],fe[3*ye+1],fe[3*ye+2]),b.sub(A,R,A);var pe=b.magnitude(A);pe<=.1||(b.set(N,2*ne,pe,2*ne),b.normalize(A,A),b.makeRotation(I,M,A),v.addRawTransformed(K.state.directionConesBuilder,E,N,D,I))}}}function Y(K){return H(this,void 0,void 0,function(){var Q,ne,ue,fe,ge,ye;return q(this,function(pe){switch(pe.label){case 0:Q=1e4,ne=i.Core.Utils.PerformanceMonitor.currentTime(),ue=0,pe.label=1;case 1:if(!(ue<K.units.length))return[3,4];for(fe=0;fe<Q&&ue<K.units.length;)f(K.units[ue],K),fe+=K.units[ue].residueCount,ue++;return ge=i.Core.Utils.PerformanceMonitor.currentTime(),ge-ne>i.Core.Computation.UpdateProgressDelta?(ne=ge,[4,K.computation.updateProgress("Building units...",!0,ue,K.units.length)]):[3,3];case 2:pe.sent(),pe.label=3;case 3:return[3,1];case 4:for(ye=0;ye<K.units.length-1;ye++)m(K,K.units[ye],K.units[ye+1])&&C(K,K.units[ye],K.units[ye+1]);return[2]}})})}l.buildUnitsAsync=Y;function J(K){var Q=K.state,ne=new Float32Array(Q.verticesDone*3),ue=new Float32Array(Q.verticesDone*4),fe=new Float32Array(Q.verticesDone),ge=v.toBufferGeometry(Q.builder);ge.addAttribute("color",new e.THREE.BufferAttribute(ne,3)),K.geom.vertexStateBuffer=new e.THREE.BufferAttribute(fe,1),ge.addAttribute("vState",K.geom.vertexStateBuffer),K.geom.geometry=ge,Q.gapsBuilder.vertices.elementCount&&(K.geom.gapsGeometry=v.toBufferGeometry(Q.gapsBuilder)),Q.directionConesBuilder.vertices.elementCount&&(K.geom.directionConesGeometry=v.toBufferGeometry(Q.directionConesBuilder));for(var ye=K.geom.vertexMap,pe={r:.45,g:.45,b:.45},de=ye.vertexRanges,he=0,_e=ye.elementIndices;he<_e.length;he++){var ve=_e[he],Z=ye.elementMap.get(ve),be=ye.elementRanges[2*Z],Ee=ye.elementRanges[2*Z+1];if(be!==Ee){e.Selection.Picking.assignPickColor(ve,pe);for(var De=be;De<Ee;De+=2)for(var Fe=de[De],Ue=de[De+1],Qe=Fe;Qe<Ue;Qe++)ue[Qe*4]=pe.r,ue[Qe*4+1]=pe.g,ue[Qe*4+2]=pe.b}}var Ke=new e.THREE.BufferGeometry;Ke.addAttribute("position",ge.getAttribute("position")),Ke.addAttribute("index",ge.getAttribute("index")),Ke.addAttribute("pColor",new e.THREE.BufferAttribute(ue,4)),K.geom.pickGeometry=Ke}l.createGeometry=J;var ie=function(){function K(){this.tempVectors=[new e.THREE.Vector3,new e.THREE.Vector3,new e.THREE.Vector3,new e.THREE.Vector3,new e.THREE.Vector3,new e.THREE.Vector3,new e.THREE.Vector3,new e.THREE.Vector3,new e.THREE.Vector3,new e.THREE.Vector3,new e.THREE.Vector3,new e.THREE.Vector3,new e.THREE.Vector3,new e.THREE.Vector3,new e.THREE.Vector3,new e.THREE.Vector3,new e.THREE.Vector3,new e.THREE.Vector3]}return K.prototype.setVector=function(Q,ne,ue){return ue.set(Q[3*ne],Q[3*ne+1],Q[3*ne+2]),ue},K.prototype.addTube=function(Q,ne,ue,fe,ge){var ye=ne.verticesDone,pe=0,de=0,he=this.tempVectors[0],_e=this.tempVectors[1],ve=this.tempVectors[2],Z=this.tempVectors[3],be=this.tempVectors[4],Ee=this.tempVectors[5],De=this.tempVectors[6],Fe=ne.residueIndex*Q.linearSegmentCount,Ue=Fe+Q.linearSegmentCount,Qe=Q.controlPoints,Ke=Q.linearSegmentCount+1,Te=Q.torsionVectors,Ie=Q.normalVectors,ke=ne.params.radialSegmentCount,nt=1/(Ue-Fe);for(pe=Fe;pe<=Ue;pe++){this.setVector(Te,pe,Ee),this.setVector(Ie,pe,De);var dt=nt*(pe-Fe)-.5,yt=1+(ge-1)*(Math.cos(2*Math.PI*dt)+1),gt=yt*ue,xt=yt*fe;for(de=0;de<ke;de++){var tt=2*Math.PI*de/ke;Z.copy(Ee),be.copy(De),he.addVectors(Z.multiplyScalar(gt*Math.cos(tt)),be.multiplyScalar(xt*Math.sin(tt))),Z.copy(Ee),be.copy(De),_e.addVectors(Z.multiplyScalar(xt*Math.cos(tt)),be.multiplyScalar(gt*Math.sin(tt))),_e.normalize(),this.setVector(Qe,pe,ve),ve.add(he),ne.addVertex(ve,_e)}}for(pe=0;pe<Ke-1;pe++)for(de=0;de<ke;de++)ne.addTriangles(ye+pe*ke+de,ye+(pe+1)*ke+(de+1)%ke,ye+pe*ke+(de+1)%ke,ye+pe*ke+de,ye+(pe+1)*ke+de,ye+(pe+1)*ke+(de+1)%ke)},K.prototype.addTubeCap=function(Q,ne,ue,fe,ge,ye){var pe=ne.verticesDone,de,he=this.tempVectors[0],_e=this.tempVectors[1],ve=this.tempVectors[2],Z=this.tempVectors[3],be=this.tempVectors[4],Ee=this.tempVectors[5],De=this.tempVectors[6],Fe=this.tempVectors[7],Ue=ne.residueIndex*Q.linearSegmentCount,Qe=Q.controlPoints,Ke=Q.linearSegmentCount+1,Te=Q.torsionVectors,Ie=Q.normalVectors,ke=ne.params.radialSegmentCount;this.setVector(Te,Ue,De),this.setVector(Ie,Ue,Fe),_e.crossVectors(De,Fe),ye&&_e.negate();var nt=Ue+(ge?0:Ke-1);this.setVector(Qe,nt,he),ne.addVertex(he,_e),this.setVector(Te,nt,be),this.setVector(Ie,nt,Ee);for(var dt=0;dt<ke;dt++)de=2*Math.PI*dt/ke,ve.copy(be),Z.copy(Ee),he.addVectors(ve.multiplyScalar(Math.cos(de)*ue),Z.multiplyScalar(Math.sin(de)*fe)),this.setVector(Qe,nt,De),he.add(De),ne.addVertex(he,_e),ge?ne.addTriangle(pe,pe+dt+1,pe+(dt+1)%ke+1):ne.addTriangle(pe,pe+(dt+1)%ke+1,pe+dt+1)},K.prototype.addSheet=function(Q,ne,ue,fe){var ge=ne.verticesDone,ye=ne.params,pe=0,de=0,he=this.tempVectors[0],_e=this.tempVectors[1],ve=this.tempVectors[2],Z=this.tempVectors[3],be=this.tempVectors[4],Ee=this.tempVectors[5],De=this.tempVectors[7],Fe=this.tempVectors[8],Ue=this.tempVectors[9],Qe=ne.residueIndex*Q.linearSegmentCount,Ke=Qe+Q.linearSegmentCount,Te=Q.controlPoints,Ie=Q.torsionVectors,ke=Q.normalVectors,nt=0,dt=0;for(Z.set(0,0,0),fe&&(this.setVector(Te,Ke,De),this.setVector(Te,Qe,Fe),nt=ye.arrowWidth/Ee.subVectors(De,Fe).length()),pe=Qe;pe<=Ke;pe++)dt=fe?ye.arrowWidth*(1-(pe-Qe)/Q.linearSegmentCount):ye.sheetWidth,this.setVector(Ie,pe,he),he.multiplyScalar(dt),this.setVector(ke,pe,_e),_e.multiplyScalar(ye.sheetHeight),fe&&(this.setVector(ke,pe,De),this.setVector(Ie,pe,Fe),Z.crossVectors(De,Fe).multiplyScalar(nt)),this.setVector(Te,pe,ve),this.setVector(ke,pe,be),this.setVector(Ie,pe,Ue),De.copy(ve).add(he).add(_e),Fe.copy(be),ne.addVertex(De,Fe),De.copy(ve).sub(he).add(_e),ne.addVertex(De,Fe),De.copy(ve).sub(he).add(_e),Fe.copy(Ue).negate().add(Z),ne.addVertex(De,Fe),De.copy(ve).sub(he).sub(_e),ne.addVertex(De,Fe),De.copy(ve).sub(he).sub(_e),Fe.copy(be).negate(),ne.addVertex(De,Fe),De.copy(ve).add(he).sub(_e),ne.addVertex(De,Fe),De.copy(ve).add(he).sub(_e),Fe.copy(Ue).add(Z),ne.addVertex(De,Fe),De.copy(ve).add(he).add(_e),ne.addVertex(De,Fe);for(pe=0;pe<Q.linearSegmentCount;pe++)for(de=0;de<4;de++)ne.addTriangles(ge+pe*8+2*de,ge+(pe+1)*8+2*de+1,ge+pe*8+2*de+1,ge+pe*8+2*de,ge+(pe+1)*8+2*de,ge+(pe+1)*8+2*de+1)},K.prototype.addSheetCap=function(Q,ne,ue,fe){var ge=ne.params,ye=ne.residueIndex*Q.linearSegmentCount,pe=this.setVector(Q.controlPoints,ye,this.tempVectors[0]),de=this.setVector(Q.torsionVectors,ye,this.tempVectors[1]).multiplyScalar(ge.sheetWidth),he=this.setVector(Q.normalVectors,ye,this.tempVectors[2]).multiplyScalar(ge.sheetHeight),_e=this.tempVectors[3].addVectors(pe,de).add(he),ve=this.tempVectors[4].subVectors(pe,de).add(he),Z=this.tempVectors[5].subVectors(pe,de).sub(he),be=this.tempVectors[6].addVectors(pe,de).sub(he);if(ue)this.addSheepCapSection(ne,_e,ve,Z,be);else{var Ee=this.setVector(Q.torsionVectors,ye,this.tempVectors[7]).multiplyScalar(ge.arrowWidth),De=this.tempVectors[8].addVectors(pe,Ee).add(he),Fe=this.tempVectors[9].subVectors(pe,Ee).add(he),Ue=this.tempVectors[10].subVectors(pe,Ee).sub(he),Qe=this.tempVectors[11].addVectors(pe,Ee).sub(he);this.addSheepCapSection(ne,De,_e,be,Qe),this.addSheepCapSection(ne,ve,Fe,Ue,Z)}},K.prototype.addSheepCapSection=function(Q,ne,ue,fe,ge){var ye=Q.verticesDone,pe=this.tempVectors[12].crossVectors(this.tempVectors[13].subVectors(ue,ne),this.tempVectors[14].subVectors(ge,ne)).normalize();Q.addVertex(ne,pe),Q.addVertex(ue,pe),Q.addVertex(fe,pe),Q.addVertex(ge,pe),Q.addTriangles(ye,ye+1,ye+2,ye+2,ye+3,ye)},K.prototype.findN3=function(Q,ne,ue){for(var fe=ne.startIndex[Q],ge=ne.endIndex[Q],ye=!1,pe=fe;pe<ge;pe++)if(ne.name[pe]==="N3"){ue.set(ne.x[pe],ne.y[pe],ne.z[pe]),ye=!0;break}return ye},K.prototype.hasP=function(Q,ne){for(var ue=ne.startIndex[Q],fe=ne.endIndex[Q],ge=ue;ge<fe;ge++)if(ne.name[ge]==="P")return!0;return!1},K.prototype.addStrandLine=function(Q,ne,ue,fe,ge){if(this.findN3(ge,fe,this.tempVectors[3])){var ye=this.tempVectors[0],pe=this.tempVectors[1],de,he=ue.vertex,_e=ue.normal,ve=ue.index,Z=ne.verticesDone,be=he.length,Ee=ve.length,De=ne.residueIndex*Q.linearSegmentCount+(.5*Q.linearSegmentCount+1|0),Fe=this.setVector(Q.controlPoints,De,this.tempVectors[2]),Ue=this.tempVectors[3].sub(Fe),Qe=Ue.length();for(Ue.normalize(),ne.translationMatrix.makeTranslation(Fe.x,Fe.y,Fe.z),ne.scaleMatrix.makeScale(1,1,Qe),ne.rotationMatrix.makeRotationAxis(new e.THREE.Vector3(-Ue.y,Ue.x,0),Math.acos(Ue.z)),ne.translationMatrix.multiply(ne.rotationMatrix).multiply(ne.scaleMatrix),ue.geometry.applyMatrix(ne.translationMatrix),de=0;de<be;de+=3)ye.set(he[de],he[de+1],he[de+2]),pe.set(_e[de],_e[de+1],_e[de+2]),ne.addVertex(ye,pe);for(de=0;de<Ee;de+=3)ne.addTriangle(Z+ve[de],Z+ve[de+1],Z+ve[de+2]);ne.invMatrix.getInverse(ne.translationMatrix),ue.geometry.applyMatrix(ne.invMatrix)}},K}();l.Builder=ie})(x=p.Geometry||(p.Geometry={}))})(d=s.Cartoons||(s.Cartoons={}))})(o=e.Molecule||(e.Molecule={}))})(r=i.Visualization||(i.Visualization={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){"use strict";var x;(function(_){_[_.Default=0]="Default",_[_.AlphaTrace=1]="AlphaTrace"})(x=p.CartoonsModelType||(p.CartoonsModelType={})),p.DefaultCartoonsModelParameters={tessalation:3,drawingType:x.Default,showDirectionCones:!0};var l=function(_){B(v,_);function v(){return _!==null&&_.apply(this,arguments)||this}return v.prototype.applySelectionInternal=function(c,h){for(var f=this.cartoons.vertexStateBuffer,m=f.array,b=this.cartoons.vertexMap,w=b.vertexRanges,C=!1,E=this.model.data.atoms.residueIndex,S=0,M=c.length;S<M;S++){var A=E[c[S]];for(S++;E[c[S]]===A;)S++;if(S--,!!b.elementMap.has(A)){var R=b.elementMap.get(A),D=b.elementRanges[2*R],N=b.elementRanges[2*R+1];if(D!==N)for(var I=D;I<N;I+=2){var L=w[I],Y=w[I+1];C=e.Selection.applyActionToRange(m,L,Y,h)||C}}}return C?(f.needsUpdate=!0,!0):!1},v.prototype.getPickElements=function(c){for(var h=this.model.data.residues,f=h.atomStartIndex,m=h.atomEndIndex,b=[],w=f[c],C=m[c];w<C;w++)this.queryContext.hasAtom(w)&&b.push(w);return b},v.prototype.highlightElement=function(c,h){return this.applySelection([this.model.data.residues.atomStartIndex[c]],h?3:4)},v.prototype.highlightInternal=function(c){return e.Selection.applyActionToBuffer(this.cartoons.vertexStateBuffer,c?3:4)},v.prototype.applyColoring=function(c){for(var h=this.model.data.residues,f=h.atomStartIndex,m=h.atomEndIndex,b={r:.1,g:.1,b:.1},w={r:.1,g:.1,b:.1},C=this.cartoons.vertexMap,E=this.cartoons.geometry.attributes.color,S=E.array,M=C.vertexRanges,A=0,R=this.model.data.residues.count;A<R;A++){w.r=0,w.g=0,w.b=0;for(var D=0,N=f[A],I=m[A];N<I;N++)this.queryContext.hasAtom(N)&&(c.setElementColor(N,b),w.r+=b.r,w.g+=b.g,w.b+=b.b,D++);if(D){b.r=w.r/D,b.g=w.g/D,b.b=w.b/D;var L=C.elementMap.get(A),Y=C.elementRanges[2*L],J=C.elementRanges[2*L+1];if(Y!==J)for(var ie=Y;ie<J;ie+=2)for(var K=M[ie],Q=M[ie+1],ne=K;ne<Q;ne++)S[ne*3]=b.r,S[ne*3+1]=b.g,S[ne*3+2]=b.b}}E.needsUpdate=!0},v.prototype.applyThemeInternal=function(c){this.applyColoring(c),e.MaterialsHelper.updateMaterial(this.material,c,this.object),e.MaterialsHelper.updateMaterial(this.gapMaterial,c,this.object),e.MaterialsHelper.updateMaterial(this.directionConeMaterial,c,this.object)},v.prototype.createObjects=function(){var c=new e.THREE.Object3D;return c.add(new e.THREE.Mesh(this.cartoons.geometry,this.material)),this.cartoons.gapsGeometry&&c.add(new e.THREE.Mesh(this.cartoons.gapsGeometry,this.gapMaterial)),this.cartoons.directionConesGeometry&&c.add(new e.THREE.Mesh(this.cartoons.directionConesGeometry,this.directionConeMaterial)),{main:c.children.length>1?c:c.children[0],pick:new e.THREE.Mesh(this.cartoons.pickGeometry,this.pickMaterial)}},v.create=function(c,h){var f=this,m=h.model,b=h.queryContext,w=h.atomIndices,C=h.theme,E=h.params,S=h.props;return i.Core.computation(function(M){return H(f,void 0,void 0,function(){var A,R,D,N,I;return q(this,function(L){switch(L.label){case 0:return A=0,R=0,[4,M.updateProgress("Computing cartoons...")];case 1:switch(L.sent(),E=i.Core.Utils.extend({},E,p.DefaultCartoonsModelParameters),E.tessalation){case 0:A=2,R=2;break;case 1:A=4,R=3;break;case 2:A=6,R=5;break;case 3:A=10,R=8;break;case 4:A=12,R=10;break;case 5:A=16,R=14;break;default:A=18,R=16;break}return[4,p.Geometry.create(m,w,A,{radialSegmentCount:R,tessalation:+E.tessalation,showDirectionCones:!!E.showDirectionCones},E.drawingType===x.AlphaTrace,M)];case 2:return D=L.sent(),N=new v,N.cartoons=D,N.queryContext=b,N.material=e.MaterialsHelper.getMeshMaterial(),N.gapMaterial=new e.THREE.MeshPhongMaterial({color:7829367,shading:e.THREE.FlatShading}),N.directionConeMaterial=new e.THREE.MeshPhongMaterial({color:10066329,shading:e.THREE.FlatShading}),N.pickMaterial=e.MaterialsHelper.getPickMaterial(),S&&(N.props=S),N.entity=c,N.cartoons.geometry.computeBoundingSphere(),N.centroid=N.cartoons.geometry.boundingSphere.center,N.radius=N.cartoons.geometry.boundingSphere.radius,I=N.createObjects(),N.object=I.main,N.pickObject=I.pick,N.pickBufferAttributes=[N.cartoons.pickGeometry.attributes.pColor],N.model=m,N.applyTheme(C),N.disposeList.push(N.cartoons,N.material,N.pickMaterial,N.gapMaterial,N.directionConeMaterial),[2,N]}})})})},v}(e.Model);p.Model=l})(d=s.Cartoons||(s.Cartoons={}))})(o=e.Molecule||(e.Molecule={}))})(r=i.Visualization||(i.Visualization={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){p.DefaultBondColor={r:.6,g:.6,b:.6},p.DefaultCartoonDirectionConeColor={r:.85,g:.85,b:.85},p.DefaultElementColor={r:.6,g:.6,b:.6},p.DefaultElementColorMap=i.Core.Utils.FastMap.create(),p.DefaultPallete=[],function(){for(var x=[["Ac",.43921,.67058,.98039],["Al",.74901,.65098,.65098],["Am",.32941,.36078,.94901],["Sb",.6196,.38823,.7098],["Ar",.50196,.8196,.89019],["As",.74117,.50196,.89019],["At",.45882,.3098,.27058],["Ba",0,.78823,0],["Bk",.54117,.3098,.89019],["Be",.76078,1,0],["Bi",.6196,.3098,.7098],["Bh",.87843,0,.2196],["B",1,.7098,.7098],["Br",.65098,.16078,.16078],["Cd",1,.85098,.56078],["Ca",.23921,1,0],["Cf",.63137,.21176,.83137],["C",.45,.45,.45],["Ce",1,1,.78039],["Cs",.34117,.09019,.56078],["Cl",.12156,.94117,.12156],["Cr",.54117,.6,.78039],["Co",.94117,.5647,.62745],["Cu",.78431,.50196,.2],["Cm",.47058,.36078,.89019],["D",.9,.9,.9],["Db",.8196,0,.3098],["Dy",.12156,1,.78039],["Es",.70196,.12156,.83137],["Er",0,.90196,.45882],["Eu",.38039,1,.78039],["Fm",.70196,.12156,.72941],["F",.70196,1,1],["Fr",.25882,0,.4],["Gd",.27058,1,.78039],["Ga",.76078,.56078,.56078],["Ge",.4,.56078,.56078],["Au",1,.8196,.13725],["Hf",.30196,.76078,1],["Hs",.90196,0,.18039],["He",.85098,1,1],["Ho",0,1,.61176],["H",.9,.9,.9],["In",.65098,.45882,.45098],["I",.58039,0,.58039],["Ir",.09019,.32941,.52941],["Fe",.698,.13,.13],["Kr",.36078,.72156,.8196],["La",.43921,.83137,1],["Lr",.78039,0,.4],["Pb",.34117,.34901,.38039],["Li",.8,.50196,1],["Lu",0,.67058,.14117],["Mg",.54117,1,0],["Mn",.61176,.47843,.78039],["Mt",.92156,0,.14901],["Md",.70196,.05098,.65098],["Hg",.72156,.72156,.81568],["Mo",.32941,.7098,.7098],["Nd",.78039,1,.78039],["Ne",.70196,.89019,.96078],["Np",0,.50196,1],["Ni",.31372,.81568,.31372],["Nb",.45098,.76078,.78823],["N",0,.5,1],["No",.74117,.05098,.52941],["Os",.14901,.4,.58823],["O",1,.3,.3],["Pd",0,.41176,.52156],["P",1,.50196,0],["Pt",.81568,.81568,.87843],["Pu",0,.4196,1],["Po",.67058,.36078,0],["K",.56078,.25098,.83137],["Pr",.85098,1,.78039],["Pm",.63921,1,.78039],["Pa",0,.63137,1],["Ra",0,.49019,0],["Rn",.25882,.5098,.58823],["Re",.14901,.49019,.67058],["Rh",.03921,.49019,.54901],["Rb",.43921,.18039,.69019],["Ru",.14117,.56078,.56078],["Rf",.8,0,.34901],["Sm",.56078,1,.78039],["Sc",.90196,.90196,.90196],["Sg",.85098,0,.27058],["Se",1,.63137,0],["Si",.94117,.78431,.62745],["Ag",.75294,.75294,.75294],["Na",.67058,.36078,.94901],["Sr",0,1,0],["S",.9,.775,.25],["Ta",.30196,.65098,1],["Tc",.23137,.6196,.6196],["Te",.83137,.47843,0],["Tb",.18823,1,.78039],["Tl",.65098,.32941,.30196],["Th",0,.72941,1],["Tm",0,.83137,.32156],["Sn",.4,.50196,.50196],["Ti",.74901,.76078,.78039],["W",.12941,.58039,.83921],["U",0,.56078,1],["V",.65098,.65098,.67058],["Xe",.25882,.6196,.69019],["Yb",0,.74901,.2196],["Y",.58039,1,1],["Zn",.49019,.50196,.69019],["Zr",.58039,.87843,.87843]],l=0,_=x;l<_.length;l++){var v=_[l],c=v[0],h={r:v[1],g:v[2],b:v[3]};p.DefaultElementColorMap.set(c,h),p.DefaultElementColorMap.set(c.toUpperCase(),h),p.DefaultElementColorMap.set(c.toLowerCase(),h),p.DefaultPallete.push(h)}}()})(d=s.Colors||(s.Colors={}))})(o=e.Molecule||(e.Molecule={}))})(r=i.Visualization||(i.Visualization={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";var d=i.Core.Geometry.LinearAlgebra;function p(w){var C=w.tessalation,E=C===void 0?0:C,S=new e.THREE.IcosahedronGeometry(1,E),M=e.GeometryHelper.toSurface(S);return S.dispose(),M}s.createSphereSurface=p;function x(w){var C=w.a,E=w.b,S=w.slices,M=S===void 0?12:S,A=new e.THREE.TubeGeometry(new e.THREE.LineCurve3(new e.THREE.Vector3(C[0],C[1],C[2]),new e.THREE.Vector3(E[0],E[1],E[2])),2,w.radius,M),R=e.GeometryHelper.toSurface(A);return A.dispose(),R}s.createTubeSurface=x;var l=[0,1,0],_=d.Matrix4.zero(),v=d.Matrix4.zero(),c=d.Matrix4.zero();function h(w){var C=w.a,E=w.b,S=w.radius,M=w.slices,A=M===void 0?12:M,R=d.Vector3.distance(C,E),D=new e.THREE.CylinderGeometry(0,S,R,A,1),N=e.GeometryHelper.toSurface(D);D.dispose();var I=d.Vector3.sub(E,E,C);return d.Vector3.makeRotation(_,l,I),d.Matrix4.fromTranslation(c,[0,R/2,0]),d.Matrix4.fromTranslation(v,C),i.Core.Geometry.Surface.transformImmediate(N,d.Matrix4.mul3(v,v,_,c)),i.Core.Geometry.Surface.computeNormalsImmediate(N),N}s.createCone=h;function f(w){var C=w.id,E=w.a,S=w.b,M=w.radius,A=w.slices,R=A===void 0?12:A,D=w.coneHeight,N=w.coneRadius,I=d.Vector3.distance(E,S),L=I-D,Y=d.Vector3.normalize(S,d.Vector3.sub(S,S,E)),J=[E[0]+L*Y[0],E[1]+L*Y[1],E[2]+L*Y[2]];return[{type:"Cone",a:J,b:S,id:C,radius:N,slices:R},{type:"Tube",a:E,b:J,id:C,radius:M,slices:R}]}s.createArrow=f;var m=function(){for(var w=e.GeometryHelper.toSurface(new e.THREE.BoxGeometry(1,1,1)),C=0;C<w.vertices.length;C+=3)w.vertices[C+2]+=.5;return w}();function b(w){var C=w.id,E=w.a,S=w.b,M=w.width,A=w.dashSize,R=w.spaceSize,D=d.Vector3.distance(E,S);if(D===0)return[];var N=A+(R!==void 0?R:A),I=d.Vector3.sub(d.Vector3(),S,E);d.Vector3.normalize(I,I);var L=d.Vector3.fromValues(M,M,A),Y=d.Vector3.fromValues(0,0,1),J=d.Vector3.makeRotation(d.Matrix4(),Y,I),ie=[];d.Vector3.scale(I,I,N);for(var K=d.Vector3.copy(d.Vector3(),E),Q=0;Q<D;Q+=N)Q+A>D&&(L=d.Vector3.fromValues(M,M,D-Q)),ie.push({type:"Surface",id:C,surface:m,rotation:J,scale:L,translation:d.Vector3.clone(K)}),d.Vector3.add(K,K,I);return ie}s.createDashes=b})(o=e.Primitive||(e.Primitive={}))})(r=i.Visualization||(i.Visualization={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";var d=i.Core.Geometry.LinearAlgebra,p=i.Core.Geometry.Surface;function x(_){var v=this;return i.Core.computation(function(c){return H(v,void 0,void 0,function(){var h,f,m,b,de,w,C,E,S,M,de,A,R,D,N,I,L,Y,J,ie,K,Q,ne,ue,fe,ge,ye,pe,de,he,_e,be,Ee,ve,be,Ee,be,Ee,ve,be,Ee,be,Ee,ve,be,Ee,be,Ee,ve,be,Ee,Z,be,Ee,be,Ee,De;return q(this,function(Fe){switch(Fe.label){case 0:return[4,c.updateProgress("Building surface...")];case 1:for(Fe.sent(),h=i.Core.Utils.FastMap.create(),f=[],m=0,b=_;m<b.length;m++)switch(de=b[m],de.type){case"Sphere":h.has(de.tessalation||0)?f.push(h.get(de.tessalation||0)):(w=s.createSphereSurface(de),h.set(de.tessalation||0,w),f.push(w));break;case"Tube":{C=s.createTubeSurface(de),f.push(C);break}case"Cone":{f.push(s.createCone(de));break}case"Surface":{f.push(de.surface);break}}for(E={vertexCount:0,triangleCount:0},S=0,M=f;S<M.length;S++)de=M[S],E.vertexCount+=de.vertexCount,E.triangleCount+=de.triangleCount;for(A=new Float32Array(E.vertexCount*3),R=new Float32Array(E.vertexCount*3),D=new Uint32Array(E.triangleCount*3),N=new Int32Array(E.vertexCount),I=0,L=0,Y=0,J=0,ie=d.Vector3.zero(),K=d.Matrix4.zero(),Q=d.Matrix4.zero(),ne=d.Matrix4.zero(),ue=d.Matrix4.zero(),ge=0,ye=0,pe=_;ye<pe.length;ye++){switch(de=pe[ye],he=f[ge++],_e=I/3|0,de.type){case"Sphere":{for(fe=he.vertices,d.Matrix4.fromScaling(K,[de.radius,de.radius,de.radius]),d.Matrix4.fromTranslation(Q,de.center),d.Matrix4.mul(ue,Q,K),be=0,Ee=he.vertexCount*3;be<Ee;be+=3)ie[0]=fe[be],ie[1]=fe[be+1],ie[2]=fe[be+2],d.Vector3.transformMat4(ie,ie,ue),A[I++]=ie[0],A[I++]=ie[1],A[I++]=ie[2];for(ve=he.normals,be=0,Ee=ve.length;be<Ee;be++)R[L++]=ve[be];break}case"Tube":case"Cone":{for(fe=he.vertices,be=0,Ee=fe.length;be<Ee;be++)A[I++]=fe[be];for(ve=he.normals,be=0,Ee=ve.length;be<Ee;be++)R[L++]=ve[be];break}case"Surface":{if(he.normals||p.computeNormalsImmediate(he),fe=he.vertices,de.rotation||de.scale||de.translation){for(d.Matrix4.fromScaling(K,de.scale||[1,1,1]),d.Matrix4.fromTranslation(Q,de.translation||[0,0,0]),de.rotation?d.Matrix4.copy(ne,de.rotation):d.Matrix4.fromIdentity(ne),d.Matrix4.mul3(ue,Q,ne,K),be=0,Ee=fe.length;be<Ee;be+=3)ie[0]=fe[be],ie[1]=fe[be+1],ie[2]=fe[be+2],d.Vector3.transformMat4(ie,ie,ue),A[I++]=ie[0],A[I++]=ie[1],A[I++]=ie[2];for(d.Matrix4.mul(ue,ne,K),ve=he.normals,be=0,Ee=ve.length;be<Ee;be+=3)ie[0]=ve[be],ie[1]=ve[be+1],ie[2]=ve[be+2],d.Vector3.transformMat4(ie,ie,ue),d.Vector3.normalize(ie,ie),R[L++]=ie[0],R[L++]=ie[1],R[L++]=ie[2]}else{for(be=0,Ee=fe.length;be<Ee;be++)A[I++]=fe[be];for(ve=he.normals,be=0,Ee=ve.length;be<Ee;be++)R[L++]=ve[be]}break}}for(Z=he.triangleIndices,be=0,Ee=Z.length;be<Ee;be++)D[Y++]=_e+Z[be];for(be=0,Ee=he.vertexCount;be<Ee;be++)N[J++]=de.id}return De={vertices:A,vertexCount:E.vertexCount,triangleIndices:D,triangleCount:E.triangleCount,normals:R,annotation:N},[2,De]}})})})}var l=function(){function _(){this.shapes=[]}return _.prototype.add=function(v){return this.shapes.push(v),this},_.prototype.buildSurface=function(){for(var v=!1,c=0,h=this.shapes;c<h.length;c++){var f=h[c];if(f.type==="DashedLine"||f.type==="Arrow"){v=!0;break}}if(v){for(var m=[],b=0,w=this.shapes;b<w.length;b++){var f=w[b];if(f.type==="DashedLine")for(var C=0,E=s.createDashes(f);C<E.length;C++){var S=E[C];m[m.length]=S}else if(f.type==="Arrow")for(var M=0,A=s.createArrow(f);M<A.length;M++){var R=A[M];m[m.length]=R}else m[m.length]=f}return x(m)}return x(this.shapes)},_.create=function(){return new _},_}();s.Builder=l})(o=e.Primitive||(e.Primitive={}))})(r=i.Visualization||(i.Visualization={}))})(U||(U={}));var U;(function(i){var r;(function(e){e.VERSION={number:"1.4.4",date:"May 31 2018"}})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){"use strict";e.Immutable=V,e.Rx=i.Core.Rx,e.Zlib=G})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";var d;(function(p){function x(c,h){return{previous:null,next:null,inList:!1,key:c,data:h}}p.entry=x;function l(c){return{entries:new s.LinkedList,capacity:Math.max(1,c)}}p.create=l;function _(c,h){for(var f=c.entries.first;f;f=f.next)if(f.key===h)return c.entries.remove(f),c.entries.addLast(f),f.data}p.get=_;function v(c,h,f){return c.entries.count>=c.capacity&&c.entries.remove(c.entries.first),c.entries.addLast(x(h,f)),f}p.set=v})(d=s.LRUCache||(s.LRUCache={}))})(o=e.Utils||(e.Utils={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";var d;(function(S){S[S.None=0]="None",S[S.Gzip=1]="Gzip"})(d=s.DataCompressionMethod||(s.DataCompressionMethod={}));function p(S){return b(S,!1)}s.readStringFromFile=p;function x(S){return b(S,!0)}s.readArrayBufferFromFile=x;function l(S,M){return b(S,M==="Binary")}s.readFromFile=l;function _(S,M){return E(M,S,!1,!1)}s.ajaxGetString=_;function v(S,M){return E(M,S,!0,!1)}s.ajaxGetArrayBuffer=v;function c(S){return E(S.title,S.url,S.type==="Binary",S.compression===d.Gzip)}s.ajaxGet=c;function h(S){var M=new G.Gunzip(new Uint8Array(S));return M.decompress()}function f(S,M,A,R){return H(this,void 0,void 0,function(){var D,N;return q(this,function(I){switch(I.label){case 0:return D=R.target.result,A?[4,S.updateProgress("Decompressing...")]:[3,2];case 1:return I.sent(),N=h(D),M?[2,N.buffer]:[2,i.Core.Formats.CIF.Binary.MessagePack.utf8Read(N,0,N.length)];case 2:return[2,D];case 3:return[2]}})})}function m(S,M,A,R){return new i.Promise(function(D,N){A.onerror=function(I){var L=I.target.error;N(L||"Failed.")},A.onabort=function(){return N(i.Core.Computation.Aborted)},A.onprogress=function(I){I.lengthComputable?S.updateProgress(M,!0,I.loaded,I.total):S.updateProgress(M+" "+(I.loaded/1024/1024).toFixed(2)+" MB",!0)},A.onload=function(I){return D(I)}})}function b(S,M){var A=this;return e.Task.fromComputation("Open File","Background",i.Core.computation(function(R){return H(A,void 0,void 0,function(){var D,N,I,L;return q(this,function(Y){switch(Y.label){case 0:return D=new FileReader,N=/\.gz$/i.test(S.name),N||M?D.readAsArrayBuffer(S):D.readAsBinaryString(S),R.updateProgress("Opening file...",function(){return D.abort()}),[4,m(R,"Reading...",D,M)];case 1:return I=Y.sent(),L=f(R,M,N,I),[2,L]}})})}))}var w=function(){function S(){}return S.get=function(){return this.pool.length?this.pool.pop():new XMLHttpRequest},S.emptyFunc=function(){},S.deposit=function(M){this.pool.length<this.poolSize&&(M.onabort=S.emptyFunc,M.onerror=S.emptyFunc,M.onload=S.emptyFunc,M.onprogress=S.emptyFunc,this.pool.push(M))},S.pool=[],S.poolSize=15,S}();function C(S,M,A,R){return H(this,void 0,void 0,function(){var D,N,I,L,Y,J;return q(this,function(ie){switch(ie.label){case 0:return D=R.target,D.status>=200&&D.status<400?M?(N=R.target.response,w.deposit(R.target),A?[4,S.updateProgress("Decompressing...")]:[3,2]):[3,4]:[3,6];case 1:return ie.sent(),I=new G.Gunzip(new Uint8Array(N)),L=I.decompress(),[2,L.buffer];case 2:return[2,N];case 3:return[3,5];case 4:return Y=R.target.responseText,w.deposit(R.target),[2,Y];case 5:return[3,7];case 6:throw J=D.statusText,w.deposit(R.target),J;case 7:return[2]}})})}function E(S,M,A,R){var D=this;return e.Task.fromComputation(S||"Download","Background",i.Core.computation(function(N){return H(D,void 0,void 0,function(){var I,L,Y;return q(this,function(J){switch(J.label){case 0:if(!A&&R)throw"Decompress is only available when downloading binary data.";return I=w.get(),I.open("get",M,!0),I.responseType=A?"arraybuffer":"text",I.send(),N.updateProgress("Waiting for server...",function(){return I.abort()}),[4,m(N,"Downloading...",I,A)];case 1:return L=J.sent(),[4,C(N,A,R,L)];case 2:return Y=J.sent(),[2,Y]}})})}))}})(o=e.Utils||(e.Utils={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){"use strict";var x=/^\s*([1-9][0-9]*)\s+([_.;:""&<>()/\{}'`~!@#$%A-Za-z0-9*|+-]+)(?:\s+i[:]([.]|[a-zA-Z0-9]))?(?:\s+e[:]([.]|[a-zA-Z0-9]+))?/;function l(c){return!c||c==="."||c==="?"?null:c}function _(c){var h=c.match(x);if(h){var f=+h[1]|0,m=l(h[2]),b=l(h[3]),w=l(h[4]);return{entityId:w,authSeqNumber:f,authAsymId:m,insCode:b}}}function v(c,h){h===void 0&&(h=",");var f,m=c.split(h).map(function(b){return _(b)}).filter(function(b){return!!b});return i.Core.Structure.Query.Builder.toQuery((f=i.Core.Structure.Query).residues.apply(f,m))}p.parseAuthResidueId=v})(d=s.Query||(s.Query={}))})(o=e.Utils||(e.Utils={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){"use strict";var x=function(){function l(_,v,c){this.isError=_,this.value=v,this.error=c}return l.prototype.bind=function(_){return this.isError?this:_(this.value)},l}();p.ValueOrError=x,function(l){function _(c){return new l(!0,void 0,c)}l.error=_;function v(c){return new l(!0,c)}l.value=v}(x=p.ValueOrError||(p.ValueOrError={}))})(d=s.Query||(s.Query={}))})(o=e.Utils||(e.Utils={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";var d=function(){function p(){this.count=0,this.first=null,this.last=null}return p.prototype.addFirst=function(x){x.inList=!0,this.first&&(this.first.previous=x),x.next=this.first,this.first=x,this.count++},p.prototype.addLast=function(x){this.last!=null&&(this.last.next=x),x.previous=this.last,this.last=x,this.first==null&&(this.first=x),x.inList=!0,this.count++},p.prototype.remove=function(x){x.inList&&(x.inList=!1,x.previous!==null?x.previous.next=x.next:x.previous===null&&(this.first=x.next),x.next!==null?x.next.previous=x.previous:x.next===null&&(this.last=x.previous),x.next=null,x.previous=null,this.count--)},p}();s.LinkedList=d})(o=e.Utils||(e.Utils={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";function d(v){return(v<10?"0":"")+v}function p(v){var c=v.getHours(),h=v.getMinutes(),f=v.getSeconds();return c+":"+d(h)+":"+d(f)}s.formatTime=p;function x(v,c){var h=Math.pow(10,c);return Math.round(h*v)/h}s.round=x;function l(v){if(v.isIndeterminate)return v.message;var c=(100*v.current/v.max).toFixed(2);return v.message+" "+c+"%"}s.formatProgress=l;function _(){var v=new Date().getTime();window.performance&&typeof window.performance.now=="function"&&(v+=performance.now());var c="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(h){var f=(v+Math.random()*16)%16|0;return v=Math.floor(v/16),(h=="x"?f:f&3|8).toString(16)});return c}s.generateUUID=_})(o=e.Utils||(e.Utils={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";var d=void 0;function p(l){return d||(d=x()),function(_,v){return function(c){var h=v.get(_[c]);return h!==void 0?h:1}}(l.data.atoms.elementSymbol,d)}s.vdwRadiusFromElementSymbol=p;function x(){var l={H:1.1,He:1.4,Li:1.81,Be:1.53,B:1.92,C:1.7,N:1.55,O:1.52,F:1.47,Ne:1.54,Na:2.27,Mg:1.73,Al:1.84,Si:2.1,P:1.8,S:1.8,Cl:1.75,Ar:1.88,K:2.75,Ca:2.31,Sc:2.16,Ti:1.87,V:1.79,Cr:1.89,Mn:1.97,Fe:1.94,Co:1.92,Ni:1.84,Cu:1.86,Zn:2.1,Ga:1.87,Ge:2.11,As:1.85,Se:1.9,Br:1.83,Kr:2.02,Rb:3.03,Sr:2.49,Y:2.19,Zr:1.86,Nb:2.07,Mo:2.09,Tc:2.09,Ru:2.07,Rh:1.95,Pd:2.02,Ag:2.03,Cd:2.3,In:1.93,Sn:2.17,Sb:2.06,Te:2.06,I:1.98,Xe:2.16,Cs:3.43,Ba:2.68,La:2.4,Ce:2.35,Pr:2.39,Nd:2.29,Pm:2.36,Sm:2.29,Eu:2.33,Gd:2.37,Tb:2.21,Dy:2.29,Ho:2.16,Er:2.35,Tm:2.27,Yb:2.42,Lu:2.21,Hf:2.12,Ta:2.17,W:2.1,Re:2.17,Os:2.16,Ir:2.02,Pt:2.09,Au:2.17,Hg:2.09,Tl:1.96,Pb:2.02,Bi:2.07,Po:1.97,At:2.02,Rn:2.2,Fr:3.48,Ra:2.83,Ac:2.6,Th:2.37,Pa:2.43,U:2.4,Np:2.21,Pu:2.43,Am:2.44,Cm:2.45,Bk:2.44,Cf:2.45,Es:2.45,Fm:2.45,Md:2.46,No:2.46,Lr:2.46},_=i.Core.Utils.FastMap.create();for(var v in l)_.set(v,l[v]),_.set(v.toUpperCase(),l[v]),_.set(v.toLowerCase(),l[v]);return _}})(o=e.Utils||(e.Utils={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";var d=Object.prototype.hasOwnProperty;function p(h){return i.Core.Utils.extend({},h)}s.shallowClone=p;function x(h,f){if(!h)return!f;if(!f)return!1;var m=Object.keys(h);if(Object.keys(f).length!==m.length)return!1;for(var b=0,w=m;b<w.length;b++){var C=w[b];if(!d.call(h,C)||h[C]!==f[C])return!1}return!0}s.shallowEqual=x;function l(h,f){if(!h)return!f;if(!f)return!1;var m=Object.keys(h);if(Object.keys(f).length!==m.length)return!1;for(var b=0,w=m;b<w.length;b++){var C=w[b];if(!d.call(h,C))return!1;var E=h[C],S=f[C];if(typeof E=="object"&&typeof S=="object"){if(!l(E,S))return!1}else if(E!==S)return!1}return!0}s.deepEqual=l;function _(h){for(var f=1;f<arguments.length;f++)for(var m=arguments[f],b=0,w=Object.keys(m);b<w.length;b++){var C=w[b];d.call(m,C)&&(h[C]=m[C])}return h}s.assign=Object.assign||_;function v(h,f){for(var m=!1,b=0,w=Object.keys(f);b<w.length;b++){var C=w[b];if(d.call(f,C)&&f[C]!==h[C]){m=!0;break}}return m?s.assign(p(h),f):h}function c(h){for(var f=h,m=1;m<arguments.length;m++)if(arguments[m]&&(f=v(h,arguments[m]),f!==h)){for(var b=m+1;b<arguments.length;b++)f=s.assign(f,arguments[b]);break}return f}s.merge=c})(o=e.Utils||(e.Utils={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";var d=function(){function p(){this.LOG_DISPATCH_STREAM=!1,this.lanes=[];for(var x=0;x<=p.Lane.Task;x++)this.lanes.push(new e.Rx.Subject)}return p.prototype.dispatch=function(x){this.LOG_DISPATCH_STREAM&&console.log(x.type.name,p.Lane[x.type.lane],x.data),this.lanes[x.type.lane].onNext(x)},p.prototype.schedule=function(x,l,_){return _===void 0&&(_=32.25806451612903),setTimeout(function(){if(l)try{x.call(null)}catch(v){l.call(null,""+v)}else x.call(null)},_)},p.prototype.getStream=function(x){return this.lanes[x.lane].filter(function(l){return l.type===x})},p.prototype.finished=function(){this.lanes.forEach(function(x){return x.onCompleted()})},p}();s.Dispatcher=d,function(p){var x;(function(l){l[l.Slow=0]="Slow",l[l.Fast=1]="Fast",l[l.Log=2]="Log",l[l.Busy=3]="Busy",l[l.Transformer=4]="Transformer",l[l.Task=5]="Task"})(x=p.Lane||(p.Lane={}))}(d=s.Dispatcher||(s.Dispatcher={}))})(o=e.Service||(e.Service={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";var d=function(){function p(x){this.context=x}return p.prototype.log=function(x){e.Event.Log.dispatch(this.context,x)},p.prototype.message=function(x){this.log({type:p.EntryType.Message,timestamp:new Date,message:x})},p.prototype.error=function(x){this.log({type:p.EntryType.Error,timestamp:new Date,message:x})},p.prototype.warning=function(x){this.log({type:p.EntryType.Warning,timestamp:new Date,message:x})},p.prototype.info=function(x){this.log({type:p.EntryType.Info,timestamp:new Date,message:x})},p}();s.Logger=d,function(p){var x;(function(l){l[l.Message=0]="Message",l[l.Error=1]="Error",l[l.Warning=2]="Warning",l[l.Info=3]="Info"})(x=p.EntryType||(p.EntryType={}))}(d=s.Logger||(s.Logger={}))})(o=e.Service||(e.Service={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict"})(o=e.Service||(e.Service={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){"use strict";var o=i.Core.Computation,s=function(){function p(x,l,_){this.name=x,this.type=l,this.computation=_,this.info={id:d++,name:x,type:l,reportTime:!1}}return Object.defineProperty(p.prototype,"id",{get:function(){return this.info.id},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"reportTime",{get:function(){return this.info.reportTime},enumerable:!0,configurable:!0}),p.prototype.run=function(x){return this.runWithContext(x).result},p.prototype.runWithContext=function(x){return new p.Running(x,this.computation,this.info)},p.prototype.setReportTime=function(x){return this.info.reportTime=x,this},p}();e.Task=s;var d=0;(function(p){p.__DEBUG_MODE__=!1;var x=function(){function f(m,b,w){this.context=m,this.computation=b,this.info=w,this.run()}return f.prototype.tryAbort=function(){this.computationCtx.requestAbort()},f.prototype.progressUpdated=function(m){e.Event.Task.StateUpdated.dispatch(this.context,{taskId:this.info.id,type:this.info.type,name:this.info.name,message:e.Utils.formatProgress(m),abort:m.requestAbort})},f.prototype.resolved=function(){try{if(this.context.performance.end("task"+this.info.id),this.info.reportTime){var m=this.context.performance.time("task"+this.info.id);this.info.type!=="Silent"&&this.context.logger.info(this.info.name+" finished in "+i.Core.Utils.PerformanceMonitor.format(m)+".")}}finally{e.Event.Task.Completed.dispatch(this.context,this.info.id)}},f.prototype.rejected=function(m){this.context.performance.end("task"+this.info.id),this.context.performance.formatTime("task"+this.info.id),p.__DEBUG_MODE__&&console.error(m);try{if(this.info.type==="Silent")m.warn?this.context.logger.warning("Warning ("+this.info.name+"): "+m.message):console.error("Error ("+this.info.name+")",m);else if(m.warn)this.context.logger.warning("Warning ("+this.info.name+"): "+m.message);else{var b=""+m;b.indexOf("Aborted")>=0?this.context.logger.info(this.info.name+": Aborted."):this.context.logger.error("Error ("+this.info.name+"): "+m)}}catch(w){console.error(w)}finally{e.Event.Task.Completed.dispatch(this.context,this.info.id)}},f.prototype.run=function(){var m=this;this.computationCtx=o.createContext(),this.computationCtx.progress.subscribe(function(b){return m.progressUpdated(b)}),e.Event.Task.Started.dispatch(this.context,this.info),this.context.performance.start("task"+this.info.id),this.result=this.computation.run(this.computationCtx),this.result.then(function(){return m.resolved()}).catch(function(b){return m.rejected(b)})},f}();p.Running=x;function l(f,m,b){return new p(f,m,i.Core.computation(b))}p.create=l;function _(f,m,b){return new p(f,m,o.resolve(b))}p.resolve=_;function v(f,m,b){return new p(f,m,o.reject(b))}p.reject=v;function c(f,m,b){return new p(f,m,b)}p.fromComputation=c;function h(f){return f.then&&f.catch}p.isPromise=h})(s=e.Task||(e.Task={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){"use strict";var o;(function(s){var d={dispatch:function(x,l){x.dispatcher.dispatch({type:this,data:l})},getStream:function(x){return x.dispatcher.getStream(this)}};function p(x,l){return Object.create(d,{name:{writable:!1,configurable:!1,value:x},lane:{writable:!1,configurable:!1,value:l}})}s.create=p})(o=e.Event||(e.Event={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";var d=e.Service.Dispatcher.Lane;s.Log=s.create("bs.Log",d.Log);var p;(function(f){f.LayoutChanged=s.create("bs.Common.LayoutChanged",d.Slow),f.ComponentsChanged=s.create("bs.Common.ComponentsChanged",d.Slow)})(p=s.Common||(s.Common={}));var x;(function(f){f.Started=s.create("bs.Tasks.Started",d.Task),f.Completed=s.create("bs.Tasks.Completed",d.Task),f.StateUpdated=s.create("bs.Tasks.StateUpdated",d.Busy)})(x=s.Task||(s.Task={}));var l;(function(f){f.NodeUpdated=s.create("bs.Tree.NodeUpdated",d.Slow),f.NodeAdded=s.create("bs.Tree.NodeAdded",d.Slow),f.NodeRemoved=s.create("bs.Tree.NodeRemoved",d.Slow),f.TransformStarted=s.create("bs.Tree.TransformStarted",d.Slow),f.TransformFinished=s.create("bs.Tree.TransformFinished",d.Slow),f.TransformerApply=s.create("bs.Tree.TransformerApplied",d.Transformer)})(l=s.Tree||(s.Tree={}));var _;(function(f){f.CurrentChanged=s.create("bs.Entity.CurrentChanged",d.Slow)})(_=s.Entity||(s.Entity={}));var v;(function(f){f.Highlight=s.create("bs.Visuals.HoverElement",d.Fast)})(v=s.Interactivity||(s.Interactivity={}));var c;(function(f){f.VisualHoverElement=s.create("bs.Visual.HoverElement",d.Fast),f.VisualSelectElement=s.create("bs.Visual.SelectElement",d.Fast),f.CameraChanged=s.create("bs.Visual.CameraChanged",d.Fast)})(c=s.Visual||(s.Visual={}));var h;(function(f){f.ModelHighlight=s.create("bs.Molecule.ModelHighlight",d.Fast),f.ModelSelect=s.create("bs.Molecule.ModelSelect",d.Fast)})(h=s.Molecule||(s.Molecule={}))})(o=e.Event||(e.Event={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";var d=e.Service.Dispatcher.Lane,p=e.Event.create,x;(function(f){f.RemoveNode=p("bs.cmd.Tree.RemoveNode",d.Slow),f.ApplyTransform=p("bs.cmd.Tree.ApplyTransform",d.Slow)})(x=s.Tree||(s.Tree={}));var l;(function(f){f.SetCurrent=p("bs.cmd.Entity.SetCurrentNode",d.Slow),f.ToggleExpanded=p("bs.cmd.Entity.ToggleExpanded",d.Slow),f.SetVisibility=p("bs.cmd.Entity.SetVisibility",d.Slow),f.Focus=p("bs.cmd.Entity.Focus",d.Slow),f.Highlight=p("bs.cmd.Entity.Highlight",d.Slow)})(l=s.Entity||(s.Entity={}));var _;(function(f){f.SetState=i.Bootstrap.Event.create("lm.cmd.Layout.SetState",d.Slow),f.SetViewportOptions=p("bs.cmd.Layout.SetViewportOptions",d.Slow)})(_=s.Layout||(s.Layout={}));var v;(function(f){f.FocusQuery=p("bs.cmd.Molecule.FocusQuery",d.Slow),f.Highlight=p("bs.cmd.Molecule.Highlight",d.Slow),f.CreateSelectInteraction=p("bs.cmd.Molecule.CreateSelectInteraction",d.Slow)})(v=s.Molecule||(s.Molecule={}));var c;(function(f){f.ResetScene=p("bs.cmd.Visual.ResetScene",d.Slow),f.ResetTheme=p("bs.cmd.Visual.ResetTheme",d.Slow),f.UpdateBasicTheme=p("bs.cmd.Visual.UpdateBasicTheme",d.Slow)})(c=s.Visual||(s.Visual={}));var h;(function(f){f.Show=p("bs.cmd.Toast.Show",d.Slow),f.Hide=p("bs.cmd.Toast.Hide",d.Slow)})(h=s.Toast||(s.Toast={}))})(o=e.Command||(e.Command={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){"use strict";var o;(function(s){function d(w,C){var E={version:0,refs:i.Core.Utils.FastMap.create(),nodes:i.Core.Utils.FastSet.create(),root:C,context:w};return C.parent=C,C.tree=E,E}s.create=d;function p(w){if(w.tree){var C=w.tree.refs.get(w.ref);C?C.push(w):w.tree.refs.set(w.ref,[w])}}function x(w){s.Node.forEach(w,function(C){return p(C)})}function l(w,C){var E=w.refs.get(C.ref);if(E){var S=E.indexOf(C);S<0||(E[S]=E[E.length-1],E.pop(),E.length||w.refs.delete(C.ref))}}function _(w){if(!w.parent)throw"Cannot add a node without a parent.";var C=w.parent.tree;s.Node.forEach(w,function(E){return E.tree=C}),s.Node.addChild(w.parent,w),x(w),e.Entity.nodeUpdated(w.parent),v(w)}s.add=_;function v(w){var C=w.tree.context;s.Node.forEachPreorder(w,function(E){e.Event.Tree.NodeAdded.dispatch(C,E)})}function c(w,C,E){s.Node.replaceChild(C.parent,C,E),m(w.context,C),s.Node.forEach(E,function(R){return R.tree=w}),x(E);for(var S=0,M=E.children;S<M.length;S++){var A=M[S];v(A)}e.Entity.nodeUpdated(E.parent),e.Event.Tree.NodeAdded.dispatch(w.context,E),w.context.currentEntity===C&&e.Entity.setCurrent(E)}s.update=c;function h(w){if(w){for(var C=void 0;w!==w.parent;)C=w,s.Node.update(w),w=w.parent;C&&e.Event.Tree.NodeUpdated.dispatch(w.tree.context,C)}}s.updatePath=h;function f(w){var C=w.root.children;w.root.children=[],s.Node.update(w.root),e.Entity.nodeUpdated(w.root),w.refs.clear();for(var E=0,S=C;E<S.length;E++){var M=S[E];m(w.context,M)}e.Command.Entity.SetCurrent.dispatch(w.context,w.root)}function m(w,C){var E=w.currentEntity,S=!1;return s.Node.forEach(C,function(M){l(w.tree,M),e.Event.Tree.NodeRemoved.dispatch(w,M),M.tree=void 0,M===E&&(S=!0)}),S}function b(w){if(!(!w||!w.tree)){if(w.parent===w){f(w.tree);return}var C=s.Node.isHidden(w),E=w.index,S=w.parent,M=w.tree.context;s.Node.removeChild(S,w),e.Entity.nodeUpdated(S);var A=m(M,w);if(A&&!C){for(var R=!1,D=E;D>=0;D--)if(S.children[D]&&!s.Node.isHidden(S.children[D])){e.Command.Entity.SetCurrent.dispatch(M,S.children[D]),R=!0;break}R||e.Command.Entity.SetCurrent.dispatch(M,S)}w.transform.props.isBinding&&!S.children.length&&b(w.parent)}}s.remove=b})(o=e.Tree||(e.Tree={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";var d;(function(p){p.Null={};function x(D,N){return D&&D.type===N}p.is=x;function l(D,N){if(!N)return!1;for(;;){if(D===N)return!0;if(D=D.parent,!D||D===D.parent)return!1}}p.hasAncestor=l;function _(D,N){if(D)for(var I=D.parent;;){if(x(I,N))return I;if(I=I.parent,I.parent===I)return}}p.findAncestor=_;function v(D,N){if(D)for(var I=D;;){if(N.indexOf(I.type)>=0)return I;if(I=I.parent,I.parent===I)return N.indexOf(I.type)>=0?I:void 0}}p.findClosestNodeOfType=v;var c=0;function h(){return c++}p.createId=h;function f(D){return D.version++,D}p.update=f;function m(D,N){var I=e.Utils.merge(D.props,N);return I===D.props?D:f(D)}p.withProps=m;function b(D,N){var I=e.Utils.merge(D.state,N);return I===D.state?D:(D.state=I,f(D))}p.withState=b;function w(D,N){return N.index=D.children.length,D.children.push(N),f(D)}p.addChild=w;function C(D,N){for(var I=D.children,L=N.index,Y=I.length-1;L<Y;L++){var J=I[L+1];J.index--,I[L]=J}return I.pop(),f(D)}p.removeChild=C;function E(D,N,I){return I?(I.index=N.index,D.children[I.index]=I,f(D)):C(D,N)}p.replaceChild=E;function S(D,N){for(var I=0,L=D.children;I<L.length;I++){var Y=L[I];S(Y,N)}N(D)}p.forEach=S;function M(D,N){N(D);for(var I=0,L=D.children;I<L.length;I++){var Y=L[I];S(Y,N)}}p.forEachPreorder=M;function A(D){var N=[];return S(D,function(I){return N.push(I)}),N}p.collect=A;function R(D){if(D.isHidden)return!0;var N=D.parent;if(!N)return D.isHidden;for(;N.parent!==N;){if(N.isHidden)return!0;if(N=N.parent,!N)return!1}return!1}p.isHidden=R})(d=s.Node||(s.Node={}))})(o=e.Tree||(e.Tree={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";var d;(function(p){function x(Y,J){return l(Y)(J)}p.select=x;function l(Y){var J=Y||p.root(),ie;return v(J)?ie=J.compile():_(J)?ie=p.byValue(J).compile():c(J)?ie=J:ie=p.byRef(J).compile(),ie}p.compile=l;function _(Y){return Y.ref!==void 0}function v(Y){return Y.compile!==void 0}function c(Y){return typeof Y=="function"}var h;(function(Y){Y.BuilderPrototype={};function J(ie,K){Y.BuilderPrototype[ie]=function(){for(var Q=[],ne=0;ne<arguments.length;ne++)Q[ne]=arguments[ne];return K.call.apply(K,[void 0,this].concat(Q))}}Y.registerModifier=J})(h=p.Helpers||(p.Helpers={}));function f(Y){return Object.create(h.BuilderPrototype,{compile:{writable:!1,configurable:!1,value:Y}})}function m(){return f(function(){return function(Y){return[Y.root]}})}p.root=m;function b(){for(var Y=[],J=0;J<arguments.length;J++)Y[J]=arguments[J];return f(function(){return function(ie){for(var K=[],Q=0,ne=Y;Q<ne.length;Q++){var ue=ne[Q],fe=ie.refs.get(ue);if(fe)for(var ge=0,ye=fe;ge<ye.length;ge++){var pe=ye[ge];K.push(pe)}}return K}})}p.byRef=b;function w(){for(var Y=[],J=0;J<arguments.length;J++)Y[J]=arguments[J];return f(function(){return function(ie){return Y}})}p.byValue=w,h.registerModifier("flatMap",C);function C(Y,J){var ie=l(Y);return f(function(){return function(K){for(var Q=[],ne=0,ue=ie(K);ne<ue.length;ne++)for(var fe=ue[ne],ge=0,ye=J(fe);ge<ye.length;ge++){var pe=ye[ge];Q.push(pe)}return Q}})}p.flatMap=C,h.registerModifier("mapEntity",E);function E(Y,J){var ie=l(Y);return f(function(){return function(K){for(var Q=[],ne=0,ue=ie(K);ne<ue.length;ne++){var fe=ue[ne],ge=J(fe);ge&&Q.push(ge)}return Q}})}p.mapEntity=E,h.registerModifier("unique",S);function S(Y){var J=l(Y);return f(function(){return function(ie){for(var K=i.Core.Utils.FastSet.create(),Q=[],ne=0,ue=J(ie);ne<ue.length;ne++){var fe=ue[ne];K.has(fe.id)||(K.add(fe.id),Q.push(fe))}return Q}})}p.unique=S,h.registerModifier("first",M);function M(Y){var J=l(Y);return f(function(){return function(ie){return[J(ie)[0]]}})}p.first=M,h.registerModifier("filter",A);function A(Y,J){return C(Y,function(ie){return J(ie)?[ie]:[]})}p.filter=A,h.registerModifier("subtree",R);function R(Y){return C(Y,function(J){return s.Node.collect(J)})}p.subtree=R,h.registerModifier("children",D);function D(Y){return C(Y,function(J){return J.children})}p.children=D,h.registerModifier("ofType",N);function N(Y,J){return A(Y,function(ie){return ie.type===J})}p.ofType=N,h.registerModifier("ancestorOfType",I);function I(Y,J){return S(E(Y,function(ie){return s.Node.findAncestor(ie,J)}))}p.ancestorOfType=I,h.registerModifier("parent",L);function L(Y){return S(E(Y,function(J){return J.parent}))}p.parent=L})(d=s.Selection||(s.Selection={}))})(o=e.Tree||(e.Tree={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";var d;(function(p){var x=function(){function m(b,w,C){this.info=b,this.transform=w,this.updater=C}return m.prototype.getTarget=function(b){var w=this.info;return w.from.length?s.Node.findClosestNodeOfType(b,w.from):b},m.prototype.checkTypes=function(b,w){if(w.transformer!==this)return"The transform is calling an invalid transformer (got "+w.transformer.info.name+", expected "+this.info.name+")";var C=this.info;if(C.from.length&&C.from.indexOf(b.type)<0)return"Transform ("+C.name+"): type error, expected '"+C.from.map(function(E){return E.info.name}).join("/")+"', got '"+b.type.info.name+"'."},m.prototype.validateParams=function(b){var w=this.info;if(w.validateParams){var C=w.validateParams(b.params);if(C&&C.length>0)return"Invalid params: "+C.join(", ")+"."}},m.prototype.validate=function(b,w){var C=this.info;if(!b)return e.Task.reject(C.name,"Normal","Could not find a suitable node to apply the transformer to.");var E=this.checkTypes(b,w);if(E)return e.Task.reject(C.name,"Normal",E);var S=this.validateParams(w);if(S)return e.Task.reject(C.name,"Normal",S)},m.prototype.apply=function(b,w,C){if(this.info.isComposed)return this.transform(b,w,C);var E=this.getTarget(w),S=this.validate(E,C);return S||(e.Event.Tree.TransformerApply.dispatch(b,{a:E,t:C}),this.transform(b,E,C))},m.prototype.update=function(b,w,C){var E=w.parent;if(this.info.isComposed&&!this.updater)return this.transform(b,E,C);if(this.updater){var S=this.validateParams(C);if(S)return e.Task.reject(this.info.name,"Normal",S);var M=this.updater(b,w,C);if(M)return M}return e.Event.Tree.TransformerApply.dispatch(b,{a:w.parent,t:C}),this.transform(b,E,C)},m.prototype.create=function(b,w){return s.Transform.create(b,w||{},this)},m}();function l(m,b,w){return new x(m,b,w)}p.create=l;function _(m,b,w,C){return l({id:m,name:m,description:"",from:b,to:w,validateParams:function(){},defaultParams:function(){return{}}},C)}p.internal=_;function v(m,b,w,C,E){try{C(b)}finally{E&&(typeof E=="string"?w.logger.error(E):setTimeout(function(){return E.call(null,w,m,b)},0))}}function c(m,b,w,C,E,S){return H(this,void 0,void 0,function(){var M,A;return q(this,function(R){switch(R.label){case 0:M=!1,R.label=1;case 1:return R.trys.push([1,3,,4]),[4,s.Transform.apply(b,m.action).run()];case 2:R.sent();try{w(s.Node.Null)}finally{E&&(typeof E=="string"?M||b.logger.message(E):setTimeout(function(){return E.call(null,b,m.context)},0))}return[3,4];case 3:A=R.sent(),M=!0;try{C(A)}finally{S&&(typeof S=="string"?b.logger.error(S):setTimeout(function(){return S.call(null,b,m.context,A)},0))}return[3,4];case 4:return[2]}})})}function h(m,b,w,C){return l(m,function(E,S,M){return e.Task.create(m.name,"Background",function(A){return new i.Promise(function(R,D){try{var N=b(E,S,M);c({action:N,context:void 0},E,R,D,w,C)}catch(I){D(I)}})})})}p.action=h;function f(m,b,w,C){return l(m,function(E,S,M){return e.Task.create(m.name,"Background",function(A){return new i.Promise(function(R,D){try{var N=b(E,S,M);e.Task.isPromise(N)?N.then(function(I){return c(I,E,R,D,w,C)}).catch(function(I){return v(void 0,I,E,D,C)}):c(N,E,R,D,w,C)}catch(I){D(I)}})})})}p.actionWithContext=f})(d=s.Transformer||(s.Transformer={}))})(o=e.Tree||(e.Tree={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";var d;(function(p){var x=function(){function m(b,w,C){this.params=b,this.props=w,this.transformer=C,this.isUpdate=!1}return m.prototype.resolveAdd=function(b,w){return w===s.Node.Null||(w.ref=this.props.ref,this.props.isHidden&&(w.isHidden=!0),w.tree||(w.parent=b,s.add(w))),w},m.prototype.resolveUpdate=function(b,w,C){if(C===s.Node.Null)return C;var E=w.parent;return C.ref=this.props.ref,C.parent=E,C.tag=w.tag,C.state=w.state,this.props.isHidden&&(C.isHidden=!0),s.update(b.tree,w,C),C},m.prototype.apply=function(b,w){var C=this;return i.Core.computation(function(E){return new i.Promise(function(S,M){return H(C,void 0,void 0,function(){var A=this;return q(this,function(R){return e.Event.Tree.TransformStarted.dispatch(b,this),this.transformer.apply(b,w,this).run(b).then(function(D){S(A.resolveAdd(w,D)),e.Event.Tree.TransformFinished.dispatch(b,{transform:A})}).catch(function(D){M(D),e.Event.Tree.TransformFinished.dispatch(b,{transform:A,error:D})}),[2]})})})})},m.prototype.update=function(b,w){var C=this;return i.Core.computation(function(E){return new i.Promise(function(S,M){C.isUpdate=!0,C.props.ref=w.transform.props.ref,e.Event.Tree.TransformStarted.dispatch(b,C),w.transform.props.isBinding&&(C.props.isBinding=!0),C.transformer.update(b,w,C).run(b).then(function(A){S(C.resolveUpdate(b,w,A)),e.Event.Tree.TransformFinished.dispatch(b,{transform:C})}).catch(function(A){M(A),e.Event.Tree.TransformFinished.dispatch(b,{transform:C,error:A})})})})},m}();function l(m,b,w){var C=e.Utils.shallowClone(b);return C.ref||(C.ref=e.Utils.generateUUID()),new x(m,C,w)}p.create=l;function _(m){return!!m.selector}function v(m){return!!m.compile}function c(m,b,w){var C=this,E;try{_(b)?E=[b]:v(b)?E=b.compile():E=b}catch(S){return i.Core.Computation.reject(S)}return i.Core.computation(function(){return H(C,void 0,void 0,function(){var S,M,A,R,D,N,I,L;return q(this,function(Y){switch(Y.label){case 0:S=0,M=E,Y.label=1;case 1:if(!(S<M.length))return[3,8];A=M[S],R=m.select(A.selector),D=0,N=R,Y.label=2;case 2:if(!(D<N.length))return[3,7];I=N[D],Y.label=3;case 3:return Y.trys.push([3,5,,6]),[4,(w?A.transform.update(m,I):A.transform.apply(m,I)).run()];case 4:return Y.sent(),[3,6];case 5:return L=Y.sent(),[3,6];case 6:return D++,[3,2];case 7:return S++,[3,1];case 8:return[2]}})})})}p.execute=c;function h(m,b){return c(m,b,!1)}p.apply=h;function f(m,b){return c(m,b,!0)}p.update=f})(d=s.Transform||(s.Transform={}))})(o=e.Tree||(e.Tree={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){"use strict";function x(){return new l.Impl(void 0,[])}p.build=x;var l;(function(_){var v=function(){function c(h,f){this.last=h,this.transforms=f}return c.prototype.add=function(h,f,m,b){var w={selector:h,transform:f.create(m,b)};return this.transforms.push(w),this.last=w,new c(w,this.transforms)},c.prototype.then=function(h,f,m){if(!this.last)throw"Cannot 'then' on an empty builder";var b=h.create(f,m),w={selector:this.last.transform.props.ref,transform:b};return this.transforms.push(w),new c(w,this.transforms)},c.prototype.compile=function(){return this.transforms},c}();_.Impl=v})(l=p.Builder||(p.Builder={}))})(d=s.Transform||(s.Transform={}))})(o=e.Tree||(e.Tree={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";var d;(function(v){v.empty={kind:0};function c(h,f){return{kind:1,source:h,elements:f}}v.selection=c})(d=s.Info||(s.Info={}));function p(v){if(v.kind===0||!v.source.tree)return!0;if(v.source.type.info.typeClass===e.Entity.VisualClass&&v.source.type===e.Entity.Molecule.Visual){var c=e.Utils.Molecule.findModelOrSelection(v.source);if(c&&(!v.elements||!v.elements.length))return!0}return!1}s.isEmpty=p;function x(v){return v.kind===1&&!!v.source.tree}s.isSelection=x;function l(v,c){if(!v&&!c)return!0;if(!v||!c||v.kind!==c.kind)return!1;if(v.kind===0)return!0;if(v.source!==c.source)return!1;var h=v.elements,f=c.elements;if(h.length!==f.length)return!1;for(var m=0,b=h.length;m<b;m++)if(h[m]!==f[m])return!1;return!0}s.interactivityInfoEqual=l;function _(v,c){var h=v.elements,f=c.elements;if(h.length!==f.length)return!1;for(var m=0,b=h.length;m<b;m++)if(h[m]!==f[m])return!1;return!0}s.interactivitySelectionElementsEqual=_})(o=e.Interactivity||(e.Interactivity={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";var d=function(){function p(x){var l=this;this.context=x,this.providers=[],this.empty=[],e.Event.Visual.VisualHoverElement.getStream(x).subscribe(function(_){return e.Event.Interactivity.Highlight.dispatch(x,l.getInfo(_.data))})}return p.prototype.addProvider=function(x){this.providers.push(x)},p.prototype.removeProvider=function(x){this.providers=this.providers.filter(function(l){return l!==x}),e.Event.Interactivity.Highlight.dispatch(this.context,[])},p.prototype.getInfo=function(x){if(!x)return this.empty;for(var l=[],_=0,v=this.providers;_<v.length;_++){var c=v[_],h=c.call(null,x);h&&l.push(h)}return l},p}();s.HighlightManager=d})(o=e.Interactivity||(e.Interactivity={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){"use strict";function x(C,E,S){for(var M=E.structure,A=M.data.atoms,R=A.residueIndex,D=A.chainIndex,N=A.entityIndex,I=A.name,L=A.authName,Y=A.id,J=A.occupancy,ie=A.tempFactor,K=A.elementSymbol,Q=A.altLoc,ne=M.positions,ue=ne.x,fe=ne.y,ge=ne.z,ye=M.data.residues,pe=ye.name,de=ye.authName,he=ye.seqNumber,_e=ye.authSeqNumber,ve=ye.insCode,Z=ye.isHet,be=M.data.chains,Ee=be.asymId,De=be.authAsymId,Fe=M.data.entities.entityId,Ue=-1,Qe=-1,Ke=-1,Te=-1,Ie,ke,nt,dt,yt=function(){return Ie={index:Qe,entityId:Fe[Qe]}},gt=function(){return ke={index:Ke,asymId:Ee[Ke],authAsymId:De[Ke],entity:Ie}},xt=function(){return nt={index:Te,name:pe[Te],authName:de[Te],seqNumber:he[Te],authSeqNumber:_e[Te],insCode:ve[Te],isHet:Z[Te],chain:ke}},tt=function(){return dt={index:Ue,id:Y[Ue],name:I[Ue],authName:L[Ue],elementSymbol:K[Ue],occupancy:J[Ue],tempFactor:ie[Ue],x:ue[Ue],y:fe[Ue],z:ge[Ue],altLoc:Q[Ue],residue:nt}},pt=[],At=[],Tt=[],Ct=[],Bt=0;Bt<S.length;Bt++)Ue=S[Bt],E.hasAtom(Ue)&&(Qe!==N[Ue]&&(Qe=N[Ue],pt.push(yt())),Ke!==D[Ue]&&(Ke=D[Ue],At.push(gt())),Te!==R[Ue]&&(Te=R[Ue],Tt.push(xt())),Ct.push(tt()));return{modelRef:C.ref,moleculeId:M.id,modelId:M.modelId,atoms:Ct,residues:Tt,chains:At,entities:pt}}p.transformMoleculeAtomIndices=x;function l(C){if(!s.isEmpty(C)){var E=e.Utils.Molecule.findModelOrSelection(C.source);if(E){var S=e.Utils.Molecule.findQueryContext(E),M=e.Utils.Molecule.findModel(E);if(!(!S||!M))return x(M,S,C.elements)}}}p.transformInteraction=l;function _(C){var E=[];return C.occupancy!==1&&E.push("occupancy "+e.Utils.round(C.occupancy,2)),C.altLoc&&E.push("alt. loc "+C.altLoc),E.length?" <small>["+E.join(", ")+"]</small>":""}function v(C){return"<span><b>"+C.name+" "+C.elementSymbol+" "+C.id+"</b>"+_(C)+" at ("+e.Utils.round(C.x,1)+", "+e.Utils.round(C.y,1)+", "+e.Utils.round(C.z,1)+")</span>"}function c(C){return"<span>"+C.name+" "+C.elementSymbol+" "+C.id+_(C)+"</span>"}function h(C){return"<span>"+C.authName+" "+C.chain.authAsymId+" "+C.authSeqNumber+(C.insCode!==null?" i: "+C.insCode:"")+"</span>"}function f(C){return C.modelId==="1"?"<span><small>["+C.moleculeId+"]</small></span>":"<span><small>["+C.moleculeId+":"+C.modelId+"]</small></span>"}function m(C){return!C||!C.atoms.length?"":C.atoms.length===1?"<span>"+v(C.atoms[0])+" on <b><small>"+h(C.residues[0])+"</small></b> "+f(C)+"</span>":C.residues.length===1?"<span><b>"+h(C.residues[0])+"</b> "+f(C)+"</span>":"<span><small>"+C.atoms.length+" atoms on</small> <b>"+C.residues.length+" residues</b> "+f(C)+"</span>"}p.formatInfo=m;function b(C){return!C||!C.atoms.length?"":C.atoms.length===1?"<span><b>"+c(C.atoms[0])+"</b> "+f(C)+"</span>":C.residues.length===1?"<span><b>"+h(C.residues[0])+"</b> "+f(C)+"</span>":"<span><b>"+C.residues.length+" residues</b> "+f(C)+"</span>"}p.formatInfoShort=b;function w(C){if(s.isEmpty(C)||C.source.type.info.typeClass===e.Entity.VisualClass&&C.source.type!==e.Entity.Molecule.Visual)return!1;var E=e.Utils.Molecule.findModelOrSelection(C.source);return!!E}p.isMoleculeModelInteractivity=w})(d=s.Molecule||(s.Molecule={}))})(o=e.Interactivity||(e.Interactivity={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";var d=function(){function x(l,_){var v=this;this.context=l,this.scene=_,this.entries=new Map,this.originalThemes=new Map,this.lastParent=NaN,e.Event.Tree.NodeAdded.getStream(l).subscribe(function(c){e.Entity.isClass(c.data,e.Entity.VisualClass)&&v.add(c.data)}),e.Event.Tree.NodeRemoved.getStream(l).subscribe(function(c){e.Entity.isClass(c.data,e.Entity.VisualClass)&&v.remove(c.data)}),e.Event.Tree.NodeUpdated.getStream(l).subscribe(function(c){if(e.Entity.isVisual(c.data)){var h=v.entries.get(c.data.id);if(h){var f=h.visual.state.visibility!==2;h.visual.props.model.getVisibility()!==f&&h.visual.props.model.updateVisibility(f)}}}),e.Command.Visual.UpdateBasicTheme.getStream(l).subscribe(function(c){if(!(!v.entries.get(c.data.visual.id)||!e.Entity.isVisual(c.data.visual))){var h=c.data.visual;c.data.theme.isSticky?v.originalThemes.set(h.id,c.data.theme):v.originalThemes.get(h.id)||v.originalThemes.set(h.id,h.props.model.theme),h.props.model.applyTheme(c.data.theme)}}),e.Command.Molecule.Highlight.getStream(l).subscribe(function(c){return v.highlightMoleculeModel(c.data)}),e.Command.Visual.ResetTheme.getStream(l).subscribe(function(c){return v.resetThemesAndHighlight(c.data&&c.data.selection)})}return x.prototype.isEmpty=function(){return!this.entries.size},x.prototype.add=function(l){if(this.entries.has(l.id)||!l.props.model)return!1;var _=l.parent.id;this.entries.set(l.id,{visual:l,parentId:_}),this.scene.scene.models.add(l.props.model,this.entries.size===1&&this.lastParent!==_);var v=l.state.visibility!==2;return l.props.model.getVisibility()!==v&&l.props.model.updateVisibility(v),l.props.model.tag=l,!0},x.prototype.remove=function(l){return this.entries.has(l.id)?(this.lastParent=this.entries.get(l.id).parentId,this.entries.delete(l.id),this.originalThemes.delete(l.id),this.scene.scene.models.removeAndDispose(l.props.model),l.props.model.tag=void 0,l.props.model=void 0,!0):!1},x.prototype.get=function(l){return this.entries.get(l)},x.prototype.resetThemesAndHighlight=function(l){var _=this;if(!l){this.originalThemes.forEach(function(C,E){var S=_.entries.get(E).visual.props.model;S.theme.isSticky?_.originalThemes.set(E,S.theme):(S.applyTheme(C),_.originalThemes.delete(E))}),this.entries.forEach(function(C){return C.visual.props.model.highlight(!1)}),this.scene.scene.forceRender();return}for(var v=this.context.select(l),c=0,h=v;c<h.length;c++){var f=h[c];if(!(!e.Entity.isVisual(f)||!this.originalThemes.has(f.id))){var m=f,b=this.originalThemes.get(m.id),w=m.props.model;w.theme.isSticky?this.originalThemes.set(m.id,w.theme):(w.applyTheme(b),this.originalThemes.delete(m.id)),w.highlight(!1)}}this.scene.scene.forceRender()},x.prototype.highlightMoleculeModel=function(l){var _=this,v=e.Utils.Molecule.findModel(l.model);if(!v){console.warn("Highlight: Trying to highlight a non-molecule model entity, ignoring...");return}var c=[];if(this.context.select(e.Tree.Selection.byValue(l.model).subtree()).forEach(function(C){e.Entity.isVisual(C)&&_.entries.get(C.id)&&c.push(C)}),!!c.length){var h=e.Utils.Molecule.getModelAndIndicesFromQuery(v,l.query);if(!(!h||!h.indices.length))for(var f=l.isOn?3:4,m=0,b=c;m<b.length;m++){var w=b[m];w.props.model.applySelection(h.indices,f)}}},x}();s.DisplayList=d;var p=function(){function x(l,_,v){var c=this;this.context=_,this._destroyed=!1,this.cameraChanged=new e.Rx.Subject,this.cameraObserver=function(h){return c.cameraChanged.onNext(h)},this.models=new d(_,this),this.scene=new i.Visualization.Scene(l,v),this.scene.camera.observe(this.cameraObserver),this.scene.events.addEventListener("hover",function(h){return c.handleEvent(h,e.Event.Visual.VisualHoverElement)}),this.scene.events.addEventListener("select",function(h){return c.handleEvent(h,e.Event.Visual.VisualSelectElement)}),this.cameraChanged.throttle(1e3/30).subscribe(function(h){e.Event.Visual.CameraChanged.dispatch(c.context,h)}),e.Command.Entity.Focus.getStream(_).subscribe(function(h){var f;if(h.data.length===1){var m=h.data[0];e.Entity.isMoleculeSelection(m)?c.focusMoleculeModelSelection(m):e.Entity.isClass(m,e.Entity.VisualClass)&&c.scene.camera.focusOnModel(m.props.model)}else(f=c.scene.camera).focusOnModel.apply(f,h.data.filter(function(b){return e.Entity.isClass(b,e.Entity.VisualClass)}).map(function(b){return b.props.model}))}),e.Command.Entity.Highlight.getStream(_).subscribe(function(h){for(var f=0,m=h.data.entities;f<m.length;f++){var b=m[f];!e.Entity.isClass(b,e.Entity.VisualClass)||!b.props.model||b.props.model.highlight(h.data.isOn)}}),e.Command.Visual.ResetScene.getStream(_).subscribe(function(h){return c.resetScene()}),e.Command.Molecule.FocusQuery.getStream(_).subscribe(function(h){return c.focusMoleculeModelOnQuery(h.data)})}return x.prototype.resetScene=function(){this._destroyed||(e.Event.Visual.VisualSelectElement.dispatch(this.context,e.Interactivity.Info.empty),this.models.resetThemesAndHighlight(),this.scene.camera.reset())},Object.defineProperty(x.prototype,"camera",{get:function(){return this.scene.camera},enumerable:!0,configurable:!0}),x.prototype.destroy=function(){this._destroyed||(this.scene.camera.stopObserving(this.cameraObserver),this.scene.destroy(),this.scene=void 0,this._destroyed=!0)},x.prototype.handleEvent=function(l,_){var v=l.data;v&&v.model&&v.elements?_.dispatch(this.context,e.Interactivity.Info.selection(v.model.tag,v.elements)):_.dispatch(this.context,e.Interactivity.Info.empty)},x.prototype.focusMoleculeModelSelection=function(l){if(!e.Tree.Node.is(l,e.Entity.Molecule.Selection)){console.warn("Focus: Trying to focus on non-molecule selection, ignoring...");return}var _=e.Utils.Molecule.findModel(l);if(!_){console.warn("Focus: Molecule model for selection not found, ignoring...");return}var v=i.Core.Geometry.LinearAlgebra.Vector3.zero(),c=e.Utils.Molecule.getCentroidAndRadius(_.props.model,l.props.indices,v);this.scene.camera.focusOnPoint(i.Core.Geometry.LinearAlgebra.Vector3.toObj(v),c)},x.prototype.focusMoleculeModelOnQuery=function(l){var _=e.Utils.Molecule.getModelAndIndicesFromQuery(l.model,l.query);if(!(!_||!_.indices.length)){var v=i.Core.Geometry.LinearAlgebra.Vector3.zero(),c=e.Utils.Molecule.getCentroidAndRadius(_.model.props.model,_.indices,v);this.scene.camera.focusOnPoint(i.Core.Geometry.LinearAlgebra.Vector3.toObj(v),c)}},x}();s.SceneWrapper=p})(o=e.Visualization||(e.Visualization={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";var d;(function(x){function l(v){return v.taskType?v.taskType:"Normal"}x.getTaskType=l;function _(v){return v}x.create=_})(d=s.Style||(s.Style={}));var p;(function(x){function l(_){var v=i.Core.Utils.FastMap.create();_.colors&&_.colors.forEach(function(h,f){return v.set(f,h)});var c=i.Core.Utils.FastMap.create();return _.variables&&_.variables.forEach(function(h,f){return c.set(f,h)}),{colors:v,variables:c,transparency:_.transparency,interactive:_.interactive,disableFog:_.disableFog,isSticky:!0}}x.getProps=l})(p=s.Theme||(s.Theme={}))})(o=e.Visualization||(e.Visualization={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){"use strict";var x=i.Visualization;p.UniformBaseColors=e.Immutable.Map({Uniform:x.Theme.Default.UniformColor,Highlight:x.Theme.Default.HighlightColor,Selection:x.Theme.Default.SelectionColor}),p.ModelVisualBaseColors=e.Immutable.Map({Bond:x.Molecule.Colors.DefaultBondColor,Highlight:x.Theme.Default.HighlightColor,Selection:x.Theme.Default.SelectionColor});function l(S,M){return function(A){return M[S[A]]}}function _(S,M){return function(A,R){var D=e.Utils.Molecule.findModel(A).props.model,N=S(D),I=x.Theme.createPalleteMapping(l(N.index,N.property),M);return x.Theme.createMapping(I,R)}}p.createPaletteThemeProvider=_;function v(S,M,A){return function(R,D){var N=e.Utils.Molecule.findModel(R),I=N.tree&&N.tree.context;if(I){var L=I.entityCache.get(N,"theme-mapping-"+S);if(L)return x.Theme.createMapping(L,D)}var Y=N.props.model,J=M(Y),ie=x.Theme.createPalleteMapping(l(J.index,J.property),A);return I&&I.entityCache.set(R,"theme-mapping-"+S,ie),x.Theme.createMapping(ie,D)}}p.createCachedPaletteThemeProvider=v;function c(S,M){if(M&&M.colors&&!M.colors.get("Bond")&&M.colors.get("Uniform")){var A=M.colors;M=e.Utils.assign({},M);var R=i.Core.Utils.FastMap.create();M.colors=R,A.forEach(function(D,N){return R.set(N,D)}),R.set("Bond",M.colors.get("Uniform"))}return x.Theme.createUniform(M)}p.uniformThemeProvider=c;function h(S,M,A){return function(R,D){var N=e.Utils.Molecule.findModel(R),I=N.props.model,L=S(I),Y=x.Theme.createColorMapMapping(l(L.index,L.property),M,A);return x.Theme.createMapping(Y,D)}}p.createColorMapThemeProvider=h;function f(S,M,A,R){return function(D,N){var I=e.Utils.Molecule.findModel(D),L=I.tree&&I.tree.context;if(L){var Y=L.entityCache.get(I,"theme-mapping-map-"+S);if(Y)return x.Theme.createMapping(Y,N)}var J=I.props.model,ie=M(J),K=x.Theme.createColorMapMapping(l(ie.index,ie.property),A,R);return L&&L.entityCache.set(D,"theme-mapping-map-"+S,K),x.Theme.createMapping(K,N)}}p.createCachedColorMapThemeProvider=f;var m=function(){function S(M,A){var R=A.r,D=A.g,N=A.b;this.residueIndex=M.data.atoms.residueIndex,this.r=R,this.g=D,this.b=N}return S.prototype.getProperty=function(M){return this.residueIndex[M]},S.prototype.setColor=function(M,A){A.r=this.r[M],A.g=this.g[M],A.b=this.b[M]},S}();p.RainbowPalette=[x.Color.fromHex(12025059),x.Color.fromHex(8989394),x.Color.fromHex(204),x.Color.fromHex(43724),x.Color.fromHex(52224),x.Color.fromHex(13412864),x.Color.fromHex(13399808),x.Color.fromHex(13378048)];var b=e.Immutable.Map({Bond:x.Molecule.Colors.DefaultBondColor,Highlight:x.Color.fromHex(16777215),Selection:x.Color.fromHex(9863168)});function w(S,M,A){for(var R=S.data.residues.count,D={r:new Float32Array(R),g:new Float32Array(R),b:new Float32Array(R)},N=D.r,I=D.g,L=D.b,Y=M(S),J=Y.count,ie=Y.residueStartIndex,K=Y.residueEndIndex,Q=p.RainbowPalette.length-1,ne=x.Color.fromHex(0),ue=i.Core.Utils.FastMap.create(),fe=0;fe<J;fe++){var ge=A(Y,fe),ye=K[fe]-ie[fe];ue.has(ge)?ue.get(ge).count+=ye:ue.set(ge,{index:0,count:ye})}ue.forEach(function(Ee){return Ee.count=Math.max(Ee.count-1,1)});for(var fe=0;fe<J;fe++)for(var pe=ie[fe],ye=K[fe]-pe,de=ue.get(A(Y,fe)),he=de.count,_e=0;_e<ye;_e++){var ve=Q*de.index/he,Z=Math.floor(ve),be=Math.ceil(ve);x.Color.interpolate(p.RainbowPalette[Z],p.RainbowPalette[be],ve-Z,ne),N[pe+_e]=ne.r,I[pe+_e]=ne.g,L[pe+_e]=ne.b,de.index++}return{r:N,g:I,b:L}}function C(S,M){return function(A,R){var D=e.Utils.Molecule.findModel(A).props.model,N=w(D,S,M),I=new m(D,N);return x.Theme.createMapping(I,R)}}var E;(function(S){S.Themes=[{name:"Chain ID",description:"Color the surface by Chain ID.",colors:p.ModelVisualBaseColors,provider:v("chain-id",function(M){return{index:M.data.atoms.residueIndex,property:M.data.residues.asymId}},x.Molecule.Colors.DefaultPallete)},{name:"Entity ID",description:"Color the surface by Entity ID.",colors:p.ModelVisualBaseColors,provider:_(function(M){return{index:M.data.atoms.residueIndex,property:M.data.residues.entityId}},x.Molecule.Colors.DefaultPallete)},{name:"Entity Type",description:"Color the surface by Entity Type.",colors:p.ModelVisualBaseColors,provider:_(function(M){return{index:M.data.atoms.entityIndex,property:M.data.entities.type}},x.Molecule.Colors.DefaultPallete)},{name:"Residue Name",description:"Color the surface by residue name.",colors:p.ModelVisualBaseColors,provider:_(function(M){return{index:M.data.atoms.residueIndex,property:M.data.residues.name}},x.Molecule.Colors.DefaultPallete)},{name:"Element Symbol",description:"Color the surface by atom elemnt symbol.",colors:p.ModelVisualBaseColors,provider:h(function(M){return{index:M.data.atoms.indices,property:M.data.atoms.elementSymbol}},x.Molecule.Colors.DefaultElementColorMap,x.Molecule.Colors.DefaultElementColor)},{name:"Rainbow (Chain)",description:"Color each chain using rainbow palette.",colors:b,provider:C(function(M){return M.data.chains},function(M,A){return M.asymId[A]+" "+M.entityId[A]})},{name:"Rainbow (Entity)",description:"Color each entity using rainbow palette.",colors:b,provider:C(function(M){return M.data.entities},function(M,A){return M.entityId[A]})},{name:"Uniform Color",description:"Same color everywhere.",colors:p.UniformBaseColors,provider:c}],S.CartoonThemeTemplate=S.Themes.filter(function(M){return M.name==="Chain ID"})[0],S.ElementSymbolThemeTemplate=S.Themes.filter(function(M){return M.name==="Element Symbol"})[0],S.SurfaceThemeTemplate=S.Themes.filter(function(M){return M.name==="Uniform Color"})[0],S.UniformThemeTemplate=S.Themes.filter(function(M){return M.name==="Uniform Color"})[0],S.RainbowEntityThemeTemplate=S.Themes.filter(function(M){return M.name==="Rainbow (Entity)"})[0]})(E=p.Default||(p.Default={}))})(d=s.Molecule||(s.Molecule={}))})(o=e.Visualization||(e.Visualization={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){"use strict";p.TypeDescriptions={Cartoons:{label:"Cartoon",shortLabel:"Cartoon"},Calpha:{label:"C-\u03B1 Trace",shortLabel:"C-\u03B1"},BallsAndSticks:{label:"Balls and Sticks",shortLabel:"B'n'S"},VDWBalls:{label:"VDW Balls",shortLabel:"VDW"},Surface:{label:"Surface",shortLabel:"Surface"}},p.Types=["Cartoons","Calpha","BallsAndSticks","VDWBalls","Surface"],p.DetailTypes=["Automatic","Very Low","Low","Medium","High","Very High"];var x;(function(l){l.DetailParams={detail:"Automatic"},l.CartoonParams={showDirectionCone:!1,detail:"Automatic"},l.BallsAndSticksParams={useVDW:!0,vdwScaling:.22,atomRadius:.35,bondRadius:.09,hideHydrogens:!1,customMaxBondLengths:void 0,detail:"Automatic"},l.SurfaceParams={probeRadius:.4,automaticDensity:!0,density:1.1,smoothing:10,isWireframe:!1},l.Transparency={alpha:1,writeDepth:!1},l.ForType=function(){for(var _={Cartoons:{type:"Cartoons",params:l.CartoonParams,theme:{template:l.CartoonThemeTemplate,colors:l.CartoonThemeTemplate.colors,transparency:l.Transparency,interactive:!0}},Calpha:{type:"Calpha",params:{detail:"Automatic"},theme:{template:l.CartoonThemeTemplate,colors:l.CartoonThemeTemplate.colors,transparency:l.Transparency,interactive:!0}},BallsAndSticks:{type:"BallsAndSticks",params:l.BallsAndSticksParams,theme:{template:l.ElementSymbolThemeTemplate,colors:l.ElementSymbolThemeTemplate.colors,transparency:l.Transparency,interactive:!0}},VDWBalls:{type:"VDWBalls",params:{detail:"Automatic"},theme:{template:l.ElementSymbolThemeTemplate,colors:l.ElementSymbolThemeTemplate.colors,transparency:l.Transparency,interactive:!0}},Surface:{type:"Surface",params:l.SurfaceParams,theme:{template:l.SurfaceThemeTemplate,colors:l.SurfaceThemeTemplate.colors,transparency:{alpha:.33,writeDepth:!1},interactive:!0}}},v=new Map,c=0,h=Object.keys(_);c<h.length;c++){var f=h[c];v.set(f,_[f])}return v}()})(x=p.Default||(p.Default={}))})(d=s.Molecule||(s.Molecule={}))})(o=e.Visualization||(e.Visualization={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){"use strict";var x=i.Visualization,l=i.Visualization.Molecule;function _(S,M){if(S==="Automatic")return M<250?5:M<1e3?4:M<75e3?3:M<25e4?2:M<6e5?1:0;var A=p.DetailTypes.indexOf(S)-1;return Math.max(A,0)}function v(S,M,A){if(S.automaticDensity){var R=e.Utils.Molecule.getBox(M,A,0),D=R.bottomLeft,N=R.topRight,I=i.Core.Geometry.LinearAlgebra.Vector3.sub(N,N,D),L=Math.pow(Math.pow(99,3)/(I[0]*I[1]*I[2]),1/3);return L>1.2?1.2:L<.1?.1:L}return S.density!==void 0?+S.density:1}function c(S,M,A){return{tessalation:S,drawingType:M?l.Cartoons.CartoonsModelType.AlphaTrace:l.Cartoons.CartoonsModelType.Default,showDirectionCones:A}}function h(S,M){if(typeof M.vdwScaling>"u"&&(M.vdwScaling=p.Default.BallsAndSticksParams.vdwScaling),typeof M.atomRadius>"u"&&(M.atomRadius=p.Default.BallsAndSticksParams.atomRadius),!M.useVDW)return function(R){return function(){return R}}(M.atomRadius);var A=e.Utils.vdwRadiusFromElementSymbol(S);return function(R,D){return function(N){return R*D(N)}}(M.vdwScaling,A)}function f(S,M,A){var R=void 0;if(A.customMaxBondLengths){var D=Object.getOwnPropertyNames(A.customMaxBondLengths);D.length>0&&(R=i.Core.Utils.FastMap.create());for(var N=0,I=D;N<I.length;N++){var L=I[N];R.set(L,A.customMaxBondLengths[L])}}return{tessalation:S,bondRadius:A.bondRadius,hideBonds:!1,hideHydrogens:!!A.hideHydrogens,atomRadius:h(M,A),customMaxBondLengths:R}}function m(S,M){return{tessalation:S,bondRadius:0,hideBonds:!0,atomRadius:e.Utils.vdwRadiusFromElementSymbol(M)}}function b(S,M,A){var R=e.Utils.Molecule.findModel(S).props.model,D=e.Entity.isMoleculeModel(S)?S.props.model.data.atoms.indices:S.props.indices;if(D.length){var N=_(M.params.detail,D.length);switch(M.type){case"Cartoons":return l.Cartoons.Model.create(S,{model:R,atomIndices:D,theme:A,queryContext:e.Utils.Molecule.findQueryContext(S),params:c(N,!1,M.params.showDirectionCone)});case"Calpha":return l.Cartoons.Model.create(S,{model:R,atomIndices:D,theme:A,queryContext:e.Utils.Molecule.findQueryContext(S),params:c(N,!0,M.params.showDirectionCone)});case"BallsAndSticks":return x.Molecule.BallsAndSticks.Model.create(S,{model:R,atomIndices:D,theme:A,params:f(N,R,M.params)});case"VDWBalls":return x.Molecule.BallsAndSticks.Model.create(S,{model:R,atomIndices:D,theme:A,params:m(N,R)});default:return}}}function w(S,M,A){var R=this;return e.Task.create("Visual ("+S.props.label+")",s.Style.getTaskType(A),function(D){return H(R,void 0,void 0,function(){var N,I,L,Y;return q(this,function(J){switch(J.label){case 0:return N=p.TypeDescriptions[A.type].label,[4,D.updateProgress("Creating "+N+"...")];case 1:if(J.sent(),I=A.theme.template.provider(e.Utils.Molecule.findModel(S),s.Theme.getProps(A.theme)),L=b(S,A,I),!L)throw"Invalid input parameters.";return[4,L.run(D)];case 2:return Y=J.sent(),[2,e.Entity.Molecule.Visual.create(M,{label:N,model:Y,style:A,isSelectable:!A.isNotSelectable})]}})})})}function C(S,M,A){var R=this;return e.Task.create("Molecular Surface ("+S.props.label+")",s.Style.getTaskType(A),function(D){return H(R,void 0,void 0,function(){var N,I,L,Y,J,ie,K;return q(this,function(Q){switch(Q.label){case 0:return N=e.Utils.Molecule.findModel(S).props.model,I=e.Entity.isMoleculeModel(S)?S.props.model.data.atoms.indices:S.props.indices,L=A.params,[4,i.Core.Geometry.MolecularSurface.computeMolecularSurfaceAsync({positions:N.positions,atomIndices:I,parameters:{atomRadius:e.Utils.vdwRadiusFromElementSymbol(N),density:v(L,N,I),probeRadius:L.probeRadius,smoothingIterations:L.smoothing,interactive:!0}}).run(D)];case 1:return Y=Q.sent(),J=A.theme.template.provider(e.Utils.Molecule.findModel(S),s.Theme.getProps(A.theme)),[4,D.updateProgress("Creating visual...")];case 2:return Q.sent(),[4,i.Visualization.Surface.Model.create(S,{surface:Y.surface,theme:J,parameters:{isWireframe:A.params.isWireframe}}).run(D)];case 3:return ie=Q.sent(),K="Surface, "+e.Utils.round(L.probeRadius,2)+" \u212B probe",[2,e.Entity.Molecule.Visual.create(M,{label:K,model:ie,style:A,isSelectable:!A.isNotSelectable})]}})})})}function E(S,M,A){return A.type==="Surface"?C(S,M,A):w(S,M,A)}p.create=E})(d=s.Molecule||(s.Molecule={}))})(o=e.Visualization||(e.Visualization={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){"use strict";function x(_,v,c){var h=this;return e.Task.create("Labels","Background",function(f){return H(h,void 0,void 0,function(){var m,b,w,C;return q(this,function(E){switch(E.label){case 0:return m=c.params,b=c.theme.template.provider(_,s.Theme.getProps(c.theme)),w=e.Utils.Molecule.create3DLabelsParams(_,m,b),[4,f.updateProgress("Creating labels...")];case 1:return E.sent(),[4,i.Visualization.Labels.Model.create(_,w).run(f)];case 2:return C=E.sent(),[2,e.Entity.Visual.Labels.create(v,{label:"Labels",model:C,style:c,isSelectable:!1})]}})})})}p.createMoleculeLabels=x;function l(_,v,c){var h=this;return e.Task.create("Labels","Background",function(f){return H(h,void 0,void 0,function(){var m,b,w;return q(this,function(C){switch(C.label){case 0:return[4,f.updateProgress("Creating labels...")];case 1:return C.sent(),m=c.style.theme.template.provider(_,s.Theme.getProps(c.style.theme)),b={positions:c.positions,sizes:c.sizes,labels:c.labels,options:c.options,theme:m},[4,i.Visualization.Labels.Model.create(_,b).run(f)];case 2:return w=C.sent(),[2,e.Entity.Visual.Labels.create(v,{label:"Labels",model:w,style:c.style,isSelectable:!1})]}})})})}p.createGenericLabels=l})(d=s.Labels||(s.Labels={}))})(o=e.Visualization||(e.Visualization={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){"use strict";var x;(function(_){function v(h,f){return e.Utils.deepEqual(h.params,f.params)}_.moleculeHasOnlyThemeChanged=v;function c(h){return{type:"Labels",params:{kind:h.kind,labelsOptions:h.labelsOptions?h.labelsOptions:l.MoleculeLabels.params.labelsOptions},theme:h.theme?h.theme:l.MoleculeLabels.theme}}_.createMoleculeStyle=c})(x=p.Style||(p.Style={}));var l;(function(_){var v=i.Visualization,c=e.Immutable.Map({Uniform:v.Color.fromHexString("#eaeaea"),Background:v.Color.fromHexString("#777777"),Outline:v.Color.fromHexString("#333333")}),h=e.Immutable.Map({xOffset:0,yOffset:0,zOffset:.6,sizeFactor:1.5,backgroundOpacity:0,outlineWidth:.1});function f(w,C){return v.Theme.createUniform(C)}var m=[{name:"Uniform Color",description:"Same color everywhere.",colors:c,variables:h,provider:f}],b={alpha:1,writeDepth:!1};_.Theme=m[0],_.MoleculeLabels={type:"Labels",params:{kind:"Residue-Full-Id",labelsOptions:v.Labels.DefaultLabelsOptions},theme:{template:_.Theme,colors:_.Theme.colors,variables:_.Theme.variables,transparency:b,interactive:!1,disableFog:!1}},_.GenericLabels={type:"Labels",params:v.Labels.DefaultLabelsOptions,theme:{template:_.Theme,colors:_.Theme.colors,variables:_.Theme.variables,transparency:b,interactive:!1,disableFog:!1}}})(l=p.Default||(p.Default={}))})(d=s.Labels||(s.Labels={}))})(o=e.Visualization||(e.Visualization={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){"use strict";var x=i.Core.Geometry;function l(v,c,h,f){for(var m=h[0]-c[0],b=h[1]-c[1],w=h[2]-c[2],C=[c,[c[0]+m,c[1],c[2]],[c[0],c[1]+b,c[2]],[c[0],c[1],c[2]+w],[c[0]+m,c[1]+b,c[2]],[c[0]+m,c[1],c[2]+w],[c[0],c[1]+b,c[2]+w],[c[0]+m,c[1]+b,c[2]+w]].map(function(K){var Q=new i.Visualization.THREE.Vector3().fromArray(K).applyMatrix4(f);return[Q.x,Q.y,Q.z]}),E=C[0].slice(),S=C[0].slice(),M=0,A=C;M<A.length;M++)for(var R=A[M],D=0;D<3;D++)E[D]=Math.min(E[D],R[D]),S[D]=Math.max(S[D],R[D]);for(var N=v.box,I=N.origin,L=N.dimensions,Y=N.sampleCount,J=[0,0,0],ie=[0,0,0],D=0;D<3;D++){var R=Math.floor(Y[D]*(E[D]-I[D])/L[D]);J[D]=Math.min(Math.max(R,0),Y[D]),R=Math.ceil(Y[D]*(S[D]-I[D])/L[D]),ie[D]=Math.min(Math.max(R,0),Y[D])}return{bottomLeft:J,topRight:ie}}function _(v,c,h){var f=this,m=h.taskType==="Background"?v.props.label:"Density Surface ("+v.props.label+")";return e.Task.create(m,s.Style.getTaskType(h),function(b){return H(f,void 0,void 0,function(){var w,C,E,S,M,A,R,D,N,I,L,Y,J,ie,K,Q,ne,ue,fe,ge,ye,pe;return q(this,function(de){switch(de.label){case 0:if(w=h.params,C=e.Tree.Node.findClosestNodeOfType(v,[e.Entity.Density.Data]),!C)throw"Cannot create density visual on "+v.props.label;if(E=C.props.data,S=E.spacegroup.basis,M=E.box,A=M.sampleCount,R=M.origin,D=M.dimensions,N=new i.Visualization.THREE.Matrix4().makeScale(D[0]/A[0],D[1]/A[1],D[2]/A[2]),I=new i.Visualization.THREE.Matrix4().makeTranslation(R[0],R[1],R[2]),L=new i.Visualization.THREE.Matrix4().set(S.x[0],S.y[0],S.z[0],0,0,S.y[1],S.z[1],0,0,0,S.z[2],0,0,0,0,1),Y=new i.Visualization.THREE.Matrix4().getInverse(L),J=L.multiply(I).multiply(N),w.bottomLeft&&w.topRight?(Q=l(E,w.bottomLeft,w.topRight,Y),ie=Q.bottomLeft,K=Q.topRight):(ie=[0,0,0],K=E.box.sampleCount),!(ie[0]-K[0])||!(ie[1]-K[1])||!(ie[2]-K[2]))throw{warn:!0,message:"Empty box."};return ne=w.isoValueType===void 0||w.isoValueType===p.IsoValueType.Sigma,ue=ne?E.valuesInfo.mean+E.valuesInfo.sigma*w.isoValue:w.isoValue,[4,x.MarchingCubes.compute({isoLevel:ue,scalarField:E.data,bottomLeft:ie,topRight:K}).run(b)];case 1:return fe=de.sent(),[4,x.Surface.transform(fe,J.elements).run(b)];case 2:return fe=de.sent(),[4,x.Surface.laplacianSmooth(fe,w.smoothing,8).run(b)];case 3:return fe=de.sent(),ge=h.theme.template.provider(C,s.Theme.getProps(h.theme)),[4,b.updateProgress("Creating visual...")];case 4:return de.sent(),[4,i.Visualization.Surface.Model.create(C,{surface:fe,theme:ge,parameters:{isWireframe:h.params.isWireframe}}).run(b)];case 5:return ye=de.sent(),pe="Surface, "+e.Utils.round(w.isoValue,2)+(ne?" \u03C3":""),[2,e.Entity.Density.Visual.create(c,{label:pe,model:ye,style:h,isSelectable:!h.isNotSelectable})]}})})})}p.create=_})(d=s.Density||(s.Density={}))})(o=e.Visualization||(e.Visualization={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){"use strict";var x;(function(c){c[c.Sigma=0]="Sigma",c[c.Absolute=1]="Absolute"})(x=p.IsoValueType||(p.IsoValueType={}));function l(c,h){return c.bottomLeft===h.bottomLeft&&h.topRight===h.topRight&&c.smoothing===h.smoothing&&c.isWireframe===h.isWireframe}p.areNonIsoParamsSame=l;var _;(function(c){function h(f){var m=v.Theme.colors.set("Uniform",f.color);return{type:"Density",taskType:f.taskType,params:{isoValue:f.isoValue,isoValueType:f.isoValueType,smoothing:1,isWireframe:!!f.isWireframe},theme:{template:v.Theme,colors:m,transparency:f.transparency?f.transparency:v.Transparency,interactive:!1,disableFog:!!f.disableFog}}}c.create=h})(_=p.Style||(p.Style={}));var v;(function(c){c.Params={isoValue:0,isoValueType:x.Sigma,smoothing:1,isWireframe:!1};var h=i.Visualization,f=e.Immutable.Map({Uniform:h.Theme.Default.UniformColor,Highlight:h.Theme.Default.HighlightColor,Selection:h.Theme.Default.SelectionColor});function m(b,w){return h.Theme.createUniform(w)}c.Themes=[{name:"Uniform Color",description:"Same color everywhere.",colors:f,provider:m}],c.Transparency={alpha:1,writeDepth:!1},c.Theme=c.Themes[0],c.Style={type:"Density",params:c.Params,theme:{template:c.Theme,colors:c.Theme.colors,transparency:c.Transparency,interactive:!1,disableFog:!1}}})(v=p.Default||(p.Default={}))})(d=s.Density||(s.Density={}))})(o=e.Visualization||(e.Visualization={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){"use strict";var o;(function(s){function d(_,v){return _.type.info.typeClass===v}s.isClass=d;function p(_,v){return _.info.typeClass===v}s.isTypeClass=p,s.RootClass="Root",s.GroupClass="Group",s.DataClass="Data",s.ObjectClass="Object",s.VisualClass="Visual",s.SelectionClass="Selection",s.ActionClass="Action",s.BehaviourClass="Behaviour";var x=function(){function _(v,c,h){this.id=v,this.info=e.Utils.assign({},c,{traits:h})}return _.prototype.create=function(v,c){var h={id:e.Tree.Node.createId(),version:0,index:0,ref:"undefined",tag:void 0,tree:void 0,props:c,state:{isCollapsed:!1,visibility:0},isHidden:!1,transform:v,parent:void 0,children:[],type:this};return e.Tree.Node.update(h)},_}();function l(_,v){return new x(e.Utils.generateUUID(),_,v||{})}s.create=l})(o=e.Entity||(e.Entity={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";function d(v){v.tree&&(e.Event.Tree.NodeUpdated.dispatch(v.tree.context,v),v.tree.context.currentEntity===v&&e.Event.Entity.CurrentChanged.dispatch(v.tree.context,v))}s.nodeUpdated=d;function p(v){var c={isCollapsed:!v.state.isCollapsed};e.Tree.Node.withState(v,c),d(v)}s.toggleExpanded=p;function x(v){var c=v.tree.context.currentEntity;if(!(c===v||v&&v.isHidden)){for(var h=v.parent;h.parent!==h;){if(h.isHidden)return;h=h.parent}v.tree.context.currentEntity=v,c&&(e.Tree.Node.update(c),d(c)),v&&(e.Tree.Node.update(v),d(v)),e.Event.Entity.CurrentChanged.dispatch(v.tree.context,v),c&&e.Tree.updatePath(c),e.Tree.updatePath(v.parent)}}s.setCurrent=x;function l(v){if(v){for(var c=0,h=0,f=0,m=v.children;f<m.length;f++){var b=m[f],w=b.state.visibility;w===0?c++:w===2&&h++}var C;if(c===v.children.length?C=0:h===v.children.length?C=2:C=1,C!==v.state.visibility){var w={visibility:C};e.Tree.Node.withState(v,w),d(v)}v.parent!==v&&l(v.parent)}}s.updateVisibilityState=l;function _(v,c){if(v){var h=c?0:2;e.Tree.Node.forEach(v,function(f){var m=f.state.visibility;if(m!==h){var b={visibility:h};e.Tree.Node.withState(f,b),d(f)}}),l(v.parent)}}s.setVisibility=_})(o=e.Entity||(e.Entity={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";function d(f){return f&&f.type===c.Molecule}s.isMolecule=d;function p(f){return f&&f.type===c.Model}s.isMoleculeModel=p;function x(f){return f&&f.type===c.Selection}s.isMoleculeSelection=x;function l(f){return f&&f.type.info.typeClass===s.VisualClass}s.isVisual=l,s.RootTransform=e.Tree.Transform.create({},{},void 0),s.Root=s.create({name:"Root",typeClass:"Root",shortName:"R",description:"Where everything begins."}),s.Group=s.create({name:"Group",typeClass:"Group",shortName:"G",description:"A group on entities."}),s.Action=s.create({name:"Action",typeClass:"Action",shortName:"A",description:"Represents an action performed on the entity tree."});var _;(function(f){f.Types=["String","Binary"],f.String=s.create({name:"String Data",typeClass:"Data",shortName:"S_D",description:"A string."}),f.Binary=s.create({name:"Binary Data",typeClass:"Data",shortName:"B_D",description:"A binary blob."}),f.CifDictionary=s.create({name:"Cif Dictionary",typeClass:"Data",shortName:"CD",description:"Represents parsed CIF data."}),f.Json=s.create({name:"JSON Data",typeClass:"Data",shortName:"JS_D",description:"Represents JSON data."})})(_=s.Data||(s.Data={}));var v;(function(f){f.Surface=s.create({name:"Surface Visual",typeClass:"Visual",shortName:"V_S",description:"A surface visual."},{isFocusable:!0}),f.Labels=s.create({name:"Labels Visual",typeClass:"Visual",shortName:"V_L",description:"3D labels."},{isFocusable:!1})})(v=s.Visual||(s.Visual={}));var c;(function(f){f.Molecule=s.create({name:"Molecule",typeClass:"Object",shortName:"M",description:"A molecule that might contain one or more models."}),f.Model=s.create({name:"Molecule Model",typeClass:"Object",shortName:"M_M",description:"A model of a molecule."}),f.Selection=s.create({name:"Molecule Model Selection",typeClass:"Selection",shortName:"S_M",description:"A selection of atoms."},{isFocusable:!0}),f.Visual=s.create({name:"Molecule Visual",typeClass:"Visual",shortName:"V_M",description:"A visual of a molecule."},{isFocusable:!0});var m;(function(b){b.Behaviour=s.create({name:"Coordinate Streaming",typeClass:"Behaviour",shortName:"CS",description:"Behaviour that downloads surrounding residues when an atom or residue is selected."})})(m=f.CoordinateStreaming||(f.CoordinateStreaming={}))})(c=s.Molecule||(s.Molecule={}));var h;(function(f){f.Data=s.create({name:"Density Data",typeClass:"Object",shortName:"DD",description:"Density data."}),f.Visual=s.create({name:"Density Visual",typeClass:"Visual",shortName:"V_DD",description:"A visual of density data."},{isFocusable:!0}),f.InteractiveSurface=s.create({name:"Interactive Surface",typeClass:"Behaviour",shortName:"B_IS",description:"Behaviour that creates an interactive surface when an atom or residue is selected."})})(h=s.Density||(s.Density={}))})(o=e.Entity||(e.Entity={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";var d=function(){function p(x){var l=this;this.data=i.Core.Utils.FastMap.create(),e.Event.Tree.NodeRemoved.getStream(x).subscribe(function(_){return l.data.delete(_.data.id)})}return p.prototype.get=function(x,l){var _=this.data.get(x.id);if(_)return _[l]},p.prototype.set=function(x,l,_){var v,c=this.data.get(x.id);return c?c[l]=_:this.data.set(x.id,(v={},v[l]=_,v)),_},p}();s.Cache=d,function(p){var x;(function(l){l.QueryContext="queryContext"})(x=p.Keys||(p.Keys={}))}(d=s.Cache||(s.Cache={}))})(o=e.Entity||(e.Entity={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){var x;(function(l){"use strict";var _=this,v=e.Tree.Transformer;l.Root=v.create({id:"root",name:"Root",description:"A transformer that always returns itself.",from:[s.Root],to:[s.Root],validateParams:function(){},defaultParams:function(){return{}}},function(c,h,f){return e.Task.resolve("Root","Silent",h)}),l.Fail=v.create({id:"fail",name:"Fail",description:"A transform that always fails.",from:[],to:[],validateParams:function(){},defaultParams:function(){return{title:"Error",message:"Unknown error."}}},function(c,h,f){return e.Task.reject(f.params.title,"Background",f.params.message)}),l.CreateGroup=v.create({id:"create-group",name:"Create Group",description:"A transformer that always returns itself.",from:[],to:[s.Group],validateParams:function(){},defaultParams:function(){return{}}},function(c,h,f){var m=s.Group.create(f,{label:f.params.label?f.params.label:"Group",description:f.params.description});if(f.params.isCollapsed){var b={isCollapsed:!0};m=e.Tree.Node.withState(m,b)}return e.Task.resolve("Group","Silent",m)}),l.Delay=v.create({id:"basic-delay",name:"Delay",description:"A transformer that delays by the specified timeout and does nothing.",from:[],to:[s.Action],validateParams:function(){},defaultParams:function(){return{timeoutMs:1e3}}},function(c,h,f){return e.Task.create("Delay","Silent",function(m){return new i.Promise(function(b){setTimeout(function(){return b(e.Tree.Node.Null)},f.params.timeoutMs)})})}),l.CreateSurfaceVisual=e.Tree.Transformer.create({id:"basic-create-surface-visual",name:"Create Surface Visual",description:"Create generic surface visual.",from:[],to:[e.Entity.Visual.Surface],defaultParams:function(){},isUpdatable:!1},function(c,h,f){var m=f.params.theme,b={type:"Surface",taskType:f.params.taskType||"Silent",isNotSelectable:!!f.params.isNotInteractive,params:{},theme:void 0};return e.Task.create("Create Surface Visual",f.params.taskType||"Silent",function(w){return H(_,void 0,void 0,function(){var C;return q(this,function(E){switch(E.label){case 0:return[4,i.Visualization.Surface.Model.create(h,{surface:f.params.surface,theme:m,parameters:{isWireframe:f.params.isWireframe}}).run(w)];case 1:return C=E.sent(),[2,e.Entity.Visual.Surface.create(f,{label:f.params.label||"Surface",model:C,style:b,isSelectable:!f.params.isNotInteractive,tag:f.params.tag})]}})})})})})(x=p.Basic||(p.Basic={}))})(d=s.Transformer||(s.Transformer={}))})(o=e.Entity||(e.Entity={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){var x;(function(l){"use strict";var _=this;function v(c){return e.Tree.Transformer.action({id:"molecule-download-molecule-"+c.sourceId,name:"Molecule from "+c.name,description:c.description,from:[s.Root],to:[s.Action],defaultParams:function(h){return{id:c.defaultId,format:i.Core.Formats.Molecule.SupportedFormats.mmCIF}},validateParams:function(h){return!h.id||!h.id.trim().length?["Enter "+(c.isFullUrl?"URL":"Id")]:void 0}},function(h,f,m){var b=c.specificFormat?c.specificFormat:m.params.format;return e.Tree.Transform.build().add(f,p.Data.Download,{url:c.urlTemplate(m.params.id.trim()),type:b.isBinary?"Binary":"String",id:m.params.id,description:c.name,title:"Molecule"}).then(l.CreateFromData,{format:c.specificFormat?c.specificFormat:m.params.format},{isBinding:!0}).then(l.CreateModel,{modelIndex:0},{isBinding:!1})})}l.downloadMoleculeSource=v,l.OpenMoleculeFromFile=e.Tree.Transformer.action({id:"molecule-open-from-file",name:"Molecule from File",description:"Open a molecule from a file ("+i.Core.Formats.Molecule.SupportedFormats.All.map(function(c){return c.name}).join(", ")+").",from:[s.Root],to:[s.Action],defaultParams:function(c){return{file:void 0}},validateParams:function(c){return c.file?i.Core.Formats.FormatInfo.getFormat(c.file.name,i.Core.Formats.Molecule.SupportedFormats.All)?void 0:["Select a supported file format ("+[].concat(i.Core.Formats.Molecule.SupportedFormats.All.map(function(h){return h.extensions})).join(", ")+")."]:["Select a file"]}},function(c,h,f){var m=i.Core.Formats.FormatInfo.getFormat(f.params.file.name,i.Core.Formats.Molecule.SupportedFormats.All);return e.Tree.Transform.build().add(h,p.Data.OpenFile,{file:f.params.file,type:m.isBinary?"Binary":"String"}).then(l.CreateFromData,{format:m},{isBinding:!0}).then(l.CreateModel,{modelIndex:0},{isBinding:!1})}),l.CreateFromData=e.Tree.Transformer.create({id:"molecule-create-from-data",name:"Molecule",description:"Create a molecule from string or binary data.",from:[s.Data.String,s.Data.Binary],to:[s.Molecule.Molecule],defaultParams:function(c){return{format:i.Core.Formats.Molecule.SupportedFormats.mmCIF}}},function(c,h,f){return e.Task.create("Create Molecule ("+h.props.label+")","Silent",function(){return H(_,void 0,void 0,function(){var m,b,w,C;return q(this,function(E){switch(E.label){case 0:return[4,e.Task.fromComputation("Create Molecule ("+h.props.label+")","Normal",f.params.format.parse(h.props.data,{id:f.params.customId})).setReportTime(!0).run(c)];case 1:if(m=E.sent(),m.isError)throw m.toString();if(m.warnings&&m.warnings.length>0)for(b=0,w=m.warnings;b<w.length;b++)C=w[b],c.logger.warning(C);return[2,s.Molecule.Molecule.create(f,{label:m.result.id,molecule:m.result})]}})})})}),l.CreateFromMmCif=e.Tree.Transformer.create({id:"molecule-create-from-mmcif",name:"Molecule",description:"Create a molecule from a mmCIF data block.",from:[s.Data.CifDictionary],to:[s.Molecule.Molecule],defaultParams:function(c){return{blockIndex:0}}},function(c,h,f){return e.Task.create("Create Molecule ("+h.props.label+")","Normal",function(m){return H(_,void 0,void 0,function(){var b,w,C;return q(this,function(E){switch(E.label){case 0:return[4,m.updateProgress("Creating...")];case 1:if(E.sent(),b=f.params.blockIndex|0,w=h.props.dictionary.dataBlocks[b],!w)throw"The source contains only "+h.props.dictionary.dataBlocks.length+" data block(s), tried to access the "+(b+1)+"-th.";return C=i.Core.Formats.Molecule.mmCIF.ofDataBlock(w),[2,s.Molecule.Molecule.create(f,{label:C.id,molecule:C})]}})})}).setReportTime(!0)}),l.CreateModel=e.Tree.Transformer.create({id:"molecule-create-model",name:"Model",description:"Create a model of a molecule.",from:[s.Molecule.Molecule],to:[s.Molecule.Model],isUpdatable:!0,defaultParams:function(c){return{modelIndex:0}}},function(c,h,f){return e.Task.create("Create Model ("+h.props.label+")","Background",function(m){return H(_,void 0,void 0,function(){var b,w,C;return q(this,function(E){if(b=f.params,w=b.modelIndex|0,C=h.props.molecule.models[w],!C)throw"The molecule contains only "+h.props.molecule.models.length+" model(s), tried to access the "+(w+1)+"-th.";return[2,s.Molecule.Model.create(f,{label:"Model "+C.modelId,description:C.data.atoms.count+" atom"+(C.data.atoms.count!==1?"s":""),model:C})]})})})}),l.CreateSelection=e.Tree.Transformer.create({id:"molecule-create-selection",name:"Selection",description:"Create an atom selection.",from:[s.Molecule.Model,s.Molecule.Visual],to:[s.Molecule.Selection],isUpdatable:!0,defaultParams:function(c){return{queryString:c.settings.get("molecule.model.defaultQuery")||""}},validateParams:function(c){if(!(c.queryString||"").trim().length)return["Enter query"];try{return i.Core.Structure.Query.Builder.toQuery(c.queryString)&&void 0||void 0}catch(h){return[""+h]}}},function(c,h,f){return e.Task.create("Create Selection ("+h.props.label+")","Background",function(m){return H(_,void 0,void 0,function(){var b,w,C,E;return q(this,function(S){if(b=f.params,w=i.Core.Structure.Query.Builder.toQuery(b.queryString),C=f.params.inFullContext?e.Utils.Molecule.findModel(h).props.model.queryContext:e.Utils.Molecule.findQueryContext(h),E=w(C).unionAtomIndices(),!E.length)throw{warn:!0,message:"Empty selection"+(f.params.name?" ("+f.params.name+")":"")+"."};return[2,s.Molecule.Selection.create(f,{label:b.name?b.name:"Selection",description:E.length+" atom"+(E.length!==1?"s":""),indices:E})]})})}).setReportTime(!f.params.silent)}),l.CreateSelectionFromQuery=e.Tree.Transformer.create({id:"molecule-create-selection",name:"Selection",description:"Create an atom selection.",from:[s.Molecule.Selection,s.Molecule.Model,s.Molecule.Visual],to:[s.Molecule.Selection],defaultParams:function(c){}},function(c,h,f){return e.Task.create("Create Selection ("+h.props.label+")","Background",function(m){return H(_,void 0,void 0,function(){var b,w,C,E;return q(this,function(S){if(b=f.params,w=i.Core.Structure.Query.Builder.toQuery(b.query),C=f.params.inFullContext?e.Utils.Molecule.findModel(h).props.model.queryContext:e.Utils.Molecule.findQueryContext(h),E=w(C).unionAtomIndices(),!E.length)throw{warn:!0,message:"Empty selection"+(f.params.name?" ("+f.params.name+")":"")+"."};return[2,s.Molecule.Selection.create(f,{label:b.name?b.name:"Selection",description:E.length+" atom"+(E.length!==1?"s":""),indices:E})]})})}).setReportTime(!f.params.silent)}),l.CreateAssembly=e.Tree.Transformer.create({id:"molecule-create-assemly",name:"Assembly",description:"Create an assembly of a molecule.",from:[s.Molecule.Model],to:[s.Molecule.Model],defaultParams:function(c,h){var f=e.Utils.Molecule.findModel(h),m={name:c.settings.get("molecule.model.defaultAssemblyName")||"1"},b=f.props.model.data.assemblyInfo;return!b||!b.assemblies.length||b.assemblies.filter(function(w){return w.name===m.name})||(m.name=b.assemblies[0].name),m},isUpdatable:!0,isApplicable:function(c){return!!(c&&c.props.model.data.assemblyInfo&&c.props.model.data.assemblyInfo.assemblies.length)}},function(c,h,f){return e.Task.create("Create Model ("+h.props.label+")","Background",function(m){return H(_,void 0,void 0,function(){var b,w,C;return q(this,function(E){switch(E.label){case 0:if(b=h.props.model.data.assemblyInfo,!b||!b.assemblies.length)throw"Assembly info not available.";if(w=b.assemblies.filter(function(S){return S.name===f.params.name})[0],!w)throw"No assembly called '"+f.params.name+"' found.";return[4,m.updateProgress("Creating...")];case 1:return E.sent(),C=i.Core.Structure.buildAssembly(h.props.model,w),[2,s.Molecule.Model.create(f,{label:"Assembly "+w.name,description:C.data.atoms.count+" atom"+(C.data.atoms.count!==1?"s":""),model:C})]}})})})}),l.CreateSymmetryMates=e.Tree.Transformer.create({id:"molecule-create-symmetry-mates",name:"Crystal Symmetry",description:"Find crystal symmetry mates or interaction partners.",from:[s.Molecule.Model],to:[s.Molecule.Model],defaultParams:function(c){return{type:"Interaction",radius:5}},isUpdatable:!0,isApplicable:function(c){if(!c||!c.props.model.data.symmetryInfo)return!1;var h=c.props.model.data.symmetryInfo;return!(h.cellSize[0]===1&&h.cellSize[1]===1&&h.cellSize[2]===1)}},function(c,h,f){return e.Task.create("Create Model ("+h.props.label+")","Background",function(m){return H(_,void 0,void 0,function(){var b,w,C;return q(this,function(E){switch(E.label){case 0:if(b=h.props.model.data.symmetryInfo,!b)throw"Spacegroup info info not available.";return w=Math.max(f.params.radius,0),[4,m.updateProgress("Creating...")];case 1:return E.sent(),C=f.params.type==="Mates"?i.Core.Structure.buildSymmetryMates(h.props.model,w):i.Core.Structure.buildPivotGroupSymmetry(h.props.model,w),[2,s.Molecule.Model.create(f,{label:"Symmetry",model:C,description:C.data.atoms.count+" atom"+(C.data.atoms.count!==1?"s":"")+", "+f.params.type+" "+e.Utils.round(w,1)+" \u212B"})]}})})})}),l.ModelTransform3D=e.Tree.Transformer.create({id:"molecule-model-transform3d",name:"Transform 3D",description:"Transform 3D coordinates of a model using a 4x4 matrix.",from:[s.Molecule.Model],to:[s.Molecule.Model],validateParams:function(c){return!c||!c.transform||c.transform.length!==16?["Specify a 4x4 transform matrix."]:void 0},defaultParams:function(c,h){return{transform:i.Core.Geometry.LinearAlgebra.Matrix4.identity()}},isUpdatable:!1},function(c,h,f){return e.Task.create("Transform 3D ("+h.props.label+")","Normal",function(m){return H(_,void 0,void 0,function(){var b,w,C;return q(this,function(E){switch(E.label){case 0:return[4,m.updateProgress("Transforming...")];case 1:return E.sent(),b=h.props.model,w={t:f.params.transform,v:i.Core.Geometry.LinearAlgebra.Vector3.zero()},C=i.Core.Structure.Molecule.Model.withTransformedXYZ(b,w,function(S,M,A,R,D){var N=S.v;i.Core.Geometry.LinearAlgebra.Vector3.set(N,M,A,R),i.Core.Geometry.LinearAlgebra.Vector3.transformMat4(D,N,S.t)}),[2,s.Molecule.Model.create(f,{label:h.props.label,description:f.params.description?f.params.description:"Transformed",model:C})]}})})})}),l.CreateVisual=e.Tree.Transformer.create({id:"molecule-create-visual",name:"Visual",description:"Create a visual of a molecule or a selection.",from:[s.Molecule.Model,s.Molecule.Selection],to:[s.Molecule.Visual],isUpdatable:!0,defaultParams:function(c){return{style:e.Visualization.Molecule.Default.ForType.get("Cartoons")}},validateParams:function(c){return c.style?void 0:["Specify Style"]},customController:function(c,h,f){return new e.Components.Transform.MoleculeVisual(c,h,f)}},function(c,h,f){var m=f.params;return e.Visualization.Molecule.create(h,f,m.style).setReportTime(e.Visualization.Style.getTaskType(f.params.style)==="Normal")},function(c,h,f){var m=h.transform.params;if(!(m.style.type!==f.params.style.type||!e.Utils.deepEqual(m.style.params,f.params.style.params))){var b=h.props.model;if(b){var w=e.Utils.Molecule.findModel(h.parent);if(w){var C=f.params.style.theme,E=C.template.provider(w,e.Visualization.Theme.getProps(C));return b.applyTheme(E),h.props.style=f.params.style,s.nodeUpdated(h),e.Task.resolve(f.transformer.info.name,"Background",e.Tree.Node.Null)}}}}),l.CreateMacromoleculeVisual=e.Tree.Transformer.action({id:"molecule-create-macromolecule-visual",name:"Macromolecule Visual",description:"Create a visual of a molecule that is split into polymer, HET, and water parts.",from:[s.Molecule.Selection,s.Molecule.Model],to:[s.Action],validateParams:function(c){return!c.polymer&&!c.het&&!c.water?["Select at least one component"]:void 0},defaultParams:function(c){return{polymer:!0,het:!0,water:!0}}},function(c,h,f){var m=e.Tree.Transform.build().add(h,p.Basic.CreateGroup,{label:"Group",description:"Macromolecule"},{ref:f.params.groupRef});if(f.params.polymer&&m.then(l.CreateSelectionFromQuery,{query:i.Core.Structure.Query.nonHetPolymer(),name:"Polymer",silent:!0},{isBinding:!0}).then(l.CreateVisual,{style:e.Visualization.Molecule.Default.ForType.get("Cartoons")},{ref:f.params.polymerRef}),f.params.het&&m.then(l.CreateSelectionFromQuery,{query:i.Core.Structure.Query.hetGroups(),name:"HET",silent:!0},{isBinding:!0}).then(l.CreateVisual,{style:e.Visualization.Molecule.Default.ForType.get("BallsAndSticks")},{ref:f.params.hetRef}),f.params.water){var b={type:"BallsAndSticks",params:{useVDW:!1,atomRadius:.23,bondRadius:.09,detail:"Automatic"},theme:{template:e.Visualization.Molecule.Default.ElementSymbolThemeTemplate,colors:e.Visualization.Molecule.Default.ElementSymbolThemeTemplate.colors,transparency:{alpha:.25}}};m.then(l.CreateSelectionFromQuery,{query:i.Core.Structure.Query.entities({type:"water"}),name:"Water",silent:!0},{isBinding:!0}).then(l.CreateVisual,{style:b},{ref:f.params.waterRef})}return m}),l.CreateLabels=e.Tree.Transformer.create({id:"molecule-create-labels",name:"Labels",description:"Create a labels for a molecule or a selection.",from:[s.Molecule.Model,s.Molecule.Selection,s.Molecule.Visual],to:[s.Visual.Labels],isUpdatable:!0,defaultParams:function(c){return{style:e.Visualization.Labels.Default.MoleculeLabels}},validateParams:function(c){return c.style?void 0:["Specify Style"]},customController:function(c,h,f){return new e.Components.Transform.MoleculeLabels(c,h,f)}},function(c,h,f){var m=f.params;return e.Visualization.Labels.createMoleculeLabels(h,f,m.style).setReportTime(!1)},function(c,h,f){var m=h.transform.params,b=f.params;if(e.Visualization.Labels.Style.moleculeHasOnlyThemeChanged(m.style,b.style)){var w=h.props.model,C=e.Tree.Node.findClosestNodeOfType(h,[s.Molecule.Model,s.Molecule.Selection,s.Molecule.Visual]);if(C){var E=b.style.theme.template.provider(C,e.Visualization.Theme.getProps(b.style.theme));return w.applyTheme(E),s.nodeUpdated(h),e.Task.resolve(f.transformer.info.name,"Background",e.Tree.Node.Null)}}})})(x=p.Molecule||(p.Molecule={}))})(d=s.Transformer||(s.Transformer={}))})(o=e.Entity||(e.Entity={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){var x;(function(l){l.Create=e.Tree.Transformer.create({id:"labels-create",name:"Labels",description:"Create a labels for a molecule or a selection.",from:[],to:[s.Visual.Labels],isUpdatable:!1,defaultParams:function(_){return{}},customController:function(_,v,c){return new e.Components.Transform.MoleculeLabels(_,v,c)}},function(_,v,c){return e.Visualization.Labels.createGenericLabels(v,c,c.params).setReportTime(!1)},function(_,v,c){var h=v.transform.params,f=c.params;if(!(h.positions!==f.positions||h.sizes!==f.sizes||h.labels!==f.labels||h.options!==f.options)){var m=v.props.model,b=e.Tree.Node.findClosestNodeOfType(v,[s.Root]);if(b){var w=f.style.theme.template.provider(b,e.Visualization.Theme.getProps(f.style.theme));return m.applyTheme(w),s.nodeUpdated(v),e.Task.resolve(c.transformer.info.name,"Background",e.Tree.Node.Null)}}})})(x=p.Labels||(p.Labels={}))})(d=s.Transformer||(s.Transformer={}))})(o=e.Entity||(e.Entity={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){var x;(function(l){"use strict";var _=this;function v(h){return h==null?"String":h.toLowerCase()==="binary"?"Binary":"String"}function c(h){var f=h===void 0?e.Utils.DataCompressionMethod.None:h;return f!==e.Utils.DataCompressionMethod.None}l.Download=e.Tree.Transformer.create({id:"data-download",name:"Download Data",description:"Downloads a string or binary data from the given URL (if the host server supports cross domain requests).",from:[s.Root],to:[s.Data.String,s.Data.Binary],validateParams:function(h){return!h.url||!h.url.trim().length?["Enter URL"]:h.type?h.type==="String"&&c(h.responseCompression)?["Decompression is only available for Binary data."]:void 0:["Specify type"]},defaultParams:function(){return{id:"",description:"",type:"String",url:"",responseCompression:e.Utils.DataCompressionMethod.None}}},function(h,f,m){var b=m.params;return e.Task.create("Download","Silent",function(){return H(_,void 0,void 0,function(){var w;return q(this,function(C){switch(C.label){case 0:return[4,e.Utils.ajaxGet({url:b.url,type:v(b.type),compression:b.responseCompression,title:b.title}).setReportTime(!0).run(h)];case 1:return w=C.sent(),b.type==="String"?[2,s.Data.String.create(m,{label:b.id?b.id:b.url,description:b.description,data:w})]:[2,s.Data.Binary.create(m,{label:b.id?b.id:b.url,description:b.description,data:w})]}})})})}),l.OpenFile=e.Tree.Transformer.create({id:"data-open-file",name:"Open Data File",description:"Read a string or binary data from the selected file.",from:[s.Root],to:[s.Data.String,s.Data.Binary],validateParams:function(h){return h.file?void 0:["Select a file"]},defaultParams:function(){return{type:"String",file:void 0}}},function(h,f,m){return e.Task.create("Download","Silent",function(b){return H(_,void 0,void 0,function(){var w,C;return q(this,function(E){switch(E.label){case 0:return w=m.params,[4,e.Utils.readFromFile(w.file,v(w.type)).setReportTime(!0).run(h)];case 1:return C=E.sent(),w.type==="String"?[2,s.Data.String.create(m,{label:w.id?w.id:w.file.name,description:w.description,data:C})]:[2,s.Data.Binary.create(m,{label:w.id?w.id:w.file.name,description:w.description,data:C})]}})})})}),l.ParseCif=e.Tree.Transformer.create({id:"data-parse-cif",name:"CIF Dictionary",description:"Parse CIF dictionary from a string.",from:[s.Data.String],to:[s.Data.CifDictionary],defaultParams:function(){return{}}},function(h,f,m){return e.Task.create("CIF Parse ("+f.props.label+")","Normal",function(b){return H(_,void 0,void 0,function(){var w;return q(this,function(C){switch(C.label){case 0:return[4,b.updateProgress("Parsing...")];case 1:if(C.sent(),w=i.Core.Formats.CIF.Text.parse(f.props.data),w.isError)throw w.toString();return[2,s.Data.CifDictionary.create(m,{label:m.params.id?m.params.id:"CIF Dictionary",description:m.params.description,dictionary:w.result})]}})})}).setReportTime(!0)}),l.ParseBinaryCif=e.Tree.Transformer.create({id:"data-parse-binary-cif",name:"CIF Dictionary",description:"Parse CIF dictionary from BinaryCIF data.",from:[s.Data.Binary],to:[s.Data.CifDictionary],defaultParams:function(){return{}}},function(h,f,m){return e.Task.create("BinaryCIF Parse ("+f.props.label+")","Normal",function(b){return H(_,void 0,void 0,function(){var w;return q(this,function(C){switch(C.label){case 0:return[4,b.updateProgress("Parsing...")];case 1:if(C.sent(),w=i.Core.Formats.CIF.Binary.parse(f.props.data),w.isError)throw w.toString();return[2,s.Data.CifDictionary.create(m,{label:m.params.id?m.params.id:"CIF Dictionary",description:m.params.description,dictionary:w.result})]}})})}).setReportTime(!0)}),l.ParseJson=e.Tree.Transformer.create({id:"data-parse-json",name:"JSON",description:"Parse a string to JSON object.",from:[s.Data.String],to:[s.Data.Json],defaultParams:function(){return{}}},function(h,f,m){return e.Task.create("JSON Parse ("+f.props.label+")","Normal",function(b){return H(_,void 0,void 0,function(){var w;return q(this,function(C){switch(C.label){case 0:return[4,b.updateProgress("Parsing...")];case 1:return C.sent(),w=JSON.parse(f.props.data),[2,s.Data.Json.create(m,{label:m.params.id?m.params.id:"JSON Data",description:m.params.description,data:w})]}})})}).setReportTime(!0)}),l.FromData=e.Tree.Transformer.create({id:"data-from-data",name:"From Data",description:"Creates a data entity from string or binary data",from:[s.Root],to:[s.Data.String,s.Data.Binary],defaultParams:function(){}},function(h,f,m){var b=m.params.data,w=b instanceof ArrayBuffer?s.Data.Binary.create(m,{label:m.params.id?m.params.id:"Binary Data",description:m.params.description,data:b}):s.Data.String.create(m,{label:m.params.id?m.params.id:"String Data",description:m.params.description,data:b});return e.Task.resolve("From Data","Silent",w)})})(x=p.Data||(p.Data={}))})(d=s.Transformer||(s.Transformer={}))})(o=e.Entity||(e.Entity={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){var x;(function(l){"use strict";var _=this;l.ParseData=e.Tree.Transformer.create({id:"density-parse-binary",name:"Density Data",description:"Parse density from binary data.",from:[s.Data.String,s.Data.Binary],to:[s.Density.Data],isUpdatable:!0,defaultParams:function(){return{format:i.Core.Formats.Density.SupportedFormats.CCP4}}},function(c,h,f){return e.Task.create("Create Density ("+h.props.label+")","Background",function(m){return H(_,void 0,void 0,function(){var b,w;return q(this,function(C){switch(C.label){case 0:return[4,e.Task.fromComputation("Parse Density ("+h.props.label+")","Normal",f.params.format.parse(h.props.data)).setReportTime(!0).run(c)];case 1:if(b=C.sent(),b.isError)throw b.toString();return w=s.Density.Data.create(f,{label:f.params.id?f.params.id:"Density Data",data:b.result}),[2,w]}})})})}),l.CreateFromCif=e.Tree.Transformer.create({id:"density-create-from-cif",name:"Density Data",description:"Parse density from CIF data.",from:[s.Data.CifDictionary],to:[s.Density.Data],isUpdatable:!1,defaultParams:function(){return{blockIndex:0}}},function(c,h,f){return e.Task.create("Create Density","Normal",function(m){return H(_,void 0,void 0,function(){var b;return q(this,function(w){switch(w.label){case 0:return[4,m.updateProgress("Parsing...")];case 1:if(w.sent(),b=i.Core.Formats.Density.CIF.parse(h.props.dictionary.dataBlocks[f.params.blockIndex]),b.isError)throw b.toString();return[2,s.Density.Data.create(f,{label:f.params.id?f.params.id:"Density Data",data:b.result,description:b.result.name})]}})})}).setReportTime(!0)}),l.CreateFromData=e.Tree.Transformer.create({id:"density-create-from-data",name:"Density Data",description:"Create density from data.",from:[],to:[s.Density.Data],isUpdatable:!1,defaultParams:function(){return{}}},function(c,h,f){var m=s.Density.Data.create(f,{label:f.params.id?f.params.id:"Density Data",data:f.params.data,description:f.params.data.name});return e.Task.resolve("Create Density","Background",m)}),l.CreateVisual=e.Tree.Transformer.create({id:"density-create-visual",name:"Surface",description:"Create a surface from the density data.",from:[s.Density.Data],to:[s.Density.Visual],isUpdatable:!0,defaultParams:function(){return{style:e.Visualization.Density.Default.Style}},validateParams:function(c){return c.style?void 0:["Specify Style"]},customController:function(c,h,f){return new e.Components.Transform.DensityVisual(c,h,f)}},function(c,h,f){var m=f.params;return e.Visualization.Density.create(h,f,m.style).setReportTime(e.Visualization.Style.getTaskType(f.params.style)==="Normal")},function(c,h,f){var m=h.transform.params.style,b=f.params.style;if(m.type===f.params.style.type){var w=e.Tree.Node.findClosestNodeOfType(h,[s.Density.Data]);if(w){var C=h.props.model;if(C&&v(w.props.data,m.params,b.params)){if(!e.Utils.deepEqual(m.theme,f.params.style.theme)){var E=b.theme,S=E.template.provider(w,e.Visualization.Theme.getProps(E));C.applyTheme(S),h.props.style.theme=E,s.nodeUpdated(h)}return e.Task.resolve(f.transformer.info.name,"Background",e.Tree.Node.Null)}}}}),l.CreateVisualBehaviour=e.Tree.Transformer.create({id:"density-create-visual-behaviour",name:"Interactive Surface",description:"Create a surface from the density data when a residue or atom is selected.",from:[s.Density.Data],to:[s.Density.InteractiveSurface],isUpdatable:!0,defaultParams:function(c){return{style:e.Visualization.Density.Default.Style,radius:c.settings.get("density.defaultVisualBehaviourRadius")||0,isoSigmaMin:-5,isoSigmaMax:5,minRadius:0,maxRadius:10,showFull:!1}},customController:function(c,h,f){return new e.Components.Transform.DensityVisual(c,h,f)}},function(c,h,f){var m=f.params,b=new e.Behaviour.Density.ShowDynamicDensity(c,{style:m.style,radius:m.radius,showFull:m.showFull}),w=m.style.params.isoValueType===void 0||m.style.params.isoValueType===e.Visualization.Density.IsoValueType.Sigma;return e.Task.resolve("Behaviour","Background",s.Density.InteractiveSurface.create(f,{label:(m.id?f.params.id:"Interactive")+", "+e.Utils.round(m.style.params.isoValue,2)+(w?" \u03C3":""),behaviour:b}))},function(c,h,f){var m=h.transform.params,b=f.params;if(m.style.type===b.style.type&&!(m.isoSigmaMin!==b.isoSigmaMin||m.isoSigmaMax!==b.isoSigmaMax||m.minRadius!==b.minRadius||m.maxRadius!==b.maxRadius||m.radius!==b.radius||m.showFull!==b.showFull)){var w=e.Tree.Node.findClosestNodeOfType(h,[s.Density.Data]);if(w&&v(w.props.data,m.style.params,b.style.params)){var C=b.style.theme;return h.props.behaviour.updateTheme(C),s.nodeUpdated(h),e.Task.resolve(f.transformer.info.name,"Background",e.Tree.Node.Null)}}});function v(c,h,f){if(!e.Visualization.Density.areNonIsoParamsSame(h,f))return!1;var m=c.valuesInfo,b=h.isoValueType===e.Visualization.Density.IsoValueType.Absolute?h.isoValue:m.mean+m.sigma*h.isoValue,w=f.isoValueType===e.Visualization.Density.IsoValueType.Absolute?f.isoValue:m.mean+m.sigma*f.isoValue;return Math.abs(b-w)<1e-6}})(x=p.Density||(p.Density={}))})(d=s.Transformer||(s.Transformer={}))})(o=e.Entity||(e.Entity={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){var x;(function(l){var _;(function(v){"use strict";var c=this;v.CreateBehaviour=e.Tree.Transformer.create({id:"streaming-create-behaviour",name:"Coordinate Streaming",description:"Enable coordinate data streaming for this molecule.",from:[s.Molecule.Model],to:[s.Molecule.CoordinateStreaming.Behaviour],defaultParams:function(h){return{server:h.settings.get("molecule.coordinateStreaming.defaultServer")||"",radius:h.settings.get("molecule.coordinateStreaming.defaultRadius")||0}}},function(h,f,m){return e.Task.resolve("Behaviour","Background",s.Molecule.CoordinateStreaming.Behaviour.create(m,{label:"Coordinate Streaming",behaviour:new e.Behaviour.Molecule.CoordinateStreaming(h,m.params.server,m.params.radius)}))}),v.CreateModel=e.Tree.Transformer.create({id:"streaming-create-model",name:"Streaming Model",description:"",from:[s.Molecule.CoordinateStreaming.Behaviour],to:[s.Molecule.Model],defaultParams:function(){}},function(h,f,m){return e.Task.create("Load","Silent",function(b){return H(c,void 0,void 0,function(){var w,C;return q(this,function(E){if(w=i.Core.Formats.CIF.Binary.parse(m.params.data),w.isError)throw new Error("Invalid CIF.");return C=i.Core.Formats.Molecule.mmCIF.ofDataBlock(w.result.dataBlocks[0]).models[0],m.params.transform&&i.Core.Structure.Operator.applyToModelUnsafe(m.params.transform,C),[2,s.Molecule.Model.create(m,{label:"part",model:C})]})})})}),v.InitStreaming=e.Tree.Transformer.action({id:"streaming-init",name:"Coordinate Streaming",description:"Download a smaller version of the molecule required to display cartoon representation and stream the rest of the coordinates as required.",from:[s.Root],to:[s.Action],validateParams:function(h){return(h.id||"").trim().length?(h.server||"").trim().length?void 0:["Specify server"]:["Enter id"]},defaultParams:function(h){return{id:h.settings.get("molecule.coordinateStreaming.defaultId")||"",server:h.settings.get("molecule.coordinateStreaming.defaultServer")||"",radius:h.settings.get("molecule.coordinateStreaming.defaultRadius")||0}}},function(h,f,m){return e.Tree.Transform.build().add(f,p.Data.Download,{url:e.Behaviour.Molecule.CoordinateStreaming.getBaseUrl(m.params.id,m.params.server),type:"Binary",id:m.params.id}).then(p.Data.ParseBinaryCif,{id:m.params.id},{isBinding:!0}).then(l.CreateFromMmCif,{blockIndex:0},{isBinding:!0}).then(l.CreateModel,{modelIndex:0},{isBinding:!1}).then(v.CreateBehaviour,{server:m.params.server,radius:m.params.radius})})})(_=l.CoordinateStreaming||(l.CoordinateStreaming={}))})(x=p.Molecule||(p.Molecule={}))})(d=s.Transformer||(s.Transformer={}))})(o=e.Entity||(e.Entity={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){"use strict";var x=i.Core.Geometry,l=x.LinearAlgebra,_=[e.Entity.Molecule.Model];function v(I){return e.Tree.Node.findClosestNodeOfType(I,_)}p.findModel=v;var c=[e.Entity.Molecule.Model,e.Entity.Molecule.Selection];function h(I){return e.Tree.Node.findClosestNodeOfType(I,c)}p.findModelOrSelection=h;var f=[e.Entity.Molecule.Molecule];function m(I){return e.Tree.Node.findClosestNodeOfType(I,f)}p.findMolecule=m;function b(I){var L=e.Tree.Node.findClosestNodeOfType(I,c);if(e.Entity.isMoleculeModel(L))return L.props.model.queryContext;var Y=L.tree.context.entityCache,J=Y.get(L,e.Entity.Cache.Keys.QueryContext);return J||(J=i.Core.Structure.Query.Context.ofAtomIndices(v(L).props.model,L.props.indices),Y.set(L,e.Entity.Cache.Keys.QueryContext,J))}p.findQueryContext=b;function w(I,L,Y,J,ie,K){for(var Q=I.positions,ne=Q.x,ue=Q.y,fe=Q.z,ge=J.positions,ye=ge.x,pe=ge.y,de=ge.z,he=Number.POSITIVE_INFINITY,_e=L;_e<Y;_e++)for(var ve=ie;ve<K;ve++){var Z=ne[_e]-ye[ve],be=ue[_e]-pe[ve],Ee=fe[_e]-de[ve];he=Math.min(he,Z*Z+be*be+Ee*Ee)}return Math.sqrt(he)}p.getDistance=w;function C(I,L,Y,J){for(var ie=I.positions,K=ie.x,Q=ie.y,ne=ie.z,ue=Y.positions,fe=ue.x,ge=ue.y,ye=ue.z,pe=Number.POSITIVE_INFINITY,de=0,he=L;de<he.length;de++)for(var _e=he[de],ve=0,Z=J;ve<Z.length;ve++){var be=Z[ve],Ee=K[_e]-fe[be],De=Q[_e]-ge[be],Fe=ne[_e]-ye[be];pe=Math.min(pe,Ee*Ee+De*De+Fe*Fe)}return Math.sqrt(pe)}p.getDistanceSet=C;function E(I,L){var Y=v(I);if(!Y){console.warn("Could not find a model for query selection.");return}var J=b(I);try{var ie=i.Core.Structure.Query.Builder.toQuery(L);return{model:Y,indices:ie(J).unionAtomIndices(),queryContext:J}}catch(K){console.error("Query Execution",K);return}}p.getModelAndIndicesFromQuery=E;function S(I,L){for(var Y=I.data.atoms.residueIndex,J=[],ie=I.data.residues.atomStartIndex[Y[L]],K=I.data.residues.atomEndIndex[Y[L]];ie<K;ie++)J.push(ie);return J}p.getResidueIndices=S;function M(I,L,Y){for(var J=I.positions,ie=J.x,K=J.y,Q=J.z,ne=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],ue=[-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE],fe=0,ge=L;fe<ge.length;fe++){var ye=ge[fe];ne[0]=Math.min(ie[ye],ne[0]),ne[1]=Math.min(K[ye],ne[1]),ne[2]=Math.min(Q[ye],ne[2]),ue[0]=Math.max(ie[ye],ue[0]),ue[1]=Math.max(K[ye],ue[1]),ue[2]=Math.max(Q[ye],ue[2])}return ne[0]=ne[0]-Y,ne[1]=ne[1]-Y,ne[2]=ne[2]-Y,ue[0]=ue[0]+Y,ue[1]=ue[1]+Y,ue[2]=ue[2]+Y,{bottomLeft:ne,topRight:ue}}p.getBox=M;var A=function(){function I(L){this.center={x:0,y:0,z:0},this.radiusSquared=0,this.count=0,this.x=L.positions.x,this.y=L.positions.y,this.z=L.positions.z}return I.prototype.addAtom=function(L){this.count++,this.center.x+=this.x[L],this.center.y+=this.y[L],this.center.z+=this.z[L]},I.prototype.finishedAdding=function(){this.center.x/=this.count,this.center.y/=this.count,this.center.z/=this.count},I.prototype.radiusVisit=function(L){var Y=this.center.x-this.x[L],J=this.center.y-this.y[L],ie=this.center.z-this.z[L];this.radiusSquared=Math.max(this.radiusSquared,Y*Y+J*J+ie*ie)},I}();p.CentroidHelper=A;function R(I,L,Y){l.Vector3.set(Y,0,0,0);var J=I.positions,ie=J.x,K=J.y,Q=J.z;if(L.length===0)return 0;if(L.length===1)return l.Vector3.set(Y,ie[L[0]],K[L[0]],Q[L[0]]),0;for(var ne=0,ue=L;ne<ue.length;ne++){var fe=ue[ne];Y[0]+=ie[fe],Y[1]+=K[fe],Y[2]+=Q[fe]}var ge=L.length;Y[0]/=ge,Y[1]/=ge,Y[2]/=ge;for(var ye=0,pe=0,de=L;pe<de.length;pe++){var fe=de[pe],he=Y[0]-ie[fe],_e=Y[1]-K[fe],ve=Y[2]-Q[fe];ye=Math.max(ye,he*he+_e*_e+ve*ve)}return Math.sqrt(ye)}p.getCentroidAndRadius=R,p.Labels3DKinds=["Residue-Name","Residue-Full-Id","Atom-Name","Atom-Element"],p.Labels3DKindLabels={"Residue-Name":"Residue Name","Residue-Full-Id":"Residue Full Id","Atom-Name":"Atom Name","Atom-Element":"Atom Element"};function D(I,L){var Y=L.data.atoms,J=Y.residueIndex,ie=Y.chainIndex,K=Y.name,Q=Y.elementSymbol,ne=L.data.residues,ue=ne.name,fe=ne.seqNumber,ge=L.data.chains.authAsymId;switch(I.kind){case"Residue-Name":return function(ye){return ue[J[ye]]};case"Residue-Full-Id":return function(ye){var pe=J[ye],de=ie[ye];return ue[pe]+" "+ge[de]+" "+fe[pe]};case"Atom-Name":return function(ye){return K[ye]};case"Atom-Element":return function(ye){return Q[ye]};default:return function(ye){return""+ye}}}function N(I,L,Y){for(var J=b(I),ie=L.kind.indexOf("Residue")>=0?i.Core.Structure.Query.residues():i.Core.Structure.Query.allAtoms(),K=ie.compile()(J),Q=D(L,J.structure),ne=i.Core.Utils.DataTable.ofDefinition(i.Core.Structure.Tables.Positions,K.length),ue=ne.x,fe=ne.y,ge=ne.z,ye=[],pe=new Float32Array(K.length),de=l.Vector3.zero(),he=0,_e=0,ve=K.fragments;_e<ve.length;_e++){var Z=ve[_e],be=Q(Z.atomIndices[0]);R(J.structure,Z.atomIndices,de),ue[he]=de[0],fe[he]=de[1],ge[he]=de[2],ye[ye.length]=be,pe[he]=1,he++}return{labels:ye,options:L.labelsOptions,positions:ne,sizes:pe,theme:Y}}p.create3DLabelsParams=N})(d=s.Molecule||(s.Molecule={}))})(o=e.Utils||(e.Utils={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";var d=function(){function p(x){this.context=x,this.subjects={select:new e.Rx.BehaviorSubject(e.Interactivity.Info.empty),click:new e.Rx.BehaviorSubject(e.Interactivity.Info.empty),currentEntity:new e.Rx.BehaviorSubject(void 0)},this.select=this.subjects.select.distinctUntilChanged(function(l){return l},e.Interactivity.interactivityInfoEqual),this.click=this.subjects.click.distinctUntilChanged(function(l){return l},e.Interactivity.interactivityInfoEqual),this.currentEntity=this.subjects.currentEntity,this.init()}return p.prototype.init=function(){var x=this,l=e.Interactivity.Info.empty;e.Event.Tree.NodeRemoved.getStream(this.context).subscribe(function(_){e.Interactivity.isSelection(l)&&l.source===_.data&&(l=e.Interactivity.Info.empty,e.Event.Visual.VisualSelectElement.dispatch(x.context,l))}),e.Event.Visual.VisualSelectElement.getStream(this.context).subscribe(function(_){l=_.data,x.subjects.click.onNext(l),!(e.Interactivity.isSelection(l)&&e.Entity.isVisual(l.source)&&!l.source.props.isSelectable)&&x.subjects.select.onNext(l)}),e.Event.Entity.CurrentChanged.getStream(this.context).subscribe(function(_){return x.subjects.currentEntity.onNext(_.data)})},p}();s.Streams=d})(o=e.Behaviour||(e.Behaviour={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";function d(E){e.Event.Tree.NodeAdded.getStream(E).subscribe(function(S){var M=S.data;M&&(M.transform.isUpdate||M.type.info.traits.isSilent)||e.Command.Entity.SetCurrent.dispatch(E,M)})}s.SetEntityToCurrentWhenAdded=d,s.SuppressCreateVisualWhenModelIsAdded=!1;function p(E){e.Event.Tree.NodeAdded.getStream(E).subscribe(function(S){if(!(s.SuppressCreateVisualWhenModelIsAdded||!e.Tree.Node.is(S.data,e.Entity.Molecule.Model)||S.data.isHidden)){var M=e.Entity.Transformer.Molecule.CreateMacromoleculeVisual.info.defaultParams(E,S.data);e.Command.Tree.ApplyTransform.dispatch(E,{node:S.data,transform:e.Entity.Transformer.Molecule.CreateMacromoleculeVisual.create(M)})}})}s.CreateVisualWhenModelIsAdded=p;function x(E){e.Event.Tree.NodeAdded.getStream(E).subscribe(function(S){var M=S.data;if(e.Entity.isMoleculeSelection(M)&&e.Entity.isVisual(M.parent)){var A=M,R=M.parent;R.props.model.applySelection(A.props.indices,1)}}),e.Event.Tree.NodeRemoved.getStream(E).subscribe(function(S){var M=S.data;if(e.Entity.isMoleculeSelection(M)&&e.Entity.isVisual(M.parent)){var A=M,R=M.parent;R.props.model.applySelection(A.props.indices,2)}})}s.ApplySelectionToVisual=x;function l(E,S){var M=void 0,A=void 0;E.subscribe(function(R){A&&(A.applySelection(M,2),A=void 0,M=void 0),!(e.Interactivity.isEmpty(R)||!e.Entity.isVisual(R.source))&&(A=R.source.props.model,M=R.elements,A.applySelection(M,1))})}function _(E){l(E.behaviours.click,E)}s.ApplyInteractivitySelection=_;function v(E){return function(S){l(S.behaviours.click.filter(function(M){return E(M,S)}),S)}}s.FilteredApplyInteractivitySelection=v;function c(E){var S=e.Interactivity.Info.empty;e.Event.Visual.VisualSelectElement.getStream(E).subscribe(function(M){if(e.Interactivity.isEmpty(M.data)||e.Interactivity.isEmpty(S)){S=M.data;return}(e.Tree.Node.hasAncestor(S.source,M.data.source)||e.Tree.Node.hasAncestor(M.data.source,S.source))&&e.Interactivity.interactivitySelectionElementsEqual(M.data,S)?(S=e.Interactivity.Info.empty,setTimeout(function(){return e.Event.Visual.VisualSelectElement.dispatch(E,e.Interactivity.Info.empty)},0)):S=M.data})}s.UnselectElementOnRepeatedClick=c;var h=i.Core.Geometry.LinearAlgebra.Vector3.zero();function f(E,S){var M=e.Utils.Molecule.findModel(S.source).props.model;if(M){var A=S.elements;S.elements.length===1&&(A=e.Utils.Molecule.getResidueIndices(M,S.elements[0]));var R=e.Utils.Molecule.getCentroidAndRadius(M,A,h);if(S.elements.length===1){var D=S.elements[0];h[0]=M.positions.x[D],h[1]=M.positions.y[D],h[2]=M.positions.z[D]}E.scene.camera.focusOnPoint(i.Core.Geometry.LinearAlgebra.Vector3.toObj(h),Math.max(R,7))}}function m(E,S){if(!(e.Interactivity.isEmpty(S)||S.source.type.info.typeClass!=="Visual")){var M=S.source,A=M.props.model;if(A){var R=A.getBoundingSphereOfSelection(S.elements);R?E.scene.camera.focusOnPoint(i.Core.Geometry.LinearAlgebra.Vector3.toObj(R.center),Math.max(R.radius,7)):E.scene.camera.focusOnModel(A)}}}function b(E,S){E.subscribe(function(M){e.Interactivity.Molecule.isMoleculeModelInteractivity(M)?f(S,M):m(S,M)})}function w(E){b(E.behaviours.click,E)}s.FocusCameraOnSelect=w;function C(E){return function(S){b(S.behaviours.click.filter(function(M){return E(M,S)}),S)}}s.FilteredFocusCameraOnSelect=C})(o=e.Behaviour||(e.Behaviour={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){"use strict";var x=i.Core.Structure.Query,l=e.Entity.Transformer;p.SuppressShowInteractionOnSelect=!1;function _(h){return function(f){var m=void 0,b=void 0,w={type:"BallsAndSticks",taskType:"Silent",params:{useVDW:!0,vdwScaling:.25,bondRadius:.13,detail:"Automatic"},theme:{template:e.Visualization.Molecule.Default.ElementSymbolThemeTemplate,colors:e.Visualization.Molecule.Default.ElementSymbolThemeTemplate.colors.set("Bond",i.Visualization.Theme.Default.SelectionColor),transparency:{alpha:.4}},isNotSelectable:!0},C={type:"BallsAndSticks",taskType:"Silent",params:{useVDW:!1,atomRadius:.15,bondRadius:.07,detail:"Automatic"},theme:{template:e.Visualization.Molecule.Default.UniformThemeTemplate,colors:e.Visualization.Molecule.Default.UniformThemeTemplate.colors.set("Uniform",{r:.4,g:.4,b:.4}),transparency:{alpha:.75}},isNotSelectable:!0};function E(){m&&(e.Command.Tree.RemoveNode.dispatch(f,m),m=void 0,b=void 0)}f.behaviours.click.subscribe(function(S){if(p.SuppressShowInteractionOnSelect||e.Interactivity.isEmpty(S)){E();return}if(S.source.ref===b){var M=e.Utils.Molecule.findModel(S.source);if(!M)return;var A=x.atomsFromIndices(S.elements);setTimeout(e.Command.Molecule.CreateSelectInteraction.dispatch(f,{entity:M,query:A}),0);return}var R=e.Entity.isVisual(S.source)?S.source.props.isSelectable:!0;if(R&&(E(),!(e.Interactivity.isEmpty(S)||!e.Utils.Molecule.findModelOrSelection(S.source)))){var D=x.atomsFromIndices(S.elements).wholeResidues(),N=x.atomsFromIndices(S.elements).wholeResidues().ambientResidues(h),I=e.Utils.generateUUID(),L=e.Tree.Transform.build().add(S.source,l.Basic.CreateGroup,{label:"Interaction"},{ref:I,isHidden:!0});m=I,b=e.Utils.generateUUID(),L.then(l.Molecule.CreateSelectionFromQuery,{query:N,name:"Ambience",silent:!0,inFullContext:!0},{isBinding:!0}).then(l.Molecule.CreateVisual,{style:C},{ref:b}),L.then(l.Molecule.CreateSelectionFromQuery,{query:D,name:"Ligand",silent:!0,inFullContext:!0},{isBinding:!0}).then(l.Molecule.CreateVisual,{style:w}),e.Tree.Transform.apply(f,L).run()}})}}p.ShowInteractionOnSelect=_;function v(h){h.highlight.addProvider(function(f){if(e.Interactivity.Molecule.isMoleculeModelInteractivity(f)){var m=e.Interactivity.Molecule.transformInteraction(f);return e.Interactivity.Molecule.formatInfo(m)}})}p.HighlightElementInfo=v;function c(h){var f=e.Interactivity.Info.empty,m=void 0,b=void 0;h.behaviours.click.subscribe(function(w){if(!e.Interactivity.Molecule.isMoleculeModelInteractivity(w))f=e.Interactivity.Info.empty,b=void 0,m=void 0;else{f=w;var C=e.Utils.Molecule.findModel(w.source);C?(b=C.props.model,m=e.Interactivity.Molecule.formatInfoShort(e.Interactivity.Molecule.transformInteraction(w))):(f=e.Interactivity.Info.empty,b=void 0,m=void 0)}}),h.highlight.addProvider(function(w){if(e.Interactivity.Molecule.isMoleculeModelInteractivity(w)&&!e.Interactivity.isEmpty(f)){var C=e.Utils.Molecule.findModel(w.source);if(C){var E=e.Utils.Molecule.getDistanceSet(b,f.elements,C.props.model,w.elements);if(!(E<1e-4))return"<span><b>"+e.Utils.round(E,2)+" \u212B</b> from <b>"+m+"</b></span>"}}})}p.DistanceToLastClickedElement=c})(d=s.Molecule||(s.Molecule={}))})(o=e.Behaviour||(e.Behaviour={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){"use strict";var x="__ShowDynamicDensity-toast",l=function(){function _(v,c){this.context=v,this.params=c,this.obs=[],this.ref=e.Utils.generateUUID()}return _.prototype.remove=function(){var v=this.getVisual();v&&e.Tree.remove(v)},_.prototype.getVisual=function(){return this.context.select(this.ref)[0]},_.prototype.update=function(v){if(!this.params.showFull&&!e.Interactivity.Molecule.isMoleculeModelInteractivity(v)){this.remove();return}e.Command.Toast.Hide.dispatch(this.context,{key:x});var c=e.Utils.shallowClone(this.params.style);if(c.params=e.Utils.shallowClone(c.params),this.params.showFull)c.params.bottomLeft=void 0,c.params.topRight=void 0,c.taskType="Normal";else{var h=v,f=e.Utils.Molecule.findModel(h.source),m=h.elements,b=f.props.model;h.elements.length===1&&(m=e.Utils.Molecule.getResidueIndices(b,h.elements[0]));var w=e.Utils.Molecule.getBox(b,m,this.params.radius);c.params.bottomLeft=w.bottomLeft,c.params.topRight=w.topRight,c.taskType="Silent"}var C,E=this.getVisual();if(E)C=e.Entity.Transformer.Density.CreateVisual.create({style:c},{ref:this.ref,isHidden:!0}).update(this.context,E);else{var S=e.Entity.Transformer.Density.CreateVisual.create({style:c},{ref:this.ref,isHidden:!0});S.isUpdate=!0,C=S.apply(this.context,this.behaviour)}C.run()},_.prototype.updateTheme=function(v){if(this.params.style.theme=v,!!this.behaviour){var c=this.getVisual();if(c){var h=e.Tree.Node.findClosestNodeOfType(this.behaviour,[e.Entity.Density.Data]),f=v.template.provider(h,e.Visualization.Theme.getProps(v));c.props.model.applyTheme(f)}}},_.prototype.dispose=function(){this.remove(),e.Command.Toast.Hide.dispatch(this.context,{key:x});for(var v=0,c=this.obs;v<c.length;v++){var h=c[v];h.dispose()}this.obs=[]},_.prototype.register=function(v){var c=this;this.behaviour=v,this.params.showFull||e.Command.Toast.Show.dispatch(this.context,{key:x,title:"Density",message:"Click on a residue or an atom to view the data.",timeoutMs:3e4}),this.obs.push(this.context.behaviours.select.subscribe(function(h){c.update(h)}))},_}();p.ShowDynamicDensity=l})(d=s.Density||(s.Density={}))})(o=e.Behaviour||(e.Behaviour={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){"use strict";var x=e.Entity.Transformer,l=function(){function _(v,c,h){h===void 0&&(h=5),this.context=v,this.radius=h,this.obs=[],this.target=void 0,this.behaviour=void 0,this.ref=e.Utils.generateUUID(),this.download=void 0,this.cache=e.Utils.LRUCache.create(100),this.style={type:"BallsAndSticks",taskType:"Silent",params:{useVDW:!0,vdwScaling:.17,bondRadius:.07,detail:"Automatic"},theme:{template:e.Visualization.Molecule.Default.ElementSymbolThemeTemplate,colors:e.Visualization.Molecule.Default.ElementSymbolThemeTemplate.colors,transparency:{alpha:1}},isNotSelectable:!0},this.server=_.normalizeServerName(c)}return _.prototype.remove=function(){this.download&&(this.download.tryAbort(),this.download=void 0),e.Command.Tree.RemoveNode.dispatch(this.context,this.ref)},_.prototype.isApplicable=function(v){return e.Interactivity.Molecule.isMoleculeModelInteractivity(v)?e.Tree.Node.hasAncestor(v.source,this.target):!1},_.prototype.update=function(v){var c=this;if(this.remove(),!!this.isApplicable(v)){var h=e.Utils.Molecule.findModel(v.source).props.model,f=h.data.atoms.residueIndex[v.elements[0]],m=h.data.residues,b=m.authAsymId[f],w=void 0;if(h.source===i.Core.Structure.Molecule.Model.Source.Computed){var C=h.parent,E=m.chainIndex[f],S=h.data.chains.sourceChainIndex[E];b=C.data.chains.authAsymId[S],w=h.operators[h.data.chains.operatorIndex[E]].matrix}var M=this.server+"/"+(h.id.toLocaleLowerCase()+"/ambientResidues?")+("modelId="+encodeURIComponent(h.modelId)+"&")+("entityId="+encodeURIComponent(m.entityId[f])+"&")+("authAsymId="+encodeURIComponent(b)+"&")+("authSeqNumber="+encodeURIComponent(""+m.authSeqNumber[f])+"&")+("insCode="+encodeURIComponent(m.insCode[f]!==null?m.insCode[f]:"")+"&")+("radius="+encodeURIComponent(""+this.radius)+"&")+"atomSitesOnly=1&encoding=bcif&lowPrecisionCoords=1";this.download=e.Utils.ajaxGetArrayBuffer(M).runWithContext(this.context);var A=e.Utils.LRUCache.get(this.cache,M);A?this.create(A,w):(this.context.performance.start(this.ref),this.download.result.then(function(R){e.Utils.LRUCache.set(c.cache,M,R),c.context.performance.end(c.ref),c.context.logger.info("Streaming done in "+c.context.performance.formatTime(c.ref)),c.create(R,w)}).catch(function(){c.context.performance.end(c.ref)}))}},_.prototype.create=function(v,c){var h=e.Tree.Transform.build().add(this.behaviour,e.Entity.Transformer.Molecule.CoordinateStreaming.CreateModel,{data:v,transform:c},{ref:this.ref,isHidden:!0}).then(x.Molecule.CreateVisual,{style:this.style});e.Tree.Transform.apply(this.context,h).run()},_.prototype.dispose=function(){this.remove();for(var v=0,c=this.obs;v<c.length;v++){var h=c[v];h.dispose()}this.obs=[]},_.prototype.register=function(v){var c=this;this.behaviour=v,this.target=v.parent,this.obs.push(this.context.behaviours.select.subscribe(function(h){return c.update(h)}))},_}();p.CoordinateStreaming=l,function(_){function v(h){return h[h.length-1]!=="/"?h:h.length>0?h.substr(0,h.length-1):h}_.normalizeServerName=v;function c(h,f){return v(f)+"/"+h.trim().toLocaleLowerCase()+"/cartoon?encoding=bcif&lowPrecisionCoords=1"}_.getBaseUrl=c}(l=p.CoordinateStreaming||(p.CoordinateStreaming={}))})(d=s.Molecule||(s.Molecule={}))})(o=e.Behaviour||(e.Behaviour={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";function d(w,C,E,S,M,A,R){if(M.transformer===E)try{var D=window[R],N=A(M.params,S);D&&typeof N<"u"&&D("send","event",C,N,w.id)}catch{}}function p(w,C){return w.format.name}function x(w){return w.url}function l(w){return w.queryString}function _(w,C){if(!e.Tree.Node.isHidden(C)){var E=e.Utils.Molecule.findModel(C);if(E)return E.props.model.id+" $(name)$ "+w.name}}function v(w,C){if(!e.Tree.Node.isHidden(C)){var E=e.Utils.Molecule.findModel(C);if(E)return E.props.model.id+" $(type)$ "+w.type+" $(radius)$ "+w.radius}}function c(w,C){var E=e.Utils.Molecule.findModel(C);if(E)return E.props.model.id+" $(server)$ "+w.server}function h(w,C){if(!e.Tree.Node.isHidden(C))return w.style.type}function f(w){return"$(format)$ "+w.format}function m(w,C){return w.queryString}function b(w,C){return C===void 0&&(C="default"),function(E){var S="ga-"+E.id+"-"+C;try{(function(M,A,R,D,N,I,L){M.GoogleAnalyticsObject=N,M[N]=M[N]||function(){(M[N].q=M[N].q||[]).push(arguments)},M[N].l=1*+new Date,I=A.createElement(R),L=A.getElementsByTagName(R)[0],I.async=1,I.src=D,L.parentNode.insertBefore(I,L)})(window,document,"script","https://www.google-analytics.com/analytics.js",S),window[S]("create",w,"auto"),setTimeout(function(){try{var M=window[S];M&&M("send","event","Loaded","contextId",E.id)}catch{}},1e3)}catch{}e.Event.Tree.TransformerApply.getStream(E).subscribe(function(M){d(E,"Download",e.Entity.Transformer.Data.Download,M.data.a,M.data.t,x,S),d(E,"Create Molecule From Data",e.Entity.Transformer.Molecule.CreateFromData,M.data.a,M.data.t,p,S),d(E,"Create Model Selecion",e.Entity.Transformer.Molecule.CreateSelection,M.data.a,M.data.t,l,S),d(E,"Create Assembly",e.Entity.Transformer.Molecule.CreateAssembly,M.data.a,M.data.t,_,S),d(E,"Create Symmetry",e.Entity.Transformer.Molecule.CreateSymmetryMates,M.data.a,M.data.t,v,S),d(E,"Create Visual",e.Entity.Transformer.Molecule.CreateVisual,M.data.a,M.data.t,h,S),d(E,"Coordinate Streaming",e.Entity.Transformer.Molecule.CoordinateStreaming.CreateBehaviour,M.data.a,M.data.t,c,S),d(E,"Parse Density",e.Entity.Transformer.Density.ParseData,M.data.a,M.data.t,f,S),d(E,"Create Model Selection",e.Entity.Transformer.Molecule.CreateSelection,M.data.a,M.data.t,m,S)})}}s.GoogleAnalytics=b})(o=e.Behaviour||(e.Behaviour={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";var d=function(){function p(x,l){this.context=x,this._state=new e.Rx.Subject,this._latestState=void 0,this._latestState=l}return Object.defineProperty(p.prototype,"dispatcher",{get:function(){return this.context.dispatcher},enumerable:!0,configurable:!0}),p.prototype.setState=function(){for(var x=[],l=0;l<arguments.length;l++)x[l]=arguments[l];var _=e.Utils.merge.apply(e.Utils,[this._latestState].concat(x));_!==this._latestState&&(this._latestState=_,this._state.onNext(_))},Object.defineProperty(p.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"latestState",{get:function(){return this._latestState},enumerable:!0,configurable:!0}),p}();s.Component=d})(o=e.Components||(e.Components={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";var d;(function(v){v[v.Main=0]="Main",v[v.Top=1]="Top",v[v.Right=2]="Right",v[v.Bottom=3]="Bottom",v[v.Left=4]="Left",v[v.Root=5]="Root"})(d=s.LayoutRegion||(s.LayoutRegion={}));var p;(function(v){v[v.Outside=0]="Outside",v[v.Landscape=1]="Landscape",v[v.Portrait=2]="Portrait"})(p=s.CollapsedControlsLayout||(s.CollapsedControlsLayout={}));var x=function(){function v(c){this.cssClass=c,this.components=[]}return v}();s.LayoutTarget=x;function l(){for(var v=[],c=0;c<=d.Root;c++)v.push(new x(d[c].toLowerCase()));return v}s.makeEmptyTargets=l;var _=function(v){B(c,v);function c(h,f,m){var b=v.call(this,h,{isExpanded:!1,hideControls:!1,collapsedControlsLayout:p.Outside,regionStates:{}})||this;return b.targets=f,b.root=m,b.rootState=void 0,e.Command.Layout.SetState.getStream(b.context).subscribe(function(w){return b.update(w.data)}),b.expandedViewport=document.createElement("meta"),b.expandedViewport.name="viewport",b.expandedViewport.content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0",b}return c.prototype.update=function(h){var f=this,m=!!this.latestState.isExpanded;this.setState(h),typeof h.isExpanded=="boolean"&&h.isExpanded!==m&&this.handleExpand(),this.dispatcher.schedule(function(){return e.Event.Common.LayoutChanged.dispatch(f.context,{})})},c.prototype.getScrollElement=function(){return document.scrollingElement?document.scrollingElement:document.documentElement?document.documentElement:document.body},c.prototype.handleExpand=function(){try{var h=document.getElementsByTagName("body")[0],f=document.getElementsByTagName("head")[0];if(!h||!f)return;if(this.latestState.isExpanded){for(var m=f.children,b=!1,w=[],C=0;C<m.length;C++)m[C]===this.expandedViewport?b=!0:(m[C].name||"").toLowerCase()==="viewport"&&w.push(m[C]);for(var E=0,S=w;E<S.length;E++){var M=S[E];f.removeChild(M)}b||f.appendChild(this.expandedViewport);var A=h.style,R=this.getScrollElement(),D=R.scrollLeft,N=R.scrollTop;this.rootState={top:A.top,bottom:A.bottom,right:A.right,left:A.left,scrollTop:N,scrollLeft:D,position:A.position,overflow:A.overflow,viewports:w,zindex:this.root.style.zIndex,width:A.width,height:A.height,maxWidth:A.maxWidth,maxHeight:A.maxHeight,margin:A.margin,marginLeft:A.marginLeft,marginRight:A.marginRight,marginTop:A.marginTop,marginBottom:A.marginBottom},A.overflow="hidden",A.position="fixed",A.top="0",A.bottom="0",A.right="0",A.left="0",A.width="100%",A.height="100%",A.maxWidth="100%",A.maxHeight="100%",A.margin="0",A.marginLeft="0",A.marginRight="0",A.marginTop="0",A.marginBottom="0",this.root.style.zIndex="100000"}else{for(var m=f.children,C=0;C<m.length;C++)if(m[C]===this.expandedViewport){f.removeChild(this.expandedViewport);break}if(this.rootState){for(var A=h.style,I=this.rootState,L=0,Y=I.viewports;L<Y.length;L++){var M=Y[L];f.appendChild(M)}A.top=I.top,A.bottom=I.bottom,A.left=I.left,A.right=I.right,A.width=I.width,A.height=I.height,A.maxWidth=I.maxWidth,A.maxHeight=I.maxHeight,A.margin=I.margin,A.marginLeft=I.marginLeft,A.marginRight=I.marginRight,A.marginTop=I.marginTop,A.marginBottom=I.marginBottom,A.position=I.position,A.overflow=I.overflow;var R=this.getScrollElement();R.scrollTop=I.scrollTop,R.scrollLeft=I.scrollLeft,this.rootState=void 0,this.root.style.zIndex=I.zindex}}}catch(J){this.context.logger.error("Layout change error, you might have to reload the page."),console.log("Layout change error, you might have to reload the page.",J)}},c.prototype.updateTargets=function(h){var f=this;this.targets=h,this.dispatcher.schedule(function(){return e.Event.Common.ComponentsChanged.dispatch(f.context,{})})},c}(s.Component);s.Layout=_})(o=e.Components||(e.Components={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){"use strict";var x=function(l){B(_,l);function _(v,c,h){var f=l.call(this,v,{params:c.info.defaultParams(v,h),canApply:!1,isBusy:!1,issues:void 0,parametersAutoUpdating:!1,isDirty:!1})||this;return f.transformer=c,f.entity=h,f.updateTimeout=new e.Rx.Subject,f.timeout=e.Rx.Observable.timer(50),f.never=e.Rx.Observable.never(),f.anchorParams=f.latestState.params,f.updateParams(f.anchorParams),f.updateTimeout.flatMapLatest(function(m){return m}).forEach(function(){return f.apply()}),f}return _.prototype._update=function(){this.isUpdate&&!this.latestState.isBusy&&this.updateTimeout&&(this.updateTimeout.onNext(this.timeout),this.setState({parametersAutoUpdating:!0}))},_.prototype._reset=function(){this.setState({parametersAutoUpdating:!1}),this.updateTimeout&&this.updateTimeout.onNext(this.never)},_.prototype._updateParams=function(v){var c=e.Utils.merge(this.latestState.params,v);if(this.transformer.info.validateParams){var h=this.transformer.info.validateParams(c);if(h&&h.length>0){this.setState({params:c,issues:h,canApply:!1});return}}var f=!e.Utils.deepEqual(this.anchorParams,c);this.setState({params:c,isDirty:f,issues:void 0,canApply:!0})},_.prototype.updateParams=function(v){this._reset(),this._updateParams(v)},_.prototype.autoUpdateParams=function(v){this._update(),this._updateParams(v)},Object.defineProperty(_.prototype,"isUpdate",{get:function(){return this.transformer===this.entity.transform.transformer},enumerable:!0,configurable:!0}),_.prototype.apply=function(){var v=this;if(this._reset(),!this.latestState.isBusy){var c=this.transformer.create(this.latestState.params);this.anchorParams=this.latestState.params,this.setState({isDirty:!1,isBusy:!0});try{var h=this.isUpdate?c.update(this.context,this.entity):c.apply(this.context,this.entity),f=h.run();return f.then(function(){return v.setState({isBusy:!1})}).catch(function(){return v.setState({isBusy:!1})}),f}catch(m){return this.setState({isBusy:!1}),i.Core.Computation.reject(m)}}},_.prototype.setParams=function(v){this._reset(),this.anchorParams=v,this.updateParams(v)},_}(s.Component);p.Controller=x})(d=s.Transform||(s.Transform={}))})(o=e.Components||(e.Components={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){"use strict";var x=function(l){B(_,l);function _(v){var c=l.call(this,v,{update:void 0,transforms:[]})||this;return c.update(),e.Event.Entity.CurrentChanged.getStream(v).subscribe(function(){return c.update()}),c}return _.prototype.update=function(){if(!this.context.currentEntity){this.setState({transforms:[]});return}var v=this.context.currentEntity,c=this.context.transforms,h=void 0;v.transform.transformer&&v.transform.transformer.info.isUpdatable&&(h=c.getController(v.transform.transformer,v));for(var f=[],m=0,b=this.context.transforms.getBySourceType(v.type);m<b.length;m++){var w=b[m];if(!(w.info.isApplicable&&!w.info.isApplicable(v))){var C=c.getController(w,v);C&&f.push(C)}}this.setState({update:h,transforms:f})},_}(s.Component);p.View=x})(d=s.Transform||(s.Transform={}))})(o=e.Components||(e.Components={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){"use strict";var x=function(h){B(f,h);function f(){return h!==null&&h.apply(this,arguments)||this}return f.prototype.updateTemplate=function(m,b){var w=b.get(m),C=this.latestState&&this.latestState.params.style.theme,E=w.params,S=C||this.getThemeInstance(w.theme.template),M={type:w.type,params:E,theme:S};this.autoUpdateParams({style:M})},f.prototype.updateStyleParams=function(m){var b=e.Utils.shallowClone(this.latestState.params.style);b.params=e.Utils.merge(b.params,m),this.autoUpdateParams({style:b})},f.prototype.updateStyleTheme=function(m){var b=e.Utils.shallowClone(this.latestState.params.style);b.theme=e.Utils.merge(b.theme,m),this.autoUpdateParams({style:b})},f.prototype.updateThemeColor=function(m,b){var w=this.latestState.params.style.theme;if(w){var C=w.colors;C||(C=e.Immutable.Map()),C=C.set(m,b),this.updateStyleTheme({colors:C})}},f.prototype.updateThemeVariable=function(m,b){var w=this.latestState.params.style.theme;if(w){var C=w.variables;C||(C=e.Immutable.Map()),C=C.set(m,b),this.updateStyleTheme({variables:C})}},f.prototype.updateThemeTransparency=function(m){var b=this.latestState.params.style.theme;b&&this.updateStyleTheme({transparency:m})},f.prototype.getThemeInstance=function(m){var b=this.latestState.params.style.theme,w=e.Visualization.Molecule.Default.ForType.get(this.latestState.params.style.type).theme.transparency;if(!b)return{template:m,colors:m.colors,transparency:w};var C=m.colors;b.colors&&C&&(C=C.withMutations(function(M){b.colors.forEach(function(A,R){M.has(R)&&M.set(R,A)})}));var E=m.variables;b.variables&&E&&(E=E.withMutations(function(M){b.variables.forEach(function(A,R){M.has(R)&&M.set(R,A)})}));var S=b.transparency?b.transparency:w;return{template:m,colors:C,variables:E,transparency:S}},f.prototype.updateThemeDefinition=function(m){this.updateStyleTheme(this.getThemeInstance(m))},f}(p.Controller);p.VisualStyle=x;var l=function(h){B(f,h);function f(){return h!==null&&h.apply(this,arguments)||this}return f}(x);p.MoleculeVisual=l;var _=function(h){B(f,h);function f(){return h!==null&&h.apply(this,arguments)||this}return f}(x);p.MoleculeLabels=_;var v=function(h){B(f,h);function f(){return h!==null&&h.apply(this,arguments)||this}return f}(x);p.GenericLabels=v;var c=function(h){B(f,h);function f(){return h!==null&&h.apply(this,arguments)||this}return f.prototype.cloneStyle=function(m){return e.Utils.shallowClone(this.latestState.params[m||"style"])},f.prototype.getStyle=function(m){return this.latestState.params[m||"style"]},f.prototype.setStyle=function(m,b){var w;this.autoUpdateParams((w={},w[b||"style"]=m,w))},f.prototype.updateStyleParams=function(m,b){var w=this.cloneStyle(b);w.params=e.Utils.merge(w.params,m),this.setStyle(w,b)},f.prototype.updateStyleTheme=function(m,b){var w=this.cloneStyle(b);w.theme=e.Utils.merge(w.theme,m),this.setStyle(w,b)},f.prototype.updateThemeColor=function(m,b,w){var C=this.getStyle(w).theme;if(C){var E=C.colors;E||(E=e.Immutable.Map()),E=E.set(m,b),this.updateStyleTheme({colors:E},w)}},f.prototype.updateThemeTransparency=function(m,b){var w=this.getStyle(b).theme;w&&this.updateStyleTheme({transparency:m},b)},f.prototype.getThemeInstance=function(m,b){var w=this.getStyle(b).theme,C=e.Visualization.Density.Default.Transparency;if(!w)return{template:m,colors:m.colors,transparency:C};var E=m.colors;w.colors&&E&&(E=E.withMutations(function(M){w.colors.forEach(function(A,R){M.has(R)&&M.set(R,A)})}));var S=w.transparency?w.transparency:C;return{template:m,colors:E,transparency:S}},f.prototype.updateThemeDefinition=function(m,b){this.updateStyleTheme(this.getThemeInstance(m,b),b)},f}(p.Controller);p.DensityVisual=c})(d=s.Transform||(s.Transform={}))})(o=e.Components||(e.Components={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){"use strict";var x=function(l){B(_,l);function _(v,c,h){var f=l.call(this,v,{controller:void 0})||this;return f.selector=c,f.header=h,e.Event.Tree.NodeAdded.getStream(v).subscribe(function(){return f.added()}),e.Event.Tree.NodeRemoved.getStream(v).subscribe(function(m){return f.removed(m.data)}),f}return _.prototype.removed=function(v){if(this.latestState.controller){var c=this.latestState.controller.entity;c===v&&this.setState({controller:void 0})}},_.prototype.added=function(){var v=this.context.select(this.selector),c=v[0];if(!(!c||!c.transform)){var h=this.context.transforms.getController(c.transform.transformer,c);h&&this.setState({controller:h})}},_}(s.Component);p.Updater=x})(d=s.Transform||(s.Transform={}))})(o=e.Components||(e.Components={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){"use strict";var x=function(l){B(_,l);function _(v,c,h,f){var m=l.call(this,v,{controller:void 0})||this;return m.selector=c,m.transformer=h,m.header=f,e.Event.Tree.NodeAdded.getStream(v).subscribe(function(){return m.added()}),e.Event.Tree.NodeRemoved.getStream(v).subscribe(function(b){return m.removed(b.data)}),m}return _.prototype.removed=function(v){if(this.latestState.controller){var c=this.latestState.controller.entity;c===v&&this.setState({controller:void 0})}},_.prototype.added=function(){var v=this.context.select(this.selector),c=v[0];if(c){var h=this.context.transforms.getController(this.transformer,c);h&&this.setState({controller:h})}},_}(s.Component);p.Action=x})(d=s.Transform||(s.Transform={}))})(o=e.Components||(e.Components={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){"use strict";var x=function(l){B(_,l);function _(v){var c=l.call(this,v,{entries:e.Immutable.List()})||this;return e.Event.Log.getStream(c.context).subscribe(function(h){return c.setState({entries:c.latestState.entries.push(h.data)})}),c}return _}(s.Component);p.Log=x})(d=s.Context||(s.Context={}))})(o=e.Components||(e.Components={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){"use strict";var x=function(l){B(_,l);function _(v){var c=l.call(this,v,{entries:e.Immutable.Map()})||this;return c.serialNumber=0,c.serialId=0,e.Command.Toast.Show.getStream(c.context).subscribe(function(h){return c.show(h.data)}),e.Command.Toast.Hide.getStream(c.context).subscribe(function(h){return c.hide(c.findByKey(h.data.key))}),c}return _.prototype.findByKey=function(v){return this.latestState.entries.find(function(c){return!!c&&c.key===v})},_.prototype.show=function(v){var c=this,h=this.latestState.entries,f=void 0,m=++this.serialId,b;v.key&&(f=this.findByKey(v.key))?(f.timeout!==void 0&&clearTimeout(f.timeout),b=f.serialNumber,h=h.remove(f.id)):b=++this.serialNumber,f={id:m,serialNumber:b,key:v.key,title:v.title,message:v.message,timeout:this.timeout(m,v.timeoutMs),hide:function(){return c.hideId(m)}},h=h.set(m,f),this.setState({entries:h})},_.prototype.timeout=function(v,c){var h=this;if(c!==void 0)return c<0&&(c=500),setTimeout(function(){var f=h.latestState.entries.get(v);f.timeout=void 0,h.hide(f)},c)},_.prototype.hideId=function(v){this.hide(this.latestState.entries.get(v))},_.prototype.hide=function(v){if(v){v.timeout!==void 0&&clearTimeout(v.timeout),v.hide=void 0;var c=this.latestState.entries;c=c.delete(v.id),this.setState({entries:c})}},_}(s.Component);p.Toast=x})(d=s.Context||(s.Context={}))})(o=e.Components||(e.Components={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){"use strict";var x=function(l){B(_,l);function _(v,c){var h=l.call(this,v,{tasks:e.Immutable.Map()})||this;return h.type=c,e.Event.Task.StateUpdated.getStream(h.context).subscribe(function(f){return h.updated(f.data)}),e.Event.Task.Started.getStream(h.context).filter(function(f){return f.data.type===c}).subscribe(function(f){return h.started(f.data)}),e.Event.Task.Completed.getStream(h.context).subscribe(function(f){return h.completed(f.data)}),h}return _.prototype.updated=function(v){var c=v.type===this.type,h=this.latestState.tasks;if(!c){h.has(v.taskId)&&(h=h.delete(v.taskId),this.setState({tasks:h}));return}h=h.set(v.taskId,{name:v.name,message:v.message,abort:v.abort}),this.setState({tasks:h})},_.prototype.started=function(v){this.setState({tasks:this.latestState.tasks.set(v.id,{name:v.name,message:"Running..."})})},_.prototype.completed=function(v){this.latestState.tasks.has(v)&&this.setState({tasks:this.latestState.tasks.delete(v)})},_}(s.Component);p.TaskWatcher=x})(d=s.Context||(s.Context={}))})(o=e.Components||(e.Components={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){"use strict";var x=function(l){B(_,l);function _(v){var c=l.call(this,v,{info:[]})||this;return e.Event.Interactivity.Highlight.getStream(c.context).subscribe(function(h){return c.setState({info:h.data})}),c}return _}(s.Component);p.HighlightInfo=x})(d=s.Visualization||(s.Visualization={}))})(o=e.Components||(e.Components={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){"use strict";var x=i.Visualization,l=function(_){B(v,_);function v(c){var h=_.call(this,c,e.Utils.shallowClone(x.DefaultSceneOptions))||this;return e.Event.Common.LayoutChanged.getStream(h.context).subscribe(function(f){h._scene&&h._scene.scene.resized()}),e.Command.Layout.SetViewportOptions.getStream(h.context).subscribe(function(f){return h.setState(f.data)}),h.state.throttle(1e3/30).subscribe(function(f){h.scene.scene.updateOptions(f)}),h}return Object.defineProperty(v.prototype,"scene",{get:function(){return this._scene},enumerable:!0,configurable:!0}),v.prototype.init=function(c){if(!i.Visualization.checkWebGL())return!1;try{return this._scene=new e.Visualization.SceneWrapper(c,this.context,this.latestState),this.context.scene=this._scene,!0}catch{return!1}},v.prototype.destroy=function(){this._scene&&(this._scene.destroy(),this._scene=null)},v}(s.Component);p.Viewport=l})(d=s.Visualization||(s.Visualization={}))})(o=e.Components||(e.Components={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){"use strict";var o=function(){function d(){this.settings=i.Core.Utils.FastMap.create()}return d.prototype.set=function(p,x){this.settings.set(p,x)},d.prototype.get=function(p){return this.settings.get(p)},d}();e.Settings=o;var s=function(){function d(p){this.plugin=p,this.id=e.Utils.generateUUID(),this.dispatcher=new e.Service.Dispatcher,this.logger=new e.Service.Logger(this),this.performance=new i.Core.Utils.PerformanceMonitor,this.scene=void 0,this.tree=e.Tree.create(this,e.Entity.Root.create(e.Entity.RootTransform,{label:"Root Entity"})),this.currentEntity=void 0,this.transforms=new e.TransformManager(this),this.entityCache=new e.Entity.Cache(this),this.viewport=new e.Components.Visualization.Viewport(this),this.highlight=new e.Interactivity.HighlightManager(this),this.behaviours=new e.Behaviour.Streams(this),this.settings=new o,e.initEventsAndCommands(this)}return d.prototype.createLayout=function(p,x){this.layout=new e.Components.Layout(this,p,x)},d.prototype.select=function(p){return e.Tree.Selection.select(p,this.tree)},d}();e.Context=s})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict"})(o=e.Plugin||(e.Plugin={}))})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){"use strict";function o(d,p){if(!e.Utils.Molecule.findModelOrSelection(p.entity)){console.warn("Select: Trying to create a selection event on a non-molecule related entity, ignoring...");return}var x=e.Utils.Molecule.getModelAndIndicesFromQuery(p.entity,p.query);!x||!x.indices.length||e.Event.Visual.VisualSelectElement.dispatch(d,e.Interactivity.Info.selection(p.entity,x.indices))}function s(d){e.Command.Entity.SetCurrent.getStream(d).subscribe(function(p){return e.Entity.setCurrent(p.data)}),e.Command.Entity.SetVisibility.getStream(d).subscribe(function(p){return e.Entity.setVisibility(p.data.entity,p.data.visible)}),e.Command.Entity.ToggleExpanded.getStream(d).subscribe(function(p){return e.Entity.toggleExpanded(p.data)}),e.Command.Tree.RemoveNode.getStream(d).subscribe(function(p){return d.select(p.data).forEach(function(x){return e.Tree.remove(x)})}),e.Command.Tree.ApplyTransform.getStream(d).subscribe(function(p){(p.data.isUpdate?p.data.transform.update(d,p.data.node):p.data.transform.apply(d,p.data.node)).run()}),e.Event.Tree.NodeAdded.getStream(d).subscribe(function(p){var x=p.data.parent.state.visibility,l=x!==2;if(e.Entity.setVisibility(p.data,l),e.Entity.isClass(p.data,e.Entity.BehaviourClass)){var _=p.data;_.props.behaviour.register(_)}}),e.Event.Tree.NodeRemoved.getStream(d).subscribe(function(p){if(e.Entity.updateVisibilityState(p.data.parent),e.Entity.isClass(p.data,e.Entity.BehaviourClass)){var x=p.data;x.props.behaviour.dispose()}}),e.Event.Visual.VisualHoverElement.getStream(d).distinctUntilChanged(function(p){return p.data},e.Interactivity.interactivityInfoEqual).map(function(p){return e.Interactivity.Molecule.transformInteraction(p.data)}).distinctUntilChanged(function(p){return p},function(p,x){return p===x}).subscribe(function(p){return e.Event.Molecule.ModelHighlight.dispatch(d,p)}),e.Event.Visual.VisualSelectElement.getStream(d).distinctUntilChanged(function(p){return p.data},e.Interactivity.interactivityInfoEqual).map(function(p){return e.Interactivity.Molecule.transformInteraction(p.data)}).distinctUntilChanged(function(p){return p},function(p,x){return p===x}).subscribe(function(p){return e.Event.Molecule.ModelSelect.dispatch(d,p)}),e.Command.Molecule.CreateSelectInteraction.getStream(d).subscribe(function(p){return o(d,p.data)})}e.initEventsAndCommands=s})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){"use strict";var o=function(){function s(d){var p=this;this.context=d,this.controllerCache=i.Core.Utils.FastMap.create(),this.state=i.Core.Utils.FastMap.create(),this.byId=i.Core.Utils.FastMap.create(),this.bySourceType=i.Core.Utils.FastMap.create(),this.byTargetType=i.Core.Utils.FastMap.create(),e.Event.Tree.NodeRemoved.getStream(d).subscribe(function(x){p.controllerCache.delete(x.data.id),p.state.delete(x.data.id)})}return s.prototype.addType=function(d,p,x){var l=x.get(d.id);l?l.push(p):x.set(d.id,[p])},s.prototype.getController=function(d,p){if(!p){console.warn("Trying to get controller for undefined entity.");return}if(!this.byId.get(d.info.id)){console.warn("Trying to get controller for unregistered transform ("+d.info.id+").");return}var x=this.controllerCache.get(p.id);x||(x=i.Core.Utils.FastMap.create(),this.controllerCache.set(p.id,x));var l=x.get(d.info.id);if(l)return l;var _=d.info.customController;_?l=_(this.context,d,p):l=new e.Components.Transform.Controller(this.context,d,p);var v=this.context.plugin&&this.context.plugin.getTransformerInfo(d);return v&&v.initiallyCollapsed?this.hasPersistentState(d,p,"isExpanded")||this.setPersistentState(d,p,"isExpanded",!1):this.hasPersistentState(d,p,"isExpanded")||this.setPersistentState(d,p,"isExpanded",!0),p.transform.transformer===d&&l.setParams(p.transform.params),x.set(d.info.id,l),l},s.prototype.getBySourceType=function(d){return this.bySourceType.get(d.id)||[]},s.prototype.getByTargetType=function(d){return this.byTargetType.get(d.id)||[]},s.prototype.add=function(d){if(this.byId.has(d.info.id))throw"Transformer with id '"+d.info.id+"' is has already been added. Pick another id.";this.byId.set(d.info.id,d);for(var p=0,x=d.info.from;p<x.length;p++){var l=x[p];this.addType(l,d,this.bySourceType)}for(var _=0,v=d.info.to;_<v.length;_++){var l=v[_];this.addType(l,d,this.byTargetType)}},s.prototype.hasPersistentState=function(d,p,x){var l=this.state.get(p.id);if(!l)return!1;var _=l.get(d.info.id);return!(!_||!_.has(x))},s.prototype.getPersistentState=function(d,p,x,l){var _=this.state.get(p.id);if(!_)return l;var v=_.get(d.info.id);return!v||!v.has(x)?l:v.get(x)},s.prototype.setPersistentState=function(d,p,x,l){var _=this.state.get(p.id);_||(_=i.Core.Utils.FastMap.create(),this.state.set(p.id,_));var v=_.get(d.info.id);v||(v=i.Core.Utils.FastMap.create(),_.set(d.info.id,v));var c=v.get(x);return v.set(x,l),c!==l},s}();e.TransformManager=o})(r=i.Bootstrap||(i.Bootstrap={}))})(U||(U={}));var U;(function(i){var r;(function(e){e.VERSION={number:"1.3.4",date:"September 7 2017"}})(r=i.Plugin||(i.Plugin={}))})(U||(U={}));var U;(function(i){var r;(function(e){"use strict";e.React=X,e.ReactDOM=P;var o;o=e.Controls||(e.Controls={}),o.ChromePickerHelper=O.ChromePicker})(r=i.Plugin||(i.Plugin={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";var d=i.Bootstrap.Utils.shallowEqual,p=function(v){B(c,v);function c(){return v!==null&&v.apply(this,arguments)||this}return c.prototype.shouldComponentUpdate=function(h,f){return!d(this.props,h)||!d(this.state,f)},c}(e.React.Component);s.Pure=p;var x=function(v){B(c,v);function c(){return v!==null&&v.apply(this,arguments)||this}return c.prototype.render=function(){var h=this.props,f="lm-btn";h.size&&h.size!=="normal"&&(f+=" lm-btn-"+h.size),h.asBlock&&(f+=" lm-btn-block"),h.disabled?f+=" lm-btn-"+(h.disabledStyle||h.style||"default"):h.active?f+=" lm-btn-"+(h.activeStyle||h.style||"default"):f+=" lm-btn-"+(h.style||"default"),h.customClass&&(f+=" "+h.customClass);var m=void 0;return h.icon&&(h.active&&h.activeIcon?m=e.React.createElement("span",{className:"lm-icon lm-icon-"+h.activeIcon}):m=e.React.createElement("span",{className:"lm-icon lm-icon-"+h.icon})),e.React.createElement("button",{title:h.title,className:f,style:h.customStyle,disabled:h.disabled,onClick:function(b){h.onClick.call(null,b),b.target.blur()}},m,h.children)},c}(p);s.Button=x,s.TextBox=function(v){return e.React.createElement("input",{type:"text",className:"lm-form-control",placeholder:v.placeholder,value:v.value,defaultValue:v.defaultValue,onBlur:function(c){v.onBlur&&v.onBlur.call(null,c)},onChange:function(c){return v.onChange.call(null,c.target.value)},onKeyPress:v.onKeyPress})};function l(v){return v.keyCode===13||v.charCode===13}s.isEnter=l;function _(v){return e.React.createElement("div",{className:"lm-control-row lm-options-group",title:v.title},e.React.createElement("span",null,v.label),e.React.createElement("div",null,e.React.createElement(s.TextBox,{placeholder:v.placeholder,onChange:v.onChange,value:v.value,onKeyPress:function(c){l(c)&&v.onEnter&&v.onEnter.call(null,c)}})))}s.TextBoxGroup=_,s.CommitButton=function(v){return e.React.createElement("div",{style:{marginTop:"1px"}},e.React.createElement("button",{onClick:function(c){v.action(),c.target.blur()},className:"lm-btn lm-btn-block lm-btn-commit lm-btn-commit-"+(v.isOn?"on":"off"),disabled:!v.isOn,title:v.title},e.React.createElement("span",{className:"lm-icon lm-icon-"+(v.isOn?"ok":"cross")}),v.isOn?e.React.createElement("b",null,v.on):v.off?v.off:v.on))},s.Toggle=function(v){return e.React.createElement("div",{className:"lm-control-row lm-toggle-button",title:v.title},e.React.createElement("span",null,v.label),e.React.createElement("div",null,e.React.createElement("button",{onClick:function(c){v.onChange.call(null,!v.value),c.target.blur()}},e.React.createElement("span",{className:"lm-icon lm-icon-"+(v.value?"ok":"off")})," ",v.value?"On":"Off")))},s.ControlGroupExpander=function(v){return e.React.createElement(s.Button,{style:"link",title:(v.isExpanded?"Less":"More")+" options",onClick:function(){return v.onChange.call(null,!v.isExpanded)},icon:v.isExpanded?"minus":"plus",customClass:"lm-conrol-group-expander"})},s.RowText=function(v){return e.React.createElement("div",{className:"lm-control-row lm-row-text",title:v.title},e.React.createElement("span",null,v.label),e.React.createElement("div",null,v.value))},s.HelpBox=function(v){return e.React.createElement("div",{className:"lm-help-row"},e.React.createElement("span",null,v.title),e.React.createElement("div",null,v.content))}})(o=e.Controls||(e.Controls={}))})(r=i.Plugin||(i.Plugin={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";var d=function(x){B(l,x);function l(){var _=x!==null&&x.apply(this,arguments)||this;return _.current=void 0,_}return l.prototype.get=function(_){var v=this.props.options;return typeof v.get<"u"?v.get(_):v[_]},l.prototype.render=function(){var _=this,v=this.props.caption,c=this.props.options.indexOf(this.props.current);return c<0&&(c=0),e.React.createElement("select",{title:this.props.title,value:c.toString(),className:"lm-form-control",onChange:function(h){_.current=_.get(+h.target.value),_.props.onChange(_.current)}},this.props.options.map(function(h,f){return e.React.createElement("option",{key:f,value:""+f},v(h))}))},l}(e.React.Component);s.OptionsBox=d;function p(x){var l=x.caption?x.caption:function(_){return _};return e.React.createElement("div",{className:"lm-control-row lm-options-group",title:x.title},e.React.createElement("span",null,x.label),e.React.createElement("div",null,e.React.createElement(s.OptionsBox,{options:x.options,caption:l,current:x.current,onChange:x.onChange})))}s.OptionsGroup=p})(o=e.Controls||(e.Controls={}))})(r=i.Plugin||(i.Plugin={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";var d=function(p){B(x,p);function x(){return p!==null&&p.apply(this,arguments)||this}return x.prototype.header=function(){var l=this,_=this.props.isExpanded,v=this.props.title?this.props.title:this.props.header,c=_?"collapse":"expand",h=e.React.createElement("div",{className:"lm-panel-description lm-panel-description-"+(this.props.topRightAction?"with-action":"standalone"),onClick:function(){return l.props.onExpand.call(null,!l.props.isExpanded)}},e.React.createElement("span",{className:"lm-icon lm-icon-info"}),e.React.createElement("div",{className:"lm-panel-description-content"},e.React.createElement("span",{className:"lm-icon lm-icon-info"}),this.props.description));return e.React.createElement("div",{className:"lm-panel-header"},h,this.props.topRightAction,e.React.createElement("div",{className:"lm-panel-expander-wrapper"},e.React.createElement(s.Button,{title:v,onClick:function(){return l.props.onExpand.call(null,!l.props.isExpanded)},icon:c,customClass:"lm-panel-expander",style:"link"},this.props.badge,this.props.header)))},x.prototype.render=function(){var l="lm-panel"+(this.props.className?" "+this.props.className:"")+(this.props.isExpanded?" lm-panel-expanded":" lm-panel-collapsed");return e.React.createElement("div",{className:l},this.header(),e.React.createElement("div",{className:"lm-panel-body",style:{display:this.props.isExpanded?"block":"none"}},this.props.children))},x}(e.React.Component);s.Panel=d,s.ExpandableGroup=function(p){return e.React.createElement("div",{className:"lm-control-group"},p.select,p.colorStripe?e.React.createElement("div",{className:"lm-expandable-group-color-stripe",style:{backgroundColor:"rgb("+(255*p.colorStripe.r|0)+", "+(255*p.colorStripe.g|0)+", "+(255*p.colorStripe.b|0)+")"}}):void 0,p.options.length>0?p.expander:void 0,p.options.length>0?e.React.createElement("div",{style:{display:p.isExpanded?"block":"none"},className:"lm-control-subgroup"},p.options):void 0)}})(o=e.Controls||(e.Controls={}))})(r=i.Plugin||(i.Plugin={}))})(U||(U={}));var j=this&&this.__assign||Object.assign||function(i){for(var r,e=1,o=arguments.length;e<o;e++){r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])}return i},U;(function(i){var r;(function(e){var o;(function(s){"use strict";var d=function(E){B(S,E);function S(){var M=E!==null&&E.apply(this,arguments)||this;return M.state={value:"0"},M.firedValue=NaN,M}return S.prototype.componentWillMount=function(){this.setState({value:""+this.props.value})},S.prototype.componentWillReceiveProps=function(M){this.setState({value:""+M.value})},S.prototype.updateValue=function(M){var A=+M;A<this.props.min?(A=this.props.min,M=""+A):A>this.props.max&&(A=this.props.max,M=""+A),this.setState({value:M})},S.prototype.fire=function(){var M=+this.state.value;isNaN(M)&&(M=this.props.value),M!==this.props.value&&this.firedValue!==M&&(this.firedValue=M,this.props.onChange.call(null,M))},S.prototype.render=function(){var M=this,A=this.props.step;return A===void 0&&(A=1),e.React.createElement("div",{className:"lm-control-row lm-slider",title:this.props.title},e.React.createElement("span",null,this.props.label),e.React.createElement("div",null,e.React.createElement("div",null,e.React.createElement("div",null,e.React.createElement(m,{min:this.props.min,max:this.props.max,step:A,value:+this.state.value,onChange:function(R){return M.setState({value:""+R})},onAfterChange:function(R){return M.fire()}}))),e.React.createElement("div",null,e.React.createElement(s.TextBox,{value:this.state.value,onChange:function(R){return M.updateValue(R)},onBlur:function(){return M.fire()},onKeyPress:function(R){s.isEnter(R)&&M.fire()}}))))},S}(e.React.Component);s.Slider=d;function p(E){for(var S=[],M={}.hasOwnProperty,A=0;A<arguments.length;A++){var R=arguments[A];if(R){var D=typeof R;if(D==="string"||D==="number")S.push(R);else if(Array.isArray(R))S.push(p.apply(null,R));else if(D==="object")for(var N in R)M.call(R,N)&&R[N]&&S.push(N)}}return S.join(" ")}function x(){}function l(E){return E.touches.length>1||E.type.toLowerCase()==="touchend"&&E.touches.length>0}function _(E,S){return E?S.touches[0].clientY:S.touches[0].pageX}function v(E,S){return E?S.clientY:S.pageX}function c(E,S){var M=S.getBoundingClientRect();return E?M.top+M.height*.5:M.left+M.width*.5}function h(E){E.stopPropagation(),E.preventDefault()}var f=function(E){B(S,E);function S(){return E!==null&&E.apply(this,arguments)||this}return S.prototype.render=function(){var M=this.props,A=M.className,R=M.tipFormatter,D=M.vertical,N=M.offset,I=M.value,L=M.index,Y=D?{bottom:N+"%"}:{left:N+"%"};return e.React.createElement("div",{className:A,style:Y,title:R(I,L)})},S}(e.React.Component);s.Handle=f;var m=function(E){B(S,E);function S(M){var A=E.call(this,M)||this;A.sliderElement=void 0,A.handleElements=[],A.dragOffset=0,A.startPosition=0,A.startValue=0,A._getPointsCache=void 0,A.eventHandlers={touchmove:function(K){return A.onTouchMove(K)},touchend:function(K){return A.end("touch")},mousemove:function(K){return A.onMouseMove(K)},mouseup:function(K){return A.end("mouse")}};var R=M.range,D=M.min,N=M.max,I=R?Array.apply(null,Array(+R+1)).map(function(){return D}):D,L="defaultValue"in M?M.defaultValue:I,Y=M.value!==void 0?M.value:L,J=(R?Y:[D,Y]).map(function(K){return A.trimAlignValue(K)}),ie;return R&&J[0]===J[J.length-1]&&J[0]===N?ie=0:ie=J.length-1,A.state={handle:null,recent:ie,bounds:J},A}return S.prototype.componentWillReceiveProps=function(M){var A=this;if("value"in M||"min"in M||"max"in M){var R=this.state.bounds;if(M.range){var D=M.value||R,N=D.map(function(L){return A.trimAlignValue(L,M)});if(N.every(function(L,Y){return L===R[Y]}))return;this.setState({bounds:N}),R.some(function(L){return A.isValueOutOfBounds(L,M)})&&this.props.onChange(N)}else{var D=M.value!==void 0?M.value:R[1],I=this.trimAlignValue(D,M);if(I===R[1]&&R[0]===M.min)return;this.setState({bounds:[M.min,I]}),this.isValueOutOfBounds(R[1],M)&&this.props.onChange(I)}}},S.prototype.onChange=function(M){var A=this.props,R=!("value"in A);R?this.setState(M):M.handle!==void 0&&this.setState({handle:M.handle});var D=j({},this.state,M),N=A.range?D.bounds:D.bounds[1];A.onChange(N)},S.prototype.onMouseDown=function(M){if(M.button===0){var A=v(this.props.vertical,M);if(!this.isEventFromHandle(M))this.dragOffset=0;else{var R=c(this.props.vertical,M.target);this.dragOffset=A-R,A=R}this.onStart(A),this.addDocumentEvents("mouse"),h(M)}},S.prototype.onMouseMove=function(M){var A=v(this.props.vertical,M);this.onMove(M,A-this.dragOffset)},S.prototype.onMove=function(M,A){h(M);var R=this.props,D=this.state,N=A-this.startPosition;N=this.props.vertical?-N:N;var I=N/this.getSliderLength()*(R.max-R.min),L=this.trimAlignValue(this.startValue+I),Y=D.bounds[D.handle];if(L!==Y){var J=D.bounds.slice();J[D.handle]=L;var ie=D.handle;if(R.pushable!==!1){var K=D.bounds[ie];this.pushSurroundingHandles(J,ie,K)}else R.allowCross&&(J.sort(function(Q,ne){return Q-ne}),ie=J.indexOf(L));this.onChange({handle:ie,bounds:J})}},S.prototype.onStart=function(M){var A=this.props;A.onBeforeChange(this.getValue());var R=this.calcValueByPos(M);this.startValue=R,this.startPosition=M;var D=this.state,N=D.bounds,I=1;if(this.props.range){for(var L=0,Y=1;Y<N.length-1;++Y)R>N[Y]&&(L=Y);Math.abs(N[L+1]-R)<Math.abs(N[L]-R)&&(L=L+1),I=L;var J=N[L+1]===N[L];J&&(I=D.recent),J&&R!==N[L+1]&&(I=R<N[L+1]?L:L+1)}this.setState({handle:I,recent:I});var ie=D.bounds[I];if(R!==ie){var K=D.bounds.slice();K[I]=R,this.onChange({bounds:K})}},S.prototype.onTouchMove=function(M){if(l(M)){this.end("touch");return}var A=_(this.props.vertical,M);this.onMove(M,A-this.dragOffset)},S.prototype.onTouchStart=function(M){if(!l(M)){var A=_(this.props.vertical,M);if(!this.isEventFromHandle(M))this.dragOffset=0;else{var R=c(this.props.vertical,M.target);this.dragOffset=A-R,A=R}this.onStart(A),this.addDocumentEvents("touch"),h(M)}},S.prototype.getPoints=function(){var M=this.props,A=M.marks,R=M.step,D=M.min,N=M.max,I=this._getPointsCache;if(!I||I.marks!==A||I.step!==R){var L=j({},A);if(R!==null)for(var Y=D;Y<=N;Y+=R)L[Y]=Y;var J=Object.keys(L).map(parseFloat);J.sort(function(ie,K){return ie-K}),this._getPointsCache={marks:A,step:R,points:J}}return this._getPointsCache.points},S.prototype.getPrecision=function(M){var A=M.toString(),R=0;return A.indexOf(".")>=0&&(R=A.length-A.indexOf(".")-1),R},S.prototype.getSliderLength=function(){var M=this.sliderElement;return M?this.props.vertical?M.clientHeight:M.clientWidth:0},S.prototype.getSliderStart=function(){var M=this.sliderElement,A=M.getBoundingClientRect();return this.props.vertical?A.top:A.left},S.prototype.getValue=function(){var M=this.state.bounds;return this.props.range?M:M[1]},S.prototype.addDocumentEvents=function(M){M==="touch"?(document.addEventListener("touchmove",this.eventHandlers.touchmove),document.addEventListener("touchend",this.eventHandlers.touchend)):M==="mouse"&&(document.addEventListener("mousemove",this.eventHandlers.mousemove),document.addEventListener("mouseup",this.eventHandlers.mouseup))},S.prototype.calcOffset=function(M){var A=this.props,R=A.min,D=A.max,N=(M-R)/(D-R);return N*100},S.prototype.calcValue=function(M){var A=this.props,R=A.vertical,D=A.min,N=A.max,I=Math.abs(M/this.getSliderLength()),L=R?(1-I)*(N-D)+D:I*(N-D)+D;return L},S.prototype.calcValueByPos=function(M){var A=M-this.getSliderStart(),R=this.trimAlignValue(this.calcValue(A));return R},S.prototype.end=function(M){this.removeEvents(M),this.props.onAfterChange(this.getValue()),this.setState({handle:null})},S.prototype.isEventFromHandle=function(M){for(var A=0,R=this.handleElements;A<R.length;A++){var D=R[A];if(D===M.target)return!0}return!1},S.prototype.isValueOutOfBounds=function(M,A){return M<A.min||M>A.max},S.prototype.pushHandle=function(M,A,R,D){for(var N=M[A],I=M[A];R*(I-N)<D;){if(!this.pushHandleOnePoint(M,A,R))return M[A]=N,!1;I=M[A]}return!0},S.prototype.pushHandleOnePoint=function(M,A,R){var D=this.getPoints(),N=D.indexOf(M[A]),I=N+R;if(I>=D.length||I<0)return!1;var L=A+R,Y=D[I],J=this.props.pushable,ie=R*(M[L]-Y);return this.pushHandle(M,L,R,+J-ie)?(M[A]=Y,!0):!1},S.prototype.pushSurroundingHandles=function(M,A,R){var D=this.props.pushable,N=M[A],I=0;if(M[A+1]-N<D?I=1:N-M[A-1]<D&&(I=-1),I!==0){var L=A+I,Y=I*(M[L]-N);this.pushHandle(M,L,I,+D-Y)||(M[A]=R)}},S.prototype.removeEvents=function(M){M==="touch"?(document.removeEventListener("touchmove",this.eventHandlers.touchmove),document.removeEventListener("touchend",this.eventHandlers.touchend)):M==="mouse"&&(document.removeEventListener("mousemove",this.eventHandlers.mousemove),document.removeEventListener("mouseup",this.eventHandlers.mouseup))},S.prototype.trimAlignValue=function(M,A){var R=this.state||{},D=R.handle,N=R.bounds,I=j({},this.props,A||{}),L=I.marks,Y=I.step,J=I.min,ie=I.max,K=I.allowCross,Q=M;Q<=J&&(Q=J),Q>=ie&&(Q=ie),!K&&D!=null&&D>0&&Q<=N[D-1]&&(Q=N[D-1]),!K&&D!=null&&D<N.length-1&&Q>=N[D+1]&&(Q=N[D+1]);var ne=Object.keys(L).map(parseFloat);if(Y!==null){var ue=Math.round((Q-J)/Y)*Y+J;ne.push(ue)}var fe=ne.map(function(ye){return Math.abs(Q-ye)}),ge=ne[fe.indexOf(Math.min.apply(Math,fe))];return Y!==null?parseFloat(ge.toFixed(this.getPrecision(Y))):ge},S.prototype.render=function(){var M=this,A,R=this.state,D=R.handle,N=R.bounds,I=this.props,L=I.className,Y=I.prefixCls,J=I.disabled,ie=I.vertical,K=I.dots,Q=I.included,ne=I.range,ue=I.step,fe=I.marks,ge=I.max,ye=I.min,pe=I.tipFormatter,de=I.children,he=this.props.handle,_e=N.map(function(Ke){return M.calcOffset(Ke)}),ve=Y+"-handle",Z=N.map(function(Ke,Te){var Ie;return p((Ie={},Ie[ve]=!0,Ie[ve+"-"+(Te+1)]=!0,Ie[ve+"-lower"]=Te===0,Ie[ve+"-upper"]=Te===N.length-1,Ie))}),be=ue===null||pe===null,Ee={prefixCls:Y,noTip:be,tipFormatter:pe,vertical:ie};this.handleElements=[];var De=N.map(function(Ke,Te){return e.React.cloneElement(he,j({},Ee,{className:Z[Te],value:Ke,offset:_e[Te],dragging:D===Te,index:Te,key:Te,ref:function(Ie){return M.handleElements.push(Ie)}}))});ne||De.shift();var Fe=Q||ne,Ue=[],Qe=p((A={},A[Y]=!0,A[Y+"-with-marks"]=Object.keys(fe).length,A[Y+"-disabled"]=J,A[Y+"-vertical"]=this.props.vertical,A[L]=!!L,A));return e.React.createElement("div",{ref:function(Ke){return M.sliderElement=Ke},className:Qe,onTouchStart:J?x:this.onTouchStart.bind(this),onMouseDown:J?x:this.onMouseDown.bind(this)},e.React.createElement("div",{className:Y+"-rail"}),Ue,e.React.createElement(C,{prefixCls:Y,vertical:ie,marks:fe,dots:K,step:ue,included:Fe,lowerBound:N[0],upperBound:N[N.length-1],max:ge,min:ye}),De,e.React.createElement(b,{className:Y+"-mark",vertical:ie,marks:fe,included:Fe,lowerBound:N[0],upperBound:N[N.length-1],max:ge,min:ye}),de)},S.defaultProps={prefixCls:"lm-slider-base",className:"",min:0,max:100,step:1,marks:{},handle:e.React.createElement(f,{className:"",vertical:!1,offset:0,tipFormatter:function(M){return M},value:0,index:0}),onBeforeChange:x,onChange:x,onAfterChange:x,tipFormatter:function(M,A){return M},included:!0,disabled:!1,dots:!1,range:!1,vertical:!1,allowCross:!0,pushable:!1},S}(e.React.Component);s.SliderBase=m;var b=function(E){var S=E.className,M=E.vertical,A=E.marks,R=E.included,D=E.upperBound,N=E.lowerBound,I=E.max,L=E.min,Y=Object.keys(A),J=Y.length,ie=100/(J-1),K=ie*.9,Q=I-L,ne=Y.map(parseFloat).sort(function(ue,fe){return ue-fe}).map(function(ue){var fe,ge=!R&&ue===D||R&&ue<=D&&ue>=N,ye=p((fe={},fe[S+"-text"]=!0,fe[S+"-text-active"]=ge,fe)),pe={marginBottom:"-50%",bottom:(ue-L)/Q*100+"%"},de={width:K+"%",marginLeft:-K/2+"%",left:(ue-L)/Q*100+"%"},he=M?pe:de,_e=A[ue],ve=typeof _e=="object"&&!e.React.isValidElement(_e),Z=ve?_e.label:_e,be=ve?j({},he,_e.style):he;return e.React.createElement("span",{className:ye,style:be,key:ue},Z)});return e.React.createElement("div",{className:S},ne)};function w(E,S,M,A,R,D){var N=Object.keys(S).map(parseFloat);if(M)for(var I=R;I<=D;I=I+A)N.indexOf(I)>=0||N.push(I);return N}var C=function(E){var S=E.prefixCls,M=E.vertical,A=E.marks,R=E.dots,D=E.step,N=E.included,I=E.lowerBound,L=E.upperBound,Y=E.max,J=E.min,ie=Y-J,K=w(M,A,R,D,J,Y).map(function(Q){var ne,ue=Math.abs(Q-J)/ie*100+"%",fe=M?{bottom:ue}:{left:ue},ge=!N&&Q===L||N&&Q<=L&&Q>=I,ye=p((ne={},ne[S+"-dot"]=!0,ne[S+"-dot-active"]=ge,ne));return e.React.createElement("span",{className:ye,style:fe,key:Q})});return e.React.createElement("div",{className:S+"-step"},K)}})(o=e.Controls||(e.Controls={}))})(r=i.Plugin||(i.Plugin={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";var d=i.Bootstrap.Utils.shallowEqual,p=function(l){B(_,l);function _(){return l!==null&&l.apply(this,arguments)||this}return _.prototype.shouldComponentUpdate=function(v,c,h){return!d(this.props,v)},_.prototype.render=function(){var v=this,c=this.props.color,h=c.r,f=h===void 0?1:h,m=c.g,b=m===void 0?1:m,w=c.b,C=w===void 0?1:w,E={a:1,r:255*f,g:255*b,b:255*C},S=function(A){return v.props.onChange({r:A.rgb.r/255,g:A.rgb.g/255,b:A.rgb.b/255})},M=e.React.createElement(s.ChromePickerHelper,{color:E,onChangeComplete:S});return e.React.createElement("div",{className:"lm-color-picker"},M)},_}(e.React.Component);s.ColorPicker=p;var x=function(l){B(_,l);function _(){var v=l!==null&&l.apply(this,arguments)||this;return v.state={isExpanded:!1},v}return _.prototype.render=function(){var v=this,c=this.state.isExpanded?e.React.createElement(p,j({},this.props)):void 0,h=this.props.color,f=this.props.position?this.props.position:"above";return e.React.createElement("div",{className:"lm-control-row lm-toggle-color-picker lm-toggle-color-picker-"+f,onMouseLeave:function(){return v.setState({isExpanded:!1})}},e.React.createElement("span",null,this.props.label),e.React.createElement("div",null,e.React.createElement(s.Button,{onClick:function(){v.setState({isExpanded:!v.state.isExpanded})},asBlock:!0,customStyle:{backgroundColor:"rgb("+(255*h.r|0)+", "+(255*h.g|0)+", "+(255*h.b|0)+")",color:"rgb("+(255*(1-h.r)|0)+","+(255*(1-h.g)|0)+","+(255*(1-h.b)|0)+")"}})),c)},_}(e.React.Component);s.ToggleColorPicker=x})(o=e.Controls||(e.Controls={}))})(r=i.Plugin||(i.Plugin={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";function d(p){return e.React.createElement("div",{className:"lm-control-row"},e.React.createElement(s.TextBox,{placeholder:"Enter query...",onChange:p.onChange,value:p.value,onKeyPress:function(x){s.isEnter(x)&&p.onEnter&&p.onEnter.call(null,x)}}))}s.QueryEditor=d})(o=e.Controls||(e.Controls={}))})(r=i.Plugin||(i.Plugin={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";var d=i.Bootstrap.Utils.shallowEqual,p=function(v){B(c,v);function c(){return v!==null&&v.apply(this,arguments)||this}return c.prototype.update=function(h){var f=i.Bootstrap.Utils.merge(this.props.state,h);f!==this.props.state&&this.props.onChange(f)},c.prototype.shouldComponentUpdate=function(h,f){return!d(this.props,h)||!d(this.state,f)},c}(e.React.Component);s.PureView=p;var x=function(v){B(c,v);function c(){var h=v!==null&&v.apply(this,arguments)||this;return h.subs=[],h}return c.prototype.subscribe=function(h,f){var m=h.subscribe(f);return this.subs.push(m),m},c.prototype.unsubscribe=function(h){for(var f=this.subs.indexOf(h),m=f;m<this.subs.length-1;m++)this.subs[m]=this.subs[m+1];h.dispose(),this.subs.pop()},c.prototype.componentWillUnmount=function(){for(var h=0,f=this.subs;h<f.length;h++){var m=f[h];m.dispose()}this.subs=[]},c}(e.React.Component);s.Component=x;var l=function(v){B(c,v);function c(){var h=v!==null&&v.apply(this,arguments)||this;return h.subs=[],h}return c.prototype.subscribe=function(h,f){var m=h.subscribe(f);return this.subs.push(m),m},c.prototype.unsubscribe=function(h){for(var f=this.subs.indexOf(h),m=f;m<this.subs.length-1;m++)this.subs[m]=this.subs[m+1];h.dispose(),this.subs.pop()},c.prototype.componentWillUnmount=function(){for(var h=0,f=this.subs;h<f.length;h++){var m=f[h];m.dispose()}this.subs=[]},c}(e.React.Component);s.ObserverView=l;var _=function(v){B(c,v);function c(){return v!==null&&v.apply(this,arguments)||this}return Object.defineProperty(c.prototype,"controller",{get:function(){return this.props.controller},enumerable:!0,configurable:!0}),c.prototype.componentWillMount=function(){var h=this;this.subscribe(this.controller.state,function(f){h.forceUpdate()})},c}(l);s.View=_})(o=e.Views||(e.Views={}))})(r=i.Plugin||(i.Plugin={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";var d=i.Bootstrap.Components.LayoutRegion,p=function(x){B(l,x);function l(){return x!==null&&x.apply(this,arguments)||this}return l.prototype.componentDidMount=function(){var _=this;this.subscribe(i.Bootstrap.Event.Common.ComponentsChanged.getStream(this.controller.context),function(){return _.forceUpdate()})},l.prototype.renderTarget=function(_,v){for(var c=[],h=[],f=0,m=v.components;f<m.length;f++){var b=m[f];b.isStatic?c.push(e.React.createElement(b.view,{key:b.key,controller:b.controller})):h.push(e.React.createElement(b.view,{key:b.key,controller:b.controller}))}return e.React.createElement("div",{key:"layout-target-"+_,className:"lm-layout-region lm-layout-"+v.cssClass},c.length?e.React.createElement("div",{className:"lm-layout-static"},c):void 0,h.length?e.React.createElement("div",{className:"lm-layout-scrollable"},h):void 0)},l.prototype.updateTarget=function(_,v,c){var h=this.controller.latestState,f=h.regionStates,m=this.controller.targets[v],b;h.hideControls?b=f!==void 0&&f[v]==="Sticky"&&m.components.length>0:f&&f[v]==="Hidden"?b=!1:b=m.components.length>0,b?c.regions.push(this.renderTarget(_,m)):c.layoutClass+=" lm-layout-hide-"+_},l.prototype.render=function(){var _="",v=this.controller.latestState,c;if(v.isExpanded)c="lm-layout-expanded";else switch(c="lm-layout-standard ",v.collapsedControlsLayout){case i.Bootstrap.Components.CollapsedControlsLayout.Outside:c+="lm-layout-standard-outside";break;case i.Bootstrap.Components.CollapsedControlsLayout.Landscape:c+="lm-layout-standard-landscape";break;case i.Bootstrap.Components.CollapsedControlsLayout.Portrait:c+="lm-layout-standard-portrait";break;default:c+="lm-layout-standard-outside";break}var h=this.controller.targets,f=[this.renderTarget("main",h[d.Main])],m={regions:f,layoutClass:_};this.updateTarget("top",d.Top,m),this.updateTarget("right",d.Right,m),this.updateTarget("bottom",d.Bottom,m),this.updateTarget("left",d.Left,m),_=m.layoutClass;var b=h[d.Root].components.map(function(w){return e.React.createElement(w.view,{key:w.key,controller:w.controller})});return e.React.createElement("div",{className:"lm-plugin"},e.React.createElement("div",{className:"lm-plugin-content "+c},e.React.createElement("div",{className:_},f,b)))},l}(s.View);s.Layout=p})(o=e.Views||(e.Views={}))})(r=i.Plugin||(i.Plugin={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){"use strict";var x=function(h){B(f,h);function f(){return h!==null&&h.apply(this,arguments)||this}return Object.defineProperty(f.prototype,"params",{get:function(){return this.controller.latestState.params},enumerable:!0,configurable:!0}),f.prototype.updateParams=function(m){this.controller.updateParams(m)},f.prototype.autoUpdateParams=function(m){this.controller.autoUpdateParams(m)},f.prototype.getPersistentState=function(m,b){return this.controller.context.transforms.getPersistentState(this.controller.transformer,this.transformSourceEntity,m,b)},f.prototype.setPersistentState=function(m,b){this.controller.context.transforms.setPersistentState(this.controller.transformer,this.transformSourceEntity,m,b)&&this.forceUpdate()},Object.defineProperty(f.prototype,"transformSourceEntity",{get:function(){return this.isUpdate?this.controller.entity.parent:this.controller.entity},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"isUpdate",{get:function(){return this.controller.isUpdate},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"canApply",{get:function(){var m=this.controller.latestState,b=m.canApply&&(!this.isUpdate||m.isDirty)&&!m.isBusy;return b&&this.isUpdate&&m.parametersAutoUpdating?!1:b},enumerable:!0,configurable:!0}),f.prototype.applyEnter=function(m){this.canApply&&(m.target.blur(),this.controller.apply())},f.prototype.render=function(){var m=this,b=this.isUpdate,w=this.controller.latestState,C=w.issues,E=C&&C.length,S=w.isBusy,M=S?"Working...":b&&!E?"Nothing to update":C?C[0]:void 0,A=this.controller.transformer.info,R=e.React.createElement(e.Controls.CommitButton,{action:function(){return m.controller.apply()},isOn:this.canApply,title:C&&C.length?C[0]:this.canApply&&b?"An update will remove all child nodes.":void 0,on:b?"Update":this.props.isAction?"Apply":"Add",off:M}),D=this.canApply||E,N=this.props.customHeader?this.props.customHeader:(b?"Update ":"")+A.name,I=this.getPersistentState("isExpanded",!0);return e.React.createElement("div",{className:"lm-transformer-wrapper"},e.React.createElement(e.Controls.Panel,{header:N,badge:this.props.hideBadge?void 0:e.React.createElement(s.Entity.Badge,{type:A.to[0].info}),className:"lm-control lm-transformer lm-panel-"+A.to[0].info.typeClass,key:A.id,title:A.description,isExpanded:I,onExpand:function(L){m.setPersistentState("isExpanded",L)},description:this.controller.transformer.info.description,topRightAction:this.props.showVisibilityIcon?e.React.createElement(s.Entity.VisibilityControl,{entity:this.controller.entity}):void 0},this.renderControls(),D?R:void 0))},f}(s.View);p.ControllerBase=x;var l=function(h){B(f,h);function f(){return h!==null&&h.apply(this,arguments)||this}return f.prototype.renderControls=function(){return e.React.createElement("div",null)},f}(p.ControllerBase);p.Empty=l;var _=function(h){B(f,h);function f(){return h!==null&&h.apply(this,arguments)||this}return f.prototype.render=function(){var m=this.controller.context,b=m.plugin,w=this.controller.latestState,C=w.transforms,E=C.map(function(M){var A=b.getTransformerInfo(M.transformer).view;return e.React.createElement(A,{controller:M,key:M.transformer.info.id+"-"+M.entity.id})});if(w.update){var S=b.getTransformerInfo(w.update.transformer).view;E.push(e.React.createElement(S,{controller:w.update,key:w.update.transformer.info.id+"-"+w.update.entity.id}))}return e.React.createElement("div",{className:"lm-transform-view"},E)},f}(s.View);p.View=_,p.TransparencyControl=function(h){var f=h.definition.alpha;return e.React.createElement(e.Controls.Slider,{label:"Opacity",onChange:function(m){return h.onChange({alpha:m,writeDepth:h.definition.writeDepth})},min:0,max:1,step:.01,value:f})};var v=function(h){B(f,h);function f(){return h!==null&&h.apply(this,arguments)||this}return f.prototype.componentWillMount=function(){var m=this;h.prototype.componentWillMount.call(this),this.subscribe(i.Bootstrap.Event.Tree.NodeUpdated.getStream(this.controller.context),function(b){var w=m.controller.latestState.controller,C=w&&w.entity;b.data===C&&m.forceUpdate()})},f.prototype.render=function(){var m=this.controller.latestState.controller;if(!m)return e.React.createElement("div",{className:"lm-empty-control"});var b=this.controller.context,w=b.plugin,C=w.getTransformerInfo(m.transformer).view;return C?e.React.createElement(C,{controller:m,key:m.transformer.info.id+"-"+m.entity.id,customHeader:this.controller.header,hideBadge:!0,showVisibilityIcon:!0}):(console.warn("Count not find view for updater ("+m.transformer.info.id+"), please register it."),e.React.createElement("div",{className:"lm-empty-control"}))},f}(s.View);p.Updater=v;var c=function(h){B(f,h);function f(){return h!==null&&h.apply(this,arguments)||this}return f.prototype.render=function(){var m=this.controller.latestState.controller;if(!m)return e.React.createElement("div",{className:"lm-empty-control"});var b=this.controller.context,w=b.plugin,C=w.getTransformerInfo(m.transformer).view;return C?e.React.createElement(C,{controller:m,key:m.transformer.info.id+"-"+m.entity.id,customHeader:this.controller.header,hideBadge:!0,isAction:!0}):(console.warn("Count not find view for updater ("+m.transformer.info.id+"), please register it."),e.React.createElement("div",{className:"lm-empty-control"}))},f}(s.View);p.Action=c})(d=s.Transform||(s.Transform={}))})(o=e.Views||(e.Views={}))})(r=i.Plugin||(i.Plugin={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){var x;(function(l){"use strict";var _=function(f){B(m,f);function m(){return f!==null&&f.apply(this,arguments)||this}return m.prototype.renderControls=function(){var b=this,w=this.params;return e.React.createElement("div",null,e.React.createElement(e.Controls.OptionsGroup,{options:i.Bootstrap.Entity.Data.Types,caption:function(C){return C},current:w.type,onChange:function(C){return b.updateParams({type:C,responseCompression:i.Bootstrap.Utils.DataCompressionMethod.None})},label:"Type"}),w.type==="Binary"?e.React.createElement(e.Controls.OptionsGroup,{options:["None","Gzip"],caption:function(C){return C},current:w.responseCompression===i.Bootstrap.Utils.DataCompressionMethod.Gzip?"Gzip":"None",onChange:function(C){return b.updateParams({responseCompression:C==="None"?i.Bootstrap.Utils.DataCompressionMethod.None:i.Bootstrap.Utils.DataCompressionMethod.Gzip})},label:"Compression",title:'Specify the compression of the data. Usually only appliable if you downloading "raw" files.'}):void 0,e.React.createElement(e.Controls.TextBoxGroup,{value:w.url,onChange:function(C){return b.updateParams({url:C})},label:"URL",onEnter:function(C){return b.applyEnter(C)},placeholder:"Enter URL..."}))},m}(p.ControllerBase);l.Download=_;var v=function(f){B(m,f);function m(){return f!==null&&f.apply(this,arguments)||this}return m.prototype.renderControls=function(){var b=this,w=this.params,C=this.controller.latestState;return e.React.createElement("div",null,e.React.createElement(e.Controls.OptionsGroup,{options:i.Bootstrap.Entity.Data.Types,caption:function(E){return E},current:w.type,onChange:function(E){return b.updateParams({type:E})},label:"Type"}),e.React.createElement("div",{className:"lm-btn lm-btn-block lm-btn-action lm-loader-lm-btn-file",style:{marginTop:"1px"}},w.file?w.file.name:"Select a file..."," ",e.React.createElement("input",{disabled:C.isBusy,type:"file",onChange:function(E){return b.updateParams({file:E.target.files[0]})},multiple:!1})))},m}(p.ControllerBase);l.OpenFile=v;var c=function(f){B(m,f);function m(){return f!==null&&f.apply(this,arguments)||this}return m.prototype.renderControls=function(){var b=this,w=this.params;return e.React.createElement("div",null,e.React.createElement(e.Controls.TextBoxGroup,{value:w.id,onChange:function(C){return b.updateParams({id:C})},label:"Id",onEnter:function(C){return b.applyEnter(C)},placeholder:"Enter PDB id..."}))},m}(p.ControllerBase);l.WithIdField=c;var h=function(f){B(m,f);function m(){return f!==null&&f.apply(this,arguments)||this}return m.prototype.renderControls=function(){var b=this,w=this.params;return e.React.createElement("div",null,e.React.createElement(e.Controls.TextBoxGroup,{value:w.id,onChange:function(C){return b.updateParams({id:C})},label:"URL",onEnter:function(C){return b.applyEnter(C)},placeholder:"Enter URL..."}))},m}(p.ControllerBase);l.WithUrlIdField=h})(x=p.Data||(p.Data={}))})(d=s.Transform||(s.Transform={}))})(o=e.Views||(e.Views={}))})(r=i.Plugin||(i.Plugin={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){var x;(function(l){"use strict";var _=function(A){B(R,A);function R(){return A!==null&&A.apply(this,arguments)||this}return R.prototype.renderControls=function(){var D=this,N=this.params;return e.React.createElement("div",null,e.React.createElement(e.Controls.OptionsGroup,{options:i.Core.Formats.Molecule.SupportedFormats.All,caption:function(I){return I.name},current:N.format,onChange:function(I){return D.updateParams({format:I})},label:"Format"}))},R}(p.ControllerBase);l.CreateFromData=_;var v=function(A){B(R,A);function R(){return A!==null&&A.apply(this,arguments)||this}return R.prototype.renderControls=function(){var D=this,N=this.params;return e.React.createElement("div",null,e.React.createElement(e.Controls.OptionsGroup,{options:i.Core.Formats.Molecule.SupportedFormats.All,caption:function(I){return I.name},current:N.format,onChange:function(I){return D.updateParams({format:I})},label:"Format"}),e.React.createElement(e.Controls.TextBoxGroup,{value:N.id,onChange:function(I){return D.updateParams({id:I})},label:"URL",onEnter:function(I){return D.applyEnter(I)},placeholder:"Enter url..."}))},R}(p.ControllerBase);l.DownloadFromUrl=v;var c=function(A){B(R,A);function R(){return A!==null&&A.apply(this,arguments)||this}return R.prototype.renderControls=function(){var D=this,N=this.params,I=this.controller.latestState,L=i.Core.Formats.FormatInfo.formatFileFilters(i.Core.Formats.Molecule.SupportedFormats.All);return e.React.createElement("div",null,e.React.createElement("div",{className:"lm-btn lm-btn-block lm-btn-action lm-loader-lm-btn-file",style:{marginTop:"1px"}},N.file?N.file.name:"Select a file..."," ",e.React.createElement("input",{disabled:I.isBusy,type:"file",accept:L,onChange:function(Y){return D.updateParams({file:Y.target.files[0]})},multiple:!1})))},R}(p.ControllerBase);l.OpenFile=c;var h=function(A){B(R,A);function R(){return A!==null&&A.apply(this,arguments)||this}return R.prototype.renderControls=function(){var D=this,N=this.params;return e.React.createElement("div",null,e.React.createElement(e.Controls.TextBoxGroup,{value:N.id,onChange:function(I){return D.updateParams({id:I})},label:"Id",onEnter:function(I){return D.applyEnter(I)},placeholder:"Enter pdb id..."}),e.React.createElement(e.Controls.TextBoxGroup,{value:N.server,onChange:function(I){return D.updateParams({server:I})},label:"Server",onEnter:function(I){return D.applyEnter(I)},placeholder:"Server url..."}))},R}(p.ControllerBase);l.InitCoordinateStreaming=h;var f=function(A){B(R,A);function R(){return A!==null&&A.apply(this,arguments)||this}return R.prototype.renderControls=function(){var D=this,N=this.transformSourceEntity,I=N.props.dictionary.dataBlocks.map(function(L,Y){return{b:L.header,i:Y}});return e.React.createElement("div",null,e.React.createElement(e.Controls.OptionsGroup,{options:I,caption:function(L){return L.b},current:I[this.params.blockIndex],onChange:function(L){return D.updateParams({blockIndex:L.i})},label:"Source"}))},R}(p.ControllerBase);l.CreateFromMmCif=f;var m=function(A){B(R,A);function R(){return A!==null&&A.apply(this,arguments)||this}return R.prototype.renderControls=function(){var D=this,N=this.transformSourceEntity.props.molecule.models.length;return e.React.createElement("div",null,e.React.createElement(e.Controls.Slider,{label:"Index",onChange:function(I){return D.updateParams({modelIndex:I-1})},min:1,max:N,step:1,value:(this.params.modelIndex|0)+1,title:"Index of the model."}))},R}(p.ControllerBase);l.CreateModel=m;var b=function(A){B(R,A);function R(){return A!==null&&A.apply(this,arguments)||this}return R.prototype.renderControls=function(){var D=this,N=this.params,I=i.Bootstrap.Utils.Molecule.findModel(this.transformSourceEntity),L=I.props.model.data.assemblyInfo;if(L){var Y=L.assemblies.map(function(J){return J.name});return e.React.createElement("div",null,e.React.createElement(e.Controls.OptionsGroup,{options:Y,current:N.name,onChange:function(J){return D.updateParams({name:J})},label:"Name"}))}},R}(p.ControllerBase);l.CreateAssembly=b;var w=function(A){B(R,A);function R(){return A!==null&&A.apply(this,arguments)||this}return R.prototype.renderControls=function(){var D=this,N=this.params,I=["Mates","Interaction"];return e.React.createElement("div",null,e.React.createElement(e.Controls.OptionsGroup,{options:I,current:N.type,onChange:function(L){return D.updateParams({type:L})},label:"Type",title:"Mates: copies whole asymetric unit. Interaction: Includes only residues that are no more than `radius` from the asymetric unit."}),e.React.createElement(e.Controls.Slider,{label:"Radius",onChange:function(L){return D.updateParams({radius:L})},min:0,max:25,step:.1,value:N.radius,title:"Interaction radius."}))},R}(p.ControllerBase);l.CreateSymmetryMates=w;var C=function(A){B(R,A);function R(){return A!==null&&A.apply(this,arguments)||this}return R.prototype.renderControls=function(){var D=this,N=this.params;return e.React.createElement("div",null,e.React.createElement(e.Controls.TextBoxGroup,{value:N.name,onChange:function(I){return D.updateParams({name:I})},label:"Name",onEnter:function(I){return D.applyEnter(I)},placeholder:"Optional name..."}),e.React.createElement(e.Controls.QueryEditor,{value:N.queryString,onChange:function(I){return D.updateParams({queryString:I})},onEnter:function(I){return D.applyEnter(I)}}))},R}(p.ControllerBase);l.CreateSelection=C;var E=function(A){B(R,A);function R(){return A!==null&&A.apply(this,arguments)||this}return R.prototype.renderControls=function(){var D=this,N=this.params;return e.React.createElement("div",null,e.React.createElement(e.Controls.Toggle,{onChange:function(I){return D.updateParams({polymer:I})},value:N.polymer,label:"Polymer"}),e.React.createElement(e.Controls.Toggle,{onChange:function(I){return D.updateParams({het:I})},value:N.het,label:"HET"}),e.React.createElement(e.Controls.Toggle,{onChange:function(I){return D.updateParams({water:I})},value:N.water,label:"Water"}))},R}(p.ControllerBase);l.CreateMacromoleculeVisual=E;var S=function(A){B(R,A);function R(){return A!==null&&A.apply(this,arguments)||this}return R.prototype.detail=function(){var D=this,N=this.params.style.params;return[e.React.createElement(e.Controls.OptionsGroup,{options:i.Bootstrap.Visualization.Molecule.DetailTypes,caption:function(I){return I},current:N.detail,onChange:function(I){return D.controller.updateStyleParams({detail:I})},label:"Detail"})]},R.prototype.cartoons=function(){var D=this,N=this.params.style.params;return[e.React.createElement(e.Controls.Toggle,{key:0,onChange:function(I){return D.controller.updateStyleParams({showDirectionCone:I})},value:N.showDirectionCone,label:"Dir. Cones"}),e.React.createElement(e.Controls.OptionsGroup,{key:1,options:i.Bootstrap.Visualization.Molecule.DetailTypes,caption:function(I){return I},current:N.detail,onChange:function(I){return D.controller.updateStyleParams({detail:I})},label:"Detail"})]},R.prototype.ballsAndSticks=function(){var D=this,N=this.params.style.params,I=[],L=0;I.push(e.React.createElement(e.Controls.Toggle,{title:"Scale atoms using their VDW radius.",onChange:function(J){return D.controller.updateStyleParams({useVDW:J})},value:N.useVDW,label:"VDW"})),N.useVDW?I.push(e.React.createElement(e.Controls.Slider,{key:L++,label:"Scale",onChange:function(J){return D.controller.updateStyleParams({vdwScaling:J})},min:.1,max:1,step:.01,value:N.vdwScaling,title:"VDW scale factor."})):I.push(e.React.createElement(e.Controls.Slider,{key:L++,label:"Atom Rds",onChange:function(J){return D.controller.updateStyleParams({atomRadius:J})},min:.05,max:2,step:.01,value:N.atomRadius,title:"Atom Radius"})),I.push(e.React.createElement(e.Controls.Slider,{key:L++,label:"Bond Rds",onChange:function(J){return D.controller.updateStyleParams({bondRadius:J})},min:.05,max:1,step:.01,value:N.bondRadius,title:"Bond Radius"}));var Y=N.customMaxBondLengths&&N.customMaxBondLengths.H?N.customMaxBondLengths.H:1.15;return I.push(e.React.createElement(e.Controls.Slider,{key:L++,label:"H Bond Len",onChange:function(J){return D.controller.updateStyleParams({customMaxBondLengths:j({},N.customMaxBondLengths,{H:J})})},min:.9,max:1.5,step:.01,value:Y,title:"Maximum H bond length"})),I.push(e.React.createElement(e.Controls.Toggle,{key:L++,onChange:function(J){return D.controller.updateStyleParams({hideHydrogens:J})},value:N.hideHydrogens,label:"Hide H"})),I.push(e.React.createElement(e.Controls.OptionsGroup,{key:L++,options:i.Bootstrap.Visualization.Molecule.DetailTypes,caption:function(J){return J},current:N.detail,onChange:function(J){return D.controller.updateStyleParams({detail:J})},label:"Detail"})),I},R.prototype.surface=function(){var D=this,N=this.params.style.params,I=0;return[e.React.createElement(e.Controls.Slider,{key:I++,label:"Probe Radius",onChange:function(L){return D.controller.updateStyleParams({probeRadius:L})},min:0,max:6,step:.1,value:N.probeRadius}),e.React.createElement(e.Controls.Slider,{key:I++,label:"Smoothing",onChange:function(L){return D.controller.updateStyleParams({smoothing:L})},min:0,max:20,step:1,value:N.smoothing,title:"Number of laplacian smoothing itrations."}),e.React.createElement(e.Controls.Toggle,{key:I++,onChange:function(L){return D.controller.updateStyleParams({automaticDensity:L})},value:N.automaticDensity,label:"Auto Detail"}),N.automaticDensity?void 0:e.React.createElement(e.Controls.Slider,{key:I++,label:"Detail",onChange:function(L){return D.controller.updateStyleParams({density:L})},min:.1,max:3,step:.1,value:N.density,title:"Determines the size of a grid cell (size = 1/detail)."}),e.React.createElement(e.Controls.Toggle,{key:I++,onChange:function(L){return D.controller.updateStyleParams({isWireframe:L})},value:N.isWireframe,label:"Wireframe"})]},R.prototype.createColors=function(){var D=this,N=this.params.style.theme,I=this.params.style.type==="BallsAndSticks",L=N.colors.filter(function(Y,J){return I?!0:J!=="Bond"}).map(function(Y,J){return e.React.createElement(e.Controls.ToggleColorPicker,{key:J,label:J,color:Y,onChange:function(ie){return D.controller.updateThemeColor(J,ie)}})}).toArray();return L.push(e.React.createElement(p.TransparencyControl,{definition:N.transparency,onChange:function(Y){return D.controller.updateThemeTransparency(Y)}})),L},R.prototype.renderControls=function(){var D=this,N=this.params,I;switch(N.style.type){case"Surface":I=this.surface();break;case"BallsAndSticks":I=this.ballsAndSticks();break;case"Cartoons":I=this.cartoons();break;default:I=this.detail();break}var L=function(ie){return i.Bootstrap.Visualization.Molecule.TypeDescriptions[ie]},Y=this.getPersistentState("showTypeOptions",!1),J=this.getPersistentState("showThemeOptions",!1);return e.React.createElement("div",null,e.React.createElement(e.Controls.ExpandableGroup,{select:e.React.createElement(e.Controls.OptionsGroup,{options:i.Bootstrap.Visualization.Molecule.Types,caption:function(ie){return L(ie).label},current:N.style.type,onChange:function(ie){return D.controller.updateTemplate(ie,i.Bootstrap.Visualization.Molecule.Default.ForType)},label:"Type"}),expander:e.React.createElement(e.Controls.ControlGroupExpander,{isExpanded:Y,onChange:function(ie){return D.setPersistentState("showTypeOptions",ie)}}),options:I,isExpanded:Y}),e.React.createElement(e.Controls.ExpandableGroup,{select:e.React.createElement(e.Controls.OptionsGroup,{options:i.Bootstrap.Visualization.Molecule.Default.Themes,caption:function(ie){return ie.name},current:N.style.theme.template,onChange:function(ie){return D.controller.updateThemeDefinition(ie)},label:"Coloring"}),expander:e.React.createElement(e.Controls.ControlGroupExpander,{isExpanded:J,onChange:function(ie){return D.setPersistentState("showThemeOptions",ie)}}),options:this.createColors(),isExpanded:J}))},R}(p.ControllerBase);l.CreateVisual=S;var M=function(A){B(R,A);function R(){return A!==null&&A.apply(this,arguments)||this}return R.prototype.renderControls=function(){var D=this,N=this.controller.latestState.params.style,I=e.React.createElement(e.Controls.OptionsGroup,{options:i.Bootstrap.Utils.Molecule.Labels3DKinds,caption:function(Y){return i.Bootstrap.Utils.Molecule.Labels3DKindLabels[Y]},current:N.params.kind,onChange:function(Y){return D.controller.updateStyleParams({kind:Y})},label:"Kind"}),L=this.getPersistentState("showOptions",!1);return e.React.createElement("div",null,e.React.createElement(e.Controls.ExpandableGroup,{select:I,expander:e.React.createElement(e.Controls.ControlGroupExpander,{isExpanded:L,onChange:function(Y){return D.setPersistentState("showOptions",Y)}}),options:p.Labels.optionsControls(this.controller),isExpanded:L}))},R}(p.ControllerBase);l.CreateLabels=M})(x=p.Molecule||(p.Molecule={}))})(d=s.Transform||(s.Transform={}))})(o=e.Views||(e.Views={}))})(r=i.Plugin||(i.Plugin={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){var x;(function(l){"use strict";var _=function(b){return e.React.createElement(e.Controls.ExpandableGroup,{select:e.React.createElement(e.Controls.Slider,{label:b.isSigma?"Iso Value (\u03C3)":"Iso Value",onChange:b.onChangeValue,min:b.min,max:b.max,value:b.value,step:.001}),expander:e.React.createElement(e.Controls.ControlGroupExpander,{isExpanded:b.view.getPersistentState("showIsoValueType",!1),onChange:function(w){return b.view.setPersistentState("showIsoValueType",w)}}),options:[e.React.createElement(e.Controls.Toggle,{onChange:function(w){return b.onChangeType(w?i.Bootstrap.Visualization.Density.IsoValueType.Sigma:i.Bootstrap.Visualization.Density.IsoValueType.Absolute)},value:b.isSigma,label:"Relative (\\u03C3)"})],isExpanded:b.view.getPersistentState("showIsoValueType",!1)})};function v(b,w,C,E){var S=(w-b.valuesInfo.mean)/b.valuesInfo.sigma;return S>E?E:S<C?C:S}function c(b,w){var C=b.valuesInfo.mean+w*b.valuesInfo.sigma;return C>b.valuesInfo.max?b.valuesInfo.max:C<b.valuesInfo.min?b.valuesInfo.min:C}var h=function(b){B(w,b);function w(){return b!==null&&b.apply(this,arguments)||this}return w.prototype.renderControls=function(){var C=this,E=this.params,S=i.Bootstrap.Utils.round;if(this.isUpdate){var M=this.controller.entity.props.data;return e.React.createElement("div",null,e.React.createElement(e.Controls.RowText,{label:"Format",value:E.format.name}),e.React.createElement(e.Controls.RowText,{label:"Sigma",value:S(M.valuesInfo.sigma,3)}),e.React.createElement(e.Controls.RowText,{label:"Mean",value:S(M.valuesInfo.mean,3)}),e.React.createElement(e.Controls.RowText,{label:"Value Range",value:"["+S(M.valuesInfo.min,3)+", "+S(M.valuesInfo.max,3)+"]"}))}return e.React.createElement("div",null,e.React.createElement(e.Controls.OptionsGroup,{options:i.Core.Formats.Density.SupportedFormats.All,caption:function(A){return A.name},current:E.format,onChange:function(A){return C.updateParams({format:A})},label:"Format"}))},w}(p.ControllerBase);l.ParseData=h;var f=function(b){B(w,b);function w(){return b!==null&&b.apply(this,arguments)||this}return w.prototype.surface=function(){var C=this,E=i.Bootstrap.Tree.Node.findClosestNodeOfType(this.transformSourceEntity,[i.Bootstrap.Entity.Density.Data]),S=this.params.style.params,M=S.isoValueType!==i.Bootstrap.Visualization.Density.IsoValueType.Absolute,A=E.props.data.valuesInfo,R=M?(A.min-A.mean)/A.sigma:A.min,D=M?(A.max-A.mean)/A.sigma:A.max;return e.React.createElement(_,{view:this,onChangeValue:function(N){return C.controller.updateStyleParams({isoValue:N})},onChangeType:function(N){N!==S.isoValueType&&(N===i.Bootstrap.Visualization.Density.IsoValueType.Absolute?C.controller.updateStyleParams({isoValue:c(E.props.data,S.isoValue),isoValueType:N}):C.controller.updateStyleParams({isoValue:v(E.props.data,S.isoValue,-5,5),isoValueType:N}))},min:R,max:D,isSigma:M,value:S.isoValue})},w.prototype.colors=function(){var C=this,E=this.params.style.params,S=this.params.style.theme,M=S.colors.get("Uniform"),A=e.React.createElement(e.Controls.ToggleColorPicker,{key:"Uniform",label:"Color",color:M,onChange:function(N){return C.controller.updateThemeColor("Uniform",N)}}),R=[];R.push(e.React.createElement(p.TransparencyControl,{definition:S.transparency,onChange:function(N){return C.controller.updateThemeTransparency(N)}})),R.push(e.React.createElement(e.Controls.Toggle,{onChange:function(N){return C.controller.updateStyleParams({isWireframe:N})},value:E.isWireframe,label:"Wireframe"}));var D=this.getPersistentState("showThemeOptions",!1);return e.React.createElement(e.Controls.ExpandableGroup,{select:A,expander:e.React.createElement(e.Controls.ControlGroupExpander,{isExpanded:D,onChange:function(N){return C.setPersistentState("showThemeOptions",N)}}),options:R,isExpanded:D})},w.prototype.renderControls=function(){return e.React.createElement("div",null,this.surface(),this.colors())},w}(p.ControllerBase);l.CreateVisual=f;var m=function(b){B(w,b);function w(){return b!==null&&b.apply(this,arguments)||this}return w.prototype.surface=function(){var C=this,E=i.Bootstrap.Tree.Node.findClosestNodeOfType(this.transformSourceEntity,[i.Bootstrap.Entity.Density.Data]),S=this.params,M=S.style.params,A=M.isoValueType!==i.Bootstrap.Visualization.Density.IsoValueType.Absolute;return e.React.createElement(_,{view:this,onChangeValue:function(R){return C.controller.updateStyleParams({isoValue:R})},onChangeType:function(R){R!==M.isoValueType&&(R===i.Bootstrap.Visualization.Density.IsoValueType.Absolute?C.controller.updateStyleParams({isoValue:c(E.props.data,M.isoValue),isoValueType:R}):C.controller.updateStyleParams({isoValue:v(E.props.data,M.isoValue,S.isoSigmaMin,S.isoSigmaMax),isoValueType:R}))},min:A?S.isoSigmaMin:E.props.data.valuesInfo.min,max:A?S.isoSigmaMax:E.props.data.valuesInfo.max,isSigma:A,value:M.isoValue})},w.prototype.colors=function(){var C=this,E=this.params.style.params,S=this.params.style.theme,M=S.colors.get("Uniform"),A=e.React.createElement(e.Controls.ToggleColorPicker,{key:"Uniform",label:"Color",color:M,onChange:function(N){return C.controller.updateThemeColor("Uniform",N)}}),R=[];R.push(e.React.createElement(p.TransparencyControl,{definition:S.transparency,onChange:function(N){return C.controller.updateThemeTransparency(N)}})),R.push(e.React.createElement(e.Controls.Toggle,{onChange:function(N){return C.controller.updateStyleParams({isWireframe:N})},value:E.isWireframe,label:"Wireframe"}));var D=this.getPersistentState("showThemeOptions",!1);return e.React.createElement(e.Controls.ExpandableGroup,{select:A,expander:e.React.createElement(e.Controls.ControlGroupExpander,{isExpanded:D,onChange:function(N){return C.setPersistentState("showThemeOptions",N)}}),options:R,isExpanded:D})},w.prototype.show=function(){var C=this,E="Around Selection",S="Everything",M=this.params;return e.React.createElement(e.Controls.OptionsGroup,{options:[E,S],caption:function(A){return A},current:M.showFull?S:E,onChange:function(A){return C.autoUpdateParams({showFull:A===S})},label:"Show"})},w.prototype.renderControls=function(){var C=this,E=this.params;return e.React.createElement("div",null,this.surface(),this.colors(),this.show(),E.showFull?void 0:e.React.createElement(e.Controls.Slider,{label:"Radius",onChange:function(S){return C.autoUpdateParams({radius:S})},min:E.minRadius!==void 0?E.minRadius:0,max:E.maxRadius!==void 0?E.maxRadius:10,step:.005,value:E.radius}))},w}(p.ControllerBase);l.CreateVisualBehaviour=m})(x=p.Density||(p.Density={}))})(d=s.Transform||(s.Transform={}))})(o=e.Views||(e.Views={}))})(r=i.Plugin||(i.Plugin={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){var x;(function(l){"use strict";function _(v){var c=v.latestState.params.style,h=c.theme.colors.map(function(f,m){return e.React.createElement(e.Controls.ToggleColorPicker,{key:m,label:m==="Uniform"?"Font":m,color:f,onChange:function(b){return v.updateThemeColor(m,b)}})}).toArray();return[e.React.createElement(e.Controls.Slider,{label:"Size",onChange:function(f){return v.updateThemeVariable("sizeFactor",f)},min:.1,max:10,step:.1,value:c.theme.variables&&c.theme.variables.get("sizeFactor")||1,title:"Font size."}),e.React.createElement(e.Controls.Slider,{label:"Outline",onChange:function(f){return v.updateThemeVariable("outlineWidth",f)},min:0,max:.3,step:.001,value:c.theme.variables&&c.theme.variables.get("outlineWidth")||0,title:"Font outline."}),e.React.createElement(e.Controls.Slider,{label:"Offset",onChange:function(f){return v.updateThemeVariable("zOffset",f)},min:0,max:5,step:.1,value:c.theme.variables&&c.theme.variables.get("zOffset")||0,title:"Label offset."}),e.React.createElement(e.Controls.Slider,{label:"Bg. Opacity",onChange:function(f){return v.updateThemeVariable("backgroundOpacity",f)},min:0,max:1,step:.01,value:c.theme.variables&&c.theme.variables.get("backgroundOpacity")||0,title:"Background opacity."})].concat(h)}l.optionsControls=_})(x=p.Labels||(p.Labels={}))})(d=s.Transform||(s.Transform={}))})(o=e.Views||(e.Views={}))})(r=i.Plugin||(i.Plugin={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){"use strict";var x=i.Bootstrap.Service.Logger.EntryType,l=function(_){B(v,_);function v(){var c=_!==null&&_.apply(this,arguments)||this;return c.wrapper=void 0,c}return v.prototype.componentWillMount=function(){var c=this;_.prototype.componentWillMount.call(this),this.subscribe(i.Bootstrap.Event.Common.LayoutChanged.getStream(this.controller.context),function(){return c.scrollToBottom()})},v.prototype.componentDidUpdate=function(){this.scrollToBottom()},v.prototype.scrollToBottom=function(){var c=this.wrapper;c&&(c.scrollTop=c.scrollHeight-c.clientHeight-1)},v.prototype.render=function(){var c=this,h=this.controller.latestState.entries;return e.React.createElement("div",{className:"lm-log-wrap"},e.React.createElement("div",{className:"lm-log",ref:function(f){return c.wrapper=f}},e.React.createElement("ul",{className:"lm-list-unstyled"},h.map(function(f,m,b){var w=f,C=i.Bootstrap.Utils.formatTime(w.timestamp);return e.React.createElement("li",{key:m},e.React.createElement("div",{className:"lm-log-entry-badge lm-log-entry-"+x[w.type].toLowerCase()}),e.React.createElement("div",{className:"lm-log-timestamp"},C),e.React.createElement("div",{className:"lm-log-entry"},w.message))}))))},v}(s.View);p.Log=l})(d=s.Context||(s.Context={}))})(o=e.Views||(e.Views={}))})(r=i.Plugin||(i.Plugin={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){"use strict";var x=function(v){B(c,v);function c(){return v!==null&&v.apply(this,arguments)||this}return c.prototype.render=function(){var h=this.props.info;return e.React.createElement("div",{className:"lm-task-state"},e.React.createElement("div",null,h.abort?e.React.createElement(e.Controls.Button,{onClick:function(){return h.abort.call(null)},style:"remove",icon:"abort",title:"Abort",customClass:"lm-btn-icon"}):void 0,e.React.createElement("div",null,h.name,": ",h.message)))},c}(e.React.Component),l=function(v){B(c,v);function c(){return v!==null&&v.apply(this,arguments)||this}return c.prototype.render=function(){var h=this.controller.latestState;if(!h.tasks.count())return e.React.createElement("div",{className:"lm-empty-control"});var f=[];return h.tasks.forEach(function(m,b){return f.push(e.React.createElement(x,{key:b,info:m}))}),e.React.createElement("div",{className:"lm-overlay"},e.React.createElement("div",{className:"lm-overlay-background"}),e.React.createElement("div",{className:"lm-overlay-content-wrap"},e.React.createElement("div",{className:"lm-overlay-content"},e.React.createElement("div",null,f))))},c}(s.View);p.Overlay=l;var _=function(v){B(c,v);function c(){return v!==null&&v.apply(this,arguments)||this}return c.prototype.render=function(){var h=this.controller.latestState;if(!h.tasks.count())return e.React.createElement("div",{className:"lm-empty-control"});var f=[];return h.tasks.forEach(function(m,b){return f.push(e.React.createElement(x,{key:b,info:m,isSmall:!0}))}),e.React.createElement("div",{className:"lm-background-tasks"},f)},c}(s.View);p.BackgroundTasks=_})(d=s.Context||(s.Context={}))})(o=e.Views||(e.Views={}))})(r=i.Plugin||(i.Plugin={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){"use strict";var x=function(_){B(v,_);function v(){return _!==null&&_.apply(this,arguments)||this}return v.prototype.hide=function(){var c=this.props.entry;(c.hide||function(){}).call(null)},v.prototype.render=function(){var c=this,h=this.props.entry,f=typeof h.message=="string"?e.React.createElement("div",{dangerouslySetInnerHTML:{__html:h.message}}):e.React.createElement("div",null,h.message);return e.React.createElement("div",{className:"lm-toast-entry"},e.React.createElement("div",{className:"lm-toast-title",onClick:function(){return c.hide()}},h.title),e.React.createElement("div",{className:"lm-toast-message"},f),e.React.createElement("div",{className:"lm-toast-clear"}),e.React.createElement("div",{className:"lm-toast-hide"},e.React.createElement(e.Controls.Button,{onClick:function(){return c.hide()},style:"link",icon:"abort",title:"Hide",customClass:"lm-btn-icon"})))},v}(e.React.Component),l=function(_){B(v,_);function v(){return _!==null&&_.apply(this,arguments)||this}return v.prototype.render=function(){var c=this.controller.latestState;if(!c.entries.count())return e.React.createElement("div",{className:"lm-empty-control"});var h=[];c.entries.forEach(function(m,b){return h.push(m)}),h.sort(function(m,b){return m.serialNumber-b.serialNumber});var f=h.map(function(m){return e.React.createElement(x,{key:m.serialNumber,entry:m})});return e.React.createElement("div",{className:"lm-toast-container"},e.React.createElement("div",null,f))},v}(s.View);p.Toast=l})(d=s.Context||(s.Context={}))})(o=e.Views||(e.Views={}))})(r=i.Plugin||(i.Plugin={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){"use strict";p.VisibilityControl=function(_){var v=_.entity,c=function(){i.Bootstrap.Command.Entity.SetVisibility.dispatch(v.tree.context,{entity:v,visible:v.state.visibility!==0})},h=v.state.visibility,f,m;return h===0?(f="full",m="Hide"):h===2?(f="none",m="Show"):(f="partial",m="Show"),e.React.createElement(e.Controls.Button,{title:m,onClick:c,icon:"visual-visibility",style:"link",customClass:"lm-entity-tree-entry-toggle-visible lm-entity-tree-entry-toggle-visible-"+f})};var x=function(_){B(v,_);function v(){var c=_!==null&&_.apply(this,arguments)||this;return c.renderedVersion=-1,c.root=void 0,c}return v.prototype.ensureVisible=function(){this.ctx.currentEntity===this.props.node&&this.root&&this.props.tree.scrollIntoView(this.root)},v.prototype.componentDidMount=function(){this.ensureVisible()},v.prototype.componentDidUpdate=function(){this.ensureVisible()},Object.defineProperty(v.prototype,"node",{get:function(){return this.props.node},enumerable:!0,configurable:!0}),v.prototype.shouldComponentUpdate=function(c,h,f){return this.node.version!==this.renderedVersion},v.prototype.componentWillMount=function(){var c=this;this.ctx=this.props.node.tree.context;var h=this.node;this.subscribe(i.Bootstrap.Event.Tree.NodeUpdated.getStream(this.ctx),function(f){f.data===h&&(h.version!==c.renderedVersion&&c.forceUpdate(),c.ctx.currentEntity===h&&c.isFullyBound()&&setTimeout(i.Bootstrap.Command.Entity.SetCurrent.dispatch(c.ctx,h.children[0]),0))})},v.prototype.highlight=function(c){var h=this.node;i.Bootstrap.Command.Entity.Highlight.dispatch(this.ctx,{entities:this.ctx.select(i.Bootstrap.Tree.Selection.byValue(h).subtree()),isOn:c})},v.prototype.row=function(c){var h=this,f=this.props.node,m=f.props,b=f.parent===f,w=m.label;return m.description&&(w+=" ("+m.description+")"),e.React.createElement("div",{className:"lm-entity-tree-entry-body"+(this.ctx.currentEntity===f?" lm-entity-tree-entry-current":"")+(this.isOnCurrentPath()?" lm-entity-tree-entry-current-path":""),ref:function(C){return h.root=C}},e.React.createElement(p.Badge,{type:f.type.info}),e.React.createElement("div",{className:"lm-entity-tree-entry-label-wrap"},e.React.createElement(e.Controls.Button,{onClick:function(){return i.Bootstrap.Command.Entity.SetCurrent.dispatch(h.ctx,f)},customClass:"lm-entity-tree-entry-label",style:"link",title:w},e.React.createElement("span",null,m.label,e.React.createElement("span",{className:"lm-entity-tree-entry-label-tag"},m.description?" "+m.description:void 0)))),!b||c?e.React.createElement(e.Controls.Button,{title:"Remove",onClick:function(){return i.Bootstrap.Command.Tree.RemoveNode.dispatch(f.tree.context,f)},icon:"remove",style:"link",customClass:"lm-entity-tree-entry-remove"}):void 0,b&&!c?void 0:e.React.createElement(p.VisibilityControl,{entity:f}))},v.prototype.renderFlat=function(){for(var c=this.node,h=[],f=0,m=c.children;f<m.length;f++){var b=m[f];h.push(e.React.createElement(v,{key:b.id,node:b,tree:this.props.tree}))}return e.React.createElement("div",{key:c.id},h)},v.prototype.isFullyBound=function(){for(var c=!0,h=0,f=this.node.children;h<f.length;h++){var m=f[h];if(!m.transform.props.isBinding){c=!1;break}}return c&&this.node.children.length===1},v.prototype.isOnCurrentPath=function(){if(!this.ctx.currentEntity)return!1;for(var c=this.ctx.currentEntity.parent,h=this.node;c.parent!==c;){if(c===h)return!0;c=c.parent}return!1},v.prototype.render=function(){var c=this,h=this.node;this.renderedVersion=h.version;var f=h.parent===h;if(this.isFullyBound())return this.renderFlat();for(var m=h.state,b=0,w=[],C=0,E=h.children;C<E.length;C++){var S=E[C];S.isHidden||(f||w.push(e.React.createElement(v,{key:S.id,node:S,tree:this.props.tree})),b++)}var M;w.length?M=m.isCollapsed?e.React.createElement(e.Controls.Button,{style:"link",title:"Expand",onClick:function(){return i.Bootstrap.Command.Entity.ToggleExpanded.dispatch(c.ctx,h)},icon:"expand",customClass:"lm-entity-tree-entry-toggle-group"}):e.React.createElement(e.Controls.Button,{style:"link",title:"Collapse",onClick:function(){return i.Bootstrap.Command.Entity.ToggleExpanded.dispatch(c.ctx,h)},icon:"collapse",customClass:"lm-entity-tree-entry-toggle-group"}):h.state.visibility===0&&h.type.info.traits.isFocusable&&(M=e.React.createElement(e.Controls.Button,{style:"link",icon:"focus-on-visual",title:"Focus",onClick:function(){return i.Bootstrap.Command.Entity.Focus.dispatch(c.ctx,c.ctx.select(h))},customClass:"lm-entity-tree-entry-toggle-group"}));var A=e.React.createElement("div",{className:"lm-entity-tree-entry",onMouseEnter:function(){return c.highlight(!0)},onMouseLeave:function(){return c.highlight(!1)},onTouchStart:function(){return setTimeout(function(){return c.highlight(!0)},1e3/30)},onTouchCancel:function(){return setTimeout(function(){return c.highlight(!1)},1e3/30)},onTouchEnd:function(){return setTimeout(function(){return c.highlight(!1)},1e3/30)}},M,this.row(b));return e.React.createElement("div",{key:h.id,className:f?"lm-entity-tree-root":""},A,e.React.createElement("div",{className:"lm-entity-tree-children-wrap",style:{display:m.isCollapsed?"none":"block"}},w))},v}(s.ObserverView),l=function(_){B(v,_);function v(){var c=_!==null&&_.apply(this,arguments)||this;return c.renderedVersion=-1,c.root=void 0,c.splash=p.SplashInfo.Info(),c}return v.prototype.scrollIntoView=function(c){var h=this.root;if(!(!h||!c))try{var f=h.getBoundingClientRect(),m=c.getBoundingClientRect(),b=h.scrollTop;if(m.top<f.top){var w=f.top-m.top;h.scrollTop=b-w}else if(m.bottom>f.bottom){var w=m.bottom-f.bottom;h.scrollTop=b+w}}catch{}},v.prototype.componentWillMount=function(){var c=this,h=this.controller.context.tree.root,f=h.tree.context;this.subscribe(i.Bootstrap.Event.Tree.NodeUpdated.getStream(f),function(m){m.data===h&&h.version!==c.renderedVersion&&c.forceUpdate()})},v.prototype.render=function(){var c=this,h=this.controller.context.tree.root;this.renderedVersion=h.version;for(var f=[],m=0,b=h.children;m<b.length;m++){var w=b[m];w.isHidden||f.push(e.React.createElement(x,{key:w.id,node:w,tree:this}))}return e.React.createElement("div",{className:"lm-entity-tree",ref:function(C){return c.root=C}},e.React.createElement(x,{key:h.id,node:h,tree:this}),e.React.createElement("div",{className:"lm-entity-tree-children"},f.length?f:this.splash))},v}(s.View);p.Tree=l})(d=s.Entity||(s.Entity={}))})(o=e.Views||(e.Views={}))})(r=i.Plugin||(i.Plugin={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){"use strict";p.Remove=function(v){return e.React.createElement(e.Controls.Button,{onClick:function(){i.Bootstrap.Command.Tree.RemoveNode.dispatch(v.entity.tree.context,v.entity),v.onRemove.call(null)},style:"link",icon:"remove",customClass:"lm-remove-entity lm-btn-icon"})};var x=function(v){B(c,v);function c(){return v!==null&&v.apply(this,arguments)||this}return c.prototype.shouldComponentUpdate=function(h,f,m){return this.props.type!==h.type},c.prototype.createBadge=function(h){if(h.length){for(var f=0;f<h.length;f++){if(h[f]==="_")return e.React.createElement("span",null,h.substr(0,f),e.React.createElement("sub",null,this.createBadge(h.substr(f+1))));if(h[f]==="^")return e.React.createElement("span",null,h.substr(0,f),e.React.createElement("sup",null,this.createBadge(h.substr(f+1))))}return h}},c.prototype.render=function(){var h=this.props.type;return e.React.createElement("div",{className:"lm-entity-badge lm-entity-badge-"+this.props.type.typeClass,title:h.name},e.React.createElement("div",null,h===i.Bootstrap.Entity.Root.info?void 0:this.createBadge(h.shortName)))},c}(e.React.Component);p.Badge=x;var l=function(v){B(c,v);function c(){var h=v!==null&&v.apply(this,arguments)||this;return h.state={current:void 0},h}return c.prototype.componentWillMount=function(){var h=this;v.prototype.componentWillMount.call(this),this.state.current=this.controller.context.currentEntity,this.subscribe(i.Bootstrap.Event.Entity.CurrentChanged.getStream(this.controller.context),function(f){h.setState({current:f.data})})},c.prototype.render=function(){var h=this;if(!this.state.current)return e.React.createElement("div",{className:"lm-entity-info"},e.React.createElement("div",null,e.React.createElement("span",null,this.controller.appName)));var f=this.state.current;return e.React.createElement("div",{className:"lm-entity-info",title:f.props.label+" "+(f.props.description?f.props.description:"")},e.React.createElement("div",null,e.React.createElement(x,{type:f.type.info}),e.React.createElement("span",null,f.props.label,e.React.createElement("span",null,f.props.description)),f.parent===f&&!f.children.length?void 0:e.React.createElement(p.Remove,{entity:f,onRemove:function(){return h.forceUpdate()}})))},c}(s.View);p.CurrentEntityControl=l;var _;(function(v){v.General=function(){return e.React.createElement("div",{className:"lm-entity-splash-general"},e.React.createElement("div",null),e.React.createElement("span",{className:"lm-icon lm-icon-info"}),"The application operates on an entity tree structure that can be manipulated using the controls on the panel to the right.")};var c=function(h){B(f,h);function f(){var m=h!==null&&h.apply(this,arguments)||this;return m.state={isExpanded:!1},m}return f.prototype.render=function(){var m=this;return e.React.createElement("div",{className:"lm-entity-splash-class lm-entity-splash-class-"+(this.state.isExpanded?"expanded":"collapsed")},e.React.createElement("div",{onClick:function(){return m.setState({isExpanded:!m.state.isExpanded})}},e.React.createElement("div",null),e.React.createElement("div",{className:"lm-entity-badge-"+this.props.cls})," ",e.React.createElement("span",null,this.props.cls)),e.React.createElement("div",null,this.props.desc))},f}(e.React.Component);v.Info=function(){return e.React.createElement("div",{className:"lm-entity-splash"},e.React.createElement(v.General,null),e.React.createElement(c,{cls:"Root",desc:"The root entity represents the starting point of all actions."}),e.React.createElement(c,{cls:"Action",desc:"Represents a composition of one of more changes to the entity tree."}),e.React.createElement(c,{cls:"Data",desc:"Low level data, for example a string or a CIF dictionary."}),e.React.createElement(c,{cls:"Object",desc:"A more complex structure obtained from low level data. For example a molecule."}),e.React.createElement(c,{cls:"Visual",desc:"A visual representation of an object."}),e.React.createElement(c,{cls:"Selection",desc:"A description of a substructure of an object or a visual."}),e.React.createElement(c,{cls:"Behaviour",desc:"Represents a dynamic behavior of the program. For example creating electron density surface when the selection changes."}),e.React.createElement(c,{cls:"Group",desc:"A collection of related entities."}))}})(_=p.SplashInfo||(p.SplashInfo={}))})(d=s.Entity||(s.Entity={}))})(o=e.Views||(e.Views={}))})(r=i.Plugin||(i.Plugin={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){var d;(function(p){"use strict";var x=function(v){B(c,v);function c(){var h=v!==null&&v.apply(this,arguments)||this;return h.state={showSceneOptions:!1,showHelp:!1},h}return c.prototype.help=function(){return e.React.createElement("div",{className:"lm-viewport-controls-scene-options lm-control"},e.React.createElement(e.Controls.HelpBox,{title:"Rotate",content:e.React.createElement("div",null,e.React.createElement("div",null,"Left button"),e.React.createElement("div",null,"One finger touch"))}),e.React.createElement(e.Controls.HelpBox,{title:"Zoom",content:e.React.createElement("div",null,e.React.createElement("div",null,"Right button"),e.React.createElement("div",null,"Pinch"))}),e.React.createElement(e.Controls.HelpBox,{title:"Move",content:e.React.createElement("div",null,e.React.createElement("div",null,"Middle button"),e.React.createElement("div",null,"Two finger touch"))}),e.React.createElement(e.Controls.HelpBox,{title:"Slab",content:e.React.createElement("div",null,e.React.createElement("div",null,"Mouse wheel"),e.React.createElement("div",null,"Three finger touch"))}))},c.prototype.render=function(){var h=this,f=this.controller.latestState,m,b=this.controller.context.layout,w=b.latestState;this.state.showSceneOptions?m=e.React.createElement("div",{className:"lm-viewport-controls-scene-options lm-control"},e.React.createElement(e.Controls.Toggle,{onChange:function(E){return h.controller.setState({enableFog:E})},value:f.enableFog,label:"Fog"}),e.React.createElement(e.Controls.Slider,{label:"Fog Factor",min:.1,max:1,step:.01,onChange:function(E){return h.controller.setState({fogFactor:E})},value:f.fogFactor}),e.React.createElement(e.Controls.Slider,{label:"FOV",min:30,max:90,onChange:function(E){return h.controller.setState({cameraFOV:E})},value:f.cameraFOV}),e.React.createElement(e.Controls.Slider,{label:"Camera Speed",min:1,max:10,step:.01,onChange:function(E){return h.controller.setState({cameraSpeed:E})},value:f.cameraSpeed}),e.React.createElement(e.Controls.ToggleColorPicker,{color:f.clearColor,label:"Background",position:"below",onChange:function(E){return h.controller.setState({clearColor:E})}})):this.state.showHelp&&(m=this.help());var C=!w.hideControls;return e.React.createElement("div",{className:"lm-viewport-controls",onMouseLeave:function(){return h.setState({showSceneOptions:!1,showHelp:!1})}},e.React.createElement("div",{className:"lm-viewport-controls-buttons"},e.React.createElement(e.Controls.Button,{style:"link",active:this.state.showHelp,customClass:"lm-btn-link-toggle-"+(this.state.showHelp?"on":"off"),icon:"help-circle",onClick:function(E){return h.setState({showHelp:!h.state.showHelp,showSceneOptions:!1})},title:"Controls Help"}),e.React.createElement(e.Controls.Button,{style:"link",active:this.state.showSceneOptions,customClass:"lm-btn-link-toggle-"+(this.state.showSceneOptions?"on":"off"),icon:"settings",onClick:function(E){return h.setState({showSceneOptions:!h.state.showSceneOptions,showHelp:!1})},title:"Scene Options"}),e.React.createElement(e.Controls.Button,{style:"link",icon:"screenshot",onClick:function(E){return h.controller.scene.scene.downloadScreenshot()},title:"Screenshot"}),e.React.createElement(e.Controls.Button,{onClick:function(){b.update({hideControls:C}),h.forceUpdate()},icon:"tools",title:C?"Hide Controls":"Show Controls",active:C,customClass:"lm-btn-link-toggle-"+(C?"on":"off"),style:"link"}),e.React.createElement(e.Controls.Button,{onClick:function(){return b.update({isExpanded:!w.isExpanded})},icon:"expand-layout",title:w.isExpanded?"Collapse":"Expand",active:w.isExpanded,customClass:"lm-btn-link-toggle-"+(w.isExpanded?"on":"off"),style:"link"}),e.React.createElement(e.Controls.Button,{style:"link",icon:"reset-scene",onClick:function(E){return i.Bootstrap.Command.Visual.ResetScene.dispatch(h.controller.context,void 0)},title:"Reset scene"})),m)},c}(s.View);p.ViewportControls=x;var l=function(v){B(c,v);function c(){return v!==null&&v.apply(this,arguments)||this}return c.prototype.render=function(){var h=this.controller.latestState,f=h.info;if(!f.length)return e.React.createElement("div",{className:"lm-empty-control"});var m={__html:f.join(", ")};return e.React.createElement("div",{className:"lm-highlight-info"},e.React.createElement("div",{dangerouslySetInnerHTML:m}))},c}(s.View);p.HighlightInfo=l,p.Logo=function(){return e.React.createElement("div",{className:"lm-logo"},e.React.createElement("div",null,e.React.createElement("div",null,e.React.createElement("div",null),e.React.createElement("div",{className:"lm-logo-image"}))))};var _=function(v){B(c,v);function c(){var h=v!==null&&v.apply(this,arguments)||this;return h.host3d=void 0,h.defaultBg={r:0,g:0,b:0},h.state={noWebGl:!1,showLogo:!0},h}return c.prototype.componentDidMount=function(){(!this.host3d||!this.controller.init(this.host3d))&&this.setState({noWebGl:!0}),this.handleLogo()},c.prototype.componentWillUnmount=function(){v.prototype.componentWillUnmount.call(this),this.controller.destroy()},c.prototype.renderMissing=function(){return e.React.createElement("div",{className:"lm-no-webgl"},e.React.createElement("div",null,e.React.createElement("p",null,e.React.createElement("b",null,"WebGL does not seem to be available.")),e.React.createElement("p",null,"This can be caused by an outdated browser, graphics card driver issue, or bad weather. Sometimes, just restarting the browser helps."),e.React.createElement("p",null,"For a list of supported browsers, refer to ",e.React.createElement("a",{href:"http://caniuse.com/#feat=webgl",target:"_blank"},"http://caniuse.com/#feat=webgl"),".")))},c.prototype.handleLogo=function(){var h=this;this.subscribe(i.Bootstrap.Event.Tree.NodeAdded.getStream(this.controller.context),function(f){i.Bootstrap.Entity.isClass(f.data,i.Bootstrap.Entity.VisualClass)&&setTimeout(function(){return h.setState({showLogo:h.getShowLogo()})},0)}),this.subscribe(i.Bootstrap.Event.Tree.NodeRemoved.getStream(this.controller.context),function(f){i.Bootstrap.Entity.isClass(f.data,i.Bootstrap.Entity.VisualClass)&&setTimeout(function(){return h.setState({showLogo:h.getShowLogo()})},0)})},c.prototype.getShowLogo=function(){try{return this.controller.context.viewport.scene.models.isEmpty()}catch{return!0}},c.prototype.render=function(){var h=this;if(this.state.noWebGl)return this.renderMissing();var f=this.controller.latestState.clearColor||this.defaultBg;return e.React.createElement("div",{className:"lm-viewport",style:{backgroundColor:"rgb("+255*f.r+", "+255*f.g+", "+255*f.b+")"}},e.React.createElement("div",{ref:function(m){return h.host3d=m},className:"lm-viewport-host3d"}),this.state.showLogo?e.React.createElement(p.Logo,null):void 0,e.React.createElement(x,{controller:this.controller}))},c}(s.View);p.Viewport=_})(d=s.Visualization||(s.Visualization={}))})(o=e.Views||(e.Views={}))})(r=i.Plugin||(i.Plugin={}))})(U||(U={}));var U;(function(i){var r;(function(e){var o;(function(s){"use strict";function d(c,h,f){return function(m,b){return function(w){return{key:c,controller:h(w),region:m,view:f,isStatic:b}}}}s.create=d;var p=function(c){B(h,c);function h(f,m,b){var w=c.call(this,f,{})||this;return w.appName=m,w.appVersion=b,w}return h}(i.Bootstrap.Components.Component);s.AppInfo=p;var x;(function(c){c.Log=d("Context.Log",function(h){return new i.Bootstrap.Components.Context.Log(h)},e.Views.Context.Log),c.Toast=d("Context.Toast",function(h){return new i.Bootstrap.Components.Context.Toast(h)},e.Views.Context.Toast),c.Overlay=d("Context.Overlay",function(h){return new i.Bootstrap.Components.Context.TaskWatcher(h,"Normal")},e.Views.Context.Overlay),c.BackgroundTasks=d("Context.BackgroundTasks",function(h){return new i.Bootstrap.Components.Context.TaskWatcher(h,"Background")},e.Views.Context.BackgroundTasks)})(x=s.Context||(s.Context={}));var l;(function(c){c.View=d("Transform.View",function(h){return new i.Bootstrap.Components.Transform.View(h)},e.Views.Transform.View)})(l=s.Transform||(s.Transform={}));var _;(function(c){c.Current=function(h,f){return d("EntityInfo",function(m){return new p(m,h,f)},e.Views.Entity.CurrentEntityControl)}})(_=s.Entity||(s.Entity={}));var v;(function(c){c.Viewport=d("Viewport",function(h){return new i.Bootstrap.Components.Visualization.Viewport(h)},e.Views.Visualization.Viewport),c.HighlightInfo=d("HighlightInfo",function(h){return new i.Bootstrap.Components.Visualization.HighlightInfo(h)},e.Views.Visualization.HighlightInfo)})(v=s.Visualization||(s.Visualization={}))})(o=e.Components||(e.Components={}))})(r=i.Plugin||(i.Plugin={}))})(U||(U={}));var U;(function(i){var r;(function(e){"use strict";e.Context=i.Bootstrap.Context;var o=i.Bootstrap.Components.LayoutRegion,s=function(){function d(p,x){this.spec=p,this.target=x,this.transformersInfo=i.Core.Utils.FastMap.create(),this.context=new i.Bootstrap.Context(this),this.init(),e.ReactDOM.render(e.React.createElement(this.spec.layoutView,{controller:this.context.layout}),x),i.Bootstrap.Command.Entity.SetCurrent.dispatch(this.context,this.context.tree.root)}return d.prototype.compose=function(){for(var p=0,x=Object.keys(this.spec.settings);p<x.length;p++){var l=x[p];Object.prototype.hasOwnProperty.call(this.spec.settings,l)&&this.context.settings.set(l,this.spec.settings[l])}for(var _=0,v=this.spec.behaviours||[];_<v.length;_++){var c=v[_];c(this.context)}for(var h=0,f=this.spec.transforms;h<f.length;h++){var m=f[h];this.context.transforms.add(m.transformer),this.transformersInfo.set(m.transformer.info.id,m)}},d.prototype.prepareTargets=function(){for(var p=i.Bootstrap.Components.makeEmptyTargets(),x=i.Core.Utils.FastMap.create(),l=0,_=this.spec.components;l<_.length;l++){var v=_[l],c=v(this.context);if(x.has(c.key))throw"Component with key '"+c.key+"' was already added. Fix your spec.";p[c.region].components.push(c),x.set(c.key,c)}return this.spec.tree&&p[this.spec.tree.region].components.push({key:"lm-internal-tree",controller:new i.Bootstrap.Components.Component(this.context,{}),region:this.spec.tree.region,view:this.spec.tree.view,isStatic:!0}),p[o.Main].components.push({key:"lm-internal-viewport",controller:this.context.viewport,region:o.Main,view:this.spec.viewport.view,isStatic:!0}),p},d.prototype.getTransformerInfo=function(p){return this.transformersInfo.get(p.info.id)},d.prototype.destroy=function(){this.context.dispatcher.finished(),e.ReactDOM.unmountComponentAtNode(this.target),this.context=void 0,this.spec=void 0,this.target=void 0},d.prototype.setComponents=function(p){this.spec.components=p;var x=this.prepareTargets();this.context.layout.updateTargets(x)},d.prototype.init=function(){this.compose();var p=this.prepareTargets();this.context.createLayout(p,this.target)},d}();e.Instance=s})(r=i.Plugin||(i.Plugin={}))})(U||(U={}));var U;(function(i){var r;(function(e){"use strict";var o=i.Bootstrap.Entity.Transformer,s;(function(x){x.DownloadMolecule=o.Molecule.downloadMoleculeSource({sourceId:"url-molecule",name:"URL",description:"Download a molecule from the specified URL (if the host server supports cross domain requests).",defaultId:"https://cs.litemol.org/1tqn/cartoon",urlTemplate:function(l){return l},isFullUrl:!0})})(s=e.DataSources||(e.DataSources={}));var d=i.Bootstrap.Components.LayoutRegion;function p(){return{settings:{"molecule.model.defaultQuery":"residues({ name: 'ALA' })","molecule.model.defaultAssemblyName":"1","molecule.coordinateStreaming.defaultId":"1jj2","molecule.coordinateStreaming.defaultServer":"https://cs.litemol.org","molecule.coordinateStreaming.defaultRadius":10,"density.defaultVisualBehaviourRadius":5},transforms:[{transformer:o.Molecule.CoordinateStreaming.InitStreaming,view:e.Views.Transform.Molecule.InitCoordinateStreaming,initiallyCollapsed:!0},{transformer:s.DownloadMolecule,view:e.Views.Transform.Data.WithUrlIdField,initiallyCollapsed:!0},{transformer:o.Molecule.OpenMoleculeFromFile,view:e.Views.Transform.Molecule.OpenFile,initiallyCollapsed:!0},{transformer:o.Data.Download,view:e.Views.Transform.Data.Download,initiallyCollapsed:!0},{transformer:o.Data.OpenFile,view:e.Views.Transform.Data.OpenFile,initiallyCollapsed:!0},{transformer:o.Molecule.CreateFromData,view:e.Views.Transform.Molecule.CreateFromData},{transformer:o.Data.ParseCif,view:e.Views.Transform.Empty},{transformer:o.Density.ParseData,view:e.Views.Transform.Density.ParseData},{transformer:o.Molecule.CreateFromMmCif,view:e.Views.Transform.Molecule.CreateFromMmCif},{transformer:o.Molecule.CreateModel,view:e.Views.Transform.Molecule.CreateModel,initiallyCollapsed:!0},{transformer:o.Molecule.CreateSelection,view:e.Views.Transform.Molecule.CreateSelection,initiallyCollapsed:!0},{transformer:o.Molecule.CreateAssembly,view:e.Views.Transform.Molecule.CreateAssembly,initiallyCollapsed:!0},{transformer:o.Molecule.CreateSymmetryMates,view:e.Views.Transform.Molecule.CreateSymmetryMates,initiallyCollapsed:!0},{transformer:o.Molecule.CreateMacromoleculeVisual,view:e.Views.Transform.Empty},{transformer:o.Molecule.CreateVisual,view:e.Views.Transform.Molecule.CreateVisual},{transformer:o.Density.CreateVisual,view:e.Views.Transform.Density.CreateVisual},{transformer:o.Density.CreateVisualBehaviour,view:e.Views.Transform.Density.CreateVisualBehaviour},{transformer:o.Molecule.CoordinateStreaming.CreateBehaviour,view:e.Views.Transform.Empty,initiallyCollapsed:!0}],behaviours:[i.Bootstrap.Behaviour.SetEntityToCurrentWhenAdded,i.Bootstrap.Behaviour.FocusCameraOnSelect,i.Bootstrap.Behaviour.ApplySelectionToVisual,i.Bootstrap.Behaviour.ApplyInteractivitySelection,i.Bootstrap.Behaviour.UnselectElementOnRepeatedClick,i.Bootstrap.Behaviour.Molecule.HighlightElementInfo,i.Bootstrap.Behaviour.Molecule.DistanceToLastClickedElement,i.Bootstrap.Behaviour.Molecule.ShowInteractionOnSelect(5)],components:[e.Components.Visualization.HighlightInfo(d.Main,!0),e.Components.Entity.Current("LiteMol",e.VERSION.number)(d.Right,!0),e.Components.Transform.View(d.Right),e.Components.Context.Log(d.Bottom,!0),e.Components.Context.Overlay(d.Root),e.Components.Context.Toast(d.Main,!0),e.Components.Context.BackgroundTasks(d.Main,!0)],viewport:{view:e.Views.Visualization.Viewport,controlsView:e.Views.Visualization.ViewportControls},layoutView:e.Views.Layout,tree:{region:d.Left,view:e.Views.Entity.Tree}}}e.getDefaultSpecification=p})(r=i.Plugin||(i.Plugin={}))})(U||(U={}));var U;return function(i){var r;(function(e){"use strict";var o=i.Bootstrap.Entity,s=o.Transformer,d=function(){function x(l){l.getTransformerInfo?this.ofInstace(l):this.ofOptions(l)}return Object.defineProperty(x.prototype,"instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"context",{get:function(){return this._instance.context},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"root",{get:function(){return this._instance.context.tree.root},enumerable:!0,configurable:!0}),x.prototype.command=function(l,_){l.dispatch(this.context,_)},x.prototype.selectEntities=function(l){return this.context.select(l)},x.prototype.subscribe=function(l,_){return l.getStream(this.context).subscribe(_)},x.prototype.createTransform=function(){return i.Bootstrap.Tree.Transform.build()},x.prototype.applyTransform=function(l){var _=this.context;return i.Bootstrap.Tree.Transform.apply(_,l).run()},x.prototype.clear=function(){this.command(i.Bootstrap.Command.Tree.RemoveNode,this.root)},x.prototype.setViewportBackground=function(l){i.Visualization.Color.isColor(l)?this.command(i.Bootstrap.Command.Layout.SetViewportOptions,{clearColor:l}):this.command(i.Bootstrap.Command.Layout.SetViewportOptions,{clearColor:i.Visualization.Color.fromHexString(l)})},x.prototype.setLayoutState=function(l){this.command(i.Bootstrap.Command.Layout.SetState,l)},x.prototype.loadMolecule=function(l){var _=this.createTransform();if(!l.url&&!l.data)throw new Error("Please specify either url or data");var v=i.Core.Formats.Molecule.SupportedFormats.mmCIF;if(l.format)if(i.Core.Formats.FormatInfo.is(l.format))v=l.format;else{var c=i.Core.Formats.FormatInfo.fromShortcut(i.Core.Formats.Molecule.SupportedFormats.All,l.format);if(!c)throw new Error("'"+l.format+"' is not a supported format.");v=c}var h=l.data?_.add(this.root,o.Transformer.Data.FromData,{data:l.data,id:l.id}):_.add(this.root,s.Data.Download,{url:l.url,type:v.isBinary?"Binary":"String",id:l.id,title:"Molecule"}),f=h.then(s.Molecule.CreateFromData,{format:v,customId:l.id},{isBinding:!0,ref:l.moleculeRef}).then(s.Molecule.CreateModel,{modelIndex:0},{isBinding:!1,ref:l.modelRef});return l.doNotCreateVisual||f.then(s.Molecule.CreateMacromoleculeVisual,{polymer:!0,het:!0,water:!0}),this.applyTransform(h)},x.prototype.destroy=function(){this._instance&&(this._instance.destroy(),this._instance=void 0)},x.prototype.ofOptions=function(l){var _=l.customSpecification?l.customSpecification:e.getDefaultSpecification();l.allowAnalytics&&!l.customSpecification&&_.behaviours.push(i.Bootstrap.Behaviour.GoogleAnalytics(l.analyticsId?l.analyticsId:"UA-77062725-1"));var v;if(l.target instanceof HTMLElement?v=l.target:v=document.querySelector(l.target),!v)throw new Error("options.target cannot be undefined.");this._instance=new e.Instance(_,v),l.viewportBackground&&this.setViewportBackground(l.viewportBackground),l.layoutState&&this.setLayoutState(l.layoutState)},x.prototype.ofInstace=function(l){this._instance=l},x}();e.Controller=d;function p(x){return new d(x)}e.create=p})(r=i.Plugin||(i.Plugin={}))}(U||(U={})),U};typeof xs=="object"&&typeof xs.exports=="object"?xs.exports=V0():typeof define=="function"&&define.amd?define(["require"],function(t){return V0()}):(yx=window||Ju,yx.LiteMol=V0());var yx});var bx=ys(H0=>{H0.__esModule=!0;H0.default=xx()});var n4=ys((r4,A1)=>{(function(t){if(typeof r4=="object"&&typeof A1<"u")A1.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var n;typeof window<"u"?n=window:typeof global<"u"?n=global:typeof self<"u"?n=self:n=this,n.cola=t()}})(function(){var t,n,a;return function(){function u(g,y,T){function k(G,X){if(!y[G]){if(!g[G]){var P=typeof tl=="function"&&tl;if(!X&&P)return P(G,!0);if(V)return V(G,!0);var O=new Error("Cannot find module '"+G+"'");throw O.code="MODULE_NOT_FOUND",O}var H=y[G]={exports:{}};g[G][0].call(H.exports,function(q){var B=g[G][1][q];return k(B||q)},H,H.exports,u,g,y,T)}return y[G].exports}for(var V=typeof tl=="function"&&tl,F=0;F<T.length;F++)k(T[F]);return k}return u}()({1:[function(u,g,y){"use strict";function T(k){for(var V in k)y.hasOwnProperty(V)||(y[V]=k[V])}Object.defineProperty(y,"__esModule",{value:!0}),T(u("./src/adaptor")),T(u("./src/d3adaptor")),T(u("./src/descent")),T(u("./src/geom")),T(u("./src/gridrouter")),T(u("./src/handledisconnected")),T(u("./src/layout")),T(u("./src/layout3d")),T(u("./src/linklengths")),T(u("./src/powergraph")),T(u("./src/pqueue")),T(u("./src/rbtree")),T(u("./src/rectangle")),T(u("./src/shortestpaths")),T(u("./src/vpsc")),T(u("./src/batch"))},{"./src/adaptor":2,"./src/batch":3,"./src/d3adaptor":4,"./src/descent":7,"./src/geom":8,"./src/gridrouter":9,"./src/handledisconnected":10,"./src/layout":11,"./src/layout3d":12,"./src/linklengths":13,"./src/powergraph":14,"./src/pqueue":15,"./src/rbtree":16,"./src/rectangle":17,"./src/shortestpaths":18,"./src/vpsc":19}],2:[function(u,g,y){"use strict";var T=this&&this.__extends||function(){var G=function(X,P){return G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,H){O.__proto__=H}||function(O,H){for(var q in H)H.hasOwnProperty(q)&&(O[q]=H[q])},G(X,P)};return function(X,P){G(X,P);function O(){this.constructor=X}X.prototype=P===null?Object.create(P):(O.prototype=P.prototype,new O)}}();Object.defineProperty(y,"__esModule",{value:!0});var k=u("./layout"),V=function(G){T(X,G);function X(P){var O=G.call(this)||this,H=O,q=P;return q.trigger&&(O.trigger=q.trigger),q.kick&&(O.kick=q.kick),q.drag&&(O.drag=q.drag),q.on&&(O.on=q.on),O.dragstart=O.dragStart=k.Layout.dragStart,O.dragend=O.dragEnd=k.Layout.dragEnd,O}return X.prototype.trigger=function(P){},X.prototype.kick=function(){},X.prototype.drag=function(){},X.prototype.on=function(P,O){return this},X}(k.Layout);y.LayoutAdaptor=V;function F(G){return new V(G)}y.adaptor=F},{"./layout":11}],3:[function(u,g,y){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var T=u("./layout"),k=u("./gridrouter");function V(X,P,O,H){X.cola.start(0,0,0,10,!1);var q=F(X.cola.nodes(),X.cola.groups(),O,H);return q.routeEdges(X.powerGraph.powerEdges,P,function(B){return B.source.routerNode.id},function(B){return B.target.routerNode.id})}y.gridify=V;function F(X,P,O,H){X.forEach(function(B){B.routerNode={name:B.name,bounds:B.bounds.inflate(-O)}}),P.forEach(function(B){B.routerNode={bounds:B.bounds.inflate(-H),children:(typeof B.groups<"u"?B.groups.map(function(j){return X.length+j.id}):[]).concat(typeof B.leaves<"u"?B.leaves.map(function(j){return j.index}):[])}});var q=X.concat(P).map(function(B,j){return B.routerNode.id=j,B.routerNode});return new k.GridRouter(q,{getChildren:function(B){return B.children},getBounds:function(B){return B.bounds}},O-H)}function G(X,P,O){var H;X.nodes.forEach(function(U,i){return U.index=i}),new T.Layout().avoidOverlaps(!1).nodes(X.nodes).links(X.links).powerGraphGroups(function(U){H=U,H.groups.forEach(function(i){return i.padding=O})});var q=X.nodes.length,B=[],j=X.nodes.slice(0);return j.forEach(function(U,i){return U.index=i}),H.groups.forEach(function(U){var i=U.index=U.id+q;j.push(U),typeof U.leaves<"u"&&U.leaves.forEach(function(r){return B.push({source:i,target:r.index})}),typeof U.groups<"u"&&U.groups.forEach(function(r){return B.push({source:i,target:r.id+q})})}),H.powerEdges.forEach(function(U){B.push({source:U.source.index,target:U.target.index})}),new T.Layout().size(P).nodes(j).links(B).avoidOverlaps(!1).linkDistance(30).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(100,0,0,0,!1),{cola:new T.Layout().convergenceThreshold(.001).size(P).avoidOverlaps(!0).nodes(X.nodes).links(X.links).groupCompactness(1e-4).linkDistance(30).symmetricDiffLinkLengths(5).powerGraphGroups(function(U){H=U,H.groups.forEach(function(i){i.padding=O})}).start(50,0,100,0,!1),powerGraph:H}}y.powerGraphGridLayout=G},{"./gridrouter":9,"./layout":11}],4:[function(u,g,y){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var T=u("./d3v3adaptor"),k=u("./d3v4adaptor");function V(G){return!G||F(G)?new T.D3StyleLayoutAdaptor:new k.D3StyleLayoutAdaptor(G)}y.d3adaptor=V;function F(G){var X=/^3\./;return G.version&&G.version.match(X)!==null}},{"./d3v3adaptor":5,"./d3v4adaptor":6}],5:[function(u,g,y){"use strict";var T=this&&this.__extends||function(){var G=function(X,P){return G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,H){O.__proto__=H}||function(O,H){for(var q in H)H.hasOwnProperty(q)&&(O[q]=H[q])},G(X,P)};return function(X,P){G(X,P);function O(){this.constructor=X}X.prototype=P===null?Object.create(P):(O.prototype=P.prototype,new O)}}();Object.defineProperty(y,"__esModule",{value:!0});var k=u("./layout"),V=function(G){T(X,G);function X(){var P=G.call(this)||this;P.event=d3.dispatch(k.EventType[k.EventType.start],k.EventType[k.EventType.tick],k.EventType[k.EventType.end]);var O=P,H;return P.drag=function(){if(!q)var q=d3.behavior.drag().origin(k.Layout.dragOrigin).on("dragstart.d3adaptor",k.Layout.dragStart).on("drag.d3adaptor",function(B){k.Layout.drag(B,d3.event),O.resume()}).on("dragend.d3adaptor",k.Layout.dragEnd);if(!arguments.length)return q;this.call(q)},P}return X.prototype.trigger=function(P){var O={type:k.EventType[P.type],alpha:P.alpha,stress:P.stress};this.event[O.type](O)},X.prototype.kick=function(){var P=this;d3.timer(function(){return G.prototype.tick.call(P)})},X.prototype.on=function(P,O){return typeof P=="string"?this.event.on(P,O):this.event.on(k.EventType[P],O),this},X}(k.Layout);y.D3StyleLayoutAdaptor=V;function F(){return new V}y.d3adaptor=F},{"./layout":11}],6:[function(u,g,y){"use strict";var T=this&&this.__extends||function(){var F=function(G,X){return F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,O){P.__proto__=O}||function(P,O){for(var H in O)O.hasOwnProperty(H)&&(P[H]=O[H])},F(G,X)};return function(G,X){F(G,X);function P(){this.constructor=G}G.prototype=X===null?Object.create(X):(P.prototype=X.prototype,new P)}}();Object.defineProperty(y,"__esModule",{value:!0});var k=u("./layout"),V=function(F){T(G,F);function G(X){var P=F.call(this)||this;P.d3Context=X,P.event=X.dispatch(k.EventType[k.EventType.start],k.EventType[k.EventType.tick],k.EventType[k.EventType.end]);var O=P,H;return P.drag=function(){if(!q)var q=X.drag().subject(k.Layout.dragOrigin).on("start.d3adaptor",k.Layout.dragStart).on("drag.d3adaptor",function(B){k.Layout.drag(B,X.event),O.resume()}).on("end.d3adaptor",k.Layout.dragEnd);if(!arguments.length)return q;arguments[0].call(q)},P}return G.prototype.trigger=function(X){var P={type:k.EventType[X.type],alpha:X.alpha,stress:X.stress};this.event.call(P.type,P)},G.prototype.kick=function(){var X=this,P=this.d3Context.timer(function(){return F.prototype.tick.call(X)&&P.stop()})},G.prototype.on=function(X,P){return typeof X=="string"?this.event.on(X,P):this.event.on(k.EventType[X],P),this},G}(k.Layout);y.D3StyleLayoutAdaptor=V},{"./layout":11}],7:[function(u,g,y){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var T=function(){function F(){this.locks={}}return F.prototype.add=function(G,X){this.locks[G]=X},F.prototype.clear=function(){this.locks={}},F.prototype.isEmpty=function(){for(var G in this.locks)return!1;return!0},F.prototype.apply=function(G){for(var X in this.locks)G(Number(X),this.locks[X])},F}();y.Locks=T;var k=function(){function F(G,X,P){P===void 0&&(P=null),this.D=X,this.G=P,this.threshold=1e-4,this.numGridSnapNodes=0,this.snapGridSize=100,this.snapStrength=1e3,this.scaleSnapByMaxH=!1,this.random=new V,this.project=null,this.x=G,this.k=G.length;var O=this.n=G[0].length;this.H=new Array(this.k),this.g=new Array(this.k),this.Hd=new Array(this.k),this.a=new Array(this.k),this.b=new Array(this.k),this.c=new Array(this.k),this.d=new Array(this.k),this.e=new Array(this.k),this.ia=new Array(this.k),this.ib=new Array(this.k),this.xtmp=new Array(this.k),this.locks=new T,this.minD=Number.MAX_VALUE;for(var H=O,q;H--;)for(q=O;--q>H;){var B=X[H][q];B>0&&B<this.minD&&(this.minD=B)}for(this.minD===Number.MAX_VALUE&&(this.minD=1),H=this.k;H--;){for(this.g[H]=new Array(O),this.H[H]=new Array(O),q=O;q--;)this.H[H][q]=new Array(O);this.Hd[H]=new Array(O),this.a[H]=new Array(O),this.b[H]=new Array(O),this.c[H]=new Array(O),this.d[H]=new Array(O),this.e[H]=new Array(O),this.ia[H]=new Array(O),this.ib[H]=new Array(O),this.xtmp[H]=new Array(O)}}return F.createSquareMatrix=function(G,X){for(var P=new Array(G),O=0;O<G;++O){P[O]=new Array(G);for(var H=0;H<G;++H)P[O][H]=X(O,H)}return P},F.prototype.offsetDir=function(){for(var G=this,X=new Array(this.k),P=0,O=0;O<this.k;++O){var H=X[O]=this.random.getNextBetween(.01,1)-.5;P+=H*H}return P=Math.sqrt(P),X.map(function(q){return q*=G.minD/P})},F.prototype.computeDerivatives=function(G){var X=this,P=this.n;if(!(P<1)){for(var O,H=new Array(this.k),q=new Array(this.k),B=new Array(this.k),j=0,U=0;U<P;++U){for(O=0;O<this.k;++O)B[O]=this.g[O][U]=0;for(var i=0;i<P;++i)if(U!==i){for(var r=P,e=0;r--;){for(e=0,O=0;O<this.k;++O){var o=H[O]=G[O][U]-G[O][i];e+=q[O]=o*o}if(e>1e-9)break;var s=this.offsetDir();for(O=0;O<this.k;++O)G[O][i]+=s[O]}var d=Math.sqrt(e),p=this.D[U][i],x=this.G!=null?this.G[U][i]:1;if(x>1&&d>p||!isFinite(p)){for(O=0;O<this.k;++O)this.H[O][U][i]=0;continue}x>1&&(x=1);var l=p*p,_=2*x*(d-p)/(l*d),v=e*d,c=2*-x/(l*v);for(isFinite(_)||console.log(_),O=0;O<this.k;++O)this.g[O][U]+=H[O]*_,B[O]-=this.H[O][U][i]=c*(2*v+p*(q[O]-e))}for(O=0;O<this.k;++O)j=Math.max(j,this.H[O][U][U]=B[O])}for(var h=this.snapGridSize/2,f=this.snapGridSize,m=this.snapStrength,b=m/(h*h),w=this.numGridSnapNodes,C=0;C<w;++C)for(O=0;O<this.k;++O){var E=this.x[O][C],S=E/f,M=S%1,A=S-M,R=Math.abs(M),D=R<=.5?E-A*f:E>0?E-(A+1)*f:E-(A-1)*f;-h<D&&D<=h&&(this.scaleSnapByMaxH?(this.g[O][C]+=j*b*D,this.H[O][C][C]+=j*b):(this.g[O][C]+=b*D,this.H[O][C][C]+=b))}this.locks.isEmpty()||this.locks.apply(function(N,I){for(O=0;O<X.k;++O)X.H[O][N][N]+=j,X.g[O][N]-=j*(I[O]-G[O][N])})}},F.dotProd=function(G,X){for(var P=0,O=G.length;O--;)P+=G[O]*X[O];return P},F.rightMultiply=function(G,X,P){for(var O=G.length;O--;)P[O]=F.dotProd(G[O],X)},F.prototype.computeStepSize=function(G){for(var X=0,P=0,O=0;O<this.k;++O)X+=F.dotProd(this.g[O],G[O]),F.rightMultiply(this.H[O],G[O],this.Hd[O]),P+=F.dotProd(G[O],this.Hd[O]);return P===0||!isFinite(P)?0:1*X/P},F.prototype.reduceStress=function(){this.computeDerivatives(this.x);for(var G=this.computeStepSize(this.g),X=0;X<this.k;++X)this.takeDescentStep(this.x[X],this.g[X],G);return this.computeStress()},F.copy=function(G,X){for(var P=G.length,O=X[0].length,H=0;H<P;++H)for(var q=0;q<O;++q)X[H][q]=G[H][q]},F.prototype.stepAndProject=function(G,X,P,O){F.copy(G,X),this.takeDescentStep(X[0],P[0],O),this.project&&this.project[0](G[0],G[1],X[0]),this.takeDescentStep(X[1],P[1],O),this.project&&this.project[1](X[0],G[1],X[1]);for(var H=2;H<this.k;H++)this.takeDescentStep(X[H],P[H],O)},F.mApply=function(G,X,P){for(var O=G;O-- >0;)for(var H=X;H-- >0;)P(O,H)},F.prototype.matrixApply=function(G){F.mApply(this.k,this.n,G)},F.prototype.computeNextPosition=function(G,X){var P=this;this.computeDerivatives(G);var O=this.computeStepSize(this.g);if(this.stepAndProject(G,X,this.g,O),this.project){this.matrixApply(function(q,B){return P.e[q][B]=G[q][B]-X[q][B]});var H=this.computeStepSize(this.e);H=Math.max(.2,Math.min(H,1)),this.stepAndProject(G,X,this.e,H)}},F.prototype.run=function(G){for(var X=Number.MAX_VALUE,P=!1;!P&&G-- >0;){var O=this.rungeKutta();P=Math.abs(X/O-1)<this.threshold,X=O}return X},F.prototype.rungeKutta=function(){var G=this;this.computeNextPosition(this.x,this.a),F.mid(this.x,this.a,this.ia),this.computeNextPosition(this.ia,this.b),F.mid(this.x,this.b,this.ib),this.computeNextPosition(this.ib,this.c),this.computeNextPosition(this.c,this.d);var X=0;return this.matrixApply(function(P,O){var H=(G.a[P][O]+2*G.b[P][O]+2*G.c[P][O]+G.d[P][O])/6,q=G.x[P][O]-H;X+=q*q,G.x[P][O]=H}),X},F.mid=function(G,X,P){F.mApply(G.length,G[0].length,function(O,H){return P[O][H]=G[O][H]+(X[O][H]-G[O][H])/2})},F.prototype.takeDescentStep=function(G,X,P){for(var O=0;O<this.n;++O)G[O]=G[O]-P*X[O]},F.prototype.computeStress=function(){for(var G=0,X=0,P=this.n-1;X<P;++X)for(var O=X+1,H=this.n;O<H;++O){for(var q=0,B=0;B<this.k;++B){var j=this.x[B][X]-this.x[B][O];q+=j*j}q=Math.sqrt(q);var U=this.D[X][O];if(isFinite(U)){var i=U-q,r=U*U;G+=i*i/r}}return G},F.zeroDistance=1e-10,F}();y.Descent=k;var V=function(){function F(G){G===void 0&&(G=1),this.seed=G,this.a=214013,this.c=2531011,this.m=2147483648,this.range=32767}return F.prototype.getNext=function(){return this.seed=(this.seed*this.a+this.c)%this.m,(this.seed>>16)/this.range},F.prototype.getNextBetween=function(G,X){return G+this.getNext()*(X-G)},F}();y.PseudoRandom=V},{}],8:[function(u,g,y){"use strict";var T=this&&this.__extends||function(){var E=function(S,M){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,R){A.__proto__=R}||function(A,R){for(var D in R)R.hasOwnProperty(D)&&(A[D]=R[D])},E(S,M)};return function(S,M){E(S,M);function A(){this.constructor=S}S.prototype=M===null?Object.create(M):(A.prototype=M.prototype,new A)}}();Object.defineProperty(y,"__esModule",{value:!0});var k=u("./rectangle"),V=function(){function E(){}return E}();y.Point=V;var F=function(){function E(S,M,A,R){this.x1=S,this.y1=M,this.x2=A,this.y2=R}return E}();y.LineSegment=F;var G=function(E){T(S,E);function S(){return E!==null&&E.apply(this,arguments)||this}return S}(V);y.PolyPoint=G;function X(E,S,M){return(S.x-E.x)*(M.y-E.y)-(M.x-E.x)*(S.y-E.y)}y.isLeft=X;function P(E,S,M){return X(E,S,M)>0}function O(E,S,M){return X(E,S,M)<0}function H(E){var S=E.slice(0).sort(function(K,Q){return K.x!==Q.x?Q.x-K.x:Q.y-K.y}),M=E.length,A,R=0,D=S[0].x;for(A=1;A<M&&S[A].x===D;++A);var N=A-1,I=[];if(I.push(S[R]),N===M-1)S[N].y!==S[R].y&&I.push(S[N]);else{var L,Y=M-1,J=S[M-1].x;for(A=M-2;A>=0&&S[A].x===J;A--);for(L=A+1,A=N;++A<=L;)if(!(X(S[R],S[L],S[A])>=0&&A<L)){for(;I.length>1&&!(X(I[I.length-2],I[I.length-1],S[A])>0);)I.length-=1;A!=R&&I.push(S[A])}Y!=L&&I.push(S[Y]);var ie=I.length;for(A=L;--A>=N;)if(!(X(S[Y],S[N],S[A])>=0&&A>N)){for(;I.length>ie&&!(X(I[I.length-2],I[I.length-1],S[A])>0);)I.length-=1;A!=R&&I.push(S[A])}}return I}y.ConvexHull=H;function q(E,S,M){S.slice(0).sort(function(A,R){return Math.atan2(A.y-E.y,A.x-E.x)-Math.atan2(R.y-E.y,R.x-E.x)}).forEach(M)}y.clockwiseRadialSweep=q;function B(E,S){return E.polyIndex===S.length-1?S[0]:S[E.polyIndex+1]}function j(E,S){return E.polyIndex===0?S[S.length-1]:S[E.polyIndex-1]}function U(E,S){var M=S.slice(0);return M.push(S[0]),{rtan:i(E,M),ltan:r(E,M)}}function i(E,S){var M=S.length-1,A,R,D,N,I;if(O(E,S[1],S[0])&&!P(E,S[M-1],S[0]))return 0;for(A=0,R=M;;){if(R-A===1)return P(E,S[A],S[R])?A:R;if(D=Math.floor((A+R)/2),I=O(E,S[D+1],S[D]),I&&!P(E,S[D-1],S[D]))return D;N=P(E,S[A+1],S[A]),N?I||P(E,S[A],S[D])?R=D:A=D:I&&O(E,S[A],S[D])?R=D:A=D}}function r(E,S){var M=S.length-1,A,R,D,N,I;if(P(E,S[M-1],S[0])&&!O(E,S[1],S[0]))return 0;for(A=0,R=M;;){if(R-A===1)return O(E,S[A],S[R])?A:R;if(D=Math.floor((A+R)/2),I=O(E,S[D+1],S[D]),P(E,S[D-1],S[D])&&!I)return D;N=O(E,S[A+1],S[A]),N?I?O(E,S[A],S[D])?R=D:A=D:R=D:I?A=D:P(E,S[A],S[D])?R=D:A=D}}function e(E,S,M,A,R,D){var N,I;N=M(S[0],E),I=A(E[N],S);for(var L=!1;!L;){for(L=!0;N===E.length-1&&(N=0),!R(S[I],E[N],E[N+1]);)++N;for(;I===0&&(I=S.length-1),!D(E[N],S[I],S[I-1]);)--I,L=!1}return{t1:N,t2:I}}y.tangent_PolyPolyC=e;function o(E,S){var M=s(S,E);return{t1:M.t2,t2:M.t1}}y.LRtangent_PolyPolyC=o;function s(E,S){return e(E,S,i,r,P,O)}y.RLtangent_PolyPolyC=s;function d(E,S){return e(E,S,r,r,O,O)}y.LLtangent_PolyPolyC=d;function p(E,S){return e(E,S,i,i,P,P)}y.RRtangent_PolyPolyC=p;var x=function(){function E(S,M){this.t1=S,this.t2=M}return E}();y.BiTangent=x;var l=function(){function E(){}return E}();y.BiTangents=l;var _=function(E){T(S,E);function S(){return E!==null&&E.apply(this,arguments)||this}return S}(V);y.TVGPoint=_;var v=function(){function E(S,M,A,R){this.id=S,this.polyid=M,this.polyvertid=A,this.p=R,R.vv=this}return E}();y.VisibilityVertex=v;var c=function(){function E(S,M){this.source=S,this.target=M}return E.prototype.length=function(){var S=this.source.p.x-this.target.p.x,M=this.source.p.y-this.target.p.y;return Math.sqrt(S*S+M*M)},E}();y.VisibilityEdge=c;var h=function(){function E(S,M){if(this.P=S,this.V=[],this.E=[],M)this.V=M.V.slice(0),this.E=M.E.slice(0);else{for(var A=S.length,R=0;R<A;R++){for(var D=S[R],N=0;N<D.length;++N){var I=D[N],L=new v(this.V.length,R,N,I);this.V.push(L),N>0&&this.E.push(new c(D[N-1].vv,L))}D.length>1&&this.E.push(new c(D[0].vv,D[D.length-1].vv))}for(var R=0;R<A-1;R++)for(var Y=S[R],N=R+1;N<A;N++){var J=S[N],ie=m(Y,J);for(var K in ie){var Q=ie[K],ne=Y[Q.t1],ue=J[Q.t2];this.addEdgeIfVisible(ne,ue,R,N)}}}}return E.prototype.addEdgeIfVisible=function(S,M,A,R){this.intersectsPolys(new F(S.x,S.y,M.x,M.y),A,R)||this.E.push(new c(S.vv,M.vv))},E.prototype.addPoint=function(S,M){var A=this.P.length;this.V.push(new v(this.V.length,A,0,S));for(var R=0;R<A;++R)if(R!==M){var D=this.P[R],N=U(S,D);this.addEdgeIfVisible(S,D[N.ltan],M,R),this.addEdgeIfVisible(S,D[N.rtan],M,R)}return S.vv},E.prototype.intersectsPolys=function(S,M,A){for(var R=0,D=this.P.length;R<D;++R)if(R!=M&&R!=A&&f(S,this.P[R]).length>0)return!0;return!1},E}();y.TangentVisibilityGraph=h;function f(E,S){for(var M=[],A=1,R=S.length;A<R;++A){var D=k.Rectangle.lineIntersection(E.x1,E.y1,E.x2,E.y2,S[A-1].x,S[A-1].y,S[A].x,S[A].y);D&&M.push(D)}return M}function m(E,S){for(var M=E.length-1,A=S.length-1,R=new l,D=0;D<=M;++D)for(var N=0;N<=A;++N){var I=E[D==0?M:D-1],L=E[D],Y=E[D==M?0:D+1],J=S[N==0?A:N-1],ie=S[N],K=S[N==A?0:N+1],Q=X(I,L,ie),ne=X(L,J,ie),ue=X(L,ie,K),fe=X(J,ie,L),ge=X(ie,I,L),ye=X(ie,L,Y);Q>=0&&ne>=0&&ue<0&&fe>=0&&ge>=0&&ye<0?R.ll=new x(D,N):Q<=0&&ne<=0&&ue>0&&fe<=0&&ge<=0&&ye>0?R.rr=new x(D,N):Q<=0&&ne>0&&ue<=0&&fe>=0&&ge<0&&ye>=0?R.rl=new x(D,N):Q>=0&&ne<0&&ue>=0&&fe<=0&&ge>0&&ye<=0&&(R.lr=new x(D,N))}return R}y.tangents=m;function b(E,S){for(var M=1,A=S.length;M<A;++M)if(O(S[M-1],S[M],E))return!1;return!0}function w(E,S){return!E.every(function(M){return!b(M,S)})}function C(E,S){if(w(E,S)||w(S,E))return!0;for(var M=1,A=E.length;M<A;++M){var R=E[M],D=E[M-1];if(f(new F(D.x,D.y,R.x,R.y),S).length>0)return!0}return!1}y.polysOverlap=C},{"./rectangle":17}],9:[function(u,g,y){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var T=u("./rectangle"),k=u("./vpsc"),V=u("./shortestpaths"),F=function(){function O(H,q,B){this.id=H,this.rect=q,this.children=B,this.leaf=typeof B>"u"||B.length===0}return O}();y.NodeWrapper=F;var G=function(){function O(H,q,B,j,U){j===void 0&&(j=null),U===void 0&&(U=null),this.id=H,this.x=q,this.y=B,this.node=j,this.line=U}return O}();y.Vert=G;var X=function(){function O(H,q){this.s=H,this.t=q;var B=O.findMatch(H,q),j=q.slice(0).reverse(),U=O.findMatch(H,j);B.length>=U.length?(this.length=B.length,this.si=B.si,this.ti=B.ti,this.reversed=!1):(this.length=U.length,this.si=U.si,this.ti=q.length-U.ti-U.length,this.reversed=!0)}return O.findMatch=function(H,q){for(var B=H.length,j=q.length,U={length:0,si:-1,ti:-1},i=new Array(B),r=0;r<B;r++){i[r]=new Array(j);for(var e=0;e<j;e++)if(H[r]===q[e]){var o=i[r][e]=r===0||e===0?1:i[r-1][e-1]+1;o>U.length&&(U.length=o,U.si=r-o+1,U.ti=e-o+1)}else i[r][e]=0}return U},O.prototype.getSequence=function(){return this.length>=0?this.s.slice(this.si,this.si+this.length):[]},O}();y.LongestCommonSubsequence=X;var P=function(){function O(H,q,B){var j=this;B===void 0&&(B=12),this.originalnodes=H,this.groupPadding=B,this.leaves=null,this.nodes=H.map(function(_,v){return new F(v,q.getBounds(_),q.getChildren(_))}),this.leaves=this.nodes.filter(function(_){return _.leaf}),this.groups=this.nodes.filter(function(_){return!_.leaf}),this.cols=this.getGridLines("x"),this.rows=this.getGridLines("y"),this.groups.forEach(function(_){return _.children.forEach(function(v){return j.nodes[v].parent=_})}),this.root={children:[]},this.nodes.forEach(function(_){typeof _.parent>"u"&&(_.parent=j.root,j.root.children.push(_.id)),_.ports=[]}),this.backToFront=this.nodes.slice(0),this.backToFront.sort(function(_,v){return j.getDepth(_)-j.getDepth(v)});var U=this.backToFront.slice(0).reverse().filter(function(_){return!_.leaf});U.forEach(function(_){var v=T.Rectangle.empty();_.children.forEach(function(c){return v=v.union(j.nodes[c].rect)}),_.rect=v.inflate(j.groupPadding)});var i=this.midPoints(this.cols.map(function(_){return _.pos})),r=this.midPoints(this.rows.map(function(_){return _.pos})),e=i[0],o=i[i.length-1],s=r[0],d=r[r.length-1],p=this.rows.map(function(_){return{x1:e,x2:o,y1:_.pos,y2:_.pos}}).concat(r.map(function(_){return{x1:e,x2:o,y1:_,y2:_}})),x=this.cols.map(function(_){return{x1:_.pos,x2:_.pos,y1:s,y2:d}}).concat(i.map(function(_){return{x1:_,x2:_,y1:s,y2:d}})),l=p.concat(x);l.forEach(function(_){return _.verts=[]}),this.verts=[],this.edges=[],p.forEach(function(_){return x.forEach(function(v){var c=new G(j.verts.length,v.x1,_.y1);_.verts.push(c),v.verts.push(c),j.verts.push(c);for(var h=j.backToFront.length;h-- >0;){var f=j.backToFront[h],m=f.rect,b=Math.abs(c.x-m.cx()),w=Math.abs(c.y-m.cy());if(b<m.width()/2&&w<m.height()/2){c.node=f;break}}})}),l.forEach(function(_,v){j.nodes.forEach(function(w,C){w.rect.lineIntersections(_.x1,_.y1,_.x2,_.y2).forEach(function(E,S){var M=new G(j.verts.length,E.x,E.y,w,_);j.verts.push(M),_.verts.push(M),w.ports.push(M)})});var c=Math.abs(_.y1-_.y2)<.1,h=function(w,C){return c?C.x-w.x:C.y-w.y};_.verts.sort(h);for(var f=1;f<_.verts.length;f++){var m=_.verts[f-1],b=_.verts[f];m.node&&m.node===b.node&&m.node.leaf||j.edges.push({source:m.id,target:b.id,length:Math.abs(h(m,b))})}})}return O.prototype.avg=function(H){return H.reduce(function(q,B){return q+B})/H.length},O.prototype.getGridLines=function(H){for(var q=[],B=this.leaves.slice(0,this.leaves.length);B.length>0;){var j=B.filter(function(i){return i.rect["overlap"+H.toUpperCase()](B[0].rect)}),U={nodes:j,pos:this.avg(j.map(function(i){return i.rect["c"+H]()}))};q.push(U),U.nodes.forEach(function(i){return B.splice(B.indexOf(i),1)})}return q.sort(function(i,r){return i.pos-r.pos}),q},O.prototype.getDepth=function(H){for(var q=0;H.parent!==this.root;)q++,H=H.parent;return q},O.prototype.midPoints=function(H){for(var q=H[1]-H[0],B=[H[0]-q/2],j=1;j<H.length;j++)B.push((H[j]+H[j-1])/2);return B.push(H[H.length-1]+q/2),B},O.prototype.findLineage=function(H){var q=[H];do H=H.parent,q.push(H);while(H!==this.root);return q.reverse()},O.prototype.findAncestorPathBetween=function(H,q){for(var B=this.findLineage(H),j=this.findLineage(q),U=0;B[U]===j[U];)U++;return{commonAncestor:B[U-1],lineages:B.slice(U).concat(j.slice(U))}},O.prototype.siblingObstacles=function(H,q){var B=this,j=this.findAncestorPathBetween(H,q),U={};j.lineages.forEach(function(r){return U[r.id]={}});var i=j.commonAncestor.children.filter(function(r){return!(r in U)});return j.lineages.filter(function(r){return r.parent!==j.commonAncestor}).forEach(function(r){return i=i.concat(r.parent.children.filter(function(e){return e!==r.id}))}),i.map(function(r){return B.nodes[r]})},O.getSegmentSets=function(H,q,B){for(var j=[],U=0;U<H.length;U++)for(var i=H[U],r=0;r<i.length;r++){var e=i[r];e.edgeid=U,e.i=r;var o=e[1][q]-e[0][q];Math.abs(o)<.1&&j.push(e)}j.sort(function(x,l){return x[0][q]-l[0][q]});for(var s=[],d=null,p=0;p<j.length;p++){var e=j[p];(!d||Math.abs(e[0][q]-d.pos)>.1)&&(d={pos:e[0][q],segments:[]},s.push(d)),d.segments.push(e)}return s},O.nudgeSegs=function(H,q,B,j,U,i){var r=j.length;if(!(r<=1)){for(var e=j.map(function(f){return new k.Variable(f[0][H])}),o=[],s=0;s<r;s++)for(var d=0;d<r;d++)if(s!==d){var p=j[s],x=j[d],l=p.edgeid,_=x.edgeid,v=-1,c=-1;H=="x"?U(l,_)&&(p[0][q]<p[1][q]?(v=d,c=s):(v=s,c=d)):U(l,_)&&(p[0][q]<p[1][q]?(v=s,c=d):(v=d,c=s)),v>=0&&o.push(new k.Constraint(e[v],e[c],i))}var h=new k.Solver(e,o);h.solve(),e.forEach(function(f,m){var b=j[m],w=f.position();b[0][H]=b[1][H]=w;var C=B[b.edgeid];b.i>0&&(C[b.i-1][1][H]=w),b.i<C.length-1&&(C[b.i+1][0][H]=w)})}},O.nudgeSegments=function(H,q,B,j,U){for(var i=O.getSegmentSets(H,q,B),r=0;r<i.length;r++){for(var e=i[r],o=[],s=0;s<e.segments.length;s++){var d=e.segments[s];o.push({type:0,s:d,pos:Math.min(d[0][B],d[1][B])}),o.push({type:1,s:d,pos:Math.max(d[0][B],d[1][B])})}o.sort(function(l,_){return l.pos-_.pos+l.type-_.type});var p=[],x=0;o.forEach(function(l){l.type===0?(p.push(l.s),x++):x--,x==0&&(O.nudgeSegs(q,B,H,p,j,U),p=[])})}},O.prototype.routeEdges=function(H,q,B,j){var U=this,i=H.map(function(o){return U.route(B(o),j(o))}),r=O.orderEdges(i),e=i.map(function(o){return O.makeSegments(o)});return O.nudgeSegments(e,"x","y",r,q),O.nudgeSegments(e,"y","x",r,q),O.unreverseEdges(e,i),e},O.unreverseEdges=function(H,q){H.forEach(function(B,j){var U=q[j];U.reversed&&(B.reverse(),B.forEach(function(i){i.reverse()}))})},O.angleBetween2Lines=function(H,q){var B=Math.atan2(H[0].y-H[1].y,H[0].x-H[1].x),j=Math.atan2(q[0].y-q[1].y,q[0].x-q[1].x),U=B-j;return(U>Math.PI||U<-Math.PI)&&(U=j-B),U},O.isLeft=function(H,q,B){return(q.x-H.x)*(B.y-H.y)-(q.y-H.y)*(B.x-H.x)<=0},O.getOrder=function(H){for(var q={},B=0;B<H.length;B++){var j=H[B];typeof q[j.l]>"u"&&(q[j.l]={}),q[j.l][j.r]=!0}return function(U,i){return typeof q[U]<"u"&&q[U][i]}},O.orderEdges=function(H){for(var q=[],B=0;B<H.length-1;B++)for(var j=B+1;j<H.length;j++){var U=H[B],i=H[j],r=new X(U,i),e,o,s;if(r.length!==0){if(r.reversed&&(i.reverse(),i.reversed=!0,r=new X(U,i)),(r.si<=0||r.ti<=0)&&(r.si+r.length>=U.length||r.ti+r.length>=i.length)){q.push({l:B,r:j});continue}r.si+r.length>=U.length||r.ti+r.length>=i.length?(e=U[r.si+1],s=U[r.si-1],o=i[r.ti-1]):(e=U[r.si+r.length-2],o=U[r.si+r.length],s=i[r.ti+r.length]),O.isLeft(e,o,s)?q.push({l:j,r:B}):q.push({l:B,r:j})}}return O.getOrder(q)},O.makeSegments=function(H){function q(o){return{x:o.x,y:o.y}}for(var B=function(o,s,d){return Math.abs((s.x-o.x)*(d.y-o.y)-(s.y-o.y)*(d.x-o.x))<.001},j=[],U=q(H[0]),i=1;i<H.length;i++){var r=q(H[i]),e=i<H.length-1?H[i+1]:null;(!e||!B(U,r,e))&&(j.push([U,r]),U=r)}return j},O.prototype.route=function(H,q){var B=this,j=this.nodes[H],U=this.nodes[q];this.obstacles=this.siblingObstacles(j,U);var i={};this.obstacles.forEach(function(c){return i[c.id]=c}),this.passableEdges=this.edges.filter(function(c){var h=B.verts[c.source],f=B.verts[c.target];return!(h.node&&h.node.id in i||f.node&&f.node.id in i)});for(var r=1;r<j.ports.length;r++){var e=j.ports[0].id,o=j.ports[r].id;this.passableEdges.push({source:e,target:o,length:0})}for(var r=1;r<U.ports.length;r++){var e=U.ports[0].id,o=U.ports[r].id;this.passableEdges.push({source:e,target:o,length:0})}var s=function(c){return c.source},d=function(c){return c.target},p=function(c){return c.length},x=new V.Calculator(this.verts.length,this.passableEdges,s,d,p),l=function(c,h,f){var m=B.verts[c],b=B.verts[h],w=B.verts[f],C=Math.abs(w.x-m.x),E=Math.abs(w.y-m.y);return m.node===j&&m.node===b.node||b.node===U&&b.node===w.node?0:C>1&&E>1?1e3:0},_=x.PathFromNodeToNodeWithPrevCost(j.ports[0].id,U.ports[0].id,l),v=_.reverse().map(function(c){return B.verts[c]});return v.push(this.nodes[U.id].ports[0]),v.filter(function(c,h){return!(h<v.length-1&&v[h+1].node===j&&c.node===j||h>0&&c.node===U&&v[h-1].node===U)})},O.getRoutePath=function(H,q,B,j){var U={routepath:"M "+H[0][0].x+" "+H[0][0].y+" ",arrowpath:""};if(H.length>1)for(var i=0;i<H.length;i++){var r=H[i],e=r[1].x,o=r[1].y,s=e-r[0].x,d=o-r[0].y;if(i<H.length-1){Math.abs(s)>0?e-=s/Math.abs(s)*q:o-=d/Math.abs(d)*q,U.routepath+="L "+e+" "+o+" ";var p=H[i+1],x=p[0].x,l=p[0].y,_=p[1].x,v=p[1].y;s=_-x,d=v-l;var c=O.angleBetween2Lines(r,p)<0?1:0,h,f;Math.abs(s)>0?(h=x+s/Math.abs(s)*q,f=l):(h=x,f=l+d/Math.abs(d)*q);var m=Math.abs(h-e),b=Math.abs(f-o);U.routepath+="A "+m+" "+b+" 0 0 "+c+" "+h+" "+f+" "}else{var w=[e,o],C,E;Math.abs(s)>0?(e-=s/Math.abs(s)*j,C=[e,o+B],E=[e,o-B]):(o-=d/Math.abs(d)*j,C=[e+B,o],E=[e-B,o]),U.routepath+="L "+e+" "+o+" ",j>0&&(U.arrowpath="M "+w[0]+" "+w[1]+" L "+C[0]+" "+C[1]+" L "+E[0]+" "+E[1])}}else{var r=H[0],e=r[1].x,o=r[1].y,s=e-r[0].x,d=o-r[0].y,w=[e,o],C,E;Math.abs(s)>0?(e-=s/Math.abs(s)*j,C=[e,o+B],E=[e,o-B]):(o-=d/Math.abs(d)*j,C=[e+B,o],E=[e-B,o]),U.routepath+="L "+e+" "+o+" ",j>0&&(U.arrowpath="M "+w[0]+" "+w[1]+" L "+C[0]+" "+C[1]+" L "+E[0]+" "+E[1])}return U},O}();y.GridRouter=P},{"./rectangle":17,"./shortestpaths":18,"./vpsc":19}],10:[function(u,g,y){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var T={PADDING:10,GOLDEN_SECTION:(1+Math.sqrt(5))/2,FLOAT_EPSILON:1e-4,MAX_INERATIONS:100};function k(F,G,X,r,i,H){i===void 0&&(i=1),H===void 0&&(H=!0);var q=0,B=0,j=G,U=X,i=typeof i<"u"?i:1,r=typeof r<"u"?r:0,e=0,o=0,s=0,d=0,p=[];if(F.length==0)return;x(F),_(F,i),H&&l(F);function x(m){m.forEach(function(w){b(w)});function b(w){var C=Number.MAX_VALUE,E=Number.MAX_VALUE,S=0,M=0;w.array.forEach(function(A){var R=typeof A.width<"u"?A.width:r,D=typeof A.height<"u"?A.height:r;R/=2,D/=2,S=Math.max(A.x+R,S),C=Math.min(A.x-R,C),M=Math.max(A.y+D,M),E=Math.min(A.y-D,E)}),w.width=S-C,w.height=M-E}}function l(m){m.forEach(function(b){var w={x:0,y:0};b.array.forEach(function(S){w.x+=S.x,w.y+=S.y}),w.x/=b.array.length,w.y/=b.array.length;var C={x:w.x-b.width/2,y:w.y-b.height/2},E={x:b.x-C.x+j/2-e/2,y:b.y-C.y+U/2-o/2};b.array.forEach(function(S){S.x+=E.x,S.y+=E.y})})}function _(m,b){var w=Number.POSITIVE_INFINITY,C=0;m.sort(function(J,ie){return ie.height-J.height}),s=m.reduce(function(J,ie){return J.width<ie.width?J.width:ie.width});for(var E=L=s,S=Y=h(m),M=0,A=Number.MAX_VALUE,R=Number.MAX_VALUE,D=-1,N=Number.MAX_VALUE,I=Number.MAX_VALUE;N>s||I>T.FLOAT_EPSILON;){if(D!=1)var L=S-(S-E)/T.GOLDEN_SECTION,A=v(m,L);if(D!=0)var Y=E+(S-E)/T.GOLDEN_SECTION,R=v(m,Y);if(N=Math.abs(L-Y),I=Math.abs(A-R),A<w&&(w=A,C=L),R<w&&(w=R,C=Y),A>R?(E=L,L=Y,A=R,D=1):(S=Y,Y=L,R=A,D=0),M++>100)break}v(m,C)}function v(m,b){p=[],e=0,o=0,d=B;for(var w=0;w<m.length;w++){var C=m[w];c(C,b)}return Math.abs(f()-i)}function c(m,b){for(var w=void 0,C=0;C<p.length;C++)if(p[C].space_left>=m.height&&p[C].x+p[C].width+m.width+T.PADDING-b<=T.FLOAT_EPSILON){w=p[C];break}p.push(m),w!==void 0?(m.x=w.x+w.width+T.PADDING,m.y=w.bottom,m.space_left=m.height,m.bottom=m.y,w.space_left-=m.height+T.PADDING,w.bottom+=m.height+T.PADDING):(m.y=d,d+=m.height+T.PADDING,m.x=q,m.bottom=m.y,m.space_left=m.height),m.y+m.height-o>-T.FLOAT_EPSILON&&(o=m.y+m.height-B),m.x+m.width-e>-T.FLOAT_EPSILON&&(e=m.x+m.width-q)}function h(m){var b=0;return m.forEach(function(w){return b+=w.width+T.PADDING}),b}function f(){return e/o}}y.applyPacking=k;function V(F,G){for(var X={},P={},O=[],H=0,q=0;q<G.length;q++){var B=G[q],j=B.source,U=B.target;P[j.index]?P[j.index].push(U):P[j.index]=[U],P[U.index]?P[U.index].push(j):P[U.index]=[j]}for(var q=0;q<F.length;q++){var i=F[q];X[i.index]||r(i,!0)}function r(e,o){if(X[e.index]===void 0){o&&(H++,O.push({array:[]})),X[e.index]=H,O[H-1].array.push(e);var s=P[e.index];if(s)for(var d=0;d<s.length;d++)r(s[d],!1)}}return O}y.separateGraphs=V},{}],11:[function(u,g,y){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var T=u("./powergraph"),k=u("./linklengths"),V=u("./descent"),F=u("./rectangle"),G=u("./shortestpaths"),X=u("./geom"),P=u("./handledisconnected"),O;(function(B){B[B.start=0]="start",B[B.tick=1]="tick",B[B.end=2]="end"})(O=y.EventType||(y.EventType={}));function H(B){return typeof B.leaves<"u"||typeof B.groups<"u"}var q=function(){function B(){var j=this;this._canvasSize=[1,1],this._linkDistance=20,this._defaultNodeSize=10,this._linkLengthCalculator=null,this._linkType=null,this._avoidOverlaps=!1,this._handleDisconnected=!0,this._running=!1,this._nodes=[],this._groups=[],this._rootGroup=null,this._links=[],this._constraints=[],this._distanceMatrix=null,this._descent=null,this._directedLinkConstraints=null,this._threshold=.01,this._visibilityGraph=null,this._groupCompactness=1e-6,this.event=null,this.linkAccessor={getSourceIndex:B.getSourceIndex,getTargetIndex:B.getTargetIndex,setLength:B.setLinkLength,getType:function(U){return typeof j._linkType=="function"?j._linkType(U):0}}}return B.prototype.on=function(j,U){return this.event||(this.event={}),typeof j=="string"?this.event[O[j]]=U:this.event[j]=U,this},B.prototype.trigger=function(j){this.event&&typeof this.event[j.type]<"u"&&this.event[j.type](j)},B.prototype.kick=function(){for(;!this.tick(););},B.prototype.tick=function(){if(this._alpha<this._threshold)return this._running=!1,this.trigger({type:O.end,alpha:this._alpha=0,stress:this._lastStress}),!0;var j=this._nodes.length,U=this._links.length,i,r;for(this._descent.locks.clear(),r=0;r<j;++r)if(i=this._nodes[r],i.fixed){(typeof i.px>"u"||typeof i.py>"u")&&(i.px=i.x,i.py=i.y);var e=[i.px,i.py];this._descent.locks.add(r,e)}var o=this._descent.rungeKutta();return o===0?this._alpha=0:typeof this._lastStress<"u"&&(this._alpha=o),this._lastStress=o,this.updateNodePositions(),this.trigger({type:O.tick,alpha:this._alpha,stress:this._lastStress}),!1},B.prototype.updateNodePositions=function(){for(var j=this._descent.x[0],U=this._descent.x[1],i,r=this._nodes.length;r--;)i=this._nodes[r],i.x=j[r],i.y=U[r]},B.prototype.nodes=function(j){if(!j){if(this._nodes.length===0&&this._links.length>0){var U=0;this._links.forEach(function(r){U=Math.max(U,r.source,r.target)}),this._nodes=new Array(++U);for(var i=0;i<U;++i)this._nodes[i]={}}return this._nodes}return this._nodes=j,this},B.prototype.groups=function(j){var U=this;return j?(this._groups=j,this._rootGroup={},this._groups.forEach(function(i){typeof i.padding>"u"&&(i.padding=1),typeof i.leaves<"u"&&i.leaves.forEach(function(r,e){typeof r=="number"&&((i.leaves[e]=U._nodes[r]).parent=i)}),typeof i.groups<"u"&&i.groups.forEach(function(r,e){typeof r=="number"&&((i.groups[e]=U._groups[r]).parent=i)})}),this._rootGroup.leaves=this._nodes.filter(function(i){return typeof i.parent>"u"}),this._rootGroup.groups=this._groups.filter(function(i){return typeof i.parent>"u"}),this):this._groups},B.prototype.powerGraphGroups=function(j){var U=T.getGroups(this._nodes,this._links,this.linkAccessor,this._rootGroup);return this.groups(U.groups),j(U),this},B.prototype.avoidOverlaps=function(j){return arguments.length?(this._avoidOverlaps=j,this):this._avoidOverlaps},B.prototype.handleDisconnected=function(j){return arguments.length?(this._handleDisconnected=j,this):this._handleDisconnected},B.prototype.flowLayout=function(j,U){return arguments.length||(j="y"),this._directedLinkConstraints={axis:j,getMinSeparation:typeof U=="number"?function(){return U}:U},this},B.prototype.links=function(j){return arguments.length?(this._links=j,this):this._links},B.prototype.constraints=function(j){return arguments.length?(this._constraints=j,this):this._constraints},B.prototype.distanceMatrix=function(j){return arguments.length?(this._distanceMatrix=j,this):this._distanceMatrix},B.prototype.size=function(j){return j?(this._canvasSize=j,this):this._canvasSize},B.prototype.defaultNodeSize=function(j){return j?(this._defaultNodeSize=j,this):this._defaultNodeSize},B.prototype.groupCompactness=function(j){return j?(this._groupCompactness=j,this):this._groupCompactness},B.prototype.linkDistance=function(j){return j?(this._linkDistance=typeof j=="function"?j:+j,this._linkLengthCalculator=null,this):this._linkDistance},B.prototype.linkType=function(j){return this._linkType=j,this},B.prototype.convergenceThreshold=function(j){return j?(this._threshold=typeof j=="function"?j:+j,this):this._threshold},B.prototype.alpha=function(j){return arguments.length?(j=+j,this._alpha?j>0?this._alpha=j:this._alpha=0:j>0&&(this._running||(this._running=!0,this.trigger({type:O.start,alpha:this._alpha=j}),this.kick())),this):this._alpha},B.prototype.getLinkLength=function(j){return typeof this._linkDistance=="function"?+this._linkDistance(j):this._linkDistance},B.setLinkLength=function(j,U){j.length=U},B.prototype.getLinkType=function(j){return typeof this._linkType=="function"?this._linkType(j):0},B.prototype.symmetricDiffLinkLengths=function(j,U){var i=this;return U===void 0&&(U=1),this.linkDistance(function(r){return j*r.length}),this._linkLengthCalculator=function(){return k.symmetricDiffLinkLengths(i._links,i.linkAccessor,U)},this},B.prototype.jaccardLinkLengths=function(j,U){var i=this;return U===void 0&&(U=1),this.linkDistance(function(r){return j*r.length}),this._linkLengthCalculator=function(){return k.jaccardLinkLengths(i._links,i.linkAccessor,U)},this},B.prototype.start=function(j,U,i,r,e,o){var s=this;j===void 0&&(j=0),U===void 0&&(U=0),i===void 0&&(i=0),r===void 0&&(r=0),e===void 0&&(e=!0),o===void 0&&(o=!0);var d,p,x=this.nodes().length,l=x+2*this._groups.length,_=this._links.length,v=this._canvasSize[0],c=this._canvasSize[1],h=new Array(l),f=new Array(l),m=null,b=this._avoidOverlaps;this._nodes.forEach(function(D,N){D.index=N,typeof D.x>"u"&&(D.x=v/2,D.y=c/2),h[N]=D.x,f[N]=D.y}),this._linkLengthCalculator&&this._linkLengthCalculator();var w;this._distanceMatrix?w=this._distanceMatrix:(w=new G.Calculator(l,this._links,B.getSourceIndex,B.getTargetIndex,function(D){return s.getLinkLength(D)}).DistanceMatrix(),m=V.Descent.createSquareMatrix(l,function(){return 2}),this._links.forEach(function(D){typeof D.source=="number"&&(D.source=s._nodes[D.source]),typeof D.target=="number"&&(D.target=s._nodes[D.target])}),this._links.forEach(function(D){var N=B.getSourceIndex(D),I=B.getTargetIndex(D);m[N][I]=m[I][N]=D.weight||1}));var C=V.Descent.createSquareMatrix(l,function(D,N){return w[D][N]});if(this._rootGroup&&typeof this._rootGroup.groups<"u"){var d=x,E=function(N,I,L,Y){m[N][I]=m[I][N]=L,C[N][I]=C[I][N]=Y};this._groups.forEach(function(N){E(d,d+1,s._groupCompactness,.1),typeof N.bounds>"u"?(h[d]=v/2,f[d++]=c/2,h[d]=v/2,f[d++]=c/2):(h[d]=N.bounds.x,f[d++]=N.bounds.y,h[d]=N.bounds.X,f[d++]=N.bounds.Y)})}else this._rootGroup={leaves:this._nodes,groups:[]};var S=this._constraints||[];this._directedLinkConstraints&&(this.linkAccessor.getMinSeparation=this._directedLinkConstraints.getMinSeparation,S=S.concat(k.generateDirectedEdgeConstraints(x,this._links,this._directedLinkConstraints.axis,this.linkAccessor))),this.avoidOverlaps(!1),this._descent=new V.Descent([h,f],C),this._descent.locks.clear();for(var d=0;d<x;++d){var M=this._nodes[d];if(M.fixed){M.px=M.x,M.py=M.y;var A=[M.x,M.y];this._descent.locks.add(d,A)}}if(this._descent.threshold=this._threshold,this.initialLayout(j,h,f),S.length>0&&(this._descent.project=new F.Projection(this._nodes,this._groups,this._rootGroup,S).projectFunctions()),this._descent.run(U),this.separateOverlappingComponents(v,c,o),this.avoidOverlaps(b),b&&(this._nodes.forEach(function(D,N){D.x=h[N],D.y=f[N]}),this._descent.project=new F.Projection(this._nodes,this._groups,this._rootGroup,S,!0).projectFunctions(),this._nodes.forEach(function(D,N){h[N]=D.x,f[N]=D.y})),this._descent.G=m,this._descent.run(i),r){this._descent.snapStrength=1e3,this._descent.snapGridSize=this._nodes[0].width,this._descent.numGridSnapNodes=x,this._descent.scaleSnapByMaxH=x!=l;var R=V.Descent.createSquareMatrix(l,function(D,N){return D>=x||N>=x?m[D][N]:0});this._descent.G=R,this._descent.run(r)}return this.updateNodePositions(),this.separateOverlappingComponents(v,c,o),e?this.resume():this},B.prototype.initialLayout=function(j,U,i){if(this._groups.length>0&&j>0){var r=this._nodes.length,e=this._links.map(function(s){return{source:s.source.index,target:s.target.index}}),o=this._nodes.map(function(s){return{index:s.index}});this._groups.forEach(function(s,d){o.push({index:s.index=r+d})}),this._groups.forEach(function(s,d){typeof s.leaves<"u"&&s.leaves.forEach(function(p){return e.push({source:s.index,target:p.index})}),typeof s.groups<"u"&&s.groups.forEach(function(p){return e.push({source:s.index,target:p.index})})}),new B().size(this.size()).nodes(o).links(e).avoidOverlaps(!1).linkDistance(this.linkDistance()).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(j,0,0,0,!1),this._nodes.forEach(function(s){U[s.index]=o[s.index].x,i[s.index]=o[s.index].y})}else this._descent.run(j)},B.prototype.separateOverlappingComponents=function(j,U,i){var r=this;if(i===void 0&&(i=!0),!this._distanceMatrix&&this._handleDisconnected){var e=this._descent.x[0],o=this._descent.x[1];this._nodes.forEach(function(d,p){d.x=e[p],d.y=o[p]});var s=P.separateGraphs(this._nodes,this._links);P.applyPacking(s,j,U,this._defaultNodeSize,U/j,i),this._nodes.forEach(function(d,p){r._descent.x[0][p]=d.x,r._descent.x[1][p]=d.y,d.bounds&&(d.bounds.setXCentre(d.x),d.bounds.setYCentre(d.y))})}},B.prototype.resume=function(){return this.alpha(.1)},B.prototype.stop=function(){return this.alpha(0)},B.prototype.prepareEdgeRouting=function(j){j===void 0&&(j=0),this._visibilityGraph=new X.TangentVisibilityGraph(this._nodes.map(function(U){return U.bounds.inflate(-j).vertices()}))},B.prototype.routeEdge=function(j,U,i){U===void 0&&(U=5);var r=[],e=new X.TangentVisibilityGraph(this._visibilityGraph.P,{V:this._visibilityGraph.V,E:this._visibilityGraph.E}),o={x:j.source.x,y:j.source.y},s={x:j.target.x,y:j.target.y},d=e.addPoint(o,j.source.index),p=e.addPoint(s,j.target.index);e.addEdgeIfVisible(o,s,j.source.index,j.target.index),typeof i<"u"&&i(e);var x=function(C){return C.source.id},l=function(C){return C.target.id},_=function(C){return C.length()},v=new G.Calculator(e.V.length,e.E,x,l,_),c=v.PathFromNodeToNode(d.id,p.id);if(c.length===1||c.length===e.V.length){var h=F.makeEdgeBetween(j.source.innerBounds,j.target.innerBounds,U);r=[h.sourceIntersection,h.arrowStart]}else{for(var f=c.length-2,m=e.V[c[f]].p,b=e.V[c[0]].p,r=[j.source.innerBounds.rayIntersection(m.x,m.y)],w=f;w>=0;--w)r.push(e.V[c[w]].p);r.push(F.makeEdgeTo(b,j.target.innerBounds,U))}return r},B.getSourceIndex=function(j){return typeof j.source=="number"?j.source:j.source.index},B.getTargetIndex=function(j){return typeof j.target=="number"?j.target:j.target.index},B.linkId=function(j){return B.getSourceIndex(j)+"-"+B.getTargetIndex(j)},B.dragStart=function(j){H(j)?B.storeOffset(j,B.dragOrigin(j)):(B.stopNode(j),j.fixed|=2)},B.stopNode=function(j){j.px=j.x,j.py=j.y},B.storeOffset=function(j,U){typeof j.leaves<"u"&&j.leaves.forEach(function(i){i.fixed|=2,B.stopNode(i),i._dragGroupOffsetX=i.x-U.x,i._dragGroupOffsetY=i.y-U.y}),typeof j.groups<"u"&&j.groups.forEach(function(i){return B.storeOffset(i,U)})},B.dragOrigin=function(j){return H(j)?{x:j.bounds.cx(),y:j.bounds.cy()}:j},B.drag=function(j,U){H(j)?(typeof j.leaves<"u"&&j.leaves.forEach(function(i){j.bounds.setXCentre(U.x),j.bounds.setYCentre(U.y),i.px=i._dragGroupOffsetX+U.x,i.py=i._dragGroupOffsetY+U.y}),typeof j.groups<"u"&&j.groups.forEach(function(i){return B.drag(i,U)})):(j.px=U.x,j.py=U.y)},B.dragEnd=function(j){H(j)?(typeof j.leaves<"u"&&j.leaves.forEach(function(U){B.dragEnd(U),delete U._dragGroupOffsetX,delete U._dragGroupOffsetY}),typeof j.groups<"u"&&j.groups.forEach(B.dragEnd)):j.fixed&=-7},B.mouseOver=function(j){j.fixed|=4,j.px=j.x,j.py=j.y},B.mouseOut=function(j){j.fixed&=-5},B}();y.Layout=q},{"./descent":7,"./geom":8,"./handledisconnected":10,"./linklengths":13,"./powergraph":14,"./rectangle":17,"./shortestpaths":18}],12:[function(u,g,y){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var T=u("./shortestpaths"),k=u("./descent"),V=u("./rectangle"),F=u("./linklengths"),G=function(){function H(q,B){this.source=q,this.target=B}return H.prototype.actualLength=function(q){var B=this;return Math.sqrt(q.reduce(function(j,U){var i=U[B.target]-U[B.source];return j+i*i},0))},H}();y.Link3D=G;var X=function(){function H(q,B,j){q===void 0&&(q=0),B===void 0&&(B=0),j===void 0&&(j=0),this.x=q,this.y=B,this.z=j}return H}();y.Node3D=X;var P=function(){function H(q,B,j){var U=this;j===void 0&&(j=1),this.nodes=q,this.links=B,this.idealLinkLength=j,this.constraints=null,this.useJaccardLinkLengths=!0,this.result=new Array(H.k);for(var i=0;i<H.k;++i)this.result[i]=new Array(q.length);q.forEach(function(r,e){for(var o=0,s=H.dims;o<s.length;o++){var d=s[o];typeof r[d]>"u"&&(r[d]=Math.random())}U.result[0][e]=r.x,U.result[1][e]=r.y,U.result[2][e]=r.z})}return H.prototype.linkLength=function(q){return q.actualLength(this.result)},H.prototype.start=function(q){var B=this;q===void 0&&(q=100);var j=this.nodes.length,U=new O;this.useJaccardLinkLengths&&F.jaccardLinkLengths(this.links,U,1.5),this.links.forEach(function(d){return d.length*=B.idealLinkLength});var i=new T.Calculator(j,this.links,function(d){return d.source},function(d){return d.target},function(d){return d.length}).DistanceMatrix(),r=k.Descent.createSquareMatrix(j,function(d,p){return i[d][p]}),e=k.Descent.createSquareMatrix(j,function(){return 2});this.links.forEach(function(d){var p=d.source,x=d.target;return e[p][x]=e[x][p]=1}),this.descent=new k.Descent(this.result,r),this.descent.threshold=.001,this.descent.G=e,this.constraints&&(this.descent.project=new V.Projection(this.nodes,null,null,this.constraints).projectFunctions());for(var o=0;o<this.nodes.length;o++){var s=this.nodes[o];s.fixed&&this.descent.locks.add(o,[s.x,s.y,s.z])}return this.descent.run(q),this},H.prototype.tick=function(){this.descent.locks.clear();for(var q=0;q<this.nodes.length;q++){var B=this.nodes[q];B.fixed&&this.descent.locks.add(q,[B.x,B.y,B.z])}return this.descent.rungeKutta()},H.dims=["x","y","z"],H.k=H.dims.length,H}();y.Layout3D=P;var O=function(){function H(){}return H.prototype.getSourceIndex=function(q){return q.source},H.prototype.getTargetIndex=function(q){return q.target},H.prototype.getLength=function(q){return q.length},H.prototype.setLength=function(q,B){q.length=B},H}()},{"./descent":7,"./linklengths":13,"./rectangle":17,"./shortestpaths":18}],13:[function(u,g,y){"use strict";Object.defineProperty(y,"__esModule",{value:!0});function T(H,q){var B={};for(var j in H)B[j]={};for(var j in q)B[j]={};return Object.keys(B).length}function k(H,q){var B=0;for(var j in H)typeof q[j]<"u"&&++B;return B}function V(H,q){var B={},j=function(U,i){typeof B[U]>"u"&&(B[U]={}),B[U][i]={}};return H.forEach(function(U){var i=q.getSourceIndex(U),r=q.getTargetIndex(U);j(i,r),j(r,i)}),B}function F(H,q,B,j){var U=V(H,j);H.forEach(function(i){var r=U[j.getSourceIndex(i)],e=U[j.getTargetIndex(i)];j.setLength(i,1+q*B(r,e))})}function G(H,q,B){B===void 0&&(B=1),F(H,B,function(j,U){return Math.sqrt(T(j,U)-k(j,U))},q)}y.symmetricDiffLinkLengths=G;function X(H,q,B){B===void 0&&(B=1),F(H,B,function(j,U){return Math.min(Object.keys(j).length,Object.keys(U).length)<1.1?0:k(j,U)/T(j,U)},q)}y.jaccardLinkLengths=X;function P(H,q,B,j){var U=O(H,q,j),i={};U.forEach(function(e,o){return e.forEach(function(s){return i[s]=o})});var r=[];return q.forEach(function(e){var o=j.getSourceIndex(e),s=j.getTargetIndex(e),d=i[o],p=i[s];d!==p&&r.push({axis:B,left:o,right:s,gap:j.getMinSeparation(e)})}),r}y.generateDirectedEdgeConstraints=P;function O(H,q,B){var j=[],U=0,i=[],r=[];function e(h){h.index=h.lowlink=U++,i.push(h),h.onStack=!0;for(var f=0,m=h.out;f<m.length;f++){var b=m[f];typeof b.index>"u"?(e(b),h.lowlink=Math.min(h.lowlink,b.lowlink)):b.onStack&&(h.lowlink=Math.min(h.lowlink,b.index))}if(h.lowlink===h.index){for(var w=[];i.length&&(b=i.pop(),b.onStack=!1,w.push(b),b!==h););r.push(w.map(function(C){return C.id}))}}for(var o=0;o<H;o++)j.push({id:o,out:[]});for(var s=0,d=q;s<d.length;s++){var p=d[s],x=j[B.getSourceIndex(p)],l=j[B.getTargetIndex(p)];x.out.push(l)}for(var _=0,v=j;_<v.length;_++){var c=v[_];typeof c.index>"u"&&e(c)}return r}y.stronglyConnectedComponents=O},{}],14:[function(u,g,y){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var T=function(){function q(B,j,U){this.source=B,this.target=j,this.type=U}return q}();y.PowerEdge=T;var k=function(){function q(B,j,U,i){var r=this;if(this.linkAccessor=U,this.modules=new Array(B),this.roots=[],i)this.initModulesFromGroup(i);else{this.roots.push(new X);for(var e=0;e<B;++e)this.roots[0].add(this.modules[e]=new F(e))}this.R=j.length,j.forEach(function(o){var s=r.modules[U.getSourceIndex(o)],d=r.modules[U.getTargetIndex(o)],p=U.getType(o);s.outgoing.add(p,d),d.incoming.add(p,s)})}return q.prototype.initModulesFromGroup=function(B){var j=new X;this.roots.push(j);for(var U=0;U<B.leaves.length;++U){var i=B.leaves[U],r=new F(i.id);this.modules[i.id]=r,j.add(r)}if(B.groups)for(var e=0;e<B.groups.length;++e){var o=B.groups[e],s={};for(var d in o)d!=="leaves"&&d!=="groups"&&o.hasOwnProperty(d)&&(s[d]=o[d]);j.add(new F(-1-e,new P,new P,this.initModulesFromGroup(o),s))}return j},q.prototype.merge=function(B,j,U){U===void 0&&(U=0);var i=B.incoming.intersection(j.incoming),r=B.outgoing.intersection(j.outgoing),e=new X;e.add(B),e.add(j);var o=new F(this.modules.length,r,i,e);this.modules.push(o);var s=function(d,p,x){d.forAll(function(l,_){l.forAll(function(v){var c=v[p];c.add(_,o),c.remove(_,B),c.remove(_,j),B[x].remove(_,v),j[x].remove(_,v)})})};return s(r,"incoming","outgoing"),s(i,"outgoing","incoming"),this.R-=i.count()+r.count(),this.roots[U].remove(B),this.roots[U].remove(j),this.roots[U].add(o),o},q.prototype.rootMerges=function(B){B===void 0&&(B=0);for(var j=this.roots[B].modules(),U=j.length,i=new Array(U*(U-1)),r=0,e=0,o=U-1;e<o;++e)for(var s=e+1;s<U;++s){var d=j[e],p=j[s];i[r]={id:r,nEdges:this.nEdges(d,p),a:d,b:p},r++}return i},q.prototype.greedyMerge=function(){for(var B=0;B<this.roots.length;++B)if(!(this.roots[B].modules().length<2)){var j=this.rootMerges(B).sort(function(i,r){return i.nEdges==r.nEdges?i.id-r.id:i.nEdges-r.nEdges}),U=j[0];if(!(U.nEdges>=this.R))return this.merge(U.a,U.b,B),!0}},q.prototype.nEdges=function(B,j){var U=B.incoming.intersection(j.incoming),i=B.outgoing.intersection(j.outgoing);return this.R-U.count()-i.count()},q.prototype.getGroupHierarchy=function(B){var j=this,U=[],i={};V(this.roots[0],i,U);var r=this.allEdges();return r.forEach(function(e){var o=j.modules[e.source],s=j.modules[e.target];B.push(new T(typeof o.gid>"u"?e.source:U[o.gid],typeof s.gid>"u"?e.target:U[s.gid],e.type))}),U},q.prototype.allEdges=function(){var B=[];return q.getEdges(this.roots[0],B),B},q.getEdges=function(B,j){B.forAll(function(U){U.getEdges(j),q.getEdges(U.children,j)})},q}();y.Configuration=k;function V(q,B,j){q.forAll(function(U){if(U.isLeaf())B.leaves||(B.leaves=[]),B.leaves.push(U.id);else{var i=B;if(U.gid=j.length,!U.isIsland()||U.isPredefined()){if(i={id:U.gid},U.isPredefined())for(var r in U.definition)i[r]=U.definition[r];B.groups||(B.groups=[]),B.groups.push(U.gid),j.push(i)}V(U.children,i,j)}})}var F=function(){function q(B,j,U,i,r){j===void 0&&(j=new P),U===void 0&&(U=new P),i===void 0&&(i=new X),this.id=B,this.outgoing=j,this.incoming=U,this.children=i,this.definition=r}return q.prototype.getEdges=function(B){var j=this;this.outgoing.forAll(function(U,i){U.forAll(function(r){B.push(new T(j.id,r.id,i))})})},q.prototype.isLeaf=function(){return this.children.count()===0},q.prototype.isIsland=function(){return this.outgoing.count()===0&&this.incoming.count()===0},q.prototype.isPredefined=function(){return typeof this.definition<"u"},q}();y.Module=F;function G(q,B){var j={};for(var U in q)U in B&&(j[U]=q[U]);return j}var X=function(){function q(){this.table={}}return q.prototype.count=function(){return Object.keys(this.table).length},q.prototype.intersection=function(B){var j=new q;return j.table=G(this.table,B.table),j},q.prototype.intersectionCount=function(B){return this.intersection(B).count()},q.prototype.contains=function(B){return B in this.table},q.prototype.add=function(B){this.table[B.id]=B},q.prototype.remove=function(B){delete this.table[B.id]},q.prototype.forAll=function(B){for(var j in this.table)B(this.table[j])},q.prototype.modules=function(){var B=[];return this.forAll(function(j){j.isPredefined()||B.push(j)}),B},q}();y.ModuleSet=X;var P=function(){function q(){this.sets={},this.n=0}return q.prototype.count=function(){return this.n},q.prototype.contains=function(B){var j=!1;return this.forAllModules(function(U){!j&&U.id==B&&(j=!0)}),j},q.prototype.add=function(B,j){var U=B in this.sets?this.sets[B]:this.sets[B]=new X;U.add(j),++this.n},q.prototype.remove=function(B,j){var U=this.sets[B];U.remove(j),U.count()===0&&delete this.sets[B],--this.n},q.prototype.forAll=function(B){for(var j in this.sets)B(this.sets[j],Number(j))},q.prototype.forAllModules=function(B){this.forAll(function(j,U){return j.forAll(B)})},q.prototype.intersection=function(B){var j=new q;return this.forAll(function(U,i){if(i in B.sets){var r=U.intersection(B.sets[i]),e=r.count();e>0&&(j.sets[i]=r,j.n+=e)}}),j},q}();y.LinkSets=P;function O(q,B){return Object.keys(G(q,B)).length}function H(q,B,j,U){for(var i=q.length,r=new k(i,B,j,U);r.greedyMerge(););var e=[],o=r.getGroupHierarchy(e);return e.forEach(function(s){var d=function(p){var x=s[p];typeof x=="number"&&(s[p]=q[x])};d("source"),d("target")}),{groups:o,powerEdges:e}}y.getGroups=H},{}],15:[function(u,g,y){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var T=function(){function V(F){this.elem=F,this.subheaps=[]}return V.prototype.toString=function(F){for(var G="",X=!1,P=0;P<this.subheaps.length;++P){var O=this.subheaps[P];if(!O.elem){X=!1;continue}X&&(G=G+","),G=G+O.toString(F),X=!0}return G!==""&&(G="("+G+")"),(this.elem?F(this.elem):"")+G},V.prototype.forEach=function(F){this.empty()||(F(this.elem,this),this.subheaps.forEach(function(G){return G.forEach(F)}))},V.prototype.count=function(){return this.empty()?0:1+this.subheaps.reduce(function(F,G){return F+G.count()},0)},V.prototype.min=function(){return this.elem},V.prototype.empty=function(){return this.elem==null},V.prototype.contains=function(F){if(this===F)return!0;for(var G=0;G<this.subheaps.length;G++)if(this.subheaps[G].contains(F))return!0;return!1},V.prototype.isHeap=function(F){var G=this;return this.subheaps.every(function(X){return F(G.elem,X.elem)&&X.isHeap(F)})},V.prototype.insert=function(F,G){return this.merge(new V(F),G)},V.prototype.merge=function(F,G){return this.empty()?F:F.empty()?this:G(this.elem,F.elem)?(this.subheaps.push(F),this):(F.subheaps.push(this),F)},V.prototype.removeMin=function(F){return this.empty()?null:this.mergePairs(F)},V.prototype.mergePairs=function(F){if(this.subheaps.length==0)return new V(null);if(this.subheaps.length==1)return this.subheaps[0];var G=this.subheaps.pop().merge(this.subheaps.pop(),F),X=this.mergePairs(F);return G.merge(X,F)},V.prototype.decreaseKey=function(F,G,X,P){var O=F.removeMin(P);F.elem=O.elem,F.subheaps=O.subheaps,X!==null&&O.elem!==null&&X(F.elem,F);var H=new V(G);return X!==null&&X(G,H),this.merge(H,P)},V}();y.PairingHeap=T;var k=function(){function V(F){this.lessThan=F}return V.prototype.top=function(){return this.empty()?null:this.root.elem},V.prototype.push=function(){for(var F=[],G=0;G<arguments.length;G++)F[G]=arguments[G];for(var X,P=0,O;O=F[P];++P)X=new T(O),this.root=this.empty()?X:this.root.merge(X,this.lessThan);return X},V.prototype.empty=function(){return!this.root||!this.root.elem},V.prototype.isHeap=function(){return this.root.isHeap(this.lessThan)},V.prototype.forEach=function(F){this.root.forEach(F)},V.prototype.pop=function(){if(this.empty())return null;var F=this.root.min();return this.root=this.root.removeMin(this.lessThan),F},V.prototype.reduceKey=function(F,G,X){X===void 0&&(X=null),this.root=this.root.decreaseKey(F,G,X,this.lessThan)},V.prototype.toString=function(F){return this.root.toString(F)},V.prototype.count=function(){return this.root.count()},V}();y.PriorityQueue=k},{}],16:[function(u,g,y){"use strict";var T=this&&this.__extends||function(){var X=function(P,O){return X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(H,q){H.__proto__=q}||function(H,q){for(var B in q)q.hasOwnProperty(B)&&(H[B]=q[B])},X(P,O)};return function(P,O){X(P,O);function H(){this.constructor=P}P.prototype=O===null?Object.create(O):(H.prototype=O.prototype,new H)}}();Object.defineProperty(y,"__esModule",{value:!0});var k=function(){function X(){this.findIter=function(P){for(var O=this._root,H=this.iterator();O!==null;){var q=this._comparator(P,O.data);if(q===0)return H._cursor=O,H;H._ancestors.push(O),O=O.get_child(q>0)}return null}}return X.prototype.clear=function(){this._root=null,this.size=0},X.prototype.find=function(P){for(var O=this._root;O!==null;){var H=this._comparator(P,O.data);if(H===0)return O.data;O=O.get_child(H>0)}return null},X.prototype.lowerBound=function(P){return this._bound(P,this._comparator)},X.prototype.upperBound=function(P){var O=this._comparator;function H(q,B){return O(B,q)}return this._bound(P,H)},X.prototype.min=function(){var P=this._root;if(P===null)return null;for(;P.left!==null;)P=P.left;return P.data},X.prototype.max=function(){var P=this._root;if(P===null)return null;for(;P.right!==null;)P=P.right;return P.data},X.prototype.iterator=function(){return new V(this)},X.prototype.each=function(P){for(var O=this.iterator(),H;(H=O.next())!==null;)P(H)},X.prototype.reach=function(P){for(var O=this.iterator(),H;(H=O.prev())!==null;)P(H)},X.prototype._bound=function(P,O){for(var H=this._root,q=this.iterator();H!==null;){var B=this._comparator(P,H.data);if(B===0)return q._cursor=H,q;q._ancestors.push(H),H=H.get_child(B>0)}for(var j=q._ancestors.length-1;j>=0;--j)if(H=q._ancestors[j],O(P,H.data)>0)return q._cursor=H,q._ancestors.length=j,q;return q._ancestors.length=0,q},X}();y.TreeBase=k;var V=function(){function X(P){this._tree=P,this._ancestors=[],this._cursor=null}return X.prototype.data=function(){return this._cursor!==null?this._cursor.data:null},X.prototype.next=function(){if(this._cursor===null){var P=this._tree._root;P!==null&&this._minNode(P)}else if(this._cursor.right===null){var O;do if(O=this._cursor,this._ancestors.length)this._cursor=this._ancestors.pop();else{this._cursor=null;break}while(this._cursor.right===O)}else this._ancestors.push(this._cursor),this._minNode(this._cursor.right);return this._cursor!==null?this._cursor.data:null},X.prototype.prev=function(){if(this._cursor===null){var P=this._tree._root;P!==null&&this._maxNode(P)}else if(this._cursor.left===null){var O;do if(O=this._cursor,this._ancestors.length)this._cursor=this._ancestors.pop();else{this._cursor=null;break}while(this._cursor.left===O)}else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left);return this._cursor!==null?this._cursor.data:null},X.prototype._minNode=function(P){for(;P.left!==null;)this._ancestors.push(P),P=P.left;this._cursor=P},X.prototype._maxNode=function(P){for(;P.right!==null;)this._ancestors.push(P),P=P.right;this._cursor=P},X}();y.Iterator=V;var F=function(){function X(P){this.data=P,this.left=null,this.right=null,this.red=!0}return X.prototype.get_child=function(P){return P?this.right:this.left},X.prototype.set_child=function(P,O){P?this.right=O:this.left=O},X}(),G=function(X){T(P,X);function P(O){var H=X.call(this)||this;return H._root=null,H._comparator=O,H.size=0,H}return P.prototype.insert=function(O){var H=!1;if(this._root===null)this._root=new F(O),H=!0,this.size++;else{var q=new F(void 0),B=!1,j=!1,U=null,i=q,r=null,e=this._root;for(i.right=this._root;;){if(e===null?(e=new F(O),r.set_child(B,e),H=!0,this.size++):P.is_red(e.left)&&P.is_red(e.right)&&(e.red=!0,e.left.red=!1,e.right.red=!1),P.is_red(e)&&P.is_red(r)){var o=i.right===U;e===r.get_child(j)?i.set_child(o,P.single_rotate(U,!j)):i.set_child(o,P.double_rotate(U,!j))}var s=this._comparator(e.data,O);if(s===0)break;j=B,B=s<0,U!==null&&(i=U),U=r,r=e,e=e.get_child(B)}this._root=q.right}return this._root.red=!1,H},P.prototype.remove=function(O){if(this._root===null)return!1;var H=new F(void 0),q=H;q.right=this._root;for(var B=null,j=null,U=null,i=!0;q.get_child(i)!==null;){var r=i;j=B,B=q,q=q.get_child(i);var e=this._comparator(O,q.data);if(i=e>0,e===0&&(U=q),!P.is_red(q)&&!P.is_red(q.get_child(i))){if(P.is_red(q.get_child(!i))){var o=P.single_rotate(q,i);B.set_child(r,o),B=o}else if(!P.is_red(q.get_child(!i))){var s=B.get_child(!r);if(s!==null)if(!P.is_red(s.get_child(!r))&&!P.is_red(s.get_child(r)))B.red=!1,s.red=!0,q.red=!0;else{var d=j.right===B;P.is_red(s.get_child(r))?j.set_child(d,P.double_rotate(B,r)):P.is_red(s.get_child(!r))&&j.set_child(d,P.single_rotate(B,r));var p=j.get_child(d);p.red=!0,q.red=!0,p.left.red=!1,p.right.red=!1}}}}return U!==null&&(U.data=q.data,B.set_child(B.right===q,q.get_child(q.left===null)),this.size--),this._root=H.right,this._root!==null&&(this._root.red=!1),U!==null},P.is_red=function(O){return O!==null&&O.red},P.single_rotate=function(O,H){var q=O.get_child(!H);return O.set_child(!H,q.get_child(H)),q.set_child(H,O),O.red=!0,q.red=!1,q},P.double_rotate=function(O,H){return O.set_child(!H,P.single_rotate(O.get_child(!H),!H)),P.single_rotate(O,H)},P}(k);y.RBTree=G},{}],17:[function(u,g,y){"use strict";var T=this&&this.__extends||function(){var c=function(h,f){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,b){m.__proto__=b}||function(m,b){for(var w in b)b.hasOwnProperty(w)&&(m[w]=b[w])},c(h,f)};return function(h,f){c(h,f);function m(){this.constructor=h}h.prototype=f===null?Object.create(f):(m.prototype=f.prototype,new m)}}();Object.defineProperty(y,"__esModule",{value:!0});var k=u("./vpsc"),V=u("./rbtree");function F(c){return c.bounds=typeof c.leaves<"u"?c.leaves.reduce(function(h,f){return f.bounds.union(h)},G.empty()):G.empty(),typeof c.groups<"u"&&(c.bounds=c.groups.reduce(function(h,f){return F(f).union(h)},c.bounds)),c.bounds=c.bounds.inflate(c.padding),c.bounds}y.computeGroupBounds=F;var G=function(){function c(h,f,m,b){this.x=h,this.X=f,this.y=m,this.Y=b}return c.empty=function(){return new c(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},c.prototype.cx=function(){return(this.x+this.X)/2},c.prototype.cy=function(){return(this.y+this.Y)/2},c.prototype.overlapX=function(h){var f=this.cx(),m=h.cx();return f<=m&&h.x<this.X?this.X-h.x:m<=f&&this.x<h.X?h.X-this.x:0},c.prototype.overlapY=function(h){var f=this.cy(),m=h.cy();return f<=m&&h.y<this.Y?this.Y-h.y:m<=f&&this.y<h.Y?h.Y-this.y:0},c.prototype.setXCentre=function(h){var f=h-this.cx();this.x+=f,this.X+=f},c.prototype.setYCentre=function(h){var f=h-this.cy();this.y+=f,this.Y+=f},c.prototype.width=function(){return this.X-this.x},c.prototype.height=function(){return this.Y-this.y},c.prototype.union=function(h){return new c(Math.min(this.x,h.x),Math.max(this.X,h.X),Math.min(this.y,h.y),Math.max(this.Y,h.Y))},c.prototype.lineIntersections=function(h,f,m,b){for(var w=[[this.x,this.y,this.X,this.y],[this.X,this.y,this.X,this.Y],[this.X,this.Y,this.x,this.Y],[this.x,this.Y,this.x,this.y]],C=[],E=0;E<4;++E){var S=c.lineIntersection(h,f,m,b,w[E][0],w[E][1],w[E][2],w[E][3]);S!==null&&C.push({x:S.x,y:S.y})}return C},c.prototype.rayIntersection=function(h,f){var m=this.lineIntersections(this.cx(),this.cy(),h,f);return m.length>0?m[0]:null},c.prototype.vertices=function(){return[{x:this.x,y:this.y},{x:this.X,y:this.y},{x:this.X,y:this.Y},{x:this.x,y:this.Y}]},c.lineIntersection=function(h,f,m,b,w,C,E,S){var M=m-h,A=E-w,R=b-f,D=S-C,N=D*M-A*R;if(N==0)return null;var I=h-w,L=f-C,Y=A*L-D*I,J=Y/N,ie=M*L-R*I,K=ie/N;return J>=0&&J<=1&&K>=0&&K<=1?{x:h+J*M,y:f+J*R}:null},c.prototype.inflate=function(h){return new c(this.x-h,this.X+h,this.y-h,this.Y+h)},c}();y.Rectangle=G;function X(c,h,f){var m=c.rayIntersection(h.cx(),h.cy())||{x:c.cx(),y:c.cy()},b=h.rayIntersection(c.cx(),c.cy())||{x:h.cx(),y:h.cy()},w=b.x-m.x,C=b.y-m.y,E=Math.sqrt(w*w+C*C),S=E-f;return{sourceIntersection:m,targetIntersection:b,arrowStart:{x:m.x+S*w/E,y:m.y+S*C/E}}}y.makeEdgeBetween=X;function P(c,h,f){var m=h.rayIntersection(c.x,c.y);m||(m={x:h.cx(),y:h.cy()});var b=m.x-c.x,w=m.y-c.y,C=Math.sqrt(b*b+w*w);return{x:m.x-f*b/C,y:m.y-f*w/C}}y.makeEdgeTo=P;var O=function(){function c(h,f,m){this.v=h,this.r=f,this.pos=m,this.prev=B(),this.next=B()}return c}(),H=function(){function c(h,f,m){this.isOpen=h,this.v=f,this.pos=m}return c}();function q(c,h){return c.pos>h.pos?1:c.pos<h.pos||c.isOpen?-1:h.isOpen?1:0}function B(){return new V.RBTree(function(c,h){return c.pos-h.pos})}var j={getCentre:function(c){return c.cx()},getOpen:function(c){return c.y},getClose:function(c){return c.Y},getSize:function(c){return c.width()},makeRect:function(c,h,f,m){return new G(f-m/2,f+m/2,c,h)},findNeighbours:e},U={getCentre:function(c){return c.cy()},getOpen:function(c){return c.x},getClose:function(c){return c.X},getSize:function(c){return c.height()},makeRect:function(c,h,f,m){return new G(c,h,f-m/2,f+m/2)},findNeighbours:o};function i(c,h,f,m){m===void 0&&(m=!1);var b=c.padding,w=typeof c.groups<"u"?c.groups.length:0,C=typeof c.leaves<"u"?c.leaves.length:0,E=w?c.groups.reduce(function(ne,ue){return ne.concat(i(ue,h,f,!0))},[]):[],S=(m?2:0)+C+w,M=new Array(S),A=new Array(S),R=0,D=function(ne,ue){A[R]=ne,M[R++]=ue};if(m){var N=c.bounds,I=h.getCentre(N),L=h.getSize(N)/2,Y=h.getOpen(N),J=h.getClose(N),ie=I-L+b/2,K=I+L-b/2;c.minVar.desiredPosition=ie,D(h.makeRect(Y,J,ie,b),c.minVar),c.maxVar.desiredPosition=K,D(h.makeRect(Y,J,K,b),c.maxVar)}C&&c.leaves.forEach(function(ne){return D(ne.bounds,ne.variable)}),w&&c.groups.forEach(function(ne){var ue=ne.bounds;D(h.makeRect(h.getOpen(ue),h.getClose(ue),h.getCentre(ue),h.getSize(ue)),ne.minVar)});var Q=r(A,M,h,f);return w&&(M.forEach(function(ne){ne.cOut=[],ne.cIn=[]}),Q.forEach(function(ne){ne.left.cOut.push(ne),ne.right.cIn.push(ne)}),c.groups.forEach(function(ne){var ue=(ne.padding-h.getSize(ne.bounds))/2;ne.minVar.cIn.forEach(function(fe){return fe.gap+=ue}),ne.minVar.cOut.forEach(function(fe){fe.left=ne.maxVar,fe.gap+=ue})})),E.concat(Q)}function r(c,h,f,m){var b,w=c.length,C=2*w;console.assert(h.length>=w);var E=new Array(C);for(b=0;b<w;++b){var S=c[b],M=new O(h[b],S,f.getCentre(S));E[b]=new H(!0,M,f.getOpen(S)),E[b+w]=new H(!1,M,f.getClose(S))}E.sort(q);var A=new Array,R=B();for(b=0;b<C;++b){var D=E[b],M=D.v;if(D.isOpen)R.insert(M),f.findNeighbours(M,R);else{R.remove(M);var N=function(Y,J){var ie=(f.getSize(Y.r)+f.getSize(J.r))/2+m;A.push(new k.Constraint(Y.v,J.v,ie))},I=function(Y,J,ie){for(var K,Q=M[Y].iterator();(K=Q[Y]())!==null;)ie(K,M),K[J].remove(M)};I("prev","next",function(Y,J){return N(Y,J)}),I("next","prev",function(Y,J){return N(J,Y)})}}return console.assert(R.size===0),A}function e(c,h){var f=function(m,b){for(var w=h.findIter(c),C;(C=w[m]())!==null;){var E=C.r.overlapX(c.r);if((E<=0||E<=C.r.overlapY(c.r))&&(c[m].insert(C),C[b].insert(c)),E<=0)break}};f("next","prev"),f("prev","next")}function o(c,h){var f=function(m,b){var w=h.findIter(c)[m]();w!==null&&w.r.overlapX(c.r)>0&&(c[m].insert(w),w[b].insert(c))};f("next","prev"),f("prev","next")}function s(c,h){return r(c,h,j,1e-6)}y.generateXConstraints=s;function d(c,h){return r(c,h,U,1e-6)}y.generateYConstraints=d;function p(c){return i(c,j,1e-6)}y.generateXGroupConstraints=p;function x(c){return i(c,U,1e-6)}y.generateYGroupConstraints=x;function l(c){var h=c.map(function(b){return new k.Variable(b.cx())}),f=s(c,h),m=new k.Solver(h,f);m.solve(),h.forEach(function(b,w){return c[w].setXCentre(b.position())}),h=c.map(function(b){return new k.Variable(b.cy())}),f=d(c,h),m=new k.Solver(h,f),m.solve(),h.forEach(function(b,w){return c[w].setYCentre(b.position())})}y.removeOverlaps=l;var _=function(c){T(h,c);function h(f,m){var b=c.call(this,0,m)||this;return b.index=f,b}return h}(k.Variable);y.IndexedVariable=_;var v=function(){function c(h,f,m,b,w){var C=this;if(m===void 0&&(m=null),b===void 0&&(b=null),w===void 0&&(w=!1),this.nodes=h,this.groups=f,this.rootGroup=m,this.avoidOverlaps=w,this.variables=h.map(function(S,M){return S.variable=new _(M,1)}),b&&this.createConstraints(b),w&&m&&typeof m.groups<"u"){h.forEach(function(S){if(!S.width||!S.height){S.bounds=new G(S.x,S.x,S.y,S.y);return}var M=S.width/2,A=S.height/2;S.bounds=new G(S.x-M,S.x+M,S.y-A,S.y+A)}),F(m);var E=h.length;f.forEach(function(S){C.variables[E]=S.minVar=new _(E++,typeof S.stiffness<"u"?S.stiffness:.01),C.variables[E]=S.maxVar=new _(E++,typeof S.stiffness<"u"?S.stiffness:.01)})}}return c.prototype.createSeparation=function(h){return new k.Constraint(this.nodes[h.left].variable,this.nodes[h.right].variable,h.gap,typeof h.equality<"u"?h.equality:!1)},c.prototype.makeFeasible=function(h){var f=this;if(this.avoidOverlaps){var m="x",b="width";h.axis==="x"&&(m="y",b="height");var w=h.offsets.map(function(E){return f.nodes[E.node]}).sort(function(E,S){return E[m]-S[m]}),C=null;w.forEach(function(E){if(C){var S=C[m]+C[b];S>E[m]&&(E[m]=S)}C=E})}},c.prototype.createAlignment=function(h){var f=this,m=this.nodes[h.offsets[0].node].variable;this.makeFeasible(h);var b=h.axis==="x"?this.xConstraints:this.yConstraints;h.offsets.slice(1).forEach(function(w){var C=f.nodes[w.node].variable;b.push(new k.Constraint(m,C,w.offset,!0))})},c.prototype.createConstraints=function(h){var f=this,m=function(b){return typeof b.type>"u"||b.type==="separation"};this.xConstraints=h.filter(function(b){return b.axis==="x"&&m(b)}).map(function(b){return f.createSeparation(b)}),this.yConstraints=h.filter(function(b){return b.axis==="y"&&m(b)}).map(function(b){return f.createSeparation(b)}),h.filter(function(b){return b.type==="alignment"}).forEach(function(b){return f.createAlignment(b)})},c.prototype.setupVariablesAndBounds=function(h,f,m,b){this.nodes.forEach(function(w,C){w.fixed?(w.variable.weight=w.fixedWeight?w.fixedWeight:1e3,m[C]=b(w)):w.variable.weight=1;var E=(w.width||0)/2,S=(w.height||0)/2,M=h[C],A=f[C];w.bounds=new G(M-E,M+E,A-S,A+S)})},c.prototype.xProject=function(h,f,m){!this.rootGroup&&!(this.avoidOverlaps||this.xConstraints)||this.project(h,f,h,m,function(b){return b.px},this.xConstraints,p,function(b){return b.bounds.setXCentre(m[b.variable.index]=b.variable.position())},function(b){var w=m[b.minVar.index]=b.minVar.position(),C=m[b.maxVar.index]=b.maxVar.position(),E=b.padding/2;b.bounds.x=w-E,b.bounds.X=C+E})},c.prototype.yProject=function(h,f,m){!this.rootGroup&&!this.yConstraints||this.project(h,f,f,m,function(b){return b.py},this.yConstraints,x,function(b){return b.bounds.setYCentre(m[b.variable.index]=b.variable.position())},function(b){var w=m[b.minVar.index]=b.minVar.position(),C=m[b.maxVar.index]=b.maxVar.position(),E=b.padding/2;b.bounds.y=w-E,b.bounds.Y=C+E})},c.prototype.projectFunctions=function(){var h=this;return[function(f,m,b){return h.xProject(f,m,b)},function(f,m,b){return h.yProject(f,m,b)}]},c.prototype.project=function(h,f,m,b,w,C,E,S,M){this.setupVariablesAndBounds(h,f,b,w),this.rootGroup&&this.avoidOverlaps&&(F(this.rootGroup),C=C.concat(E(this.rootGroup))),this.solve(this.variables,C,m,b),this.nodes.forEach(S),this.rootGroup&&this.avoidOverlaps&&(this.groups.forEach(M),F(this.rootGroup))},c.prototype.solve=function(h,f,m,b){var w=new k.Solver(h,f);w.setStartingPositions(m),w.setDesiredPositions(b),w.solve()},c}();y.Projection=v},{"./rbtree":16,"./vpsc":19}],18:[function(u,g,y){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var T=u("./pqueue"),k=function(){function X(P,O){this.id=P,this.distance=O}return X}(),V=function(){function X(P){this.id=P,this.neighbours=[]}return X}(),F=function(){function X(P,O,H){this.node=P,this.prev=O,this.d=H}return X}(),G=function(){function X(P,O,H,q,B){this.n=P,this.es=O,this.neighbours=new Array(this.n);for(var j=this.n;j--;)this.neighbours[j]=new V(j);for(j=this.es.length;j--;){var U=this.es[j],i=H(U),r=q(U),e=B(U);this.neighbours[i].neighbours.push(new k(r,e)),this.neighbours[r].neighbours.push(new k(i,e))}}return X.prototype.DistanceMatrix=function(){for(var P=new Array(this.n),O=0;O<this.n;++O)P[O]=this.dijkstraNeighbours(O);return P},X.prototype.DistancesFromNode=function(P){return this.dijkstraNeighbours(P)},X.prototype.PathFromNodeToNode=function(P,O){return this.dijkstraNeighbours(P,O)},X.prototype.PathFromNodeToNodeWithPrevCost=function(P,O,H){var q=new T.PriorityQueue(function(x,l){return x.d<=l.d}),B=this.neighbours[P],j=new F(B,null,0),U={};for(q.push(j);!q.empty()&&(j=q.pop(),B=j.node,B.id!==O);)for(var i=B.neighbours.length;i--;){var r=B.neighbours[i],e=this.neighbours[r.id];if(!(j.prev&&e.id===j.prev.node.id)){var o=e.id+","+B.id;if(!(o in U&&U[o]<=j.d)){var s=j.prev?H(j.prev.node.id,B.id,e.id):0,d=j.d+r.distance+s;U[o]=d,q.push(new F(e,j,d))}}}for(var p=[];j.prev;)j=j.prev,p.push(j.node.id);return p},X.prototype.dijkstraNeighbours=function(P,O){O===void 0&&(O=-1);for(var H=new T.PriorityQueue(function(s,d){return s.d<=d.d}),q=this.neighbours.length,B=new Array(q);q--;){var j=this.neighbours[q];j.d=q===P?0:Number.POSITIVE_INFINITY,j.q=H.push(j)}for(;!H.empty();){var U=H.pop();if(B[U.id]=U.d,U.id===O){for(var i=[],r=U;typeof r.prev<"u";)i.push(r.prev.id),r=r.prev;return i}for(q=U.neighbours.length;q--;){var e=U.neighbours[q],r=this.neighbours[e.id],o=U.d+e.distance;U.d!==Number.MAX_VALUE&&r.d>o&&(r.d=o,r.prev=U,H.reduceKey(r.q,r,function(d,p){return d.q=p}))}}return B},X}();y.Calculator=G},{"./pqueue":15}],19:[function(u,g,y){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var T=function(){function O(H){this.scale=H,this.AB=0,this.AD=0,this.A2=0}return O.prototype.addVariable=function(H){var q=this.scale/H.scale,B=H.offset/H.scale,j=H.weight;this.AB+=j*q*B,this.AD+=j*q*H.desiredPosition,this.A2+=j*q*q},O.prototype.getPosn=function(){return(this.AD-this.AB)/this.A2},O}();y.PositionStats=T;var k=function(){function O(H,q,B,j){j===void 0&&(j=!1),this.left=H,this.right=q,this.gap=B,this.equality=j,this.active=!1,this.unsatisfiable=!1,this.left=H,this.right=q,this.gap=B,this.equality=j}return O.prototype.slack=function(){return this.unsatisfiable?Number.MAX_VALUE:this.right.scale*this.right.position()-this.gap-this.left.scale*this.left.position()},O}();y.Constraint=k;var V=function(){function O(H,q,B){q===void 0&&(q=1),B===void 0&&(B=1),this.desiredPosition=H,this.weight=q,this.scale=B,this.offset=0}return O.prototype.dfdv=function(){return 2*this.weight*(this.position()-this.desiredPosition)},O.prototype.position=function(){return(this.block.ps.scale*this.block.posn+this.offset)/this.scale},O.prototype.visitNeighbours=function(H,q){var B=function(j,U){return j.active&&H!==U&&q(j,U)};this.cOut.forEach(function(j){return B(j,j.right)}),this.cIn.forEach(function(j){return B(j,j.left)})},O}();y.Variable=V;var F=function(){function O(H){this.vars=[],H.offset=0,this.ps=new T(H.scale),this.addVariable(H)}return O.prototype.addVariable=function(H){H.block=this,this.vars.push(H),this.ps.addVariable(H),this.posn=this.ps.getPosn()},O.prototype.updateWeightedPosition=function(){this.ps.AB=this.ps.AD=this.ps.A2=0;for(var H=0,q=this.vars.length;H<q;++H)this.ps.addVariable(this.vars[H]);this.posn=this.ps.getPosn()},O.prototype.compute_lm=function(H,q,B){var j=this,U=H.dfdv();return H.visitNeighbours(q,function(i,r){var e=j.compute_lm(r,H,B);r===i.right?(U+=e*i.left.scale,i.lm=e):(U+=e*i.right.scale,i.lm=-e),B(i)}),U/H.scale},O.prototype.populateSplitBlock=function(H,q){var B=this;H.visitNeighbours(q,function(j,U){U.offset=H.offset+(U===j.right?j.gap:-j.gap),B.addVariable(U),B.populateSplitBlock(U,H)})},O.prototype.traverse=function(H,q,B,j){var U=this;B===void 0&&(B=this.vars[0]),j===void 0&&(j=null),B.visitNeighbours(j,function(i,r){q.push(H(i)),U.traverse(H,q,r,B)})},O.prototype.findMinLM=function(){var H=null;return this.compute_lm(this.vars[0],null,function(q){!q.equality&&(H===null||q.lm<H.lm)&&(H=q)}),H},O.prototype.findMinLMBetween=function(H,q){this.compute_lm(H,null,function(){});var B=null;return this.findPath(H,null,q,function(j,U){!j.equality&&j.right===U&&(B===null||j.lm<B.lm)&&(B=j)}),B},O.prototype.findPath=function(H,q,B,j){var U=this,i=!1;return H.visitNeighbours(q,function(r,e){!i&&(e===B||U.findPath(e,H,B,j))&&(i=!0,j(r,e))}),i},O.prototype.isActiveDirectedPathBetween=function(H,q){if(H===q)return!0;for(var B=H.cOut.length;B--;){var j=H.cOut[B];if(j.active&&this.isActiveDirectedPathBetween(j.right,q))return!0}return!1},O.split=function(H){return H.active=!1,[O.createSplitBlock(H.left),O.createSplitBlock(H.right)]},O.createSplitBlock=function(H){var q=new O(H);return q.populateSplitBlock(H,null),q},O.prototype.splitBetween=function(H,q){var B=this.findMinLMBetween(H,q);if(B!==null){var j=O.split(B);return{constraint:B,lb:j[0],rb:j[1]}}return null},O.prototype.mergeAcross=function(H,q,B){q.active=!0;for(var j=0,U=H.vars.length;j<U;++j){var i=H.vars[j];i.offset+=B,this.addVariable(i)}this.posn=this.ps.getPosn()},O.prototype.cost=function(){for(var H=0,q=this.vars.length;q--;){var B=this.vars[q],j=B.position()-B.desiredPosition;H+=j*j*B.weight}return H},O}();y.Block=F;var G=function(){function O(H){this.vs=H;var q=H.length;for(this.list=new Array(q);q--;){var B=new F(H[q]);this.list[q]=B,B.blockInd=q}}return O.prototype.cost=function(){for(var H=0,q=this.list.length;q--;)H+=this.list[q].cost();return H},O.prototype.insert=function(H){H.blockInd=this.list.length,this.list.push(H)},O.prototype.remove=function(H){var q=this.list.length-1,B=this.list[q];this.list.length=q,H!==B&&(this.list[H.blockInd]=B,B.blockInd=H.blockInd)},O.prototype.merge=function(H){var q=H.left.block,B=H.right.block,j=H.right.offset-H.left.offset-H.gap;q.vars.length<B.vars.length?(B.mergeAcross(q,H,j),this.remove(q)):(q.mergeAcross(B,H,-j),this.remove(B))},O.prototype.forEach=function(H){this.list.forEach(H)},O.prototype.updateBlockPositions=function(){this.list.forEach(function(H){return H.updateWeightedPosition()})},O.prototype.split=function(H){var q=this;this.updateBlockPositions(),this.list.forEach(function(B){var j=B.findMinLM();j!==null&&j.lm<X.LAGRANGIAN_TOLERANCE&&(B=j.left.block,F.split(j).forEach(function(U){return q.insert(U)}),q.remove(B),H.push(j))})},O}();y.Blocks=G;var X=function(){function O(H,q){this.vs=H,this.cs=q,this.vs=H,H.forEach(function(B){B.cIn=[],B.cOut=[]}),this.cs=q,q.forEach(function(B){B.left.cOut.push(B),B.right.cIn.push(B)}),this.inactive=q.map(function(B){return B.active=!1,B}),this.bs=null}return O.prototype.cost=function(){return this.bs.cost()},O.prototype.setStartingPositions=function(H){this.inactive=this.cs.map(function(q){return q.active=!1,q}),this.bs=new G(this.vs),this.bs.forEach(function(q,B){return q.posn=H[B]})},O.prototype.setDesiredPositions=function(H){this.vs.forEach(function(q,B){return q.desiredPosition=H[B]})},O.prototype.mostViolated=function(){for(var H=Number.MAX_VALUE,q=null,B=this.inactive,j=B.length,U=j,i=0;i<j;++i){var r=B[i];if(!r.unsatisfiable){var e=r.slack();if((r.equality||e<H)&&(H=e,q=r,U=i,r.equality))break}}return U!==j&&(H<O.ZERO_UPPERBOUND&&!q.active||q.equality)&&(B[U]=B[j-1],B.length=j-1),q},O.prototype.satisfy=function(){this.bs==null&&(this.bs=new G(this.vs)),this.bs.split(this.inactive);for(var H=null;(H=this.mostViolated())&&(H.equality||H.slack()<O.ZERO_UPPERBOUND&&!H.active);){var q=H.left.block,B=H.right.block;if(q!==B)this.bs.merge(H);else{if(q.isActiveDirectedPathBetween(H.right,H.left)){H.unsatisfiable=!0;continue}var j=q.splitBetween(H.left,H.right);if(j!==null)this.bs.insert(j.lb),this.bs.insert(j.rb),this.bs.remove(q),this.inactive.push(j.constraint);else{H.unsatisfiable=!0;continue}H.slack()>=0?this.inactive.push(H):this.bs.merge(H)}}},O.prototype.solve=function(){this.satisfy();for(var H=Number.MAX_VALUE,q=this.bs.cost();Math.abs(H-q)>1e-4;)this.satisfy(),H=q,q=this.bs.cost();return q},O.LAGRANGIAN_TOLERANCE=-1e-4,O.ZERO_UPPERBOUND=-1e-10,O}();y.Solver=X;function P(O,H,q){for(var B=O.map(function(v){return new V(v.desiredCenter)}),j=[],U=O.length,i=0;i<U-1;i++){var r=O[i],e=O[i+1];j.push(new k(B[i],B[i+1],(r.size+e.size)/2))}var o=B[0],s=B[U-1],d=O[0].size/2,p=O[U-1].size/2,x=null,l=null;H&&(x=new V(H,o.weight*1e3),B.push(x),j.push(new k(x,o,d))),q&&(l=new V(q,s.weight*1e3),B.push(l),j.push(new k(s,l,p)));var _=new X(B,j);return _.solve(),{newCenters:B.slice(0,O.length).map(function(v){return v.position()}),lowerBound:x?x.position():o.position()-d,upperBound:l?l.position():s.position()+p}}y.removeOverlapInOneDimension=P},{}]},{},[1])(1)})});var i4=ys((R1,k1)=>{(function(t,n){typeof R1=="object"&&typeof k1<"u"?k1.exports=n():typeof define=="function"&&define.amd?define(n):t.rgbcolor=n()})(R1,function(){"use strict";var t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(V){return[parseInt(V[1],10),parseInt(V[2],10),parseInt(V[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(V){return[parseInt(V[1],16),parseInt(V[2],16),parseInt(V[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(V){return[parseInt(V[1]+V[1],16),parseInt(V[2]+V[2],16),parseInt(V[3]+V[3],16)]}}],a=function(){function k(V,F){var G=[],X=!0,P=!1,O=void 0;try{for(var H=V[Symbol.iterator](),q;!(X=(q=H.next()).done)&&(G.push(q.value),!(F&&G.length===F));X=!0);}catch(B){P=!0,O=B}finally{try{!X&&H.return&&H.return()}finally{if(P)throw O}}return G}return function(V,F){if(Array.isArray(V))return V;if(Symbol.iterator in Object(V))return k(V,F);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function k(V,F){for(var G=0;G<F.length;G++){var X=F[G];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(V,X.key,X)}}return function(V,F,G){return F&&k(V.prototype,F),G&&k(V,G),V}}();function g(k,V){if(!(k instanceof V))throw new TypeError("Cannot call a class as a function")}var y=function(){function k(V){g(this,k);var F=V;if(this.ok=!1,typeof F=="string"){F.charAt(0)==="#"&&(F=F.substr(1,6)),F=F.replace(/ /g,"").toLowerCase(),Object.prototype.hasOwnProperty.call(t,F)&&(F=t[F]);for(var G=0;G<n.length;G+=1){var X=n[G],P=X.re.exec(F);if(P){var O=X.process(P),H=a(O,3);this.r=H[0],this.g=H[1],this.b=H[2],this.ok=!0}}this.r<0||Number.isNaN(this.r)||this.r===void 0?this.r=0:this.r>255&&(this.r=255),this.g<0||Number.isNaN(this.g)||this.g===void 0?this.g=0:this.g>255&&(this.g=255),this.b<0||Number.isNaN(this.b)||this.b===void 0?this.b=0:this.b>255&&(this.b=255)}}return u(k,[{key:"isValid",value:function(){return this.ok}},{key:"rgb",value:function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"}},{key:"hex",value:function(){var F=this.r.toString(16),G=this.g.toString(16),X=this.b.toString(16);return F.length===1&&(F="0"+F),G.length===1&&(G="0"+G),X.length===1&&(X="0"+X),"#"+F+G+X}},{key:"channels",value:function(){return{r:this.r,g:this.g,b:this.b}}}]),k}();function T(k){return new y(k)}return T})});var Im=ys((a0e,o4)=>{function Ua(t,n){this.x=t||0,this.y=n||0,Object.freeze(this)}Ua.prototype.distance=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))};Ua.prototype.manhattanDistance=function(t){var n=this.sub(t).abs();return n.x+n.y};Ua.prototype.abs=function(){return new Ua(Math.abs(this.x),Math.abs(this.y))};Ua.prototype.equals=function(t){return this.x===t.x&&this.y===t.y};Ua.prototype.add=function(t){return new Ua(this.x+t.x,this.y+t.y)};Ua.prototype.sub=function(t){return new Ua(this.x-t.x,this.y-t.y)};o4.exports=Ua});var P1=ys((s0e,a4)=>{var ri=Im();function qt(t){arguments.length>0&&this.init(t)}qt.prototype.init=function(t){this.status=t,this.points=new Array};qt.prototype.appendPoint=function(t){this.points.push(t)};qt.prototype.appendPoints=function(t){this.points=this.points.concat(t)};qt.intersectShapes=function(t,n){var a=t.getIntersectionParams(),u=n.getIntersectionParams(),g;if(a!=null&&u!=null)if(a.name=="Path")g=qt.intersectPathShape(t,n);else if(u.name=="Path")g=qt.intersectPathShape(n,t);else{var y,T;if(a.name<u.name?(y="intersect"+a.name+u.name,T=a.params.concat(u.params)):(y="intersect"+u.name+a.name,T=u.params.concat(a.params)),!(y in qt))throw new Error("Intersection not available: "+y);g=qt[y].apply(null,T)}else g=new qt("No Intersection");return g};qt.intersectPathShape=function(t,n){return t.intersectShape(n)};qt.intersectBezier2Bezier2=function(t,n,a,u,g,y){var T,k,V,F,G,X,P,O,H=new qt("No Intersection"),q;if(T=n.multiply(-2),V=t.add(T.add(a)),T=t.multiply(-2),k=n.multiply(2),F=T.add(k),G=new ri(t.x,t.y),T=g.multiply(-2),X=u.add(T.add(y)),T=u.multiply(-2),k=g.multiply(2),P=T.add(k),O=new ri(u.x,u.y),V.y==0){var B=V.x*(G.y-O.y),j=B-F.x*F.y,U=B+j,i=F.y*F.y;q=new Polynomial(V.x*X.y*X.y,2*V.x*P.y*X.y,V.x*P.y*P.y-X.x*i-X.y*B-X.y*j,-P.x*i-P.y*B-P.y*j,(G.x-O.x)*i+(G.y-O.y)*j)}else{var B=V.x*X.y-V.y*X.x,j=V.x*P.y-P.x*V.y,U=F.x*V.y-F.y*V.x,i=G.y-O.y,r=V.y*(G.x-O.x)-V.x*i,e=-F.y*U+V.y*r,o=U*U;q=new Polynomial(B*B,2*B*j,(-X.y*o+V.y*j*j+V.y*B*r+B*e)/V.y,(-P.y*o+V.y*j*r+j*e)/V.y,(i*o+r*e)/V.y)}for(var s=q.getRoots(),d=0;d<s.length;d++){var p=s[d];if(0<=p&&p<=1){var x=new Polynomial(V.x,F.x,G.x-O.x-p*P.x-p*p*X.x).getRoots(),l=new Polynomial(V.y,F.y,G.y-O.y-p*P.y-p*p*X.y).getRoots();if(x.length>0&&l.length>0){var _=1e-4;e:for(var v=0;v<x.length;v++){var c=x[v];if(0<=c&&c<=1){for(var h=0;h<l.length;h++)if(Math.abs(c-l[h])<_){H.points.push(X.multiply(p*p).add(P.multiply(p).add(O)));break e}}}}}}return H.points.length>0&&(H.status="Intersection"),H};qt.intersectBezier2Bezier3=function(t,n,a,u,g,y,T){var k,V,F,G,X,P,O,H,q,B,j,U=new qt("No Intersection");k=n.multiply(-2),X=t.add(k.add(a)),k=t.multiply(-2),V=n.multiply(2),P=k.add(V),O=new ri(t.x,t.y),k=u.multiply(-1),V=g.multiply(3),F=y.multiply(-3),G=k.add(V.add(F.add(T))),H=new Vector2D(G.x,G.y),k=u.multiply(3),V=g.multiply(-6),F=y.multiply(3),G=k.add(V.add(F)),q=new Vector2D(G.x,G.y),k=u.multiply(-3),V=g.multiply(3),F=k.add(V),B=new Vector2D(F.x,F.y),j=new Vector2D(u.x,u.y);for(var i=O.x*O.x,r=O.y*O.y,e=P.x*P.x,o=P.y*P.y,s=X.x*X.x,d=X.y*X.y,p=j.x*j.x,x=j.y*j.y,l=B.x*B.x,_=B.y*B.y,v=q.x*q.x,c=q.y*q.y,h=H.x*H.x,f=H.y*H.y,m=new Polynomial(-2*X.x*X.y*H.x*H.y+s*f+d*h,-2*X.x*X.y*q.x*H.y-2*X.x*X.y*q.y*H.x+2*d*q.x*H.x+2*s*q.y*H.y,-2*X.x*B.x*X.y*H.y-2*X.x*X.y*B.y*H.x-2*X.x*X.y*q.x*q.y+2*B.x*d*H.x+d*v+s*(2*B.y*H.y+c),2*O.x*X.x*X.y*H.y+2*O.y*X.x*X.y*H.x+P.x*P.y*X.x*H.y+P.x*P.y*X.y*H.x-2*j.x*X.x*X.y*H.y-2*X.x*j.y*X.y*H.x-2*X.x*B.x*X.y*q.y-2*X.x*X.y*B.y*q.x-2*O.x*d*H.x-2*O.y*s*H.y+2*j.x*d*H.x+2*B.x*d*q.x-o*X.x*H.x-e*X.y*H.y+s*(2*j.y*H.y+2*B.y*q.y),2*O.x*X.x*X.y*q.y+2*O.y*X.x*X.y*q.x+P.x*P.y*X.x*q.y+P.x*P.y*X.y*q.x-2*j.x*X.x*X.y*q.y-2*X.x*j.y*X.y*q.x-2*X.x*B.x*X.y*B.y-2*O.x*d*q.x-2*O.y*s*q.y+2*j.x*d*q.x-o*X.x*q.x-e*X.y*q.y+l*d+s*(2*j.y*q.y+_),2*O.x*X.x*X.y*B.y+2*O.y*X.x*B.x*X.y+P.x*P.y*X.x*B.y+P.x*P.y*B.x*X.y-2*j.x*X.x*X.y*B.y-2*X.x*j.y*B.x*X.y-2*O.x*B.x*d-2*O.y*s*B.y+2*j.x*B.x*d-o*X.x*B.x-e*X.y*B.y+2*s*j.y*B.y,-2*O.x*O.y*X.x*X.y-O.x*P.x*P.y*X.y-O.y*P.x*P.y*X.x+2*O.x*X.x*j.y*X.y+2*O.y*j.x*X.x*X.y+P.x*j.x*P.y*X.y+P.x*P.y*X.x*j.y-2*j.x*X.x*j.y*X.y-2*O.x*j.x*d+O.x*o*X.x+O.y*e*X.y-2*O.y*s*j.y-j.x*o*X.x-e*j.y*X.y+i*d+r*s+p*d+s*x),b=m.getRootsInInterval(0,1),w=0;w<b.length;w++){var C=b[w],E=new Polynomial(X.x,P.x,O.x-j.x-C*B.x-C*C*q.x-C*C*C*H.x).getRoots(),S=new Polynomial(X.y,P.y,O.y-j.y-C*B.y-C*C*q.y-C*C*C*H.y).getRoots();if(E.length>0&&S.length>0){var M=1e-4;e:for(var A=0;A<E.length;A++){var R=E[A];if(0<=R&&R<=1){for(var D=0;D<S.length;D++)if(Math.abs(R-S[D])<M){U.points.push(H.multiply(C*C*C).add(q.multiply(C*C).add(B.multiply(C).add(j))));break e}}}}}return U.points.length>0&&(U.status="Intersection"),U};qt.intersectBezier2Circle=function(t,n,a,u,g){return qt.intersectBezier2Ellipse(t,n,a,u,g,g)};qt.intersectBezier2Ellipse=function(t,n,a,u,g,y){var T,k,V,F,G,X=new qt("No Intersection");T=n.multiply(-2),V=t.add(T.add(a)),T=t.multiply(-2),k=n.multiply(2),F=T.add(k),G=new ri(t.x,t.y);for(var P=g*g,O=y*y,H=new Polynomial(O*V.x*V.x+P*V.y*V.y,2*(O*V.x*F.x+P*V.y*F.y),O*(2*V.x*G.x+F.x*F.x)+P*(2*V.y*G.y+F.y*F.y)-2*(O*u.x*V.x+P*u.y*V.y),2*(O*F.x*(G.x-u.x)+P*F.y*(G.y-u.y)),O*(G.x*G.x+u.x*u.x)+P*(G.y*G.y+u.y*u.y)-2*(O*u.x*G.x+P*u.y*G.y)-P*O).getRoots(),q=0;q<H.length;q++){var B=H[q];0<=B&&B<=1&&X.points.push(V.multiply(B*B).add(F.multiply(B).add(G)))}return X.points.length>0&&(X.status="Intersection"),X};qt.intersectBezier2Line=function(t,n,a,u,g){var y,T,k,V,F,G,X,P=u.min(g),O=u.max(g),H=new qt("No Intersection");y=n.multiply(-2),k=t.add(y.add(a)),y=t.multiply(-2),T=n.multiply(2),V=y.add(T),F=new ri(t.x,t.y),X=new Vector2D(u.y-g.y,g.x-u.x),G=u.x*g.y-g.x*u.y,roots=new Polynomial(X.dot(k),X.dot(V),X.dot(F)+G).getRoots();for(var q=0;q<roots.length;q++){var B=roots[q];if(0<=B&&B<=1){var j=t.lerp(n,B),U=n.lerp(a,B),i=j.lerp(U,B);u.x==g.x?P.y<=i.y&&i.y<=O.y&&(H.status="Intersection",H.appendPoint(i)):u.y==g.y?P.x<=i.x&&i.x<=O.x&&(H.status="Intersection",H.appendPoint(i)):i.gte(P)&&i.lte(O)&&(H.status="Intersection",H.appendPoint(i))}}return H};qt.intersectBezier2Polygon=function(t,n,a,u){for(var g=new qt("No Intersection"),y=u.length,T=0;T<y;T++){var k=u[T],V=u[(T+1)%y],F=qt.intersectBezier2Line(t,n,a,k,V);g.appendPoints(F.points)}return g.points.length>0&&(g.status="Intersection"),g};qt.intersectBezier2Rectangle=function(t,n,a,u,g){var y=u.min(g),T=u.max(g),k=new ri(T.x,y.y),V=new ri(y.x,T.y),F=qt.intersectBezier2Line(t,n,a,y,k),G=qt.intersectBezier2Line(t,n,a,k,T),X=qt.intersectBezier2Line(t,n,a,T,V),P=qt.intersectBezier2Line(t,n,a,V,y),O=new qt("No Intersection");return O.appendPoints(F.points),O.appendPoints(G.points),O.appendPoints(X.points),O.appendPoints(P.points),O.points.length>0&&(O.status="Intersection"),O};qt.intersectBezier3Bezier3=function(t,n,a,u,g,y,T,k){var V,F,G,X,P,O,H,q,B,j,U,i,r=new qt("No Intersection");V=t.multiply(-1),F=n.multiply(3),G=a.multiply(-3),X=V.add(F.add(G.add(u))),P=new Vector2D(X.x,X.y),V=t.multiply(3),F=n.multiply(-6),G=a.multiply(3),X=V.add(F.add(G)),O=new Vector2D(X.x,X.y),V=t.multiply(-3),F=n.multiply(3),G=V.add(F),H=new Vector2D(G.x,G.y),q=new Vector2D(t.x,t.y),V=g.multiply(-1),F=y.multiply(3),G=T.multiply(-3),X=V.add(F.add(G.add(k))),B=new Vector2D(X.x,X.y),V=g.multiply(3),F=y.multiply(-6),G=T.multiply(3),X=V.add(F.add(G)),j=new Vector2D(X.x,X.y),V=g.multiply(-3),F=y.multiply(3),G=V.add(F),U=new Vector2D(G.x,G.y),i=new Vector2D(g.x,g.y);for(var e=q.x*q.x,o=q.x*q.x*q.x,s=q.y*q.y,d=q.y*q.y*q.y,p=H.x*H.x,x=H.x*H.x*H.x,l=H.y*H.y,_=H.y*H.y*H.y,v=O.x*O.x,c=O.x*O.x*O.x,h=O.y*O.y,f=O.y*O.y*O.y,m=P.x*P.x,b=P.x*P.x*P.x,w=P.y*P.y,C=P.y*P.y*P.y,E=i.x*i.x,S=i.x*i.x*i.x,M=i.y*i.y,A=i.y*i.y*i.y,R=U.x*U.x,D=U.x*U.x*U.x,N=U.y*U.y,I=j.x*j.x,L=j.x*j.x*j.x,Y=j.y*j.y,J=B.x*B.x,ie=B.x*B.x*B.x,K=B.y*B.y,Q=B.y*B.y*B.y,ne=new Polynomial(-b*Q+C*ie-3*P.x*w*J*B.y+3*m*P.y*B.x*K,-6*P.x*j.x*w*B.x*B.y+6*m*P.y*j.y*B.x*B.y+3*j.x*C*J-3*b*j.y*K-3*P.x*w*j.y*J+3*m*j.x*P.y*K,-6*U.x*P.x*w*B.x*B.y-6*P.x*j.x*w*j.y*B.x+6*m*j.x*P.y*j.y*B.y+3*U.x*C*J+3*I*C*B.x+3*U.x*m*P.y*K-3*P.x*U.y*w*J-3*P.x*I*w*B.y+m*P.y*B.x*(6*U.y*B.y+3*Y)+b*(-U.y*K-2*Y*B.y-B.y*(2*U.y*B.y+Y)),H.x*O.y*P.x*P.y*B.x*B.y-H.y*O.x*P.x*P.y*B.x*B.y+6*U.x*j.x*C*B.x+3*H.x*O.x*P.x*P.y*K+6*q.x*P.x*w*B.x*B.y-3*H.x*O.x*w*B.x*B.y-3*H.y*O.y*P.x*P.y*J-6*q.y*m*P.y*B.x*B.y-6*i.x*P.x*w*B.x*B.y+3*H.y*O.y*m*B.x*B.y-2*O.x*h*P.x*B.x*B.y-6*U.x*P.x*j.x*w*B.y-6*U.x*P.x*w*j.y*B.x-6*P.x*U.y*j.x*w*B.x+6*U.x*m*P.y*j.y*B.y+2*v*O.y*P.y*B.x*B.y+L*C-3*q.x*C*J+3*q.y*b*K+3*i.x*C*J+f*P.x*J-c*P.y*K-3*q.x*m*P.y*K+3*q.y*P.x*w*J-2*H.x*O.y*m*K+H.x*O.y*w*J-H.y*O.x*m*K+2*H.y*O.x*w*J+3*i.x*m*P.y*K-O.x*h*P.y*J-3*i.y*P.x*w*J+v*O.y*P.x*K-3*P.x*I*w*j.y+m*P.y*B.x*(6*i.y*B.y+6*U.y*j.y)+m*j.x*P.y*(6*U.y*B.y+3*Y)+b*(-2*U.y*j.y*B.y-i.y*K-j.y*(2*U.y*B.y+Y)-B.y*(2*i.y*B.y+2*U.y*j.y)),6*H.x*O.x*P.x*P.y*j.y*B.y+H.x*O.y*P.x*j.x*P.y*B.y+H.x*O.y*P.x*P.y*j.y*B.x-H.y*O.x*P.x*j.x*P.y*B.y-H.y*O.x*P.x*P.y*j.y*B.x-6*H.y*O.y*P.x*j.x*P.y*B.x-6*q.x*j.x*C*B.x+6*i.x*j.x*C*B.x+6*q.y*b*j.y*B.y+2*f*P.x*j.x*B.x-2*c*P.y*j.y*B.y+6*q.x*P.x*j.x*w*B.y+6*q.x*P.x*w*j.y*B.x+6*q.y*P.x*j.x*w*B.x-3*H.x*O.x*j.x*w*B.y-3*H.x*O.x*w*j.y*B.x+2*H.x*O.y*j.x*w*B.x+4*H.y*O.x*j.x*w*B.x-6*q.x*m*P.y*j.y*B.y-6*q.y*m*j.x*P.y*B.y-6*q.y*m*P.y*j.y*B.x-4*H.x*O.y*m*j.y*B.y-6*i.x*P.x*j.x*w*B.y-6*i.x*P.x*w*j.y*B.x-2*H.y*O.x*m*j.y*B.y+3*H.y*O.y*m*j.x*B.y+3*H.y*O.y*m*j.y*B.x-2*O.x*h*P.x*j.x*B.y-2*O.x*h*P.x*j.y*B.x-2*O.x*h*j.x*P.y*B.x-6*i.y*P.x*j.x*w*B.x-6*U.x*P.x*U.y*w*B.x-6*U.x*P.x*j.x*w*j.y+6*i.x*m*P.y*j.y*B.y+2*v*O.y*P.x*j.y*B.y+2*v*O.y*j.x*P.y*B.y+2*v*O.y*P.y*j.y*B.x+3*U.x*I*C+3*R*C*B.x-3*P.x*U.y*I*w-3*R*P.x*w*B.y+m*j.x*P.y*(6*i.y*B.y+6*U.y*j.y)+m*P.y*B.x*(6*i.y*j.y+3*N)+U.x*m*P.y*(6*U.y*B.y+3*Y)+b*(-2*i.y*j.y*B.y-B.y*(2*i.y*j.y+N)-U.y*(2*U.y*B.y+Y)-j.y*(2*i.y*B.y+2*U.y*j.y)),H.x*U.x*O.y*P.x*P.y*B.y+H.x*O.y*P.x*U.y*P.y*B.x+H.x*O.y*P.x*j.x*P.y*j.y-H.y*O.x*U.x*P.x*P.y*B.y-H.y*O.x*P.x*U.y*P.y*B.x-H.y*O.x*P.x*j.x*P.y*j.y-6*H.y*U.x*O.y*P.x*P.y*B.x-6*q.x*U.x*C*B.x+6*i.x*U.x*C*B.x+2*U.x*f*P.x*B.x+6*q.x*U.x*P.x*w*B.y+6*q.x*P.x*U.y*w*B.x+6*q.x*P.x*j.x*w*j.y+6*q.y*U.x*P.x*w*B.x-3*H.x*O.x*U.x*w*B.y-3*H.x*O.x*U.y*w*B.x-3*H.x*O.x*j.x*w*j.y+2*H.x*U.x*O.y*w*B.x+4*H.y*O.x*U.x*w*B.x-6*q.y*U.x*m*P.y*B.y-6*q.y*m*U.y*P.y*B.x-6*q.y*m*j.x*P.y*j.y-6*i.x*U.x*P.x*w*B.y-6*i.x*P.x*U.y*w*B.x-6*i.x*P.x*j.x*w*j.y+3*H.y*U.x*O.y*m*B.y-3*H.y*O.y*P.x*I*P.y+3*H.y*O.y*m*U.y*B.x+3*H.y*O.y*m*j.x*j.y-2*O.x*U.x*h*P.x*B.y-2*O.x*U.x*h*P.y*B.x-2*O.x*h*P.x*U.y*B.x-2*O.x*h*P.x*j.x*j.y-6*i.y*U.x*P.x*w*B.x-6*U.x*P.x*U.y*j.x*w+6*i.y*m*U.y*P.y*B.x+2*v*U.x*O.y*P.y*B.y+2*v*O.y*U.y*P.y*B.x+2*v*O.y*j.x*P.y*j.y-3*q.x*I*C+3*i.x*I*C+3*R*j.x*C+f*P.x*I+3*q.y*P.x*I*w+H.x*O.y*I*w+2*H.y*O.x*I*w-O.x*h*I*P.y-3*i.y*P.x*I*w-3*R*P.x*w*j.y+v*O.y*P.x*(2*U.y*B.y+Y)+H.x*O.x*P.x*P.y*(6*U.y*B.y+3*Y)+U.x*m*P.y*(6*i.y*B.y+6*U.y*j.y)+c*P.y*(-2*U.y*B.y-Y)+q.y*b*(6*U.y*B.y+3*Y)+H.y*O.x*m*(-2*U.y*B.y-Y)+H.x*O.y*m*(-4*U.y*B.y-2*Y)+q.x*m*P.y*(-6*U.y*B.y-3*Y)+m*j.x*P.y*(6*i.y*j.y+3*N)+i.x*m*P.y*(6*U.y*B.y+3*Y)+b*(-2*i.y*U.y*B.y-j.y*(2*i.y*j.y+N)-i.y*(2*U.y*B.y+Y)-U.y*(2*i.y*B.y+2*U.y*j.y)),-q.x*H.x*O.y*P.x*P.y*B.y+q.x*H.y*O.x*P.x*P.y*B.y+6*q.x*H.y*O.y*P.x*P.y*B.x-6*q.y*H.x*O.x*P.x*P.y*B.y-q.y*H.x*O.y*P.x*P.y*B.x+q.y*H.y*O.x*P.x*P.y*B.x+H.x*H.y*O.x*O.y*P.x*B.y-H.x*H.y*O.x*O.y*P.y*B.x+H.x*i.x*O.y*P.x*P.y*B.y+H.x*i.y*O.y*P.x*P.y*B.x+H.x*U.x*O.y*P.x*P.y*j.y+H.x*O.y*P.x*U.y*j.x*P.y-i.x*H.y*O.x*P.x*P.y*B.y-6*i.x*H.y*O.y*P.x*P.y*B.x-H.y*O.x*i.y*P.x*P.y*B.x-H.y*O.x*U.x*P.x*P.y*j.y-H.y*O.x*P.x*U.y*j.x*P.y-6*H.y*U.x*O.y*P.x*j.x*P.y-6*q.x*i.x*C*B.x-6*q.x*U.x*j.x*C-2*q.x*f*P.x*B.x+6*i.x*U.x*j.x*C+2*i.x*f*P.x*B.x+2*U.x*f*P.x*j.x+2*q.y*c*P.y*B.y-6*q.x*q.y*P.x*w*B.x+3*q.x*H.x*O.x*w*B.y-2*q.x*H.x*O.y*w*B.x-4*q.x*H.y*O.x*w*B.x+3*q.y*H.x*O.x*w*B.x+6*q.x*q.y*m*P.y*B.y+6*q.x*i.x*P.x*w*B.y-3*q.x*H.y*O.y*m*B.y+2*q.x*O.x*h*P.x*B.y+2*q.x*O.x*h*P.y*B.x+6*q.x*i.y*P.x*w*B.x+6*q.x*U.x*P.x*w*j.y+6*q.x*P.x*U.y*j.x*w+4*q.y*H.x*O.y*m*B.y+6*q.y*i.x*P.x*w*B.x+2*q.y*H.y*O.x*m*B.y-3*q.y*H.y*O.y*m*B.x+2*q.y*O.x*h*P.x*B.x+6*q.y*U.x*P.x*j.x*w-3*H.x*i.x*O.x*w*B.y+2*H.x*i.x*O.y*w*B.x+H.x*H.y*h*P.x*B.x-3*H.x*O.x*i.y*w*B.x-3*H.x*O.x*U.x*w*j.y-3*H.x*O.x*U.y*j.x*w+2*H.x*U.x*O.y*j.x*w+4*i.x*H.y*O.x*w*B.x+4*H.y*O.x*U.x*j.x*w-2*q.x*v*O.y*P.y*B.y-6*q.y*i.x*m*P.y*B.y-6*q.y*i.y*m*P.y*B.x-6*q.y*U.x*m*P.y*j.y-2*q.y*v*O.y*P.x*B.y-2*q.y*v*O.y*P.y*B.x-6*q.y*m*U.y*j.x*P.y-H.x*H.y*v*P.y*B.y-2*H.x*l*P.x*P.y*B.x+3*i.x*H.y*O.y*m*B.y-2*i.x*O.x*h*P.x*B.y-2*i.x*O.x*h*P.y*B.x-6*i.x*i.y*P.x*w*B.x-6*i.x*U.x*P.x*w*j.y-6*i.x*P.x*U.y*j.x*w+3*H.y*i.y*O.y*m*B.x+3*H.y*U.x*O.y*m*j.y+3*H.y*O.y*m*U.y*j.x-2*O.x*i.y*h*P.x*B.x-2*O.x*U.x*h*P.x*j.y-2*O.x*U.x*h*j.x*P.y-2*O.x*h*P.x*U.y*j.x-6*i.y*U.x*P.x*j.x*w-l*O.x*O.y*P.x*B.x+2*i.x*v*O.y*P.y*B.y+6*i.y*m*U.y*j.x*P.y+2*p*H.y*P.x*P.y*B.y+p*O.x*O.y*P.y*B.y+2*v*i.y*O.y*P.y*B.x+2*v*U.x*O.y*P.y*j.y+2*v*O.y*U.y*j.x*P.y+D*C+3*e*C*B.x-3*s*b*B.y+3*E*C*B.x+_*m*B.x-x*w*B.y-H.x*l*m*B.y+p*H.y*w*B.x-3*e*P.x*w*B.y+3*s*m*P.y*B.x-p*h*P.x*B.y+l*v*P.y*B.x-3*R*P.x*U.y*w-3*E*P.x*w*B.y+3*M*m*P.y*B.x+H.x*O.x*P.x*P.y*(6*i.y*B.y+6*U.y*j.y)+c*P.y*(-2*i.y*B.y-2*U.y*j.y)+q.y*b*(6*i.y*B.y+6*U.y*j.y)+H.y*O.x*m*(-2*i.y*B.y-2*U.y*j.y)+v*O.y*P.x*(2*i.y*B.y+2*U.y*j.y)+H.x*O.y*m*(-4*i.y*B.y-4*U.y*j.y)+q.x*m*P.y*(-6*i.y*B.y-6*U.y*j.y)+i.x*m*P.y*(6*i.y*B.y+6*U.y*j.y)+U.x*m*P.y*(6*i.y*j.y+3*N)+b*(-2*i.y*U.y*j.y-M*B.y-U.y*(2*i.y*j.y+N)-i.y*(2*i.y*B.y+2*U.y*j.y)),-q.x*H.x*O.y*P.x*P.y*j.y+q.x*H.y*O.x*P.x*P.y*j.y+6*q.x*H.y*O.y*P.x*j.x*P.y-6*q.y*H.x*O.x*P.x*P.y*j.y-q.y*H.x*O.y*P.x*j.x*P.y+q.y*H.y*O.x*P.x*j.x*P.y+H.x*H.y*O.x*O.y*P.x*j.y-H.x*H.y*O.x*O.y*j.x*P.y+H.x*i.x*O.y*P.x*P.y*j.y+H.x*i.y*O.y*P.x*j.x*P.y+H.x*U.x*O.y*P.x*U.y*P.y-i.x*H.y*O.x*P.x*P.y*j.y-6*i.x*H.y*O.y*P.x*j.x*P.y-H.y*O.x*i.y*P.x*j.x*P.y-H.y*O.x*U.x*P.x*U.y*P.y-6*q.x*i.x*j.x*C-2*q.x*f*P.x*j.x+2*i.x*f*P.x*j.x+2*q.y*c*P.y*j.y-6*q.x*q.y*P.x*j.x*w+3*q.x*H.x*O.x*w*j.y-2*q.x*H.x*O.y*j.x*w-4*q.x*H.y*O.x*j.x*w+3*q.y*H.x*O.x*j.x*w+6*q.x*q.y*m*P.y*j.y+6*q.x*i.x*P.x*w*j.y-3*q.x*H.y*O.y*m*j.y+2*q.x*O.x*h*P.x*j.y+2*q.x*O.x*h*j.x*P.y+6*q.x*i.y*P.x*j.x*w+6*q.x*U.x*P.x*U.y*w+4*q.y*H.x*O.y*m*j.y+6*q.y*i.x*P.x*j.x*w+2*q.y*H.y*O.x*m*j.y-3*q.y*H.y*O.y*m*j.x+2*q.y*O.x*h*P.x*j.x-3*H.x*i.x*O.x*w*j.y+2*H.x*i.x*O.y*j.x*w+H.x*H.y*h*P.x*j.x-3*H.x*O.x*i.y*j.x*w-3*H.x*O.x*U.x*U.y*w+4*i.x*H.y*O.x*j.x*w-2*q.x*v*O.y*P.y*j.y-6*q.y*i.x*m*P.y*j.y-6*q.y*i.y*m*j.x*P.y-6*q.y*U.x*m*U.y*P.y-2*q.y*v*O.y*P.x*j.y-2*q.y*v*O.y*j.x*P.y-H.x*H.y*v*P.y*j.y-2*H.x*l*P.x*j.x*P.y+3*i.x*H.y*O.y*m*j.y-2*i.x*O.x*h*P.x*j.y-2*i.x*O.x*h*j.x*P.y-6*i.x*i.y*P.x*j.x*w-6*i.x*U.x*P.x*U.y*w+3*H.y*i.y*O.y*m*j.x+3*H.y*U.x*O.y*m*U.y-2*O.x*i.y*h*P.x*j.x-2*O.x*U.x*h*P.x*U.y-l*O.x*O.y*P.x*j.x+2*i.x*v*O.y*P.y*j.y-3*H.y*R*O.y*P.x*P.y+6*i.y*U.x*m*U.y*P.y+2*p*H.y*P.x*P.y*j.y+p*O.x*O.y*P.y*j.y+2*v*i.y*O.y*j.x*P.y+2*v*U.x*O.y*U.y*P.y-3*q.x*R*C+3*i.x*R*C+3*e*j.x*C-3*s*b*j.y+3*E*j.x*C+R*f*P.x+_*m*j.x-x*w*j.y+3*q.y*R*P.x*w-H.x*l*m*j.y+H.x*R*O.y*w+2*H.y*O.x*R*w+p*H.y*j.x*w-O.x*R*h*P.y-3*i.y*R*P.x*w-3*e*P.x*w*j.y+3*s*m*j.x*P.y-p*h*P.x*j.y+l*v*j.x*P.y-3*E*P.x*w*j.y+3*M*m*j.x*P.y+v*O.y*P.x*(2*i.y*j.y+N)+H.x*O.x*P.x*P.y*(6*i.y*j.y+3*N)+c*P.y*(-2*i.y*j.y-N)+q.y*b*(6*i.y*j.y+3*N)+H.y*O.x*m*(-2*i.y*j.y-N)+H.x*O.y*m*(-4*i.y*j.y-2*N)+q.x*m*P.y*(-6*i.y*j.y-3*N)+i.x*m*P.y*(6*i.y*j.y+3*N)+b*(-2*i.y*N-M*j.y-i.y*(2*i.y*j.y+N)),-q.x*H.x*O.y*P.x*U.y*P.y+q.x*H.y*O.x*P.x*U.y*P.y+6*q.x*H.y*U.x*O.y*P.x*P.y-6*q.y*H.x*O.x*P.x*U.y*P.y-q.y*H.x*U.x*O.y*P.x*P.y+q.y*H.y*O.x*U.x*P.x*P.y-H.x*H.y*O.x*U.x*O.y*P.y+H.x*H.y*O.x*O.y*P.x*U.y+H.x*i.x*O.y*P.x*U.y*P.y+6*H.x*O.x*i.y*P.x*U.y*P.y+H.x*i.y*U.x*O.y*P.x*P.y-i.x*H.y*O.x*P.x*U.y*P.y-6*i.x*H.y*U.x*O.y*P.x*P.y-H.y*O.x*i.y*U.x*P.x*P.y-6*q.x*i.x*U.x*C-2*q.x*U.x*f*P.x+6*q.y*i.y*b*U.y+2*i.x*U.x*f*P.x+2*q.y*c*U.y*P.y-2*c*i.y*U.y*P.y-6*q.x*q.y*U.x*P.x*w+3*q.x*H.x*O.x*U.y*w-2*q.x*H.x*U.x*O.y*w-4*q.x*H.y*O.x*U.x*w+3*q.y*H.x*O.x*U.x*w+6*q.x*q.y*m*U.y*P.y+6*q.x*i.x*P.x*U.y*w-3*q.x*H.y*O.y*m*U.y+2*q.x*O.x*U.x*h*P.y+2*q.x*O.x*h*P.x*U.y+6*q.x*i.y*U.x*P.x*w+4*q.y*H.x*O.y*m*U.y+6*q.y*i.x*U.x*P.x*w+2*q.y*H.y*O.x*m*U.y-3*q.y*H.y*U.x*O.y*m+2*q.y*O.x*U.x*h*P.x-3*H.x*i.x*O.x*U.y*w+2*H.x*i.x*U.x*O.y*w+H.x*H.y*U.x*h*P.x-3*H.x*O.x*i.y*U.x*w+4*i.x*H.y*O.x*U.x*w-6*q.x*i.y*m*U.y*P.y-2*q.x*v*O.y*U.y*P.y-6*q.y*i.x*m*U.y*P.y-6*q.y*i.y*U.x*m*P.y-2*q.y*v*U.x*O.y*P.y-2*q.y*v*O.y*P.x*U.y-H.x*H.y*v*U.y*P.y-4*H.x*i.y*O.y*m*U.y-2*H.x*l*U.x*P.x*P.y+3*i.x*H.y*O.y*m*U.y-2*i.x*O.x*U.x*h*P.y-2*i.x*O.x*h*P.x*U.y-6*i.x*i.y*U.x*P.x*w-2*H.y*O.x*i.y*m*U.y+3*H.y*i.y*U.x*O.y*m-2*O.x*i.y*U.x*h*P.x-l*O.x*U.x*O.y*P.x+6*i.x*i.y*m*U.y*P.y+2*i.x*v*O.y*U.y*P.y+2*p*H.y*P.x*U.y*P.y+p*O.x*O.y*U.y*P.y+2*v*i.y*U.x*O.y*P.y+2*v*i.y*O.y*P.x*U.y+3*e*U.x*C-3*s*b*U.y+3*E*U.x*C+_*U.x*m-x*U.y*w-3*M*b*U.y-H.x*l*m*U.y+p*H.y*U.x*w-3*e*P.x*U.y*w+3*s*U.x*m*P.y-p*h*P.x*U.y+l*v*U.x*P.y-3*E*P.x*U.y*w+3*M*U.x*m*P.y,q.x*q.y*H.x*O.y*P.x*P.y-q.x*q.y*H.y*O.x*P.x*P.y+q.x*H.x*H.y*O.x*O.y*P.y-q.y*H.x*H.y*O.x*O.y*P.x-q.x*H.x*i.y*O.y*P.x*P.y+6*q.x*i.x*H.y*O.y*P.x*P.y+q.x*H.y*O.x*i.y*P.x*P.y-q.y*H.x*i.x*O.y*P.x*P.y-6*q.y*H.x*O.x*i.y*P.x*P.y+q.y*i.x*H.y*O.x*P.x*P.y-H.x*i.x*H.y*O.x*O.y*P.y+H.x*H.y*O.x*i.y*O.y*P.x+H.x*i.x*i.y*O.y*P.x*P.y-i.x*H.y*O.x*i.y*P.x*P.y-2*q.x*i.x*f*P.x+2*q.y*c*i.y*P.y-3*q.x*q.y*H.x*O.x*w-6*q.x*q.y*i.x*P.x*w+3*q.x*q.y*H.y*O.y*m-2*q.x*q.y*O.x*h*P.x-2*q.x*H.x*i.x*O.y*w-q.x*H.x*H.y*h*P.x+3*q.x*H.x*O.x*i.y*w-4*q.x*i.x*H.y*O.x*w+3*q.y*H.x*i.x*O.x*w+6*q.x*q.y*i.y*m*P.y+2*q.x*q.y*v*O.y*P.y+2*q.x*H.x*l*P.x*P.y+2*q.x*i.x*O.x*h*P.y+6*q.x*i.x*i.y*P.x*w-3*q.x*H.y*i.y*O.y*m+2*q.x*O.x*i.y*h*P.x+q.x*l*O.x*O.y*P.x+q.y*H.x*H.y*v*P.y+4*q.y*H.x*i.y*O.y*m-3*q.y*i.x*H.y*O.y*m+2*q.y*i.x*O.x*h*P.x+2*q.y*H.y*O.x*i.y*m+H.x*i.x*H.y*h*P.x-3*H.x*i.x*O.x*i.y*w-2*q.x*v*i.y*O.y*P.y-6*q.y*i.x*i.y*m*P.y-2*q.y*i.x*v*O.y*P.y-2*q.y*p*H.y*P.x*P.y-q.y*p*O.x*O.y*P.y-2*q.y*v*i.y*O.y*P.x-2*H.x*i.x*l*P.x*P.y-H.x*H.y*v*i.y*P.y+3*i.x*H.y*i.y*O.y*m-2*i.x*O.x*i.y*h*P.x-i.x*l*O.x*O.y*P.x+3*s*H.x*O.x*P.x*P.y+3*H.x*O.x*M*P.x*P.y+2*i.x*v*i.y*O.y*P.y-3*e*H.y*O.y*P.x*P.y+2*p*H.y*i.y*P.x*P.y+p*O.x*i.y*O.y*P.y-3*E*H.y*O.y*P.x*P.y-o*C+d*b+S*C-A*b-3*q.x*E*C-q.x*_*m+3*e*i.x*C+q.y*x*w+3*q.y*M*b+i.x*_*m+e*f*P.x-3*s*i.y*b-s*c*P.y+E*f*P.x-x*i.y*w-c*M*P.y-q.x*p*H.y*w+q.y*H.x*l*m-3*q.x*s*m*P.y-q.x*l*v*P.y+q.y*p*h*P.x-H.x*l*i.y*m+3*e*q.y*P.x*w+e*H.x*O.y*w+2*e*H.y*O.x*w-2*s*H.x*O.y*m-s*H.y*O.x*m+p*i.x*H.y*w-3*q.x*M*m*P.y+3*q.y*E*P.x*w+H.x*E*O.y*w-2*H.x*M*O.y*m+i.x*l*v*P.y-H.y*O.x*M*m-e*O.x*h*P.y-3*e*i.y*P.x*w+3*s*i.x*m*P.y+s*v*O.y*P.x-p*i.y*h*P.x+2*E*H.y*O.x*w+3*i.x*M*m*P.y-E*O.x*h*P.y-3*E*i.y*P.x*w+v*M*O.y*P.x),ue=ne.getRootsInInterval(0,1),fe=0;fe<ue.length;fe++){var ge=ue[fe],ye=new Polynomial(P.x,O.x,H.x,q.x-i.x-ge*U.x-ge*ge*j.x-ge*ge*ge*B.x).getRoots(),pe=new Polynomial(P.y,O.y,H.y,q.y-i.y-ge*U.y-ge*ge*j.y-ge*ge*ge*B.y).getRoots();if(ye.length>0&&pe.length>0){var de=1e-4;e:for(var he=0;he<ye.length;he++){var _e=ye[he];if(0<=_e&&_e<=1){for(var ve=0;ve<pe.length;ve++)if(Math.abs(_e-pe[ve])<de){r.points.push(B.multiply(ge*ge*ge).add(j.multiply(ge*ge).add(U.multiply(ge).add(i))));break e}}}}}return r.points.length>0&&(r.status="Intersection"),r};qt.intersectBezier3Circle=function(t,n,a,u,g,y){return qt.intersectBezier3Ellipse(t,n,a,u,g,y,y)};qt.intersectBezier3Ellipse=function(t,n,a,u,g,y,T){var k,V,F,G,X,P,O,H,q=new qt("No Intersection");k=t.multiply(-1),V=n.multiply(3),F=a.multiply(-3),G=k.add(V.add(F.add(u))),X=new Vector2D(G.x,G.y),k=t.multiply(3),V=n.multiply(-6),F=a.multiply(3),G=k.add(V.add(F)),P=new Vector2D(G.x,G.y),k=t.multiply(-3),V=n.multiply(3),F=k.add(V),O=new Vector2D(F.x,F.y),H=new Vector2D(t.x,t.y);for(var B=y*y,j=T*T,U=new Polynomial(X.x*X.x*j+X.y*X.y*B,2*(X.x*P.x*j+X.y*P.y*B),2*(X.x*O.x*j+X.y*O.y*B)+P.x*P.x*j+P.y*P.y*B,2*X.x*j*(H.x-g.x)+2*X.y*B*(H.y-g.y)+2*(P.x*O.x*j+P.y*O.y*B),2*P.x*j*(H.x-g.x)+2*P.y*B*(H.y-g.y)+O.x*O.x*j+O.y*O.y*B,2*O.x*j*(H.x-g.x)+2*O.y*B*(H.y-g.y),H.x*H.x*j-2*H.y*g.y*B-2*H.x*g.x*j+H.y*H.y*B+g.x*g.x*j+g.y*g.y*B-B*j),i=U.getRootsInInterval(0,1),r=0;r<i.length;r++){var e=i[r];q.points.push(X.multiply(e*e*e).add(P.multiply(e*e).add(O.multiply(e).add(H))))}return q.points.length>0&&(q.status="Intersection"),q};qt.intersectBezier3Line=function(t,n,a,u,g,y){var T,k,V,F,G,X,P,O,H,q,B=g.min(y),j=g.max(y),U=new qt("No Intersection");T=t.multiply(-1),k=n.multiply(3),V=a.multiply(-3),F=T.add(k.add(V.add(u))),G=new Vector2D(F.x,F.y),T=t.multiply(3),k=n.multiply(-6),V=a.multiply(3),F=T.add(k.add(V)),X=new Vector2D(F.x,F.y),T=t.multiply(-3),k=n.multiply(3),V=T.add(k),P=new Vector2D(V.x,V.y),O=new Vector2D(t.x,t.y),q=new Vector2D(g.y-y.y,y.x-g.x),H=g.x*y.y-y.x*g.y,roots=new Polynomial(q.dot(G),q.dot(X),q.dot(P),q.dot(O)+H).getRoots();for(var i=0;i<roots.length;i++){var r=roots[i];if(0<=r&&r<=1){var e=t.lerp(n,r),o=n.lerp(a,r),s=a.lerp(u,r),d=e.lerp(o,r),p=o.lerp(s,r),x=d.lerp(p,r);g.x==y.x?B.y<=x.y&&x.y<=j.y&&(U.status="Intersection",U.appendPoint(x)):g.y==y.y?B.x<=x.x&&x.x<=j.x&&(U.status="Intersection",U.appendPoint(x)):x.gte(B)&&x.lte(j)&&(U.status="Intersection",U.appendPoint(x))}}return U};qt.intersectBezier3Polygon=function(t,n,a,u,g){for(var y=new qt("No Intersection"),T=g.length,k=0;k<T;k++){var V=g[k],F=g[(k+1)%T],G=qt.intersectBezier3Line(t,n,a,u,V,F);y.appendPoints(G.points)}return y.points.length>0&&(y.status="Intersection"),y};qt.intersectBezier3Rectangle=function(t,n,a,u,g,y){var T=g.min(y),k=g.max(y),V=new ri(k.x,T.y),F=new ri(T.x,k.y),G=qt.intersectBezier3Line(t,n,a,u,T,V),X=qt.intersectBezier3Line(t,n,a,u,V,k),P=qt.intersectBezier3Line(t,n,a,u,k,F),O=qt.intersectBezier3Line(t,n,a,u,F,T),H=new qt("No Intersection");return H.appendPoints(G.points),H.appendPoints(X.points),H.appendPoints(P.points),H.appendPoints(O.points),H.points.length>0&&(H.status="Intersection"),H};qt.intersectCircleCircle=function(t,n,a,u){var g,y=n+u,T=Math.abs(n-u),k=t.distanceFrom(a);if(k>y)g=new qt("Outside");else if(k<T)g=new qt("Inside");else{g=new qt("Intersection");var V=(n*n-u*u+k*k)/(2*k),F=Math.sqrt(n*n-V*V),G=t.lerp(a,V/k),X=F/k;g.points.push(new ri(G.x-X*(a.y-t.y),G.y+X*(a.x-t.x))),g.points.push(new ri(G.x+X*(a.y-t.y),G.y-X*(a.x-t.x)))}return g};qt.intersectCircleEllipse=function(t,n,a,u,g){return qt.intersectEllipseEllipse(t,n,n,a,u,g)};qt.intersectCircleLine=function(t,n,a,u){var g,y=(u.x-a.x)*(u.x-a.x)+(u.y-a.y)*(u.y-a.y),T=2*((u.x-a.x)*(a.x-t.x)+(u.y-a.y)*(a.y-t.y)),k=t.x*t.x+t.y*t.y+a.x*a.x+a.y*a.y-2*(t.x*a.x+t.y*a.y)-n*n,V=T*T-4*y*k;if(V<0)g=new qt("Outside");else if(V==0)g=new qt("Tangent");else{var F=Math.sqrt(V),G=(-T+F)/(2*y),X=(-T-F)/(2*y);(G<0||G>1)&&(X<0||X>1)?G<0&&X<0||G>1&&X>1?g=new qt("Outside"):g=new qt("Inside"):(g=new qt("Intersection"),0<=G&&G<=1&&g.points.push(a.lerp(u,G)),0<=X&&X<=1&&g.points.push(a.lerp(u,X)))}return g};qt.intersectCirclePolygon=function(t,n,a){for(var u=new qt("No Intersection"),g=a.length,y,T=0;T<g;T++){var k=a[T],V=a[(T+1)%g];y=qt.intersectCircleLine(t,n,k,V),u.appendPoints(y.points)}return u.points.length>0?u.status="Intersection":u.status=y.status,u};qt.intersectCircleRectangle=function(t,n,a,u){var g=a.min(u),y=a.max(u),T=new ri(y.x,g.y),k=new ri(g.x,y.y),V=qt.intersectCircleLine(t,n,g,T),F=qt.intersectCircleLine(t,n,T,y),G=qt.intersectCircleLine(t,n,y,k),X=qt.intersectCircleLine(t,n,k,g),P=new qt("No Intersection");return P.appendPoints(V.points),P.appendPoints(F.points),P.appendPoints(G.points),P.appendPoints(X.points),P.points.length>0?P.status="Intersection":P.status=V.status,P};qt.intersectEllipseEllipse=function(t,n,a,u,g,y){for(var T=[a*a,0,n*n,-2*a*a*t.x,-2*n*n*t.y,a*a*t.x*t.x+n*n*t.y*t.y-n*n*a*a],k=[y*y,0,g*g,-2*y*y*u.x,-2*g*g*u.y,y*y*u.x*u.x+g*g*u.y*u.y-g*g*y*y],V=qt.bezout(T,k),F=V.getRoots(),G=.001,X=(T[0]*T[0]+2*T[1]*T[1]+T[2]*T[2])*G,P=(k[0]*k[0]+2*k[1]*k[1]+k[2]*k[2])*G,O=new qt("No Intersection"),H=0;H<F.length;H++)for(var q=new Polynomial(T[0],T[3]+F[H]*T[1],T[5]+F[H]*(T[4]+F[H]*T[2])),B=q.getRoots(),j=0;j<B.length;j++){var U=(T[0]*B[j]+T[1]*F[H]+T[3])*B[j]+(T[2]*F[H]+T[4])*F[H]+T[5];Math.abs(U)<X&&(U=(k[0]*B[j]+k[1]*F[H]+k[3])*B[j]+(k[2]*F[H]+k[4])*F[H]+k[5],Math.abs(U)<P&&O.appendPoint(new ri(B[j],F[H])))}return O.points.length>0&&(O.status="Intersection"),O};qt.intersectEllipseLine=function(H,n,a,u,g){var y,T=new Vector2D(u.x,u.y),k=Vector2D.fromPoints(u,g),V=new Vector2D(H.x,H.y),F=T.subtract(V),G=new Vector2D(k.x/(n*n),k.y/(a*a)),X=new Vector2D(F.x/(n*n),F.y/(a*a)),P=k.dot(G),O=k.dot(X),H=F.dot(X)-1,q=O*O-P*H;if(q<0)y=new qt("Outside");else if(q>0){var B=Math.sqrt(q),j=(-O-B)/P,U=(-O+B)/P;(j<0||1<j)&&(U<0||1<U)?j<0&&U<0||j>1&&U>1?y=new qt("Outside"):y=new qt("Inside"):(y=new qt("Intersection"),0<=j&&j<=1&&y.appendPoint(u.lerp(g,j)),0<=U&&U<=1&&y.appendPoint(u.lerp(g,U)))}else{var i=-O/P;0<=i&&i<=1?(y=new qt("Intersection"),y.appendPoint(u.lerp(g,i))):y=new qt("Outside")}return y};qt.intersectEllipsePolygon=function(t,n,a,u){for(var g=new qt("No Intersection"),y=u.length,T=0;T<y;T++){var k=u[T],V=u[(T+1)%y],F=qt.intersectEllipseLine(t,n,a,k,V);g.appendPoints(F.points)}return g.points.length>0&&(g.status="Intersection"),g};qt.intersectEllipseRectangle=function(t,n,a,u,g){var y=u.min(g),T=u.max(g),k=new ri(T.x,y.y),V=new ri(y.x,T.y),F=qt.intersectEllipseLine(t,n,a,y,k),G=qt.intersectEllipseLine(t,n,a,k,T),X=qt.intersectEllipseLine(t,n,a,T,V),P=qt.intersectEllipseLine(t,n,a,V,y),O=new qt("No Intersection");return O.appendPoints(F.points),O.appendPoints(G.points),O.appendPoints(X.points),O.appendPoints(P.points),O.points.length>0&&(O.status="Intersection"),O};qt.intersectLineLine=function(t,n,a,u){var g,y=(u.x-a.x)*(t.y-a.y)-(u.y-a.y)*(t.x-a.x),T=(n.x-t.x)*(t.y-a.y)-(n.y-t.y)*(t.x-a.x),k=(u.y-a.y)*(n.x-t.x)-(u.x-a.x)*(n.y-t.y);if(k!=0){var V=y/k,F=T/k;0<=V&&V<=1&&0<=F&&F<=1?(g=new qt("Intersection"),g.points.push(new ri(t.x+V*(n.x-t.x),t.y+V*(n.y-t.y)))):g=new qt("No Intersection")}else y==0||T==0?g=new qt("Coincident"):g=new qt("Parallel");return g};qt.intersectLinePolygon=function(t,n,a){for(var u=new qt("No Intersection"),g=a.length,y=0;y<g;y++){var T=a[y],k=a[(y+1)%g],V=qt.intersectLineLine(t,n,T,k);u.appendPoints(V.points)}return u.points.length>0&&(u.status="Intersection"),u};qt.intersectLineRectangle=function(t,n,a,u){var g=a.min(u),y=a.max(u),T=new ri(y.x,g.y),k=new ri(g.x,y.y),V=qt.intersectLineLine(g,T,t,n),F=qt.intersectLineLine(T,y,t,n),G=qt.intersectLineLine(y,k,t,n),X=qt.intersectLineLine(k,g,t,n),P=new qt("No Intersection");return P.appendPoints(V.points),P.appendPoints(F.points),P.appendPoints(G.points),P.appendPoints(X.points),P.points.length>0&&(P.status="Intersection"),P};qt.intersectPolygonPolygon=function(t,n){for(var a=new qt("No Intersection"),u=t.length,g=0;g<u;g++){var y=t[g],T=t[(g+1)%u],k=qt.intersectLinePolygon(y,T,n);a.appendPoints(k.points)}return a.points.length>0&&(a.status="Intersection"),a};qt.intersectPolygonRectangle=function(t,n,a){var u=n.min(a),g=n.max(a),y=new ri(g.x,u.y),T=new ri(u.x,g.y),k=qt.intersectLinePolygon(u,y,t),V=qt.intersectLinePolygon(y,g,t),F=qt.intersectLinePolygon(g,T,t),G=qt.intersectLinePolygon(T,u,t),X=new qt("No Intersection");return X.appendPoints(k.points),X.appendPoints(V.points),X.appendPoints(F.points),X.appendPoints(G.points),X.points.length>0&&(X.status="Intersection"),X};qt.intersectRayRay=function(t,n,a,u){var g,y=(u.x-a.x)*(t.y-a.y)-(u.y-a.y)*(t.x-a.x),T=(n.x-t.x)*(t.y-a.y)-(n.y-t.y)*(t.x-a.x),k=(u.y-a.y)*(n.x-t.x)-(u.x-a.x)*(n.y-t.y);if(k!=0){var V=y/k;g=new qt("Intersection"),g.points.push(new ri(t.x+V*(n.x-t.x),t.y+V*(n.y-t.y)))}else y==0||T==0?g=new qt("Coincident"):g=new qt("Parallel");return g};qt.intersectRectangleRectangle=function(t,n,a,u){var g=t.min(n),y=t.max(n),T=new ri(y.x,g.y),k=new ri(g.x,y.y),V=qt.intersectLineRectangle(g,T,a,u),F=qt.intersectLineRectangle(T,y,a,u),G=qt.intersectLineRectangle(y,k,a,u),X=qt.intersectLineRectangle(k,g,a,u),P=new qt("No Intersection");return P.appendPoints(V.points),P.appendPoints(F.points),P.appendPoints(G.points),P.appendPoints(X.points),P.points.length>0&&(P.status="Intersection"),P};qt.bezout=function(t,n){var a=t[0]*n[1]-n[0]*t[1],u=t[0]*n[2]-n[0]*t[2],g=t[0]*n[3]-n[0]*t[3],y=t[0]*n[4]-n[0]*t[4],T=t[0]*n[5]-n[0]*t[5],k=t[1]*n[2]-n[1]*t[2],V=t[1]*n[4]-n[1]*t[4],F=t[1]*n[5]-n[1]*t[5],G=t[2]*n[3]-n[2]*t[3],X=t[3]*n[4]-n[3]*t[4],P=t[3]*n[5]-n[3]*t[5],O=F+X,H=V-G;return new Polynomial(a*k-u*u,a*H+g*k-2*u*y,a*O+g*H-y*y-2*u*T,a*P+g*O-2*y*T,g*P-T*T)};a4.exports=qt});var v4=ys((m4,Bm)=>{(function(t,n){"use strict";typeof Bm=="object"&&typeof Bm.exports=="object"?Bm.exports=t.document?n(t,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return n(a)}:n(t)})(typeof window<"u"?window:m4,function(t,n){"use strict";var a=[],u=Object.getPrototypeOf,g=a.slice,y=a.flat?function(z){return a.flat.call(z)}:function(z){return a.concat.apply([],z)},T=a.push,k=a.indexOf,V={},F=V.toString,G=V.hasOwnProperty,X=G.toString,P=X.call(Object),O={},H=function(ee){return typeof ee=="function"&&typeof ee.nodeType!="number"&&typeof ee.item!="function"},q=function(ee){return ee!=null&&ee===ee.window},B=t.document,j={type:!0,src:!0,nonce:!0,noModule:!0};function U(z,ee,ce){ce=ce||B;var me,Se,Ce=ce.createElement("script");if(Ce.text=z,ee)for(me in j)Se=ee[me]||ee.getAttribute&&ee.getAttribute(me),Se&&Ce.setAttribute(me,Se);ce.head.appendChild(Ce).parentNode.removeChild(Ce)}function i(z){return z==null?z+"":typeof z=="object"||typeof z=="function"?V[F.call(z)]||"object":typeof z}var r="3.7.1",e=/HTML$/i,o=function(z,ee){return new o.fn.init(z,ee)};o.fn=o.prototype={jquery:r,constructor:o,length:0,toArray:function(){return g.call(this)},get:function(z){return z==null?g.call(this):z<0?this[z+this.length]:this[z]},pushStack:function(z){var ee=o.merge(this.constructor(),z);return ee.prevObject=this,ee},each:function(z){return o.each(this,z)},map:function(z){return this.pushStack(o.map(this,function(ee,ce){return z.call(ee,ce,ee)}))},slice:function(){return this.pushStack(g.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(o.grep(this,function(z,ee){return(ee+1)%2}))},odd:function(){return this.pushStack(o.grep(this,function(z,ee){return ee%2}))},eq:function(z){var ee=this.length,ce=+z+(z<0?ee:0);return this.pushStack(ce>=0&&ce<ee?[this[ce]]:[])},end:function(){return this.prevObject||this.constructor()},push:T,sort:a.sort,splice:a.splice},o.extend=o.fn.extend=function(){var z,ee,ce,me,Se,Ce,Pe=arguments[0]||{},$e=1,qe=arguments.length,rt=!1;for(typeof Pe=="boolean"&&(rt=Pe,Pe=arguments[$e]||{},$e++),typeof Pe!="object"&&!H(Pe)&&(Pe={}),$e===qe&&(Pe=this,$e--);$e<qe;$e++)if((z=arguments[$e])!=null)for(ee in z)me=z[ee],!(ee==="__proto__"||Pe===me)&&(rt&&me&&(o.isPlainObject(me)||(Se=Array.isArray(me)))?(ce=Pe[ee],Se&&!Array.isArray(ce)?Ce=[]:!Se&&!o.isPlainObject(ce)?Ce={}:Ce=ce,Se=!1,Pe[ee]=o.extend(rt,Ce,me)):me!==void 0&&(Pe[ee]=me));return Pe},o.extend({expando:"jQuery"+(r+Math.random()).replace(/\D/g,""),isReady:!0,error:function(z){throw new Error(z)},noop:function(){},isPlainObject:function(z){var ee,ce;return!z||F.call(z)!=="[object Object]"?!1:(ee=u(z),ee?(ce=G.call(ee,"constructor")&&ee.constructor,typeof ce=="function"&&X.call(ce)===P):!0)},isEmptyObject:function(z){var ee;for(ee in z)return!1;return!0},globalEval:function(z,ee,ce){U(z,{nonce:ee&&ee.nonce},ce)},each:function(z,ee){var ce,me=0;if(s(z))for(ce=z.length;me<ce&&ee.call(z[me],me,z[me])!==!1;me++);else for(me in z)if(ee.call(z[me],me,z[me])===!1)break;return z},text:function(z){var ee,ce="",me=0,Se=z.nodeType;if(!Se)for(;ee=z[me++];)ce+=o.text(ee);return Se===1||Se===11?z.textContent:Se===9?z.documentElement.textContent:Se===3||Se===4?z.nodeValue:ce},makeArray:function(z,ee){var ce=ee||[];return z!=null&&(s(Object(z))?o.merge(ce,typeof z=="string"?[z]:z):T.call(ce,z)),ce},inArray:function(z,ee,ce){return ee==null?-1:k.call(ee,z,ce)},isXMLDoc:function(z){var ee=z&&z.namespaceURI,ce=z&&(z.ownerDocument||z).documentElement;return!e.test(ee||ce&&ce.nodeName||"HTML")},merge:function(z,ee){for(var ce=+ee.length,me=0,Se=z.length;me<ce;me++)z[Se++]=ee[me];return z.length=Se,z},grep:function(z,ee,ce){for(var me,Se=[],Ce=0,Pe=z.length,$e=!ce;Ce<Pe;Ce++)me=!ee(z[Ce],Ce),me!==$e&&Se.push(z[Ce]);return Se},map:function(z,ee,ce){var me,Se,Ce=0,Pe=[];if(s(z))for(me=z.length;Ce<me;Ce++)Se=ee(z[Ce],Ce,ce),Se!=null&&Pe.push(Se);else for(Ce in z)Se=ee(z[Ce],Ce,ce),Se!=null&&Pe.push(Se);return y(Pe)},guid:1,support:O}),typeof Symbol=="function"&&(o.fn[Symbol.iterator]=a[Symbol.iterator]),o.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(z,ee){V["[object "+ee+"]"]=ee.toLowerCase()});function s(z){var ee=!!z&&"length"in z&&z.length,ce=i(z);return H(z)||q(z)?!1:ce==="array"||ee===0||typeof ee=="number"&&ee>0&&ee-1 in z}function d(z,ee){return z.nodeName&&z.nodeName.toLowerCase()===ee.toLowerCase()}var p=a.pop,x=a.sort,l=a.splice,_="[\\x20\\t\\r\\n\\f]",v=new RegExp("^"+_+"+|((?:^|[^\\\\])(?:\\\\.)*)"+_+"+$","g");o.contains=function(z,ee){var ce=ee&&ee.parentNode;return z===ce||!!(ce&&ce.nodeType===1&&(z.contains?z.contains(ce):z.compareDocumentPosition&&z.compareDocumentPosition(ce)&16))};var c=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function h(z,ee){return ee?z==="\0"?"\uFFFD":z.slice(0,-1)+"\\"+z.charCodeAt(z.length-1).toString(16)+" ":"\\"+z}o.escapeSelector=function(z){return(z+"").replace(c,h)};var f=B,m=T;(function(){var z,ee,ce,me,Se,Ce=m,Pe,$e,qe,rt,_t,Mt=o.expando,mt=0,Ut=0,xr=mo(),Cr=mo(),er=mo(),En=mo(),Tn=function(Ze,ht){return Ze===ht&&(Se=!0),0},$n="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Mn="(?:\\\\[\\da-fA-F]{1,6}"+_+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Rr="\\["+_+"*("+Mn+")(?:"+_+"*([*^$|!~]?=)"+_+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+Mn+"))|)"+_+"*\\]",Qn=":("+Mn+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Rr+")*)|.*)\\)|)",Hr=new RegExp(_+"+","g"),Mr=new RegExp("^"+_+"*,"+_+"*"),_n=new RegExp("^"+_+"*([>+~]|"+_+")"+_+"*"),io=new RegExp(_+"|>"),zn=new RegExp(Qn),In=new RegExp("^"+Mn+"$"),Pn={ID:new RegExp("^#("+Mn+")"),CLASS:new RegExp("^\\.("+Mn+")"),TAG:new RegExp("^("+Mn+"|[*])"),ATTR:new RegExp("^"+Rr),PSEUDO:new RegExp("^"+Qn),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+_+"*(even|odd|(([+-]|)(\\d*)n|)"+_+"*(?:([+-]|)"+_+"*(\\d+)|))"+_+"*\\)|)","i"),bool:new RegExp("^(?:"+$n+")$","i"),needsContext:new RegExp("^"+_+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+_+"*((?:-\\d)?\\d*)"+_+"*\\)|)(?=[^-]|$)","i")},hn=/^(?:input|select|textarea|button)$/i,ji=/^h\d$/i,Kr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,vn=/[+~]/,gi=new RegExp("\\\\[\\da-fA-F]{1,6}"+_+"?|\\\\([^\\r\\n\\f])","g"),Si=function(Ze,ht){var bt="0x"+Ze.slice(1)-65536;return ht||(bt<0?String.fromCharCode(bt+65536):String.fromCharCode(bt>>10|55296,bt&1023|56320))},pi=function(){Jr()},$i=dn(function(Ze){return Ze.disabled===!0&&d(Ze,"fieldset")},{dir:"parentNode",next:"legend"});function wn(){try{return Pe.activeElement}catch{}}try{Ce.apply(a=g.call(f.childNodes),f.childNodes),a[f.childNodes.length].nodeType}catch{Ce={apply:function(ht,bt){m.apply(ht,g.call(bt))},call:function(ht){m.apply(ht,g.call(arguments,1))}}}function Qr(Ze,ht,bt,kt){var Ft,Kt,ur,br,hr,Xr,Ir,ir=ht&&ht.ownerDocument,W=ht?ht.nodeType:9;if(bt=bt||[],typeof Ze!="string"||!Ze||W!==1&&W!==9&&W!==11)return bt;if(!kt&&(Jr(ht),ht=ht||Pe,qe)){if(W!==11&&(hr=Kr.exec(Ze)))if(Ft=hr[1]){if(W===9)if(ur=ht.getElementById(Ft)){if(ur.id===Ft)return Ce.call(bt,ur),bt}else return bt;else if(ir&&(ur=ir.getElementById(Ft))&&Qr.contains(ht,ur)&&ur.id===Ft)return Ce.call(bt,ur),bt}else{if(hr[2])return Ce.apply(bt,ht.getElementsByTagName(Ze)),bt;if((Ft=hr[3])&&ht.getElementsByClassName)return Ce.apply(bt,ht.getElementsByClassName(Ft)),bt}if(!En[Ze+" "]&&(!rt||!rt.test(Ze))){if(Ir=Ze,ir=ht,W===1&&(io.test(Ze)||_n.test(Ze))){for(ir=vn.test(Ze)&&Zt(ht.parentNode)||ht,(ir!=ht||!O.scope)&&((br=ht.getAttribute("id"))?br=o.escapeSelector(br):ht.setAttribute("id",br=Mt)),Xr=go(Ze),Kt=Xr.length;Kt--;)Xr[Kt]=(br?"#"+br:":scope")+" "+yo(Xr[Kt]);Ir=Xr.join(",")}try{return Ce.apply(bt,ir.querySelectorAll(Ir)),bt}catch{En(Ze,!0)}finally{br===Mt&&ht.removeAttribute("id")}}}return Ot(Ze.replace(v,"$1"),ht,bt,kt)}function mo(){var Ze=[];function ht(bt,kt){return Ze.push(bt+" ")>ee.cacheLength&&delete ht[Ze.shift()],ht[bt+" "]=kt}return ht}function sn(Ze){return Ze[Mt]=!0,Ze}function Gn(Ze){var ht=Pe.createElement("fieldset");try{return!!Ze(ht)}catch{return!1}finally{ht.parentNode&&ht.parentNode.removeChild(ht),ht=null}}function vo(Ze){return function(ht){return d(ht,"input")&&ht.type===Ze}}function Ri(Ze){return function(ht){return(d(ht,"input")||d(ht,"button"))&&ht.type===Ze}}function un(Ze){return function(ht){return"form"in ht?ht.parentNode&&ht.disabled===!1?"label"in ht?"label"in ht.parentNode?ht.parentNode.disabled===Ze:ht.disabled===Ze:ht.isDisabled===Ze||ht.isDisabled!==!Ze&&$i(ht)===Ze:ht.disabled===Ze:"label"in ht?ht.disabled===Ze:!1}}function Yr(Ze){return sn(function(ht){return ht=+ht,sn(function(bt,kt){for(var Ft,Kt=Ze([],bt.length,ht),ur=Kt.length;ur--;)bt[Ft=Kt[ur]]&&(bt[Ft]=!(kt[Ft]=bt[Ft]))})})}function Zt(Ze){return Ze&&typeof Ze.getElementsByTagName<"u"&&Ze}function Jr(Ze){var ht,bt=Ze?Ze.ownerDocument||Ze:f;return bt==Pe||bt.nodeType!==9||!bt.documentElement||(Pe=bt,$e=Pe.documentElement,qe=!o.isXMLDoc(Pe),_t=$e.matches||$e.webkitMatchesSelector||$e.msMatchesSelector,$e.msMatchesSelector&&f!=Pe&&(ht=Pe.defaultView)&&ht.top!==ht&&ht.addEventListener("unload",pi),O.getById=Gn(function(kt){return $e.appendChild(kt).id=o.expando,!Pe.getElementsByName||!Pe.getElementsByName(o.expando).length}),O.disconnectedMatch=Gn(function(kt){return _t.call(kt,"*")}),O.scope=Gn(function(){return Pe.querySelectorAll(":scope")}),O.cssHas=Gn(function(){try{return Pe.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),O.getById?(ee.filter.ID=function(kt){var Ft=kt.replace(gi,Si);return function(Kt){return Kt.getAttribute("id")===Ft}},ee.find.ID=function(kt,Ft){if(typeof Ft.getElementById<"u"&&qe){var Kt=Ft.getElementById(kt);return Kt?[Kt]:[]}}):(ee.filter.ID=function(kt){var Ft=kt.replace(gi,Si);return function(Kt){var ur=typeof Kt.getAttributeNode<"u"&&Kt.getAttributeNode("id");return ur&&ur.value===Ft}},ee.find.ID=function(kt,Ft){if(typeof Ft.getElementById<"u"&&qe){var Kt,ur,br,hr=Ft.getElementById(kt);if(hr){if(Kt=hr.getAttributeNode("id"),Kt&&Kt.value===kt)return[hr];for(br=Ft.getElementsByName(kt),ur=0;hr=br[ur++];)if(Kt=hr.getAttributeNode("id"),Kt&&Kt.value===kt)return[hr]}return[]}}),ee.find.TAG=function(kt,Ft){return typeof Ft.getElementsByTagName<"u"?Ft.getElementsByTagName(kt):Ft.querySelectorAll(kt)},ee.find.CLASS=function(kt,Ft){if(typeof Ft.getElementsByClassName<"u"&&qe)return Ft.getElementsByClassName(kt)},rt=[],Gn(function(kt){var Ft;$e.appendChild(kt).innerHTML="<a id='"+Mt+"' href='' disabled='disabled'></a><select id='"+Mt+"-\r\\' disabled='disabled'><option selected=''></option></select>",kt.querySelectorAll("[selected]").length||rt.push("\\["+_+"*(?:value|"+$n+")"),kt.querySelectorAll("[id~="+Mt+"-]").length||rt.push("~="),kt.querySelectorAll("a#"+Mt+"+*").length||rt.push(".#.+[+~]"),kt.querySelectorAll(":checked").length||rt.push(":checked"),Ft=Pe.createElement("input"),Ft.setAttribute("type","hidden"),kt.appendChild(Ft).setAttribute("name","D"),$e.appendChild(kt).disabled=!0,kt.querySelectorAll(":disabled").length!==2&&rt.push(":enabled",":disabled"),Ft=Pe.createElement("input"),Ft.setAttribute("name",""),kt.appendChild(Ft),kt.querySelectorAll("[name='']").length||rt.push("\\["+_+"*name"+_+"*="+_+`*(?:''|"")`)}),O.cssHas||rt.push(":has"),rt=rt.length&&new RegExp(rt.join("|")),Tn=function(kt,Ft){if(kt===Ft)return Se=!0,0;var Kt=!kt.compareDocumentPosition-!Ft.compareDocumentPosition;return Kt||(Kt=(kt.ownerDocument||kt)==(Ft.ownerDocument||Ft)?kt.compareDocumentPosition(Ft):1,Kt&1||!O.sortDetached&&Ft.compareDocumentPosition(kt)===Kt?kt===Pe||kt.ownerDocument==f&&Qr.contains(f,kt)?-1:Ft===Pe||Ft.ownerDocument==f&&Qr.contains(f,Ft)?1:me?k.call(me,kt)-k.call(me,Ft):0:Kt&4?-1:1)}),Pe}Qr.matches=function(Ze,ht){return Qr(Ze,null,null,ht)},Qr.matchesSelector=function(Ze,ht){if(Jr(Ze),qe&&!En[ht+" "]&&(!rt||!rt.test(ht)))try{var bt=_t.call(Ze,ht);if(bt||O.disconnectedMatch||Ze.document&&Ze.document.nodeType!==11)return bt}catch{En(ht,!0)}return Qr(ht,Pe,null,[Ze]).length>0},Qr.contains=function(Ze,ht){return(Ze.ownerDocument||Ze)!=Pe&&Jr(Ze),o.contains(Ze,ht)},Qr.attr=function(Ze,ht){(Ze.ownerDocument||Ze)!=Pe&&Jr(Ze);var bt=ee.attrHandle[ht.toLowerCase()],kt=bt&&G.call(ee.attrHandle,ht.toLowerCase())?bt(Ze,ht,!qe):void 0;return kt!==void 0?kt:Ze.getAttribute(ht)},Qr.error=function(Ze){throw new Error("Syntax error, unrecognized expression: "+Ze)},o.uniqueSort=function(Ze){var ht,bt=[],kt=0,Ft=0;if(Se=!O.sortStable,me=!O.sortStable&&g.call(Ze,0),x.call(Ze,Tn),Se){for(;ht=Ze[Ft++];)ht===Ze[Ft]&&(kt=bt.push(Ft));for(;kt--;)l.call(Ze,bt[kt],1)}return me=null,Ze},o.fn.uniqueSort=function(){return this.pushStack(o.uniqueSort(g.apply(this)))},ee=o.expr={cacheLength:50,createPseudo:sn,match:Pn,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(Ze){return Ze[1]=Ze[1].replace(gi,Si),Ze[3]=(Ze[3]||Ze[4]||Ze[5]||"").replace(gi,Si),Ze[2]==="~="&&(Ze[3]=" "+Ze[3]+" "),Ze.slice(0,4)},CHILD:function(Ze){return Ze[1]=Ze[1].toLowerCase(),Ze[1].slice(0,3)==="nth"?(Ze[3]||Qr.error(Ze[0]),Ze[4]=+(Ze[4]?Ze[5]+(Ze[6]||1):2*(Ze[3]==="even"||Ze[3]==="odd")),Ze[5]=+(Ze[7]+Ze[8]||Ze[3]==="odd")):Ze[3]&&Qr.error(Ze[0]),Ze},PSEUDO:function(Ze){var ht,bt=!Ze[6]&&Ze[2];return Pn.CHILD.test(Ze[0])?null:(Ze[3]?Ze[2]=Ze[4]||Ze[5]||"":bt&&zn.test(bt)&&(ht=go(bt,!0))&&(ht=bt.indexOf(")",bt.length-ht)-bt.length)&&(Ze[0]=Ze[0].slice(0,ht),Ze[2]=bt.slice(0,ht)),Ze.slice(0,3))}},filter:{TAG:function(Ze){var ht=Ze.replace(gi,Si).toLowerCase();return Ze==="*"?function(){return!0}:function(bt){return d(bt,ht)}},CLASS:function(Ze){var ht=xr[Ze+" "];return ht||(ht=new RegExp("(^|"+_+")"+Ze+"("+_+"|$)"))&&xr(Ze,function(bt){return ht.test(typeof bt.className=="string"&&bt.className||typeof bt.getAttribute<"u"&&bt.getAttribute("class")||"")})},ATTR:function(Ze,ht,bt){return function(kt){var Ft=Qr.attr(kt,Ze);return Ft==null?ht==="!=":ht?(Ft+="",ht==="="?Ft===bt:ht==="!="?Ft!==bt:ht==="^="?bt&&Ft.indexOf(bt)===0:ht==="*="?bt&&Ft.indexOf(bt)>-1:ht==="$="?bt&&Ft.slice(-bt.length)===bt:ht==="~="?(" "+Ft.replace(Hr," ")+" ").indexOf(bt)>-1:ht==="|="?Ft===bt||Ft.slice(0,bt.length+1)===bt+"-":!1):!0}},CHILD:function(Ze,ht,bt,kt,Ft){var Kt=Ze.slice(0,3)!=="nth",ur=Ze.slice(-4)!=="last",br=ht==="of-type";return kt===1&&Ft===0?function(hr){return!!hr.parentNode}:function(hr,Xr,Ir){var ir,W,se,we,Ae,Oe=Kt!==ur?"nextSibling":"previousSibling",je=hr.parentNode,ut=br&&hr.nodeName.toLowerCase(),ft=!Ir&&!br,Et=!1;if(je){if(Kt){for(;Oe;){for(se=hr;se=se[Oe];)if(br?d(se,ut):se.nodeType===1)return!1;Ae=Oe=Ze==="only"&&!Ae&&"nextSibling"}return!0}if(Ae=[ur?je.firstChild:je.lastChild],ur&&ft){for(W=je[Mt]||(je[Mt]={}),ir=W[Ze]||[],we=ir[0]===mt&&ir[1],Et=we&&ir[2],se=we&&je.childNodes[we];se=++we&&se&&se[Oe]||(Et=we=0)||Ae.pop();)if(se.nodeType===1&&++Et&&se===hr){W[Ze]=[mt,we,Et];break}}else if(ft&&(W=hr[Mt]||(hr[Mt]={}),ir=W[Ze]||[],we=ir[0]===mt&&ir[1],Et=we),Et===!1)for(;(se=++we&&se&&se[Oe]||(Et=we=0)||Ae.pop())&&!((br?d(se,ut):se.nodeType===1)&&++Et&&(ft&&(W=se[Mt]||(se[Mt]={}),W[Ze]=[mt,Et]),se===hr)););return Et-=Ft,Et===kt||Et%kt===0&&Et/kt>=0}}},PSEUDO:function(Ze,ht){var bt,kt=ee.pseudos[Ze]||ee.setFilters[Ze.toLowerCase()]||Qr.error("unsupported pseudo: "+Ze);return kt[Mt]?kt(ht):kt.length>1?(bt=[Ze,Ze,"",ht],ee.setFilters.hasOwnProperty(Ze.toLowerCase())?sn(function(Ft,Kt){for(var ur,br=kt(Ft,ht),hr=br.length;hr--;)ur=k.call(Ft,br[hr]),Ft[ur]=!(Kt[ur]=br[hr])}):function(Ft){return kt(Ft,0,bt)}):kt}},pseudos:{not:sn(function(Ze){var ht=[],bt=[],kt=xi(Ze.replace(v,"$1"));return kt[Mt]?sn(function(Ft,Kt,ur,br){for(var hr,Xr=kt(Ft,null,br,[]),Ir=Ft.length;Ir--;)(hr=Xr[Ir])&&(Ft[Ir]=!(Kt[Ir]=hr))}):function(Ft,Kt,ur){return ht[0]=Ft,kt(ht,null,ur,bt),ht[0]=null,!bt.pop()}}),has:sn(function(Ze){return function(ht){return Qr(Ze,ht).length>0}}),contains:sn(function(Ze){return Ze=Ze.replace(gi,Si),function(ht){return(ht.textContent||o.text(ht)).indexOf(Ze)>-1}}),lang:sn(function(Ze){return In.test(Ze||"")||Qr.error("unsupported lang: "+Ze),Ze=Ze.replace(gi,Si).toLowerCase(),function(ht){var bt;do if(bt=qe?ht.lang:ht.getAttribute("xml:lang")||ht.getAttribute("lang"))return bt=bt.toLowerCase(),bt===Ze||bt.indexOf(Ze+"-")===0;while((ht=ht.parentNode)&&ht.nodeType===1);return!1}}),target:function(Ze){var ht=t.location&&t.location.hash;return ht&&ht.slice(1)===Ze.id},root:function(Ze){return Ze===$e},focus:function(Ze){return Ze===wn()&&Pe.hasFocus()&&!!(Ze.type||Ze.href||~Ze.tabIndex)},enabled:un(!1),disabled:un(!0),checked:function(Ze){return d(Ze,"input")&&!!Ze.checked||d(Ze,"option")&&!!Ze.selected},selected:function(Ze){return Ze.parentNode&&Ze.parentNode.selectedIndex,Ze.selected===!0},empty:function(Ze){for(Ze=Ze.firstChild;Ze;Ze=Ze.nextSibling)if(Ze.nodeType<6)return!1;return!0},parent:function(Ze){return!ee.pseudos.empty(Ze)},header:function(Ze){return ji.test(Ze.nodeName)},input:function(Ze){return hn.test(Ze.nodeName)},button:function(Ze){return d(Ze,"input")&&Ze.type==="button"||d(Ze,"button")},text:function(Ze){var ht;return d(Ze,"input")&&Ze.type==="text"&&((ht=Ze.getAttribute("type"))==null||ht.toLowerCase()==="text")},first:Yr(function(){return[0]}),last:Yr(function(Ze,ht){return[ht-1]}),eq:Yr(function(Ze,ht,bt){return[bt<0?bt+ht:bt]}),even:Yr(function(Ze,ht){for(var bt=0;bt<ht;bt+=2)Ze.push(bt);return Ze}),odd:Yr(function(Ze,ht){for(var bt=1;bt<ht;bt+=2)Ze.push(bt);return Ze}),lt:Yr(function(Ze,ht,bt){var kt;for(bt<0?kt=bt+ht:bt>ht?kt=ht:kt=bt;--kt>=0;)Ze.push(kt);return Ze}),gt:Yr(function(Ze,ht,bt){for(var kt=bt<0?bt+ht:bt;++kt<ht;)Ze.push(kt);return Ze})}},ee.pseudos.nth=ee.pseudos.eq;for(z in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})ee.pseudos[z]=vo(z);for(z in{submit:!0,reset:!0})ee.pseudos[z]=Ri(z);function yi(){}yi.prototype=ee.filters=ee.pseudos,ee.setFilters=new yi;function go(Ze,ht){var bt,kt,Ft,Kt,ur,br,hr,Xr=Cr[Ze+" "];if(Xr)return ht?0:Xr.slice(0);for(ur=Ze,br=[],hr=ee.preFilter;ur;){(!bt||(kt=Mr.exec(ur)))&&(kt&&(ur=ur.slice(kt[0].length)||ur),br.push(Ft=[])),bt=!1,(kt=_n.exec(ur))&&(bt=kt.shift(),Ft.push({value:bt,type:kt[0].replace(v," ")}),ur=ur.slice(bt.length));for(Kt in ee.filter)(kt=Pn[Kt].exec(ur))&&(!hr[Kt]||(kt=hr[Kt](kt)))&&(bt=kt.shift(),Ft.push({value:bt,type:Kt,matches:kt}),ur=ur.slice(bt.length));if(!bt)break}return ht?ur.length:ur?Qr.error(Ze):Cr(Ze,br).slice(0)}function yo(Ze){for(var ht=0,bt=Ze.length,kt="";ht<bt;ht++)kt+=Ze[ht].value;return kt}function dn(Ze,ht,bt){var kt=ht.dir,Ft=ht.next,Kt=Ft||kt,ur=bt&&Kt==="parentNode",br=Ut++;return ht.first?function(hr,Xr,Ir){for(;hr=hr[kt];)if(hr.nodeType===1||ur)return Ze(hr,Xr,Ir);return!1}:function(hr,Xr,Ir){var ir,W,se=[mt,br];if(Ir){for(;hr=hr[kt];)if((hr.nodeType===1||ur)&&Ze(hr,Xr,Ir))return!0}else for(;hr=hr[kt];)if(hr.nodeType===1||ur)if(W=hr[Mt]||(hr[Mt]={}),Ft&&d(hr,Ft))hr=hr[kt]||hr;else{if((ir=W[Kt])&&ir[0]===mt&&ir[1]===br)return se[2]=ir[2];if(W[Kt]=se,se[2]=Ze(hr,Xr,Ir))return!0}return!1}}function li(Ze){return Ze.length>1?function(ht,bt,kt){for(var Ft=Ze.length;Ft--;)if(!Ze[Ft](ht,bt,kt))return!1;return!0}:Ze[0]}function Vi(Ze,ht,bt){for(var kt=0,Ft=ht.length;kt<Ft;kt++)Qr(Ze,ht[kt],bt);return bt}function Ln(Ze,ht,bt,kt,Ft){for(var Kt,ur=[],br=0,hr=Ze.length,Xr=ht!=null;br<hr;br++)(Kt=Ze[br])&&(!bt||bt(Kt,kt,Ft))&&(ur.push(Kt),Xr&&ht.push(br));return ur}function Xn(Ze,ht,bt,kt,Ft,Kt){return kt&&!kt[Mt]&&(kt=Xn(kt)),Ft&&!Ft[Mt]&&(Ft=Xn(Ft,Kt)),sn(function(ur,br,hr,Xr){var Ir,ir,W,se,we=[],Ae=[],Oe=br.length,je=ur||Vi(ht||"*",hr.nodeType?[hr]:hr,[]),ut=Ze&&(ur||!ht)?Ln(je,we,Ze,hr,Xr):je;if(bt?(se=Ft||(ur?Ze:Oe||kt)?[]:br,bt(ut,se,hr,Xr)):se=ut,kt)for(Ir=Ln(se,Ae),kt(Ir,[],hr,Xr),ir=Ir.length;ir--;)(W=Ir[ir])&&(se[Ae[ir]]=!(ut[Ae[ir]]=W));if(ur){if(Ft||Ze){if(Ft){for(Ir=[],ir=se.length;ir--;)(W=se[ir])&&Ir.push(ut[ir]=W);Ft(null,se=[],Ir,Xr)}for(ir=se.length;ir--;)(W=se[ir])&&(Ir=Ft?k.call(ur,W):we[ir])>-1&&(ur[Ir]=!(br[Ir]=W))}}else se=Ln(se===br?se.splice(Oe,se.length):se),Ft?Ft(null,br,se,Xr):Ce.apply(br,se)})}function Yo(Ze){for(var ht,bt,kt,Ft=Ze.length,Kt=ee.relative[Ze[0].type],ur=Kt||ee.relative[" "],br=Kt?1:0,hr=dn(function(ir){return ir===ht},ur,!0),Xr=dn(function(ir){return k.call(ht,ir)>-1},ur,!0),Ir=[function(ir,W,se){var we=!Kt&&(se||W!=ce)||((ht=W).nodeType?hr(ir,W,se):Xr(ir,W,se));return ht=null,we}];br<Ft;br++)if(bt=ee.relative[Ze[br].type])Ir=[dn(li(Ir),bt)];else{if(bt=ee.filter[Ze[br].type].apply(null,Ze[br].matches),bt[Mt]){for(kt=++br;kt<Ft&&!ee.relative[Ze[kt].type];kt++);return Xn(br>1&&li(Ir),br>1&&yo(Ze.slice(0,br-1).concat({value:Ze[br-2].type===" "?"*":""})).replace(v,"$1"),bt,br<kt&&Yo(Ze.slice(br,kt)),kt<Ft&&Yo(Ze=Ze.slice(kt)),kt<Ft&&yo(Ze))}Ir.push(bt)}return li(Ir)}function da(Ze,ht){var bt=ht.length>0,kt=Ze.length>0,Ft=function(Kt,ur,br,hr,Xr){var Ir,ir,W,se=0,we="0",Ae=Kt&&[],Oe=[],je=ce,ut=Kt||kt&&ee.find.TAG("*",Xr),ft=mt+=je==null?1:Math.random()||.1,Et=ut.length;for(Xr&&(ce=ur==Pe||ur||Xr);we!==Et&&(Ir=ut[we])!=null;we++){if(kt&&Ir){for(ir=0,!ur&&Ir.ownerDocument!=Pe&&(Jr(Ir),br=!qe);W=Ze[ir++];)if(W(Ir,ur||Pe,br)){Ce.call(hr,Ir);break}Xr&&(mt=ft)}bt&&((Ir=!W&&Ir)&&se--,Kt&&Ae.push(Ir))}if(se+=we,bt&&we!==se){for(ir=0;W=ht[ir++];)W(Ae,Oe,ur,br);if(Kt){if(se>0)for(;we--;)Ae[we]||Oe[we]||(Oe[we]=p.call(hr));Oe=Ln(Oe)}Ce.apply(hr,Oe),Xr&&!Kt&&Oe.length>0&&se+ht.length>1&&o.uniqueSort(hr)}return Xr&&(mt=ft,ce=je),Ae};return bt?sn(Ft):Ft}function xi(Ze,ht){var bt,kt=[],Ft=[],Kt=er[Ze+" "];if(!Kt){for(ht||(ht=go(Ze)),bt=ht.length;bt--;)Kt=Yo(ht[bt]),Kt[Mt]?kt.push(Kt):Ft.push(Kt);Kt=er(Ze,da(Ft,kt)),Kt.selector=Ze}return Kt}function Ot(Ze,ht,bt,kt){var Ft,Kt,ur,br,hr,Xr=typeof Ze=="function"&&Ze,Ir=!kt&&go(Ze=Xr.selector||Ze);if(bt=bt||[],Ir.length===1){if(Kt=Ir[0]=Ir[0].slice(0),Kt.length>2&&(ur=Kt[0]).type==="ID"&&ht.nodeType===9&&qe&&ee.relative[Kt[1].type]){if(ht=(ee.find.ID(ur.matches[0].replace(gi,Si),ht)||[])[0],ht)Xr&&(ht=ht.parentNode);else return bt;Ze=Ze.slice(Kt.shift().value.length)}for(Ft=Pn.needsContext.test(Ze)?0:Kt.length;Ft--&&(ur=Kt[Ft],!ee.relative[br=ur.type]);)if((hr=ee.find[br])&&(kt=hr(ur.matches[0].replace(gi,Si),vn.test(Kt[0].type)&&Zt(ht.parentNode)||ht))){if(Kt.splice(Ft,1),Ze=kt.length&&yo(Kt),!Ze)return Ce.apply(bt,kt),bt;break}}return(Xr||xi(Ze,Ir))(kt,ht,!qe,bt,!ht||vn.test(Ze)&&Zt(ht.parentNode)||ht),bt}O.sortStable=Mt.split("").sort(Tn).join("")===Mt,Jr(),O.sortDetached=Gn(function(Ze){return Ze.compareDocumentPosition(Pe.createElement("fieldset"))&1}),o.find=Qr,o.expr[":"]=o.expr.pseudos,o.unique=o.uniqueSort,Qr.compile=xi,Qr.select=Ot,Qr.setDocument=Jr,Qr.tokenize=go,Qr.escape=o.escapeSelector,Qr.getText=o.text,Qr.isXML=o.isXMLDoc,Qr.selectors=o.expr,Qr.support=o.support,Qr.uniqueSort=o.uniqueSort})();var b=function(z,ee,ce){for(var me=[],Se=ce!==void 0;(z=z[ee])&&z.nodeType!==9;)if(z.nodeType===1){if(Se&&o(z).is(ce))break;me.push(z)}return me},w=function(z,ee){for(var ce=[];z;z=z.nextSibling)z.nodeType===1&&z!==ee&&ce.push(z);return ce},C=o.expr.match.needsContext,E=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function S(z,ee,ce){return H(ee)?o.grep(z,function(me,Se){return!!ee.call(me,Se,me)!==ce}):ee.nodeType?o.grep(z,function(me){return me===ee!==ce}):typeof ee!="string"?o.grep(z,function(me){return k.call(ee,me)>-1!==ce}):o.filter(ee,z,ce)}o.filter=function(z,ee,ce){var me=ee[0];return ce&&(z=":not("+z+")"),ee.length===1&&me.nodeType===1?o.find.matchesSelector(me,z)?[me]:[]:o.find.matches(z,o.grep(ee,function(Se){return Se.nodeType===1}))},o.fn.extend({find:function(z){var ee,ce,me=this.length,Se=this;if(typeof z!="string")return this.pushStack(o(z).filter(function(){for(ee=0;ee<me;ee++)if(o.contains(Se[ee],this))return!0}));for(ce=this.pushStack([]),ee=0;ee<me;ee++)o.find(z,Se[ee],ce);return me>1?o.uniqueSort(ce):ce},filter:function(z){return this.pushStack(S(this,z||[],!1))},not:function(z){return this.pushStack(S(this,z||[],!0))},is:function(z){return!!S(this,typeof z=="string"&&C.test(z)?o(z):z||[],!1).length}});var M,A=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,R=o.fn.init=function(z,ee,ce){var me,Se;if(!z)return this;if(ce=ce||M,typeof z=="string")if(z[0]==="<"&&z[z.length-1]===">"&&z.length>=3?me=[null,z,null]:me=A.exec(z),me&&(me[1]||!ee))if(me[1]){if(ee=ee instanceof o?ee[0]:ee,o.merge(this,o.parseHTML(me[1],ee&&ee.nodeType?ee.ownerDocument||ee:B,!0)),E.test(me[1])&&o.isPlainObject(ee))for(me in ee)H(this[me])?this[me](ee[me]):this.attr(me,ee[me]);return this}else return Se=B.getElementById(me[2]),Se&&(this[0]=Se,this.length=1),this;else return!ee||ee.jquery?(ee||ce).find(z):this.constructor(ee).find(z);else{if(z.nodeType)return this[0]=z,this.length=1,this;if(H(z))return ce.ready!==void 0?ce.ready(z):z(o)}return o.makeArray(z,this)};R.prototype=o.fn,M=o(B);var D=/^(?:parents|prev(?:Until|All))/,N={children:!0,contents:!0,next:!0,prev:!0};o.fn.extend({has:function(z){var ee=o(z,this),ce=ee.length;return this.filter(function(){for(var me=0;me<ce;me++)if(o.contains(this,ee[me]))return!0})},closest:function(z,ee){var ce,me=0,Se=this.length,Ce=[],Pe=typeof z!="string"&&o(z);if(!C.test(z)){for(;me<Se;me++)for(ce=this[me];ce&&ce!==ee;ce=ce.parentNode)if(ce.nodeType<11&&(Pe?Pe.index(ce)>-1:ce.nodeType===1&&o.find.matchesSelector(ce,z))){Ce.push(ce);break}}return this.pushStack(Ce.length>1?o.uniqueSort(Ce):Ce)},index:function(z){return z?typeof z=="string"?k.call(o(z),this[0]):k.call(this,z.jquery?z[0]:z):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(z,ee){return this.pushStack(o.uniqueSort(o.merge(this.get(),o(z,ee))))},addBack:function(z){return this.add(z==null?this.prevObject:this.prevObject.filter(z))}});function I(z,ee){for(;(z=z[ee])&&z.nodeType!==1;);return z}o.each({parent:function(z){var ee=z.parentNode;return ee&&ee.nodeType!==11?ee:null},parents:function(z){return b(z,"parentNode")},parentsUntil:function(z,ee,ce){return b(z,"parentNode",ce)},next:function(z){return I(z,"nextSibling")},prev:function(z){return I(z,"previousSibling")},nextAll:function(z){return b(z,"nextSibling")},prevAll:function(z){return b(z,"previousSibling")},nextUntil:function(z,ee,ce){return b(z,"nextSibling",ce)},prevUntil:function(z,ee,ce){return b(z,"previousSibling",ce)},siblings:function(z){return w((z.parentNode||{}).firstChild,z)},children:function(z){return w(z.firstChild)},contents:function(z){return z.contentDocument!=null&&u(z.contentDocument)?z.contentDocument:(d(z,"template")&&(z=z.content||z),o.merge([],z.childNodes))}},function(z,ee){o.fn[z]=function(ce,me){var Se=o.map(this,ee,ce);return z.slice(-5)!=="Until"&&(me=ce),me&&typeof me=="string"&&(Se=o.filter(me,Se)),this.length>1&&(N[z]||o.uniqueSort(Se),D.test(z)&&Se.reverse()),this.pushStack(Se)}});var L=/[^\x20\t\r\n\f]+/g;function Y(z){var ee={};return o.each(z.match(L)||[],function(ce,me){ee[me]=!0}),ee}o.Callbacks=function(z){z=typeof z=="string"?Y(z):o.extend({},z);var ee,ce,me,Se,Ce=[],Pe=[],$e=-1,qe=function(){for(Se=Se||z.once,me=ee=!0;Pe.length;$e=-1)for(ce=Pe.shift();++$e<Ce.length;)Ce[$e].apply(ce[0],ce[1])===!1&&z.stopOnFalse&&($e=Ce.length,ce=!1);z.memory||(ce=!1),ee=!1,Se&&(ce?Ce=[]:Ce="")},rt={add:function(){return Ce&&(ce&&!ee&&($e=Ce.length-1,Pe.push(ce)),function _t(Mt){o.each(Mt,function(mt,Ut){H(Ut)?(!z.unique||!rt.has(Ut))&&Ce.push(Ut):Ut&&Ut.length&&i(Ut)!=="string"&&_t(Ut)})}(arguments),ce&&!ee&&qe()),this},remove:function(){return o.each(arguments,function(_t,Mt){for(var mt;(mt=o.inArray(Mt,Ce,mt))>-1;)Ce.splice(mt,1),mt<=$e&&$e--}),this},has:function(_t){return _t?o.inArray(_t,Ce)>-1:Ce.length>0},empty:function(){return Ce&&(Ce=[]),this},disable:function(){return Se=Pe=[],Ce=ce="",this},disabled:function(){return!Ce},lock:function(){return Se=Pe=[],!ce&&!ee&&(Ce=ce=""),this},locked:function(){return!!Se},fireWith:function(_t,Mt){return Se||(Mt=Mt||[],Mt=[_t,Mt.slice?Mt.slice():Mt],Pe.push(Mt),ee||qe()),this},fire:function(){return rt.fireWith(this,arguments),this},fired:function(){return!!me}};return rt};function J(z){return z}function ie(z){throw z}function K(z,ee,ce,me){var Se;try{z&&H(Se=z.promise)?Se.call(z).done(ee).fail(ce):z&&H(Se=z.then)?Se.call(z,ee,ce):ee.apply(void 0,[z].slice(me))}catch(Ce){ce.apply(void 0,[Ce])}}o.extend({Deferred:function(z){var ee=[["notify","progress",o.Callbacks("memory"),o.Callbacks("memory"),2],["resolve","done",o.Callbacks("once memory"),o.Callbacks("once memory"),0,"resolved"],["reject","fail",o.Callbacks("once memory"),o.Callbacks("once memory"),1,"rejected"]],ce="pending",me={state:function(){return ce},always:function(){return Se.done(arguments).fail(arguments),this},catch:function(Ce){return me.then(null,Ce)},pipe:function(){var Ce=arguments;return o.Deferred(function(Pe){o.each(ee,function($e,qe){var rt=H(Ce[qe[4]])&&Ce[qe[4]];Se[qe[1]](function(){var _t=rt&&rt.apply(this,arguments);_t&&H(_t.promise)?_t.promise().progress(Pe.notify).done(Pe.resolve).fail(Pe.reject):Pe[qe[0]+"With"](this,rt?[_t]:arguments)})}),Ce=null}).promise()},then:function(Ce,Pe,$e){var qe=0;function rt(_t,Mt,mt,Ut){return function(){var xr=this,Cr=arguments,er=function(){var Tn,$n;if(!(_t<qe)){if(Tn=mt.apply(xr,Cr),Tn===Mt.promise())throw new TypeError("Thenable self-resolution");$n=Tn&&(typeof Tn=="object"||typeof Tn=="function")&&Tn.then,H($n)?Ut?$n.call(Tn,rt(qe,Mt,J,Ut),rt(qe,Mt,ie,Ut)):(qe++,$n.call(Tn,rt(qe,Mt,J,Ut),rt(qe,Mt,ie,Ut),rt(qe,Mt,J,Mt.notifyWith))):(mt!==J&&(xr=void 0,Cr=[Tn]),(Ut||Mt.resolveWith)(xr,Cr))}},En=Ut?er:function(){try{er()}catch(Tn){o.Deferred.exceptionHook&&o.Deferred.exceptionHook(Tn,En.error),_t+1>=qe&&(mt!==ie&&(xr=void 0,Cr=[Tn]),Mt.rejectWith(xr,Cr))}};_t?En():(o.Deferred.getErrorHook?En.error=o.Deferred.getErrorHook():o.Deferred.getStackHook&&(En.error=o.Deferred.getStackHook()),t.setTimeout(En))}}return o.Deferred(function(_t){ee[0][3].add(rt(0,_t,H($e)?$e:J,_t.notifyWith)),ee[1][3].add(rt(0,_t,H(Ce)?Ce:J)),ee[2][3].add(rt(0,_t,H(Pe)?Pe:ie))}).promise()},promise:function(Ce){return Ce!=null?o.extend(Ce,me):me}},Se={};return o.each(ee,function(Ce,Pe){var $e=Pe[2],qe=Pe[5];me[Pe[1]]=$e.add,qe&&$e.add(function(){ce=qe},ee[3-Ce][2].disable,ee[3-Ce][3].disable,ee[0][2].lock,ee[0][3].lock),$e.add(Pe[3].fire),Se[Pe[0]]=function(){return Se[Pe[0]+"With"](this===Se?void 0:this,arguments),this},Se[Pe[0]+"With"]=$e.fireWith}),me.promise(Se),z&&z.call(Se,Se),Se},when:function(z){var ee=arguments.length,ce=ee,me=Array(ce),Se=g.call(arguments),Ce=o.Deferred(),Pe=function($e){return function(qe){me[$e]=this,Se[$e]=arguments.length>1?g.call(arguments):qe,--ee||Ce.resolveWith(me,Se)}};if(ee<=1&&(K(z,Ce.done(Pe(ce)).resolve,Ce.reject,!ee),Ce.state()==="pending"||H(Se[ce]&&Se[ce].then)))return Ce.then();for(;ce--;)K(Se[ce],Pe(ce),Ce.reject);return Ce.promise()}});var Q=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;o.Deferred.exceptionHook=function(z,ee){t.console&&t.console.warn&&z&&Q.test(z.name)&&t.console.warn("jQuery.Deferred exception: "+z.message,z.stack,ee)},o.readyException=function(z){t.setTimeout(function(){throw z})};var ne=o.Deferred();o.fn.ready=function(z){return ne.then(z).catch(function(ee){o.readyException(ee)}),this},o.extend({isReady:!1,readyWait:1,ready:function(z){(z===!0?--o.readyWait:o.isReady)||(o.isReady=!0,!(z!==!0&&--o.readyWait>0)&&ne.resolveWith(B,[o]))}}),o.ready.then=ne.then;function ue(){B.removeEventListener("DOMContentLoaded",ue),t.removeEventListener("load",ue),o.ready()}B.readyState==="complete"||B.readyState!=="loading"&&!B.documentElement.doScroll?t.setTimeout(o.ready):(B.addEventListener("DOMContentLoaded",ue),t.addEventListener("load",ue));var fe=function(z,ee,ce,me,Se,Ce,Pe){var $e=0,qe=z.length,rt=ce==null;if(i(ce)==="object"){Se=!0;for($e in ce)fe(z,ee,$e,ce[$e],!0,Ce,Pe)}else if(me!==void 0&&(Se=!0,H(me)||(Pe=!0),rt&&(Pe?(ee.call(z,me),ee=null):(rt=ee,ee=function(_t,Mt,mt){return rt.call(o(_t),mt)})),ee))for(;$e<qe;$e++)ee(z[$e],ce,Pe?me:me.call(z[$e],$e,ee(z[$e],ce)));return Se?z:rt?ee.call(z):qe?ee(z[0],ce):Ce},ge=/^-ms-/,ye=/-([a-z])/g;function pe(z,ee){return ee.toUpperCase()}function de(z){return z.replace(ge,"ms-").replace(ye,pe)}var he=function(z){return z.nodeType===1||z.nodeType===9||!+z.nodeType};function _e(){this.expando=o.expando+_e.uid++}_e.uid=1,_e.prototype={cache:function(z){var ee=z[this.expando];return ee||(ee={},he(z)&&(z.nodeType?z[this.expando]=ee:Object.defineProperty(z,this.expando,{value:ee,configurable:!0}))),ee},set:function(z,ee,ce){var me,Se=this.cache(z);if(typeof ee=="string")Se[de(ee)]=ce;else for(me in ee)Se[de(me)]=ee[me];return Se},get:function(z,ee){return ee===void 0?this.cache(z):z[this.expando]&&z[this.expando][de(ee)]},access:function(z,ee,ce){return ee===void 0||ee&&typeof ee=="string"&&ce===void 0?this.get(z,ee):(this.set(z,ee,ce),ce!==void 0?ce:ee)},remove:function(z,ee){var ce,me=z[this.expando];if(me!==void 0){if(ee!==void 0)for(Array.isArray(ee)?ee=ee.map(de):(ee=de(ee),ee=ee in me?[ee]:ee.match(L)||[]),ce=ee.length;ce--;)delete me[ee[ce]];(ee===void 0||o.isEmptyObject(me))&&(z.nodeType?z[this.expando]=void 0:delete z[this.expando])}},hasData:function(z){var ee=z[this.expando];return ee!==void 0&&!o.isEmptyObject(ee)}};var ve=new _e,Z=new _e,be=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ee=/[A-Z]/g;function De(z){return z==="true"?!0:z==="false"?!1:z==="null"?null:z===+z+""?+z:be.test(z)?JSON.parse(z):z}function Fe(z,ee,ce){var me;if(ce===void 0&&z.nodeType===1)if(me="data-"+ee.replace(Ee,"-$&").toLowerCase(),ce=z.getAttribute(me),typeof ce=="string"){try{ce=De(ce)}catch{}Z.set(z,ee,ce)}else ce=void 0;return ce}o.extend({hasData:function(z){return Z.hasData(z)||ve.hasData(z)},data:function(z,ee,ce){return Z.access(z,ee,ce)},removeData:function(z,ee){Z.remove(z,ee)},_data:function(z,ee,ce){return ve.access(z,ee,ce)},_removeData:function(z,ee){ve.remove(z,ee)}}),o.fn.extend({data:function(z,ee){var ce,me,Se,Ce=this[0],Pe=Ce&&Ce.attributes;if(z===void 0){if(this.length&&(Se=Z.get(Ce),Ce.nodeType===1&&!ve.get(Ce,"hasDataAttrs"))){for(ce=Pe.length;ce--;)Pe[ce]&&(me=Pe[ce].name,me.indexOf("data-")===0&&(me=de(me.slice(5)),Fe(Ce,me,Se[me])));ve.set(Ce,"hasDataAttrs",!0)}return Se}return typeof z=="object"?this.each(function(){Z.set(this,z)}):fe(this,function($e){var qe;if(Ce&&$e===void 0)return qe=Z.get(Ce,z),qe!==void 0||(qe=Fe(Ce,z),qe!==void 0)?qe:void 0;this.each(function(){Z.set(this,z,$e)})},null,ee,arguments.length>1,null,!0)},removeData:function(z){return this.each(function(){Z.remove(this,z)})}}),o.extend({queue:function(z,ee,ce){var me;if(z)return ee=(ee||"fx")+"queue",me=ve.get(z,ee),ce&&(!me||Array.isArray(ce)?me=ve.access(z,ee,o.makeArray(ce)):me.push(ce)),me||[]},dequeue:function(z,ee){ee=ee||"fx";var ce=o.queue(z,ee),me=ce.length,Se=ce.shift(),Ce=o._queueHooks(z,ee),Pe=function(){o.dequeue(z,ee)};Se==="inprogress"&&(Se=ce.shift(),me--),Se&&(ee==="fx"&&ce.unshift("inprogress"),delete Ce.stop,Se.call(z,Pe,Ce)),!me&&Ce&&Ce.empty.fire()},_queueHooks:function(z,ee){var ce=ee+"queueHooks";return ve.get(z,ce)||ve.access(z,ce,{empty:o.Callbacks("once memory").add(function(){ve.remove(z,[ee+"queue",ce])})})}}),o.fn.extend({queue:function(z,ee){var ce=2;return typeof z!="string"&&(ee=z,z="fx",ce--),arguments.length<ce?o.queue(this[0],z):ee===void 0?this:this.each(function(){var me=o.queue(this,z,ee);o._queueHooks(this,z),z==="fx"&&me[0]!=="inprogress"&&o.dequeue(this,z)})},dequeue:function(z){return this.each(function(){o.dequeue(this,z)})},clearQueue:function(z){return this.queue(z||"fx",[])},promise:function(z,ee){var ce,me=1,Se=o.Deferred(),Ce=this,Pe=this.length,$e=function(){--me||Se.resolveWith(Ce,[Ce])};for(typeof z!="string"&&(ee=z,z=void 0),z=z||"fx";Pe--;)ce=ve.get(Ce[Pe],z+"queueHooks"),ce&&ce.empty&&(me++,ce.empty.add($e));return $e(),Se.promise(ee)}});var Ue=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Qe=new RegExp("^(?:([+-])=|)("+Ue+")([a-z%]*)$","i"),Ke=["Top","Right","Bottom","Left"],Te=B.documentElement,Ie=function(z){return o.contains(z.ownerDocument,z)},ke={composed:!0};Te.getRootNode&&(Ie=function(z){return o.contains(z.ownerDocument,z)||z.getRootNode(ke)===z.ownerDocument});var nt=function(z,ee){return z=ee||z,z.style.display==="none"||z.style.display===""&&Ie(z)&&o.css(z,"display")==="none"};function dt(z,ee,ce,me){var Se,Ce,Pe=20,$e=me?function(){return me.cur()}:function(){return o.css(z,ee,"")},qe=$e(),rt=ce&&ce[3]||(o.cssNumber[ee]?"":"px"),_t=z.nodeType&&(o.cssNumber[ee]||rt!=="px"&&+qe)&&Qe.exec(o.css(z,ee));if(_t&&_t[3]!==rt){for(qe=qe/2,rt=rt||_t[3],_t=+qe||1;Pe--;)o.style(z,ee,_t+rt),(1-Ce)*(1-(Ce=$e()/qe||.5))<=0&&(Pe=0),_t=_t/Ce;_t=_t*2,o.style(z,ee,_t+rt),ce=ce||[]}return ce&&(_t=+_t||+qe||0,Se=ce[1]?_t+(ce[1]+1)*ce[2]:+ce[2],me&&(me.unit=rt,me.start=_t,me.end=Se)),Se}var yt={};function gt(z){var ee,ce=z.ownerDocument,me=z.nodeName,Se=yt[me];return Se||(ee=ce.body.appendChild(ce.createElement(me)),Se=o.css(ee,"display"),ee.parentNode.removeChild(ee),Se==="none"&&(Se="block"),yt[me]=Se,Se)}function xt(z,ee){for(var ce,me,Se=[],Ce=0,Pe=z.length;Ce<Pe;Ce++)me=z[Ce],me.style&&(ce=me.style.display,ee?(ce==="none"&&(Se[Ce]=ve.get(me,"display")||null,Se[Ce]||(me.style.display="")),me.style.display===""&&nt(me)&&(Se[Ce]=gt(me))):ce!=="none"&&(Se[Ce]="none",ve.set(me,"display",ce)));for(Ce=0;Ce<Pe;Ce++)Se[Ce]!=null&&(z[Ce].style.display=Se[Ce]);return z}o.fn.extend({show:function(){return xt(this,!0)},hide:function(){return xt(this)},toggle:function(z){return typeof z=="boolean"?z?this.show():this.hide():this.each(function(){nt(this)?o(this).show():o(this).hide()})}});var tt=/^(?:checkbox|radio)$/i,pt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,At=/^$|^module$|\/(?:java|ecma)script/i;(function(){var z=B.createDocumentFragment(),ee=z.appendChild(B.createElement("div")),ce=B.createElement("input");ce.setAttribute("type","radio"),ce.setAttribute("checked","checked"),ce.setAttribute("name","t"),ee.appendChild(ce),O.checkClone=ee.cloneNode(!0).cloneNode(!0).lastChild.checked,ee.innerHTML="<textarea>x</textarea>",O.noCloneChecked=!!ee.cloneNode(!0).lastChild.defaultValue,ee.innerHTML="<option></option>",O.option=!!ee.lastChild})();var Tt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Tt.tbody=Tt.tfoot=Tt.colgroup=Tt.caption=Tt.thead,Tt.th=Tt.td,O.option||(Tt.optgroup=Tt.option=[1,"<select multiple='multiple'>","</select>"]);function Ct(z,ee){var ce;return typeof z.getElementsByTagName<"u"?ce=z.getElementsByTagName(ee||"*"):typeof z.querySelectorAll<"u"?ce=z.querySelectorAll(ee||"*"):ce=[],ee===void 0||ee&&d(z,ee)?o.merge([z],ce):ce}function Bt(z,ee){for(var ce=0,me=z.length;ce<me;ce++)ve.set(z[ce],"globalEval",!ee||ve.get(ee[ce],"globalEval"))}var nr=/<|&#?\w+;/;function $t(z,ee,ce,me,Se){for(var Ce,Pe,$e,qe,rt,_t,Mt=ee.createDocumentFragment(),mt=[],Ut=0,xr=z.length;Ut<xr;Ut++)if(Ce=z[Ut],Ce||Ce===0)if(i(Ce)==="object")o.merge(mt,Ce.nodeType?[Ce]:Ce);else if(!nr.test(Ce))mt.push(ee.createTextNode(Ce));else{for(Pe=Pe||Mt.appendChild(ee.createElement("div")),$e=(pt.exec(Ce)||["",""])[1].toLowerCase(),qe=Tt[$e]||Tt._default,Pe.innerHTML=qe[1]+o.htmlPrefilter(Ce)+qe[2],_t=qe[0];_t--;)Pe=Pe.lastChild;o.merge(mt,Pe.childNodes),Pe=Mt.firstChild,Pe.textContent=""}for(Mt.textContent="",Ut=0;Ce=mt[Ut++];){if(me&&o.inArray(Ce,me)>-1){Se&&Se.push(Ce);continue}if(rt=Ie(Ce),Pe=Ct(Mt.appendChild(Ce),"script"),rt&&Bt(Pe),ce)for(_t=0;Ce=Pe[_t++];)At.test(Ce.type||"")&&ce.push(Ce)}return Mt}var It=/^([^.]*)(?:\.(.+)|)/;function Lt(){return!0}function Pt(){return!1}function He(z,ee,ce,me,Se,Ce){var Pe,$e;if(typeof ee=="object"){typeof ce!="string"&&(me=me||ce,ce=void 0);for($e in ee)He(z,$e,ce,me,ee[$e],Ce);return z}if(me==null&&Se==null?(Se=ce,me=ce=void 0):Se==null&&(typeof ce=="string"?(Se=me,me=void 0):(Se=me,me=ce,ce=void 0)),Se===!1)Se=Pt;else if(!Se)return z;return Ce===1&&(Pe=Se,Se=function(qe){return o().off(qe),Pe.apply(this,arguments)},Se.guid=Pe.guid||(Pe.guid=o.guid++)),z.each(function(){o.event.add(this,ee,Se,me,ce)})}o.event={global:{},add:function(z,ee,ce,me,Se){var Ce,Pe,$e,qe,rt,_t,Mt,mt,Ut,xr,Cr,er=ve.get(z);if(he(z))for(ce.handler&&(Ce=ce,ce=Ce.handler,Se=Ce.selector),Se&&o.find.matchesSelector(Te,Se),ce.guid||(ce.guid=o.guid++),(qe=er.events)||(qe=er.events=Object.create(null)),(Pe=er.handle)||(Pe=er.handle=function(En){return typeof o<"u"&&o.event.triggered!==En.type?o.event.dispatch.apply(z,arguments):void 0}),ee=(ee||"").match(L)||[""],rt=ee.length;rt--;)$e=It.exec(ee[rt])||[],Ut=Cr=$e[1],xr=($e[2]||"").split(".").sort(),Ut&&(Mt=o.event.special[Ut]||{},Ut=(Se?Mt.delegateType:Mt.bindType)||Ut,Mt=o.event.special[Ut]||{},_t=o.extend({type:Ut,origType:Cr,data:me,handler:ce,guid:ce.guid,selector:Se,needsContext:Se&&o.expr.match.needsContext.test(Se),namespace:xr.join(".")},Ce),(mt=qe[Ut])||(mt=qe[Ut]=[],mt.delegateCount=0,(!Mt.setup||Mt.setup.call(z,me,xr,Pe)===!1)&&z.addEventListener&&z.addEventListener(Ut,Pe)),Mt.add&&(Mt.add.call(z,_t),_t.handler.guid||(_t.handler.guid=ce.guid)),Se?mt.splice(mt.delegateCount++,0,_t):mt.push(_t),o.event.global[Ut]=!0)},remove:function(z,ee,ce,me,Se){var Ce,Pe,$e,qe,rt,_t,Mt,mt,Ut,xr,Cr,er=ve.hasData(z)&&ve.get(z);if(!(!er||!(qe=er.events))){for(ee=(ee||"").match(L)||[""],rt=ee.length;rt--;){if($e=It.exec(ee[rt])||[],Ut=Cr=$e[1],xr=($e[2]||"").split(".").sort(),!Ut){for(Ut in qe)o.event.remove(z,Ut+ee[rt],ce,me,!0);continue}for(Mt=o.event.special[Ut]||{},Ut=(me?Mt.delegateType:Mt.bindType)||Ut,mt=qe[Ut]||[],$e=$e[2]&&new RegExp("(^|\\.)"+xr.join("\\.(?:.*\\.|)")+"(\\.|$)"),Pe=Ce=mt.length;Ce--;)_t=mt[Ce],(Se||Cr===_t.origType)&&(!ce||ce.guid===_t.guid)&&(!$e||$e.test(_t.namespace))&&(!me||me===_t.selector||me==="**"&&_t.selector)&&(mt.splice(Ce,1),_t.selector&&mt.delegateCount--,Mt.remove&&Mt.remove.call(z,_t));Pe&&!mt.length&&((!Mt.teardown||Mt.teardown.call(z,xr,er.handle)===!1)&&o.removeEvent(z,Ut,er.handle),delete qe[Ut])}o.isEmptyObject(qe)&&ve.remove(z,"handle events")}},dispatch:function(z){var ee,ce,me,Se,Ce,Pe,$e=new Array(arguments.length),qe=o.event.fix(z),rt=(ve.get(this,"events")||Object.create(null))[qe.type]||[],_t=o.event.special[qe.type]||{};for($e[0]=qe,ee=1;ee<arguments.length;ee++)$e[ee]=arguments[ee];if(qe.delegateTarget=this,!(_t.preDispatch&&_t.preDispatch.call(this,qe)===!1)){for(Pe=o.event.handlers.call(this,qe,rt),ee=0;(Se=Pe[ee++])&&!qe.isPropagationStopped();)for(qe.currentTarget=Se.elem,ce=0;(Ce=Se.handlers[ce++])&&!qe.isImmediatePropagationStopped();)(!qe.rnamespace||Ce.namespace===!1||qe.rnamespace.test(Ce.namespace))&&(qe.handleObj=Ce,qe.data=Ce.data,me=((o.event.special[Ce.origType]||{}).handle||Ce.handler).apply(Se.elem,$e),me!==void 0&&(qe.result=me)===!1&&(qe.preventDefault(),qe.stopPropagation()));return _t.postDispatch&&_t.postDispatch.call(this,qe),qe.result}},handlers:function(z,ee){var ce,me,Se,Ce,Pe,$e=[],qe=ee.delegateCount,rt=z.target;if(qe&&rt.nodeType&&!(z.type==="click"&&z.button>=1)){for(;rt!==this;rt=rt.parentNode||this)if(rt.nodeType===1&&!(z.type==="click"&&rt.disabled===!0)){for(Ce=[],Pe={},ce=0;ce<qe;ce++)me=ee[ce],Se=me.selector+" ",Pe[Se]===void 0&&(Pe[Se]=me.needsContext?o(Se,this).index(rt)>-1:o.find(Se,this,null,[rt]).length),Pe[Se]&&Ce.push(me);Ce.length&&$e.push({elem:rt,handlers:Ce})}}return rt=this,qe<ee.length&&$e.push({elem:rt,handlers:ee.slice(qe)}),$e},addProp:function(z,ee){Object.defineProperty(o.Event.prototype,z,{enumerable:!0,configurable:!0,get:H(ee)?function(){if(this.originalEvent)return ee(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[z]},set:function(ce){Object.defineProperty(this,z,{enumerable:!0,configurable:!0,writable:!0,value:ce})}})},fix:function(z){return z[o.expando]?z:new o.Event(z)},special:{load:{noBubble:!0},click:{setup:function(z){var ee=this||z;return tt.test(ee.type)&&ee.click&&d(ee,"input")&&Be(ee,"click",!0),!1},trigger:function(z){var ee=this||z;return tt.test(ee.type)&&ee.click&&d(ee,"input")&&Be(ee,"click"),!0},_default:function(z){var ee=z.target;return tt.test(ee.type)&&ee.click&&d(ee,"input")&&ve.get(ee,"click")||d(ee,"a")}},beforeunload:{postDispatch:function(z){z.result!==void 0&&z.originalEvent&&(z.originalEvent.returnValue=z.result)}}}};function Be(z,ee,ce){if(!ce){ve.get(z,ee)===void 0&&o.event.add(z,ee,Lt);return}ve.set(z,ee,!1),o.event.add(z,ee,{namespace:!1,handler:function(me){var Se,Ce=ve.get(this,ee);if(me.isTrigger&1&&this[ee]){if(Ce)(o.event.special[ee]||{}).delegateType&&me.stopPropagation();else if(Ce=g.call(arguments),ve.set(this,ee,Ce),this[ee](),Se=ve.get(this,ee),ve.set(this,ee,!1),Ce!==Se)return me.stopImmediatePropagation(),me.preventDefault(),Se}else Ce&&(ve.set(this,ee,o.event.trigger(Ce[0],Ce.slice(1),this)),me.stopPropagation(),me.isImmediatePropagationStopped=Lt)}})}o.removeEvent=function(z,ee,ce){z.removeEventListener&&z.removeEventListener(ee,ce)},o.Event=function(z,ee){if(!(this instanceof o.Event))return new o.Event(z,ee);z&&z.type?(this.originalEvent=z,this.type=z.type,this.isDefaultPrevented=z.defaultPrevented||z.defaultPrevented===void 0&&z.returnValue===!1?Lt:Pt,this.target=z.target&&z.target.nodeType===3?z.target.parentNode:z.target,this.currentTarget=z.currentTarget,this.relatedTarget=z.relatedTarget):this.type=z,ee&&o.extend(this,ee),this.timeStamp=z&&z.timeStamp||Date.now(),this[o.expando]=!0},o.Event.prototype={constructor:o.Event,isDefaultPrevented:Pt,isPropagationStopped:Pt,isImmediatePropagationStopped:Pt,isSimulated:!1,preventDefault:function(){var z=this.originalEvent;this.isDefaultPrevented=Lt,z&&!this.isSimulated&&z.preventDefault()},stopPropagation:function(){var z=this.originalEvent;this.isPropagationStopped=Lt,z&&!this.isSimulated&&z.stopPropagation()},stopImmediatePropagation:function(){var z=this.originalEvent;this.isImmediatePropagationStopped=Lt,z&&!this.isSimulated&&z.stopImmediatePropagation(),this.stopPropagation()}},o.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},o.event.addProp),o.each({focus:"focusin",blur:"focusout"},function(z,ee){function ce(me){if(B.documentMode){var Se=ve.get(this,"handle"),Ce=o.event.fix(me);Ce.type=me.type==="focusin"?"focus":"blur",Ce.isSimulated=!0,Se(me),Ce.target===Ce.currentTarget&&Se(Ce)}else o.event.simulate(ee,me.target,o.event.fix(me))}o.event.special[z]={setup:function(){var me;if(Be(this,z,!0),B.documentMode)me=ve.get(this,ee),me||this.addEventListener(ee,ce),ve.set(this,ee,(me||0)+1);else return!1},trigger:function(){return Be(this,z),!0},teardown:function(){var me;if(B.documentMode)me=ve.get(this,ee)-1,me?ve.set(this,ee,me):(this.removeEventListener(ee,ce),ve.remove(this,ee));else return!1},_default:function(me){return ve.get(me.target,z)},delegateType:ee},o.event.special[ee]={setup:function(){var me=this.ownerDocument||this.document||this,Se=B.documentMode?this:me,Ce=ve.get(Se,ee);Ce||(B.documentMode?this.addEventListener(ee,ce):me.addEventListener(z,ce,!0)),ve.set(Se,ee,(Ce||0)+1)},teardown:function(){var me=this.ownerDocument||this.document||this,Se=B.documentMode?this:me,Ce=ve.get(Se,ee)-1;Ce?ve.set(Se,ee,Ce):(B.documentMode?this.removeEventListener(ee,ce):me.removeEventListener(z,ce,!0),ve.remove(Se,ee))}}}),o.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(z,ee){o.event.special[z]={delegateType:ee,bindType:ee,handle:function(ce){var me,Se=this,Ce=ce.relatedTarget,Pe=ce.handleObj;return(!Ce||Ce!==Se&&!o.contains(Se,Ce))&&(ce.type=Pe.origType,me=Pe.handler.apply(this,arguments),ce.type=ee),me}}}),o.fn.extend({on:function(z,ee,ce,me){return He(this,z,ee,ce,me)},one:function(z,ee,ce,me){return He(this,z,ee,ce,me,1)},off:function(z,ee,ce){var me,Se;if(z&&z.preventDefault&&z.handleObj)return me=z.handleObj,o(z.delegateTarget).off(me.namespace?me.origType+"."+me.namespace:me.origType,me.selector,me.handler),this;if(typeof z=="object"){for(Se in z)this.off(Se,ee,z[Se]);return this}return(ee===!1||typeof ee=="function")&&(ce=ee,ee=void 0),ce===!1&&(ce=Pt),this.each(function(){o.event.remove(this,z,ce,ee)})}});var Ge=/<script|<style|<link/i,Re=/checked\s*(?:[^=]|=\s*.checked.)/i,Ne=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function ze(z,ee){return d(z,"table")&&d(ee.nodeType!==11?ee:ee.firstChild,"tr")&&o(z).children("tbody")[0]||z}function et(z){return z.type=(z.getAttribute("type")!==null)+"/"+z.type,z}function it(z){return(z.type||"").slice(0,5)==="true/"?z.type=z.type.slice(5):z.removeAttribute("type"),z}function at(z,ee){var ce,me,Se,Ce,Pe,$e,qe;if(ee.nodeType===1){if(ve.hasData(z)&&(Ce=ve.get(z),qe=Ce.events,qe)){ve.remove(ee,"handle events");for(Se in qe)for(ce=0,me=qe[Se].length;ce<me;ce++)o.event.add(ee,Se,qe[Se][ce])}Z.hasData(z)&&(Pe=Z.access(z),$e=o.extend({},Pe),Z.set(ee,$e))}}function vt(z,ee){var ce=ee.nodeName.toLowerCase();ce==="input"&&tt.test(z.type)?ee.checked=z.checked:(ce==="input"||ce==="textarea")&&(ee.defaultValue=z.defaultValue)}function jt(z,ee,ce,me){ee=y(ee);var Se,Ce,Pe,$e,qe,rt,_t=0,Mt=z.length,mt=Mt-1,Ut=ee[0],xr=H(Ut);if(xr||Mt>1&&typeof Ut=="string"&&!O.checkClone&&Re.test(Ut))return z.each(function(Cr){var er=z.eq(Cr);xr&&(ee[0]=Ut.call(this,Cr,er.html())),jt(er,ee,ce,me)});if(Mt&&(Se=$t(ee,z[0].ownerDocument,!1,z,me),Ce=Se.firstChild,Se.childNodes.length===1&&(Se=Ce),Ce||me)){for(Pe=o.map(Ct(Se,"script"),et),$e=Pe.length;_t<Mt;_t++)qe=Se,_t!==mt&&(qe=o.clone(qe,!0,!0),$e&&o.merge(Pe,Ct(qe,"script"))),ce.call(z[_t],qe,_t);if($e)for(rt=Pe[Pe.length-1].ownerDocument,o.map(Pe,it),_t=0;_t<$e;_t++)qe=Pe[_t],At.test(qe.type||"")&&!ve.access(qe,"globalEval")&&o.contains(rt,qe)&&(qe.src&&(qe.type||"").toLowerCase()!=="module"?o._evalUrl&&!qe.noModule&&o._evalUrl(qe.src,{nonce:qe.nonce||qe.getAttribute("nonce")},rt):U(qe.textContent.replace(Ne,""),qe,rt))}return z}function Nt(z,ee,ce){for(var me,Se=ee?o.filter(ee,z):z,Ce=0;(me=Se[Ce])!=null;Ce++)!ce&&me.nodeType===1&&o.cleanData(Ct(me)),me.parentNode&&(ce&&Ie(me)&&Bt(Ct(me,"script")),me.parentNode.removeChild(me));return z}o.extend({htmlPrefilter:function(z){return z},clone:function(z,ee,ce){var me,Se,Ce,Pe,$e=z.cloneNode(!0),qe=Ie(z);if(!O.noCloneChecked&&(z.nodeType===1||z.nodeType===11)&&!o.isXMLDoc(z))for(Pe=Ct($e),Ce=Ct(z),me=0,Se=Ce.length;me<Se;me++)vt(Ce[me],Pe[me]);if(ee)if(ce)for(Ce=Ce||Ct(z),Pe=Pe||Ct($e),me=0,Se=Ce.length;me<Se;me++)at(Ce[me],Pe[me]);else at(z,$e);return Pe=Ct($e,"script"),Pe.length>0&&Bt(Pe,!qe&&Ct(z,"script")),$e},cleanData:function(z){for(var ee,ce,me,Se=o.event.special,Ce=0;(ce=z[Ce])!==void 0;Ce++)if(he(ce)){if(ee=ce[ve.expando]){if(ee.events)for(me in ee.events)Se[me]?o.event.remove(ce,me):o.removeEvent(ce,me,ee.handle);ce[ve.expando]=void 0}ce[Z.expando]&&(ce[Z.expando]=void 0)}}}),o.fn.extend({detach:function(z){return Nt(this,z,!0)},remove:function(z){return Nt(this,z)},text:function(z){return fe(this,function(ee){return ee===void 0?o.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=ee)})},null,z,arguments.length)},append:function(){return jt(this,arguments,function(z){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var ee=ze(this,z);ee.appendChild(z)}})},prepend:function(){return jt(this,arguments,function(z){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var ee=ze(this,z);ee.insertBefore(z,ee.firstChild)}})},before:function(){return jt(this,arguments,function(z){this.parentNode&&this.parentNode.insertBefore(z,this)})},after:function(){return jt(this,arguments,function(z){this.parentNode&&this.parentNode.insertBefore(z,this.nextSibling)})},empty:function(){for(var z,ee=0;(z=this[ee])!=null;ee++)z.nodeType===1&&(o.cleanData(Ct(z,!1)),z.textContent="");return this},clone:function(z,ee){return z=z??!1,ee=ee??z,this.map(function(){return o.clone(this,z,ee)})},html:function(z){return fe(this,function(ee){var ce=this[0]||{},me=0,Se=this.length;if(ee===void 0&&ce.nodeType===1)return ce.innerHTML;if(typeof ee=="string"&&!Ge.test(ee)&&!Tt[(pt.exec(ee)||["",""])[1].toLowerCase()]){ee=o.htmlPrefilter(ee);try{for(;me<Se;me++)ce=this[me]||{},ce.nodeType===1&&(o.cleanData(Ct(ce,!1)),ce.innerHTML=ee);ce=0}catch{}}ce&&this.empty().append(ee)},null,z,arguments.length)},replaceWith:function(){var z=[];return jt(this,arguments,function(ee){var ce=this.parentNode;o.inArray(this,z)<0&&(o.cleanData(Ct(this)),ce&&ce.replaceChild(ee,this))},z)}}),o.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(z,ee){o.fn[z]=function(ce){for(var me,Se=[],Ce=o(ce),Pe=Ce.length-1,$e=0;$e<=Pe;$e++)me=$e===Pe?this:this.clone(!0),o(Ce[$e])[ee](me),T.apply(Se,me.get());return this.pushStack(Se)}});var Dt=new RegExp("^("+Ue+")(?!px)[a-z%]+$","i"),Gt=/^--/,or=function(z){var ee=z.ownerDocument.defaultView;return(!ee||!ee.opener)&&(ee=t),ee.getComputedStyle(z)},Jt=function(z,ee,ce){var me,Se,Ce={};for(Se in ee)Ce[Se]=z.style[Se],z.style[Se]=ee[Se];me=ce.call(z);for(Se in ee)z.style[Se]=Ce[Se];return me},pr=new RegExp(Ke.join("|"),"i");(function(){function z(){if(rt){qe.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",rt.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Te.appendChild(qe).appendChild(rt);var _t=t.getComputedStyle(rt);ce=_t.top!=="1%",$e=ee(_t.marginLeft)===12,rt.style.right="60%",Ce=ee(_t.right)===36,me=ee(_t.width)===36,rt.style.position="absolute",Se=ee(rt.offsetWidth/3)===12,Te.removeChild(qe),rt=null}}function ee(_t){return Math.round(parseFloat(_t))}var ce,me,Se,Ce,Pe,$e,qe=B.createElement("div"),rt=B.createElement("div");rt.style&&(rt.style.backgroundClip="content-box",rt.cloneNode(!0).style.backgroundClip="",O.clearCloneStyle=rt.style.backgroundClip==="content-box",o.extend(O,{boxSizingReliable:function(){return z(),me},pixelBoxStyles:function(){return z(),Ce},pixelPosition:function(){return z(),ce},reliableMarginLeft:function(){return z(),$e},scrollboxSize:function(){return z(),Se},reliableTrDimensions:function(){var _t,Mt,mt,Ut;return Pe==null&&(_t=B.createElement("table"),Mt=B.createElement("tr"),mt=B.createElement("div"),_t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Mt.style.cssText="box-sizing:content-box;border:1px solid",Mt.style.height="1px",mt.style.height="9px",mt.style.display="block",Te.appendChild(_t).appendChild(Mt).appendChild(mt),Ut=t.getComputedStyle(Mt),Pe=parseInt(Ut.height,10)+parseInt(Ut.borderTopWidth,10)+parseInt(Ut.borderBottomWidth,10)===Mt.offsetHeight,Te.removeChild(_t)),Pe}}))})();function lr(z,ee,ce){var me,Se,Ce,Pe,$e=Gt.test(ee),qe=z.style;return ce=ce||or(z),ce&&(Pe=ce.getPropertyValue(ee)||ce[ee],$e&&Pe&&(Pe=Pe.replace(v,"$1")||void 0),Pe===""&&!Ie(z)&&(Pe=o.style(z,ee)),!O.pixelBoxStyles()&&Dt.test(Pe)&&pr.test(ee)&&(me=qe.width,Se=qe.minWidth,Ce=qe.maxWidth,qe.minWidth=qe.maxWidth=qe.width=Pe,Pe=ce.width,qe.width=me,qe.minWidth=Se,qe.maxWidth=Ce)),Pe!==void 0?Pe+"":Pe}function Lr(z,ee){return{get:function(){if(z()){delete this.get;return}return(this.get=ee).apply(this,arguments)}}}var Or=["Webkit","Moz","ms"],Sn=B.createElement("div").style,Ht={};function sr(z){for(var ee=z[0].toUpperCase()+z.slice(1),ce=Or.length;ce--;)if(z=Or[ce]+ee,z in Sn)return z}function Sr(z){var ee=o.cssProps[z]||Ht[z];return ee||(z in Sn?z:Ht[z]=sr(z)||z)}var Fr=/^(none|table(?!-c[ea]).+)/,gr={position:"absolute",visibility:"hidden",display:"block"},tn={letterSpacing:"0",fontWeight:"400"};function Vn(z,ee,ce){var me=Qe.exec(ee);return me?Math.max(0,me[2]-(ce||0))+(me[3]||"px"):ee}function Rt(z,ee,ce,me,Se,Ce){var Pe=ee==="width"?1:0,$e=0,qe=0,rt=0;if(ce===(me?"border":"content"))return 0;for(;Pe<4;Pe+=2)ce==="margin"&&(rt+=o.css(z,ce+Ke[Pe],!0,Se)),me?(ce==="content"&&(qe-=o.css(z,"padding"+Ke[Pe],!0,Se)),ce!=="margin"&&(qe-=o.css(z,"border"+Ke[Pe]+"Width",!0,Se))):(qe+=o.css(z,"padding"+Ke[Pe],!0,Se),ce!=="padding"?qe+=o.css(z,"border"+Ke[Pe]+"Width",!0,Se):$e+=o.css(z,"border"+Ke[Pe]+"Width",!0,Se));return!me&&Ce>=0&&(qe+=Math.max(0,Math.ceil(z["offset"+ee[0].toUpperCase()+ee.slice(1)]-Ce-qe-$e-.5))||0),qe+rt}function Ur(z,ee,ce){var me=or(z),Se=!O.boxSizingReliable()||ce,Ce=Se&&o.css(z,"boxSizing",!1,me)==="border-box",Pe=Ce,$e=lr(z,ee,me),qe="offset"+ee[0].toUpperCase()+ee.slice(1);if(Dt.test($e)){if(!ce)return $e;$e="auto"}return(!O.boxSizingReliable()&&Ce||!O.reliableTrDimensions()&&d(z,"tr")||$e==="auto"||!parseFloat($e)&&o.css(z,"display",!1,me)==="inline")&&z.getClientRects().length&&(Ce=o.css(z,"boxSizing",!1,me)==="border-box",Pe=qe in z,Pe&&($e=z[qe])),$e=parseFloat($e)||0,$e+Rt(z,ee,ce||(Ce?"border":"content"),Pe,me,$e)+"px"}o.extend({cssHooks:{opacity:{get:function(z,ee){if(ee){var ce=lr(z,"opacity");return ce===""?"1":ce}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(z,ee,ce,me){if(!(!z||z.nodeType===3||z.nodeType===8||!z.style)){var Se,Ce,Pe,$e=de(ee),qe=Gt.test(ee),rt=z.style;if(qe||(ee=Sr($e)),Pe=o.cssHooks[ee]||o.cssHooks[$e],ce!==void 0){if(Ce=typeof ce,Ce==="string"&&(Se=Qe.exec(ce))&&Se[1]&&(ce=dt(z,ee,Se),Ce="number"),ce==null||ce!==ce)return;Ce==="number"&&!qe&&(ce+=Se&&Se[3]||(o.cssNumber[$e]?"":"px")),!O.clearCloneStyle&&ce===""&&ee.indexOf("background")===0&&(rt[ee]="inherit"),(!Pe||!("set"in Pe)||(ce=Pe.set(z,ce,me))!==void 0)&&(qe?rt.setProperty(ee,ce):rt[ee]=ce)}else return Pe&&"get"in Pe&&(Se=Pe.get(z,!1,me))!==void 0?Se:rt[ee]}},css:function(z,ee,ce,me){var Se,Ce,Pe,$e=de(ee),qe=Gt.test(ee);return qe||(ee=Sr($e)),Pe=o.cssHooks[ee]||o.cssHooks[$e],Pe&&"get"in Pe&&(Se=Pe.get(z,!0,ce)),Se===void 0&&(Se=lr(z,ee,me)),Se==="normal"&&ee in tn&&(Se=tn[ee]),ce===""||ce?(Ce=parseFloat(Se),ce===!0||isFinite(Ce)?Ce||0:Se):Se}}),o.each(["height","width"],function(z,ee){o.cssHooks[ee]={get:function(ce,me,Se){if(me)return Fr.test(o.css(ce,"display"))&&(!ce.getClientRects().length||!ce.getBoundingClientRect().width)?Jt(ce,gr,function(){return Ur(ce,ee,Se)}):Ur(ce,ee,Se)},set:function(ce,me,Se){var Ce,Pe=or(ce),$e=!O.scrollboxSize()&&Pe.position==="absolute",qe=$e||Se,rt=qe&&o.css(ce,"boxSizing",!1,Pe)==="border-box",_t=Se?Rt(ce,ee,Se,rt,Pe):0;return rt&&$e&&(_t-=Math.ceil(ce["offset"+ee[0].toUpperCase()+ee.slice(1)]-parseFloat(Pe[ee])-Rt(ce,ee,"border",!1,Pe)-.5)),_t&&(Ce=Qe.exec(me))&&(Ce[3]||"px")!=="px"&&(ce.style[ee]=me,me=o.css(ce,ee)),Vn(ce,me,_t)}}}),o.cssHooks.marginLeft=Lr(O.reliableMarginLeft,function(z,ee){if(ee)return(parseFloat(lr(z,"marginLeft"))||z.getBoundingClientRect().left-Jt(z,{marginLeft:0},function(){return z.getBoundingClientRect().left}))+"px"}),o.each({margin:"",padding:"",border:"Width"},function(z,ee){o.cssHooks[z+ee]={expand:function(ce){for(var me=0,Se={},Ce=typeof ce=="string"?ce.split(" "):[ce];me<4;me++)Se[z+Ke[me]+ee]=Ce[me]||Ce[me-2]||Ce[0];return Se}},z!=="margin"&&(o.cssHooks[z+ee].set=Vn)}),o.fn.extend({css:function(z,ee){return fe(this,function(ce,me,Se){var Ce,Pe,$e={},qe=0;if(Array.isArray(me)){for(Ce=or(ce),Pe=me.length;qe<Pe;qe++)$e[me[qe]]=o.css(ce,me[qe],!1,Ce);return $e}return Se!==void 0?o.style(ce,me,Se):o.css(ce,me)},z,ee,arguments.length>1)}});function Zr(z,ee,ce,me,Se){return new Zr.prototype.init(z,ee,ce,me,Se)}o.Tween=Zr,Zr.prototype={constructor:Zr,init:function(z,ee,ce,me,Se,Ce){this.elem=z,this.prop=ce,this.easing=Se||o.easing._default,this.options=ee,this.start=this.now=this.cur(),this.end=me,this.unit=Ce||(o.cssNumber[ce]?"":"px")},cur:function(){var z=Zr.propHooks[this.prop];return z&&z.get?z.get(this):Zr.propHooks._default.get(this)},run:function(z){var ee,ce=Zr.propHooks[this.prop];return this.options.duration?this.pos=ee=o.easing[this.easing](z,this.options.duration*z,0,1,this.options.duration):this.pos=ee=z,this.now=(this.end-this.start)*ee+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),ce&&ce.set?ce.set(this):Zr.propHooks._default.set(this),this}},Zr.prototype.init.prototype=Zr.prototype,Zr.propHooks={_default:{get:function(z){var ee;return z.elem.nodeType!==1||z.elem[z.prop]!=null&&z.elem.style[z.prop]==null?z.elem[z.prop]:(ee=o.css(z.elem,z.prop,""),!ee||ee==="auto"?0:ee)},set:function(z){o.fx.step[z.prop]?o.fx.step[z.prop](z):z.elem.nodeType===1&&(o.cssHooks[z.prop]||z.elem.style[Sr(z.prop)]!=null)?o.style(z.elem,z.prop,z.now+z.unit):z.elem[z.prop]=z.now}}},Zr.propHooks.scrollTop=Zr.propHooks.scrollLeft={set:function(z){z.elem.nodeType&&z.elem.parentNode&&(z.elem[z.prop]=z.now)}},o.easing={linear:function(z){return z},swing:function(z){return .5-Math.cos(z*Math.PI)/2},_default:"swing"},o.fx=Zr.prototype.init,o.fx.step={};var xn,Tr,Wn=/^(?:toggle|show|hide)$/,mn=/queueHooks$/;function Pr(){Tr&&(B.hidden===!1&&t.requestAnimationFrame?t.requestAnimationFrame(Pr):t.setTimeout(Pr,o.fx.interval),o.fx.tick())}function qr(){return t.setTimeout(function(){xn=void 0}),xn=Date.now()}function Hn(z,ee){var ce,me=0,Se={height:z};for(ee=ee?1:0;me<4;me+=2-ee)ce=Ke[me],Se["margin"+ce]=Se["padding"+ce]=z;return ee&&(Se.opacity=Se.width=z),Se}function nn(z,ee,ce){for(var me,Se=(Br.tweeners[ee]||[]).concat(Br.tweeners["*"]),Ce=0,Pe=Se.length;Ce<Pe;Ce++)if(me=Se[Ce].call(ce,ee,z))return me}function jn(z,ee,ce){var me,Se,Ce,Pe,$e,qe,rt,_t,Mt="width"in ee||"height"in ee,mt=this,Ut={},xr=z.style,Cr=z.nodeType&&nt(z),er=ve.get(z,"fxshow");ce.queue||(Pe=o._queueHooks(z,"fx"),Pe.unqueued==null&&(Pe.unqueued=0,$e=Pe.empty.fire,Pe.empty.fire=function(){Pe.unqueued||$e()}),Pe.unqueued++,mt.always(function(){mt.always(function(){Pe.unqueued--,o.queue(z,"fx").length||Pe.empty.fire()})}));for(me in ee)if(Se=ee[me],Wn.test(Se)){if(delete ee[me],Ce=Ce||Se==="toggle",Se===(Cr?"hide":"show"))if(Se==="show"&&er&&er[me]!==void 0)Cr=!0;else continue;Ut[me]=er&&er[me]||o.style(z,me)}if(qe=!o.isEmptyObject(ee),!(!qe&&o.isEmptyObject(Ut))){Mt&&z.nodeType===1&&(ce.overflow=[xr.overflow,xr.overflowX,xr.overflowY],rt=er&&er.display,rt==null&&(rt=ve.get(z,"display")),_t=o.css(z,"display"),_t==="none"&&(rt?_t=rt:(xt([z],!0),rt=z.style.display||rt,_t=o.css(z,"display"),xt([z]))),(_t==="inline"||_t==="inline-block"&&rt!=null)&&o.css(z,"float")==="none"&&(qe||(mt.done(function(){xr.display=rt}),rt==null&&(_t=xr.display,rt=_t==="none"?"":_t)),xr.display="inline-block")),ce.overflow&&(xr.overflow="hidden",mt.always(function(){xr.overflow=ce.overflow[0],xr.overflowX=ce.overflow[1],xr.overflowY=ce.overflow[2]})),qe=!1;for(me in Ut)qe||(er?"hidden"in er&&(Cr=er.hidden):er=ve.access(z,"fxshow",{display:rt}),Ce&&(er.hidden=!Cr),Cr&&xt([z],!0),mt.done(function(){Cr||xt([z]),ve.remove(z,"fxshow");for(me in Ut)o.style(z,me,Ut[me])})),qe=nn(Cr?er[me]:0,me,mt),me in er||(er[me]=qe.start,Cr&&(qe.end=qe.start,qe.start=0))}}function dr(z,ee){var ce,me,Se,Ce,Pe;for(ce in z)if(me=de(ce),Se=ee[me],Ce=z[ce],Array.isArray(Ce)&&(Se=Ce[1],Ce=z[ce]=Ce[0]),ce!==me&&(z[me]=Ce,delete z[ce]),Pe=o.cssHooks[me],Pe&&"expand"in Pe){Ce=Pe.expand(Ce),delete z[me];for(ce in Ce)ce in z||(z[ce]=Ce[ce],ee[ce]=Se)}else ee[me]=Se}function Br(z,ee,ce){var me,Se,Ce=0,Pe=Br.prefilters.length,$e=o.Deferred().always(function(){delete qe.elem}),qe=function(){if(Se)return!1;for(var Mt=xn||qr(),mt=Math.max(0,rt.startTime+rt.duration-Mt),Ut=mt/rt.duration||0,xr=1-Ut,Cr=0,er=rt.tweens.length;Cr<er;Cr++)rt.tweens[Cr].run(xr);return $e.notifyWith(z,[rt,xr,mt]),xr<1&&er?mt:(er||$e.notifyWith(z,[rt,1,0]),$e.resolveWith(z,[rt]),!1)},rt=$e.promise({elem:z,props:o.extend({},ee),opts:o.extend(!0,{specialEasing:{},easing:o.easing._default},ce),originalProperties:ee,originalOptions:ce,startTime:xn||qr(),duration:ce.duration,tweens:[],createTween:function(Mt,mt){var Ut=o.Tween(z,rt.opts,Mt,mt,rt.opts.specialEasing[Mt]||rt.opts.easing);return rt.tweens.push(Ut),Ut},stop:function(Mt){var mt=0,Ut=Mt?rt.tweens.length:0;if(Se)return this;for(Se=!0;mt<Ut;mt++)rt.tweens[mt].run(1);return Mt?($e.notifyWith(z,[rt,1,0]),$e.resolveWith(z,[rt,Mt])):$e.rejectWith(z,[rt,Mt]),this}}),_t=rt.props;for(dr(_t,rt.opts.specialEasing);Ce<Pe;Ce++)if(me=Br.prefilters[Ce].call(rt,z,_t,rt.opts),me)return H(me.stop)&&(o._queueHooks(rt.elem,rt.opts.queue).stop=me.stop.bind(me)),me;return o.map(_t,nn,rt),H(rt.opts.start)&&rt.opts.start.call(z,rt),rt.progress(rt.opts.progress).done(rt.opts.done,rt.opts.complete).fail(rt.opts.fail).always(rt.opts.always),o.fx.timer(o.extend(qe,{elem:z,anim:rt,queue:rt.opts.queue})),rt}o.Animation=o.extend(Br,{tweeners:{"*":[function(z,ee){var ce=this.createTween(z,ee);return dt(ce.elem,z,Qe.exec(ee),ce),ce}]},tweener:function(z,ee){H(z)?(ee=z,z=["*"]):z=z.match(L);for(var ce,me=0,Se=z.length;me<Se;me++)ce=z[me],Br.tweeners[ce]=Br.tweeners[ce]||[],Br.tweeners[ce].unshift(ee)},prefilters:[jn],prefilter:function(z,ee){ee?Br.prefilters.unshift(z):Br.prefilters.push(z)}}),o.speed=function(z,ee,ce){var me=z&&typeof z=="object"?o.extend({},z):{complete:ce||!ce&&ee||H(z)&&z,duration:z,easing:ce&&ee||ee&&!H(ee)&&ee};return o.fx.off?me.duration=0:typeof me.duration!="number"&&(me.duration in o.fx.speeds?me.duration=o.fx.speeds[me.duration]:me.duration=o.fx.speeds._default),(me.queue==null||me.queue===!0)&&(me.queue="fx"),me.old=me.complete,me.complete=function(){H(me.old)&&me.old.call(this),me.queue&&o.dequeue(this,me.queue)},me},o.fn.extend({fadeTo:function(z,ee,ce,me){return this.filter(nt).css("opacity",0).show().end().animate({opacity:ee},z,ce,me)},animate:function(z,ee,ce,me){var Se=o.isEmptyObject(z),Ce=o.speed(ee,ce,me),Pe=function(){var $e=Br(this,o.extend({},z),Ce);(Se||ve.get(this,"finish"))&&$e.stop(!0)};return Pe.finish=Pe,Se||Ce.queue===!1?this.each(Pe):this.queue(Ce.queue,Pe)},stop:function(z,ee,ce){var me=function(Se){var Ce=Se.stop;delete Se.stop,Ce(ce)};return typeof z!="string"&&(ce=ee,ee=z,z=void 0),ee&&this.queue(z||"fx",[]),this.each(function(){var Se=!0,Ce=z!=null&&z+"queueHooks",Pe=o.timers,$e=ve.get(this);if(Ce)$e[Ce]&&$e[Ce].stop&&me($e[Ce]);else for(Ce in $e)$e[Ce]&&$e[Ce].stop&&mn.test(Ce)&&me($e[Ce]);for(Ce=Pe.length;Ce--;)Pe[Ce].elem===this&&(z==null||Pe[Ce].queue===z)&&(Pe[Ce].anim.stop(ce),Se=!1,Pe.splice(Ce,1));(Se||!ce)&&o.dequeue(this,z)})},finish:function(z){return z!==!1&&(z=z||"fx"),this.each(function(){var ee,ce=ve.get(this),me=ce[z+"queue"],Se=ce[z+"queueHooks"],Ce=o.timers,Pe=me?me.length:0;for(ce.finish=!0,o.queue(this,z,[]),Se&&Se.stop&&Se.stop.call(this,!0),ee=Ce.length;ee--;)Ce[ee].elem===this&&Ce[ee].queue===z&&(Ce[ee].anim.stop(!0),Ce.splice(ee,1));for(ee=0;ee<Pe;ee++)me[ee]&&me[ee].finish&&me[ee].finish.call(this);delete ce.finish})}}),o.each(["toggle","show","hide"],function(z,ee){var ce=o.fn[ee];o.fn[ee]=function(me,Se,Ce){return me==null||typeof me=="boolean"?ce.apply(this,arguments):this.animate(Hn(ee,!0),me,Se,Ce)}}),o.each({slideDown:Hn("show"),slideUp:Hn("hide"),slideToggle:Hn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(z,ee){o.fn[z]=function(ce,me,Se){return this.animate(ee,ce,me,Se)}}),o.timers=[],o.fx.tick=function(){var z,ee=0,ce=o.timers;for(xn=Date.now();ee<ce.length;ee++)z=ce[ee],!z()&&ce[ee]===z&&ce.splice(ee--,1);ce.length||o.fx.stop(),xn=void 0},o.fx.timer=function(z){o.timers.push(z),o.fx.start()},o.fx.interval=13,o.fx.start=function(){Tr||(Tr=!0,Pr())},o.fx.stop=function(){Tr=null},o.fx.speeds={slow:600,fast:200,_default:400},o.fn.delay=function(z,ee){return z=o.fx&&o.fx.speeds[z]||z,ee=ee||"fx",this.queue(ee,function(ce,me){var Se=t.setTimeout(ce,z);me.stop=function(){t.clearTimeout(Se)}})},function(){var z=B.createElement("input"),ee=B.createElement("select"),ce=ee.appendChild(B.createElement("option"));z.type="checkbox",O.checkOn=z.value!=="",O.optSelected=ce.selected,z=B.createElement("input"),z.value="t",z.type="radio",O.radioValue=z.value==="t"}();var kr,Ar=o.expr.attrHandle;o.fn.extend({attr:function(z,ee){return fe(this,o.attr,z,ee,arguments.length>1)},removeAttr:function(z){return this.each(function(){o.removeAttr(this,z)})}}),o.extend({attr:function(z,ee,ce){var me,Se,Ce=z.nodeType;if(!(Ce===3||Ce===8||Ce===2)){if(typeof z.getAttribute>"u")return o.prop(z,ee,ce);if((Ce!==1||!o.isXMLDoc(z))&&(Se=o.attrHooks[ee.toLowerCase()]||(o.expr.match.bool.test(ee)?kr:void 0)),ce!==void 0){if(ce===null){o.removeAttr(z,ee);return}return Se&&"set"in Se&&(me=Se.set(z,ce,ee))!==void 0?me:(z.setAttribute(ee,ce+""),ce)}return Se&&"get"in Se&&(me=Se.get(z,ee))!==null?me:(me=o.find.attr(z,ee),me??void 0)}},attrHooks:{type:{set:function(z,ee){if(!O.radioValue&&ee==="radio"&&d(z,"input")){var ce=z.value;return z.setAttribute("type",ee),ce&&(z.value=ce),ee}}}},removeAttr:function(z,ee){var ce,me=0,Se=ee&&ee.match(L);if(Se&&z.nodeType===1)for(;ce=Se[me++];)z.removeAttribute(ce)}}),kr={set:function(z,ee,ce){return ee===!1?o.removeAttr(z,ce):z.setAttribute(ce,ce),ce}},o.each(o.expr.match.bool.source.match(/\w+/g),function(z,ee){var ce=Ar[ee]||o.find.attr;Ar[ee]=function(me,Se,Ce){var Pe,$e,qe=Se.toLowerCase();return Ce||($e=Ar[qe],Ar[qe]=Pe,Pe=ce(me,Se,Ce)!=null?qe:null,Ar[qe]=$e),Pe}});var ni=/^(?:input|select|textarea|button)$/i,kn=/^(?:a|area)$/i;o.fn.extend({prop:function(z,ee){return fe(this,o.prop,z,ee,arguments.length>1)},removeProp:function(z){return this.each(function(){delete this[o.propFix[z]||z]})}}),o.extend({prop:function(z,ee,ce){var me,Se,Ce=z.nodeType;if(!(Ce===3||Ce===8||Ce===2))return(Ce!==1||!o.isXMLDoc(z))&&(ee=o.propFix[ee]||ee,Se=o.propHooks[ee]),ce!==void 0?Se&&"set"in Se&&(me=Se.set(z,ce,ee))!==void 0?me:z[ee]=ce:Se&&"get"in Se&&(me=Se.get(z,ee))!==null?me:z[ee]},propHooks:{tabIndex:{get:function(z){var ee=o.find.attr(z,"tabindex");return ee?parseInt(ee,10):ni.test(z.nodeName)||kn.test(z.nodeName)&&z.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),O.optSelected||(o.propHooks.selected={get:function(z){var ee=z.parentNode;return ee&&ee.parentNode&&ee.parentNode.selectedIndex,null},set:function(z){var ee=z.parentNode;ee&&(ee.selectedIndex,ee.parentNode&&ee.parentNode.selectedIndex)}}),o.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){o.propFix[this.toLowerCase()]=this});function $r(z){var ee=z.match(L)||[];return ee.join(" ")}function bn(z){return z.getAttribute&&z.getAttribute("class")||""}function on(z){return Array.isArray(z)?z:typeof z=="string"?z.match(L)||[]:[]}o.fn.extend({addClass:function(z){var ee,ce,me,Se,Ce,Pe;return H(z)?this.each(function($e){o(this).addClass(z.call(this,$e,bn(this)))}):(ee=on(z),ee.length?this.each(function(){if(me=bn(this),ce=this.nodeType===1&&" "+$r(me)+" ",ce){for(Ce=0;Ce<ee.length;Ce++)Se=ee[Ce],ce.indexOf(" "+Se+" ")<0&&(ce+=Se+" ");Pe=$r(ce),me!==Pe&&this.setAttribute("class",Pe)}}):this)},removeClass:function(z){var ee,ce,me,Se,Ce,Pe;return H(z)?this.each(function($e){o(this).removeClass(z.call(this,$e,bn(this)))}):arguments.length?(ee=on(z),ee.length?this.each(function(){if(me=bn(this),ce=this.nodeType===1&&" "+$r(me)+" ",ce){for(Ce=0;Ce<ee.length;Ce++)for(Se=ee[Ce];ce.indexOf(" "+Se+" ")>-1;)ce=ce.replace(" "+Se+" "," ");Pe=$r(ce),me!==Pe&&this.setAttribute("class",Pe)}}):this):this.attr("class","")},toggleClass:function(z,ee){var ce,me,Se,Ce,Pe=typeof z,$e=Pe==="string"||Array.isArray(z);return H(z)?this.each(function(qe){o(this).toggleClass(z.call(this,qe,bn(this),ee),ee)}):typeof ee=="boolean"&&$e?ee?this.addClass(z):this.removeClass(z):(ce=on(z),this.each(function(){if($e)for(Ce=o(this),Se=0;Se<ce.length;Se++)me=ce[Se],Ce.hasClass(me)?Ce.removeClass(me):Ce.addClass(me);else(z===void 0||Pe==="boolean")&&(me=bn(this),me&&ve.set(this,"__className__",me),this.setAttribute&&this.setAttribute("class",me||z===!1?"":ve.get(this,"__className__")||""))}))},hasClass:function(z){var ee,ce,me=0;for(ee=" "+z+" ";ce=this[me++];)if(ce.nodeType===1&&(" "+$r(bn(ce))+" ").indexOf(ee)>-1)return!0;return!1}});var Ui=/\r/g;o.fn.extend({val:function(z){var ee,ce,me,Se=this[0];return arguments.length?(me=H(z),this.each(function(Ce){var Pe;this.nodeType===1&&(me?Pe=z.call(this,Ce,o(this).val()):Pe=z,Pe==null?Pe="":typeof Pe=="number"?Pe+="":Array.isArray(Pe)&&(Pe=o.map(Pe,function($e){return $e==null?"":$e+""})),ee=o.valHooks[this.type]||o.valHooks[this.nodeName.toLowerCase()],(!ee||!("set"in ee)||ee.set(this,Pe,"value")===void 0)&&(this.value=Pe))})):Se?(ee=o.valHooks[Se.type]||o.valHooks[Se.nodeName.toLowerCase()],ee&&"get"in ee&&(ce=ee.get(Se,"value"))!==void 0?ce:(ce=Se.value,typeof ce=="string"?ce.replace(Ui,""):ce??"")):void 0}}),o.extend({valHooks:{option:{get:function(z){var ee=o.find.attr(z,"value");return ee??$r(o.text(z))}},select:{get:function(z){var ee,ce,me,Se=z.options,Ce=z.selectedIndex,Pe=z.type==="select-one",$e=Pe?null:[],qe=Pe?Ce+1:Se.length;for(Ce<0?me=qe:me=Pe?Ce:0;me<qe;me++)if(ce=Se[me],(ce.selected||me===Ce)&&!ce.disabled&&(!ce.parentNode.disabled||!d(ce.parentNode,"optgroup"))){if(ee=o(ce).val(),Pe)return ee;$e.push(ee)}return $e},set:function(z,ee){for(var ce,me,Se=z.options,Ce=o.makeArray(ee),Pe=Se.length;Pe--;)me=Se[Pe],(me.selected=o.inArray(o.valHooks.option.get(me),Ce)>-1)&&(ce=!0);return ce||(z.selectedIndex=-1),Ce}}}}),o.each(["radio","checkbox"],function(){o.valHooks[this]={set:function(z,ee){if(Array.isArray(ee))return z.checked=o.inArray(o(z).val(),ee)>-1}},O.checkOn||(o.valHooks[this].get=function(z){return z.getAttribute("value")===null?"on":z.value})});var ln=t.location,Ai={guid:Date.now()},fn=/\?/;o.parseXML=function(z){var ee,ce;if(!z||typeof z!="string")return null;try{ee=new t.DOMParser().parseFromString(z,"text/xml")}catch{}return ce=ee&&ee.getElementsByTagName("parsererror")[0],(!ee||ce)&&o.error("Invalid XML: "+(ce?o.map(ce.childNodes,function(me){return me.textContent}).join(`
`):z)),ee};var Ji=/^(?:focusinfocus|focusoutblur)$/,ii=function(z){z.stopPropagation()};o.extend(o.event,{trigger:function(z,ee,ce,me){var Se,Ce,Pe,$e,qe,rt,_t,Mt,mt=[ce||B],Ut=G.call(z,"type")?z.type:z,xr=G.call(z,"namespace")?z.namespace.split("."):[];if(Ce=Mt=Pe=ce=ce||B,!(ce.nodeType===3||ce.nodeType===8)&&!Ji.test(Ut+o.event.triggered)&&(Ut.indexOf(".")>-1&&(xr=Ut.split("."),Ut=xr.shift(),xr.sort()),qe=Ut.indexOf(":")<0&&"on"+Ut,z=z[o.expando]?z:new o.Event(Ut,typeof z=="object"&&z),z.isTrigger=me?2:3,z.namespace=xr.join("."),z.rnamespace=z.namespace?new RegExp("(^|\\.)"+xr.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,z.result=void 0,z.target||(z.target=ce),ee=ee==null?[z]:o.makeArray(ee,[z]),_t=o.event.special[Ut]||{},!(!me&&_t.trigger&&_t.trigger.apply(ce,ee)===!1))){if(!me&&!_t.noBubble&&!q(ce)){for($e=_t.delegateType||Ut,Ji.test($e+Ut)||(Ce=Ce.parentNode);Ce;Ce=Ce.parentNode)mt.push(Ce),Pe=Ce;Pe===(ce.ownerDocument||B)&&mt.push(Pe.defaultView||Pe.parentWindow||t)}for(Se=0;(Ce=mt[Se++])&&!z.isPropagationStopped();)Mt=Ce,z.type=Se>1?$e:_t.bindType||Ut,rt=(ve.get(Ce,"events")||Object.create(null))[z.type]&&ve.get(Ce,"handle"),rt&&rt.apply(Ce,ee),rt=qe&&Ce[qe],rt&&rt.apply&&he(Ce)&&(z.result=rt.apply(Ce,ee),z.result===!1&&z.preventDefault());return z.type=Ut,!me&&!z.isDefaultPrevented()&&(!_t._default||_t._default.apply(mt.pop(),ee)===!1)&&he(ce)&&qe&&H(ce[Ut])&&!q(ce)&&(Pe=ce[qe],Pe&&(ce[qe]=null),o.event.triggered=Ut,z.isPropagationStopped()&&Mt.addEventListener(Ut,ii),ce[Ut](),z.isPropagationStopped()&&Mt.removeEventListener(Ut,ii),o.event.triggered=void 0,Pe&&(ce[qe]=Pe)),z.result}},simulate:function(z,ee,ce){var me=o.extend(new o.Event,ce,{type:z,isSimulated:!0});o.event.trigger(me,null,ee)}}),o.fn.extend({trigger:function(z,ee){return this.each(function(){o.event.trigger(z,ee,this)})},triggerHandler:function(z,ee){var ce=this[0];if(ce)return o.event.trigger(z,ee,ce,!0)}});var eo=/\[\]$/,Bi=/\r?\n/g,to=/^(?:submit|button|image|reset|file)$/i,ha=/^(?:input|select|textarea|keygen)/i;function di(z,ee,ce,me){var Se;if(Array.isArray(ee))o.each(ee,function(Ce,Pe){ce||eo.test(z)?me(z,Pe):di(z+"["+(typeof Pe=="object"&&Pe!=null?Ce:"")+"]",Pe,ce,me)});else if(!ce&&i(ee)==="object")for(Se in ee)di(z+"["+Se+"]",ee[Se],ce,me);else me(z,ee)}o.param=function(z,ee){var ce,me=[],Se=function(Ce,Pe){var $e=H(Pe)?Pe():Pe;me[me.length]=encodeURIComponent(Ce)+"="+encodeURIComponent($e??"")};if(z==null)return"";if(Array.isArray(z)||z.jquery&&!o.isPlainObject(z))o.each(z,function(){Se(this.name,this.value)});else for(ce in z)di(ce,z[ce],ee,Se);return me.join("&")},o.fn.extend({serialize:function(){return o.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var z=o.prop(this,"elements");return z?o.makeArray(z):this}).filter(function(){var z=this.type;return this.name&&!o(this).is(":disabled")&&ha.test(this.nodeName)&&!to.test(z)&&(this.checked||!tt.test(z))}).map(function(z,ee){var ce=o(this).val();return ce==null?null:Array.isArray(ce)?o.map(ce,function(me){return{name:ee.name,value:me.replace(Bi,`\r
`)}}):{name:ee.name,value:ce.replace(Bi,`\r
`)}}).get()}});var ro=/%20/g,$o=/#.*$/,Xo=/([?&])_=[^&]*/,an=/^(.*?):[ \t]*([^\r\n]*)$/mg,qi=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,za=/^(?:GET|HEAD)$/,ci=/^\/\//,no={},ho={},Ci="*/".concat("*"),To=B.createElement("a");To.href=ln.href;function Wi(z){return function(ee,ce){typeof ee!="string"&&(ce=ee,ee="*");var me,Se=0,Ce=ee.toLowerCase().match(L)||[];if(H(ce))for(;me=Ce[Se++];)me[0]==="+"?(me=me.slice(1)||"*",(z[me]=z[me]||[]).unshift(ce)):(z[me]=z[me]||[]).push(ce)}}function po(z,ee,ce,me){var Se={},Ce=z===ho;function Pe($e){var qe;return Se[$e]=!0,o.each(z[$e]||[],function(rt,_t){var Mt=_t(ee,ce,me);if(typeof Mt=="string"&&!Ce&&!Se[Mt])return ee.dataTypes.unshift(Mt),Pe(Mt),!1;if(Ce)return!(qe=Mt)}),qe}return Pe(ee.dataTypes[0])||!Se["*"]&&Pe("*")}function oe(z,ee){var ce,me,Se=o.ajaxSettings.flatOptions||{};for(ce in ee)ee[ce]!==void 0&&((Se[ce]?z:me||(me={}))[ce]=ee[ce]);return me&&o.extend(!0,z,me),z}function Me(z,ee,ce){for(var me,Se,Ce,Pe,$e=z.contents,qe=z.dataTypes;qe[0]==="*";)qe.shift(),me===void 0&&(me=z.mimeType||ee.getResponseHeader("Content-Type"));if(me){for(Se in $e)if($e[Se]&&$e[Se].test(me)){qe.unshift(Se);break}}if(qe[0]in ce)Ce=qe[0];else{for(Se in ce){if(!qe[0]||z.converters[Se+" "+qe[0]]){Ce=Se;break}Pe||(Pe=Se)}Ce=Ce||Pe}if(Ce)return Ce!==qe[0]&&qe.unshift(Ce),ce[Ce]}function We(z,ee,ce,me){var Se,Ce,Pe,$e,qe,rt={},_t=z.dataTypes.slice();if(_t[1])for(Pe in z.converters)rt[Pe.toLowerCase()]=z.converters[Pe];for(Ce=_t.shift();Ce;)if(z.responseFields[Ce]&&(ce[z.responseFields[Ce]]=ee),!qe&&me&&z.dataFilter&&(ee=z.dataFilter(ee,z.dataType)),qe=Ce,Ce=_t.shift(),Ce){if(Ce==="*")Ce=qe;else if(qe!=="*"&&qe!==Ce){if(Pe=rt[qe+" "+Ce]||rt["* "+Ce],!Pe){for(Se in rt)if($e=Se.split(" "),$e[1]===Ce&&(Pe=rt[qe+" "+$e[0]]||rt["* "+$e[0]],Pe)){Pe===!0?Pe=rt[Se]:rt[Se]!==!0&&(Ce=$e[0],_t.unshift($e[1]));break}}if(Pe!==!0)if(Pe&&z.throws)ee=Pe(ee);else try{ee=Pe(ee)}catch(Mt){return{state:"parsererror",error:Pe?Mt:"No conversion from "+qe+" to "+Ce}}}}return{state:"success",data:ee}}o.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ln.href,type:"GET",isLocal:qi.test(ln.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ci,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":o.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(z,ee){return ee?oe(oe(z,o.ajaxSettings),ee):oe(o.ajaxSettings,z)},ajaxPrefilter:Wi(no),ajaxTransport:Wi(ho),ajax:function(z,ee){typeof z=="object"&&(ee=z,z=void 0),ee=ee||{};var ce,me,Se,Ce,Pe,$e,qe,rt,_t,Mt,mt=o.ajaxSetup({},ee),Ut=mt.context||mt,xr=mt.context&&(Ut.nodeType||Ut.jquery)?o(Ut):o.event,Cr=o.Deferred(),er=o.Callbacks("once memory"),En=mt.statusCode||{},Tn={},$n={},Mn="canceled",Rr={readyState:0,getResponseHeader:function(Hr){var Mr;if(qe){if(!Ce)for(Ce={};Mr=an.exec(Se);)Ce[Mr[1].toLowerCase()+" "]=(Ce[Mr[1].toLowerCase()+" "]||[]).concat(Mr[2]);Mr=Ce[Hr.toLowerCase()+" "]}return Mr==null?null:Mr.join(", ")},getAllResponseHeaders:function(){return qe?Se:null},setRequestHeader:function(Hr,Mr){return qe==null&&(Hr=$n[Hr.toLowerCase()]=$n[Hr.toLowerCase()]||Hr,Tn[Hr]=Mr),this},overrideMimeType:function(Hr){return qe==null&&(mt.mimeType=Hr),this},statusCode:function(Hr){var Mr;if(Hr)if(qe)Rr.always(Hr[Rr.status]);else for(Mr in Hr)En[Mr]=[En[Mr],Hr[Mr]];return this},abort:function(Hr){var Mr=Hr||Mn;return ce&&ce.abort(Mr),Qn(0,Mr),this}};if(Cr.promise(Rr),mt.url=((z||mt.url||ln.href)+"").replace(ci,ln.protocol+"//"),mt.type=ee.method||ee.type||mt.method||mt.type,mt.dataTypes=(mt.dataType||"*").toLowerCase().match(L)||[""],mt.crossDomain==null){$e=B.createElement("a");try{$e.href=mt.url,$e.href=$e.href,mt.crossDomain=To.protocol+"//"+To.host!=$e.protocol+"//"+$e.host}catch{mt.crossDomain=!0}}if(mt.data&&mt.processData&&typeof mt.data!="string"&&(mt.data=o.param(mt.data,mt.traditional)),po(no,mt,ee,Rr),qe)return Rr;rt=o.event&&mt.global,rt&&o.active++===0&&o.event.trigger("ajaxStart"),mt.type=mt.type.toUpperCase(),mt.hasContent=!za.test(mt.type),me=mt.url.replace($o,""),mt.hasContent?mt.data&&mt.processData&&(mt.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(mt.data=mt.data.replace(ro,"+")):(Mt=mt.url.slice(me.length),mt.data&&(mt.processData||typeof mt.data=="string")&&(me+=(fn.test(me)?"&":"?")+mt.data,delete mt.data),mt.cache===!1&&(me=me.replace(Xo,"$1"),Mt=(fn.test(me)?"&":"?")+"_="+Ai.guid+++Mt),mt.url=me+Mt),mt.ifModified&&(o.lastModified[me]&&Rr.setRequestHeader("If-Modified-Since",o.lastModified[me]),o.etag[me]&&Rr.setRequestHeader("If-None-Match",o.etag[me])),(mt.data&&mt.hasContent&&mt.contentType!==!1||ee.contentType)&&Rr.setRequestHeader("Content-Type",mt.contentType),Rr.setRequestHeader("Accept",mt.dataTypes[0]&&mt.accepts[mt.dataTypes[0]]?mt.accepts[mt.dataTypes[0]]+(mt.dataTypes[0]!=="*"?", "+Ci+"; q=0.01":""):mt.accepts["*"]);for(_t in mt.headers)Rr.setRequestHeader(_t,mt.headers[_t]);if(mt.beforeSend&&(mt.beforeSend.call(Ut,Rr,mt)===!1||qe))return Rr.abort();if(Mn="abort",er.add(mt.complete),Rr.done(mt.success),Rr.fail(mt.error),ce=po(ho,mt,ee,Rr),!ce)Qn(-1,"No Transport");else{if(Rr.readyState=1,rt&&xr.trigger("ajaxSend",[Rr,mt]),qe)return Rr;mt.async&&mt.timeout>0&&(Pe=t.setTimeout(function(){Rr.abort("timeout")},mt.timeout));try{qe=!1,ce.send(Tn,Qn)}catch(Hr){if(qe)throw Hr;Qn(-1,Hr)}}function Qn(Hr,Mr,_n,io){var zn,In,Pn,hn,ji,Kr=Mr;qe||(qe=!0,Pe&&t.clearTimeout(Pe),ce=void 0,Se=io||"",Rr.readyState=Hr>0?4:0,zn=Hr>=200&&Hr<300||Hr===304,_n&&(hn=Me(mt,Rr,_n)),!zn&&o.inArray("script",mt.dataTypes)>-1&&o.inArray("json",mt.dataTypes)<0&&(mt.converters["text script"]=function(){}),hn=We(mt,hn,Rr,zn),zn?(mt.ifModified&&(ji=Rr.getResponseHeader("Last-Modified"),ji&&(o.lastModified[me]=ji),ji=Rr.getResponseHeader("etag"),ji&&(o.etag[me]=ji)),Hr===204||mt.type==="HEAD"?Kr="nocontent":Hr===304?Kr="notmodified":(Kr=hn.state,In=hn.data,Pn=hn.error,zn=!Pn)):(Pn=Kr,(Hr||!Kr)&&(Kr="error",Hr<0&&(Hr=0))),Rr.status=Hr,Rr.statusText=(Mr||Kr)+"",zn?Cr.resolveWith(Ut,[In,Kr,Rr]):Cr.rejectWith(Ut,[Rr,Kr,Pn]),Rr.statusCode(En),En=void 0,rt&&xr.trigger(zn?"ajaxSuccess":"ajaxError",[Rr,mt,zn?In:Pn]),er.fireWith(Ut,[Rr,Kr]),rt&&(xr.trigger("ajaxComplete",[Rr,mt]),--o.active||o.event.trigger("ajaxStop")))}return Rr},getJSON:function(z,ee,ce){return o.get(z,ee,ce,"json")},getScript:function(z,ee){return o.get(z,void 0,ee,"script")}}),o.each(["get","post"],function(z,ee){o[ee]=function(ce,me,Se,Ce){return H(me)&&(Ce=Ce||Se,Se=me,me=void 0),o.ajax(o.extend({url:ce,type:ee,dataType:Ce,data:me,success:Se},o.isPlainObject(ce)&&ce))}}),o.ajaxPrefilter(function(z){var ee;for(ee in z.headers)ee.toLowerCase()==="content-type"&&(z.contentType=z.headers[ee]||"")}),o._evalUrl=function(z,ee,ce){return o.ajax({url:z,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(me){o.globalEval(me,ee,ce)}})},o.fn.extend({wrapAll:function(z){var ee;return this[0]&&(H(z)&&(z=z.call(this[0])),ee=o(z,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&ee.insertBefore(this[0]),ee.map(function(){for(var ce=this;ce.firstElementChild;)ce=ce.firstElementChild;return ce}).append(this)),this},wrapInner:function(z){return H(z)?this.each(function(ee){o(this).wrapInner(z.call(this,ee))}):this.each(function(){var ee=o(this),ce=ee.contents();ce.length?ce.wrapAll(z):ee.append(z)})},wrap:function(z){var ee=H(z);return this.each(function(ce){o(this).wrapAll(ee?z.call(this,ce):z)})},unwrap:function(z){return this.parent(z).not("body").each(function(){o(this).replaceWith(this.childNodes)}),this}}),o.expr.pseudos.hidden=function(z){return!o.expr.pseudos.visible(z)},o.expr.pseudos.visible=function(z){return!!(z.offsetWidth||z.offsetHeight||z.getClientRects().length)},o.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch{}};var Ve={0:200,1223:204},ot=o.ajaxSettings.xhr();O.cors=!!ot&&"withCredentials"in ot,O.ajax=ot=!!ot,o.ajaxTransport(function(z){var ee,ce;if(O.cors||ot&&!z.crossDomain)return{send:function(me,Se){var Ce,Pe=z.xhr();if(Pe.open(z.type,z.url,z.async,z.username,z.password),z.xhrFields)for(Ce in z.xhrFields)Pe[Ce]=z.xhrFields[Ce];z.mimeType&&Pe.overrideMimeType&&Pe.overrideMimeType(z.mimeType),!z.crossDomain&&!me["X-Requested-With"]&&(me["X-Requested-With"]="XMLHttpRequest");for(Ce in me)Pe.setRequestHeader(Ce,me[Ce]);ee=function($e){return function(){ee&&(ee=ce=Pe.onload=Pe.onerror=Pe.onabort=Pe.ontimeout=Pe.onreadystatechange=null,$e==="abort"?Pe.abort():$e==="error"?typeof Pe.status!="number"?Se(0,"error"):Se(Pe.status,Pe.statusText):Se(Ve[Pe.status]||Pe.status,Pe.statusText,(Pe.responseType||"text")!=="text"||typeof Pe.responseText!="string"?{binary:Pe.response}:{text:Pe.responseText},Pe.getAllResponseHeaders()))}},Pe.onload=ee(),ce=Pe.onerror=Pe.ontimeout=ee("error"),Pe.onabort!==void 0?Pe.onabort=ce:Pe.onreadystatechange=function(){Pe.readyState===4&&t.setTimeout(function(){ee&&ce()})},ee=ee("abort");try{Pe.send(z.hasContent&&z.data||null)}catch($e){if(ee)throw $e}},abort:function(){ee&&ee()}}}),o.ajaxPrefilter(function(z){z.crossDomain&&(z.contents.script=!1)}),o.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(z){return o.globalEval(z),z}}}),o.ajaxPrefilter("script",function(z){z.cache===void 0&&(z.cache=!1),z.crossDomain&&(z.type="GET")}),o.ajaxTransport("script",function(z){if(z.crossDomain||z.scriptAttrs){var ee,ce;return{send:function(me,Se){ee=o("<script>").attr(z.scriptAttrs||{}).prop({charset:z.scriptCharset,src:z.url}).on("load error",ce=function(Ce){ee.remove(),ce=null,Ce&&Se(Ce.type==="error"?404:200,Ce.type)}),B.head.appendChild(ee[0])},abort:function(){ce&&ce()}}}});var ct=[],Ye=/(=)\?(?=&|$)|\?\?/;o.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var z=ct.pop()||o.expando+"_"+Ai.guid++;return this[z]=!0,z}}),o.ajaxPrefilter("json jsonp",function(z,ee,ce){var me,Se,Ce,Pe=z.jsonp!==!1&&(Ye.test(z.url)?"url":typeof z.data=="string"&&(z.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Ye.test(z.data)&&"data");if(Pe||z.dataTypes[0]==="jsonp")return me=z.jsonpCallback=H(z.jsonpCallback)?z.jsonpCallback():z.jsonpCallback,Pe?z[Pe]=z[Pe].replace(Ye,"$1"+me):z.jsonp!==!1&&(z.url+=(fn.test(z.url)?"&":"?")+z.jsonp+"="+me),z.converters["script json"]=function(){return Ce||o.error(me+" was not called"),Ce[0]},z.dataTypes[0]="json",Se=t[me],t[me]=function(){Ce=arguments},ce.always(function(){Se===void 0?o(t).removeProp(me):t[me]=Se,z[me]&&(z.jsonpCallback=ee.jsonpCallback,ct.push(me)),Ce&&H(Se)&&Se(Ce[0]),Ce=Se=void 0}),"script"}),O.createHTMLDocument=function(){var z=B.implementation.createHTMLDocument("").body;return z.innerHTML="<form></form><form></form>",z.childNodes.length===2}(),o.parseHTML=function(z,ee,ce){if(typeof z!="string")return[];typeof ee=="boolean"&&(ce=ee,ee=!1);var me,Se,Ce;return ee||(O.createHTMLDocument?(ee=B.implementation.createHTMLDocument(""),me=ee.createElement("base"),me.href=B.location.href,ee.head.appendChild(me)):ee=B),Se=E.exec(z),Ce=!ce&&[],Se?[ee.createElement(Se[1])]:(Se=$t([z],ee,Ce),Ce&&Ce.length&&o(Ce).remove(),o.merge([],Se.childNodes))},o.fn.load=function(z,ee,ce){var me,Se,Ce,Pe=this,$e=z.indexOf(" ");return $e>-1&&(me=$r(z.slice($e)),z=z.slice(0,$e)),H(ee)?(ce=ee,ee=void 0):ee&&typeof ee=="object"&&(Se="POST"),Pe.length>0&&o.ajax({url:z,type:Se||"GET",dataType:"html",data:ee}).done(function(qe){Ce=arguments,Pe.html(me?o("<div>").append(o.parseHTML(qe)).find(me):qe)}).always(ce&&function(qe,rt){Pe.each(function(){ce.apply(this,Ce||[qe.responseText,rt,qe])})}),this},o.expr.pseudos.animated=function(z){return o.grep(o.timers,function(ee){return z===ee.elem}).length},o.offset={setOffset:function(z,ee,ce){var me,Se,Ce,Pe,$e,qe,rt,_t=o.css(z,"position"),Mt=o(z),mt={};_t==="static"&&(z.style.position="relative"),$e=Mt.offset(),Ce=o.css(z,"top"),qe=o.css(z,"left"),rt=(_t==="absolute"||_t==="fixed")&&(Ce+qe).indexOf("auto")>-1,rt?(me=Mt.position(),Pe=me.top,Se=me.left):(Pe=parseFloat(Ce)||0,Se=parseFloat(qe)||0),H(ee)&&(ee=ee.call(z,ce,o.extend({},$e))),ee.top!=null&&(mt.top=ee.top-$e.top+Pe),ee.left!=null&&(mt.left=ee.left-$e.left+Se),"using"in ee?ee.using.call(z,mt):Mt.css(mt)}},o.fn.extend({offset:function(z){if(arguments.length)return z===void 0?this:this.each(function(Se){o.offset.setOffset(this,z,Se)});var ee,ce,me=this[0];if(me)return me.getClientRects().length?(ee=me.getBoundingClientRect(),ce=me.ownerDocument.defaultView,{top:ee.top+ce.pageYOffset,left:ee.left+ce.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var z,ee,ce,me=this[0],Se={top:0,left:0};if(o.css(me,"position")==="fixed")ee=me.getBoundingClientRect();else{for(ee=this.offset(),ce=me.ownerDocument,z=me.offsetParent||ce.documentElement;z&&(z===ce.body||z===ce.documentElement)&&o.css(z,"position")==="static";)z=z.parentNode;z&&z!==me&&z.nodeType===1&&(Se=o(z).offset(),Se.top+=o.css(z,"borderTopWidth",!0),Se.left+=o.css(z,"borderLeftWidth",!0))}return{top:ee.top-Se.top-o.css(me,"marginTop",!0),left:ee.left-Se.left-o.css(me,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var z=this.offsetParent;z&&o.css(z,"position")==="static";)z=z.offsetParent;return z||Te})}}),o.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(z,ee){var ce=ee==="pageYOffset";o.fn[z]=function(me){return fe(this,function(Se,Ce,Pe){var $e;if(q(Se)?$e=Se:Se.nodeType===9&&($e=Se.defaultView),Pe===void 0)return $e?$e[ee]:Se[Ce];$e?$e.scrollTo(ce?$e.pageXOffset:Pe,ce?Pe:$e.pageYOffset):Se[Ce]=Pe},z,me,arguments.length)}}),o.each(["top","left"],function(z,ee){o.cssHooks[ee]=Lr(O.pixelPosition,function(ce,me){if(me)return me=lr(ce,ee),Dt.test(me)?o(ce).position()[ee]+"px":me})}),o.each({Height:"height",Width:"width"},function(z,ee){o.each({padding:"inner"+z,content:ee,"":"outer"+z},function(ce,me){o.fn[me]=function(Se,Ce){var Pe=arguments.length&&(ce||typeof Se!="boolean"),$e=ce||(Se===!0||Ce===!0?"margin":"border");return fe(this,function(qe,rt,_t){var Mt;return q(qe)?me.indexOf("outer")===0?qe["inner"+z]:qe.document.documentElement["client"+z]:qe.nodeType===9?(Mt=qe.documentElement,Math.max(qe.body["scroll"+z],Mt["scroll"+z],qe.body["offset"+z],Mt["offset"+z],Mt["client"+z])):_t===void 0?o.css(qe,rt,$e):o.style(qe,rt,_t,$e)},ee,Pe?Se:void 0,Pe)}})}),o.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(z,ee){o.fn[ee]=function(ce){return this.on(ee,ce)}}),o.fn.extend({bind:function(z,ee,ce){return this.on(z,null,ee,ce)},unbind:function(z,ee){return this.off(z,null,ee)},delegate:function(z,ee,ce,me){return this.on(ee,z,ce,me)},undelegate:function(z,ee,ce){return arguments.length===1?this.off(z,"**"):this.off(ee,z||"**",ce)},hover:function(z,ee){return this.on("mouseenter",z).on("mouseleave",ee||z)}}),o.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(z,ee){o.fn[ee]=function(ce,me){return arguments.length>0?this.on(ee,null,ce,me):this.trigger(ee)}});var st=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;o.proxy=function(z,ee){var ce,me,Se;if(typeof ee=="string"&&(ce=z[ee],ee=z,z=ce),!!H(z))return me=g.call(arguments,2),Se=function(){return z.apply(ee||this,me.concat(g.call(arguments)))},Se.guid=z.guid=z.guid||o.guid++,Se},o.holdReady=function(z){z?o.readyWait++:o.ready(!0)},o.isArray=Array.isArray,o.parseJSON=JSON.parse,o.nodeName=d,o.isFunction=H,o.isWindow=q,o.camelCase=de,o.type=i,o.now=Date.now,o.isNumeric=function(z){var ee=o.type(z);return(ee==="number"||ee==="string")&&!isNaN(z-parseFloat(z))},o.trim=function(z){return z==null?"":(z+"").replace(st,"$1")},typeof define=="function"&&define.amd&&define("jquery",[],function(){return o});var wt=t.jQuery,St=t.$;return o.noConflict=function(z){return t.$===o&&(t.$=St),z&&t.jQuery===o&&(t.jQuery=wt),o},typeof n>"u"&&(t.jQuery=t.$=o),o})});var i5=ys(A0=>{"use strict";Object.defineProperty(A0,"__esModule",{value:!0});A0.Md5=void 0;var n5=function(){function t(){this._dataLength=0,this._bufferLength=0,this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}return t.hashStr=function(n,a){return a===void 0&&(a=!1),this.onePassHasher.start().appendStr(n).end(a)},t.hashAsciiStr=function(n,a){return a===void 0&&(a=!1),this.onePassHasher.start().appendAsciiStr(n).end(a)},t._hex=function(n){var a=t.hexChars,u=t.hexOut,g,y,T,k;for(k=0;k<4;k+=1)for(y=k*8,g=n[k],T=0;T<8;T+=2)u[y+1+T]=a.charAt(g&15),g>>>=4,u[y+0+T]=a.charAt(g&15),g>>>=4;return u.join("")},t._md5cycle=function(n,a){var u=n[0],g=n[1],y=n[2],T=n[3];u+=(g&y|~g&T)+a[0]-680876936|0,u=(u<<7|u>>>25)+g|0,T+=(u&g|~u&y)+a[1]-389564586|0,T=(T<<12|T>>>20)+u|0,y+=(T&u|~T&g)+a[2]+606105819|0,y=(y<<17|y>>>15)+T|0,g+=(y&T|~y&u)+a[3]-1044525330|0,g=(g<<22|g>>>10)+y|0,u+=(g&y|~g&T)+a[4]-176418897|0,u=(u<<7|u>>>25)+g|0,T+=(u&g|~u&y)+a[5]+1200080426|0,T=(T<<12|T>>>20)+u|0,y+=(T&u|~T&g)+a[6]-1473231341|0,y=(y<<17|y>>>15)+T|0,g+=(y&T|~y&u)+a[7]-45705983|0,g=(g<<22|g>>>10)+y|0,u+=(g&y|~g&T)+a[8]+1770035416|0,u=(u<<7|u>>>25)+g|0,T+=(u&g|~u&y)+a[9]-1958414417|0,T=(T<<12|T>>>20)+u|0,y+=(T&u|~T&g)+a[10]-42063|0,y=(y<<17|y>>>15)+T|0,g+=(y&T|~y&u)+a[11]-1990404162|0,g=(g<<22|g>>>10)+y|0,u+=(g&y|~g&T)+a[12]+1804603682|0,u=(u<<7|u>>>25)+g|0,T+=(u&g|~u&y)+a[13]-40341101|0,T=(T<<12|T>>>20)+u|0,y+=(T&u|~T&g)+a[14]-1502002290|0,y=(y<<17|y>>>15)+T|0,g+=(y&T|~y&u)+a[15]+1236535329|0,g=(g<<22|g>>>10)+y|0,u+=(g&T|y&~T)+a[1]-165796510|0,u=(u<<5|u>>>27)+g|0,T+=(u&y|g&~y)+a[6]-1069501632|0,T=(T<<9|T>>>23)+u|0,y+=(T&g|u&~g)+a[11]+643717713|0,y=(y<<14|y>>>18)+T|0,g+=(y&u|T&~u)+a[0]-373897302|0,g=(g<<20|g>>>12)+y|0,u+=(g&T|y&~T)+a[5]-701558691|0,u=(u<<5|u>>>27)+g|0,T+=(u&y|g&~y)+a[10]+38016083|0,T=(T<<9|T>>>23)+u|0,y+=(T&g|u&~g)+a[15]-660478335|0,y=(y<<14|y>>>18)+T|0,g+=(y&u|T&~u)+a[4]-405537848|0,g=(g<<20|g>>>12)+y|0,u+=(g&T|y&~T)+a[9]+568446438|0,u=(u<<5|u>>>27)+g|0,T+=(u&y|g&~y)+a[14]-1019803690|0,T=(T<<9|T>>>23)+u|0,y+=(T&g|u&~g)+a[3]-187363961|0,y=(y<<14|y>>>18)+T|0,g+=(y&u|T&~u)+a[8]+1163531501|0,g=(g<<20|g>>>12)+y|0,u+=(g&T|y&~T)+a[13]-1444681467|0,u=(u<<5|u>>>27)+g|0,T+=(u&y|g&~y)+a[2]-51403784|0,T=(T<<9|T>>>23)+u|0,y+=(T&g|u&~g)+a[7]+1735328473|0,y=(y<<14|y>>>18)+T|0,g+=(y&u|T&~u)+a[12]-1926607734|0,g=(g<<20|g>>>12)+y|0,u+=(g^y^T)+a[5]-378558|0,u=(u<<4|u>>>28)+g|0,T+=(u^g^y)+a[8]-2022574463|0,T=(T<<11|T>>>21)+u|0,y+=(T^u^g)+a[11]+1839030562|0,y=(y<<16|y>>>16)+T|0,g+=(y^T^u)+a[14]-35309556|0,g=(g<<23|g>>>9)+y|0,u+=(g^y^T)+a[1]-1530992060|0,u=(u<<4|u>>>28)+g|0,T+=(u^g^y)+a[4]+1272893353|0,T=(T<<11|T>>>21)+u|0,y+=(T^u^g)+a[7]-155497632|0,y=(y<<16|y>>>16)+T|0,g+=(y^T^u)+a[10]-1094730640|0,g=(g<<23|g>>>9)+y|0,u+=(g^y^T)+a[13]+681279174|0,u=(u<<4|u>>>28)+g|0,T+=(u^g^y)+a[0]-358537222|0,T=(T<<11|T>>>21)+u|0,y+=(T^u^g)+a[3]-722521979|0,y=(y<<16|y>>>16)+T|0,g+=(y^T^u)+a[6]+76029189|0,g=(g<<23|g>>>9)+y|0,u+=(g^y^T)+a[9]-640364487|0,u=(u<<4|u>>>28)+g|0,T+=(u^g^y)+a[12]-421815835|0,T=(T<<11|T>>>21)+u|0,y+=(T^u^g)+a[15]+530742520|0,y=(y<<16|y>>>16)+T|0,g+=(y^T^u)+a[2]-995338651|0,g=(g<<23|g>>>9)+y|0,u+=(y^(g|~T))+a[0]-198630844|0,u=(u<<6|u>>>26)+g|0,T+=(g^(u|~y))+a[7]+1126891415|0,T=(T<<10|T>>>22)+u|0,y+=(u^(T|~g))+a[14]-1416354905|0,y=(y<<15|y>>>17)+T|0,g+=(T^(y|~u))+a[5]-57434055|0,g=(g<<21|g>>>11)+y|0,u+=(y^(g|~T))+a[12]+1700485571|0,u=(u<<6|u>>>26)+g|0,T+=(g^(u|~y))+a[3]-1894986606|0,T=(T<<10|T>>>22)+u|0,y+=(u^(T|~g))+a[10]-1051523|0,y=(y<<15|y>>>17)+T|0,g+=(T^(y|~u))+a[1]-2054922799|0,g=(g<<21|g>>>11)+y|0,u+=(y^(g|~T))+a[8]+1873313359|0,u=(u<<6|u>>>26)+g|0,T+=(g^(u|~y))+a[15]-30611744|0,T=(T<<10|T>>>22)+u|0,y+=(u^(T|~g))+a[6]-1560198380|0,y=(y<<15|y>>>17)+T|0,g+=(T^(y|~u))+a[13]+1309151649|0,g=(g<<21|g>>>11)+y|0,u+=(y^(g|~T))+a[4]-145523070|0,u=(u<<6|u>>>26)+g|0,T+=(g^(u|~y))+a[11]-1120210379|0,T=(T<<10|T>>>22)+u|0,y+=(u^(T|~g))+a[2]+718787259|0,y=(y<<15|y>>>17)+T|0,g+=(T^(y|~u))+a[9]-343485551|0,g=(g<<21|g>>>11)+y|0,n[0]=u+n[0]|0,n[1]=g+n[1]|0,n[2]=y+n[2]|0,n[3]=T+n[3]|0},t.prototype.start=function(){return this._dataLength=0,this._bufferLength=0,this._state.set(t.stateIdentity),this},t.prototype.appendStr=function(n){var a=this._buffer8,u=this._buffer32,g=this._bufferLength,y,T;for(T=0;T<n.length;T+=1){if(y=n.charCodeAt(T),y<128)a[g++]=y;else if(y<2048)a[g++]=(y>>>6)+192,a[g++]=y&63|128;else if(y<55296||y>56319)a[g++]=(y>>>12)+224,a[g++]=y>>>6&63|128,a[g++]=y&63|128;else{if(y=(y-55296)*1024+(n.charCodeAt(++T)-56320)+65536,y>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");a[g++]=(y>>>18)+240,a[g++]=y>>>12&63|128,a[g++]=y>>>6&63|128,a[g++]=y&63|128}g>=64&&(this._dataLength+=64,t._md5cycle(this._state,u),g-=64,u[0]=u[16])}return this._bufferLength=g,this},t.prototype.appendAsciiStr=function(n){for(var a=this._buffer8,u=this._buffer32,g=this._bufferLength,y,T=0;;){for(y=Math.min(n.length-T,64-g);y--;)a[g++]=n.charCodeAt(T++);if(g<64)break;this._dataLength+=64,t._md5cycle(this._state,u),g=0}return this._bufferLength=g,this},t.prototype.appendByteArray=function(n){for(var a=this._buffer8,u=this._buffer32,g=this._bufferLength,y,T=0;;){for(y=Math.min(n.length-T,64-g);y--;)a[g++]=n[T++];if(g<64)break;this._dataLength+=64,t._md5cycle(this._state,u),g=0}return this._bufferLength=g,this},t.prototype.getState=function(){var n=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[n[0],n[1],n[2],n[3]]}},t.prototype.setState=function(n){var a=n.buffer,u=n.state,g=this._state,y;for(this._dataLength=n.length,this._bufferLength=n.buflen,g[0]=u[0],g[1]=u[1],g[2]=u[2],g[3]=u[3],y=0;y<a.length;y+=1)this._buffer8[y]=a.charCodeAt(y)},t.prototype.end=function(n){n===void 0&&(n=!1);var a=this._bufferLength,u=this._buffer8,g=this._buffer32,y=(a>>2)+1;this._dataLength+=a;var T=this._dataLength*8;if(u[a]=128,u[a+1]=u[a+2]=u[a+3]=0,g.set(t.buffer32Identity.subarray(y),y),a>55&&(t._md5cycle(this._state,g),g.set(t.buffer32Identity)),T<=4294967295)g[14]=T;else{var k=T.toString(16).match(/(.*?)(.{0,8})$/);if(k===null)return;var V=parseInt(k[2],16),F=parseInt(k[1],16)||0;g[14]=V,g[15]=F}return t._md5cycle(this._state,g),n?this._state:t._hex(this._state)},t.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]),t.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),t.hexChars="0123456789abcdef",t.hexOut=[],t.onePassHasher=new t,t}();A0.Md5=n5;if(n5.hashStr("hello")!=="5d41402abc4b2a76b9719d911017c592")throw new Error("Md5 self test failed.")});var vx=`<div class="row">
  <div class="columns medium-12">
    <div (click)="interactedWithViewer()" id="litemol" style="width: 100%; height: 427px; margin-top: 10px; position: relative"></div>
  </div>
</div>
`;var gx="";var _x=Wa(bx());var nA=function(t,n,a,u){var g=arguments.length,y=g<3?n:u===null?u=Object.getOwnPropertyDescriptor(n,a):u,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,n,a,u);else for(var k=t.length-1;k>=0;k--)(T=t[k])&&(y=(g<3?T(y):g>3?T(n,a,y):T(n,a))||y);return g>3&&y&&Object.defineProperty(n,a,y),y},iA=ja.pdb_base_url,$f,Xf=($f=class{constructor(n){Xe(this,"googleAnalyticsService");Xe(this,"_plugin");Xe(this,"_selectedXRef");Xe(this,"_hasInteracted");this.googleAnalyticsService=n,this._hasInteracted=!1}ngOnChanges(n){this._plugin&&n.selectedXRef&&this.loadMolecule()}ngOnInit(){this._plugin=_x.default.Plugin.create({target:"#litemol",viewportBackground:"#fbfbfb",layoutState:{hideControls:!0,isExpanded:!1},allowAnalytics:!0}),this.loadMolecule()}loadMolecule(){this.plugin.clear(),this._plugin.loadMolecule({id:this._selectedXRef,url:iA+"/static/entry/"+this._selectedXRef.toLowerCase()+"_updated.cif",format:"cif"}),this._hasInteracted=!1}interactedWithViewer(){this._hasInteracted||(this.googleAnalyticsService.fireInteractionWithViewerEvent(ai.LiteMolViewer_Interaction,this._selectedXRef),this._hasInteracted=!0)}get plugin(){return this._plugin}set plugin(n){this._plugin=n}get selectedXRef(){return this._selectedXRef}set selectedXRef(n){this._selectedXRef=n}},Xe($f,"ctorParameters",()=>[{type:bi}]),Xe($f,"propDecorators",{selectedXRef:[{type:Yt}]}),$f);Xf=nA([yr({selector:"cp-litmol-viewer",template:vx,styles:[gx]})],Xf);var wx=`@if (isDataLoaded) {
  <div class="row">
    <div class="cloumns medium-12 no-pad-left">
      <h3>3D Structure</h3>
      <div class="columns medium-8 no-pad-left">
        @if (selectedXRef) {
          <cp-litmol-viewer [selectedXRef]="selectedXRef"></cp-litmol-viewer>
        }
      </div>
      <div class="columns medium-4">
        <h4>Curated structures ({{crossReferences.length}}):</h4>
        <table class="hover">
          <tbody style="height: 400px; overflow-y: scroll;">
            @for (crossReference of crossReferences | slice:0:displayedElements; track crossReference.identifier) {
              <tr>
                <td>
                  <a (click)="selectXRef(crossReference.identifier)">{{crossReference.identifier}}</a>
                </td>
                <td>
                  <a href="{{crossReference.searchURL}}" target="_blank"><img src="assets/images/pdbe_min_logo.png"> <i
                  class="icon icon-generic small" data-icon="x"></i></a>
                </td>
              </tr>
            }
            @if (displayedElements < crossReferences.length) {
              <tr class="text-center" style="background: white">
                <td>
                  <a class="label" (click)="displayedElements = crossReferences.length">Show all</a>
                </td>
              </tr>
            }
          </tbody>
        </table>
      </div>
    </div>
  </div>
}
`;var Cx="";var sA=function(t,n,a,u){var g=arguments.length,y=g<3?n:u===null?u=Object.getOwnPropertyDescriptor(n,a):u,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,n,a,u);else for(var k=t.length-1;k>=0;k--)(T=t[k])&&(y=(g<3?T(y):g>3?T(n,a,y):T(n,a))||y);return g>3&&y&&Object.defineProperty(n,a,y),y},Yf,Zf=(Yf=class{constructor(){Xe(this,"_crossReferences");Xe(this,"_selectedXRef");Xe(this,"_isDataLoaded",!1);Xe(this,"_displayedElements",5)}ngOnInit(){this.selectFirstXref()}selectFirstXref(){this._crossReferences[0].identifier&&(this._selectedXRef=this._crossReferences[0].identifier,this._isDataLoaded=!0)}get crossReferences(){return this._crossReferences}set crossReferences(n){this._crossReferences=n}selectXRef(n){this._selectedXRef=n}get selectedXRef(){return this._selectedXRef}set selectedXRef(n){this._selectedXRef=n}get isDataLoaded(){return this._isDataLoaded}set isDataLoaded(n){this._isDataLoaded=n}get displayedElements(){return this._displayedElements}set displayedElements(n){this._displayedElements=n}},Xe(Yf,"ctorParameters",()=>[]),Xe(Yf,"propDecorators",{crossReferences:[{type:Yt}]}),Yf);Zf=sA([yr({selector:"cp-pdb-crossreferences",template:wx,styles:[Cx]})],Zf);var Sx=`@if (isDataLoaded) {
  <div class="row">
    <div class="columns medium-12 margin-top-medium no-pad-left">
      <h3>Further Reading</h3>
      <table class="hover">
        <thead>
          <th>Identifier</th>
          <th>Title</th>
          <th>Author(s)</th>
        </thead>
        <tbody>
          @for (publication of publications; track publication.id) {
            <tr>
              <td><a href="{{publication.url}}" target="_blank">{{publication.id}} <i class="icon icon-generic small" data-icon="x"></i></a></td>
              <td>{{publication.title}}</td>
              <td>{{publication.authors}}</td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  </div>
}
`;var Ex="";var lA=function(t,n,a,u){var g=arguments.length,y=g<3?n:u===null?u=Object.getOwnPropertyDescriptor(n,a):u,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,n,a,u);else for(var k=t.length-1;k>=0;k--)(T=t[k])&&(y=(g<3?T(y):g>3?T(n,a,y):T(n,a))||y);return g>3&&y&&Object.defineProperty(n,a,y),y},Kf,Qf=(Kf=class{constructor(n,a,u){Xe(this,"euroPmcService");Xe(this,"notificationService");Xe(this,"googleAnalyticsService");Xe(this,"_crossReferences");Xe(this,"_publications",[]);Xe(this,"_isDataLoaded",!1);this.euroPmcService=n,this.notificationService=a,this.googleAnalyticsService=u}ngOnInit(){this.findXRefs()}findXRefs(){for(let n=0;n<this.crossReferences.length;n++)this.euroPmcService.getPublicationInformation(this.crossReferences[n].identifier).subscribe(a=>this.publicationFactory(this.crossReferences[n],a),a=>{this._isDataLoaded=!1,this.notificationService.onAPIRequestError("Euro PMC"),this.googleAnalyticsService.fireAPIRequestErrorEvent(ai.complexportal_details,a.status?a.status:"unknown")}),n===this.crossReferences.length-1&&(this._isDataLoaded=!0)}publicationFactory(n,a){this.publications.push({id:n.identifier,title:a.resultList.result[0].title,authors:a.resultList.result[0].authorString,url:n.searchURL})}get crossReferences(){return this._crossReferences}set crossReferences(n){this._crossReferences=n}get publications(){return this._publications}set publications(n){this._publications=n}get isDataLoaded(){return this._isDataLoaded}set isDataLoaded(n){this._isDataLoaded=n}},Xe(Kf,"ctorParameters",()=>[{type:qf},{type:Po},{type:bi}]),Xe(Kf,"propDecorators",{crossReferences:[{type:Yt}]}),Kf);Qf=lA([yr({selector:"cp-euro-pmc-crossreferences",template:Sx,styles:[Ex]})],Qf);var Tx=`<div class="row">
  <div class="columns medium-12 no-pad-left">
    <h3>Catalytic Activity</h3>
    @if (intenzCrossReferences && intenzCrossReferences.length > 0) {
      <div>
        <h4>EC Numbers ({{intenzCrossReferences.length}})</h4>
        <table class="hover">
          <tbody>
            @for (intenzCrossReference of intenzCrossReferences | slice:0:displayedIntenzElements; track intenzCrossReference.identifier) {
              <tr>
                <td>
                  <a href="{{intenzCrossReference.enzymeURL}}" target="_blank">{{intenzCrossReference.identifier}} <i
                  class="icon icon-generic small" data-icon="x"></i></a>
                </td>
              </tr>
            }
            @if (displayedIntenzElements < intenzCrossReferences.length) {
              <tr class="text-center" style="background: white">
                <td>
                  <a class="label" (click)="displayedIntenzElements = intenzCrossReferences.length">Show all</a>
                </td>
              </tr>
            }
            @if (displayedIntenzElements < intenzCrossReferences.length) {
              <tr class="text-center" style="background: white">
                <td>
                  <a class="label" (click)="displayedIntenzElements = intenzCrossReferences.length">Show all</a>
                </td>
              </tr>
            }
          </tbody>
        </table>
      </div>
    }
    @if (rheaCrossReferences && rheaCrossReferences.length > 0) {
      <div>
        <h4>Rhea Cross References ({{rheaCrossReferences.length}})</h4>
        <table class="hover">
          <tbody>
            @for (rheaCrossReference of rheaCrossReferences | slice:0:displayedRheaElements; track rheaCrossReference.identifier; let i = $index) {
              <tr>
                <td>
                  <div>
                    <a href="{{rheaCrossReference.crossReference.searchURL}}" target="_blank">{{rheaCrossReference.crossReference.identifier}} <i
                    class="icon icon-generic small" data-icon="x"></i></a>
                    <button class="button float-right"  (click)="toggleRheaDisplayedProperty(i)">
                      {{rheaCrossReference.displayed ? 'Hide' : 'Show'}} Rhea reaction
                    </button>
                  </div>
                  @if (rheaCrossReference.displayed) {
                    <div>
                      <rhea-reaction rheaid="{{rheaCrossReference.identifier}}" showids nosource="true"></rhea-reaction>
                    </div>
                  }
                </td>
              </tr>
            }
            @if (displayedRheaElements < rheaCrossReferences.length) {
              <tr class="text-center" style="background: white">
                <td>
                  <a class="label" (click)="displayedRheaElements = rheaCrossReferences.length">Show all</a>
                </td>
              </tr>
            }
          </tbody>
        </table>
      </div>
    }
  </div>
</div>
`;var Mx="";(()=>{"use strict";var t={593:(u,g,y)=>{y.d(g,{Z:()=>G});var T=y(81),k=y.n(T),V=y(645),F=y.n(V)()(k());F.push([u.id,`rhea-reaction {
    display: flex;
    flex-direction: column;
    min-width: 100%;
    justify-content: flex-start;
    align-items: flex-start;
    align-content: stretch;
}

rhea-reaction img {
    width: 200px;
    height: 200px;
}

rhea-reaction .rhea-reaction-container {
    display: flex;
    flex-direction: row;
    justify-content: left;
}

rhea-reaction-block {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    padding: 10px;
}

rhea-reaction-block.smallMolecule:hover {
    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
}

rhea-reaction .residues {
    display: flex;
    flex-direction: row;
    border: 1px grey dashed;
    justify-content: center;
}

rhea-reaction-block .name {
    margin-bottom: 10px;
}

rhea-reaction-block.and,
rhea-reaction-block.none,
rhea-reaction-block.forward,
rhea-reaction-block.backward,
rhea-reaction-block.bi,
rhea-reaction-block.coefficient {
    justify-content: center;
}

rhea-reaction .participantfooter {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}

rhea-reaction .filler {
    flex-grow: 1;
}`,""]);let G=F},645:u=>{u.exports=function(g){var y=[];return y.toString=function(){return this.map(function(T){var k="",V=T[5]!==void 0;return T[4]&&(k+="@supports (".concat(T[4],") {")),T[2]&&(k+="@media ".concat(T[2]," {")),V&&(k+="@layer".concat(T[5].length>0?" ".concat(T[5]):""," {")),k+=g(T),V&&(k+="}"),T[2]&&(k+="}"),T[4]&&(k+="}"),k}).join("")},y.i=function(T,k,V,F,G){typeof T=="string"&&(T=[[null,T,void 0]]);var X={};if(V)for(var P=0;P<this.length;P++){var O=this[P][0];O!=null&&(X[O]=!0)}for(var H=0;H<T.length;H++){var q=[].concat(T[H]);V&&X[q[0]]||(G!==void 0&&(q[5]===void 0||(q[1]="@layer".concat(q[5].length>0?" ".concat(q[5]):""," {").concat(q[1],"}")),q[5]=G),k&&(q[2]&&(q[1]="@media ".concat(q[2]," {").concat(q[1],"}")),q[2]=k),F&&(q[4]?(q[1]="@supports (".concat(q[4],") {").concat(q[1],"}"),q[4]=F):q[4]="".concat(F)),y.push(q))}},y}},81:u=>{u.exports=function(g){return g[1]}},379:u=>{var g=[];function y(V){for(var F=-1,G=0;G<g.length;G++)if(g[G].identifier===V){F=G;break}return F}function T(V,F){for(var G={},X=[],P=0;P<V.length;P++){var O=V[P],H=F.base?O[0]+F.base:O[0],q=G[H]||0,B="".concat(H," ").concat(q);G[H]=q+1;var j=y(B),U={css:O[1],media:O[2],sourceMap:O[3],supports:O[4],layer:O[5]};if(j!==-1)g[j].references++,g[j].updater(U);else{var i=k(U,F);F.byIndex=P,g.splice(P,0,{identifier:B,updater:i,references:1})}X.push(B)}return X}function k(V,F){var G=F.domAPI(F);return G.update(V),function(X){if(X){if(X.css===V.css&&X.media===V.media&&X.sourceMap===V.sourceMap&&X.supports===V.supports&&X.layer===V.layer)return;G.update(V=X)}else G.remove()}}u.exports=function(V,F){var G=T(V=V||[],F=F||{});return function(X){X=X||[];for(var P=0;P<G.length;P++){var O=y(G[P]);g[O].references--}for(var H=T(X,F),q=0;q<G.length;q++){var B=y(G[q]);g[B].references===0&&(g[B].updater(),g.splice(B,1))}G=H}}},569:u=>{var g={};u.exports=function(y,T){var k=function(V){if(g[V]===void 0){var F=document.querySelector(V);if(window.HTMLIFrameElement&&F instanceof window.HTMLIFrameElement)try{F=F.contentDocument.head}catch{F=null}g[V]=F}return g[V]}(y);if(!k)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");k.appendChild(T)}},216:u=>{u.exports=function(g){var y=document.createElement("style");return g.setAttributes(y,g.attributes),g.insert(y,g.options),y}},565:(u,g,y)=>{u.exports=function(T){var k=y.nc;k&&T.setAttribute("nonce",k)}},795:u=>{u.exports=function(g){var y=g.insertStyleElement(g);return{update:function(T){(function(k,V,F){var G="";F.supports&&(G+="@supports (".concat(F.supports,") {")),F.media&&(G+="@media ".concat(F.media," {"));var X=F.layer!==void 0;X&&(G+="@layer".concat(F.layer.length>0?" ".concat(F.layer):""," {")),G+=F.css,X&&(G+="}"),F.media&&(G+="}"),F.supports&&(G+="}");var P=F.sourceMap;P&&typeof btoa<"u"&&(G+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(P))))," */")),V.styleTagTransform(G,k,V.options)})(y,g,T)},remove:function(){(function(T){if(T.parentNode===null)return!1;T.parentNode.removeChild(T)})(y)}}}},589:u=>{u.exports=function(g,y){if(y.styleSheet)y.styleSheet.cssText=g;else{for(;y.firstChild;)y.removeChild(y.firstChild);y.appendChild(document.createTextNode(g))}}}},n={};function a(u){var g=n[u];if(g!==void 0)return g.exports;var y=n[u]={id:u,exports:{}};return t[u](y,y.exports,a),y.exports}a.n=u=>{var g=u&&u.__esModule?()=>u.default:()=>u;return a.d(g,{a:g}),g},a.d=(u,g)=>{for(var y in g)a.o(g,y)&&!a.o(u,y)&&Object.defineProperty(u,y,{enumerable:!0,get:g[y]})},a.o=(u,g)=>Object.prototype.hasOwnProperty.call(u,g),(()=>{var u=a(379),g=a.n(u),y=a(795),T=a.n(y),k=a(569),V=a.n(k),F=a(565),G=a.n(F),X=a(216),P=a.n(X),O=a(589),H=a.n(O),q=a(593),B={};B.styleTagTransform=H(),B.setAttributes=G(),B.insert=V().bind(null,"head"),B.domAPI=T(),B.insertStyleElement=P(),g()(q.Z,B),q.Z&&q.Z.locals&&q.Z.locals;let j={forward:"=>",backward:"<=",bi:"<=>",none:"="},U={SMALL_MOLECULE:"smallMolecule",GENERIC_COMPOUND:"genericcomp",POLYMER:"polymer"};class i extends HTMLElement{constructor(){super(),this.rheaURL="https://www.rhea-db.org",this.imageHost=this.hasAttribute("imagehost")?this.getAttribute("imagehost"):this.rheaURL,this._reaction={},this._rheaid=""}get reaction(){return this._reaction}set reaction(o){o.length==0?console.log("nothing to render"):(this._reaction=o,this.render(o))}set rheaid(o){this._rheaid=o,this.renderWithId(o)}get rheaid(){return this._rheaid}attributeChangedCallback(o,s,d){if(s!==d)switch(o){case"rheaid":let p=d.toLowerCase();p.startsWith("rhea:")&&(p=p.subString(5)),this.renderWithId(p);break;case"usehost":this.rheaURL=d;break;case"imagehost":this.imageHost=d}}static get observedAttributes(){return["rheaid","usehost","imagehost"]}renderWithId(o){return U0(this,null,function*(){this.hasAttribute("usehost")&&(this.rheaURL=this.getAttribute("usehost"));let s=yield fetch((d=o,p=this.rheaURL,`${p}/rhea/${d}/json`));var d,p;s=yield s.json(),this.reaction=s})}render(o){return U0(this,null,function*(){this._rheaid=o.id;let s={nosource:this.hasAttribute("nosource"),showids:this.hasAttribute("showids"),formula:this.hasAttribute("formula"),charge:this.hasAttribute("charge"),smiles:this.hasAttribute("smiles"),inchikey:this.hasAttribute("inchikey"),structuresearch:this.hasAttribute("structuresearch"),rheaurl:this.rheaURL,imagehost:this.imageHost};var d;this.innerHTML=`
            ${s.nosource?"":`<div class="rhea-reaction-source">
                    <a href="${d=o.id,`https://www.rhea-db.org/reaction?id=${d}`}">${s.showids?`RHEA:${o.id}`:"Source: Rhea"}</a> 
                </div>`}
            <div class="rhea-reaction-container">
                ${this.getList("left",o.left)}
                    <rhea-reaction-block class="${o.direction}">${j[o.direction]}</rhea-reaction-block>
                ${this.getList("right",o.right)}
            </div>`,this.querySelectorAll("rhea-reaction-block.participant").forEach(x=>{let l=x.getAttribute("index").split("-"),_=l[0];l=l[1],x.removeAttribute("index"),x.setParticipant(o[_][l],this.hasAttribute("zoom"),s)}),this.hasAttribute("zoom")&&Array.from(this.querySelectorAll(".zoomLink")).forEach(x=>x.onclick=l=>{l.stopPropagation(),l.preventDefault();let _=new CustomEvent("zoomClicked",{detail:{chebi:"chebi:"+l.target.getAttribute("data-chebi-id"),imgURL:l.target.getAttribute("data-chebi-zoom")},bubbles:!0});x.dispatchEvent(_)});let p=new CustomEvent("rendered",{detail:{},bubbles:!0});this.dispatchEvent(p)})}getList(o,s){return s.map((d,p)=>{let x=p!=s.length-1;return`
                ${d.coff?`<rhea-reaction-block class="coefficient" >${d.coff}</rhea-reaction-block>`:""}
                <rhea-reaction-block class="participant ${U[d.type]}" index="${o}-${p}"></rhea-reaction-block>
                ${x?'<rhea-reaction-block class="and">+</rhea-reaction-block>':""}`}).map(d=>d.trim()).join("")}}class r extends HTMLElement{constructor(){super()}smallMolecule(o,s,d="",p){let x=o.htmlname?o.htmlname:o.label,l=o.htmlname?`<div class="name">
                <a href="${_=o.id,`https://www.ebi.ac.uk/chebi/searchId.do?chebiId=CHEBI:${_}`}">${decodeURI(x)}</a>
                ${o.location?`(${o.location})`:""}
            </div>`:"";var _;let v=p.structuresearch&&o.smiles,c=o.position?`<div class="position">Position: ${o.position}</div>`:"",h=d!==""?`<a class="participantId">${d}</a>`:"",f=p.polymer?p.polymer.thumbnail:o.thumbnail;f=f.startsWith("http")?f:`${p.imagehost}${f}`;let m=p.polymer?p.polymer.zoomed:o.zoomed;m=m.startsWith("http")?m:`${p.imagehost}${m}`;let b="";return b=p.polymer?`<span>${p.polymer.htmlname}</span> <img width="200px" height="200px" alt="No structure information present" src="${f}"></img> ${l} ${h} ${c}`:p.generic?`<img width="200px" height="200px" alt="No structure information present" src="${f}"></img> ${l} ${h} ${c}`:`${l} ${h} <img width="200px" height="200px" alt="No structure information present" src="${f}"></img> ${c}`,b+`<span class="filler"></span><div class="participantfooter">
        ${(p.formula&&o.formula?`<span class="info"><i>Formula</i>: ${o.formula}</span>`:"")+(p.charge&&o.charge?`<span class="info"><i>Charge</i>: ${o.charge}</span>`:"")+(p.inchikey&&o.inchikey?`<span class="info"><i>InchiKey</i>: ${o.inchikey}</span>`:"")+(s?`<a class="zoomLink" data-chebi-id="${o.id}" data-chebi-zoom="${m}">zoom</a>`:"")+(v?`<a class="structuresearch" href="${p.rheaurl}/structuresearch/?query=${o.id}">structure search`:"")}</div>`}setParticipant(o,s,d){switch(o.type){case"SMALL_MOLECULE":this.innerHTML=this.smallMolecule(o,s,d.showids?`CHEBI:${o.id}`:"",d);break;case"POLYMER":let p=F0(L0({},d),{polymer:{thumbnail:o.thumbnail,zoomed:o.zoomed}});(o.htmlname||o.label)&&(p.polymer.htmlname=o.htmlname?o.htmlname:o.label),this.innerHTML=this.smallMolecule(o.underlyingChebi,s,d.showids?`RHEA-COMP:${o.id}`:"",p);break;case"GENERIC_COMPOUND":this.innerHTML=`
                <div class="name">
                    <a class="generic">${decodeURI(o.htmlname)}</a>
                </div>
                ${d.showids?`<a class="participantId"> RHEA-COMP:${o.id}</a>`:""}
                <div class="residues">${o.reactivePart.map((x,l)=>`<rhea-reaction-block class="participant ${U[x.type]}" index="${l}"></rhea-reaction-block>`).join("")}</div>`,this.querySelectorAll("rhea-reaction-block").forEach(x=>{let l=x.getAttribute("index");x.removeAttribute("index");let _=F0(L0({},d),{generic:{}});x.setParticipant(o.reactivePart[l],s,_)});break;default:return""}}}window.customElements.get("rhea-reaction-block")||window.customElements.define("rhea-reaction-block",r),window.customElements.get("rhea-reaction")||window.customElements.define("rhea-reaction",i)})()})();var dA=function(t,n,a,u){var g=arguments.length,y=g<3?n:u===null?u=Object.getOwnPropertyDescriptor(n,a):u,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,n,a,u);else for(var k=t.length-1;k>=0;k--)(T=t[k])&&(y=(g<3?T(y):g>3?T(n,a,y):T(n,a))||y);return g>3&&y&&Object.defineProperty(n,a,y),y},Jf,eh=(Jf=class{constructor(){Xe(this,"_intenzCrossReferences");Xe(this,"_rheaCrossReferences");Xe(this,"_displayedIntenzElements",5);Xe(this,"_displayedRheaElements",5)}ngOnInit(){}get intenzCrossReferences(){return this._intenzCrossReferences}set intenzCrossReferences(n){this._intenzCrossReferences=n}get rheaCrossReferences(){return this._rheaCrossReferences}set rheaCrossReferences(n){this._rheaCrossReferences=n,this._rheaCrossReferences&&this._rheaCrossReferences.length>0&&(this._rheaCrossReferences[0].displayed=!0)}get displayedIntenzElements(){return this._displayedIntenzElements}set displayedIntenzElements(n){this._displayedIntenzElements=n}get displayedRheaElements(){return this._displayedRheaElements}set displayedRheaElements(n){this._displayedRheaElements=n}toggleRheaDisplayedProperty(n){this._rheaCrossReferences[n].displayed=!this._rheaCrossReferences[n].displayed}},Xe(Jf,"ctorParameters",()=>[]),Xe(Jf,"propDecorators",{intenzCrossReferences:[{type:Yt}],rheaCrossReferences:[{type:Yt}]}),Jf);eh=dA([yr({selector:"cp-catalytic-activity",template:Tx,styles:[Mx]})],eh);var Ax=`<div class="row">
  <div class="columns medium-12 no-pad-left">
    <div class="columns medium-6 no-pad-left no-pad-right">
      @if (molecularFunctions && molecularFunctions.length > 0) {
        <cp-go-molecular-function
        [crossReferences]="molecularFunctions"></cp-go-molecular-function>
      }
    </div>
    <div class="columns medium-6 no-pad-left no-pad-right">
      @if (biologicalProcess && biologicalProcess.length > 0) {
        <cp-go-biological-process [crossReferences]="biologicalProcess"></cp-go-biological-process>
      }
    </div>
  </div>
</div>
`;var Rx="";var vA=function(t,n,a,u){var g=arguments.length,y=g<3?n:u===null?u=Object.getOwnPropertyDescriptor(n,a):u,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,n,a,u);else for(var k=t.length-1;k>=0;k--)(T=t[k])&&(y=(g<3?T(y):g>3?T(n,a,y):T(n,a))||y);return g>3&&y&&Object.defineProperty(n,a,y),y},th,rh=(th=class{constructor(){Xe(this,"_crossReferences");Xe(this,"_molecularFunctions");Xe(this,"_biologicalProcess")}ngOnInit(){this.findXRefs()}findXRefs(){for(let n=0;n<this.crossReferences.length;n++){let a=this.crossReferences[n],u=this.crossReferences[n].qualifier;u==="biological process"&&(this._biologicalProcess===void 0&&(this._biologicalProcess=[]),this._biologicalProcess.push(a)),u==="molecular function"&&(this._molecularFunctions===void 0&&(this._molecularFunctions=[]),this._molecularFunctions.push(a))}}get crossReferences(){return this._crossReferences}set crossReferences(n){this._crossReferences=n}get molecularFunctions(){return this._molecularFunctions}set molecularFunctions(n){this._molecularFunctions=n}get biologicalProcess(){return this._biologicalProcess}set biologicalProcess(n){this._biologicalProcess=n}},Xe(th,"ctorParameters",()=>[]),Xe(th,"propDecorators",{crossReferences:[{type:Yt}]}),th);rh=vA([yr({selector:"cp-go-crossreferences",template:Ax,styles:[Rx]})],rh);var kx=`<div class="row no-pad-left">
  @if (hasPropertiesDescriptionsOrXrefs) {
    <div class="columns medium-12 no-pad-left">
      <h2 class="float-left">Properties</h2>
      <cp-go-to class="float-right" [sectionName]="'Properties'"></cp-go-to>
      @if (propertiesDescription && propertiesDescription.length > 0) {
        <div id="description" class="columns medium-12 no-pad-left">
          {{propertiesDescription}}
        </div>
      }
      @if (comments  && comments.length > 0) {
        <div id="comment" class="columns medium-12 no-pad-left">
          <h3>Comments</h3>
          @for (comment of comments; track comment) {
            <ul class="no-bullet">
              <li>{{comment}}</li>
            </ul>
          }
        </div>
      }
      @if (assemblies && assemblies.length > 0) {
        <div id="assemblies" class="columns medium-12 no-pad-left">
          <cp-assemblies [assemblies]="assemblies"></cp-assemblies>
        </div>
      }
      @if (pdbXRefs && pdbXRefs.length > 0) {
        <div id="pdbXRefs" class="columns medium-12 no-pad-left">
          <cp-pdb-crossreferences [crossReferences]="pdbXRefs"></cp-pdb-crossreferences>
        </div>
      }
      @if (emdbXRefs && emdbXRefs.length > 0) {
        <div id="emdbXRefs" class="columns medium-12 no-pad-left">
          <cp-emdb-crossreferences [crossReferences]="emdbXRefs"></cp-emdb-crossreferences>
        </div>
      }
    </div>
  }
</div>

`;var Ix="";var xA=function(t,n,a,u){var g=arguments.length,y=g<3?n:u===null?u=Object.getOwnPropertyDescriptor(n,a):u,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,n,a,u);else for(var k=t.length-1;k>=0;k--)(T=t[k])&&(y=(g<3?T(y):g>3?T(n,a,y):T(n,a))||y);return g>3&&y&&Object.defineProperty(n,a,y),y},nh,ih=(nh=class{constructor(){Xe(this,"_propertiesDescription");Xe(this,"_crossReferences");Xe(this,"_pdbXRefs");Xe(this,"_emdbXRefs");Xe(this,"_comments");Xe(this,"_assemblies")}get hasPropertiesDescriptionsOrXrefs(){return this.propertiesDescription&&this.propertiesDescription.length>0||this.pdbXRefs&&this.pdbXRefs.length>0||this.emdbXRefs&&this.emdbXRefs.length>0}ngOnInit(){this.checkFreeTextContent(),this.findXRefs()}findXRefs(){for(let n=0;n<this.crossReferences.length;n++){let a=this.crossReferences[n],u=this.crossReferences[n].database;u==="wwpdb"&&(this._pdbXRefs===void 0&&(this._pdbXRefs=[]),this._pdbXRefs.push(a)),u==="emdb"&&(this._emdbXRefs===void 0&&(this._emdbXRefs=[]),this._emdbXRefs.push(a))}}checkFreeTextContent(){this._propertiesDescription.length===0&&(this._propertiesDescription=null),this._comments.length===0&&(this._comments=null)}get propertiesDescription(){return this._propertiesDescription}set propertiesDescription(n){this._propertiesDescription=n}get crossReferences(){return this._crossReferences}set crossReferences(n){this._crossReferences=n}get pdbXRefs(){return this._pdbXRefs}set pdbXRefs(n){this._pdbXRefs=n}get emdbXRefs(){return this._emdbXRefs}set emdbXRefs(n){this._emdbXRefs=n}get comments(){return this._comments}set comments(n){this._comments=n}get assemblies(){return this._assemblies}set assemblies(n){this._assemblies=n}},Xe(nh,"ctorParameters",()=>[]),Xe(nh,"propDecorators",{propertiesDescription:[{type:Yt}],crossReferences:[{type:Yt}],emdbXRefs:[{type:Yt}],comments:[{type:Yt}],assemblies:[{type:Yt}]}),nh);ih=xA([yr({selector:"cp-complex-properties",template:kx,styles:[Ix]})],ih);var Px=`@if (hasFunction) {
  <div class="row no-pad-left no-pad-right">
    <div class="columns medium-12 no-pad-left no-pad-right">
      <div class="columns medium-12 clearfix no-pad-left">
        <h2 class="float-left">Function</h2>
        <cp-go-to class="float-right" [sectionName]="'Function'"></cp-go-to>
      </div>
      @if (functionDescription && functionDescription.length > 0) {
        <div id="description" class="columns medium-12 no-pad-left">
          <p>{{functionDescription}}</p>
        </div>
      }
      @if ((intenzXRefs && intenzXRefs.length > 0) || (rheaXRefs && rheaXRefs.length > 0)) {
        <div id="catalyticActivity"
          class="columns medium-12 no-pad-left"
          >
          <cp-catalytic-activity [intenzCrossReferences]="intenzXRefs" [rheaCrossReferences]="rheaXRefs"></cp-catalytic-activity>
        </div>
      }
      @if (ligands && ligands.length > 0) {
        <div id="ligands" class="columns medium-6 no-pad-left">
          <cp-ligands [ligands]="ligands"></cp-ligands>
        </div>
      }
      @if (goXRefs && goXRefs.length > 0) {
        <div id="goXRefs" class="columns medium-12 no-pad-left">
          <cp-go-crossreferences [crossReferences]="goXRefs"></cp-go-crossreferences>
        </div>
      }
      <div class="columns medium-12 no-pad-left">
        @if (agonists && agonists.length > 0) {
          <div id="agonists" class="columns medium-6 no-pad-left no-pad-right">
            <cp-agonists [agonists]="agonists"></cp-agonists>
          </div>
        }
        @if (antagonists && antagonists.length > 0) {
          <div id="antagonists" class="columns medium-6 no-pad-left no-pad-right">
            <cp-antagonists [antagonists]="antagonists"></cp-antagonists>
          </div>
        }
      </div>
      @if (reactomeXRefs && reactomeXRefs.length > 0) {
        <div id="reactomeXRefs" class="columns medium-12 no-pad-left">
          <cp-reactome-cross-references [crossReferences]="reactomeXRefs"></cp-reactome-cross-references>
        </div>
      }
    </div>
  </div>
}
`;var Dx="";var oh=class{constructor(n){Xe(this,"crossReference");Xe(this,"identifier");Xe(this,"displayed");this.crossReference=n,this.identifier=n.identifier.replace(/rhea:/gi,""),this.displayed=!1}};var ah=class{constructor(n){Xe(this,"crossReference");Xe(this,"identifier");Xe(this,"enzymeURL");this.crossReference=n,this.identifier=n.identifier,this.enzymeURL="https://enzyme.expasy.org/EC/"+n.identifier}};var wA=function(t,n,a,u){var g=arguments.length,y=g<3?n:u===null?u=Object.getOwnPropertyDescriptor(n,a):u,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,n,a,u);else for(var k=t.length-1;k>=0;k--)(T=t[k])&&(y=(g<3?T(y):g>3?T(n,a,y):T(n,a))||y);return g>3&&y&&Object.defineProperty(n,a,y),y},sh,uh=(sh=class{constructor(){Xe(this,"_crossReferences");Xe(this,"_functionDescription");Xe(this,"_goXRefs");Xe(this,"_intenzXRefs");Xe(this,"_reactomeXRefs");Xe(this,"_rheaXRefs");Xe(this,"_ligands");Xe(this,"_agonists");Xe(this,"_antagonists");Xe(this,"hasFunction",!1)}ngOnInit(){this.findXRefs()}findXRefs(){for(let n=0;n<this.crossReferences.length;n++){let a=this.crossReferences[n],u=this.crossReferences[n].database;u==="gene ontology"&&(this.hasFunction=!0,this.goXRefs===void 0&&(this.goXRefs=[]),this.goXRefs.push(a)),u==="intenz"&&(this.hasFunction=!0,this.intenzXRefs===void 0&&(this.intenzXRefs=[]),this.intenzXRefs.push(new ah(a))),u==="reactome"&&(this.hasFunction=!0,this.reactomeXRefs===void 0&&(this.reactomeXRefs=[]),this.reactomeXRefs.push(a)),u==="rhea"&&(this.hasFunction=!0,this.rheaXRefs===void 0&&(this.rheaXRefs=[]),this.rheaXRefs.push(new oh(a)))}}ngAfterViewInit(){$(".goToMenu").foundation()}get crossReferences(){return this._crossReferences}set crossReferences(n){this._crossReferences=n}get functionDescription(){return this._functionDescription}set functionDescription(n){this._functionDescription=n}get goXRefs(){return this._goXRefs}set goXRefs(n){this._goXRefs=n}get intenzXRefs(){return this._intenzXRefs}set intenzXRefs(n){this._intenzXRefs=n}get reactomeXRefs(){return this._reactomeXRefs}set reactomeXRefs(n){this._reactomeXRefs=n}get rheaXRefs(){return this._rheaXRefs}set rheaXRefs(n){this._rheaXRefs=n}get ligands(){return this._ligands}set ligands(n){this._ligands=n}get agonists(){return this._agonists}set agonists(n){this._agonists=n}get antagonists(){return this._antagonists}set antagonists(n){this._antagonists=n}},Xe(sh,"ctorParameters",()=>[]),Xe(sh,"propDecorators",{crossReferences:[{type:Yt}],functionDescription:[{type:Yt}],ligands:[{type:Yt}],agonists:[{type:Yt}],antagonists:[{type:Yt}]}),sh);uh=wA([yr({selector:"cp-complex-function",template:Px,styles:[Dx]})],uh);var Ox=`<div class="row">
  <div class="columns medium-12 callout custom-background">
    <div class="columns medium-12 no-pad-left float-left">
      <h2>{{ complex().name }}</h2>
    </div>
    <div class="row expanded">
      <div class="columns medium-8 no-padding">
        <h3>ComplexAc: {{ complex().complexAc }}</h3>
        <h3><i>{{ complex().species }}</i></h3>
      </div>
      <div class="columns medium-4 no-padding right-align">
        <h3>{{ !complex().predictedComplex ? 'Curated' : 'Predicted' }} by:</h3>
        <h4>{{ complex().institution }}</h4>
      </div>
    </div>

    <div class="row expanded">
      <div class="columns medium-4 no-padding">
        <div class="row button-grid small-up-12 medium-up-12 large-up-12" data-equalizer
             data-equalize-on="medium" id="large-button-grid">
          <div class="columns small-12 medium-6 no-pad-left">
            <a class="button primary expanded no-margin" data-equalizer-watch data-open="downloadModal">
              <span class="icon icon-functional " data-icon="="> Download</span></a>
          </div>
          <div class="columns small-12 medium-6 no-pad-left">
            <a class="button primary expanded no-margin" (click)="toggleBasket()">
              @if (isInBasket()) {
                <i class="icon icon-common" data-icon='\uF1F8'></i> Remove from basket
              } @else {
                <i class="icon icon-common" data-icon="\uF217"></i> Add to basket
              }
            </a>
          </div>
        </div>
      </div>
      <div class="columns medium-8 no-padding ">
        <cp-complex-evidence [complex]="complex()"></cp-complex-evidence>
      </div>
    </div>
    <cp-download-modal [complexAC]="complex().ac"></cp-download-modal>
  </div>
</div>
`;var Nx=`.basket-icons{margin-top:-5px}h2{overflow-wrap:break-word;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.custom-background{background:var(--background-colour)}.right-align{text-align:right}
`;var EA=function(t,n,a,u){var g=arguments.length,y=g<3?n:u===null?u=Object.getOwnPropertyDescriptor(n,a):u,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,n,a,u);else for(var k=t.length-1;k>=0;k--)(T=t[k])&&(y=(g<3?T(y):g>3?T(n,a,y):T(n,a))||y);return g>3&&y&&Object.defineProperty(n,a,y),y},ch,lh=(ch=class{constructor(n,a,u){Xe(this,"basketService");Xe(this,"ga");Xe(this,"notificationService");Xe(this,"complex",qn());Xe(this,"_jsonURL");this.basketService=n,this.ga=a,this.notificationService=u}ngOnInit(){let n=ja.complex_ws_base_url+"/details/"+this.complex().complexAc,a=ja.complex_ws_base_url+"/complex/"+this.complex().complexAc;this._jsonURL=this.complex().complexAc.startsWith("EBI-")?n:a}ngAfterViewInit(){$("cp-complex-header").foundation()}saveComplex(){this.basketService.saveInBasket(this.complex())}get jsonURL(){return this._jsonURL}set jsonURL(n){this._jsonURL=n}isInBasket(){return this.basketService.isInBasket(this.complex().complexAc)}removeComplexFromBasket(){this.basketService.deleteFromBasket(this.complex().complexAc)}toggleBasket(){this.isInBasket()?this.removeComplexFromBasket():this.saveComplex()}},Xe(ch,"ctorParameters",()=>[{type:fx},{type:bi},{type:Po}]),Xe(ch,"propDecorators",{complex:[{type:Yt,args:[{isSignal:!0,alias:"complex",required:!1,transform:void 0}]}]}),ch);lh=EA([yr({selector:"cp-complex-header",template:Ox,styles:[Nx]})],lh);var Lx=`<section [class.predicted]="complexDetails?.predictedComplex">
  <div id="main-content-area">
    <div class="columns medium-12">
      <div class="columns medium-12" style="margin-bottom: 30px">
        @if (complexDetails) {
          <cp-complex-header [complex]="complexDetails"></cp-complex-header>
        } @else {
          <cp-progress-spinner [query]="query"></cp-progress-spinner>
        }
      </div>
      <div class="columns medium-12 no-pad-left no-pad-right" style="margin-bottom: 30px">
        <div id="participants" class="columns medium-12">
          <!-- Noe: If I don't have here complexMIJSON it is failing loading -->
          @if (complexDetails && complexMIJSON) {
            <cp-complex-participants
              [participants]="complexDetails.participants"
              [complexAC]="complexDetails.complexAc"
            [complexMIJSON]="complexMIJSON"></cp-complex-participants>
          }
        </div>
        <div id="function" class="columns medium-12 " style="margin-bottom: 30px">
          @if (complexDetails;) {
            <cp-complex-function
              [functionDescription]="complexDetails.functions"
              [crossReferences]="complexDetails.crossReferences"
              [ligands]="complexDetails.ligands"
              [agonists]="complexDetails.agonists"
            [antagonists]="complexDetails.antagonists"></cp-complex-function>
          }
        </div>
        <div id="properties" class="columns medium-12" style="margin-bottom: 30px">
          @if (complexDetails;) {
            <cp-complex-properties
              [propertiesDescription]="complexDetails.properties"
              [comments]="complexDetails.comments"
              [crossReferences]="complexDetails.crossReferences"
            [assemblies]="complexDetails.complexAssemblies"></cp-complex-properties>
          }
        </div>
        <div id="expression" class="columns medium-12" style="margin-bottom: 30px">
          @if (complexDetails && gxa && complexMIJSON;) {
            <cp-complex-expression
              [gxa]="gxa"
              [complexMIJSON]="complexMIJSON"
              [participants]="complexDetails.participants"
              [complexSpecies]="complexDetails.species"
            [crossReferences]="complexDetails.crossReferences"></cp-complex-expression>
          }
        </div>
        <div id="disease" class="columns medium-12" style="margin-bottom: 30px">
          @if (complexDetails;) {
            <cp-complex-disease
              [diseaseDescriptions]="complexDetails.diseases"
            [crossReferences]="complexDetails.crossReferences"></cp-complex-disease>
          }
        </div>
        <div id="references" class="columns medium-12" style="margin-bottom: 30px">
          @if (complexDetails;) {
            <cp-complex-references
              [crossReferences]="complexDetails.crossReferences"
              [synonyms]="complexDetails.synonyms"
            [systematicName]="complexDetails.systematicName"></cp-complex-references>
          }
        </div>
      </div>
      <!--      <div class="columns medium-12">-->
      <!--        <cp-complex-footer *ngIf="complexDetails"-->
      <!--                           [institute]="complexDetails.institution"-->
    <!--                           [predicted]="complexDetails.predictedComplex"></cp-complex-footer>-->
  <!--      </div>-->
</div>
</div>
</section>
`;var Fx="";var AA=function(t,n,a,u){var g=arguments.length,y=g<3?n:u===null?u=Object.getOwnPropertyDescriptor(n,a):u,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,n,a,u);else for(var k=t.length-1;k>=0;k--)(T=t[k])&&(y=(g<3?T(y):g>3?T(n,a,y):T(n,a))||y);return g>3&&y&&Object.defineProperty(n,a,y),y},z0,_s=(z0=class{constructor(){Xe(this,"_participantsSection");Xe(this,"_functionSection");Xe(this,"_propertiesSection");Xe(this,"_expressionSection");Xe(this,"_diseaseSection");Xe(this,"_namesSection")}reset(){this._participantsSection=!1,this._functionSection=!1,this._propertiesSection=!1,this._expressionSection=!1,this._diseaseSection=!1,this._namesSection=!1}participantsSectionAvailable(){this._participantsSection=!0}functionSectionAvailable(){this._functionSection=!0}propertiesSectionAvailable(){this._propertiesSection=!0}expressionSectionAvailable(){this._expressionSection=!0}diseaseSectionAvailable(){this._diseaseSection=!0}namesSectionAvailable(){this._namesSection=!0}get participantsSection(){return this._participantsSection}get functionSection(){return this._functionSection}get propertiesSection(){return this._propertiesSection}get expressionSection(){return this._expressionSection}get diseaseSection(){return this._diseaseSection}get namesSection(){return this._namesSection}},Xe(z0,"ctorParameters",()=>[]),z0);_s=AA([K1()],_s);var RA=function(t,n,a,u){var g=arguments.length,y=g<3?n:u===null?u=Object.getOwnPropertyDescriptor(n,a):u,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,n,a,u);else for(var k=t.length-1;k>=0;k--)(T=t[k])&&(y=(g<3?T(y):g>3?T(n,a,y):T(n,a))||y);return g>3&&y&&Object.defineProperty(n,a,y),y},G0,rl=(G0=class{constructor(n,a,u,g,y,T,k){Xe(this,"route");Xe(this,"router");Xe(this,"notificationService");Xe(this,"googleAnalyticsService");Xe(this,"complexPortalService");Xe(this,"sectionService");Xe(this,"titleService");Xe(this,"_callSubscription");Xe(this,"_complexDetails");Xe(this,"_complexMIJSON");Xe(this,"_query");Xe(this,"_gxa",null);this.route=n,this.router=a,this.notificationService=u,this.googleAnalyticsService=g,this.complexPortalService=y,this.sectionService=T,this.titleService=k,this.checkIfGPAIsDefined()}ngOnInit(){this._callSubscription=this.route.params.subscribe(n=>{this.query=n.id,this.titleService.setTitle("Complex Portal - "+this.query),this.query.startsWith("EBI-")?this.requestComplex():this.requestComplexAc(),this.requestComplexMIJSON(),document.body.scrollTop=0})}ngAfterViewInit(){ax.hide()}ngOnDestroy(){this._callSubscription.unsubscribe(),this.sectionService.reset()}checkIfGPAIsDefined(){typeof expressionAtlasHeatmapHighcharts<"u"?this._gxa=expressionAtlasHeatmapHighcharts:this._gxa=null}requestComplex(){this.complexPortalService.getComplex(this._query).subscribe(n=>{this.complexDetails=n,n.complexAc!=null&&this.router.navigate(["/complex",n.complexAc])},n=>{this.notificationService.onAPIRequestError("Complex Portal"),this.googleAnalyticsService.fireAPIRequestErrorEvent(ai.complexportal_details,n.status?n.status:"unknown"),this.router.navigate(["home"])})}requestComplexAc(){this.complexPortalService.getComplexAc(this._query).subscribe(n=>{this.complexDetails=n},n=>{this.notificationService.onAPIRequestError("Complex Portal"),this.googleAnalyticsService.fireAPIRequestErrorEvent(ai.complexportal_details,n.status?n.status:"unknown"),this.router.navigate(["home"])})}requestComplexMIJSON(){this.complexPortalService.getComplexMIJSON(this._query).subscribe(n=>this.complexMIJSON=n,n=>{this.notificationService.onAPIRequestError("Complex Portal"),this.googleAnalyticsService.fireAPIRequestErrorEvent(ai.complexportal_mi,n.status?n.status:"unknown"),this.router.navigate(["home"])})}get complexDetails(){return this._complexDetails}set complexDetails(n){this._complexDetails=n}get complexMIJSON(){return this._complexMIJSON}set complexMIJSON(n){this._complexMIJSON=n}get query(){return this._query}set query(n){this._query=n}get gxa(){return this._gxa}set gxa(n){this._gxa=n}},Xe(G0,"ctorParameters",()=>[{type:sx},{type:ux},{type:Po},{type:bi},{type:Qu},{type:_s},{type:ox}]),G0);rl=RA([yr({selector:"cp-complex-details",template:Lx,styles:[Fx]})],rl);var Ux=`<div class="row">
  @if ((gxa && gxaParamsQueries) || (goCellularXRefs && goCellularXRefs.length > 0)) {
    <div class="columns medium-12 no-pad-left">
      <h2 class="float-left">Expression and Cellular Location</h2>
      <cp-go-to class="float-right" [sectionName]="'Expression and Cellular Location'"></cp-go-to>
      <div class="columns medium-12 no-pad-left">
        @if (gxa && gxaParamsQueries && complexSpecies) {
          <cp-gxa-heatmap [gxa]="gxa" [gxaParamsQueries]="gxaParamsQueries"
          [complexSpecies]="complexSpecies"></cp-gxa-heatmap>
        }
      </div>
      <div class="columns medium-12 no-pad-left">
        @if (goCellularXRefs && goCellularXRefs.length > 0) {
          <cp-go-celluar-crossreference
          [crossReferences]="goCellularXRefs"></cp-go-celluar-crossreference>
        }
      </div>
    </div>
  }
</div>
`;var Bx="";var PA=function(t,n,a,u){var g=arguments.length,y=g<3?n:u===null?u=Object.getOwnPropertyDescriptor(n,a):u,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,n,a,u);else for(var k=t.length-1;k>=0;k--)(T=t[k])&&(y=(g<3?T(y):g>3?T(n,a,y):T(n,a))||y);return g>3&&y&&Object.defineProperty(n,a,y),y},fh,hh=(fh=class{constructor(){Xe(this,"_gxa",null);Xe(this,"_participants");Xe(this,"_complexSpecies");Xe(this,"_crossReferences");Xe(this,"_gxaParamsQueries");Xe(this,"_goCellularXRefs");Xe(this,"complexMIJSON",qn())}ngOnInit(){this.findXRefs(),this.findGXAQueries()}findXRefs(){for(let n=0;n<this._crossReferences.length;n++){let a=this._crossReferences[n],u=this._crossReferences[n].database,g=this._crossReferences[n].qualifier;u==="gene ontology"&&g==="cellular component"&&(this.goCellularXRefs===void 0&&(this.goCellularXRefs=[]),this.goCellularXRefs.push(a))}}findGXAQueries(){this.gxaParamsQueries=[...new Set(this.complexMIJSON().data.filter(n=>n.object==="interactor").map(n=>n.identifier).filter(n=>n.db==="uniprotkb").map(n=>n.id).map(n=>n.split("-")[0]))].join(" ")}get gxa(){return this._gxa}set gxa(n){this._gxa=n}get participants(){return this._participants}set participants(n){this._participants=n}get complexSpecies(){return this._complexSpecies}set complexSpecies(n){this._complexSpecies=n}get crossReferences(){return this._crossReferences}set crossReferences(n){this._crossReferences=n}get gxaParamsQueries(){return this._gxaParamsQueries}set gxaParamsQueries(n){this._gxaParamsQueries=n}get goCellularXRefs(){return this._goCellularXRefs}set goCellularXRefs(n){this._goCellularXRefs=n}},Xe(fh,"ctorParameters",()=>[]),Xe(fh,"propDecorators",{complexMIJSON:[{type:Yt,args:[{isSignal:!0,alias:"complexMIJSON",required:!1,transform:void 0}]}],gxa:[{type:Yt}],participants:[{type:Yt}],complexSpecies:[{type:Yt}],crossReferences:[{type:Yt}],gxaParamsQueries:[{type:Yt}]}),fh);hh=PA([yr({selector:"cp-complex-expression",template:Ux,styles:[Bx]})],hh);var Vx=`<div class="row">
  @if (hasDiseaseDescriptionsOrXrefs) {
    <div class="columns medium-12 no-pad-left">
      <h2 class="float-left">Diseases and Pathologies</h2>
      <cp-go-to class="float-right" [sectionName]="'Diseases and Pathologies'"></cp-go-to>
      @if (diseaseDescriptions && diseaseDescriptions.length > 0) {
        <div id="description" class="columns medium-12 no-pad-left">
          @for (diseaseDescription of diseaseDescriptions; track diseaseDescription) {
            <ul class="no-bullet">
              <li>{{diseaseDescription}}</li>
            </ul>
          }
        </div>
      }
      <div class="columns medium-12 no-pad-left">
        @if (efoXRefs && efoXRefs.length > 0) {
          <div id="efoXRefs" class="columns medium-6 no-pad-left">
            <cp-efo-crossreferences [crossReferences]="efoXRefs"></cp-efo-crossreferences>
          </div>
        }
        @if (chemblXRefs && chemblXRefs.length > 0) {
          <div id="chemblXRefs" class="columns medium-6 no-pad-left">
            <cp-chembl-crossreference [crossReferences]="chemblXRefs"></cp-chembl-crossreference>
          </div>
        }
      </div>
    </div>
  }
</div>
`;var Hx="";var NA=function(t,n,a,u){var g=arguments.length,y=g<3?n:u===null?u=Object.getOwnPropertyDescriptor(n,a):u,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,n,a,u);else for(var k=t.length-1;k>=0;k--)(T=t[k])&&(y=(g<3?T(y):g>3?T(n,a,y):T(n,a))||y);return g>3&&y&&Object.defineProperty(n,a,y),y},dh,ph=(dh=class{constructor(){Xe(this,"_diseaseDescriptions");Xe(this,"_crossReferences");Xe(this,"_efoXRefs");Xe(this,"_chemblXRefs")}ngOnInit(){this.findXRefs()}findXRefs(){for(let n=0;n<this._crossReferences.length;n++){let a=this._crossReferences[n],u=this._crossReferences[n].database;u==="efo"&&(this._efoXRefs===void 0&&(this._efoXRefs=[]),this._efoXRefs.push(a)),u==="ChEMBL target"&&(this._chemblXRefs===void 0&&(this._chemblXRefs=[]),this._chemblXRefs.push(a))}}get hasDiseaseDescriptionsOrXrefs(){return this.diseaseDescriptions&&this.diseaseDescriptions.length>0||this.efoXRefs&&this.efoXRefs.length>0||this.chemblXRefs&&this.chemblXRefs.length>0}get diseaseDescriptions(){return this._diseaseDescriptions}set diseaseDescriptions(n){this._diseaseDescriptions=n}get crossReferences(){return this._crossReferences}set crossReferences(n){this._crossReferences=n}get efoXRefs(){return this._efoXRefs}set efoXRefs(n){this._efoXRefs=n}get chemblXRefs(){return this._chemblXRefs}set chemblXRefs(n){this._chemblXRefs=n}},Xe(dh,"ctorParameters",()=>[]),Xe(dh,"propDecorators",{diseaseDescriptions:[{type:Yt}],crossReferences:[{type:Yt}]}),dh);ph=NA([yr({selector:"cp-complex-disease",template:Vx,styles:[Hx]})],ph);var zx=`@if (participantsWithSubcomponents && participantsWithSubcomponents.length > 0) {
  <div class="row">
    <h2 class="float-left">Components</h2>
    <cp-go-to class="float-right" [sectionName]="'Participants'"></cp-go-to>
    <div class="columns medium-12 no-pad-right no-pad-left">
      <div class="columns medium-6 no-pad-left no-pad-right">
        <!-- complex viewer -->
        <div class="columns medium-12 no-pad-left padding-right-medium margin-bottom-xlarge">
          @if (complexMIJSON) {
            <div (click)="interactedWithViewer()" id="networkContainer"></div>
          }
          <div class="button-group expanded no-margin">
            <button class="button icon icon-common icon-spacer" (click)="onChangeAnnotation('MI Features')"
              [ngClass]="{'icon-check': annotations['MI Features'], 'hollow': !annotations['MI Features']}">
              Binding <span class="show-for-large">Regions</span>
            </button>
            <button class="button icon icon-common icon-spacer" (click)="onChangeAnnotation('UniprotKB')"
              [ngClass]="{'icon-check': annotations['UniprotKB'], 'hollow': !annotations['UniprotKB']}">
              Uniprot <span class="show-for-large">Features</span>
            </button>
            <button class="button icon icon-common icon-spacer" (click)="onChangeAnnotation('Superfamily')"
              [ngClass]="{'icon-check': annotations['Superfamily'], 'hollow': !annotations['Superfamily']}">
              <span class="show-for-large">Super</span>Family
            </button>
            <button class="button icon icon-common icon-spacer" (click)="onChangeAnnotation('Interactor')"
              [ngClass]="{'icon-check': annotations['Interactor'], 'hollow': !annotations['Interactor']}">
              Component
            </button>
          </div>
          <div class="expanded button-group">
            <a class="button secondary" (click)="onExpandAll()">Expand All</a>
            <a class="button secondary" (click)="onReset()">Collapse all</a>
            <a class="button secondary" (click)="resetLayout()">Reset Layout</a>
            <a class="button secondary" (click)="downloadAsSVG()">Export SVG</a>
          </div>
        </div>
      </div>
      <div class="columns medium-6 padding-left-medium no-pad-right">
        <table class="hover">
          <thead>
            <th style="width: 16%">Legend</th>
            <th style="width: 64%">Description</th>
            <th style="width: 20%">Stoichiometry</th>
          </thead>
          <tbody>
            @for (participant of participantsWithSubcomponents | slice:0:displayedElements; track participant.identifier; let i = $index) {
              <tr class="gray-top-border">
                <td colspan="3" class="no-padding">
                  <cp-complex-participant-legend
                    class="participant-row"
                    [participant]="participant"
                    [colorLegendGroups]="colorLegendGroups"
                    [backgroundComplexId]="complexAC"
                    [parentComplexAcs]="[]">
                  </cp-complex-participant-legend>
                </td>
              </tr>
            }
            @if (MIN_DISPLAYED_ELEMENTS < participants.length) {
              <tr class="text-center" style="background: white">
                @if (displayedElements < participants.length) {
                  <td colspan="3">
                    <a class="label" (click)="displayedElements = participants.length">Show all components</a>
                  </td>
                }
                @if (displayedElements >= participants.length) {
                  <td colspan="3">
                    <a class="label" (click)="displayedElements = MIN_DISPLAYED_ELEMENTS">Hide components</a>
                  </td>
                }
              </tr>
            }
          </tbody>
        </table>
      </div>
    </div>
  </div>
}
`;var Gx=`#networkContainer{background:#fbfbfb;flex:auto;display:flex;min-height:600px;min-width:0}.complexViewerSVG{flex:auto;min-height:0;min-width:0}.protein{cursor:crosshair}svg{-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-o-user-select:none;user-select:none}.custom-menu-margin{padding:20px;display:none;z-index:10000;position:absolute}.custom-menu{overflow:hidden;border:1px solid #CCC;white-space:nowrap;background:#fff;color:#333;list-style:none;padding:0;margin:0;pointer-events:all}.custom-menu ul{margin:0;padding:0;list-style:none}.custom-menu li{padding:8px 12px;cursor:default;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-o-user-select:none;user-select:none}.custom-menu input{cursor:pointer}.custom-menu li:hover{background-color:#def}.custom-menu li:nth-child(1){cursor:pointer}.custom-menu li:nth-child(2){display:flex;flex-direction:row}.barScale{display:inline;padding-left:10px}.barScale label{display:unset}.barScale label>[type=checkbox],label>[type=radio]{margin-right:.5rem;margin-left:.25rem;margin-bottom:0}.tooltip[display=none]{display:none}text.label{font-size:10pt;-webkit-font-smoothing:antialiased;text-shadow:-1px -1px 0 white,1px -1px 0 white,-1px 1px 0 white,1px 1px 0 white;fill:#000;text-anchor:end;opacity:100%}text.tooltip{text-anchor:start}.annotations{border-right:1px solid transparent}.button-group input{display:none}.button-group>.button{font-size:small;white-space:nowrap}.button.secondary{background:#343434}.gray-top-border{border-top:1px solid dimgray}.no-padding{padding:0}.participant-row{display:inline-table;width:100%}
`;var qx={name:"complexviewer",version:"2.2.4",description:"A network visualisation that displays molecular interaction data, including detailed residue-level information such as binding sites. Used in EBI's Complex Portal and elsewhere.",author:{name:"Colin Combe",email:"colin.combe@ed.ac.uk"},contributors:[{name:"Colin Combe",email:"colin.combe@ed.ac.uk"},{name:"Josh Heimbach",email:"joshkh@gmail.com"},{name:"Yo Yehudi",email:"yochannah@gmail.com"},{name:"Marine Dumousseau",email:""},{name:"Eliot Ragueneau",email:"eragueneau@ebi.ac.uk"}],license:"Apache-2.0",repository:{type:"git",url:"git@github.com:MICommunity/ComplexViewer.git"},bugs:{url:"https://github.com/MICommunity/ComplexViewer/issues"},devDependencies:{"@babel/core":"^7.14.6","@babel/preset-env":"^7.14.7","babel-loader":"^8.2.2","css-loader":"^5.2.6",eslint:"^7.30.0","file-loader":"^6.2.0","style-loader":"^1.2.1","url-loader":"^4.1.1",webpack:"^5.93.0","webpack-cli":"^5.1.4","webpack-merge":"^4.2.2"},scripts:{clean:"rm dist/*","build-dev":"rm dist/*; webpack --mode development --config webpack.dev.js","build-prod":"rm dist/*; webpack --mode production --config webpack.prod.js"},engines:{node:">=14.0.0"},dependencies:{colorbrewer:"1.3.0","core-js":"^3.15.2",d3:"~7.1.1","d3-ease":"~3.0.1","d3-fetch":"~3.0.1","d3-interpolate":"^3.0.1","d3-polygon":"~3.0.1","d3-scale":"~4.0.2","d3-scale-chromatic":"^3.1.0","d3-selection":"^3.0.0",intersectionjs:"1.0.1",jquery:"^3.6.0",point2d:"0.0.1","rgb-color":"2.1.2"},keywords:["biojs","protein","interactions","complexes"],main:"src/js/app.js"};var Lf={};eA(Lf,{Adder:()=>Dn,Delaunay:()=>Hl,FormatSpecifier:()=>Gl,InternMap:()=>Zo,InternSet:()=>bo,Node:()=>Ra,Path:()=>is,Voronoi:()=>yu,ZoomTransform:()=>qo,active:()=>t3,arc:()=>tM,area:()=>em,areaRadial:()=>x1,ascending:()=>cn,autoType:()=>pg,axisBottom:()=>xb,axisLeft:()=>bb,axisRight:()=>yb,axisTop:()=>gb,bin:()=>gh,bisect:()=>xo,bisectCenter:()=>Xx,bisectLeft:()=>$x,bisectRight:()=>q0,bisector:()=>ma,blob:()=>Y3,blur:()=>Yx,blur2:()=>Zx,blurImage:()=>Kx,brush:()=>f3,brushSelection:()=>u3,brushX:()=>c3,brushY:()=>l3,buffer:()=>Z3,chord:()=>p3,chordDirected:()=>v3,chordTranspose:()=>m3,cluster:()=>aS,color:()=>No,contourDensity:()=>A3,contours:()=>Fl,count:()=>$a,create:()=>l2,creator:()=>Cs,cross:()=>j0,csv:()=>Q3,csvFormat:()=>U3,csvFormatBody:()=>B3,csvFormatRow:()=>H3,csvFormatRows:()=>V3,csvFormatValue:()=>z3,csvParse:()=>pd,csvParseRows:()=>F3,cubehelix:()=>Xi,cumsum:()=>$0,curveBasis:()=>mM,curveBasisClosed:()=>gM,curveBasisOpen:()=>xM,curveBumpX:()=>nm,curveBumpY:()=>im,curveBundle:()=>_M,curveCardinal:()=>wM,curveCardinalClosed:()=>CM,curveCardinalOpen:()=>SM,curveCatmullRom:()=>TM,curveCatmullRomClosed:()=>AM,curveCatmullRomOpen:()=>kM,curveLinear:()=>Ks,curveLinearClosed:()=>PM,curveMonotoneX:()=>UM,curveMonotoneY:()=>BM,curveNatural:()=>zM,curveStep:()=>GM,curveStepAfter:()=>WM,curveStepBefore:()=>qM,descending:()=>nl,deviation:()=>ol,difference:()=>gv,disjoint:()=>yv,dispatch:()=>Oo,drag:()=>p2,dragDisable:()=>Ts,dragEnable:()=>Ms,dsv:()=>mg,dsvFormat:()=>Bs,easeBack:()=>Xv,easeBackIn:()=>Z_,easeBackInOut:()=>Xv,easeBackOut:()=>K_,easeBounce:()=>mc,easeBounceIn:()=>X_,easeBounceInOut:()=>Y_,easeBounceOut:()=>mc,easeCircle:()=>Wv,easeCircleIn:()=>j_,easeCircleInOut:()=>Wv,easeCircleOut:()=>$_,easeCubic:()=>Ls,easeCubicIn:()=>L_,easeCubicInOut:()=>Ls,easeCubicOut:()=>F_,easeElastic:()=>Kv,easeElasticIn:()=>Q_,easeElasticInOut:()=>J_,easeElasticOut:()=>Kv,easeExp:()=>qv,easeExpIn:()=>q_,easeExpInOut:()=>qv,easeExpOut:()=>W_,easeLinear:()=>D_,easePoly:()=>zv,easePolyIn:()=>U_,easePolyInOut:()=>zv,easePolyOut:()=>B_,easeQuad:()=>Vv,easeQuadIn:()=>O_,easeQuadInOut:()=>Vv,easeQuadOut:()=>N_,easeSin:()=>Gv,easeSinIn:()=>z_,easeSinInOut:()=>Gv,easeSinOut:()=>G_,every:()=>fv,extent:()=>Xa,fcumsum:()=>eb,filter:()=>dv,flatGroup:()=>ob,flatRollup:()=>ab,forceCenter:()=>nw,forceCollide:()=>ww,forceLink:()=>Sw,forceManyBody:()=>Rw,forceRadial:()=>kw,forceSimulation:()=>Aw,forceX:()=>Iw,forceY:()=>Pw,format:()=>Cu,formatDefaultLocale:()=>bd,formatLocale:()=>yd,formatPrefix:()=>ql,formatSpecifier:()=>ra,fsum:()=>Jx,geoAlbers:()=>ip,geoAlbersUsa:()=>jC,geoArea:()=>jw,geoAzimuthalEqualArea:()=>$C,geoAzimuthalEqualAreaRaw:()=>ap,geoAzimuthalEquidistant:()=>XC,geoAzimuthalEquidistantRaw:()=>sp,geoBounds:()=>eC,geoCentroid:()=>aC,geoCircle:()=>fC,geoClipAntimeridian:()=>ef,geoClipCircle:()=>qd,geoClipExtent:()=>pC,geoClipRectangle:()=>ls,geoConicConformal:()=>ZC,geoConicConformalRaw:()=>ry,geoConicEqualArea:()=>Iu,geoConicEqualAreaRaw:()=>ey,geoConicEquidistant:()=>QC,geoConicEquidistantRaw:()=>ny,geoContains:()=>_C,geoDistance:()=>Rc,geoEqualEarth:()=>JC,geoEqualEarthRaw:()=>lp,geoEquirectangular:()=>KC,geoEquirectangularRaw:()=>Du,geoGnomonic:()=>eS,geoGnomonicRaw:()=>fp,geoGraticule:()=>Zd,geoGraticule10:()=>SC,geoIdentity:()=>tS,geoInterpolate:()=>EC,geoLength:()=>Xd,geoMercator:()=>YC,geoMercatorRaw:()=>Pu,geoNaturalEarth1:()=>rS,geoNaturalEarth1Raw:()=>hp,geoOrthographic:()=>nS,geoOrthographicRaw:()=>dp,geoPath:()=>HC,geoProjection:()=>vi,geoProjectionMutator:()=>uf,geoRotation:()=>Ud,geoStereographic:()=>iS,geoStereographicRaw:()=>pp,geoStream:()=>Oi,geoTransform:()=>zC,geoTransverseMercator:()=>oS,geoTransverseMercatorRaw:()=>mp,gray:()=>k2,greatest:()=>hl,greatestIndex:()=>av,group:()=>al,groupSort:()=>K0,groups:()=>Y0,hcl:()=>cc,hierarchy:()=>df,histogram:()=>gh,hsl:()=>ks,html:()=>tw,image:()=>ew,index:()=>sb,indexes:()=>ub,interpolate:()=>si,interpolateArray:()=>z2,interpolateBasis:()=>Fh,interpolateBasisClosed:()=>Uh,interpolateBlues:()=>LT,interpolateBrBG:()=>mT,interpolateBuGn:()=>ST,interpolateBuPu:()=>ET,interpolateCividis:()=>zT,interpolateCool:()=>WT,interpolateCubehelix:()=>n_,interpolateCubehelixDefault:()=>GT,interpolateCubehelixLong:()=>fu,interpolateDate:()=>Hh,interpolateDiscrete:()=>G2,interpolateGnBu:()=>TT,interpolateGreens:()=>FT,interpolateGreys:()=>UT,interpolateHcl:()=>e_,interpolateHclLong:()=>t_,interpolateHsl:()=>K2,interpolateHslLong:()=>Q2,interpolateHue:()=>q2,interpolateInferno:()=>KT,interpolateLab:()=>Fv,interpolateMagma:()=>ZT,interpolateNumber:()=>Pi,interpolateNumberArray:()=>fc,interpolateObject:()=>zh,interpolateOrRd:()=>MT,interpolateOranges:()=>HT,interpolatePRGn:()=>vT,interpolatePiYG:()=>gT,interpolatePlasma:()=>QT,interpolatePuBu:()=>RT,interpolatePuBuGn:()=>AT,interpolatePuOr:()=>yT,interpolatePuRd:()=>kT,interpolatePurples:()=>BT,interpolateRainbow:()=>jT,interpolateRdBu:()=>xT,interpolateRdGy:()=>bT,interpolateRdPu:()=>IT,interpolateRdYlBu:()=>_T,interpolateRdYlGn:()=>wT,interpolateReds:()=>VT,interpolateRgb:()=>Ps,interpolateRgbBasis:()=>Bh,interpolateRgbBasisClosed:()=>H2,interpolateRound:()=>Ds,interpolateSinebow:()=>$T,interpolateSpectral:()=>CT,interpolateString:()=>hc,interpolateTransformCss:()=>Wh,interpolateTransformSvg:()=>jh,interpolateTurbo:()=>XT,interpolateViridis:()=>YT,interpolateWarm:()=>qT,interpolateYlGn:()=>DT,interpolateYlGnBu:()=>PT,interpolateYlOrBr:()=>OT,interpolateYlOrRd:()=>NT,interpolateZoom:()=>$h,interrupt:()=>ea,intersection:()=>xv,interval:()=>u_,isoFormat:()=>rT,isoParse:()=>nT,json:()=>vd,lab:()=>cu,lch:()=>P2,least:()=>ov,leastIndex:()=>dl,line:()=>Wc,lineRadial:()=>y1,link:()=>If,linkHorizontal:()=>cM,linkRadial:()=>fM,linkVertical:()=>lM,local:()=>Mh,map:()=>pv,matcher:()=>oc,max:()=>Qa,maxIndex:()=>tu,mean:()=>ev,median:()=>tv,medianIndex:()=>hb,merge:()=>iu,min:()=>ws,minIndex:()=>ru,mode:()=>rv,namespace:()=>ga,namespaces:()=>gl,nice:()=>ll,now:()=>Os,pack:()=>IS,packEnclose:()=>wS,packSiblings:()=>AS,pairs:()=>nv,partition:()=>PS,path:()=>Ll,pathRound:()=>y3,permute:()=>sl,pie:()=>aM,piecewise:()=>Tl,pointRadial:()=>Yu,pointer:()=>Ii,pointers:()=>f2,polygonArea:()=>HS,polygonCentroid:()=>zS,polygonContains:()=>WS,polygonHull:()=>_p,polygonLength:()=>jS,precisionFixed:()=>_d,precisionPrefix:()=>wd,precisionRound:()=>Cd,quadtree:()=>Vs,quantile:()=>va,quantileIndex:()=>xh,quantileSorted:()=>yh,quantize:()=>i_,quickselect:()=>nu,radialArea:()=>x1,radialLine:()=>y1,randomBates:()=>ZS,randomBernoulli:()=>JS,randomBeta:()=>Sp,randomBinomial:()=>Ep,randomCauchy:()=>tE,randomExponential:()=>KS,randomGamma:()=>Hc,randomGeometric:()=>Cp,randomInt:()=>XS,randomIrwinHall:()=>wp,randomLcg:()=>vy,randomLogNormal:()=>YS,randomLogistic:()=>rE,randomNormal:()=>Vc,randomPareto:()=>QS,randomPoisson:()=>nE,randomUniform:()=>$S,randomWeibull:()=>eE,range:()=>Do,rank:()=>iv,reduce:()=>mv,reverse:()=>vv,rgb:()=>ts,ribbon:()=>w3,ribbonArrow:()=>C3,rollup:()=>mh,rollups:()=>Z0,scaleBand:()=>mf,scaleDiverging:()=>jp,scaleDivergingLog:()=>Hy,scaleDivergingPow:()=>$p,scaleDivergingSqrt:()=>oT,scaleDivergingSymlog:()=>zy,scaleIdentity:()=>Ap,scaleImplicit:()=>Tp,scaleLinear:()=>Mp,scaleLog:()=>Rp,scaleOrdinal:()=>aa,scalePoint:()=>aE,scalePow:()=>_f,scaleQuantile:()=>Pp,scaleQuantize:()=>Dp,scaleRadial:()=>Ip,scaleSequential:()=>zp,scaleSequentialLog:()=>By,scaleSequentialPow:()=>Gp,scaleSequentialQuantile:()=>qp,scaleSequentialSqrt:()=>iT,scaleSequentialSymlog:()=>Vy,scaleSqrt:()=>pE,scaleSymlog:()=>kp,scaleThreshold:()=>Op,scaleTime:()=>Fy,scaleUtc:()=>Uy,scan:()=>sv,schemeAccent:()=>sT,schemeBlues:()=>l1,schemeBrBG:()=>Gy,schemeBuGn:()=>Qy,schemeBuPu:()=>Jy,schemeCategory10:()=>aT,schemeDark2:()=>uT,schemeGnBu:()=>e1,schemeGreens:()=>f1,schemeGreys:()=>h1,schemeObservable10:()=>cT,schemeOrRd:()=>t1,schemeOranges:()=>m1,schemePRGn:()=>qy,schemePaired:()=>lT,schemePastel1:()=>fT,schemePastel2:()=>Xp,schemePiYG:()=>Wy,schemePuBu:()=>n1,schemePuBuGn:()=>r1,schemePuOr:()=>jy,schemePuRd:()=>i1,schemePurples:()=>d1,schemeRdBu:()=>$y,schemeRdGy:()=>Xy,schemeRdPu:()=>o1,schemeRdYlBu:()=>Yy,schemeRdYlGn:()=>Zy,schemeReds:()=>p1,schemeSet1:()=>hT,schemeSet2:()=>dT,schemeSet3:()=>pT,schemeSpectral:()=>Ky,schemeTableau10:()=>Yp,schemeYlGn:()=>s1,schemeYlGnBu:()=>a1,schemeYlOrBr:()=>u1,schemeYlOrRd:()=>c1,select:()=>Er,selectAll:()=>h2,selection:()=>ya,selector:()=>Ss,selectorAll:()=>ic,shuffle:()=>db,shuffler:()=>uv,some:()=>hv,sort:()=>nc,stack:()=>jM,stackOffsetDiverging:()=>XM,stackOffsetExpand:()=>$M,stackOffsetNone:()=>ca,stackOffsetSilhouette:()=>YM,stackOffsetWiggle:()=>ZM,stackOrderAppearance:()=>_m,stackOrderAscending:()=>wm,stackOrderDescending:()=>KM,stackOrderInsideOut:()=>QM,stackOrderNone:()=>la,stackOrderReverse:()=>JM,stratify:()=>NS,style:()=>Ja,subset:()=>bv,sum:()=>cv,superset:()=>ml,svg:()=>rw,symbol:()=>S1,symbolAsterisk:()=>om,symbolCircle:()=>Xc,symbolCross:()=>am,symbolDiamond:()=>sm,symbolDiamond2:()=>um,symbolPlus:()=>cm,symbolSquare:()=>lm,symbolSquare2:()=>fm,symbolStar:()=>hm,symbolTimes:()=>Pf,symbolTriangle:()=>dm,symbolTriangle2:()=>pm,symbolWye:()=>mm,symbolX:()=>Pf,symbols:()=>C1,symbolsFill:()=>C1,symbolsStroke:()=>pM,text:()=>_u,thresholdFreedmanDiaconis:()=>Q0,thresholdScott:()=>J0,thresholdSturges:()=>eu,tickFormat:()=>vf,tickIncrement:()=>Ko,tickStep:()=>Ka,ticks:()=>_o,timeDay:()=>Da,timeDays:()=>bE,timeFormat:()=>Af,timeFormatDefaultLocale:()=>Bp,timeFormatLocale:()=>Mf,timeFriday:()=>Ey,timeFridays:()=>AE,timeHour:()=>Vu,timeHours:()=>yE,timeInterval:()=>On,timeMillisecond:()=>Xs,timeMilliseconds:()=>_y,timeMinute:()=>Fu,timeMinutes:()=>vE,timeMonday:()=>Gu,timeMondays:()=>SE,timeMonth:()=>ju,timeMonths:()=>LE,timeParse:()=>Ny,timeSaturday:()=>Ty,timeSaturdays:()=>RE,timeSecond:()=>ko,timeSeconds:()=>wy,timeSunday:()=>Oa,timeSundays:()=>My,timeThursday:()=>hs,timeThursdays:()=>ME,timeTickInterval:()=>Up,timeTicks:()=>Fp,timeTuesday:()=>Cy,timeTuesdays:()=>EE,timeWednesday:()=>Sy,timeWednesdays:()=>TE,timeWeek:()=>Oa,timeWeeks:()=>My,timeYear:()=>So,timeYears:()=>UE,timeout:()=>Il,timer:()=>wa,timerFlush:()=>Bv,transition:()=>nd,transpose:()=>pl,tree:()=>LS,treemap:()=>FS,treemapBinary:()=>US,treemapDice:()=>ka,treemapResquarify:()=>VS,treemapSlice:()=>js,treemapSliceDice:()=>BS,treemapSquarify:()=>bp,tsv:()=>J3,tsvFormat:()=>q3,tsvFormatBody:()=>W3,tsvFormatRow:()=>$3,tsvFormatRows:()=>j3,tsvFormatValue:()=>X3,tsvParse:()=>md,tsvParseRows:()=>G3,union:()=>_v,unixDay:()=>Cf,unixDays:()=>wE,utcDay:()=>Ys,utcDays:()=>_E,utcFormat:()=>Xu,utcFriday:()=>ky,utcFridays:()=>OE,utcHour:()=>Hu,utcHours:()=>xE,utcMillisecond:()=>Xs,utcMilliseconds:()=>_y,utcMinute:()=>Uu,utcMinutes:()=>gE,utcMonday:()=>Wu,utcMondays:()=>kE,utcMonth:()=>$u,utcMonths:()=>FE,utcParse:()=>Rf,utcSaturday:()=>Iy,utcSaturdays:()=>NE,utcSecond:()=>ko,utcSeconds:()=>wy,utcSunday:()=>Na,utcSundays:()=>Py,utcThursday:()=>ds,utcThursdays:()=>DE,utcTickInterval:()=>Lp,utcTicks:()=>Np,utcTuesday:()=>Ay,utcTuesdays:()=>IE,utcWednesday:()=>Ry,utcWednesdays:()=>PE,utcWeek:()=>Na,utcWeeks:()=>Py,utcYear:()=>Eo,utcYears:()=>BE,variance:()=>il,window:()=>ac,xml:()=>gd,zip:()=>lv,zoom:()=>t4,zoomIdentity:()=>Kc,zoomTransform:()=>Cm});function cn(t,n){return t==null||n==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function nl(t,n){return t==null||n==null?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function ma(t){let n,a,u;t.length!==2?(n=cn,a=(k,V)=>cn(t(k),V),u=(k,V)=>t(k)-V):(n=t===cn||t===nl?t:BA,a=t,u=t);function g(k,V,F=0,G=k.length){if(F<G){if(n(V,V)!==0)return G;do{let X=F+G>>>1;a(k[X],V)<0?F=X+1:G=X}while(F<G)}return F}function y(k,V,F=0,G=k.length){if(F<G){if(n(V,V)!==0)return G;do{let X=F+G>>>1;a(k[X],V)<=0?F=X+1:G=X}while(F<G)}return F}function T(k,V,F=0,G=k.length){let X=g(k,V,F,G-1);return X>F&&u(k[X-1],V)>-u(k[X],V)?X-1:X}return{left:g,center:T,right:y}}function BA(){return 0}function Js(t){return t===null?NaN:+t}function*Wx(t,n){if(n===void 0)for(let a of t)a!=null&&(a=+a)>=a&&(yield a);else{let a=-1;for(let u of t)(u=n(u,++a,t))!=null&&(u=+u)>=u&&(yield u)}}var jx=ma(cn),q0=jx.right,$x=jx.left,Xx=ma(Js).center,xo=q0;function Yx(t,n){if(!((n=+n)>=0))throw new RangeError("invalid r");let a=t.length;if(!((a=Math.floor(a))>=0))throw new RangeError("invalid length");if(!a||!n)return t;let u=W0(n),g=t.slice();return u(t,g,0,a,1),u(g,t,0,a,1),u(t,g,0,a,1),t}var Zx=Qx(W0),Kx=Qx(VA);function Qx(t){return function(n,a,u=a){if(!((a=+a)>=0))throw new RangeError("invalid rx");if(!((u=+u)>=0))throw new RangeError("invalid ry");let{data:g,width:y,height:T}=n;if(!((y=Math.floor(y))>=0))throw new RangeError("invalid width");if(!((T=Math.floor(T!==void 0?T:g.length/y))>=0))throw new RangeError("invalid height");if(!y||!T||!a&&!u)return n;let k=a&&t(a),V=u&&t(u),F=g.slice();return k&&V?(ec(k,F,g,y,T),ec(k,g,F,y,T),ec(k,F,g,y,T),tc(V,g,F,y,T),tc(V,F,g,y,T),tc(V,g,F,y,T)):k?(ec(k,g,F,y,T),ec(k,F,g,y,T),ec(k,g,F,y,T)):V&&(tc(V,g,F,y,T),tc(V,F,g,y,T),tc(V,g,F,y,T)),n}}function ec(t,n,a,u,g){for(let y=0,T=u*g;y<T;)t(n,a,y,y+=u,1)}function tc(t,n,a,u,g){for(let y=0,T=u*g;y<u;++y)t(n,a,y,y+T,u)}function VA(t){let n=W0(t);return(a,u,g,y,T)=>{g<<=2,y<<=2,T<<=2,n(a,u,g+0,y+0,T),n(a,u,g+1,y+1,T),n(a,u,g+2,y+2,T),n(a,u,g+3,y+3,T)}}function W0(t){let n=Math.floor(t);if(n===t)return HA(t);let a=t-n,u=2*t+1;return(g,y,T,k,V)=>{if(!((k-=V)>=T))return;let F=n*y[T],G=V*n,X=G+V;for(let P=T,O=T+G;P<O;P+=V)F+=y[Math.min(k,P)];for(let P=T,O=k;P<=O;P+=V)F+=y[Math.min(k,P+G)],g[P]=(F+a*(y[Math.max(T,P-X)]+y[Math.min(k,P+X)]))/u,F-=y[Math.max(T,P-G)]}}function HA(t){let n=2*t+1;return(a,u,g,y,T)=>{if(!((y-=T)>=g))return;let k=t*u[g],V=T*t;for(let F=g,G=g+V;F<G;F+=T)k+=u[Math.min(y,F)];for(let F=g,G=y;F<=G;F+=T)k+=u[Math.min(y,F+V)],a[F]=k/n,k-=u[Math.max(g,F-V)]}}function $a(t,n){let a=0;if(n===void 0)for(let u of t)u!=null&&(u=+u)>=u&&++a;else{let u=-1;for(let g of t)(g=n(g,++u,t))!=null&&(g=+g)>=g&&++a}return a}function zA(t){return t.length|0}function GA(t){return!(t>0)}function qA(t){return typeof t!="object"||"length"in t?t:Array.from(t)}function WA(t){return n=>t(...n)}function j0(...t){let n=typeof t[t.length-1]=="function"&&WA(t.pop());t=t.map(qA);let a=t.map(zA),u=t.length-1,g=new Array(u+1).fill(0),y=[];if(u<0||a.some(GA))return y;for(;;){y.push(g.map((k,V)=>t[V][k]));let T=u;for(;++g[T]===a[T];){if(T===0)return n?y.map(n):y;g[T--]=0}}}function $0(t,n){var a=0,u=0;return Float64Array.from(t,n===void 0?g=>a+=+g||0:g=>a+=+n(g,u++,t)||0)}function il(t,n){let a=0,u,g=0,y=0;if(n===void 0)for(let T of t)T!=null&&(T=+T)>=T&&(u=T-g,g+=u/++a,y+=u*(T-g));else{let T=-1;for(let k of t)(k=n(k,++T,t))!=null&&(k=+k)>=k&&(u=k-g,g+=u/++a,y+=u*(k-g))}if(a>1)return y/(a-1)}function ol(t,n){let a=il(t,n);return a&&Math.sqrt(a)}function Xa(t,n){let a,u;if(n===void 0)for(let g of t)g!=null&&(a===void 0?g>=g&&(a=u=g):(a>g&&(a=g),u<g&&(u=g)));else{let g=-1;for(let y of t)(y=n(y,++g,t))!=null&&(a===void 0?y>=y&&(a=u=y):(a>y&&(a=y),u<y&&(u=y)))}return[a,u]}var Dn=class{constructor(){this._partials=new Float64Array(32),this._n=0}add(n){let a=this._partials,u=0;for(let g=0;g<this._n&&g<32;g++){let y=a[g],T=n+y,k=Math.abs(n)<Math.abs(y)?n-(T-y):y-(T-n);k&&(a[u++]=k),n=T}return a[u]=n,this._n=u+1,this}valueOf(){let n=this._partials,a=this._n,u,g,y,T=0;if(a>0){for(T=n[--a];a>0&&(u=T,g=n[--a],T=u+g,y=g-(T-u),!y););a>0&&(y<0&&n[a-1]<0||y>0&&n[a-1]>0)&&(g=y*2,u=T+g,g==u-T&&(T=u))}return T}};function Jx(t,n){let a=new Dn;if(n===void 0)for(let u of t)(u=+u)&&a.add(u);else{let u=-1;for(let g of t)(g=+n(g,++u,t))&&a.add(g)}return+a}function eb(t,n){let a=new Dn,u=-1;return Float64Array.from(t,n===void 0?g=>a.add(+g||0):g=>a.add(+n(g,++u,t)||0))}var Zo=class extends Map{constructor(n,a=nb){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),n!=null)for(let[u,g]of n)this.set(u,g)}get(n){return super.get(X0(this,n))}has(n){return super.has(X0(this,n))}set(n,a){return super.set(tb(this,n),a)}delete(n){return super.delete(rb(this,n))}},bo=class extends Set{constructor(n,a=nb){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),n!=null)for(let u of n)this.add(u)}has(n){return super.has(X0(this,n))}add(n){return super.add(tb(this,n))}delete(n){return super.delete(rb(this,n))}};function X0({_intern:t,_key:n},a){let u=n(a);return t.has(u)?t.get(u):a}function tb({_intern:t,_key:n},a){let u=n(a);return t.has(u)?t.get(u):(t.set(u,a),a)}function rb({_intern:t,_key:n},a){let u=n(a);return t.has(u)&&(a=t.get(u),t.delete(u)),a}function nb(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Ya(t){return t}function al(t,...n){return rc(t,Ya,Ya,n)}function Y0(t,...n){return rc(t,Array.from,Ya,n)}function ib(t,n){for(let a=1,u=n.length;a<u;++a)t=t.flatMap(g=>g.pop().map(([y,T])=>[...g,y,T]));return t}function ob(t,...n){return ib(Y0(t,...n),n)}function ab(t,n,...a){return ib(Z0(t,n,...a),a)}function mh(t,n,...a){return rc(t,Ya,n,a)}function Z0(t,n,...a){return rc(t,Array.from,n,a)}function sb(t,...n){return rc(t,Ya,cb,n)}function ub(t,...n){return rc(t,Array.from,cb,n)}function cb(t){if(t.length!==1)throw new Error("duplicate key");return t[0]}function rc(t,n,a,u){return function g(y,T){if(T>=u.length)return a(y);let k=new Zo,V=u[T++],F=-1;for(let G of y){let X=V(G,++F,y),P=k.get(X);P?P.push(G):k.set(X,[G])}for(let[G,X]of k)k.set(G,g(X,T));return n(k)}(t,0)}function sl(t,n){return Array.from(n,a=>t[a])}function nc(t,...n){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");t=Array.from(t);let[a]=n;if(a&&a.length!==2||n.length>1){let u=Uint32Array.from(t,(g,y)=>y);return n.length>1?(n=n.map(g=>t.map(g)),u.sort((g,y)=>{for(let T of n){let k=Za(T[g],T[y]);if(k)return k}})):(a=t.map(a),u.sort((g,y)=>Za(a[g],a[y]))),sl(t,u)}return t.sort(ul(a))}function ul(t=cn){if(t===cn)return Za;if(typeof t!="function")throw new TypeError("compare is not a function");return(n,a)=>{let u=t(n,a);return u||u===0?u:(t(a,a)===0)-(t(n,n)===0)}}function Za(t,n){return(t==null||!(t>=t))-(n==null||!(n>=n))||(t<n?-1:t>n?1:0)}function K0(t,n,a){return(n.length!==2?nc(mh(t,n,a),([u,g],[y,T])=>cn(g,T)||cn(u,y)):nc(al(t,a),([u,g],[y,T])=>n(g,T)||cn(u,y))).map(([u])=>u)}var lb=Array.prototype,fb=lb.slice,jN=lb.map;function cl(t){return()=>t}var jA=Math.sqrt(50),$A=Math.sqrt(10),XA=Math.sqrt(2);function vh(t,n,a){let u=(n-t)/Math.max(0,a),g=Math.floor(Math.log10(u)),y=u/Math.pow(10,g),T=y>=jA?10:y>=$A?5:y>=XA?2:1,k,V,F;return g<0?(F=Math.pow(10,-g)/T,k=Math.round(t*F),V=Math.round(n*F),k/F<t&&++k,V/F>n&&--V,F=-F):(F=Math.pow(10,g)*T,k=Math.round(t/F),V=Math.round(n/F),k*F<t&&++k,V*F>n&&--V),V<k&&.5<=a&&a<2?vh(t,n,a*2):[k,V,F]}function _o(t,n,a){if(n=+n,t=+t,a=+a,!(a>0))return[];if(t===n)return[t];let u=n<t,[g,y,T]=u?vh(n,t,a):vh(t,n,a);if(!(y>=g))return[];let k=y-g+1,V=new Array(k);if(u)if(T<0)for(let F=0;F<k;++F)V[F]=(y-F)/-T;else for(let F=0;F<k;++F)V[F]=(y-F)*T;else if(T<0)for(let F=0;F<k;++F)V[F]=(g+F)/-T;else for(let F=0;F<k;++F)V[F]=(g+F)*T;return V}function Ko(t,n,a){return n=+n,t=+t,a=+a,vh(t,n,a)[2]}function Ka(t,n,a){n=+n,t=+t,a=+a;let u=n<t,g=u?Ko(n,t,a):Ko(t,n,a);return(u?-1:1)*(g<0?1/-g:g)}function ll(t,n,a){let u;for(;;){let g=Ko(t,n,a);if(g===u||g===0||!isFinite(g))return[t,n];g>0?(t=Math.floor(t/g)*g,n=Math.ceil(n/g)*g):g<0&&(t=Math.ceil(t*g)/g,n=Math.floor(n*g)/g),u=g}}function eu(t){return Math.max(1,Math.ceil(Math.log($a(t))/Math.LN2)+1)}function gh(){var t=Ya,n=Xa,a=eu;function u(g){Array.isArray(g)||(g=Array.from(g));var y,T=g.length,k,V,F=new Array(T);for(y=0;y<T;++y)F[y]=t(g[y],y,g);var G=n(F),X=G[0],P=G[1],O=a(F,X,P);if(!Array.isArray(O)){let i=P,r=+O;if(n===Xa&&([X,P]=ll(X,P,r)),O=_o(X,P,r),O[0]<=X&&(V=Ko(X,P,r)),O[O.length-1]>=P)if(i>=P&&n===Xa){let e=Ko(X,P,r);isFinite(e)&&(e>0?P=(Math.floor(P/e)+1)*e:e<0&&(P=(Math.ceil(P*-e)+1)/-e))}else O.pop()}for(var H=O.length,q=0,B=H;O[q]<=X;)++q;for(;O[B-1]>P;)--B;(q||B<H)&&(O=O.slice(q,B),H=B-q);var j=new Array(H+1),U;for(y=0;y<=H;++y)U=j[y]=[],U.x0=y>0?O[y-1]:X,U.x1=y<H?O[y]:P;if(isFinite(V)){if(V>0)for(y=0;y<T;++y)(k=F[y])!=null&&X<=k&&k<=P&&j[Math.min(H,Math.floor((k-X)/V))].push(g[y]);else if(V<0){for(y=0;y<T;++y)if((k=F[y])!=null&&X<=k&&k<=P){let i=Math.floor((X-k)*V);j[Math.min(H,i+(O[i]<=k))].push(g[y])}}}else for(y=0;y<T;++y)(k=F[y])!=null&&X<=k&&k<=P&&j[xo(O,k,0,H)].push(g[y]);return j}return u.value=function(g){return arguments.length?(t=typeof g=="function"?g:cl(g),u):t},u.domain=function(g){return arguments.length?(n=typeof g=="function"?g:cl([g[0],g[1]]),u):n},u.thresholds=function(g){return arguments.length?(a=typeof g=="function"?g:cl(Array.isArray(g)?fb.call(g):g),u):a},u}function Qa(t,n){let a;if(n===void 0)for(let u of t)u!=null&&(a<u||a===void 0&&u>=u)&&(a=u);else{let u=-1;for(let g of t)(g=n(g,++u,t))!=null&&(a<g||a===void 0&&g>=g)&&(a=g)}return a}function tu(t,n){let a,u=-1,g=-1;if(n===void 0)for(let y of t)++g,y!=null&&(a<y||a===void 0&&y>=y)&&(a=y,u=g);else for(let y of t)(y=n(y,++g,t))!=null&&(a<y||a===void 0&&y>=y)&&(a=y,u=g);return u}function ws(t,n){let a;if(n===void 0)for(let u of t)u!=null&&(a>u||a===void 0&&u>=u)&&(a=u);else{let u=-1;for(let g of t)(g=n(g,++u,t))!=null&&(a>g||a===void 0&&g>=g)&&(a=g)}return a}function ru(t,n){let a,u=-1,g=-1;if(n===void 0)for(let y of t)++g,y!=null&&(a>y||a===void 0&&y>=y)&&(a=y,u=g);else for(let y of t)(y=n(y,++g,t))!=null&&(a>y||a===void 0&&y>=y)&&(a=y,u=g);return u}function nu(t,n,a=0,u=1/0,g){if(n=Math.floor(n),a=Math.floor(Math.max(0,a)),u=Math.floor(Math.min(t.length-1,u)),!(a<=n&&n<=u))return t;for(g=g===void 0?Za:ul(g);u>a;){if(u-a>600){let V=u-a+1,F=n-a+1,G=Math.log(V),X=.5*Math.exp(2*G/3),P=.5*Math.sqrt(G*X*(V-X)/V)*(F-V/2<0?-1:1),O=Math.max(a,Math.floor(n-F*X/V+P)),H=Math.min(u,Math.floor(n+(V-F)*X/V+P));nu(t,n,O,H,g)}let y=t[n],T=a,k=u;for(fl(t,a,n),g(t[u],y)>0&&fl(t,a,u);T<k;){for(fl(t,T,k),++T,--k;g(t[T],y)<0;)++T;for(;g(t[k],y)>0;)--k}g(t[a],y)===0?fl(t,a,k):(++k,fl(t,k,u)),k<=n&&(a=k+1),n<=k&&(u=k-1)}return t}function fl(t,n,a){let u=t[n];t[n]=t[a],t[a]=u}function hl(t,n=cn){let a,u=!1;if(n.length===1){let g;for(let y of t){let T=n(y);(u?cn(T,g)>0:cn(T,T)===0)&&(a=y,g=T,u=!0)}}else for(let g of t)(u?n(g,a)>0:n(g,g)===0)&&(a=g,u=!0);return a}function va(t,n,a){if(t=Float64Array.from(Wx(t,a)),!(!(u=t.length)||isNaN(n=+n))){if(n<=0||u<2)return ws(t);if(n>=1)return Qa(t);var u,g=(u-1)*n,y=Math.floor(g),T=Qa(nu(t,y).subarray(0,y+1)),k=ws(t.subarray(y+1));return T+(k-T)*(g-y)}}function yh(t,n,a=Js){if(!(!(u=t.length)||isNaN(n=+n))){if(n<=0||u<2)return+a(t[0],0,t);if(n>=1)return+a(t[u-1],u-1,t);var u,g=(u-1)*n,y=Math.floor(g),T=+a(t[y],y,t),k=+a(t[y+1],y+1,t);return T+(k-T)*(g-y)}}function xh(t,n,a=Js){if(!isNaN(n=+n)){if(u=Float64Array.from(t,(k,V)=>Js(a(t[V],V,t))),n<=0)return ru(u);if(n>=1)return tu(u);var u,g=Uint32Array.from(t,(k,V)=>V),y=u.length-1,T=Math.floor(y*n);return nu(g,T,0,y,(k,V)=>Za(u[k],u[V])),T=hl(g.subarray(0,T+1),k=>u[k]),T>=0?T:-1}}function Q0(t,n,a){let u=$a(t),g=va(t,.75)-va(t,.25);return u&&g?Math.ceil((a-n)/(2*g*Math.pow(u,-1/3))):1}function J0(t,n,a){let u=$a(t),g=ol(t);return u&&g?Math.ceil((a-n)*Math.cbrt(u)/(3.49*g)):1}function ev(t,n){let a=0,u=0;if(n===void 0)for(let g of t)g!=null&&(g=+g)>=g&&(++a,u+=g);else{let g=-1;for(let y of t)(y=n(y,++g,t))!=null&&(y=+y)>=y&&(++a,u+=y)}if(a)return u/a}function tv(t,n){return va(t,.5,n)}function hb(t,n){return xh(t,.5,n)}function*YA(t){for(let n of t)yield*$1(n)}function iu(t){return Array.from(YA(t))}function rv(t,n){let a=new Zo;if(n===void 0)for(let y of t)y!=null&&y>=y&&a.set(y,(a.get(y)||0)+1);else{let y=-1;for(let T of t)(T=n(T,++y,t))!=null&&T>=T&&a.set(T,(a.get(T)||0)+1)}let u,g=0;for(let[y,T]of a)T>g&&(g=T,u=y);return u}function nv(t,n=ZA){let a=[],u,g=!1;for(let y of t)g&&a.push(n(u,y)),u=y,g=!0;return a}function ZA(t,n){return[t,n]}function Do(t,n,a){t=+t,n=+n,a=(g=arguments.length)<2?(n=t,t=0,1):g<3?1:+a;for(var u=-1,g=Math.max(0,Math.ceil((n-t)/a))|0,y=new Array(g);++u<g;)y[u]=t+u*a;return y}function iv(t,n=cn){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let a=Array.from(t),u=new Float64Array(a.length);n.length!==2&&(a=a.map(n),n=cn);let g=(k,V)=>n(a[k],a[V]),y,T;return t=Uint32Array.from(a,(k,V)=>V),t.sort(n===cn?(k,V)=>Za(a[k],a[V]):ul(g)),t.forEach((k,V)=>{let F=g(k,y===void 0?k:y);F>=0?((y===void 0||F>0)&&(y=k,T=V),u[k]=T):u[k]=NaN}),u}function ov(t,n=cn){let a,u=!1;if(n.length===1){let g;for(let y of t){let T=n(y);(u?cn(T,g)<0:cn(T,T)===0)&&(a=y,g=T,u=!0)}}else for(let g of t)(u?n(g,a)<0:n(g,g)===0)&&(a=g,u=!0);return a}function dl(t,n=cn){if(n.length===1)return ru(t,n);let a,u=-1,g=-1;for(let y of t)++g,(u<0?n(y,y)===0:n(y,a)<0)&&(a=y,u=g);return u}function av(t,n=cn){if(n.length===1)return tu(t,n);let a,u=-1,g=-1;for(let y of t)++g,(u<0?n(y,y)===0:n(y,a)>0)&&(a=y,u=g);return u}function sv(t,n){let a=dl(t,n);return a<0?void 0:a}var db=uv(Math.random);function uv(t){return function(a,u=0,g=a.length){let y=g-(u=+u);for(;y;){let T=t()*y--|0,k=a[y+u];a[y+u]=a[T+u],a[T+u]=k}return a}}function cv(t,n){let a=0;if(n===void 0)for(let u of t)(u=+u)&&(a+=u);else{let u=-1;for(let g of t)(g=+n(g,++u,t))&&(a+=g)}return a}function pl(t){if(!(y=t.length))return[];for(var n=-1,a=ws(t,KA),u=new Array(a);++n<a;)for(var g=-1,y,T=u[n]=new Array(y);++g<y;)T[g]=t[g][n];return u}function KA(t){return t.length}function lv(){return pl(arguments)}function fv(t,n){if(typeof n!="function")throw new TypeError("test is not a function");let a=-1;for(let u of t)if(!n(u,++a,t))return!1;return!0}function hv(t,n){if(typeof n!="function")throw new TypeError("test is not a function");let a=-1;for(let u of t)if(n(u,++a,t))return!0;return!1}function dv(t,n){if(typeof n!="function")throw new TypeError("test is not a function");let a=[],u=-1;for(let g of t)n(g,++u,t)&&a.push(g);return a}function pv(t,n){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");if(typeof n!="function")throw new TypeError("mapper is not a function");return Array.from(t,(a,u)=>n(a,u,t))}function mv(t,n,a){if(typeof n!="function")throw new TypeError("reducer is not a function");let u=t[Symbol.iterator](),g,y,T=-1;if(arguments.length<3){if({done:g,value:a}=u.next(),g)return;++T}for(;{done:g,value:y}=u.next(),!g;)a=n(a,y,++T,t);return a}function vv(t){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(t).reverse()}function gv(t,...n){t=new bo(t);for(let a of n)for(let u of a)t.delete(u);return t}function yv(t,n){let a=n[Symbol.iterator](),u=new bo;for(let g of t){if(u.has(g))return!1;let y,T;for(;({value:y,done:T}=a.next())&&!T;){if(Object.is(g,y))return!1;u.add(y)}}return!0}function xv(t,...n){t=new bo(t),n=n.map(QA);e:for(let a of t)for(let u of n)if(!u.has(a)){t.delete(a);continue e}return t}function QA(t){return t instanceof bo?t:new bo(t)}function ml(t,n){let a=t[Symbol.iterator](),u=new Set;for(let g of n){let y=pb(g);if(u.has(y))continue;let T,k;for(;{value:T,done:k}=a.next();){if(k)return!1;let V=pb(T);if(u.add(V),Object.is(y,V))break}}return!0}function pb(t){return t!==null&&typeof t=="object"?t.valueOf():t}function bv(t,n){return ml(n,t)}function _v(...t){let n=new bo;for(let a of t)for(let u of a)n.add(u);return n}function mb(t){return t}var bh=1,_h=2,wv=3,vl=4,vb=1e-6;function JA(t){return"translate("+t+",0)"}function eR(t){return"translate(0,"+t+")"}function tR(t){return n=>+t(n)}function rR(t,n){return n=Math.max(0,t.bandwidth()-n*2)/2,t.round()&&(n=Math.round(n)),a=>+t(a)+n}function nR(){return!this.__axis}function wh(t,n){var a=[],u=null,g=null,y=6,T=6,k=3,V=typeof window<"u"&&window.devicePixelRatio>1?0:.5,F=t===bh||t===vl?-1:1,G=t===vl||t===_h?"x":"y",X=t===bh||t===wv?JA:eR;function P(O){var H=u??(n.ticks?n.ticks.apply(n,a):n.domain()),q=g??(n.tickFormat?n.tickFormat.apply(n,a):mb),B=Math.max(y,0)+k,j=n.range(),U=+j[0]+V,i=+j[j.length-1]+V,r=(n.bandwidth?rR:tR)(n.copy(),V),e=O.selection?O.selection():O,o=e.selectAll(".domain").data([null]),s=e.selectAll(".tick").data(H,n).order(),d=s.exit(),p=s.enter().append("g").attr("class","tick"),x=s.select("line"),l=s.select("text");o=o.merge(o.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),s=s.merge(p),x=x.merge(p.append("line").attr("stroke","currentColor").attr(G+"2",F*y)),l=l.merge(p.append("text").attr("fill","currentColor").attr(G,F*B).attr("dy",t===bh?"0em":t===wv?"0.71em":"0.32em")),O!==e&&(o=o.transition(O),s=s.transition(O),x=x.transition(O),l=l.transition(O),d=d.transition(O).attr("opacity",vb).attr("transform",function(_){return isFinite(_=r(_))?X(_+V):this.getAttribute("transform")}),p.attr("opacity",vb).attr("transform",function(_){var v=this.parentNode.__axis;return X((v&&isFinite(v=v(_))?v:r(_))+V)})),d.remove(),o.attr("d",t===vl||t===_h?T?"M"+F*T+","+U+"H"+V+"V"+i+"H"+F*T:"M"+V+","+U+"V"+i:T?"M"+U+","+F*T+"V"+V+"H"+i+"V"+F*T:"M"+U+","+V+"H"+i),s.attr("opacity",1).attr("transform",function(_){return X(r(_)+V)}),x.attr(G+"2",F*y),l.attr(G,F*B).text(q),e.filter(nR).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===_h?"start":t===vl?"end":"middle"),e.each(function(){this.__axis=r})}return P.scale=function(O){return arguments.length?(n=O,P):n},P.ticks=function(){return a=Array.from(arguments),P},P.tickArguments=function(O){return arguments.length?(a=O==null?[]:Array.from(O),P):a.slice()},P.tickValues=function(O){return arguments.length?(u=O==null?null:Array.from(O),P):u&&u.slice()},P.tickFormat=function(O){return arguments.length?(g=O,P):g},P.tickSize=function(O){return arguments.length?(y=T=+O,P):y},P.tickSizeInner=function(O){return arguments.length?(y=+O,P):y},P.tickSizeOuter=function(O){return arguments.length?(T=+O,P):T},P.tickPadding=function(O){return arguments.length?(k=+O,P):k},P.offset=function(O){return arguments.length?(V=+O,P):V},P}function gb(t){return wh(bh,t)}function yb(t){return wh(_h,t)}function xb(t){return wh(wv,t)}function bb(t){return wh(vl,t)}var iR={value:()=>{}};function wb(){for(var t=0,n=arguments.length,a={},u;t<n;++t){if(!(u=arguments[t]+"")||u in a||/[\s.]/.test(u))throw new Error("illegal type: "+u);a[u]=[]}return new Ch(a)}function Ch(t){this._=t}function oR(t,n){return t.trim().split(/^|\s+/).map(function(a){var u="",g=a.indexOf(".");if(g>=0&&(u=a.slice(g+1),a=a.slice(0,g)),a&&!n.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:u}})}Ch.prototype=wb.prototype={constructor:Ch,on:function(t,n){var a=this._,u=oR(t+"",a),g,y=-1,T=u.length;if(arguments.length<2){for(;++y<T;)if((g=(t=u[y]).type)&&(g=aR(a[g],t.name)))return g;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++y<T;)if(g=(t=u[y]).type)a[g]=_b(a[g],t.name,n);else if(n==null)for(g in a)a[g]=_b(a[g],t.name,null);return this},copy:function(){var t={},n=this._;for(var a in n)t[a]=n[a].slice();return new Ch(t)},call:function(t,n){if((g=arguments.length-2)>0)for(var a=new Array(g),u=0,g,y;u<g;++u)a[u]=arguments[u+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(y=this._[t],u=0,g=y.length;u<g;++u)y[u].value.apply(n,a)},apply:function(t,n,a){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var u=this._[t],g=0,y=u.length;g<y;++g)u[g].value.apply(n,a)}};function aR(t,n){for(var a=0,u=t.length,g;a<u;++a)if((g=t[a]).name===n)return g.value}function _b(t,n,a){for(var u=0,g=t.length;u<g;++u)if(t[u].name===n){t[u]=iR,t=t.slice(0,u).concat(t.slice(u+1));break}return a!=null&&t.push({name:n,value:a}),t}var Oo=wb;var Sh="http://www.w3.org/1999/xhtml",gl={svg:"http://www.w3.org/2000/svg",xhtml:Sh,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ga(t){var n=t+="",a=n.indexOf(":");return a>=0&&(n=t.slice(0,a))!=="xmlns"&&(t=t.slice(a+1)),gl.hasOwnProperty(n)?{space:gl[n],local:t}:t}function sR(t){return function(){var n=this.ownerDocument,a=this.namespaceURI;return a===Sh&&n.documentElement.namespaceURI===Sh?n.createElement(t):n.createElementNS(a,t)}}function uR(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Cs(t){var n=ga(t);return(n.local?uR:sR)(n)}function cR(){}function Ss(t){return t==null?cR:function(){return this.querySelector(t)}}function Cb(t){typeof t!="function"&&(t=Ss(t));for(var n=this._groups,a=n.length,u=new Array(a),g=0;g<a;++g)for(var y=n[g],T=y.length,k=u[g]=new Array(T),V,F,G=0;G<T;++G)(V=y[G])&&(F=t.call(V,V.__data__,G,y))&&("__data__"in V&&(F.__data__=V.__data__),k[G]=F);return new Zn(u,this._parents)}function yl(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function lR(){return[]}function ic(t){return t==null?lR:function(){return this.querySelectorAll(t)}}function fR(t){return function(){return yl(t.apply(this,arguments))}}function Sb(t){typeof t=="function"?t=fR(t):t=ic(t);for(var n=this._groups,a=n.length,u=[],g=[],y=0;y<a;++y)for(var T=n[y],k=T.length,V,F=0;F<k;++F)(V=T[F])&&(u.push(t.call(V,V.__data__,F,T)),g.push(V));return new Zn(u,g)}function oc(t){return function(){return this.matches(t)}}function Eh(t){return function(n){return n.matches(t)}}var hR=Array.prototype.find;function dR(t){return function(){return hR.call(this.children,t)}}function pR(){return this.firstElementChild}function Eb(t){return this.select(t==null?pR:dR(typeof t=="function"?t:Eh(t)))}var mR=Array.prototype.filter;function vR(){return Array.from(this.children)}function gR(t){return function(){return mR.call(this.children,t)}}function Tb(t){return this.selectAll(t==null?vR:gR(typeof t=="function"?t:Eh(t)))}function Mb(t){typeof t!="function"&&(t=oc(t));for(var n=this._groups,a=n.length,u=new Array(a),g=0;g<a;++g)for(var y=n[g],T=y.length,k=u[g]=[],V,F=0;F<T;++F)(V=y[F])&&t.call(V,V.__data__,F,y)&&k.push(V);return new Zn(u,this._parents)}function Th(t){return new Array(t.length)}function Ab(){return new Zn(this._enter||this._groups.map(Th),this._parents)}function xl(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}xl.prototype={constructor:xl,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Rb(t){return function(){return t}}function yR(t,n,a,u,g,y){for(var T=0,k,V=n.length,F=y.length;T<F;++T)(k=n[T])?(k.__data__=y[T],u[T]=k):a[T]=new xl(t,y[T]);for(;T<V;++T)(k=n[T])&&(g[T]=k)}function xR(t,n,a,u,g,y,T){var k,V,F=new Map,G=n.length,X=y.length,P=new Array(G),O;for(k=0;k<G;++k)(V=n[k])&&(P[k]=O=T.call(V,V.__data__,k,n)+"",F.has(O)?g[k]=V:F.set(O,V));for(k=0;k<X;++k)O=T.call(t,y[k],k,y)+"",(V=F.get(O))?(u[k]=V,V.__data__=y[k],F.delete(O)):a[k]=new xl(t,y[k]);for(k=0;k<G;++k)(V=n[k])&&F.get(P[k])===V&&(g[k]=V)}function bR(t){return t.__data__}function kb(t,n){if(!arguments.length)return Array.from(this,bR);var a=n?xR:yR,u=this._parents,g=this._groups;typeof t!="function"&&(t=Rb(t));for(var y=g.length,T=new Array(y),k=new Array(y),V=new Array(y),F=0;F<y;++F){var G=u[F],X=g[F],P=X.length,O=_R(t.call(G,G&&G.__data__,F,u)),H=O.length,q=k[F]=new Array(H),B=T[F]=new Array(H),j=V[F]=new Array(P);a(G,X,q,B,j,O,n);for(var U=0,i=0,r,e;U<H;++U)if(r=q[U]){for(U>=i&&(i=U+1);!(e=B[i])&&++i<H;);r._next=e||null}}return T=new Zn(T,u),T._enter=k,T._exit=V,T}function _R(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ib(){return new Zn(this._exit||this._groups.map(Th),this._parents)}function Pb(t,n,a){var u=this.enter(),g=this,y=this.exit();return typeof t=="function"?(u=t(u),u&&(u=u.selection())):u=u.append(t+""),n!=null&&(g=n(g),g&&(g=g.selection())),a==null?y.remove():a(y),u&&g?u.merge(g).order():g}function Db(t){for(var n=t.selection?t.selection():t,a=this._groups,u=n._groups,g=a.length,y=u.length,T=Math.min(g,y),k=new Array(g),V=0;V<T;++V)for(var F=a[V],G=u[V],X=F.length,P=k[V]=new Array(X),O,H=0;H<X;++H)(O=F[H]||G[H])&&(P[H]=O);for(;V<g;++V)k[V]=a[V];return new Zn(k,this._parents)}function Ob(){for(var t=this._groups,n=-1,a=t.length;++n<a;)for(var u=t[n],g=u.length-1,y=u[g],T;--g>=0;)(T=u[g])&&(y&&T.compareDocumentPosition(y)^4&&y.parentNode.insertBefore(T,y),y=T);return this}function Nb(t){t||(t=wR);function n(X,P){return X&&P?t(X.__data__,P.__data__):!X-!P}for(var a=this._groups,u=a.length,g=new Array(u),y=0;y<u;++y){for(var T=a[y],k=T.length,V=g[y]=new Array(k),F,G=0;G<k;++G)(F=T[G])&&(V[G]=F);V.sort(n)}return new Zn(g,this._parents).order()}function wR(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function Lb(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Fb(){return Array.from(this)}function Ub(){for(var t=this._groups,n=0,a=t.length;n<a;++n)for(var u=t[n],g=0,y=u.length;g<y;++g){var T=u[g];if(T)return T}return null}function Bb(){let t=0;for(let n of this)++t;return t}function Vb(){return!this.node()}function Hb(t){for(var n=this._groups,a=0,u=n.length;a<u;++a)for(var g=n[a],y=0,T=g.length,k;y<T;++y)(k=g[y])&&t.call(k,k.__data__,y,g);return this}function CR(t){return function(){this.removeAttribute(t)}}function SR(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ER(t,n){return function(){this.setAttribute(t,n)}}function TR(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function MR(t,n){return function(){var a=n.apply(this,arguments);a==null?this.removeAttribute(t):this.setAttribute(t,a)}}function AR(t,n){return function(){var a=n.apply(this,arguments);a==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,a)}}function zb(t,n){var a=ga(t);if(arguments.length<2){var u=this.node();return a.local?u.getAttributeNS(a.space,a.local):u.getAttribute(a)}return this.each((n==null?a.local?SR:CR:typeof n=="function"?a.local?AR:MR:a.local?TR:ER)(a,n))}function ac(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function RR(t){return function(){this.style.removeProperty(t)}}function kR(t,n,a){return function(){this.style.setProperty(t,n,a)}}function IR(t,n,a){return function(){var u=n.apply(this,arguments);u==null?this.style.removeProperty(t):this.style.setProperty(t,u,a)}}function Gb(t,n,a){return arguments.length>1?this.each((n==null?RR:typeof n=="function"?IR:kR)(t,n,a??"")):Ja(this.node(),t)}function Ja(t,n){return t.style.getPropertyValue(n)||ac(t).getComputedStyle(t,null).getPropertyValue(n)}function PR(t){return function(){delete this[t]}}function DR(t,n){return function(){this[t]=n}}function OR(t,n){return function(){var a=n.apply(this,arguments);a==null?delete this[t]:this[t]=a}}function qb(t,n){return arguments.length>1?this.each((n==null?PR:typeof n=="function"?OR:DR)(t,n)):this.node()[t]}function Wb(t){return t.trim().split(/^|\s+/)}function Cv(t){return t.classList||new jb(t)}function jb(t){this._node=t,this._names=Wb(t.getAttribute("class")||"")}jb.prototype={add:function(t){var n=this._names.indexOf(t);n<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function $b(t,n){for(var a=Cv(t),u=-1,g=n.length;++u<g;)a.add(n[u])}function Xb(t,n){for(var a=Cv(t),u=-1,g=n.length;++u<g;)a.remove(n[u])}function NR(t){return function(){$b(this,t)}}function LR(t){return function(){Xb(this,t)}}function FR(t,n){return function(){(n.apply(this,arguments)?$b:Xb)(this,t)}}function Yb(t,n){var a=Wb(t+"");if(arguments.length<2){for(var u=Cv(this.node()),g=-1,y=a.length;++g<y;)if(!u.contains(a[g]))return!1;return!0}return this.each((typeof n=="function"?FR:n?NR:LR)(a,n))}function UR(){this.textContent=""}function BR(t){return function(){this.textContent=t}}function VR(t){return function(){var n=t.apply(this,arguments);this.textContent=n??""}}function Zb(t){return arguments.length?this.each(t==null?UR:(typeof t=="function"?VR:BR)(t)):this.node().textContent}function HR(){this.innerHTML=""}function zR(t){return function(){this.innerHTML=t}}function GR(t){return function(){var n=t.apply(this,arguments);this.innerHTML=n??""}}function Kb(t){return arguments.length?this.each(t==null?HR:(typeof t=="function"?GR:zR)(t)):this.node().innerHTML}function qR(){this.nextSibling&&this.parentNode.appendChild(this)}function Qb(){return this.each(qR)}function WR(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Jb(){return this.each(WR)}function e2(t){var n=typeof t=="function"?t:Cs(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function jR(){return null}function t2(t,n){var a=typeof t=="function"?t:Cs(t),u=n==null?jR:typeof n=="function"?n:Ss(n);return this.select(function(){return this.insertBefore(a.apply(this,arguments),u.apply(this,arguments)||null)})}function $R(){var t=this.parentNode;t&&t.removeChild(this)}function r2(){return this.each($R)}function XR(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function YR(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function n2(t){return this.select(t?YR:XR)}function i2(t){return arguments.length?this.property("__data__",t):this.node().__data__}function ZR(t){return function(n){t.call(this,n,this.__data__)}}function KR(t){return t.trim().split(/^|\s+/).map(function(n){var a="",u=n.indexOf(".");return u>=0&&(a=n.slice(u+1),n=n.slice(0,u)),{type:n,name:a}})}function QR(t){return function(){var n=this.__on;if(n){for(var a=0,u=-1,g=n.length,y;a<g;++a)y=n[a],(!t.type||y.type===t.type)&&y.name===t.name?this.removeEventListener(y.type,y.listener,y.options):n[++u]=y;++u?n.length=u:delete this.__on}}}function JR(t,n,a){return function(){var u=this.__on,g,y=ZR(n);if(u){for(var T=0,k=u.length;T<k;++T)if((g=u[T]).type===t.type&&g.name===t.name){this.removeEventListener(g.type,g.listener,g.options),this.addEventListener(g.type,g.listener=y,g.options=a),g.value=n;return}}this.addEventListener(t.type,y,a),g={type:t.type,name:t.name,value:n,listener:y,options:a},u?u.push(g):this.__on=[g]}}function o2(t,n,a){var u=KR(t+""),g,y=u.length,T;if(arguments.length<2){var k=this.node().__on;if(k){for(var V=0,F=k.length,G;V<F;++V)for(g=0,G=k[V];g<y;++g)if((T=u[g]).type===G.type&&T.name===G.name)return G.value}return}for(k=n?JR:QR,g=0;g<y;++g)this.each(k(u[g],n,a));return this}function a2(t,n,a){var u=ac(t),g=u.CustomEvent;typeof g=="function"?g=new g(n,a):(g=u.document.createEvent("Event"),a?(g.initEvent(n,a.bubbles,a.cancelable),g.detail=a.detail):g.initEvent(n,!1,!1)),t.dispatchEvent(g)}function e6(t,n){return function(){return a2(this,t,n)}}function t6(t,n){return function(){return a2(this,t,n.apply(this,arguments))}}function s2(t,n){return this.each((typeof n=="function"?t6:e6)(t,n))}function*u2(){for(var t=this._groups,n=0,a=t.length;n<a;++n)for(var u=t[n],g=0,y=u.length,T;g<y;++g)(T=u[g])&&(yield T)}var bl=[null];function Zn(t,n){this._groups=t,this._parents=n}function c2(){return new Zn([[document.documentElement]],bl)}function r6(){return this}Zn.prototype=c2.prototype={constructor:Zn,select:Cb,selectAll:Sb,selectChild:Eb,selectChildren:Tb,filter:Mb,data:kb,enter:Ab,exit:Ib,join:Pb,merge:Db,selection:r6,order:Ob,sort:Nb,call:Lb,nodes:Fb,node:Ub,size:Bb,empty:Vb,each:Hb,attr:zb,style:Gb,property:qb,classed:Yb,text:Zb,html:Kb,raise:Qb,lower:Jb,append:e2,insert:t2,remove:r2,clone:n2,datum:i2,on:o2,dispatch:s2,[Symbol.iterator]:u2};var ya=c2;function Er(t){return typeof t=="string"?new Zn([[document.querySelector(t)]],[document.documentElement]):new Zn([[t]],bl)}function l2(t){return Er(Cs(t).call(document.documentElement))}var n6=0;function Mh(){return new Sv}function Sv(){this._="@"+(++n6).toString(36)}Sv.prototype=Mh.prototype={constructor:Sv,get:function(t){for(var n=this._;!(n in t);)if(!(t=t.parentNode))return;return t[n]},set:function(t,n){return t[this._]=n},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};function Ah(t){let n;for(;n=t.sourceEvent;)t=n;return t}function Ii(t,n){if(t=Ah(t),n===void 0&&(n=t.currentTarget),n){var a=n.ownerSVGElement||n;if(a.createSVGPoint){var u=a.createSVGPoint();return u.x=t.clientX,u.y=t.clientY,u=u.matrixTransform(n.getScreenCTM().inverse()),[u.x,u.y]}if(n.getBoundingClientRect){var g=n.getBoundingClientRect();return[t.clientX-g.left-n.clientLeft,t.clientY-g.top-n.clientTop]}}return[t.pageX,t.pageY]}function f2(t,n){return t.target&&(t=Ah(t),n===void 0&&(n=t.currentTarget),t=t.touches||[t]),Array.from(t,a=>Ii(a,n))}function h2(t){return typeof t=="string"?new Zn([document.querySelectorAll(t)],[document.documentElement]):new Zn([yl(t)],bl)}var d2={passive:!1},ou={capture:!0,passive:!1};function Rh(t){t.stopImmediatePropagation()}function Es(t){t.preventDefault(),t.stopImmediatePropagation()}function Ts(t){var n=t.document.documentElement,a=Er(t).on("dragstart.drag",Es,ou);"onselectstart"in n?a.on("selectstart.drag",Es,ou):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function Ms(t,n){var a=t.document.documentElement,u=Er(t).on("dragstart.drag",null);n&&(u.on("click.drag",Es,ou),setTimeout(function(){u.on("click.drag",null)},0)),"onselectstart"in a?u.on("selectstart.drag",null):(a.style.MozUserSelect=a.__noselect,delete a.__noselect)}var _l=t=>()=>t;function wl(t,{sourceEvent:n,subject:a,target:u,identifier:g,active:y,x:T,y:k,dx:V,dy:F,dispatch:G}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:a,enumerable:!0,configurable:!0},target:{value:u,enumerable:!0,configurable:!0},identifier:{value:g,enumerable:!0,configurable:!0},active:{value:y,enumerable:!0,configurable:!0},x:{value:T,enumerable:!0,configurable:!0},y:{value:k,enumerable:!0,configurable:!0},dx:{value:V,enumerable:!0,configurable:!0},dy:{value:F,enumerable:!0,configurable:!0},_:{value:G}})}wl.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function i6(t){return!t.ctrlKey&&!t.button}function o6(){return this.parentNode}function a6(t,n){return n??{x:t.x,y:t.y}}function s6(){return navigator.maxTouchPoints||"ontouchstart"in this}function p2(){var t=i6,n=o6,a=a6,u=s6,g={},y=Oo("start","drag","end"),T=0,k,V,F,G,X=0;function P(r){r.on("mousedown.drag",O).filter(u).on("touchstart.drag",B).on("touchmove.drag",j,d2).on("touchend.drag touchcancel.drag",U).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function O(r,e){if(!(G||!t.call(this,r,e))){var o=i(this,n.call(this,r,e),r,e,"mouse");o&&(Er(r.view).on("mousemove.drag",H,ou).on("mouseup.drag",q,ou),Ts(r.view),Rh(r),F=!1,k=r.clientX,V=r.clientY,o("start",r))}}function H(r){if(Es(r),!F){var e=r.clientX-k,o=r.clientY-V;F=e*e+o*o>X}g.mouse("drag",r)}function q(r){Er(r.view).on("mousemove.drag mouseup.drag",null),Ms(r.view,F),Es(r),g.mouse("end",r)}function B(r,e){if(t.call(this,r,e)){var o=r.changedTouches,s=n.call(this,r,e),d=o.length,p,x;for(p=0;p<d;++p)(x=i(this,s,r,e,o[p].identifier,o[p]))&&(Rh(r),x("start",r,o[p]))}}function j(r){var e=r.changedTouches,o=e.length,s,d;for(s=0;s<o;++s)(d=g[e[s].identifier])&&(Es(r),d("drag",r,e[s]))}function U(r){var e=r.changedTouches,o=e.length,s,d;for(G&&clearTimeout(G),G=setTimeout(function(){G=null},500),s=0;s<o;++s)(d=g[e[s].identifier])&&(Rh(r),d("end",r,e[s]))}function i(r,e,o,s,d,p){var x=y.copy(),l=Ii(p||o,e),_,v,c;if((c=a.call(r,new wl("beforestart",{sourceEvent:o,target:P,identifier:d,active:T,x:l[0],y:l[1],dx:0,dy:0,dispatch:x}),s))!=null)return _=c.x-l[0]||0,v=c.y-l[1]||0,function h(f,m,b){var w=l,C;switch(f){case"start":g[d]=h,C=T++;break;case"end":delete g[d],--T;case"drag":l=Ii(b||m,e),C=T;break}x.call(f,r,new wl(f,{sourceEvent:m,subject:c,target:P,identifier:d,active:C,x:l[0]+_,y:l[1]+v,dx:l[0]-w[0],dy:l[1]-w[1],dispatch:x}),s)}}return P.filter=function(r){return arguments.length?(t=typeof r=="function"?r:_l(!!r),P):t},P.container=function(r){return arguments.length?(n=typeof r=="function"?r:_l(r),P):n},P.subject=function(r){return arguments.length?(a=typeof r=="function"?r:_l(r),P):a},P.touchable=function(r){return arguments.length?(u=typeof r=="function"?r:_l(!!r),P):u},P.on=function(){var r=y.on.apply(y,arguments);return r===y?P:r},P.clickDistance=function(r){return arguments.length?(X=(r=+r)*r,P):Math.sqrt(X)},P}function es(t,n,a){t.prototype=n.prototype=a,a.constructor=t}function As(t,n){var a=Object.create(t.prototype);for(var u in n)a[u]=n[u];return a}function ba(){}var Rs=.7,uu=1/Rs,sc="\\s*([+-]?\\d+)\\s*",Cl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",xa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",u6=/^#([0-9a-f]{3,8})$/,c6=new RegExp(`^rgb\\(${sc},${sc},${sc}\\)$`),l6=new RegExp(`^rgb\\(${xa},${xa},${xa}\\)$`),f6=new RegExp(`^rgba\\(${sc},${sc},${sc},${Cl}\\)$`),h6=new RegExp(`^rgba\\(${xa},${xa},${xa},${Cl}\\)$`),d6=new RegExp(`^hsl\\(${Cl},${xa},${xa}\\)$`),p6=new RegExp(`^hsla\\(${Cl},${xa},${xa},${Cl}\\)$`),m2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};es(ba,No,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:v2,formatHex:v2,formatHex8:m6,formatHsl:v6,formatRgb:g2,toString:g2});function v2(){return this.rgb().formatHex()}function m6(){return this.rgb().formatHex8()}function v6(){return C2(this).formatHsl()}function g2(){return this.rgb().formatRgb()}function No(t){var n,a;return t=(t+"").trim().toLowerCase(),(n=u6.exec(t))?(a=n[1].length,n=parseInt(n[1],16),a===6?y2(n):a===3?new _i(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):a===8?kh(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):a===4?kh(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=c6.exec(t))?new _i(n[1],n[2],n[3],1):(n=l6.exec(t))?new _i(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=f6.exec(t))?kh(n[1],n[2],n[3],n[4]):(n=h6.exec(t))?kh(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=d6.exec(t))?_2(n[1],n[2]/100,n[3]/100,1):(n=p6.exec(t))?_2(n[1],n[2]/100,n[3]/100,n[4]):m2.hasOwnProperty(t)?y2(m2[t]):t==="transparent"?new _i(NaN,NaN,NaN,0):null}function y2(t){return new _i(t>>16&255,t>>8&255,t&255,1)}function kh(t,n,a,u){return u<=0&&(t=n=a=NaN),new _i(t,n,a,u)}function Sl(t){return t instanceof ba||(t=No(t)),t?(t=t.rgb(),new _i(t.r,t.g,t.b,t.opacity)):new _i}function ts(t,n,a,u){return arguments.length===1?Sl(t):new _i(t,n,a,u??1)}function _i(t,n,a,u){this.r=+t,this.g=+n,this.b=+a,this.opacity=+u}es(_i,ts,As(ba,{brighter(t){return t=t==null?uu:Math.pow(uu,t),new _i(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Rs:Math.pow(Rs,t),new _i(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new _i(su(this.r),su(this.g),su(this.b),Ph(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:x2,formatHex:x2,formatHex8:g6,formatRgb:b2,toString:b2}));function x2(){return`#${au(this.r)}${au(this.g)}${au(this.b)}`}function g6(){return`#${au(this.r)}${au(this.g)}${au(this.b)}${au((isNaN(this.opacity)?1:this.opacity)*255)}`}function b2(){let t=Ph(this.opacity);return`${t===1?"rgb(":"rgba("}${su(this.r)}, ${su(this.g)}, ${su(this.b)}${t===1?")":`, ${t})`}`}function Ph(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function su(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function au(t){return t=su(t),(t<16?"0":"")+t.toString(16)}function _2(t,n,a,u){return u<=0?t=n=a=NaN:a<=0||a>=1?t=n=NaN:n<=0&&(t=NaN),new Qo(t,n,a,u)}function C2(t){if(t instanceof Qo)return new Qo(t.h,t.s,t.l,t.opacity);if(t instanceof ba||(t=No(t)),!t)return new Qo;if(t instanceof Qo)return t;t=t.rgb();var n=t.r/255,a=t.g/255,u=t.b/255,g=Math.min(n,a,u),y=Math.max(n,a,u),T=NaN,k=y-g,V=(y+g)/2;return k?(n===y?T=(a-u)/k+(a<u)*6:a===y?T=(u-n)/k+2:T=(n-a)/k+4,k/=V<.5?y+g:2-y-g,T*=60):k=V>0&&V<1?0:T,new Qo(T,k,V,t.opacity)}function ks(t,n,a,u){return arguments.length===1?C2(t):new Qo(t,n,a,u??1)}function Qo(t,n,a,u){this.h=+t,this.s=+n,this.l=+a,this.opacity=+u}es(Qo,ks,As(ba,{brighter(t){return t=t==null?uu:Math.pow(uu,t),new Qo(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Rs:Math.pow(Rs,t),new Qo(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,n=isNaN(t)||isNaN(this.s)?0:this.s,a=this.l,u=a+(a<.5?a:1-a)*n,g=2*a-u;return new _i(Ev(t>=240?t-240:t+120,g,u),Ev(t,g,u),Ev(t<120?t+240:t-120,g,u),this.opacity)},clamp(){return new Qo(w2(this.h),Ih(this.s),Ih(this.l),Ph(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let t=Ph(this.opacity);return`${t===1?"hsl(":"hsla("}${w2(this.h)}, ${Ih(this.s)*100}%, ${Ih(this.l)*100}%${t===1?")":`, ${t})`}`}}));function w2(t){return t=(t||0)%360,t<0?t+360:t}function Ih(t){return Math.max(0,Math.min(1,t||0))}function Ev(t,n,a){return(t<60?n+(a-n)*t/60:t<180?a:t<240?n+(a-n)*(240-t)/60:n)*255}var Dh=Math.PI/180,Oh=180/Math.PI;var Nh=18,S2=.96422,E2=1,T2=.82521,M2=4/29,uc=6/29,A2=3*uc*uc,y6=uc*uc*uc;function R2(t){if(t instanceof Jo)return new Jo(t.l,t.a,t.b,t.opacity);if(t instanceof _a)return D2(t);t instanceof _i||(t=Sl(t));var n=Rv(t.r),a=Rv(t.g),u=Rv(t.b),g=Tv((.2225045*n+.7168786*a+.0606169*u)/E2),y,T;return n===a&&a===u?y=T=g:(y=Tv((.4360747*n+.3850649*a+.1430804*u)/S2),T=Tv((.0139322*n+.0971045*a+.7141733*u)/T2)),new Jo(116*g-16,500*(y-g),200*(g-T),t.opacity)}function k2(t,n){return new Jo(t,0,0,n??1)}function cu(t,n,a,u){return arguments.length===1?R2(t):new Jo(t,n,a,u??1)}function Jo(t,n,a,u){this.l=+t,this.a=+n,this.b=+a,this.opacity=+u}es(Jo,cu,As(ba,{brighter(t){return new Jo(this.l+Nh*(t??1),this.a,this.b,this.opacity)},darker(t){return new Jo(this.l-Nh*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,n=isNaN(this.a)?t:t+this.a/500,a=isNaN(this.b)?t:t-this.b/200;return n=S2*Mv(n),t=E2*Mv(t),a=T2*Mv(a),new _i(Av(3.1338561*n-1.6168667*t-.4906146*a),Av(-.9787684*n+1.9161415*t+.033454*a),Av(.0719453*n-.2289914*t+1.4052427*a),this.opacity)}}));function Tv(t){return t>y6?Math.pow(t,1/3):t/A2+M2}function Mv(t){return t>uc?t*t*t:A2*(t-M2)}function Av(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Rv(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function I2(t){if(t instanceof _a)return new _a(t.h,t.c,t.l,t.opacity);if(t instanceof Jo||(t=R2(t)),t.a===0&&t.b===0)return new _a(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var n=Math.atan2(t.b,t.a)*Oh;return new _a(n<0?n+360:n,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function P2(t,n,a,u){return arguments.length===1?I2(t):new _a(a,n,t,u??1)}function cc(t,n,a,u){return arguments.length===1?I2(t):new _a(t,n,a,u??1)}function _a(t,n,a,u){this.h=+t,this.c=+n,this.l=+a,this.opacity=+u}function D2(t){if(isNaN(t.h))return new Jo(t.l,0,0,t.opacity);var n=t.h*Dh;return new Jo(t.l,Math.cos(n)*t.c,Math.sin(n)*t.c,t.opacity)}es(_a,cc,As(ba,{brighter(t){return new _a(this.h,this.c,this.l+Nh*(t??1),this.opacity)},darker(t){return new _a(this.h,this.c,this.l-Nh*(t??1),this.opacity)},rgb(){return D2(this).rgb()}}));var F2=-.14861,kv=1.78277,Iv=-.29227,Lh=-.90649,El=1.97294,O2=El*Lh,N2=El*kv,L2=kv*Iv-Lh*F2;function x6(t){if(t instanceof lu)return new lu(t.h,t.s,t.l,t.opacity);t instanceof _i||(t=Sl(t));var n=t.r/255,a=t.g/255,u=t.b/255,g=(L2*u+O2*n-N2*a)/(L2+O2-N2),y=u-g,T=(El*(a-g)-Iv*y)/Lh,k=Math.sqrt(T*T+y*y)/(El*g*(1-g)),V=k?Math.atan2(T,y)*Oh-120:NaN;return new lu(V<0?V+360:V,k,g,t.opacity)}function Xi(t,n,a,u){return arguments.length===1?x6(t):new lu(t,n,a,u??1)}function lu(t,n,a,u){this.h=+t,this.s=+n,this.l=+a,this.opacity=+u}es(lu,Xi,As(ba,{brighter(t){return t=t==null?uu:Math.pow(uu,t),new lu(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Rs:Math.pow(Rs,t),new lu(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*Dh,n=+this.l,a=isNaN(this.s)?0:this.s*n*(1-n),u=Math.cos(t),g=Math.sin(t);return new _i(255*(n+a*(F2*u+kv*g)),255*(n+a*(Iv*u+Lh*g)),255*(n+a*(El*u)),this.opacity)}}));function Pv(t,n,a,u,g){var y=t*t,T=y*t;return((1-3*t+3*y-T)*n+(4-6*y+3*T)*a+(1+3*t+3*y-3*T)*u+T*g)/6}function Fh(t){var n=t.length-1;return function(a){var u=a<=0?a=0:a>=1?(a=1,n-1):Math.floor(a*n),g=t[u],y=t[u+1],T=u>0?t[u-1]:2*g-y,k=u<n-1?t[u+2]:2*y-g;return Pv((a-u/n)*n,T,g,y,k)}}function Uh(t){var n=t.length;return function(a){var u=Math.floor(((a%=1)<0?++a:a)*n),g=t[(u+n-1)%n],y=t[u%n],T=t[(u+1)%n],k=t[(u+2)%n];return Pv((a-u/n)*n,g,y,T,k)}}var lc=t=>()=>t;function U2(t,n){return function(a){return t+a*n}}function b6(t,n,a){return t=Math.pow(t,a),n=Math.pow(n,a)-t,a=1/a,function(u){return Math.pow(t+u*n,a)}}function Is(t,n){var a=n-t;return a?U2(t,a>180||a<-180?a-360*Math.round(a/360):a):lc(isNaN(t)?n:t)}function B2(t){return(t=+t)==1?ei:function(n,a){return a-n?b6(n,a,t):lc(isNaN(n)?a:n)}}function ei(t,n){var a=n-t;return a?U2(t,a):lc(isNaN(t)?n:t)}var Ps=function t(n){var a=B2(n);function u(g,y){var T=a((g=ts(g)).r,(y=ts(y)).r),k=a(g.g,y.g),V=a(g.b,y.b),F=ei(g.opacity,y.opacity);return function(G){return g.r=T(G),g.g=k(G),g.b=V(G),g.opacity=F(G),g+""}}return u.gamma=t,u}(1);function V2(t){return function(n){var a=n.length,u=new Array(a),g=new Array(a),y=new Array(a),T,k;for(T=0;T<a;++T)k=ts(n[T]),u[T]=k.r||0,g[T]=k.g||0,y[T]=k.b||0;return u=t(u),g=t(g),y=t(y),k.opacity=1,function(V){return k.r=u(V),k.g=g(V),k.b=y(V),k+""}}}var Bh=V2(Fh),H2=V2(Uh);function fc(t,n){n||(n=[]);var a=t?Math.min(n.length,t.length):0,u=n.slice(),g;return function(y){for(g=0;g<a;++g)u[g]=t[g]*(1-y)+n[g]*y;return u}}function Vh(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function z2(t,n){return(Vh(n)?fc:Dv)(t,n)}function Dv(t,n){var a=n?n.length:0,u=t?Math.min(a,t.length):0,g=new Array(u),y=new Array(a),T;for(T=0;T<u;++T)g[T]=si(t[T],n[T]);for(;T<a;++T)y[T]=n[T];return function(k){for(T=0;T<u;++T)y[T]=g[T](k);return y}}function Hh(t,n){var a=new Date;return t=+t,n=+n,function(u){return a.setTime(t*(1-u)+n*u),a}}function Pi(t,n){return t=+t,n=+n,function(a){return t*(1-a)+n*a}}function zh(t,n){var a={},u={},g;(t===null||typeof t!="object")&&(t={}),(n===null||typeof n!="object")&&(n={});for(g in n)g in t?a[g]=si(t[g],n[g]):u[g]=n[g];return function(y){for(g in a)u[g]=a[g](y);return u}}var Nv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ov=new RegExp(Nv.source,"g");function _6(t){return function(){return t}}function w6(t){return function(n){return t(n)+""}}function hc(t,n){var a=Nv.lastIndex=Ov.lastIndex=0,u,g,y,T=-1,k=[],V=[];for(t=t+"",n=n+"";(u=Nv.exec(t))&&(g=Ov.exec(n));)(y=g.index)>a&&(y=n.slice(a,y),k[T]?k[T]+=y:k[++T]=y),(u=u[0])===(g=g[0])?k[T]?k[T]+=g:k[++T]=g:(k[++T]=null,V.push({i:T,x:Pi(u,g)})),a=Ov.lastIndex;return a<n.length&&(y=n.slice(a),k[T]?k[T]+=y:k[++T]=y),k.length<2?V[0]?w6(V[0].x):_6(n):(n=V.length,function(F){for(var G=0,X;G<n;++G)k[(X=V[G]).i]=X.x(F);return k.join("")})}function si(t,n){var a=typeof n,u;return n==null||a==="boolean"?lc(n):(a==="number"?Pi:a==="string"?(u=No(n))?(n=u,Ps):hc:n instanceof No?Ps:n instanceof Date?Hh:Vh(n)?fc:Array.isArray(n)?Dv:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?zh:Pi)(t,n)}function G2(t){var n=t.length;return function(a){return t[Math.max(0,Math.min(n-1,Math.floor(a*n)))]}}function q2(t,n){var a=Is(+t,+n);return function(u){var g=a(u);return g-360*Math.floor(g/360)}}function Ds(t,n){return t=+t,n=+n,function(a){return Math.round(t*(1-a)+n*a)}}var W2=180/Math.PI,Gh={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Lv(t,n,a,u,g,y){var T,k,V;return(T=Math.sqrt(t*t+n*n))&&(t/=T,n/=T),(V=t*a+n*u)&&(a-=t*V,u-=n*V),(k=Math.sqrt(a*a+u*u))&&(a/=k,u/=k,V/=k),t*u<n*a&&(t=-t,n=-n,V=-V,T=-T),{translateX:g,translateY:y,rotate:Math.atan2(n,t)*W2,skewX:Math.atan(V)*W2,scaleX:T,scaleY:k}}var qh;function j2(t){let n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?Gh:Lv(n.a,n.b,n.c,n.d,n.e,n.f)}function $2(t){return t==null?Gh:(qh||(qh=document.createElementNS("http://www.w3.org/2000/svg","g")),qh.setAttribute("transform",t),(t=qh.transform.baseVal.consolidate())?(t=t.matrix,Lv(t.a,t.b,t.c,t.d,t.e,t.f)):Gh)}function X2(t,n,a,u){function g(F){return F.length?F.pop()+" ":""}function y(F,G,X,P,O,H){if(F!==X||G!==P){var q=O.push("translate(",null,n,null,a);H.push({i:q-4,x:Pi(F,X)},{i:q-2,x:Pi(G,P)})}else(X||P)&&O.push("translate("+X+n+P+a)}function T(F,G,X,P){F!==G?(F-G>180?G+=360:G-F>180&&(F+=360),P.push({i:X.push(g(X)+"rotate(",null,u)-2,x:Pi(F,G)})):G&&X.push(g(X)+"rotate("+G+u)}function k(F,G,X,P){F!==G?P.push({i:X.push(g(X)+"skewX(",null,u)-2,x:Pi(F,G)}):G&&X.push(g(X)+"skewX("+G+u)}function V(F,G,X,P,O,H){if(F!==X||G!==P){var q=O.push(g(O)+"scale(",null,",",null,")");H.push({i:q-4,x:Pi(F,X)},{i:q-2,x:Pi(G,P)})}else(X!==1||P!==1)&&O.push(g(O)+"scale("+X+","+P+")")}return function(F,G){var X=[],P=[];return F=t(F),G=t(G),y(F.translateX,F.translateY,G.translateX,G.translateY,X,P),T(F.rotate,G.rotate,X,P),k(F.skewX,G.skewX,X,P),V(F.scaleX,F.scaleY,G.scaleX,G.scaleY,X,P),F=G=null,function(O){for(var H=-1,q=P.length,B;++H<q;)X[(B=P[H]).i]=B.x(O);return X.join("")}}}var Wh=X2(j2,"px, ","px)","deg)"),jh=X2($2,", ",")",")");var C6=1e-12;function Y2(t){return((t=Math.exp(t))+1/t)/2}function S6(t){return((t=Math.exp(t))-1/t)/2}function E6(t){return((t=Math.exp(2*t))-1)/(t+1)}var $h=function t(n,a,u){function g(y,T){var k=y[0],V=y[1],F=y[2],G=T[0],X=T[1],P=T[2],O=G-k,H=X-V,q=O*O+H*H,B,j;if(q<C6)j=Math.log(P/F)/n,B=function(s){return[k+s*O,V+s*H,F*Math.exp(n*s*j)]};else{var U=Math.sqrt(q),i=(P*P-F*F+u*q)/(2*F*a*U),r=(P*P-F*F-u*q)/(2*P*a*U),e=Math.log(Math.sqrt(i*i+1)-i),o=Math.log(Math.sqrt(r*r+1)-r);j=(o-e)/n,B=function(s){var d=s*j,p=Y2(e),x=F/(a*U)*(p*E6(n*d+e)-S6(e));return[k+x*O,V+x*H,F*p/Y2(n*d+e)]}}return B.duration=j*1e3*n/Math.SQRT2,B}return g.rho=function(y){var T=Math.max(.001,+y),k=T*T,V=k*k;return t(T,k,V)},g}(Math.SQRT2,2,4);function Z2(t){return function(n,a){var u=t((n=ks(n)).h,(a=ks(a)).h),g=ei(n.s,a.s),y=ei(n.l,a.l),T=ei(n.opacity,a.opacity);return function(k){return n.h=u(k),n.s=g(k),n.l=y(k),n.opacity=T(k),n+""}}}var K2=Z2(Is),Q2=Z2(ei);function Fv(t,n){var a=ei((t=cu(t)).l,(n=cu(n)).l),u=ei(t.a,n.a),g=ei(t.b,n.b),y=ei(t.opacity,n.opacity);return function(T){return t.l=a(T),t.a=u(T),t.b=g(T),t.opacity=y(T),t+""}}function J2(t){return function(n,a){var u=t((n=cc(n)).h,(a=cc(a)).h),g=ei(n.c,a.c),y=ei(n.l,a.l),T=ei(n.opacity,a.opacity);return function(k){return n.h=u(k),n.c=g(k),n.l=y(k),n.opacity=T(k),n+""}}}var e_=J2(Is),t_=J2(ei);function r_(t){return function n(a){a=+a;function u(g,y){var T=t((g=Xi(g)).h,(y=Xi(y)).h),k=ei(g.s,y.s),V=ei(g.l,y.l),F=ei(g.opacity,y.opacity);return function(G){return g.h=T(G),g.s=k(G),g.l=V(Math.pow(G,a)),g.opacity=F(G),g+""}}return u.gamma=n,u}(1)}var n_=r_(Is),fu=r_(ei);function Tl(t,n){n===void 0&&(n=t,t=si);for(var a=0,u=n.length-1,g=n[0],y=new Array(u<0?0:u);a<u;)y[a]=t(g,g=n[++a]);return function(T){var k=Math.max(0,Math.min(u-1,Math.floor(T*=u)));return y[k](T-k)}}function i_(t,n){for(var a=new Array(n),u=0;u<n;++u)a[u]=t(u/(n-1));return a}var dc=0,Al=0,Ml=0,a_=1e3,Xh,Rl,Yh=0,hu=0,Zh=0,kl=typeof performance=="object"&&performance.now?performance:Date,s_=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Os(){return hu||(s_(T6),hu=kl.now()+Zh)}function T6(){hu=0}function du(){this._call=this._time=this._next=null}du.prototype=wa.prototype={constructor:du,restart:function(t,n,a){if(typeof t!="function")throw new TypeError("callback is not a function");a=(a==null?Os():+a)+(n==null?0:+n),!this._next&&Rl!==this&&(Rl?Rl._next=this:Xh=this,Rl=this),this._call=t,this._time=a,Uv()},stop:function(){this._call&&(this._call=null,this._time=1/0,Uv())}};function wa(t,n,a){var u=new du;return u.restart(t,n,a),u}function Bv(){Os(),++dc;for(var t=Xh,n;t;)(n=hu-t._time)>=0&&t._call.call(void 0,n),t=t._next;--dc}function o_(){hu=(Yh=kl.now())+Zh,dc=Al=0;try{Bv()}finally{dc=0,A6(),hu=0}}function M6(){var t=kl.now(),n=t-Yh;n>a_&&(Zh-=n,Yh=t)}function A6(){for(var t,n=Xh,a,u=1/0;n;)n._call?(u>n._time&&(u=n._time),t=n,n=n._next):(a=n._next,n._next=null,n=t?t._next=a:Xh=a);Rl=t,Uv(u)}function Uv(t){if(!dc){Al&&(Al=clearTimeout(Al));var n=t-hu;n>24?(t<1/0&&(Al=setTimeout(o_,t-kl.now()-Zh)),Ml&&(Ml=clearInterval(Ml))):(Ml||(Yh=kl.now(),Ml=setInterval(M6,a_)),dc=1,s_(o_))}}function Il(t,n,a){var u=new du;return n=n==null?0:+n,u.restart(g=>{u.stop(),t(g+n)},n,a),u}function u_(t,n,a){var u=new du,g=n;return n==null?(u.restart(t,n,a),u):(u._restart=u.restart,u.restart=function(y,T,k){T=+T,k=k==null?Os():+k,u._restart(function V(F){F+=g,u._restart(V,g+=T,k),y(F)},T,k)},u.restart(t,n,a),u)}var R6=Oo("start","end","cancel","interrupt"),k6=[],l_=0,Qh=1,Jh=2,Kh=3,c_=4,ed=5,Pl=6;function Ns(t,n,a,u,g,y){var T=t.__transition;if(!T)t.__transition={};else if(a in T)return;I6(t,a,{name:n,index:u,group:g,on:R6,tween:k6,time:y.time,delay:y.delay,duration:y.duration,ease:y.ease,timer:null,state:l_})}function Dl(t,n){var a=Ti(t,n);if(a.state>l_)throw new Error("too late; already scheduled");return a}function Hi(t,n){var a=Ti(t,n);if(a.state>Kh)throw new Error("too late; already running");return a}function Ti(t,n){var a=t.__transition;if(!a||!(a=a[n]))throw new Error("transition not found");return a}function I6(t,n,a){var u=t.__transition,g;u[n]=a,a.timer=wa(y,0,a.time);function y(F){a.state=Qh,a.timer.restart(T,a.delay,a.time),a.delay<=F&&T(F-a.delay)}function T(F){var G,X,P,O;if(a.state!==Qh)return V();for(G in u)if(O=u[G],O.name===a.name){if(O.state===Kh)return Il(T);O.state===c_?(O.state=Pl,O.timer.stop(),O.on.call("interrupt",t,t.__data__,O.index,O.group),delete u[G]):+G<n&&(O.state=Pl,O.timer.stop(),O.on.call("cancel",t,t.__data__,O.index,O.group),delete u[G])}if(Il(function(){a.state===Kh&&(a.state=c_,a.timer.restart(k,a.delay,a.time),k(F))}),a.state=Jh,a.on.call("start",t,t.__data__,a.index,a.group),a.state===Jh){for(a.state=Kh,g=new Array(P=a.tween.length),G=0,X=-1;G<P;++G)(O=a.tween[G].value.call(t,t.__data__,a.index,a.group))&&(g[++X]=O);g.length=X+1}}function k(F){for(var G=F<a.duration?a.ease.call(null,F/a.duration):(a.timer.restart(V),a.state=ed,1),X=-1,P=g.length;++X<P;)g[X].call(t,G);a.state===ed&&(a.on.call("end",t,t.__data__,a.index,a.group),V())}function V(){a.state=Pl,a.timer.stop(),delete u[n];for(var F in u)return;delete t.__transition}}function ea(t,n){var a=t.__transition,u,g,y=!0,T;if(a){n=n==null?null:n+"";for(T in a){if((u=a[T]).name!==n){y=!1;continue}g=u.state>Jh&&u.state<ed,u.state=Pl,u.timer.stop(),u.on.call(g?"interrupt":"cancel",t,t.__data__,u.index,u.group),delete a[T]}y&&delete t.__transition}}function f_(t){return this.each(function(){ea(this,t)})}function P6(t,n){var a,u;return function(){var g=Hi(this,t),y=g.tween;if(y!==a){u=a=y;for(var T=0,k=u.length;T<k;++T)if(u[T].name===n){u=u.slice(),u.splice(T,1);break}}g.tween=u}}function D6(t,n,a){var u,g;if(typeof a!="function")throw new Error;return function(){var y=Hi(this,t),T=y.tween;if(T!==u){g=(u=T).slice();for(var k={name:n,value:a},V=0,F=g.length;V<F;++V)if(g[V].name===n){g[V]=k;break}V===F&&g.push(k)}y.tween=g}}function h_(t,n){var a=this._id;if(t+="",arguments.length<2){for(var u=Ti(this.node(),a).tween,g=0,y=u.length,T;g<y;++g)if((T=u[g]).name===t)return T.value;return null}return this.each((n==null?P6:D6)(a,t,n))}function pc(t,n,a){var u=t._id;return t.each(function(){var g=Hi(this,u);(g.value||(g.value={}))[n]=a.apply(this,arguments)}),function(g){return Ti(g,u).value[n]}}function td(t,n){var a;return(typeof n=="number"?Pi:n instanceof No?Ps:(a=No(n))?(n=a,Ps):hc)(t,n)}function O6(t){return function(){this.removeAttribute(t)}}function N6(t){return function(){this.removeAttributeNS(t.space,t.local)}}function L6(t,n,a){var u,g=a+"",y;return function(){var T=this.getAttribute(t);return T===g?null:T===u?y:y=n(u=T,a)}}function F6(t,n,a){var u,g=a+"",y;return function(){var T=this.getAttributeNS(t.space,t.local);return T===g?null:T===u?y:y=n(u=T,a)}}function U6(t,n,a){var u,g,y;return function(){var T,k=a(this),V;return k==null?void this.removeAttribute(t):(T=this.getAttribute(t),V=k+"",T===V?null:T===u&&V===g?y:(g=V,y=n(u=T,k)))}}function B6(t,n,a){var u,g,y;return function(){var T,k=a(this),V;return k==null?void this.removeAttributeNS(t.space,t.local):(T=this.getAttributeNS(t.space,t.local),V=k+"",T===V?null:T===u&&V===g?y:(g=V,y=n(u=T,k)))}}function d_(t,n){var a=ga(t),u=a==="transform"?jh:td;return this.attrTween(t,typeof n=="function"?(a.local?B6:U6)(a,u,pc(this,"attr."+t,n)):n==null?(a.local?N6:O6)(a):(a.local?F6:L6)(a,u,n))}function V6(t,n){return function(a){this.setAttribute(t,n.call(this,a))}}function H6(t,n){return function(a){this.setAttributeNS(t.space,t.local,n.call(this,a))}}function z6(t,n){var a,u;function g(){var y=n.apply(this,arguments);return y!==u&&(a=(u=y)&&H6(t,y)),a}return g._value=n,g}function G6(t,n){var a,u;function g(){var y=n.apply(this,arguments);return y!==u&&(a=(u=y)&&V6(t,y)),a}return g._value=n,g}function p_(t,n){var a="attr."+t;if(arguments.length<2)return(a=this.tween(a))&&a._value;if(n==null)return this.tween(a,null);if(typeof n!="function")throw new Error;var u=ga(t);return this.tween(a,(u.local?z6:G6)(u,n))}function q6(t,n){return function(){Dl(this,t).delay=+n.apply(this,arguments)}}function W6(t,n){return n=+n,function(){Dl(this,t).delay=n}}function m_(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?q6:W6)(n,t)):Ti(this.node(),n).delay}function j6(t,n){return function(){Hi(this,t).duration=+n.apply(this,arguments)}}function $6(t,n){return n=+n,function(){Hi(this,t).duration=n}}function v_(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?j6:$6)(n,t)):Ti(this.node(),n).duration}function X6(t,n){if(typeof n!="function")throw new Error;return function(){Hi(this,t).ease=n}}function g_(t){var n=this._id;return arguments.length?this.each(X6(n,t)):Ti(this.node(),n).ease}function Y6(t,n){return function(){var a=n.apply(this,arguments);if(typeof a!="function")throw new Error;Hi(this,t).ease=a}}function y_(t){if(typeof t!="function")throw new Error;return this.each(Y6(this._id,t))}function x_(t){typeof t!="function"&&(t=oc(t));for(var n=this._groups,a=n.length,u=new Array(a),g=0;g<a;++g)for(var y=n[g],T=y.length,k=u[g]=[],V,F=0;F<T;++F)(V=y[F])&&t.call(V,V.__data__,F,y)&&k.push(V);return new zi(u,this._parents,this._name,this._id)}function b_(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,a=t._groups,u=n.length,g=a.length,y=Math.min(u,g),T=new Array(u),k=0;k<y;++k)for(var V=n[k],F=a[k],G=V.length,X=T[k]=new Array(G),P,O=0;O<G;++O)(P=V[O]||F[O])&&(X[O]=P);for(;k<u;++k)T[k]=n[k];return new zi(T,this._parents,this._name,this._id)}function Z6(t){return(t+"").trim().split(/^|\s+/).every(function(n){var a=n.indexOf(".");return a>=0&&(n=n.slice(0,a)),!n||n==="start"})}function K6(t,n,a){var u,g,y=Z6(n)?Dl:Hi;return function(){var T=y(this,t),k=T.on;k!==u&&(g=(u=k).copy()).on(n,a),T.on=g}}function __(t,n){var a=this._id;return arguments.length<2?Ti(this.node(),a).on.on(t):this.each(K6(a,t,n))}function Q6(t){return function(){var n=this.parentNode;for(var a in this.__transition)if(+a!==t)return;n&&n.removeChild(this)}}function w_(){return this.on("end.remove",Q6(this._id))}function C_(t){var n=this._name,a=this._id;typeof t!="function"&&(t=Ss(t));for(var u=this._groups,g=u.length,y=new Array(g),T=0;T<g;++T)for(var k=u[T],V=k.length,F=y[T]=new Array(V),G,X,P=0;P<V;++P)(G=k[P])&&(X=t.call(G,G.__data__,P,k))&&("__data__"in G&&(X.__data__=G.__data__),F[P]=X,Ns(F[P],n,a,P,F,Ti(G,a)));return new zi(y,this._parents,n,a)}function S_(t){var n=this._name,a=this._id;typeof t!="function"&&(t=ic(t));for(var u=this._groups,g=u.length,y=[],T=[],k=0;k<g;++k)for(var V=u[k],F=V.length,G,X=0;X<F;++X)if(G=V[X]){for(var P=t.call(G,G.__data__,X,V),O,H=Ti(G,a),q=0,B=P.length;q<B;++q)(O=P[q])&&Ns(O,n,a,q,P,H);y.push(P),T.push(G)}return new zi(y,T,n,a)}var J6=ya.prototype.constructor;function E_(){return new J6(this._groups,this._parents)}function ek(t,n){var a,u,g;return function(){var y=Ja(this,t),T=(this.style.removeProperty(t),Ja(this,t));return y===T?null:y===a&&T===u?g:g=n(a=y,u=T)}}function T_(t){return function(){this.style.removeProperty(t)}}function tk(t,n,a){var u,g=a+"",y;return function(){var T=Ja(this,t);return T===g?null:T===u?y:y=n(u=T,a)}}function rk(t,n,a){var u,g,y;return function(){var T=Ja(this,t),k=a(this),V=k+"";return k==null&&(V=k=(this.style.removeProperty(t),Ja(this,t))),T===V?null:T===u&&V===g?y:(g=V,y=n(u=T,k))}}function nk(t,n){var a,u,g,y="style."+n,T="end."+y,k;return function(){var V=Hi(this,t),F=V.on,G=V.value[y]==null?k||(k=T_(n)):void 0;(F!==a||g!==G)&&(u=(a=F).copy()).on(T,g=G),V.on=u}}function M_(t,n,a){var u=(t+="")=="transform"?Wh:td;return n==null?this.styleTween(t,ek(t,u)).on("end.style."+t,T_(t)):typeof n=="function"?this.styleTween(t,rk(t,u,pc(this,"style."+t,n))).each(nk(this._id,t)):this.styleTween(t,tk(t,u,n),a).on("end.style."+t,null)}function ik(t,n,a){return function(u){this.style.setProperty(t,n.call(this,u),a)}}function ok(t,n,a){var u,g;function y(){var T=n.apply(this,arguments);return T!==g&&(u=(g=T)&&ik(t,T,a)),u}return y._value=n,y}function A_(t,n,a){var u="style."+(t+="");if(arguments.length<2)return(u=this.tween(u))&&u._value;if(n==null)return this.tween(u,null);if(typeof n!="function")throw new Error;return this.tween(u,ok(t,n,a??""))}function ak(t){return function(){this.textContent=t}}function sk(t){return function(){var n=t(this);this.textContent=n??""}}function R_(t){return this.tween("text",typeof t=="function"?sk(pc(this,"text",t)):ak(t==null?"":t+""))}function uk(t){return function(n){this.textContent=t.call(this,n)}}function ck(t){var n,a;function u(){var g=t.apply(this,arguments);return g!==a&&(n=(a=g)&&uk(g)),n}return u._value=t,u}function k_(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,ck(t))}function I_(){for(var t=this._name,n=this._id,a=rd(),u=this._groups,g=u.length,y=0;y<g;++y)for(var T=u[y],k=T.length,V,F=0;F<k;++F)if(V=T[F]){var G=Ti(V,n);Ns(V,t,a,F,T,{time:G.time+G.delay+G.duration,delay:0,duration:G.duration,ease:G.ease})}return new zi(u,this._parents,t,a)}function P_(){var t,n,a=this,u=a._id,g=a.size();return new Promise(function(y,T){var k={value:T},V={value:function(){--g===0&&y()}};a.each(function(){var F=Hi(this,u),G=F.on;G!==t&&(n=(t=G).copy(),n._.cancel.push(k),n._.interrupt.push(k),n._.end.push(V)),F.on=n}),g===0&&y()})}var lk=0;function zi(t,n,a,u){this._groups=t,this._parents=n,this._name=a,this._id=u}function nd(t){return ya().transition(t)}function rd(){return++lk}var rs=ya.prototype;zi.prototype=nd.prototype={constructor:zi,select:C_,selectAll:S_,selectChild:rs.selectChild,selectChildren:rs.selectChildren,filter:x_,merge:b_,selection:E_,transition:I_,call:rs.call,nodes:rs.nodes,node:rs.node,size:rs.size,empty:rs.empty,each:rs.each,on:__,attr:d_,attrTween:p_,style:M_,styleTween:A_,text:R_,textTween:k_,remove:w_,tween:h_,delay:m_,duration:v_,ease:g_,easeVarying:y_,end:P_,[Symbol.iterator]:rs[Symbol.iterator]};var D_=t=>+t;function O_(t){return t*t}function N_(t){return t*(2-t)}function Vv(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function L_(t){return t*t*t}function F_(t){return--t*t*t+1}function Ls(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Hv=3,U_=function t(n){n=+n;function a(u){return Math.pow(u,n)}return a.exponent=t,a}(Hv),B_=function t(n){n=+n;function a(u){return 1-Math.pow(1-u,n)}return a.exponent=t,a}(Hv),zv=function t(n){n=+n;function a(u){return((u*=2)<=1?Math.pow(u,n):2-Math.pow(2-u,n))/2}return a.exponent=t,a}(Hv);var V_=Math.PI,H_=V_/2;function z_(t){return+t==1?1:1-Math.cos(t*H_)}function G_(t){return Math.sin(t*H_)}function Gv(t){return(1-Math.cos(V_*t))/2}function Ca(t){return(Math.pow(2,-10*t)-.0009765625)*1.0009775171065494}function q_(t){return Ca(1-+t)}function W_(t){return 1-Ca(t)}function qv(t){return((t*=2)<=1?Ca(1-t):2-Ca(t-1))/2}function j_(t){return 1-Math.sqrt(1-t*t)}function $_(t){return Math.sqrt(1- --t*t)}function Wv(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var jv=.36363636363636365,fk=6/11,hk=8/11,dk=3/4,pk=9/11,mk=10/11,vk=15/16,gk=21/22,yk=63/64,id=1/jv/jv;function X_(t){return 1-mc(1-t)}function mc(t){return(t=+t)<jv?id*t*t:t<hk?id*(t-=fk)*t+dk:t<mk?id*(t-=pk)*t+vk:id*(t-=gk)*t+yk}function Y_(t){return((t*=2)<=1?1-mc(1-t):mc(t-1)+1)/2}var $v=1.70158,Z_=function t(n){n=+n;function a(u){return(u=+u)*u*(n*(u-1)+u)}return a.overshoot=t,a}($v),K_=function t(n){n=+n;function a(u){return--u*u*((u+1)*n+u)+1}return a.overshoot=t,a}($v),Xv=function t(n){n=+n;function a(u){return((u*=2)<1?u*u*((n+1)*u-n):(u-=2)*u*((n+1)*u+n)+2)/2}return a.overshoot=t,a}($v);var vc=2*Math.PI,Yv=1,Zv=.3,Q_=function t(n,a){var u=Math.asin(1/(n=Math.max(1,n)))*(a/=vc);function g(y){return n*Ca(- --y)*Math.sin((u-y)/a)}return g.amplitude=function(y){return t(y,a*vc)},g.period=function(y){return t(n,y)},g}(Yv,Zv),Kv=function t(n,a){var u=Math.asin(1/(n=Math.max(1,n)))*(a/=vc);function g(y){return 1-n*Ca(y=+y)*Math.sin((y+u)/a)}return g.amplitude=function(y){return t(y,a*vc)},g.period=function(y){return t(n,y)},g}(Yv,Zv),J_=function t(n,a){var u=Math.asin(1/(n=Math.max(1,n)))*(a/=vc);function g(y){return((y=y*2-1)<0?n*Ca(-y)*Math.sin((u-y)/a):2-n*Ca(y)*Math.sin((u+y)/a))/2}return g.amplitude=function(y){return t(y,a*vc)},g.period=function(y){return t(n,y)},g}(Yv,Zv);var xk={time:null,delay:0,duration:250,ease:Ls};function bk(t,n){for(var a;!(a=t.__transition)||!(a=a[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return a}function e3(t){var n,a;t instanceof zi?(n=t._id,t=t._name):(n=rd(),(a=xk).time=Os(),t=t==null?null:t+"");for(var u=this._groups,g=u.length,y=0;y<g;++y)for(var T=u[y],k=T.length,V,F=0;F<k;++F)(V=T[F])&&Ns(V,t,n,F,T,a||bk(V,n));return new zi(u,this._parents,t,n)}ya.prototype.interrupt=f_;ya.prototype.transition=e3;var _k=[null];function t3(t,n){var a=t.__transition,u,g;if(a){n=n==null?null:n+"";for(g in a)if((u=a[g]).state>Qh&&u.name===n)return new zi([[t]],_k,n,+g)}return null}var od=t=>()=>t;function Qv(t,{sourceEvent:n,target:a,selection:u,mode:g,dispatch:y}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},selection:{value:u,enumerable:!0,configurable:!0},mode:{value:g,enumerable:!0,configurable:!0},_:{value:y}})}function r3(t){t.stopImmediatePropagation()}function ad(t){t.preventDefault(),t.stopImmediatePropagation()}var n3={name:"drag"},Jv={name:"space"},gc={name:"handle"},yc={name:"center"},{abs:i3,max:Yi,min:Zi}=Math;function o3(t){return[+t[0],+t[1]]}function tg(t){return[o3(t[0]),o3(t[1])]}var sd={name:"x",handles:["w","e"].map(Ol),input:function(t,n){return t==null?null:[[+t[0],n[0][1]],[+t[1],n[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},ud={name:"y",handles:["n","s"].map(Ol),input:function(t,n){return t==null?null:[[n[0][0],+t[0]],[n[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},wk={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Ol),input:function(t){return t==null?null:tg(t)},output:function(t){return t}},ns={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},a3={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},s3={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Ck={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Sk={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Ol(t){return{type:t}}function Ek(t){return!t.ctrlKey&&!t.button}function Tk(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Mk(){return navigator.maxTouchPoints||"ontouchstart"in this}function eg(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Ak(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function u3(t){var n=t.__brush;return n?n.dim.output(n.selection):null}function c3(){return rg(sd)}function l3(){return rg(ud)}function f3(){return rg(wk)}function rg(t){var n=Tk,a=Ek,u=Mk,g=!0,y=Oo("start","brush","end"),T=6,k;function V(B){var j=B.property("__brush",q).selectAll(".overlay").data([Ol("overlay")]);j.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",ns.overlay).merge(j).each(function(){var i=eg(this).extent;Er(this).attr("x",i[0][0]).attr("y",i[0][1]).attr("width",i[1][0]-i[0][0]).attr("height",i[1][1]-i[0][1])}),B.selectAll(".selection").data([Ol("selection")]).enter().append("rect").attr("class","selection").attr("cursor",ns.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var U=B.selectAll(".handle").data(t.handles,function(i){return i.type});U.exit().remove(),U.enter().append("rect").attr("class",function(i){return"handle handle--"+i.type}).attr("cursor",function(i){return ns[i.type]}),B.each(F).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",P).filter(u).on("touchstart.brush",P).on("touchmove.brush",O).on("touchend.brush touchcancel.brush",H).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}V.move=function(B,j,U){B.tween?B.on("start.brush",function(i){G(this,arguments).beforestart().start(i)}).on("interrupt.brush end.brush",function(i){G(this,arguments).end(i)}).tween("brush",function(){var i=this,r=i.__brush,e=G(i,arguments),o=r.selection,s=t.input(typeof j=="function"?j.apply(this,arguments):j,r.extent),d=si(o,s);function p(x){r.selection=x===1&&s===null?null:d(x),F.call(i),e.brush()}return o!==null&&s!==null?p:p(1)}):B.each(function(){var i=this,r=arguments,e=i.__brush,o=t.input(typeof j=="function"?j.apply(i,r):j,e.extent),s=G(i,r).beforestart();ea(i),e.selection=o===null?null:o,F.call(i),s.start(U).brush(U).end(U)})},V.clear=function(B,j){V.move(B,null,j)};function F(){var B=Er(this),j=eg(this).selection;j?(B.selectAll(".selection").style("display",null).attr("x",j[0][0]).attr("y",j[0][1]).attr("width",j[1][0]-j[0][0]).attr("height",j[1][1]-j[0][1]),B.selectAll(".handle").style("display",null).attr("x",function(U){return U.type[U.type.length-1]==="e"?j[1][0]-T/2:j[0][0]-T/2}).attr("y",function(U){return U.type[0]==="s"?j[1][1]-T/2:j[0][1]-T/2}).attr("width",function(U){return U.type==="n"||U.type==="s"?j[1][0]-j[0][0]+T:T}).attr("height",function(U){return U.type==="e"||U.type==="w"?j[1][1]-j[0][1]+T:T})):B.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function G(B,j,U){var i=B.__brush.emitter;return i&&(!U||!i.clean)?i:new X(B,j,U)}function X(B,j,U){this.that=B,this.args=j,this.state=B.__brush,this.active=0,this.clean=U}X.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(B,j){return this.starting?(this.starting=!1,this.emit("start",B,j)):this.emit("brush",B),this},brush:function(B,j){return this.emit("brush",B,j),this},end:function(B,j){return--this.active===0&&(delete this.state.emitter,this.emit("end",B,j)),this},emit:function(B,j,U){var i=Er(this.that).datum();y.call(B,this.that,new Qv(B,{sourceEvent:j,target:V,selection:t.output(this.state.selection),mode:U,dispatch:y}),i)}};function P(B){if(k&&!B.touches||!a.apply(this,arguments))return;var j=this,U=B.target.__data__.type,i=(g&&B.metaKey?U="overlay":U)==="selection"?n3:g&&B.altKey?yc:gc,r=t===ud?null:Ck[U],e=t===sd?null:Sk[U],o=eg(j),s=o.extent,d=o.selection,p=s[0][0],x,l,_=s[0][1],v,c,h=s[1][0],f,m,b=s[1][1],w,C,E=0,S=0,M,A=r&&e&&g&&B.shiftKey,R,D,N=Array.from(B.touches||[B],fe=>{let ge=fe.identifier;return fe=Ii(fe,j),fe.point0=fe.slice(),fe.identifier=ge,fe});ea(j);var I=G(j,arguments,!0).beforestart();if(U==="overlay"){d&&(M=!0);let fe=[N[0],N[1]||N[0]];o.selection=d=[[x=t===ud?p:Zi(fe[0][0],fe[1][0]),v=t===sd?_:Zi(fe[0][1],fe[1][1])],[f=t===ud?h:Yi(fe[0][0],fe[1][0]),w=t===sd?b:Yi(fe[0][1],fe[1][1])]],N.length>1&&K(B)}else x=d[0][0],v=d[0][1],f=d[1][0],w=d[1][1];l=x,c=v,m=f,C=w;var L=Er(j).attr("pointer-events","none"),Y=L.selectAll(".overlay").attr("cursor",ns[U]);if(B.touches)I.moved=ie,I.ended=Q;else{var J=Er(B.view).on("mousemove.brush",ie,!0).on("mouseup.brush",Q,!0);g&&J.on("keydown.brush",ne,!0).on("keyup.brush",ue,!0),Ts(B.view)}F.call(j),I.start(B,i.name);function ie(fe){for(let ge of fe.changedTouches||[fe])for(let ye of N)ye.identifier===ge.identifier&&(ye.cur=Ii(ge,j));if(A&&!R&&!D&&N.length===1){let ge=N[0];i3(ge.cur[0]-ge[0])>i3(ge.cur[1]-ge[1])?D=!0:R=!0}for(let ge of N)ge.cur&&(ge[0]=ge.cur[0],ge[1]=ge.cur[1]);M=!0,ad(fe),K(fe)}function K(fe){let ge=N[0],ye=ge.point0;var pe;switch(E=ge[0]-ye[0],S=ge[1]-ye[1],i){case Jv:case n3:{r&&(E=Yi(p-x,Zi(h-f,E)),l=x+E,m=f+E),e&&(S=Yi(_-v,Zi(b-w,S)),c=v+S,C=w+S);break}case gc:{N[1]?(r&&(l=Yi(p,Zi(h,N[0][0])),m=Yi(p,Zi(h,N[1][0])),r=1),e&&(c=Yi(_,Zi(b,N[0][1])),C=Yi(_,Zi(b,N[1][1])),e=1)):(r<0?(E=Yi(p-x,Zi(h-x,E)),l=x+E,m=f):r>0&&(E=Yi(p-f,Zi(h-f,E)),l=x,m=f+E),e<0?(S=Yi(_-v,Zi(b-v,S)),c=v+S,C=w):e>0&&(S=Yi(_-w,Zi(b-w,S)),c=v,C=w+S));break}case yc:{r&&(l=Yi(p,Zi(h,x-E*r)),m=Yi(p,Zi(h,f+E*r))),e&&(c=Yi(_,Zi(b,v-S*e)),C=Yi(_,Zi(b,w+S*e)));break}}m<l&&(r*=-1,pe=x,x=f,f=pe,pe=l,l=m,m=pe,U in a3&&Y.attr("cursor",ns[U=a3[U]])),C<c&&(e*=-1,pe=v,v=w,w=pe,pe=c,c=C,C=pe,U in s3&&Y.attr("cursor",ns[U=s3[U]])),o.selection&&(d=o.selection),R&&(l=d[0][0],m=d[1][0]),D&&(c=d[0][1],C=d[1][1]),(d[0][0]!==l||d[0][1]!==c||d[1][0]!==m||d[1][1]!==C)&&(o.selection=[[l,c],[m,C]],F.call(j),I.brush(fe,i.name))}function Q(fe){if(r3(fe),fe.touches){if(fe.touches.length)return;k&&clearTimeout(k),k=setTimeout(function(){k=null},500)}else Ms(fe.view,M),J.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);L.attr("pointer-events","all"),Y.attr("cursor",ns.overlay),o.selection&&(d=o.selection),Ak(d)&&(o.selection=null,F.call(j)),I.end(fe,i.name)}function ne(fe){switch(fe.keyCode){case 16:{A=r&&e;break}case 18:{i===gc&&(r&&(f=m-E*r,x=l+E*r),e&&(w=C-S*e,v=c+S*e),i=yc,K(fe));break}case 32:{(i===gc||i===yc)&&(r<0?f=m-E:r>0&&(x=l-E),e<0?w=C-S:e>0&&(v=c-S),i=Jv,Y.attr("cursor",ns.selection),K(fe));break}default:return}ad(fe)}function ue(fe){switch(fe.keyCode){case 16:{A&&(R=D=A=!1,K(fe));break}case 18:{i===yc&&(r<0?f=m:r>0&&(x=l),e<0?w=C:e>0&&(v=c),i=gc,K(fe));break}case 32:{i===Jv&&(fe.altKey?(r&&(f=m-E*r,x=l+E*r),e&&(w=C-S*e,v=c+S*e),i=yc):(r<0?f=m:r>0&&(x=l),e<0?w=C:e>0&&(v=c),i=gc),Y.attr("cursor",ns[U]),K(fe));break}default:return}ad(fe)}}function O(B){G(this,arguments).moved(B)}function H(B){G(this,arguments).ended(B)}function q(){var B=this.__brush||{selection:null};return B.extent=tg(n.apply(this,arguments)),B.dim=t,B}return V.extent=function(B){return arguments.length?(n=typeof B=="function"?B:od(tg(B)),V):n},V.filter=function(B){return arguments.length?(a=typeof B=="function"?B:od(!!B),V):a},V.touchable=function(B){return arguments.length?(u=typeof B=="function"?B:od(!!B),V):u},V.handleSize=function(B){return arguments.length?(T=+B,V):T},V.keyModifiers=function(B){return arguments.length?(g=!!B,V):g},V.on=function(){var B=y.on.apply(y,arguments);return B===y?V:B},V}var ng=Math.abs,pu=Math.cos,mu=Math.sin,h3=Math.PI,Nl=h3/2,ig=h3*2,og=Math.max,cd=1e-12;function ag(t,n){return Array.from({length:n-t},(a,u)=>t+u)}function Rk(t){return function(n,a){return t(n.source.value+n.target.value,a.source.value+a.target.value)}}function p3(){return sg(!1,!1)}function m3(){return sg(!1,!0)}function v3(){return sg(!0,!1)}function sg(t,n){var a=0,u=null,g=null,y=null;function T(k){var V=k.length,F=new Array(V),G=ag(0,V),X=new Array(V*V),P=new Array(V),O=0,H;k=Float64Array.from({length:V*V},n?(q,B)=>k[B%V][B/V|0]:(q,B)=>k[B/V|0][B%V]);for(let q=0;q<V;++q){let B=0;for(let j=0;j<V;++j)B+=k[q*V+j]+t*k[j*V+q];O+=F[q]=B}O=og(0,ig-a*V)/O,H=O?a:ig/V;{let q=0;u&&G.sort((B,j)=>u(F[B],F[j]));for(let B of G){let j=q;if(t){let U=ag(~V+1,V).filter(i=>i<0?k[~i*V+B]:k[B*V+i]);g&&U.sort((i,r)=>g(i<0?-k[~i*V+B]:k[B*V+i],r<0?-k[~r*V+B]:k[B*V+r]));for(let i of U)if(i<0){let r=X[~i*V+B]||(X[~i*V+B]={source:null,target:null});r.target={index:B,startAngle:q,endAngle:q+=k[~i*V+B]*O,value:k[~i*V+B]}}else{let r=X[B*V+i]||(X[B*V+i]={source:null,target:null});r.source={index:B,startAngle:q,endAngle:q+=k[B*V+i]*O,value:k[B*V+i]}}P[B]={index:B,startAngle:j,endAngle:q,value:F[B]}}else{let U=ag(0,V).filter(i=>k[B*V+i]||k[i*V+B]);g&&U.sort((i,r)=>g(k[B*V+i],k[B*V+r]));for(let i of U){let r;if(B<i?(r=X[B*V+i]||(X[B*V+i]={source:null,target:null}),r.source={index:B,startAngle:q,endAngle:q+=k[B*V+i]*O,value:k[B*V+i]}):(r=X[i*V+B]||(X[i*V+B]={source:null,target:null}),r.target={index:B,startAngle:q,endAngle:q+=k[B*V+i]*O,value:k[B*V+i]},B===i&&(r.source=r.target)),r.source&&r.target&&r.source.value<r.target.value){let e=r.source;r.source=r.target,r.target=e}}P[B]={index:B,startAngle:j,endAngle:q,value:F[B]}}q+=H}}return X=Object.values(X),X.groups=P,y?X.sort(y):X}return T.padAngle=function(k){return arguments.length?(a=og(0,k),T):a},T.sortGroups=function(k){return arguments.length?(u=k,T):u},T.sortSubgroups=function(k){return arguments.length?(g=k,T):g},T.sortChords=function(k){return arguments.length?(k==null?y=null:(y=Rk(k))._=k,T):y&&y._},T}var ug=Math.PI,cg=2*ug,vu=1e-6,kk=cg-vu;function g3(t){this._+=t[0];for(let n=1,a=t.length;n<a;++n)this._+=arguments[n]+t[n]}function Ik(t){let n=Math.floor(t);if(!(n>=0))throw new Error(`invalid digits: ${t}`);if(n>15)return g3;let a=10**n;return function(u){this._+=u[0];for(let g=1,y=u.length;g<y;++g)this._+=Math.round(arguments[g]*a)/a+u[g]}}var is=class{constructor(n){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=n==null?g3:Ik(n)}moveTo(n,a){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+a}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(n,a){this._append`L${this._x1=+n},${this._y1=+a}`}quadraticCurveTo(n,a,u,g){this._append`Q${+n},${+a},${this._x1=+u},${this._y1=+g}`}bezierCurveTo(n,a,u,g,y,T){this._append`C${+n},${+a},${+u},${+g},${this._x1=+y},${this._y1=+T}`}arcTo(n,a,u,g,y){if(n=+n,a=+a,u=+u,g=+g,y=+y,y<0)throw new Error(`negative radius: ${y}`);let T=this._x1,k=this._y1,V=u-n,F=g-a,G=T-n,X=k-a,P=G*G+X*X;if(this._x1===null)this._append`M${this._x1=n},${this._y1=a}`;else if(P>vu)if(!(Math.abs(X*V-F*G)>vu)||!y)this._append`L${this._x1=n},${this._y1=a}`;else{let O=u-T,H=g-k,q=V*V+F*F,B=O*O+H*H,j=Math.sqrt(q),U=Math.sqrt(P),i=y*Math.tan((ug-Math.acos((q+P-B)/(2*j*U)))/2),r=i/U,e=i/j;Math.abs(r-1)>vu&&this._append`L${n+r*G},${a+r*X}`,this._append`A${y},${y},0,0,${+(X*O>G*H)},${this._x1=n+e*V},${this._y1=a+e*F}`}}arc(n,a,u,g,y,T){if(n=+n,a=+a,u=+u,T=!!T,u<0)throw new Error(`negative radius: ${u}`);let k=u*Math.cos(g),V=u*Math.sin(g),F=n+k,G=a+V,X=1^T,P=T?g-y:y-g;this._x1===null?this._append`M${F},${G}`:(Math.abs(this._x1-F)>vu||Math.abs(this._y1-G)>vu)&&this._append`L${F},${G}`,u&&(P<0&&(P=P%cg+cg),P>kk?this._append`A${u},${u},0,1,${X},${n-k},${a-V}A${u},${u},0,1,${X},${this._x1=F},${this._y1=G}`:P>vu&&this._append`A${u},${u},0,${+(P>=ug)},${X},${this._x1=n+u*Math.cos(y)},${this._y1=a+u*Math.sin(y)}`)}rect(n,a,u,g){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+a}h${u=+u}v${+g}h${-u}Z`}toString(){return this._}};function Ll(){return new is}Ll.prototype=is.prototype;function y3(t=3){return new is(+t)}var x3=Array.prototype.slice;function Fs(t){return function(){return t}}function Pk(t){return t.source}function Dk(t){return t.target}function b3(t){return t.radius}function Ok(t){return t.startAngle}function Nk(t){return t.endAngle}function Lk(){return 0}function Fk(){return 10}function _3(t){var n=Pk,a=Dk,u=b3,g=b3,y=Ok,T=Nk,k=Lk,V=null;function F(){var G,X=n.apply(this,arguments),P=a.apply(this,arguments),O=k.apply(this,arguments)/2,H=x3.call(arguments),q=+u.apply(this,(H[0]=X,H)),B=y.apply(this,H)-Nl,j=T.apply(this,H)-Nl,U=+g.apply(this,(H[0]=P,H)),i=y.apply(this,H)-Nl,r=T.apply(this,H)-Nl;if(V||(V=G=Ll()),O>cd&&(ng(j-B)>O*2+cd?j>B?(B+=O,j-=O):(B-=O,j+=O):B=j=(B+j)/2,ng(r-i)>O*2+cd?r>i?(i+=O,r-=O):(i-=O,r+=O):i=r=(i+r)/2),V.moveTo(q*pu(B),q*mu(B)),V.arc(0,0,q,B,j),B!==i||j!==r)if(t){var e=+t.apply(this,arguments),o=U-e,s=(i+r)/2;V.quadraticCurveTo(0,0,o*pu(i),o*mu(i)),V.lineTo(U*pu(s),U*mu(s)),V.lineTo(o*pu(r),o*mu(r))}else V.quadraticCurveTo(0,0,U*pu(i),U*mu(i)),V.arc(0,0,U,i,r);if(V.quadraticCurveTo(0,0,q*pu(B),q*mu(B)),V.closePath(),G)return V=null,G+""||null}return t&&(F.headRadius=function(G){return arguments.length?(t=typeof G=="function"?G:Fs(+G),F):t}),F.radius=function(G){return arguments.length?(u=g=typeof G=="function"?G:Fs(+G),F):u},F.sourceRadius=function(G){return arguments.length?(u=typeof G=="function"?G:Fs(+G),F):u},F.targetRadius=function(G){return arguments.length?(g=typeof G=="function"?G:Fs(+G),F):g},F.startAngle=function(G){return arguments.length?(y=typeof G=="function"?G:Fs(+G),F):y},F.endAngle=function(G){return arguments.length?(T=typeof G=="function"?G:Fs(+G),F):T},F.padAngle=function(G){return arguments.length?(k=typeof G=="function"?G:Fs(+G),F):k},F.source=function(G){return arguments.length?(n=G,F):n},F.target=function(G){return arguments.length?(a=G,F):a},F.context=function(G){return arguments.length?(V=G??null,F):V},F}function w3(){return _3()}function C3(){return _3(Fk)}var Uk=Array.prototype,ld=Uk.slice;function S3(t,n){return t-n}function E3(t){for(var n=0,a=t.length,u=t[a-1][1]*t[0][0]-t[a-1][0]*t[0][1];++n<a;)u+=t[n-1][1]*t[n][0]-t[n-1][0]*t[n][1];return u}var Sa=t=>()=>t;function T3(t,n){for(var a=-1,u=n.length,g;++a<u;)if(g=Bk(t,n[a]))return g;return 0}function Bk(t,n){for(var a=n[0],u=n[1],g=-1,y=0,T=t.length,k=T-1;y<T;k=y++){var V=t[y],F=V[0],G=V[1],X=t[k],P=X[0],O=X[1];if(Vk(V,X,n))return 0;G>u!=O>u&&a<(P-F)*(u-G)/(O-G)+F&&(g=-g)}return g}function Vk(t,n,a){var u;return Hk(t,n,a)&&zk(t[u=+(t[0]===n[0])],a[u],n[u])}function Hk(t,n,a){return(n[0]-t[0])*(a[1]-t[1])===(a[0]-t[0])*(n[1]-t[1])}function zk(t,n,a){return t<=n&&n<=a||a<=n&&n<=t}function M3(){}var os=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Fl(){var t=1,n=1,a=eu,u=V;function g(F){var G=a(F);if(Array.isArray(G))G=G.slice().sort(S3);else{let X=Xa(F),P=Ka(X[0],X[1],G);G=_o(Math.floor(X[0]/P)*P,Math.floor(X[1]/P-1)*P,G)}return G.map(X=>y(F,X))}function y(F,G){var X=[],P=[];return T(F,G,function(O){u(O,F,G),E3(O)>0?X.push([O]):P.push(O)}),P.forEach(function(O){for(var H=0,q=X.length,B;H<q;++H)if(T3((B=X[H])[0],O)!==-1){B.push(O);return}}),{type:"MultiPolygon",value:G,coordinates:X}}function T(F,G,X){var P=new Array,O=new Array,H,q,B,j,U,i;for(H=q=-1,j=F[0]>=G,os[j<<1].forEach(r);++H<t-1;)B=j,j=F[H+1]>=G,os[B|j<<1].forEach(r);for(os[j<<0].forEach(r);++q<n-1;){for(H=-1,j=F[q*t+t]>=G,U=F[q*t]>=G,os[j<<1|U<<2].forEach(r);++H<t-1;)B=j,j=F[q*t+t+H+1]>=G,i=U,U=F[q*t+H+1]>=G,os[B|j<<1|U<<2|i<<3].forEach(r);os[j|U<<3].forEach(r)}for(H=-1,U=F[q*t]>=G,os[U<<2].forEach(r);++H<t-1;)i=U,U=F[q*t+H+1]>=G,os[U<<2|i<<3].forEach(r);os[U<<3].forEach(r);function r(e){var o=[e[0][0]+H,e[0][1]+q],s=[e[1][0]+H,e[1][1]+q],d=k(o),p=k(s),x,l;(x=O[d])?(l=P[p])?(delete O[x.end],delete P[l.start],x===l?(x.ring.push(s),X(x.ring)):P[x.start]=O[l.end]={start:x.start,end:l.end,ring:x.ring.concat(l.ring)}):(delete O[x.end],x.ring.push(s),O[x.end=p]=x):(x=P[p])?(l=O[d])?(delete P[x.start],delete O[l.end],x===l?(x.ring.push(s),X(x.ring)):P[l.start]=O[x.end]={start:l.start,end:x.end,ring:l.ring.concat(x.ring)}):(delete P[x.start],x.ring.unshift(o),P[x.start=d]=x):P[d]=O[p]={start:d,end:p,ring:[o,s]}}}function k(F){return F[0]*2+F[1]*(t+1)*4}function V(F,G,X){F.forEach(function(P){var O=P[0],H=P[1],q=O|0,B=H|0,j,U=G[B*t+q];O>0&&O<t&&q===O&&(j=G[B*t+q-1],P[0]=O+(X-j)/(U-j)-.5),H>0&&H<n&&B===H&&(j=G[(B-1)*t+q],P[1]=H+(X-j)/(U-j)-.5)})}return g.contour=y,g.size=function(F){if(!arguments.length)return[t,n];var G=Math.floor(F[0]),X=Math.floor(F[1]);if(!(G>=0&&X>=0))throw new Error("invalid size");return t=G,n=X,g},g.thresholds=function(F){return arguments.length?(a=typeof F=="function"?F:Array.isArray(F)?Sa(ld.call(F)):Sa(F),g):a},g.smooth=function(F){return arguments.length?(u=F?V:M3,g):u===V},g}function fd(t,n,a){for(var u=t.width,g=t.height,y=(a<<1)+1,T=0;T<g;++T)for(var k=0,V=0;k<u+a;++k)k<u&&(V+=t.data[k+T*u]),k>=a&&(k>=y&&(V-=t.data[k-y+T*u]),n.data[k-a+T*u]=V/Math.min(k+1,u-1+y-k,y))}function hd(t,n,a){for(var u=t.width,g=t.height,y=(a<<1)+1,T=0;T<u;++T)for(var k=0,V=0;k<g+a;++k)k<g&&(V+=t.data[T+k*u]),k>=a&&(k>=y&&(V-=t.data[T+(k-y)*u]),n.data[T+(k-a)*u]=V/Math.min(k+1,g-1+y-k,y))}function Gk(t){return t[0]}function qk(t){return t[1]}function Wk(){return 1}function A3(){var t=Gk,n=qk,a=Wk,u=960,g=500,y=20,T=2,k=y*3,V=u+k*2>>T,F=g+k*2>>T,G=Sa(20);function X(U){var i=new Float32Array(V*F),r=new Float32Array(V*F),e=Math.pow(2,-T);return U.forEach(function(o,s,d){var p=(t(o,s,d)+k)*e,x=(n(o,s,d)+k)*e,l=+a(o,s,d);if(p>=0&&p<V&&x>=0&&x<F){var _=Math.floor(p),v=Math.floor(x),c=p-_-.5,h=x-v-.5;i[_+v*V]+=(1-c)*(1-h)*l,i[_+1+v*V]+=c*(1-h)*l,i[_+1+(v+1)*V]+=c*h*l,i[_+(v+1)*V]+=(1-c)*h*l}}),fd({width:V,height:F,data:i},{width:V,height:F,data:r},y>>T),hd({width:V,height:F,data:r},{width:V,height:F,data:i},y>>T),fd({width:V,height:F,data:i},{width:V,height:F,data:r},y>>T),hd({width:V,height:F,data:r},{width:V,height:F,data:i},y>>T),fd({width:V,height:F,data:i},{width:V,height:F,data:r},y>>T),hd({width:V,height:F,data:r},{width:V,height:F,data:i},y>>T),i}function P(U){var i=X(U),r=G(i),e=Math.pow(2,2*T);return Array.isArray(r)||(r=_o(Number.MIN_VALUE,Qa(i)/e,r)),Fl().size([V,F]).thresholds(r.map(o=>o*e))(i).map((o,s)=>(o.value=+r[s],O(o)))}P.contours=function(U){var i=X(U),r=Fl().size([V,F]),e=Math.pow(2,2*T),o=s=>{s=+s;var d=O(r.contour(i,s*e));return d.value=s,d};return Object.defineProperty(o,"max",{get:()=>Qa(i)/e}),o};function O(U){return U.coordinates.forEach(H),U}function H(U){U.forEach(q)}function q(U){U.forEach(B)}function B(U){U[0]=U[0]*Math.pow(2,T)-k,U[1]=U[1]*Math.pow(2,T)-k}function j(){return k=y*3,V=u+k*2>>T,F=g+k*2>>T,P}return P.x=function(U){return arguments.length?(t=typeof U=="function"?U:Sa(+U),P):t},P.y=function(U){return arguments.length?(n=typeof U=="function"?U:Sa(+U),P):n},P.weight=function(U){return arguments.length?(a=typeof U=="function"?U:Sa(+U),P):a},P.size=function(U){if(!arguments.length)return[u,g];var i=+U[0],r=+U[1];if(!(i>=0&&r>=0))throw new Error("invalid size");return u=i,g=r,j()},P.cellSize=function(U){if(!arguments.length)return 1<<T;if(!((U=+U)>=1))throw new Error("invalid cell size");return T=Math.floor(Math.log(U)/Math.LN2),j()},P.thresholds=function(U){return arguments.length?(G=typeof U=="function"?U:Array.isArray(U)?Sa(ld.call(U)):Sa(U),P):G},P.bandwidth=function(U){if(!arguments.length)return Math.sqrt(y*(y+1));if(!((U=+U)>=0))throw new Error("invalid bandwidth");return y=Math.round((Math.sqrt(4*U*U+1)-1)/2),j()},P}var gn=11102230246251565e-32,wi=134217729,Ul=(3+8*gn)*gn;function gu(t,n,a,u,g){let y,T,k,V,F=n[0],G=u[0],X=0,P=0;G>F==G>-F?(y=F,F=n[++X]):(y=G,G=u[++P]);let O=0;if(X<t&&P<a)for(G>F==G>-F?(T=F+y,k=y-(T-F),F=n[++X]):(T=G+y,k=y-(T-G),G=u[++P]),y=T,k!==0&&(g[O++]=k);X<t&&P<a;)G>F==G>-F?(T=y+F,V=T-y,k=y-(T-V)+(F-V),F=n[++X]):(T=y+G,V=T-y,k=y-(T-V)+(G-V),G=u[++P]),y=T,k!==0&&(g[O++]=k);for(;X<t;)T=y+F,V=T-y,k=y-(T-V)+(F-V),F=n[++X],y=T,k!==0&&(g[O++]=k);for(;P<a;)T=y+G,V=T-y,k=y-(T-V)+(G-V),G=u[++P],y=T,k!==0&&(g[O++]=k);return(y!==0||O===0)&&(g[O++]=y),O}function Bl(t,n){let a=n[0];for(let u=1;u<t;u++)a+=n[u];return a}function Xt(t){return new Float64Array(t)}var jk=(3+16*gn)*gn,$k=(2+12*gn)*gn,Xk=(9+64*gn)*gn*gn,xc=Xt(4),R3=Xt(8),k3=Xt(12),I3=Xt(16),ao=Xt(4);function Yk(t,n,a,u,g,y,T){let k,V,F,G,X,P,O,H,q,B,j,U,i,r,e,o,s,d,p=t-g,x=a-g,l=n-y,_=u-y;r=p*_,P=wi*p,O=P-(P-p),H=p-O,P=wi*_,q=P-(P-_),B=_-q,e=H*B-(r-O*q-H*q-O*B),o=l*x,P=wi*l,O=P-(P-l),H=l-O,P=wi*x,q=P-(P-x),B=x-q,s=H*B-(o-O*q-H*q-O*B),j=e-s,X=e-j,xc[0]=e-(j+X)+(X-s),U=r+j,X=U-r,i=r-(U-X)+(j-X),j=i-o,X=i-j,xc[1]=i-(j+X)+(X-o),d=U+j,X=d-U,xc[2]=U-(d-X)+(j-X),xc[3]=d;let v=Bl(4,xc),c=$k*T;if(v>=c||-v>=c||(X=t-p,k=t-(p+X)+(X-g),X=a-x,F=a-(x+X)+(X-g),X=n-l,V=n-(l+X)+(X-y),X=u-_,G=u-(_+X)+(X-y),k===0&&V===0&&F===0&&G===0)||(c=Xk*T+Ul*Math.abs(v),v+=p*G+_*k-(l*F+x*V),v>=c||-v>=c))return v;r=k*_,P=wi*k,O=P-(P-k),H=k-O,P=wi*_,q=P-(P-_),B=_-q,e=H*B-(r-O*q-H*q-O*B),o=V*x,P=wi*V,O=P-(P-V),H=V-O,P=wi*x,q=P-(P-x),B=x-q,s=H*B-(o-O*q-H*q-O*B),j=e-s,X=e-j,ao[0]=e-(j+X)+(X-s),U=r+j,X=U-r,i=r-(U-X)+(j-X),j=i-o,X=i-j,ao[1]=i-(j+X)+(X-o),d=U+j,X=d-U,ao[2]=U-(d-X)+(j-X),ao[3]=d;let h=gu(4,xc,4,ao,R3);r=p*G,P=wi*p,O=P-(P-p),H=p-O,P=wi*G,q=P-(P-G),B=G-q,e=H*B-(r-O*q-H*q-O*B),o=l*F,P=wi*l,O=P-(P-l),H=l-O,P=wi*F,q=P-(P-F),B=F-q,s=H*B-(o-O*q-H*q-O*B),j=e-s,X=e-j,ao[0]=e-(j+X)+(X-s),U=r+j,X=U-r,i=r-(U-X)+(j-X),j=i-o,X=i-j,ao[1]=i-(j+X)+(X-o),d=U+j,X=d-U,ao[2]=U-(d-X)+(j-X),ao[3]=d;let f=gu(h,R3,4,ao,k3);r=k*G,P=wi*k,O=P-(P-k),H=k-O,P=wi*G,q=P-(P-G),B=G-q,e=H*B-(r-O*q-H*q-O*B),o=V*F,P=wi*V,O=P-(P-V),H=V-O,P=wi*F,q=P-(P-F),B=F-q,s=H*B-(o-O*q-H*q-O*B),j=e-s,X=e-j,ao[0]=e-(j+X)+(X-s),U=r+j,X=U-r,i=r-(U-X)+(j-X),j=i-o,X=i-j,ao[1]=i-(j+X)+(X-o),d=U+j,X=d-U,ao[2]=U-(d-X)+(j-X),ao[3]=d;let m=gu(f,k3,4,ao,I3);return I3[m-1]}function bc(t,n,a,u,g,y){let T=(n-y)*(a-g),k=(t-g)*(u-y),V=T-k,F=Math.abs(T+k);return Math.abs(V)>=jk*F?V:-Yk(t,n,a,u,g,y,F)}var Vj=(7+56*gn)*gn,Hj=(3+28*gn)*gn,zj=(26+288*gn)*gn*gn,Gj=Xt(4),qj=Xt(4),Wj=Xt(4),jj=Xt(4),$j=Xt(4),Xj=Xt(4),Yj=Xt(4),Zj=Xt(4),Kj=Xt(4),Qj=Xt(8),Jj=Xt(8),e$=Xt(8),t$=Xt(4),r$=Xt(8),n$=Xt(8),i$=Xt(8),o$=Xt(12),a$=Xt(192),s$=Xt(192);var l$=(10+96*gn)*gn,f$=(4+48*gn)*gn,h$=(44+576*gn)*gn*gn,d$=Xt(4),p$=Xt(4),m$=Xt(4),v$=Xt(4),g$=Xt(4),y$=Xt(4),x$=Xt(4),b$=Xt(4),_$=Xt(8),w$=Xt(8),C$=Xt(8),S$=Xt(8),E$=Xt(8),T$=Xt(8),M$=Xt(8),A$=Xt(8),R$=Xt(8),k$=Xt(4),I$=Xt(4),P$=Xt(4),D$=Xt(8),O$=Xt(16),N$=Xt(16),L$=Xt(16),F$=Xt(32),U$=Xt(32),B$=Xt(48),V$=Xt(64),H$=Xt(1152),z$=Xt(1152);var j$=(16+224*gn)*gn,$$=(5+72*gn)*gn,X$=(71+1408*gn)*gn*gn,Y$=Xt(4),Z$=Xt(4),K$=Xt(4),Q$=Xt(4),J$=Xt(4),eX=Xt(4),tX=Xt(4),rX=Xt(4),nX=Xt(4),iX=Xt(4),oX=Xt(24),aX=Xt(24),sX=Xt(24),uX=Xt(24),cX=Xt(24),lX=Xt(24),fX=Xt(24),hX=Xt(24),dX=Xt(24),pX=Xt(24),mX=Xt(1152),vX=Xt(1152),gX=Xt(1152),yX=Xt(1152),xX=Xt(1152),bX=Xt(2304),_X=Xt(2304),wX=Xt(3456),CX=Xt(5760),SX=Xt(8),EX=Xt(8),TX=Xt(8),MX=Xt(16),AX=Xt(24),RX=Xt(48),kX=Xt(48),IX=Xt(96),PX=Xt(192),DX=Xt(384),OX=Xt(384),NX=Xt(384),LX=Xt(768);var FX=Xt(96),UX=Xt(96),BX=Xt(96),VX=Xt(1152);var D3=Math.pow(2,-52),dd=new Uint32Array(512),wc=class t{static from(n,a=t8,u=r8){let g=n.length,y=new Float64Array(g*2);for(let T=0;T<g;T++){let k=n[T];y[2*T]=a(k),y[2*T+1]=u(k)}return new t(y)}constructor(n){let a=n.length>>1;if(a>0&&typeof n[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=n;let u=Math.max(2*a-5,0);this._triangles=new Uint32Array(u*3),this._halfedges=new Int32Array(u*3),this._hashSize=Math.ceil(Math.sqrt(a)),this._hullPrev=new Uint32Array(a),this._hullNext=new Uint32Array(a),this._hullTri=new Uint32Array(a),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(a),this._dists=new Float64Array(a),this.update()}update(){let{coords:n,_hullPrev:a,_hullNext:u,_hullTri:g,_hullHash:y}=this,T=n.length>>1,k=1/0,V=1/0,F=-1/0,G=-1/0;for(let p=0;p<T;p++){let x=n[2*p],l=n[2*p+1];x<k&&(k=x),l<V&&(V=l),x>F&&(F=x),l>G&&(G=l),this._ids[p]=p}let X=(k+F)/2,P=(V+G)/2,O,H,q;for(let p=0,x=1/0;p<T;p++){let l=lg(X,P,n[2*p],n[2*p+1]);l<x&&(O=p,x=l)}let B=n[2*O],j=n[2*O+1];for(let p=0,x=1/0;p<T;p++){if(p===O)continue;let l=lg(B,j,n[2*p],n[2*p+1]);l<x&&l>0&&(H=p,x=l)}let U=n[2*H],i=n[2*H+1],r=1/0;for(let p=0;p<T;p++){if(p===O||p===H)continue;let x=Jk(B,j,U,i,n[2*p],n[2*p+1]);x<r&&(q=p,r=x)}let e=n[2*q],o=n[2*q+1];if(r===1/0){for(let l=0;l<T;l++)this._dists[l]=n[2*l]-n[0]||n[2*l+1]-n[1];_c(this._ids,this._dists,0,T-1);let p=new Uint32Array(T),x=0;for(let l=0,_=-1/0;l<T;l++){let v=this._ids[l],c=this._dists[v];c>_&&(p[x++]=v,_=c)}this.hull=p.subarray(0,x),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(bc(B,j,U,i,e,o)<0){let p=H,x=U,l=i;H=q,U=e,i=o,q=p,e=x,o=l}let s=e8(B,j,U,i,e,o);this._cx=s.x,this._cy=s.y;for(let p=0;p<T;p++)this._dists[p]=lg(n[2*p],n[2*p+1],s.x,s.y);_c(this._ids,this._dists,0,T-1),this._hullStart=O;let d=3;u[O]=a[q]=H,u[H]=a[O]=q,u[q]=a[H]=O,g[O]=0,g[H]=1,g[q]=2,y.fill(-1),y[this._hashKey(B,j)]=O,y[this._hashKey(U,i)]=H,y[this._hashKey(e,o)]=q,this.trianglesLen=0,this._addTriangle(O,H,q,-1,-1,-1);for(let p=0,x,l;p<this._ids.length;p++){let _=this._ids[p],v=n[2*_],c=n[2*_+1];if(p>0&&Math.abs(v-x)<=D3&&Math.abs(c-l)<=D3||(x=v,l=c,_===O||_===H||_===q))continue;let h=0;for(let C=0,E=this._hashKey(v,c);C<this._hashSize&&(h=y[(E+C)%this._hashSize],!(h!==-1&&h!==u[h]));C++);h=a[h];let f=h,m;for(;m=u[f],bc(v,c,n[2*f],n[2*f+1],n[2*m],n[2*m+1])>=0;)if(f=m,f===h){f=-1;break}if(f===-1)continue;let b=this._addTriangle(f,_,u[f],-1,-1,g[f]);g[_]=this._legalize(b+2),g[f]=b,d++;let w=u[f];for(;m=u[w],bc(v,c,n[2*w],n[2*w+1],n[2*m],n[2*m+1])<0;)b=this._addTriangle(w,_,m,g[_],-1,g[w]),g[_]=this._legalize(b+2),u[w]=w,d--,w=m;if(f===h)for(;m=a[f],bc(v,c,n[2*m],n[2*m+1],n[2*f],n[2*f+1])<0;)b=this._addTriangle(m,_,f,-1,g[f],g[m]),this._legalize(b+2),g[m]=b,u[f]=f,d--,f=m;this._hullStart=a[_]=f,u[f]=a[w]=_,u[_]=w,y[this._hashKey(v,c)]=_,y[this._hashKey(n[2*f],n[2*f+1])]=f}this.hull=new Uint32Array(d);for(let p=0,x=this._hullStart;p<d;p++)this.hull[p]=x,x=u[x];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(n,a){return Math.floor(Kk(n-this._cx,a-this._cy)*this._hashSize)%this._hashSize}_legalize(n){let{_triangles:a,_halfedges:u,coords:g}=this,y=0,T=0;for(;;){let k=u[n],V=n-n%3;if(T=V+(n+2)%3,k===-1){if(y===0)break;n=dd[--y];continue}let F=k-k%3,G=V+(n+1)%3,X=F+(k+2)%3,P=a[T],O=a[n],H=a[G],q=a[X];if(Qk(g[2*P],g[2*P+1],g[2*O],g[2*O+1],g[2*H],g[2*H+1],g[2*q],g[2*q+1])){a[n]=q,a[k]=P;let j=u[X];if(j===-1){let i=this._hullStart;do{if(this._hullTri[i]===X){this._hullTri[i]=n;break}i=this._hullPrev[i]}while(i!==this._hullStart)}this._link(n,j),this._link(k,u[T]),this._link(T,X);let U=F+(k+1)%3;y<dd.length&&(dd[y++]=U)}else{if(y===0)break;n=dd[--y]}}return T}_link(n,a){this._halfedges[n]=a,a!==-1&&(this._halfedges[a]=n)}_addTriangle(n,a,u,g,y,T){let k=this.trianglesLen;return this._triangles[k]=n,this._triangles[k+1]=a,this._triangles[k+2]=u,this._link(k,g),this._link(k+1,y),this._link(k+2,T),this.trianglesLen+=3,k}};function Kk(t,n){let a=t/(Math.abs(t)+Math.abs(n));return(n>0?3-a:1+a)/4}function lg(t,n,a,u){let g=t-a,y=n-u;return g*g+y*y}function Qk(t,n,a,u,g,y,T,k){let V=t-T,F=n-k,G=a-T,X=u-k,P=g-T,O=y-k,H=V*V+F*F,q=G*G+X*X,B=P*P+O*O;return V*(X*B-q*O)-F*(G*B-q*P)+H*(G*O-X*P)<0}function Jk(t,n,a,u,g,y){let T=a-t,k=u-n,V=g-t,F=y-n,G=T*T+k*k,X=V*V+F*F,P=.5/(T*F-k*V),O=(F*G-k*X)*P,H=(T*X-V*G)*P;return O*O+H*H}function e8(t,n,a,u,g,y){let T=a-t,k=u-n,V=g-t,F=y-n,G=T*T+k*k,X=V*V+F*F,P=.5/(T*F-k*V),O=t+(F*G-k*X)*P,H=n+(T*X-V*G)*P;return{x:O,y:H}}function _c(t,n,a,u){if(u-a<=20)for(let g=a+1;g<=u;g++){let y=t[g],T=n[y],k=g-1;for(;k>=a&&n[t[k]]>T;)t[k+1]=t[k--];t[k+1]=y}else{let g=a+u>>1,y=a+1,T=u;Vl(t,g,y),n[t[a]]>n[t[u]]&&Vl(t,a,u),n[t[y]]>n[t[u]]&&Vl(t,y,u),n[t[a]]>n[t[y]]&&Vl(t,a,y);let k=t[y],V=n[k];for(;;){do y++;while(n[t[y]]<V);do T--;while(n[t[T]]>V);if(T<y)break;Vl(t,y,T)}t[a+1]=t[T],t[T]=k,u-y+1>=T-a?(_c(t,n,y,u),_c(t,n,a,T-1)):(_c(t,n,a,T-1),_c(t,n,y,u))}}function Vl(t,n,a){let u=t[n];t[n]=t[a],t[a]=u}function t8(t){return t[0]}function r8(t){return t[1]}var Lo=class{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(n,a){this._+=`M${this._x0=this._x1=+n},${this._y0=this._y1=+a}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(n,a){this._+=`L${this._x1=+n},${this._y1=+a}`}arc(n,a,u){n=+n,a=+a,u=+u;let g=n+u,y=a;if(u<0)throw new Error("negative radius");this._x1===null?this._+=`M${g},${y}`:(Math.abs(this._x1-g)>1e-6||Math.abs(this._y1-y)>1e-6)&&(this._+="L"+g+","+y),u&&(this._+=`A${u},${u},0,1,1,${n-u},${a}A${u},${u},0,1,1,${this._x1=g},${this._y1=y}`)}rect(n,a,u,g){this._+=`M${this._x0=this._x1=+n},${this._y0=this._y1=+a}h${+u}v${+g}h${-u}Z`}value(){return this._||null}};var Us=class{constructor(){this._=[]}moveTo(n,a){this._.push([n,a])}closePath(){this._.push(this._[0].slice())}lineTo(n,a){this._.push([n,a])}value(){return this._.length?this._:null}};var yu=class{constructor(n,[a,u,g,y]=[0,0,960,500]){if(!((g=+g)>=(a=+a))||!((y=+y)>=(u=+u)))throw new Error("invalid bounds");this.delaunay=n,this._circumcenters=new Float64Array(n.points.length*2),this.vectors=new Float64Array(n.points.length*2),this.xmax=g,this.xmin=a,this.ymax=y,this.ymin=u,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){let{delaunay:{points:n,hull:a,triangles:u},vectors:g}=this,y,T,k=this.circumcenters=this._circumcenters.subarray(0,u.length/3*2);for(let q=0,B=0,j=u.length,U,i;q<j;q+=3,B+=2){let r=u[q]*2,e=u[q+1]*2,o=u[q+2]*2,s=n[r],d=n[r+1],p=n[e],x=n[e+1],l=n[o],_=n[o+1],v=p-s,c=x-d,h=l-s,f=_-d,m=(v*f-c*h)*2;if(Math.abs(m)<1e-9){if(y===void 0){y=T=0;for(let w of a)y+=n[w*2],T+=n[w*2+1];y/=a.length,T/=a.length}let b=1e9*Math.sign((y-s)*f-(T-d)*h);U=(s+l)/2-b*f,i=(d+_)/2+b*h}else{let b=1/m,w=v*v+c*c,C=h*h+f*f;U=s+(f*w-c*C)*b,i=d+(v*C-h*w)*b}k[B]=U,k[B+1]=i}let V=a[a.length-1],F,G=V*4,X,P=n[2*V],O,H=n[2*V+1];g.fill(0);for(let q=0;q<a.length;++q)V=a[q],F=G,X=P,O=H,G=V*4,P=n[2*V],H=n[2*V+1],g[F+2]=g[G]=O-H,g[F+3]=g[G+1]=P-X}render(n){let a=n==null?n=new Lo:void 0,{delaunay:{halfedges:u,inedges:g,hull:y},circumcenters:T,vectors:k}=this;if(y.length<=1)return null;for(let G=0,X=u.length;G<X;++G){let P=u[G];if(P<G)continue;let O=Math.floor(G/3)*2,H=Math.floor(P/3)*2,q=T[O],B=T[O+1],j=T[H],U=T[H+1];this._renderSegment(q,B,j,U,n)}let V,F=y[y.length-1];for(let G=0;G<y.length;++G){V=F,F=y[G];let X=Math.floor(g[F]/3)*2,P=T[X],O=T[X+1],H=V*4,q=this._project(P,O,k[H+2],k[H+3]);q&&this._renderSegment(P,O,q[0],q[1],n)}return a&&a.value()}renderBounds(n){let a=n==null?n=new Lo:void 0;return n.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),a&&a.value()}renderCell(n,a){let u=a==null?a=new Lo:void 0,g=this._clip(n);if(g===null||!g.length)return;a.moveTo(g[0],g[1]);let y=g.length;for(;g[0]===g[y-2]&&g[1]===g[y-1]&&y>1;)y-=2;for(let T=2;T<y;T+=2)(g[T]!==g[T-2]||g[T+1]!==g[T-1])&&a.lineTo(g[T],g[T+1]);return a.closePath(),u&&u.value()}*cellPolygons(){let{delaunay:{points:n}}=this;for(let a=0,u=n.length/2;a<u;++a){let g=this.cellPolygon(a);g&&(g.index=a,yield g)}}cellPolygon(n){let a=new Us;return this.renderCell(n,a),a.value()}_renderSegment(n,a,u,g,y){let T,k=this._regioncode(n,a),V=this._regioncode(u,g);k===0&&V===0?(y.moveTo(n,a),y.lineTo(u,g)):(T=this._clipSegment(n,a,u,g,k,V))&&(y.moveTo(T[0],T[1]),y.lineTo(T[2],T[3]))}contains(n,a,u){return a=+a,a!==a||(u=+u,u!==u)?!1:this.delaunay._step(n,a,u)===n}*neighbors(n){let a=this._clip(n);if(a)for(let u of this.delaunay.neighbors(n)){let g=this._clip(u);if(g){e:for(let y=0,T=a.length;y<T;y+=2)for(let k=0,V=g.length;k<V;k+=2)if(a[y]===g[k]&&a[y+1]===g[k+1]&&a[(y+2)%T]===g[(k+V-2)%V]&&a[(y+3)%T]===g[(k+V-1)%V]){yield u;break e}}}}_cell(n){let{circumcenters:a,delaunay:{inedges:u,halfedges:g,triangles:y}}=this,T=u[n];if(T===-1)return null;let k=[],V=T;do{let F=Math.floor(V/3);if(k.push(a[F*2],a[F*2+1]),V=V%3===2?V-2:V+1,y[V]!==n)break;V=g[V]}while(V!==T&&V!==-1);return k}_clip(n){if(n===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];let a=this._cell(n);if(a===null)return null;let{vectors:u}=this,g=n*4;return this._simplify(u[g]||u[g+1]?this._clipInfinite(n,a,u[g],u[g+1],u[g+2],u[g+3]):this._clipFinite(n,a))}_clipFinite(n,a){let u=a.length,g=null,y,T,k=a[u-2],V=a[u-1],F,G=this._regioncode(k,V),X,P=0;for(let O=0;O<u;O+=2)if(y=k,T=V,k=a[O],V=a[O+1],F=G,G=this._regioncode(k,V),F===0&&G===0)X=P,P=0,g?g.push(k,V):g=[k,V];else{let H,q,B,j,U;if(F===0){if((H=this._clipSegment(y,T,k,V,F,G))===null)continue;[q,B,j,U]=H}else{if((H=this._clipSegment(k,V,y,T,G,F))===null)continue;[j,U,q,B]=H,X=P,P=this._edgecode(q,B),X&&P&&this._edge(n,X,P,g,g.length),g?g.push(q,B):g=[q,B]}X=P,P=this._edgecode(j,U),X&&P&&this._edge(n,X,P,g,g.length),g?g.push(j,U):g=[j,U]}if(g)X=P,P=this._edgecode(g[0],g[1]),X&&P&&this._edge(n,X,P,g,g.length);else if(this.contains(n,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return g}_clipSegment(n,a,u,g,y,T){let k=y<T;for(k&&([n,a,u,g,y,T]=[u,g,n,a,T,y]);;){if(y===0&&T===0)return k?[u,g,n,a]:[n,a,u,g];if(y&T)return null;let V,F,G=y||T;G&8?(V=n+(u-n)*(this.ymax-a)/(g-a),F=this.ymax):G&4?(V=n+(u-n)*(this.ymin-a)/(g-a),F=this.ymin):G&2?(F=a+(g-a)*(this.xmax-n)/(u-n),V=this.xmax):(F=a+(g-a)*(this.xmin-n)/(u-n),V=this.xmin),y?(n=V,a=F,y=this._regioncode(n,a)):(u=V,g=F,T=this._regioncode(u,g))}}_clipInfinite(n,a,u,g,y,T){let k=Array.from(a),V;if((V=this._project(k[0],k[1],u,g))&&k.unshift(V[0],V[1]),(V=this._project(k[k.length-2],k[k.length-1],y,T))&&k.push(V[0],V[1]),k=this._clipFinite(n,k))for(let F=0,G=k.length,X,P=this._edgecode(k[G-2],k[G-1]);F<G;F+=2)X=P,P=this._edgecode(k[F],k[F+1]),X&&P&&(F=this._edge(n,X,P,k,F),G=k.length);else this.contains(n,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(k=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return k}_edge(n,a,u,g,y){for(;a!==u;){let T,k;switch(a){case 5:a=4;continue;case 4:a=6,T=this.xmax,k=this.ymin;break;case 6:a=2;continue;case 2:a=10,T=this.xmax,k=this.ymax;break;case 10:a=8;continue;case 8:a=9,T=this.xmin,k=this.ymax;break;case 9:a=1;continue;case 1:a=5,T=this.xmin,k=this.ymin;break}(g[y]!==T||g[y+1]!==k)&&this.contains(n,T,k)&&(g.splice(y,0,T,k),y+=2)}return y}_project(n,a,u,g){let y=1/0,T,k,V;if(g<0){if(a<=this.ymin)return null;(T=(this.ymin-a)/g)<y&&(V=this.ymin,k=n+(y=T)*u)}else if(g>0){if(a>=this.ymax)return null;(T=(this.ymax-a)/g)<y&&(V=this.ymax,k=n+(y=T)*u)}if(u>0){if(n>=this.xmax)return null;(T=(this.xmax-n)/u)<y&&(k=this.xmax,V=a+(y=T)*g)}else if(u<0){if(n<=this.xmin)return null;(T=(this.xmin-n)/u)<y&&(k=this.xmin,V=a+(y=T)*g)}return[k,V]}_edgecode(n,a){return(n===this.xmin?1:n===this.xmax?2:0)|(a===this.ymin?4:a===this.ymax?8:0)}_regioncode(n,a){return(n<this.xmin?1:n>this.xmax?2:0)|(a<this.ymin?4:a>this.ymax?8:0)}_simplify(n){if(n&&n.length>4){for(let a=0;a<n.length;a+=2){let u=(a+2)%n.length,g=(a+4)%n.length;(n[a]===n[u]&&n[u]===n[g]||n[a+1]===n[u+1]&&n[u+1]===n[g+1])&&(n.splice(u,2),a-=2)}n.length||(n=null)}return n}};var n8=2*Math.PI,Cc=Math.pow;function i8(t){return t[0]}function o8(t){return t[1]}function a8(t){let{triangles:n,coords:a}=t;for(let u=0;u<n.length;u+=3){let g=2*n[u],y=2*n[u+1],T=2*n[u+2];if((a[T]-a[g])*(a[y+1]-a[g+1])-(a[y]-a[g])*(a[T+1]-a[g+1])>1e-10)return!1}return!0}function s8(t,n,a){return[t+Math.sin(t+n)*a,n+Math.cos(t-n)*a]}var Hl=class t{static from(n,a=i8,u=o8,g){return new t("length"in n?u8(n,a,u,g):Float64Array.from(c8(n,a,u,g)))}constructor(n){this._delaunator=new wc(n),this.inedges=new Int32Array(n.length/2),this._hullIndex=new Int32Array(n.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){let n=this._delaunator,a=this.points;if(n.hull&&n.hull.length>2&&a8(n)){this.collinear=Int32Array.from({length:a.length/2},(P,O)=>O).sort((P,O)=>a[2*P]-a[2*O]||a[2*P+1]-a[2*O+1]);let V=this.collinear[0],F=this.collinear[this.collinear.length-1],G=[a[2*V],a[2*V+1],a[2*F],a[2*F+1]],X=1e-8*Math.hypot(G[3]-G[1],G[2]-G[0]);for(let P=0,O=a.length/2;P<O;++P){let H=s8(a[2*P],a[2*P+1],X);a[2*P]=H[0],a[2*P+1]=H[1]}this._delaunator=new wc(a)}else delete this.collinear;let u=this.halfedges=this._delaunator.halfedges,g=this.hull=this._delaunator.hull,y=this.triangles=this._delaunator.triangles,T=this.inedges.fill(-1),k=this._hullIndex.fill(-1);for(let V=0,F=u.length;V<F;++V){let G=y[V%3===2?V-2:V+1];(u[V]===-1||T[G]===-1)&&(T[G]=V)}for(let V=0,F=g.length;V<F;++V)k[g[V]]=V;g.length<=2&&g.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=g[0],T[g[0]]=1,g.length===2&&(T[g[1]]=0,this.triangles[1]=g[1],this.triangles[2]=g[1]))}voronoi(n){return new yu(this,n)}*neighbors(n){let{inedges:a,hull:u,_hullIndex:g,halfedges:y,triangles:T,collinear:k}=this;if(k){let X=k.indexOf(n);X>0&&(yield k[X-1]),X<k.length-1&&(yield k[X+1]);return}let V=a[n];if(V===-1)return;let F=V,G=-1;do{if(yield G=T[F],F=F%3===2?F-2:F+1,T[F]!==n)return;if(F=y[F],F===-1){let X=u[(g[n]+1)%u.length];X!==G&&(yield X);return}}while(F!==V)}find(n,a,u=0){if(n=+n,n!==n||(a=+a,a!==a))return-1;let g=u,y;for(;(y=this._step(u,n,a))>=0&&y!==u&&y!==g;)u=y;return y}_step(n,a,u){let{inedges:g,hull:y,_hullIndex:T,halfedges:k,triangles:V,points:F}=this;if(g[n]===-1||!F.length)return(n+1)%(F.length>>1);let G=n,X=Cc(a-F[n*2],2)+Cc(u-F[n*2+1],2),P=g[n],O=P;do{let H=V[O],q=Cc(a-F[H*2],2)+Cc(u-F[H*2+1],2);if(q<X&&(X=q,G=H),O=O%3===2?O-2:O+1,V[O]!==n)break;if(O=k[O],O===-1){if(O=y[(T[n]+1)%y.length],O!==H&&Cc(a-F[O*2],2)+Cc(u-F[O*2+1],2)<X)return O;break}}while(O!==P);return G}render(n){let a=n==null?n=new Lo:void 0,{points:u,halfedges:g,triangles:y}=this;for(let T=0,k=g.length;T<k;++T){let V=g[T];if(V<T)continue;let F=y[T]*2,G=y[V]*2;n.moveTo(u[F],u[F+1]),n.lineTo(u[G],u[G+1])}return this.renderHull(n),a&&a.value()}renderPoints(n,a){a===void 0&&(!n||typeof n.moveTo!="function")&&(a=n,n=null),a=a==null?2:+a;let u=n==null?n=new Lo:void 0,{points:g}=this;for(let y=0,T=g.length;y<T;y+=2){let k=g[y],V=g[y+1];n.moveTo(k+a,V),n.arc(k,V,a,0,n8)}return u&&u.value()}renderHull(n){let a=n==null?n=new Lo:void 0,{hull:u,points:g}=this,y=u[0]*2,T=u.length;n.moveTo(g[y],g[y+1]);for(let k=1;k<T;++k){let V=2*u[k];n.lineTo(g[V],g[V+1])}return n.closePath(),a&&a.value()}hullPolygon(){let n=new Us;return this.renderHull(n),n.value()}renderTriangle(n,a){let u=a==null?a=new Lo:void 0,{points:g,triangles:y}=this,T=y[n*=3]*2,k=y[n+1]*2,V=y[n+2]*2;return a.moveTo(g[T],g[T+1]),a.lineTo(g[k],g[k+1]),a.lineTo(g[V],g[V+1]),a.closePath(),u&&u.value()}*trianglePolygons(){let{triangles:n}=this;for(let a=0,u=n.length/3;a<u;++a)yield this.trianglePolygon(a)}trianglePolygon(n){let a=new Us;return this.renderTriangle(n,a),a.value()}};function u8(t,n,a,u){let g=t.length,y=new Float64Array(g*2);for(let T=0;T<g;++T){let k=t[T];y[T*2]=n.call(u,k,T,t),y[T*2+1]=a.call(u,k,T,t)}return y}function*c8(t,n,a,u){let g=0;for(let y of t)yield n.call(u,y,g,t),yield a.call(u,y,g,t),++g}var O3={},fg={},hg=34,zl=10,dg=13;function L3(t){return new Function("d","return {"+t.map(function(n,a){return JSON.stringify(n)+": d["+a+'] || ""'}).join(",")+"}")}function l8(t,n){var a=L3(t);return function(u,g){return n(a(u),g,t)}}function N3(t){var n=Object.create(null),a=[];return t.forEach(function(u){for(var g in u)g in n||a.push(n[g]=g)}),a}function wo(t,n){var a=t+"",u=a.length;return u<n?new Array(n-u+1).join(0)+a:a}function f8(t){return t<0?"-"+wo(-t,6):t>9999?"+"+wo(t,6):wo(t,4)}function h8(t){var n=t.getUTCHours(),a=t.getUTCMinutes(),u=t.getUTCSeconds(),g=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":f8(t.getUTCFullYear(),4)+"-"+wo(t.getUTCMonth()+1,2)+"-"+wo(t.getUTCDate(),2)+(g?"T"+wo(n,2)+":"+wo(a,2)+":"+wo(u,2)+"."+wo(g,3)+"Z":u?"T"+wo(n,2)+":"+wo(a,2)+":"+wo(u,2)+"Z":a||n?"T"+wo(n,2)+":"+wo(a,2)+"Z":"")}function Bs(t){var n=new RegExp('["'+t+`
\r]`),a=t.charCodeAt(0);function u(X,P){var O,H,q=g(X,function(B,j){if(O)return O(B,j-1);H=B,O=P?l8(B,P):L3(B)});return q.columns=H||[],q}function g(X,P){var O=[],H=X.length,q=0,B=0,j,U=H<=0,i=!1;X.charCodeAt(H-1)===zl&&--H,X.charCodeAt(H-1)===dg&&--H;function r(){if(U)return fg;if(i)return i=!1,O3;var o,s=q,d;if(X.charCodeAt(s)===hg){for(;q++<H&&X.charCodeAt(q)!==hg||X.charCodeAt(++q)===hg;);return(o=q)>=H?U=!0:(d=X.charCodeAt(q++))===zl?i=!0:d===dg&&(i=!0,X.charCodeAt(q)===zl&&++q),X.slice(s+1,o-1).replace(/""/g,'"')}for(;q<H;){if((d=X.charCodeAt(o=q++))===zl)i=!0;else if(d===dg)i=!0,X.charCodeAt(q)===zl&&++q;else if(d!==a)continue;return X.slice(s,o)}return U=!0,X.slice(s,H)}for(;(j=r())!==fg;){for(var e=[];j!==O3&&j!==fg;)e.push(j),j=r();P&&(e=P(e,B++))==null||O.push(e)}return O}function y(X,P){return X.map(function(O){return P.map(function(H){return G(O[H])}).join(t)})}function T(X,P){return P==null&&(P=N3(X)),[P.map(G).join(t)].concat(y(X,P)).join(`
`)}function k(X,P){return P==null&&(P=N3(X)),y(X,P).join(`
`)}function V(X){return X.map(F).join(`
`)}function F(X){return X.map(G).join(t)}function G(X){return X==null?"":X instanceof Date?h8(X):n.test(X+="")?'"'+X.replace(/"/g,'""')+'"':X}return{parse:u,parseRows:g,format:T,formatBody:k,formatRows:V,formatRow:F,formatValue:G}}var xu=Bs(","),pd=xu.parse,F3=xu.parseRows,U3=xu.format,B3=xu.formatBody,V3=xu.formatRows,H3=xu.formatRow,z3=xu.formatValue;var bu=Bs("	"),md=bu.parse,G3=bu.parseRows,q3=bu.format,W3=bu.formatBody,j3=bu.formatRows,$3=bu.formatRow,X3=bu.formatValue;function pg(t){for(var n in t){var a=t[n].trim(),u,g;if(!a)a=null;else if(a==="true")a=!0;else if(a==="false")a=!1;else if(a==="NaN")a=NaN;else if(!isNaN(u=+a))a=u;else if(g=a.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))d8&&g[4]&&!g[7]&&(a=a.replace(/-/g,"/").replace(/T/," ")),a=new Date(a);else continue;t[n]=a}return t}var d8=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function p8(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function Y3(t,n){return fetch(t,n).then(p8)}function m8(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function Z3(t,n){return fetch(t,n).then(m8)}function v8(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function _u(t,n){return fetch(t,n).then(v8)}function K3(t){return function(n,a,u){return arguments.length===2&&typeof a=="function"&&(u=a,a=void 0),_u(n,a).then(function(g){return t(g,u)})}}function mg(t,n,a,u){arguments.length===3&&typeof a=="function"&&(u=a,a=void 0);var g=Bs(t);return _u(n,a).then(function(y){return g.parse(y,u)})}var Q3=K3(pd),J3=K3(md);function ew(t,n){return new Promise(function(a,u){var g=new Image;for(var y in n)g[y]=n[y];g.onerror=u,g.onload=function(){a(g)},g.src=t})}function g8(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(!(t.status===204||t.status===205))return t.json()}function vd(t,n){return fetch(t,n).then(g8)}function vg(t){return(n,a)=>_u(n,a).then(u=>new DOMParser().parseFromString(u,t))}var gd=vg("application/xml"),tw=vg("text/html"),rw=vg("image/svg+xml");function nw(t,n){var a,u=1;t==null&&(t=0),n==null&&(n=0);function g(){var y,T=a.length,k,V=0,F=0;for(y=0;y<T;++y)k=a[y],V+=k.x,F+=k.y;for(V=(V/T-t)*u,F=(F/T-n)*u,y=0;y<T;++y)k=a[y],k.x-=V,k.y-=F}return g.initialize=function(y){a=y},g.x=function(y){return arguments.length?(t=+y,g):t},g.y=function(y){return arguments.length?(n=+y,g):n},g.strength=function(y){return arguments.length?(u=+y,g):u},g}function iw(t){let n=+this._x.call(null,t),a=+this._y.call(null,t);return ow(this.cover(n,a),n,a,t)}function ow(t,n,a,u){if(isNaN(n)||isNaN(a))return t;var g,y=t._root,T={data:u},k=t._x0,V=t._y0,F=t._x1,G=t._y1,X,P,O,H,q,B,j,U;if(!y)return t._root=T,t;for(;y.length;)if((q=n>=(X=(k+F)/2))?k=X:F=X,(B=a>=(P=(V+G)/2))?V=P:G=P,g=y,!(y=y[j=B<<1|q]))return g[j]=T,t;if(O=+t._x.call(null,y.data),H=+t._y.call(null,y.data),n===O&&a===H)return T.next=y,g?g[j]=T:t._root=T,t;do g=g?g[j]=new Array(4):t._root=new Array(4),(q=n>=(X=(k+F)/2))?k=X:F=X,(B=a>=(P=(V+G)/2))?V=P:G=P;while((j=B<<1|q)===(U=(H>=P)<<1|O>=X));return g[U]=y,g[j]=T,t}function aw(t){var n,a,u=t.length,g,y,T=new Array(u),k=new Array(u),V=1/0,F=1/0,G=-1/0,X=-1/0;for(a=0;a<u;++a)isNaN(g=+this._x.call(null,n=t[a]))||isNaN(y=+this._y.call(null,n))||(T[a]=g,k[a]=y,g<V&&(V=g),g>G&&(G=g),y<F&&(F=y),y>X&&(X=y));if(V>G||F>X)return this;for(this.cover(V,F).cover(G,X),a=0;a<u;++a)ow(this,T[a],k[a],t[a]);return this}function sw(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var a=this._x0,u=this._y0,g=this._x1,y=this._y1;if(isNaN(a))g=(a=Math.floor(t))+1,y=(u=Math.floor(n))+1;else{for(var T=g-a||1,k=this._root,V,F;a>t||t>=g||u>n||n>=y;)switch(F=(n<u)<<1|t<a,V=new Array(4),V[F]=k,k=V,T*=2,F){case 0:g=a+T,y=u+T;break;case 1:a=g-T,y=u+T;break;case 2:g=a+T,u=y-T;break;case 3:a=g-T,u=y-T;break}this._root&&this._root.length&&(this._root=k)}return this._x0=a,this._y0=u,this._x1=g,this._y1=y,this}function uw(){var t=[];return this.visit(function(n){if(!n.length)do t.push(n.data);while(n=n.next)}),t}function cw(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Di(t,n,a,u,g){this.node=t,this.x0=n,this.y0=a,this.x1=u,this.y1=g}function lw(t,n,a){var u,g=this._x0,y=this._y0,T,k,V,F,G=this._x1,X=this._y1,P=[],O=this._root,H,q;for(O&&P.push(new Di(O,g,y,G,X)),a==null?a=1/0:(g=t-a,y=n-a,G=t+a,X=n+a,a*=a);H=P.pop();)if(!(!(O=H.node)||(T=H.x0)>G||(k=H.y0)>X||(V=H.x1)<g||(F=H.y1)<y))if(O.length){var B=(T+V)/2,j=(k+F)/2;P.push(new Di(O[3],B,j,V,F),new Di(O[2],T,j,B,F),new Di(O[1],B,k,V,j),new Di(O[0],T,k,B,j)),(q=(n>=j)<<1|t>=B)&&(H=P[P.length-1],P[P.length-1]=P[P.length-1-q],P[P.length-1-q]=H)}else{var U=t-+this._x.call(null,O.data),i=n-+this._y.call(null,O.data),r=U*U+i*i;if(r<a){var e=Math.sqrt(a=r);g=t-e,y=n-e,G=t+e,X=n+e,u=O.data}}return u}function fw(t){if(isNaN(G=+this._x.call(null,t))||isNaN(X=+this._y.call(null,t)))return this;var n,a=this._root,u,g,y,T=this._x0,k=this._y0,V=this._x1,F=this._y1,G,X,P,O,H,q,B,j;if(!a)return this;if(a.length)for(;;){if((H=G>=(P=(T+V)/2))?T=P:V=P,(q=X>=(O=(k+F)/2))?k=O:F=O,n=a,!(a=a[B=q<<1|H]))return this;if(!a.length)break;(n[B+1&3]||n[B+2&3]||n[B+3&3])&&(u=n,j=B)}for(;a.data!==t;)if(g=a,!(a=a.next))return this;return(y=a.next)&&delete a.next,g?(y?g.next=y:delete g.next,this):n?(y?n[B]=y:delete n[B],(a=n[0]||n[1]||n[2]||n[3])&&a===(n[3]||n[2]||n[1]||n[0])&&!a.length&&(u?u[j]=a:this._root=a),this):(this._root=y,this)}function hw(t){for(var n=0,a=t.length;n<a;++n)this.remove(t[n]);return this}function dw(){return this._root}function pw(){var t=0;return this.visit(function(n){if(!n.length)do++t;while(n=n.next)}),t}function mw(t){var n=[],a,u=this._root,g,y,T,k,V;for(u&&n.push(new Di(u,this._x0,this._y0,this._x1,this._y1));a=n.pop();)if(!t(u=a.node,y=a.x0,T=a.y0,k=a.x1,V=a.y1)&&u.length){var F=(y+k)/2,G=(T+V)/2;(g=u[3])&&n.push(new Di(g,F,G,k,V)),(g=u[2])&&n.push(new Di(g,y,G,F,V)),(g=u[1])&&n.push(new Di(g,F,T,k,G)),(g=u[0])&&n.push(new Di(g,y,T,F,G))}return this}function vw(t){var n=[],a=[],u;for(this._root&&n.push(new Di(this._root,this._x0,this._y0,this._x1,this._y1));u=n.pop();){var g=u.node;if(g.length){var y,T=u.x0,k=u.y0,V=u.x1,F=u.y1,G=(T+V)/2,X=(k+F)/2;(y=g[0])&&n.push(new Di(y,T,k,G,X)),(y=g[1])&&n.push(new Di(y,G,k,V,X)),(y=g[2])&&n.push(new Di(y,T,X,G,F)),(y=g[3])&&n.push(new Di(y,G,X,V,F))}a.push(u)}for(;u=a.pop();)t(u.node,u.x0,u.y0,u.x1,u.y1);return this}function gw(t){return t[0]}function yw(t){return arguments.length?(this._x=t,this):this._x}function xw(t){return t[1]}function bw(t){return arguments.length?(this._y=t,this):this._y}function Vs(t,n,a){var u=new gg(n??gw,a??xw,NaN,NaN,NaN,NaN);return t==null?u:u.addAll(t)}function gg(t,n,a,u,g,y){this._x=t,this._y=n,this._x0=a,this._y0=u,this._x1=g,this._y1=y,this._root=void 0}function _w(t){for(var n={data:t.data},a=n;t=t.next;)a=a.next={data:t.data};return n}var so=Vs.prototype=gg.prototype;so.copy=function(){var t=new gg(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root,a,u;if(!n)return t;if(!n.length)return t._root=_w(n),t;for(a=[{source:n,target:t._root=new Array(4)}];n=a.pop();)for(var g=0;g<4;++g)(u=n.source[g])&&(u.length?a.push({source:u,target:n.target[g]=new Array(4)}):n.target[g]=_w(u));return t};so.add=iw;so.addAll=aw;so.cover=sw;so.data=uw;so.extent=cw;so.find=lw;so.remove=fw;so.removeAll=hw;so.root=dw;so.size=pw;so.visit=mw;so.visitAfter=vw;so.x=yw;so.y=bw;function Kn(t){return function(){return t}}function ta(t){return(t()-.5)*1e-6}function y8(t){return t.x+t.vx}function x8(t){return t.y+t.vy}function ww(t){var n,a,u,g=1,y=1;typeof t!="function"&&(t=Kn(t==null?1:+t));function T(){for(var F,G=n.length,X,P,O,H,q,B,j=0;j<y;++j)for(X=Vs(n,y8,x8).visitAfter(k),F=0;F<G;++F)P=n[F],q=a[P.index],B=q*q,O=P.x+P.vx,H=P.y+P.vy,X.visit(U);function U(i,r,e,o,s){var d=i.data,p=i.r,x=q+p;if(d){if(d.index>P.index){var l=O-d.x-d.vx,_=H-d.y-d.vy,v=l*l+_*_;v<x*x&&(l===0&&(l=ta(u),v+=l*l),_===0&&(_=ta(u),v+=_*_),v=(x-(v=Math.sqrt(v)))/v*g,P.vx+=(l*=v)*(x=(p*=p)/(B+p)),P.vy+=(_*=v)*x,d.vx-=l*(x=1-x),d.vy-=_*x)}return}return r>O+x||o<O-x||e>H+x||s<H-x}}function k(F){if(F.data)return F.r=a[F.data.index];for(var G=F.r=0;G<4;++G)F[G]&&F[G].r>F.r&&(F.r=F[G].r)}function V(){if(n){var F,G=n.length,X;for(a=new Array(G),F=0;F<G;++F)X=n[F],a[X.index]=+t(X,F,n)}}return T.initialize=function(F,G){n=F,u=G,V()},T.iterations=function(F){return arguments.length?(y=+F,T):y},T.strength=function(F){return arguments.length?(g=+F,T):g},T.radius=function(F){return arguments.length?(t=typeof F=="function"?F:Kn(+F),V(),T):t},T}function b8(t){return t.index}function Cw(t,n){var a=t.get(n);if(!a)throw new Error("node not found: "+n);return a}function Sw(t){var n=b8,a=X,u,g=Kn(30),y,T,k,V,F,G=1;t==null&&(t=[]);function X(B){return 1/Math.min(k[B.source.index],k[B.target.index])}function P(B){for(var j=0,U=t.length;j<G;++j)for(var i=0,r,e,o,s,d,p,x;i<U;++i)r=t[i],e=r.source,o=r.target,s=o.x+o.vx-e.x-e.vx||ta(F),d=o.y+o.vy-e.y-e.vy||ta(F),p=Math.sqrt(s*s+d*d),p=(p-y[i])/p*B*u[i],s*=p,d*=p,o.vx-=s*(x=V[i]),o.vy-=d*x,e.vx+=s*(x=1-x),e.vy+=d*x}function O(){if(T){var B,j=T.length,U=t.length,i=new Map(T.map((e,o)=>[n(e,o,T),e])),r;for(B=0,k=new Array(j);B<U;++B)r=t[B],r.index=B,typeof r.source!="object"&&(r.source=Cw(i,r.source)),typeof r.target!="object"&&(r.target=Cw(i,r.target)),k[r.source.index]=(k[r.source.index]||0)+1,k[r.target.index]=(k[r.target.index]||0)+1;for(B=0,V=new Array(U);B<U;++B)r=t[B],V[B]=k[r.source.index]/(k[r.source.index]+k[r.target.index]);u=new Array(U),H(),y=new Array(U),q()}}function H(){if(T)for(var B=0,j=t.length;B<j;++B)u[B]=+a(t[B],B,t)}function q(){if(T)for(var B=0,j=t.length;B<j;++B)y[B]=+g(t[B],B,t)}return P.initialize=function(B,j){T=B,F=j,O()},P.links=function(B){return arguments.length?(t=B,O(),P):t},P.id=function(B){return arguments.length?(n=B,P):n},P.iterations=function(B){return arguments.length?(G=+B,P):G},P.strength=function(B){return arguments.length?(a=typeof B=="function"?B:Kn(+B),H(),P):a},P.distance=function(B){return arguments.length?(g=typeof B=="function"?B:Kn(+B),q(),P):g},P}function Ew(){let t=1;return()=>(t=(1664525*t+1013904223)%4294967296)/4294967296}function Tw(t){return t.x}function Mw(t){return t.y}var _8=10,w8=Math.PI*(3-Math.sqrt(5));function Aw(t){var n,a=1,u=.001,g=1-Math.pow(u,1/300),y=0,T=.6,k=new Map,V=wa(X),F=Oo("tick","end"),G=Ew();t==null&&(t=[]);function X(){P(),F.call("tick",n),a<u&&(V.stop(),F.call("end",n))}function P(q){var B,j=t.length,U;q===void 0&&(q=1);for(var i=0;i<q;++i)for(a+=(y-a)*g,k.forEach(function(r){r(a)}),B=0;B<j;++B)U=t[B],U.fx==null?U.x+=U.vx*=T:(U.x=U.fx,U.vx=0),U.fy==null?U.y+=U.vy*=T:(U.y=U.fy,U.vy=0);return n}function O(){for(var q=0,B=t.length,j;q<B;++q){if(j=t[q],j.index=q,j.fx!=null&&(j.x=j.fx),j.fy!=null&&(j.y=j.fy),isNaN(j.x)||isNaN(j.y)){var U=_8*Math.sqrt(.5+q),i=q*w8;j.x=U*Math.cos(i),j.y=U*Math.sin(i)}(isNaN(j.vx)||isNaN(j.vy))&&(j.vx=j.vy=0)}}function H(q){return q.initialize&&q.initialize(t,G),q}return O(),n={tick:P,restart:function(){return V.restart(X),n},stop:function(){return V.stop(),n},nodes:function(q){return arguments.length?(t=q,O(),k.forEach(H),n):t},alpha:function(q){return arguments.length?(a=+q,n):a},alphaMin:function(q){return arguments.length?(u=+q,n):u},alphaDecay:function(q){return arguments.length?(g=+q,n):+g},alphaTarget:function(q){return arguments.length?(y=+q,n):y},velocityDecay:function(q){return arguments.length?(T=1-q,n):1-T},randomSource:function(q){return arguments.length?(G=q,k.forEach(H),n):G},force:function(q,B){return arguments.length>1?(B==null?k.delete(q):k.set(q,H(B)),n):k.get(q)},find:function(q,B,j){var U=0,i=t.length,r,e,o,s,d;for(j==null?j=1/0:j*=j,U=0;U<i;++U)s=t[U],r=q-s.x,e=B-s.y,o=r*r+e*e,o<j&&(d=s,j=o);return d},on:function(q,B){return arguments.length>1?(F.on(q,B),n):F.on(q)}}}function Rw(){var t,n,a,u,g=Kn(-30),y,T=1,k=1/0,V=.81;function F(O){var H,q=t.length,B=Vs(t,Tw,Mw).visitAfter(X);for(u=O,H=0;H<q;++H)n=t[H],B.visit(P)}function G(){if(t){var O,H=t.length,q;for(y=new Array(H),O=0;O<H;++O)q=t[O],y[q.index]=+g(q,O,t)}}function X(O){var H=0,q,B,j=0,U,i,r;if(O.length){for(U=i=r=0;r<4;++r)(q=O[r])&&(B=Math.abs(q.value))&&(H+=q.value,j+=B,U+=B*q.x,i+=B*q.y);O.x=U/j,O.y=i/j}else{q=O,q.x=q.data.x,q.y=q.data.y;do H+=y[q.data.index];while(q=q.next)}O.value=H}function P(O,H,q,B){if(!O.value)return!0;var j=O.x-n.x,U=O.y-n.y,i=B-H,r=j*j+U*U;if(i*i/V<r)return r<k&&(j===0&&(j=ta(a),r+=j*j),U===0&&(U=ta(a),r+=U*U),r<T&&(r=Math.sqrt(T*r)),n.vx+=j*O.value*u/r,n.vy+=U*O.value*u/r),!0;if(O.length||r>=k)return;(O.data!==n||O.next)&&(j===0&&(j=ta(a),r+=j*j),U===0&&(U=ta(a),r+=U*U),r<T&&(r=Math.sqrt(T*r)));do O.data!==n&&(i=y[O.data.index]*u/r,n.vx+=j*i,n.vy+=U*i);while(O=O.next)}return F.initialize=function(O,H){t=O,a=H,G()},F.strength=function(O){return arguments.length?(g=typeof O=="function"?O:Kn(+O),G(),F):g},F.distanceMin=function(O){return arguments.length?(T=O*O,F):Math.sqrt(T)},F.distanceMax=function(O){return arguments.length?(k=O*O,F):Math.sqrt(k)},F.theta=function(O){return arguments.length?(V=O*O,F):Math.sqrt(V)},F}function kw(t,n,a){var u,g=Kn(.1),y,T;typeof t!="function"&&(t=Kn(+t)),n==null&&(n=0),a==null&&(a=0);function k(F){for(var G=0,X=u.length;G<X;++G){var P=u[G],O=P.x-n||1e-6,H=P.y-a||1e-6,q=Math.sqrt(O*O+H*H),B=(T[G]-q)*y[G]*F/q;P.vx+=O*B,P.vy+=H*B}}function V(){if(u){var F,G=u.length;for(y=new Array(G),T=new Array(G),F=0;F<G;++F)T[F]=+t(u[F],F,u),y[F]=isNaN(T[F])?0:+g(u[F],F,u)}}return k.initialize=function(F){u=F,V()},k.strength=function(F){return arguments.length?(g=typeof F=="function"?F:Kn(+F),V(),k):g},k.radius=function(F){return arguments.length?(t=typeof F=="function"?F:Kn(+F),V(),k):t},k.x=function(F){return arguments.length?(n=+F,k):n},k.y=function(F){return arguments.length?(a=+F,k):a},k}function Iw(t){var n=Kn(.1),a,u,g;typeof t!="function"&&(t=Kn(t==null?0:+t));function y(k){for(var V=0,F=a.length,G;V<F;++V)G=a[V],G.vx+=(g[V]-G.x)*u[V]*k}function T(){if(a){var k,V=a.length;for(u=new Array(V),g=new Array(V),k=0;k<V;++k)u[k]=isNaN(g[k]=+t(a[k],k,a))?0:+n(a[k],k,a)}}return y.initialize=function(k){a=k,T()},y.strength=function(k){return arguments.length?(n=typeof k=="function"?k:Kn(+k),T(),y):n},y.x=function(k){return arguments.length?(t=typeof k=="function"?k:Kn(+k),T(),y):t},y}function Pw(t){var n=Kn(.1),a,u,g;typeof t!="function"&&(t=Kn(t==null?0:+t));function y(k){for(var V=0,F=a.length,G;V<F;++V)G=a[V],G.vy+=(g[V]-G.y)*u[V]*k}function T(){if(a){var k,V=a.length;for(u=new Array(V),g=new Array(V),k=0;k<V;++k)u[k]=isNaN(g[k]=+t(a[k],k,a))?0:+n(a[k],k,a)}}return y.initialize=function(k){a=k,T()},y.strength=function(k){return arguments.length?(n=typeof k=="function"?k:Kn(+k),T(),y):n},y.y=function(k){return arguments.length?(t=typeof k=="function"?k:Kn(+k),T(),y):t},y}function Dw(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function wu(t,n){if((a=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var a,u=t.slice(0,a);return[u.length>1?u[0]+u.slice(2):u,+t.slice(a+1)]}function Ea(t){return t=wu(Math.abs(t)),t?t[1]:NaN}function Ow(t,n){return function(a,u){for(var g=a.length,y=[],T=0,k=t[0],V=0;g>0&&k>0&&(V+k+1>u&&(k=Math.max(1,u-V)),y.push(a.substring(g-=k,g+k)),!((V+=k+1)>u));)k=t[T=(T+1)%t.length];return y.reverse().join(n)}}function Nw(t){return function(n){return n.replace(/[0-9]/g,function(a){return t[+a]})}}var C8=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ra(t){if(!(n=C8.exec(t)))throw new Error("invalid format: "+t);var n;return new Gl({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}ra.prototype=Gl.prototype;function Gl(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Gl.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Lw(t){e:for(var n=t.length,a=1,u=-1,g;a<n;++a)switch(t[a]){case".":u=g=a;break;case"0":u===0&&(u=a),g=a;break;default:if(!+t[a])break e;u>0&&(u=0);break}return u>0?t.slice(0,u)+t.slice(g+1):t}var yg;function Fw(t,n){var a=wu(t,n);if(!a)return t+"";var u=a[0],g=a[1],y=g-(yg=Math.max(-8,Math.min(8,Math.floor(g/3)))*3)+1,T=u.length;return y===T?u:y>T?u+new Array(y-T+1).join("0"):y>0?u.slice(0,y)+"."+u.slice(y):"0."+new Array(1-y).join("0")+wu(t,Math.max(0,n+y-1))[0]}function xg(t,n){var a=wu(t,n);if(!a)return t+"";var u=a[0],g=a[1];return g<0?"0."+new Array(-g).join("0")+u:u.length>g+1?u.slice(0,g+1)+"."+u.slice(g+1):u+new Array(g-u.length+2).join("0")}var bg={"%":(t,n)=>(t*100).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Dw,e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>xg(t*100,n),r:xg,s:Fw,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function _g(t){return t}var Uw=Array.prototype.map,Bw=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function yd(t){var n=t.grouping===void 0||t.thousands===void 0?_g:Ow(Uw.call(t.grouping,Number),t.thousands+""),a=t.currency===void 0?"":t.currency[0]+"",u=t.currency===void 0?"":t.currency[1]+"",g=t.decimal===void 0?".":t.decimal+"",y=t.numerals===void 0?_g:Nw(Uw.call(t.numerals,String)),T=t.percent===void 0?"%":t.percent+"",k=t.minus===void 0?"\u2212":t.minus+"",V=t.nan===void 0?"NaN":t.nan+"";function F(X){X=ra(X);var P=X.fill,O=X.align,H=X.sign,q=X.symbol,B=X.zero,j=X.width,U=X.comma,i=X.precision,r=X.trim,e=X.type;e==="n"?(U=!0,e="g"):bg[e]||(i===void 0&&(i=12),r=!0,e="g"),(B||P==="0"&&O==="=")&&(B=!0,P="0",O="=");var o=q==="$"?a:q==="#"&&/[boxX]/.test(e)?"0"+e.toLowerCase():"",s=q==="$"?u:/[%p]/.test(e)?T:"",d=bg[e],p=/[defgprs%]/.test(e);i=i===void 0?6:/[gprs]/.test(e)?Math.max(1,Math.min(21,i)):Math.max(0,Math.min(20,i));function x(l){var _=o,v=s,c,h,f;if(e==="c")v=d(l)+v,l="";else{l=+l;var m=l<0||1/l<0;if(l=isNaN(l)?V:d(Math.abs(l),i),r&&(l=Lw(l)),m&&+l==0&&H!=="+"&&(m=!1),_=(m?H==="("?H:k:H==="-"||H==="("?"":H)+_,v=(e==="s"?Bw[8+yg/3]:"")+v+(m&&H==="("?")":""),p){for(c=-1,h=l.length;++c<h;)if(f=l.charCodeAt(c),48>f||f>57){v=(f===46?g+l.slice(c+1):l.slice(c))+v,l=l.slice(0,c);break}}}U&&!B&&(l=n(l,1/0));var b=_.length+l.length+v.length,w=b<j?new Array(j-b+1).join(P):"";switch(U&&B&&(l=n(w+l,w.length?j-v.length:1/0),w=""),O){case"<":l=_+l+v+w;break;case"=":l=_+w+l+v;break;case"^":l=w.slice(0,b=w.length>>1)+_+l+v+w.slice(b);break;default:l=w+_+l+v;break}return y(l)}return x.toString=function(){return X+""},x}function G(X,P){var O=F((X=ra(X),X.type="f",X)),H=Math.max(-8,Math.min(8,Math.floor(Ea(P)/3)))*3,q=Math.pow(10,-H),B=Bw[8+H/3];return function(j){return O(q*j)+B}}return{format:F,formatPrefix:G}}var xd,Cu,ql;bd({thousands:",",grouping:[3],currency:["$",""]});function bd(t){return xd=yd(t),Cu=xd.format,ql=xd.formatPrefix,xd}function _d(t){return Math.max(0,-Ea(Math.abs(t)))}function wd(t,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ea(n)/3)))*3-Ea(Math.abs(t)))}function Cd(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,Ea(n)-Ea(t))+1}var vr=1e-6,as=1e-12,Wr=Math.PI,Nn=Wr/2,Sc=Wr/4,mi=Wr*2,pn=180/Wr,wr=Wr/180,Vr=Math.abs,Fo=Math.atan,Un=Math.atan2,cr=Math.cos,Wl=Math.ceil,Sd=Math.exp;var Ed=Math.hypot,Su=Math.log,Td=Math.pow,rr=Math.sin,Ki=Math.sign||function(t){return t>0?1:t<0?-1:0},Cn=Math.sqrt,Ec=Math.tan;function Md(t){return t>1?0:t<-1?Wr:Math.acos(t)}function Bn(t){return t>1?Nn:t<-1?-Nn:Math.asin(t)}function wg(t){return(t=rr(t/2))*t}function An(){}function Ad(t,n){t&&Hw.hasOwnProperty(t.type)&&Hw[t.type](t,n)}var Vw={Feature:function(t,n){Ad(t.geometry,n)},FeatureCollection:function(t,n){for(var a=t.features,u=-1,g=a.length;++u<g;)Ad(a[u].geometry,n)}},Hw={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var a=t.coordinates,u=-1,g=a.length;++u<g;)t=a[u],n.point(t[0],t[1],t[2])},LineString:function(t,n){Cg(t.coordinates,n,0)},MultiLineString:function(t,n){for(var a=t.coordinates,u=-1,g=a.length;++u<g;)Cg(a[u],n,0)},Polygon:function(t,n){zw(t.coordinates,n)},MultiPolygon:function(t,n){for(var a=t.coordinates,u=-1,g=a.length;++u<g;)zw(a[u],n)},GeometryCollection:function(t,n){for(var a=t.geometries,u=-1,g=a.length;++u<g;)Ad(a[u],n)}};function Cg(t,n,a){var u=-1,g=t.length-a,y;for(n.lineStart();++u<g;)y=t[u],n.point(y[0],y[1],y[2]);n.lineEnd()}function zw(t,n){var a=-1,u=t.length;for(n.polygonStart();++a<u;)Cg(t[a],n,1);n.polygonEnd()}function Oi(t,n){t&&Vw.hasOwnProperty(t.type)?Vw[t.type](t,n):Ad(t,n)}var jl=new Dn,Rd=new Dn,Gw,qw,Sg,Eg,Tg,na={point:An,lineStart:An,lineEnd:An,polygonStart:function(){jl=new Dn,na.lineStart=S8,na.lineEnd=E8},polygonEnd:function(){var t=+jl;Rd.add(t<0?mi+t:t),this.lineStart=this.lineEnd=this.point=An},sphere:function(){Rd.add(mi)}};function S8(){na.point=T8}function E8(){Ww(Gw,qw)}function T8(t,n){na.point=Ww,Gw=t,qw=n,t*=wr,n*=wr,Sg=t,Eg=cr(n=n/2+Sc),Tg=rr(n)}function Ww(t,n){t*=wr,n*=wr,n=n/2+Sc;var a=t-Sg,u=a>=0?1:-1,g=u*a,y=cr(n),T=rr(n),k=Tg*T,V=Eg*y+k*cr(g),F=k*u*rr(g);jl.add(Un(F,V)),Sg=t,Eg=y,Tg=T}function jw(t){return Rd=new Dn,Oi(t,na),Rd*2}function Eu(t){return[Un(t[1],t[0]),Bn(t[2])]}function Uo(t){var n=t[0],a=t[1],u=cr(a);return[u*cr(n),u*rr(n),rr(a)]}function $l(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function ss(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function kd(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function Xl(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function Tu(t){var n=Cn(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}var ui,Co,hi,Ro,Mu,Zw,Kw,Tc,Yl,Hs,cs,us={point:Mg,lineStart:$w,lineEnd:Xw,polygonStart:function(){us.point=Jw,us.lineStart=M8,us.lineEnd=A8,Yl=new Dn,na.polygonStart()},polygonEnd:function(){na.polygonEnd(),us.point=Mg,us.lineStart=$w,us.lineEnd=Xw,jl<0?(ui=-(hi=180),Co=-(Ro=90)):Yl>vr?Ro=90:Yl<-vr&&(Co=-90),cs[0]=ui,cs[1]=hi},sphere:function(){ui=-(hi=180),Co=-(Ro=90)}};function Mg(t,n){Hs.push(cs=[ui=t,hi=t]),n<Co&&(Co=n),n>Ro&&(Ro=n)}function Qw(t,n){var a=Uo([t*wr,n*wr]);if(Tc){var u=ss(Tc,a),g=[u[1],-u[0],0],y=ss(g,u);Tu(y),y=Eu(y);var T=t-Mu,k=T>0?1:-1,V=y[0]*pn*k,F,G=Vr(T)>180;G^(k*Mu<V&&V<k*t)?(F=y[1]*pn,F>Ro&&(Ro=F)):(V=(V+360)%360-180,G^(k*Mu<V&&V<k*t)?(F=-y[1]*pn,F<Co&&(Co=F)):(n<Co&&(Co=n),n>Ro&&(Ro=n))),G?t<Mu?Ao(ui,t)>Ao(ui,hi)&&(hi=t):Ao(t,hi)>Ao(ui,hi)&&(ui=t):hi>=ui?(t<ui&&(ui=t),t>hi&&(hi=t)):t>Mu?Ao(ui,t)>Ao(ui,hi)&&(hi=t):Ao(t,hi)>Ao(ui,hi)&&(ui=t)}else Hs.push(cs=[ui=t,hi=t]);n<Co&&(Co=n),n>Ro&&(Ro=n),Tc=a,Mu=t}function $w(){us.point=Qw}function Xw(){cs[0]=ui,cs[1]=hi,us.point=Mg,Tc=null}function Jw(t,n){if(Tc){var a=t-Mu;Yl.add(Vr(a)>180?a+(a>0?360:-360):a)}else Zw=t,Kw=n;na.point(t,n),Qw(t,n)}function M8(){na.lineStart()}function A8(){Jw(Zw,Kw),na.lineEnd(),Vr(Yl)>vr&&(ui=-(hi=180)),cs[0]=ui,cs[1]=hi,Tc=null}function Ao(t,n){return(n-=t)<0?n+360:n}function R8(t,n){return t[0]-n[0]}function Yw(t,n){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}function eC(t){var n,a,u,g,y,T,k;if(Ro=hi=-(ui=Co=1/0),Hs=[],Oi(t,us),a=Hs.length){for(Hs.sort(R8),n=1,u=Hs[0],y=[u];n<a;++n)g=Hs[n],Yw(u,g[0])||Yw(u,g[1])?(Ao(u[0],g[1])>Ao(u[0],u[1])&&(u[1]=g[1]),Ao(g[0],u[1])>Ao(u[0],u[1])&&(u[0]=g[0])):y.push(u=g);for(T=-1/0,a=y.length-1,n=0,u=y[a];n<=a;u=g,++n)g=y[n],(k=Ao(u[1],g[0]))>T&&(T=k,ui=g[0],hi=u[1])}return Hs=cs=null,ui===1/0||Co===1/0?[[NaN,NaN],[NaN,NaN]]:[[ui,Co],[hi,Ro]]}var Zl,Id,Pd,Dd,Od,Nd,Ld,Fd,Ag,Rg,kg,nC,iC,uo,co,lo,ia={sphere:An,point:Ig,lineStart:tC,lineEnd:rC,polygonStart:function(){ia.lineStart=P8,ia.lineEnd=D8},polygonEnd:function(){ia.lineStart=tC,ia.lineEnd=rC}};function Ig(t,n){t*=wr,n*=wr;var a=cr(n);Kl(a*cr(t),a*rr(t),rr(n))}function Kl(t,n,a){++Zl,Pd+=(t-Pd)/Zl,Dd+=(n-Dd)/Zl,Od+=(a-Od)/Zl}function tC(){ia.point=k8}function k8(t,n){t*=wr,n*=wr;var a=cr(n);uo=a*cr(t),co=a*rr(t),lo=rr(n),ia.point=I8,Kl(uo,co,lo)}function I8(t,n){t*=wr,n*=wr;var a=cr(n),u=a*cr(t),g=a*rr(t),y=rr(n),T=Un(Cn((T=co*y-lo*g)*T+(T=lo*u-uo*y)*T+(T=uo*g-co*u)*T),uo*u+co*g+lo*y);Id+=T,Nd+=T*(uo+(uo=u)),Ld+=T*(co+(co=g)),Fd+=T*(lo+(lo=y)),Kl(uo,co,lo)}function rC(){ia.point=Ig}function P8(){ia.point=O8}function D8(){oC(nC,iC),ia.point=Ig}function O8(t,n){nC=t,iC=n,t*=wr,n*=wr,ia.point=oC;var a=cr(n);uo=a*cr(t),co=a*rr(t),lo=rr(n),Kl(uo,co,lo)}function oC(t,n){t*=wr,n*=wr;var a=cr(n),u=a*cr(t),g=a*rr(t),y=rr(n),T=co*y-lo*g,k=lo*u-uo*y,V=uo*g-co*u,F=Ed(T,k,V),G=Bn(F),X=F&&-G/F;Ag.add(X*T),Rg.add(X*k),kg.add(X*V),Id+=G,Nd+=G*(uo+(uo=u)),Ld+=G*(co+(co=g)),Fd+=G*(lo+(lo=y)),Kl(uo,co,lo)}function aC(t){Zl=Id=Pd=Dd=Od=Nd=Ld=Fd=0,Ag=new Dn,Rg=new Dn,kg=new Dn,Oi(t,ia);var n=+Ag,a=+Rg,u=+kg,g=Ed(n,a,u);return g<as&&(n=Nd,a=Ld,u=Fd,Id<vr&&(n=Pd,a=Dd,u=Od),g=Ed(n,a,u),g<as)?[NaN,NaN]:[Un(a,n)*pn,Bn(u/g)*pn]}function Au(t){return function(){return t}}function Ql(t,n){function a(u,g){return u=t(u,g),n(u[0],u[1])}return t.invert&&n.invert&&(a.invert=function(u,g){return u=n.invert(u,g),u&&t.invert(u[0],u[1])}),a}function Pg(t,n){return Vr(t)>Wr&&(t-=Math.round(t/mi)*mi),[t,n]}Pg.invert=Pg;function Jl(t,n,a){return(t%=mi)?n||a?Ql(uC(t),cC(n,a)):uC(t):n||a?cC(n,a):Pg}function sC(t){return function(n,a){return n+=t,Vr(n)>Wr&&(n-=Math.round(n/mi)*mi),[n,a]}}function uC(t){var n=sC(t);return n.invert=sC(-t),n}function cC(t,n){var a=cr(t),u=rr(t),g=cr(n),y=rr(n);function T(k,V){var F=cr(V),G=cr(k)*F,X=rr(k)*F,P=rr(V),O=P*a+G*u;return[Un(X*g-O*y,G*a-P*u),Bn(O*g+X*y)]}return T.invert=function(k,V){var F=cr(V),G=cr(k)*F,X=rr(k)*F,P=rr(V),O=P*g-X*y;return[Un(X*g+P*y,G*a+O*u),Bn(O*a-G*u)]},T}function Ud(t){t=Jl(t[0]*wr,t[1]*wr,t.length>2?t[2]*wr:0);function n(a){return a=t(a[0]*wr,a[1]*wr),a[0]*=pn,a[1]*=pn,a}return n.invert=function(a){return a=t.invert(a[0]*wr,a[1]*wr),a[0]*=pn,a[1]*=pn,a},n}function Dg(t,n,a,u,g,y){if(a){var T=cr(n),k=rr(n),V=u*a;g==null?(g=n+u*mi,y=n-V/2):(g=lC(T,g),y=lC(T,y),(u>0?g<y:g>y)&&(g+=u*mi));for(var F,G=g;u>0?G>y:G<y;G-=V)F=Eu([T,-k*cr(G),-k*rr(G)]),t.point(F[0],F[1])}}function lC(t,n){n=Uo(n),n[0]-=t,Tu(n);var a=Md(-n[1]);return((-n[2]<0?-a:a)+mi-vr)%mi}function fC(){var t=Au([0,0]),n=Au(90),a=Au(2),u,g,y={point:T};function T(V,F){u.push(V=g(V,F)),V[0]*=pn,V[1]*=pn}function k(){var V=t.apply(this,arguments),F=n.apply(this,arguments)*wr,G=a.apply(this,arguments)*wr;return u=[],g=Jl(-V[0]*wr,-V[1]*wr,0).invert,Dg(y,F,G,1),V={type:"Polygon",coordinates:[u]},u=g=null,V}return k.center=function(V){return arguments.length?(t=typeof V=="function"?V:Au([+V[0],+V[1]]),k):t},k.radius=function(V){return arguments.length?(n=typeof V=="function"?V:Au(+V),k):n},k.precision=function(V){return arguments.length?(a=typeof V=="function"?V:Au(+V),k):a},k}function Bd(){var t=[],n;return{point:function(a,u,g){n.push([a,u,g])},lineStart:function(){t.push(n=[])},lineEnd:An,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var a=t;return t=[],n=null,a}}}function Mc(t,n){return Vr(t[0]-n[0])<vr&&Vr(t[1]-n[1])<vr}function Vd(t,n,a,u){this.x=t,this.z=n,this.o=a,this.e=u,this.v=!1,this.n=this.p=null}function Hd(t,n,a,u,g){var y=[],T=[],k,V;if(t.forEach(function(H){if(!((q=H.length-1)<=0)){var q,B=H[0],j=H[q],U;if(Mc(B,j)){if(!B[2]&&!j[2]){for(g.lineStart(),k=0;k<q;++k)g.point((B=H[k])[0],B[1]);g.lineEnd();return}j[0]+=2*vr}y.push(U=new Vd(B,H,null,!0)),T.push(U.o=new Vd(B,null,U,!1)),y.push(U=new Vd(j,H,null,!1)),T.push(U.o=new Vd(j,null,U,!0))}}),!!y.length){for(T.sort(n),hC(y),hC(T),k=0,V=T.length;k<V;++k)T[k].e=a=!a;for(var F=y[0],G,X;;){for(var P=F,O=!0;P.v;)if((P=P.n)===F)return;G=P.z,g.lineStart();do{if(P.v=P.o.v=!0,P.e){if(O)for(k=0,V=G.length;k<V;++k)g.point((X=G[k])[0],X[1]);else u(P.x,P.n.x,1,g);P=P.n}else{if(O)for(G=P.p.z,k=G.length-1;k>=0;--k)g.point((X=G[k])[0],X[1]);else u(P.x,P.p.x,-1,g);P=P.p}P=P.o,G=P.z,O=!O}while(!P.v);g.lineEnd()}}}function hC(t){if(n=t.length){for(var n,a=0,u=t[0],g;++a<n;)u.n=g=t[a],g.p=u,u=g;u.n=g=t[0],g.p=u}}function Og(t){return Vr(t[0])<=Wr?t[0]:Ki(t[0])*((Vr(t[0])+Wr)%mi-Wr)}function zd(t,n){var a=Og(n),u=n[1],g=rr(u),y=[rr(a),-cr(a),0],T=0,k=0,V=new Dn;g===1?u=Nn+vr:g===-1&&(u=-Nn-vr);for(var F=0,G=t.length;F<G;++F)if(P=(X=t[F]).length)for(var X,P,O=X[P-1],H=Og(O),q=O[1]/2+Sc,B=rr(q),j=cr(q),U=0;U<P;++U,H=r,B=o,j=s,O=i){var i=X[U],r=Og(i),e=i[1]/2+Sc,o=rr(e),s=cr(e),d=r-H,p=d>=0?1:-1,x=p*d,l=x>Wr,_=B*o;if(V.add(Un(_*p*rr(x),j*s+_*cr(x))),T+=l?d+p*mi:d,l^H>=a^r>=a){var v=ss(Uo(O),Uo(i));Tu(v);var c=ss(y,v);Tu(c);var h=(l^d>=0?-1:1)*Bn(c[2]);(u>h||u===h&&(v[0]||v[1]))&&(k+=l^d>=0?1:-1)}}return(T<-vr||T<vr&&V<-as)^k&1}function Gd(t,n,a,u){return function(g){var y=n(g),T=Bd(),k=n(T),V=!1,F,G,X,P={point:O,lineStart:q,lineEnd:B,polygonStart:function(){P.point=j,P.lineStart=U,P.lineEnd=i,G=[],F=[]},polygonEnd:function(){P.point=O,P.lineStart=q,P.lineEnd=B,G=iu(G);var r=zd(F,u);G.length?(V||(g.polygonStart(),V=!0),Hd(G,L8,r,a,g)):r&&(V||(g.polygonStart(),V=!0),g.lineStart(),a(null,null,1,g),g.lineEnd()),V&&(g.polygonEnd(),V=!1),G=F=null},sphere:function(){g.polygonStart(),g.lineStart(),a(null,null,1,g),g.lineEnd(),g.polygonEnd()}};function O(r,e){t(r,e)&&g.point(r,e)}function H(r,e){y.point(r,e)}function q(){P.point=H,y.lineStart()}function B(){P.point=O,y.lineEnd()}function j(r,e){X.push([r,e]),k.point(r,e)}function U(){k.lineStart(),X=[]}function i(){j(X[0][0],X[0][1]),k.lineEnd();var r=k.clean(),e=T.result(),o,s=e.length,d,p,x;if(X.pop(),F.push(X),X=null,!!s){if(r&1){if(p=e[0],(d=p.length-1)>0){for(V||(g.polygonStart(),V=!0),g.lineStart(),o=0;o<d;++o)g.point((x=p[o])[0],x[1]);g.lineEnd()}return}s>1&&r&2&&e.push(e.pop().concat(e.shift())),G.push(e.filter(N8))}}return P}}function N8(t){return t.length>1}function L8(t,n){return((t=t.x)[0]<0?t[1]-Nn-vr:Nn-t[1])-((n=n.x)[0]<0?n[1]-Nn-vr:Nn-n[1])}var ef=Gd(function(){return!0},F8,B8,[-Wr,-Nn]);function F8(t){var n=NaN,a=NaN,u=NaN,g;return{lineStart:function(){t.lineStart(),g=1},point:function(y,T){var k=y>0?Wr:-Wr,V=Vr(y-n);Vr(V-Wr)<vr?(t.point(n,a=(a+T)/2>0?Nn:-Nn),t.point(u,a),t.lineEnd(),t.lineStart(),t.point(k,a),t.point(y,a),g=0):u!==k&&V>=Wr&&(Vr(n-u)<vr&&(n-=u*vr),Vr(y-k)<vr&&(y-=k*vr),a=U8(n,a,y,T),t.point(u,a),t.lineEnd(),t.lineStart(),t.point(k,a),g=0),t.point(n=y,a=T),u=k},lineEnd:function(){t.lineEnd(),n=a=NaN},clean:function(){return 2-g}}}function U8(t,n,a,u){var g,y,T=rr(t-a);return Vr(T)>vr?Fo((rr(n)*(y=cr(u))*rr(a)-rr(u)*(g=cr(n))*rr(t))/(g*y*T)):(n+u)/2}function B8(t,n,a,u){var g;if(t==null)g=a*Nn,u.point(-Wr,g),u.point(0,g),u.point(Wr,g),u.point(Wr,0),u.point(Wr,-g),u.point(0,-g),u.point(-Wr,-g),u.point(-Wr,0),u.point(-Wr,g);else if(Vr(t[0]-n[0])>vr){var y=t[0]<n[0]?Wr:-Wr;g=a*y/2,u.point(-y,g),u.point(0,g),u.point(y,g)}else u.point(n[0],n[1])}function qd(t){var n=cr(t),a=2*wr,u=n>0,g=Vr(n)>vr;function y(G,X,P,O){Dg(O,t,a,P,G,X)}function T(G,X){return cr(G)*cr(X)>n}function k(G){var X,P,O,H,q;return{lineStart:function(){H=O=!1,q=1},point:function(B,j){var U=[B,j],i,r=T(B,j),e=u?r?0:F(B,j):r?F(B+(B<0?Wr:-Wr),j):0;if(!X&&(H=O=r)&&G.lineStart(),r!==O&&(i=V(X,U),(!i||Mc(X,i)||Mc(U,i))&&(U[2]=1)),r!==O)q=0,r?(G.lineStart(),i=V(U,X),G.point(i[0],i[1])):(i=V(X,U),G.point(i[0],i[1],2),G.lineEnd()),X=i;else if(g&&X&&u^r){var o;!(e&P)&&(o=V(U,X,!0))&&(q=0,u?(G.lineStart(),G.point(o[0][0],o[0][1]),G.point(o[1][0],o[1][1]),G.lineEnd()):(G.point(o[1][0],o[1][1]),G.lineEnd(),G.lineStart(),G.point(o[0][0],o[0][1],3)))}r&&(!X||!Mc(X,U))&&G.point(U[0],U[1]),X=U,O=r,P=e},lineEnd:function(){O&&G.lineEnd(),X=null},clean:function(){return q|(H&&O)<<1}}}function V(G,X,P){var O=Uo(G),H=Uo(X),q=[1,0,0],B=ss(O,H),j=$l(B,B),U=B[0],i=j-U*U;if(!i)return!P&&G;var r=n*j/i,e=-n*U/i,o=ss(q,B),s=Xl(q,r),d=Xl(B,e);kd(s,d);var p=o,x=$l(s,p),l=$l(p,p),_=x*x-l*($l(s,s)-1);if(!(_<0)){var v=Cn(_),c=Xl(p,(-x-v)/l);if(kd(c,s),c=Eu(c),!P)return c;var h=G[0],f=X[0],m=G[1],b=X[1],w;f<h&&(w=h,h=f,f=w);var C=f-h,E=Vr(C-Wr)<vr,S=E||C<vr;if(!E&&b<m&&(w=m,m=b,b=w),S?E?m+b>0^c[1]<(Vr(c[0]-h)<vr?m:b):m<=c[1]&&c[1]<=b:C>Wr^(h<=c[0]&&c[0]<=f)){var M=Xl(p,(-x+v)/l);return kd(M,s),[c,Eu(M)]}}}function F(G,X){var P=u?t:Wr-t,O=0;return G<-P?O|=1:G>P&&(O|=2),X<-P?O|=4:X>P&&(O|=8),O}return Gd(T,k,y,u?[0,-t]:[-Wr,t-Wr])}function dC(t,n,a,u,g,y){var T=t[0],k=t[1],V=n[0],F=n[1],G=0,X=1,P=V-T,O=F-k,H;if(H=a-T,!(!P&&H>0)){if(H/=P,P<0){if(H<G)return;H<X&&(X=H)}else if(P>0){if(H>X)return;H>G&&(G=H)}if(H=g-T,!(!P&&H<0)){if(H/=P,P<0){if(H>X)return;H>G&&(G=H)}else if(P>0){if(H<G)return;H<X&&(X=H)}if(H=u-k,!(!O&&H>0)){if(H/=O,O<0){if(H<G)return;H<X&&(X=H)}else if(O>0){if(H>X)return;H>G&&(G=H)}if(H=y-k,!(!O&&H<0)){if(H/=O,O<0){if(H>X)return;H>G&&(G=H)}else if(O>0){if(H<G)return;H<X&&(X=H)}return G>0&&(t[0]=T+G*P,t[1]=k+G*O),X<1&&(n[0]=T+X*P,n[1]=k+X*O),!0}}}}}var tf=1e9,Wd=-tf;function ls(t,n,a,u){function g(F,G){return t<=F&&F<=a&&n<=G&&G<=u}function y(F,G,X,P){var O=0,H=0;if(F==null||(O=T(F,X))!==(H=T(G,X))||V(F,G)<0^X>0)do P.point(O===0||O===3?t:a,O>1?u:n);while((O=(O+X+4)%4)!==H);else P.point(G[0],G[1])}function T(F,G){return Vr(F[0]-t)<vr?G>0?0:3:Vr(F[0]-a)<vr?G>0?2:1:Vr(F[1]-n)<vr?G>0?1:0:G>0?3:2}function k(F,G){return V(F.x,G.x)}function V(F,G){var X=T(F,1),P=T(G,1);return X!==P?X-P:X===0?G[1]-F[1]:X===1?F[0]-G[0]:X===2?F[1]-G[1]:G[0]-F[0]}return function(F){var G=F,X=Bd(),P,O,H,q,B,j,U,i,r,e,o,s={point:d,lineStart:_,lineEnd:v,polygonStart:x,polygonEnd:l};function d(h,f){g(h,f)&&G.point(h,f)}function p(){for(var h=0,f=0,m=O.length;f<m;++f)for(var b=O[f],w=1,C=b.length,E=b[0],S,M,A=E[0],R=E[1];w<C;++w)S=A,M=R,E=b[w],A=E[0],R=E[1],M<=u?R>u&&(A-S)*(u-M)>(R-M)*(t-S)&&++h:R<=u&&(A-S)*(u-M)<(R-M)*(t-S)&&--h;return h}function x(){G=X,P=[],O=[],o=!0}function l(){var h=p(),f=o&&h,m=(P=iu(P)).length;(f||m)&&(F.polygonStart(),f&&(F.lineStart(),y(null,null,1,F),F.lineEnd()),m&&Hd(P,k,h,y,F),F.polygonEnd()),G=F,P=O=H=null}function _(){s.point=c,O&&O.push(H=[]),e=!0,r=!1,U=i=NaN}function v(){P&&(c(q,B),j&&r&&X.rejoin(),P.push(X.result())),s.point=d,r&&G.lineEnd()}function c(h,f){var m=g(h,f);if(O&&H.push([h,f]),e)q=h,B=f,j=m,e=!1,m&&(G.lineStart(),G.point(h,f));else if(m&&r)G.point(h,f);else{var b=[U=Math.max(Wd,Math.min(tf,U)),i=Math.max(Wd,Math.min(tf,i))],w=[h=Math.max(Wd,Math.min(tf,h)),f=Math.max(Wd,Math.min(tf,f))];dC(b,w,t,n,a,u)?(r||(G.lineStart(),G.point(b[0],b[1])),G.point(w[0],w[1]),m||G.lineEnd(),o=!1):m&&(G.lineStart(),G.point(h,f),o=!1)}U=h,i=f,r=m}return s}}function pC(){var t=0,n=0,a=960,u=500,g,y,T;return T={stream:function(k){return g&&y===k?g:g=ls(t,n,a,u)(y=k)},extent:function(k){return arguments.length?(t=+k[0][0],n=+k[0][1],a=+k[1][0],u=+k[1][1],g=y=null,T):[[t,n],[a,u]]}}}var Ng,Lg,jd,$d,Ac={sphere:An,point:An,lineStart:V8,lineEnd:An,polygonStart:An,polygonEnd:An};function V8(){Ac.point=z8,Ac.lineEnd=H8}function H8(){Ac.point=Ac.lineEnd=An}function z8(t,n){t*=wr,n*=wr,Lg=t,jd=rr(n),$d=cr(n),Ac.point=G8}function G8(t,n){t*=wr,n*=wr;var a=rr(n),u=cr(n),g=Vr(t-Lg),y=cr(g),T=rr(g),k=u*T,V=$d*a-jd*u*y,F=jd*a+$d*u*y;Ng.add(Un(Cn(k*k+V*V),F)),Lg=t,jd=a,$d=u}function Xd(t){return Ng=new Dn,Oi(t,Ac),+Ng}var Fg=[null,null],q8={type:"LineString",coordinates:Fg};function Rc(t,n){return Fg[0]=t,Fg[1]=n,Xd(q8)}var mC={Feature:function(t,n){return Yd(t.geometry,n)},FeatureCollection:function(t,n){for(var a=t.features,u=-1,g=a.length;++u<g;)if(Yd(a[u].geometry,n))return!0;return!1}},vC={Sphere:function(){return!0},Point:function(t,n){return gC(t.coordinates,n)},MultiPoint:function(t,n){for(var a=t.coordinates,u=-1,g=a.length;++u<g;)if(gC(a[u],n))return!0;return!1},LineString:function(t,n){return yC(t.coordinates,n)},MultiLineString:function(t,n){for(var a=t.coordinates,u=-1,g=a.length;++u<g;)if(yC(a[u],n))return!0;return!1},Polygon:function(t,n){return xC(t.coordinates,n)},MultiPolygon:function(t,n){for(var a=t.coordinates,u=-1,g=a.length;++u<g;)if(xC(a[u],n))return!0;return!1},GeometryCollection:function(t,n){for(var a=t.geometries,u=-1,g=a.length;++u<g;)if(Yd(a[u],n))return!0;return!1}};function Yd(t,n){return t&&vC.hasOwnProperty(t.type)?vC[t.type](t,n):!1}function gC(t,n){return Rc(t,n)===0}function yC(t,n){for(var a,u,g,y=0,T=t.length;y<T;y++){if(u=Rc(t[y],n),u===0||y>0&&(g=Rc(t[y],t[y-1]),g>0&&a<=g&&u<=g&&(a+u-g)*(1-Math.pow((a-u)/g,2))<as*g))return!0;a=u}return!1}function xC(t,n){return!!zd(t.map(W8),bC(n))}function W8(t){return t=t.map(bC),t.pop(),t}function bC(t){return[t[0]*wr,t[1]*wr]}function _C(t,n){return(t&&mC.hasOwnProperty(t.type)?mC[t.type]:Yd)(t,n)}function wC(t,n,a){var u=Do(t,n-vr,a).concat(n);return function(g){return u.map(function(y){return[g,y]})}}function CC(t,n,a){var u=Do(t,n-vr,a).concat(n);return function(g){return u.map(function(y){return[y,g]})}}function Zd(){var t,n,a,u,g,y,T,k,V=10,F=V,G=90,X=360,P,O,H,q,B=2.5;function j(){return{type:"MultiLineString",coordinates:U()}}function U(){return Do(Wl(u/G)*G,a,G).map(H).concat(Do(Wl(k/X)*X,T,X).map(q)).concat(Do(Wl(n/V)*V,t,V).filter(function(i){return Vr(i%G)>vr}).map(P)).concat(Do(Wl(y/F)*F,g,F).filter(function(i){return Vr(i%X)>vr}).map(O))}return j.lines=function(){return U().map(function(i){return{type:"LineString",coordinates:i}})},j.outline=function(){return{type:"Polygon",coordinates:[H(u).concat(q(T).slice(1),H(a).reverse().slice(1),q(k).reverse().slice(1))]}},j.extent=function(i){return arguments.length?j.extentMajor(i).extentMinor(i):j.extentMinor()},j.extentMajor=function(i){return arguments.length?(u=+i[0][0],a=+i[1][0],k=+i[0][1],T=+i[1][1],u>a&&(i=u,u=a,a=i),k>T&&(i=k,k=T,T=i),j.precision(B)):[[u,k],[a,T]]},j.extentMinor=function(i){return arguments.length?(n=+i[0][0],t=+i[1][0],y=+i[0][1],g=+i[1][1],n>t&&(i=n,n=t,t=i),y>g&&(i=y,y=g,g=i),j.precision(B)):[[n,y],[t,g]]},j.step=function(i){return arguments.length?j.stepMajor(i).stepMinor(i):j.stepMinor()},j.stepMajor=function(i){return arguments.length?(G=+i[0],X=+i[1],j):[G,X]},j.stepMinor=function(i){return arguments.length?(V=+i[0],F=+i[1],j):[V,F]},j.precision=function(i){return arguments.length?(B=+i,P=wC(y,g,90),O=CC(n,t,B),H=wC(k,T,90),q=CC(u,a,B),j):B},j.extentMajor([[-180,-90+vr],[180,90-vr]]).extentMinor([[-180,-80-vr],[180,80+vr]])}function SC(){return Zd()()}function EC(t,n){var a=t[0]*wr,u=t[1]*wr,g=n[0]*wr,y=n[1]*wr,T=cr(u),k=rr(u),V=cr(y),F=rr(y),G=T*cr(a),X=T*rr(a),P=V*cr(g),O=V*rr(g),H=2*Bn(Cn(wg(y-u)+T*V*wg(g-a))),q=rr(H),B=H?function(j){var U=rr(j*=H)/q,i=rr(H-j)/q,r=i*G+U*P,e=i*X+U*O,o=i*k+U*F;return[Un(e,r)*pn,Un(o,Cn(r*r+e*e))*pn]}:function(){return[a*pn,u*pn]};return B.distance=H,B}var zs=t=>t;var Ug=new Dn,Bg=new Dn,TC,MC,Vg,Hg,Gs={point:An,lineStart:An,lineEnd:An,polygonStart:function(){Gs.lineStart=j8,Gs.lineEnd=X8},polygonEnd:function(){Gs.lineStart=Gs.lineEnd=Gs.point=An,Ug.add(Vr(Bg)),Bg=new Dn},result:function(){var t=Ug/2;return Ug=new Dn,t}};function j8(){Gs.point=$8}function $8(t,n){Gs.point=AC,TC=Vg=t,MC=Hg=n}function AC(t,n){Bg.add(Hg*t-Vg*n),Vg=t,Hg=n}function X8(){AC(TC,MC)}var zg=Gs;var kc=1/0,Kd=kc,rf=-kc,Qd=rf,Y8={point:Z8,lineStart:An,lineEnd:An,polygonStart:An,polygonEnd:An,result:function(){var t=[[kc,Kd],[rf,Qd]];return rf=Qd=-(Kd=kc=1/0),t}};function Z8(t,n){t<kc&&(kc=t),t>rf&&(rf=t),n<Kd&&(Kd=n),n>Qd&&(Qd=n)}var Ic=Y8;var Gg=0,qg=0,nf=0,Jd=0,ep=0,Pc=0,Wg=0,jg=0,of=0,IC,PC,Ta,Ma,oa={point:Ru,lineStart:RC,lineEnd:kC,polygonStart:function(){oa.lineStart=J8,oa.lineEnd=eI},polygonEnd:function(){oa.point=Ru,oa.lineStart=RC,oa.lineEnd=kC},result:function(){var t=of?[Wg/of,jg/of]:Pc?[Jd/Pc,ep/Pc]:nf?[Gg/nf,qg/nf]:[NaN,NaN];return Gg=qg=nf=Jd=ep=Pc=Wg=jg=of=0,t}};function Ru(t,n){Gg+=t,qg+=n,++nf}function RC(){oa.point=K8}function K8(t,n){oa.point=Q8,Ru(Ta=t,Ma=n)}function Q8(t,n){var a=t-Ta,u=n-Ma,g=Cn(a*a+u*u);Jd+=g*(Ta+t)/2,ep+=g*(Ma+n)/2,Pc+=g,Ru(Ta=t,Ma=n)}function kC(){oa.point=Ru}function J8(){oa.point=tI}function eI(){DC(IC,PC)}function tI(t,n){oa.point=DC,Ru(IC=Ta=t,PC=Ma=n)}function DC(t,n){var a=t-Ta,u=n-Ma,g=Cn(a*a+u*u);Jd+=g*(Ta+t)/2,ep+=g*(Ma+n)/2,Pc+=g,g=Ma*t-Ta*n,Wg+=g*(Ta+t),jg+=g*(Ma+n),of+=g*3,Ru(Ta=t,Ma=n)}var $g=oa;function tp(t){this._context=t}tp.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:{this._context.moveTo(t,n),this._point=1;break}case 1:{this._context.lineTo(t,n);break}default:{this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,mi);break}}},result:An};var Yg=new Dn,Xg,OC,NC,af,sf,rp={point:An,lineStart:function(){rp.point=rI},lineEnd:function(){Xg&&LC(OC,NC),rp.point=An},polygonStart:function(){Xg=!0},polygonEnd:function(){Xg=null},result:function(){var t=+Yg;return Yg=new Dn,t}};function rI(t,n){rp.point=LC,OC=af=t,NC=sf=n}function LC(t,n){af-=t,sf-=n,Yg.add(Cn(af*af+sf*sf)),af=t,sf=n}var Zg=rp;var FC,np,UC,BC,Dc=class{constructor(n){this._append=n==null?VC:nI(n),this._radius=4.5,this._=""}pointRadius(n){return this._radius=+n,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(n,a){switch(this._point){case 0:{this._append`M${n},${a}`,this._point=1;break}case 1:{this._append`L${n},${a}`;break}default:{if(this._append`M${n},${a}`,this._radius!==UC||this._append!==np){let u=this._radius,g=this._;this._="",this._append`m0,${u}a${u},${u} 0 1,1 0,${-2*u}a${u},${u} 0 1,1 0,${2*u}z`,UC=u,np=this._append,BC=this._,this._=g}this._+=BC;break}}}result(){let n=this._;return this._="",n.length?n:null}};function VC(t){let n=1;this._+=t[0];for(let a=t.length;n<a;++n)this._+=arguments[n]+t[n]}function nI(t){let n=Math.floor(t);if(!(n>=0))throw new RangeError(`invalid digits: ${t}`);if(n>15)return VC;if(n!==FC){let a=10**n;FC=n,np=function(g){let y=1;this._+=g[0];for(let T=g.length;y<T;++y)this._+=Math.round(arguments[y]*a)/a+g[y]}}return np}function HC(t,n){let a=3,u=4.5,g,y;function T(k){return k&&(typeof u=="function"&&y.pointRadius(+u.apply(this,arguments)),Oi(k,g(y))),y.result()}return T.area=function(k){return Oi(k,g(zg)),zg.result()},T.measure=function(k){return Oi(k,g(Zg)),Zg.result()},T.bounds=function(k){return Oi(k,g(Ic)),Ic.result()},T.centroid=function(k){return Oi(k,g($g)),$g.result()},T.projection=function(k){return arguments.length?(g=k==null?(t=null,zs):(t=k).stream,T):t},T.context=function(k){return arguments.length?(y=k==null?(n=null,new Dc(a)):new tp(n=k),typeof u!="function"&&y.pointRadius(u),T):n},T.pointRadius=function(k){return arguments.length?(u=typeof k=="function"?k:(y.pointRadius(+k),+k),T):u},T.digits=function(k){if(!arguments.length)return a;if(k==null)a=null;else{let V=Math.floor(k);if(!(V>=0))throw new RangeError(`invalid digits: ${k}`);a=V}return n===null&&(y=new Dc(a)),T},T.projection(t).digits(a).context(n)}function zC(t){return{stream:qs(t)}}function qs(t){return function(n){var a=new Kg;for(var u in t)a[u]=t[u];return a.stream=n,a}}function Kg(){}Kg.prototype={constructor:Kg,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Qg(t,n,a){var u=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),u!=null&&t.clipExtent(null),Oi(a,t.stream(Ic)),n(Ic.result()),u!=null&&t.clipExtent(u),t}function ku(t,n,a){return Qg(t,function(u){var g=n[1][0]-n[0][0],y=n[1][1]-n[0][1],T=Math.min(g/(u[1][0]-u[0][0]),y/(u[1][1]-u[0][1])),k=+n[0][0]+(g-T*(u[1][0]+u[0][0]))/2,V=+n[0][1]+(y-T*(u[1][1]+u[0][1]))/2;t.scale(150*T).translate([k,V])},a)}function Oc(t,n,a){return ku(t,[[0,0],n],a)}function Nc(t,n,a){return Qg(t,function(u){var g=+n,y=g/(u[1][0]-u[0][0]),T=(g-y*(u[1][0]+u[0][0]))/2,k=-y*u[0][1];t.scale(150*y).translate([T,k])},a)}function Lc(t,n,a){return Qg(t,function(u){var g=+n,y=g/(u[1][1]-u[0][1]),T=-y*u[0][0],k=(g-y*(u[1][1]+u[0][1]))/2;t.scale(150*y).translate([T,k])},a)}var GC=16,iI=cr(30*wr);function Jg(t,n){return+n?aI(t,n):oI(t)}function oI(t){return qs({point:function(n,a){n=t(n,a),this.stream.point(n[0],n[1])}})}function aI(t,n){function a(u,g,y,T,k,V,F,G,X,P,O,H,q,B){var j=F-u,U=G-g,i=j*j+U*U;if(i>4*n&&q--){var r=T+P,e=k+O,o=V+H,s=Cn(r*r+e*e+o*o),d=Bn(o/=s),p=Vr(Vr(o)-1)<vr||Vr(y-X)<vr?(y+X)/2:Un(e,r),x=t(p,d),l=x[0],_=x[1],v=l-u,c=_-g,h=U*v-j*c;(h*h/i>n||Vr((j*v+U*c)/i-.5)>.3||T*P+k*O+V*H<iI)&&(a(u,g,y,T,k,V,l,_,p,r/=s,e/=s,o,q,B),B.point(l,_),a(l,_,p,r,e,o,F,G,X,P,O,H,q,B))}}return function(u){var g,y,T,k,V,F,G,X,P,O,H,q,B={point:j,lineStart:U,lineEnd:r,polygonStart:function(){u.polygonStart(),B.lineStart=e},polygonEnd:function(){u.polygonEnd(),B.lineStart=U}};function j(d,p){d=t(d,p),u.point(d[0],d[1])}function U(){X=NaN,B.point=i,u.lineStart()}function i(d,p){var x=Uo([d,p]),l=t(d,p);a(X,P,G,O,H,q,X=l[0],P=l[1],G=d,O=x[0],H=x[1],q=x[2],GC,u),u.point(X,P)}function r(){B.point=j,u.lineEnd()}function e(){U(),B.point=o,B.lineEnd=s}function o(d,p){i(g=d,p),y=X,T=P,k=O,V=H,F=q,B.point=i}function s(){a(X,P,G,O,H,q,y,T,g,k,V,F,GC,u),B.lineEnd=r,r()}return B}}var sI=qs({point:function(t,n){this.stream.point(t*wr,n*wr)}});function uI(t){return qs({point:function(n,a){var u=t(n,a);return this.stream.point(u[0],u[1])}})}function cI(t,n,a,u,g){function y(T,k){return T*=u,k*=g,[n+t*T,a-t*k]}return y.invert=function(T,k){return[(T-n)/t*u,(a-k)/t*g]},y}function qC(t,n,a,u,g,y){if(!y)return cI(t,n,a,u,g);var T=cr(y),k=rr(y),V=T*t,F=k*t,G=T/t,X=k/t,P=(k*a-T*n)/t,O=(k*n+T*a)/t;function H(q,B){return q*=u,B*=g,[V*q-F*B+n,a-F*q-V*B]}return H.invert=function(q,B){return[u*(G*q-X*B+P),g*(O-X*q-G*B)]},H}function vi(t){return uf(function(){return t})()}function uf(t){var n,a=150,u=480,g=250,y=0,T=0,k=0,V=0,F=0,G,X=0,P=1,O=1,H=null,q=ef,B=null,j,U,i,r=zs,e=.5,o,s,d,p,x;function l(h){return d(h[0]*wr,h[1]*wr)}function _(h){return h=d.invert(h[0],h[1]),h&&[h[0]*pn,h[1]*pn]}l.stream=function(h){return p&&x===h?p:p=sI(uI(G)(q(o(r(x=h)))))},l.preclip=function(h){return arguments.length?(q=h,H=void 0,c()):q},l.postclip=function(h){return arguments.length?(r=h,B=j=U=i=null,c()):r},l.clipAngle=function(h){return arguments.length?(q=+h?qd(H=h*wr):(H=null,ef),c()):H*pn},l.clipExtent=function(h){return arguments.length?(r=h==null?(B=j=U=i=null,zs):ls(B=+h[0][0],j=+h[0][1],U=+h[1][0],i=+h[1][1]),c()):B==null?null:[[B,j],[U,i]]},l.scale=function(h){return arguments.length?(a=+h,v()):a},l.translate=function(h){return arguments.length?(u=+h[0],g=+h[1],v()):[u,g]},l.center=function(h){return arguments.length?(y=h[0]%360*wr,T=h[1]%360*wr,v()):[y*pn,T*pn]},l.rotate=function(h){return arguments.length?(k=h[0]%360*wr,V=h[1]%360*wr,F=h.length>2?h[2]%360*wr:0,v()):[k*pn,V*pn,F*pn]},l.angle=function(h){return arguments.length?(X=h%360*wr,v()):X*pn},l.reflectX=function(h){return arguments.length?(P=h?-1:1,v()):P<0},l.reflectY=function(h){return arguments.length?(O=h?-1:1,v()):O<0},l.precision=function(h){return arguments.length?(o=Jg(s,e=h*h),c()):Cn(e)},l.fitExtent=function(h,f){return ku(l,h,f)},l.fitSize=function(h,f){return Oc(l,h,f)},l.fitWidth=function(h,f){return Nc(l,h,f)},l.fitHeight=function(h,f){return Lc(l,h,f)};function v(){var h=qC(a,0,0,P,O,X).apply(null,n(y,T)),f=qC(a,u-h[0],g-h[1],P,O,X);return G=Jl(k,V,F),s=Ql(n,f),d=Ql(G,s),o=Jg(s,e),c()}function c(){return p=x=null,l}return function(){return n=t.apply(this,arguments),l.invert=n.invert&&_,v()}}function Fc(t){var n=0,a=Wr/3,u=uf(t),g=u(n,a);return g.parallels=function(y){return arguments.length?u(n=y[0]*wr,a=y[1]*wr):[n*pn,a*pn]},g}function WC(t){var n=cr(t);function a(u,g){return[u*n,rr(g)/n]}return a.invert=function(u,g){return[u/n,Bn(g*n)]},a}function ey(t,n){var a=rr(t),u=(a+rr(n))/2;if(Vr(u)<vr)return WC(t);var g=1+a*(2*u-a),y=Cn(g)/u;function T(k,V){var F=Cn(g-2*u*rr(V))/u;return[F*rr(k*=u),y-F*cr(k)]}return T.invert=function(k,V){var F=y-V,G=Un(k,Vr(F))*Ki(F);return F*u<0&&(G-=Wr*Ki(k)*Ki(F)),[G/u,Bn((g-(k*k+F*F)*u*u)/(2*u))]},T}function Iu(){return Fc(ey).scale(155.424).center([0,33.6442])}function ip(){return Iu().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function lI(t){var n=t.length;return{point:function(a,u){for(var g=-1;++g<n;)t[g].point(a,u)},sphere:function(){for(var a=-1;++a<n;)t[a].sphere()},lineStart:function(){for(var a=-1;++a<n;)t[a].lineStart()},lineEnd:function(){for(var a=-1;++a<n;)t[a].lineEnd()},polygonStart:function(){for(var a=-1;++a<n;)t[a].polygonStart()},polygonEnd:function(){for(var a=-1;++a<n;)t[a].polygonEnd()}}}function jC(){var t,n,a=ip(),u,g=Iu().rotate([154,0]).center([-2,58.5]).parallels([55,65]),y,T=Iu().rotate([157,0]).center([-3,19.9]).parallels([8,18]),k,V,F={point:function(P,O){V=[P,O]}};function G(P){var O=P[0],H=P[1];return V=null,u.point(O,H),V||(y.point(O,H),V)||(k.point(O,H),V)}G.invert=function(P){var O=a.scale(),H=a.translate(),q=(P[0]-H[0])/O,B=(P[1]-H[1])/O;return(B>=.12&&B<.234&&q>=-.425&&q<-.214?g:B>=.166&&B<.234&&q>=-.214&&q<-.115?T:a).invert(P)},G.stream=function(P){return t&&n===P?t:t=lI([a.stream(n=P),g.stream(P),T.stream(P)])},G.precision=function(P){return arguments.length?(a.precision(P),g.precision(P),T.precision(P),X()):a.precision()},G.scale=function(P){return arguments.length?(a.scale(P),g.scale(P*.35),T.scale(P),G.translate(a.translate())):a.scale()},G.translate=function(P){if(!arguments.length)return a.translate();var O=a.scale(),H=+P[0],q=+P[1];return u=a.translate(P).clipExtent([[H-.455*O,q-.238*O],[H+.455*O,q+.238*O]]).stream(F),y=g.translate([H-.307*O,q+.201*O]).clipExtent([[H-.425*O+vr,q+.12*O+vr],[H-.214*O-vr,q+.234*O-vr]]).stream(F),k=T.translate([H-.205*O,q+.212*O]).clipExtent([[H-.214*O+vr,q+.166*O+vr],[H-.115*O-vr,q+.234*O-vr]]).stream(F),X()},G.fitExtent=function(P,O){return ku(G,P,O)},G.fitSize=function(P,O){return Oc(G,P,O)},G.fitWidth=function(P,O){return Nc(G,P,O)},G.fitHeight=function(P,O){return Lc(G,P,O)};function X(){return t=n=null,G}return G.scale(1070)}function op(t){return function(n,a){var u=cr(n),g=cr(a),y=t(u*g);return y===1/0?[2,0]:[y*g*rr(n),y*rr(a)]}}function Aa(t){return function(n,a){var u=Cn(n*n+a*a),g=t(u),y=rr(g),T=cr(g);return[Un(n*y,u*T),Bn(u&&a*y/u)]}}var ap=op(function(t){return Cn(2/(1+t))});ap.invert=Aa(function(t){return 2*Bn(t/2)});function $C(){return vi(ap).scale(124.75).clipAngle(180-.001)}var sp=op(function(t){return(t=Md(t))&&t/rr(t)});sp.invert=Aa(function(t){return t});function XC(){return vi(sp).scale(79.4188).clipAngle(180-.001)}function Pu(t,n){return[t,Su(Ec((Nn+n)/2))]}Pu.invert=function(t,n){return[t,2*Fo(Sd(n))-Nn]};function YC(){return ty(Pu).scale(961/mi)}function ty(t){var n=vi(t),a=n.center,u=n.scale,g=n.translate,y=n.clipExtent,T=null,k,V,F;n.scale=function(X){return arguments.length?(u(X),G()):u()},n.translate=function(X){return arguments.length?(g(X),G()):g()},n.center=function(X){return arguments.length?(a(X),G()):a()},n.clipExtent=function(X){return arguments.length?(X==null?T=k=V=F=null:(T=+X[0][0],k=+X[0][1],V=+X[1][0],F=+X[1][1]),G()):T==null?null:[[T,k],[V,F]]};function G(){var X=Wr*u(),P=n(Ud(n.rotate()).invert([0,0]));return y(T==null?[[P[0]-X,P[1]-X],[P[0]+X,P[1]+X]]:t===Pu?[[Math.max(P[0]-X,T),k],[Math.min(P[0]+X,V),F]]:[[T,Math.max(P[1]-X,k)],[V,Math.min(P[1]+X,F)]])}return G()}function up(t){return Ec((Nn+t)/2)}function ry(t,n){var a=cr(t),u=t===n?rr(t):Su(a/cr(n))/Su(up(n)/up(t)),g=a*Td(up(t),u)/u;if(!u)return Pu;function y(T,k){g>0?k<-Nn+vr&&(k=-Nn+vr):k>Nn-vr&&(k=Nn-vr);var V=g/Td(up(k),u);return[V*rr(u*T),g-V*cr(u*T)]}return y.invert=function(T,k){var V=g-k,F=Ki(u)*Cn(T*T+V*V),G=Un(T,Vr(V))*Ki(V);return V*u<0&&(G-=Wr*Ki(T)*Ki(V)),[G/u,2*Fo(Td(g/F,1/u))-Nn]},y}function ZC(){return Fc(ry).scale(109.5).parallels([30,30])}function Du(t,n){return[t,n]}Du.invert=Du;function KC(){return vi(Du).scale(152.63)}function ny(t,n){var a=cr(t),u=t===n?rr(t):(a-cr(n))/(n-t),g=a/u+t;if(Vr(u)<vr)return Du;function y(T,k){var V=g-k,F=u*T;return[V*rr(F),g-V*cr(F)]}return y.invert=function(T,k){var V=g-k,F=Un(T,Vr(V))*Ki(V);return V*u<0&&(F-=Wr*Ki(T)*Ki(V)),[F/u,g-Ki(u)*Cn(T*T+V*V)]},y}function QC(){return Fc(ny).scale(131.154).center([0,13.9389])}var cf=1.340264,lf=-.081106,ff=893e-6,hf=.003796,cp=Cn(3)/2,fI=12;function lp(t,n){var a=Bn(cp*rr(n)),u=a*a,g=u*u*u;return[t*cr(a)/(cp*(cf+3*lf*u+g*(7*ff+9*hf*u))),a*(cf+lf*u+g*(ff+hf*u))]}lp.invert=function(t,n){for(var a=n,u=a*a,g=u*u*u,y=0,T,k,V;y<fI&&(k=a*(cf+lf*u+g*(ff+hf*u))-n,V=cf+3*lf*u+g*(7*ff+9*hf*u),a-=T=k/V,u=a*a,g=u*u*u,!(Vr(T)<as));++y);return[cp*t*(cf+3*lf*u+g*(7*ff+9*hf*u))/cr(a),Bn(rr(a)/cp)]};function JC(){return vi(lp).scale(177.158)}function fp(t,n){var a=cr(n),u=cr(t)*a;return[a*rr(t)/u,rr(n)/u]}fp.invert=Aa(Fo);function eS(){return vi(fp).scale(144.049).clipAngle(60)}function tS(){var t=1,n=0,a=0,u=1,g=1,y=0,T,k,V=null,F,G,X,P=1,O=1,H=qs({point:function(r,e){var o=i([r,e]);this.stream.point(o[0],o[1])}}),q=zs,B,j;function U(){return P=t*u,O=t*g,B=j=null,i}function i(r){var e=r[0]*P,o=r[1]*O;if(y){var s=o*T-e*k;e=e*T+o*k,o=s}return[e+n,o+a]}return i.invert=function(r){var e=r[0]-n,o=r[1]-a;if(y){var s=o*T+e*k;e=e*T-o*k,o=s}return[e/P,o/O]},i.stream=function(r){return B&&j===r?B:B=H(q(j=r))},i.postclip=function(r){return arguments.length?(q=r,V=F=G=X=null,U()):q},i.clipExtent=function(r){return arguments.length?(q=r==null?(V=F=G=X=null,zs):ls(V=+r[0][0],F=+r[0][1],G=+r[1][0],X=+r[1][1]),U()):V==null?null:[[V,F],[G,X]]},i.scale=function(r){return arguments.length?(t=+r,U()):t},i.translate=function(r){return arguments.length?(n=+r[0],a=+r[1],U()):[n,a]},i.angle=function(r){return arguments.length?(y=r%360*wr,k=rr(y),T=cr(y),U()):y*pn},i.reflectX=function(r){return arguments.length?(u=r?-1:1,U()):u<0},i.reflectY=function(r){return arguments.length?(g=r?-1:1,U()):g<0},i.fitExtent=function(r,e){return ku(i,r,e)},i.fitSize=function(r,e){return Oc(i,r,e)},i.fitWidth=function(r,e){return Nc(i,r,e)},i.fitHeight=function(r,e){return Lc(i,r,e)},i}function hp(t,n){var a=n*n,u=a*a;return[t*(.8707-.131979*a+u*(-.013791+u*(.003971*a-.001529*u))),n*(1.007226+a*(.015085+u*(-.044475+.028874*a-.005916*u)))]}hp.invert=function(t,n){var a=n,u=25,g;do{var y=a*a,T=y*y;a-=g=(a*(1.007226+y*(.015085+T*(-.044475+.028874*y-.005916*T)))-n)/(1.007226+y*(.015085*3+T*(-.044475*7+.028874*9*y-.005916*11*T)))}while(Vr(g)>vr&&--u>0);return[t/(.8707+(y=a*a)*(-.131979+y*(-.013791+y*y*y*(.003971-.001529*y)))),a]};function rS(){return vi(hp).scale(175.295)}function dp(t,n){return[cr(n)*rr(t),rr(n)]}dp.invert=Aa(Bn);function nS(){return vi(dp).scale(249.5).clipAngle(90+vr)}function pp(t,n){var a=cr(n),u=1+cr(t)*a;return[a*rr(t)/u,rr(n)/u]}pp.invert=Aa(function(t){return 2*Fo(t)});function iS(){return vi(pp).scale(250).clipAngle(142)}function mp(t,n){return[Su(Ec((Nn+n)/2)),-t]}mp.invert=function(t,n){return[-n,2*Fo(Sd(t))-Nn]};function oS(){var t=ty(mp),n=t.center,a=t.rotate;return t.center=function(u){return arguments.length?n([-u[1],u[0]]):(u=n(),[u[1],-u[0]])},t.rotate=function(u){return arguments.length?a([u[0],u[1],u.length>2?u[2]+90:90]):(u=a(),[u[0],u[1],u[2]-90])},a([0,0,90]).scale(159.155)}function hI(t,n){return t.parent===n.parent?1:2}function dI(t){return t.reduce(pI,0)/t.length}function pI(t,n){return t+n.x}function mI(t){return 1+t.reduce(vI,0)}function vI(t,n){return Math.max(t,n.y)}function gI(t){for(var n;n=t.children;)t=n[0];return t}function yI(t){for(var n;n=t.children;)t=n[n.length-1];return t}function aS(){var t=hI,n=1,a=1,u=!1;function g(y){var T,k=0;y.eachAfter(function(P){var O=P.children;O?(P.x=dI(O),P.y=mI(O)):(P.x=T?k+=t(P,T):0,P.y=0,T=P)});var V=gI(y),F=yI(y),G=V.x-t(V,F)/2,X=F.x+t(F,V)/2;return y.eachAfter(u?function(P){P.x=(P.x-y.x)*n,P.y=(y.y-P.y)*a}:function(P){P.x=(P.x-G)/(X-G)*n,P.y=(1-(y.y?P.y/y.y:1))*a})}return g.separation=function(y){return arguments.length?(t=y,g):t},g.size=function(y){return arguments.length?(u=!1,n=+y[0],a=+y[1],g):u?null:[n,a]},g.nodeSize=function(y){return arguments.length?(u=!0,n=+y[0],a=+y[1],g):u?[n,a]:null},g}function xI(t){var n=0,a=t.children,u=a&&a.length;if(!u)n=1;else for(;--u>=0;)n+=a[u].value;t.value=n}function sS(){return this.eachAfter(xI)}function uS(t,n){let a=-1;for(let u of this)t.call(n,u,++a,this);return this}function cS(t,n){for(var a=this,u=[a],g,y,T=-1;a=u.pop();)if(t.call(n,a,++T,this),g=a.children)for(y=g.length-1;y>=0;--y)u.push(g[y]);return this}function lS(t,n){for(var a=this,u=[a],g=[],y,T,k,V=-1;a=u.pop();)if(g.push(a),y=a.children)for(T=0,k=y.length;T<k;++T)u.push(y[T]);for(;a=g.pop();)t.call(n,a,++V,this);return this}function fS(t,n){let a=-1;for(let u of this)if(t.call(n,u,++a,this))return u}function hS(t){return this.eachAfter(function(n){for(var a=+t(n.data)||0,u=n.children,g=u&&u.length;--g>=0;)a+=u[g].value;n.value=a})}function dS(t){return this.eachBefore(function(n){n.children&&n.children.sort(t)})}function pS(t){for(var n=this,a=bI(n,t),u=[n];n!==a;)n=n.parent,u.push(n);for(var g=u.length;t!==a;)u.splice(g,0,t),t=t.parent;return u}function bI(t,n){if(t===n)return t;var a=t.ancestors(),u=n.ancestors(),g=null;for(t=a.pop(),n=u.pop();t===n;)g=t,t=a.pop(),n=u.pop();return g}function mS(){for(var t=this,n=[t];t=t.parent;)n.push(t);return n}function vS(){return Array.from(this)}function gS(){var t=[];return this.eachBefore(function(n){n.children||t.push(n)}),t}function yS(){var t=this,n=[];return t.each(function(a){a!==t&&n.push({source:a.parent,target:a})}),n}function*xS(){var t=this,n,a=[t],u,g,y;do for(n=a.reverse(),a=[];t=n.pop();)if(yield t,u=t.children)for(g=0,y=u.length;g<y;++g)a.push(u[g]);while(a.length)}function df(t,n){t instanceof Map?(t=[void 0,t],n===void 0&&(n=CI)):n===void 0&&(n=wI);for(var a=new Ra(t),u,g=[a],y,T,k,V;u=g.pop();)if((T=n(u.data))&&(V=(T=Array.from(T)).length))for(u.children=T,k=V-1;k>=0;--k)g.push(y=T[k]=new Ra(T[k])),y.parent=u,y.depth=u.depth+1;return a.eachBefore(iy)}function _I(){return df(this).eachBefore(SI)}function wI(t){return t.children}function CI(t){return Array.isArray(t)?t[1]:null}function SI(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function iy(t){var n=0;do t.height=n;while((t=t.parent)&&t.height<++n)}function Ra(t){this.data=t,this.depth=this.height=0,this.parent=null}Ra.prototype=df.prototype={constructor:Ra,count:sS,each:uS,eachAfter:lS,eachBefore:cS,find:fS,sum:hS,sort:dS,path:pS,ancestors:mS,descendants:vS,leaves:gS,links:yS,copy:_I,[Symbol.iterator]:xS};function Uc(t){return t==null?null:oy(t)}function oy(t){if(typeof t!="function")throw new Error;return t}function fs(){return 0}function Ws(t){return function(){return t}}function Bc(){let t=1;return()=>(t=(1664525*t+1013904223)%4294967296)/4294967296}function bS(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function _S(t,n){let a=t.length,u,g;for(;a;)g=n()*a--|0,u=t[a],t[a]=t[g],t[g]=u;return t}function wS(t){return sy(t,Bc())}function sy(t,n){for(var a=0,u=(t=_S(Array.from(t),n)).length,g=[],y,T;a<u;)y=t[a],T&&CS(T,y)?++a:(T=TI(g=EI(g,y)),a=0);return T}function EI(t,n){var a,u;if(ay(n,t))return[n];for(a=0;a<t.length;++a)if(vp(n,t[a])&&ay(pf(t[a],n),t))return[t[a],n];for(a=0;a<t.length-1;++a)for(u=a+1;u<t.length;++u)if(vp(pf(t[a],t[u]),n)&&vp(pf(t[a],n),t[u])&&vp(pf(t[u],n),t[a])&&ay(SS(t[a],t[u],n),t))return[t[a],t[u],n];throw new Error}function vp(t,n){var a=t.r-n.r,u=n.x-t.x,g=n.y-t.y;return a<0||a*a<u*u+g*g}function CS(t,n){var a=t.r-n.r+Math.max(t.r,n.r,1)*1e-9,u=n.x-t.x,g=n.y-t.y;return a>0&&a*a>u*u+g*g}function ay(t,n){for(var a=0;a<n.length;++a)if(!CS(t,n[a]))return!1;return!0}function TI(t){switch(t.length){case 1:return MI(t[0]);case 2:return pf(t[0],t[1]);case 3:return SS(t[0],t[1],t[2])}}function MI(t){return{x:t.x,y:t.y,r:t.r}}function pf(t,n){var a=t.x,u=t.y,g=t.r,y=n.x,T=n.y,k=n.r,V=y-a,F=T-u,G=k-g,X=Math.sqrt(V*V+F*F);return{x:(a+y+V/X*G)/2,y:(u+T+F/X*G)/2,r:(X+g+k)/2}}function SS(t,n,a){var u=t.x,g=t.y,y=t.r,T=n.x,k=n.y,V=n.r,F=a.x,G=a.y,X=a.r,P=u-T,O=u-F,H=g-k,q=g-G,B=V-y,j=X-y,U=u*u+g*g-y*y,i=U-T*T-k*k+V*V,r=U-F*F-G*G+X*X,e=O*H-P*q,o=(H*r-q*i)/(e*2)-u,s=(q*B-H*j)/e,d=(O*i-P*r)/(e*2)-g,p=(P*j-O*B)/e,x=s*s+p*p-1,l=2*(y+o*s+d*p),_=o*o+d*d-y*y,v=-(Math.abs(x)>1e-6?(l+Math.sqrt(l*l-4*x*_))/(2*x):_/l);return{x:u+o+s*v,y:g+d+p*v,r:v}}function ES(t,n,a){var u=t.x-n.x,g,y,T=t.y-n.y,k,V,F=u*u+T*T;F?(y=n.r+a.r,y*=y,V=t.r+a.r,V*=V,y>V?(g=(F+V-y)/(2*F),k=Math.sqrt(Math.max(0,V/F-g*g)),a.x=t.x-g*u-k*T,a.y=t.y-g*T+k*u):(g=(F+y-V)/(2*F),k=Math.sqrt(Math.max(0,y/F-g*g)),a.x=n.x+g*u-k*T,a.y=n.y+g*T+k*u)):(a.x=n.x+a.r,a.y=n.y)}function TS(t,n){var a=t.r+n.r-1e-6,u=n.x-t.x,g=n.y-t.y;return a>0&&a*a>u*u+g*g}function MS(t){var n=t._,a=t.next._,u=n.r+a.r,g=(n.x*a.r+a.x*n.r)/u,y=(n.y*a.r+a.y*n.r)/u;return g*g+y*y}function gp(t){this._=t,this.next=null,this.previous=null}function uy(t,n){if(!(y=(t=bS(t)).length))return 0;var a,u,g,y,T,k,V,F,G,X,P;if(a=t[0],a.x=0,a.y=0,!(y>1))return a.r;if(u=t[1],a.x=-u.r,u.x=a.r,u.y=0,!(y>2))return a.r+u.r;ES(u,a,g=t[2]),a=new gp(a),u=new gp(u),g=new gp(g),a.next=g.previous=u,u.next=a.previous=g,g.next=u.previous=a;e:for(V=3;V<y;++V){ES(a._,u._,g=t[V]),g=new gp(g),F=u.next,G=a.previous,X=u._.r,P=a._.r;do if(X<=P){if(TS(F._,g._)){u=F,a.next=u,u.previous=a,--V;continue e}X+=F._.r,F=F.next}else{if(TS(G._,g._)){a=G,a.next=u,u.previous=a,--V;continue e}P+=G._.r,G=G.previous}while(F!==G.next);for(g.previous=a,g.next=u,a.next=u.previous=u=g,T=MS(a);(g=g.next)!==u;)(k=MS(g))<T&&(a=g,T=k);u=a.next}for(a=[u._],g=u;(g=g.next)!==u;)a.push(g._);for(g=sy(a,n),V=0;V<y;++V)a=t[V],a.x-=g.x,a.y-=g.y;return g.r}function AS(t){return uy(t,Bc()),t}function AI(t){return Math.sqrt(t.value)}function IS(){var t=null,n=1,a=1,u=fs;function g(y){let T=Bc();return y.x=n/2,y.y=a/2,t?y.eachBefore(RS(t)).eachAfter(cy(u,.5,T)).eachBefore(kS(1)):y.eachBefore(RS(AI)).eachAfter(cy(fs,1,T)).eachAfter(cy(u,y.r/Math.min(n,a),T)).eachBefore(kS(Math.min(n,a)/(2*y.r))),y}return g.radius=function(y){return arguments.length?(t=Uc(y),g):t},g.size=function(y){return arguments.length?(n=+y[0],a=+y[1],g):[n,a]},g.padding=function(y){return arguments.length?(u=typeof y=="function"?y:Ws(+y),g):u},g}function RS(t){return function(n){n.children||(n.r=Math.max(0,+t(n)||0))}}function cy(t,n,a){return function(u){if(g=u.children){var g,y,T=g.length,k=t(u)*n||0,V;if(k)for(y=0;y<T;++y)g[y].r+=k;if(V=uy(g,a),k)for(y=0;y<T;++y)g[y].r-=k;u.r=V+k}}}function kS(t){return function(n){var a=n.parent;n.r*=t,a&&(n.x=a.x+t*n.x,n.y=a.y+t*n.y)}}function yp(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function ka(t,n,a,u,g){for(var y=t.children,T,k=-1,V=y.length,F=t.value&&(u-n)/t.value;++k<V;)T=y[k],T.y0=a,T.y1=g,T.x0=n,T.x1=n+=T.value*F}function PS(){var t=1,n=1,a=0,u=!1;function g(T){var k=T.height+1;return T.x0=T.y0=a,T.x1=t,T.y1=n/k,T.eachBefore(y(n,k)),u&&T.eachBefore(yp),T}function y(T,k){return function(V){V.children&&ka(V,V.x0,T*(V.depth+1)/k,V.x1,T*(V.depth+2)/k);var F=V.x0,G=V.y0,X=V.x1-a,P=V.y1-a;X<F&&(F=X=(F+X)/2),P<G&&(G=P=(G+P)/2),V.x0=F,V.y0=G,V.x1=X,V.y1=P}}return g.round=function(T){return arguments.length?(u=!!T,g):u},g.size=function(T){return arguments.length?(t=+T[0],n=+T[1],g):[t,n]},g.padding=function(T){return arguments.length?(a=+T,g):a},g}var RI={depth:-1},DS={},ly={};function kI(t){return t.id}function II(t){return t.parentId}function NS(){var t=kI,n=II,a;function u(g){var y=Array.from(g),T=t,k=n,V,F,G,X,P,O,H,q,B=new Map;if(a!=null){let j=y.map((r,e)=>PI(a(r,e,g))),U=j.map(OS),i=new Set(j).add("");for(let r of U)i.has(r)||(i.add(r),j.push(r),U.push(OS(r)),y.push(ly));T=(r,e)=>j[e],k=(r,e)=>U[e]}for(G=0,V=y.length;G<V;++G)F=y[G],O=y[G]=new Ra(F),(H=T(F,G,g))!=null&&(H+="")&&(q=O.id=H,B.set(q,B.has(q)?DS:O)),(H=k(F,G,g))!=null&&(H+="")&&(O.parent=H);for(G=0;G<V;++G)if(O=y[G],H=O.parent){if(P=B.get(H),!P)throw new Error("missing: "+H);if(P===DS)throw new Error("ambiguous: "+H);P.children?P.children.push(O):P.children=[O],O.parent=P}else{if(X)throw new Error("multiple roots");X=O}if(!X)throw new Error("no root");if(a!=null){for(;X.data===ly&&X.children.length===1;)X=X.children[0],--V;for(let j=y.length-1;j>=0&&(O=y[j],O.data===ly);--j)O.data=null}if(X.parent=RI,X.eachBefore(function(j){j.depth=j.parent.depth+1,--V}).eachBefore(iy),X.parent=null,V>0)throw new Error("cycle");return X}return u.id=function(g){return arguments.length?(t=Uc(g),u):t},u.parentId=function(g){return arguments.length?(n=Uc(g),u):n},u.path=function(g){return arguments.length?(a=Uc(g),u):a},u}function PI(t){t=`${t}`;let n=t.length;return fy(t,n-1)&&!fy(t,n-2)&&(t=t.slice(0,-1)),t[0]==="/"?t:`/${t}`}function OS(t){let n=t.length;if(n<2)return"";for(;--n>1&&!fy(t,n););return t.slice(0,n)}function fy(t,n){if(t[n]==="/"){let a=0;for(;n>0&&t[--n]==="\\";)++a;if(!(a&1))return!0}return!1}function DI(t,n){return t.parent===n.parent?1:2}function hy(t){var n=t.children;return n?n[0]:t.t}function dy(t){var n=t.children;return n?n[n.length-1]:t.t}function OI(t,n,a){var u=a/(n.i-t.i);n.c-=u,n.s+=a,t.c+=u,n.z+=a,n.m+=a}function NI(t){for(var n=0,a=0,u=t.children,g=u.length,y;--g>=0;)y=u[g],y.z+=n,y.m+=n,n+=y.s+(a+=y.c)}function LI(t,n,a){return t.a.parent===n.parent?t.a:a}function xp(t,n){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=n}xp.prototype=Object.create(Ra.prototype);function FI(t){for(var n=new xp(t,0),a,u=[n],g,y,T,k;a=u.pop();)if(y=a._.children)for(a.children=new Array(k=y.length),T=k-1;T>=0;--T)u.push(g=a.children[T]=new xp(y[T],T)),g.parent=a;return(n.parent=new xp(null,0)).children=[n],n}function LS(){var t=DI,n=1,a=1,u=null;function g(F){var G=FI(F);if(G.eachAfter(y),G.parent.m=-G.z,G.eachBefore(T),u)F.eachBefore(V);else{var X=F,P=F,O=F;F.eachBefore(function(U){U.x<X.x&&(X=U),U.x>P.x&&(P=U),U.depth>O.depth&&(O=U)});var H=X===P?1:t(X,P)/2,q=H-X.x,B=n/(P.x+H+q),j=a/(O.depth||1);F.eachBefore(function(U){U.x=(U.x+q)*B,U.y=U.depth*j})}return F}function y(F){var G=F.children,X=F.parent.children,P=F.i?X[F.i-1]:null;if(G){NI(F);var O=(G[0].z+G[G.length-1].z)/2;P?(F.z=P.z+t(F._,P._),F.m=F.z-O):F.z=O}else P&&(F.z=P.z+t(F._,P._));F.parent.A=k(F,P,F.parent.A||X[0])}function T(F){F._.x=F.z+F.parent.m,F.m+=F.parent.m}function k(F,G,X){if(G){for(var P=F,O=F,H=G,q=P.parent.children[0],B=P.m,j=O.m,U=H.m,i=q.m,r;H=dy(H),P=hy(P),H&&P;)q=hy(q),O=dy(O),O.a=F,r=H.z+U-P.z-B+t(H._,P._),r>0&&(OI(LI(H,F,X),F,r),B+=r,j+=r),U+=H.m,B+=P.m,i+=q.m,j+=O.m;H&&!dy(O)&&(O.t=H,O.m+=U-j),P&&!hy(q)&&(q.t=P,q.m+=B-i,X=F)}return X}function V(F){F.x*=n,F.y=F.depth*a}return g.separation=function(F){return arguments.length?(t=F,g):t},g.size=function(F){return arguments.length?(u=!1,n=+F[0],a=+F[1],g):u?null:[n,a]},g.nodeSize=function(F){return arguments.length?(u=!0,n=+F[0],a=+F[1],g):u?[n,a]:null},g}function js(t,n,a,u,g){for(var y=t.children,T,k=-1,V=y.length,F=t.value&&(g-a)/t.value;++k<V;)T=y[k],T.x0=n,T.x1=u,T.y0=a,T.y1=a+=T.value*F}var py=(1+Math.sqrt(5))/2;function my(t,n,a,u,g,y){for(var T=[],k=n.children,V,F,G=0,X=0,P=k.length,O,H,q=n.value,B,j,U,i,r,e,o;G<P;){O=g-a,H=y-u;do B=k[X++].value;while(!B&&X<P);for(j=U=B,e=Math.max(H/O,O/H)/(q*t),o=B*B*e,r=Math.max(U/o,o/j);X<P;++X){if(B+=F=k[X].value,F<j&&(j=F),F>U&&(U=F),o=B*B*e,i=Math.max(U/o,o/j),i>r){B-=F;break}r=i}T.push(V={value:B,dice:O<H,children:k.slice(G,X)}),V.dice?ka(V,a,u,g,q?u+=H*B/q:y):js(V,a,u,q?a+=O*B/q:g,y),q-=B,G=X}return T}var bp=function t(n){function a(u,g,y,T,k){my(n,u,g,y,T,k)}return a.ratio=function(u){return t((u=+u)>1?u:1)},a}(py);function FS(){var t=bp,n=!1,a=1,u=1,g=[0],y=fs,T=fs,k=fs,V=fs,F=fs;function G(P){return P.x0=P.y0=0,P.x1=a,P.y1=u,P.eachBefore(X),g=[0],n&&P.eachBefore(yp),P}function X(P){var O=g[P.depth],H=P.x0+O,q=P.y0+O,B=P.x1-O,j=P.y1-O;B<H&&(H=B=(H+B)/2),j<q&&(q=j=(q+j)/2),P.x0=H,P.y0=q,P.x1=B,P.y1=j,P.children&&(O=g[P.depth+1]=y(P)/2,H+=F(P)-O,q+=T(P)-O,B-=k(P)-O,j-=V(P)-O,B<H&&(H=B=(H+B)/2),j<q&&(q=j=(q+j)/2),t(P,H,q,B,j))}return G.round=function(P){return arguments.length?(n=!!P,G):n},G.size=function(P){return arguments.length?(a=+P[0],u=+P[1],G):[a,u]},G.tile=function(P){return arguments.length?(t=oy(P),G):t},G.padding=function(P){return arguments.length?G.paddingInner(P).paddingOuter(P):G.paddingInner()},G.paddingInner=function(P){return arguments.length?(y=typeof P=="function"?P:Ws(+P),G):y},G.paddingOuter=function(P){return arguments.length?G.paddingTop(P).paddingRight(P).paddingBottom(P).paddingLeft(P):G.paddingTop()},G.paddingTop=function(P){return arguments.length?(T=typeof P=="function"?P:Ws(+P),G):T},G.paddingRight=function(P){return arguments.length?(k=typeof P=="function"?P:Ws(+P),G):k},G.paddingBottom=function(P){return arguments.length?(V=typeof P=="function"?P:Ws(+P),G):V},G.paddingLeft=function(P){return arguments.length?(F=typeof P=="function"?P:Ws(+P),G):F},G}function US(t,n,a,u,g){var y=t.children,T,k=y.length,V,F=new Array(k+1);for(F[0]=V=T=0;T<k;++T)F[T+1]=V+=y[T].value;G(0,k,t.value,n,a,u,g);function G(X,P,O,H,q,B,j){if(X>=P-1){var U=y[X];U.x0=H,U.y0=q,U.x1=B,U.y1=j;return}for(var i=F[X],r=O/2+i,e=X+1,o=P-1;e<o;){var s=e+o>>>1;F[s]<r?e=s+1:o=s}r-F[e-1]<F[e]-r&&X+1<e&&--e;var d=F[e]-i,p=O-d;if(B-H>j-q){var x=O?(H*p+B*d)/O:B;G(X,e,d,H,q,x,j),G(e,P,p,x,q,B,j)}else{var l=O?(q*p+j*d)/O:j;G(X,e,d,H,q,B,l),G(e,P,p,H,l,B,j)}}}function BS(t,n,a,u,g){(t.depth&1?js:ka)(t,n,a,u,g)}var VS=function t(n){function a(u,g,y,T,k){if((V=u._squarify)&&V.ratio===n)for(var V,F,G,X,P=-1,O,H=V.length,q=u.value;++P<H;){for(F=V[P],G=F.children,X=F.value=0,O=G.length;X<O;++X)F.value+=G[X].value;F.dice?ka(F,g,y,T,q?y+=(k-y)*F.value/q:k):js(F,g,y,q?g+=(T-g)*F.value/q:T,k),q-=F.value}else u._squarify=V=my(n,u,g,y,T,k),V.ratio=n}return a.ratio=function(u){return t((u=+u)>1?u:1)},a}(py);function HS(t){for(var n=-1,a=t.length,u,g=t[a-1],y=0;++n<a;)u=g,g=t[n],y+=u[1]*g[0]-u[0]*g[1];return y/2}function zS(t){for(var n=-1,a=t.length,u=0,g=0,y,T=t[a-1],k,V=0;++n<a;)y=T,T=t[n],V+=k=y[0]*T[1]-T[0]*y[1],u+=(y[0]+T[0])*k,g+=(y[1]+T[1])*k;return V*=3,[u/V,g/V]}function GS(t,n,a){return(n[0]-t[0])*(a[1]-t[1])-(n[1]-t[1])*(a[0]-t[0])}function UI(t,n){return t[0]-n[0]||t[1]-n[1]}function qS(t){let n=t.length,a=[0,1],u=2,g;for(g=2;g<n;++g){for(;u>1&&GS(t[a[u-2]],t[a[u-1]],t[g])<=0;)--u;a[u++]=g}return a.slice(0,u)}function _p(t){if((a=t.length)<3)return null;var n,a,u=new Array(a),g=new Array(a);for(n=0;n<a;++n)u[n]=[+t[n][0],+t[n][1],n];for(u.sort(UI),n=0;n<a;++n)g[n]=[u[n][0],-u[n][1]];var y=qS(u),T=qS(g),k=T[0]===y[0],V=T[T.length-1]===y[y.length-1],F=[];for(n=y.length-1;n>=0;--n)F.push(t[u[y[n]][2]]);for(n=+k;n<T.length-V;++n)F.push(t[u[T[n]][2]]);return F}function WS(t,n){for(var a=t.length,u=t[a-1],g=n[0],y=n[1],T=u[0],k=u[1],V,F,G=!1,X=0;X<a;++X)u=t[X],V=u[0],F=u[1],F>y!=k>y&&g<(T-V)*(y-F)/(k-F)+V&&(G=!G),T=V,k=F;return G}function jS(t){for(var n=-1,a=t.length,u=t[a-1],g,y,T=u[0],k=u[1],V=0;++n<a;)g=T,y=k,u=t[n],T=u[0],k=u[1],g-=T,y-=k,V+=Math.hypot(g,y);return V}var yn=Math.random;var $S=function t(n){function a(u,g){return u=u==null?0:+u,g=g==null?1:+g,arguments.length===1?(g=u,u=0):g-=u,function(){return n()*g+u}}return a.source=t,a}(yn);var XS=function t(n){function a(u,g){return arguments.length<2&&(g=u,u=0),u=Math.floor(u),g=Math.floor(g)-u,function(){return Math.floor(n()*g+u)}}return a.source=t,a}(yn);var Vc=function t(n){function a(u,g){var y,T;return u=u==null?0:+u,g=g==null?1:+g,function(){var k;if(y!=null)k=y,y=null;else do y=n()*2-1,k=n()*2-1,T=y*y+k*k;while(!T||T>1);return u+g*k*Math.sqrt(-2*Math.log(T)/T)}}return a.source=t,a}(yn);var YS=function t(n){var a=Vc.source(n);function u(){var g=a.apply(this,arguments);return function(){return Math.exp(g())}}return u.source=t,u}(yn);var wp=function t(n){function a(u){return(u=+u)<=0?()=>0:function(){for(var g=0,y=u;y>1;--y)g+=n();return g+y*n()}}return a.source=t,a}(yn);var ZS=function t(n){var a=wp.source(n);function u(g){if((g=+g)==0)return n;var y=a(g);return function(){return y()/g}}return u.source=t,u}(yn);var KS=function t(n){function a(u){return function(){return-Math.log1p(-n())/u}}return a.source=t,a}(yn);var QS=function t(n){function a(u){if((u=+u)<0)throw new RangeError("invalid alpha");return u=1/-u,function(){return Math.pow(1-n(),u)}}return a.source=t,a}(yn);var JS=function t(n){function a(u){if((u=+u)<0||u>1)throw new RangeError("invalid p");return function(){return Math.floor(n()+u)}}return a.source=t,a}(yn);var Cp=function t(n){function a(u){if((u=+u)<0||u>1)throw new RangeError("invalid p");return u===0?()=>1/0:u===1?()=>1:(u=Math.log1p(-u),function(){return 1+Math.floor(Math.log1p(-n())/u)})}return a.source=t,a}(yn);var Hc=function t(n){var a=Vc.source(n)();function u(g,y){if((g=+g)<0)throw new RangeError("invalid k");if(g===0)return()=>0;if(y=y==null?1:+y,g===1)return()=>-Math.log1p(-n())*y;var T=(g<1?g+1:g)-1/3,k=1/(3*Math.sqrt(T)),V=g<1?()=>Math.pow(n(),1/g):()=>1;return function(){do{do var F=a(),G=1+k*F;while(G<=0);G*=G*G;var X=1-n()}while(X>=1-.0331*F*F*F*F&&Math.log(X)>=.5*F*F+T*(1-G+Math.log(G)));return T*G*V()*y}}return u.source=t,u}(yn);var Sp=function t(n){var a=Hc.source(n);function u(g,y){var T=a(g),k=a(y);return function(){var V=T();return V===0?0:V/(V+k())}}return u.source=t,u}(yn);var Ep=function t(n){var a=Cp.source(n),u=Sp.source(n);function g(y,T){return y=+y,(T=+T)>=1?()=>y:T<=0?()=>0:function(){for(var k=0,V=y,F=T;V*F>16&&V*(1-F)>16;){var G=Math.floor((V+1)*F),X=u(G,V-G+1)();X<=F?(k+=G,V-=G,F=(F-X)/(1-X)):(V=G-1,F/=X)}for(var P=F<.5,O=P?F:1-F,H=a(O),q=H(),B=0;q<=V;++B)q+=H();return k+(P?B:V-B)}}return g.source=t,g}(yn);var eE=function t(n){function a(u,g,y){var T;return(u=+u)==0?T=k=>-Math.log(k):(u=1/u,T=k=>Math.pow(k,u)),g=g==null?0:+g,y=y==null?1:+y,function(){return g+y*T(-Math.log1p(-n()))}}return a.source=t,a}(yn);var tE=function t(n){function a(u,g){return u=u==null?0:+u,g=g==null?1:+g,function(){return u+g*Math.tan(Math.PI*n())}}return a.source=t,a}(yn);var rE=function t(n){function a(u,g){return u=u==null?0:+u,g=g==null?1:+g,function(){var y=n();return u+g*Math.log(y/(1-y))}}return a.source=t,a}(yn);var nE=function t(n){var a=Hc.source(n),u=Ep.source(n);function g(y){return function(){for(var T=0,k=y;k>16;){var V=Math.floor(.875*k),F=a(V)();if(F>k)return T+u(V-1,k/F)();T+=V,k-=F}for(var G=-Math.log1p(-n()),X=0;G<=k;++X)G-=Math.log1p(-n());return T+X}}return g.source=t,g}(yn);var iE=23283064365386963e-26;function vy(t=Math.random()){let n=(0<=t&&t<1?t/iE:Math.abs(t))|0;return()=>(n=1664525*n+1013904223|0,iE*(n>>>0))}function ti(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t);break}return this}function Bo(t,n){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof n=="function"?this.interpolator(n):this.range(n);break}}return this}var Tp=Symbol("implicit");function aa(){var t=new Zo,n=[],a=[],u=Tp;function g(y){let T=t.get(y);if(T===void 0){if(u!==Tp)return u;t.set(y,T=n.push(y)-1)}return a[T%a.length]}return g.domain=function(y){if(!arguments.length)return n.slice();n=[],t=new Zo;for(let T of y)t.has(T)||t.set(T,n.push(T)-1);return g},g.range=function(y){return arguments.length?(a=Array.from(y),g):a.slice()},g.unknown=function(y){return arguments.length?(u=y,g):u},g.copy=function(){return aa(n,a).unknown(u)},ti.apply(g,arguments),g}function mf(){var t=aa().unknown(void 0),n=t.domain,a=t.range,u=0,g=1,y,T,k=!1,V=0,F=0,G=.5;delete t.unknown;function X(){var P=n().length,O=g<u,H=O?g:u,q=O?u:g;y=(q-H)/Math.max(1,P-V+F*2),k&&(y=Math.floor(y)),H+=(q-H-y*(P-V))*G,T=y*(1-V),k&&(H=Math.round(H),T=Math.round(T));var B=Do(P).map(function(j){return H+y*j});return a(O?B.reverse():B)}return t.domain=function(P){return arguments.length?(n(P),X()):n()},t.range=function(P){return arguments.length?([u,g]=P,u=+u,g=+g,X()):[u,g]},t.rangeRound=function(P){return[u,g]=P,u=+u,g=+g,k=!0,X()},t.bandwidth=function(){return T},t.step=function(){return y},t.round=function(P){return arguments.length?(k=!!P,X()):k},t.padding=function(P){return arguments.length?(V=Math.min(1,F=+P),X()):V},t.paddingInner=function(P){return arguments.length?(V=Math.min(1,P),X()):V},t.paddingOuter=function(P){return arguments.length?(F=+P,X()):F},t.align=function(P){return arguments.length?(G=Math.max(0,Math.min(1,P)),X()):G},t.copy=function(){return mf(n(),[u,g]).round(k).paddingInner(V).paddingOuter(F).align(G)},ti.apply(X(),arguments)}function oE(t){var n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return oE(n())},t}function aE(){return oE(mf.apply(null,arguments).paddingInner(1))}function gy(t){return function(){return t}}function $s(t){return+t}var sE=[0,1];function Mi(t){return t}function yy(t,n){return(n-=t=+t)?function(a){return(a-t)/n}:gy(isNaN(n)?NaN:.5)}function BI(t,n){var a;return t>n&&(a=t,t=n,n=a),function(u){return Math.max(t,Math.min(n,u))}}function VI(t,n,a){var u=t[0],g=t[1],y=n[0],T=n[1];return g<u?(u=yy(g,u),y=a(T,y)):(u=yy(u,g),y=a(y,T)),function(k){return y(u(k))}}function HI(t,n,a){var u=Math.min(t.length,n.length)-1,g=new Array(u),y=new Array(u),T=-1;for(t[u]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++T<u;)g[T]=yy(t[T],t[T+1]),y[T]=a(n[T],n[T+1]);return function(k){var V=xo(t,k,1,u)-1;return y[V](g[V](k))}}function Ia(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Ou(){var t=sE,n=sE,a=si,u,g,y,T=Mi,k,V,F;function G(){var P=Math.min(t.length,n.length);return T!==Mi&&(T=BI(t[0],t[P-1])),k=P>2?HI:VI,V=F=null,X}function X(P){return P==null||isNaN(P=+P)?y:(V||(V=k(t.map(u),n,a)))(u(T(P)))}return X.invert=function(P){return T(g((F||(F=k(n,t.map(u),Pi)))(P)))},X.domain=function(P){return arguments.length?(t=Array.from(P,$s),G()):t.slice()},X.range=function(P){return arguments.length?(n=Array.from(P),G()):n.slice()},X.rangeRound=function(P){return n=Array.from(P),a=Ds,G()},X.clamp=function(P){return arguments.length?(T=P?!0:Mi,G()):T!==Mi},X.interpolate=function(P){return arguments.length?(a=P,G()):a},X.unknown=function(P){return arguments.length?(y=P,X):y},function(P,O){return u=P,g=O,G()}}function Nu(){return Ou()(Mi,Mi)}function vf(t,n,a,u){var g=Ka(t,n,a),y;switch(u=ra(u??",f"),u.type){case"s":{var T=Math.max(Math.abs(t),Math.abs(n));return u.precision==null&&!isNaN(y=wd(g,T))&&(u.precision=y),ql(u,T)}case"":case"e":case"g":case"p":case"r":{u.precision==null&&!isNaN(y=Cd(g,Math.max(Math.abs(t),Math.abs(n))))&&(u.precision=y-(u.type==="e"));break}case"f":case"%":{u.precision==null&&!isNaN(y=_d(g))&&(u.precision=y-(u.type==="%")*2);break}}return Cu(u)}function fo(t){var n=t.domain;return t.ticks=function(a){var u=n();return _o(u[0],u[u.length-1],a??10)},t.tickFormat=function(a,u){var g=n();return vf(g[0],g[g.length-1],a??10,u)},t.nice=function(a){a==null&&(a=10);var u=n(),g=0,y=u.length-1,T=u[g],k=u[y],V,F,G=10;for(k<T&&(F=T,T=k,k=F,F=g,g=y,y=F);G-- >0;){if(F=Ko(T,k,a),F===V)return u[g]=T,u[y]=k,n(u);if(F>0)T=Math.floor(T/F)*F,k=Math.ceil(k/F)*F;else if(F<0)T=Math.ceil(T*F)/F,k=Math.floor(k*F)/F;else break;V=F}return t},t}function Mp(){var t=Nu();return t.copy=function(){return Ia(t,Mp())},ti.apply(t,arguments),fo(t)}function Ap(t){var n;function a(u){return u==null||isNaN(u=+u)?n:u}return a.invert=a,a.domain=a.range=function(u){return arguments.length?(t=Array.from(u,$s),a):t.slice()},a.unknown=function(u){return arguments.length?(n=u,a):n},a.copy=function(){return Ap(t).unknown(n)},t=arguments.length?Array.from(t,$s):[0,1],fo(a)}function gf(t,n){t=t.slice();var a=0,u=t.length-1,g=t[a],y=t[u],T;return y<g&&(T=a,a=u,u=T,T=g,g=y,y=T),t[a]=n.floor(g),t[u]=n.ceil(y),t}function uE(t){return Math.log(t)}function cE(t){return Math.exp(t)}function zI(t){return-Math.log(-t)}function GI(t){return-Math.exp(-t)}function qI(t){return isFinite(t)?+("1e"+t):t<0?0:t}function WI(t){return t===10?qI:t===Math.E?Math.exp:n=>Math.pow(t,n)}function jI(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),n=>Math.log(n)/t)}function lE(t){return(n,a)=>-t(-n,a)}function yf(t){let n=t(uE,cE),a=n.domain,u=10,g,y;function T(){return g=jI(u),y=WI(u),a()[0]<0?(g=lE(g),y=lE(y),t(zI,GI)):t(uE,cE),n}return n.base=function(k){return arguments.length?(u=+k,T()):u},n.domain=function(k){return arguments.length?(a(k),T()):a()},n.ticks=k=>{let V=a(),F=V[0],G=V[V.length-1],X=G<F;X&&([F,G]=[G,F]);let P=g(F),O=g(G),H,q,B=k==null?10:+k,j=[];if(!(u%1)&&O-P<B){if(P=Math.floor(P),O=Math.ceil(O),F>0){for(;P<=O;++P)for(H=1;H<u;++H)if(q=P<0?H/y(-P):H*y(P),!(q<F)){if(q>G)break;j.push(q)}}else for(;P<=O;++P)for(H=u-1;H>=1;--H)if(q=P>0?H/y(-P):H*y(P),!(q<F)){if(q>G)break;j.push(q)}j.length*2<B&&(j=_o(F,G,B))}else j=_o(P,O,Math.min(O-P,B)).map(y);return X?j.reverse():j},n.tickFormat=(k,V)=>{if(k==null&&(k=10),V==null&&(V=u===10?"s":","),typeof V!="function"&&(!(u%1)&&(V=ra(V)).precision==null&&(V.trim=!0),V=Cu(V)),k===1/0)return V;let F=Math.max(1,u*k/n.ticks().length);return G=>{let X=G/y(Math.round(g(G)));return X*u<u-.5&&(X*=u),X<=F?V(G):""}},n.nice=()=>a(gf(a(),{floor:k=>y(Math.floor(g(k))),ceil:k=>y(Math.ceil(g(k)))})),n}function Rp(){let t=yf(Ou()).domain([1,10]);return t.copy=()=>Ia(t,Rp()).base(t.base()),ti.apply(t,arguments),t}function fE(t){return function(n){return Math.sign(n)*Math.log1p(Math.abs(n/t))}}function hE(t){return function(n){return Math.sign(n)*Math.expm1(Math.abs(n))*t}}function xf(t){var n=1,a=t(fE(n),hE(n));return a.constant=function(u){return arguments.length?t(fE(n=+u),hE(n)):n},fo(a)}function kp(){var t=xf(Ou());return t.copy=function(){return Ia(t,kp()).constant(t.constant())},ti.apply(t,arguments)}function dE(t){return function(n){return n<0?-Math.pow(-n,t):Math.pow(n,t)}}function $I(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function XI(t){return t<0?-t*t:t*t}function bf(t){var n=t(Mi,Mi),a=1;function u(){return a===1?t(Mi,Mi):a===.5?t($I,XI):t(dE(a),dE(1/a))}return n.exponent=function(g){return arguments.length?(a=+g,u()):a},fo(n)}function _f(){var t=bf(Ou());return t.copy=function(){return Ia(t,_f()).exponent(t.exponent())},ti.apply(t,arguments),t}function pE(){return _f.apply(null,arguments).exponent(.5)}function mE(t){return Math.sign(t)*t*t}function YI(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Ip(){var t=Nu(),n=[0,1],a=!1,u;function g(y){var T=YI(t(y));return isNaN(T)?u:a?Math.round(T):T}return g.invert=function(y){return t.invert(mE(y))},g.domain=function(y){return arguments.length?(t.domain(y),g):t.domain()},g.range=function(y){return arguments.length?(t.range((n=Array.from(y,$s)).map(mE)),g):n.slice()},g.rangeRound=function(y){return g.range(y).round(!0)},g.round=function(y){return arguments.length?(a=!!y,g):a},g.clamp=function(y){return arguments.length?(t.clamp(y),g):t.clamp()},g.unknown=function(y){return arguments.length?(u=y,g):u},g.copy=function(){return Ip(t.domain(),n).round(a).clamp(t.clamp()).unknown(u)},ti.apply(g,arguments),fo(g)}function Pp(){var t=[],n=[],a=[],u;function g(){var T=0,k=Math.max(1,n.length);for(a=new Array(k-1);++T<k;)a[T-1]=yh(t,T/k);return y}function y(T){return T==null||isNaN(T=+T)?u:n[xo(a,T)]}return y.invertExtent=function(T){var k=n.indexOf(T);return k<0?[NaN,NaN]:[k>0?a[k-1]:t[0],k<a.length?a[k]:t[t.length-1]]},y.domain=function(T){if(!arguments.length)return t.slice();t=[];for(let k of T)k!=null&&!isNaN(k=+k)&&t.push(k);return t.sort(cn),g()},y.range=function(T){return arguments.length?(n=Array.from(T),g()):n.slice()},y.unknown=function(T){return arguments.length?(u=T,y):u},y.quantiles=function(){return a.slice()},y.copy=function(){return Pp().domain(t).range(n).unknown(u)},ti.apply(y,arguments)}function Dp(){var t=0,n=1,a=1,u=[.5],g=[0,1],y;function T(V){return V!=null&&V<=V?g[xo(u,V,0,a)]:y}function k(){var V=-1;for(u=new Array(a);++V<a;)u[V]=((V+1)*n-(V-a)*t)/(a+1);return T}return T.domain=function(V){return arguments.length?([t,n]=V,t=+t,n=+n,k()):[t,n]},T.range=function(V){return arguments.length?(a=(g=Array.from(V)).length-1,k()):g.slice()},T.invertExtent=function(V){var F=g.indexOf(V);return F<0?[NaN,NaN]:F<1?[t,u[0]]:F>=a?[u[a-1],n]:[u[F-1],u[F]]},T.unknown=function(V){return arguments.length&&(y=V),T},T.thresholds=function(){return u.slice()},T.copy=function(){return Dp().domain([t,n]).range(g).unknown(y)},ti.apply(fo(T),arguments)}function Op(){var t=[.5],n=[0,1],a,u=1;function g(y){return y!=null&&y<=y?n[xo(t,y,0,u)]:a}return g.domain=function(y){return arguments.length?(t=Array.from(y),u=Math.min(t.length,n.length-1),g):t.slice()},g.range=function(y){return arguments.length?(n=Array.from(y),u=Math.min(t.length,n.length-1),g):n.slice()},g.invertExtent=function(y){var T=n.indexOf(y);return[t[T-1],t[T]]},g.unknown=function(y){return arguments.length?(a=y,g):a},g.copy=function(){return Op().domain(t).range(n).unknown(a)},ti.apply(g,arguments)}var xy=new Date,by=new Date;function On(t,n,a,u){function g(y){return t(y=arguments.length===0?new Date:new Date(+y)),y}return g.floor=y=>(t(y=new Date(+y)),y),g.ceil=y=>(t(y=new Date(y-1)),n(y,1),t(y),y),g.round=y=>{let T=g(y),k=g.ceil(y);return y-T<k-y?T:k},g.offset=(y,T)=>(n(y=new Date(+y),T==null?1:Math.floor(T)),y),g.range=(y,T,k)=>{let V=[];if(y=g.ceil(y),k=k==null?1:Math.floor(k),!(y<T)||!(k>0))return V;let F;do V.push(F=new Date(+y)),n(y,k),t(y);while(F<y&&y<T);return V},g.filter=y=>On(T=>{if(T>=T)for(;t(T),!y(T);)T.setTime(T-1)},(T,k)=>{if(T>=T)if(k<0)for(;++k<=0;)for(;n(T,-1),!y(T););else for(;--k>=0;)for(;n(T,1),!y(T););}),a&&(g.count=(y,T)=>(xy.setTime(+y),by.setTime(+T),t(xy),t(by),Math.floor(a(xy,by))),g.every=y=>(y=Math.floor(y),!isFinite(y)||!(y>0)?null:y>1?g.filter(u?T=>u(T)%y===0:T=>g.count(0,T)%y===0):g)),g}var Xs=On(()=>{},(t,n)=>{t.setTime(+t+n)},(t,n)=>n-t);Xs.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?On(n=>{n.setTime(Math.floor(n/t)*t)},(n,a)=>{n.setTime(+n+a*t)},(n,a)=>(a-n)/t):Xs);var _y=Xs.range;var ko=On(t=>{t.setTime(t-t.getMilliseconds())},(t,n)=>{t.setTime(+t+n*1e3)},(t,n)=>(n-t)/1e3,t=>t.getUTCSeconds()),wy=ko.range;var Fu=On(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3)},(t,n)=>{t.setTime(+t+n*6e4)},(t,n)=>(n-t)/6e4,t=>t.getMinutes()),vE=Fu.range,Uu=On(t=>{t.setUTCSeconds(0,0)},(t,n)=>{t.setTime(+t+n*6e4)},(t,n)=>(n-t)/6e4,t=>t.getUTCMinutes()),gE=Uu.range;var Vu=On(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3-t.getMinutes()*6e4)},(t,n)=>{t.setTime(+t+n*36e5)},(t,n)=>(n-t)/36e5,t=>t.getHours()),yE=Vu.range,Hu=On(t=>{t.setUTCMinutes(0,0,0)},(t,n)=>{t.setTime(+t+n*36e5)},(t,n)=>(n-t)/36e5,t=>t.getUTCHours()),xE=Hu.range;var Da=On(t=>t.setHours(0,0,0,0),(t,n)=>t.setDate(t.getDate()+n),(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5,t=>t.getDate()-1),bE=Da.range,Ys=On(t=>{t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n)},(t,n)=>(n-t)/864e5,t=>t.getUTCDate()-1),_E=Ys.range,Cf=On(t=>{t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n)},(t,n)=>(n-t)/864e5,t=>Math.floor(t/864e5)),wE=Cf.range;function zu(t){return On(n=>{n.setDate(n.getDate()-(n.getDay()+7-t)%7),n.setHours(0,0,0,0)},(n,a)=>{n.setDate(n.getDate()+a*7)},(n,a)=>(a-n-(a.getTimezoneOffset()-n.getTimezoneOffset())*6e4)/6048e5)}var Oa=zu(0),Gu=zu(1),Cy=zu(2),Sy=zu(3),hs=zu(4),Ey=zu(5),Ty=zu(6),My=Oa.range,SE=Gu.range,EE=Cy.range,TE=Sy.range,ME=hs.range,AE=Ey.range,RE=Ty.range;function qu(t){return On(n=>{n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-t)%7),n.setUTCHours(0,0,0,0)},(n,a)=>{n.setUTCDate(n.getUTCDate()+a*7)},(n,a)=>(a-n)/6048e5)}var Na=qu(0),Wu=qu(1),Ay=qu(2),Ry=qu(3),ds=qu(4),ky=qu(5),Iy=qu(6),Py=Na.range,kE=Wu.range,IE=Ay.range,PE=Ry.range,DE=ds.range,OE=ky.range,NE=Iy.range;var ju=On(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,n)=>{t.setMonth(t.getMonth()+n)},(t,n)=>n.getMonth()-t.getMonth()+(n.getFullYear()-t.getFullYear())*12,t=>t.getMonth()),LE=ju.range,$u=On(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCMonth(t.getUTCMonth()+n)},(t,n)=>n.getUTCMonth()-t.getUTCMonth()+(n.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth()),FE=$u.range;var So=On(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n)},(t,n)=>n.getFullYear()-t.getFullYear(),t=>t.getFullYear());So.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:On(n=>{n.setFullYear(Math.floor(n.getFullYear()/t)*t),n.setMonth(0,1),n.setHours(0,0,0,0)},(n,a)=>{n.setFullYear(n.getFullYear()+a*t)});var UE=So.range,Eo=On(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n)},(t,n)=>n.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Eo.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:On(n=>{n.setUTCFullYear(Math.floor(n.getUTCFullYear()/t)*t),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,a)=>{n.setUTCFullYear(n.getUTCFullYear()+a*t)});var BE=Eo.range;function HE(t,n,a,u,g,y){let T=[[ko,1,1e3],[ko,5,5*1e3],[ko,15,15*1e3],[ko,30,30*1e3],[y,1,6e4],[y,5,5*6e4],[y,15,15*6e4],[y,30,30*6e4],[g,1,36e5],[g,3,3*36e5],[g,6,6*36e5],[g,12,12*36e5],[u,1,864e5],[u,2,2*864e5],[a,1,6048e5],[n,1,2592e6],[n,3,3*2592e6],[t,1,31536e6]];function k(F,G,X){let P=G<F;P&&([F,G]=[G,F]);let O=X&&typeof X.range=="function"?X:V(F,G,X),H=O?O.range(F,+G+1):[];return P?H.reverse():H}function V(F,G,X){let P=Math.abs(G-F)/X,O=ma(([,,B])=>B).right(T,P);if(O===T.length)return t.every(Ka(F/31536e6,G/31536e6,X));if(O===0)return Xs.every(Math.max(Ka(F,G,X),1));let[H,q]=T[P/T[O-1][2]<T[O][2]/P?O-1:O];return H.every(q)}return[k,V]}var[Np,Lp]=HE(Eo,$u,Na,Cf,Hu,Uu),[Fp,Up]=HE(So,ju,Oa,Da,Vu,Fu);function Dy(t){if(0<=t.y&&t.y<100){var n=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return n.setFullYear(t.y),n}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Oy(t){if(0<=t.y&&t.y<100){var n=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return n.setUTCFullYear(t.y),n}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Sf(t,n,a){return{y:t,m:n,d:a,H:0,M:0,S:0,L:0}}function Mf(t){var n=t.dateTime,a=t.date,u=t.time,g=t.periods,y=t.days,T=t.shortDays,k=t.months,V=t.shortMonths,F=Ef(g),G=Tf(g),X=Ef(y),P=Tf(y),O=Ef(T),H=Tf(T),q=Ef(k),B=Tf(k),j=Ef(V),U=Tf(V),i={a:m,A:b,b:w,B:C,c:null,d:$E,e:$E,f:xP,g:RP,G:IP,H:vP,I:gP,j:yP,L:QE,m:bP,M:_P,p:E,q:S,Q:ZE,s:KE,S:wP,u:CP,U:SP,V:EP,w:TP,W:MP,x:null,X:null,y:AP,Y:kP,Z:PP,"%":YE},r={a:M,A,b:R,B:D,c:null,d:XE,e:XE,f:LP,g:jP,G:XP,H:DP,I:OP,j:NP,L:eT,m:FP,M:UP,p:N,q:I,Q:ZE,s:KE,S:BP,u:VP,U:HP,V:zP,w:GP,W:qP,x:null,X:null,y:WP,Y:$P,Z:YP,"%":YE},e={a:x,A:l,b:_,B:v,c,d:WE,e:WE,f:hP,g:qE,G:GE,H:jE,I:jE,j:uP,L:fP,m:sP,M:cP,p,q:aP,Q:pP,s:mP,S:lP,u:tP,U:rP,V:nP,w:eP,W:iP,x:h,X:f,y:qE,Y:GE,Z:oP,"%":dP};i.x=o(a,i),i.X=o(u,i),i.c=o(n,i),r.x=o(a,r),r.X=o(u,r),r.c=o(n,r);function o(L,Y){return function(J){var ie=[],K=-1,Q=0,ne=L.length,ue,fe,ge;for(J instanceof Date||(J=new Date(+J));++K<ne;)L.charCodeAt(K)===37&&(ie.push(L.slice(Q,K)),(fe=zE[ue=L.charAt(++K)])!=null?ue=L.charAt(++K):fe=ue==="e"?" ":"0",(ge=Y[ue])&&(ue=ge(J,fe)),ie.push(ue),Q=K+1);return ie.push(L.slice(Q,K)),ie.join("")}}function s(L,Y){return function(J){var ie=Sf(1900,void 0,1),K=d(ie,L,J+="",0),Q,ne;if(K!=J.length)return null;if("Q"in ie)return new Date(ie.Q);if("s"in ie)return new Date(ie.s*1e3+("L"in ie?ie.L:0));if(Y&&!("Z"in ie)&&(ie.Z=0),"p"in ie&&(ie.H=ie.H%12+ie.p*12),ie.m===void 0&&(ie.m="q"in ie?ie.q:0),"V"in ie){if(ie.V<1||ie.V>53)return null;"w"in ie||(ie.w=1),"Z"in ie?(Q=Oy(Sf(ie.y,0,1)),ne=Q.getUTCDay(),Q=ne>4||ne===0?Wu.ceil(Q):Wu(Q),Q=Ys.offset(Q,(ie.V-1)*7),ie.y=Q.getUTCFullYear(),ie.m=Q.getUTCMonth(),ie.d=Q.getUTCDate()+(ie.w+6)%7):(Q=Dy(Sf(ie.y,0,1)),ne=Q.getDay(),Q=ne>4||ne===0?Gu.ceil(Q):Gu(Q),Q=Da.offset(Q,(ie.V-1)*7),ie.y=Q.getFullYear(),ie.m=Q.getMonth(),ie.d=Q.getDate()+(ie.w+6)%7)}else("W"in ie||"U"in ie)&&("w"in ie||(ie.w="u"in ie?ie.u%7:"W"in ie?1:0),ne="Z"in ie?Oy(Sf(ie.y,0,1)).getUTCDay():Dy(Sf(ie.y,0,1)).getDay(),ie.m=0,ie.d="W"in ie?(ie.w+6)%7+ie.W*7-(ne+5)%7:ie.w+ie.U*7-(ne+6)%7);return"Z"in ie?(ie.H+=ie.Z/100|0,ie.M+=ie.Z%100,Oy(ie)):Dy(ie)}}function d(L,Y,J,ie){for(var K=0,Q=Y.length,ne=J.length,ue,fe;K<Q;){if(ie>=ne)return-1;if(ue=Y.charCodeAt(K++),ue===37){if(ue=Y.charAt(K++),fe=e[ue in zE?Y.charAt(K++):ue],!fe||(ie=fe(L,J,ie))<0)return-1}else if(ue!=J.charCodeAt(ie++))return-1}return ie}function p(L,Y,J){var ie=F.exec(Y.slice(J));return ie?(L.p=G.get(ie[0].toLowerCase()),J+ie[0].length):-1}function x(L,Y,J){var ie=O.exec(Y.slice(J));return ie?(L.w=H.get(ie[0].toLowerCase()),J+ie[0].length):-1}function l(L,Y,J){var ie=X.exec(Y.slice(J));return ie?(L.w=P.get(ie[0].toLowerCase()),J+ie[0].length):-1}function _(L,Y,J){var ie=j.exec(Y.slice(J));return ie?(L.m=U.get(ie[0].toLowerCase()),J+ie[0].length):-1}function v(L,Y,J){var ie=q.exec(Y.slice(J));return ie?(L.m=B.get(ie[0].toLowerCase()),J+ie[0].length):-1}function c(L,Y,J){return d(L,n,Y,J)}function h(L,Y,J){return d(L,a,Y,J)}function f(L,Y,J){return d(L,u,Y,J)}function m(L){return T[L.getDay()]}function b(L){return y[L.getDay()]}function w(L){return V[L.getMonth()]}function C(L){return k[L.getMonth()]}function E(L){return g[+(L.getHours()>=12)]}function S(L){return 1+~~(L.getMonth()/3)}function M(L){return T[L.getUTCDay()]}function A(L){return y[L.getUTCDay()]}function R(L){return V[L.getUTCMonth()]}function D(L){return k[L.getUTCMonth()]}function N(L){return g[+(L.getUTCHours()>=12)]}function I(L){return 1+~~(L.getUTCMonth()/3)}return{format:function(L){var Y=o(L+="",i);return Y.toString=function(){return L},Y},parse:function(L){var Y=s(L+="",!1);return Y.toString=function(){return L},Y},utcFormat:function(L){var Y=o(L+="",r);return Y.toString=function(){return L},Y},utcParse:function(L){var Y=s(L+="",!0);return Y.toString=function(){return L},Y}}}var zE={"-":"",_:" ",0:"0"},Ni=/^\s*\d+/,KI=/^%/,QI=/[\\^$*+?|[\]().{}]/g;function Rn(t,n,a){var u=t<0?"-":"",g=(u?-t:t)+"",y=g.length;return u+(y<a?new Array(a-y+1).join(n)+g:g)}function JI(t){return t.replace(QI,"\\$&")}function Ef(t){return new RegExp("^(?:"+t.map(JI).join("|")+")","i")}function Tf(t){return new Map(t.map((n,a)=>[n.toLowerCase(),a]))}function eP(t,n,a){var u=Ni.exec(n.slice(a,a+1));return u?(t.w=+u[0],a+u[0].length):-1}function tP(t,n,a){var u=Ni.exec(n.slice(a,a+1));return u?(t.u=+u[0],a+u[0].length):-1}function rP(t,n,a){var u=Ni.exec(n.slice(a,a+2));return u?(t.U=+u[0],a+u[0].length):-1}function nP(t,n,a){var u=Ni.exec(n.slice(a,a+2));return u?(t.V=+u[0],a+u[0].length):-1}function iP(t,n,a){var u=Ni.exec(n.slice(a,a+2));return u?(t.W=+u[0],a+u[0].length):-1}function GE(t,n,a){var u=Ni.exec(n.slice(a,a+4));return u?(t.y=+u[0],a+u[0].length):-1}function qE(t,n,a){var u=Ni.exec(n.slice(a,a+2));return u?(t.y=+u[0]+(+u[0]>68?1900:2e3),a+u[0].length):-1}function oP(t,n,a){var u=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(a,a+6));return u?(t.Z=u[1]?0:-(u[2]+(u[3]||"00")),a+u[0].length):-1}function aP(t,n,a){var u=Ni.exec(n.slice(a,a+1));return u?(t.q=u[0]*3-3,a+u[0].length):-1}function sP(t,n,a){var u=Ni.exec(n.slice(a,a+2));return u?(t.m=u[0]-1,a+u[0].length):-1}function WE(t,n,a){var u=Ni.exec(n.slice(a,a+2));return u?(t.d=+u[0],a+u[0].length):-1}function uP(t,n,a){var u=Ni.exec(n.slice(a,a+3));return u?(t.m=0,t.d=+u[0],a+u[0].length):-1}function jE(t,n,a){var u=Ni.exec(n.slice(a,a+2));return u?(t.H=+u[0],a+u[0].length):-1}function cP(t,n,a){var u=Ni.exec(n.slice(a,a+2));return u?(t.M=+u[0],a+u[0].length):-1}function lP(t,n,a){var u=Ni.exec(n.slice(a,a+2));return u?(t.S=+u[0],a+u[0].length):-1}function fP(t,n,a){var u=Ni.exec(n.slice(a,a+3));return u?(t.L=+u[0],a+u[0].length):-1}function hP(t,n,a){var u=Ni.exec(n.slice(a,a+6));return u?(t.L=Math.floor(u[0]/1e3),a+u[0].length):-1}function dP(t,n,a){var u=KI.exec(n.slice(a,a+1));return u?a+u[0].length:-1}function pP(t,n,a){var u=Ni.exec(n.slice(a));return u?(t.Q=+u[0],a+u[0].length):-1}function mP(t,n,a){var u=Ni.exec(n.slice(a));return u?(t.s=+u[0],a+u[0].length):-1}function $E(t,n){return Rn(t.getDate(),n,2)}function vP(t,n){return Rn(t.getHours(),n,2)}function gP(t,n){return Rn(t.getHours()%12||12,n,2)}function yP(t,n){return Rn(1+Da.count(So(t),t),n,3)}function QE(t,n){return Rn(t.getMilliseconds(),n,3)}function xP(t,n){return QE(t,n)+"000"}function bP(t,n){return Rn(t.getMonth()+1,n,2)}function _P(t,n){return Rn(t.getMinutes(),n,2)}function wP(t,n){return Rn(t.getSeconds(),n,2)}function CP(t){var n=t.getDay();return n===0?7:n}function SP(t,n){return Rn(Oa.count(So(t)-1,t),n,2)}function JE(t){var n=t.getDay();return n>=4||n===0?hs(t):hs.ceil(t)}function EP(t,n){return t=JE(t),Rn(hs.count(So(t),t)+(So(t).getDay()===4),n,2)}function TP(t){return t.getDay()}function MP(t,n){return Rn(Gu.count(So(t)-1,t),n,2)}function AP(t,n){return Rn(t.getFullYear()%100,n,2)}function RP(t,n){return t=JE(t),Rn(t.getFullYear()%100,n,2)}function kP(t,n){return Rn(t.getFullYear()%1e4,n,4)}function IP(t,n){var a=t.getDay();return t=a>=4||a===0?hs(t):hs.ceil(t),Rn(t.getFullYear()%1e4,n,4)}function PP(t){var n=t.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+Rn(n/60|0,"0",2)+Rn(n%60,"0",2)}function XE(t,n){return Rn(t.getUTCDate(),n,2)}function DP(t,n){return Rn(t.getUTCHours(),n,2)}function OP(t,n){return Rn(t.getUTCHours()%12||12,n,2)}function NP(t,n){return Rn(1+Ys.count(Eo(t),t),n,3)}function eT(t,n){return Rn(t.getUTCMilliseconds(),n,3)}function LP(t,n){return eT(t,n)+"000"}function FP(t,n){return Rn(t.getUTCMonth()+1,n,2)}function UP(t,n){return Rn(t.getUTCMinutes(),n,2)}function BP(t,n){return Rn(t.getUTCSeconds(),n,2)}function VP(t){var n=t.getUTCDay();return n===0?7:n}function HP(t,n){return Rn(Na.count(Eo(t)-1,t),n,2)}function tT(t){var n=t.getUTCDay();return n>=4||n===0?ds(t):ds.ceil(t)}function zP(t,n){return t=tT(t),Rn(ds.count(Eo(t),t)+(Eo(t).getUTCDay()===4),n,2)}function GP(t){return t.getUTCDay()}function qP(t,n){return Rn(Wu.count(Eo(t)-1,t),n,2)}function WP(t,n){return Rn(t.getUTCFullYear()%100,n,2)}function jP(t,n){return t=tT(t),Rn(t.getUTCFullYear()%100,n,2)}function $P(t,n){return Rn(t.getUTCFullYear()%1e4,n,4)}function XP(t,n){var a=t.getUTCDay();return t=a>=4||a===0?ds(t):ds.ceil(t),Rn(t.getUTCFullYear()%1e4,n,4)}function YP(){return"+0000"}function YE(){return"%"}function ZE(t){return+t}function KE(t){return Math.floor(+t/1e3)}var zc,Af,Ny,Xu,Rf;Bp({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Bp(t){return zc=Mf(t),Af=zc.format,Ny=zc.parse,Xu=zc.utcFormat,Rf=zc.utcParse,zc}var Ly="%Y-%m-%dT%H:%M:%S.%LZ";function ZP(t){return t.toISOString()}var KP=Date.prototype.toISOString?ZP:Xu(Ly),rT=KP;function QP(t){var n=new Date(t);return isNaN(n)?null:n}var JP=+new Date("2000-01-01T00:00:00.000Z")?QP:Rf(Ly),nT=JP;function e7(t){return new Date(t)}function t7(t){return t instanceof Date?+t:+new Date(+t)}function Vp(t,n,a,u,g,y,T,k,V,F){var G=Nu(),X=G.invert,P=G.domain,O=F(".%L"),H=F(":%S"),q=F("%I:%M"),B=F("%I %p"),j=F("%a %d"),U=F("%b %d"),i=F("%B"),r=F("%Y");function e(o){return(V(o)<o?O:k(o)<o?H:T(o)<o?q:y(o)<o?B:u(o)<o?g(o)<o?j:U:a(o)<o?i:r)(o)}return G.invert=function(o){return new Date(X(o))},G.domain=function(o){return arguments.length?P(Array.from(o,t7)):P().map(e7)},G.ticks=function(o){var s=P();return t(s[0],s[s.length-1],o??10)},G.tickFormat=function(o,s){return s==null?e:F(s)},G.nice=function(o){var s=P();return(!o||typeof o.range!="function")&&(o=n(s[0],s[s.length-1],o??10)),o?P(gf(s,o)):G},G.copy=function(){return Ia(G,Vp(t,n,a,u,g,y,T,k,V,F))},G}function Fy(){return ti.apply(Vp(Fp,Up,So,ju,Oa,Da,Vu,Fu,ko,Af).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Uy(){return ti.apply(Vp(Np,Lp,Eo,$u,Na,Ys,Hu,Uu,ko,Xu).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Hp(){var t=0,n=1,a,u,g,y,T=Mi,k=!1,V;function F(X){return X==null||isNaN(X=+X)?V:T(g===0?.5:(X=(y(X)-a)*g,k?Math.max(0,Math.min(1,X)):X))}F.domain=function(X){return arguments.length?([t,n]=X,a=y(t=+t),u=y(n=+n),g=a===u?0:1/(u-a),F):[t,n]},F.clamp=function(X){return arguments.length?(k=!!X,F):k},F.interpolator=function(X){return arguments.length?(T=X,F):T};function G(X){return function(P){var O,H;return arguments.length?([O,H]=P,T=X(O,H),F):[T(0),T(1)]}}return F.range=G(si),F.rangeRound=G(Ds),F.unknown=function(X){return arguments.length?(V=X,F):V},function(X){return y=X,a=X(t),u=X(n),g=a===u?0:1/(u-a),F}}function ps(t,n){return n.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function zp(){var t=fo(Hp()(Mi));return t.copy=function(){return ps(t,zp())},Bo.apply(t,arguments)}function By(){var t=yf(Hp()).domain([1,10]);return t.copy=function(){return ps(t,By()).base(t.base())},Bo.apply(t,arguments)}function Vy(){var t=xf(Hp());return t.copy=function(){return ps(t,Vy()).constant(t.constant())},Bo.apply(t,arguments)}function Gp(){var t=bf(Hp());return t.copy=function(){return ps(t,Gp()).exponent(t.exponent())},Bo.apply(t,arguments)}function iT(){return Gp.apply(null,arguments).exponent(.5)}function qp(){var t=[],n=Mi;function a(u){if(u!=null&&!isNaN(u=+u))return n((xo(t,u,1)-1)/(t.length-1))}return a.domain=function(u){if(!arguments.length)return t.slice();t=[];for(let g of u)g!=null&&!isNaN(g=+g)&&t.push(g);return t.sort(cn),a},a.interpolator=function(u){return arguments.length?(n=u,a):n},a.range=function(){return t.map((u,g)=>n(g/(t.length-1)))},a.quantiles=function(u){return Array.from({length:u+1},(g,y)=>va(t,y/u))},a.copy=function(){return qp(n).domain(t)},Bo.apply(a,arguments)}function Wp(){var t=0,n=.5,a=1,u=1,g,y,T,k,V,F=Mi,G,X=!1,P;function O(q){return isNaN(q=+q)?P:(q=.5+((q=+G(q))-y)*(u*q<u*y?k:V),F(X?Math.max(0,Math.min(1,q)):q))}O.domain=function(q){return arguments.length?([t,n,a]=q,g=G(t=+t),y=G(n=+n),T=G(a=+a),k=g===y?0:.5/(y-g),V=y===T?0:.5/(T-y),u=y<g?-1:1,O):[t,n,a]},O.clamp=function(q){return arguments.length?(X=!!q,O):X},O.interpolator=function(q){return arguments.length?(F=q,O):F};function H(q){return function(B){var j,U,i;return arguments.length?([j,U,i]=B,F=Tl(q,[j,U,i]),O):[F(0),F(.5),F(1)]}}return O.range=H(si),O.rangeRound=H(Ds),O.unknown=function(q){return arguments.length?(P=q,O):P},function(q){return G=q,g=q(t),y=q(n),T=q(a),k=g===y?0:.5/(y-g),V=y===T?0:.5/(T-y),u=y<g?-1:1,O}}function jp(){var t=fo(Wp()(Mi));return t.copy=function(){return ps(t,jp())},Bo.apply(t,arguments)}function Hy(){var t=yf(Wp()).domain([.1,1,10]);return t.copy=function(){return ps(t,Hy()).base(t.base())},Bo.apply(t,arguments)}function zy(){var t=xf(Wp());return t.copy=function(){return ps(t,zy()).constant(t.constant())},Bo.apply(t,arguments)}function $p(){var t=bf(Wp());return t.copy=function(){return ps(t,$p()).exponent(t.exponent())},Bo.apply(t,arguments)}function oT(){return $p.apply(null,arguments).exponent(.5)}function fr(t){for(var n=t.length/6|0,a=new Array(n),u=0;u<n;)a[u]="#"+t.slice(u*6,++u*6);return a}var aT=fr("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");var sT=fr("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666");var uT=fr("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666");var cT=fr("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0");var lT=fr("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");var fT=fr("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2");var Xp=fr("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc");var hT=fr("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999");var dT=fr("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3");var pT=fr("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");var Yp=fr("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");var Nr=t=>Bh(t[t.length-1]);var Gy=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(fr),mT=Nr(Gy);var qy=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(fr),vT=Nr(qy);var Wy=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(fr),gT=Nr(Wy);var jy=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(fr),yT=Nr(jy);var $y=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(fr),xT=Nr($y);var Xy=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(fr),bT=Nr(Xy);var Yy=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(fr),_T=Nr(Yy);var Zy=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(fr),wT=Nr(Zy);var Ky=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(fr),CT=Nr(Ky);var Qy=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(fr),ST=Nr(Qy);var Jy=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(fr),ET=Nr(Jy);var e1=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(fr),TT=Nr(e1);var t1=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(fr),MT=Nr(t1);var r1=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(fr),AT=Nr(r1);var n1=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(fr),RT=Nr(n1);var i1=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(fr),kT=Nr(i1);var o1=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(fr),IT=Nr(o1);var a1=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(fr),PT=Nr(a1);var s1=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(fr),DT=Nr(s1);var u1=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(fr),OT=Nr(u1);var c1=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(fr),NT=Nr(c1);var l1=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(fr),LT=Nr(l1);var f1=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(fr),FT=Nr(f1);var h1=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(fr),UT=Nr(h1);var d1=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(fr),BT=Nr(d1);var p1=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(fr),VT=Nr(p1);var m1=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(fr),HT=Nr(m1);function zT(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}var GT=fu(Xi(300,.5,0),Xi(-240,.5,1));var qT=fu(Xi(-100,.75,.35),Xi(80,1.5,.8)),WT=fu(Xi(260,.75,.35),Xi(80,1.5,.8)),Zp=Xi();function jT(t){(t<0||t>1)&&(t-=Math.floor(t));var n=Math.abs(t-.5);return Zp.h=360*t-100,Zp.s=1.5-1.5*n,Zp.l=.8-.9*n,Zp+""}var Kp=ts(),r7=Math.PI/3,n7=Math.PI*2/3;function $T(t){var n;return t=(.5-t)*Math.PI,Kp.r=255*(n=Math.sin(t))*n,Kp.g=255*(n=Math.sin(t+r7))*n,Kp.b=255*(n=Math.sin(t+n7))*n,Kp+""}function XT(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function Qp(t){var n=t.length;return function(a){return t[Math.max(0,Math.min(n-1,Math.floor(a*n)))]}}var YT=Qp(fr("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),ZT=Qp(fr("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),KT=Qp(fr("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),QT=Qp(fr("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Gr(t){return function(){return t}}var v1=Math.abs,Gi=Math.atan2,sa=Math.cos,JT=Math.max,La=Math.min,Qi=Math.sin,rn=Math.sqrt,Li=1e-12,ua=Math.PI,kf=ua/2,Vo=2*ua;function eM(t){return t>1?0:t<-1?ua:Math.acos(t)}function g1(t){return t>=1?kf:t<=-1?-kf:Math.asin(t)}function Fa(t){let n=3;return t.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{let u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t},()=>new is(n)}function i7(t){return t.innerRadius}function o7(t){return t.outerRadius}function a7(t){return t.startAngle}function s7(t){return t.endAngle}function u7(t){return t&&t.padAngle}function c7(t,n,a,u,g,y,T,k){var V=a-t,F=u-n,G=T-g,X=k-y,P=X*V-G*F;if(!(P*P<Li))return P=(G*(n-y)-X*(t-g))/P,[t+P*V,n+P*F]}function Jp(t,n,a,u,g,y,T){var k=t-a,V=n-u,F=(T?y:-y)/rn(k*k+V*V),G=F*V,X=-F*k,P=t+G,O=n+X,H=a+G,q=u+X,B=(P+H)/2,j=(O+q)/2,U=H-P,i=q-O,r=U*U+i*i,e=g-y,o=P*q-H*O,s=(i<0?-1:1)*rn(JT(0,e*e*r-o*o)),d=(o*i-U*s)/r,p=(-o*U-i*s)/r,x=(o*i+U*s)/r,l=(-o*U+i*s)/r,_=d-B,v=p-j,c=x-B,h=l-j;return _*_+v*v>c*c+h*h&&(d=x,p=l),{cx:d,cy:p,x01:-G,y01:-X,x11:d*(g/e-1),y11:p*(g/e-1)}}function tM(){var t=i7,n=o7,a=Gr(0),u=null,g=a7,y=s7,T=u7,k=null,V=Fa(F);function F(){var G,X,P=+t.apply(this,arguments),O=+n.apply(this,arguments),H=g.apply(this,arguments)-kf,q=y.apply(this,arguments)-kf,B=v1(q-H),j=q>H;if(k||(k=G=V()),O<P&&(X=O,O=P,P=X),!(O>Li))k.moveTo(0,0);else if(B>Vo-Li)k.moveTo(O*sa(H),O*Qi(H)),k.arc(0,0,O,H,q,!j),P>Li&&(k.moveTo(P*sa(q),P*Qi(q)),k.arc(0,0,P,q,H,j));else{var U=H,i=q,r=H,e=q,o=B,s=B,d=T.apply(this,arguments)/2,p=d>Li&&(u?+u.apply(this,arguments):rn(P*P+O*O)),x=La(v1(O-P)/2,+a.apply(this,arguments)),l=x,_=x,v,c;if(p>Li){var h=g1(p/P*Qi(d)),f=g1(p/O*Qi(d));(o-=h*2)>Li?(h*=j?1:-1,r+=h,e-=h):(o=0,r=e=(H+q)/2),(s-=f*2)>Li?(f*=j?1:-1,U+=f,i-=f):(s=0,U=i=(H+q)/2)}var m=O*sa(U),b=O*Qi(U),w=P*sa(e),C=P*Qi(e);if(x>Li){var E=O*sa(i),S=O*Qi(i),M=P*sa(r),A=P*Qi(r),R;if(B<ua)if(R=c7(m,b,M,A,E,S,w,C)){var D=m-R[0],N=b-R[1],I=E-R[0],L=S-R[1],Y=1/Qi(eM((D*I+N*L)/(rn(D*D+N*N)*rn(I*I+L*L)))/2),J=rn(R[0]*R[0]+R[1]*R[1]);l=La(x,(P-J)/(Y-1)),_=La(x,(O-J)/(Y+1))}else l=_=0}s>Li?_>Li?(v=Jp(M,A,m,b,O,_,j),c=Jp(E,S,w,C,O,_,j),k.moveTo(v.cx+v.x01,v.cy+v.y01),_<x?k.arc(v.cx,v.cy,_,Gi(v.y01,v.x01),Gi(c.y01,c.x01),!j):(k.arc(v.cx,v.cy,_,Gi(v.y01,v.x01),Gi(v.y11,v.x11),!j),k.arc(0,0,O,Gi(v.cy+v.y11,v.cx+v.x11),Gi(c.cy+c.y11,c.cx+c.x11),!j),k.arc(c.cx,c.cy,_,Gi(c.y11,c.x11),Gi(c.y01,c.x01),!j))):(k.moveTo(m,b),k.arc(0,0,O,U,i,!j)):k.moveTo(m,b),!(P>Li)||!(o>Li)?k.lineTo(w,C):l>Li?(v=Jp(w,C,E,S,P,-l,j),c=Jp(m,b,M,A,P,-l,j),k.lineTo(v.cx+v.x01,v.cy+v.y01),l<x?k.arc(v.cx,v.cy,l,Gi(v.y01,v.x01),Gi(c.y01,c.x01),!j):(k.arc(v.cx,v.cy,l,Gi(v.y01,v.x01),Gi(v.y11,v.x11),!j),k.arc(0,0,P,Gi(v.cy+v.y11,v.cx+v.x11),Gi(c.cy+c.y11,c.cx+c.x11),j),k.arc(c.cx,c.cy,l,Gi(c.y11,c.x11),Gi(c.y01,c.x01),!j))):k.arc(0,0,P,e,r,j)}if(k.closePath(),G)return k=null,G+""||null}return F.centroid=function(){var G=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,X=(+g.apply(this,arguments)+ +y.apply(this,arguments))/2-ua/2;return[sa(X)*G,Qi(X)*G]},F.innerRadius=function(G){return arguments.length?(t=typeof G=="function"?G:Gr(+G),F):t},F.outerRadius=function(G){return arguments.length?(n=typeof G=="function"?G:Gr(+G),F):n},F.cornerRadius=function(G){return arguments.length?(a=typeof G=="function"?G:Gr(+G),F):a},F.padRadius=function(G){return arguments.length?(u=G==null?null:typeof G=="function"?G:Gr(+G),F):u},F.startAngle=function(G){return arguments.length?(g=typeof G=="function"?G:Gr(+G),F):g},F.endAngle=function(G){return arguments.length?(y=typeof G=="function"?G:Gr(+G),F):y},F.padAngle=function(G){return arguments.length?(T=typeof G=="function"?G:Gr(+G),F):T},F.context=function(G){return arguments.length?(k=G??null,F):k},F}var rM=Array.prototype.slice;function Zs(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function nM(t){this._context=t}nM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n);break}}};function Ks(t){return new nM(t)}function Gc(t){return t[0]}function qc(t){return t[1]}function Wc(t,n){var a=Gr(!0),u=null,g=Ks,y=null,T=Fa(k);t=typeof t=="function"?t:t===void 0?Gc:Gr(t),n=typeof n=="function"?n:n===void 0?qc:Gr(n);function k(V){var F,G=(V=Zs(V)).length,X,P=!1,O;for(u==null&&(y=g(O=T())),F=0;F<=G;++F)!(F<G&&a(X=V[F],F,V))===P&&((P=!P)?y.lineStart():y.lineEnd()),P&&y.point(+t(X,F,V),+n(X,F,V));if(O)return y=null,O+""||null}return k.x=function(V){return arguments.length?(t=typeof V=="function"?V:Gr(+V),k):t},k.y=function(V){return arguments.length?(n=typeof V=="function"?V:Gr(+V),k):n},k.defined=function(V){return arguments.length?(a=typeof V=="function"?V:Gr(!!V),k):a},k.curve=function(V){return arguments.length?(g=V,u!=null&&(y=g(u)),k):g},k.context=function(V){return arguments.length?(V==null?u=y=null:y=g(u=V),k):u},k}function em(t,n,a){var u=null,g=Gr(!0),y=null,T=Ks,k=null,V=Fa(F);t=typeof t=="function"?t:t===void 0?Gc:Gr(+t),n=typeof n=="function"?n:n===void 0?Gr(0):Gr(+n),a=typeof a=="function"?a:a===void 0?qc:Gr(+a);function F(X){var P,O,H,q=(X=Zs(X)).length,B,j=!1,U,i=new Array(q),r=new Array(q);for(y==null&&(k=T(U=V())),P=0;P<=q;++P){if(!(P<q&&g(B=X[P],P,X))===j)if(j=!j)O=P,k.areaStart(),k.lineStart();else{for(k.lineEnd(),k.lineStart(),H=P-1;H>=O;--H)k.point(i[H],r[H]);k.lineEnd(),k.areaEnd()}j&&(i[P]=+t(B,P,X),r[P]=+n(B,P,X),k.point(u?+u(B,P,X):i[P],a?+a(B,P,X):r[P]))}if(U)return k=null,U+""||null}function G(){return Wc().defined(g).curve(T).context(y)}return F.x=function(X){return arguments.length?(t=typeof X=="function"?X:Gr(+X),u=null,F):t},F.x0=function(X){return arguments.length?(t=typeof X=="function"?X:Gr(+X),F):t},F.x1=function(X){return arguments.length?(u=X==null?null:typeof X=="function"?X:Gr(+X),F):u},F.y=function(X){return arguments.length?(n=typeof X=="function"?X:Gr(+X),a=null,F):n},F.y0=function(X){return arguments.length?(n=typeof X=="function"?X:Gr(+X),F):n},F.y1=function(X){return arguments.length?(a=X==null?null:typeof X=="function"?X:Gr(+X),F):a},F.lineX0=F.lineY0=function(){return G().x(t).y(n)},F.lineY1=function(){return G().x(t).y(a)},F.lineX1=function(){return G().x(u).y(n)},F.defined=function(X){return arguments.length?(g=typeof X=="function"?X:Gr(!!X),F):g},F.curve=function(X){return arguments.length?(T=X,y!=null&&(k=T(y)),F):T},F.context=function(X){return arguments.length?(X==null?y=k=null:k=T(y=X),F):y},F}function iM(t,n){return n<t?-1:n>t?1:n>=t?0:NaN}function oM(t){return t}function aM(){var t=oM,n=iM,a=null,u=Gr(0),g=Gr(Vo),y=Gr(0);function T(k){var V,F=(k=Zs(k)).length,G,X,P=0,O=new Array(F),H=new Array(F),q=+u.apply(this,arguments),B=Math.min(Vo,Math.max(-Vo,g.apply(this,arguments)-q)),j,U=Math.min(Math.abs(B)/F,y.apply(this,arguments)),i=U*(B<0?-1:1),r;for(V=0;V<F;++V)(r=H[O[V]=V]=+t(k[V],V,k))>0&&(P+=r);for(n!=null?O.sort(function(e,o){return n(H[e],H[o])}):a!=null&&O.sort(function(e,o){return a(k[e],k[o])}),V=0,X=P?(B-F*i)/P:0;V<F;++V,q=j)G=O[V],r=H[G],j=q+(r>0?r*X:0)+i,H[G]={data:k[G],index:V,value:r,startAngle:q,endAngle:j,padAngle:U};return H}return T.value=function(k){return arguments.length?(t=typeof k=="function"?k:Gr(+k),T):t},T.sortValues=function(k){return arguments.length?(n=k,a=null,T):n},T.sort=function(k){return arguments.length?(a=k,n=null,T):a},T.startAngle=function(k){return arguments.length?(u=typeof k=="function"?k:Gr(+k),T):u},T.endAngle=function(k){return arguments.length?(g=typeof k=="function"?k:Gr(+k),T):g},T.padAngle=function(k){return arguments.length?(y=typeof k=="function"?k:Gr(+k),T):y},T}var tm=jc(Ks);function sM(t){this._curve=t}sM.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,n){this._curve.point(n*Math.sin(t),n*-Math.cos(t))}};function jc(t){function n(a){return new sM(t(a))}return n._curve=t,n}function $c(t){var n=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(a){return arguments.length?n(jc(a)):n()._curve},t}function y1(){return $c(Wc().curve(tm))}function x1(){var t=em().curve(tm),n=t.curve,a=t.lineX0,u=t.lineX1,g=t.lineY0,y=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return $c(a())},delete t.lineX0,t.lineEndAngle=function(){return $c(u())},delete t.lineX1,t.lineInnerRadius=function(){return $c(g())},delete t.lineY0,t.lineOuterRadius=function(){return $c(y())},delete t.lineY1,t.curve=function(T){return arguments.length?n(jc(T)):n()._curve},t}function Yu(t,n){return[(n=+n)*Math.cos(t-=Math.PI/2),n*Math.sin(t)]}var rm=class{constructor(n,a){this._context=n,this._x=a}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(n,a){switch(n=+n,a=+a,this._point){case 0:{this._point=1,this._line?this._context.lineTo(n,a):this._context.moveTo(n,a);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+n)/2,this._y0,this._x0,a,n,a):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+a)/2,n,this._y0,n,a);break}}this._x0=n,this._y0=a}},b1=class{constructor(n){this._context=n}lineStart(){this._point=0}lineEnd(){}point(n,a){if(n=+n,a=+a,this._point===0)this._point=1;else{let u=Yu(this._x0,this._y0),g=Yu(this._x0,this._y0=(this._y0+a)/2),y=Yu(n,this._y0),T=Yu(n,a);this._context.moveTo(...u),this._context.bezierCurveTo(...g,...y,...T)}this._x0=n,this._y0=a}};function nm(t){return new rm(t,!0)}function im(t){return new rm(t,!1)}function uM(t){return new b1(t)}function l7(t){return t.source}function f7(t){return t.target}function If(t){let n=l7,a=f7,u=Gc,g=qc,y=null,T=null,k=Fa(V);function V(){let F,G=rM.call(arguments),X=n.apply(this,G),P=a.apply(this,G);if(y==null&&(T=t(F=k())),T.lineStart(),G[0]=X,T.point(+u.apply(this,G),+g.apply(this,G)),G[0]=P,T.point(+u.apply(this,G),+g.apply(this,G)),T.lineEnd(),F)return T=null,F+""||null}return V.source=function(F){return arguments.length?(n=F,V):n},V.target=function(F){return arguments.length?(a=F,V):a},V.x=function(F){return arguments.length?(u=typeof F=="function"?F:Gr(+F),V):u},V.y=function(F){return arguments.length?(g=typeof F=="function"?F:Gr(+F),V):g},V.context=function(F){return arguments.length?(F==null?y=T=null:T=t(y=F),V):y},V}function cM(){return If(nm)}function lM(){return If(im)}function fM(){let t=If(uM);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}var h7=rn(3),om={draw(t,n){let a=rn(n+La(n/28,.75))*.59436,u=a/2,g=u*h7;t.moveTo(0,a),t.lineTo(0,-a),t.moveTo(-g,-u),t.lineTo(g,u),t.moveTo(-g,u),t.lineTo(g,-u)}};var Xc={draw(t,n){let a=rn(n/ua);t.moveTo(a,0),t.arc(0,0,a,0,Vo)}};var am={draw(t,n){let a=rn(n/5)/2;t.moveTo(-3*a,-a),t.lineTo(-a,-a),t.lineTo(-a,-3*a),t.lineTo(a,-3*a),t.lineTo(a,-a),t.lineTo(3*a,-a),t.lineTo(3*a,a),t.lineTo(a,a),t.lineTo(a,3*a),t.lineTo(-a,3*a),t.lineTo(-a,a),t.lineTo(-3*a,a),t.closePath()}};var hM=rn(1/3),d7=hM*2,sm={draw(t,n){let a=rn(n/d7),u=a*hM;t.moveTo(0,-a),t.lineTo(u,0),t.lineTo(0,a),t.lineTo(-u,0),t.closePath()}};var um={draw(t,n){let a=rn(n)*.62625;t.moveTo(0,-a),t.lineTo(a,0),t.lineTo(0,a),t.lineTo(-a,0),t.closePath()}};var cm={draw(t,n){let a=rn(n-La(n/7,2))*.87559;t.moveTo(-a,0),t.lineTo(a,0),t.moveTo(0,a),t.lineTo(0,-a)}};var lm={draw(t,n){let a=rn(n),u=-a/2;t.rect(u,u,a,a)}};var fm={draw(t,n){let a=rn(n)*.4431;t.moveTo(a,a),t.lineTo(a,-a),t.lineTo(-a,-a),t.lineTo(-a,a),t.closePath()}};var p7=.8908130915292852,dM=Qi(ua/10)/Qi(7*ua/10),m7=Qi(Vo/10)*dM,v7=-sa(Vo/10)*dM,hm={draw(t,n){let a=rn(n*p7),u=m7*a,g=v7*a;t.moveTo(0,-a),t.lineTo(u,g);for(let y=1;y<5;++y){let T=Vo*y/5,k=sa(T),V=Qi(T);t.lineTo(V*a,-k*a),t.lineTo(k*u-V*g,V*u+k*g)}t.closePath()}};var _1=rn(3),dm={draw(t,n){let a=-rn(n/(_1*3));t.moveTo(0,a*2),t.lineTo(-_1*a,-a),t.lineTo(_1*a,-a),t.closePath()}};var g7=rn(3),pm={draw(t,n){let a=rn(n)*.6824,u=a/2,g=a*g7/2;t.moveTo(0,-a),t.lineTo(g,u),t.lineTo(-g,u),t.closePath()}};var Ho=-.5,zo=rn(3)/2,w1=1/rn(12),y7=(w1/2+1)*3,mm={draw(t,n){let a=rn(n/y7),u=a/2,g=a*w1,y=u,T=a*w1+a,k=-y,V=T;t.moveTo(u,g),t.lineTo(y,T),t.lineTo(k,V),t.lineTo(Ho*u-zo*g,zo*u+Ho*g),t.lineTo(Ho*y-zo*T,zo*y+Ho*T),t.lineTo(Ho*k-zo*V,zo*k+Ho*V),t.lineTo(Ho*u+zo*g,Ho*g-zo*u),t.lineTo(Ho*y+zo*T,Ho*T-zo*y),t.lineTo(Ho*k+zo*V,Ho*V-zo*k),t.closePath()}};var Pf={draw(t,n){let a=rn(n-La(n/6,1.7))*.6189;t.moveTo(-a,-a),t.lineTo(a,a),t.moveTo(-a,a),t.lineTo(a,-a)}};var C1=[Xc,am,sm,lm,hm,dm,mm],pM=[Xc,cm,Pf,pm,om,fm,um];function S1(t,n){let a=null,u=Fa(g);t=typeof t=="function"?t:Gr(t||Xc),n=typeof n=="function"?n:Gr(n===void 0?64:+n);function g(){let y;if(a||(a=y=u()),t.apply(this,arguments).draw(a,+n.apply(this,arguments)),y)return a=null,y+""||null}return g.type=function(y){return arguments.length?(t=typeof y=="function"?y:Gr(y),g):t},g.size=function(y){return arguments.length?(n=typeof y=="function"?y:Gr(+y),g):n},g.context=function(y){return arguments.length?(a=y??null,g):a},g}function Go(){}function Yc(t,n,a){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+n)/6,(t._y0+4*t._y1+a)/6)}function Df(t){this._context=t}Df.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Yc(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Yc(this,t,n);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}};function mM(t){return new Df(t)}function vM(t){this._context=t}vM.prototype={areaStart:Go,areaEnd:Go,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x2=t,this._y2=n;break;case 1:this._point=2,this._x3=t,this._y3=n;break;case 2:this._point=3,this._x4=t,this._y4=n,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+n)/6);break;default:Yc(this,t,n);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}};function gM(t){return new vM(t)}function yM(t){this._context=t}yM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var a=(this._x0+4*this._x1+t)/6,u=(this._y0+4*this._y1+n)/6;this._line?this._context.lineTo(a,u):this._context.moveTo(a,u);break;case 3:this._point=4;default:Yc(this,t,n);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}};function xM(t){return new yM(t)}function bM(t,n){this._basis=new Df(t),this._beta=n}bM.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,n=this._y,a=t.length-1;if(a>0)for(var u=t[0],g=n[0],y=t[a]-u,T=n[a]-g,k=-1,V;++k<=a;)V=k/a,this._basis.point(this._beta*t[k]+(1-this._beta)*(u+V*y),this._beta*n[k]+(1-this._beta)*(g+V*T));this._x=this._y=null,this._basis.lineEnd()},point:function(t,n){this._x.push(+t),this._y.push(+n)}};var _M=function t(n){function a(u){return n===1?new Df(u):new bM(u,n)}return a.beta=function(u){return t(+u)},a}(.85);function Zc(t,n,a){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-n),t._y2+t._k*(t._y1-a),t._x2,t._y2)}function vm(t,n){this._context=t,this._k=(1-n)/6}vm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Zc(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2,this._x1=t,this._y1=n;break;case 2:this._point=3;default:Zc(this,t,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var wM=function t(n){function a(u){return new vm(u,n)}return a.tension=function(u){return t(+u)},a}(0);function gm(t,n){this._context=t,this._k=(1-n)/6}gm.prototype={areaStart:Go,areaEnd:Go,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:Zc(this,t,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var CM=function t(n){function a(u){return new gm(u,n)}return a.tension=function(u){return t(+u)},a}(0);function ym(t,n){this._context=t,this._k=(1-n)/6}ym.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Zc(this,t,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var SM=function t(n){function a(u){return new ym(u,n)}return a.tension=function(u){return t(+u)},a}(0);function Of(t,n,a){var u=t._x1,g=t._y1,y=t._x2,T=t._y2;if(t._l01_a>Li){var k=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,V=3*t._l01_a*(t._l01_a+t._l12_a);u=(u*k-t._x0*t._l12_2a+t._x2*t._l01_2a)/V,g=(g*k-t._y0*t._l12_2a+t._y2*t._l01_2a)/V}if(t._l23_a>Li){var F=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,G=3*t._l23_a*(t._l23_a+t._l12_a);y=(y*F+t._x1*t._l23_2a-n*t._l12_2a)/G,T=(T*F+t._y1*t._l23_2a-a*t._l12_2a)/G}t._context.bezierCurveTo(u,g,y,T,t._x2,t._y2)}function EM(t,n){this._context=t,this._alpha=n}EM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var a=this._x2-t,u=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(a*a+u*u,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3;default:Of(this,t,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var TM=function t(n){function a(u){return n?new EM(u,n):new vm(u,0)}return a.alpha=function(u){return t(+u)},a}(.5);function MM(t,n){this._context=t,this._alpha=n}MM.prototype={areaStart:Go,areaEnd:Go,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,n){if(t=+t,n=+n,this._point){var a=this._x2-t,u=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(a*a+u*u,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:Of(this,t,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var AM=function t(n){function a(u){return n?new MM(u,n):new gm(u,0)}return a.alpha=function(u){return t(+u)},a}(.5);function RM(t,n){this._context=t,this._alpha=n}RM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var a=this._x2-t,u=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(a*a+u*u,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Of(this,t,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var kM=function t(n){function a(u){return n?new RM(u,n):new ym(u,0)}return a.alpha=function(u){return t(+u)},a}(.5);function IM(t){this._context=t}IM.prototype={areaStart:Go,areaEnd:Go,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,n){t=+t,n=+n,this._point?this._context.lineTo(t,n):(this._point=1,this._context.moveTo(t,n))}};function PM(t){return new IM(t)}function DM(t){return t<0?-1:1}function OM(t,n,a){var u=t._x1-t._x0,g=n-t._x1,y=(t._y1-t._y0)/(u||g<0&&-0),T=(a-t._y1)/(g||u<0&&-0),k=(y*g+T*u)/(u+g);return(DM(y)+DM(T))*Math.min(Math.abs(y),Math.abs(T),.5*Math.abs(k))||0}function NM(t,n){var a=t._x1-t._x0;return a?(3*(t._y1-t._y0)/a-n)/2:n}function E1(t,n,a){var u=t._x0,g=t._y0,y=t._x1,T=t._y1,k=(y-u)/3;t._context.bezierCurveTo(u+k,g+k*n,y-k,T-k*a,y,T)}function xm(t){this._context=t}xm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:E1(this,this._t0,NM(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var a=NaN;if(t=+t,n=+n,!(t===this._x1&&n===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,E1(this,NM(this,a=OM(this,t,n)),a);break;default:E1(this,this._t0,a=OM(this,t,n));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=a}}};function LM(t){this._context=new FM(t)}(LM.prototype=Object.create(xm.prototype)).point=function(t,n){xm.prototype.point.call(this,n,t)};function FM(t){this._context=t}FM.prototype={moveTo:function(t,n){this._context.moveTo(n,t)},closePath:function(){this._context.closePath()},lineTo:function(t,n){this._context.lineTo(n,t)},bezierCurveTo:function(t,n,a,u,g,y){this._context.bezierCurveTo(n,t,u,a,y,g)}};function UM(t){return new xm(t)}function BM(t){return new LM(t)}function HM(t){this._context=t}HM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,n=this._y,a=t.length;if(a)if(this._line?this._context.lineTo(t[0],n[0]):this._context.moveTo(t[0],n[0]),a===2)this._context.lineTo(t[1],n[1]);else for(var u=VM(t),g=VM(n),y=0,T=1;T<a;++y,++T)this._context.bezierCurveTo(u[0][y],g[0][y],u[1][y],g[1][y],t[T],n[T]);(this._line||this._line!==0&&a===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,n){this._x.push(+t),this._y.push(+n)}};function VM(t){var n,a=t.length-1,u,g=new Array(a),y=new Array(a),T=new Array(a);for(g[0]=0,y[0]=2,T[0]=t[0]+2*t[1],n=1;n<a-1;++n)g[n]=1,y[n]=4,T[n]=4*t[n]+2*t[n+1];for(g[a-1]=2,y[a-1]=7,T[a-1]=8*t[a-1]+t[a],n=1;n<a;++n)u=g[n]/y[n-1],y[n]-=u,T[n]-=u*T[n-1];for(g[a-1]=T[a-1]/y[a-1],n=a-2;n>=0;--n)g[n]=(T[n]-g[n+1])/y[n];for(y[a-1]=(t[a]+g[a-1])/2,n=0;n<a-1;++n)y[n]=2*t[n+1]-g[n+1];return[g,y]}function zM(t){return new HM(t)}function bm(t,n){this._context=t,this._t=n}bm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,n),this._context.lineTo(t,n);else{var a=this._x*(1-this._t)+t*this._t;this._context.lineTo(a,this._y),this._context.lineTo(a,n)}break}}this._x=t,this._y=n}};function GM(t){return new bm(t,.5)}function qM(t){return new bm(t,0)}function WM(t){return new bm(t,1)}function ca(t,n){if((T=t.length)>1)for(var a=1,u,g,y=t[n[0]],T,k=y.length;a<T;++a)for(g=y,y=t[n[a]],u=0;u<k;++u)y[u][1]+=y[u][0]=isNaN(g[u][1])?g[u][0]:g[u][1]}function la(t){for(var n=t.length,a=new Array(n);--n>=0;)a[n]=n;return a}function x7(t,n){return t[n]}function b7(t){let n=[];return n.key=t,n}function jM(){var t=Gr([]),n=la,a=ca,u=x7;function g(y){var T=Array.from(t.apply(this,arguments),b7),k,V=T.length,F=-1,G;for(let X of y)for(k=0,++F;k<V;++k)(T[k][F]=[0,+u(X,T[k].key,F,y)]).data=X;for(k=0,G=Zs(n(T));k<V;++k)T[G[k]].index=k;return a(T,G),T}return g.keys=function(y){return arguments.length?(t=typeof y=="function"?y:Gr(Array.from(y)),g):t},g.value=function(y){return arguments.length?(u=typeof y=="function"?y:Gr(+y),g):u},g.order=function(y){return arguments.length?(n=y==null?la:typeof y=="function"?y:Gr(Array.from(y)),g):n},g.offset=function(y){return arguments.length?(a=y??ca,g):a},g}function $M(t,n){if((u=t.length)>0){for(var a,u,g=0,y=t[0].length,T;g<y;++g){for(T=a=0;a<u;++a)T+=t[a][g][1]||0;if(T)for(a=0;a<u;++a)t[a][g][1]/=T}ca(t,n)}}function XM(t,n){if((V=t.length)>0)for(var a,u=0,g,y,T,k,V,F=t[n[0]].length;u<F;++u)for(T=k=0,a=0;a<V;++a)(y=(g=t[n[a]][u])[1]-g[0])>0?(g[0]=T,g[1]=T+=y):y<0?(g[1]=k,g[0]=k+=y):(g[0]=0,g[1]=y)}function YM(t,n){if((g=t.length)>0){for(var a=0,u=t[n[0]],g,y=u.length;a<y;++a){for(var T=0,k=0;T<g;++T)k+=t[T][a][1]||0;u[a][1]+=u[a][0]=-k/2}ca(t,n)}}function ZM(t,n){if(!(!((T=t.length)>0)||!((y=(g=t[n[0]]).length)>0))){for(var a=0,u=1,g,y,T;u<y;++u){for(var k=0,V=0,F=0;k<T;++k){for(var G=t[n[k]],X=G[u][1]||0,P=G[u-1][1]||0,O=(X-P)/2,H=0;H<k;++H){var q=t[n[H]],B=q[u][1]||0,j=q[u-1][1]||0;O+=B-j}V+=X,F+=O*X}g[u-1][1]+=g[u-1][0]=a,V&&(a-=F/V)}g[u-1][1]+=g[u-1][0]=a,ca(t,n)}}function _m(t){var n=t.map(_7);return la(t).sort(function(a,u){return n[a]-n[u]})}function _7(t){for(var n=-1,a=0,u=t.length,g,y=-1/0;++n<u;)(g=+t[n][1])>y&&(y=g,a=n);return a}function wm(t){var n=t.map(T1);return la(t).sort(function(a,u){return n[a]-n[u]})}function T1(t){for(var n=0,a=-1,u=t.length,g;++a<u;)(g=+t[a][1])&&(n+=g);return n}function KM(t){return wm(t).reverse()}function QM(t){var n=t.length,a,u,g=t.map(T1),y=_m(t),T=0,k=0,V=[],F=[];for(a=0;a<n;++a)u=y[a],T<k?(T+=g[u],V.push(u)):(k+=g[u],F.push(u));return F.reverse().concat(V)}function JM(t){return la(t).reverse()}var Nf=t=>()=>t;function M1(t,{sourceEvent:n,target:a,transform:u,dispatch:g}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},transform:{value:u,enumerable:!0,configurable:!0},_:{value:g}})}function qo(t,n,a){this.k=t,this.x=n,this.y=a}qo.prototype={constructor:qo,scale:function(t){return t===1?this:new qo(this.k*t,this.x,this.y)},translate:function(t,n){return t===0&n===0?this:new qo(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Kc=new qo(1,0,0);Cm.prototype=qo.prototype;function Cm(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Kc;return t.__zoom}function Sm(t){t.stopImmediatePropagation()}function Qc(t){t.preventDefault(),t.stopImmediatePropagation()}function w7(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function C7(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function e4(){return this.__zoom||Kc}function S7(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function E7(){return navigator.maxTouchPoints||"ontouchstart"in this}function T7(t,n,a){var u=t.invertX(n[0][0])-a[0][0],g=t.invertX(n[1][0])-a[1][0],y=t.invertY(n[0][1])-a[0][1],T=t.invertY(n[1][1])-a[1][1];return t.translate(g>u?(u+g)/2:Math.min(0,u)||Math.max(0,g),T>y?(y+T)/2:Math.min(0,y)||Math.max(0,T))}function t4(){var t=w7,n=C7,a=T7,u=S7,g=E7,y=[0,1/0],T=[[-1/0,-1/0],[1/0,1/0]],k=250,V=$h,F=Oo("start","zoom","end"),G,X,P,O=500,H=150,q=0,B=10;function j(c){c.property("__zoom",e4).on("wheel.zoom",d,{passive:!1}).on("mousedown.zoom",p).on("dblclick.zoom",x).filter(g).on("touchstart.zoom",l).on("touchmove.zoom",_).on("touchend.zoom touchcancel.zoom",v).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}j.transform=function(c,h,f,m){var b=c.selection?c.selection():c;b.property("__zoom",e4),c!==b?e(c,h,f,m):b.interrupt().each(function(){o(this,arguments).event(m).start().zoom(null,typeof h=="function"?h.apply(this,arguments):h).end()})},j.scaleBy=function(c,h,f,m){j.scaleTo(c,function(){var b=this.__zoom.k,w=typeof h=="function"?h.apply(this,arguments):h;return b*w},f,m)},j.scaleTo=function(c,h,f,m){j.transform(c,function(){var b=n.apply(this,arguments),w=this.__zoom,C=f==null?r(b):typeof f=="function"?f.apply(this,arguments):f,E=w.invert(C),S=typeof h=="function"?h.apply(this,arguments):h;return a(i(U(w,S),C,E),b,T)},f,m)},j.translateBy=function(c,h,f,m){j.transform(c,function(){return a(this.__zoom.translate(typeof h=="function"?h.apply(this,arguments):h,typeof f=="function"?f.apply(this,arguments):f),n.apply(this,arguments),T)},null,m)},j.translateTo=function(c,h,f,m,b){j.transform(c,function(){var w=n.apply(this,arguments),C=this.__zoom,E=m==null?r(w):typeof m=="function"?m.apply(this,arguments):m;return a(Kc.translate(E[0],E[1]).scale(C.k).translate(typeof h=="function"?-h.apply(this,arguments):-h,typeof f=="function"?-f.apply(this,arguments):-f),w,T)},m,b)};function U(c,h){return h=Math.max(y[0],Math.min(y[1],h)),h===c.k?c:new qo(h,c.x,c.y)}function i(c,h,f){var m=h[0]-f[0]*c.k,b=h[1]-f[1]*c.k;return m===c.x&&b===c.y?c:new qo(c.k,m,b)}function r(c){return[(+c[0][0]+ +c[1][0])/2,(+c[0][1]+ +c[1][1])/2]}function e(c,h,f,m){c.on("start.zoom",function(){o(this,arguments).event(m).start()}).on("interrupt.zoom end.zoom",function(){o(this,arguments).event(m).end()}).tween("zoom",function(){var b=this,w=arguments,C=o(b,w).event(m),E=n.apply(b,w),S=f==null?r(E):typeof f=="function"?f.apply(b,w):f,M=Math.max(E[1][0]-E[0][0],E[1][1]-E[0][1]),A=b.__zoom,R=typeof h=="function"?h.apply(b,w):h,D=V(A.invert(S).concat(M/A.k),R.invert(S).concat(M/R.k));return function(N){if(N===1)N=R;else{var I=D(N),L=M/I[2];N=new qo(L,S[0]-I[0]*L,S[1]-I[1]*L)}C.zoom(null,N)}})}function o(c,h,f){return!f&&c.__zooming||new s(c,h)}function s(c,h){this.that=c,this.args=h,this.active=0,this.sourceEvent=null,this.extent=n.apply(c,h),this.taps=0}s.prototype={event:function(c){return c&&(this.sourceEvent=c),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(c,h){return this.mouse&&c!=="mouse"&&(this.mouse[1]=h.invert(this.mouse[0])),this.touch0&&c!=="touch"&&(this.touch0[1]=h.invert(this.touch0[0])),this.touch1&&c!=="touch"&&(this.touch1[1]=h.invert(this.touch1[0])),this.that.__zoom=h,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(c){var h=Er(this.that).datum();F.call(c,this.that,new M1(c,{sourceEvent:this.sourceEvent,target:j,type:c,transform:this.that.__zoom,dispatch:F}),h)}};function d(c,...h){if(!t.apply(this,arguments))return;var f=o(this,h).event(c),m=this.__zoom,b=Math.max(y[0],Math.min(y[1],m.k*Math.pow(2,u.apply(this,arguments)))),w=Ii(c);if(f.wheel)(f.mouse[0][0]!==w[0]||f.mouse[0][1]!==w[1])&&(f.mouse[1]=m.invert(f.mouse[0]=w)),clearTimeout(f.wheel);else{if(m.k===b)return;f.mouse=[w,m.invert(w)],ea(this),f.start()}Qc(c),f.wheel=setTimeout(C,H),f.zoom("mouse",a(i(U(m,b),f.mouse[0],f.mouse[1]),f.extent,T));function C(){f.wheel=null,f.end()}}function p(c,...h){if(P||!t.apply(this,arguments))return;var f=c.currentTarget,m=o(this,h,!0).event(c),b=Er(c.view).on("mousemove.zoom",S,!0).on("mouseup.zoom",M,!0),w=Ii(c,f),C=c.clientX,E=c.clientY;Ts(c.view),Sm(c),m.mouse=[w,this.__zoom.invert(w)],ea(this),m.start();function S(A){if(Qc(A),!m.moved){var R=A.clientX-C,D=A.clientY-E;m.moved=R*R+D*D>q}m.event(A).zoom("mouse",a(i(m.that.__zoom,m.mouse[0]=Ii(A,f),m.mouse[1]),m.extent,T))}function M(A){b.on("mousemove.zoom mouseup.zoom",null),Ms(A.view,m.moved),Qc(A),m.event(A).end()}}function x(c,...h){if(t.apply(this,arguments)){var f=this.__zoom,m=Ii(c.changedTouches?c.changedTouches[0]:c,this),b=f.invert(m),w=f.k*(c.shiftKey?.5:2),C=a(i(U(f,w),m,b),n.apply(this,h),T);Qc(c),k>0?Er(this).transition().duration(k).call(e,C,m,c):Er(this).call(j.transform,C,m,c)}}function l(c,...h){if(t.apply(this,arguments)){var f=c.touches,m=f.length,b=o(this,h,c.changedTouches.length===m).event(c),w,C,E,S;for(Sm(c),C=0;C<m;++C)E=f[C],S=Ii(E,this),S=[S,this.__zoom.invert(S),E.identifier],b.touch0?!b.touch1&&b.touch0[2]!==S[2]&&(b.touch1=S,b.taps=0):(b.touch0=S,w=!0,b.taps=1+!!G);G&&(G=clearTimeout(G)),w&&(b.taps<2&&(X=S[0],G=setTimeout(function(){G=null},O)),ea(this),b.start())}}function _(c,...h){if(this.__zooming){var f=o(this,h).event(c),m=c.changedTouches,b=m.length,w,C,E,S;for(Qc(c),w=0;w<b;++w)C=m[w],E=Ii(C,this),f.touch0&&f.touch0[2]===C.identifier?f.touch0[0]=E:f.touch1&&f.touch1[2]===C.identifier&&(f.touch1[0]=E);if(C=f.that.__zoom,f.touch1){var M=f.touch0[0],A=f.touch0[1],R=f.touch1[0],D=f.touch1[1],N=(N=R[0]-M[0])*N+(N=R[1]-M[1])*N,I=(I=D[0]-A[0])*I+(I=D[1]-A[1])*I;C=U(C,Math.sqrt(N/I)),E=[(M[0]+R[0])/2,(M[1]+R[1])/2],S=[(A[0]+D[0])/2,(A[1]+D[1])/2]}else if(f.touch0)E=f.touch0[0],S=f.touch0[1];else return;f.zoom("touch",a(i(C,E,S),f.extent,T))}}function v(c,...h){if(this.__zooming){var f=o(this,h).event(c),m=c.changedTouches,b=m.length,w,C;for(Sm(c),P&&clearTimeout(P),P=setTimeout(function(){P=null},O),w=0;w<b;++w)C=m[w],f.touch0&&f.touch0[2]===C.identifier?delete f.touch0:f.touch1&&f.touch1[2]===C.identifier&&delete f.touch1;if(f.touch1&&!f.touch0&&(f.touch0=f.touch1,delete f.touch1),f.touch0)f.touch0[1]=this.__zoom.invert(f.touch0[0]);else if(f.end(),f.taps===2&&(C=Ii(C,this),Math.hypot(X[0]-C[0],X[1]-C[1])<B)){var E=Er(this).on("dblclick.zoom");E&&E.apply(this,arguments)}}}return j.wheelDelta=function(c){return arguments.length?(u=typeof c=="function"?c:Nf(+c),j):u},j.filter=function(c){return arguments.length?(t=typeof c=="function"?c:Nf(!!c),j):t},j.touchable=function(c){return arguments.length?(g=typeof c=="function"?c:Nf(!!c),j):g},j.extent=function(c){return arguments.length?(n=typeof c=="function"?c:Nf([[+c[0][0],+c[0][1]],[+c[1][0],+c[1][1]]]),j):n},j.scaleExtent=function(c){return arguments.length?(y[0]=+c[0],y[1]=+c[1],j):[y[0],y[1]]},j.translateExtent=function(c){return arguments.length?(T[0][0]=+c[0][0],T[1][0]=+c[1][0],T[0][1]=+c[0][1],T[1][1]=+c[1][1],j):[[T[0][0],T[0][1]],[T[1][0],T[1][1]]]},j.constrain=function(c){return arguments.length?(a=c,j):a},j.duration=function(c){return arguments.length?(k=+c,j):k},j.interpolate=function(c){return arguments.length?(V=c,j):V},j.on=function(){var c=F.on.apply(F,arguments);return c===F?j:c},j.clickDistance=function(c){return arguments.length?(q=(c=+c)*c,j):Math.sqrt(q)},j.tapDistance=function(c){return arguments.length?(B=+c,j):B},j}var g4=Wa(n4()),D1=Wa(i4());var Wo={capture:function(t){return t.map(function(n){return Wo.makeSVGDoc(n)})},getAllSVGElements:function(){var t=[].slice.apply(document.getElementsByTagName("iframe")),n=[document];t.forEach(function(u){try{n.push(u.contentDocument||u.contentWindow.document)}catch{console.log("Protected cross-domain IFrame",u)}});var a=[];return n.forEach(function(u){var g=[].slice.apply(u.getElementsByTagName("svg"));a.push.apply(a,g)}),a},makeSVGDoc:function(t){var n=t.cloneNode(!0),a=n.ownerDocument||document;Wo.pruneInvisibleSubtrees(n,t);for(var u=Wo.usedStyles(t,!0,!0),g=Wo.parentChain(t,u),y=function(H,q,B,j){H.appendChild(q),Object.keys(j).forEach(function(U){var i=q.getAttribute(U)||q.style[U]||Wo.getComputedStyleCssText(B,U);if(i!=null){H.setAttribute(U,i);var r=j[U];r.replace?q.setAttribute(U,r.replace):r.delete&&q.removeAttribute(U)}})},T={width:{replace:"100%"},height:{replace:"100%"},xmlns:{delete:!0}},k=!1,V=0;V<g.length;V++){var F=g[V],G=a.createElementNS("http://www.w3.org/2000/svg","svg"),X=!0;Object.keys(F).forEach(function(H){F[H]&&(G.setAttribute(H,F[H]),X=!1)}),X||(y(G,n,t,T),n=G,k=!0)}if(t.parentNode!=null&&!k){var G=a.createElementNS("http://www.w3.org/2000/svg","svg");y(G,n,t,T),n=G,k=!0}k&&n.setAttribute("style",Wo.getComputedStyleCssText(t)),n.setAttribute("version","1.1"),n.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),n.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");var P=a.createElement("style");P.setAttribute("type","text/css");var O=a.createTextNode(u.join(`
`));return P.appendChild(O),n.insertBefore(P,n.firstChild),n},getComputedStyleCssText:function(t,n){var a=window.getComputedStyle(t);if(n)return a[n];if(a.cssText!="")return a.cssText;for(var u="",g=0;g<a.length;g++){var y=a[g],T=a.getPropertyValue(y);u+=`${y}: ${T}; `}return u},doPruneInvisible:!0,pruneConditionSets:[{display:"none"},{visibility:"hidden"},{opacity:"0"},{"fill-opacity":"0","stroke-opacity":"0"},{"fill-opacity":"0",stroke:"none"},{fill:"none","stroke-opacity":"0"}],pruneInvisibleSubtrees:function(t,n){if(Wo.doPruneInvisible){var a=window.getComputedStyle(n),u=!1;if(Wo.pruneConditionSets.forEach(function(k){if(!u){var V=!0;Object.keys(k).forEach(function(F){var G=k[F],X=a[F],P=n.getAttribute(F);X===G||!X&&P===G||(V=!1)}),u=V}}),u&&t.parentNode)t.parentNode.removeChild(t);else{var g=t.children,y=n.children;if(g&&g.length)for(var T=g.length;--T>=0;)Wo.pruneInvisibleSubtrees(g[T],y[T])}}},parentChain:function(t,n){for(var a=t.ownerDocument||document,u=[];t.parentNode!==a&&t.parentNode!==null;)t=t.parentNode,u.push({id:t.id,class:t.getAttribute("class")||""});return u.forEach(function(g){var y={id:!1,class:!1},T=g.class.split(" ").filter(function(k){return k.length>0});n.forEach(function(k){for(var V=0;V<T.length;V++)if(k.indexOf("."+T[V])>=0){y.class=!0;break}g.id&&k.indexOf("#"+g.id)>=0&&(y.id=!0)}),Object.keys(y).forEach(function(k){y[k]||(g[k]=void 0)})}),u},usedStyles:function(t,n,a){for(var u=[],g,y=t.ownerDocument||document,T=y.styleSheets,k=0;k<T.length;k++){try{if(T[k].cssRules==null)continue}catch{continue}for(var V=0;V<T[k].cssRules.length;V++){g=T[k].cssRules[V];var F=!1;try{n&&(F=t.querySelectorAll(g.selectorText).length>0),(!n||a)&&(F|=t.matches(g.selectorText))}catch(G){console.warn("CSS selector error: "+g.selectorText+". Often angular issue.",G)}F&&u.push(g.cssText)}}return u},makeXMLStr:function(t,n){var a=t.serializeToString(n);return a=a.split('xmlns="http://www.w3.org/1999/xhtml"').join(""),a}};var ms=class{constructor(n,a){this.description=n.trim(),this.seqDatum=a}toString(){return`${this.description} [${this.seqDatum?this.seqDatum.toString():`${this.seqDatum.begin} - ${this.seqDatum.end}`}]`}};function I1(t){let n=document.createElementNS("http://www.w3.org/2000/svg","g");n.setAttributeNS(null,"transform",t);let a=n.transform.baseVal.consolidate().matrix,{a:u,b:g,c:y,d:T,e:k,f:V}=a,F=Math.sqrt(u*u+g*g),G=Math.sqrt(y*y+T*T),X=u*y+g*T;return F&&(u/=F,g/=F),X&&(y-=u*X,T-=g*X),G&&(y/=G,T/=G,X/=G),u*T<g*y&&(u=-u,g=-g,X=-X,F=-F),{translate:[k,V],translateX:k,translateY:V,rotate:Math.atan2(g,u)*180/Math.PI,skewX:Math.atan(X)*180/Math.PI,scaleX:F,scaleY:G}}function vs(t,n,a){a=a/360*Math.PI*2;let u=Math.cos(a)*(t[0]-n[0])-Math.sin(a)*(t[1]-n[1])+n[0],g=Math.sin(a)*(t[0]-n[0])+Math.cos(a)*(t[1]-n[1])+n[1];return[u,g]}var Dr="http://www.w3.org/2000/svg";var Fi=class{constructor(){}get width(){return this.expanded?this.size*this.stickZoom+45+this.labelSVG.getComputedTextLength():2*this.getSymbolRadius()+15+this.labelSVG.getComputedTextLength()}get height(){return 40}get labelY(){return-5}init(n,a,u,g){this.id=n,this.app=a,this.json=u,this.name=g,this.expanded=!1,this.postAnimExpanded=!1,this.annotationSets=new Map,this.naryLinks=new Map,this.binaryLinks=new Map,this.sequenceLinks=new Map}initLabel(){this.labelSVG=document.createElementNS(Dr,"text"),this.labelSVG.setAttribute("x","0"),this.labelSVG.setAttribute("y","10"),this.labelSVG.classList.add("label"),this.name?this.labelText=this.name:this.labelText=this.id,this.labelText.length>25&&(this.labelText=`${this.labelText.substr(0,16)}...`),this.labelText=this.name,this.labelTextNode=document.createTextNode(this.labelText),this.labelSVG.appendChild(this.labelTextNode),this.labelSVG.setAttribute("transform",`translate( -${this.getSymbolRadius()} ${this.labelY})`),this.upperGroup.appendChild(this.labelSVG)}initOutline(){this.outline.classList.add("outline"),this.upperGroup.appendChild(this.outline)}initListeners(){this.upperGroup.onmousedown=n=>this.mouseDown(n),this.upperGroup.onmouseenter=n=>this.mouseOver(n),this.upperGroup.onmouseleave=n=>this.mouseOut(n),this.upperGroup.ontouchstart=n=>this.touchStart(n)}addStoichiometryLabel(n){this.labelSVG&&(this.labelSVG.childNodes[0].data=`${this.labelSVG.childNodes[0].data} [${n}]`)}mouseDown(n){return this.app.preventDefaultsAndStopPropagation(n),this.app.d3cola.stop(),this.app.dragElement=this,this.app.dragStart=n,!1}touchStart(n){return this.app.preventDefaultsAndStopPropagation(n),this.app.d3cola.stop(),this.app.dragElement=this,this.app.dragStart=n,!1}mouseOver(n){return this.app.preventDefaultsAndStopPropagation(n),this.showHighlight(!0),this.app.notifyHoverListeners([this.json]),!1}mouseOut(n){return this.app.preventDefaultsAndStopPropagation(n),this.showHighlight(!1),this.app.hideTooltip(),this.app.notifyHoverListeners([]),!1}getSymbolRadius(){return 15}showHighlight(){}getPosition(){return[this.ix,this.iy]}setPositionFromCola(){this.px=this.x,this.py=this.y;let n=this.width/2-this.getSymbolRadius();this.expanded&&(n=n-this.size/2*this.stickZoom),this.setPosition(this.x+n,this.y)}setPosition(n,a){this.ix=n,this.iy=a,this.upperGroup.setAttribute("transform",`translate(${this.ix} ${this.iy})`)}changePosition(n,a){this.ix-=n,this.iy-=a,this.upperGroup.setAttribute("transform",`translate(${this.ix} ${this.iy})`)}getAggregateSelfLinkPath(){let n=this.getSymbolRadius()+7,a=45,u=Em(n,25+a),g=Em(n,-25+a),y=Em(n,40+a),T=Em(n,-40+a);return`M 0,0 Q ${y.x},${-y.y} ${u.x},${-u.y} A ${n} ${n} 0 0 1 ${g.x},${-g.y} Q ${T.x},${-T.y} 0,0`}checkLinks(){function n(a){for(let u of a.values())u.check()}n(this.binaryLinks),n(this.sequenceLinks),this.selfLink&&this.selfLink.check()}setAllLinkCoordinates(){for(let n of this.naryLinks.values())n.setLinkCoordinates();for(let n of this.binaryLinks.values())n.setLinkCoordinates();this.selfLink&&this.selfLink.setLinkCoordinates();for(let n of this.sequenceLinks.values())n.setLinkCoordinates()}};function Em(t,n){let a=n/360*Math.PI*2;return{x:t*Math.cos(a),y:t*Math.sin(a)}}var gs=class t extends Fi{constructor(){super(),this.nTermFeatures=[],this.cTermFeatures=[]}getSymbolRadius(){return 15}showHighlight(n){this.highlight.setAttribute("stroke-opacity",n?"1":"0")}setStickScale(n,a){let u=this.stickZoom,g=this.ix-a.x,T=g*n/u-g,k=this.ix+T;this.stickZoom=n,this.scale(),this.setPosition(k,this.iy),this.setAllLinkCoordinates()}scale(){let n=this.size*this.stickZoom;if(this.expanded){let a=this.app.svgElement.createSVGMatrix().translate(-(this.size/2*this.stickZoom+(this.nTermFeatures.length>0?25:10)),this.labelY);this.labelSVG.transform.baseVal.initialize(this.app.svgElement.createSVGTransformFromMatrix(a)),this.updateAnnotationRectanglesNoTransition(),Er(this.background).attr("width",n).attr("x",this.getResXWithStickZoom(.5)),Er(this.outline).attr("width",n).attr("x",this.getResXWithStickZoom(.5)),Er(this.highlight).attr("width",n+5).attr("x",this.getResXWithStickZoom(.5)-2.5),this.setScaleGroup()}}setScaleGroup(){this.upperGroup.appendChild(this.ticks),this.ticks.textContent="",this.scaleLabels=[];let n=2,a=-1,u=this.getResXWithStickZoom(this.size);for(let T=1;T<=this.size;T++){if(T===1||T%100===0&&200*this.stickZoom>t.minXDist||T%10===0&&20*this.stickZoom>t.minXDist){let k=this.getResXWithStickZoom(T);(this.stickZoom>=8||T!==1)&&y(this,k),a=(a+1)%n,a===0&&k+t.minXDist<u&&g(this,T,k)}if(this.stickZoom>=8){let k=document.createElementNS(Dr,"g");k.setAttribute("transform",`translate(${this.getResXWithStickZoom(T)} 0)`);let V=document.createElementNS(Dr,"text");V.classList.add("label","sequence"),V.setAttribute("x","0"),V.setAttribute("y","3"),V.appendChild(document.createTextNode(this.sequence[T-1]));let F=document.createElementNS(Dr,"text");F.classList.add("label","sequence-outline"),F.setAttribute("x","0"),F.setAttribute("y","3"),F.appendChild(document.createTextNode(this.sequence[T-1])),k.appendChild(F),this.scaleLabels.push(F),k.appendChild(V),this.scaleLabels.push(V),this.ticks.appendChild(k)}}g(this,this.size,u),this.stickZoom>=8&&y(this,u);function g(T,k,V){let F=document.createElementNS(Dr,"g");F.setAttribute("transform",`translate(${V} 0)`);let G=document.createElementNS(Dr,"text");G.classList.add("label","scale-label"),G.setAttribute("x","0"),G.setAttribute("y",t.STICKHEIGHT+4),G.appendChild(document.createTextNode(k)),F.appendChild(G),T.scaleLabels.push(G),T.ticks.appendChild(F)}function y(T,k){let V=document.createElementNS(Dr,"line");V.classList.add("tick"),V.setAttribute("x1",k),V.setAttribute("y1","5"),V.setAttribute("x2",k),V.setAttribute("y2","10"),T.ticks.appendChild(V)}}setExpanded(n,a){this.busy!==!0&&(n?this.toStick(!0):this.toCircle(!0,a))}toCircle(n=!0,a){if(!a){let q=this.app.svgElement.parentNode.clientWidth,B=this.app.container.getCTM().inverse(),j=this.app.container.getCTM().inverse().a;this.ix<B.e&&(console.log("off left edge"),a={x:B.e+(this.getSymbolRadius()+15+this.labelSVG.getComputedTextLength()),y:this.iy}),this.ix>B.e+q*j&&(console.log("off right edge"),a={x:B.e+q*j-(this.getSymbolRadius()+5),y:this.iy})}let u=n?t.transitionTime:0;this.postAnimExpanded=!1,this.busy=!0;let g=this.getSymbolRadius();Er(this.background).transition().attr("x",-g).attr("y",-g).attr("width",g*2).attr("height",g*2).attr("rx",g).attr("ry",g).duration(u),Er(this.outline).transition().attr("x",-g).attr("y",-g).attr("width",g*2).attr("height",g*2).attr("rx",g).attr("ry",g).duration(u),Er(this.highlight).transition().attr("width",g*2+5).attr("height",g*2+5).attr("x",-g-2.5).attr("y",-g-2.5).attr("rx",g+2.5).attr("ry",g+2.5).duration(u);let y=si(this.stickZoom,0),k=I1(this.labelSVG.getAttribute("transform")).translate[0],V=si(k,-(g+5)),F=null;typeof a<"u"&&a!==null&&(F=si(this.ix,a.x));let G=this;Er(this.ticks).transition().attr("opacity",0).duration(u/4).on("end",function(){Er(this).selectAll("*").remove()});let X=this.stickZoom,P=this.rotation,O=Ls;if(n){for(let[B,j]of this.annotationSets)if(this.app.annotationSetsShown.get(B)===!0)for(let U of j){if(U.fuzzyStart){let i=U.fuzzyStart;Er(i).transition().attr("d",this.getAnnotationPieSlicePath(U.seqDatum.uncertainBegin,U.seqDatum.begin,U,!1)).duration(u)}if(U.certain){let i=U.certain;Er(i).transition().attr("d",this.getAnnotationPieSlicePath(U.seqDatum.begin,U.seqDatum.end,U,!1)).duration(u)}if(U.fuzzyEnd){let i=U.fuzzyEnd;Er(i).transition().attr("d",this.getAnnotationPieSlicePath(U.seqDatum.end,U.seqDatum.uncertainEnd,U,!1)).duration(u)}}let q=wa(function(B){H(B/u)&&q.stop()})}else H(1);function H(q){let B=G.app.svgElement.createSVGMatrix().translate(V(O(q)),G.labelY);if(G.labelSVG.transform.baseVal.initialize(G.app.svgElement.createSVGTransformFromMatrix(B)),F!==null&&G.setPosition(F(O(q)),G.iy),G.stickZoom=y(O(q)),G.setAllLinkCoordinates(),q===1){G.expanded=!1,G.checkLinks();for(let[j,U]of G.annotationSets)if(G.app.annotationSetsShown.get(j)===!0)for(let i of U){if(i.fuzzyStart){let r=i.fuzzyStart;Er(r).attr("d",G.getAnnotationPieSlicePath(i.seqDatum.uncertainBegin,i.seqDatum.begin,i))}if(i.certain){let r=i.certain;Er(r).attr("d",G.getAnnotationPieSlicePath(i.seqDatum.begin,i.seqDatum.end,i))}if(i.fuzzyEnd){let r=i.fuzzyEnd;Er(r).attr("d",G.getAnnotationPieSlicePath(i.seqDatum.end,i.seqDatum.uncertainEnd,i))}}return G.stickZoom=X,G.rotation=P,G.busy=!1,!0}else return q>1||isNaN(q)?H(1):!1}}toStick(n=!0){let a=n?t.transitionTime:0;this.busy=!0,this.expanded=!0,this.postAnimExpanded=!0;let u=this.size*this.stickZoom,g=this.getSymbolRadius(),y=si(2*g,u),T=si(0,this.stickZoom),k=si(-(g+5),-(this.size/2*this.stickZoom+(this.nTermFeatures.length>0?25:10))),V=this.stickZoom;this.stickZoom=0,this.checkLinks(),this.stickZoom=V,Er(this.background).transition().attr("height",t.STICKHEIGHT).attr("y",-t.STICKHEIGHT/2).attr("rx",0).attr("ry",0).duration(a),Er(this.outline).transition().attr("height",t.STICKHEIGHT).attr("y",-t.STICKHEIGHT/2).attr("rx",0).attr("ry",0).duration(a),Er(this.highlight).transition().attr("width",u+5).attr("height",t.STICKHEIGHT+5).attr("x",this.getResXWithStickZoom(.5)-2.5).attr("y",-t.STICKHEIGHT/2-2.5).attr("rx",0).attr("ry",0).duration(a);let F=this,G=Ls;if(n){for(let[O,H]of this.annotationSets)if(this.app.annotationSetsShown.get(O)===!0)for(let q of H){if(q.fuzzyStart){let B=q.fuzzyStart;B.setAttribute("d",this.getAnnotationPieSlicePath(q.seqDatum.uncertainBegin,q.seqDatum.begin,q,!1)),Er(B).transition().attr("d",this.getAnnotationRectPath(q.seqDatum.uncertainBegin,q.seqDatum.begin,q)).duration(t.transitionTime)}if(q.certain){let B=q.certain,j=q.seqDatum.begin,U=q.seqDatum.end;q.seqDatum.uncertainBegin&&(j+=1),q.seqDatum.uncertainEnd&&(U-=1),B.setAttribute("d",this.getAnnotationPieSlicePath(j,U,q,!1)),Er(B).transition().attr("d",this.getAnnotationRectPath(j,U,q)).duration(t.transitionTime)}if(q.fuzzyEnd){let B=q.fuzzyEnd;B.setAttribute("d",this.getAnnotationPieSlicePath(q.seqDatum.end,q.seqDatum.uncertainEnd,q,!1)),Er(B).transition().attr("d",this.getAnnotationRectPath(q.seqDatum.end,q.seqDatum.uncertainEnd,q)).duration(t.transitionTime)}}let P=wa(function(O){X(O/a)&&P.stop()})}else X(1);function X(P){let O=I1(F.labelSVG.getAttribute("transform")),H=F.app.svgElement.createSVGMatrix().rotate(O.rotate).translate(k(G(P)),F.labelY);F.labelSVG.transform.baseVal.initialize(F.app.svgElement.createSVGTransformFromMatrix(H));let q=y(G(P));return Er(F.highlight).attr("width",q).attr("x",-(q/2)+.5*F.stickZoom),Er(F.outline).attr("width",q).attr("x",-(q/2)+.5*F.stickZoom),Er(F.background).attr("width",q).attr("x",-(q/2)+.5*F.stickZoom),F.stickZoom=T(G(P)),F.setAllLinkCoordinates(),P===1?(F.updateAnnotationRectanglesNoTransition(),F.busy=!1,!0):P>1||isNaN(P)?X(1):!1}Er(this.ticks).attr("opacity",0),this.setScaleGroup(),Er(this.ticks).transition().attr("opacity",1).delay(a*.8).duration(a/2)}updateAnnotationRectanglesNoTransition(){for(let[n,a]of this.annotationSets)if(this.app.annotationSetsShown.get(n)===!0)for(let u of a){if(u.fuzzyStart){let g=u.fuzzyStart;Er(g).attr("d",this.getAnnotationRectPath(u.seqDatum.uncertainBegin,u.seqDatum.begin,u))}if(u.certain){let g=u.seqDatum.begin,y=u.seqDatum.end;u.seqDatum.uncertainBegin&&(g+=1),u.seqDatum.uncertainEnd&&(y-=1),u.certain.setAttribute("d",this.getAnnotationRectPath(g,y,u))}if(u.fuzzyEnd){let g=u.fuzzyEnd;Er(g).attr("d",this.getAnnotationRectPath(u.seqDatum.end,u.seqDatum.uncertainEnd,u))}}}getResXWithStickZoom(n){return n==="n-n"?-this.size/2*this.stickZoom-20:n==="c-c"?this.size/2*this.stickZoom+20:(n-this.size/2)*this.stickZoom}getResidueCoordinates(n,a){typeof n>"u"&&console.error("ERROR: residue number is undefined");let u=this.getResXWithStickZoom(n*1),g;if(u!==0){let y=Math.abs(u),T=Math.acos(u/y),k=this.rotation/360*Math.PI*2;u=y*Math.cos(k+T),g=y*Math.sin(k+T),typeof a<"u"&&(u+=a*Math.cos(k+Math.PI/2),g+=a*Math.sin(k+Math.PI/2))}else g=a;return u+=this.ix,g+=this.iy,[u,g]}clearPositionalFeatures(){this.annotations=[],this.annotationTypes=[],this.annotationsSvgGroup.textContent="",this.nTermFeatures=[],this.cTermFeatures=[]}updatePositionalFeatures(){let n=y=>{let T=y.target.correspondingUseElement?y.target.correspondingUseElement:y.target;this.app.preventDefaultsAndStopPropagation(y),this.app.setTooltip(T.name,T.getAttribute("fill")),this.showHighlight(!0)},a=-1,u=[];function g(y,T){for(let k of y)if(k.seqDatum.overlaps(T.seqDatum))return!0;return!1}for(let[y,T]of this.annotationSets)if(this.app.annotationSetsShown.get(y)===!0){T&&T.length>0&&(a++,u[a]=[]);let k=new Set,V=Array.from(T.values()).sort(function(F,G){let X=F.description,P=G.description;return X<P?-1:X>P?1:0});for(let F of V)if(!k.has(F.toString()))if(k.add(F.toString()),F.seqDatum.sequenceDatumString==="n-n"||F.seqDatum.sequenceDatumString==="c-c")F.seqDatum.sequenceDatumString==="n-n"?(F.rung=this.nTermFeatures.length,this.nTermFeatures.push(F)):(F.rung=this.cTermFeatures.length,this.cTermFeatures.push(F));else{let G=u[a];g(G,F)&&(a++,u[a]=[],G=u[a]),F.rung=a,G.push(F)}}this.rungCount=a+1;for(let[y,T]of this.annotationSets)if(this.app.annotationSetsShown.get(y)===!0){let k=new Set;for(let V of T.values())if(!k.has(V.toString())){k.add(V.toString());let F=V.toString();if(V.seqDatum.uncertainBegin&&(V.fuzzyStart=document.createElementNS(Dr,"path"),this.expanded?V.fuzzyStart.setAttribute("d",this.getAnnotationRectPath(V.seqDatum.uncertainBegin,V.seqDatum.begin,V)):V.fuzzyStart.setAttribute("d",this.getAnnotationPieSlicePath(V.seqDatum.uncertainBegin,V.seqDatum.begin,V)),V.fuzzyStart.setAttribute("stroke-width","1"),V.fuzzyStart.name=F,V.fuzzyStart.onmouseover=n,this.annotationsSvgGroup.appendChild(V.fuzzyStart)),V.seqDatum.begin&&V.seqDatum.end){V.certain=document.createElementNS(Dr,"path");let G=V.seqDatum.begin,X=V.seqDatum.end;V.seqDatum.uncertainBegin&&(G+=1),V.seqDatum.uncertainEnd&&(X-=1),this.expanded?V.certain.setAttribute("d",this.getAnnotationRectPath(G,X,V)):V.certain.setAttribute("d",this.getAnnotationPieSlicePath(G,X,V)),V.certain.setAttribute("stroke-width","1"),V.certain.name=F,V.certain.onmouseover=n,this.annotationsSvgGroup.appendChild(V.certain)}V.seqDatum.uncertainEnd&&(V.fuzzyEnd=document.createElementNS(Dr,"path"),this.expanded?V.fuzzyEnd.setAttribute("d",this.getAnnotationRectPath(V.seqDatum.end,V.seqDatum.uncertainEnd,V)):V.fuzzyEnd.setAttribute("d",this.getAnnotationPieSlicePath(V.seqDatum.end,V.seqDatum.uncertainEnd,V)),V.fuzzyEnd.setAttribute("stroke-width","1"),V.fuzzyEnd.name=F,V.fuzzyEnd.onmouseover=n,this.annotationsSvgGroup.appendChild(V.fuzzyEnd))}}this.scale()}getAnnotationPieSlicePath(n,a,u,g=!0){let y=this.getSymbolRadius(),T,k,V,F=u.rung;F===-1?(k=0,T=y):n==="n-n"?V=y/this.nTermFeatures.length:a==="c-c"?V=y/this.cTermFeatures.length:V=y/this.rungCount,k=F*V,T=k+V;let G,X;n==="n-n"?(G=-20,X=0):a==="c-c"?(G=0,X=20):(G=(n-1)/this.size*360,X=(a-1)/this.size*360);let P=0;(X-G>180||X===G)&&(P=1);let O=vs([0,k],[0,0],G-180),H=vs([0,T],[0,0],G-180),q=vs([0,T],[0,0],X-180),B=vs([0,k],[0,0],X-180),j=`M${O[0]},${O[1]} L${H[0]},${H[1]}`;if(g)j+=` A${T},${T} 0 ${P} 1 ${q[0]},${q[1]}`;else for(let U=0;U<=t.stepsInArc;U++){let i=G+(X-G)/t.stepsInArc*U,r=vs([0,T],[0,0],i-180);j+=` L${r[0]},${r[1]}`}if(g)j+=` L${B[0]},${B[1]}`,j+=` A${k},${k} 0 ${P} 0 ${O[0]},${O[1]}`;else for(let U=t.stepsInArc;U>=0;U--){let i=G+(X-G)/t.stepsInArc*U,r=vs([0,k],[0,0],i-180);j+=` L${r[0]},${r[1]}`}return j+=" Z",j}getAnnotationRectPath(n,a,u){let g,y,T,k;n==="n-n"?(g=this.getResXWithStickZoom(.5)-20,T=20,k=t.STICKHEIGHT/this.nTermFeatures.length):a==="c-c"?(g=this.getResXWithStickZoom(this.size+.5),T=20,k=t.STICKHEIGHT/this.cTermFeatures.length):(g=this.getResXWithStickZoom(n-.5),y=1+(a-n),T=y*this.stickZoom,k=t.STICKHEIGHT/this.rungCount);let V=-t.STICKHEIGHT/2+u.rung*k,F=V+k,G=`M${g},${F} L${g},${V}`;for(let X=0;X<=t.stepsInArc;X++){let P=g+T*(X/t.stepsInArc);G+=` L ${P},${V}`}for(let X=t.stepsInArc;X>=0;X--){let P=g+T*(X/t.stepsInArc);G+=` L ${P},${F}`}return G+=" Z",G}};gs.STICKHEIGHT=20;gs.MAXSIZE=0;gs.transitionTime=650;gs.minXDist=30;gs.stepsInArc=5;var fa=class{constructor(n,a){this.participant=n,this.sequenceDatumString=a.trim();function u(g){return parseInt(g)?parseInt(g):g}if(this.sequenceDatumString==="?-?")this.end=1,this.uncertainEnd=n.size?n.size:1;else if(this.sequenceDatumString==="n-n")this.uncertainBegin="n-n";else if(this.sequenceDatumString==="c-c")this.uncertainEnd="c-c";else{let g=a.indexOf("-"),y=a.substring(0,g),T=a.substring(g+1);if(y=="?")this.uncertainBegin=1,this.begin=u(T),this.end=null;else if(T=="?")this.uncertainEnd=n.size,this.end=u(y),this.begin=null;else{let k;y.indexOf(".")===-1?this.begin=u(y):(k=y.indexOf("."),this.uncertainBegin=u(y.substring(0,k)),this.begin=u(y.substring(k+2))),T.indexOf(".")===-1?this.end=u(T):(k=T.indexOf("."),this.end=u(T.substring(0,k)),this.uncertainEnd=u(T.substring(k+2))),this.begin==="n"&&(this.uncertainBegin=1,this.begin=u(this.end),this.end=null),this.end==="c"&&(this.uncertainEnd=n.size,this.end=u(this.begin),this.begin=null),y.indexOf("<")>-1&&(this.uncertainBegin=1,this.begin=u(y.substring(1,y.length))),T.indexOf(">")>-1&&(this.end=u(T.substring(1,y.length)),this.uncertainEnd=n.size),y.indexOf(">")>-1&&T.indexOf("<")>-1&&(this.uncertainBegin=u(y.substring(1,y.length)),this.begin=u(T.substring(1,y.length)),this.end=null)}}}toString(){return this.sequenceDatumString}overlaps(n){if(this.participant===n.participant){let a=this.uncertainBegin||this.begin||this.end||this.uncertainEnd,u=this.uncertainEnd||this.end||this.begin||this.uncertainBegin,g=n.uncertainBegin||n.begin||n.end,y=n.uncertainEnd||n.end||n.begin;if(a<=y&&g<=u)return!0}return!1}};var Tm=class extends gs{constructor(n,a,u,g,y){super(),this.init(n,a,u,g),this.type="protein",this.upperGroup=document.createElementNS(Dr,"g"),this.rotation=0,this.stickZoom=1,this.highlight=document.createElementNS(Dr,"rect"),this.highlight.classList.add("highlight","participant-highlight"),this.upperGroup.appendChild(this.highlight),this.background=document.createElementNS(Dr,"rect"),this.background.setAttribute("fill","#FFFFFF"),this.upperGroup.appendChild(this.background),this.initLabel(),this.ticks=document.createElementNS(Dr,"g"),this.annotationsSvgGroup=document.createElementNS(Dr,"g"),this.annotationsSvgGroup.setAttribute("opacity","1"),this.upperGroup.appendChild(this.annotationsSvgGroup),this.outline=document.createElementNS(Dr,"rect"),this.outline.setAttribute("stroke","black"),this.outline.setAttribute("stroke-width","1"),this.outline.setAttribute("fill","none"),this.upperGroup.appendChild(this.outline),this.scaleLabels=[];let T=this.getSymbolRadius();this.outline.setAttribute("x",-T),this.outline.setAttribute("y",-T),this.outline.setAttribute("width",T*2),this.outline.setAttribute("height",T*2),this.outline.setAttribute("rx",T),this.outline.setAttribute("ry",T),this.background.setAttribute("x",-T),this.background.setAttribute("y",-T),this.background.setAttribute("width",T*2),this.background.setAttribute("height",T*2),this.background.setAttribute("rx",T),this.background.setAttribute("ry",T),this.highlight.setAttribute("width",T*2+5),this.highlight.setAttribute("height",T*2+5),this.highlight.setAttribute("x",-T-2.5),this.highlight.setAttribute("y",-T-2.5),this.highlight.setAttribute("rx",T+2.5),this.highlight.setAttribute("ry",T+2.5),this.highlight.setAttribute("stroke-opacity","0"),this.labelSVG.setAttribute("transform",`translate(${-(T+5)},-5)`),this.initListeners(),Object.defineProperty(this,"height",{get:()=>this.expanded?120:40}),this.showHighlight(!1),y||(y="SEQUENCEMISSING"),this.sequence=y.replace(/[^A-Z]/g,""),this.size=this.sequence.length,this.annotationSets.set("Interactor",[new ms(this.json.label,new fa(null,`1-${this.size}`))])}};var Mm=class extends Fi{constructor(n,a,u,g){super(),this.init(n,a,u,g),this.upperGroup=document.createElementNS(Dr,"g"),this.initLabel();let y="0, -10  8.66,5 -8.66,5";this.outline=document.createElementNS(Dr,"polygon"),this.outline.setAttribute("points",y),this.initOutline(),this.initListeners()}};var Am=class extends Fi{constructor(n,a,u,g){super(),this.init(n,a,u,g),this.upperGroup=document.createElementNS(Dr,"g"),this.initLabel(),this.outline=document.createElementNS(Dr,"rect"),this.outline.setAttribute("x","-16"),this.outline.setAttribute("y","-8"),this.outline.setAttribute("width","32"),this.outline.setAttribute("height","16"),this.outline.setAttribute("rx","6"),this.outline.setAttribute("ry","6"),this.initOutline(),this.initListeners()}getSymbolRadius(){return 21}};var Rm=class extends Fi{constructor(n,a,u,g){super(),this.init(n,a,u,g),this.upperGroup=document.createElementNS(Dr,"g"),this.initLabel();let y="0, -5  10, -10 0, 10 -10, -10";this.outline=document.createElementNS(Dr,"polygon"),this.outline.setAttribute("points",y),this.initOutline(),this.initListeners()}};var km=class extends Fi{constructor(n,a,u,g){super(),this.init(n,a,u,g),this.upperGroup=document.createElementNS(Dr,"g"),this.initLabel();let y="0, -10  10, 0 0, 10 -10, 0";this.outline=document.createElementNS(Dr,"polygon"),this.outline.setAttribute("points",y),this.initOutline(),this.initListeners()}};var Pm=Wa(Im()),s4=Wa(P1()),Ff=class extends Fi{constructor(n,a){super(),this.init(n,a),this.type="complex",this.padding=28}initLink(n){this.naryLink=n,this.naryLink.path.classList.add("complex-outline")}setLinked(){this.naryLink.path2.classList.add("linked-complex")}getPosition(n){let a=this.naryLink.mapped;a||(this.naryLink.setLinkCoordinates(),a=this.naryLink.mapped);let u=a.length,g=0,y=0;for(let k=0;k<u;k++)g+=a[k][0],y+=a[k][1];let T=[g/u,y/u];if(n){let k=this.naryLink.hull,V=[];for(let P of k)V.push(new Pm.default(P[0],P[1]));let F=new Pm.default(T[0],T[1]),G=new Pm.default(n[0],n[1]),X=s4.default.intersectLinePolygon(F,G,V);if(X.points[0])return[X.points[0].x,X.points[0].y];this.setLinked()}return T}setPosition(){console.error("error - called setPosition on ",this)}changePosition(n,a){for(let u of this.naryLink.participants)u.changePosition(n,a)}getResidueCoordinates(){return this.getPosition()}};var Dm=class extends Fi{constructor(n,a,u,g){super(),this.init(n,a,g,u),this.upperGroup=document.createElementNS(Dr,"g"),this.initLabel();let y="15,0 8,-13 -7,-13 -15,0 -8,13 7,13";this.outline=document.createElementNS(Dr,"polygon"),this.outline.setAttribute("points",y),this.initOutline(),this.initListeners()}getSymbolRadius(){return 20}};var Om=class extends Fi{constructor(n,a,u,g){super(),this.init(n,a,u,g),this.upperGroup=document.createElementNS(Dr,"g"),this.initLabel(),this.outline=document.createElementNS(Dr,"rect"),this.outline.setAttribute("x","-20"),this.outline.setAttribute("y","-10"),this.outline.setAttribute("width","40"),this.outline.setAttribute("height","20"),this.outline.setAttribute("rx","5"),this.outline.setAttribute("ry","5"),this.outline.setAttribute("stroke","black"),this.outline.setAttribute("stroke-width","4"),this.outline.setAttribute("stroke-opacity","1"),this.outline.setAttribute("fill-opacity","1"),this.outline.setAttribute("fill","#ffffff"),this.upperGroup.appendChild(this.outline),this.upperLine=document.createElementNS(Dr,"rect"),this.upperLine.setAttribute("x","-20"),this.upperLine.setAttribute("y","-10"),this.upperLine.setAttribute("width","40"),this.upperLine.setAttribute("height","20"),this.upperLine.setAttribute("rx","5"),this.upperLine.setAttribute("ry","5"),this.upperLine.setAttribute("stroke","white"),this.upperLine.setAttribute("stroke-width","2"),this.upperLine.setAttribute("stroke-opacity","1"),this.upperLine.setAttribute("fill","none"),this.upperGroup.appendChild(this.upperLine),this.initListeners()}getSymbolRadius(){return 25}};var Qs=class{constructor(n,a){this.id=n,this.app=a,this.participants=[],this.sequenceLinks=new Map}highlightParticipants(n){for(let a of this.participants)a.showHighlight(n)}mouseDown(n){return this.app.preventDefaultsAndStopPropagation(n),this.app.d3cola.stop(),this.app.dragElement=this,this.app.dragStart=n,!1}mouseOver(n){return this.app.preventDefaultsAndStopPropagation(n),this.app.setTooltip(this.getToolTip(),this.color),!1}getToolTip(){return this.id}mouseOut(n){return this.app.preventDefaultsAndStopPropagation(n),this.app.hideTooltip(),!1}touchStart(n){return this.app.preventDefaultsAndStopPropagation(n),this.app.d3cola.stop(),this.app.dragElement=this,this.app.dragStart=n,!1}hide(){this.highlightLine.remove(),this.line.remove()}_createElement(n,a=[]){let u=document.createElementNS(Dr,n);return u.classList.add(...a),u.onmousedown=g=>this.mouseDown(g),u.onmouseover=g=>this.mouseOver(g),u.onmouseout=g=>this.mouseOut(g),u}};var Ba=class t extends Qs{constructor(n,a,u){super(n,a),u&&(this.sourceId=u),this.binaryLinks=new Map,this.unaryLinks=new Map}get path(){return this._path||(this._path=this._createElement("path"),this.app.stoichiometryExpanded?(this.color=t.naryColors(this.sourceId?this.sourceId:this.id),this._path.setAttribute("fill",this.color)):(this._path.setAttribute("fill","none"),this._path.setAttribute("stroke","black")),this._path.ontouchstart=n=>self.touchStart(n)),this._path}get path2(){return this._path2||(this._path2=this._createElement("path"),this._path2.setAttribute("fill","none"),this._path2.ontouchstart=n=>self.touchStart(n)),this._path2}showHighlight(n){this.highlightParticipants(n)}check(){return this.show(),!0}show(){this.app.naryLinks.appendChild(this.path),this.app.naryLinks.appendChild(this.path2)}setLinkCoordinates(n){let a=g=>{let y=_p(g);return this.hull=y,`M${y.join("L")}Z`};this.mapped=this.orbitNodes(this.getMappedCoordinates());let u=a(this.mapped);u&&(this.path.setAttribute("d",u),this.path2.setAttribute("d",u)),this.complex&&!n&&this.complex.setAllLinkCoordinates()}getMappedCoordinates(){let n=this.participants,a=[],u=n.length;for(let g=0;g<u;g++){let y=n[g];if(y.type==="complex")a=a.concat(this.orbitNodes(y.naryLink.getMappedCoordinates(),20));else if(y.expanded){let T=y.getResidueCoordinates(0),k=y.getResidueCoordinates(y.size);!isNaN(T[0])&&!isNaN(T[1])&&!isNaN(k[0])&&!isNaN(k[1])?(a.push(T),a.push(k)):a.push(y.getPosition())}else a.push(y.getPosition())}return a}orbitNodes(n,a=20){let u=[],g=n.length;for(let y=0;y<g;y++){let T=n[y];for(let k=0;k<a;k++){let V=360/a*k,F=[T[0]+t.orbitRadius,T[1]];u.push(vs(F,T,V))}}return u}};Ba.orbitRadius=28;var Nm=class extends Qs{constructor(n,a,u,g){super(n,g),this.fromSequenceData=a,this.toSequenceData=u,this.participants=[this.fromSequenceData[0].participant,this.toSequenceData[0].participant]}get glyph(){return this._glyph||(this._glyph=this._createElement("path",["link","feature-link","certain-link"])),this._glyph}get uncertainGlyph(){return this._uncertainGlyph||(this._uncertainGlyph=this._createElement("path",["link","feature-link","uncertain-link"])),this._uncertainGlyph}check(){return this.anyParticipantIsBar()===!0?(this.show(),!0):(this.hide(),!1)}anyParticipantIsBar(){let n=this.participants.length;for(let a=0;a<n;a++)if(this.participants[a].expanded)return!0;return!1}show(){this.setLinkCoordinates();let n=this.app.res_resLinks;this.participants[0]===this.participants[1]&&(n=this.app.selfRes_resLinks),n.appendChild(this.glyph),n.appendChild(this.uncertainGlyph)}hide(){this.glyph.remove(),this.uncertainGlyph.remove()}setLinkCoordinates(){function n(l){return!isNaN(parseFloat(l))&&isFinite(l)}function a(l,_,v,c,h,f,m){let b,w;return h.expanded?(b=h.getResidueCoordinates(v,f),w=h.getResidueCoordinates(c,f)):(b=h.getPosition(m),w=b),` Q${_[0]},${_[1]} ${b[0]},${b[1]} L${w[0]},${w[1]} Q${_[0]},${_[1]} ${l[0]},${l[1]} `}function u(l,_){let v=null,c=null,h=l.length;for(let f=0;f<h;f++){let m=l[f];if(!isNaN(parseFloat(m.begin))&&isFinite(m.begin)){let b=m.begin*1;(v===null||b<v)&&(v=b)}if(!isNaN(parseFloat(m.uncertainBegin))&&isFinite(m.uncertainBegin)){let b=m.uncertainBegin*1;(v===null||b<v)&&(v=b)}if(!isNaN(parseFloat(m.end))&&isFinite(m.end)){let b=m.end*1;(c===null||b>c)&&(c=b)}if(!isNaN(parseFloat(m.uncertainEnd))&&isFinite(m.uncertainEnd)){let b=m.uncertainEnd*1;(c===null||b>c)&&(c=b)}}return _.getResidueCoordinates((v+c)/2,0)}let g=this.fromSequenceData[0].participant,y=this.toSequenceData[0].participant,T,k;g.expanded&&(T=u(this.fromSequenceData,g)),y.expanded&&(k=u(this.toSequenceData,y)),g.expanded||(T=g.getPosition(k)),y.expanded||(k=y.getPosition(T));let V=T,F=k,G=T[0]-k[0],X=T[1]-k[1],O=Math.atan2(X,G)/(2*Math.PI)*360;O<0&&(O+=360);let H=O-g.rotation;H<0&&(H+=360);let q=10;H<180&&(q=-10);let B=g.rotation/360*Math.PI*2;H>180&&(B-=Math.PI),H=O-y.rotation,H<0&&(H+=360);let j=10;H>180&&(j=-10);let U=y.rotation/360*Math.PI*2;H<180&&(U-=Math.PI);let i=[T[0]+30*Math.sin(B)*this.app.z,T[1]-30*Math.cos(B)*this.app.z];g.expanded||(i=T);let r=[k[0]+30*Math.sin(U)*this.app.z,k[1]-30*Math.cos(U)*this.app.z];y.expanded||(r=k);let e=[(i[0]+r[0])/2,(i[1]+r[1])/2],o=this.fromSequenceData.length,s=this.toSequenceData.length,d,p=`M${e[0]},${e[1]}`,x=`M${e[0]},${e[1]}`;for(let l=0;l<o;l++)d=this.fromSequenceData[l],(n(d.begin)&&n(d.end)||g.type!=="protein")&&(p+=a(e,i,d.begin,d.end,g,q,F)),n(d.uncertainBegin)&&(x+=a(e,i,d.uncertainBegin,d.begin,g,q,F)),n(d.uncertainEnd)&&(x+=a(e,i,d.end,d.uncertainEnd,g,q,F));for(let l=0;l<s;l++)d=this.toSequenceData[l],(n(d.begin)&&n(d.end)||y.type!=="protein")&&(p+=a(e,r,d.begin,d.end,y,j,V)),n(d.uncertainBegin)&&(x+=a(e,r,d.uncertainBegin,d.begin,y,j,V)),n(d.uncertainEnd)&&(x+=a(e,r,d.end,d.uncertainEnd,y,j,V));this.glyph.setAttribute("d",p),this.uncertainGlyph.setAttribute("d",x)}};var u4=Wa(P1()),Lm=Wa(Im());var Jc=class extends Qs{get line(){throw new Error("line must be implemented")}get highlightLine(){throw new Error("highlightLine must be implemented")}hide(){this.highlightLine.remove(),this.line.remove()}};var Fm=class extends Jc{constructor(n,a,u,g){super(n,a),this.participants=[u,g],this.sequenceLinks=new Map}get line(){return this._line||(this._line=this._createElement("line",["link","link-line"])),this._line}get highlightLine(){return this._highlightLine||(this._highlightLine=this._createElement("line",["link","highlight","link-highlight"])),this._highlightLine}check(){return!this.participants[0].expanded&&!this.participants[1].expanded?(this.show(),!0):(this.hide(),!1)}show(){this.line.setAttribute("stroke-width",this.app.z*1),this.highlightLine.setAttribute("stroke-width",this.app.z*10),this.setLinkCoordinates(this.participants[0]),this.setLinkCoordinates(this.participants[1]),this.app.highlights.appendChild(this.highlightLine),this.app.p_pLinks.appendChild(this.line)}setLinkCoordinates(){let n=this.participants[0].getPosition(),a=this.participants[1].getPosition(),u,g,y,T,k,V=function(F){u=F.naryLink.hull,g=[];for(let G of u)g.push(new Lm.default(G[0],G[1]));if(y=new Lm.default(n[0],n[1]),T=new Lm.default(a[0],a[1]),k=u4.default.intersectLinePolygon(y,T,g),k.points[0])return[k.points[0].x,k.points[0].y]};if(this.participants[0].type==="complex"){let F=V(this.participants[0]);F&&(n=F)}if(this.participants[1].type==="complex"){let F=V(this.participants[1]);F&&(a=F)}this.line.setAttribute("x1",n[0]),this.line.setAttribute("y1",n[1]),this.highlightLine.setAttribute("x1",n[0]),this.highlightLine.setAttribute("y1",n[1]),this.line.setAttribute("x2",a[0]),this.line.setAttribute("y2",a[1]),this.highlightLine.setAttribute("x2",a[0]),this.highlightLine.setAttribute("y2",a[1])}};var Um=class extends Jc{constructor(n,a,u){super(n,a),this.participants=[u],u.selfLink=this}get line(){return this._line||(this._line=this._createElement("path",["link","link-line"])),this._line}get highlightLine(){return this._highlightLine||(this._highlightLine=this._createElement("path",["link","highlight","link-highlight"])),this._highlightLine}initSelfLinkSVG(){let n=this.participants[0].getAggregateSelfLinkPath();this.line.setAttribute("d",n),this.highlightLine.setAttribute("d",n)}check(){return this.participants[0].expanded?(this.hide(),!1):(this.show(),!0)}show(){this.initSelfLinkSVG(),this.line.setAttribute("transform",`translate(${this.participants[0].ix} ${this.participants[0].iy}) scale(${this.app.z})`),this.highlightLine.setAttribute("transform",`translate(${this.participants[0].ix} ${this.participants[0].iy}) scale(${this.app.z})`),this.app.highlights.appendChild(this.highlightLine),this.app.p_pLinks.appendChild(this.line)}setLinkCoordinates(){let n=this.participants[0];this.line.setAttribute("transform",`translate(${n.ix} ${n.iy}) scale(${this.app.z})`),this.highlightLine.setAttribute("transform",`translate(${n.ix} ${n.iy}) scale(${this.app.z})`)}};function l4(t){let n=t.data.filter(function(u){return u.object==="interaction"}),a=t.data.filter(function(u){return u.object==="interactor"});return n.forEach(function(u){u.participants.filter(function(k){if(k.stoichiometry>1)return k}).forEach(function(k){if(c4(a,"id",k.interactorRef))for(let F=0;F<k.stoichiometry-1;F++){let G=JSON.parse(JSON.stringify(k));G.id=`${G.id}_${F}`,G.cloneParentID=k.id,G.cloneIteration=F,k.cloned=!0,G.features&&G.features.forEach(function(X){X.clonedfrom=X.id,X.id=`${X.id}_${F}`,X.sequenceData.forEach(function(P){P.participantRef=G.id})}),u.participants.push(G)}});let y=new Map;u.participants.forEach(function(k){k.features&&k.features.forEach(function(V){V.parentParticipant=k.id,y.set(V.id,V)})});let T=Array.from(y.values());T.forEach(function(k){k.clonedfrom&&T.forEach(function(V){let F=V.linkedFeatures;if(F&&F.indexOf(k.clonedfrom)>-1){let G=JSON.parse(JSON.stringify(V));G.id=`${V.id}_${k.id}`,G.linkedFeatures=[],G.linkedFeatures.push(k.id),c4(u.participants,"id",G.parentParticipant).features.push(G)}})})}),n.forEach(function(u){u.participants.forEach(function(g){g.stoichiometry=null})}),t}function c4(t,n,a){for(let u=0;u<t.length;u+=1)if(t[u][n]===a)return t[u]}function f4(t){let n=t.data.filter(function(u){return u.object==="interaction"}),a=new Map;return n.forEach(function(u){u.participants.filter(function(y){if(y.interactorRef.indexOf("complex")!==-1)return y}).forEach(function(y){let T=M7(n,"id",y.interactorRef);if(T){let k=a.get(y.interactorRef);k?k=k+1:k=1,a.set(y.interactorRef,k);let V=k;if(V>1){y.interactorRef=`${y.interactorRef}_${V}`,y.features&&y.features.forEach(function(G){G.copiedfrom=G.id,G.sequenceData.forEach(function(X){X.participantRef=`${X.participantRef}_${V}`})});let F=JSON.parse(JSON.stringify(T));F.sourceId=F.id,F.id=`${F.id}_${V}`,t.data.push(F);for(let G of F.participants){let X=G;X.id=`${X.id}_${V}`,X.features&&X.features.forEach(function(P){P.id=`${P.id}_${V}`,P.sequenceData.forEach(function(H){H.participantRef=X.id});let O=P.linkedFeatures.length;for(let H=0;H<O;H++)P.linkedFeatures[H]=`${P.linkedFeatures[H]}_${V}`})}}}})}),t}function M7(t,n,a){for(let u=0;u<t.length;u+=1)if(t[u][n]===a)return t[u]}function h4(t){let n=t.data.filter(function(a){return a.object==="interaction"});return n.forEach(function(a){a.participants.filter(function(g){if(g.interactorRef.indexOf("complex")!==-1)return g}).forEach(function(g){let y=A7(n,"id",g.interactorRef);if(y)for(let T=1;T<g.stoichiometry;T++){g.features&&g.features.forEach(function(V){V.copiedfrom=V.id,V.sequenceData.forEach(function(F){F.participantRef=`${F.participantRef}_${T}`})});let k=JSON.parse(JSON.stringify(y));k.sourceId=k.id,k.id=`${k.id}_${T}`,k.interactorRef=`${g.interactorRef}_${T}`,t.data.push(k);for(let V of k.participants){let F=V;F.id=`${F.id}_${T}`,F.features&&F.features.forEach(function(G){G.id=`${G.id}_${T}`,G.sequenceData.forEach(function(P){P.participantRef=F.id});let X=G.linkedFeatures.length;for(let P=0;P<X;P++)G.linkedFeatures[P]=`${G.linkedFeatures[P]}_${T}`})}a.participants.push(k)}})}),t}function A7(t,n,a){for(let u=0;u<t.length;u+=1)if(t[u][n]===a)return t[u]}function d4(t,n,a=!0){n.stoichiometryExpanded=a,t=typeof t=="object"?t:JSON.parse(t),t.data=t.data.reverse(),n.features=new Map;let u=new Map;a&&(t=h4(t)),t=f4(t),n.interactors=new Map;for(let O of t.data)O.object==="interactor"&&n.interactors.set(O.id,O);a?g():k();for(let O of t.data)if(O.object==="interaction")for(let H of O.participants){let q=new Array(0);H.features&&(q=H.features);for(let B of q){let j=B.sequenceData;if(B.linkedFeatures){let U=B.linkedFeatures,i=U.length;for(let r=0;r<i;r++){let e=new Map,o=n.features.get(U[r]);for(let s of o.sequenceData){let d=s.interactorRef;a&&(d=`${d}(${s.participantRef})`);let p=e.get(d);typeof p>"u"&&(p=[],e.set(d,p)),p=p.push(s)}for(let s of e.values()){let d=F(j[0]),p=F(s[0]),x;d===p?x=X(d,O):x=P(d,p,O);let l=G(j,s,O);d.sequenceLinks.set(l.id,l),p.sequenceLinks.set(l.id,l),x.sequenceLinks.set(l.id,l)}}}}}n.complexes=Array.from(u.values());for(let O=0;O<n.complexes.length;O++){let H=n.complexes[O],q;a?q=H.id.substring(0,H.id.indexOf("(")):q=H.id;for(let B of t.data)if(B.object==="interaction"&&B.id===q){let j=V(B),U=n.allNaryLinks.get(j);H.initLink(U),U.complex=H}}for(let O of n.features.values()){let H="";if(typeof O.name<"u"&&(H+=O.name+" "),typeof O.detmethod<"u"&&(H+=", "+O.detmethod.name),O.sequenceData)for(let q of O.sequenceData){let B=q.interactorRef;a&&(B=`${B}(${q.participantRef})`);let j=n.participants.get(B);if(j){let U=new fa(j,q.pos),i=new ms(H,U),r=j.annotationSets.get("MI Features");r||(r=[],j.annotationSets.set("MI Features",r)),r.push(i)}else console.log(`participant ${B} not found!`)}}function g(){let O=0;for(let H of t.data)if(H.object==="interaction")for(let q of H.participants)q.stoichiometry&&q.stoichiometry-0>O&&(O=q.stoichiometry-0);O<20&&(t=l4(t)),T();for(let H of t.data)if(H.object==="interaction"){let q=H.id||V(H),B=n.allNaryLinks.get(q);typeof B>"u"&&(B=new Ba(q,n,H.sourceId),n.allNaryLinks.set(q,B),H.naryId=q);for(let j of H.participants){let U=j.interactorRef,i=j.id,r=`${U}(${i})`,e=n.participants.get(r);if(typeof e>"u"){let o=n.interactors.get(U);e=y(o,r,U),n.participants.set(r,e)}e.naryLinks.set(q,B),B.participants.indexOf(e)===-1&&B.participants.push(e),j.stoichiometry&&n.participants.get(r).addStoichiometryLabel(j.stoichiometry)}}}function y(O,H,q){let B;if(typeof O>"u"||O.type.id==="MI:1302"){let j=!1;for(let U of t.data)if(U.object==="interaction"&&U.id===q){j=!0;break}j?(B=new Ff(H,n,q),u.set(H,B)):B=new Dm(H,n,q,O)}else O.type.id==="MI:1304"||O.type.id==="MI:1305"||O.type.id==="MI:1307"||O.type.id==="MI:1306"?B=new Om(H,n,O,O.label):O.type.id==="MI:1100"||O.type.id==="MI:0904"||O.type.id==="MI:0328"||O.type.id==="MI:2258"?B=new Mm(H,n,O,O.label):O.type.id==="MI:0326"||O.type.id==="MI:0327"?B=new Tm(H,n,O,O.label,O.sequence):O.type.id==="MI:0250"?B=new Am(H,n,O,O.label):O.type.id==="MI:0320"||O.type.id==="MI:0321"||O.type.id==="MI:0322"||O.type.id==="MI:0323"||O.type.id==="MI:2190"||O.type.id==="MI:0324"||O.type.id==="MI:0679"||O.type.id==="MI:0608"||O.type.id==="MI:0611"||O.type.id==="MI:0610"||O.type.id==="MI:0607"||O.type.id==="MI:0609"||O.type.id==="MI:0325"||O.type.id==="IA:2966"||O.type.id==="MI:2359"||O.type.id==="MI:0318"||O.type.id==="MI:2204"?B=new km(H,n,O,O.label):O.type.id==="MI:0319"||O.type.id==="MI:0681"||O.type.id==="MI:0680"?B=new Rm(H,n,O,O.label):alert(`Unrecognised type:${O.type.name}`);return B}function T(){for(let O of t.data)if(O.object==="interaction")for(let H of O.participants){let q=new Array(0);H.features&&(q=H.features);let B=q.length;for(let j=0;j<B;j++){let U=q[j];for(let i of U.sequenceData)i.interactorRef||(i.interactorRef=H.interactorRef),i.participantRef||(i.participantRef=U.parentParticipant);n.features.set(U.id,U)}}}function k(){for(let O of n.interactors.values()){let H=O.id,q=y(O,H);n.participants.set(H,q)}T();for(let O of t.data)if(O.object==="interaction"){let H=O.participants,q=H.length,B=V(O),j=n.allNaryLinks.get(B);typeof j>"u"&&(j=new Ba(B,n),n.allNaryLinks.set(B,j));for(let r=0;r<q;r++){let e=H[r],o=e.interactorRef,s=n.participants.get(o);typeof s>"u"&&(s=new Ff(o,n),u.set(o,s),n.participants.set(o,s)),s.naryLinks.set(B,j),j.participants.indexOf(s)===-1&&j.participants.push(s);let d=n.participants.get(o);d.stoich=d.stoich?d.stoich:0,e.stoichiometry?d.stoich+=+e.stoichiometry:d.stoich+=1}let U=n.participants.values(),i=U.length;for(let r=0;r<i;r++){let e=U[r];e.addStoichiometryLabel(e.stoich)}}}function V(O){if(O.naryId)return O.naryId;let H=O.participants,q=H.length,B=new Set;for(let j=0;j<q;j++){let U=H[j].interactorRef;a&&(U=`${U}(${H[j].id})`),B.add(U)}return Array.from(B.values()).sort().join("-")}function F(O){let H=O.interactorRef;return a&&(H=`${H}(${O.participantRef})`),n.participants.get(H)}function G(O,H,q){function B(s){let d=new Set;for(let p=0;p<s.length;p++){let x=s[p],l=x.interactorRef;a&&(l=`${l}(${x.participantRef})`),l=`${l}:${x.pos}`,d.add(l)}return Array.from(d.values()).sort().join(";")}let j=B(O),U=B(H),i;j<U?i=`${j}><${U}`:i=`${U}><${j}`;let r=n.allSequenceLinks.get(i);if(typeof r>"u"){let s=[];for(let p of O)s.push(new fa(F(p),p.pos));let d=[];for(let p of H)d.push(new fa(F(p),p.pos));r=new Nm(i,s,d,n,q),n.allSequenceLinks.set(i,r)}let e=V(q);return n.allNaryLinks.get(e).sequenceLinks.set(i,r),r}function X(O,H){let q=`-${O.id}-${O.id}`,B=n.allUnaryLinks.get(q);typeof B>"u"&&(B=new Um(q,n,O),n.allUnaryLinks.set(q,B),O.appLink=B);let j=V(H);return n.allNaryLinks.get(j).unaryLinks.set(q,B),B}function P(O,H,q){let B,j,U;O.id<H.id?(B=`-${O.id}-${H.id}`,j=O,U=H):(B=`-${H.id}-${O.id}`,j=H,U=O);let i=n.allBinaryLinks.get(B);typeof i>"u"&&(i=new Fm(B,n,j,U),j.binaryLinks.set(B,i),U.binaryLinks.set(B,i),n.allBinaryLinks.set(B,i));let r=V(q);return n.allNaryLinks.get(r).binaryLinks.set(B,i),i}}function p4(t,n){let a=Array.from(t.participants.values()).filter(function(y){return y.type==="protein"}),u=0,g=a.length;for(let y of a){let k=new RegExp("[OPQ][0-9][A-Z0-9]{3}[0-9]|[A-NR-Z][0-9]([A-Z][A-Z0-9]{2}[0-9]){1,2}![-]","i").exec(y.json.identifier.id);k&&k[0]===y.json.identifier.id.trim()&&(k7(y,function(){u++,u===g&&n()}),R7(y,function(){u++,u===g&&n()}))}}function R7(t,n){let a=`https://www.ebi.ac.uk/proteins/api/proteins/${t.json.identifier.id.trim()}`;vd(a).then(u=>{let g=t.annotationSets.get("UniprotKB");if(typeof g>"u"&&(g=[],t.annotationSets.set("UniprotKB",g)),u)for(let y of u.features.filter(T=>T.type==="DOMAIN")){let T=new ms(y.description,new fa(null,`${y.begin}-${y.end}`));g.push(T)}n()})}function k7(t,n){let a=`https://supfam.org/SUPERFAMILY/cgi-bin/das/up/features?segment=${t.json.identifier.id.trim()}`;gd(a).then(u=>{let g=t.annotationSets.get("Superfamily");if(typeof g>"u"&&(g=[],t.annotationSets.set("Superfamily",g)),u){let y=u.getElementsByTagName("FEATURE");for(let T of y){let k=T.getElementsByTagName("TYPE")[0];if(k.getAttribute("category")==="miscellaneous"){let F=I7(k.getAttribute("id")),G=T.getElementsByTagName("START")[0].textContent,X=T.getElementsByTagName("END")[0].textContent;g.push(new ms(F,new fa(null,`${G}-${X}`)))}}}n()})}function I7(t){return t.replace(/&([^;]+);/gm,(n,a)=>P7[a]||n)}var P7={amp:"&",apos:"'","#x27":"'","#x2F":"/","#39":"'","#47":"/",lt:"<",gt:">",nbsp:" ",quot:'"'};var O1=Wa(v4()),el=class t{constructor(n,a=4){this.debug=!1,this.el=n,this.el.textContent="",this.maxCountInitiallyExpanded=a,this.d3cola=g4.d3adaptor(Lf).groupCompactness(Number.MIN_VALUE).avoidOverlaps(!0);let u=Er(this.el).append("div").classed("custom-menu-margin",!0).append("div").classed("custom-menu",!0).append("ul"),g=u.append("li").classed("collapse",!0);g.text("Collapse"),g.node().onclick=O=>this.collapseProtein(O);let T=u.append("li").text("Scale: ").selectAll("ul.custom-menu").data(t.barScales).enter().append("div").attr("class","bar-scale").append("label");T.append("span").text(O=>O===8?"AA":O),T.append("input").attr("class",O=>`scaleButton scaleButton_${O*100}`).attr("name","scaleButtons").attr("type","radio").on("change",(O,H)=>{this.preventDefaultsAndStopPropagation(H),this.contextMenuProt.setStickScale(H,this.contextMenuPoint)});let k=Er(".custom-menu-margin").node(),V=this;k.onmouseout=function(O){let H=O.relatedTarget;do{if(H===this)return;H=H.parentNode}while(H);V.contextMenuProt=null,Er(this).style("display","none")},this.svgElement=document.createElementNS(Dr,"svg"),this.svgElement.classList.add("complexViewerSVG"),this.svgElement.onmousedown=O=>this.mouseDown(O),this.svgElement.onmousemove=O=>this.move(O),this.svgElement.onmouseup=O=>this.mouseUp(O),this.svgElement.onmouseout=O=>this.mouseOut(O),this.svgElement.ontouchstart=O=>this.touchStart(O),this.svgElement.ontouchmove=O=>this.move(O),this.svgElement.ontouchend=O=>this.mouseUp(O),this.lastMouseUp=new Date().getTime(),this.el.oncontextmenu=function(O){return O.preventDefault&&O.preventDefault(),O.returnValue=!1,!1};let F=/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel";document.attachEvent?this.svgElement.attachEvent(`on${F}`,O=>this.mouseWheel(O)):document.addEventListener&&this.svgElement.addEventListener(F,O=>this.mouseWheel(O),!1),this.hoverListeners=new Set,this.expandListeners=new Set,this.el.appendChild(this.svgElement),this.container=document.createElementNS(Dr,"g"),this.container.setAttribute("id","container");let G=Er(this.svgElement);this.defs=G.append("defs"),this.acknowledgement=document.createElementNS(Dr,"g");let X=document.createElementNS(Dr,"text");X.innerHTML="<a href='https://academic.oup.com/bioinformatics/article/33/22/3673/4061280' target='_blank'><tspan x='0' dy='1.2em' style='text-decoration: underline'>ComplexViewer "+qx.version+"</tspan></a><tspan x='0' dy='1.2em'>by <a href='https://rappsilberlab.org/' target='_blank'>Rappsilber Laboratory</a></tspan>",this.acknowledgement.appendChild(X),X.setAttribute("font-size","8pt"),this.svgElement.appendChild(this.acknowledgement),this.naryLinks=document.createElementNS(Dr,"g"),this.naryLinks.setAttribute("id","naryLinks"),this.container.appendChild(this.naryLinks),this.p_pLinksWide=document.createElementNS(Dr,"g"),this.p_pLinksWide.setAttribute("id","p_pLinksWide"),this.container.appendChild(this.p_pLinksWide),this.highlights=document.createElementNS(Dr,"g"),this.highlights.setAttribute("class","highlights"),this.container.appendChild(this.highlights),this.res_resLinks=document.createElementNS(Dr,"g"),this.res_resLinks.setAttribute("id","res_resLinks"),this.container.appendChild(this.res_resLinks),this.p_pLinks=document.createElementNS(Dr,"g"),this.p_pLinks.setAttribute("id","p_pLinks"),this.container.appendChild(this.p_pLinks),this.proteinUpper=document.createElementNS(Dr,"g"),this.proteinUpper.setAttribute("id","proteinUpper"),this.container.appendChild(this.proteinUpper),this.selfRes_resLinks=document.createElementNS(Dr,"g"),this.selfRes_resLinks.setAttribute("id","res_resLinks"),this.container.appendChild(this.selfRes_resLinks),this.svgElement.appendChild(this.container),this.tooltip=document.createElementNS(Dr,"text"),this.tooltip.setAttribute("x","0"),this.tooltip.setAttribute("y","0");let P=document.createTextNode("tooltip");this.tooltip.classList.add("label","tooltip"),this.tooltip.appendChild(P),this.tooltip_bg=document.createElementNS(Dr,"rect"),this.tooltip_bg.classList.add("tooltip-background"),this.tooltip_subBg=document.createElementNS(Dr,"rect"),this.tooltip_subBg.classList.add("tooltip-sub-background"),this.svgElement.appendChild(this.tooltip_subBg),this.svgElement.appendChild(this.tooltip_bg),this.svgElement.appendChild(this.tooltip),this.annotationSetsShown=new Map,this.annotationSetsShown.set("Interactor",!1),this.annotationSetsShown.set("UniprotKB",!1),this.annotationSetsShown.set("Superfamily",!1),this.annotationSetsShown.set("MI Features",!0),this.clear()}clear(){this.d3cola.stop(),this.naryLinks.textContent="",this.p_pLinksWide.textContent="",this.highlights.textContent="",this.p_pLinks.textContent="",this.res_resLinks.textContent="",this.proteinUpper.textContent="",this.selfRes_resLinks.textContent="",this.dragElement=null,this.dragStart=null,this.participants=new Map,this.allNaryLinks=new Map,this.allBinaryLinks=new Map,this.allUnaryLinks=new Map,this.allSequenceLinks=new Map,this.complexes=[];let n=[];for(let a of Xp){let u=ks(a);u.l=.9,n.push(`${u}`)}Ba.naryColors=aa().range(n),this.z=1,this.hideTooltip(),this.state=t.STATES.MOUSE_UP}collapseProtein(){Er(".custom-menu-margin").style("display","none"),this.contextMenuProt.setExpanded(!1,this.contextMenuPoint),this.contextMenuProt=null,this.notifyExpandListeners()}init(){this.d3cola.stop();let n=0;for(let y of this.participants.values())y.size>n&&(n=y.size);let u=this.svgElement.parentNode.clientWidth*.8/n;function g(y,T){let k=ma(function(F){return F}).left,V=k(y,T);return V===0||V===1?y[1]:V===y.length?y[y.length-1]:y[V-1]}this.defaultBarScale=g(t.barScales,u);for(let y of this.participants.values())y.type!=="complex"&&(y.setPosition(-500,-500),this.proteinUpper.appendChild(y.upperGroup));for(let y of this.participants.values())y.type==="protein"&&(y.stickZoom=this.defaultBarScale,this.participants.size<this.maxCountInitiallyExpanded&&y.toStick(!1));this.updateAnnotations(),p4(this,()=>this.updateAnnotations()),this.checkLinks(),this.autoLayout()}zoomToExtent(){let n=this.svgElement.parentNode.clientWidth,a=this.svgElement.parentNode.clientHeight,u=this.container.getBBox(),g=(n/u.width).toFixed(4),y=(a/u.height).toFixed(4),T;if(y<g?T=y:T=g,T<1){g=(n-40)/u.width,y=(a-40)/u.height;let k;y<g?k=y:k=g,k>this.z&&(k=this.z);let V=-u.x+20/k,F=-u.y+20/k;this.container.setAttribute("transform",`scale(${k}) translate(${V} ${F}) `),this.z=this.container.getCTM().inverse().a}else{let k=n-u.width,V=a-u.height,F=k/2-u.x,G=V/2-u.y;this.container.setAttribute("transform",`scale(1) translate(${F} ${G})`),this.z=1}this.acknowledgement.setAttribute("transform",`translate(${n-150}, ${a-30})`)}autoLayout(){this.d3cola.stop();let n=[],a=[],u=this;for(let G of this.participants.values())G.type!=="complex"&&(a.push(G),G.binaryLinks.size>2&&n.push(G)),delete G.x,delete G.y,delete G.px,delete G.py,delete G.bounds,G.fixed=0;let g=a.length<30?30:20,y=this.svgElement.parentNode.clientWidth,T=this.svgElement.parentNode.clientHeight;this.d3cola.size([T-40,y-40]).symmetricDiffLinkLengths(g);function k(G){let X=[],P={},O=0;for(let H of G)P[H.id]=O,O++;for(let H of u.allBinaryLinks.values()){let q=H.participants[0],B=H.participants[1];if(q!==B&&G.indexOf(q)!==-1&&G.indexOf(B)!==-1){let j={};j.source=P[q.id],j.target=P[B.id],j.id=H.id,X.push(j)}}return X}F(n,k(n),!0);let V=k(a);F(a,V,!0),F(a,V,!1);function F(G,X,P){delete u.d3cola._lastStress,delete u.d3cola._alpha,delete u.d3cola._descent,delete u.d3cola._rootGroup,u.d3cola.nodes(G).links(X);let O;if(u.debug&&(O=Er(u.container).selectAll(".node").data(G),O.enter().append("rect").classed("node",!0).attr({rx:5,ry:5}).style("stroke","red").style("fill","none"),O.exit().remove()),P)u.d3cola.groups([]).start(23,10,0,0,!1);else{let H=[];if(u.complexes){for(let q of u.complexes){q.leaves=[],q.groups=[];for(let B of q.naryLink.participants)B.type!=="complex"&&q.leaves.push(G.indexOf(B));H.push(q)}for(let q of u.complexes)for(let B of q.naryLink.participants)B.type==="complex"&&q.groups.push(H.indexOf(B))}u.d3cola.groups(H).start(0,10,1,0,!0).on("tick",()=>{let q=u.d3cola.nodes();for(let B of q)B.setPositionFromCola(B.x,B.y);u.setAllLinkCoordinates(),u.zoomToExtent(),u.debug&&O.attr({x:B=>B.bounds.x,y:B=>B.bounds.y,width:B=>B.bounds.width(),height:B=>B.bounds.height()})})}}}getSVG(){let a=[Er(this.el).selectAll("svg").node()],u=Wo.capture(a);return Wo.makeXMLStr(new XMLSerializer,u[0])}readMIJSON(n,a=!0){d4(n,this,a),this.init()}checkLinks(){for(let n of this.allNaryLinks.values())n.check();for(let n of this.allBinaryLinks.values())n.check();for(let n of this.allUnaryLinks.values())n.check();for(let n of this.allSequenceLinks.values())n.check()}setAllLinkCoordinates(){for(let n of this.allNaryLinks.values())n.setLinkCoordinates();for(let n of this.allBinaryLinks.values())n.setLinkCoordinates();for(let n of this.allUnaryLinks.values())n.setLinkCoordinates();for(let n of this.allSequenceLinks.values())n.setLinkCoordinates()}moveTooltip(n){let a,u,g=this.tooltip.getComputedTextLength()+16,y=this.svgElement.parentNode.clientWidth,T=this.svgElement.parentNode.clientHeight;n.x+20+g<y?a=n.x:a=y-g-20,n.y+60<T?u=n.y:u=T-60,this.tooltip.setAttribute("x",a+22),this.tooltip.setAttribute("y",u+47),this.tooltip_bg.setAttribute("x",a+16),this.tooltip_bg.setAttribute("y",u+28),this.tooltip_subBg.setAttribute("x",a+16),this.tooltip_subBg.setAttribute("y",u+28)}setTooltip(n,a){if(!this.dragStart)if(n){this.tooltip.firstChild.data=n.toString().replace(/&(quot);/g,'"'),this.tooltip.setAttribute("display","block");let u=this.tooltip.getComputedTextLength();this.tooltip_bg.setAttribute("width",u+16),this.tooltip_subBg.setAttribute("width",u+16),typeof a<"u"&&a!=null?(this.tooltip_bg.setAttribute("fill",a),this.tooltip_bg.setAttribute("stroke",a),this.tooltip_bg.setAttribute("fill-opacity","0.0")):(this.tooltip_bg.setAttribute("fill","white"),this.tooltip_bg.setAttribute("stroke","grey")),this.tooltip_bg.setAttribute("height","28"),this.tooltip_subBg.setAttribute("height","28"),this.tooltip_bg.setAttribute("display","block"),this.tooltip_subBg.setAttribute("display","block")}else this.hideTooltip()}showTooltip(n){this.moveTooltip(n),this.tooltip.setAttribute("display","block"),this.tooltip_bg.setAttribute("display","block"),this.tooltip_subBg.setAttribute("display","block")}hideTooltip(){this.tooltip.setAttribute("display","none"),this.tooltip_bg.setAttribute("display","none"),this.tooltip_subBg.setAttribute("display","none")}setAnnotations(n){n=n.toUpperCase();for(let a of this.annotationSetsShown.keys())this.annotationSetsShown.set(a,n===a);return this.updateAnnotations(),this.getColorKeyJson()}showAnnotations(n,a){return this.annotationSetsShown.set(n,a),this.updateAnnotations(),this.getColorKeyJson()}updateAnnotations(){this.defs.textContent="",this.uncertainCategories=new Set,this.certainCategories=new Set,delete this.featureColors;let n=new Set;for(let y of this.participants.values())for(let[T,k]of y.annotationSets)if(this.annotationSetsShown.get(T)===!0)for(let V of k.values())n.add(V.description);let a;n.size<=10?a=aa().range(Yp):a=aa().range(["#38cae3","#d4582b","#7d5fd7","#7cd352","#ce4bbb","#5aa33c","#93539d","#d2c33b","#5c83d4","#e19a46","#d891d7","#65da9a","#9d772f","#d43f4c","#4db186","#cf4b7e","#477c3a","#c46d5c","#b6c671","#798126"]);let u=this;function g(y,T){let k=u.defs.append("pattern").attr("id",y).attr("patternUnits","userSpaceOnUse").attr("x",0).attr("y",0).attr("width",12).attr("height",12).attr("patternTransform","rotate(45)");k.append("rect").attr("x",0).attr("y",2).attr("width",12).attr("height",4).attr("fill",T),k.append("rect").attr("x",0).attr("y",8).attr("width",12).attr("height",4).attr("fill",T)}for(let y of this.participants.values())if(y.type==="protein"){y.clearPositionalFeatures(),y.updatePositionalFeatures();for(let[T,k]of y.annotationSets)if(this.annotationSetsShown.get(T)===!0)for(let V of k){let F;if(V.description==="No annotations"?F="#eeeeee":F=a(V.description),V.certain&&(V.certain.setAttribute("fill",F),V.certain.setAttribute("stroke",F),this.certainCategories.add(V.description)),V.fuzzyStart||V.fuzzyEnd){if(!this.uncertainCategories.has(name)){let X=new D1.default(F),P=`rgba(${X.r},${X.g},${X.b}, 0.6)`;g(`hatched_${V.description}_${F.toString()}`,P),this.uncertainCategories.add(V.description)}let G=`url('#hatched_${V.description}_${F.toString()}')`;V.fuzzyStart&&(V.fuzzyStart.setAttribute("fill",G),V.fuzzyStart.setAttribute("stroke",F)),V.fuzzyEnd&&(V.fuzzyEnd.setAttribute("fill",G),V.fuzzyEnd.setAttribute("stroke",F))}}}this.featureColors=a}getColorKeyJson(){let n={Complex:[]};for(let a of Ba.naryColors.domain())n.Complex.push({name:a,certain:{color:Ba.naryColors(a)}});if(this.featureColors){for(let[a,u]of this.annotationSetsShown)if(u){let g=[],y=new Set;for(let T of this.participants.values())if(T.type==="protein"){let k=T.annotationSets.get(a);if(k)for(let V of k){let F=V.description;if(!y.has(F)){y.add(F);let G={name:F};if(this.certainCategories.has(F)&&(G.certain={color:this.featureColors(F)}),this.uncertainCategories.has(F)){let X=new D1.default(this.featureColors(F)),P=`rgba(${X.r},${X.g},${X.b}, 0.6)`;G.uncertain={color:P}}g.push(G)}}}n[a]=g}}return n}collapseAll(){for(let n of this.participants.values())n.expanded&&n.toCircle(!1);this.autoLayout(),this.notifyExpandListeners()}expandAll(){for(let n of this.participants.values())n.type==="protein"&&!n.expanded&&n.toStick(!1);this.autoLayout(),this.notifyExpandListeners()}expandAndCollapseSelection(n){for(let a of this.participants.values()){let u=a.json.identifier.id;n.includes(u)?a.expanded||a.setExpanded(!0):a.expanded&&a.setExpanded(!1)}this.notifyExpandListeners()}addHoverListener(n){this.hoverListeners.add(n)}removeHoverListener(n){this.hoverListeners.remove(n)}notifyHoverListeners(n){for(let a of this.hoverListeners)a(n)}addExpandListener(n){this.expandListeners.add(n)}removeExpandListener(n){this.expandListeners.remove(n)}notifyExpandListeners(){let n=this.getExpandedParticipants();for(let a of this.expandListeners)a(n)}getExpandedParticipants(){let n=[];for(let a of this.participants.values())a.postAnimExpanded&&n.push(a.json);return n}setCTM(n,a){let u=`matrix(${a.a},${a.b},${a.c},${a.d},${a.e},${a.f})`;n.setAttribute("transform",u)}mouseDown(n){n.preventDefault(),this.d3cola.stop(),this.dragStart=n,this.state=t.STATES.SELECT_PAN,Er(".custom-menu-margin").style("display","none")}touchStart(n){n.preventDefault(),this.d3cola.stop(),this.dragStart=n,this.state=t.STATES.SELECT_PAN,Er(".custom-menu-margin").style("display","none")}move(n){let a=this.getEventPoint(n),u=a.matrixTransform(this.container.getCTM().inverse());if(u.x)if(this.dragStart){this.hideTooltip();let g=this.getEventPoint(this.dragStart).matrixTransform(this.container.getCTM().inverse());if(this.dragElement!=null){let y=g.x-u.x,T=g.y-u.y;if(this.state===t.STATES.DRAGGING){if(this.dragElement.ix)this.dragElement.changePosition(y,T),this.dragElement.setAllLinkCoordinates();else{for(let k of this.dragElement.participants)k.changePosition(y,T);this.setAllLinkCoordinates()}this.dragStart=n}else Math.sqrt(y*y+T*T)>5*this.z&&(this.state=t.STATES.DRAGGING)}else this.state===t.STATES.SELECT_PAN&&(this.setCTM(this.container,this.container.getCTM().translate(u.x-g.x,u.y-g.y)),this.dragStart=n)}else this.moveTooltip(a)}mouseUp(n){this.preventDefaultsAndStopPropagation(n);let a=new Date().getTime(),u=this.getEventPoint(n);if(a-this.lastMouseUp>150&&this.dragElement&&this.dragElement.type==="protein"&&this.state!==t.STATES.DRAGGING&&!this.dragElement.busy)if(!this.dragElement.expanded)this.dragElement.setExpanded(!0),this.notifyExpandListeners();else{this.contextMenuProt=this.dragElement,this.contextMenuPoint=u.matrixTransform(this.container.getCTM().inverse());let g=Er(".custom-menu-margin"),y,T;n.pageX?(y=n.pageX,T=n.pageY):(y=this.dragStart.touches[0].pageX,T=this.dragStart.touches[0].pageY),g.style("top",`${T-20}px`).style("left",`${y-20}px`).style("display","block"),Er(`.scaleButton_${this.dragElement.stickZoom*100}`).property("checked",!0)}return this.dragElement=null,this.dragStart=null,this.state=t.STATES.MOUSE_UP,this.lastMouseUp=a,!1}mouseWheel(n){this.preventDefaultsAndStopPropagation(n),this.d3cola.stop();let a;n.wheelDelta?a=n.wheelDelta/3600:a=n.detail/-90;let u=1+a,g=this.container,T=this.getEventPoint(n).matrixTransform(g.getCTM().inverse()),k=this.svgElement.createSVGMatrix().translate(T.x,T.y).scale(u).translate(-T.x,-T.y);return this.setCTM(g,g.getCTM().multiply(k)),!1}mouseOut(){this.hideTooltip()}getEventPoint(n){let a=this.svgElement.createSVGPoint();return a.x=n.pageX-(0,O1.default)(this.el).offset().left,a.y=n.pageY-(0,O1.default)(this.el).offset().top,a}preventDefaultsAndStopPropagation(n){n.stopPropagation&&n.stopPropagation(),n.cancelBubble!=null&&(n.cancelBubble=!0),n.preventDefault&&n.preventDefault()}downloadSVG(n){n||(n="complexViewer");let a=this.getSVG(),u="image/svg+xml;charset=utf-8";function g(T){let k=[],V;try{V=new TextEncoder("utf-8")}catch{V=void 0}if(V)k=V.encode(T);else for(let F=0;F<T.length;F++){let G=T.charCodeAt(F);G<128?k.push(G):G<2048?k.push(192|G>>6,128|G&63):G<55296||G>=57344?k.push(224|G>>12,128|G>>6&63,128|G&63):(F++,G=65536+((G&1023)<<10|T.charCodeAt(F)&1023),k.push(240|G>>18,128|G>>12&63,128|G>>6&63,128|G&63))}return new Blob([new Uint8Array(k)],{type:u})}let y=g(a);if(navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(y,n);else{let T=document.createElement("a");T.href=window.URL.createObjectURL(y),T.download=n,T.style.display="none",document.body.appendChild(T),T.click(),document.body.removeChild(T),window.URL.revokeObjectURL(T.href)}y=null}};el.STATES={MOUSE_UP:0,SELECT_PAN:1,DRAGGING:2};el.barScales=[.01,.2,1,2,4,8];var D7=function(t,n,a,u){var g=arguments.length,y=g<3?n:u===null?u=Object.getOwnPropertyDescriptor(n,a):u,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,n,a,u);else for(var k=t.length-1;k>=0;k--)(T=t[k])&&(y=(g<3?T(y):g>3?T(n,a,y):T(n,a))||y);return g>3&&y&&Object.defineProperty(n,a,y),y},Va;var Vm,Hm=(Vm=class{constructor(n,a){Xe(this,"googleAnalyticsService");Xe(this,"complexPortalService");Xe(this,"MIN_DISPLAYED_ELEMENTS",5);Xe(this,"_participants");Xe(this,"_complexAC");Xe(this,"_complexMIJSON");Xe(this,"_interactorChecked");Xe(this,"_colorLegendGroups",new Map);Xe(this,"_displayedElements",this.MIN_DISPLAYED_ELEMENTS);Xe(this,"_hasInteracted");Xe(this,"participantsWithSubcomponents");Xe(this,"annotations",{"MI Features":!0,UniprotKB:!1,Superfamily:!1,Interactor:!0});this.googleAnalyticsService=n,this.complexPortalService=a,this._hasInteracted=!1}ngOnInit(){this.participantsWithSubcomponents=[],this.loadParticipants(this.participants,this.participantsWithSubcomponents)}ngAfterViewInit(){$("cp-complex-participants").foundation(),Va=new el(document.getElementById("networkContainer")),Va.readMIJSON(this.complexMIJSON,!0),Va.autoLayout();for(let n of Object.keys(this.annotations))Va.showAnnotations(n,this.annotations[n]);setTimeout(()=>this.updateColorLegend(Va.getColorKeyJson()),0)}sortParticipants(n){n.sort(function(a,u){return a.interactorType<u.interactorType?-1:a.interactorType>u.interactorType?1:0})}loadParticipants(n,a){for(let u of n)a.push(this.createComplexParticipant(u));this.sortParticipants(a);for(let u of a)u.interactorType==="stable complex"&&this.complexPortalService.getComplexAc(u.identifier).subscribe(g=>this.loadParticipants(g.participants,u.participants))}createComplexParticipant(n){return{identifier:n.identifier,identifierLink:n.identifierLink,name:n.name,description:n.description,stoichiometry:n.stoichiometry,bioRole:n.bioRole,interactorType:n.interactorType,participants:[],expanded:!1}}onChangeAnnotation(n){let a=!this.annotations[n];this.annotations[n]=a,this.updateColorLegend(Va.showAnnotations(n,a)),this.googleAnalyticsService.fireInteractionWithViewerEvent(ai.InteractionViewer_ChangeAnno,this._complexAC),this.googleAnalyticsService.fireInteractionWithViewerEvent(ai.InteractionViewer_SelectedAnno,n)}updateColorLegend(n){this.colorLegendGroups.clear(),n.Complex?.forEach(a=>this.colorLegendGroups.set(a.name.replace(/complex portal_/,""),a.certain.color)),n.Interactor?.forEach(a=>this.colorLegendGroups.set(a.name.toUpperCase(),a.certain.color))}onReset(){Va.collapseAll(),this.googleAnalyticsService.fireInteractionWithViewerEvent(ai.InteractionViewer_Reset,this._complexAC)}onExpandAll(){Va.expandAll(),this.googleAnalyticsService.fireInteractionWithViewerEvent(ai.InteractionViewer_ExpandAll,this._complexAC)}resetLayout(){Va.autoLayout()}downloadAsSVG(){let n=Va.getSVG();this.download(n,"application/svg",`${this.complexAC}.svg`),this.googleAnalyticsService.fireInteractionWithViewerEvent(ai.InteractionViewer_ExportSVG,this._complexAC)}interactedWithViewer(){this._hasInteracted||(this.googleAnalyticsService.fireInteractionWithViewerEvent(ai.InteractionViewer_Interaction,this._complexAC),this._hasInteracted=!0)}get participants(){return this._participants}set participants(n){this._participants=n}get displayedElements(){return this._displayedElements}set displayedElements(n){this._displayedElements=n}get complexAC(){return this._complexAC}set complexAC(n){this._complexAC=n}get complexMIJSON(){return this._complexMIJSON}set complexMIJSON(n){this._complexMIJSON=n}get interactorChecked(){return this._interactorChecked}set interactorChecked(n){this._interactorChecked=n}get colorLegendGroups(){return this._colorLegendGroups}set colorLegendGroups(n){this._colorLegendGroups=n}download(n,a,u){let y={"application/svg":"image/svg+xml;charset=utf-8","plain/text":"plain/text;charset=utf-8"}[a]||a;function T(F){let G=[],X;try{X=new TextEncoder("utf-8")}catch{X=void 0}if(X)G=X.encode(F);else for(let P=0;P<F.length;P++){let O=F.charCodeAt(P);O<128?G.push(O):O<2048?G.push(192|O>>6,128|O&63):O<55296||O>=57344?G.push(224|O>>12,128|O>>6&63,128|O&63):(P++,O=65536+((O&1023)<<10|F.charCodeAt(P)&1023),G.push(240|O>>18,128|O>>12&63,128|O>>6&63,128|O&63))}return new Blob([new Uint8Array(G)],{type:y})}let k=T(n),V=document.createElement("a");V.href=window.URL.createObjectURL(k),V.download=u,V.style.display="none",document.body.appendChild(V),V.click(),document.body.removeChild(V),window.URL.revokeObjectURL(V.href),k=null}},Xe(Vm,"ctorParameters",()=>[{type:bi},{type:Qu}]),Xe(Vm,"propDecorators",{participants:[{type:Yt}],complexAC:[{type:Yt}],complexMIJSON:[{type:Yt}]}),Vm);Hm=D7([yr({selector:"cp-complex-participants",template:zx,encapsulation:zf.None,styles:[Gx]})],Hm);var y4=`<div class="row">
  <div class="columns medium-12 no-pad-left no-pad-right">
    <div class="columns medium-12 callout">
      <div class="columns medium-6">
        <h5>Selected Complex:</h5>
        <p>
          <b>Stable Identifier: </b><a
          href="http://www.reactome.org/content/detail/{{reactomeComplexe[selectedComplex].id}}" target="_blank">{{reactomeComplexe[selectedComplex].id}}
          <i class="icon icon-generic small" data-icon="x"></i></a><br>
          <b>Name: </b>{{reactomeComplexe[selectedComplex].name}}
        </p>
      </div>
      <div class="columns medium-6">
        <h5>Selected Pathway:</h5>
        <p>
          <b>Stable Identifier: </b><a
          href="http://www.reactome.org/content/detail/{{reactomePathways[selectedPathway].id}}" target="_blank">{{reactomePathways[selectedPathway].id}}
          <i class="icon icon-generic small" data-icon="x"></i></a><br>
          <b>Name: </b>{{reactomePathways[selectedPathway].name}}
        </p>
      </div>
    </div>
    <div #diagramHolder class="columns medium-12 no-pad-left no-pad-right">
      <div id="diagramHolder"></div>
    </div>
  </div>
</div>
`;var x4="";var L7=function(t,n,a,u){var g=arguments.length,y=g<3?n:u===null?u=Object.getOwnPropertyDescriptor(n,a):u,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,n,a,u);else for(var k=t.length-1;k>=0;k--)(T=t[k])&&(y=(g<3?T(y):g>3?T(n,a,y):T(n,a))||y);return g>3&&y&&Object.defineProperty(n,a,y),y},b4=ja.reactome_base_url,zm,Gm=(zm=class{constructor(n){Xe(this,"googleAnalyticsService");Xe(this,"diagramContext");Xe(this,"globelDiagram");Xe(this,"_reactomeComplexe",{});Xe(this,"_reactomePathways",{});Xe(this,"_selectedComplex");Xe(this,"_selectedPathway");Xe(this,"_hasInteracted");Xe(this,"diagramHolder");Xe(this,"onLoaded",Q1());this.googleAnalyticsService=n}ngOnInit(){this.loadScript(),this._hasInteracted=!1}ngOnChanges(n){this.diagramContext&&(n.selectedPathway?this.loadDiagram():n.selectedComplex&&this.selectComplex(this.selectedComplex))}onReactomeDiagramReadyListener(n){this.diagramContext=n.detail,this.initReactomeDiagram()}onResize(){this.globelDiagram.resize(this.diagramHolder.nativeElement.clientWidth,this.diagramHolder.nativeElement.clientWidth*.8),this.selectComplex(this.selectedComplex)}loadScript(){let n=document.createElement("script");n.src=b4+"/DiagramJs/diagram/diagram.nocache.js",n.type="text/javascript",n.async=!0,n.charset="utf-8",document.getElementsByTagName("head")[0].appendChild(n)}initReactomeDiagram(){this.globelDiagram=this.diagramContext.Diagram.create({proxyPrefix:b4,placeHolder:"diagramHolder",width:this.diagramHolder.nativeElement.clientWidth,height:this.diagramHolder.nativeElement.clientWidth*.5}),this.loadDiagram()}loadDiagram(){let n=this;this.globelDiagram.loadDiagram(this.selectedPathway),this.globelDiagram.onDiagramLoaded(function(){n.selectComplex(n.selectedComplex)}),this._hasInteracted=!1,this.globelDiagram.onObjectSelected(function(a){n.interactedWithViewer()})}selectComplex(n){this.selectedComplex=n,this.globelDiagram.resetFlaggedItems(),this.globelDiagram.flagItems(n)}interactedWithViewer(){this._hasInteracted||(this.googleAnalyticsService.fireInteractionWithViewerEvent(ai.PathwayDiagram_Interaction,this._selectedComplex),this._hasInteracted=!0)}get reactomePathways(){return this._reactomePathways}set reactomePathways(n){this._reactomePathways=n}get reactomeComplexe(){return this._reactomeComplexe}set reactomeComplexe(n){this._reactomeComplexe=n}get selectedComplex(){return this._selectedComplex}set selectedComplex(n){this._selectedComplex=n}get selectedPathway(){return this._selectedPathway}set selectedPathway(n){this._selectedPathway=n}},Xe(zm,"ctorParameters",()=>[{type:bi}]),Xe(zm,"propDecorators",{diagramHolder:[{type:Ku,args:["diagramHolder",{static:!0}]}],onLoaded:[{type:J1,args:["onLoaded"]}],onReactomeDiagramReadyListener:[{type:B0,args:["window:onReactomeDiagramReady",["$event"]]}],onResize:[{type:B0,args:["window:resize",["$event.target"]]}],reactomePathways:[{type:Yt}],reactomeComplexe:[{type:Yt}],selectedComplex:[{type:Yt}],selectedPathway:[{type:Yt}]}),zm);Gm=L7([yr({selector:"cp-reactome-diagram",template:y4,styles:[x4]})],Gm);var _4=`@if (isDataLoaded) {
  <div class="row">
    <div class="columns medium-12 no-pad-left">
      <h3>Pathways</h3>
      <table class="hover">
        <thead>
          <tr>
            <th>Complex Identifier</th>
            <th>Complex Name</th>
            <th>Pathway Identifier</th>
          </tr>
        </thead>
        <tbody>
          @for (reactomeComplex of getSortedKeys(reactomeComplexes) | slice:0:displayedCrossReferences; track reactomeComplex) {
            <tr>
              <td><a (click)="selectComplexWithFirstPathway(reactomeComplex)">{{reactomeComplex}}</a></td>
              <td>{{reactomeComplexes[reactomeComplex].name}}</td>
              <td>
                <ul>
                  @for (reactomePathway of reactomeComplexes[reactomeComplex].pathways | slice:0:displayedRelatedPathways; track reactomePathway) {
                    <li
                      >
                      <a (click)="selectComplexByPathway(reactomeComplex, reactomePathway)">{{reactomePathway}}</a>
                    </li>
                  }
                  @if (displayedRelatedPathways < reactomeComplexes[reactomeComplex].pathways.length) {
                    <li class="text-center no-bullet"
                      >
                      <a class="label" (click)="displayedRelatedPathways = reactomeComplexes[reactomeComplex].pathways.length">Show
                      all</a>
                    </li>
                  }
                </ul>
              </td>
            </tr>
          }
          @if (displayedCrossReferences < getObjectLength(reactomeComplexes)) {
            <tr class="text-center" style="background: white"
              >
              <td></td>
              <td>
                <a class="label" (click)="displayedCrossReferences = getObjectLength(reactomeComplexes)">Show all ({{getObjectLength(reactomeComplexes)}})</a>
              </td>
              <td></td>
            </tr>
          }
        </tbody>
      </table>
      @if (selectedComplex && selectedPathway) {
        <div class="columns medium-12 no-pad-left no-pad-right">
          <cp-reactome-diagram [reactomeComplexe]="reactomeComplexes" [reactomePathways]="reactomePathways"
            [selectedComplex]="selectedComplex"
          [selectedPathway]="selectedPathway"></cp-reactome-diagram>
        </div>
      }
    </div>
  </div>
}

`;var w4="";var qm=class{constructor(n){Xe(this,"_id");Xe(this,"_name");Xe(this,"_pathways",[]);this._id=n}get id(){return this._id}set id(n){this._id=n}get name(){return this._name}set name(n){this._name=n}get pathways(){return this._pathways}set pathways(n){this._pathways=n}};var Wm=class{constructor(n){Xe(this,"_id");Xe(this,"_name");Xe(this,"_complexes",[]);this._id=n}get id(){return this._id}set id(n){this._id=n}get name(){return this._name}set name(n){this._name=n}get complexes(){return this._complexes}set complexes(n){this._complexes=n}};var B7=function(t,n,a,u){var g=arguments.length,y=g<3?n:u===null?u=Object.getOwnPropertyDescriptor(n,a):u,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,n,a,u);else for(var k=t.length-1;k>=0;k--)(T=t[k])&&(y=(g<3?T(y):g>3?T(n,a,y):T(n,a))||y);return g>3&&y&&Object.defineProperty(n,a,y),y},jm,$m=(jm=class{constructor(n,a,u){Xe(this,"reactomeService");Xe(this,"notificationService");Xe(this,"googleAnalyticsService");Xe(this,"crossReferences",qn());Xe(this,"reactomeComplexes",{});Xe(this,"reactomePathways",{});Xe(this,"selectedComplex");Xe(this,"selectedPathway");Xe(this,"isDataLoaded",!1);Xe(this,"displayedCrossReferences",5);Xe(this,"displayedRelatedPathways",5);Xe(this,"diagramLoaded",!1);this.reactomeService=n,this.notificationService=a,this.googleAnalyticsService=u}ngOnInit(){this.mapComplexeToPathways()}mapComplexeToPathways(){for(let n=0;n<this.crossReferences().length;n++)X1({relatedPathways:this.reactomeService.findRelatedPathways(this.crossReferences()[n].identifier),complexName:this.reactomeService.getComplexName(this.crossReferences()[n].identifier)}).subscribe({next:a=>{let u=a.relatedPathways,g=a.complexName;for(let y=0;y<u.length;y++){let T=u[y],k=this.reactomePathways[T.stId],V=this.reactomeComplexes[this.crossReferences()[n].identifier];k===void 0&&(k=this.reactomePathways[T.stId]=new Wm(T.stId),k.name=T.displayName),V===void 0&&(V=this.reactomeComplexes[this.crossReferences()[n].identifier.toString()]=new qm(this.crossReferences()[n].identifier),V.name=g),k.complexes.push(this.crossReferences()[n].identifier),V.pathways.push(T.stId),n===this.crossReferences().length-1&&y===u.length-1&&(this.selectComplexWithFirstPathway(Object.keys(this.reactomeComplexes).sort()[0]),this.isDataLoaded=!0)}},error:a=>{this.notificationService.onAPIRequestError("Reactome"),this.googleAnalyticsService.fireAPIRequestErrorEvent(ai.reactome,a.status?a.status:"unknown")}})}onChildLoaded(){this.diagramLoaded=!0}selectComplexByPathway(n,a){this.selectedComplex=n,this.selectedPathway=a}selectComplexWithFirstPathway(n){this.selectedComplex=n,this.selectedPathway=this.reactomeComplexes[n].pathways.sort()[0]}getSortedKeys(n){return Object.keys(n).sort()}getObjectLength(n){return Object.keys(n).length}},Xe(jm,"ctorParameters",()=>[{type:Wf},{type:Po},{type:bi}]),Xe(jm,"propDecorators",{crossReferences:[{type:Yt,args:[{isSignal:!0,alias:"crossReferences",required:!1,transform:void 0}]}]}),jm);$m=B7([yr({selector:"cp-reactome-cross-references",template:_4,styles:[w4]})],$m);var C4=`<div class="row">
  <div class="columns medium-12 no-pad-left">
    <h3>Antagonists ({{antagonists.length}})</h3>
    <table class="hover">
      <tbody>
        @for (antagonist of antagonists | slice:0:displayedElements; track antagonist) {
          <tr>
            <td>
              {{antagonist}}
            </td>
          </tr>
        }
        @if (displayedElements < antagonists.length) {
          <tr class="text-center" style="background: white">
            <td>
              <a class="label" (click)="displayedElements = antagonists.length">Show all</a>
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>
</div>
`;var S4="";var z7=function(t,n,a,u){var g=arguments.length,y=g<3?n:u===null?u=Object.getOwnPropertyDescriptor(n,a):u,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,n,a,u);else for(var k=t.length-1;k>=0;k--)(T=t[k])&&(y=(g<3?T(y):g>3?T(n,a,y):T(n,a))||y);return g>3&&y&&Object.defineProperty(n,a,y),y},Xm,Ym=(Xm=class{constructor(){Xe(this,"_antagonists");Xe(this,"_displayedElements",5)}ngOnInit(){}get antagonists(){return this._antagonists}set antagonists(n){this._antagonists=n}get displayedElements(){return this._displayedElements}set displayedElements(n){this._displayedElements=n}},Xe(Xm,"ctorParameters",()=>[]),Xe(Xm,"propDecorators",{antagonists:[{type:Yt}]}),Xm);Ym=z7([yr({selector:"cp-antagonists",template:C4,styles:[S4]})],Ym);var E4=`<div class="row">
  <div class="columns medium-12 no-pad-left">
    <h3>Agonists ({{agonists.length}})</h3>
    <table class="hover">
      <tbody>
        @for (agonist of agonists | slice:0:displayedElements; track agonist) {
          <tr>
            <td>
              {{agonist}}
            </td>
          </tr>
        }
        @if (displayedElements < agonists.length) {
          <tr class="text-center"  style="background: white">
            <td>
              <a class="label" (click)="displayedElements = agonists.length">Show all</a>
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>
</div>
`;var T4="";var W7=function(t,n,a,u){var g=arguments.length,y=g<3?n:u===null?u=Object.getOwnPropertyDescriptor(n,a):u,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,n,a,u);else for(var k=t.length-1;k>=0;k--)(T=t[k])&&(y=(g<3?T(y):g>3?T(n,a,y):T(n,a))||y);return g>3&&y&&Object.defineProperty(n,a,y),y},Zm,Km=(Zm=class{constructor(){Xe(this,"_agonists");Xe(this,"_displayedElements",5)}ngOnInit(){}get agonists(){return this._agonists}set agonists(n){this._agonists=n}get displayedElements(){return this._displayedElements}set displayedElements(n){this._displayedElements=n}},Xe(Zm,"ctorParameters",()=>[]),Xe(Zm,"propDecorators",{agonists:[{type:Yt}]}),Zm);Km=W7([yr({selector:"cp-agonists",template:E4,styles:[T4]})],Km);var M4=`<div class="row">
  <div class="columns medium-12 callout">
    <div class="columns medium-7 no-pad-left">
    </div>
    <div class="columns medium-4">
      <h3>{{ !predicted() ? 'Curated' : 'Predicted'}} by:</h3>
      <h4>{{institute()}}</h4>
    </div>
  </div>
</div>
`;var A4="";var X7=function(t,n,a,u){var g=arguments.length,y=g<3?n:u===null?u=Object.getOwnPropertyDescriptor(n,a):u,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,n,a,u);else for(var k=t.length-1;k>=0;k--)(T=t[k])&&(y=(g<3?T(y):g>3?T(n,a,y):T(n,a))||y);return g>3&&y&&Object.defineProperty(n,a,y),y},Qm,Jm=(Qm=class{constructor(){Xe(this,"institute",qn());Xe(this,"comment",qn());Xe(this,"predicted",qn(!1))}ngOnInit(){}},Xe(Qm,"ctorParameters",()=>[]),Xe(Qm,"propDecorators",{institute:[{type:Yt,args:[{isSignal:!0,alias:"institute",required:!1,transform:void 0}]}],comment:[{type:Yt,args:[{isSignal:!0,alias:"comment",required:!1,transform:void 0}]}],predicted:[{type:Yt,args:[{isSignal:!0,alias:"predicted",required:!1,transform:void 0}]}]}),Qm);Jm=X7([yr({selector:"cp-complex-footer",template:M4,styles:[A4]})],Jm);var R4=`<div class="row">
  <div class="columns medium-12 no-pad-left">
    <h3>GO - Molecular Function ({{crossReferences.length}})
    </h3>
    <table class="hover">
      <tbody>
        @for (crossReference of crossReferences | slice:0:displayedElements; track crossReference.identifier) {
          <tr>
            <td>
              <a href="{{crossReference.searchURL}}" target="_blank">{{crossReference.description}}
                <i class="icon icon-generic small" data-icon="x"></i></a>
              </td>
            </tr>
          }
          @if (displayedElements < crossReferences.length) {
            <tr class="text-center" style="background: white">
              <td>
                <a class="label" (click)="displayedElements = crossReferences.length">Show all</a>
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  </div>
`;var k4="";var K7=function(t,n,a,u){var g=arguments.length,y=g<3?n:u===null?u=Object.getOwnPropertyDescriptor(n,a):u,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,n,a,u);else for(var k=t.length-1;k>=0;k--)(T=t[k])&&(y=(g<3?T(y):g>3?T(n,a,y):T(n,a))||y);return g>3&&y&&Object.defineProperty(n,a,y),y},e0,t0=(e0=class{constructor(){Xe(this,"_crossReferences");Xe(this,"_displayedElements",5)}ngOnInit(){}get crossReferences(){return this._crossReferences}set crossReferences(n){this._crossReferences=n}get displayedElements(){return this._displayedElements}set displayedElements(n){this._displayedElements=n}},Xe(e0,"ctorParameters",()=>[]),Xe(e0,"propDecorators",{crossReferences:[{type:Yt}]}),e0);t0=K7([yr({selector:"cp-go-molecular-function",template:R4,styles:[k4]})],t0);var I4=`<div class="row">
  <div class="columns medium-12 no-pad-left">
    <h3>Ligands ({{ligands.length}})</h3>
    <table class="hover">
      <tbody>
        @for (ligand of ligands | slice:0:displayedElements; track ligand) {
          <tr>
            <td>
              {{ligand}}
            </td>
          </tr>
        }
        @if (displayedElements < ligands.length) {
          <tr class="text-center" style="background: white">
            <td>
              <a class="label" (click)="displayedElements = ligands.length">Show all</a>
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>
</div>
`;var P4="";var eD=function(t,n,a,u){var g=arguments.length,y=g<3?n:u===null?u=Object.getOwnPropertyDescriptor(n,a):u,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,n,a,u);else for(var k=t.length-1;k>=0;k--)(T=t[k])&&(y=(g<3?T(y):g>3?T(n,a,y):T(n,a))||y);return g>3&&y&&Object.defineProperty(n,a,y),y},r0,n0=(r0=class{constructor(){Xe(this,"_ligands");Xe(this,"_displayedElements",5)}ngOnInit(){}get ligands(){return this._ligands}set ligands(n){this._ligands=n}get displayedElements(){return this._displayedElements}set displayedElements(n){this._displayedElements=n}},Xe(r0,"ctorParameters",()=>[]),Xe(r0,"propDecorators",{ligands:[{type:Yt}]}),r0);n0=eD([yr({selector:"cp-ligands",template:I4,styles:[P4]})],n0);var D4=`<div class="row">
  @if (synonyms && synonyms.length > 0) {
    <div class="columns medium-12 no-pad-left">
      <h3>Synonyms ({{synonyms.length}})</h3>
      <table class="hover">
        <tbody>
          @for (synonym of synonyms | slice:0:displayedElements; track synonym) {
            <tr>
              <td>
                {{synonym}}
              </td>
            </tr>
          }
          @if (displayedElements < synonyms.length) {
            <tr class="text-center"  style="background: white">
              <td>
                <a class="label" (click)="displayedElements = synonyms.length">Show all</a>
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  }
</div>
`;var O4="";var nD=function(t,n,a,u){var g=arguments.length,y=g<3?n:u===null?u=Object.getOwnPropertyDescriptor(n,a):u,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,n,a,u);else for(var k=t.length-1;k>=0;k--)(T=t[k])&&(y=(g<3?T(y):g>3?T(n,a,y):T(n,a))||y);return g>3&&y&&Object.defineProperty(n,a,y),y},i0,o0=(i0=class{constructor(){Xe(this,"_synonyms");Xe(this,"_displayedElements",5)}ngOnInit(){}get synonyms(){return this._synonyms}set synonyms(n){this._synonyms=n}get displayedElements(){return this._displayedElements}set displayedElements(n){this._displayedElements=n}},Xe(i0,"ctorParameters",()=>[]),Xe(i0,"propDecorators",{synonyms:[{type:Yt}]}),i0);o0=nD([yr({selector:"cp-synonyms",template:D4,styles:[O4]})],o0);var N4=`<div class="row">
  @if (systematicName && systematicName.length > 0) {
    <div class="columns medium-12 no-pad-left">
      <h3>Systematic Name</h3>
    <table class="hover" style="word-wrap:break-word;
              table-layout: fixed;">
        <tbody>
          <tr>
            <td>
              {{systematicName}}
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  }
</div>
`;var L4="";var aD=function(t,n,a,u){var g=arguments.length,y=g<3?n:u===null?u=Object.getOwnPropertyDescriptor(n,a):u,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,n,a,u);else for(var k=t.length-1;k>=0;k--)(T=t[k])&&(y=(g<3?T(y):g>3?T(n,a,y):T(n,a))||y);return g>3&&y&&Object.defineProperty(n,a,y),y},a0,s0=(a0=class{constructor(){Xe(this,"_systematicName")}ngOnInit(){}get systematicName(){return this._systematicName}set systematicName(n){this._systematicName=n}},Xe(a0,"ctorParameters",()=>[]),Xe(a0,"propDecorators",{systematicName:[{type:Yt}]}),a0);s0=aD([yr({selector:"cp-systematic-name",template:N4,styles:[L4]})],s0);var F4=`<div class="row">
  <div class="columns medium-12 no-pad-left">
    <h3>Disease Cross References ({{crossReferences.length}})</h3>
    <table class="hover">
      <thead>
        <th>Identifier</th>
        <th>Name</th>
      </thead>
      <tbody>
        @for (crossReference of crossReferences | slice:0:displayedElements; track crossReference.identifier) {
          <tr>
            <td>
              <a href="{{crossReference.searchURL}}" target="_blank">{{crossReference.identifier}}
                <i class="icon icon-generic small" data-icon="x"></i></a>
              </td>
              <td>
                {{crossReference.description}}
              </td>
            </tr>
          }
          @if (displayedElements < crossReferences.length) {
            <tr class="text-center" style="background: white">
              <td>
                <a class="label" (click)="displayedElements = crossReferences.length">Show all</a>
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  </div>
`;var U4="";var cD=function(t,n,a,u){var g=arguments.length,y=g<3?n:u===null?u=Object.getOwnPropertyDescriptor(n,a):u,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,n,a,u);else for(var k=t.length-1;k>=0;k--)(T=t[k])&&(y=(g<3?T(y):g>3?T(n,a,y):T(n,a))||y);return g>3&&y&&Object.defineProperty(n,a,y),y},u0,c0=(u0=class{constructor(n,a,u){Xe(this,"olsService");Xe(this,"notificationService");Xe(this,"googleAnalyticsService");Xe(this,"_crossReferences");Xe(this,"_displayedElements",5);this.olsService=n,this.notificationService=a,this.googleAnalyticsService=u}ngOnInit(){this.findXRefs()}findXRefs(){for(let n=0;n<this._crossReferences.length;n++){let a=this.crossReferences[n].identifier.split(":")[0].toUpperCase();a==="EFO"?this.olsService.getEfoName(this.crossReferences[n].identifier).subscribe(u=>this._crossReferences[n].description=this.getOlsResponseLabel(u),u=>this.logOlsError(u,ai.ols_efo)):a==="ORPHANET"||a==="ORDO"?this.olsService.getOrphaNetName(this.crossReferences[n].identifier).subscribe(u=>this._crossReferences[n].description=this.getOlsResponseLabel(u),u=>this.logOlsError(u,ai.ols_orphanet)):(a==="MONDO"||a==="HP")&&this.olsService.getOboName(this.crossReferences[n].identifier).subscribe(u=>this._crossReferences[n].description=this.getOlsResponseLabel(u),u=>this.logOlsError(u,ai.ols_obo))}}get crossReferences(){return this._crossReferences}set crossReferences(n){this._crossReferences=n}get displayedElements(){return this._displayedElements}set displayedElements(n){this._displayedElements=n}getOlsResponseLabel(n){return n._embedded.terms[0].label}logOlsError(n,a){this.notificationService.onAPIRequestError("OLS"),this.googleAnalyticsService.fireAPIRequestErrorEvent(a,n.status?n.status:"unknown")}},Xe(u0,"ctorParameters",()=>[{type:jf},{type:Po},{type:bi}]),Xe(u0,"propDecorators",{crossReferences:[{type:Yt}]}),u0);c0=cD([yr({selector:"cp-efo-crossreferences",template:F4,styles:[U4]})],c0);var B4=`<div class="row">
  <div class="columns medium-12 no-pad-left">
    <h3>ChEMBL Cross References ({{crossReferences.length}})</h3>
    <table class="hover">
      <thead>
        <th>Identifier</th>
      </thead>
      <tbody>
        @for (crossReference of crossReferences | slice:0:displayedElements; track crossReference.identifier) {
          <tr>
            <td>
              <a href="{{crossReference.searchURL}}" target="_blank">{{crossReference.identifier}}
                <i class="icon icon-generic small" data-icon="x"></i></a>
              </td>
            </tr>
          }
          @if (displayedElements < crossReferences.length) {
            <tr class="text-center" style="background: white">
              <td>
                <a class="label" (click)="displayedElements = crossReferences.length">Show all</a>
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  </div>
`;var V4="";var hD=function(t,n,a,u){var g=arguments.length,y=g<3?n:u===null?u=Object.getOwnPropertyDescriptor(n,a):u,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,n,a,u);else for(var k=t.length-1;k>=0;k--)(T=t[k])&&(y=(g<3?T(y):g>3?T(n,a,y):T(n,a))||y);return g>3&&y&&Object.defineProperty(n,a,y),y},l0,f0=(l0=class{constructor(){Xe(this,"_crossReferences");Xe(this,"_displayedElements",5)}ngOnInit(){}get crossReferences(){return this._crossReferences}set crossReferences(n){this._crossReferences=n}get displayedElements(){return this._displayedElements}set displayedElements(n){this._displayedElements=n}},Xe(l0,"ctorParameters",()=>[]),Xe(l0,"propDecorators",{crossReferences:[{type:Yt}]}),l0);f0=hD([yr({selector:"cp-chembl-crossreference",template:B4,styles:[V4]})],f0);var H4=`<div class="row">
  <div class="columns medium-12 no-pad-left">
    <h3>GO - Cellular Component ({{crossReferences.length}})</h3>
    <table class="hover">
      <tbody>
        @for (crossReference of crossReferences | slice:0:displayedElements; track crossReference.identifier) {
          <tr>
            <td>
              <a href="{{crossReference.searchURL}}" target="_blank">{{crossReference.description}}
                <i class="icon icon-generic small" data-icon="x"></i></a>
              </td>
            </tr>
          }
          @if (displayedElements < crossReferences.length) {
            <tr class="text-center" style="background: white">
              <td>
                <a class="label" (click)="displayedElements = crossReferences.length">Show all</a>
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  </div>
`;var z4="";var mD=function(t,n,a,u){var g=arguments.length,y=g<3?n:u===null?u=Object.getOwnPropertyDescriptor(n,a):u,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,n,a,u);else for(var k=t.length-1;k>=0;k--)(T=t[k])&&(y=(g<3?T(y):g>3?T(n,a,y):T(n,a))||y);return g>3&&y&&Object.defineProperty(n,a,y),y},h0,d0=(h0=class{constructor(){Xe(this,"_crossReferences");Xe(this,"_displayedElements",5)}ngOnInit(){}get crossReferences(){return this._crossReferences}set crossReferences(n){this._crossReferences=n}get displayedElements(){return this._displayedElements}set displayedElements(n){this._displayedElements=n}},Xe(h0,"ctorParameters",()=>[]),Xe(h0,"propDecorators",{crossReferences:[{type:Yt}]}),h0);d0=mD([yr({selector:"cp-go-celluar-crossreference",template:H4,styles:[z4]})],d0);var G4=`<div class="row" [hidden]="!isLoaded">
  <h3>Gene Expression Map</h3>
  <div class="columns medium-12 margin-bottom-large no-pad-left">
    <div id="highchartsContainer"></div>
  </div>
</div>
`;var q4=`@import"https://wwwdev.ebi.ac.uk/gxa/resources/css/customized-bootstrap-3.3.5.css";
`;var yD=function(t,n,a,u){var g=arguments.length,y=g<3?n:u===null?u=Object.getOwnPropertyDescriptor(n,a):u,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,n,a,u);else for(var k=t.length-1;k>=0;k--)(T=t[k])&&(y=(g<3?T(y):g>3?T(n,a,y):T(n,a))||y);return g>3&&y&&Object.defineProperty(n,a,y),y},p0,m0=(p0=class{constructor(n){Xe(this,"species");Xe(this,"_gxa");Xe(this,"_participants");Xe(this,"_complexSpecies");Xe(this,"_gxaParamsQueries");Xe(this,"_isLoaded",!0);Xe(this,"_experimentId");Xe(this,"exceptions",new Map([]));this.species=n}ngOnInit(){this._complexSpecies=this.species.transform(this.complexSpecies,!1).toLowerCase(),this._experimentId=this.exceptions.get(this._complexSpecies);let n=this;this._gxa.render({target:"highchartsContainer",experiment:this._experimentId||"reference",atlasUrl:"https://www.ebi.ac.uk/gxa/",query:{gene:this.gxaParamsQueries,species:this._complexSpecies},fail:function(){n._isLoaded=!1}})}get gxa(){return this._gxa}set gxa(n){this._gxa=n}get complexSpecies(){return this._complexSpecies}set complexSpecies(n){this._complexSpecies=n}get gxaParamsQueries(){return this._gxaParamsQueries}set gxaParamsQueries(n){this._gxaParamsQueries=n}get isLoaded(){return this._isLoaded}set isLoaded(n){this._isLoaded=n}},Xe(p0,"ctorParameters",()=>[{type:lx}]),Xe(p0,"propDecorators",{gxa:[{type:Yt}],complexSpecies:[{type:Yt}],gxaParamsQueries:[{type:Yt}]}),p0);m0=yD([yr({selector:"cp-gxa-heatmap",template:G4,styles:[q4]})],m0);var W4=`<div class="row">
  <div class="columns medium-12 no-pad-left no-pad-right">
    <h3>GO - Biological Process ({{crossReferences.length}})</h3>
    <table class="hover">
      <tbody>
        @for (crossReference of crossReferences | slice:0:displayedElements; track crossReference.identifier) {
          <tr>
            <td>
              <a href="{{crossReference.searchURL}}" target="_blank">{{crossReference.description}}
                <i class="icon icon-generic small" data-icon="x"></i></a>
              </td>
            </tr>
          }
          @if (displayedElements < crossReferences.length) {
            <tr class="text-center" style="background: white">
              <td>
                <a class="label" (click)="displayedElements = crossReferences.length">Show all</a>
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  </div>
`;var j4="";var _D=function(t,n,a,u){var g=arguments.length,y=g<3?n:u===null?u=Object.getOwnPropertyDescriptor(n,a):u,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,n,a,u);else for(var k=t.length-1;k>=0;k--)(T=t[k])&&(y=(g<3?T(y):g>3?T(n,a,y):T(n,a))||y);return g>3&&y&&Object.defineProperty(n,a,y),y},v0,g0=(v0=class{constructor(){Xe(this,"_crossReferences");Xe(this,"_displayedElements",5)}ngOnInit(){}get crossReferences(){return this._crossReferences}set crossReferences(n){this._crossReferences=n}get displayedElements(){return this._displayedElements}set displayedElements(n){this._displayedElements=n}},Xe(v0,"ctorParameters",()=>[]),Xe(v0,"propDecorators",{crossReferences:[{type:Yt}]}),v0);g0=_D([yr({selector:"cp-go-biological-process",template:W4,styles:[j4]})],g0);var $4=`<div class="row">
  <div class="columns medium-12 no-pad-left">
    <h3>EMDB Cross References ({{crossReferences.length}})</h3>
    <table class="hover">
      <tbody>
        @for (crossReference of crossReferences | slice:0:displayedElements; track crossReference.identifier) {
          <tr>
            <td>
              <a href="{{crossReference.searchURL}}" target="_blank">{{crossReference.identifier}}
                <i class="icon icon-generic small" data-icon="x"></i></a>
              </td>
            </tr>
          }
          @if (displayedElements < crossReferences.length) {
            <tr class="text-center" style="background: white">
              <td>
                <a class="label" (click)="displayedElements = crossReferences.length">Show all</a>
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  </div>
`;var X4="";var SD=function(t,n,a,u){var g=arguments.length,y=g<3?n:u===null?u=Object.getOwnPropertyDescriptor(n,a):u,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,n,a,u);else for(var k=t.length-1;k>=0;k--)(T=t[k])&&(y=(g<3?T(y):g>3?T(n,a,y):T(n,a))||y);return g>3&&y&&Object.defineProperty(n,a,y),y},y0,x0=(y0=class{constructor(){Xe(this,"_crossReferences");Xe(this,"displayedElements",5)}ngOnInit(){}get crossReferences(){return this._crossReferences}set crossReferences(n){this._crossReferences=n}},Xe(y0,"ctorParameters",()=>[]),Xe(y0,"propDecorators",{crossReferences:[{type:Yt}]}),y0);x0=SD([yr({selector:"cp-emdb-crossreferences",template:$4,styles:[X4]})],x0);var Y4=`<div class="container">
  @if (complex().evidenceType || (intactXRefs && intactXRefs.length > 0)) {
    <div>
      Evidence by
      <a href="{{complex().evidenceType.searchURL}}" target="_blank">
        {{ complex().evidenceType.description ? complex().evidenceType.description : complex().evidenceType.identifier }}
        <i class="icon icon-generic small" data-icon="x"></i>
      </a>
      @if (intactXRefs && intactXRefs.length > 0) {
        in IntAct
        @for (crossReference of intactXRefs; track crossReference.identifier; let isLast = $last) {
          <a href="{{crossReference.searchURL}}" target="_blank"> {{ crossReference.identifier }} <i
          class="icon icon-generic small" data-icon="x"></i></a>{{ isLast ? '' : ', ' }}
        }
      }
      @if (humapXrefs && humapXrefs.length > 0) {
        in hu.MAP
        @for (crossReference of humapXrefs; track crossReference.identifier; let isLast = $last) {
          <a href="{{humapUrl(crossReference.identifier)}}" target="_blank"> {{ crossReference.identifier }} <i
            class="icon icon-generic small" data-icon="x"></i></a>{{ isLast ? '' : ', ' }}
        }
      }
    </div>
  }



  <div class="stars">
    @for (star of stars; let i = $index; track i) {
      <i class="icon icon-common icon-star" [ngClass]="star"></i>
    }
  </div>
</div>

`;var Z4=`h3{--size: 40px;width:var(--size);height:var(--size);font-size:calc(var(--size) * .6);align-content:center;text-align:center;-moz-border-radius:100px;-webkit-border-radius:100px;border-radius:100px;-moz-box-shadow:0px 0px 2px #000000;-webkit-box-shadow:0px 0px 2px #000000;box-shadow:0 0 2px #000}.container{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:flex-end;gap:15px;align-items:center}.stars{display:flex;gap:4px}.stars .icon{font-size:16pt}.empty{color:#d3d3d3}.full{color:var(--primary);-webkit-text-stroke:1px var(--on-primary);text-shadow:0 0 4px var(--primary)}
`;var MD=function(t,n,a,u){var g=arguments.length,y=g<3?n:u===null?u=Object.getOwnPropertyDescriptor(n,a):u,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,n,a,u);else for(var k=t.length-1;k>=0;k--)(T=t[k])&&(y=(g<3?T(y):g>3?T(n,a,y):T(n,a))||y);return g>3&&y&&Object.defineProperty(n,a,y),y},b0,Ha,_0=(Ha=class{constructor(){Xe(this,"intactXRefs");Xe(this,"humapXrefs");Xe(this,"complex",qn());Xe(this,"stars",["empty","empty","empty","empty","empty"]);Xe(this,"humapUrl",Gf)}ngOnInit(){this.findXRefs(),this.formatEvidenceOntologyStars()}formatEvidenceOntologyStars(){this._star(this.complex().evidenceType?.confidenceScore||3)}findXRefs(){for(let n=0;n<this.complex().crossReferences.length;n++){let a=this.complex().crossReferences[n],u=this.complex().crossReferences[n].database,g=this.complex().crossReferences[n].dbMI,y=this.complex().crossReferences[n].qualifierMI;u==="intact"?(this.intactXRefs===void 0&&(this.intactXRefs=[]),this.intactXRefs.push(a)):g===b0.HUMAP_DB_MI&&y===b0.IDENTITY_MI&&(this.humapXrefs===void 0&&(this.humapXrefs=[]),this.humapXrefs.push(a))}}_star(n){this.stars.fill("full"),n<this.stars.length&&this.stars.fill("empty",n)}},b0=Ha,Xe(Ha,"HUMAP_DB_MI","MI:2424"),Xe(Ha,"IDENTITY_MI","MI:0356"),Xe(Ha,"ctorParameters",()=>[]),Xe(Ha,"propDecorators",{complex:[{type:Yt,args:[{isSignal:!0,alias:"complex",required:!1,transform:void 0}]}]}),Ha);_0=b0=MD([yr({selector:"cp-complex-evidence",template:Y4,styles:[Z4]})],_0);var K4=`<div class="row">
  @if (hasXrefsOrSynonymsOrSystematicName) {
    <div class="columns medium-12 no-pad-left">
      <h2 class="float-left">Additional Information</h2>
      <cp-go-to class="float-right" [sectionName]="'Additional Information'"></cp-go-to>
      @if (externalResources && externalResources.length > 0) {
        <div id="externalResources" class="columns medium-12 no-pad-left">
          <cp-external-resources [crossReferences]="externalResources"></cp-external-resources>
        </div>
      }
      @if (pubmedXRefs && pubmedXRefs.length > 0) {
        <div id="pubmedXRefs" class="columns medium-12 no-pad-left">
          <cp-euro-pmc-crossreferences [crossReferences]="pubmedXRefs"></cp-euro-pmc-crossreferences>
        </div>
      }
      <div class="columns medium-12 no-pad-left">
        @if (synonyms && synonyms.length > 0) {
          <div id="synonyms" class="columns medium-6 no-pad-left no-pad-right">
            <cp-synonyms [synonyms]="synonyms"></cp-synonyms>
          </div>
        }
        @if (!!systematicName) {
          <div id="systematicName" class="columns medium-6 no-pad-left no-pad-right">
            <cp-systematic-name [systematicName]="systematicName"></cp-systematic-name>
          </div>
        }
      </div>
    </div>
  }
</div>
`;var Q4="";var kD=function(t,n,a,u){var g=arguments.length,y=g<3?n:u===null?u=Object.getOwnPropertyDescriptor(n,a):u,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,n,a,u);else for(var k=t.length-1;k>=0;k--)(T=t[k])&&(y=(g<3?T(y):g>3?T(n,a,y):T(n,a))||y);return g>3&&y&&Object.defineProperty(n,a,y),y},w0,C0=(w0=class{constructor(){Xe(this,"_crossReferences");Xe(this,"_pubmedXRefs");Xe(this,"_externalResources");Xe(this,"_synonyms");Xe(this,"_systematicName")}ngOnInit(){this.findXRefs()}get hasXrefsOrSynonymsOrSystematicName(){return this.pubmedXRefs&&this.pubmedXRefs.length>0||this.synonyms&&this.synonyms.length>0||!!this.systematicName&&this.systematicName.length>0}findXRefs(){for(let n=0;n<this._crossReferences.length;n++){let a=this._crossReferences[n],u=this._crossReferences[n].database.toLowerCase();u==="pubmed"&&(this._pubmedXRefs===void 0&&(this._pubmedXRefs=[]),this._pubmedXRefs.push(a)),(u==="signor"||u==="matrixdb"||u==="humap")&&(this._externalResources===void 0&&(this._externalResources=[]),this._externalResources.push(a))}}get crossReferences(){return this._crossReferences}set crossReferences(n){this._crossReferences=n}get pubmedXRefs(){return this._pubmedXRefs}set pubmedXRefs(n){this._pubmedXRefs=n}get externalResources(){return this._externalResources}set externalResources(n){this._externalResources=n}get synonyms(){return this._synonyms}set synonyms(n){this._synonyms=n}get systematicName(){return this._systematicName}set systematicName(n){this._systematicName=n}},Xe(w0,"ctorParameters",()=>[]),Xe(w0,"propDecorators",{crossReferences:[{type:Yt}],synonyms:[{type:Yt}],systematicName:[{type:Yt}]}),w0);C0=kD([yr({selector:"cp-complex-references",template:K4,styles:[Q4]})],C0);var J4=`<div class="row">
  <div class="columns medium-12 margin-top-medium no-pad-left">
    <h3>Assembly</h3>
    <table class="hover">
      <tbody>
        @for (assembly of assemblies; track assembly) {
          <tr>
            <td>
              {{assembly}}
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>
</div>
`;var e5="";var DD=function(t,n,a,u){var g=arguments.length,y=g<3?n:u===null?u=Object.getOwnPropertyDescriptor(n,a):u,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,n,a,u);else for(var k=t.length-1;k>=0;k--)(T=t[k])&&(y=(g<3?T(y):g>3?T(n,a,y):T(n,a))||y);return g>3&&y&&Object.defineProperty(n,a,y),y},S0,E0=(S0=class{constructor(){Xe(this,"_assemblies")}ngOnInit(){}get assemblies(){return this._assemblies}set assemblies(n){this._assemblies=n}},Xe(S0,"ctorParameters",()=>[]),Xe(S0,"propDecorators",{assemblies:[{type:Yt}]}),S0);E0=DD([yr({selector:"cp-assemblies",template:J4,styles:[e5]})],E0);var t5=`<ul class="goToMenu dropdown menu float-right" data-disable-hover="true" data-click-open="true"
  data-close-on-click-inside="true" data-dropdown-menu>
  <li>
    <a class="label" style="font-size: 1.1rem" (click)="doCheckSection()"><i class="icon icon-functional"
    data-icon="M"></i>Go to</a>
    <ul class="menu">
      <li>
        @if (sectionService.participantsSection) {
          <a (click)="scrollToElement('participants')"
            [ngClass]="{'selected': isSelected('Participants')}"
          >Components</a>
        }
      </li>
      <li>
        @if (sectionService.functionSection) {
          <a (click)="scrollToElement('function')"
            [ngClass]="{'selected': isSelected('Function')}"
          >Function</a>
        }
      </li>
      <li>
        @if (sectionService.propertiesSection) {
          <a (click)="scrollToElement('properties')"
            [ngClass]="{'selected': isSelected('Properties')}"
          >Properties</a>
        }
      </li>
      <li>
        @if (sectionService.expressionSection) {
          <a (click)="scrollToElement('expression')"
            [ngClass]="{'selected': isSelected('Expression and Cellular Location')}"
          >Expression and Cellular Location</a>
        }
      </li>
      <li>
        @if (sectionService.diseaseSection) {
          <a (click)="scrollToElement('disease')"
            [ngClass]="{'selected': isSelected('Diseases and Pathologies')}"
          >Diseases and Pathologies</a>
        }
      </li>
      <li>
        @if (sectionService.namesSection) {
          <a (click)="scrollToElement('references')"
            [ngClass]="{'selected': isSelected('Additional Information')}"
          >Additional Information</a>
        }
      </li>
    </ul>
  </li>
</ul>
`;var r5=`.selected{cursor:not-allowed}
`;var LD=function(t,n,a,u){var g=arguments.length,y=g<3?n:u===null?u=Object.getOwnPropertyDescriptor(n,a):u,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,n,a,u);else for(var k=t.length-1;k>=0;k--)(T=t[k])&&(y=(g<3?T(y):g>3?T(n,a,y):T(n,a))||y);return g>3&&y&&Object.defineProperty(n,a,y),y},T0,M0=(T0=class{constructor(n,a,u,g,y){Xe(this,"_sectionService");Xe(this,"cdr");Xe(this,"pageScrollService");Xe(this,"document");Xe(this,"googleAnalyticsService");Xe(this,"_sectionName");this._sectionService=n,this.cdr=a,this.pageScrollService=u,this.document=g,this.googleAnalyticsService=y}ngOnInit(){switch(this._sectionName){case"Participants":this._sectionService.participantsSectionAvailable();break;case"Function":this._sectionService.functionSectionAvailable();break;case"Properties":this._sectionService.propertiesSectionAvailable();break;case"Diseases and Pathologies":this._sectionService.diseaseSectionAvailable();break;case"Expression and Cellular Location":this._sectionService.expressionSectionAvailable();break;case"Additional Information":this._sectionService.namesSectionAvailable();break}}ngAfterViewInit(){$(".goToMenu").foundation()}scrollToElement(n){this.googleAnalyticsService.fireGoToDetailsSectionEvent(n),this.pageScrollService.scroll({document:this.document,scrollTarget:"#"+n})}doCheckSection(){this.cdr.detectChanges()}isSelected(n){return this._sectionName===n}get sectionName(){return this._sectionName}set sectionName(n){this._sectionName=n}get sectionService(){return this._sectionService}},Xe(T0,"ctorParameters",()=>[{type:_s},{type:tx},{type:px},{type:void 0,decorators:[{type:Y1,args:[nx]}]},{type:bi}]),Xe(T0,"propDecorators",{sectionName:[{type:Yt}]}),T0);M0=LD([yr({selector:"cp-go-to",template:t5,changeDetection:Z1.OnPush,styles:[r5]})],M0);var p5=Wa(i5());var o5=`@if (crossReferences && crossReferences.length > 0) {
  <div class="row">
    <div class="columns medium-12 margin-top-medium no-pad-left">
      <h3>External Resources</h3>
      <table class="hover">
        <thead>
          <th>Identifier</th>
        </thead>
        <tbody>
          @for (crossReference of crossReferences; track crossReference.identifier) {
            <tr>
              <td>
                @if (!!crossReference.searchURL) {
                  <a href="{{crossReference.searchURL}}" target="_blank">
                    {{crossReference.identifier}} <i class="icon icon-generic small" data-icon="x"></i>
                  </a>
                } @else if (crossReference.database.toLowerCase() === 'humap') {
                  <a href="{{humapUrl(crossReference.identifier)}}" target="_blank">
                    {{crossReference.identifier}} <i class="icon icon-generic small" data-icon="x"></i>
                  </a>
                } @else {
                  <span>{{crossReference.identifier}}</span>
                }
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  </div>
}
`;var a5="";var BD=function(t,n,a,u){var g=arguments.length,y=g<3?n:u===null?u=Object.getOwnPropertyDescriptor(n,a):u,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,n,a,u);else for(var k=t.length-1;k>=0;k--)(T=t[k])&&(y=(g<3?T(y):g>3?T(n,a,y):T(n,a))||y);return g>3&&y&&Object.defineProperty(n,a,y),y},R0,k0=(R0=class{constructor(){Xe(this,"_crossReferences");Xe(this,"humapUrl",Gf)}ngOnInit(){}get crossReferences(){return this._crossReferences}set crossReferences(n){this._crossReferences=n}},Xe(R0,"ctorParameters",()=>[]),Xe(R0,"propDecorators",{crossReferences:[{type:Yt}]}),R0);k0=BD([yr({selector:"cp-external-resources",template:o5,styles:[a5]})],k0);var s5=`<div class="reveal large" id="downloadModal" data-reveal>
  <h3>Download</h3>
  <p class="lead">
    Download this complex in PSI-MI XML 2.5 & 3.0, ComplexTab or PSI-MI JSON. If you would like to learn more about our
    download options, please have a look to our <a class="readmore" routerLink="/download">programmatic access section</a>.
  </p>
  <div class="row button-grid small-up-1 medium-up-4 large-up-4 margin-top-xlarge no-pad-right"
    data-equalize-on="medium" id="large-button-grid">
    @for (format of formats(); track format.name) {
      <div class="column  padding-bottom-large">
        <a class="button medium-12 columns text-center" [class.disabled]="format.disabled" (click)="download(format)">
          <h3 class="icon icon-fileformats  white-color" [attr.data-icon]="format.icon"></h3>
          <h5 class="white-color">{{format.name}}</h5>
        </a>
      </div>
    }
    <button class="close-button" data-close aria-label="Close modal" type="button">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
`;var u5="";var zD=function(t,n,a,u){var g=arguments.length,y=g<3?n:u===null?u=Object.getOwnPropertyDescriptor(n,a):u,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,n,a,u);else for(var k=t.length-1;k>=0;k--)(T=t[k])&&(y=(g<3?T(y):g>3?T(n,a,y):T(n,a))||y);return g>3&&y&&Object.defineProperty(n,a,y),y},I0=ja.complex_ws_base_url,P0,D0=(P0=class{constructor(n){Xe(this,"googleAnalyticsService");Xe(this,"complexAC",qn.required());Xe(this,"formats",rx(()=>[{icon:"1",name:"PSI-MI XML 2.5",filename:`${this.complexAC()}.xml`,url:`${I0}/export/${this.complexAC()}?format=xml25`},{icon:"1",name:"PSI-MI XML 3.0",filename:`${this.complexAC()}.xml`,url:`${I0}/export/${this.complexAC()}?format=xml25`},{icon:"v",name:"ComplexTab",filename:`${this.complexAC()}.tsv`,url:`${I0}/export/${this.complexAC()}?format=tsv`},{icon:"J",name:"PSI-MI JSON",filename:`${this.complexAC()}.json`,url:`${I0}/export/${this.complexAC()}`}]));this.googleAnalyticsService=n}download(n){n.disabled||fetch(n.url).then(a=>a.blob().then(u=>{let g=document.createElement("a");g.href=URL.createObjectURL(u),g.setAttribute("download",n.filename),g.click(),g.remove()}))}ngOnInit(){}},Xe(P0,"ctorParameters",()=>[{type:bi}]),Xe(P0,"propDecorators",{complexAC:[{type:Yt,args:[{isSignal:!0,alias:"complexAC",required:!0,transform:void 0}]}]}),P0);D0=zD([yr({selector:"cp-download-modal",template:s5,styles:[u5]})],D0);var c5=`<svg viewBox="0 0 100 100" class="node-diagram" [ngStyle]="{'height': height()}" #svg>
  <g #shapeGroup>
    @switch (shape()) {
      @case (NodeShape.ELLIPSE) {
        <circle r="47.57" cx="50%" cy="50%"/>
      }
      @case (NodeShape.TRIANGLE) {
        <path d="m 50.714288,5.8194648 44.880439,91.4407922 -91.3680247,0 z"/>
      }
      @case (NodeShape.DIAMOND) {
        <path d="M 2.6785714,50 49.821429,2.8007365 97.301851,49.604865 49.821429,97.123279 Z"/>
      }
      @case (NodeShape.HEXAGON) {
        <path d="M 2.321,50 26.071429,9.7650222 H 73.398681 L 97.577186,50 73.398681,90.516137 H 26.071429 Z"/>
      }
      @case (NodeShape.OCTAGON) {
        <path d="M 97.443707,69.535644 69.733981,97.361553 30.464356,97.443707 2.6384466,69.733981 2.5562928,30.464356 30.266019,2.6384466 69.535644,2.5562928 97.361553,30.266019 Z"/>
      }
      @case (NodeShape.ROUNDED_RECTANGLE) {
        <rect width="95.125" height="95.125" ry="25" x="2.5" y="2.5"/>
      }
      @case (NodeShape.PARALLELOGRAM) {
        <path
          d="m4.1071 2.7838h44.523l47.084 94.477-47.023 0.17857z"/>
      }
      @case (NodeShape.VEE) {
        <path
          d="m2.5 2.4266 47.5 38.214 47.679-38.559-47.679 92.143z"/>
      }
      @case (NodeShape.TAG) {
        <path
          d="m1.9643 98.214-0.056406-96.306h48.092l47.302 47.697-47.302 48.59z"/>
      }
    }
  </g>

  @if (label() !== null) {
    <text fill="white" x="50%" y="52.5%" dominant-baseline="middle" text-anchor="middle" #labelElt>
      {{label()}}
    </text>
  }
</svg>
`;var l5=`.node-diagram{vertical-align:middle;height:20pt}.node-diagram text{-webkit-user-select:text;user-select:text}
`;var WD=function(t,n,a,u){var g=arguments.length,y=g<3?n:u===null?u=Object.getOwnPropertyDescriptor(n,a):u,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,n,a,u);else for(var k=t.length-1;k>=0;k--)(T=t[k])&&(y=(g<3?T(y):g>3?T(n,a,y):T(n,a))||y);return g>3&&y&&Object.defineProperty(n,a,y),y},O0,Uf=(O0=class{constructor(){Xe(this,"shape",qn(jo.ELLIPSE));Xe(this,"color",qn("#d6d6d6"));Xe(this,"borderColor",qn());Xe(this,"borderWidth",qn(3));Xe(this,"label",qn());Xe(this,"height",qn("30pt"));Xe(this,"labelElt");Xe(this,"svgElt");Xe(this,"shapeGroupElt");Xe(this,"NodeShape",jo)}ngAfterViewInit(){this.init()}ngOnChanges(n){this.init()}init(){let n=this.shapeGroupElt.nativeElement.firstElementChild;if(n&&(n.setAttribute("fill",this.color()),n.setAttribute("stroke-width",this.borderWidth().toString()),n.setAttribute("stroke",this.borderColor()?this.borderColor():this.color()),this.label())){let u=this.labelElt.nativeElement.getBBox();u.width>=100&&($(this.svgElt.nativeElement).attr("viewBox",`0 0 ${u.width+5} 100`),this.shape()!==jo.ELLIPSE&&n.setAttribute("transform",`translate(${u.width/2-49})`))}}},Xe(O0,"ctorParameters",()=>[]),Xe(O0,"propDecorators",{shape:[{type:Yt,args:[{isSignal:!0,alias:"shape",required:!1,transform:void 0}]}],color:[{type:Yt,args:[{isSignal:!0,alias:"color",required:!1,transform:void 0}]}],borderColor:[{type:Yt,args:[{isSignal:!0,alias:"borderColor",required:!1,transform:void 0}]}],borderWidth:[{type:Yt,args:[{isSignal:!0,alias:"borderWidth",required:!1,transform:void 0}]}],label:[{type:Yt,args:[{isSignal:!0,alias:"label",required:!1,transform:void 0}]}],height:[{type:Yt,args:[{isSignal:!0,alias:"height",required:!1,transform:void 0}]}],labelElt:[{type:Ku,args:["labelElt",{static:!1}]}],svgElt:[{type:Ku,args:["svg",{static:!0}]}],shapeGroupElt:[{type:Ku,args:["shapeGroup",{static:!0}]}]}),O0);Uf=WD([yr({selector:"cp-node-diagram",template:c5,styles:[l5]})],Uf);var jo;(function(t){t.TRIANGLE="triangle",t.DIAMOND="diamond",t.ROUNDED_RECTANGLE="round-rectangle",t.TAG="tag",t.VEE="vee",t.ELLIPSE="ellipse",t.PARALLELOGRAM="rhomboid",t.OCTAGON="octagon",t.HEXAGON="hexagon"})(jo||(jo={}));var f5=`<tr>
  <td class="centered-vertical" style="{{'width: 16%; ' + getBackgroundStyle()}}">
    <div class="columns medium-12 centered-vertical">
      <cp-node-diagram [shape]="getLegendShape(participant().interactorType)"
                       [color]="getLegendColor(participant())"
                       [height]="participant().interactorType === 'stable complex' ? '35pt' : '30pt'"
                       [borderColor]="participant().interactorType === 'stable complex' ? '#ffffff' : '#000000'"
                       [borderWidth]="participant().interactorType === 'stable complex' ? 8 : 3"
      ></cp-node-diagram>
    </div>
  </td>
  <td style="width: 64%">
    <div class="columns medium-12 no-pad-right no-pad-left"><b>{{ participant().interactorType }} -
      {{ participant().name }} ({{ participant().bioRole }})</b>
    </div>
    <div class="columns medium-12 no-pad-right no-pad-left">
      @if (participant().identifierLink) {
        <a href="{{participant().identifierLink}}"
           target="_blank">{{ participant().identifier }}
          <i class="icon icon-generic small" data-icon="x"></i>
        </a>
      }
    </div>
    <div class="columns medium-12 no-pad-right no-pad-left">{{ participant().description }}</div>
  </td>
  <td style="width: 20%">
    <div class="columns medium-12 centered-vertical">
      @if (participant().stoichiometry) {
        <p class="badge">
          {{ getConvertedstoichiometry(participant().stoichiometry) }}</p>
      }
    </div>
  </td>
</tr>
@if (participant().participants.length > 0) {
  <tr></tr>
  @if (participant().participants.length > 0) {
    <tr class="text-center small-row">
      <td style="{{getBackgroundStyle()}}"></td>
      @if (participant().expanded) {
        <td colspan="2" class="no-padding-top">
          <a class="label" (click)="participant().expanded = false">Hide components</a>
        </td>
      }
      @if (!participant().expanded) {
        <td colspan="2" class="no-padding-top">
          <a class="label" (click)="participant().expanded = true">Show components</a>
        </td>
      }
    </tr>
  }
}
@if (participant().expanded) {
  <tbody class="no-border">
    @for (subparticipant of participant().participants; track subparticipant.identifier) {
      <tr>
        <td colspan="3" class="no-padding">
          <cp-complex-participant-legend
            [participant]="subparticipant"
            [colorLegendGroups]="colorLegendGroups()"
            [backgroundComplexId]="participant().identifier"
            [parentComplexAcs]="getParentComplexAcs()">
          </cp-complex-participant-legend>
        </td>
      </tr>
    }
  </tbody>
}
`;var h5=`.gray-top-border{border-top:1px solid dimgray}.small-row{line-height:1}.no-padding-top{padding-top:0}.no-padding{padding:0}.no-border{border:none}.centered-vertical{text-align:center;vertical-align:middle}
`;var XD=function(t,n,a,u){var g=arguments.length,y=g<3?n:u===null?u=Object.getOwnPropertyDescriptor(n,a):u,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,n,a,u);else for(var k=t.length-1;k>=0;k--)(T=t[k])&&(y=(g<3?T(y):g>3?T(n,a,y):T(n,a))||y);return g>3&&y&&Object.defineProperty(n,a,y),y},N1,N0=(N1=class{constructor(){Xe(this,"participant",qn());Xe(this,"colorLegendGroups",qn());Xe(this,"parentComplexAcs",qn());Xe(this,"backgroundComplexId",qn())}getBackgroundStyle(){let n=this.colorLegendGroups().get(this.backgroundComplexId());if(this.parentComplexAcs().length>0){let a="background: linear-gradient(90deg, ",u=5;for(let g of this.parentComplexAcs())a+=`${this.colorLegendGroups().get(g)} 0 ${u}%, `,u+=5;return a+=n+" 0)",a}else return"background-color: "+n}getParentComplexAcs(){return[...this.parentComplexAcs(),this.backgroundComplexId()]}getLegendShape(n){switch(n){case"small molecule":return jo.TRIANGLE;case"protein":case"peptide":return jo.ELLIPSE;case"stable complex":return jo.HEXAGON;case"molecule set":return jo.OCTAGON;case"single stranded deoxyribonucleic acid":case"double stranded deoxyribonucleic acid":return jo.PARALLELOGRAM;case"small nuclear rna":case"small nucleolar rna":case"ribosomal rna":case"messenger rna":case"transfer rna":case"signal recognition particle rna":case"ribonucleic acid":return jo.DIAMOND}}getLegendColor(n){let a;return(n.interactorType==="protein"||n.interactorType==="peptide")&&!n.identifier.includes("-PRO")&&n.name?a=this.colorLegendGroups().get(n.name.toUpperCase()):a=this.colorLegendGroups().get(n.identifier.toUpperCase()),a||(a="#ffffff"),a}getConvertedstoichiometry(n){return n.split(",")[0].split(":")[1].trim()}},Xe(N1,"propDecorators",{participant:[{type:Yt,args:[{isSignal:!0,alias:"participant",required:!1,transform:void 0}]}],colorLegendGroups:[{type:Yt,args:[{isSignal:!0,alias:"colorLegendGroups",required:!1,transform:void 0}]}],parentComplexAcs:[{type:Yt,args:[{isSignal:!0,alias:"parentComplexAcs",required:!1,transform:void 0}]}],backgroundComplexId:[{type:Yt,args:[{isSignal:!0,alias:"backgroundComplexId",required:!1,transform:void 0}]}]}),N1);N0=XD([yr({selector:"cp-complex-participant-legend",template:f5,encapsulation:zf.None,styles:[h5]})],N0);var YD=function(t,n,a,u){var g=arguments.length,y=g<3?n:u===null?u=Object.getOwnPropertyDescriptor(n,a):u,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,n,a,u);else for(var k=t.length-1;k>=0;k--)(T=t[k])&&(y=(g<3?T(y):g>3?T(n,a,y):T(n,a))||y);return g>3&&y&&Object.defineProperty(n,a,y),y},d5=class{};d5=YD([ex({imports:[cx.forChild([{path:"",component:rl}]),ix,hx,mx,dx],declarations:[rl,lh,uh,ih,hh,ph,Hm,N0,Gm,$m,rh,eh,Qf,Zf,Xf,m0,d0,f0,c0,s0,o0,n0,t0,g0,Jm,Km,Ym,C0,_0,x0,E0,M0,k0,D0,Uf],providers:[Qu,Po,Wf,qf,jf,p5.Md5,_s],exports:[Uf]})],d5);export{d5 as ComplexDetailsModule};
