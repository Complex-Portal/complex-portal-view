!function(){"use strict";function e(e,n){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,n)}(e))||n&&e&&"number"==typeof e.length){i&&(e=i);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,l=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return a=e.done,e},e:function(e){l=!0,c=e},f:function(){try{a||null==i.return||i.return()}finally{if(l)throw c}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,o(i.key),i)}}function r(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(self.webpackChunkcomplex_portal_view=self.webpackChunkcomplex_portal_view||[]).push([[358],{74358:function(t,i,o){o.r(i),o.d(i,{ComplexResultsModule:function(){return _e}});var c=o(38583),a=o(57040),l=function(){function e(t,i,r,o,c){n(this,e),this._identifier=t,this._identifierLink=i,this._name=r,this._description=o,this._interactorType=c}return r(e,[{key:"identifier",get:function(){return this._identifier}},{key:"identifierLink",get:function(){return this._identifierLink}},{key:"name",get:function(){return this._name}},{key:"description",get:function(){return this._description}},{key:"interactorType",get:function(){return this._interactorType}}]),e}(),s=o(10639),u=o(35076),p=o(20658),d=o(39075),h=o(8991);function f(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"li",5),s.TgZ(1,"a",6),s.NdJ("click",function(){return s.CHM(n),s.oxw().getPreviousPage()}),s._uU(2,"\xab Previous"),s.qZA(),s.qZA()}}function g(e,t){if(1&e&&(s.TgZ(0,"li",9),s.TgZ(1,"span",10),s._uU(2,"You're on page"),s.qZA(),s._uU(3),s.qZA()),2&e){var n=s.oxw().$implicit;s.xp6(3),s.Oqu(n[0])}}function x(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"li"),s.TgZ(1,"a",6),s.NdJ("click",function(){s.CHM(n);var e=s.oxw().$implicit;return s.oxw().getPage(e[0])}),s._uU(2),s.qZA(),s.qZA()}if(2&e){var i=s.oxw().$implicit;s.xp6(2),s.Oqu(i[0])}}function m(e,t){if(1&e&&(s.ynx(0),s.YNc(1,g,4,1,"li",7),s.YNc(2,x,3,1,"li",8),s.BQk()),2&e){var n=t.$implicit;s.xp6(1),s.Q6J("ngIf","true"==n[1]),s.xp6(1),s.Q6J("ngIf","false"==n[1])}}function v(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"li",11),s.TgZ(1,"a",6),s.NdJ("click",function(){return s.CHM(n),s.oxw().getNextPage()}),s._uU(2,"Next \xbb"),s.qZA(),s.qZA()}}var y,I=((y=function(){function e(){n(this,e),this.onPageChange=new s.vpe}return r(e,[{key:"ngOnInit",value:function(){this.updatePaginatior()}},{key:"ngOnChanges",value:function(e){this.updatePaginatior()}},{key:"updatePaginatior",value:function(){var e,t;for(this.pagination=[],this._lastPageIndex<5?(e=1,t=this._lastPageIndex):1===this._currentPageIndex||2===this._currentPageIndex?(e=1,t=5):this._currentPageIndex===this._lastPageIndex||this._currentPageIndex===this._lastPageIndex-1?(e=this._lastPageIndex-4,t=this._lastPageIndex):(e=this._currentPageIndex-2,t=this._currentPageIndex+2);e<=t;)this._pagination.push(e===this._currentPageIndex?[[this._currentPageIndex],[!0]]:[[e],[!1]]),e++}},{key:"getFirstPage",value:function(){this.onPageChange.emit(1)}},{key:"getLastPage",value:function(){this.onPageChange.emit(this.lastPageIndex)}},{key:"getPage",value:function(e){this.onPageChange.emit(e)}},{key:"getPreviousPage",value:function(){this.onPageChange.emit(this.currentPageIndex-1)}},{key:"getNextPage",value:function(){this.onPageChange.emit(this.currentPageIndex+1)}},{key:"lastPageIndex",get:function(){return this._lastPageIndex},set:function(e){this._lastPageIndex=e}},{key:"currentPageIndex",get:function(){return this._currentPageIndex},set:function(e){this._currentPageIndex=e}},{key:"pagination",get:function(){return this._pagination},set:function(e){this._pagination=e}}]),e}()).\u0275fac=function(e){return new(e||y)},y.\u0275cmp=s.Xpm({type:y,selectors:[["cp-complex-paginator"]],inputs:{lastPageIndex:"lastPageIndex",currentPageIndex:"currentPageIndex"},outputs:{onPageChange:"onPageChange"},features:[s.TTD],decls:7,vars:5,consts:[[1,"text-center"],["role","navigation","aria-label","Pagination",1,"pagination","text-center"],["class","arrow unavailable","aria-disabled","true",4,"ngIf"],[4,"ngFor","ngForOf"],["class","arrow",4,"ngIf"],["aria-disabled","true",1,"arrow","unavailable"],[3,"click"],["class","current",4,"ngIf"],[4,"ngIf"],[1,"current"],[1,"show-for-sr"],[1,"arrow"]],template:function(e,t){1&e&&(s.TgZ(0,"div"),s.TgZ(1,"h5",0),s._uU(2),s.qZA(),s.TgZ(3,"ul",1),s.YNc(4,f,3,0,"li",2),s.YNc(5,m,3,2,"ng-container",3),s.YNc(6,v,3,0,"li",4),s.qZA(),s.qZA()),2&e&&(s.xp6(2),s.AsE("",t.currentPageIndex," of ",t.lastPageIndex,""),s.xp6(2),s.Q6J("ngIf",1!=t.currentPageIndex),s.xp6(1),s.Q6J("ngForOf",t.pagination),s.xp6(1),s.Q6J("ngIf",t.currentPageIndex!=t.lastPageIndex))},directives:[c.O5,c.sg],styles:[""]}),y);function Z(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"div"),s.TgZ(1,"a",4),s.NdJ("click",function(){return s.CHM(n),s.oxw().resetAllFilters()}),s._UZ(2,"i",5),s._uU(3," Reset filters"),s.qZA(),s.qZA()}}function _(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"div"),s.TgZ(1,"input",11,12),s.NdJ("change",function(){s.CHM(n);var e=s.MAs(2);return s.oxw(3).changeSpeciesFilter(e.value,e.checked)}),s.qZA(),s._uU(3),s.qZA()}if(2&e){var i=s.oxw().$implicit;s.xp6(1),s.s9C("value",i.name),s.xp6(2),s.AsE(" ",i.name," (",i.count,") ")}}function C(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"div"),s.TgZ(1,"input",13,12),s.NdJ("change",function(){s.CHM(n);var e=s.MAs(2);return s.oxw(3).changeSpeciesFilter(e.value,e.checked)}),s.qZA(),s._uU(3),s.qZA()}if(2&e){var i=s.oxw().$implicit;s.xp6(1),s.s9C("value",i.name),s.xp6(2),s.AsE(" ",i.name," (",i.count,") ")}}function b(e,t){if(1&e&&(s.TgZ(0,"li"),s.TgZ(1,"div",8),s.YNc(2,_,4,3,"div",9),s.YNc(3,C,4,3,"div",10),s.qZA(),s.qZA()),2&e){var n=t.$implicit,i=s.oxw(2);s.xp6(1),s.Q6J("ngSwitch",i.isSelected(n.name,i.spicesFilter)),s.xp6(1),s.Q6J("ngSwitchCase",!0)}}function T(e,t){if(1&e&&(s.TgZ(0,"div"),s.TgZ(1,"b"),s._uU(2,"Species"),s.qZA(),s.TgZ(3,"ul",6),s.YNc(4,b,4,2,"li",7),s.qZA(),s.qZA()),2&e){var n=s.oxw();s.xp6(4),s.Q6J("ngForOf",n.facets.species_f)}}function S(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"div"),s.TgZ(1,"input",11,12),s.NdJ("change",function(){s.CHM(n);var e=s.MAs(2);return s.oxw(3).changeBiologicalRoleFilter(e.value,e.checked)}),s.qZA(),s._uU(3),s.qZA()}if(2&e){var i=s.oxw().$implicit;s.xp6(1),s.s9C("value",i.name),s.xp6(2),s.AsE(" ",i.name," (",i.count,") ")}}function F(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"div"),s.TgZ(1,"input",13,12),s.NdJ("change",function(){s.CHM(n);var e=s.MAs(2);return s.oxw(3).changeBiologicalRoleFilter(e.value,e.checked)}),s.qZA(),s._uU(3),s.qZA()}if(2&e){var i=s.oxw().$implicit;s.xp6(1),s.s9C("value",i.name),s.xp6(2),s.AsE(" ",i.name," (",i.count,") ")}}function A(e,t){if(1&e&&(s.TgZ(0,"li"),s.TgZ(1,"div",8),s.YNc(2,S,4,3,"div",9),s.YNc(3,F,4,3,"div",10),s.qZA(),s.qZA()),2&e){var n=t.$implicit,i=s.oxw(2);s.xp6(1),s.Q6J("ngSwitch",i.isSelected(n.name,i.bioRoleFilter)),s.xp6(1),s.Q6J("ngSwitchCase",!0)}}function k(e,t){if(1&e&&(s.TgZ(0,"div"),s.TgZ(1,"b"),s._uU(2,"Biological Role"),s.qZA(),s.TgZ(3,"ul",6),s.YNc(4,A,4,2,"li",7),s.qZA(),s.qZA()),2&e){var n=s.oxw();s.xp6(4),s.Q6J("ngForOf",n.facets.pbiorole_f)}}function w(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"div"),s.TgZ(1,"input",11,12),s.NdJ("change",function(){s.CHM(n);var e=s.MAs(2);return s.oxw(3).changeInteractorTypeFilter(e.value,e.checked)}),s.qZA(),s._uU(3),s.qZA()}if(2&e){var i=s.oxw().$implicit;s.xp6(1),s.s9C("value",i.name),s.xp6(2),s.AsE(" ",i.name," (",i.count,") ")}}function q(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"div"),s.TgZ(1,"input",13,12),s.NdJ("change",function(){s.CHM(n);var e=s.MAs(2);return s.oxw(3).changeInteractorTypeFilter(e.value,e.checked)}),s.qZA(),s._uU(3),s.qZA()}if(2&e){var i=s.oxw().$implicit;s.xp6(1),s.s9C("value",i.name),s.xp6(2),s.AsE(" ",i.name," (",i.count,") ")}}function P(e,t){if(1&e&&(s.TgZ(0,"li"),s.TgZ(1,"div",8),s.YNc(2,w,4,3,"div",9),s.YNc(3,q,4,3,"div",10),s.qZA(),s.qZA()),2&e){var n=t.$implicit,i=s.oxw(2);s.xp6(1),s.Q6J("ngSwitch",i.isSelected(n.name,i.interactorTypeFilter)),s.xp6(1),s.Q6J("ngSwitchCase",!0)}}function N(e,t){if(1&e&&(s.TgZ(0,"div"),s.TgZ(1,"b"),s._uU(2,"Interactor Type"),s.qZA(),s.TgZ(3,"ul",6),s.YNc(4,P,4,2,"li",7),s.qZA(),s.qZA()),2&e){var n=s.oxw();s.xp6(4),s.Q6J("ngForOf",n.facets.ptype_f)}}function O(e,t){1&e&&(s.TgZ(0,"div"),s.TgZ(1,"h6"),s._uU(2,"No filters available"),s.qZA(),s.qZA())}var J=function(){var e=function(){function e(t){n(this,e),this.googleAnalyticsService=t,this.onSpicesFilterChanged=new s.vpe,this.onBiologicalRoleFilterChanged=new s.vpe,this.onInteractorTypeFilterChanged=new s.vpe,this.onResetAllFilters=new s.vpe}return r(e,[{key:"ngOnInit",value:function(){}},{key:"changeSpeciesFilter",value:function(e,t){t?(this.spicesFilter.push(e),this.googleAnalyticsService.fireAddedFilterEvent(e)):(this.spicesFilter.splice(this.spicesFilter.indexOf(e),1),this.googleAnalyticsService.fireRemovedFilterEvent(e)),this.onSpicesFilterChanged.emit(this.spicesFilter)}},{key:"changeBiologicalRoleFilter",value:function(e,t){t?(this.bioRoleFilter.push(e),this.googleAnalyticsService.fireAddedFilterEvent(e)):(this.bioRoleFilter.splice(this.bioRoleFilter.indexOf(e),1),this.googleAnalyticsService.fireRemovedFilterEvent(e)),this.onBiologicalRoleFilterChanged.emit(this.bioRoleFilter)}},{key:"changeInteractorTypeFilter",value:function(e,t){t?(this.interactorTypeFilter.push(e),this.googleAnalyticsService.fireAddedFilterEvent(e)):(this.interactorTypeFilter.splice(this.interactorTypeFilter.indexOf(e),1),this.googleAnalyticsService.fireRemovedFilterEvent(e)),this.onInteractorTypeFilterChanged.emit(this.interactorTypeFilter)}},{key:"resetAllFilters",value:function(){this.onResetAllFilters.emit(!0)}},{key:"anyFiltersSelected",value:function(){return 0!==this._spicesFilter.length||0!==this._bioRoleFilter.length||0!==this._interactorTypeFilter.length}},{key:"isSelected",value:function(e,t){return-1!==t.indexOf(e)}},{key:"facets",get:function(){return this._facets},set:function(e){this._facets=e}},{key:"spicesFilter",get:function(){return this._spicesFilter},set:function(e){this._spicesFilter=e}},{key:"bioRoleFilter",get:function(){return this._bioRoleFilter},set:function(e){this._bioRoleFilter=e}},{key:"interactorTypeFilter",get:function(){return this._interactorTypeFilter},set:function(e){this._interactorTypeFilter=e}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.Y36(h.y))},e.\u0275cmp=s.Xpm({type:e,selectors:[["cp-complex-filter"]],inputs:{facets:"facets",spicesFilter:"spicesFilter",bioRoleFilter:"bioRoleFilter",interactorTypeFilter:"interactorTypeFilter"},outputs:{onSpicesFilterChanged:"onSpicesFilterChanged",onBiologicalRoleFilterChanged:"onBiologicalRoleFilterChanged",onInteractorTypeFilterChanged:"onInteractorTypeFilterChanged",onResetAllFilters:"onResetAllFilters"},decls:11,vars:5,consts:[[1,"filters","row"],[1,"columns","medium-6"],[4,"ngIf"],[1,"columns","medium-12"],[1,"button",3,"click"],["data-icon","d",1,"icon","icon-functional"],[1,"no-bullet"],[4,"ngFor","ngForOf"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["type","checkbox","checked","",3,"value","change"],["filter",""],["type","checkbox",3,"value","change"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"h3"),s._uU(3,"Filters"),s.qZA(),s.qZA(),s.TgZ(4,"div",1),s.YNc(5,Z,4,0,"div",2),s.qZA(),s.TgZ(6,"div",3),s.YNc(7,T,5,1,"div",2),s.YNc(8,k,5,1,"div",2),s.YNc(9,N,5,1,"div",2),s.YNc(10,O,3,0,"div",2),s.qZA(),s.qZA()),2&e&&(s.xp6(5),s.Q6J("ngIf",t.anyFiltersSelected()),s.xp6(2),s.Q6J("ngIf",t.facets.species_f),s.xp6(1),s.Q6J("ngIf",t.facets.pbiorole_f),s.xp6(1),s.Q6J("ngIf",t.facets.ptype_f),s.xp6(1),s.Q6J("ngIf",!t.facets.species_f&&!t.facets.pbiorole_f&&!t.facets.ptype_f))},directives:[c.O5,c.sg,c.RF,c.n9,c.ED],styles:[""]}),e}(),Q=function(e){return["/complex",e]};function R(e,t){if(1&e&&(s.TgZ(0,"div"),s._uU(1),s.TgZ(2,"a",2),s._uU(3,"..."),s.qZA(),s.qZA()),2&e){var n=s.oxw().$implicit;s.xp6(1),s.hij(" ",n.description,""),s.xp6(1),s.Q6J("routerLink",s.VKq(2,Q,n.complexAC))}}function U(e,t){if(1&e&&(s.TgZ(0,"div"),s._uU(1),s.TgZ(2,"a",2),s._uU(3,"..."),s.qZA(),s.qZA()),2&e){var n=s.oxw().$implicit;s.xp6(1),s.hij(" ",n.description.substr(0,250),""),s.xp6(1),s.Q6J("routerLink",s.VKq(2,Q,n.complexAC))}}function M(e,t){if(1&e&&(s.TgZ(0,"li"),s.TgZ(1,"h3"),s.TgZ(2,"a",2),s._uU(3),s.qZA(),s.qZA(),s.TgZ(4,"div",3),s.TgZ(5,"b"),s._uU(6,"Complex AC:"),s.qZA(),s._uU(7),s.TgZ(8,"b"),s._uU(9,"Organism:"),s.qZA(),s._uU(10),s._UZ(11,"br"),s.TgZ(12,"b"),s._uU(13,"Description:"),s.qZA(),s.YNc(14,R,4,4,"div",4),s.YNc(15,U,4,4,"div",4),s.qZA(),s.qZA()),2&e){var n=t.$implicit;s.xp6(2),s.Q6J("routerLink",s.VKq(6,Q,n.complexAC)),s.xp6(1),s.Oqu(n.complexName),s.xp6(4),s.hij(" ",n.complexAC," / "),s.xp6(3),s.hij(" (",n.organismName,")"),s.xp6(4),s.Q6J("ngIf",n.description.length<=250),s.xp6(1),s.Q6J("ngIf",n.description.length>250)}}var L=function(){var e=function(){function e(){n(this,e)}return r(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["cp-complex-list"]],inputs:{complexSearch:"complexSearch"},decls:2,vars:1,consts:[[1,"no-bullet"],[4,"ngFor","ngForOf"],[3,"routerLink"],[1,"description",2,"background-color","white"],[4,"ngIf"]],template:function(e,t){1&e&&(s.TgZ(0,"ul",0),s.YNc(1,M,16,8,"li",1),s.qZA()),2&e&&(s.xp6(1),s.Q6J("ngForOf",t.complexSearch.elements))},directives:[c.sg,u.yS,c.O5],styles:[""]}),e}(),E=function(e){return["/complex",e]};function Y(e,t){if(1&e&&(s.TgZ(0,"th"),s.TgZ(1,"div",5),s.TgZ(2,"a",6),s.TgZ(3,"div",7),s._uU(4),s._UZ(5,"i",8),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e){var n=t.$implicit;s.xp6(2),s.s9C("title",n.complexAC),s.Q6J("routerLink",s.VKq(3,E,n.complexAC)),s.xp6(2),s.hij(" ",n.complexName," ")}}var $=function(){var e=function(){function e(){n(this,e)}return r(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["cp-table-header"]],inputs:{complexSearch:"complexSearch"},decls:9,vars:1,consts:[[1,"Complex-navigator"],[1,"CN-table"],["rowspan","2",1,"intHeader"],["colspan","15",1,"compHeader"],[4,"ngFor","ngForOf"],[1,"complexInTable"],["target","_blank",3,"routerLink","title"],[1,"txt"],["data-icon","x",1,"icon","icon-generic","small"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"table",1),s.TgZ(2,"tr"),s.TgZ(3,"th",2),s._uU(4,"Interactors"),s.qZA(),s.TgZ(5,"th",3),s._uU(6,"Complexes"),s.qZA(),s.qZA(),s.TgZ(7,"tr"),s.YNc(8,Y,6,5,"th",4),s.qZA(),s.qZA(),s.qZA()),2&e&&(s.xp6(8),s.Q6J("ngForOf",t.complexSearch.elements))},directives:[c.sg,u.yS],styles:[".compHeader[_ngcontent-%COMP%]{position:sticky;top:0;z-index:3;height:40px;text-align:left;font-size:medium;border:1px solid #0a494c;padding-left:10px}.intHeader[_ngcontent-%COMP%]{position:sticky;top:0;left:0;z-index:4;font-size:medium;border:1px solid #0a494c;min-width:130px;max-width:130px}th[_ngcontent-%COMP%]{position:sticky;z-index:2;text-align:center;top:0;background-color:#389198;border:1px solid #0a494c;min-width:140px;max-width:140px;height:200px;font-size:small;padding-left:5px;padding-right:5px}th[_ngcontent-%COMP%]   .txt[_ngcontent-%COMP%]{text-align:center;width:100%;height:200%;color:#e6e6e6}#CN-table[_ngcontent-%COMP%]{width:100%}"]}),e}(),V=function(){function e(t,i,r,o,c,a){n(this,e),this._identifier=t,this._identifierLink=i,this._name=r,this._description=o,this._stochiometry=c,this._interactorType=a}return r(e,[{key:"identifier",get:function(){return this._identifier}},{key:"identifierLink",get:function(){return this._identifierLink}},{key:"name",get:function(){return this._name}},{key:"description",get:function(){return this._description}},{key:"stochiometry",get:function(){return this._stochiometry}},{key:"interactorType",get:function(){return this._interactorType}}]),e}(),B=o(25917),H=o(88002);function j(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"div",10),s._uU(1),s.TgZ(2,"a",11),s.NdJ("click",function(){s.CHM(n);var e=s.oxw(2).index;return s.oxw().toggleSubcomplexExpandable(e)}),s._UZ(3,"i",12),s.qZA(),s.qZA()}if(2&e){var i=s.oxw(2).$implicit;s.xp6(1),s.hij(" ",i.interactor.identifier," "),s.xp6(1),s.MGl("title","",i.interactor.name,"'s interactors")}}function z(e,t){if(1&e&&(s.TgZ(0,"div",13),s.TgZ(1,"a",14),s._uU(2),s._UZ(3,"i",15),s.qZA(),s.qZA()),2&e){var n=s.oxw(2).$implicit;s.xp6(1),s.s9C("href",n.interactor.identifierLink,s.LSH),s.xp6(1),s.hij("",n.interactor.identifier," ")}}function D(e,t){if(1&e&&(s.ynx(0),s.TgZ(1,"div",18),s._uU(2),s.qZA(),s.BQk()),2&e){var n=s.oxw().$implicit,i=s.oxw(2).$implicit,r=s.oxw();s.xp6(1),s.s9C("title",r.getStochiometry(n.complex,i.interactor.identifier)),s.xp6(1),s.hij(" ",r.stochiometryOfInteractors(n.complex,i.interactor.identifier)," ")}}function X(e,t){if(1&e&&(s.ynx(0,19),s.TgZ(1,"div",18),s._uU(2),s.qZA(),s.BQk()),2&e){var n=s.oxw().$implicit,i=s.oxw(2).$implicit,r=s.oxw();s.xp6(1),s.s9C("title",r.getStoichiometrySubComplex(n.complex,i.interactor.identifier)),s.xp6(1),s.hij(" ",r.stoichiometryOfInteractorsMainTable(n.complex,i.interactor.identifier)," ")}}function K(e,t){if(1&e&&(s.ynx(0),s.TgZ(1,"td"),s._UZ(2,"div",16),s.YNc(3,D,3,2,"ng-container",3),s.YNc(4,X,3,2,"ng-container",17),s._UZ(5,"div",16),s.qZA(),s.BQk()),2&e){var n=t.$implicit,i=s.oxw(2),r=i.index,o=i.$implicit,c=s.oxw();s.xp6(2),s.Q6J("ngClass",c.displayTopLineClass(n,r)),s.xp6(1),s.Q6J("ngIf",!!c.findInteractorInComplex(n.complex,o.interactor.identifier)),s.xp6(1),s.Q6J("ngIf",c.findInteractorsInSubComplex(n.complex,o.interactor.identifier).length>0),s.xp6(1),s.Q6J("ngClass",c.displayBottomLineClass(n,r))}}var W=function(){return["/complex/search"]},G=function(e){return{query:e,page:1}};function ee(e,t){if(1&e&&(s.TgZ(0,"tr"),s.TgZ(1,"td"),s.TgZ(2,"div",4),s._uU(3),s._UZ(4,"i",5),s.TgZ(5,"a",6),s._UZ(6,"i",7),s.qZA(),s.qZA(),s.YNc(7,j,4,2,"div",8),s.YNc(8,z,4,2,"div",9),s.qZA(),s.YNc(9,K,6,4,"ng-container",2),s.qZA()),2&e){var n=s.oxw().$implicit,i=s.oxw();s.xp6(3),s.hij(" ",n.interactor.name," "),s.xp6(1),s.Tol(i.interactorTypeIcon(n.interactor)),s.s9C("title",n.interactor.interactorType),s.xp6(1),s.Q6J("routerLink",s.DdM(10,W))("queryParams",s.VKq(11,G,n.interactor.identifier)),s.xp6(2),s.Q6J("ngIf",n.isSubComplex),s.xp6(1),s.Q6J("ngIf",i.showExternalLink(n.interactor)),s.xp6(1),s.Q6J("ngForOf",i.enrichedComplexes)}}function te(e,t){if(1&e&&(s.TgZ(0,"div",13),s.TgZ(1,"a",14),s._uU(2),s._UZ(3,"i",22),s.qZA(),s.qZA()),2&e){var n=s.oxw().$implicit;s.xp6(1),s.s9C("href",n.identifierLink,s.LSH),s.xp6(1),s.hij("",n.identifier," ")}}function ne(e,t){if(1&e&&(s.ynx(0),s.TgZ(1,"div",18),s._uU(2),s.qZA(),s.BQk()),2&e){var n=s.oxw().$implicit,i=s.oxw().$implicit,r=s.oxw(4);s.xp6(1),s.s9C("title",r.getStochiometry(n.complex,i.identifier)),s.xp6(1),s.hij(" ",r.stochiometryOfInteractors(n.complex,i.identifier)," ")}}function ie(e,t){if(1&e&&(s.ynx(0),s.TgZ(1,"div",18),s._uU(2),s.qZA(),s.BQk()),2&e){var n=s.oxw(2).$implicit,i=s.oxw(3).$implicit,r=s.oxw();s.xp6(1),s.s9C("title",r.getStochiometryInExpandedSubComplex(i,n.identifier)),s.xp6(1),s.hij(" ",r.stoichiometryOfInteractorsExpandable(i,n.identifier)," ")}}function re(e,t){if(1&e&&(s.ynx(0),s.TgZ(1,"td",20),s._UZ(2,"div",16),s.YNc(3,ne,3,2,"ng-container",3),s.YNc(4,ie,3,2,"ng-container",3),s._UZ(5,"div",16),s.qZA(),s.BQk()),2&e){var n=t.$implicit,i=s.oxw(),r=i.index,o=i.$implicit,c=s.oxw(3),a=c.index,l=c.$implicit,u=s.oxw();s.xp6(2),s.Q6J("ngClass",u.displayTopLineClassExpanded(n,a,r)),s.xp6(1),s.Q6J("ngIf",!!u.findInteractorInComplex(n.complex,o.identifier)),s.xp6(1),s.Q6J("ngIf",!!u.findInteractorInExpandedSubComplex(l,n.complex,o.identifier)),s.xp6(1),s.Q6J("ngClass",u.displayBottomLineClassExpanded(n,a,r))}}function oe(e,t){if(1&e&&(s.TgZ(0,"tr"),s.TgZ(1,"td",20),s.TgZ(2,"div",4),s.TgZ(3,"a",6),s._uU(4),s._UZ(5,"i",5),s._UZ(6,"i",21),s.qZA(),s.qZA(),s.YNc(7,te,4,2,"div",9),s.qZA(),s.YNc(8,re,6,4,"ng-container",2),s.qZA()),2&e){var n=t.$implicit,i=s.oxw(3).$implicit,r=s.oxw();s.xp6(3),s.Q6J("routerLink",s.DdM(9,W))("queryParams",s.VKq(10,G,n.identifier)),s.xp6(1),s.hij(" ",n.name," "),s.xp6(1),s.Tol(r.interactorTypeIcon(n)),s.s9C("title",i.interactor.interactorType),s.xp6(2),s.Q6J("ngIf",r.showExternalLink(n)),s.xp6(1),s.Q6J("ngForOf",r.enrichedComplexes)}}function ce(e,t){if(1&e&&(s.ynx(0),s.YNc(1,oe,9,12,"tr",2),s.BQk()),2&e){var n=s.oxw(2).$implicit;s.xp6(1),s.Q6J("ngForOf",n.subComponents)}}function ae(e,t){if(1&e&&(s.ynx(0),s.YNc(1,ce,2,1,"ng-container",3),s.BQk()),2&e){var n=s.oxw().$implicit;s.xp6(1),s.Q6J("ngIf",!!n.subComponents)}}function le(e,t){if(1&e&&(s.ynx(0),s.ynx(1),s.YNc(2,ee,10,13,"tr",3),s.YNc(3,ae,2,1,"ng-container",3),s.BQk(),s.BQk()),2&e){var n=t.$implicit;s.xp6(2),s.Q6J("ngIf",!n.hidden),s.xp6(1),s.Q6J("ngIf",n.expanded)}}var se=function(){var t=function(){function t(e){n(this,t),this.complexPortalService=e}return r(t,[{key:"ngOnInit",value:function(){}},{key:"enrichedInteractors",get:function(){return this._enrichedInteractors}},{key:"enrichedComplexes",get:function(){return this._enrichedComplexes}},{key:"interactors",set:function(t){var n=this;this._enrichedInteractors=[];var i,r=e(t);try{var o=function(){var e=i.value,t="stable complex"===e.interactorType,r={interactor:e,hidden:!1,isSubComplex:t,expanded:!1,subComponents:null,partOfComplex:[]};t&&n.loadSubInteractors(r).subscribe(function(e){return r.subComponents=e}),n._enrichedInteractors.push(r)};for(r.s();!(i=r.n()).done;)o()}catch(c){r.e(c)}finally{r.f()}this.calculateAllStartAndEndIndexes()}},{key:"findInteractorInComplex",value:function(e,t){return e.components.find(function(e){return e.identifier===t})}},{key:"findInteractorsInSubComplex",value:function(e,t){return this._enrichedInteractors.filter(function(e){return e.isSubComplex}).filter(function(t){return e.components.some(function(e){return e.identifier===t.interactor.identifier})}).filter(function(e){return!!e.subComponents}).map(function(e){return e.subComponents.find(function(e){return e.identifier===t})}).filter(function(e){return!!e})}},{key:"findInteractorInExpandedSubComplex",value:function(e,t,n){return t.components.some(function(t){return t.identifier===e.interactor.identifier})?e.subComponents.find(function(e){return e.identifier===n}):null}},{key:"stochiometryOfInteractors",value:function(e,t){var n=this.findInteractorInComplex(e,t);return n?this.formatStochiometryValues(n.stochiometry):null}},{key:"stoichiometryOfInteractorsExpandable",value:function(e,t){var n=this.findInteractorInSubcomplex(e,t);return n?this.formatStochiometryValues(n.stochiometry):null}},{key:"stoichiometryOfInteractorsMainTable",value:function(e,t){var n=this.findInteractorsInSubComplex(e,t);if(n.length>0){var i=this.addedStoichiometryValues(n);return i?i[0]===i[1]?i[0].toString():"".concat(i[0],", ").concat(i[1]):" "}return null}},{key:"getStochiometry",value:function(e,t){var n=this.findInteractorInComplex(e,t);return n?n.stochiometry?"Stoichiometry values: "+n.stochiometry:"No stoichiometry data available":null}},{key:"getStoichiometrySubComplex",value:function(e,t){var n=this.findInteractorsInSubComplex(e,t);if(n.length>0){var i=this.addedStoichiometryValues(n);return i?"Stoichiometry values: minValue: ".concat(i[0],", maxValue: ").concat(i[1]):"No stoichiometry data available"}return null}},{key:"getStochiometryInExpandedSubComplex",value:function(e,t){var n=this.findInteractorInSubcomplex(e,t);return n?n.stochiometry?"Stoichiometry values: "+n.stochiometry:"No stoichiometry data available":null}},{key:"showExternalLink",value:function(e){return"stable complex"!==e.interactorType&&!!e.identifierLink}},{key:"toggleSubcomplexExpandable",value:function(e){if(this._enrichedInteractors[e].expanded=!this._enrichedInteractors[e].expanded,this._enrichedInteractors[e].expanded){for(var t=0;t<this._enrichedInteractors.length;t++)e!==t&&(this._enrichedInteractors[t].expanded=!1);if(this._enrichedInteractors[e].subComponents)for(var n=this._enrichedInteractors[e].subComponents.map(function(e){return e.identifier}),i=0;i<this._enrichedInteractors.length;i++)e!==i&&(this._enrichedInteractors[i].hidden=!!n.includes(this._enrichedInteractors[i].interactor.identifier))}else for(var r=0;r<this._enrichedInteractors.length;r++)this._enrichedInteractors[r].hidden=!1;this.calculateAllStartAndEndIndexes()}},{key:"interactorTypeIcon",value:function(e){switch(e.interactorType){case"small molecule":return"icon icon-conceptual icon-chemical";case"protein":case"peptide":return"icon icon-conceptual icon-proteins";case"stable complex":return"icon icon-conceptual icon-systems";case"molecule set":return"icon icon-generic icon-math";case"single stranded deoxyribonucleic acid":case"double stranded deoxyribonucleic acid":case"small nuclear rna":case"small nucleolar rna":case"ribosomal rna":case"messenger rna":case"transfer rna":case"signal recognition particle rna":case"ribonucleic acid":case"nucleic acid":case"long non-coding ribonucleic acid":return"icon icon-conceptual icon-dna"}}},{key:"loadSubInteractors",value:function(e){var t=this.complexSearch.elements.find(function(t){return t.complexAC===e.interactor.identifier});return t?(0,B.of)(t.components):this.complexPortalService.getComplexAc(e.interactor.identifier).pipe((0,H.U)(function(e){return e.participants.map(function(e){return new V(e.identifier,e.identifierLink,e.name,e.description,e.stochiometry,e.interactorType)})}))}},{key:"findInteractorInSubcomplex",value:function(e,t){return e.subComponents.find(function(e){return e.identifier===t})}},{key:"fetchValuesFromStochiometry",value:function(e){return e.match("minValue: ([0-9+]), maxValue: ([0-9+])")}},{key:"formatStochiometryValues",value:function(e){if(e){var t=this.fetchValuesFromStochiometry(e);if(t){var n=parseInt(t[1]),i=parseInt(t[2]);return n===i?n.toString():"".concat(n,", ").concat(i)}}return" "}},{key:"addedStoichiometryValues",value:function(t){var n,i=null,r=null,o=e(t);try{for(o.s();!(n=o.n()).done;){var c=n.value;if(c.stochiometry){var a=this.fetchValuesFromStochiometry(c.stochiometry);a&&(null===i&&(i=0),null===r&&(r=0),i+=parseInt(a[1]),r+=parseInt(a[2]))}}}catch(l){o.e(l)}finally{o.f()}return null!==i&&null!==r?[i,r]:null}},{key:"calculateAllStartAndEndIndexes",value:function(){this._enrichedComplexes=[];var t,n=e(this.complexSearch.elements);try{for(n.s();!(t=n.n()).done;){var i=t.value;this._enrichedComplexes.push(this.calculateStartAndEndIndexes(i))}}catch(r){n.e(r)}finally{n.f()}}},{key:"getMinValue",value:function(e,t){return null===t?e:null===e?t:Math.min(e,t)}},{key:"displayTopLineClass",value:function(e,t){return this.doesLineCrossInteractorCell(e,t)||this.doesLineEndOnInteractorCell(e,t)?"verticalLine":"transparentVerticalLine"}},{key:"displayBottomLineClass",value:function(e,t){return this.doesLineCrossInteractorCell(e,t)||this.doesLineStartOnInteractorCell(e,t)?"verticalLine":"transparentVerticalLine"}},{key:"displayTopLineClassExpanded",value:function(e,t,n){return this.doesLineCrossSubcomponentCell(e,t,n)||this.doesLineEndOnSubcomponentCell(e,t,n)?"verticalLine":"transparentVerticalLine"}},{key:"displayBottomLineClassExpanded",value:function(e,t,n){return this.doesLineCrossSubcomponentCell(e,t,n)||this.doesLineStartOnSubcomponentCell(e,t,n)?"verticalLine":"transparentVerticalLine"}},{key:"getMaxValue",value:function(e,t){return null===t?e:null===e?t:Math.max(e,t)}},{key:"calculateStartAndEndIndexes",value:function(e){for(var t=[],n={complex:e,startInteractorIndex:null,endInteractorIndex:null,startSubComponentIndex:null,endSubComponentIndex:null},i=0;i<this._enrichedInteractors.length;i++)if(!this._enrichedInteractors[i].hidden)for(var r=0;r<e.components.length;r++)if(e.components[r].identifier===this._enrichedInteractors[i].interactor.identifier)n.startInteractorIndex=this.getMinValue(n.startInteractorIndex,i),n.endInteractorIndex=this.getMaxValue(n.endInteractorIndex,i),this._enrichedInteractors[i].isSubComplex&&this._enrichedInteractors[i].subComponents&&(this._enrichedInteractors[i].subComponents.forEach(function(e){return t.push(e.identifier)}),this._enrichedInteractors[i].expanded&&(n.startSubComponentIndex=-1,n.endSubComponentIndex=this._enrichedInteractors[i].subComponents.length-1));else if(this._enrichedInteractors[i].isSubComplex&&this._enrichedInteractors[i].subComponents&&this._enrichedInteractors[i].expanded)for(var o=0;o<this._enrichedInteractors[i].subComponents.length;o++)e.components[r].identifier===this._enrichedInteractors[i].subComponents[o].identifier&&(n.startInteractorIndex=this.getMinValue(n.startInteractorIndex,i),n.endInteractorIndex=this.getMaxValue(n.endInteractorIndex,i),n.startSubComponentIndex=this.getMinValue(n.startSubComponentIndex,o),n.endSubComponentIndex=this.getMaxValue(n.endSubComponentIndex,o));for(var c=0;c<this._enrichedInteractors.length;c++)this._enrichedInteractors[c].hidden||t.includes(this._enrichedInteractors[c].interactor.identifier)&&(n.startInteractorIndex=this.getMinValue(n.startInteractorIndex,c),n.endInteractorIndex=this.getMaxValue(n.endInteractorIndex,c));return n}},{key:"doesLineCrossInteractorCell",value:function(e,t){return!(null==e.startInteractorIndex||null==e.endInteractorIndex||!(e.startInteractorIndex<t&&e.endInteractorIndex>t||e.startInteractorIndex<t&&e.endInteractorIndex===t&&this._enrichedInteractors[t].isSubComplex&&this._enrichedInteractors[t].expanded&&null!=e.startSubComponentIndex&&null!=e.endSubComponentIndex))}},{key:"doesLineStartOnInteractorCell",value:function(e,t){var n=this;return!(null==e.startInteractorIndex||e.startInteractorIndex!==t||this._enrichedInteractors[t].isSubComplex&&!e.complex.components.some(function(e){return n._enrichedInteractors[t].interactor.identifier===e.identifier}))}},{key:"doesLineEndOnInteractorCell",value:function(e,t){return null!=e.endInteractorIndex&&e.endInteractorIndex===t&&e.startInteractorIndex<t&&e.endInteractorIndex===t&&!(this._enrichedInteractors[t].isSubComplex&&this._enrichedInteractors[t].expanded&&null!=e.startSubComponentIndex&&null!=e.endSubComponentIndex)}},{key:"doesLineCrossSubcomponentCell",value:function(e,t,n){return null!=e.startInteractorIndex&&null!=e.endInteractorIndex&&(e.startInteractorIndex<t&&e.endInteractorIndex>t||null!=e.startSubComponentIndex&&null!=e.endSubComponentIndex&&(e.startSubComponentIndex<n&&e.endSubComponentIndex>n||e.startInteractorIndex<t&&e.endSubComponentIndex>n||e.startSubComponentIndex<n&&e.endInteractorIndex>t))}},{key:"doesLineStartOnSubcomponentCell",value:function(e,t,n){var i=this;return null!=e.startInteractorIndex&&e.startInteractorIndex===t&&null!=e.startSubComponentIndex&&e.startSubComponentIndex===n&&!e.complex.components.some(function(e){return i._enrichedInteractors[t].interactor.identifier===e.identifier})}},{key:"doesLineEndOnSubcomponentCell",value:function(e,t,n){return null!=e.endInteractorIndex&&e.endInteractorIndex===t&&null!=e.endSubComponentIndex&&e.endSubComponentIndex===n}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s.Y36(p.H))},t.\u0275cmp=s.Xpm({type:t,selectors:[["cp-table-interactor-column"]],inputs:{complexSearch:"complexSearch",interactors:"interactors"},decls:3,vars:1,consts:[[1,"Complex-navigator"],[1,"interactors-table"],[4,"ngFor","ngForOf"],[4,"ngIf"],[2,"font-weight","bold"],[3,"title"],["target","_blank",3,"routerLink","queryParams"],["data-icon","1","title","Complexes containing this interactor",1,"icon","icon-functional","small"],["class","container",4,"ngIf"],["class","interactorType",4,"ngIf"],[1,"container"],[3,"title","click"],["data-icon","\uf078",1,"icon","icon-common",2,"font-size","small","margin-top","2px"],[1,"interactorType"],["target","_blank",3,"href"],["data-icon","x",1,"icon","icon-generic","small"],[3,"ngClass"],["class","stoichComponent",4,"ngIf"],[1,"stoichNum",3,"title"],[1,"stoichComponent"],[2,"background","#8b9394"],["data-icon","1","title","More complexes containing this interactor",1,"icon","icon-functional","small"],["data-icon","x","title","More information",1,"icon","icon-generic","small"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"table",1),s.YNc(2,le,4,2,"ng-container",2),s.qZA(),s.qZA()),2&e&&(s.xp6(2),s.Q6J("ngForOf",t.enrichedInteractors))},directives:[c.sg,c.O5,u.yS,c.mk],styles:["td[_ngcontent-%COMP%]:first-child{position:sticky;left:0;z-index:3;border:1px solid #0a494c;background-color:#e6e6e6;max-height:50px;min-height:50px;min-width:130px;max-width:130px;padding-left:5px}td[_ngcontent-%COMP%]{border:1px solid #0a494c;height:50px;max-width:140px;min-width:140px;font-size:small}#interactors-table[_ngcontent-%COMP%]{width:100%}.stoichNum[_ngcontent-%COMP%]{width:3ch;height:3ch;border-radius:3ch;background-color:#389198;text-align:center;color:#fff;font-size:small;z-index:2;margin-left:auto;margin-right:auto}.verticalLine[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;min-width:1%;max-width:1%;max-height:50%;min-height:50%;border-right:5px solid #389198;z-index:0}.transparentVerticalLine[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;min-width:1%;max-width:1%;max-height:50%;min-height:50%;border-right:0;z-index:0}"]}),t}(),ue=function(){var e=function(){function e(t){n(this,e),this.router=t}return r(e,[{key:"ngOnInit",value:function(){}},{key:"interactors",get:function(){return this._interactors},set:function(e){this._interactors=e}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.Y36(u.F0))},e.\u0275cmp=s.Xpm({type:e,selectors:[["cp-table-structure"]],inputs:{complexSearch:"complexSearch",interactors:"interactors"},decls:5,vars:3,consts:[[1,"complexNavigatorTable"],[1,"header"],[3,"complexSearch"],[1,"interactors"],[3,"complexSearch","interactors"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s._UZ(2,"cp-table-header",2),s.qZA(),s.TgZ(3,"div",3),s._UZ(4,"cp-table-interactor-column",4),s.qZA(),s.qZA()),2&e&&(s.xp6(2),s.Q6J("complexSearch",t.complexSearch),s.xp6(2),s.Q6J("complexSearch",t.complexSearch)("interactors",t.interactors))},directives:[$,se],styles:[".complexNavigatorTable[_ngcontent-%COMP%]{max-height:750px;border-collapse:separate;overflow:scroll;width:100%}.header[_ngcontent-%COMP%]{position:sticky;top:0;width:100%;z-index:4;color:#e6e6e6}.interactors[_ngcontent-%COMP%]{width:100%;top:-20px;position:relative}"]}),e}(),pe=function(){var e=function(){function e(t){n(this,e),this.router=t}return r(e,[{key:"ngOnInit",value:function(){}},{key:"interactors",get:function(){return this._interactors},set:function(e){this._interactors=e}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.Y36(u.F0))},e.\u0275cmp=s.Xpm({type:e,selectors:[["cp-complex-navigator"]],inputs:{complexSearch:"complexSearch",interactors:"interactors"},decls:2,vars:2,consts:[[3,"complexSearch","interactors"]],template:function(e,t){1&e&&(s.TgZ(0,"div"),s._UZ(1,"cp-table-structure",0),s.qZA()),2&e&&(s.xp6(1),s.Q6J("complexSearch",t.complexSearch)("interactors",t.interactors))},directives:[ue],styles:[""]}),e}(),de=o(8324);function he(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"cp-complex-filter",15),s.NdJ("onResetAllFilters",function(){return s.CHM(n),s.oxw(3).onResetAllFilters()})("onSpicesFilterChanged",function(e){return s.CHM(n),s.oxw(3).onSpicesFilterChanged(e)})("onBiologicalRoleFilterChanged",function(e){return s.CHM(n),s.oxw(3).onBiologicalRoleFilterChanged(e)})("onInteractorTypeFilterChanged",function(e){return s.CHM(n),s.oxw(3).onInteractorTypeFilterChanged(e)}),s.qZA()}if(2&e){var i=s.oxw(3);s.Q6J("spicesFilter",i.spicesFilter)("bioRoleFilter",i.bioRoleFilter)("interactorTypeFilter",i.interactorTypeFilter)("facets",i.complexSearch.facets)}}function fe(e,t){if(1&e&&(s.TgZ(0,"div",16),s._UZ(1,"cp-complex-list",17),s.qZA()),2&e){var n=s.oxw(3);s.xp6(1),s.Q6J("complexSearch",n.complexSearch)}}function ge(e,t){if(1&e&&(s.TgZ(0,"div",18),s._UZ(1,"cp-complex-navigator",19),s.qZA()),2&e){var n=s.oxw(3);s.xp6(1),s.Q6J("complexSearch",n.complexSearch)("interactors",n.allInteractorsInComplexSearch)}}function xe(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"div",5),s.TgZ(1,"h2",6),s._uU(2),s.qZA(),s.TgZ(3,"div",7),s.YNc(4,he,1,4,"cp-complex-filter",8),s.qZA(),s.TgZ(5,"div",9),s.TgZ(6,"cp-complex-paginator",10),s.NdJ("onPageChange",function(e){return s.CHM(n),s.oxw(2).onPageChange(e)}),s.qZA(),s.TgZ(7,"div",11),s.TgZ(8,"input",12),s.NdJ("click",function(){return s.CHM(n),s.oxw(2).toggleDisplayType()}),s.qZA(),s.qZA(),s.YNc(9,fe,2,1,"div",13),s.YNc(10,ge,2,2,"div",14),s.TgZ(11,"cp-complex-paginator",10),s.NdJ("onPageChange",function(e){return s.CHM(n),s.oxw(2).onPageChange(e)}),s.qZA(),s.qZA(),s.qZA()}if(2&e){var i=s.oxw(2);s.xp6(2),s.hij("Total number of results: ",i.complexSearch.totalNumberOfResults," "),s.xp6(2),s.Q6J("ngIf",i.spicesFilter&&i.bioRoleFilter&&i.interactorTypeFilter),s.xp6(2),s.Q6J("currentPageIndex",i.currentPageIndex)("lastPageIndex",i.lastPageIndex),s.xp6(3),s.Q6J("ngIf",0==i.DisplayType),s.xp6(1),s.Q6J("ngIf",i.DisplayType),s.xp6(1),s.Q6J("currentPageIndex",i.currentPageIndex)("lastPageIndex",i.lastPageIndex)}}function me(e,t){if(1&e&&(s.TgZ(0,"div",20),s.TgZ(1,"h2"),s._uU(2,"No Complex Portal results found"),s.qZA(),s.TgZ(3,"h3"),s._uU(4,"We're sorry but we couldn't find anything that matched your search for: "),s.TgZ(5,"b"),s._uU(6),s.qZA(),s.qZA(),s.TgZ(7,"h4"),s._uU(8,"Please consider refining your terms:"),s.qZA(),s.TgZ(9,"ul"),s.TgZ(10,"li"),s._uU(11,"Make sure all words are spelled correctly"),s.qZA(),s.TgZ(12,"li"),s._uU(13,"Try different keywords"),s.qZA(),s.TgZ(14,"li"),s._uU(15,"Be more precise: use gene or protein IDs, e.g. Ndc80 or Q04571"),s.qZA(),s.TgZ(16,"li"),s._uU(17,'Remove quotes around phrases to search for each word individually. bike shed will often show more results than "bike shed" '),s.qZA(),s.qZA(),s.qZA()),2&e){var n=s.oxw(2);s.xp6(6),s.Oqu(n.query)}}function ve(e,t){if(1&e&&(s.ynx(0),s.YNc(1,xe,12,8,"div",3),s.YNc(2,me,18,1,"div",4),s.BQk()),2&e){var n=s.oxw();s.xp6(1),s.Q6J("ngIf",0!==n.complexSearch.totalNumberOfResults),s.xp6(1),s.Q6J("ngIf",0===n.complexSearch.totalNumberOfResults)}}function ye(e,t){if(1&e&&s._UZ(0,"cp-progress-spinner",21),2&e){var n=s.oxw();s.Q6J("query",n.query)}}var Ie=function(){var t=function(){function t(e,i,r,o,c){n(this,t),this.route=e,this.router=i,this.complexPortalService=r,this.titleService=o,this.googleAnalyticsService=c,this._pageSize=15,this._allInteractorsInComplexSearch=[],this.DisplayType=!0}return r(t,[{key:"ngOnInit",value:function(){var e=this;this.titleService.setTitle("Complex Portal - Results"),this._allInteractorsInComplexSearch=[],this.route.queryParams.subscribe(function(t){e._query=t.query,e._spicesFilter=t.species?t.species.split("+"):[],e._bioRoleFilter=t.bioRole?t.bioRole.split("+"):[],e._interactorTypeFilter=t.interactorType?t.interactorType.split("+"):[],e._currentPageIndex=t.page?Number(t.page):1,e.requestComplexResults(),document.body.scrollTop=0})}},{key:"ngAfterViewInit",value:function(){}},{key:"requestComplexResults",value:function(){var t=this;this.complexPortalService.findComplex(this.query,this.spicesFilter,this.bioRoleFilter,this.interactorTypeFilter,this.currentPageIndex,this.pageSize).subscribe(function(n){if(t.complexSearch=n,t._allInteractorsInComplexSearch=[],0!==t.complexSearch.totalNumberOfResults){t.lastPageIndex=Math.ceil(n.totalNumberOfResults/t.pageSize);for(var i=0;i<n.elements.length;i++){var r,o=e(n.elements[i].components);try{var c=function(){var e=r.value;t._allInteractorsInComplexSearch.some(function(t){return t.identifier===e.identifier})||t._allInteractorsInComplexSearch.push(new l(e.identifier,e.identifierLink,e.name,e.description,e.interactorType))};for(o.s();!(r=o.n()).done;)c()}catch(s){o.e(s)}finally{o.f()}}}a.R.hide()})}},{key:"reloadPage",value:function(){var e={};e.query=this._query,e.page=this._currentPageIndex,void 0!==this._spicesFilter&&0!==this._spicesFilter.length&&(e.species=this.prepareFiltersForParams(this.spicesFilter)),void 0!==this._bioRoleFilter&&0!==this._bioRoleFilter.length&&(e.bioRole=this.prepareFiltersForParams(this._bioRoleFilter)),void 0!==this._interactorTypeFilter&&0!==this._interactorTypeFilter.length&&(e.interactorType=this.prepareFiltersForParams(this._interactorTypeFilter)),this.router.navigate([],{queryParams:e}),a.R.hide();var t=this.getFilterCount();1<t&&this.googleAnalyticsService.fireMultiFilterEvent(t.toString())}},{key:"prepareFiltersForParams",value:function(e){return e.toString().replace(/,/g,"+")}},{key:"getFilterCount",value:function(){return this._spicesFilter.length+this._interactorTypeFilter.length+this._bioRoleFilter.length}},{key:"onPageChange",value:function(e){this.currentPageIndex=e,this.reloadPage()}},{key:"onResetAllFilters",value:function(){this.spicesFilter=[],this.bioRoleFilter=[],this.interactorTypeFilter=[],this.currentPageIndex=1,this.reloadPage()}},{key:"onSpicesFilterChanged",value:function(e){this.spicesFilter=e,this.currentPageIndex=1,this.reloadPage()}},{key:"onBiologicalRoleFilterChanged",value:function(e){this.bioRoleFilter=e,this.currentPageIndex=1,this.reloadPage()}},{key:"onInteractorTypeFilterChanged",value:function(e){this.interactorTypeFilter=e,this.currentPageIndex=1,this.reloadPage()}},{key:"query",get:function(){return this._query},set:function(e){this._query=e}},{key:"currentPageIndex",get:function(){return this._currentPageIndex},set:function(e){this._currentPageIndex=e}},{key:"complexSearch",get:function(){return this._complexSearch},set:function(e){this._complexSearch=e}},{key:"lastPageIndex",get:function(){return this._lastPageIndex},set:function(e){this._lastPageIndex=e}},{key:"pageSize",get:function(){return this._pageSize},set:function(e){this._pageSize=e}},{key:"spicesFilter",get:function(){return this._spicesFilter},set:function(e){this._spicesFilter=e}},{key:"bioRoleFilter",get:function(){return this._bioRoleFilter},set:function(e){this._bioRoleFilter=e}},{key:"interactorTypeFilter",get:function(){return this._interactorTypeFilter},set:function(e){this._interactorTypeFilter=e}},{key:"allInteractorsInComplexSearch",get:function(){return this._allInteractorsInComplexSearch},set:function(e){this._allInteractorsInComplexSearch=e}},{key:"toggleDisplayType",value:function(){this.DisplayType=!this.DisplayType}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s.Y36(u.gz),s.Y36(u.F0),s.Y36(p.H),s.Y36(d.Dx),s.Y36(h.y))},t.\u0275cmp=s.Xpm({type:t,selectors:[["cp-complex-results"]],decls:4,vars:2,consts:[[1,"margin-top-large","margin-bottom-large","row"],[4,"ngIf","ngIfElse"],["loadingSpinner",""],["class","columns medium-12",4,"ngIf"],["class","columns medium-12 callout alert",4,"ngIf"],[1,"columns","medium-12"],[1,"padding-left-large"],[1,"columns","medium-4"],[3,"spicesFilter","bioRoleFilter","interactorTypeFilter","facets","onResetAllFilters","onSpicesFilterChanged","onBiologicalRoleFilterChanged","onInteractorTypeFilterChanged",4,"ngIf"],[1,"columns","medium-8"],[3,"currentPageIndex","lastPageIndex","onPageChange"],[1,"displayButton",2,"text-align","center"],["type","submit","name","submit","value","View list",1,"button",3,"click"],["class","listOfResults",4,"ngIf"],["class","Complex-navigator",4,"ngIf"],[3,"spicesFilter","bioRoleFilter","interactorTypeFilter","facets","onResetAllFilters","onSpicesFilterChanged","onBiologicalRoleFilterChanged","onInteractorTypeFilterChanged"],[1,"listOfResults"],[3,"complexSearch"],[1,"Complex-navigator"],[3,"complexSearch","interactors"],[1,"columns","medium-12","callout","alert"],[3,"query"]],template:function(e,t){if(1&e&&(s.TgZ(0,"div",0),s.YNc(1,ve,3,2,"ng-container",1),s.YNc(2,ye,1,1,"ng-template",null,2,s.W1O),s.qZA()),2&e){var n=s.MAs(3);s.xp6(1),s.Q6J("ngIf",t.complexSearch)("ngIfElse",n)}},directives:[c.O5,I,J,L,pe,de.O],styles:[""]}),t}(),Ze=o(45103),_e=function(){var e=r(function e(){n(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[u.Bz.forChild([{path:"",component:Ie}]),c.ez,Ze.L]]}),e}()}}])}();