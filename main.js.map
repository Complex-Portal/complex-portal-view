{"version":3,"sources":["package.json","node_modules/@angular/compiler/fesm2022/compiler.mjs","node_modules/@angular/platform-browser-dynamic/fesm2022/platform-browser-dynamic.mjs","node_modules/@angular/forms/fesm2022/forms.mjs","angular:jit:template:file:src/app/app.component.html","angular:jit:style:file:src/app/app.component.css","src/app/app.component.ts","angular:jit:template:file:src/app/ontologies/ontologies.component.html","angular:jit:style:file:src/app/ontologies/ontologies.component.css","src/app/ontologies/ontologies.component.ts","angular:jit:template:file:src/app/navigation/about/about.component.html","angular:jit:style:file:src/app/navigation/about/about.component.css","src/app/navigation/about/about.component.ts","angular:jit:template:file:src/app/download/download.component.html","angular:jit:style:file:src/app/download/download.component.css","src/app/download/download.component.ts","angular:jit:template:file:src/app/navigation/documentation/documentation.component.html","angular:jit:style:file:src/app/navigation/documentation/documentation.component.css","src/app/navigation/documentation/documentation.component.ts","src/app/app-routing.module.ts","angular:jit:template:file:src/app/search/local-search/local-search.component.html","angular:jit:style:file:src/app/search/local-search/local-search.component.css","src/app/search/service/search.service.ts","src/app/search/local-search/local-search.component.ts","node_modules/@angular/animations/fesm2022/browser.mjs","node_modules/@angular/platform-browser/fesm2022/animations.mjs","node_modules/@angular/material/fesm2022/progress-bar.mjs","angular:jit:template:file:src/app/home/home.component.html","angular:jit:style:file:src/app/home/home.component.css","src/app/home/home.component.ts","angular:jit:template:file:src/app/home/tile-menu/tile-menu.component.html","angular:jit:style:file:src/app/home/tile-menu/tile-menu.component.css","src/app/home/tile-menu/tile-menu.component.ts","angular:jit:template:file:src/app/home/twitter-display/twitter-display.component.html","angular:jit:style:file:src/app/home/twitter-display/twitter-display.component.css","src/app/home/twitter-display/twitter-display.component.ts","angular:jit:template:file:src/app/home/newsletter-subscription/newsletter-subscription.component.html","angular:jit:style:file:src/app/home/newsletter-subscription/newsletter-subscription.component.css","src/app/home/newsletter-subscription/newsletter-subscription.component.ts","angular:jit:template:file:src/app/search/home-search/search.component.html","angular:jit:style:file:src/app/search/home-search/search.component.css","src/app/search/home-search/search.component.ts","src/app/home/home-routing.module.ts","src/app/home/home.module.ts","angular:jit:template:file:src/app/footer/footer.component.html","angular:jit:style:file:src/app/footer/footer.component.css","src/app/footer/footer.component.ts","src/app/app.module.ts","src/main.ts"],"sourcesContent":["{\n  \"name\": \"complex-portal-view\",\n  \"version\": \"1.0.3\",\n  \"license\": \"The Apache Software License, Version 2.0\",\n  \"angular-cli\": {},\n  \"scripts\": {\n    \"ng-high-memory\": \"node --max_old_space_size=8000 ./node_modules/@angular/cli/bin/ng\",\n    \"ng\": \"ng\",\n    \"start\": \"ng serve --proxy-config proxy-gxa.conf.json\",\n    \"start-with-proxy\": \"ng serve --proxy-config proxy.conf.json\",\n    \"publish-gh-pages\": \"rm -rf dist; ng build --configuration production --base-href \\\"https://complex-portal.github.io/complex-portal-view/\\\"; sudo ngh -r https://github.com/Complex-Portal/complex-portal-view\",\n    \"publish-test-gh-pages\": \"rm -rf dist; ng build --configuration test --base-href \\\"https://complex-portal.github.io/complex-portal-view/\\\"; sudo ngh -r https://github.com/Complex-Portal/complex-portal-view\",\n    \"build-prod\": \"rm -rf dist; ng build --configuration production --base-href \\\"/complexportal/\\\"\",\n    \"test\": \"ng test\",\n    \"pree2e\": \"webdriver-manager update --standalone false --gecko false\",\n    \"e2e\": \"protractor\"\n  },\n  \"private\": true,\n  \"dependencies\": {\n    \"@angular/animations\": \"^18.1.4\",\n    \"@angular/cdk\": \"^18.1.4\",\n    \"@angular/common\": \"^18.1.4\",\n    \"@angular/compiler\": \"^18.1.4\",\n    \"@angular/core\": \"^18.1.4\",\n    \"@angular/forms\": \"^18.1.4\",\n    \"@angular/material\": \"^18.1.4\",\n    \"@angular/platform-browser\": \"^18.1.4\",\n    \"@angular/platform-browser-dynamic\": \"^18.1.4\",\n    \"@angular/router\": \"^18.1.4\",\n    \"@ebi-gene-expression-group/anatomogram\": \"^2.4.0\",\n    \"@swissprot/rhea-reaction-visualizer\": \"0.0.23\",\n    \"angular-cli-ghpages\": \"^0.5.2\",\n    \"animate.css\": \"^3.5.2\",\n    \"complexviewer\": \"file:.yalc/complexviewer\",\n    \"core-js\": \"^2.5.3\",\n    \"ebi-framework\": \"1.3.8\",\n    \"expose-loader\": \"^5.0.0\",\n    \"jquery\": \"^3.7.1\",\n    \"litemol\": \"https://github.com/dsehnal/LiteMol/tarball/master\",\n    \"ngx-google-analytics\": \"^14.0.1\",\n    \"ngx-markdown\": \"^18.0.0\",\n    \"ngx-page-scroll\": \"^13.0.0\",\n    \"ngx-page-scroll-core\": \"^13.0.0\",\n    \"ngx-toastr\": \"^18.0.0\",\n    \"react\": \"^16.14.0\",\n    \"rxjs\": \"^6.6.7\",\n    \"rxjs-compat\": \"^6.6.7\",\n    \"ts-helpers\": \"^1.1.2\",\n    \"ts-md5\": \"^1.2.4\",\n    \"tslib\": \"^2.0.0\",\n    \"zone.js\": \"~0.14.10\"\n  },\n  \"devDependencies\": {\n    \"@angular-devkit/build-angular\": \"^18.1.4\",\n    \"@angular/cli\": \"^18.1.4\",\n    \"@angular/compiler-cli\": \"^18.1.4\",\n    \"@angular/language-service\": \"^18.1.4\",\n    \"@types/complexviewer\": \"^2.1.0\",\n    \"@types/estree\": \"^1.0.5\",\n    \"@types/foundation\": \"~5.5.30\",\n    \"@types/jasmine\": \"~3.6.0\",\n    \"@types/jquery\": \"^3.3.36\",\n    \"@types/node\": \"^20.14.8\",\n    \"@types/ws\": \"~8.5.12\",\n    \"codelyzer\": \"^6.0.0\",\n    \"jasmine-core\": \"^5.2.0\",\n    \"jasmine-spec-reporter\": \"^7.0.0\",\n    \"karma\": \"^6.4.4\",\n    \"karma-chrome-launcher\": \"^3.2.0\",\n    \"karma-cli\": \"^2.0.0\",\n    \"karma-coverage-istanbul-reporter\": \"^3.0.3\",\n    \"karma-jasmine\": \"^5.1.0\",\n    \"karma-jasmine-html-reporter\": \"^2.1.0\",\n    \"npm\": \"^7.24.2\",\n    \"protractor\": \"~7.0.0\",\n    \"ts-node\": \"^5.0.1\",\n    \"tslint\": \"~6.1.0\",\n    \"typescript\": \"~5.4.5\"\n  }\n}\n","/**\n * @license Angular v18.1.4\n * (c) 2010-2024 Google LLC. https://angular.io/\n * License: MIT\n */\n\nconst _SELECTOR_REGEXP = new RegExp('(\\\\:not\\\\()|' +\n// 1: \":not(\"\n'(([\\\\.\\\\#]?)[-\\\\w]+)|' +\n// 2: \"tag\"; 3: \".\"/\"#\";\n// \"-\" should appear first in the regexp below as FF31 parses \"[.-\\w]\" as a range\n// 4: attribute; 5: attribute_string; 6: attribute_value\n'(?:\\\\[([-.\\\\w*\\\\\\\\$]+)(?:=([\"\\']?)([^\\\\]\"\\']*)\\\\5)?\\\\])|' +\n// \"[name]\", \"[name=value]\",\n// \"[name=\"value\"]\",\n// \"[name='value']\"\n'(\\\\))|' +\n// 7: \")\"\n'(\\\\s*,\\\\s*)',\n// 8: \",\"\n'g');\n/**\n * A css selector contains an element name,\n * css classes and attribute/value pairs with the purpose\n * of selecting subsets out of them.\n */\nclass CssSelector {\n  constructor() {\n    this.element = null;\n    this.classNames = [];\n    /**\n     * The selectors are encoded in pairs where:\n     * - even locations are attribute names\n     * - odd locations are attribute values.\n     *\n     * Example:\n     * Selector: `[key1=value1][key2]` would parse to:\n     * ```\n     * ['key1', 'value1', 'key2', '']\n     * ```\n     */\n    this.attrs = [];\n    this.notSelectors = [];\n  }\n  static parse(selector) {\n    const results = [];\n    const _addResult = (res, cssSel) => {\n      if (cssSel.notSelectors.length > 0 && !cssSel.element && cssSel.classNames.length == 0 && cssSel.attrs.length == 0) {\n        cssSel.element = '*';\n      }\n      res.push(cssSel);\n    };\n    let cssSelector = new CssSelector();\n    let match;\n    let current = cssSelector;\n    let inNot = false;\n    _SELECTOR_REGEXP.lastIndex = 0;\n    while (match = _SELECTOR_REGEXP.exec(selector)) {\n      if (match[1 /* SelectorRegexp.NOT */]) {\n        if (inNot) {\n          throw new Error('Nesting :not in a selector is not allowed');\n        }\n        inNot = true;\n        current = new CssSelector();\n        cssSelector.notSelectors.push(current);\n      }\n      const tag = match[2 /* SelectorRegexp.TAG */];\n      if (tag) {\n        const prefix = match[3 /* SelectorRegexp.PREFIX */];\n        if (prefix === '#') {\n          // #hash\n          current.addAttribute('id', tag.slice(1));\n        } else if (prefix === '.') {\n          // Class\n          current.addClassName(tag.slice(1));\n        } else {\n          // Element\n          current.setElement(tag);\n        }\n      }\n      const attribute = match[4 /* SelectorRegexp.ATTRIBUTE */];\n      if (attribute) {\n        current.addAttribute(current.unescapeAttribute(attribute), match[6 /* SelectorRegexp.ATTRIBUTE_VALUE */]);\n      }\n      if (match[7 /* SelectorRegexp.NOT_END */]) {\n        inNot = false;\n        current = cssSelector;\n      }\n      if (match[8 /* SelectorRegexp.SEPARATOR */]) {\n        if (inNot) {\n          throw new Error('Multiple selectors in :not are not supported');\n        }\n        _addResult(results, cssSelector);\n        cssSelector = current = new CssSelector();\n      }\n    }\n    _addResult(results, cssSelector);\n    return results;\n  }\n  /**\n   * Unescape `\\$` sequences from the CSS attribute selector.\n   *\n   * This is needed because `$` can have a special meaning in CSS selectors,\n   * but we might want to match an attribute that contains `$`.\n   * [MDN web link for more\n   * info](https://developer.mozilla.org/en-US/docs/Web/CSS/Attribute_selectors).\n   * @param attr the attribute to unescape.\n   * @returns the unescaped string.\n   */\n  unescapeAttribute(attr) {\n    let result = '';\n    let escaping = false;\n    for (let i = 0; i < attr.length; i++) {\n      const char = attr.charAt(i);\n      if (char === '\\\\') {\n        escaping = true;\n        continue;\n      }\n      if (char === '$' && !escaping) {\n        throw new Error(`Error in attribute selector \"${attr}\". ` + `Unescaped \"$\" is not supported. Please escape with \"\\\\$\".`);\n      }\n      escaping = false;\n      result += char;\n    }\n    return result;\n  }\n  /**\n   * Escape `$` sequences from the CSS attribute selector.\n   *\n   * This is needed because `$` can have a special meaning in CSS selectors,\n   * with this method we are escaping `$` with `\\$'.\n   * [MDN web link for more\n   * info](https://developer.mozilla.org/en-US/docs/Web/CSS/Attribute_selectors).\n   * @param attr the attribute to escape.\n   * @returns the escaped string.\n   */\n  escapeAttribute(attr) {\n    return attr.replace(/\\\\/g, '\\\\\\\\').replace(/\\$/g, '\\\\$');\n  }\n  isElementSelector() {\n    return this.hasElementSelector() && this.classNames.length == 0 && this.attrs.length == 0 && this.notSelectors.length === 0;\n  }\n  hasElementSelector() {\n    return !!this.element;\n  }\n  setElement(element = null) {\n    this.element = element;\n  }\n  getAttrs() {\n    const result = [];\n    if (this.classNames.length > 0) {\n      result.push('class', this.classNames.join(' '));\n    }\n    return result.concat(this.attrs);\n  }\n  addAttribute(name, value = '') {\n    this.attrs.push(name, value && value.toLowerCase() || '');\n  }\n  addClassName(name) {\n    this.classNames.push(name.toLowerCase());\n  }\n  toString() {\n    let res = this.element || '';\n    if (this.classNames) {\n      this.classNames.forEach(klass => res += `.${klass}`);\n    }\n    if (this.attrs) {\n      for (let i = 0; i < this.attrs.length; i += 2) {\n        const name = this.escapeAttribute(this.attrs[i]);\n        const value = this.attrs[i + 1];\n        res += `[${name}${value ? '=' + value : ''}]`;\n      }\n    }\n    this.notSelectors.forEach(notSelector => res += `:not(${notSelector})`);\n    return res;\n  }\n}\n/**\n * Reads a list of CssSelectors and allows to calculate which ones\n * are contained in a given CssSelector.\n */\nclass SelectorMatcher {\n  constructor() {\n    this._elementMap = new Map();\n    this._elementPartialMap = new Map();\n    this._classMap = new Map();\n    this._classPartialMap = new Map();\n    this._attrValueMap = new Map();\n    this._attrValuePartialMap = new Map();\n    this._listContexts = [];\n  }\n  static createNotMatcher(notSelectors) {\n    const notMatcher = new SelectorMatcher();\n    notMatcher.addSelectables(notSelectors, null);\n    return notMatcher;\n  }\n  addSelectables(cssSelectors, callbackCtxt) {\n    let listContext = null;\n    if (cssSelectors.length > 1) {\n      listContext = new SelectorListContext(cssSelectors);\n      this._listContexts.push(listContext);\n    }\n    for (let i = 0; i < cssSelectors.length; i++) {\n      this._addSelectable(cssSelectors[i], callbackCtxt, listContext);\n    }\n  }\n  /**\n   * Add an object that can be found later on by calling `match`.\n   * @param cssSelector A css selector\n   * @param callbackCtxt An opaque object that will be given to the callback of the `match` function\n   */\n  _addSelectable(cssSelector, callbackCtxt, listContext) {\n    let matcher = this;\n    const element = cssSelector.element;\n    const classNames = cssSelector.classNames;\n    const attrs = cssSelector.attrs;\n    const selectable = new SelectorContext(cssSelector, callbackCtxt, listContext);\n    if (element) {\n      const isTerminal = attrs.length === 0 && classNames.length === 0;\n      if (isTerminal) {\n        this._addTerminal(matcher._elementMap, element, selectable);\n      } else {\n        matcher = this._addPartial(matcher._elementPartialMap, element);\n      }\n    }\n    if (classNames) {\n      for (let i = 0; i < classNames.length; i++) {\n        const isTerminal = attrs.length === 0 && i === classNames.length - 1;\n        const className = classNames[i];\n        if (isTerminal) {\n          this._addTerminal(matcher._classMap, className, selectable);\n        } else {\n          matcher = this._addPartial(matcher._classPartialMap, className);\n        }\n      }\n    }\n    if (attrs) {\n      for (let i = 0; i < attrs.length; i += 2) {\n        const isTerminal = i === attrs.length - 2;\n        const name = attrs[i];\n        const value = attrs[i + 1];\n        if (isTerminal) {\n          const terminalMap = matcher._attrValueMap;\n          let terminalValuesMap = terminalMap.get(name);\n          if (!terminalValuesMap) {\n            terminalValuesMap = new Map();\n            terminalMap.set(name, terminalValuesMap);\n          }\n          this._addTerminal(terminalValuesMap, value, selectable);\n        } else {\n          const partialMap = matcher._attrValuePartialMap;\n          let partialValuesMap = partialMap.get(name);\n          if (!partialValuesMap) {\n            partialValuesMap = new Map();\n            partialMap.set(name, partialValuesMap);\n          }\n          matcher = this._addPartial(partialValuesMap, value);\n        }\n      }\n    }\n  }\n  _addTerminal(map, name, selectable) {\n    let terminalList = map.get(name);\n    if (!terminalList) {\n      terminalList = [];\n      map.set(name, terminalList);\n    }\n    terminalList.push(selectable);\n  }\n  _addPartial(map, name) {\n    let matcher = map.get(name);\n    if (!matcher) {\n      matcher = new SelectorMatcher();\n      map.set(name, matcher);\n    }\n    return matcher;\n  }\n  /**\n   * Find the objects that have been added via `addSelectable`\n   * whose css selector is contained in the given css selector.\n   * @param cssSelector A css selector\n   * @param matchedCallback This callback will be called with the object handed into `addSelectable`\n   * @return boolean true if a match was found\n   */\n  match(cssSelector, matchedCallback) {\n    let result = false;\n    const element = cssSelector.element;\n    const classNames = cssSelector.classNames;\n    const attrs = cssSelector.attrs;\n    for (let i = 0; i < this._listContexts.length; i++) {\n      this._listContexts[i].alreadyMatched = false;\n    }\n    result = this._matchTerminal(this._elementMap, element, cssSelector, matchedCallback) || result;\n    result = this._matchPartial(this._elementPartialMap, element, cssSelector, matchedCallback) || result;\n    if (classNames) {\n      for (let i = 0; i < classNames.length; i++) {\n        const className = classNames[i];\n        result = this._matchTerminal(this._classMap, className, cssSelector, matchedCallback) || result;\n        result = this._matchPartial(this._classPartialMap, className, cssSelector, matchedCallback) || result;\n      }\n    }\n    if (attrs) {\n      for (let i = 0; i < attrs.length; i += 2) {\n        const name = attrs[i];\n        const value = attrs[i + 1];\n        const terminalValuesMap = this._attrValueMap.get(name);\n        if (value) {\n          result = this._matchTerminal(terminalValuesMap, '', cssSelector, matchedCallback) || result;\n        }\n        result = this._matchTerminal(terminalValuesMap, value, cssSelector, matchedCallback) || result;\n        const partialValuesMap = this._attrValuePartialMap.get(name);\n        if (value) {\n          result = this._matchPartial(partialValuesMap, '', cssSelector, matchedCallback) || result;\n        }\n        result = this._matchPartial(partialValuesMap, value, cssSelector, matchedCallback) || result;\n      }\n    }\n    return result;\n  }\n  /** @internal */\n  _matchTerminal(map, name, cssSelector, matchedCallback) {\n    if (!map || typeof name !== 'string') {\n      return false;\n    }\n    let selectables = map.get(name) || [];\n    const starSelectables = map.get('*');\n    if (starSelectables) {\n      selectables = selectables.concat(starSelectables);\n    }\n    if (selectables.length === 0) {\n      return false;\n    }\n    let selectable;\n    let result = false;\n    for (let i = 0; i < selectables.length; i++) {\n      selectable = selectables[i];\n      result = selectable.finalize(cssSelector, matchedCallback) || result;\n    }\n    return result;\n  }\n  /** @internal */\n  _matchPartial(map, name, cssSelector, matchedCallback) {\n    if (!map || typeof name !== 'string') {\n      return false;\n    }\n    const nestedSelector = map.get(name);\n    if (!nestedSelector) {\n      return false;\n    }\n    // TODO(perf): get rid of recursion and measure again\n    // TODO(perf): don't pass the whole selector into the recursion,\n    // but only the not processed parts\n    return nestedSelector.match(cssSelector, matchedCallback);\n  }\n}\nclass SelectorListContext {\n  constructor(selectors) {\n    this.selectors = selectors;\n    this.alreadyMatched = false;\n  }\n}\n// Store context to pass back selector and context when a selector is matched\nclass SelectorContext {\n  constructor(selector, cbContext, listContext) {\n    this.selector = selector;\n    this.cbContext = cbContext;\n    this.listContext = listContext;\n    this.notSelectors = selector.notSelectors;\n  }\n  finalize(cssSelector, callback) {\n    let result = true;\n    if (this.notSelectors.length > 0 && (!this.listContext || !this.listContext.alreadyMatched)) {\n      const notMatcher = SelectorMatcher.createNotMatcher(this.notSelectors);\n      result = !notMatcher.match(cssSelector, null);\n    }\n    if (result && callback && (!this.listContext || !this.listContext.alreadyMatched)) {\n      if (this.listContext) {\n        this.listContext.alreadyMatched = true;\n      }\n      callback(this.selector, this.cbContext);\n    }\n    return result;\n  }\n}\n\n// Attention:\n// Stores the default value of `emitDistinctChangesOnly` when the `emitDistinctChangesOnly` is not\n// explicitly set.\nconst emitDistinctChangesOnlyDefaultValue = true;\nvar ViewEncapsulation;\n(function (ViewEncapsulation) {\n  ViewEncapsulation[ViewEncapsulation[\"Emulated\"] = 0] = \"Emulated\";\n  // Historically the 1 value was for `Native` encapsulation which has been removed as of v11.\n  ViewEncapsulation[ViewEncapsulation[\"None\"] = 2] = \"None\";\n  ViewEncapsulation[ViewEncapsulation[\"ShadowDom\"] = 3] = \"ShadowDom\";\n})(ViewEncapsulation || (ViewEncapsulation = {}));\nvar ChangeDetectionStrategy;\n(function (ChangeDetectionStrategy) {\n  ChangeDetectionStrategy[ChangeDetectionStrategy[\"OnPush\"] = 0] = \"OnPush\";\n  ChangeDetectionStrategy[ChangeDetectionStrategy[\"Default\"] = 1] = \"Default\";\n})(ChangeDetectionStrategy || (ChangeDetectionStrategy = {}));\n/** Flags describing an input for a directive. */\nvar InputFlags;\n(function (InputFlags) {\n  InputFlags[InputFlags[\"None\"] = 0] = \"None\";\n  InputFlags[InputFlags[\"SignalBased\"] = 1] = \"SignalBased\";\n  InputFlags[InputFlags[\"HasDecoratorInputTransform\"] = 2] = \"HasDecoratorInputTransform\";\n})(InputFlags || (InputFlags = {}));\nconst CUSTOM_ELEMENTS_SCHEMA = {\n  name: 'custom-elements'\n};\nconst NO_ERRORS_SCHEMA = {\n  name: 'no-errors-schema'\n};\nconst Type$1 = Function;\nvar SecurityContext;\n(function (SecurityContext) {\n  SecurityContext[SecurityContext[\"NONE\"] = 0] = \"NONE\";\n  SecurityContext[SecurityContext[\"HTML\"] = 1] = \"HTML\";\n  SecurityContext[SecurityContext[\"STYLE\"] = 2] = \"STYLE\";\n  SecurityContext[SecurityContext[\"SCRIPT\"] = 3] = \"SCRIPT\";\n  SecurityContext[SecurityContext[\"URL\"] = 4] = \"URL\";\n  SecurityContext[SecurityContext[\"RESOURCE_URL\"] = 5] = \"RESOURCE_URL\";\n})(SecurityContext || (SecurityContext = {}));\nvar MissingTranslationStrategy;\n(function (MissingTranslationStrategy) {\n  MissingTranslationStrategy[MissingTranslationStrategy[\"Error\"] = 0] = \"Error\";\n  MissingTranslationStrategy[MissingTranslationStrategy[\"Warning\"] = 1] = \"Warning\";\n  MissingTranslationStrategy[MissingTranslationStrategy[\"Ignore\"] = 2] = \"Ignore\";\n})(MissingTranslationStrategy || (MissingTranslationStrategy = {}));\nfunction parserSelectorToSimpleSelector(selector) {\n  const classes = selector.classNames && selector.classNames.length ? [8 /* SelectorFlags.CLASS */, ...selector.classNames] : [];\n  const elementName = selector.element && selector.element !== '*' ? selector.element : '';\n  return [elementName, ...selector.attrs, ...classes];\n}\nfunction parserSelectorToNegativeSelector(selector) {\n  const classes = selector.classNames && selector.classNames.length ? [8 /* SelectorFlags.CLASS */, ...selector.classNames] : [];\n  if (selector.element) {\n    return [1 /* SelectorFlags.NOT */ | 4 /* SelectorFlags.ELEMENT */, selector.element, ...selector.attrs, ...classes];\n  } else if (selector.attrs.length) {\n    return [1 /* SelectorFlags.NOT */ | 2 /* SelectorFlags.ATTRIBUTE */, ...selector.attrs, ...classes];\n  } else {\n    return selector.classNames && selector.classNames.length ? [1 /* SelectorFlags.NOT */ | 8 /* SelectorFlags.CLASS */, ...selector.classNames] : [];\n  }\n}\nfunction parserSelectorToR3Selector(selector) {\n  const positive = parserSelectorToSimpleSelector(selector);\n  const negative = selector.notSelectors && selector.notSelectors.length ? selector.notSelectors.map(notSelector => parserSelectorToNegativeSelector(notSelector)) : [];\n  return positive.concat(...negative);\n}\nfunction parseSelectorToR3Selector(selector) {\n  return selector ? CssSelector.parse(selector).map(parserSelectorToR3Selector) : [];\n}\nvar core = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  emitDistinctChangesOnlyDefaultValue: emitDistinctChangesOnlyDefaultValue,\n  get ViewEncapsulation() {\n    return ViewEncapsulation;\n  },\n  get ChangeDetectionStrategy() {\n    return ChangeDetectionStrategy;\n  },\n  get InputFlags() {\n    return InputFlags;\n  },\n  CUSTOM_ELEMENTS_SCHEMA: CUSTOM_ELEMENTS_SCHEMA,\n  NO_ERRORS_SCHEMA: NO_ERRORS_SCHEMA,\n  Type: Type$1,\n  get SecurityContext() {\n    return SecurityContext;\n  },\n  get MissingTranslationStrategy() {\n    return MissingTranslationStrategy;\n  },\n  parseSelectorToR3Selector: parseSelectorToR3Selector\n});\n\n/**\n * A lazily created TextEncoder instance for converting strings into UTF-8 bytes\n */\nlet textEncoder;\n/**\n * Return the message id or compute it using the XLIFF1 digest.\n */\nfunction digest$1(message) {\n  return message.id || computeDigest(message);\n}\n/**\n * Compute the message id using the XLIFF1 digest.\n */\nfunction computeDigest(message) {\n  return sha1(serializeNodes(message.nodes).join('') + `[${message.meaning}]`);\n}\n/**\n * Return the message id or compute it using the XLIFF2/XMB/$localize digest.\n */\nfunction decimalDigest(message) {\n  return message.id || computeDecimalDigest(message);\n}\n/**\n * Compute the message id using the XLIFF2/XMB/$localize digest.\n */\nfunction computeDecimalDigest(message) {\n  const visitor = new _SerializerIgnoreIcuExpVisitor();\n  const parts = message.nodes.map(a => a.visit(visitor, null));\n  return computeMsgId(parts.join(''), message.meaning);\n}\n/**\n * Serialize the i18n ast to something xml-like in order to generate an UID.\n *\n * The visitor is also used in the i18n parser tests\n *\n * @internal\n */\nclass _SerializerVisitor {\n  visitText(text, context) {\n    return text.value;\n  }\n  visitContainer(container, context) {\n    return `[${container.children.map(child => child.visit(this)).join(', ')}]`;\n  }\n  visitIcu(icu, context) {\n    const strCases = Object.keys(icu.cases).map(k => `${k} {${icu.cases[k].visit(this)}}`);\n    return `{${icu.expression}, ${icu.type}, ${strCases.join(', ')}}`;\n  }\n  visitTagPlaceholder(ph, context) {\n    return ph.isVoid ? `<ph tag name=\"${ph.startName}\"/>` : `<ph tag name=\"${ph.startName}\">${ph.children.map(child => child.visit(this)).join(', ')}</ph name=\"${ph.closeName}\">`;\n  }\n  visitPlaceholder(ph, context) {\n    return ph.value ? `<ph name=\"${ph.name}\">${ph.value}</ph>` : `<ph name=\"${ph.name}\"/>`;\n  }\n  visitIcuPlaceholder(ph, context) {\n    return `<ph icu name=\"${ph.name}\">${ph.value.visit(this)}</ph>`;\n  }\n  visitBlockPlaceholder(ph, context) {\n    return `<ph block name=\"${ph.startName}\">${ph.children.map(child => child.visit(this)).join(', ')}</ph name=\"${ph.closeName}\">`;\n  }\n}\nconst serializerVisitor$1 = new _SerializerVisitor();\nfunction serializeNodes(nodes) {\n  return nodes.map(a => a.visit(serializerVisitor$1, null));\n}\n/**\n * Serialize the i18n ast to something xml-like in order to generate an UID.\n *\n * Ignore the ICU expressions so that message IDs stays identical if only the expression changes.\n *\n * @internal\n */\nclass _SerializerIgnoreIcuExpVisitor extends _SerializerVisitor {\n  visitIcu(icu, context) {\n    let strCases = Object.keys(icu.cases).map(k => `${k} {${icu.cases[k].visit(this)}}`);\n    // Do not take the expression into account\n    return `{${icu.type}, ${strCases.join(', ')}}`;\n  }\n}\n/**\n * Compute the SHA1 of the given string\n *\n * see https://csrc.nist.gov/publications/fips/fips180-4/fips-180-4.pdf\n *\n * WARNING: this function has not been designed not tested with security in mind.\n *          DO NOT USE IT IN A SECURITY SENSITIVE CONTEXT.\n */\nfunction sha1(str) {\n  textEncoder ??= new TextEncoder();\n  const utf8 = [...textEncoder.encode(str)];\n  const words32 = bytesToWords32(utf8, Endian.Big);\n  const len = utf8.length * 8;\n  const w = new Uint32Array(80);\n  let a = 0x67452301,\n    b = 0xefcdab89,\n    c = 0x98badcfe,\n    d = 0x10325476,\n    e = 0xc3d2e1f0;\n  words32[len >> 5] |= 0x80 << 24 - len % 32;\n  words32[(len + 64 >> 9 << 4) + 15] = len;\n  for (let i = 0; i < words32.length; i += 16) {\n    const h0 = a,\n      h1 = b,\n      h2 = c,\n      h3 = d,\n      h4 = e;\n    for (let j = 0; j < 80; j++) {\n      if (j < 16) {\n        w[j] = words32[i + j];\n      } else {\n        w[j] = rol32(w[j - 3] ^ w[j - 8] ^ w[j - 14] ^ w[j - 16], 1);\n      }\n      const fkVal = fk(j, b, c, d);\n      const f = fkVal[0];\n      const k = fkVal[1];\n      const temp = [rol32(a, 5), f, e, k, w[j]].reduce(add32);\n      e = d;\n      d = c;\n      c = rol32(b, 30);\n      b = a;\n      a = temp;\n    }\n    a = add32(a, h0);\n    b = add32(b, h1);\n    c = add32(c, h2);\n    d = add32(d, h3);\n    e = add32(e, h4);\n  }\n  // Convert the output parts to a 160-bit hexadecimal string\n  return toHexU32(a) + toHexU32(b) + toHexU32(c) + toHexU32(d) + toHexU32(e);\n}\n/**\n * Convert and format a number as a string representing a 32-bit unsigned hexadecimal number.\n * @param value The value to format as a string.\n * @returns A hexadecimal string representing the value.\n */\nfunction toHexU32(value) {\n  // unsigned right shift of zero ensures an unsigned 32-bit number\n  return (value >>> 0).toString(16).padStart(8, '0');\n}\nfunction fk(index, b, c, d) {\n  if (index < 20) {\n    return [b & c | ~b & d, 0x5a827999];\n  }\n  if (index < 40) {\n    return [b ^ c ^ d, 0x6ed9eba1];\n  }\n  if (index < 60) {\n    return [b & c | b & d | c & d, 0x8f1bbcdc];\n  }\n  return [b ^ c ^ d, 0xca62c1d6];\n}\n/**\n * Compute the fingerprint of the given string\n *\n * The output is 64 bit number encoded as a decimal string\n *\n * based on:\n * https://github.com/google/closure-compiler/blob/master/src/com/google/javascript/jscomp/GoogleJsMessageIdGenerator.java\n */\nfunction fingerprint(str) {\n  textEncoder ??= new TextEncoder();\n  const utf8 = textEncoder.encode(str);\n  const view = new DataView(utf8.buffer, utf8.byteOffset, utf8.byteLength);\n  let hi = hash32(view, utf8.length, 0);\n  let lo = hash32(view, utf8.length, 102072);\n  if (hi == 0 && (lo == 0 || lo == 1)) {\n    hi = hi ^ 0x130f9bef;\n    lo = lo ^ -0x6b5f56d8;\n  }\n  return BigInt.asUintN(32, BigInt(hi)) << BigInt(32) | BigInt.asUintN(32, BigInt(lo));\n}\nfunction computeMsgId(msg, meaning = '') {\n  let msgFingerprint = fingerprint(msg);\n  if (meaning) {\n    // Rotate the 64-bit message fingerprint one bit to the left and then add the meaning\n    // fingerprint.\n    msgFingerprint = BigInt.asUintN(64, msgFingerprint << BigInt(1)) | msgFingerprint >> BigInt(63) & BigInt(1);\n    msgFingerprint += fingerprint(meaning);\n  }\n  return BigInt.asUintN(63, msgFingerprint).toString();\n}\nfunction hash32(view, length, c) {\n  let a = 0x9e3779b9,\n    b = 0x9e3779b9;\n  let index = 0;\n  const end = length - 12;\n  for (; index <= end; index += 12) {\n    a += view.getUint32(index, true);\n    b += view.getUint32(index + 4, true);\n    c += view.getUint32(index + 8, true);\n    const res = mix(a, b, c);\n    a = res[0], b = res[1], c = res[2];\n  }\n  const remainder = length - index;\n  // the first byte of c is reserved for the length\n  c += length;\n  if (remainder >= 4) {\n    a += view.getUint32(index, true);\n    index += 4;\n    if (remainder >= 8) {\n      b += view.getUint32(index, true);\n      index += 4;\n      // Partial 32-bit word for c\n      if (remainder >= 9) {\n        c += view.getUint8(index++) << 8;\n      }\n      if (remainder >= 10) {\n        c += view.getUint8(index++) << 16;\n      }\n      if (remainder === 11) {\n        c += view.getUint8(index++) << 24;\n      }\n    } else {\n      // Partial 32-bit word for b\n      if (remainder >= 5) {\n        b += view.getUint8(index++);\n      }\n      if (remainder >= 6) {\n        b += view.getUint8(index++) << 8;\n      }\n      if (remainder === 7) {\n        b += view.getUint8(index++) << 16;\n      }\n    }\n  } else {\n    // Partial 32-bit word for a\n    if (remainder >= 1) {\n      a += view.getUint8(index++);\n    }\n    if (remainder >= 2) {\n      a += view.getUint8(index++) << 8;\n    }\n    if (remainder === 3) {\n      a += view.getUint8(index++) << 16;\n    }\n  }\n  return mix(a, b, c)[2];\n}\nfunction mix(a, b, c) {\n  a -= b;\n  a -= c;\n  a ^= c >>> 13;\n  b -= c;\n  b -= a;\n  b ^= a << 8;\n  c -= a;\n  c -= b;\n  c ^= b >>> 13;\n  a -= b;\n  a -= c;\n  a ^= c >>> 12;\n  b -= c;\n  b -= a;\n  b ^= a << 16;\n  c -= a;\n  c -= b;\n  c ^= b >>> 5;\n  a -= b;\n  a -= c;\n  a ^= c >>> 3;\n  b -= c;\n  b -= a;\n  b ^= a << 10;\n  c -= a;\n  c -= b;\n  c ^= b >>> 15;\n  return [a, b, c];\n}\n// Utils\nvar Endian;\n(function (Endian) {\n  Endian[Endian[\"Little\"] = 0] = \"Little\";\n  Endian[Endian[\"Big\"] = 1] = \"Big\";\n})(Endian || (Endian = {}));\nfunction add32(a, b) {\n  return add32to64(a, b)[1];\n}\nfunction add32to64(a, b) {\n  const low = (a & 0xffff) + (b & 0xffff);\n  const high = (a >>> 16) + (b >>> 16) + (low >>> 16);\n  return [high >>> 16, high << 16 | low & 0xffff];\n}\n// Rotate a 32b number left `count` position\nfunction rol32(a, count) {\n  return a << count | a >>> 32 - count;\n}\nfunction bytesToWords32(bytes, endian) {\n  const size = bytes.length + 3 >>> 2;\n  const words32 = [];\n  for (let i = 0; i < size; i++) {\n    words32[i] = wordAt(bytes, i * 4, endian);\n  }\n  return words32;\n}\nfunction byteAt(bytes, index) {\n  return index >= bytes.length ? 0 : bytes[index];\n}\nfunction wordAt(bytes, index, endian) {\n  let word = 0;\n  if (endian === Endian.Big) {\n    for (let i = 0; i < 4; i++) {\n      word += byteAt(bytes, index + i) << 24 - 8 * i;\n    }\n  } else {\n    for (let i = 0; i < 4; i++) {\n      word += byteAt(bytes, index + i) << 8 * i;\n    }\n  }\n  return word;\n}\n\n//// Types\nvar TypeModifier;\n(function (TypeModifier) {\n  TypeModifier[TypeModifier[\"None\"] = 0] = \"None\";\n  TypeModifier[TypeModifier[\"Const\"] = 1] = \"Const\";\n})(TypeModifier || (TypeModifier = {}));\nclass Type {\n  constructor(modifiers = TypeModifier.None) {\n    this.modifiers = modifiers;\n  }\n  hasModifier(modifier) {\n    return (this.modifiers & modifier) !== 0;\n  }\n}\nvar BuiltinTypeName;\n(function (BuiltinTypeName) {\n  BuiltinTypeName[BuiltinTypeName[\"Dynamic\"] = 0] = \"Dynamic\";\n  BuiltinTypeName[BuiltinTypeName[\"Bool\"] = 1] = \"Bool\";\n  BuiltinTypeName[BuiltinTypeName[\"String\"] = 2] = \"String\";\n  BuiltinTypeName[BuiltinTypeName[\"Int\"] = 3] = \"Int\";\n  BuiltinTypeName[BuiltinTypeName[\"Number\"] = 4] = \"Number\";\n  BuiltinTypeName[BuiltinTypeName[\"Function\"] = 5] = \"Function\";\n  BuiltinTypeName[BuiltinTypeName[\"Inferred\"] = 6] = \"Inferred\";\n  BuiltinTypeName[BuiltinTypeName[\"None\"] = 7] = \"None\";\n})(BuiltinTypeName || (BuiltinTypeName = {}));\nclass BuiltinType extends Type {\n  constructor(name, modifiers) {\n    super(modifiers);\n    this.name = name;\n  }\n  visitType(visitor, context) {\n    return visitor.visitBuiltinType(this, context);\n  }\n}\nclass ExpressionType extends Type {\n  constructor(value, modifiers, typeParams = null) {\n    super(modifiers);\n    this.value = value;\n    this.typeParams = typeParams;\n  }\n  visitType(visitor, context) {\n    return visitor.visitExpressionType(this, context);\n  }\n}\nclass ArrayType extends Type {\n  constructor(of, modifiers) {\n    super(modifiers);\n    this.of = of;\n  }\n  visitType(visitor, context) {\n    return visitor.visitArrayType(this, context);\n  }\n}\nclass MapType extends Type {\n  constructor(valueType, modifiers) {\n    super(modifiers);\n    this.valueType = valueType || null;\n  }\n  visitType(visitor, context) {\n    return visitor.visitMapType(this, context);\n  }\n}\nclass TransplantedType extends Type {\n  constructor(type, modifiers) {\n    super(modifiers);\n    this.type = type;\n  }\n  visitType(visitor, context) {\n    return visitor.visitTransplantedType(this, context);\n  }\n}\nconst DYNAMIC_TYPE = new BuiltinType(BuiltinTypeName.Dynamic);\nconst INFERRED_TYPE = new BuiltinType(BuiltinTypeName.Inferred);\nconst BOOL_TYPE = new BuiltinType(BuiltinTypeName.Bool);\nconst INT_TYPE = new BuiltinType(BuiltinTypeName.Int);\nconst NUMBER_TYPE = new BuiltinType(BuiltinTypeName.Number);\nconst STRING_TYPE = new BuiltinType(BuiltinTypeName.String);\nconst FUNCTION_TYPE = new BuiltinType(BuiltinTypeName.Function);\nconst NONE_TYPE = new BuiltinType(BuiltinTypeName.None);\n///// Expressions\nvar UnaryOperator;\n(function (UnaryOperator) {\n  UnaryOperator[UnaryOperator[\"Minus\"] = 0] = \"Minus\";\n  UnaryOperator[UnaryOperator[\"Plus\"] = 1] = \"Plus\";\n})(UnaryOperator || (UnaryOperator = {}));\nvar BinaryOperator;\n(function (BinaryOperator) {\n  BinaryOperator[BinaryOperator[\"Equals\"] = 0] = \"Equals\";\n  BinaryOperator[BinaryOperator[\"NotEquals\"] = 1] = \"NotEquals\";\n  BinaryOperator[BinaryOperator[\"Identical\"] = 2] = \"Identical\";\n  BinaryOperator[BinaryOperator[\"NotIdentical\"] = 3] = \"NotIdentical\";\n  BinaryOperator[BinaryOperator[\"Minus\"] = 4] = \"Minus\";\n  BinaryOperator[BinaryOperator[\"Plus\"] = 5] = \"Plus\";\n  BinaryOperator[BinaryOperator[\"Divide\"] = 6] = \"Divide\";\n  BinaryOperator[BinaryOperator[\"Multiply\"] = 7] = \"Multiply\";\n  BinaryOperator[BinaryOperator[\"Modulo\"] = 8] = \"Modulo\";\n  BinaryOperator[BinaryOperator[\"And\"] = 9] = \"And\";\n  BinaryOperator[BinaryOperator[\"Or\"] = 10] = \"Or\";\n  BinaryOperator[BinaryOperator[\"BitwiseOr\"] = 11] = \"BitwiseOr\";\n  BinaryOperator[BinaryOperator[\"BitwiseAnd\"] = 12] = \"BitwiseAnd\";\n  BinaryOperator[BinaryOperator[\"Lower\"] = 13] = \"Lower\";\n  BinaryOperator[BinaryOperator[\"LowerEquals\"] = 14] = \"LowerEquals\";\n  BinaryOperator[BinaryOperator[\"Bigger\"] = 15] = \"Bigger\";\n  BinaryOperator[BinaryOperator[\"BiggerEquals\"] = 16] = \"BiggerEquals\";\n  BinaryOperator[BinaryOperator[\"NullishCoalesce\"] = 17] = \"NullishCoalesce\";\n})(BinaryOperator || (BinaryOperator = {}));\nfunction nullSafeIsEquivalent(base, other) {\n  if (base == null || other == null) {\n    return base == other;\n  }\n  return base.isEquivalent(other);\n}\nfunction areAllEquivalentPredicate(base, other, equivalentPredicate) {\n  const len = base.length;\n  if (len !== other.length) {\n    return false;\n  }\n  for (let i = 0; i < len; i++) {\n    if (!equivalentPredicate(base[i], other[i])) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction areAllEquivalent(base, other) {\n  return areAllEquivalentPredicate(base, other, (baseElement, otherElement) => baseElement.isEquivalent(otherElement));\n}\nclass Expression {\n  constructor(type, sourceSpan) {\n    this.type = type || null;\n    this.sourceSpan = sourceSpan || null;\n  }\n  prop(name, sourceSpan) {\n    return new ReadPropExpr(this, name, null, sourceSpan);\n  }\n  key(index, type, sourceSpan) {\n    return new ReadKeyExpr(this, index, type, sourceSpan);\n  }\n  callFn(params, sourceSpan, pure) {\n    return new InvokeFunctionExpr(this, params, null, sourceSpan, pure);\n  }\n  instantiate(params, type, sourceSpan) {\n    return new InstantiateExpr(this, params, type, sourceSpan);\n  }\n  conditional(trueCase, falseCase = null, sourceSpan) {\n    return new ConditionalExpr(this, trueCase, falseCase, null, sourceSpan);\n  }\n  equals(rhs, sourceSpan) {\n    return new BinaryOperatorExpr(BinaryOperator.Equals, this, rhs, null, sourceSpan);\n  }\n  notEquals(rhs, sourceSpan) {\n    return new BinaryOperatorExpr(BinaryOperator.NotEquals, this, rhs, null, sourceSpan);\n  }\n  identical(rhs, sourceSpan) {\n    return new BinaryOperatorExpr(BinaryOperator.Identical, this, rhs, null, sourceSpan);\n  }\n  notIdentical(rhs, sourceSpan) {\n    return new BinaryOperatorExpr(BinaryOperator.NotIdentical, this, rhs, null, sourceSpan);\n  }\n  minus(rhs, sourceSpan) {\n    return new BinaryOperatorExpr(BinaryOperator.Minus, this, rhs, null, sourceSpan);\n  }\n  plus(rhs, sourceSpan) {\n    return new BinaryOperatorExpr(BinaryOperator.Plus, this, rhs, null, sourceSpan);\n  }\n  divide(rhs, sourceSpan) {\n    return new BinaryOperatorExpr(BinaryOperator.Divide, this, rhs, null, sourceSpan);\n  }\n  multiply(rhs, sourceSpan) {\n    return new BinaryOperatorExpr(BinaryOperator.Multiply, this, rhs, null, sourceSpan);\n  }\n  modulo(rhs, sourceSpan) {\n    return new BinaryOperatorExpr(BinaryOperator.Modulo, this, rhs, null, sourceSpan);\n  }\n  and(rhs, sourceSpan) {\n    return new BinaryOperatorExpr(BinaryOperator.And, this, rhs, null, sourceSpan);\n  }\n  bitwiseOr(rhs, sourceSpan, parens = true) {\n    return new BinaryOperatorExpr(BinaryOperator.BitwiseOr, this, rhs, null, sourceSpan, parens);\n  }\n  bitwiseAnd(rhs, sourceSpan, parens = true) {\n    return new BinaryOperatorExpr(BinaryOperator.BitwiseAnd, this, rhs, null, sourceSpan, parens);\n  }\n  or(rhs, sourceSpan) {\n    return new BinaryOperatorExpr(BinaryOperator.Or, this, rhs, null, sourceSpan);\n  }\n  lower(rhs, sourceSpan) {\n    return new BinaryOperatorExpr(BinaryOperator.Lower, this, rhs, null, sourceSpan);\n  }\n  lowerEquals(rhs, sourceSpan) {\n    return new BinaryOperatorExpr(BinaryOperator.LowerEquals, this, rhs, null, sourceSpan);\n  }\n  bigger(rhs, sourceSpan) {\n    return new BinaryOperatorExpr(BinaryOperator.Bigger, this, rhs, null, sourceSpan);\n  }\n  biggerEquals(rhs, sourceSpan) {\n    return new BinaryOperatorExpr(BinaryOperator.BiggerEquals, this, rhs, null, sourceSpan);\n  }\n  isBlank(sourceSpan) {\n    // Note: We use equals by purpose here to compare to null and undefined in JS.\n    // We use the typed null to allow strictNullChecks to narrow types.\n    return this.equals(TYPED_NULL_EXPR, sourceSpan);\n  }\n  nullishCoalesce(rhs, sourceSpan) {\n    return new BinaryOperatorExpr(BinaryOperator.NullishCoalesce, this, rhs, null, sourceSpan);\n  }\n  toStmt() {\n    return new ExpressionStatement(this, null);\n  }\n}\nclass ReadVarExpr extends Expression {\n  constructor(name, type, sourceSpan) {\n    super(type, sourceSpan);\n    this.name = name;\n  }\n  isEquivalent(e) {\n    return e instanceof ReadVarExpr && this.name === e.name;\n  }\n  isConstant() {\n    return false;\n  }\n  visitExpression(visitor, context) {\n    return visitor.visitReadVarExpr(this, context);\n  }\n  clone() {\n    return new ReadVarExpr(this.name, this.type, this.sourceSpan);\n  }\n  set(value) {\n    return new WriteVarExpr(this.name, value, null, this.sourceSpan);\n  }\n}\nclass TypeofExpr extends Expression {\n  constructor(expr, type, sourceSpan) {\n    super(type, sourceSpan);\n    this.expr = expr;\n  }\n  visitExpression(visitor, context) {\n    return visitor.visitTypeofExpr(this, context);\n  }\n  isEquivalent(e) {\n    return e instanceof TypeofExpr && e.expr.isEquivalent(this.expr);\n  }\n  isConstant() {\n    return this.expr.isConstant();\n  }\n  clone() {\n    return new TypeofExpr(this.expr.clone());\n  }\n}\nclass WrappedNodeExpr extends Expression {\n  constructor(node, type, sourceSpan) {\n    super(type, sourceSpan);\n    this.node = node;\n  }\n  isEquivalent(e) {\n    return e instanceof WrappedNodeExpr && this.node === e.node;\n  }\n  isConstant() {\n    return false;\n  }\n  visitExpression(visitor, context) {\n    return visitor.visitWrappedNodeExpr(this, context);\n  }\n  clone() {\n    return new WrappedNodeExpr(this.node, this.type, this.sourceSpan);\n  }\n}\nclass WriteVarExpr extends Expression {\n  constructor(name, value, type, sourceSpan) {\n    super(type || value.type, sourceSpan);\n    this.name = name;\n    this.value = value;\n  }\n  isEquivalent(e) {\n    return e instanceof WriteVarExpr && this.name === e.name && this.value.isEquivalent(e.value);\n  }\n  isConstant() {\n    return false;\n  }\n  visitExpression(visitor, context) {\n    return visitor.visitWriteVarExpr(this, context);\n  }\n  clone() {\n    return new WriteVarExpr(this.name, this.value.clone(), this.type, this.sourceSpan);\n  }\n  toDeclStmt(type, modifiers) {\n    return new DeclareVarStmt(this.name, this.value, type, modifiers, this.sourceSpan);\n  }\n  toConstDecl() {\n    return this.toDeclStmt(INFERRED_TYPE, StmtModifier.Final);\n  }\n}\nclass WriteKeyExpr extends Expression {\n  constructor(receiver, index, value, type, sourceSpan) {\n    super(type || value.type, sourceSpan);\n    this.receiver = receiver;\n    this.index = index;\n    this.value = value;\n  }\n  isEquivalent(e) {\n    return e instanceof WriteKeyExpr && this.receiver.isEquivalent(e.receiver) && this.index.isEquivalent(e.index) && this.value.isEquivalent(e.value);\n  }\n  isConstant() {\n    return false;\n  }\n  visitExpression(visitor, context) {\n    return visitor.visitWriteKeyExpr(this, context);\n  }\n  clone() {\n    return new WriteKeyExpr(this.receiver.clone(), this.index.clone(), this.value.clone(), this.type, this.sourceSpan);\n  }\n}\nclass WritePropExpr extends Expression {\n  constructor(receiver, name, value, type, sourceSpan) {\n    super(type || value.type, sourceSpan);\n    this.receiver = receiver;\n    this.name = name;\n    this.value = value;\n  }\n  isEquivalent(e) {\n    return e instanceof WritePropExpr && this.receiver.isEquivalent(e.receiver) && this.name === e.name && this.value.isEquivalent(e.value);\n  }\n  isConstant() {\n    return false;\n  }\n  visitExpression(visitor, context) {\n    return visitor.visitWritePropExpr(this, context);\n  }\n  clone() {\n    return new WritePropExpr(this.receiver.clone(), this.name, this.value.clone(), this.type, this.sourceSpan);\n  }\n}\nclass InvokeFunctionExpr extends Expression {\n  constructor(fn, args, type, sourceSpan, pure = false) {\n    super(type, sourceSpan);\n    this.fn = fn;\n    this.args = args;\n    this.pure = pure;\n  }\n  // An alias for fn, which allows other logic to handle calls and property reads together.\n  get receiver() {\n    return this.fn;\n  }\n  isEquivalent(e) {\n    return e instanceof InvokeFunctionExpr && this.fn.isEquivalent(e.fn) && areAllEquivalent(this.args, e.args) && this.pure === e.pure;\n  }\n  isConstant() {\n    return false;\n  }\n  visitExpression(visitor, context) {\n    return visitor.visitInvokeFunctionExpr(this, context);\n  }\n  clone() {\n    return new InvokeFunctionExpr(this.fn.clone(), this.args.map(arg => arg.clone()), this.type, this.sourceSpan, this.pure);\n  }\n}\nclass TaggedTemplateExpr extends Expression {\n  constructor(tag, template, type, sourceSpan) {\n    super(type, sourceSpan);\n    this.tag = tag;\n    this.template = template;\n  }\n  isEquivalent(e) {\n    return e instanceof TaggedTemplateExpr && this.tag.isEquivalent(e.tag) && areAllEquivalentPredicate(this.template.elements, e.template.elements, (a, b) => a.text === b.text) && areAllEquivalent(this.template.expressions, e.template.expressions);\n  }\n  isConstant() {\n    return false;\n  }\n  visitExpression(visitor, context) {\n    return visitor.visitTaggedTemplateExpr(this, context);\n  }\n  clone() {\n    return new TaggedTemplateExpr(this.tag.clone(), this.template.clone(), this.type, this.sourceSpan);\n  }\n}\nclass InstantiateExpr extends Expression {\n  constructor(classExpr, args, type, sourceSpan) {\n    super(type, sourceSpan);\n    this.classExpr = classExpr;\n    this.args = args;\n  }\n  isEquivalent(e) {\n    return e instanceof InstantiateExpr && this.classExpr.isEquivalent(e.classExpr) && areAllEquivalent(this.args, e.args);\n  }\n  isConstant() {\n    return false;\n  }\n  visitExpression(visitor, context) {\n    return visitor.visitInstantiateExpr(this, context);\n  }\n  clone() {\n    return new InstantiateExpr(this.classExpr.clone(), this.args.map(arg => arg.clone()), this.type, this.sourceSpan);\n  }\n}\nclass LiteralExpr extends Expression {\n  constructor(value, type, sourceSpan) {\n    super(type, sourceSpan);\n    this.value = value;\n  }\n  isEquivalent(e) {\n    return e instanceof LiteralExpr && this.value === e.value;\n  }\n  isConstant() {\n    return true;\n  }\n  visitExpression(visitor, context) {\n    return visitor.visitLiteralExpr(this, context);\n  }\n  clone() {\n    return new LiteralExpr(this.value, this.type, this.sourceSpan);\n  }\n}\nclass TemplateLiteral {\n  constructor(elements, expressions) {\n    this.elements = elements;\n    this.expressions = expressions;\n  }\n  clone() {\n    return new TemplateLiteral(this.elements.map(el => el.clone()), this.expressions.map(expr => expr.clone()));\n  }\n}\nclass TemplateLiteralElement {\n  constructor(text, sourceSpan, rawText) {\n    this.text = text;\n    this.sourceSpan = sourceSpan;\n    // If `rawText` is not provided, try to extract the raw string from its\n    // associated `sourceSpan`. If that is also not available, \"fake\" the raw\n    // string instead by escaping the following control sequences:\n    // - \"\\\" would otherwise indicate that the next character is a control character.\n    // - \"`\" and \"${\" are template string control sequences that would otherwise prematurely\n    // indicate the end of the template literal element.\n    this.rawText = rawText ?? sourceSpan?.toString() ?? escapeForTemplateLiteral(escapeSlashes(text));\n  }\n  clone() {\n    return new TemplateLiteralElement(this.text, this.sourceSpan, this.rawText);\n  }\n}\nclass LiteralPiece {\n  constructor(text, sourceSpan) {\n    this.text = text;\n    this.sourceSpan = sourceSpan;\n  }\n}\nclass PlaceholderPiece {\n  /**\n   * Create a new instance of a `PlaceholderPiece`.\n   *\n   * @param text the name of this placeholder (e.g. `PH_1`).\n   * @param sourceSpan the location of this placeholder in its localized message the source code.\n   * @param associatedMessage reference to another message that this placeholder is associated with.\n   * The `associatedMessage` is mainly used to provide a relationship to an ICU message that has\n   * been extracted out from the message containing the placeholder.\n   */\n  constructor(text, sourceSpan, associatedMessage) {\n    this.text = text;\n    this.sourceSpan = sourceSpan;\n    this.associatedMessage = associatedMessage;\n  }\n}\nconst MEANING_SEPARATOR$1 = '|';\nconst ID_SEPARATOR$1 = '@@';\nconst LEGACY_ID_INDICATOR = '␟';\nclass LocalizedString extends Expression {\n  constructor(metaBlock, messageParts, placeHolderNames, expressions, sourceSpan) {\n    super(STRING_TYPE, sourceSpan);\n    this.metaBlock = metaBlock;\n    this.messageParts = messageParts;\n    this.placeHolderNames = placeHolderNames;\n    this.expressions = expressions;\n  }\n  isEquivalent(e) {\n    // return e instanceof LocalizedString && this.message === e.message;\n    return false;\n  }\n  isConstant() {\n    return false;\n  }\n  visitExpression(visitor, context) {\n    return visitor.visitLocalizedString(this, context);\n  }\n  clone() {\n    return new LocalizedString(this.metaBlock, this.messageParts, this.placeHolderNames, this.expressions.map(expr => expr.clone()), this.sourceSpan);\n  }\n  /**\n   * Serialize the given `meta` and `messagePart` into \"cooked\" and \"raw\" strings that can be used\n   * in a `$localize` tagged string. The format of the metadata is the same as that parsed by\n   * `parseI18nMeta()`.\n   *\n   * @param meta The metadata to serialize\n   * @param messagePart The first part of the tagged string\n   */\n  serializeI18nHead() {\n    let metaBlock = this.metaBlock.description || '';\n    if (this.metaBlock.meaning) {\n      metaBlock = `${this.metaBlock.meaning}${MEANING_SEPARATOR$1}${metaBlock}`;\n    }\n    if (this.metaBlock.customId) {\n      metaBlock = `${metaBlock}${ID_SEPARATOR$1}${this.metaBlock.customId}`;\n    }\n    if (this.metaBlock.legacyIds) {\n      this.metaBlock.legacyIds.forEach(legacyId => {\n        metaBlock = `${metaBlock}${LEGACY_ID_INDICATOR}${legacyId}`;\n      });\n    }\n    return createCookedRawString(metaBlock, this.messageParts[0].text, this.getMessagePartSourceSpan(0));\n  }\n  getMessagePartSourceSpan(i) {\n    return this.messageParts[i]?.sourceSpan ?? this.sourceSpan;\n  }\n  getPlaceholderSourceSpan(i) {\n    return this.placeHolderNames[i]?.sourceSpan ?? this.expressions[i]?.sourceSpan ?? this.sourceSpan;\n  }\n  /**\n   * Serialize the given `placeholderName` and `messagePart` into \"cooked\" and \"raw\" strings that\n   * can be used in a `$localize` tagged string.\n   *\n   * The format is `:<placeholder-name>[@@<associated-id>]:`.\n   *\n   * The `associated-id` is the message id of the (usually an ICU) message to which this placeholder\n   * refers.\n   *\n   * @param partIndex The index of the message part to serialize.\n   */\n  serializeI18nTemplatePart(partIndex) {\n    const placeholder = this.placeHolderNames[partIndex - 1];\n    const messagePart = this.messageParts[partIndex];\n    let metaBlock = placeholder.text;\n    if (placeholder.associatedMessage?.legacyIds.length === 0) {\n      metaBlock += `${ID_SEPARATOR$1}${computeMsgId(placeholder.associatedMessage.messageString, placeholder.associatedMessage.meaning)}`;\n    }\n    return createCookedRawString(metaBlock, messagePart.text, this.getMessagePartSourceSpan(partIndex));\n  }\n}\nconst escapeSlashes = str => str.replace(/\\\\/g, '\\\\\\\\');\nconst escapeStartingColon = str => str.replace(/^:/, '\\\\:');\nconst escapeColons = str => str.replace(/:/g, '\\\\:');\nconst escapeForTemplateLiteral = str => str.replace(/`/g, '\\\\`').replace(/\\${/g, '$\\\\{');\n/**\n * Creates a `{cooked, raw}` object from the `metaBlock` and `messagePart`.\n *\n * The `raw` text must have various character sequences escaped:\n * * \"\\\" would otherwise indicate that the next character is a control character.\n * * \"`\" and \"${\" are template string control sequences that would otherwise prematurely indicate\n *   the end of a message part.\n * * \":\" inside a metablock would prematurely indicate the end of the metablock.\n * * \":\" at the start of a messagePart with no metablock would erroneously indicate the start of a\n *   metablock.\n *\n * @param metaBlock Any metadata that should be prepended to the string\n * @param messagePart The message part of the string\n */\nfunction createCookedRawString(metaBlock, messagePart, range) {\n  if (metaBlock === '') {\n    return {\n      cooked: messagePart,\n      raw: escapeForTemplateLiteral(escapeStartingColon(escapeSlashes(messagePart))),\n      range\n    };\n  } else {\n    return {\n      cooked: `:${metaBlock}:${messagePart}`,\n      raw: escapeForTemplateLiteral(`:${escapeColons(escapeSlashes(metaBlock))}:${escapeSlashes(messagePart)}`),\n      range\n    };\n  }\n}\nclass ExternalExpr extends Expression {\n  constructor(value, type, typeParams = null, sourceSpan) {\n    super(type, sourceSpan);\n    this.value = value;\n    this.typeParams = typeParams;\n  }\n  isEquivalent(e) {\n    return e instanceof ExternalExpr && this.value.name === e.value.name && this.value.moduleName === e.value.moduleName && this.value.runtime === e.value.runtime;\n  }\n  isConstant() {\n    return false;\n  }\n  visitExpression(visitor, context) {\n    return visitor.visitExternalExpr(this, context);\n  }\n  clone() {\n    return new ExternalExpr(this.value, this.type, this.typeParams, this.sourceSpan);\n  }\n}\nclass ExternalReference {\n  constructor(moduleName, name, runtime) {\n    this.moduleName = moduleName;\n    this.name = name;\n    this.runtime = runtime;\n  }\n}\nclass ConditionalExpr extends Expression {\n  constructor(condition, trueCase, falseCase = null, type, sourceSpan) {\n    super(type || trueCase.type, sourceSpan);\n    this.condition = condition;\n    this.falseCase = falseCase;\n    this.trueCase = trueCase;\n  }\n  isEquivalent(e) {\n    return e instanceof ConditionalExpr && this.condition.isEquivalent(e.condition) && this.trueCase.isEquivalent(e.trueCase) && nullSafeIsEquivalent(this.falseCase, e.falseCase);\n  }\n  isConstant() {\n    return false;\n  }\n  visitExpression(visitor, context) {\n    return visitor.visitConditionalExpr(this, context);\n  }\n  clone() {\n    return new ConditionalExpr(this.condition.clone(), this.trueCase.clone(), this.falseCase?.clone(), this.type, this.sourceSpan);\n  }\n}\nclass DynamicImportExpr extends Expression {\n  constructor(url, sourceSpan) {\n    super(null, sourceSpan);\n    this.url = url;\n  }\n  isEquivalent(e) {\n    return e instanceof DynamicImportExpr && this.url === e.url;\n  }\n  isConstant() {\n    return false;\n  }\n  visitExpression(visitor, context) {\n    return visitor.visitDynamicImportExpr(this, context);\n  }\n  clone() {\n    return new DynamicImportExpr(this.url, this.sourceSpan);\n  }\n}\nclass NotExpr extends Expression {\n  constructor(condition, sourceSpan) {\n    super(BOOL_TYPE, sourceSpan);\n    this.condition = condition;\n  }\n  isEquivalent(e) {\n    return e instanceof NotExpr && this.condition.isEquivalent(e.condition);\n  }\n  isConstant() {\n    return false;\n  }\n  visitExpression(visitor, context) {\n    return visitor.visitNotExpr(this, context);\n  }\n  clone() {\n    return new NotExpr(this.condition.clone(), this.sourceSpan);\n  }\n}\nclass FnParam {\n  constructor(name, type = null) {\n    this.name = name;\n    this.type = type;\n  }\n  isEquivalent(param) {\n    return this.name === param.name;\n  }\n  clone() {\n    return new FnParam(this.name, this.type);\n  }\n}\nclass FunctionExpr extends Expression {\n  constructor(params, statements, type, sourceSpan, name) {\n    super(type, sourceSpan);\n    this.params = params;\n    this.statements = statements;\n    this.name = name;\n  }\n  isEquivalent(e) {\n    return (e instanceof FunctionExpr || e instanceof DeclareFunctionStmt) && areAllEquivalent(this.params, e.params) && areAllEquivalent(this.statements, e.statements);\n  }\n  isConstant() {\n    return false;\n  }\n  visitExpression(visitor, context) {\n    return visitor.visitFunctionExpr(this, context);\n  }\n  toDeclStmt(name, modifiers) {\n    return new DeclareFunctionStmt(name, this.params, this.statements, this.type, modifiers, this.sourceSpan);\n  }\n  clone() {\n    // TODO: Should we deep clone statements?\n    return new FunctionExpr(this.params.map(p => p.clone()), this.statements, this.type, this.sourceSpan, this.name);\n  }\n}\nclass ArrowFunctionExpr extends Expression {\n  // Note that `body: Expression` represents `() => expr` whereas\n  // `body: Statement[]` represents `() => { expr }`.\n  constructor(params, body, type, sourceSpan) {\n    super(type, sourceSpan);\n    this.params = params;\n    this.body = body;\n  }\n  isEquivalent(e) {\n    if (!(e instanceof ArrowFunctionExpr) || !areAllEquivalent(this.params, e.params)) {\n      return false;\n    }\n    if (this.body instanceof Expression && e.body instanceof Expression) {\n      return this.body.isEquivalent(e.body);\n    }\n    if (Array.isArray(this.body) && Array.isArray(e.body)) {\n      return areAllEquivalent(this.body, e.body);\n    }\n    return false;\n  }\n  isConstant() {\n    return false;\n  }\n  visitExpression(visitor, context) {\n    return visitor.visitArrowFunctionExpr(this, context);\n  }\n  clone() {\n    // TODO: Should we deep clone statements?\n    return new ArrowFunctionExpr(this.params.map(p => p.clone()), Array.isArray(this.body) ? this.body : this.body.clone(), this.type, this.sourceSpan);\n  }\n  toDeclStmt(name, modifiers) {\n    return new DeclareVarStmt(name, this, INFERRED_TYPE, modifiers, this.sourceSpan);\n  }\n}\nclass UnaryOperatorExpr extends Expression {\n  constructor(operator, expr, type, sourceSpan, parens = true) {\n    super(type || NUMBER_TYPE, sourceSpan);\n    this.operator = operator;\n    this.expr = expr;\n    this.parens = parens;\n  }\n  isEquivalent(e) {\n    return e instanceof UnaryOperatorExpr && this.operator === e.operator && this.expr.isEquivalent(e.expr);\n  }\n  isConstant() {\n    return false;\n  }\n  visitExpression(visitor, context) {\n    return visitor.visitUnaryOperatorExpr(this, context);\n  }\n  clone() {\n    return new UnaryOperatorExpr(this.operator, this.expr.clone(), this.type, this.sourceSpan, this.parens);\n  }\n}\nclass BinaryOperatorExpr extends Expression {\n  constructor(operator, lhs, rhs, type, sourceSpan, parens = true) {\n    super(type || lhs.type, sourceSpan);\n    this.operator = operator;\n    this.rhs = rhs;\n    this.parens = parens;\n    this.lhs = lhs;\n  }\n  isEquivalent(e) {\n    return e instanceof BinaryOperatorExpr && this.operator === e.operator && this.lhs.isEquivalent(e.lhs) && this.rhs.isEquivalent(e.rhs);\n  }\n  isConstant() {\n    return false;\n  }\n  visitExpression(visitor, context) {\n    return visitor.visitBinaryOperatorExpr(this, context);\n  }\n  clone() {\n    return new BinaryOperatorExpr(this.operator, this.lhs.clone(), this.rhs.clone(), this.type, this.sourceSpan, this.parens);\n  }\n}\nclass ReadPropExpr extends Expression {\n  constructor(receiver, name, type, sourceSpan) {\n    super(type, sourceSpan);\n    this.receiver = receiver;\n    this.name = name;\n  }\n  // An alias for name, which allows other logic to handle property reads and keyed reads together.\n  get index() {\n    return this.name;\n  }\n  isEquivalent(e) {\n    return e instanceof ReadPropExpr && this.receiver.isEquivalent(e.receiver) && this.name === e.name;\n  }\n  isConstant() {\n    return false;\n  }\n  visitExpression(visitor, context) {\n    return visitor.visitReadPropExpr(this, context);\n  }\n  set(value) {\n    return new WritePropExpr(this.receiver, this.name, value, null, this.sourceSpan);\n  }\n  clone() {\n    return new ReadPropExpr(this.receiver.clone(), this.name, this.type, this.sourceSpan);\n  }\n}\nclass ReadKeyExpr extends Expression {\n  constructor(receiver, index, type, sourceSpan) {\n    super(type, sourceSpan);\n    this.receiver = receiver;\n    this.index = index;\n  }\n  isEquivalent(e) {\n    return e instanceof ReadKeyExpr && this.receiver.isEquivalent(e.receiver) && this.index.isEquivalent(e.index);\n  }\n  isConstant() {\n    return false;\n  }\n  visitExpression(visitor, context) {\n    return visitor.visitReadKeyExpr(this, context);\n  }\n  set(value) {\n    return new WriteKeyExpr(this.receiver, this.index, value, null, this.sourceSpan);\n  }\n  clone() {\n    return new ReadKeyExpr(this.receiver.clone(), this.index.clone(), this.type, this.sourceSpan);\n  }\n}\nclass LiteralArrayExpr extends Expression {\n  constructor(entries, type, sourceSpan) {\n    super(type, sourceSpan);\n    this.entries = entries;\n  }\n  isConstant() {\n    return this.entries.every(e => e.isConstant());\n  }\n  isEquivalent(e) {\n    return e instanceof LiteralArrayExpr && areAllEquivalent(this.entries, e.entries);\n  }\n  visitExpression(visitor, context) {\n    return visitor.visitLiteralArrayExpr(this, context);\n  }\n  clone() {\n    return new LiteralArrayExpr(this.entries.map(e => e.clone()), this.type, this.sourceSpan);\n  }\n}\nclass LiteralMapEntry {\n  constructor(key, value, quoted) {\n    this.key = key;\n    this.value = value;\n    this.quoted = quoted;\n  }\n  isEquivalent(e) {\n    return this.key === e.key && this.value.isEquivalent(e.value);\n  }\n  clone() {\n    return new LiteralMapEntry(this.key, this.value.clone(), this.quoted);\n  }\n}\nclass LiteralMapExpr extends Expression {\n  constructor(entries, type, sourceSpan) {\n    super(type, sourceSpan);\n    this.entries = entries;\n    this.valueType = null;\n    if (type) {\n      this.valueType = type.valueType;\n    }\n  }\n  isEquivalent(e) {\n    return e instanceof LiteralMapExpr && areAllEquivalent(this.entries, e.entries);\n  }\n  isConstant() {\n    return this.entries.every(e => e.value.isConstant());\n  }\n  visitExpression(visitor, context) {\n    return visitor.visitLiteralMapExpr(this, context);\n  }\n  clone() {\n    const entriesClone = this.entries.map(entry => entry.clone());\n    return new LiteralMapExpr(entriesClone, this.type, this.sourceSpan);\n  }\n}\nclass CommaExpr extends Expression {\n  constructor(parts, sourceSpan) {\n    super(parts[parts.length - 1].type, sourceSpan);\n    this.parts = parts;\n  }\n  isEquivalent(e) {\n    return e instanceof CommaExpr && areAllEquivalent(this.parts, e.parts);\n  }\n  isConstant() {\n    return false;\n  }\n  visitExpression(visitor, context) {\n    return visitor.visitCommaExpr(this, context);\n  }\n  clone() {\n    return new CommaExpr(this.parts.map(p => p.clone()));\n  }\n}\nconst NULL_EXPR = new LiteralExpr(null, null, null);\nconst TYPED_NULL_EXPR = new LiteralExpr(null, INFERRED_TYPE, null);\n//// Statements\nvar StmtModifier;\n(function (StmtModifier) {\n  StmtModifier[StmtModifier[\"None\"] = 0] = \"None\";\n  StmtModifier[StmtModifier[\"Final\"] = 1] = \"Final\";\n  StmtModifier[StmtModifier[\"Private\"] = 2] = \"Private\";\n  StmtModifier[StmtModifier[\"Exported\"] = 4] = \"Exported\";\n  StmtModifier[StmtModifier[\"Static\"] = 8] = \"Static\";\n})(StmtModifier || (StmtModifier = {}));\nclass LeadingComment {\n  constructor(text, multiline, trailingNewline) {\n    this.text = text;\n    this.multiline = multiline;\n    this.trailingNewline = trailingNewline;\n  }\n  toString() {\n    return this.multiline ? ` ${this.text} ` : this.text;\n  }\n}\nclass JSDocComment extends LeadingComment {\n  constructor(tags) {\n    super('', /* multiline */true, /* trailingNewline */true);\n    this.tags = tags;\n  }\n  toString() {\n    return serializeTags(this.tags);\n  }\n}\nclass Statement {\n  constructor(modifiers = StmtModifier.None, sourceSpan = null, leadingComments) {\n    this.modifiers = modifiers;\n    this.sourceSpan = sourceSpan;\n    this.leadingComments = leadingComments;\n  }\n  hasModifier(modifier) {\n    return (this.modifiers & modifier) !== 0;\n  }\n  addLeadingComment(leadingComment) {\n    this.leadingComments = this.leadingComments ?? [];\n    this.leadingComments.push(leadingComment);\n  }\n}\nclass DeclareVarStmt extends Statement {\n  constructor(name, value, type, modifiers, sourceSpan, leadingComments) {\n    super(modifiers, sourceSpan, leadingComments);\n    this.name = name;\n    this.value = value;\n    this.type = type || value && value.type || null;\n  }\n  isEquivalent(stmt) {\n    return stmt instanceof DeclareVarStmt && this.name === stmt.name && (this.value ? !!stmt.value && this.value.isEquivalent(stmt.value) : !stmt.value);\n  }\n  visitStatement(visitor, context) {\n    return visitor.visitDeclareVarStmt(this, context);\n  }\n}\nclass DeclareFunctionStmt extends Statement {\n  constructor(name, params, statements, type, modifiers, sourceSpan, leadingComments) {\n    super(modifiers, sourceSpan, leadingComments);\n    this.name = name;\n    this.params = params;\n    this.statements = statements;\n    this.type = type || null;\n  }\n  isEquivalent(stmt) {\n    return stmt instanceof DeclareFunctionStmt && areAllEquivalent(this.params, stmt.params) && areAllEquivalent(this.statements, stmt.statements);\n  }\n  visitStatement(visitor, context) {\n    return visitor.visitDeclareFunctionStmt(this, context);\n  }\n}\nclass ExpressionStatement extends Statement {\n  constructor(expr, sourceSpan, leadingComments) {\n    super(StmtModifier.None, sourceSpan, leadingComments);\n    this.expr = expr;\n  }\n  isEquivalent(stmt) {\n    return stmt instanceof ExpressionStatement && this.expr.isEquivalent(stmt.expr);\n  }\n  visitStatement(visitor, context) {\n    return visitor.visitExpressionStmt(this, context);\n  }\n}\nclass ReturnStatement extends Statement {\n  constructor(value, sourceSpan = null, leadingComments) {\n    super(StmtModifier.None, sourceSpan, leadingComments);\n    this.value = value;\n  }\n  isEquivalent(stmt) {\n    return stmt instanceof ReturnStatement && this.value.isEquivalent(stmt.value);\n  }\n  visitStatement(visitor, context) {\n    return visitor.visitReturnStmt(this, context);\n  }\n}\nclass IfStmt extends Statement {\n  constructor(condition, trueCase, falseCase = [], sourceSpan, leadingComments) {\n    super(StmtModifier.None, sourceSpan, leadingComments);\n    this.condition = condition;\n    this.trueCase = trueCase;\n    this.falseCase = falseCase;\n  }\n  isEquivalent(stmt) {\n    return stmt instanceof IfStmt && this.condition.isEquivalent(stmt.condition) && areAllEquivalent(this.trueCase, stmt.trueCase) && areAllEquivalent(this.falseCase, stmt.falseCase);\n  }\n  visitStatement(visitor, context) {\n    return visitor.visitIfStmt(this, context);\n  }\n}\nclass RecursiveAstVisitor$1 {\n  visitType(ast, context) {\n    return ast;\n  }\n  visitExpression(ast, context) {\n    if (ast.type) {\n      ast.type.visitType(this, context);\n    }\n    return ast;\n  }\n  visitBuiltinType(type, context) {\n    return this.visitType(type, context);\n  }\n  visitExpressionType(type, context) {\n    type.value.visitExpression(this, context);\n    if (type.typeParams !== null) {\n      type.typeParams.forEach(param => this.visitType(param, context));\n    }\n    return this.visitType(type, context);\n  }\n  visitArrayType(type, context) {\n    return this.visitType(type, context);\n  }\n  visitMapType(type, context) {\n    return this.visitType(type, context);\n  }\n  visitTransplantedType(type, context) {\n    return type;\n  }\n  visitWrappedNodeExpr(ast, context) {\n    return ast;\n  }\n  visitTypeofExpr(ast, context) {\n    return this.visitExpression(ast, context);\n  }\n  visitReadVarExpr(ast, context) {\n    return this.visitExpression(ast, context);\n  }\n  visitWriteVarExpr(ast, context) {\n    ast.value.visitExpression(this, context);\n    return this.visitExpression(ast, context);\n  }\n  visitWriteKeyExpr(ast, context) {\n    ast.receiver.visitExpression(this, context);\n    ast.index.visitExpression(this, context);\n    ast.value.visitExpression(this, context);\n    return this.visitExpression(ast, context);\n  }\n  visitWritePropExpr(ast, context) {\n    ast.receiver.visitExpression(this, context);\n    ast.value.visitExpression(this, context);\n    return this.visitExpression(ast, context);\n  }\n  visitDynamicImportExpr(ast, context) {\n    return this.visitExpression(ast, context);\n  }\n  visitInvokeFunctionExpr(ast, context) {\n    ast.fn.visitExpression(this, context);\n    this.visitAllExpressions(ast.args, context);\n    return this.visitExpression(ast, context);\n  }\n  visitTaggedTemplateExpr(ast, context) {\n    ast.tag.visitExpression(this, context);\n    this.visitAllExpressions(ast.template.expressions, context);\n    return this.visitExpression(ast, context);\n  }\n  visitInstantiateExpr(ast, context) {\n    ast.classExpr.visitExpression(this, context);\n    this.visitAllExpressions(ast.args, context);\n    return this.visitExpression(ast, context);\n  }\n  visitLiteralExpr(ast, context) {\n    return this.visitExpression(ast, context);\n  }\n  visitLocalizedString(ast, context) {\n    return this.visitExpression(ast, context);\n  }\n  visitExternalExpr(ast, context) {\n    if (ast.typeParams) {\n      ast.typeParams.forEach(type => type.visitType(this, context));\n    }\n    return this.visitExpression(ast, context);\n  }\n  visitConditionalExpr(ast, context) {\n    ast.condition.visitExpression(this, context);\n    ast.trueCase.visitExpression(this, context);\n    ast.falseCase.visitExpression(this, context);\n    return this.visitExpression(ast, context);\n  }\n  visitNotExpr(ast, context) {\n    ast.condition.visitExpression(this, context);\n    return this.visitExpression(ast, context);\n  }\n  visitFunctionExpr(ast, context) {\n    this.visitAllStatements(ast.statements, context);\n    return this.visitExpression(ast, context);\n  }\n  visitArrowFunctionExpr(ast, context) {\n    if (Array.isArray(ast.body)) {\n      this.visitAllStatements(ast.body, context);\n    } else {\n      this.visitExpression(ast.body, context);\n    }\n    return this.visitExpression(ast, context);\n  }\n  visitUnaryOperatorExpr(ast, context) {\n    ast.expr.visitExpression(this, context);\n    return this.visitExpression(ast, context);\n  }\n  visitBinaryOperatorExpr(ast, context) {\n    ast.lhs.visitExpression(this, context);\n    ast.rhs.visitExpression(this, context);\n    return this.visitExpression(ast, context);\n  }\n  visitReadPropExpr(ast, context) {\n    ast.receiver.visitExpression(this, context);\n    return this.visitExpression(ast, context);\n  }\n  visitReadKeyExpr(ast, context) {\n    ast.receiver.visitExpression(this, context);\n    ast.index.visitExpression(this, context);\n    return this.visitExpression(ast, context);\n  }\n  visitLiteralArrayExpr(ast, context) {\n    this.visitAllExpressions(ast.entries, context);\n    return this.visitExpression(ast, context);\n  }\n  visitLiteralMapExpr(ast, context) {\n    ast.entries.forEach(entry => entry.value.visitExpression(this, context));\n    return this.visitExpression(ast, context);\n  }\n  visitCommaExpr(ast, context) {\n    this.visitAllExpressions(ast.parts, context);\n    return this.visitExpression(ast, context);\n  }\n  visitAllExpressions(exprs, context) {\n    exprs.forEach(expr => expr.visitExpression(this, context));\n  }\n  visitDeclareVarStmt(stmt, context) {\n    if (stmt.value) {\n      stmt.value.visitExpression(this, context);\n    }\n    if (stmt.type) {\n      stmt.type.visitType(this, context);\n    }\n    return stmt;\n  }\n  visitDeclareFunctionStmt(stmt, context) {\n    this.visitAllStatements(stmt.statements, context);\n    if (stmt.type) {\n      stmt.type.visitType(this, context);\n    }\n    return stmt;\n  }\n  visitExpressionStmt(stmt, context) {\n    stmt.expr.visitExpression(this, context);\n    return stmt;\n  }\n  visitReturnStmt(stmt, context) {\n    stmt.value.visitExpression(this, context);\n    return stmt;\n  }\n  visitIfStmt(stmt, context) {\n    stmt.condition.visitExpression(this, context);\n    this.visitAllStatements(stmt.trueCase, context);\n    this.visitAllStatements(stmt.falseCase, context);\n    return stmt;\n  }\n  visitAllStatements(stmts, context) {\n    stmts.forEach(stmt => stmt.visitStatement(this, context));\n  }\n}\nfunction leadingComment(text, multiline = false, trailingNewline = true) {\n  return new LeadingComment(text, multiline, trailingNewline);\n}\nfunction jsDocComment(tags = []) {\n  return new JSDocComment(tags);\n}\nfunction variable(name, type, sourceSpan) {\n  return new ReadVarExpr(name, type, sourceSpan);\n}\nfunction importExpr(id, typeParams = null, sourceSpan) {\n  return new ExternalExpr(id, null, typeParams, sourceSpan);\n}\nfunction importType(id, typeParams, typeModifiers) {\n  return id != null ? expressionType(importExpr(id, typeParams, null), typeModifiers) : null;\n}\nfunction expressionType(expr, typeModifiers, typeParams) {\n  return new ExpressionType(expr, typeModifiers, typeParams);\n}\nfunction transplantedType(type, typeModifiers) {\n  return new TransplantedType(type, typeModifiers);\n}\nfunction typeofExpr(expr) {\n  return new TypeofExpr(expr);\n}\nfunction literalArr(values, type, sourceSpan) {\n  return new LiteralArrayExpr(values, type, sourceSpan);\n}\nfunction literalMap(values, type = null) {\n  return new LiteralMapExpr(values.map(e => new LiteralMapEntry(e.key, e.value, e.quoted)), type, null);\n}\nfunction unary(operator, expr, type, sourceSpan) {\n  return new UnaryOperatorExpr(operator, expr, type, sourceSpan);\n}\nfunction not(expr, sourceSpan) {\n  return new NotExpr(expr, sourceSpan);\n}\nfunction fn(params, body, type, sourceSpan, name) {\n  return new FunctionExpr(params, body, type, sourceSpan, name);\n}\nfunction arrowFn(params, body, type, sourceSpan) {\n  return new ArrowFunctionExpr(params, body, type, sourceSpan);\n}\nfunction ifStmt(condition, thenClause, elseClause, sourceSpan, leadingComments) {\n  return new IfStmt(condition, thenClause, elseClause, sourceSpan, leadingComments);\n}\nfunction taggedTemplate(tag, template, type, sourceSpan) {\n  return new TaggedTemplateExpr(tag, template, type, sourceSpan);\n}\nfunction literal(value, type, sourceSpan) {\n  return new LiteralExpr(value, type, sourceSpan);\n}\nfunction localizedString(metaBlock, messageParts, placeholderNames, expressions, sourceSpan) {\n  return new LocalizedString(metaBlock, messageParts, placeholderNames, expressions, sourceSpan);\n}\nfunction isNull(exp) {\n  return exp instanceof LiteralExpr && exp.value === null;\n}\n/*\n * Serializes a `Tag` into a string.\n * Returns a string like \" @foo {bar} baz\" (note the leading whitespace before `@foo`).\n */\nfunction tagToString(tag) {\n  let out = '';\n  if (tag.tagName) {\n    out += ` @${tag.tagName}`;\n  }\n  if (tag.text) {\n    if (tag.text.match(/\\/\\*|\\*\\//)) {\n      throw new Error('JSDoc text cannot contain \"/*\" and \"*/\"');\n    }\n    out += ' ' + tag.text.replace(/@/g, '\\\\@');\n  }\n  return out;\n}\nfunction serializeTags(tags) {\n  if (tags.length === 0) return '';\n  if (tags.length === 1 && tags[0].tagName && !tags[0].text) {\n    // The JSDOC comment is a single simple tag: e.g `/** @tagname */`.\n    return `*${tagToString(tags[0])} `;\n  }\n  let out = '*\\n';\n  for (const tag of tags) {\n    out += ' *';\n    // If the tagToString is multi-line, insert \" * \" prefixes on lines.\n    out += tagToString(tag).replace(/\\n/g, '\\n * ');\n    out += '\\n';\n  }\n  out += ' ';\n  return out;\n}\nvar output_ast = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  get TypeModifier() {\n    return TypeModifier;\n  },\n  Type: Type,\n  get BuiltinTypeName() {\n    return BuiltinTypeName;\n  },\n  BuiltinType: BuiltinType,\n  ExpressionType: ExpressionType,\n  ArrayType: ArrayType,\n  MapType: MapType,\n  TransplantedType: TransplantedType,\n  DYNAMIC_TYPE: DYNAMIC_TYPE,\n  INFERRED_TYPE: INFERRED_TYPE,\n  BOOL_TYPE: BOOL_TYPE,\n  INT_TYPE: INT_TYPE,\n  NUMBER_TYPE: NUMBER_TYPE,\n  STRING_TYPE: STRING_TYPE,\n  FUNCTION_TYPE: FUNCTION_TYPE,\n  NONE_TYPE: NONE_TYPE,\n  get UnaryOperator() {\n    return UnaryOperator;\n  },\n  get BinaryOperator() {\n    return BinaryOperator;\n  },\n  nullSafeIsEquivalent: nullSafeIsEquivalent,\n  areAllEquivalent: areAllEquivalent,\n  Expression: Expression,\n  ReadVarExpr: ReadVarExpr,\n  TypeofExpr: TypeofExpr,\n  WrappedNodeExpr: WrappedNodeExpr,\n  WriteVarExpr: WriteVarExpr,\n  WriteKeyExpr: WriteKeyExpr,\n  WritePropExpr: WritePropExpr,\n  InvokeFunctionExpr: InvokeFunctionExpr,\n  TaggedTemplateExpr: TaggedTemplateExpr,\n  InstantiateExpr: InstantiateExpr,\n  LiteralExpr: LiteralExpr,\n  TemplateLiteral: TemplateLiteral,\n  TemplateLiteralElement: TemplateLiteralElement,\n  LiteralPiece: LiteralPiece,\n  PlaceholderPiece: PlaceholderPiece,\n  LocalizedString: LocalizedString,\n  ExternalExpr: ExternalExpr,\n  ExternalReference: ExternalReference,\n  ConditionalExpr: ConditionalExpr,\n  DynamicImportExpr: DynamicImportExpr,\n  NotExpr: NotExpr,\n  FnParam: FnParam,\n  FunctionExpr: FunctionExpr,\n  ArrowFunctionExpr: ArrowFunctionExpr,\n  UnaryOperatorExpr: UnaryOperatorExpr,\n  BinaryOperatorExpr: BinaryOperatorExpr,\n  ReadPropExpr: ReadPropExpr,\n  ReadKeyExpr: ReadKeyExpr,\n  LiteralArrayExpr: LiteralArrayExpr,\n  LiteralMapEntry: LiteralMapEntry,\n  LiteralMapExpr: LiteralMapExpr,\n  CommaExpr: CommaExpr,\n  NULL_EXPR: NULL_EXPR,\n  TYPED_NULL_EXPR: TYPED_NULL_EXPR,\n  get StmtModifier() {\n    return StmtModifier;\n  },\n  LeadingComment: LeadingComment,\n  JSDocComment: JSDocComment,\n  Statement: Statement,\n  DeclareVarStmt: DeclareVarStmt,\n  DeclareFunctionStmt: DeclareFunctionStmt,\n  ExpressionStatement: ExpressionStatement,\n  ReturnStatement: ReturnStatement,\n  IfStmt: IfStmt,\n  RecursiveAstVisitor: RecursiveAstVisitor$1,\n  leadingComment: leadingComment,\n  jsDocComment: jsDocComment,\n  variable: variable,\n  importExpr: importExpr,\n  importType: importType,\n  expressionType: expressionType,\n  transplantedType: transplantedType,\n  typeofExpr: typeofExpr,\n  literalArr: literalArr,\n  literalMap: literalMap,\n  unary: unary,\n  not: not,\n  fn: fn,\n  arrowFn: arrowFn,\n  ifStmt: ifStmt,\n  taggedTemplate: taggedTemplate,\n  literal: literal,\n  localizedString: localizedString,\n  isNull: isNull\n});\nconst CONSTANT_PREFIX = '_c';\n/**\n * `ConstantPool` tries to reuse literal factories when two or more literals are identical.\n * We determine whether literals are identical by creating a key out of their AST using the\n * `KeyVisitor`. This constant is used to replace dynamic expressions which can't be safely\n * converted into a key. E.g. given an expression `{foo: bar()}`, since we don't know what\n * the result of `bar` will be, we create a key that looks like `{foo: <unknown>}`. Note\n * that we use a variable, rather than something like `null` in order to avoid collisions.\n */\nconst UNKNOWN_VALUE_KEY = variable('<unknown>');\n/**\n * Context to use when producing a key.\n *\n * This ensures we see the constant not the reference variable when producing\n * a key.\n */\nconst KEY_CONTEXT = {};\n/**\n * Generally all primitive values are excluded from the `ConstantPool`, but there is an exclusion\n * for strings that reach a certain length threshold. This constant defines the length threshold for\n * strings.\n */\nconst POOL_INCLUSION_LENGTH_THRESHOLD_FOR_STRINGS = 50;\n/**\n * A node that is a place-holder that allows the node to be replaced when the actual\n * node is known.\n *\n * This allows the constant pool to change an expression from a direct reference to\n * a constant to a shared constant. It returns a fix-up node that is later allowed to\n * change the referenced expression.\n */\nclass FixupExpression extends Expression {\n  constructor(resolved) {\n    super(resolved.type);\n    this.resolved = resolved;\n    this.shared = false;\n    this.original = resolved;\n  }\n  visitExpression(visitor, context) {\n    if (context === KEY_CONTEXT) {\n      // When producing a key we want to traverse the constant not the\n      // variable used to refer to it.\n      return this.original.visitExpression(visitor, context);\n    } else {\n      return this.resolved.visitExpression(visitor, context);\n    }\n  }\n  isEquivalent(e) {\n    return e instanceof FixupExpression && this.resolved.isEquivalent(e.resolved);\n  }\n  isConstant() {\n    return true;\n  }\n  clone() {\n    throw new Error(`Not supported.`);\n  }\n  fixup(expression) {\n    this.resolved = expression;\n    this.shared = true;\n  }\n}\n/**\n * A constant pool allows a code emitter to share constant in an output context.\n *\n * The constant pool also supports sharing access to ivy definitions references.\n */\nclass ConstantPool {\n  constructor(isClosureCompilerEnabled = false) {\n    this.isClosureCompilerEnabled = isClosureCompilerEnabled;\n    this.statements = [];\n    this.literals = new Map();\n    this.literalFactories = new Map();\n    this.sharedConstants = new Map();\n    /**\n     * Constant pool also tracks claimed names from {@link uniqueName}.\n     * This is useful to avoid collisions if variables are intended to be\n     * named a certain way- but may conflict. We wouldn't want to always suffix\n     * them with unique numbers.\n     */\n    this._claimedNames = new Map();\n    this.nextNameIndex = 0;\n  }\n  getConstLiteral(literal, forceShared) {\n    if (literal instanceof LiteralExpr && !isLongStringLiteral(literal) || literal instanceof FixupExpression) {\n      // Do no put simple literals into the constant pool or try to produce a constant for a\n      // reference to a constant.\n      return literal;\n    }\n    const key = GenericKeyFn.INSTANCE.keyOf(literal);\n    let fixup = this.literals.get(key);\n    let newValue = false;\n    if (!fixup) {\n      fixup = new FixupExpression(literal);\n      this.literals.set(key, fixup);\n      newValue = true;\n    }\n    if (!newValue && !fixup.shared || newValue && forceShared) {\n      // Replace the expression with a variable\n      const name = this.freshName();\n      let definition;\n      let usage;\n      if (this.isClosureCompilerEnabled && isLongStringLiteral(literal)) {\n        // For string literals, Closure will **always** inline the string at\n        // **all** usages, duplicating it each time. For large strings, this\n        // unnecessarily bloats bundle size. To work around this restriction, we\n        // wrap the string in a function, and call that function for each usage.\n        // This tricks Closure into using inline logic for functions instead of\n        // string literals. Function calls are only inlined if the body is small\n        // enough to be worth it. By doing this, very large strings will be\n        // shared across multiple usages, rather than duplicating the string at\n        // each usage site.\n        //\n        // const myStr = function() { return \"very very very long string\"; };\n        // const usage1 = myStr();\n        // const usage2 = myStr();\n        definition = variable(name).set(new FunctionExpr([],\n        // Params.\n        [\n        // Statements.\n        new ReturnStatement(literal)]));\n        usage = variable(name).callFn([]);\n      } else {\n        // Just declare and use the variable directly, without a function call\n        // indirection. This saves a few bytes and avoids an unnecessary call.\n        definition = variable(name).set(literal);\n        usage = variable(name);\n      }\n      this.statements.push(definition.toDeclStmt(INFERRED_TYPE, StmtModifier.Final));\n      fixup.fixup(usage);\n    }\n    return fixup;\n  }\n  getSharedConstant(def, expr) {\n    const key = def.keyOf(expr);\n    if (!this.sharedConstants.has(key)) {\n      const id = this.freshName();\n      this.sharedConstants.set(key, variable(id));\n      this.statements.push(def.toSharedConstantDeclaration(id, expr));\n    }\n    return this.sharedConstants.get(key);\n  }\n  getLiteralFactory(literal) {\n    // Create a pure function that builds an array of a mix of constant and variable expressions\n    if (literal instanceof LiteralArrayExpr) {\n      const argumentsForKey = literal.entries.map(e => e.isConstant() ? e : UNKNOWN_VALUE_KEY);\n      const key = GenericKeyFn.INSTANCE.keyOf(literalArr(argumentsForKey));\n      return this._getLiteralFactory(key, literal.entries, entries => literalArr(entries));\n    } else {\n      const expressionForKey = literalMap(literal.entries.map(e => ({\n        key: e.key,\n        value: e.value.isConstant() ? e.value : UNKNOWN_VALUE_KEY,\n        quoted: e.quoted\n      })));\n      const key = GenericKeyFn.INSTANCE.keyOf(expressionForKey);\n      return this._getLiteralFactory(key, literal.entries.map(e => e.value), entries => literalMap(entries.map((value, index) => ({\n        key: literal.entries[index].key,\n        value,\n        quoted: literal.entries[index].quoted\n      }))));\n    }\n  }\n  // TODO: useUniqueName(false) is necessary for naming compatibility with\n  // TemplateDefinitionBuilder, but should be removed once Template Pipeline is the default.\n  getSharedFunctionReference(fn, prefix, useUniqueName = true) {\n    const isArrow = fn instanceof ArrowFunctionExpr;\n    for (const current of this.statements) {\n      // Arrow functions are saved as variables so we check if the\n      // value of the variable is the same as the arrow function.\n      if (isArrow && current instanceof DeclareVarStmt && current.value?.isEquivalent(fn)) {\n        return variable(current.name);\n      }\n      // Function declarations are saved as function statements\n      // so we compare them directly to the passed-in function.\n      if (!isArrow && current instanceof DeclareFunctionStmt && fn instanceof FunctionExpr && fn.isEquivalent(current)) {\n        return variable(current.name);\n      }\n    }\n    // Otherwise declare the function.\n    const name = useUniqueName ? this.uniqueName(prefix) : prefix;\n    this.statements.push(fn instanceof FunctionExpr ? fn.toDeclStmt(name, StmtModifier.Final) : new DeclareVarStmt(name, fn, INFERRED_TYPE, StmtModifier.Final, fn.sourceSpan));\n    return variable(name);\n  }\n  _getLiteralFactory(key, values, resultMap) {\n    let literalFactory = this.literalFactories.get(key);\n    const literalFactoryArguments = values.filter(e => !e.isConstant());\n    if (!literalFactory) {\n      const resultExpressions = values.map((e, index) => e.isConstant() ? this.getConstLiteral(e, true) : variable(`a${index}`));\n      const parameters = resultExpressions.filter(isVariable).map(e => new FnParam(e.name, DYNAMIC_TYPE));\n      const pureFunctionDeclaration = arrowFn(parameters, resultMap(resultExpressions), INFERRED_TYPE);\n      const name = this.freshName();\n      this.statements.push(variable(name).set(pureFunctionDeclaration).toDeclStmt(INFERRED_TYPE, StmtModifier.Final));\n      literalFactory = variable(name);\n      this.literalFactories.set(key, literalFactory);\n    }\n    return {\n      literalFactory,\n      literalFactoryArguments\n    };\n  }\n  /**\n   * Produce a unique name in the context of this pool.\n   *\n   * The name might be unique among different prefixes if any of the prefixes end in\n   * a digit so the prefix should be a constant string (not based on user input) and\n   * must not end in a digit.\n   */\n  uniqueName(name, alwaysIncludeSuffix = true) {\n    const count = this._claimedNames.get(name) ?? 0;\n    const result = count === 0 && !alwaysIncludeSuffix ? `${name}` : `${name}${count}`;\n    this._claimedNames.set(name, count + 1);\n    return result;\n  }\n  freshName() {\n    return this.uniqueName(CONSTANT_PREFIX);\n  }\n}\nclass GenericKeyFn {\n  static {\n    this.INSTANCE = new GenericKeyFn();\n  }\n  keyOf(expr) {\n    if (expr instanceof LiteralExpr && typeof expr.value === 'string') {\n      return `\"${expr.value}\"`;\n    } else if (expr instanceof LiteralExpr) {\n      return String(expr.value);\n    } else if (expr instanceof LiteralArrayExpr) {\n      const entries = [];\n      for (const entry of expr.entries) {\n        entries.push(this.keyOf(entry));\n      }\n      return `[${entries.join(',')}]`;\n    } else if (expr instanceof LiteralMapExpr) {\n      const entries = [];\n      for (const entry of expr.entries) {\n        let key = entry.key;\n        if (entry.quoted) {\n          key = `\"${key}\"`;\n        }\n        entries.push(key + ':' + this.keyOf(entry.value));\n      }\n      return `{${entries.join(',')}}`;\n    } else if (expr instanceof ExternalExpr) {\n      return `import(\"${expr.value.moduleName}\", ${expr.value.name})`;\n    } else if (expr instanceof ReadVarExpr) {\n      return `read(${expr.name})`;\n    } else if (expr instanceof TypeofExpr) {\n      return `typeof(${this.keyOf(expr.expr)})`;\n    } else {\n      throw new Error(`${this.constructor.name} does not handle expressions of type ${expr.constructor.name}`);\n    }\n  }\n}\nfunction isVariable(e) {\n  return e instanceof ReadVarExpr;\n}\nfunction isLongStringLiteral(expr) {\n  return expr instanceof LiteralExpr && typeof expr.value === 'string' && expr.value.length >= POOL_INCLUSION_LENGTH_THRESHOLD_FOR_STRINGS;\n}\nconst CORE = '@angular/core';\nclass Identifiers {\n  /* Methods */\n  static {\n    this.NEW_METHOD = 'factory';\n  }\n  static {\n    this.TRANSFORM_METHOD = 'transform';\n  }\n  static {\n    this.PATCH_DEPS = 'patchedDeps';\n  }\n  static {\n    this.core = {\n      name: null,\n      moduleName: CORE\n    };\n  }\n  /* Instructions */\n  static {\n    this.namespaceHTML = {\n      name: 'ɵɵnamespaceHTML',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.namespaceMathML = {\n      name: 'ɵɵnamespaceMathML',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.namespaceSVG = {\n      name: 'ɵɵnamespaceSVG',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.element = {\n      name: 'ɵɵelement',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.elementStart = {\n      name: 'ɵɵelementStart',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.elementEnd = {\n      name: 'ɵɵelementEnd',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.advance = {\n      name: 'ɵɵadvance',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.syntheticHostProperty = {\n      name: 'ɵɵsyntheticHostProperty',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.syntheticHostListener = {\n      name: 'ɵɵsyntheticHostListener',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.attribute = {\n      name: 'ɵɵattribute',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.attributeInterpolate1 = {\n      name: 'ɵɵattributeInterpolate1',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.attributeInterpolate2 = {\n      name: 'ɵɵattributeInterpolate2',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.attributeInterpolate3 = {\n      name: 'ɵɵattributeInterpolate3',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.attributeInterpolate4 = {\n      name: 'ɵɵattributeInterpolate4',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.attributeInterpolate5 = {\n      name: 'ɵɵattributeInterpolate5',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.attributeInterpolate6 = {\n      name: 'ɵɵattributeInterpolate6',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.attributeInterpolate7 = {\n      name: 'ɵɵattributeInterpolate7',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.attributeInterpolate8 = {\n      name: 'ɵɵattributeInterpolate8',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.attributeInterpolateV = {\n      name: 'ɵɵattributeInterpolateV',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.classProp = {\n      name: 'ɵɵclassProp',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.elementContainerStart = {\n      name: 'ɵɵelementContainerStart',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.elementContainerEnd = {\n      name: 'ɵɵelementContainerEnd',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.elementContainer = {\n      name: 'ɵɵelementContainer',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.styleMap = {\n      name: 'ɵɵstyleMap',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.styleMapInterpolate1 = {\n      name: 'ɵɵstyleMapInterpolate1',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.styleMapInterpolate2 = {\n      name: 'ɵɵstyleMapInterpolate2',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.styleMapInterpolate3 = {\n      name: 'ɵɵstyleMapInterpolate3',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.styleMapInterpolate4 = {\n      name: 'ɵɵstyleMapInterpolate4',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.styleMapInterpolate5 = {\n      name: 'ɵɵstyleMapInterpolate5',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.styleMapInterpolate6 = {\n      name: 'ɵɵstyleMapInterpolate6',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.styleMapInterpolate7 = {\n      name: 'ɵɵstyleMapInterpolate7',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.styleMapInterpolate8 = {\n      name: 'ɵɵstyleMapInterpolate8',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.styleMapInterpolateV = {\n      name: 'ɵɵstyleMapInterpolateV',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.classMap = {\n      name: 'ɵɵclassMap',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.classMapInterpolate1 = {\n      name: 'ɵɵclassMapInterpolate1',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.classMapInterpolate2 = {\n      name: 'ɵɵclassMapInterpolate2',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.classMapInterpolate3 = {\n      name: 'ɵɵclassMapInterpolate3',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.classMapInterpolate4 = {\n      name: 'ɵɵclassMapInterpolate4',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.classMapInterpolate5 = {\n      name: 'ɵɵclassMapInterpolate5',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.classMapInterpolate6 = {\n      name: 'ɵɵclassMapInterpolate6',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.classMapInterpolate7 = {\n      name: 'ɵɵclassMapInterpolate7',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.classMapInterpolate8 = {\n      name: 'ɵɵclassMapInterpolate8',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.classMapInterpolateV = {\n      name: 'ɵɵclassMapInterpolateV',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.styleProp = {\n      name: 'ɵɵstyleProp',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.stylePropInterpolate1 = {\n      name: 'ɵɵstylePropInterpolate1',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.stylePropInterpolate2 = {\n      name: 'ɵɵstylePropInterpolate2',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.stylePropInterpolate3 = {\n      name: 'ɵɵstylePropInterpolate3',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.stylePropInterpolate4 = {\n      name: 'ɵɵstylePropInterpolate4',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.stylePropInterpolate5 = {\n      name: 'ɵɵstylePropInterpolate5',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.stylePropInterpolate6 = {\n      name: 'ɵɵstylePropInterpolate6',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.stylePropInterpolate7 = {\n      name: 'ɵɵstylePropInterpolate7',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.stylePropInterpolate8 = {\n      name: 'ɵɵstylePropInterpolate8',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.stylePropInterpolateV = {\n      name: 'ɵɵstylePropInterpolateV',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.nextContext = {\n      name: 'ɵɵnextContext',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.resetView = {\n      name: 'ɵɵresetView',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.templateCreate = {\n      name: 'ɵɵtemplate',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.defer = {\n      name: 'ɵɵdefer',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.deferWhen = {\n      name: 'ɵɵdeferWhen',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.deferOnIdle = {\n      name: 'ɵɵdeferOnIdle',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.deferOnImmediate = {\n      name: 'ɵɵdeferOnImmediate',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.deferOnTimer = {\n      name: 'ɵɵdeferOnTimer',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.deferOnHover = {\n      name: 'ɵɵdeferOnHover',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.deferOnInteraction = {\n      name: 'ɵɵdeferOnInteraction',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.deferOnViewport = {\n      name: 'ɵɵdeferOnViewport',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.deferPrefetchWhen = {\n      name: 'ɵɵdeferPrefetchWhen',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.deferPrefetchOnIdle = {\n      name: 'ɵɵdeferPrefetchOnIdle',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.deferPrefetchOnImmediate = {\n      name: 'ɵɵdeferPrefetchOnImmediate',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.deferPrefetchOnTimer = {\n      name: 'ɵɵdeferPrefetchOnTimer',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.deferPrefetchOnHover = {\n      name: 'ɵɵdeferPrefetchOnHover',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.deferPrefetchOnInteraction = {\n      name: 'ɵɵdeferPrefetchOnInteraction',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.deferPrefetchOnViewport = {\n      name: 'ɵɵdeferPrefetchOnViewport',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.deferEnableTimerScheduling = {\n      name: 'ɵɵdeferEnableTimerScheduling',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.conditional = {\n      name: 'ɵɵconditional',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.repeater = {\n      name: 'ɵɵrepeater',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.repeaterCreate = {\n      name: 'ɵɵrepeaterCreate',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.repeaterTrackByIndex = {\n      name: 'ɵɵrepeaterTrackByIndex',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.repeaterTrackByIdentity = {\n      name: 'ɵɵrepeaterTrackByIdentity',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.componentInstance = {\n      name: 'ɵɵcomponentInstance',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.text = {\n      name: 'ɵɵtext',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.enableBindings = {\n      name: 'ɵɵenableBindings',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.disableBindings = {\n      name: 'ɵɵdisableBindings',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.getCurrentView = {\n      name: 'ɵɵgetCurrentView',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.textInterpolate = {\n      name: 'ɵɵtextInterpolate',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.textInterpolate1 = {\n      name: 'ɵɵtextInterpolate1',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.textInterpolate2 = {\n      name: 'ɵɵtextInterpolate2',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.textInterpolate3 = {\n      name: 'ɵɵtextInterpolate3',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.textInterpolate4 = {\n      name: 'ɵɵtextInterpolate4',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.textInterpolate5 = {\n      name: 'ɵɵtextInterpolate5',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.textInterpolate6 = {\n      name: 'ɵɵtextInterpolate6',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.textInterpolate7 = {\n      name: 'ɵɵtextInterpolate7',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.textInterpolate8 = {\n      name: 'ɵɵtextInterpolate8',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.textInterpolateV = {\n      name: 'ɵɵtextInterpolateV',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.restoreView = {\n      name: 'ɵɵrestoreView',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.pureFunction0 = {\n      name: 'ɵɵpureFunction0',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.pureFunction1 = {\n      name: 'ɵɵpureFunction1',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.pureFunction2 = {\n      name: 'ɵɵpureFunction2',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.pureFunction3 = {\n      name: 'ɵɵpureFunction3',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.pureFunction4 = {\n      name: 'ɵɵpureFunction4',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.pureFunction5 = {\n      name: 'ɵɵpureFunction5',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.pureFunction6 = {\n      name: 'ɵɵpureFunction6',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.pureFunction7 = {\n      name: 'ɵɵpureFunction7',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.pureFunction8 = {\n      name: 'ɵɵpureFunction8',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.pureFunctionV = {\n      name: 'ɵɵpureFunctionV',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.pipeBind1 = {\n      name: 'ɵɵpipeBind1',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.pipeBind2 = {\n      name: 'ɵɵpipeBind2',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.pipeBind3 = {\n      name: 'ɵɵpipeBind3',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.pipeBind4 = {\n      name: 'ɵɵpipeBind4',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.pipeBindV = {\n      name: 'ɵɵpipeBindV',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.hostProperty = {\n      name: 'ɵɵhostProperty',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.property = {\n      name: 'ɵɵproperty',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.propertyInterpolate = {\n      name: 'ɵɵpropertyInterpolate',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.propertyInterpolate1 = {\n      name: 'ɵɵpropertyInterpolate1',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.propertyInterpolate2 = {\n      name: 'ɵɵpropertyInterpolate2',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.propertyInterpolate3 = {\n      name: 'ɵɵpropertyInterpolate3',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.propertyInterpolate4 = {\n      name: 'ɵɵpropertyInterpolate4',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.propertyInterpolate5 = {\n      name: 'ɵɵpropertyInterpolate5',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.propertyInterpolate6 = {\n      name: 'ɵɵpropertyInterpolate6',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.propertyInterpolate7 = {\n      name: 'ɵɵpropertyInterpolate7',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.propertyInterpolate8 = {\n      name: 'ɵɵpropertyInterpolate8',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.propertyInterpolateV = {\n      name: 'ɵɵpropertyInterpolateV',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.i18n = {\n      name: 'ɵɵi18n',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.i18nAttributes = {\n      name: 'ɵɵi18nAttributes',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.i18nExp = {\n      name: 'ɵɵi18nExp',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.i18nStart = {\n      name: 'ɵɵi18nStart',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.i18nEnd = {\n      name: 'ɵɵi18nEnd',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.i18nApply = {\n      name: 'ɵɵi18nApply',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.i18nPostprocess = {\n      name: 'ɵɵi18nPostprocess',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.pipe = {\n      name: 'ɵɵpipe',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.projection = {\n      name: 'ɵɵprojection',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.projectionDef = {\n      name: 'ɵɵprojectionDef',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.reference = {\n      name: 'ɵɵreference',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.inject = {\n      name: 'ɵɵinject',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.injectAttribute = {\n      name: 'ɵɵinjectAttribute',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.directiveInject = {\n      name: 'ɵɵdirectiveInject',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.invalidFactory = {\n      name: 'ɵɵinvalidFactory',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.invalidFactoryDep = {\n      name: 'ɵɵinvalidFactoryDep',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.templateRefExtractor = {\n      name: 'ɵɵtemplateRefExtractor',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.forwardRef = {\n      name: 'forwardRef',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.resolveForwardRef = {\n      name: 'resolveForwardRef',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.ɵɵdefineInjectable = {\n      name: 'ɵɵdefineInjectable',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.declareInjectable = {\n      name: 'ɵɵngDeclareInjectable',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.InjectableDeclaration = {\n      name: 'ɵɵInjectableDeclaration',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.resolveWindow = {\n      name: 'ɵɵresolveWindow',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.resolveDocument = {\n      name: 'ɵɵresolveDocument',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.resolveBody = {\n      name: 'ɵɵresolveBody',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.getComponentDepsFactory = {\n      name: 'ɵɵgetComponentDepsFactory',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.defineComponent = {\n      name: 'ɵɵdefineComponent',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.declareComponent = {\n      name: 'ɵɵngDeclareComponent',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.setComponentScope = {\n      name: 'ɵɵsetComponentScope',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.ChangeDetectionStrategy = {\n      name: 'ChangeDetectionStrategy',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.ViewEncapsulation = {\n      name: 'ViewEncapsulation',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.ComponentDeclaration = {\n      name: 'ɵɵComponentDeclaration',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.FactoryDeclaration = {\n      name: 'ɵɵFactoryDeclaration',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.declareFactory = {\n      name: 'ɵɵngDeclareFactory',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.FactoryTarget = {\n      name: 'ɵɵFactoryTarget',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.defineDirective = {\n      name: 'ɵɵdefineDirective',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.declareDirective = {\n      name: 'ɵɵngDeclareDirective',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.DirectiveDeclaration = {\n      name: 'ɵɵDirectiveDeclaration',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.InjectorDef = {\n      name: 'ɵɵInjectorDef',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.InjectorDeclaration = {\n      name: 'ɵɵInjectorDeclaration',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.defineInjector = {\n      name: 'ɵɵdefineInjector',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.declareInjector = {\n      name: 'ɵɵngDeclareInjector',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.NgModuleDeclaration = {\n      name: 'ɵɵNgModuleDeclaration',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.ModuleWithProviders = {\n      name: 'ModuleWithProviders',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.defineNgModule = {\n      name: 'ɵɵdefineNgModule',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.declareNgModule = {\n      name: 'ɵɵngDeclareNgModule',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.setNgModuleScope = {\n      name: 'ɵɵsetNgModuleScope',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.registerNgModuleType = {\n      name: 'ɵɵregisterNgModuleType',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.PipeDeclaration = {\n      name: 'ɵɵPipeDeclaration',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.definePipe = {\n      name: 'ɵɵdefinePipe',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.declarePipe = {\n      name: 'ɵɵngDeclarePipe',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.declareClassMetadata = {\n      name: 'ɵɵngDeclareClassMetadata',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.declareClassMetadataAsync = {\n      name: 'ɵɵngDeclareClassMetadataAsync',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.setClassMetadata = {\n      name: 'ɵsetClassMetadata',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.setClassMetadataAsync = {\n      name: 'ɵsetClassMetadataAsync',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.setClassDebugInfo = {\n      name: 'ɵsetClassDebugInfo',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.queryRefresh = {\n      name: 'ɵɵqueryRefresh',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.viewQuery = {\n      name: 'ɵɵviewQuery',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.loadQuery = {\n      name: 'ɵɵloadQuery',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.contentQuery = {\n      name: 'ɵɵcontentQuery',\n      moduleName: CORE\n    };\n  }\n  // Signal queries\n  static {\n    this.viewQuerySignal = {\n      name: 'ɵɵviewQuerySignal',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.contentQuerySignal = {\n      name: 'ɵɵcontentQuerySignal',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.queryAdvance = {\n      name: 'ɵɵqueryAdvance',\n      moduleName: CORE\n    };\n  }\n  // Two-way bindings\n  static {\n    this.twoWayProperty = {\n      name: 'ɵɵtwoWayProperty',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.twoWayBindingSet = {\n      name: 'ɵɵtwoWayBindingSet',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.twoWayListener = {\n      name: 'ɵɵtwoWayListener',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.declareLet = {\n      name: 'ɵɵdeclareLet',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.storeLet = {\n      name: 'ɵɵstoreLet',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.readContextLet = {\n      name: 'ɵɵreadContextLet',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.NgOnChangesFeature = {\n      name: 'ɵɵNgOnChangesFeature',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.InheritDefinitionFeature = {\n      name: 'ɵɵInheritDefinitionFeature',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.CopyDefinitionFeature = {\n      name: 'ɵɵCopyDefinitionFeature',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.StandaloneFeature = {\n      name: 'ɵɵStandaloneFeature',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.ProvidersFeature = {\n      name: 'ɵɵProvidersFeature',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.HostDirectivesFeature = {\n      name: 'ɵɵHostDirectivesFeature',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.InputTransformsFeatureFeature = {\n      name: 'ɵɵInputTransformsFeature',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.listener = {\n      name: 'ɵɵlistener',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.getInheritedFactory = {\n      name: 'ɵɵgetInheritedFactory',\n      moduleName: CORE\n    };\n  }\n  // sanitization-related functions\n  static {\n    this.sanitizeHtml = {\n      name: 'ɵɵsanitizeHtml',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.sanitizeStyle = {\n      name: 'ɵɵsanitizeStyle',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.sanitizeResourceUrl = {\n      name: 'ɵɵsanitizeResourceUrl',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.sanitizeScript = {\n      name: 'ɵɵsanitizeScript',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.sanitizeUrl = {\n      name: 'ɵɵsanitizeUrl',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.sanitizeUrlOrResourceUrl = {\n      name: 'ɵɵsanitizeUrlOrResourceUrl',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.trustConstantHtml = {\n      name: 'ɵɵtrustConstantHtml',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.trustConstantResourceUrl = {\n      name: 'ɵɵtrustConstantResourceUrl',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.validateIframeAttribute = {\n      name: 'ɵɵvalidateIframeAttribute',\n      moduleName: CORE\n    };\n  }\n  // type-checking\n  static {\n    this.InputSignalBrandWriteType = {\n      name: 'ɵINPUT_SIGNAL_BRAND_WRITE_TYPE',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.UnwrapDirectiveSignalInputs = {\n      name: 'ɵUnwrapDirectiveSignalInputs',\n      moduleName: CORE\n    };\n  }\n  static {\n    this.unwrapWritableSignal = {\n      name: 'ɵunwrapWritableSignal',\n      moduleName: CORE\n    };\n  }\n}\nconst DASH_CASE_REGEXP = /-+([a-z0-9])/g;\nfunction dashCaseToCamelCase(input) {\n  return input.replace(DASH_CASE_REGEXP, (...m) => m[1].toUpperCase());\n}\nfunction splitAtColon(input, defaultValues) {\n  return _splitAt(input, ':', defaultValues);\n}\nfunction splitAtPeriod(input, defaultValues) {\n  return _splitAt(input, '.', defaultValues);\n}\nfunction _splitAt(input, character, defaultValues) {\n  const characterIndex = input.indexOf(character);\n  if (characterIndex == -1) return defaultValues;\n  return [input.slice(0, characterIndex).trim(), input.slice(characterIndex + 1).trim()];\n}\nfunction noUndefined(val) {\n  return val === undefined ? null : val;\n}\nfunction error(msg) {\n  throw new Error(`Internal Error: ${msg}`);\n}\n// Escape characters that have a special meaning in Regular Expressions\nfunction escapeRegExp(s) {\n  return s.replace(/([.*+?^=!:${}()|[\\]\\/\\\\])/g, '\\\\$1');\n}\nfunction utf8Encode(str) {\n  let encoded = [];\n  for (let index = 0; index < str.length; index++) {\n    let codePoint = str.charCodeAt(index);\n    // decode surrogate\n    // see https://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n    if (codePoint >= 0xd800 && codePoint <= 0xdbff && str.length > index + 1) {\n      const low = str.charCodeAt(index + 1);\n      if (low >= 0xdc00 && low <= 0xdfff) {\n        index++;\n        codePoint = (codePoint - 0xd800 << 10) + low - 0xdc00 + 0x10000;\n      }\n    }\n    if (codePoint <= 0x7f) {\n      encoded.push(codePoint);\n    } else if (codePoint <= 0x7ff) {\n      encoded.push(codePoint >> 6 & 0x1f | 0xc0, codePoint & 0x3f | 0x80);\n    } else if (codePoint <= 0xffff) {\n      encoded.push(codePoint >> 12 | 0xe0, codePoint >> 6 & 0x3f | 0x80, codePoint & 0x3f | 0x80);\n    } else if (codePoint <= 0x1fffff) {\n      encoded.push(codePoint >> 18 & 0x07 | 0xf0, codePoint >> 12 & 0x3f | 0x80, codePoint >> 6 & 0x3f | 0x80, codePoint & 0x3f | 0x80);\n    }\n  }\n  return encoded;\n}\nfunction stringify(token) {\n  if (typeof token === 'string') {\n    return token;\n  }\n  if (Array.isArray(token)) {\n    return '[' + token.map(stringify).join(', ') + ']';\n  }\n  if (token == null) {\n    return '' + token;\n  }\n  if (token.overriddenName) {\n    return `${token.overriddenName}`;\n  }\n  if (token.name) {\n    return `${token.name}`;\n  }\n  if (!token.toString) {\n    return 'object';\n  }\n  // WARNING: do not try to `JSON.stringify(token)` here\n  // see https://github.com/angular/angular/issues/23440\n  const res = token.toString();\n  if (res == null) {\n    return '' + res;\n  }\n  const newLineIndex = res.indexOf('\\n');\n  return newLineIndex === -1 ? res : res.substring(0, newLineIndex);\n}\nclass Version {\n  constructor(full) {\n    this.full = full;\n    const splits = full.split('.');\n    this.major = splits[0];\n    this.minor = splits[1];\n    this.patch = splits.slice(2).join('.');\n  }\n}\nconst _global = globalThis;\nfunction newArray(size, value) {\n  const list = [];\n  for (let i = 0; i < size; i++) {\n    list.push(value);\n  }\n  return list;\n}\n/**\n * Partitions a given array into 2 arrays, based on a boolean value returned by the condition\n * function.\n *\n * @param arr Input array that should be partitioned\n * @param conditionFn Condition function that is called for each item in a given array and returns a\n * boolean value.\n */\nfunction partitionArray(arr, conditionFn) {\n  const truthy = [];\n  const falsy = [];\n  for (const item of arr) {\n    (conditionFn(item) ? truthy : falsy).push(item);\n  }\n  return [truthy, falsy];\n}\n\n// https://docs.google.com/document/d/1U1RGAehQwRypUTovF1KRlpiOFze0b-_2gc6fAH0KY0k/edit\nconst VERSION$1 = 3;\nconst JS_B64_PREFIX = '# sourceMappingURL=data:application/json;base64,';\nclass SourceMapGenerator {\n  constructor(file = null) {\n    this.file = file;\n    this.sourcesContent = new Map();\n    this.lines = [];\n    this.lastCol0 = 0;\n    this.hasMappings = false;\n  }\n  // The content is `null` when the content is expected to be loaded using the URL\n  addSource(url, content = null) {\n    if (!this.sourcesContent.has(url)) {\n      this.sourcesContent.set(url, content);\n    }\n    return this;\n  }\n  addLine() {\n    this.lines.push([]);\n    this.lastCol0 = 0;\n    return this;\n  }\n  addMapping(col0, sourceUrl, sourceLine0, sourceCol0) {\n    if (!this.currentLine) {\n      throw new Error(`A line must be added before mappings can be added`);\n    }\n    if (sourceUrl != null && !this.sourcesContent.has(sourceUrl)) {\n      throw new Error(`Unknown source file \"${sourceUrl}\"`);\n    }\n    if (col0 == null) {\n      throw new Error(`The column in the generated code must be provided`);\n    }\n    if (col0 < this.lastCol0) {\n      throw new Error(`Mapping should be added in output order`);\n    }\n    if (sourceUrl && (sourceLine0 == null || sourceCol0 == null)) {\n      throw new Error(`The source location must be provided when a source url is provided`);\n    }\n    this.hasMappings = true;\n    this.lastCol0 = col0;\n    this.currentLine.push({\n      col0,\n      sourceUrl,\n      sourceLine0,\n      sourceCol0\n    });\n    return this;\n  }\n  /**\n   * @internal strip this from published d.ts files due to\n   * https://github.com/microsoft/TypeScript/issues/36216\n   */\n  get currentLine() {\n    return this.lines.slice(-1)[0];\n  }\n  toJSON() {\n    if (!this.hasMappings) {\n      return null;\n    }\n    const sourcesIndex = new Map();\n    const sources = [];\n    const sourcesContent = [];\n    Array.from(this.sourcesContent.keys()).forEach((url, i) => {\n      sourcesIndex.set(url, i);\n      sources.push(url);\n      sourcesContent.push(this.sourcesContent.get(url) || null);\n    });\n    let mappings = '';\n    let lastCol0 = 0;\n    let lastSourceIndex = 0;\n    let lastSourceLine0 = 0;\n    let lastSourceCol0 = 0;\n    this.lines.forEach(segments => {\n      lastCol0 = 0;\n      mappings += segments.map(segment => {\n        // zero-based starting column of the line in the generated code\n        let segAsStr = toBase64VLQ(segment.col0 - lastCol0);\n        lastCol0 = segment.col0;\n        if (segment.sourceUrl != null) {\n          // zero-based index into the “sources” list\n          segAsStr += toBase64VLQ(sourcesIndex.get(segment.sourceUrl) - lastSourceIndex);\n          lastSourceIndex = sourcesIndex.get(segment.sourceUrl);\n          // the zero-based starting line in the original source\n          segAsStr += toBase64VLQ(segment.sourceLine0 - lastSourceLine0);\n          lastSourceLine0 = segment.sourceLine0;\n          // the zero-based starting column in the original source\n          segAsStr += toBase64VLQ(segment.sourceCol0 - lastSourceCol0);\n          lastSourceCol0 = segment.sourceCol0;\n        }\n        return segAsStr;\n      }).join(',');\n      mappings += ';';\n    });\n    mappings = mappings.slice(0, -1);\n    return {\n      'file': this.file || '',\n      'version': VERSION$1,\n      'sourceRoot': '',\n      'sources': sources,\n      'sourcesContent': sourcesContent,\n      'mappings': mappings\n    };\n  }\n  toJsComment() {\n    return this.hasMappings ? '//' + JS_B64_PREFIX + toBase64String(JSON.stringify(this, null, 0)) : '';\n  }\n}\nfunction toBase64String(value) {\n  let b64 = '';\n  const encoded = utf8Encode(value);\n  for (let i = 0; i < encoded.length;) {\n    const i1 = encoded[i++];\n    const i2 = i < encoded.length ? encoded[i++] : null;\n    const i3 = i < encoded.length ? encoded[i++] : null;\n    b64 += toBase64Digit(i1 >> 2);\n    b64 += toBase64Digit((i1 & 3) << 4 | (i2 === null ? 0 : i2 >> 4));\n    b64 += i2 === null ? '=' : toBase64Digit((i2 & 15) << 2 | (i3 === null ? 0 : i3 >> 6));\n    b64 += i2 === null || i3 === null ? '=' : toBase64Digit(i3 & 63);\n  }\n  return b64;\n}\nfunction toBase64VLQ(value) {\n  value = value < 0 ? (-value << 1) + 1 : value << 1;\n  let out = '';\n  do {\n    let digit = value & 31;\n    value = value >> 5;\n    if (value > 0) {\n      digit = digit | 32;\n    }\n    out += toBase64Digit(digit);\n  } while (value > 0);\n  return out;\n}\nconst B64_DIGITS = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\nfunction toBase64Digit(value) {\n  if (value < 0 || value >= 64) {\n    throw new Error(`Can only encode value in the range [0, 63]`);\n  }\n  return B64_DIGITS[value];\n}\nconst _SINGLE_QUOTE_ESCAPE_STRING_RE = /'|\\\\|\\n|\\r|\\$/g;\nconst _LEGAL_IDENTIFIER_RE = /^[$A-Z_][0-9A-Z_$]*$/i;\nconst _INDENT_WITH = '  ';\nclass _EmittedLine {\n  constructor(indent) {\n    this.indent = indent;\n    this.partsLength = 0;\n    this.parts = [];\n    this.srcSpans = [];\n  }\n}\nclass EmitterVisitorContext {\n  static createRoot() {\n    return new EmitterVisitorContext(0);\n  }\n  constructor(_indent) {\n    this._indent = _indent;\n    this._lines = [new _EmittedLine(_indent)];\n  }\n  /**\n   * @internal strip this from published d.ts files due to\n   * https://github.com/microsoft/TypeScript/issues/36216\n   */\n  get _currentLine() {\n    return this._lines[this._lines.length - 1];\n  }\n  println(from, lastPart = '') {\n    this.print(from || null, lastPart, true);\n  }\n  lineIsEmpty() {\n    return this._currentLine.parts.length === 0;\n  }\n  lineLength() {\n    return this._currentLine.indent * _INDENT_WITH.length + this._currentLine.partsLength;\n  }\n  print(from, part, newLine = false) {\n    if (part.length > 0) {\n      this._currentLine.parts.push(part);\n      this._currentLine.partsLength += part.length;\n      this._currentLine.srcSpans.push(from && from.sourceSpan || null);\n    }\n    if (newLine) {\n      this._lines.push(new _EmittedLine(this._indent));\n    }\n  }\n  removeEmptyLastLine() {\n    if (this.lineIsEmpty()) {\n      this._lines.pop();\n    }\n  }\n  incIndent() {\n    this._indent++;\n    if (this.lineIsEmpty()) {\n      this._currentLine.indent = this._indent;\n    }\n  }\n  decIndent() {\n    this._indent--;\n    if (this.lineIsEmpty()) {\n      this._currentLine.indent = this._indent;\n    }\n  }\n  toSource() {\n    return this.sourceLines.map(l => l.parts.length > 0 ? _createIndent(l.indent) + l.parts.join('') : '').join('\\n');\n  }\n  toSourceMapGenerator(genFilePath, startsAtLine = 0) {\n    const map = new SourceMapGenerator(genFilePath);\n    let firstOffsetMapped = false;\n    const mapFirstOffsetIfNeeded = () => {\n      if (!firstOffsetMapped) {\n        // Add a single space so that tools won't try to load the file from disk.\n        // Note: We are using virtual urls like `ng:///`, so we have to\n        // provide a content here.\n        map.addSource(genFilePath, ' ').addMapping(0, genFilePath, 0, 0);\n        firstOffsetMapped = true;\n      }\n    };\n    for (let i = 0; i < startsAtLine; i++) {\n      map.addLine();\n      mapFirstOffsetIfNeeded();\n    }\n    this.sourceLines.forEach((line, lineIdx) => {\n      map.addLine();\n      const spans = line.srcSpans;\n      const parts = line.parts;\n      let col0 = line.indent * _INDENT_WITH.length;\n      let spanIdx = 0;\n      // skip leading parts without source spans\n      while (spanIdx < spans.length && !spans[spanIdx]) {\n        col0 += parts[spanIdx].length;\n        spanIdx++;\n      }\n      if (spanIdx < spans.length && lineIdx === 0 && col0 === 0) {\n        firstOffsetMapped = true;\n      } else {\n        mapFirstOffsetIfNeeded();\n      }\n      while (spanIdx < spans.length) {\n        const span = spans[spanIdx];\n        const source = span.start.file;\n        const sourceLine = span.start.line;\n        const sourceCol = span.start.col;\n        map.addSource(source.url, source.content).addMapping(col0, source.url, sourceLine, sourceCol);\n        col0 += parts[spanIdx].length;\n        spanIdx++;\n        // assign parts without span or the same span to the previous segment\n        while (spanIdx < spans.length && (span === spans[spanIdx] || !spans[spanIdx])) {\n          col0 += parts[spanIdx].length;\n          spanIdx++;\n        }\n      }\n    });\n    return map;\n  }\n  spanOf(line, column) {\n    const emittedLine = this._lines[line];\n    if (emittedLine) {\n      let columnsLeft = column - _createIndent(emittedLine.indent).length;\n      for (let partIndex = 0; partIndex < emittedLine.parts.length; partIndex++) {\n        const part = emittedLine.parts[partIndex];\n        if (part.length > columnsLeft) {\n          return emittedLine.srcSpans[partIndex];\n        }\n        columnsLeft -= part.length;\n      }\n    }\n    return null;\n  }\n  /**\n   * @internal strip this from published d.ts files due to\n   * https://github.com/microsoft/TypeScript/issues/36216\n   */\n  get sourceLines() {\n    if (this._lines.length && this._lines[this._lines.length - 1].parts.length === 0) {\n      return this._lines.slice(0, -1);\n    }\n    return this._lines;\n  }\n}\nclass AbstractEmitterVisitor {\n  constructor(_escapeDollarInStrings) {\n    this._escapeDollarInStrings = _escapeDollarInStrings;\n  }\n  printLeadingComments(stmt, ctx) {\n    if (stmt.leadingComments === undefined) {\n      return;\n    }\n    for (const comment of stmt.leadingComments) {\n      if (comment instanceof JSDocComment) {\n        ctx.print(stmt, `/*${comment.toString()}*/`, comment.trailingNewline);\n      } else {\n        if (comment.multiline) {\n          ctx.print(stmt, `/* ${comment.text} */`, comment.trailingNewline);\n        } else {\n          comment.text.split('\\n').forEach(line => {\n            ctx.println(stmt, `// ${line}`);\n          });\n        }\n      }\n    }\n  }\n  visitExpressionStmt(stmt, ctx) {\n    this.printLeadingComments(stmt, ctx);\n    stmt.expr.visitExpression(this, ctx);\n    ctx.println(stmt, ';');\n    return null;\n  }\n  visitReturnStmt(stmt, ctx) {\n    this.printLeadingComments(stmt, ctx);\n    ctx.print(stmt, `return `);\n    stmt.value.visitExpression(this, ctx);\n    ctx.println(stmt, ';');\n    return null;\n  }\n  visitIfStmt(stmt, ctx) {\n    this.printLeadingComments(stmt, ctx);\n    ctx.print(stmt, `if (`);\n    stmt.condition.visitExpression(this, ctx);\n    ctx.print(stmt, `) {`);\n    const hasElseCase = stmt.falseCase != null && stmt.falseCase.length > 0;\n    if (stmt.trueCase.length <= 1 && !hasElseCase) {\n      ctx.print(stmt, ` `);\n      this.visitAllStatements(stmt.trueCase, ctx);\n      ctx.removeEmptyLastLine();\n      ctx.print(stmt, ` `);\n    } else {\n      ctx.println();\n      ctx.incIndent();\n      this.visitAllStatements(stmt.trueCase, ctx);\n      ctx.decIndent();\n      if (hasElseCase) {\n        ctx.println(stmt, `} else {`);\n        ctx.incIndent();\n        this.visitAllStatements(stmt.falseCase, ctx);\n        ctx.decIndent();\n      }\n    }\n    ctx.println(stmt, `}`);\n    return null;\n  }\n  visitWriteVarExpr(expr, ctx) {\n    const lineWasEmpty = ctx.lineIsEmpty();\n    if (!lineWasEmpty) {\n      ctx.print(expr, '(');\n    }\n    ctx.print(expr, `${expr.name} = `);\n    expr.value.visitExpression(this, ctx);\n    if (!lineWasEmpty) {\n      ctx.print(expr, ')');\n    }\n    return null;\n  }\n  visitWriteKeyExpr(expr, ctx) {\n    const lineWasEmpty = ctx.lineIsEmpty();\n    if (!lineWasEmpty) {\n      ctx.print(expr, '(');\n    }\n    expr.receiver.visitExpression(this, ctx);\n    ctx.print(expr, `[`);\n    expr.index.visitExpression(this, ctx);\n    ctx.print(expr, `] = `);\n    expr.value.visitExpression(this, ctx);\n    if (!lineWasEmpty) {\n      ctx.print(expr, ')');\n    }\n    return null;\n  }\n  visitWritePropExpr(expr, ctx) {\n    const lineWasEmpty = ctx.lineIsEmpty();\n    if (!lineWasEmpty) {\n      ctx.print(expr, '(');\n    }\n    expr.receiver.visitExpression(this, ctx);\n    ctx.print(expr, `.${expr.name} = `);\n    expr.value.visitExpression(this, ctx);\n    if (!lineWasEmpty) {\n      ctx.print(expr, ')');\n    }\n    return null;\n  }\n  visitInvokeFunctionExpr(expr, ctx) {\n    const shouldParenthesize = expr.fn instanceof ArrowFunctionExpr;\n    if (shouldParenthesize) {\n      ctx.print(expr.fn, '(');\n    }\n    expr.fn.visitExpression(this, ctx);\n    if (shouldParenthesize) {\n      ctx.print(expr.fn, ')');\n    }\n    ctx.print(expr, `(`);\n    this.visitAllExpressions(expr.args, ctx, ',');\n    ctx.print(expr, `)`);\n    return null;\n  }\n  visitTaggedTemplateExpr(expr, ctx) {\n    expr.tag.visitExpression(this, ctx);\n    ctx.print(expr, '`' + expr.template.elements[0].rawText);\n    for (let i = 1; i < expr.template.elements.length; i++) {\n      ctx.print(expr, '${');\n      expr.template.expressions[i - 1].visitExpression(this, ctx);\n      ctx.print(expr, `}${expr.template.elements[i].rawText}`);\n    }\n    ctx.print(expr, '`');\n    return null;\n  }\n  visitWrappedNodeExpr(ast, ctx) {\n    throw new Error('Abstract emitter cannot visit WrappedNodeExpr.');\n  }\n  visitTypeofExpr(expr, ctx) {\n    ctx.print(expr, 'typeof ');\n    expr.expr.visitExpression(this, ctx);\n  }\n  visitReadVarExpr(ast, ctx) {\n    ctx.print(ast, ast.name);\n    return null;\n  }\n  visitInstantiateExpr(ast, ctx) {\n    ctx.print(ast, `new `);\n    ast.classExpr.visitExpression(this, ctx);\n    ctx.print(ast, `(`);\n    this.visitAllExpressions(ast.args, ctx, ',');\n    ctx.print(ast, `)`);\n    return null;\n  }\n  visitLiteralExpr(ast, ctx) {\n    const value = ast.value;\n    if (typeof value === 'string') {\n      ctx.print(ast, escapeIdentifier(value, this._escapeDollarInStrings));\n    } else {\n      ctx.print(ast, `${value}`);\n    }\n    return null;\n  }\n  visitLocalizedString(ast, ctx) {\n    const head = ast.serializeI18nHead();\n    ctx.print(ast, '$localize `' + head.raw);\n    for (let i = 1; i < ast.messageParts.length; i++) {\n      ctx.print(ast, '${');\n      ast.expressions[i - 1].visitExpression(this, ctx);\n      ctx.print(ast, `}${ast.serializeI18nTemplatePart(i).raw}`);\n    }\n    ctx.print(ast, '`');\n    return null;\n  }\n  visitConditionalExpr(ast, ctx) {\n    ctx.print(ast, `(`);\n    ast.condition.visitExpression(this, ctx);\n    ctx.print(ast, '? ');\n    ast.trueCase.visitExpression(this, ctx);\n    ctx.print(ast, ': ');\n    ast.falseCase.visitExpression(this, ctx);\n    ctx.print(ast, `)`);\n    return null;\n  }\n  visitDynamicImportExpr(ast, ctx) {\n    ctx.print(ast, `import(${ast.url})`);\n  }\n  visitNotExpr(ast, ctx) {\n    ctx.print(ast, '!');\n    ast.condition.visitExpression(this, ctx);\n    return null;\n  }\n  visitUnaryOperatorExpr(ast, ctx) {\n    let opStr;\n    switch (ast.operator) {\n      case UnaryOperator.Plus:\n        opStr = '+';\n        break;\n      case UnaryOperator.Minus:\n        opStr = '-';\n        break;\n      default:\n        throw new Error(`Unknown operator ${ast.operator}`);\n    }\n    if (ast.parens) ctx.print(ast, `(`);\n    ctx.print(ast, opStr);\n    ast.expr.visitExpression(this, ctx);\n    if (ast.parens) ctx.print(ast, `)`);\n    return null;\n  }\n  visitBinaryOperatorExpr(ast, ctx) {\n    let opStr;\n    switch (ast.operator) {\n      case BinaryOperator.Equals:\n        opStr = '==';\n        break;\n      case BinaryOperator.Identical:\n        opStr = '===';\n        break;\n      case BinaryOperator.NotEquals:\n        opStr = '!=';\n        break;\n      case BinaryOperator.NotIdentical:\n        opStr = '!==';\n        break;\n      case BinaryOperator.And:\n        opStr = '&&';\n        break;\n      case BinaryOperator.BitwiseOr:\n        opStr = '|';\n        break;\n      case BinaryOperator.BitwiseAnd:\n        opStr = '&';\n        break;\n      case BinaryOperator.Or:\n        opStr = '||';\n        break;\n      case BinaryOperator.Plus:\n        opStr = '+';\n        break;\n      case BinaryOperator.Minus:\n        opStr = '-';\n        break;\n      case BinaryOperator.Divide:\n        opStr = '/';\n        break;\n      case BinaryOperator.Multiply:\n        opStr = '*';\n        break;\n      case BinaryOperator.Modulo:\n        opStr = '%';\n        break;\n      case BinaryOperator.Lower:\n        opStr = '<';\n        break;\n      case BinaryOperator.LowerEquals:\n        opStr = '<=';\n        break;\n      case BinaryOperator.Bigger:\n        opStr = '>';\n        break;\n      case BinaryOperator.BiggerEquals:\n        opStr = '>=';\n        break;\n      case BinaryOperator.NullishCoalesce:\n        opStr = '??';\n        break;\n      default:\n        throw new Error(`Unknown operator ${ast.operator}`);\n    }\n    if (ast.parens) ctx.print(ast, `(`);\n    ast.lhs.visitExpression(this, ctx);\n    ctx.print(ast, ` ${opStr} `);\n    ast.rhs.visitExpression(this, ctx);\n    if (ast.parens) ctx.print(ast, `)`);\n    return null;\n  }\n  visitReadPropExpr(ast, ctx) {\n    ast.receiver.visitExpression(this, ctx);\n    ctx.print(ast, `.`);\n    ctx.print(ast, ast.name);\n    return null;\n  }\n  visitReadKeyExpr(ast, ctx) {\n    ast.receiver.visitExpression(this, ctx);\n    ctx.print(ast, `[`);\n    ast.index.visitExpression(this, ctx);\n    ctx.print(ast, `]`);\n    return null;\n  }\n  visitLiteralArrayExpr(ast, ctx) {\n    ctx.print(ast, `[`);\n    this.visitAllExpressions(ast.entries, ctx, ',');\n    ctx.print(ast, `]`);\n    return null;\n  }\n  visitLiteralMapExpr(ast, ctx) {\n    ctx.print(ast, `{`);\n    this.visitAllObjects(entry => {\n      ctx.print(ast, `${escapeIdentifier(entry.key, this._escapeDollarInStrings, entry.quoted)}:`);\n      entry.value.visitExpression(this, ctx);\n    }, ast.entries, ctx, ',');\n    ctx.print(ast, `}`);\n    return null;\n  }\n  visitCommaExpr(ast, ctx) {\n    ctx.print(ast, '(');\n    this.visitAllExpressions(ast.parts, ctx, ',');\n    ctx.print(ast, ')');\n    return null;\n  }\n  visitAllExpressions(expressions, ctx, separator) {\n    this.visitAllObjects(expr => expr.visitExpression(this, ctx), expressions, ctx, separator);\n  }\n  visitAllObjects(handler, expressions, ctx, separator) {\n    let incrementedIndent = false;\n    for (let i = 0; i < expressions.length; i++) {\n      if (i > 0) {\n        if (ctx.lineLength() > 80) {\n          ctx.print(null, separator, true);\n          if (!incrementedIndent) {\n            // continuation are marked with double indent.\n            ctx.incIndent();\n            ctx.incIndent();\n            incrementedIndent = true;\n          }\n        } else {\n          ctx.print(null, separator, false);\n        }\n      }\n      handler(expressions[i]);\n    }\n    if (incrementedIndent) {\n      // continuation are marked with double indent.\n      ctx.decIndent();\n      ctx.decIndent();\n    }\n  }\n  visitAllStatements(statements, ctx) {\n    statements.forEach(stmt => stmt.visitStatement(this, ctx));\n  }\n}\nfunction escapeIdentifier(input, escapeDollar, alwaysQuote = true) {\n  if (input == null) {\n    return null;\n  }\n  const body = input.replace(_SINGLE_QUOTE_ESCAPE_STRING_RE, (...match) => {\n    if (match[0] == '$') {\n      return escapeDollar ? '\\\\$' : '$';\n    } else if (match[0] == '\\n') {\n      return '\\\\n';\n    } else if (match[0] == '\\r') {\n      return '\\\\r';\n    } else {\n      return `\\\\${match[0]}`;\n    }\n  });\n  const requiresQuotes = alwaysQuote || !_LEGAL_IDENTIFIER_RE.test(body);\n  return requiresQuotes ? `'${body}'` : body;\n}\nfunction _createIndent(count) {\n  let res = '';\n  for (let i = 0; i < count; i++) {\n    res += _INDENT_WITH;\n  }\n  return res;\n}\nfunction typeWithParameters(type, numParams) {\n  if (numParams === 0) {\n    return expressionType(type);\n  }\n  const params = [];\n  for (let i = 0; i < numParams; i++) {\n    params.push(DYNAMIC_TYPE);\n  }\n  return expressionType(type, undefined, params);\n}\nconst ANIMATE_SYMBOL_PREFIX = '@';\nfunction prepareSyntheticPropertyName(name) {\n  return `${ANIMATE_SYMBOL_PREFIX}${name}`;\n}\nfunction prepareSyntheticListenerName(name, phase) {\n  return `${ANIMATE_SYMBOL_PREFIX}${name}.${phase}`;\n}\nfunction getSafePropertyAccessString(accessor, name) {\n  const escapedName = escapeIdentifier(name, false, false);\n  return escapedName !== name ? `${accessor}[${escapedName}]` : `${accessor}.${name}`;\n}\nfunction prepareSyntheticListenerFunctionName(name, phase) {\n  return `animation_${name}_${phase}`;\n}\nfunction jitOnlyGuardedExpression(expr) {\n  return guardedExpression('ngJitMode', expr);\n}\nfunction devOnlyGuardedExpression(expr) {\n  return guardedExpression('ngDevMode', expr);\n}\nfunction guardedExpression(guard, expr) {\n  const guardExpr = new ExternalExpr({\n    name: guard,\n    moduleName: null\n  });\n  const guardNotDefined = new BinaryOperatorExpr(BinaryOperator.Identical, new TypeofExpr(guardExpr), literal('undefined'));\n  const guardUndefinedOrTrue = new BinaryOperatorExpr(BinaryOperator.Or, guardNotDefined, guardExpr, /* type */undefined, /* sourceSpan */undefined, true);\n  return new BinaryOperatorExpr(BinaryOperator.And, guardUndefinedOrTrue, expr);\n}\nfunction wrapReference(value) {\n  const wrapped = new WrappedNodeExpr(value);\n  return {\n    value: wrapped,\n    type: wrapped\n  };\n}\nfunction refsToArray(refs, shouldForwardDeclare) {\n  const values = literalArr(refs.map(ref => ref.value));\n  return shouldForwardDeclare ? arrowFn([], values) : values;\n}\nfunction createMayBeForwardRefExpression(expression, forwardRef) {\n  return {\n    expression,\n    forwardRef\n  };\n}\n/**\n * Convert a `MaybeForwardRefExpression` to an `Expression`, possibly wrapping its expression in a\n * `forwardRef()` call.\n *\n * If `MaybeForwardRefExpression.forwardRef` is `ForwardRefHandling.Unwrapped` then the expression\n * was originally wrapped in a `forwardRef()` call to prevent the value from being eagerly evaluated\n * in the code.\n *\n * See `packages/compiler-cli/src/ngtsc/annotations/src/injectable.ts` and\n * `packages/compiler/src/jit_compiler_facade.ts` for more information.\n */\nfunction convertFromMaybeForwardRefExpression({\n  expression,\n  forwardRef\n}) {\n  switch (forwardRef) {\n    case 0 /* ForwardRefHandling.None */:\n    case 1 /* ForwardRefHandling.Wrapped */:\n      return expression;\n    case 2 /* ForwardRefHandling.Unwrapped */:\n      return generateForwardRef(expression);\n  }\n}\n/**\n * Generate an expression that has the given `expr` wrapped in the following form:\n *\n * ```\n * forwardRef(() => expr)\n * ```\n */\nfunction generateForwardRef(expr) {\n  return importExpr(Identifiers.forwardRef).callFn([arrowFn([], expr)]);\n}\nvar R3FactoryDelegateType;\n(function (R3FactoryDelegateType) {\n  R3FactoryDelegateType[R3FactoryDelegateType[\"Class\"] = 0] = \"Class\";\n  R3FactoryDelegateType[R3FactoryDelegateType[\"Function\"] = 1] = \"Function\";\n})(R3FactoryDelegateType || (R3FactoryDelegateType = {}));\nvar FactoryTarget$1;\n(function (FactoryTarget) {\n  FactoryTarget[FactoryTarget[\"Directive\"] = 0] = \"Directive\";\n  FactoryTarget[FactoryTarget[\"Component\"] = 1] = \"Component\";\n  FactoryTarget[FactoryTarget[\"Injectable\"] = 2] = \"Injectable\";\n  FactoryTarget[FactoryTarget[\"Pipe\"] = 3] = \"Pipe\";\n  FactoryTarget[FactoryTarget[\"NgModule\"] = 4] = \"NgModule\";\n})(FactoryTarget$1 || (FactoryTarget$1 = {}));\n/**\n * Construct a factory function expression for the given `R3FactoryMetadata`.\n */\nfunction compileFactoryFunction(meta) {\n  const t = variable('__ngFactoryType__');\n  let baseFactoryVar = null;\n  // The type to instantiate via constructor invocation. If there is no delegated factory, meaning\n  // this type is always created by constructor invocation, then this is the type-to-create\n  // parameter provided by the user (t) if specified, or the current type if not. If there is a\n  // delegated factory (which is used to create the current type) then this is only the type-to-\n  // create parameter (t).\n  const typeForCtor = !isDelegatedFactoryMetadata(meta) ? new BinaryOperatorExpr(BinaryOperator.Or, t, meta.type.value) : t;\n  let ctorExpr = null;\n  if (meta.deps !== null) {\n    // There is a constructor (either explicitly or implicitly defined).\n    if (meta.deps !== 'invalid') {\n      ctorExpr = new InstantiateExpr(typeForCtor, injectDependencies(meta.deps, meta.target));\n    }\n  } else {\n    // There is no constructor, use the base class' factory to construct typeForCtor.\n    baseFactoryVar = variable(`ɵ${meta.name}_BaseFactory`);\n    ctorExpr = baseFactoryVar.callFn([typeForCtor]);\n  }\n  const body = [];\n  let retExpr = null;\n  function makeConditionalFactory(nonCtorExpr) {\n    const r = variable('__ngConditionalFactory__');\n    body.push(r.set(NULL_EXPR).toDeclStmt());\n    const ctorStmt = ctorExpr !== null ? r.set(ctorExpr).toStmt() : importExpr(Identifiers.invalidFactory).callFn([]).toStmt();\n    body.push(ifStmt(t, [ctorStmt], [r.set(nonCtorExpr).toStmt()]));\n    return r;\n  }\n  if (isDelegatedFactoryMetadata(meta)) {\n    // This type is created with a delegated factory. If a type parameter is not specified, call\n    // the factory instead.\n    const delegateArgs = injectDependencies(meta.delegateDeps, meta.target);\n    // Either call `new delegate(...)` or `delegate(...)` depending on meta.delegateType.\n    const factoryExpr = new (meta.delegateType === R3FactoryDelegateType.Class ? InstantiateExpr : InvokeFunctionExpr)(meta.delegate, delegateArgs);\n    retExpr = makeConditionalFactory(factoryExpr);\n  } else if (isExpressionFactoryMetadata(meta)) {\n    // TODO(alxhub): decide whether to lower the value here or in the caller\n    retExpr = makeConditionalFactory(meta.expression);\n  } else {\n    retExpr = ctorExpr;\n  }\n  if (retExpr === null) {\n    // The expression cannot be formed so render an `ɵɵinvalidFactory()` call.\n    body.push(importExpr(Identifiers.invalidFactory).callFn([]).toStmt());\n  } else if (baseFactoryVar !== null) {\n    // This factory uses a base factory, so call `ɵɵgetInheritedFactory()` to compute it.\n    const getInheritedFactoryCall = importExpr(Identifiers.getInheritedFactory).callFn([meta.type.value]);\n    // Memoize the base factoryFn: `baseFactory || (baseFactory = ɵɵgetInheritedFactory(...))`\n    const baseFactory = new BinaryOperatorExpr(BinaryOperator.Or, baseFactoryVar, baseFactoryVar.set(getInheritedFactoryCall));\n    body.push(new ReturnStatement(baseFactory.callFn([typeForCtor])));\n  } else {\n    // This is straightforward factory, just return it.\n    body.push(new ReturnStatement(retExpr));\n  }\n  let factoryFn = fn([new FnParam(t.name, DYNAMIC_TYPE)], body, INFERRED_TYPE, undefined, `${meta.name}_Factory`);\n  if (baseFactoryVar !== null) {\n    // There is a base factory variable so wrap its declaration along with the factory function into\n    // an IIFE.\n    factoryFn = arrowFn([], [new DeclareVarStmt(baseFactoryVar.name), new ReturnStatement(factoryFn)]).callFn([], /* sourceSpan */undefined, /* pure */true);\n  }\n  return {\n    expression: factoryFn,\n    statements: [],\n    type: createFactoryType(meta)\n  };\n}\nfunction createFactoryType(meta) {\n  const ctorDepsType = meta.deps !== null && meta.deps !== 'invalid' ? createCtorDepsType(meta.deps) : NONE_TYPE;\n  return expressionType(importExpr(Identifiers.FactoryDeclaration, [typeWithParameters(meta.type.type, meta.typeArgumentCount), ctorDepsType]));\n}\nfunction injectDependencies(deps, target) {\n  return deps.map((dep, index) => compileInjectDependency(dep, target, index));\n}\nfunction compileInjectDependency(dep, target, index) {\n  // Interpret the dependency according to its resolved type.\n  if (dep.token === null) {\n    return importExpr(Identifiers.invalidFactoryDep).callFn([literal(index)]);\n  } else if (dep.attributeNameType === null) {\n    // Build up the injection flags according to the metadata.\n    const flags = 0 /* InjectFlags.Default */ | (dep.self ? 2 /* InjectFlags.Self */ : 0) | (dep.skipSelf ? 4 /* InjectFlags.SkipSelf */ : 0) | (dep.host ? 1 /* InjectFlags.Host */ : 0) | (dep.optional ? 8 /* InjectFlags.Optional */ : 0) | (target === FactoryTarget$1.Pipe ? 16 /* InjectFlags.ForPipe */ : 0);\n    // If this dependency is optional or otherwise has non-default flags, then additional\n    // parameters describing how to inject the dependency must be passed to the inject function\n    // that's being used.\n    let flagsParam = flags !== 0 /* InjectFlags.Default */ || dep.optional ? literal(flags) : null;\n    // Build up the arguments to the injectFn call.\n    const injectArgs = [dep.token];\n    if (flagsParam) {\n      injectArgs.push(flagsParam);\n    }\n    const injectFn = getInjectFn(target);\n    return importExpr(injectFn).callFn(injectArgs);\n  } else {\n    // The `dep.attributeTypeName` value is defined, which indicates that this is an `@Attribute()`\n    // type dependency. For the generated JS we still want to use the `dep.token` value in case the\n    // name given for the attribute is not a string literal. For example given `@Attribute(foo())`,\n    // we want to generate `ɵɵinjectAttribute(foo())`.\n    //\n    // The `dep.attributeTypeName` is only actually used (in `createCtorDepType()`) to generate\n    // typings.\n    return importExpr(Identifiers.injectAttribute).callFn([dep.token]);\n  }\n}\nfunction createCtorDepsType(deps) {\n  let hasTypes = false;\n  const attributeTypes = deps.map(dep => {\n    const type = createCtorDepType(dep);\n    if (type !== null) {\n      hasTypes = true;\n      return type;\n    } else {\n      return literal(null);\n    }\n  });\n  if (hasTypes) {\n    return expressionType(literalArr(attributeTypes));\n  } else {\n    return NONE_TYPE;\n  }\n}\nfunction createCtorDepType(dep) {\n  const entries = [];\n  if (dep.attributeNameType !== null) {\n    entries.push({\n      key: 'attribute',\n      value: dep.attributeNameType,\n      quoted: false\n    });\n  }\n  if (dep.optional) {\n    entries.push({\n      key: 'optional',\n      value: literal(true),\n      quoted: false\n    });\n  }\n  if (dep.host) {\n    entries.push({\n      key: 'host',\n      value: literal(true),\n      quoted: false\n    });\n  }\n  if (dep.self) {\n    entries.push({\n      key: 'self',\n      value: literal(true),\n      quoted: false\n    });\n  }\n  if (dep.skipSelf) {\n    entries.push({\n      key: 'skipSelf',\n      value: literal(true),\n      quoted: false\n    });\n  }\n  return entries.length > 0 ? literalMap(entries) : null;\n}\nfunction isDelegatedFactoryMetadata(meta) {\n  return meta.delegateType !== undefined;\n}\nfunction isExpressionFactoryMetadata(meta) {\n  return meta.expression !== undefined;\n}\nfunction getInjectFn(target) {\n  switch (target) {\n    case FactoryTarget$1.Component:\n    case FactoryTarget$1.Directive:\n    case FactoryTarget$1.Pipe:\n      return Identifiers.directiveInject;\n    case FactoryTarget$1.NgModule:\n    case FactoryTarget$1.Injectable:\n    default:\n      return Identifiers.inject;\n  }\n}\nclass ParserError {\n  constructor(message, input, errLocation, ctxLocation) {\n    this.input = input;\n    this.errLocation = errLocation;\n    this.ctxLocation = ctxLocation;\n    this.message = `Parser Error: ${message} ${errLocation} [${input}] in ${ctxLocation}`;\n  }\n}\nclass ParseSpan {\n  constructor(start, end) {\n    this.start = start;\n    this.end = end;\n  }\n  toAbsolute(absoluteOffset) {\n    return new AbsoluteSourceSpan(absoluteOffset + this.start, absoluteOffset + this.end);\n  }\n}\nclass AST {\n  constructor(span,\n  /**\n   * Absolute location of the expression AST in a source code file.\n   */\n  sourceSpan) {\n    this.span = span;\n    this.sourceSpan = sourceSpan;\n  }\n  toString() {\n    return 'AST';\n  }\n}\nclass ASTWithName extends AST {\n  constructor(span, sourceSpan, nameSpan) {\n    super(span, sourceSpan);\n    this.nameSpan = nameSpan;\n  }\n}\nclass EmptyExpr$1 extends AST {\n  visit(visitor, context = null) {\n    // do nothing\n  }\n}\nclass ImplicitReceiver extends AST {\n  visit(visitor, context = null) {\n    return visitor.visitImplicitReceiver(this, context);\n  }\n}\n/**\n * Receiver when something is accessed through `this` (e.g. `this.foo`). Note that this class\n * inherits from `ImplicitReceiver`, because accessing something through `this` is treated the\n * same as accessing it implicitly inside of an Angular template (e.g. `[attr.title]=\"this.title\"`\n * is the same as `[attr.title]=\"title\"`.). Inheriting allows for the `this` accesses to be treated\n * the same as implicit ones, except for a couple of exceptions like `$event` and `$any`.\n * TODO: we should find a way for this class not to extend from `ImplicitReceiver` in the future.\n */\nclass ThisReceiver extends ImplicitReceiver {\n  visit(visitor, context = null) {\n    return visitor.visitThisReceiver?.(this, context);\n  }\n}\n/**\n * Multiple expressions separated by a semicolon.\n */\nclass Chain extends AST {\n  constructor(span, sourceSpan, expressions) {\n    super(span, sourceSpan);\n    this.expressions = expressions;\n  }\n  visit(visitor, context = null) {\n    return visitor.visitChain(this, context);\n  }\n}\nclass Conditional extends AST {\n  constructor(span, sourceSpan, condition, trueExp, falseExp) {\n    super(span, sourceSpan);\n    this.condition = condition;\n    this.trueExp = trueExp;\n    this.falseExp = falseExp;\n  }\n  visit(visitor, context = null) {\n    return visitor.visitConditional(this, context);\n  }\n}\nclass PropertyRead extends ASTWithName {\n  constructor(span, sourceSpan, nameSpan, receiver, name) {\n    super(span, sourceSpan, nameSpan);\n    this.receiver = receiver;\n    this.name = name;\n  }\n  visit(visitor, context = null) {\n    return visitor.visitPropertyRead(this, context);\n  }\n}\nclass PropertyWrite extends ASTWithName {\n  constructor(span, sourceSpan, nameSpan, receiver, name, value) {\n    super(span, sourceSpan, nameSpan);\n    this.receiver = receiver;\n    this.name = name;\n    this.value = value;\n  }\n  visit(visitor, context = null) {\n    return visitor.visitPropertyWrite(this, context);\n  }\n}\nclass SafePropertyRead extends ASTWithName {\n  constructor(span, sourceSpan, nameSpan, receiver, name) {\n    super(span, sourceSpan, nameSpan);\n    this.receiver = receiver;\n    this.name = name;\n  }\n  visit(visitor, context = null) {\n    return visitor.visitSafePropertyRead(this, context);\n  }\n}\nclass KeyedRead extends AST {\n  constructor(span, sourceSpan, receiver, key) {\n    super(span, sourceSpan);\n    this.receiver = receiver;\n    this.key = key;\n  }\n  visit(visitor, context = null) {\n    return visitor.visitKeyedRead(this, context);\n  }\n}\nclass SafeKeyedRead extends AST {\n  constructor(span, sourceSpan, receiver, key) {\n    super(span, sourceSpan);\n    this.receiver = receiver;\n    this.key = key;\n  }\n  visit(visitor, context = null) {\n    return visitor.visitSafeKeyedRead(this, context);\n  }\n}\nclass KeyedWrite extends AST {\n  constructor(span, sourceSpan, receiver, key, value) {\n    super(span, sourceSpan);\n    this.receiver = receiver;\n    this.key = key;\n    this.value = value;\n  }\n  visit(visitor, context = null) {\n    return visitor.visitKeyedWrite(this, context);\n  }\n}\nclass BindingPipe extends ASTWithName {\n  constructor(span, sourceSpan, exp, name, args, nameSpan) {\n    super(span, sourceSpan, nameSpan);\n    this.exp = exp;\n    this.name = name;\n    this.args = args;\n  }\n  visit(visitor, context = null) {\n    return visitor.visitPipe(this, context);\n  }\n}\nclass LiteralPrimitive extends AST {\n  constructor(span, sourceSpan, value) {\n    super(span, sourceSpan);\n    this.value = value;\n  }\n  visit(visitor, context = null) {\n    return visitor.visitLiteralPrimitive(this, context);\n  }\n}\nclass LiteralArray extends AST {\n  constructor(span, sourceSpan, expressions) {\n    super(span, sourceSpan);\n    this.expressions = expressions;\n  }\n  visit(visitor, context = null) {\n    return visitor.visitLiteralArray(this, context);\n  }\n}\nclass LiteralMap extends AST {\n  constructor(span, sourceSpan, keys, values) {\n    super(span, sourceSpan);\n    this.keys = keys;\n    this.values = values;\n  }\n  visit(visitor, context = null) {\n    return visitor.visitLiteralMap(this, context);\n  }\n}\nclass Interpolation$1 extends AST {\n  constructor(span, sourceSpan, strings, expressions) {\n    super(span, sourceSpan);\n    this.strings = strings;\n    this.expressions = expressions;\n  }\n  visit(visitor, context = null) {\n    return visitor.visitInterpolation(this, context);\n  }\n}\nclass Binary extends AST {\n  constructor(span, sourceSpan, operation, left, right) {\n    super(span, sourceSpan);\n    this.operation = operation;\n    this.left = left;\n    this.right = right;\n  }\n  visit(visitor, context = null) {\n    return visitor.visitBinary(this, context);\n  }\n}\n/**\n * For backwards compatibility reasons, `Unary` inherits from `Binary` and mimics the binary AST\n * node that was originally used. This inheritance relation can be deleted in some future major,\n * after consumers have been given a chance to fully support Unary.\n */\nclass Unary extends Binary {\n  /**\n   * Creates a unary minus expression \"-x\", represented as `Binary` using \"0 - x\".\n   */\n  static createMinus(span, sourceSpan, expr) {\n    return new Unary(span, sourceSpan, '-', expr, '-', new LiteralPrimitive(span, sourceSpan, 0), expr);\n  }\n  /**\n   * Creates a unary plus expression \"+x\", represented as `Binary` using \"x - 0\".\n   */\n  static createPlus(span, sourceSpan, expr) {\n    return new Unary(span, sourceSpan, '+', expr, '-', expr, new LiteralPrimitive(span, sourceSpan, 0));\n  }\n  /**\n   * During the deprecation period this constructor is private, to avoid consumers from creating\n   * a `Unary` with the fallback properties for `Binary`.\n   */\n  constructor(span, sourceSpan, operator, expr, binaryOp, binaryLeft, binaryRight) {\n    super(span, sourceSpan, binaryOp, binaryLeft, binaryRight);\n    this.operator = operator;\n    this.expr = expr;\n    // Redeclare the properties that are inherited from `Binary` as `never`, as consumers should not\n    // depend on these fields when operating on `Unary`.\n    this.left = null;\n    this.right = null;\n    this.operation = null;\n  }\n  visit(visitor, context = null) {\n    if (visitor.visitUnary !== undefined) {\n      return visitor.visitUnary(this, context);\n    }\n    return visitor.visitBinary(this, context);\n  }\n}\nclass PrefixNot extends AST {\n  constructor(span, sourceSpan, expression) {\n    super(span, sourceSpan);\n    this.expression = expression;\n  }\n  visit(visitor, context = null) {\n    return visitor.visitPrefixNot(this, context);\n  }\n}\nclass NonNullAssert extends AST {\n  constructor(span, sourceSpan, expression) {\n    super(span, sourceSpan);\n    this.expression = expression;\n  }\n  visit(visitor, context = null) {\n    return visitor.visitNonNullAssert(this, context);\n  }\n}\nclass Call extends AST {\n  constructor(span, sourceSpan, receiver, args, argumentSpan) {\n    super(span, sourceSpan);\n    this.receiver = receiver;\n    this.args = args;\n    this.argumentSpan = argumentSpan;\n  }\n  visit(visitor, context = null) {\n    return visitor.visitCall(this, context);\n  }\n}\nclass SafeCall extends AST {\n  constructor(span, sourceSpan, receiver, args, argumentSpan) {\n    super(span, sourceSpan);\n    this.receiver = receiver;\n    this.args = args;\n    this.argumentSpan = argumentSpan;\n  }\n  visit(visitor, context = null) {\n    return visitor.visitSafeCall(this, context);\n  }\n}\n/**\n * Records the absolute position of a text span in a source file, where `start` and `end` are the\n * starting and ending byte offsets, respectively, of the text span in a source file.\n */\nclass AbsoluteSourceSpan {\n  constructor(start, end) {\n    this.start = start;\n    this.end = end;\n  }\n}\nclass ASTWithSource extends AST {\n  constructor(ast, source, location, absoluteOffset, errors) {\n    super(new ParseSpan(0, source === null ? 0 : source.length), new AbsoluteSourceSpan(absoluteOffset, source === null ? absoluteOffset : absoluteOffset + source.length));\n    this.ast = ast;\n    this.source = source;\n    this.location = location;\n    this.errors = errors;\n  }\n  visit(visitor, context = null) {\n    if (visitor.visitASTWithSource) {\n      return visitor.visitASTWithSource(this, context);\n    }\n    return this.ast.visit(visitor, context);\n  }\n  toString() {\n    return `${this.source} in ${this.location}`;\n  }\n}\nclass VariableBinding {\n  /**\n   * @param sourceSpan entire span of the binding.\n   * @param key name of the LHS along with its span.\n   * @param value optional value for the RHS along with its span.\n   */\n  constructor(sourceSpan, key, value) {\n    this.sourceSpan = sourceSpan;\n    this.key = key;\n    this.value = value;\n  }\n}\nclass ExpressionBinding {\n  /**\n   * @param sourceSpan entire span of the binding.\n   * @param key binding name, like ngForOf, ngForTrackBy, ngIf, along with its\n   * span. Note that the length of the span may not be the same as\n   * `key.source.length`. For example,\n   * 1. key.source = ngFor, key.span is for \"ngFor\"\n   * 2. key.source = ngForOf, key.span is for \"of\"\n   * 3. key.source = ngForTrackBy, key.span is for \"trackBy\"\n   * @param value optional expression for the RHS.\n   */\n  constructor(sourceSpan, key, value) {\n    this.sourceSpan = sourceSpan;\n    this.key = key;\n    this.value = value;\n  }\n}\nclass RecursiveAstVisitor {\n  visit(ast, context) {\n    // The default implementation just visits every node.\n    // Classes that extend RecursiveAstVisitor should override this function\n    // to selectively visit the specified node.\n    ast.visit(this, context);\n  }\n  visitUnary(ast, context) {\n    this.visit(ast.expr, context);\n  }\n  visitBinary(ast, context) {\n    this.visit(ast.left, context);\n    this.visit(ast.right, context);\n  }\n  visitChain(ast, context) {\n    this.visitAll(ast.expressions, context);\n  }\n  visitConditional(ast, context) {\n    this.visit(ast.condition, context);\n    this.visit(ast.trueExp, context);\n    this.visit(ast.falseExp, context);\n  }\n  visitPipe(ast, context) {\n    this.visit(ast.exp, context);\n    this.visitAll(ast.args, context);\n  }\n  visitImplicitReceiver(ast, context) {}\n  visitThisReceiver(ast, context) {}\n  visitInterpolation(ast, context) {\n    this.visitAll(ast.expressions, context);\n  }\n  visitKeyedRead(ast, context) {\n    this.visit(ast.receiver, context);\n    this.visit(ast.key, context);\n  }\n  visitKeyedWrite(ast, context) {\n    this.visit(ast.receiver, context);\n    this.visit(ast.key, context);\n    this.visit(ast.value, context);\n  }\n  visitLiteralArray(ast, context) {\n    this.visitAll(ast.expressions, context);\n  }\n  visitLiteralMap(ast, context) {\n    this.visitAll(ast.values, context);\n  }\n  visitLiteralPrimitive(ast, context) {}\n  visitPrefixNot(ast, context) {\n    this.visit(ast.expression, context);\n  }\n  visitNonNullAssert(ast, context) {\n    this.visit(ast.expression, context);\n  }\n  visitPropertyRead(ast, context) {\n    this.visit(ast.receiver, context);\n  }\n  visitPropertyWrite(ast, context) {\n    this.visit(ast.receiver, context);\n    this.visit(ast.value, context);\n  }\n  visitSafePropertyRead(ast, context) {\n    this.visit(ast.receiver, context);\n  }\n  visitSafeKeyedRead(ast, context) {\n    this.visit(ast.receiver, context);\n    this.visit(ast.key, context);\n  }\n  visitCall(ast, context) {\n    this.visit(ast.receiver, context);\n    this.visitAll(ast.args, context);\n  }\n  visitSafeCall(ast, context) {\n    this.visit(ast.receiver, context);\n    this.visitAll(ast.args, context);\n  }\n  // This is not part of the AstVisitor interface, just a helper method\n  visitAll(asts, context) {\n    for (const ast of asts) {\n      this.visit(ast, context);\n    }\n  }\n}\nclass AstTransformer {\n  visitImplicitReceiver(ast, context) {\n    return ast;\n  }\n  visitThisReceiver(ast, context) {\n    return ast;\n  }\n  visitInterpolation(ast, context) {\n    return new Interpolation$1(ast.span, ast.sourceSpan, ast.strings, this.visitAll(ast.expressions));\n  }\n  visitLiteralPrimitive(ast, context) {\n    return new LiteralPrimitive(ast.span, ast.sourceSpan, ast.value);\n  }\n  visitPropertyRead(ast, context) {\n    return new PropertyRead(ast.span, ast.sourceSpan, ast.nameSpan, ast.receiver.visit(this), ast.name);\n  }\n  visitPropertyWrite(ast, context) {\n    return new PropertyWrite(ast.span, ast.sourceSpan, ast.nameSpan, ast.receiver.visit(this), ast.name, ast.value.visit(this));\n  }\n  visitSafePropertyRead(ast, context) {\n    return new SafePropertyRead(ast.span, ast.sourceSpan, ast.nameSpan, ast.receiver.visit(this), ast.name);\n  }\n  visitLiteralArray(ast, context) {\n    return new LiteralArray(ast.span, ast.sourceSpan, this.visitAll(ast.expressions));\n  }\n  visitLiteralMap(ast, context) {\n    return new LiteralMap(ast.span, ast.sourceSpan, ast.keys, this.visitAll(ast.values));\n  }\n  visitUnary(ast, context) {\n    switch (ast.operator) {\n      case '+':\n        return Unary.createPlus(ast.span, ast.sourceSpan, ast.expr.visit(this));\n      case '-':\n        return Unary.createMinus(ast.span, ast.sourceSpan, ast.expr.visit(this));\n      default:\n        throw new Error(`Unknown unary operator ${ast.operator}`);\n    }\n  }\n  visitBinary(ast, context) {\n    return new Binary(ast.span, ast.sourceSpan, ast.operation, ast.left.visit(this), ast.right.visit(this));\n  }\n  visitPrefixNot(ast, context) {\n    return new PrefixNot(ast.span, ast.sourceSpan, ast.expression.visit(this));\n  }\n  visitNonNullAssert(ast, context) {\n    return new NonNullAssert(ast.span, ast.sourceSpan, ast.expression.visit(this));\n  }\n  visitConditional(ast, context) {\n    return new Conditional(ast.span, ast.sourceSpan, ast.condition.visit(this), ast.trueExp.visit(this), ast.falseExp.visit(this));\n  }\n  visitPipe(ast, context) {\n    return new BindingPipe(ast.span, ast.sourceSpan, ast.exp.visit(this), ast.name, this.visitAll(ast.args), ast.nameSpan);\n  }\n  visitKeyedRead(ast, context) {\n    return new KeyedRead(ast.span, ast.sourceSpan, ast.receiver.visit(this), ast.key.visit(this));\n  }\n  visitKeyedWrite(ast, context) {\n    return new KeyedWrite(ast.span, ast.sourceSpan, ast.receiver.visit(this), ast.key.visit(this), ast.value.visit(this));\n  }\n  visitCall(ast, context) {\n    return new Call(ast.span, ast.sourceSpan, ast.receiver.visit(this), this.visitAll(ast.args), ast.argumentSpan);\n  }\n  visitSafeCall(ast, context) {\n    return new SafeCall(ast.span, ast.sourceSpan, ast.receiver.visit(this), this.visitAll(ast.args), ast.argumentSpan);\n  }\n  visitAll(asts) {\n    const res = [];\n    for (let i = 0; i < asts.length; ++i) {\n      res[i] = asts[i].visit(this);\n    }\n    return res;\n  }\n  visitChain(ast, context) {\n    return new Chain(ast.span, ast.sourceSpan, this.visitAll(ast.expressions));\n  }\n  visitSafeKeyedRead(ast, context) {\n    return new SafeKeyedRead(ast.span, ast.sourceSpan, ast.receiver.visit(this), ast.key.visit(this));\n  }\n}\n// A transformer that only creates new nodes if the transformer makes a change or\n// a change is made a child node.\nclass AstMemoryEfficientTransformer {\n  visitImplicitReceiver(ast, context) {\n    return ast;\n  }\n  visitThisReceiver(ast, context) {\n    return ast;\n  }\n  visitInterpolation(ast, context) {\n    const expressions = this.visitAll(ast.expressions);\n    if (expressions !== ast.expressions) return new Interpolation$1(ast.span, ast.sourceSpan, ast.strings, expressions);\n    return ast;\n  }\n  visitLiteralPrimitive(ast, context) {\n    return ast;\n  }\n  visitPropertyRead(ast, context) {\n    const receiver = ast.receiver.visit(this);\n    if (receiver !== ast.receiver) {\n      return new PropertyRead(ast.span, ast.sourceSpan, ast.nameSpan, receiver, ast.name);\n    }\n    return ast;\n  }\n  visitPropertyWrite(ast, context) {\n    const receiver = ast.receiver.visit(this);\n    const value = ast.value.visit(this);\n    if (receiver !== ast.receiver || value !== ast.value) {\n      return new PropertyWrite(ast.span, ast.sourceSpan, ast.nameSpan, receiver, ast.name, value);\n    }\n    return ast;\n  }\n  visitSafePropertyRead(ast, context) {\n    const receiver = ast.receiver.visit(this);\n    if (receiver !== ast.receiver) {\n      return new SafePropertyRead(ast.span, ast.sourceSpan, ast.nameSpan, receiver, ast.name);\n    }\n    return ast;\n  }\n  visitLiteralArray(ast, context) {\n    const expressions = this.visitAll(ast.expressions);\n    if (expressions !== ast.expressions) {\n      return new LiteralArray(ast.span, ast.sourceSpan, expressions);\n    }\n    return ast;\n  }\n  visitLiteralMap(ast, context) {\n    const values = this.visitAll(ast.values);\n    if (values !== ast.values) {\n      return new LiteralMap(ast.span, ast.sourceSpan, ast.keys, values);\n    }\n    return ast;\n  }\n  visitUnary(ast, context) {\n    const expr = ast.expr.visit(this);\n    if (expr !== ast.expr) {\n      switch (ast.operator) {\n        case '+':\n          return Unary.createPlus(ast.span, ast.sourceSpan, expr);\n        case '-':\n          return Unary.createMinus(ast.span, ast.sourceSpan, expr);\n        default:\n          throw new Error(`Unknown unary operator ${ast.operator}`);\n      }\n    }\n    return ast;\n  }\n  visitBinary(ast, context) {\n    const left = ast.left.visit(this);\n    const right = ast.right.visit(this);\n    if (left !== ast.left || right !== ast.right) {\n      return new Binary(ast.span, ast.sourceSpan, ast.operation, left, right);\n    }\n    return ast;\n  }\n  visitPrefixNot(ast, context) {\n    const expression = ast.expression.visit(this);\n    if (expression !== ast.expression) {\n      return new PrefixNot(ast.span, ast.sourceSpan, expression);\n    }\n    return ast;\n  }\n  visitNonNullAssert(ast, context) {\n    const expression = ast.expression.visit(this);\n    if (expression !== ast.expression) {\n      return new NonNullAssert(ast.span, ast.sourceSpan, expression);\n    }\n    return ast;\n  }\n  visitConditional(ast, context) {\n    const condition = ast.condition.visit(this);\n    const trueExp = ast.trueExp.visit(this);\n    const falseExp = ast.falseExp.visit(this);\n    if (condition !== ast.condition || trueExp !== ast.trueExp || falseExp !== ast.falseExp) {\n      return new Conditional(ast.span, ast.sourceSpan, condition, trueExp, falseExp);\n    }\n    return ast;\n  }\n  visitPipe(ast, context) {\n    const exp = ast.exp.visit(this);\n    const args = this.visitAll(ast.args);\n    if (exp !== ast.exp || args !== ast.args) {\n      return new BindingPipe(ast.span, ast.sourceSpan, exp, ast.name, args, ast.nameSpan);\n    }\n    return ast;\n  }\n  visitKeyedRead(ast, context) {\n    const obj = ast.receiver.visit(this);\n    const key = ast.key.visit(this);\n    if (obj !== ast.receiver || key !== ast.key) {\n      return new KeyedRead(ast.span, ast.sourceSpan, obj, key);\n    }\n    return ast;\n  }\n  visitKeyedWrite(ast, context) {\n    const obj = ast.receiver.visit(this);\n    const key = ast.key.visit(this);\n    const value = ast.value.visit(this);\n    if (obj !== ast.receiver || key !== ast.key || value !== ast.value) {\n      return new KeyedWrite(ast.span, ast.sourceSpan, obj, key, value);\n    }\n    return ast;\n  }\n  visitAll(asts) {\n    const res = [];\n    let modified = false;\n    for (let i = 0; i < asts.length; ++i) {\n      const original = asts[i];\n      const value = original.visit(this);\n      res[i] = value;\n      modified = modified || value !== original;\n    }\n    return modified ? res : asts;\n  }\n  visitChain(ast, context) {\n    const expressions = this.visitAll(ast.expressions);\n    if (expressions !== ast.expressions) {\n      return new Chain(ast.span, ast.sourceSpan, expressions);\n    }\n    return ast;\n  }\n  visitCall(ast, context) {\n    const receiver = ast.receiver.visit(this);\n    const args = this.visitAll(ast.args);\n    if (receiver !== ast.receiver || args !== ast.args) {\n      return new Call(ast.span, ast.sourceSpan, receiver, args, ast.argumentSpan);\n    }\n    return ast;\n  }\n  visitSafeCall(ast, context) {\n    const receiver = ast.receiver.visit(this);\n    const args = this.visitAll(ast.args);\n    if (receiver !== ast.receiver || args !== ast.args) {\n      return new SafeCall(ast.span, ast.sourceSpan, receiver, args, ast.argumentSpan);\n    }\n    return ast;\n  }\n  visitSafeKeyedRead(ast, context) {\n    const obj = ast.receiver.visit(this);\n    const key = ast.key.visit(this);\n    if (obj !== ast.receiver || key !== ast.key) {\n      return new SafeKeyedRead(ast.span, ast.sourceSpan, obj, key);\n    }\n    return ast;\n  }\n}\n// Bindings\nclass ParsedProperty {\n  constructor(name, expression, type, sourceSpan, keySpan, valueSpan) {\n    this.name = name;\n    this.expression = expression;\n    this.type = type;\n    this.sourceSpan = sourceSpan;\n    this.keySpan = keySpan;\n    this.valueSpan = valueSpan;\n    this.isLiteral = this.type === ParsedPropertyType.LITERAL_ATTR;\n    this.isAnimation = this.type === ParsedPropertyType.ANIMATION;\n  }\n}\nvar ParsedPropertyType;\n(function (ParsedPropertyType) {\n  ParsedPropertyType[ParsedPropertyType[\"DEFAULT\"] = 0] = \"DEFAULT\";\n  ParsedPropertyType[ParsedPropertyType[\"LITERAL_ATTR\"] = 1] = \"LITERAL_ATTR\";\n  ParsedPropertyType[ParsedPropertyType[\"ANIMATION\"] = 2] = \"ANIMATION\";\n  ParsedPropertyType[ParsedPropertyType[\"TWO_WAY\"] = 3] = \"TWO_WAY\";\n})(ParsedPropertyType || (ParsedPropertyType = {}));\nvar ParsedEventType;\n(function (ParsedEventType) {\n  // DOM or Directive event\n  ParsedEventType[ParsedEventType[\"Regular\"] = 0] = \"Regular\";\n  // Animation specific event\n  ParsedEventType[ParsedEventType[\"Animation\"] = 1] = \"Animation\";\n  // Event side of a two-way binding (e.g. `[(property)]=\"expression\"`).\n  ParsedEventType[ParsedEventType[\"TwoWay\"] = 2] = \"TwoWay\";\n})(ParsedEventType || (ParsedEventType = {}));\nclass ParsedEvent {\n  constructor(name, targetOrPhase, type, handler, sourceSpan, handlerSpan, keySpan) {\n    this.name = name;\n    this.targetOrPhase = targetOrPhase;\n    this.type = type;\n    this.handler = handler;\n    this.sourceSpan = sourceSpan;\n    this.handlerSpan = handlerSpan;\n    this.keySpan = keySpan;\n  }\n}\n/**\n * ParsedVariable represents a variable declaration in a microsyntax expression.\n */\nclass ParsedVariable {\n  constructor(name, value, sourceSpan, keySpan, valueSpan) {\n    this.name = name;\n    this.value = value;\n    this.sourceSpan = sourceSpan;\n    this.keySpan = keySpan;\n    this.valueSpan = valueSpan;\n  }\n}\nvar BindingType;\n(function (BindingType) {\n  // A regular binding to a property (e.g. `[property]=\"expression\"`).\n  BindingType[BindingType[\"Property\"] = 0] = \"Property\";\n  // A binding to an element attribute (e.g. `[attr.name]=\"expression\"`).\n  BindingType[BindingType[\"Attribute\"] = 1] = \"Attribute\";\n  // A binding to a CSS class (e.g. `[class.name]=\"condition\"`).\n  BindingType[BindingType[\"Class\"] = 2] = \"Class\";\n  // A binding to a style rule (e.g. `[style.rule]=\"expression\"`).\n  BindingType[BindingType[\"Style\"] = 3] = \"Style\";\n  // A binding to an animation reference (e.g. `[animate.key]=\"expression\"`).\n  BindingType[BindingType[\"Animation\"] = 4] = \"Animation\";\n  // Property side of a two-way binding (e.g. `[(property)]=\"expression\"`).\n  BindingType[BindingType[\"TwoWay\"] = 5] = \"TwoWay\";\n})(BindingType || (BindingType = {}));\nclass BoundElementProperty {\n  constructor(name, type, securityContext, value, unit, sourceSpan, keySpan, valueSpan) {\n    this.name = name;\n    this.type = type;\n    this.securityContext = securityContext;\n    this.value = value;\n    this.unit = unit;\n    this.sourceSpan = sourceSpan;\n    this.keySpan = keySpan;\n    this.valueSpan = valueSpan;\n  }\n}\nvar TagContentType;\n(function (TagContentType) {\n  TagContentType[TagContentType[\"RAW_TEXT\"] = 0] = \"RAW_TEXT\";\n  TagContentType[TagContentType[\"ESCAPABLE_RAW_TEXT\"] = 1] = \"ESCAPABLE_RAW_TEXT\";\n  TagContentType[TagContentType[\"PARSABLE_DATA\"] = 2] = \"PARSABLE_DATA\";\n})(TagContentType || (TagContentType = {}));\nfunction splitNsName(elementName, fatal = true) {\n  if (elementName[0] != ':') {\n    return [null, elementName];\n  }\n  const colonIndex = elementName.indexOf(':', 1);\n  if (colonIndex === -1) {\n    if (fatal) {\n      throw new Error(`Unsupported format \"${elementName}\" expecting \":namespace:name\"`);\n    } else {\n      return [null, elementName];\n    }\n  }\n  return [elementName.slice(1, colonIndex), elementName.slice(colonIndex + 1)];\n}\n// `<ng-container>` tags work the same regardless the namespace\nfunction isNgContainer(tagName) {\n  return splitNsName(tagName)[1] === 'ng-container';\n}\n// `<ng-content>` tags work the same regardless the namespace\nfunction isNgContent(tagName) {\n  return splitNsName(tagName)[1] === 'ng-content';\n}\n// `<ng-template>` tags work the same regardless the namespace\nfunction isNgTemplate(tagName) {\n  return splitNsName(tagName)[1] === 'ng-template';\n}\nfunction getNsPrefix(fullName) {\n  return fullName === null ? null : splitNsName(fullName)[0];\n}\nfunction mergeNsAndName(prefix, localName) {\n  return prefix ? `:${prefix}:${localName}` : localName;\n}\n\n/**\n * This is an R3 `Node`-like wrapper for a raw `html.Comment` node. We do not currently\n * require the implementation of a visitor for Comments as they are only collected at\n * the top-level of the R3 AST, and only if `Render3ParseOptions['collectCommentNodes']`\n * is true.\n */\nclass Comment$1 {\n  constructor(value, sourceSpan) {\n    this.value = value;\n    this.sourceSpan = sourceSpan;\n  }\n  visit(_visitor) {\n    throw new Error('visit() not implemented for Comment');\n  }\n}\nclass Text$3 {\n  constructor(value, sourceSpan) {\n    this.value = value;\n    this.sourceSpan = sourceSpan;\n  }\n  visit(visitor) {\n    return visitor.visitText(this);\n  }\n}\nclass BoundText {\n  constructor(value, sourceSpan, i18n) {\n    this.value = value;\n    this.sourceSpan = sourceSpan;\n    this.i18n = i18n;\n  }\n  visit(visitor) {\n    return visitor.visitBoundText(this);\n  }\n}\n/**\n * Represents a text attribute in the template.\n *\n * `valueSpan` may not be present in cases where there is no value `<div a></div>`.\n * `keySpan` may also not be present for synthetic attributes from ICU expansions.\n */\nclass TextAttribute {\n  constructor(name, value, sourceSpan, keySpan, valueSpan, i18n) {\n    this.name = name;\n    this.value = value;\n    this.sourceSpan = sourceSpan;\n    this.keySpan = keySpan;\n    this.valueSpan = valueSpan;\n    this.i18n = i18n;\n  }\n  visit(visitor) {\n    return visitor.visitTextAttribute(this);\n  }\n}\nclass BoundAttribute {\n  constructor(name, type, securityContext, value, unit, sourceSpan, keySpan, valueSpan, i18n) {\n    this.name = name;\n    this.type = type;\n    this.securityContext = securityContext;\n    this.value = value;\n    this.unit = unit;\n    this.sourceSpan = sourceSpan;\n    this.keySpan = keySpan;\n    this.valueSpan = valueSpan;\n    this.i18n = i18n;\n  }\n  static fromBoundElementProperty(prop, i18n) {\n    if (prop.keySpan === undefined) {\n      throw new Error(`Unexpected state: keySpan must be defined for bound attributes but was not for ${prop.name}: ${prop.sourceSpan}`);\n    }\n    return new BoundAttribute(prop.name, prop.type, prop.securityContext, prop.value, prop.unit, prop.sourceSpan, prop.keySpan, prop.valueSpan, i18n);\n  }\n  visit(visitor) {\n    return visitor.visitBoundAttribute(this);\n  }\n}\nclass BoundEvent {\n  constructor(name, type, handler, target, phase, sourceSpan, handlerSpan, keySpan) {\n    this.name = name;\n    this.type = type;\n    this.handler = handler;\n    this.target = target;\n    this.phase = phase;\n    this.sourceSpan = sourceSpan;\n    this.handlerSpan = handlerSpan;\n    this.keySpan = keySpan;\n  }\n  static fromParsedEvent(event) {\n    const target = event.type === ParsedEventType.Regular ? event.targetOrPhase : null;\n    const phase = event.type === ParsedEventType.Animation ? event.targetOrPhase : null;\n    if (event.keySpan === undefined) {\n      throw new Error(`Unexpected state: keySpan must be defined for bound event but was not for ${event.name}: ${event.sourceSpan}`);\n    }\n    return new BoundEvent(event.name, event.type, event.handler, target, phase, event.sourceSpan, event.handlerSpan, event.keySpan);\n  }\n  visit(visitor) {\n    return visitor.visitBoundEvent(this);\n  }\n}\nclass Element$1 {\n  constructor(name, attributes, inputs, outputs, children, references, sourceSpan, startSourceSpan, endSourceSpan, i18n) {\n    this.name = name;\n    this.attributes = attributes;\n    this.inputs = inputs;\n    this.outputs = outputs;\n    this.children = children;\n    this.references = references;\n    this.sourceSpan = sourceSpan;\n    this.startSourceSpan = startSourceSpan;\n    this.endSourceSpan = endSourceSpan;\n    this.i18n = i18n;\n  }\n  visit(visitor) {\n    return visitor.visitElement(this);\n  }\n}\nclass DeferredTrigger {\n  constructor(nameSpan, sourceSpan, prefetchSpan, whenOrOnSourceSpan) {\n    this.nameSpan = nameSpan;\n    this.sourceSpan = sourceSpan;\n    this.prefetchSpan = prefetchSpan;\n    this.whenOrOnSourceSpan = whenOrOnSourceSpan;\n  }\n  visit(visitor) {\n    return visitor.visitDeferredTrigger(this);\n  }\n}\nclass BoundDeferredTrigger extends DeferredTrigger {\n  constructor(value, sourceSpan, prefetchSpan, whenSourceSpan) {\n    // BoundDeferredTrigger is for 'when' triggers. These aren't really \"triggers\" and don't have a\n    // nameSpan. Trigger names are the built in event triggers like hover, interaction, etc.\n    super( /** nameSpan */null, sourceSpan, prefetchSpan, whenSourceSpan);\n    this.value = value;\n  }\n}\nclass IdleDeferredTrigger extends DeferredTrigger {}\nclass ImmediateDeferredTrigger extends DeferredTrigger {}\nclass HoverDeferredTrigger extends DeferredTrigger {\n  constructor(reference, nameSpan, sourceSpan, prefetchSpan, onSourceSpan) {\n    super(nameSpan, sourceSpan, prefetchSpan, onSourceSpan);\n    this.reference = reference;\n  }\n}\nclass TimerDeferredTrigger extends DeferredTrigger {\n  constructor(delay, nameSpan, sourceSpan, prefetchSpan, onSourceSpan) {\n    super(nameSpan, sourceSpan, prefetchSpan, onSourceSpan);\n    this.delay = delay;\n  }\n}\nclass InteractionDeferredTrigger extends DeferredTrigger {\n  constructor(reference, nameSpan, sourceSpan, prefetchSpan, onSourceSpan) {\n    super(nameSpan, sourceSpan, prefetchSpan, onSourceSpan);\n    this.reference = reference;\n  }\n}\nclass ViewportDeferredTrigger extends DeferredTrigger {\n  constructor(reference, nameSpan, sourceSpan, prefetchSpan, onSourceSpan) {\n    super(nameSpan, sourceSpan, prefetchSpan, onSourceSpan);\n    this.reference = reference;\n  }\n}\nclass BlockNode {\n  constructor(nameSpan, sourceSpan, startSourceSpan, endSourceSpan) {\n    this.nameSpan = nameSpan;\n    this.sourceSpan = sourceSpan;\n    this.startSourceSpan = startSourceSpan;\n    this.endSourceSpan = endSourceSpan;\n  }\n}\nclass DeferredBlockPlaceholder extends BlockNode {\n  constructor(children, minimumTime, nameSpan, sourceSpan, startSourceSpan, endSourceSpan, i18n) {\n    super(nameSpan, sourceSpan, startSourceSpan, endSourceSpan);\n    this.children = children;\n    this.minimumTime = minimumTime;\n    this.i18n = i18n;\n  }\n  visit(visitor) {\n    return visitor.visitDeferredBlockPlaceholder(this);\n  }\n}\nclass DeferredBlockLoading extends BlockNode {\n  constructor(children, afterTime, minimumTime, nameSpan, sourceSpan, startSourceSpan, endSourceSpan, i18n) {\n    super(nameSpan, sourceSpan, startSourceSpan, endSourceSpan);\n    this.children = children;\n    this.afterTime = afterTime;\n    this.minimumTime = minimumTime;\n    this.i18n = i18n;\n  }\n  visit(visitor) {\n    return visitor.visitDeferredBlockLoading(this);\n  }\n}\nclass DeferredBlockError extends BlockNode {\n  constructor(children, nameSpan, sourceSpan, startSourceSpan, endSourceSpan, i18n) {\n    super(nameSpan, sourceSpan, startSourceSpan, endSourceSpan);\n    this.children = children;\n    this.i18n = i18n;\n  }\n  visit(visitor) {\n    return visitor.visitDeferredBlockError(this);\n  }\n}\nclass DeferredBlock extends BlockNode {\n  constructor(children, triggers, prefetchTriggers, placeholder, loading, error, nameSpan, sourceSpan, mainBlockSpan, startSourceSpan, endSourceSpan, i18n) {\n    super(nameSpan, sourceSpan, startSourceSpan, endSourceSpan);\n    this.children = children;\n    this.placeholder = placeholder;\n    this.loading = loading;\n    this.error = error;\n    this.mainBlockSpan = mainBlockSpan;\n    this.i18n = i18n;\n    this.triggers = triggers;\n    this.prefetchTriggers = prefetchTriggers;\n    // We cache the keys since we know that they won't change and we\n    // don't want to enumarate them every time we're traversing the AST.\n    this.definedTriggers = Object.keys(triggers);\n    this.definedPrefetchTriggers = Object.keys(prefetchTriggers);\n  }\n  visit(visitor) {\n    return visitor.visitDeferredBlock(this);\n  }\n  visitAll(visitor) {\n    this.visitTriggers(this.definedTriggers, this.triggers, visitor);\n    this.visitTriggers(this.definedPrefetchTriggers, this.prefetchTriggers, visitor);\n    visitAll$1(visitor, this.children);\n    const remainingBlocks = [this.placeholder, this.loading, this.error].filter(x => x !== null);\n    visitAll$1(visitor, remainingBlocks);\n  }\n  visitTriggers(keys, triggers, visitor) {\n    visitAll$1(visitor, keys.map(k => triggers[k]));\n  }\n}\nclass SwitchBlock extends BlockNode {\n  constructor(expression, cases,\n  /**\n   * These blocks are only captured to allow for autocompletion in the language service. They\n   * aren't meant to be processed in any other way.\n   */\n  unknownBlocks, sourceSpan, startSourceSpan, endSourceSpan, nameSpan) {\n    super(nameSpan, sourceSpan, startSourceSpan, endSourceSpan);\n    this.expression = expression;\n    this.cases = cases;\n    this.unknownBlocks = unknownBlocks;\n  }\n  visit(visitor) {\n    return visitor.visitSwitchBlock(this);\n  }\n}\nclass SwitchBlockCase extends BlockNode {\n  constructor(expression, children, sourceSpan, startSourceSpan, endSourceSpan, nameSpan, i18n) {\n    super(nameSpan, sourceSpan, startSourceSpan, endSourceSpan);\n    this.expression = expression;\n    this.children = children;\n    this.i18n = i18n;\n  }\n  visit(visitor) {\n    return visitor.visitSwitchBlockCase(this);\n  }\n}\nclass ForLoopBlock extends BlockNode {\n  constructor(item, expression, trackBy, trackKeywordSpan, contextVariables, children, empty, sourceSpan, mainBlockSpan, startSourceSpan, endSourceSpan, nameSpan, i18n) {\n    super(nameSpan, sourceSpan, startSourceSpan, endSourceSpan);\n    this.item = item;\n    this.expression = expression;\n    this.trackBy = trackBy;\n    this.trackKeywordSpan = trackKeywordSpan;\n    this.contextVariables = contextVariables;\n    this.children = children;\n    this.empty = empty;\n    this.mainBlockSpan = mainBlockSpan;\n    this.i18n = i18n;\n  }\n  visit(visitor) {\n    return visitor.visitForLoopBlock(this);\n  }\n}\nclass ForLoopBlockEmpty extends BlockNode {\n  constructor(children, sourceSpan, startSourceSpan, endSourceSpan, nameSpan, i18n) {\n    super(nameSpan, sourceSpan, startSourceSpan, endSourceSpan);\n    this.children = children;\n    this.i18n = i18n;\n  }\n  visit(visitor) {\n    return visitor.visitForLoopBlockEmpty(this);\n  }\n}\nclass IfBlock extends BlockNode {\n  constructor(branches, sourceSpan, startSourceSpan, endSourceSpan, nameSpan) {\n    super(nameSpan, sourceSpan, startSourceSpan, endSourceSpan);\n    this.branches = branches;\n  }\n  visit(visitor) {\n    return visitor.visitIfBlock(this);\n  }\n}\nclass IfBlockBranch extends BlockNode {\n  constructor(expression, children, expressionAlias, sourceSpan, startSourceSpan, endSourceSpan, nameSpan, i18n) {\n    super(nameSpan, sourceSpan, startSourceSpan, endSourceSpan);\n    this.expression = expression;\n    this.children = children;\n    this.expressionAlias = expressionAlias;\n    this.i18n = i18n;\n  }\n  visit(visitor) {\n    return visitor.visitIfBlockBranch(this);\n  }\n}\nclass UnknownBlock {\n  constructor(name, sourceSpan, nameSpan) {\n    this.name = name;\n    this.sourceSpan = sourceSpan;\n    this.nameSpan = nameSpan;\n  }\n  visit(visitor) {\n    return visitor.visitUnknownBlock(this);\n  }\n}\nclass LetDeclaration$1 {\n  constructor(name, value, sourceSpan, nameSpan, valueSpan) {\n    this.name = name;\n    this.value = value;\n    this.sourceSpan = sourceSpan;\n    this.nameSpan = nameSpan;\n    this.valueSpan = valueSpan;\n  }\n  visit(visitor) {\n    return visitor.visitLetDeclaration(this);\n  }\n}\nclass Template {\n  constructor(\n  // tagName is the name of the container element, if applicable.\n  // `null` is a special case for when there is a structural directive on an `ng-template` so\n  // the renderer can differentiate between the synthetic template and the one written in the\n  // file.\n  tagName, attributes, inputs, outputs, templateAttrs, children, references, variables, sourceSpan, startSourceSpan, endSourceSpan, i18n) {\n    this.tagName = tagName;\n    this.attributes = attributes;\n    this.inputs = inputs;\n    this.outputs = outputs;\n    this.templateAttrs = templateAttrs;\n    this.children = children;\n    this.references = references;\n    this.variables = variables;\n    this.sourceSpan = sourceSpan;\n    this.startSourceSpan = startSourceSpan;\n    this.endSourceSpan = endSourceSpan;\n    this.i18n = i18n;\n  }\n  visit(visitor) {\n    return visitor.visitTemplate(this);\n  }\n}\nclass Content {\n  constructor(selector, attributes, children, sourceSpan, i18n) {\n    this.selector = selector;\n    this.attributes = attributes;\n    this.children = children;\n    this.sourceSpan = sourceSpan;\n    this.i18n = i18n;\n    this.name = 'ng-content';\n  }\n  visit(visitor) {\n    return visitor.visitContent(this);\n  }\n}\nclass Variable {\n  constructor(name, value, sourceSpan, keySpan, valueSpan) {\n    this.name = name;\n    this.value = value;\n    this.sourceSpan = sourceSpan;\n    this.keySpan = keySpan;\n    this.valueSpan = valueSpan;\n  }\n  visit(visitor) {\n    return visitor.visitVariable(this);\n  }\n}\nclass Reference {\n  constructor(name, value, sourceSpan, keySpan, valueSpan) {\n    this.name = name;\n    this.value = value;\n    this.sourceSpan = sourceSpan;\n    this.keySpan = keySpan;\n    this.valueSpan = valueSpan;\n  }\n  visit(visitor) {\n    return visitor.visitReference(this);\n  }\n}\nclass Icu$1 {\n  constructor(vars, placeholders, sourceSpan, i18n) {\n    this.vars = vars;\n    this.placeholders = placeholders;\n    this.sourceSpan = sourceSpan;\n    this.i18n = i18n;\n  }\n  visit(visitor) {\n    return visitor.visitIcu(this);\n  }\n}\nclass RecursiveVisitor$1 {\n  visitElement(element) {\n    visitAll$1(this, element.attributes);\n    visitAll$1(this, element.inputs);\n    visitAll$1(this, element.outputs);\n    visitAll$1(this, element.children);\n    visitAll$1(this, element.references);\n  }\n  visitTemplate(template) {\n    visitAll$1(this, template.attributes);\n    visitAll$1(this, template.inputs);\n    visitAll$1(this, template.outputs);\n    visitAll$1(this, template.children);\n    visitAll$1(this, template.references);\n    visitAll$1(this, template.variables);\n  }\n  visitDeferredBlock(deferred) {\n    deferred.visitAll(this);\n  }\n  visitDeferredBlockPlaceholder(block) {\n    visitAll$1(this, block.children);\n  }\n  visitDeferredBlockError(block) {\n    visitAll$1(this, block.children);\n  }\n  visitDeferredBlockLoading(block) {\n    visitAll$1(this, block.children);\n  }\n  visitSwitchBlock(block) {\n    visitAll$1(this, block.cases);\n  }\n  visitSwitchBlockCase(block) {\n    visitAll$1(this, block.children);\n  }\n  visitForLoopBlock(block) {\n    const blockItems = [block.item, ...block.contextVariables, ...block.children];\n    block.empty && blockItems.push(block.empty);\n    visitAll$1(this, blockItems);\n  }\n  visitForLoopBlockEmpty(block) {\n    visitAll$1(this, block.children);\n  }\n  visitIfBlock(block) {\n    visitAll$1(this, block.branches);\n  }\n  visitIfBlockBranch(block) {\n    const blockItems = block.children;\n    block.expressionAlias && blockItems.push(block.expressionAlias);\n    visitAll$1(this, blockItems);\n  }\n  visitContent(content) {\n    visitAll$1(this, content.children);\n  }\n  visitVariable(variable) {}\n  visitReference(reference) {}\n  visitTextAttribute(attribute) {}\n  visitBoundAttribute(attribute) {}\n  visitBoundEvent(attribute) {}\n  visitText(text) {}\n  visitBoundText(text) {}\n  visitIcu(icu) {}\n  visitDeferredTrigger(trigger) {}\n  visitUnknownBlock(block) {}\n  visitLetDeclaration(decl) {}\n}\nfunction visitAll$1(visitor, nodes) {\n  const result = [];\n  if (visitor.visit) {\n    for (const node of nodes) {\n      visitor.visit(node) || node.visit(visitor);\n    }\n  } else {\n    for (const node of nodes) {\n      const newNode = node.visit(visitor);\n      if (newNode) {\n        result.push(newNode);\n      }\n    }\n  }\n  return result;\n}\nclass Message {\n  /**\n   * @param nodes message AST\n   * @param placeholders maps placeholder names to static content and their source spans\n   * @param placeholderToMessage maps placeholder names to messages (used for nested ICU messages)\n   * @param meaning\n   * @param description\n   * @param customId\n   */\n  constructor(nodes, placeholders, placeholderToMessage, meaning, description, customId) {\n    this.nodes = nodes;\n    this.placeholders = placeholders;\n    this.placeholderToMessage = placeholderToMessage;\n    this.meaning = meaning;\n    this.description = description;\n    this.customId = customId;\n    /** The ids to use if there are no custom id and if `i18nLegacyMessageIdFormat` is not empty */\n    this.legacyIds = [];\n    this.id = this.customId;\n    this.messageString = serializeMessage(this.nodes);\n    if (nodes.length) {\n      this.sources = [{\n        filePath: nodes[0].sourceSpan.start.file.url,\n        startLine: nodes[0].sourceSpan.start.line + 1,\n        startCol: nodes[0].sourceSpan.start.col + 1,\n        endLine: nodes[nodes.length - 1].sourceSpan.end.line + 1,\n        endCol: nodes[0].sourceSpan.start.col + 1\n      }];\n    } else {\n      this.sources = [];\n    }\n  }\n}\nclass Text$2 {\n  constructor(value, sourceSpan) {\n    this.value = value;\n    this.sourceSpan = sourceSpan;\n  }\n  visit(visitor, context) {\n    return visitor.visitText(this, context);\n  }\n}\n// TODO(vicb): do we really need this node (vs an array) ?\nclass Container {\n  constructor(children, sourceSpan) {\n    this.children = children;\n    this.sourceSpan = sourceSpan;\n  }\n  visit(visitor, context) {\n    return visitor.visitContainer(this, context);\n  }\n}\nclass Icu {\n  constructor(expression, type, cases, sourceSpan, expressionPlaceholder) {\n    this.expression = expression;\n    this.type = type;\n    this.cases = cases;\n    this.sourceSpan = sourceSpan;\n    this.expressionPlaceholder = expressionPlaceholder;\n  }\n  visit(visitor, context) {\n    return visitor.visitIcu(this, context);\n  }\n}\nclass TagPlaceholder {\n  constructor(tag, attrs, startName, closeName, children, isVoid,\n  // TODO sourceSpan should cover all (we need a startSourceSpan and endSourceSpan)\n  sourceSpan, startSourceSpan, endSourceSpan) {\n    this.tag = tag;\n    this.attrs = attrs;\n    this.startName = startName;\n    this.closeName = closeName;\n    this.children = children;\n    this.isVoid = isVoid;\n    this.sourceSpan = sourceSpan;\n    this.startSourceSpan = startSourceSpan;\n    this.endSourceSpan = endSourceSpan;\n  }\n  visit(visitor, context) {\n    return visitor.visitTagPlaceholder(this, context);\n  }\n}\nclass Placeholder {\n  constructor(value, name, sourceSpan) {\n    this.value = value;\n    this.name = name;\n    this.sourceSpan = sourceSpan;\n  }\n  visit(visitor, context) {\n    return visitor.visitPlaceholder(this, context);\n  }\n}\nclass IcuPlaceholder {\n  constructor(value, name, sourceSpan) {\n    this.value = value;\n    this.name = name;\n    this.sourceSpan = sourceSpan;\n  }\n  visit(visitor, context) {\n    return visitor.visitIcuPlaceholder(this, context);\n  }\n}\nclass BlockPlaceholder {\n  constructor(name, parameters, startName, closeName, children, sourceSpan, startSourceSpan, endSourceSpan) {\n    this.name = name;\n    this.parameters = parameters;\n    this.startName = startName;\n    this.closeName = closeName;\n    this.children = children;\n    this.sourceSpan = sourceSpan;\n    this.startSourceSpan = startSourceSpan;\n    this.endSourceSpan = endSourceSpan;\n  }\n  visit(visitor, context) {\n    return visitor.visitBlockPlaceholder(this, context);\n  }\n}\n// Clone the AST\nclass CloneVisitor {\n  visitText(text, context) {\n    return new Text$2(text.value, text.sourceSpan);\n  }\n  visitContainer(container, context) {\n    const children = container.children.map(n => n.visit(this, context));\n    return new Container(children, container.sourceSpan);\n  }\n  visitIcu(icu, context) {\n    const cases = {};\n    Object.keys(icu.cases).forEach(key => cases[key] = icu.cases[key].visit(this, context));\n    const msg = new Icu(icu.expression, icu.type, cases, icu.sourceSpan, icu.expressionPlaceholder);\n    return msg;\n  }\n  visitTagPlaceholder(ph, context) {\n    const children = ph.children.map(n => n.visit(this, context));\n    return new TagPlaceholder(ph.tag, ph.attrs, ph.startName, ph.closeName, children, ph.isVoid, ph.sourceSpan, ph.startSourceSpan, ph.endSourceSpan);\n  }\n  visitPlaceholder(ph, context) {\n    return new Placeholder(ph.value, ph.name, ph.sourceSpan);\n  }\n  visitIcuPlaceholder(ph, context) {\n    return new IcuPlaceholder(ph.value, ph.name, ph.sourceSpan);\n  }\n  visitBlockPlaceholder(ph, context) {\n    const children = ph.children.map(n => n.visit(this, context));\n    return new BlockPlaceholder(ph.name, ph.parameters, ph.startName, ph.closeName, children, ph.sourceSpan, ph.startSourceSpan, ph.endSourceSpan);\n  }\n}\n// Visit all the nodes recursively\nclass RecurseVisitor {\n  visitText(text, context) {}\n  visitContainer(container, context) {\n    container.children.forEach(child => child.visit(this));\n  }\n  visitIcu(icu, context) {\n    Object.keys(icu.cases).forEach(k => {\n      icu.cases[k].visit(this);\n    });\n  }\n  visitTagPlaceholder(ph, context) {\n    ph.children.forEach(child => child.visit(this));\n  }\n  visitPlaceholder(ph, context) {}\n  visitIcuPlaceholder(ph, context) {}\n  visitBlockPlaceholder(ph, context) {\n    ph.children.forEach(child => child.visit(this));\n  }\n}\n/**\n * Serialize the message to the Localize backtick string format that would appear in compiled code.\n */\nfunction serializeMessage(messageNodes) {\n  const visitor = new LocalizeMessageStringVisitor();\n  const str = messageNodes.map(n => n.visit(visitor)).join('');\n  return str;\n}\nclass LocalizeMessageStringVisitor {\n  visitText(text) {\n    return text.value;\n  }\n  visitContainer(container) {\n    return container.children.map(child => child.visit(this)).join('');\n  }\n  visitIcu(icu) {\n    const strCases = Object.keys(icu.cases).map(k => `${k} {${icu.cases[k].visit(this)}}`);\n    return `{${icu.expressionPlaceholder}, ${icu.type}, ${strCases.join(' ')}}`;\n  }\n  visitTagPlaceholder(ph) {\n    const children = ph.children.map(child => child.visit(this)).join('');\n    return `{$${ph.startName}}${children}{$${ph.closeName}}`;\n  }\n  visitPlaceholder(ph) {\n    return `{$${ph.name}}`;\n  }\n  visitIcuPlaceholder(ph) {\n    return `{$${ph.name}}`;\n  }\n  visitBlockPlaceholder(ph) {\n    const children = ph.children.map(child => child.visit(this)).join('');\n    return `{$${ph.startName}}${children}{$${ph.closeName}}`;\n  }\n}\nclass Serializer {\n  // Creates a name mapper, see `PlaceholderMapper`\n  // Returning `null` means that no name mapping is used.\n  createNameMapper(message) {\n    return null;\n  }\n}\n/**\n * A simple mapper that take a function to transform an internal name to a public name\n */\nclass SimplePlaceholderMapper extends RecurseVisitor {\n  // create a mapping from the message\n  constructor(message, mapName) {\n    super();\n    this.mapName = mapName;\n    this.internalToPublic = {};\n    this.publicToNextId = {};\n    this.publicToInternal = {};\n    message.nodes.forEach(node => node.visit(this));\n  }\n  toPublicName(internalName) {\n    return this.internalToPublic.hasOwnProperty(internalName) ? this.internalToPublic[internalName] : null;\n  }\n  toInternalName(publicName) {\n    return this.publicToInternal.hasOwnProperty(publicName) ? this.publicToInternal[publicName] : null;\n  }\n  visitText(text, context) {\n    return null;\n  }\n  visitTagPlaceholder(ph, context) {\n    this.visitPlaceholderName(ph.startName);\n    super.visitTagPlaceholder(ph, context);\n    this.visitPlaceholderName(ph.closeName);\n  }\n  visitPlaceholder(ph, context) {\n    this.visitPlaceholderName(ph.name);\n  }\n  visitBlockPlaceholder(ph, context) {\n    this.visitPlaceholderName(ph.startName);\n    super.visitBlockPlaceholder(ph, context);\n    this.visitPlaceholderName(ph.closeName);\n  }\n  visitIcuPlaceholder(ph, context) {\n    this.visitPlaceholderName(ph.name);\n  }\n  // XMB placeholders could only contains A-Z, 0-9 and _\n  visitPlaceholderName(internalName) {\n    if (!internalName || this.internalToPublic.hasOwnProperty(internalName)) {\n      return;\n    }\n    let publicName = this.mapName(internalName);\n    if (this.publicToInternal.hasOwnProperty(publicName)) {\n      // Create a new XMB when it has already been used\n      const nextId = this.publicToNextId[publicName];\n      this.publicToNextId[publicName] = nextId + 1;\n      publicName = `${publicName}_${nextId}`;\n    } else {\n      this.publicToNextId[publicName] = 1;\n    }\n    this.internalToPublic[internalName] = publicName;\n    this.publicToInternal[publicName] = internalName;\n  }\n}\nclass _Visitor$2 {\n  visitTag(tag) {\n    const strAttrs = this._serializeAttributes(tag.attrs);\n    if (tag.children.length == 0) {\n      return `<${tag.name}${strAttrs}/>`;\n    }\n    const strChildren = tag.children.map(node => node.visit(this));\n    return `<${tag.name}${strAttrs}>${strChildren.join('')}</${tag.name}>`;\n  }\n  visitText(text) {\n    return text.value;\n  }\n  visitDeclaration(decl) {\n    return `<?xml${this._serializeAttributes(decl.attrs)} ?>`;\n  }\n  _serializeAttributes(attrs) {\n    const strAttrs = Object.keys(attrs).map(name => `${name}=\"${attrs[name]}\"`).join(' ');\n    return strAttrs.length > 0 ? ' ' + strAttrs : '';\n  }\n  visitDoctype(doctype) {\n    return `<!DOCTYPE ${doctype.rootTag} [\\n${doctype.dtd}\\n]>`;\n  }\n}\nconst _visitor = new _Visitor$2();\nfunction serialize(nodes) {\n  return nodes.map(node => node.visit(_visitor)).join('');\n}\nclass Declaration {\n  constructor(unescapedAttrs) {\n    this.attrs = {};\n    Object.keys(unescapedAttrs).forEach(k => {\n      this.attrs[k] = escapeXml(unescapedAttrs[k]);\n    });\n  }\n  visit(visitor) {\n    return visitor.visitDeclaration(this);\n  }\n}\nclass Doctype {\n  constructor(rootTag, dtd) {\n    this.rootTag = rootTag;\n    this.dtd = dtd;\n  }\n  visit(visitor) {\n    return visitor.visitDoctype(this);\n  }\n}\nclass Tag {\n  constructor(name, unescapedAttrs = {}, children = []) {\n    this.name = name;\n    this.children = children;\n    this.attrs = {};\n    Object.keys(unescapedAttrs).forEach(k => {\n      this.attrs[k] = escapeXml(unescapedAttrs[k]);\n    });\n  }\n  visit(visitor) {\n    return visitor.visitTag(this);\n  }\n}\nclass Text$1 {\n  constructor(unescapedValue) {\n    this.value = escapeXml(unescapedValue);\n  }\n  visit(visitor) {\n    return visitor.visitText(this);\n  }\n}\nclass CR extends Text$1 {\n  constructor(ws = 0) {\n    super(`\\n${new Array(ws + 1).join(' ')}`);\n  }\n}\nconst _ESCAPED_CHARS = [[/&/g, '&amp;'], [/\"/g, '&quot;'], [/'/g, '&apos;'], [/</g, '&lt;'], [/>/g, '&gt;']];\n// Escape `_ESCAPED_CHARS` characters in the given text with encoded entities\nfunction escapeXml(text) {\n  return _ESCAPED_CHARS.reduce((text, entry) => text.replace(entry[0], entry[1]), text);\n}\n\n/**\n * Defines the `handler` value on the serialized XMB, indicating that Angular\n * generated the bundle. This is useful for analytics in Translation Console.\n *\n * NOTE: Keep in sync with\n * packages/localize/tools/src/extract/translation_files/xmb_translation_serializer.ts.\n */\nconst _XMB_HANDLER = 'angular';\nconst _MESSAGES_TAG = 'messagebundle';\nconst _MESSAGE_TAG = 'msg';\nconst _PLACEHOLDER_TAG$3 = 'ph';\nconst _EXAMPLE_TAG = 'ex';\nconst _SOURCE_TAG$2 = 'source';\nconst _DOCTYPE = `<!ELEMENT messagebundle (msg)*>\n<!ATTLIST messagebundle class CDATA #IMPLIED>\n\n<!ELEMENT msg (#PCDATA|ph|source)*>\n<!ATTLIST msg id CDATA #IMPLIED>\n<!ATTLIST msg seq CDATA #IMPLIED>\n<!ATTLIST msg name CDATA #IMPLIED>\n<!ATTLIST msg desc CDATA #IMPLIED>\n<!ATTLIST msg meaning CDATA #IMPLIED>\n<!ATTLIST msg obsolete (obsolete) #IMPLIED>\n<!ATTLIST msg xml:space (default|preserve) \"default\">\n<!ATTLIST msg is_hidden CDATA #IMPLIED>\n\n<!ELEMENT source (#PCDATA)>\n\n<!ELEMENT ph (#PCDATA|ex)*>\n<!ATTLIST ph name CDATA #REQUIRED>\n\n<!ELEMENT ex (#PCDATA)>`;\nclass Xmb extends Serializer {\n  write(messages, locale) {\n    const exampleVisitor = new ExampleVisitor();\n    const visitor = new _Visitor$1();\n    const rootNode = new Tag(_MESSAGES_TAG);\n    rootNode.attrs['handler'] = _XMB_HANDLER;\n    messages.forEach(message => {\n      const attrs = {\n        id: message.id\n      };\n      if (message.description) {\n        attrs['desc'] = message.description;\n      }\n      if (message.meaning) {\n        attrs['meaning'] = message.meaning;\n      }\n      let sourceTags = [];\n      message.sources.forEach(source => {\n        sourceTags.push(new Tag(_SOURCE_TAG$2, {}, [new Text$1(`${source.filePath}:${source.startLine}${source.endLine !== source.startLine ? ',' + source.endLine : ''}`)]));\n      });\n      rootNode.children.push(new CR(2), new Tag(_MESSAGE_TAG, attrs, [...sourceTags, ...visitor.serialize(message.nodes)]));\n    });\n    rootNode.children.push(new CR());\n    return serialize([new Declaration({\n      version: '1.0',\n      encoding: 'UTF-8'\n    }), new CR(), new Doctype(_MESSAGES_TAG, _DOCTYPE), new CR(), exampleVisitor.addDefaultExamples(rootNode), new CR()]);\n  }\n  load(content, url) {\n    throw new Error('Unsupported');\n  }\n  digest(message) {\n    return digest(message);\n  }\n  createNameMapper(message) {\n    return new SimplePlaceholderMapper(message, toPublicName);\n  }\n}\nclass _Visitor$1 {\n  visitText(text, context) {\n    return [new Text$1(text.value)];\n  }\n  visitContainer(container, context) {\n    const nodes = [];\n    container.children.forEach(node => nodes.push(...node.visit(this)));\n    return nodes;\n  }\n  visitIcu(icu, context) {\n    const nodes = [new Text$1(`{${icu.expressionPlaceholder}, ${icu.type}, `)];\n    Object.keys(icu.cases).forEach(c => {\n      nodes.push(new Text$1(`${c} {`), ...icu.cases[c].visit(this), new Text$1(`} `));\n    });\n    nodes.push(new Text$1(`}`));\n    return nodes;\n  }\n  visitTagPlaceholder(ph, context) {\n    const startTagAsText = new Text$1(`<${ph.tag}>`);\n    const startEx = new Tag(_EXAMPLE_TAG, {}, [startTagAsText]);\n    // TC requires PH to have a non empty EX, and uses the text node to show the \"original\" value.\n    const startTagPh = new Tag(_PLACEHOLDER_TAG$3, {\n      name: ph.startName\n    }, [startEx, startTagAsText]);\n    if (ph.isVoid) {\n      // void tags have no children nor closing tags\n      return [startTagPh];\n    }\n    const closeTagAsText = new Text$1(`</${ph.tag}>`);\n    const closeEx = new Tag(_EXAMPLE_TAG, {}, [closeTagAsText]);\n    // TC requires PH to have a non empty EX, and uses the text node to show the \"original\" value.\n    const closeTagPh = new Tag(_PLACEHOLDER_TAG$3, {\n      name: ph.closeName\n    }, [closeEx, closeTagAsText]);\n    return [startTagPh, ...this.serialize(ph.children), closeTagPh];\n  }\n  visitPlaceholder(ph, context) {\n    const interpolationAsText = new Text$1(`{{${ph.value}}}`);\n    // Example tag needs to be not-empty for TC.\n    const exTag = new Tag(_EXAMPLE_TAG, {}, [interpolationAsText]);\n    return [\n    // TC requires PH to have a non empty EX, and uses the text node to show the \"original\" value.\n    new Tag(_PLACEHOLDER_TAG$3, {\n      name: ph.name\n    }, [exTag, interpolationAsText])];\n  }\n  visitBlockPlaceholder(ph, context) {\n    const startAsText = new Text$1(`@${ph.name}`);\n    const startEx = new Tag(_EXAMPLE_TAG, {}, [startAsText]);\n    // TC requires PH to have a non empty EX, and uses the text node to show the \"original\" value.\n    const startTagPh = new Tag(_PLACEHOLDER_TAG$3, {\n      name: ph.startName\n    }, [startEx, startAsText]);\n    const closeAsText = new Text$1(`}`);\n    const closeEx = new Tag(_EXAMPLE_TAG, {}, [closeAsText]);\n    // TC requires PH to have a non empty EX, and uses the text node to show the \"original\" value.\n    const closeTagPh = new Tag(_PLACEHOLDER_TAG$3, {\n      name: ph.closeName\n    }, [closeEx, closeAsText]);\n    return [startTagPh, ...this.serialize(ph.children), closeTagPh];\n  }\n  visitIcuPlaceholder(ph, context) {\n    const icuExpression = ph.value.expression;\n    const icuType = ph.value.type;\n    const icuCases = Object.keys(ph.value.cases).map(value => value + ' {...}').join(' ');\n    const icuAsText = new Text$1(`{${icuExpression}, ${icuType}, ${icuCases}}`);\n    const exTag = new Tag(_EXAMPLE_TAG, {}, [icuAsText]);\n    return [\n    // TC requires PH to have a non empty EX, and uses the text node to show the \"original\" value.\n    new Tag(_PLACEHOLDER_TAG$3, {\n      name: ph.name\n    }, [exTag, icuAsText])];\n  }\n  serialize(nodes) {\n    return [].concat(...nodes.map(node => node.visit(this)));\n  }\n}\nfunction digest(message) {\n  return decimalDigest(message);\n}\n// TC requires at least one non-empty example on placeholders\nclass ExampleVisitor {\n  addDefaultExamples(node) {\n    node.visit(this);\n    return node;\n  }\n  visitTag(tag) {\n    if (tag.name === _PLACEHOLDER_TAG$3) {\n      if (!tag.children || tag.children.length == 0) {\n        const exText = new Text$1(tag.attrs['name'] || '...');\n        tag.children = [new Tag(_EXAMPLE_TAG, {}, [exText])];\n      }\n    } else if (tag.children) {\n      tag.children.forEach(node => node.visit(this));\n    }\n  }\n  visitText(text) {}\n  visitDeclaration(decl) {}\n  visitDoctype(doctype) {}\n}\n// XMB/XTB placeholders can only contain A-Z, 0-9 and _\nfunction toPublicName(internalName) {\n  return internalName.toUpperCase().replace(/[^A-Z0-9_]/g, '_');\n}\n\n/** Name of the i18n attributes **/\nconst I18N_ATTR = 'i18n';\nconst I18N_ATTR_PREFIX = 'i18n-';\n/** Prefix of var expressions used in ICUs */\nconst I18N_ICU_VAR_PREFIX = 'VAR_';\nfunction isI18nAttribute(name) {\n  return name === I18N_ATTR || name.startsWith(I18N_ATTR_PREFIX);\n}\nfunction hasI18nAttrs(element) {\n  return element.attrs.some(attr => isI18nAttribute(attr.name));\n}\nfunction icuFromI18nMessage(message) {\n  return message.nodes[0];\n}\nfunction placeholdersToParams(placeholders) {\n  const params = {};\n  placeholders.forEach((values, key) => {\n    params[key] = literal(values.length > 1 ? `[${values.join('|')}]` : values[0]);\n  });\n  return params;\n}\n/**\n * Format the placeholder names in a map of placeholders to expressions.\n *\n * The placeholder names are converted from \"internal\" format (e.g. `START_TAG_DIV_1`) to \"external\"\n * format (e.g. `startTagDiv_1`).\n *\n * @param params A map of placeholder names to expressions.\n * @param useCamelCase whether to camelCase the placeholder name when formatting.\n * @returns A new map of formatted placeholder names to expressions.\n */\nfunction formatI18nPlaceholderNamesInMap(params = {}, useCamelCase) {\n  const _params = {};\n  if (params && Object.keys(params).length) {\n    Object.keys(params).forEach(key => _params[formatI18nPlaceholderName(key, useCamelCase)] = params[key]);\n  }\n  return _params;\n}\n/**\n * Converts internal placeholder names to public-facing format\n * (for example to use in goog.getMsg call).\n * Example: `START_TAG_DIV_1` is converted to `startTagDiv_1`.\n *\n * @param name The placeholder name that should be formatted\n * @returns Formatted placeholder name\n */\nfunction formatI18nPlaceholderName(name, useCamelCase = true) {\n  const publicName = toPublicName(name);\n  if (!useCamelCase) {\n    return publicName;\n  }\n  const chunks = publicName.split('_');\n  if (chunks.length === 1) {\n    // if no \"_\" found - just lowercase the value\n    return name.toLowerCase();\n  }\n  let postfix;\n  // eject last element if it's a number\n  if (/^\\d+$/.test(chunks[chunks.length - 1])) {\n    postfix = chunks.pop();\n  }\n  let raw = chunks.shift().toLowerCase();\n  if (chunks.length) {\n    raw += chunks.map(c => c.charAt(0).toUpperCase() + c.slice(1).toLowerCase()).join('');\n  }\n  return postfix ? `${raw}_${postfix}` : raw;\n}\n\n/**\n * Checks whether an object key contains potentially unsafe chars, thus the key should be wrapped in\n * quotes. Note: we do not wrap all keys into quotes, as it may have impact on minification and may\n * not work in some cases when object keys are mangled by a minifier.\n *\n * TODO(FW-1136): this is a temporary solution, we need to come up with a better way of working with\n * inputs that contain potentially unsafe chars.\n */\nconst UNSAFE_OBJECT_KEY_NAME_REGEXP = /[-.]/;\n/** Name of the temporary to use during data binding */\nconst TEMPORARY_NAME = '_t';\n/** Name of the context parameter passed into a template function */\nconst CONTEXT_NAME = 'ctx';\n/** Name of the RenderFlag passed into a template function */\nconst RENDER_FLAGS = 'rf';\n/**\n * Creates an allocator for a temporary variable.\n *\n * A variable declaration is added to the statements the first time the allocator is invoked.\n */\nfunction temporaryAllocator(pushStatement, name) {\n  let temp = null;\n  return () => {\n    if (!temp) {\n      pushStatement(new DeclareVarStmt(TEMPORARY_NAME, undefined, DYNAMIC_TYPE));\n      temp = variable(name);\n    }\n    return temp;\n  };\n}\nfunction invalid(arg) {\n  throw new Error(`Invalid state: Visitor ${this.constructor.name} doesn't handle ${arg.constructor.name}`);\n}\nfunction asLiteral(value) {\n  if (Array.isArray(value)) {\n    return literalArr(value.map(asLiteral));\n  }\n  return literal(value, INFERRED_TYPE);\n}\n/**\n * Serializes inputs and outputs for `defineDirective` and `defineComponent`.\n *\n * This will attempt to generate optimized data structures to minimize memory or\n * file size of fully compiled applications.\n */\nfunction conditionallyCreateDirectiveBindingLiteral(map, forInputs) {\n  const keys = Object.getOwnPropertyNames(map);\n  if (keys.length === 0) {\n    return null;\n  }\n  return literalMap(keys.map(key => {\n    const value = map[key];\n    let declaredName;\n    let publicName;\n    let minifiedName;\n    let expressionValue;\n    if (typeof value === 'string') {\n      // canonical syntax: `dirProp: publicProp`\n      declaredName = key;\n      minifiedName = key;\n      publicName = value;\n      expressionValue = asLiteral(publicName);\n    } else {\n      minifiedName = key;\n      declaredName = value.classPropertyName;\n      publicName = value.bindingPropertyName;\n      const differentDeclaringName = publicName !== declaredName;\n      const hasDecoratorInputTransform = value.transformFunction !== null;\n      let flags = InputFlags.None;\n      // Build up input flags\n      if (value.isSignal) {\n        flags |= InputFlags.SignalBased;\n      }\n      if (hasDecoratorInputTransform) {\n        flags |= InputFlags.HasDecoratorInputTransform;\n      }\n      // Inputs, compared to outputs, will track their declared name (for `ngOnChanges`), support\n      // decorator input transform functions, or store flag information if there is any.\n      if (forInputs && (differentDeclaringName || hasDecoratorInputTransform || flags !== InputFlags.None)) {\n        const result = [literal(flags), asLiteral(publicName)];\n        if (differentDeclaringName || hasDecoratorInputTransform) {\n          result.push(asLiteral(declaredName));\n          if (hasDecoratorInputTransform) {\n            result.push(value.transformFunction);\n          }\n        }\n        expressionValue = literalArr(result);\n      } else {\n        expressionValue = asLiteral(publicName);\n      }\n    }\n    return {\n      key: minifiedName,\n      // put quotes around keys that contain potentially unsafe characters\n      quoted: UNSAFE_OBJECT_KEY_NAME_REGEXP.test(minifiedName),\n      value: expressionValue\n    };\n  }));\n}\n/**\n * A representation for an object literal used during codegen of definition objects. The generic\n * type `T` allows to reference a documented type of the generated structure, such that the\n * property names that are set can be resolved to their documented declaration.\n */\nclass DefinitionMap {\n  constructor() {\n    this.values = [];\n  }\n  set(key, value) {\n    if (value) {\n      const existing = this.values.find(value => value.key === key);\n      if (existing) {\n        existing.value = value;\n      } else {\n        this.values.push({\n          key: key,\n          value,\n          quoted: false\n        });\n      }\n    }\n  }\n  toLiteralMap() {\n    return literalMap(this.values);\n  }\n}\n/**\n * Creates a `CssSelector` from an AST node.\n */\nfunction createCssSelectorFromNode(node) {\n  const elementName = node instanceof Element$1 ? node.name : 'ng-template';\n  const attributes = getAttrsForDirectiveMatching(node);\n  const cssSelector = new CssSelector();\n  const elementNameNoNs = splitNsName(elementName)[1];\n  cssSelector.setElement(elementNameNoNs);\n  Object.getOwnPropertyNames(attributes).forEach(name => {\n    const nameNoNs = splitNsName(name)[1];\n    const value = attributes[name];\n    cssSelector.addAttribute(nameNoNs, value);\n    if (name.toLowerCase() === 'class') {\n      const classes = value.trim().split(/\\s+/);\n      classes.forEach(className => cssSelector.addClassName(className));\n    }\n  });\n  return cssSelector;\n}\n/**\n * Extract a map of properties to values for a given element or template node, which can be used\n * by the directive matching machinery.\n *\n * @param elOrTpl the element or template in question\n * @return an object set up for directive matching. For attributes on the element/template, this\n * object maps a property name to its (static) value. For any bindings, this map simply maps the\n * property name to an empty string.\n */\nfunction getAttrsForDirectiveMatching(elOrTpl) {\n  const attributesMap = {};\n  if (elOrTpl instanceof Template && elOrTpl.tagName !== 'ng-template') {\n    elOrTpl.templateAttrs.forEach(a => attributesMap[a.name] = '');\n  } else {\n    elOrTpl.attributes.forEach(a => {\n      if (!isI18nAttribute(a.name)) {\n        attributesMap[a.name] = a.value;\n      }\n    });\n    elOrTpl.inputs.forEach(i => {\n      if (i.type === BindingType.Property || i.type === BindingType.TwoWay) {\n        attributesMap[i.name] = '';\n      }\n    });\n    elOrTpl.outputs.forEach(o => {\n      attributesMap[o.name] = '';\n    });\n  }\n  return attributesMap;\n}\nfunction compileInjectable(meta, resolveForwardRefs) {\n  let result = null;\n  const factoryMeta = {\n    name: meta.name,\n    type: meta.type,\n    typeArgumentCount: meta.typeArgumentCount,\n    deps: [],\n    target: FactoryTarget$1.Injectable\n  };\n  if (meta.useClass !== undefined) {\n    // meta.useClass has two modes of operation. Either deps are specified, in which case `new` is\n    // used to instantiate the class with dependencies injected, or deps are not specified and\n    // the factory of the class is used to instantiate it.\n    //\n    // A special case exists for useClass: Type where Type is the injectable type itself and no\n    // deps are specified, in which case 'useClass' is effectively ignored.\n    const useClassOnSelf = meta.useClass.expression.isEquivalent(meta.type.value);\n    let deps = undefined;\n    if (meta.deps !== undefined) {\n      deps = meta.deps;\n    }\n    if (deps !== undefined) {\n      // factory: () => new meta.useClass(...deps)\n      result = compileFactoryFunction({\n        ...factoryMeta,\n        delegate: meta.useClass.expression,\n        delegateDeps: deps,\n        delegateType: R3FactoryDelegateType.Class\n      });\n    } else if (useClassOnSelf) {\n      result = compileFactoryFunction(factoryMeta);\n    } else {\n      result = {\n        statements: [],\n        expression: delegateToFactory(meta.type.value, meta.useClass.expression, resolveForwardRefs)\n      };\n    }\n  } else if (meta.useFactory !== undefined) {\n    if (meta.deps !== undefined) {\n      result = compileFactoryFunction({\n        ...factoryMeta,\n        delegate: meta.useFactory,\n        delegateDeps: meta.deps || [],\n        delegateType: R3FactoryDelegateType.Function\n      });\n    } else {\n      result = {\n        statements: [],\n        expression: arrowFn([], meta.useFactory.callFn([]))\n      };\n    }\n  } else if (meta.useValue !== undefined) {\n    // Note: it's safe to use `meta.useValue` instead of the `USE_VALUE in meta` check used for\n    // client code because meta.useValue is an Expression which will be defined even if the actual\n    // value is undefined.\n    result = compileFactoryFunction({\n      ...factoryMeta,\n      expression: meta.useValue.expression\n    });\n  } else if (meta.useExisting !== undefined) {\n    // useExisting is an `inject` call on the existing token.\n    result = compileFactoryFunction({\n      ...factoryMeta,\n      expression: importExpr(Identifiers.inject).callFn([meta.useExisting.expression])\n    });\n  } else {\n    result = {\n      statements: [],\n      expression: delegateToFactory(meta.type.value, meta.type.value, resolveForwardRefs)\n    };\n  }\n  const token = meta.type.value;\n  const injectableProps = new DefinitionMap();\n  injectableProps.set('token', token);\n  injectableProps.set('factory', result.expression);\n  // Only generate providedIn property if it has a non-null value\n  if (meta.providedIn.expression.value !== null) {\n    injectableProps.set('providedIn', convertFromMaybeForwardRefExpression(meta.providedIn));\n  }\n  const expression = importExpr(Identifiers.ɵɵdefineInjectable).callFn([injectableProps.toLiteralMap()], undefined, true);\n  return {\n    expression,\n    type: createInjectableType(meta),\n    statements: result.statements\n  };\n}\nfunction createInjectableType(meta) {\n  return new ExpressionType(importExpr(Identifiers.InjectableDeclaration, [typeWithParameters(meta.type.type, meta.typeArgumentCount)]));\n}\nfunction delegateToFactory(type, useType, unwrapForwardRefs) {\n  if (type.node === useType.node) {\n    // The types are the same, so we can simply delegate directly to the type's factory.\n    // ```\n    // factory: type.ɵfac\n    // ```\n    return useType.prop('ɵfac');\n  }\n  if (!unwrapForwardRefs) {\n    // The type is not wrapped in a `forwardRef()`, so we create a simple factory function that\n    // accepts a sub-type as an argument.\n    // ```\n    // factory: function(t) { return useType.ɵfac(t); }\n    // ```\n    return createFactoryFunction(useType);\n  }\n  // The useType is actually wrapped in a `forwardRef()` so we need to resolve that before\n  // calling its factory.\n  // ```\n  // factory: function(t) { return core.resolveForwardRef(type).ɵfac(t); }\n  // ```\n  const unwrappedType = importExpr(Identifiers.resolveForwardRef).callFn([useType]);\n  return createFactoryFunction(unwrappedType);\n}\nfunction createFactoryFunction(type) {\n  const t = new FnParam('__ngFactoryType__', DYNAMIC_TYPE);\n  return arrowFn([t], type.prop('ɵfac').callFn([variable(t.name)]));\n}\nconst UNUSABLE_INTERPOLATION_REGEXPS = [/@/,\n// control flow reserved symbol\n/^\\s*$/,\n// empty\n/[<>]/,\n// html tag\n/^[{}]$/,\n// i18n expansion\n/&(#|[a-z])/i,\n// character reference,\n/^\\/\\// // comment\n];\nfunction assertInterpolationSymbols(identifier, value) {\n  if (value != null && !(Array.isArray(value) && value.length == 2)) {\n    throw new Error(`Expected '${identifier}' to be an array, [start, end].`);\n  } else if (value != null) {\n    const start = value[0];\n    const end = value[1];\n    // Check for unusable interpolation symbols\n    UNUSABLE_INTERPOLATION_REGEXPS.forEach(regexp => {\n      if (regexp.test(start) || regexp.test(end)) {\n        throw new Error(`['${start}', '${end}'] contains unusable interpolation symbol.`);\n      }\n    });\n  }\n}\nclass InterpolationConfig {\n  static fromArray(markers) {\n    if (!markers) {\n      return DEFAULT_INTERPOLATION_CONFIG;\n    }\n    assertInterpolationSymbols('interpolation', markers);\n    return new InterpolationConfig(markers[0], markers[1]);\n  }\n  constructor(start, end) {\n    this.start = start;\n    this.end = end;\n  }\n}\nconst DEFAULT_INTERPOLATION_CONFIG = new InterpolationConfig('{{', '}}');\nconst DEFAULT_CONTAINER_BLOCKS = new Set(['switch']);\nconst $EOF = 0;\nconst $BSPACE = 8;\nconst $TAB = 9;\nconst $LF = 10;\nconst $VTAB = 11;\nconst $FF = 12;\nconst $CR = 13;\nconst $SPACE = 32;\nconst $BANG = 33;\nconst $DQ = 34;\nconst $HASH = 35;\nconst $$ = 36;\nconst $PERCENT = 37;\nconst $AMPERSAND = 38;\nconst $SQ = 39;\nconst $LPAREN = 40;\nconst $RPAREN = 41;\nconst $STAR = 42;\nconst $PLUS = 43;\nconst $COMMA = 44;\nconst $MINUS = 45;\nconst $PERIOD = 46;\nconst $SLASH = 47;\nconst $COLON = 58;\nconst $SEMICOLON = 59;\nconst $LT = 60;\nconst $EQ = 61;\nconst $GT = 62;\nconst $QUESTION = 63;\nconst $0 = 48;\nconst $7 = 55;\nconst $9 = 57;\nconst $A = 65;\nconst $E = 69;\nconst $F = 70;\nconst $X = 88;\nconst $Z = 90;\nconst $LBRACKET = 91;\nconst $BACKSLASH = 92;\nconst $RBRACKET = 93;\nconst $CARET = 94;\nconst $_ = 95;\nconst $a = 97;\nconst $b = 98;\nconst $e = 101;\nconst $f = 102;\nconst $n = 110;\nconst $r = 114;\nconst $t = 116;\nconst $u = 117;\nconst $v = 118;\nconst $x = 120;\nconst $z = 122;\nconst $LBRACE = 123;\nconst $BAR = 124;\nconst $RBRACE = 125;\nconst $NBSP = 160;\nconst $PIPE = 124;\nconst $TILDA = 126;\nconst $AT = 64;\nconst $BT = 96;\nfunction isWhitespace(code) {\n  return code >= $TAB && code <= $SPACE || code == $NBSP;\n}\nfunction isDigit(code) {\n  return $0 <= code && code <= $9;\n}\nfunction isAsciiLetter(code) {\n  return code >= $a && code <= $z || code >= $A && code <= $Z;\n}\nfunction isAsciiHexDigit(code) {\n  return code >= $a && code <= $f || code >= $A && code <= $F || isDigit(code);\n}\nfunction isNewLine(code) {\n  return code === $LF || code === $CR;\n}\nfunction isOctalDigit(code) {\n  return $0 <= code && code <= $7;\n}\nfunction isQuote(code) {\n  return code === $SQ || code === $DQ || code === $BT;\n}\nclass ParseLocation {\n  constructor(file, offset, line, col) {\n    this.file = file;\n    this.offset = offset;\n    this.line = line;\n    this.col = col;\n  }\n  toString() {\n    return this.offset != null ? `${this.file.url}@${this.line}:${this.col}` : this.file.url;\n  }\n  moveBy(delta) {\n    const source = this.file.content;\n    const len = source.length;\n    let offset = this.offset;\n    let line = this.line;\n    let col = this.col;\n    while (offset > 0 && delta < 0) {\n      offset--;\n      delta++;\n      const ch = source.charCodeAt(offset);\n      if (ch == $LF) {\n        line--;\n        const priorLine = source.substring(0, offset - 1).lastIndexOf(String.fromCharCode($LF));\n        col = priorLine > 0 ? offset - priorLine : offset;\n      } else {\n        col--;\n      }\n    }\n    while (offset < len && delta > 0) {\n      const ch = source.charCodeAt(offset);\n      offset++;\n      delta--;\n      if (ch == $LF) {\n        line++;\n        col = 0;\n      } else {\n        col++;\n      }\n    }\n    return new ParseLocation(this.file, offset, line, col);\n  }\n  // Return the source around the location\n  // Up to `maxChars` or `maxLines` on each side of the location\n  getContext(maxChars, maxLines) {\n    const content = this.file.content;\n    let startOffset = this.offset;\n    if (startOffset != null) {\n      if (startOffset > content.length - 1) {\n        startOffset = content.length - 1;\n      }\n      let endOffset = startOffset;\n      let ctxChars = 0;\n      let ctxLines = 0;\n      while (ctxChars < maxChars && startOffset > 0) {\n        startOffset--;\n        ctxChars++;\n        if (content[startOffset] == '\\n') {\n          if (++ctxLines == maxLines) {\n            break;\n          }\n        }\n      }\n      ctxChars = 0;\n      ctxLines = 0;\n      while (ctxChars < maxChars && endOffset < content.length - 1) {\n        endOffset++;\n        ctxChars++;\n        if (content[endOffset] == '\\n') {\n          if (++ctxLines == maxLines) {\n            break;\n          }\n        }\n      }\n      return {\n        before: content.substring(startOffset, this.offset),\n        after: content.substring(this.offset, endOffset + 1)\n      };\n    }\n    return null;\n  }\n}\nclass ParseSourceFile {\n  constructor(content, url) {\n    this.content = content;\n    this.url = url;\n  }\n}\nclass ParseSourceSpan {\n  /**\n   * Create an object that holds information about spans of tokens/nodes captured during\n   * lexing/parsing of text.\n   *\n   * @param start\n   * The location of the start of the span (having skipped leading trivia).\n   * Skipping leading trivia makes source-spans more \"user friendly\", since things like HTML\n   * elements will appear to begin at the start of the opening tag, rather than at the start of any\n   * leading trivia, which could include newlines.\n   *\n   * @param end\n   * The location of the end of the span.\n   *\n   * @param fullStart\n   * The start of the token without skipping the leading trivia.\n   * This is used by tooling that splits tokens further, such as extracting Angular interpolations\n   * from text tokens. Such tooling creates new source-spans relative to the original token's\n   * source-span. If leading trivia characters have been skipped then the new source-spans may be\n   * incorrectly offset.\n   *\n   * @param details\n   * Additional information (such as identifier names) that should be associated with the span.\n   */\n  constructor(start, end, fullStart = start, details = null) {\n    this.start = start;\n    this.end = end;\n    this.fullStart = fullStart;\n    this.details = details;\n  }\n  toString() {\n    return this.start.file.content.substring(this.start.offset, this.end.offset);\n  }\n}\nvar ParseErrorLevel;\n(function (ParseErrorLevel) {\n  ParseErrorLevel[ParseErrorLevel[\"WARNING\"] = 0] = \"WARNING\";\n  ParseErrorLevel[ParseErrorLevel[\"ERROR\"] = 1] = \"ERROR\";\n})(ParseErrorLevel || (ParseErrorLevel = {}));\nclass ParseError {\n  constructor(span, msg, level = ParseErrorLevel.ERROR) {\n    this.span = span;\n    this.msg = msg;\n    this.level = level;\n  }\n  contextualMessage() {\n    const ctx = this.span.start.getContext(100, 3);\n    return ctx ? `${this.msg} (\"${ctx.before}[${ParseErrorLevel[this.level]} ->]${ctx.after}\")` : this.msg;\n  }\n  toString() {\n    const details = this.span.details ? `, ${this.span.details}` : '';\n    return `${this.contextualMessage()}: ${this.span.start}${details}`;\n  }\n}\n/**\n * Generates Source Span object for a given R3 Type for JIT mode.\n *\n * @param kind Component or Directive.\n * @param typeName name of the Component or Directive.\n * @param sourceUrl reference to Component or Directive source.\n * @returns instance of ParseSourceSpan that represent a given Component or Directive.\n */\nfunction r3JitTypeSourceSpan(kind, typeName, sourceUrl) {\n  const sourceFileName = `in ${kind} ${typeName} in ${sourceUrl}`;\n  const sourceFile = new ParseSourceFile('', sourceFileName);\n  return new ParseSourceSpan(new ParseLocation(sourceFile, -1, -1, -1), new ParseLocation(sourceFile, -1, -1, -1));\n}\nlet _anonymousTypeIndex = 0;\nfunction identifierName(compileIdentifier) {\n  if (!compileIdentifier || !compileIdentifier.reference) {\n    return null;\n  }\n  const ref = compileIdentifier.reference;\n  if (ref['__anonymousType']) {\n    return ref['__anonymousType'];\n  }\n  if (ref['__forward_ref__']) {\n    // We do not want to try to stringify a `forwardRef()` function because that would cause the\n    // inner function to be evaluated too early, defeating the whole point of the `forwardRef`.\n    return '__forward_ref__';\n  }\n  let identifier = stringify(ref);\n  if (identifier.indexOf('(') >= 0) {\n    // case: anonymous functions!\n    identifier = `anonymous_${_anonymousTypeIndex++}`;\n    ref['__anonymousType'] = identifier;\n  } else {\n    identifier = sanitizeIdentifier(identifier);\n  }\n  return identifier;\n}\nfunction sanitizeIdentifier(name) {\n  return name.replace(/\\W/g, '_');\n}\n\n/**\n * In TypeScript, tagged template functions expect a \"template object\", which is an array of\n * \"cooked\" strings plus a `raw` property that contains an array of \"raw\" strings. This is\n * typically constructed with a function called `__makeTemplateObject(cooked, raw)`, but it may not\n * be available in all environments.\n *\n * This is a JavaScript polyfill that uses __makeTemplateObject when it's available, but otherwise\n * creates an inline helper with the same functionality.\n *\n * In the inline function, if `Object.defineProperty` is available we use that to attach the `raw`\n * array.\n */\nconst makeTemplateObjectPolyfill = '(this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,\"raw\",{value:t}):e.raw=t,e})';\nclass AbstractJsEmitterVisitor extends AbstractEmitterVisitor {\n  constructor() {\n    super(false);\n  }\n  visitWrappedNodeExpr(ast, ctx) {\n    throw new Error('Cannot emit a WrappedNodeExpr in Javascript.');\n  }\n  visitDeclareVarStmt(stmt, ctx) {\n    ctx.print(stmt, `var ${stmt.name}`);\n    if (stmt.value) {\n      ctx.print(stmt, ' = ');\n      stmt.value.visitExpression(this, ctx);\n    }\n    ctx.println(stmt, `;`);\n    return null;\n  }\n  visitTaggedTemplateExpr(ast, ctx) {\n    // The following convoluted piece of code is effectively the downlevelled equivalent of\n    // ```\n    // tag`...`\n    // ```\n    // which is effectively like:\n    // ```\n    // tag(__makeTemplateObject(cooked, raw), expression1, expression2, ...);\n    // ```\n    const elements = ast.template.elements;\n    ast.tag.visitExpression(this, ctx);\n    ctx.print(ast, `(${makeTemplateObjectPolyfill}(`);\n    ctx.print(ast, `[${elements.map(part => escapeIdentifier(part.text, false)).join(', ')}], `);\n    ctx.print(ast, `[${elements.map(part => escapeIdentifier(part.rawText, false)).join(', ')}])`);\n    ast.template.expressions.forEach(expression => {\n      ctx.print(ast, ', ');\n      expression.visitExpression(this, ctx);\n    });\n    ctx.print(ast, ')');\n    return null;\n  }\n  visitFunctionExpr(ast, ctx) {\n    ctx.print(ast, `function${ast.name ? ' ' + ast.name : ''}(`);\n    this._visitParams(ast.params, ctx);\n    ctx.println(ast, `) {`);\n    ctx.incIndent();\n    this.visitAllStatements(ast.statements, ctx);\n    ctx.decIndent();\n    ctx.print(ast, `}`);\n    return null;\n  }\n  visitArrowFunctionExpr(ast, ctx) {\n    ctx.print(ast, '(');\n    this._visitParams(ast.params, ctx);\n    ctx.print(ast, ') =>');\n    if (Array.isArray(ast.body)) {\n      ctx.println(ast, `{`);\n      ctx.incIndent();\n      this.visitAllStatements(ast.body, ctx);\n      ctx.decIndent();\n      ctx.print(ast, `}`);\n    } else {\n      const isObjectLiteral = ast.body instanceof LiteralMapExpr;\n      if (isObjectLiteral) {\n        ctx.print(ast, '(');\n      }\n      ast.body.visitExpression(this, ctx);\n      if (isObjectLiteral) {\n        ctx.print(ast, ')');\n      }\n    }\n    return null;\n  }\n  visitDeclareFunctionStmt(stmt, ctx) {\n    ctx.print(stmt, `function ${stmt.name}(`);\n    this._visitParams(stmt.params, ctx);\n    ctx.println(stmt, `) {`);\n    ctx.incIndent();\n    this.visitAllStatements(stmt.statements, ctx);\n    ctx.decIndent();\n    ctx.println(stmt, `}`);\n    return null;\n  }\n  visitLocalizedString(ast, ctx) {\n    // The following convoluted piece of code is effectively the downlevelled equivalent of\n    // ```\n    // $localize `...`\n    // ```\n    // which is effectively like:\n    // ```\n    // $localize(__makeTemplateObject(cooked, raw), expression1, expression2, ...);\n    // ```\n    ctx.print(ast, `$localize(${makeTemplateObjectPolyfill}(`);\n    const parts = [ast.serializeI18nHead()];\n    for (let i = 1; i < ast.messageParts.length; i++) {\n      parts.push(ast.serializeI18nTemplatePart(i));\n    }\n    ctx.print(ast, `[${parts.map(part => escapeIdentifier(part.cooked, false)).join(', ')}], `);\n    ctx.print(ast, `[${parts.map(part => escapeIdentifier(part.raw, false)).join(', ')}])`);\n    ast.expressions.forEach(expression => {\n      ctx.print(ast, ', ');\n      expression.visitExpression(this, ctx);\n    });\n    ctx.print(ast, ')');\n    return null;\n  }\n  _visitParams(params, ctx) {\n    this.visitAllObjects(param => ctx.print(null, param.name), params, ctx, ',');\n  }\n}\n\n/**\n * @fileoverview\n * A module to facilitate use of a Trusted Types policy within the JIT\n * compiler. It lazily constructs the Trusted Types policy, providing helper\n * utilities for promoting strings to Trusted Types. When Trusted Types are not\n * available, strings are used as a fallback.\n * @security All use of this module is security-sensitive and should go through\n * security review.\n */\n/**\n * The Trusted Types policy, or null if Trusted Types are not\n * enabled/supported, or undefined if the policy has not been created yet.\n */\nlet policy;\n/**\n * Returns the Trusted Types policy, or null if Trusted Types are not\n * enabled/supported. The first call to this function will create the policy.\n */\nfunction getPolicy() {\n  if (policy === undefined) {\n    const trustedTypes = _global['trustedTypes'];\n    policy = null;\n    if (trustedTypes) {\n      try {\n        policy = trustedTypes.createPolicy('angular#unsafe-jit', {\n          createScript: s => s\n        });\n      } catch {\n        // trustedTypes.createPolicy throws if called with a name that is\n        // already registered, even in report-only mode. Until the API changes,\n        // catch the error not to break the applications functionally. In such\n        // cases, the code will fall back to using strings.\n      }\n    }\n  }\n  return policy;\n}\n/**\n * Unsafely promote a string to a TrustedScript, falling back to strings when\n * Trusted Types are not available.\n * @security In particular, it must be assured that the provided string will\n * never cause an XSS vulnerability if used in a context that will be\n * interpreted and executed as a script by a browser, e.g. when calling eval.\n */\nfunction trustedScriptFromString(script) {\n  return getPolicy()?.createScript(script) || script;\n}\n/**\n * Unsafely call the Function constructor with the given string arguments.\n * @security This is a security-sensitive function; any use of this function\n * must go through security review. In particular, it must be assured that it\n * is only called from the JIT compiler, as use in other code can lead to XSS\n * vulnerabilities.\n */\nfunction newTrustedFunctionForJIT(...args) {\n  if (!_global['trustedTypes']) {\n    // In environments that don't support Trusted Types, fall back to the most\n    // straightforward implementation:\n    return new Function(...args);\n  }\n  // Chrome currently does not support passing TrustedScript to the Function\n  // constructor. The following implements the workaround proposed on the page\n  // below, where the Chromium bug is also referenced:\n  // https://github.com/w3c/webappsec-trusted-types/wiki/Trusted-Types-for-function-constructor\n  const fnArgs = args.slice(0, -1).join(',');\n  const fnBody = args[args.length - 1];\n  const body = `(function anonymous(${fnArgs}\n) { ${fnBody}\n})`;\n  // Using eval directly confuses the compiler and prevents this module from\n  // being stripped out of JS binaries even if not used. The global['eval']\n  // indirection fixes that.\n  const fn = _global['eval'](trustedScriptFromString(body));\n  if (fn.bind === undefined) {\n    // Workaround for a browser bug that only exists in Chrome 83, where passing\n    // a TrustedScript to eval just returns the TrustedScript back without\n    // evaluating it. In that case, fall back to the most straightforward\n    // implementation:\n    return new Function(...args);\n  }\n  // To completely mimic the behavior of calling \"new Function\", two more\n  // things need to happen:\n  // 1. Stringifying the resulting function should return its source code\n  fn.toString = () => body;\n  // 2. When calling the resulting function, `this` should refer to `global`\n  return fn.bind(_global);\n  // When Trusted Types support in Function constructors is widely available,\n  // the implementation of this function can be simplified to:\n  // return new Function(...args.map(a => trustedScriptFromString(a)));\n}\n\n/**\n * A helper class to manage the evaluation of JIT generated code.\n */\nclass JitEvaluator {\n  /**\n   *\n   * @param sourceUrl The URL of the generated code.\n   * @param statements An array of Angular statement AST nodes to be evaluated.\n   * @param refResolver Resolves `o.ExternalReference`s into values.\n   * @param createSourceMaps If true then create a source-map for the generated code and include it\n   * inline as a source-map comment.\n   * @returns A map of all the variables in the generated code.\n   */\n  evaluateStatements(sourceUrl, statements, refResolver, createSourceMaps) {\n    const converter = new JitEmitterVisitor(refResolver);\n    const ctx = EmitterVisitorContext.createRoot();\n    // Ensure generated code is in strict mode\n    if (statements.length > 0 && !isUseStrictStatement(statements[0])) {\n      statements = [literal('use strict').toStmt(), ...statements];\n    }\n    converter.visitAllStatements(statements, ctx);\n    converter.createReturnStmt(ctx);\n    return this.evaluateCode(sourceUrl, ctx, converter.getArgs(), createSourceMaps);\n  }\n  /**\n   * Evaluate a piece of JIT generated code.\n   * @param sourceUrl The URL of this generated code.\n   * @param ctx A context object that contains an AST of the code to be evaluated.\n   * @param vars A map containing the names and values of variables that the evaluated code might\n   * reference.\n   * @param createSourceMap If true then create a source-map for the generated code and include it\n   * inline as a source-map comment.\n   * @returns The result of evaluating the code.\n   */\n  evaluateCode(sourceUrl, ctx, vars, createSourceMap) {\n    let fnBody = `\"use strict\";${ctx.toSource()}\\n//# sourceURL=${sourceUrl}`;\n    const fnArgNames = [];\n    const fnArgValues = [];\n    for (const argName in vars) {\n      fnArgValues.push(vars[argName]);\n      fnArgNames.push(argName);\n    }\n    if (createSourceMap) {\n      // using `new Function(...)` generates a header, 1 line of no arguments, 2 lines otherwise\n      // E.g. ```\n      // function anonymous(a,b,c\n      // /**/) { ... }```\n      // We don't want to hard code this fact, so we auto detect it via an empty function first.\n      const emptyFn = newTrustedFunctionForJIT(...fnArgNames.concat('return null;')).toString();\n      const headerLines = emptyFn.slice(0, emptyFn.indexOf('return null;')).split('\\n').length - 1;\n      fnBody += `\\n${ctx.toSourceMapGenerator(sourceUrl, headerLines).toJsComment()}`;\n    }\n    const fn = newTrustedFunctionForJIT(...fnArgNames.concat(fnBody));\n    return this.executeFunction(fn, fnArgValues);\n  }\n  /**\n   * Execute a JIT generated function by calling it.\n   *\n   * This method can be overridden in tests to capture the functions that are generated\n   * by this `JitEvaluator` class.\n   *\n   * @param fn A function to execute.\n   * @param args The arguments to pass to the function being executed.\n   * @returns The return value of the executed function.\n   */\n  executeFunction(fn, args) {\n    return fn(...args);\n  }\n}\n/**\n * An Angular AST visitor that converts AST nodes into executable JavaScript code.\n */\nclass JitEmitterVisitor extends AbstractJsEmitterVisitor {\n  constructor(refResolver) {\n    super();\n    this.refResolver = refResolver;\n    this._evalArgNames = [];\n    this._evalArgValues = [];\n    this._evalExportedVars = [];\n  }\n  createReturnStmt(ctx) {\n    const stmt = new ReturnStatement(new LiteralMapExpr(this._evalExportedVars.map(resultVar => new LiteralMapEntry(resultVar, variable(resultVar), false))));\n    stmt.visitStatement(this, ctx);\n  }\n  getArgs() {\n    const result = {};\n    for (let i = 0; i < this._evalArgNames.length; i++) {\n      result[this._evalArgNames[i]] = this._evalArgValues[i];\n    }\n    return result;\n  }\n  visitExternalExpr(ast, ctx) {\n    this._emitReferenceToExternal(ast, this.refResolver.resolveExternalReference(ast.value), ctx);\n    return null;\n  }\n  visitWrappedNodeExpr(ast, ctx) {\n    this._emitReferenceToExternal(ast, ast.node, ctx);\n    return null;\n  }\n  visitDeclareVarStmt(stmt, ctx) {\n    if (stmt.hasModifier(StmtModifier.Exported)) {\n      this._evalExportedVars.push(stmt.name);\n    }\n    return super.visitDeclareVarStmt(stmt, ctx);\n  }\n  visitDeclareFunctionStmt(stmt, ctx) {\n    if (stmt.hasModifier(StmtModifier.Exported)) {\n      this._evalExportedVars.push(stmt.name);\n    }\n    return super.visitDeclareFunctionStmt(stmt, ctx);\n  }\n  _emitReferenceToExternal(ast, value, ctx) {\n    let id = this._evalArgValues.indexOf(value);\n    if (id === -1) {\n      id = this._evalArgValues.length;\n      this._evalArgValues.push(value);\n      const name = identifierName({\n        reference: value\n      }) || 'val';\n      this._evalArgNames.push(`jit_${name}_${id}`);\n    }\n    ctx.print(ast, this._evalArgNames[id]);\n  }\n}\nfunction isUseStrictStatement(statement) {\n  return statement.isEquivalent(literal('use strict').toStmt());\n}\nfunction compileInjector(meta) {\n  const definitionMap = new DefinitionMap();\n  if (meta.providers !== null) {\n    definitionMap.set('providers', meta.providers);\n  }\n  if (meta.imports.length > 0) {\n    definitionMap.set('imports', literalArr(meta.imports));\n  }\n  const expression = importExpr(Identifiers.defineInjector).callFn([definitionMap.toLiteralMap()], undefined, true);\n  const type = createInjectorType(meta);\n  return {\n    expression,\n    type,\n    statements: []\n  };\n}\nfunction createInjectorType(meta) {\n  return new ExpressionType(importExpr(Identifiers.InjectorDeclaration, [new ExpressionType(meta.type.type)]));\n}\n\n/**\n * Implementation of `CompileReflector` which resolves references to @angular/core\n * symbols at runtime, according to a consumer-provided mapping.\n *\n * Only supports `resolveExternalReference`, all other methods throw.\n */\nclass R3JitReflector {\n  constructor(context) {\n    this.context = context;\n  }\n  resolveExternalReference(ref) {\n    // This reflector only handles @angular/core imports.\n    if (ref.moduleName !== '@angular/core') {\n      throw new Error(`Cannot resolve external reference to ${ref.moduleName}, only references to @angular/core are supported.`);\n    }\n    if (!this.context.hasOwnProperty(ref.name)) {\n      throw new Error(`No value provided for @angular/core symbol '${ref.name}'.`);\n    }\n    return this.context[ref.name];\n  }\n}\n\n/**\n * How the selector scope of an NgModule (its declarations, imports, and exports) should be emitted\n * as a part of the NgModule definition.\n */\nvar R3SelectorScopeMode;\n(function (R3SelectorScopeMode) {\n  /**\n   * Emit the declarations inline into the module definition.\n   *\n   * This option is useful in certain contexts where it's known that JIT support is required. The\n   * tradeoff here is that this emit style prevents directives and pipes from being tree-shaken if\n   * they are unused, but the NgModule is used.\n   */\n  R3SelectorScopeMode[R3SelectorScopeMode[\"Inline\"] = 0] = \"Inline\";\n  /**\n   * Emit the declarations using a side effectful function call, `ɵɵsetNgModuleScope`, that is\n   * guarded with the `ngJitMode` flag.\n   *\n   * This form of emit supports JIT and can be optimized away if the `ngJitMode` flag is set to\n   * false, which allows unused directives and pipes to be tree-shaken.\n   */\n  R3SelectorScopeMode[R3SelectorScopeMode[\"SideEffect\"] = 1] = \"SideEffect\";\n  /**\n   * Don't generate selector scopes at all.\n   *\n   * This is useful for contexts where JIT support is known to be unnecessary.\n   */\n  R3SelectorScopeMode[R3SelectorScopeMode[\"Omit\"] = 2] = \"Omit\";\n})(R3SelectorScopeMode || (R3SelectorScopeMode = {}));\n/**\n * The type of the NgModule meta data.\n * - Global: Used for full and partial compilation modes which mainly includes R3References.\n * - Local: Used for the local compilation mode which mainly includes the raw expressions as appears\n * in the NgModule decorator.\n */\nvar R3NgModuleMetadataKind;\n(function (R3NgModuleMetadataKind) {\n  R3NgModuleMetadataKind[R3NgModuleMetadataKind[\"Global\"] = 0] = \"Global\";\n  R3NgModuleMetadataKind[R3NgModuleMetadataKind[\"Local\"] = 1] = \"Local\";\n})(R3NgModuleMetadataKind || (R3NgModuleMetadataKind = {}));\n/**\n * Construct an `R3NgModuleDef` for the given `R3NgModuleMetadata`.\n */\nfunction compileNgModule(meta) {\n  const statements = [];\n  const definitionMap = new DefinitionMap();\n  definitionMap.set('type', meta.type.value);\n  // Assign bootstrap definition. In local compilation mode (i.e., for\n  // `R3NgModuleMetadataKind.LOCAL`) we assign the bootstrap field using the runtime\n  // `ɵɵsetNgModuleScope`.\n  if (meta.kind === R3NgModuleMetadataKind.Global && meta.bootstrap.length > 0) {\n    definitionMap.set('bootstrap', refsToArray(meta.bootstrap, meta.containsForwardDecls));\n  }\n  if (meta.selectorScopeMode === R3SelectorScopeMode.Inline) {\n    // If requested to emit scope information inline, pass the `declarations`, `imports` and\n    // `exports` to the `ɵɵdefineNgModule()` call directly.\n    if (meta.declarations.length > 0) {\n      definitionMap.set('declarations', refsToArray(meta.declarations, meta.containsForwardDecls));\n    }\n    if (meta.imports.length > 0) {\n      definitionMap.set('imports', refsToArray(meta.imports, meta.containsForwardDecls));\n    }\n    if (meta.exports.length > 0) {\n      definitionMap.set('exports', refsToArray(meta.exports, meta.containsForwardDecls));\n    }\n  } else if (meta.selectorScopeMode === R3SelectorScopeMode.SideEffect) {\n    // In this mode, scope information is not passed into `ɵɵdefineNgModule` as it\n    // would prevent tree-shaking of the declarations, imports and exports references. Instead, it's\n    // patched onto the NgModule definition with a `ɵɵsetNgModuleScope` call that's guarded by the\n    // `ngJitMode` flag.\n    const setNgModuleScopeCall = generateSetNgModuleScopeCall(meta);\n    if (setNgModuleScopeCall !== null) {\n      statements.push(setNgModuleScopeCall);\n    }\n  } else {\n    // Selector scope emit was not requested, so skip it.\n  }\n  if (meta.schemas !== null && meta.schemas.length > 0) {\n    definitionMap.set('schemas', literalArr(meta.schemas.map(ref => ref.value)));\n  }\n  if (meta.id !== null) {\n    definitionMap.set('id', meta.id);\n    // Generate a side-effectful call to register this NgModule by its id, as per the semantics of\n    // NgModule ids.\n    statements.push(importExpr(Identifiers.registerNgModuleType).callFn([meta.type.value, meta.id]).toStmt());\n  }\n  const expression = importExpr(Identifiers.defineNgModule).callFn([definitionMap.toLiteralMap()], undefined, true);\n  const type = createNgModuleType(meta);\n  return {\n    expression,\n    type,\n    statements\n  };\n}\n/**\n * This function is used in JIT mode to generate the call to `ɵɵdefineNgModule()` from a call to\n * `ɵɵngDeclareNgModule()`.\n */\nfunction compileNgModuleDeclarationExpression(meta) {\n  const definitionMap = new DefinitionMap();\n  definitionMap.set('type', new WrappedNodeExpr(meta.type));\n  if (meta.bootstrap !== undefined) {\n    definitionMap.set('bootstrap', new WrappedNodeExpr(meta.bootstrap));\n  }\n  if (meta.declarations !== undefined) {\n    definitionMap.set('declarations', new WrappedNodeExpr(meta.declarations));\n  }\n  if (meta.imports !== undefined) {\n    definitionMap.set('imports', new WrappedNodeExpr(meta.imports));\n  }\n  if (meta.exports !== undefined) {\n    definitionMap.set('exports', new WrappedNodeExpr(meta.exports));\n  }\n  if (meta.schemas !== undefined) {\n    definitionMap.set('schemas', new WrappedNodeExpr(meta.schemas));\n  }\n  if (meta.id !== undefined) {\n    definitionMap.set('id', new WrappedNodeExpr(meta.id));\n  }\n  return importExpr(Identifiers.defineNgModule).callFn([definitionMap.toLiteralMap()]);\n}\nfunction createNgModuleType(meta) {\n  if (meta.kind === R3NgModuleMetadataKind.Local) {\n    return new ExpressionType(meta.type.value);\n  }\n  const {\n    type: moduleType,\n    declarations,\n    exports,\n    imports,\n    includeImportTypes,\n    publicDeclarationTypes\n  } = meta;\n  return new ExpressionType(importExpr(Identifiers.NgModuleDeclaration, [new ExpressionType(moduleType.type), publicDeclarationTypes === null ? tupleTypeOf(declarations) : tupleOfTypes(publicDeclarationTypes), includeImportTypes ? tupleTypeOf(imports) : NONE_TYPE, tupleTypeOf(exports)]));\n}\n/**\n * Generates a function call to `ɵɵsetNgModuleScope` with all necessary information so that the\n * transitive module scope can be computed during runtime in JIT mode. This call is marked pure\n * such that the references to declarations, imports and exports may be elided causing these\n * symbols to become tree-shakeable.\n */\nfunction generateSetNgModuleScopeCall(meta) {\n  const scopeMap = new DefinitionMap();\n  if (meta.kind === R3NgModuleMetadataKind.Global) {\n    if (meta.declarations.length > 0) {\n      scopeMap.set('declarations', refsToArray(meta.declarations, meta.containsForwardDecls));\n    }\n  } else {\n    if (meta.declarationsExpression) {\n      scopeMap.set('declarations', meta.declarationsExpression);\n    }\n  }\n  if (meta.kind === R3NgModuleMetadataKind.Global) {\n    if (meta.imports.length > 0) {\n      scopeMap.set('imports', refsToArray(meta.imports, meta.containsForwardDecls));\n    }\n  } else {\n    if (meta.importsExpression) {\n      scopeMap.set('imports', meta.importsExpression);\n    }\n  }\n  if (meta.kind === R3NgModuleMetadataKind.Global) {\n    if (meta.exports.length > 0) {\n      scopeMap.set('exports', refsToArray(meta.exports, meta.containsForwardDecls));\n    }\n  } else {\n    if (meta.exportsExpression) {\n      scopeMap.set('exports', meta.exportsExpression);\n    }\n  }\n  if (meta.kind === R3NgModuleMetadataKind.Local && meta.bootstrapExpression) {\n    scopeMap.set('bootstrap', meta.bootstrapExpression);\n  }\n  if (Object.keys(scopeMap.values).length === 0) {\n    return null;\n  }\n  // setNgModuleScope(...)\n  const fnCall = new InvokeFunctionExpr( /* fn */importExpr(Identifiers.setNgModuleScope), /* args */[meta.type.value, scopeMap.toLiteralMap()]);\n  // (ngJitMode guard) && setNgModuleScope(...)\n  const guardedCall = jitOnlyGuardedExpression(fnCall);\n  // function() { (ngJitMode guard) && setNgModuleScope(...); }\n  const iife = new FunctionExpr( /* params */[], /* statements */[guardedCall.toStmt()]);\n  // (function() { (ngJitMode guard) && setNgModuleScope(...); })()\n  const iifeCall = new InvokeFunctionExpr( /* fn */iife, /* args */[]);\n  return iifeCall.toStmt();\n}\nfunction tupleTypeOf(exp) {\n  const types = exp.map(ref => typeofExpr(ref.type));\n  return exp.length > 0 ? expressionType(literalArr(types)) : NONE_TYPE;\n}\nfunction tupleOfTypes(types) {\n  const typeofTypes = types.map(type => typeofExpr(type));\n  return types.length > 0 ? expressionType(literalArr(typeofTypes)) : NONE_TYPE;\n}\nfunction compilePipeFromMetadata(metadata) {\n  const definitionMapValues = [];\n  // e.g. `name: 'myPipe'`\n  definitionMapValues.push({\n    key: 'name',\n    value: literal(metadata.pipeName),\n    quoted: false\n  });\n  // e.g. `type: MyPipe`\n  definitionMapValues.push({\n    key: 'type',\n    value: metadata.type.value,\n    quoted: false\n  });\n  // e.g. `pure: true`\n  definitionMapValues.push({\n    key: 'pure',\n    value: literal(metadata.pure),\n    quoted: false\n  });\n  if (metadata.isStandalone) {\n    definitionMapValues.push({\n      key: 'standalone',\n      value: literal(true),\n      quoted: false\n    });\n  }\n  const expression = importExpr(Identifiers.definePipe).callFn([literalMap(definitionMapValues)], undefined, true);\n  const type = createPipeType(metadata);\n  return {\n    expression,\n    type,\n    statements: []\n  };\n}\nfunction createPipeType(metadata) {\n  return new ExpressionType(importExpr(Identifiers.PipeDeclaration, [typeWithParameters(metadata.type.type, metadata.typeArgumentCount), new ExpressionType(new LiteralExpr(metadata.pipeName)), new ExpressionType(new LiteralExpr(metadata.isStandalone))]));\n}\nvar R3TemplateDependencyKind;\n(function (R3TemplateDependencyKind) {\n  R3TemplateDependencyKind[R3TemplateDependencyKind[\"Directive\"] = 0] = \"Directive\";\n  R3TemplateDependencyKind[R3TemplateDependencyKind[\"Pipe\"] = 1] = \"Pipe\";\n  R3TemplateDependencyKind[R3TemplateDependencyKind[\"NgModule\"] = 2] = \"NgModule\";\n})(R3TemplateDependencyKind || (R3TemplateDependencyKind = {}));\n\n/**\n * The following set contains all keywords that can be used in the animation css shorthand\n * property and is used during the scoping of keyframes to make sure such keywords\n * are not modified.\n */\nconst animationKeywords = new Set([\n// global values\n'inherit', 'initial', 'revert', 'unset',\n// animation-direction\n'alternate', 'alternate-reverse', 'normal', 'reverse',\n// animation-fill-mode\n'backwards', 'both', 'forwards', 'none',\n// animation-play-state\n'paused', 'running',\n// animation-timing-function\n'ease', 'ease-in', 'ease-in-out', 'ease-out', 'linear', 'step-start', 'step-end',\n// `steps()` function\n'end', 'jump-both', 'jump-end', 'jump-none', 'jump-start', 'start']);\n/**\n * The following array contains all of the CSS at-rule identifiers which are scoped.\n */\nconst scopedAtRuleIdentifiers = ['@media', '@supports', '@document', '@layer', '@container', '@scope', '@starting-style'];\n/**\n * The following class has its origin from a port of shadowCSS from webcomponents.js to TypeScript.\n * It has since diverge in many ways to tailor Angular's needs.\n *\n * Source:\n * https://github.com/webcomponents/webcomponentsjs/blob/4efecd7e0e/src/ShadowCSS/ShadowCSS.js\n *\n * The original file level comment is reproduced below\n */\n/*\n  This is a limited shim for ShadowDOM css styling.\n  https://dvcs.w3.org/hg/webcomponents/raw-file/tip/spec/shadow/index.html#styles\n\n  The intention here is to support only the styling features which can be\n  relatively simply implemented. The goal is to allow users to avoid the\n  most obvious pitfalls and do so without compromising performance significantly.\n  For ShadowDOM styling that's not covered here, a set of best practices\n  can be provided that should allow users to accomplish more complex styling.\n\n  The following is a list of specific ShadowDOM styling features and a brief\n  discussion of the approach used to shim.\n\n  Shimmed features:\n\n  * :host, :host-context: ShadowDOM allows styling of the shadowRoot's host\n  element using the :host rule. To shim this feature, the :host styles are\n  reformatted and prefixed with a given scope name and promoted to a\n  document level stylesheet.\n  For example, given a scope name of .foo, a rule like this:\n\n    :host {\n        background: red;\n      }\n    }\n\n  becomes:\n\n    .foo {\n      background: red;\n    }\n\n  * encapsulation: Styles defined within ShadowDOM, apply only to\n  dom inside the ShadowDOM.\n  The selectors are scoped by adding an attribute selector suffix to each\n  simple selector that contains the host element tag name. Each element\n  in the element's ShadowDOM template is also given the scope attribute.\n  Thus, these rules match only elements that have the scope attribute.\n  For example, given a scope name of x-foo, a rule like this:\n\n    div {\n      font-weight: bold;\n    }\n\n  becomes:\n\n    div[x-foo] {\n      font-weight: bold;\n    }\n\n  Note that elements that are dynamically added to a scope must have the scope\n  selector added to them manually.\n\n  * upper/lower bound encapsulation: Styles which are defined outside a\n  shadowRoot should not cross the ShadowDOM boundary and should not apply\n  inside a shadowRoot.\n\n  This styling behavior is not emulated. Some possible ways to do this that\n  were rejected due to complexity and/or performance concerns include: (1) reset\n  every possible property for every possible selector for a given scope name;\n  (2) re-implement css in javascript.\n\n  As an alternative, users should make sure to use selectors\n  specific to the scope in which they are working.\n\n  * ::distributed: This behavior is not emulated. It's often not necessary\n  to style the contents of a specific insertion point and instead, descendants\n  of the host element can be styled selectively. Users can also create an\n  extra node around an insertion point and style that node's contents\n  via descendent selectors. For example, with a shadowRoot like this:\n\n    <style>\n      ::content(div) {\n        background: red;\n      }\n    </style>\n    <content></content>\n\n  could become:\n\n    <style>\n      / *@polyfill .content-container div * /\n      ::content(div) {\n        background: red;\n      }\n    </style>\n    <div class=\"content-container\">\n      <content></content>\n    </div>\n\n  Note the use of @polyfill in the comment above a ShadowDOM specific style\n  declaration. This is a directive to the styling shim to use the selector\n  in comments in lieu of the next selector when running under polyfill.\n*/\nclass ShadowCss {\n  constructor() {\n    /**\n     * Regular expression used to extrapolate the possible keyframes from an\n     * animation declaration (with possibly multiple animation definitions)\n     *\n     * The regular expression can be divided in three parts\n     *  - (^|\\s+|,)\n     *    captures how many (if any) leading whitespaces are present or a comma\n     *  - (?:(?:(['\"])((?:\\\\\\\\|\\\\\\2|(?!\\2).)+)\\2)|(-?[A-Za-z][\\w\\-]*))\n     *    captures two different possible keyframes, ones which are quoted or ones which are valid css\n     * idents (custom properties excluded)\n     *  - (?=[,\\s;]|$)\n     *    simply matches the end of the possible keyframe, valid endings are: a comma, a space, a\n     * semicolon or the end of the string\n     */\n    this._animationDeclarationKeyframesRe = /(^|\\s+|,)(?:(?:(['\"])((?:\\\\\\\\|\\\\\\2|(?!\\2).)+)\\2)|(-?[A-Za-z][\\w\\-]*))(?=[,\\s]|$)/g;\n  }\n  /*\n   * Shim some cssText with the given selector. Returns cssText that can be included in the document\n   *\n   * The selector is the attribute added to all elements inside the host,\n   * The hostSelector is the attribute added to the host itself.\n   */\n  shimCssText(cssText, selector, hostSelector = '') {\n    // **NOTE**: Do not strip comments as this will cause component sourcemaps to break\n    // due to shift in lines.\n    // Collect comments and replace them with a placeholder, this is done to avoid complicating\n    // the rule parsing RegExp and keep it safer.\n    const comments = [];\n    cssText = cssText.replace(_commentRe, m => {\n      if (m.match(_commentWithHashRe)) {\n        comments.push(m);\n      } else {\n        // Replace non hash comments with empty lines.\n        // This is done so that we do not leak any sensitive data in comments.\n        const newLinesMatches = m.match(_newLinesRe);\n        comments.push((newLinesMatches?.join('') ?? '') + '\\n');\n      }\n      return COMMENT_PLACEHOLDER;\n    });\n    cssText = this._insertDirectives(cssText);\n    const scopedCssText = this._scopeCssText(cssText, selector, hostSelector);\n    // Add back comments at the original position.\n    let commentIdx = 0;\n    return scopedCssText.replace(_commentWithHashPlaceHolderRe, () => comments[commentIdx++]);\n  }\n  _insertDirectives(cssText) {\n    cssText = this._insertPolyfillDirectivesInCssText(cssText);\n    return this._insertPolyfillRulesInCssText(cssText);\n  }\n  /**\n   * Process styles to add scope to keyframes.\n   *\n   * Modify both the names of the keyframes defined in the component styles and also the css\n   * animation rules using them.\n   *\n   * Animation rules using keyframes defined elsewhere are not modified to allow for globally\n   * defined keyframes.\n   *\n   * For example, we convert this css:\n   *\n   * ```\n   * .box {\n   *   animation: box-animation 1s forwards;\n   * }\n   *\n   * @keyframes box-animation {\n   *   to {\n   *     background-color: green;\n   *   }\n   * }\n   * ```\n   *\n   * to this:\n   *\n   * ```\n   * .box {\n   *   animation: scopeName_box-animation 1s forwards;\n   * }\n   *\n   * @keyframes scopeName_box-animation {\n   *   to {\n   *     background-color: green;\n   *   }\n   * }\n   * ```\n   *\n   * @param cssText the component's css text that needs to be scoped.\n   * @param scopeSelector the component's scope selector.\n   *\n   * @returns the scoped css text.\n   */\n  _scopeKeyframesRelatedCss(cssText, scopeSelector) {\n    const unscopedKeyframesSet = new Set();\n    const scopedKeyframesCssText = processRules(cssText, rule => this._scopeLocalKeyframeDeclarations(rule, scopeSelector, unscopedKeyframesSet));\n    return processRules(scopedKeyframesCssText, rule => this._scopeAnimationRule(rule, scopeSelector, unscopedKeyframesSet));\n  }\n  /**\n   * Scopes local keyframes names, returning the updated css rule and it also\n   * adds the original keyframe name to a provided set to collect all keyframes names\n   * so that it can later be used to scope the animation rules.\n   *\n   * For example, it takes a rule such as:\n   *\n   * ```\n   * @keyframes box-animation {\n   *   to {\n   *     background-color: green;\n   *   }\n   * }\n   * ```\n   *\n   * and returns:\n   *\n   * ```\n   * @keyframes scopeName_box-animation {\n   *   to {\n   *     background-color: green;\n   *   }\n   * }\n   * ```\n   * and as a side effect it adds \"box-animation\" to the `unscopedKeyframesSet` set\n   *\n   * @param cssRule the css rule to process.\n   * @param scopeSelector the component's scope selector.\n   * @param unscopedKeyframesSet the set of unscoped keyframes names (which can be\n   * modified as a side effect)\n   *\n   * @returns the css rule modified with the scoped keyframes name.\n   */\n  _scopeLocalKeyframeDeclarations(rule, scopeSelector, unscopedKeyframesSet) {\n    return {\n      ...rule,\n      selector: rule.selector.replace(/(^@(?:-webkit-)?keyframes(?:\\s+))(['\"]?)(.+)\\2(\\s*)$/, (_, start, quote, keyframeName, endSpaces) => {\n        unscopedKeyframesSet.add(unescapeQuotes(keyframeName, quote));\n        return `${start}${quote}${scopeSelector}_${keyframeName}${quote}${endSpaces}`;\n      })\n    };\n  }\n  /**\n   * Function used to scope a keyframes name (obtained from an animation declaration)\n   * using an existing set of unscopedKeyframes names to discern if the scoping needs to be\n   * performed (keyframes names of keyframes not defined in the component's css need not to be\n   * scoped).\n   *\n   * @param keyframe the keyframes name to check.\n   * @param scopeSelector the component's scope selector.\n   * @param unscopedKeyframesSet the set of unscoped keyframes names.\n   *\n   * @returns the scoped name of the keyframe, or the original name is the name need not to be\n   * scoped.\n   */\n  _scopeAnimationKeyframe(keyframe, scopeSelector, unscopedKeyframesSet) {\n    return keyframe.replace(/^(\\s*)(['\"]?)(.+?)\\2(\\s*)$/, (_, spaces1, quote, name, spaces2) => {\n      name = `${unscopedKeyframesSet.has(unescapeQuotes(name, quote)) ? scopeSelector + '_' : ''}${name}`;\n      return `${spaces1}${quote}${name}${quote}${spaces2}`;\n    });\n  }\n  /**\n   * Scope an animation rule so that the keyframes mentioned in such rule\n   * are scoped if defined in the component's css and left untouched otherwise.\n   *\n   * It can scope values of both the 'animation' and 'animation-name' properties.\n   *\n   * @param rule css rule to scope.\n   * @param scopeSelector the component's scope selector.\n   * @param unscopedKeyframesSet the set of unscoped keyframes names.\n   *\n   * @returns the updated css rule.\n   **/\n  _scopeAnimationRule(rule, scopeSelector, unscopedKeyframesSet) {\n    let content = rule.content.replace(/((?:^|\\s+|;)(?:-webkit-)?animation\\s*:\\s*),*([^;]+)/g, (_, start, animationDeclarations) => start + animationDeclarations.replace(this._animationDeclarationKeyframesRe, (original, leadingSpaces, quote = '', quotedName, nonQuotedName) => {\n      if (quotedName) {\n        return `${leadingSpaces}${this._scopeAnimationKeyframe(`${quote}${quotedName}${quote}`, scopeSelector, unscopedKeyframesSet)}`;\n      } else {\n        return animationKeywords.has(nonQuotedName) ? original : `${leadingSpaces}${this._scopeAnimationKeyframe(nonQuotedName, scopeSelector, unscopedKeyframesSet)}`;\n      }\n    }));\n    content = content.replace(/((?:^|\\s+|;)(?:-webkit-)?animation-name(?:\\s*):(?:\\s*))([^;]+)/g, (_match, start, commaSeparatedKeyframes) => `${start}${commaSeparatedKeyframes.split(',').map(keyframe => this._scopeAnimationKeyframe(keyframe, scopeSelector, unscopedKeyframesSet)).join(',')}`);\n    return {\n      ...rule,\n      content\n    };\n  }\n  /*\n   * Process styles to convert native ShadowDOM rules that will trip\n   * up the css parser; we rely on decorating the stylesheet with inert rules.\n   *\n   * For example, we convert this rule:\n   *\n   * polyfill-next-selector { content: ':host menu-item'; }\n   * ::content menu-item {\n   *\n   * to this:\n   *\n   * scopeName menu-item {\n   *\n   **/\n  _insertPolyfillDirectivesInCssText(cssText) {\n    return cssText.replace(_cssContentNextSelectorRe, function (...m) {\n      return m[2] + '{';\n    });\n  }\n  /*\n   * Process styles to add rules which will only apply under the polyfill\n   *\n   * For example, we convert this rule:\n   *\n   * polyfill-rule {\n   *   content: ':host menu-item';\n   * ...\n   * }\n   *\n   * to this:\n   *\n   * scopeName menu-item {...}\n   *\n   **/\n  _insertPolyfillRulesInCssText(cssText) {\n    return cssText.replace(_cssContentRuleRe, (...m) => {\n      const rule = m[0].replace(m[1], '').replace(m[2], '');\n      return m[4] + rule;\n    });\n  }\n  /* Ensure styles are scoped. Pseudo-scoping takes a rule like:\n   *\n   *  .foo {... }\n   *\n   *  and converts this to\n   *\n   *  scopeName .foo { ... }\n   */\n  _scopeCssText(cssText, scopeSelector, hostSelector) {\n    const unscopedRules = this._extractUnscopedRulesFromCssText(cssText);\n    // replace :host and :host-context -shadowcsshost and -shadowcsshost respectively\n    cssText = this._insertPolyfillHostInCssText(cssText);\n    cssText = this._convertColonHost(cssText);\n    cssText = this._convertColonHostContext(cssText);\n    cssText = this._convertShadowDOMSelectors(cssText);\n    if (scopeSelector) {\n      cssText = this._scopeKeyframesRelatedCss(cssText, scopeSelector);\n      cssText = this._scopeSelectors(cssText, scopeSelector, hostSelector);\n    }\n    cssText = cssText + '\\n' + unscopedRules;\n    return cssText.trim();\n  }\n  /*\n   * Process styles to add rules which will only apply under the polyfill\n   * and do not process via CSSOM. (CSSOM is destructive to rules on rare\n   * occasions, e.g. -webkit-calc on Safari.)\n   * For example, we convert this rule:\n   *\n   * @polyfill-unscoped-rule {\n   *   content: 'menu-item';\n   * ... }\n   *\n   * to this:\n   *\n   * menu-item {...}\n   *\n   **/\n  _extractUnscopedRulesFromCssText(cssText) {\n    let r = '';\n    let m;\n    _cssContentUnscopedRuleRe.lastIndex = 0;\n    while ((m = _cssContentUnscopedRuleRe.exec(cssText)) !== null) {\n      const rule = m[0].replace(m[2], '').replace(m[1], m[4]);\n      r += rule + '\\n\\n';\n    }\n    return r;\n  }\n  /*\n   * convert a rule like :host(.foo) > .bar { }\n   *\n   * to\n   *\n   * .foo<scopeName> > .bar\n   */\n  _convertColonHost(cssText) {\n    return cssText.replace(_cssColonHostRe, (_, hostSelectors, otherSelectors) => {\n      if (hostSelectors) {\n        const convertedSelectors = [];\n        const hostSelectorArray = hostSelectors.split(',').map(p => p.trim());\n        for (const hostSelector of hostSelectorArray) {\n          if (!hostSelector) break;\n          const convertedSelector = _polyfillHostNoCombinator + hostSelector.replace(_polyfillHost, '') + otherSelectors;\n          convertedSelectors.push(convertedSelector);\n        }\n        return convertedSelectors.join(',');\n      } else {\n        return _polyfillHostNoCombinator + otherSelectors;\n      }\n    });\n  }\n  /*\n   * convert a rule like :host-context(.foo) > .bar { }\n   *\n   * to\n   *\n   * .foo<scopeName> > .bar, .foo <scopeName> > .bar { }\n   *\n   * and\n   *\n   * :host-context(.foo:host) .bar { ... }\n   *\n   * to\n   *\n   * .foo<scopeName> .bar { ... }\n   */\n  _convertColonHostContext(cssText) {\n    return cssText.replace(_cssColonHostContextReGlobal, selectorText => {\n      // We have captured a selector that contains a `:host-context` rule.\n      // For backward compatibility `:host-context` may contain a comma separated list of selectors.\n      // Each context selector group will contain a list of host-context selectors that must match\n      // an ancestor of the host.\n      // (Normally `contextSelectorGroups` will only contain a single array of context selectors.)\n      const contextSelectorGroups = [[]];\n      // There may be more than `:host-context` in this selector so `selectorText` could look like:\n      // `:host-context(.one):host-context(.two)`.\n      // Execute `_cssColonHostContextRe` over and over until we have extracted all the\n      // `:host-context` selectors from this selector.\n      let match;\n      while (match = _cssColonHostContextRe.exec(selectorText)) {\n        // `match` = [':host-context(<selectors>)<rest>', <selectors>, <rest>]\n        // The `<selectors>` could actually be a comma separated list: `:host-context(.one, .two)`.\n        const newContextSelectors = (match[1] ?? '').trim().split(',').map(m => m.trim()).filter(m => m !== '');\n        // We must duplicate the current selector group for each of these new selectors.\n        // For example if the current groups are:\n        // ```\n        // [\n        //   ['a', 'b', 'c'],\n        //   ['x', 'y', 'z'],\n        // ]\n        // ```\n        // And we have a new set of comma separated selectors: `:host-context(m,n)` then the new\n        // groups are:\n        // ```\n        // [\n        //   ['a', 'b', 'c', 'm'],\n        //   ['x', 'y', 'z', 'm'],\n        //   ['a', 'b', 'c', 'n'],\n        //   ['x', 'y', 'z', 'n'],\n        // ]\n        // ```\n        const contextSelectorGroupsLength = contextSelectorGroups.length;\n        repeatGroups(contextSelectorGroups, newContextSelectors.length);\n        for (let i = 0; i < newContextSelectors.length; i++) {\n          for (let j = 0; j < contextSelectorGroupsLength; j++) {\n            contextSelectorGroups[j + i * contextSelectorGroupsLength].push(newContextSelectors[i]);\n          }\n        }\n        // Update the `selectorText` and see repeat to see if there are more `:host-context`s.\n        selectorText = match[2];\n      }\n      // The context selectors now must be combined with each other to capture all the possible\n      // selectors that `:host-context` can match. See `combineHostContextSelectors()` for more\n      // info about how this is done.\n      return contextSelectorGroups.map(contextSelectors => combineHostContextSelectors(contextSelectors, selectorText)).join(', ');\n    });\n  }\n  /*\n   * Convert combinators like ::shadow and pseudo-elements like ::content\n   * by replacing with space.\n   */\n  _convertShadowDOMSelectors(cssText) {\n    return _shadowDOMSelectorsRe.reduce((result, pattern) => result.replace(pattern, ' '), cssText);\n  }\n  // change a selector like 'div' to 'name div'\n  _scopeSelectors(cssText, scopeSelector, hostSelector) {\n    return processRules(cssText, rule => {\n      let selector = rule.selector;\n      let content = rule.content;\n      if (rule.selector[0] !== '@') {\n        selector = this._scopeSelector(rule.selector, scopeSelector, hostSelector);\n      } else if (scopedAtRuleIdentifiers.some(atRule => rule.selector.startsWith(atRule))) {\n        content = this._scopeSelectors(rule.content, scopeSelector, hostSelector);\n      } else if (rule.selector.startsWith('@font-face') || rule.selector.startsWith('@page')) {\n        content = this._stripScopingSelectors(rule.content);\n      }\n      return new CssRule(selector, content);\n    });\n  }\n  /**\n   * Handle a css text that is within a rule that should not contain scope selectors by simply\n   * removing them! An example of such a rule is `@font-face`.\n   *\n   * `@font-face` rules cannot contain nested selectors. Nor can they be nested under a selector.\n   * Normally this would be a syntax error by the author of the styles. But in some rare cases, such\n   * as importing styles from a library, and applying `:host ::ng-deep` to the imported styles, we\n   * can end up with broken css if the imported styles happen to contain @font-face rules.\n   *\n   * For example:\n   *\n   * ```\n   * :host ::ng-deep {\n   *   import 'some/lib/containing/font-face';\n   * }\n   *\n   * Similar logic applies to `@page` rules which can contain a particular set of properties,\n   * as well as some specific at-rules. Since they can't be encapsulated, we have to strip\n   * any scoping selectors from them. For more information: https://www.w3.org/TR/css-page-3\n   * ```\n   */\n  _stripScopingSelectors(cssText) {\n    return processRules(cssText, rule => {\n      const selector = rule.selector.replace(_shadowDeepSelectors, ' ').replace(_polyfillHostNoCombinatorRe, ' ');\n      return new CssRule(selector, rule.content);\n    });\n  }\n  _scopeSelector(selector, scopeSelector, hostSelector) {\n    return selector.split(/ ?, ?/).map(part => part.split(_shadowDeepSelectors)).map(deepParts => {\n      const [shallowPart, ...otherParts] = deepParts;\n      const applyScope = shallowPart => {\n        if (this._selectorNeedsScoping(shallowPart, scopeSelector)) {\n          return this._applySelectorScope(shallowPart, scopeSelector, hostSelector);\n        } else {\n          return shallowPart;\n        }\n      };\n      return [applyScope(shallowPart), ...otherParts].join(' ');\n    }).join(', ');\n  }\n  _selectorNeedsScoping(selector, scopeSelector) {\n    const re = this._makeScopeMatcher(scopeSelector);\n    return !re.test(selector);\n  }\n  _makeScopeMatcher(scopeSelector) {\n    const lre = /\\[/g;\n    const rre = /\\]/g;\n    scopeSelector = scopeSelector.replace(lre, '\\\\[').replace(rre, '\\\\]');\n    return new RegExp('^(' + scopeSelector + ')' + _selectorReSuffix, 'm');\n  }\n  // scope via name and [is=name]\n  _applySimpleSelectorScope(selector, scopeSelector, hostSelector) {\n    // In Android browser, the lastIndex is not reset when the regex is used in String.replace()\n    _polyfillHostRe.lastIndex = 0;\n    if (_polyfillHostRe.test(selector)) {\n      const replaceBy = `[${hostSelector}]`;\n      return selector.replace(_polyfillHostNoCombinatorRe, (hnc, selector) => {\n        return selector.replace(/([^:]*)(:*)(.*)/, (_, before, colon, after) => {\n          return before + replaceBy + colon + after;\n        });\n      }).replace(_polyfillHostRe, replaceBy + ' ');\n    }\n    return scopeSelector + ' ' + selector;\n  }\n  // return a selector with [name] suffix on each simple selector\n  // e.g. .foo.bar > .zot becomes .foo[name].bar[name] > .zot[name]  /** @internal */\n  _applySelectorScope(selector, scopeSelector, hostSelector) {\n    const isRe = /\\[is=([^\\]]*)\\]/g;\n    scopeSelector = scopeSelector.replace(isRe, (_, ...parts) => parts[0]);\n    const attrName = '[' + scopeSelector + ']';\n    const _scopeSelectorPart = p => {\n      let scopedP = p.trim();\n      if (!scopedP) {\n        return p;\n      }\n      if (p.includes(_polyfillHostNoCombinator)) {\n        scopedP = this._applySimpleSelectorScope(p, scopeSelector, hostSelector);\n      } else {\n        // remove :host since it should be unnecessary\n        const t = p.replace(_polyfillHostRe, '');\n        if (t.length > 0) {\n          const matches = t.match(/([^:]*)(:*)(.*)/);\n          if (matches) {\n            scopedP = matches[1] + attrName + matches[2] + matches[3];\n          }\n        }\n      }\n      return scopedP;\n    };\n    const safeContent = new SafeSelector(selector);\n    selector = safeContent.content();\n    let scopedSelector = '';\n    let startIndex = 0;\n    let res;\n    const sep = /( |>|\\+|~(?!=))\\s*/g;\n    // If a selector appears before :host it should not be shimmed as it\n    // matches on ancestor elements and not on elements in the host's shadow\n    // `:host-context(div)` is transformed to\n    // `-shadowcsshost-no-combinatordiv, div -shadowcsshost-no-combinator`\n    // the `div` is not part of the component in the 2nd selectors and should not be scoped.\n    // Historically `component-tag:host` was matching the component so we also want to preserve\n    // this behavior to avoid breaking legacy apps (it should not match).\n    // The behavior should be:\n    // - `tag:host` -> `tag[h]` (this is to avoid breaking legacy apps, should not match anything)\n    // - `tag :host` -> `tag [h]` (`tag` is not scoped because it's considered part of a\n    //   `:host-context(tag)`)\n    const hasHost = selector.includes(_polyfillHostNoCombinator);\n    // Only scope parts after the first `-shadowcsshost-no-combinator` when it is present\n    let shouldScope = !hasHost;\n    while ((res = sep.exec(selector)) !== null) {\n      const separator = res[1];\n      // Do not trim the selector, as otherwise this will break sourcemaps\n      // when they are defined on multiple lines\n      // Example:\n      //  div,\n      //  p { color: red}\n      const part = selector.slice(startIndex, res.index);\n      // A space following an escaped hex value and followed by another hex character\n      // (ie: \".\\fc ber\" for \".über\") is not a separator between 2 selectors\n      // also keep in mind that backslashes are replaced by a placeholder by SafeSelector\n      // These escaped selectors happen for example when esbuild runs with optimization.minify.\n      if (part.match(/__esc-ph-(\\d+)__/) && selector[res.index + 1]?.match(/[a-fA-F\\d]/)) {\n        continue;\n      }\n      shouldScope = shouldScope || part.includes(_polyfillHostNoCombinator);\n      const scopedPart = shouldScope ? _scopeSelectorPart(part) : part;\n      scopedSelector += `${scopedPart} ${separator} `;\n      startIndex = sep.lastIndex;\n    }\n    const part = selector.substring(startIndex);\n    shouldScope = shouldScope || part.includes(_polyfillHostNoCombinator);\n    scopedSelector += shouldScope ? _scopeSelectorPart(part) : part;\n    // replace the placeholders with their original values\n    return safeContent.restore(scopedSelector);\n  }\n  _insertPolyfillHostInCssText(selector) {\n    return selector.replace(_colonHostContextRe, _polyfillHostContext).replace(_colonHostRe, _polyfillHost);\n  }\n}\nclass SafeSelector {\n  constructor(selector) {\n    this.placeholders = [];\n    this.index = 0;\n    // Replaces attribute selectors with placeholders.\n    // The WS in [attr=\"va lue\"] would otherwise be interpreted as a selector separator.\n    selector = this._escapeRegexMatches(selector, /(\\[[^\\]]*\\])/g);\n    // CSS allows for certain special characters to be used in selectors if they're escaped.\n    // E.g. `.foo:blue` won't match a class called `foo:blue`, because the colon denotes a\n    // pseudo-class, but writing `.foo\\:blue` will match, because the colon was escaped.\n    // Replace all escape sequences (`\\` followed by a character) with a placeholder so\n    // that our handling of pseudo-selectors doesn't mess with them.\n    // Escaped characters have a specific placeholder so they can be detected separately.\n    selector = selector.replace(/(\\\\.)/g, (_, keep) => {\n      const replaceBy = `__esc-ph-${this.index}__`;\n      this.placeholders.push(keep);\n      this.index++;\n      return replaceBy;\n    });\n    // Replaces the expression in `:nth-child(2n + 1)` with a placeholder.\n    // WS and \"+\" would otherwise be interpreted as selector separators.\n    this._content = selector.replace(/(:nth-[-\\w]+)(\\([^)]+\\))/g, (_, pseudo, exp) => {\n      const replaceBy = `__ph-${this.index}__`;\n      this.placeholders.push(exp);\n      this.index++;\n      return pseudo + replaceBy;\n    });\n  }\n  restore(content) {\n    return content.replace(/__(?:ph|esc-ph)-(\\d+)__/g, (_ph, index) => this.placeholders[+index]);\n  }\n  content() {\n    return this._content;\n  }\n  /**\n   * Replaces all of the substrings that match a regex within a\n   * special string (e.g. `__ph-0__`, `__ph-1__`, etc).\n   */\n  _escapeRegexMatches(content, pattern) {\n    return content.replace(pattern, (_, keep) => {\n      const replaceBy = `__ph-${this.index}__`;\n      this.placeholders.push(keep);\n      this.index++;\n      return replaceBy;\n    });\n  }\n}\nconst _cssContentNextSelectorRe = /polyfill-next-selector[^}]*content:[\\s]*?(['\"])(.*?)\\1[;\\s]*}([^{]*?){/gim;\nconst _cssContentRuleRe = /(polyfill-rule)[^}]*(content:[\\s]*(['\"])(.*?)\\3)[;\\s]*[^}]*}/gim;\nconst _cssContentUnscopedRuleRe = /(polyfill-unscoped-rule)[^}]*(content:[\\s]*(['\"])(.*?)\\3)[;\\s]*[^}]*}/gim;\nconst _polyfillHost = '-shadowcsshost';\n// note: :host-context pre-processed to -shadowcsshostcontext.\nconst _polyfillHostContext = '-shadowcsscontext';\nconst _parenSuffix = '(?:\\\\((' + '(?:\\\\([^)(]*\\\\)|[^)(]*)+?' + ')\\\\))?([^,{]*)';\nconst _cssColonHostRe = new RegExp(_polyfillHost + _parenSuffix, 'gim');\nconst _cssColonHostContextReGlobal = new RegExp(_polyfillHostContext + _parenSuffix, 'gim');\nconst _cssColonHostContextRe = new RegExp(_polyfillHostContext + _parenSuffix, 'im');\nconst _polyfillHostNoCombinator = _polyfillHost + '-no-combinator';\nconst _polyfillHostNoCombinatorRe = /-shadowcsshost-no-combinator([^\\s]*)/;\nconst _shadowDOMSelectorsRe = [/::shadow/g, /::content/g,\n// Deprecated selectors\n/\\/shadow-deep\\//g, /\\/shadow\\//g];\n// The deep combinator is deprecated in the CSS spec\n// Support for `>>>`, `deep`, `::ng-deep` is then also deprecated and will be removed in the future.\n// see https://github.com/angular/angular/pull/17677\nconst _shadowDeepSelectors = /(?:>>>)|(?:\\/deep\\/)|(?:::ng-deep)/g;\nconst _selectorReSuffix = '([>\\\\s~+[.,{:][\\\\s\\\\S]*)?$';\nconst _polyfillHostRe = /-shadowcsshost/gim;\nconst _colonHostRe = /:host/gim;\nconst _colonHostContextRe = /:host-context/gim;\nconst _newLinesRe = /\\r?\\n/g;\nconst _commentRe = /\\/\\*[\\s\\S]*?\\*\\//g;\nconst _commentWithHashRe = /\\/\\*\\s*#\\s*source(Mapping)?URL=/g;\nconst COMMENT_PLACEHOLDER = '%COMMENT%';\nconst _commentWithHashPlaceHolderRe = new RegExp(COMMENT_PLACEHOLDER, 'g');\nconst BLOCK_PLACEHOLDER = '%BLOCK%';\nconst _ruleRe = new RegExp(`(\\\\s*(?:${COMMENT_PLACEHOLDER}\\\\s*)*)([^;\\\\{\\\\}]+?)(\\\\s*)((?:{%BLOCK%}?\\\\s*;?)|(?:\\\\s*;))`, 'g');\nconst CONTENT_PAIRS = new Map([['{', '}']]);\nconst COMMA_IN_PLACEHOLDER = '%COMMA_IN_PLACEHOLDER%';\nconst SEMI_IN_PLACEHOLDER = '%SEMI_IN_PLACEHOLDER%';\nconst COLON_IN_PLACEHOLDER = '%COLON_IN_PLACEHOLDER%';\nconst _cssCommaInPlaceholderReGlobal = new RegExp(COMMA_IN_PLACEHOLDER, 'g');\nconst _cssSemiInPlaceholderReGlobal = new RegExp(SEMI_IN_PLACEHOLDER, 'g');\nconst _cssColonInPlaceholderReGlobal = new RegExp(COLON_IN_PLACEHOLDER, 'g');\nclass CssRule {\n  constructor(selector, content) {\n    this.selector = selector;\n    this.content = content;\n  }\n}\nfunction processRules(input, ruleCallback) {\n  const escaped = escapeInStrings(input);\n  const inputWithEscapedBlocks = escapeBlocks(escaped, CONTENT_PAIRS, BLOCK_PLACEHOLDER);\n  let nextBlockIndex = 0;\n  const escapedResult = inputWithEscapedBlocks.escapedString.replace(_ruleRe, (...m) => {\n    const selector = m[2];\n    let content = '';\n    let suffix = m[4];\n    let contentPrefix = '';\n    if (suffix && suffix.startsWith('{' + BLOCK_PLACEHOLDER)) {\n      content = inputWithEscapedBlocks.blocks[nextBlockIndex++];\n      suffix = suffix.substring(BLOCK_PLACEHOLDER.length + 1);\n      contentPrefix = '{';\n    }\n    const rule = ruleCallback(new CssRule(selector, content));\n    return `${m[1]}${rule.selector}${m[3]}${contentPrefix}${rule.content}${suffix}`;\n  });\n  return unescapeInStrings(escapedResult);\n}\nclass StringWithEscapedBlocks {\n  constructor(escapedString, blocks) {\n    this.escapedString = escapedString;\n    this.blocks = blocks;\n  }\n}\nfunction escapeBlocks(input, charPairs, placeholder) {\n  const resultParts = [];\n  const escapedBlocks = [];\n  let openCharCount = 0;\n  let nonBlockStartIndex = 0;\n  let blockStartIndex = -1;\n  let openChar;\n  let closeChar;\n  for (let i = 0; i < input.length; i++) {\n    const char = input[i];\n    if (char === '\\\\') {\n      i++;\n    } else if (char === closeChar) {\n      openCharCount--;\n      if (openCharCount === 0) {\n        escapedBlocks.push(input.substring(blockStartIndex, i));\n        resultParts.push(placeholder);\n        nonBlockStartIndex = i;\n        blockStartIndex = -1;\n        openChar = closeChar = undefined;\n      }\n    } else if (char === openChar) {\n      openCharCount++;\n    } else if (openCharCount === 0 && charPairs.has(char)) {\n      openChar = char;\n      closeChar = charPairs.get(char);\n      openCharCount = 1;\n      blockStartIndex = i + 1;\n      resultParts.push(input.substring(nonBlockStartIndex, blockStartIndex));\n    }\n  }\n  if (blockStartIndex !== -1) {\n    escapedBlocks.push(input.substring(blockStartIndex));\n    resultParts.push(placeholder);\n  } else {\n    resultParts.push(input.substring(nonBlockStartIndex));\n  }\n  return new StringWithEscapedBlocks(resultParts.join(''), escapedBlocks);\n}\n/**\n * Object containing as keys characters that should be substituted by placeholders\n * when found in strings during the css text parsing, and as values the respective\n * placeholders\n */\nconst ESCAPE_IN_STRING_MAP = {\n  ';': SEMI_IN_PLACEHOLDER,\n  ',': COMMA_IN_PLACEHOLDER,\n  ':': COLON_IN_PLACEHOLDER\n};\n/**\n * Parse the provided css text and inside strings (meaning, inside pairs of unescaped single or\n * double quotes) replace specific characters with their respective placeholders as indicated\n * by the `ESCAPE_IN_STRING_MAP` map.\n *\n * For example convert the text\n *  `animation: \"my-anim:at\\\"ion\" 1s;`\n * to\n *  `animation: \"my-anim%COLON_IN_PLACEHOLDER%at\\\"ion\" 1s;`\n *\n * This is necessary in order to remove the meaning of some characters when found inside strings\n * (for example `;` indicates the end of a css declaration, `,` the sequence of values and `:` the\n * division between property and value during a declaration, none of these meanings apply when such\n * characters are within strings and so in order to prevent parsing issues they need to be replaced\n * with placeholder text for the duration of the css manipulation process).\n *\n * @param input the original css text.\n *\n * @returns the css text with specific characters in strings replaced by placeholders.\n **/\nfunction escapeInStrings(input) {\n  let result = input;\n  let currentQuoteChar = null;\n  for (let i = 0; i < result.length; i++) {\n    const char = result[i];\n    if (char === '\\\\') {\n      i++;\n    } else {\n      if (currentQuoteChar !== null) {\n        // index i is inside a quoted sub-string\n        if (char === currentQuoteChar) {\n          currentQuoteChar = null;\n        } else {\n          const placeholder = ESCAPE_IN_STRING_MAP[char];\n          if (placeholder) {\n            result = `${result.substr(0, i)}${placeholder}${result.substr(i + 1)}`;\n            i += placeholder.length - 1;\n          }\n        }\n      } else if (char === \"'\" || char === '\"') {\n        currentQuoteChar = char;\n      }\n    }\n  }\n  return result;\n}\n/**\n * Replace in a string all occurrences of keys in the `ESCAPE_IN_STRING_MAP` map with their\n * original representation, this is simply used to revert the changes applied by the\n * escapeInStrings function.\n *\n * For example it reverts the text:\n *  `animation: \"my-anim%COLON_IN_PLACEHOLDER%at\\\"ion\" 1s;`\n * to it's original form of:\n *  `animation: \"my-anim:at\\\"ion\" 1s;`\n *\n * Note: For the sake of simplicity this function does not check that the placeholders are\n * actually inside strings as it would anyway be extremely unlikely to find them outside of strings.\n *\n * @param input the css text containing the placeholders.\n *\n * @returns the css text without the placeholders.\n */\nfunction unescapeInStrings(input) {\n  let result = input.replace(_cssCommaInPlaceholderReGlobal, ',');\n  result = result.replace(_cssSemiInPlaceholderReGlobal, ';');\n  result = result.replace(_cssColonInPlaceholderReGlobal, ':');\n  return result;\n}\n/**\n * Unescape all quotes present in a string, but only if the string was actually already\n * quoted.\n *\n * This generates a \"canonical\" representation of strings which can be used to match strings\n * which would otherwise only differ because of differently escaped quotes.\n *\n * For example it converts the string (assumed to be quoted):\n *  `this \\\\\"is\\\\\" a \\\\'\\\\\\\\'test`\n * to:\n *  `this \"is\" a '\\\\\\\\'test`\n * (note that the latter backslashes are not removed as they are not actually escaping the single\n * quote)\n *\n *\n * @param input the string possibly containing escaped quotes.\n * @param isQuoted boolean indicating whether the string was quoted inside a bigger string (if not\n * then it means that it doesn't represent an inner string and thus no unescaping is required)\n *\n * @returns the string in the \"canonical\" representation without escaped quotes.\n */\nfunction unescapeQuotes(str, isQuoted) {\n  return !isQuoted ? str : str.replace(/((?:^|[^\\\\])(?:\\\\\\\\)*)\\\\(?=['\"])/g, '$1');\n}\n/**\n * Combine the `contextSelectors` with the `hostMarker` and the `otherSelectors`\n * to create a selector that matches the same as `:host-context()`.\n *\n * Given a single context selector `A` we need to output selectors that match on the host and as an\n * ancestor of the host:\n *\n * ```\n * A <hostMarker>, A<hostMarker> {}\n * ```\n *\n * When there is more than one context selector we also have to create combinations of those\n * selectors with each other. For example if there are `A` and `B` selectors the output is:\n *\n * ```\n * AB<hostMarker>, AB <hostMarker>, A B<hostMarker>,\n * B A<hostMarker>, A B <hostMarker>, B A <hostMarker> {}\n * ```\n *\n * And so on...\n *\n * @param contextSelectors an array of context selectors that will be combined.\n * @param otherSelectors the rest of the selectors that are not context selectors.\n */\nfunction combineHostContextSelectors(contextSelectors, otherSelectors) {\n  const hostMarker = _polyfillHostNoCombinator;\n  _polyfillHostRe.lastIndex = 0; // reset the regex to ensure we get an accurate test\n  const otherSelectorsHasHost = _polyfillHostRe.test(otherSelectors);\n  // If there are no context selectors then just output a host marker\n  if (contextSelectors.length === 0) {\n    return hostMarker + otherSelectors;\n  }\n  const combined = [contextSelectors.pop() || ''];\n  while (contextSelectors.length > 0) {\n    const length = combined.length;\n    const contextSelector = contextSelectors.pop();\n    for (let i = 0; i < length; i++) {\n      const previousSelectors = combined[i];\n      // Add the new selector as a descendant of the previous selectors\n      combined[length * 2 + i] = previousSelectors + ' ' + contextSelector;\n      // Add the new selector as an ancestor of the previous selectors\n      combined[length + i] = contextSelector + ' ' + previousSelectors;\n      // Add the new selector to act on the same element as the previous selectors\n      combined[i] = contextSelector + previousSelectors;\n    }\n  }\n  // Finally connect the selector to the `hostMarker`s: either acting directly on the host\n  // (A<hostMarker>) or as an ancestor (A <hostMarker>).\n  return combined.map(s => otherSelectorsHasHost ? `${s}${otherSelectors}` : `${s}${hostMarker}${otherSelectors}, ${s} ${hostMarker}${otherSelectors}`).join(',');\n}\n/**\n * Mutate the given `groups` array so that there are `multiples` clones of the original array\n * stored.\n *\n * For example `repeatGroups([a, b], 3)` will result in `[a, b, a, b, a, b]` - but importantly the\n * newly added groups will be clones of the original.\n *\n * @param groups An array of groups of strings that will be repeated. This array is mutated\n *     in-place.\n * @param multiples The number of times the current groups should appear.\n */\nfunction repeatGroups(groups, multiples) {\n  const length = groups.length;\n  for (let i = 1; i < multiples; i++) {\n    for (let j = 0; j < length; j++) {\n      groups[j + i * length] = groups[j].slice(0);\n    }\n  }\n}\n\n/**\n * Distinguishes different kinds of IR operations.\n *\n * Includes both creation and update operations.\n */\nvar OpKind;\n(function (OpKind) {\n  /**\n   * A special operation type which is used to represent the beginning and end nodes of a linked\n   * list of operations.\n   */\n  OpKind[OpKind[\"ListEnd\"] = 0] = \"ListEnd\";\n  /**\n   * An operation which wraps an output AST statement.\n   */\n  OpKind[OpKind[\"Statement\"] = 1] = \"Statement\";\n  /**\n   * An operation which declares and initializes a `SemanticVariable`.\n   */\n  OpKind[OpKind[\"Variable\"] = 2] = \"Variable\";\n  /**\n   * An operation to begin rendering of an element.\n   */\n  OpKind[OpKind[\"ElementStart\"] = 3] = \"ElementStart\";\n  /**\n   * An operation to render an element with no children.\n   */\n  OpKind[OpKind[\"Element\"] = 4] = \"Element\";\n  /**\n   * An operation which declares an embedded view.\n   */\n  OpKind[OpKind[\"Template\"] = 5] = \"Template\";\n  /**\n   * An operation to end rendering of an element previously started with `ElementStart`.\n   */\n  OpKind[OpKind[\"ElementEnd\"] = 6] = \"ElementEnd\";\n  /**\n   * An operation to begin an `ng-container`.\n   */\n  OpKind[OpKind[\"ContainerStart\"] = 7] = \"ContainerStart\";\n  /**\n   * An operation for an `ng-container` with no children.\n   */\n  OpKind[OpKind[\"Container\"] = 8] = \"Container\";\n  /**\n   * An operation to end an `ng-container`.\n   */\n  OpKind[OpKind[\"ContainerEnd\"] = 9] = \"ContainerEnd\";\n  /**\n   * An operation disable binding for subsequent elements, which are descendants of a non-bindable\n   * node.\n   */\n  OpKind[OpKind[\"DisableBindings\"] = 10] = \"DisableBindings\";\n  /**\n   * An op to conditionally render a template.\n   */\n  OpKind[OpKind[\"Conditional\"] = 11] = \"Conditional\";\n  /**\n   * An operation to re-enable binding, after it was previously disabled.\n   */\n  OpKind[OpKind[\"EnableBindings\"] = 12] = \"EnableBindings\";\n  /**\n   * An operation to render a text node.\n   */\n  OpKind[OpKind[\"Text\"] = 13] = \"Text\";\n  /**\n   * An operation declaring an event listener for an element.\n   */\n  OpKind[OpKind[\"Listener\"] = 14] = \"Listener\";\n  /**\n   * An operation to interpolate text into a text node.\n   */\n  OpKind[OpKind[\"InterpolateText\"] = 15] = \"InterpolateText\";\n  /**\n   * An intermediate binding op, that has not yet been processed into an individual property,\n   * attribute, style, etc.\n   */\n  OpKind[OpKind[\"Binding\"] = 16] = \"Binding\";\n  /**\n   * An operation to bind an expression to a property of an element.\n   */\n  OpKind[OpKind[\"Property\"] = 17] = \"Property\";\n  /**\n   * An operation to bind an expression to a style property of an element.\n   */\n  OpKind[OpKind[\"StyleProp\"] = 18] = \"StyleProp\";\n  /**\n   * An operation to bind an expression to a class property of an element.\n   */\n  OpKind[OpKind[\"ClassProp\"] = 19] = \"ClassProp\";\n  /**\n   * An operation to bind an expression to the styles of an element.\n   */\n  OpKind[OpKind[\"StyleMap\"] = 20] = \"StyleMap\";\n  /**\n   * An operation to bind an expression to the classes of an element.\n   */\n  OpKind[OpKind[\"ClassMap\"] = 21] = \"ClassMap\";\n  /**\n   * An operation to advance the runtime's implicit slot context during the update phase of a view.\n   */\n  OpKind[OpKind[\"Advance\"] = 22] = \"Advance\";\n  /**\n   * An operation to instantiate a pipe.\n   */\n  OpKind[OpKind[\"Pipe\"] = 23] = \"Pipe\";\n  /**\n   * An operation to associate an attribute with an element.\n   */\n  OpKind[OpKind[\"Attribute\"] = 24] = \"Attribute\";\n  /**\n   * An attribute that has been extracted for inclusion in the consts array.\n   */\n  OpKind[OpKind[\"ExtractedAttribute\"] = 25] = \"ExtractedAttribute\";\n  /**\n   * An operation that configures a `@defer` block.\n   */\n  OpKind[OpKind[\"Defer\"] = 26] = \"Defer\";\n  /**\n   * An operation that controls when a `@defer` loads.\n   */\n  OpKind[OpKind[\"DeferOn\"] = 27] = \"DeferOn\";\n  /**\n   * An operation that controls when a `@defer` loads, using a custom expression as the condition.\n   */\n  OpKind[OpKind[\"DeferWhen\"] = 28] = \"DeferWhen\";\n  /**\n   * An i18n message that has been extracted for inclusion in the consts array.\n   */\n  OpKind[OpKind[\"I18nMessage\"] = 29] = \"I18nMessage\";\n  /**\n   * A host binding property.\n   */\n  OpKind[OpKind[\"HostProperty\"] = 30] = \"HostProperty\";\n  /**\n   * A namespace change, which causes the subsequent elements to be processed as either HTML or SVG.\n   */\n  OpKind[OpKind[\"Namespace\"] = 31] = \"Namespace\";\n  /**\n   * Configure a content projeciton definition for the view.\n   */\n  OpKind[OpKind[\"ProjectionDef\"] = 32] = \"ProjectionDef\";\n  /**\n   * Create a content projection slot.\n   */\n  OpKind[OpKind[\"Projection\"] = 33] = \"Projection\";\n  /**\n   * Create a repeater creation instruction op.\n   */\n  OpKind[OpKind[\"RepeaterCreate\"] = 34] = \"RepeaterCreate\";\n  /**\n   * An update up for a repeater.\n   */\n  OpKind[OpKind[\"Repeater\"] = 35] = \"Repeater\";\n  /**\n   * An operation to bind an expression to the property side of a two-way binding.\n   */\n  OpKind[OpKind[\"TwoWayProperty\"] = 36] = \"TwoWayProperty\";\n  /**\n   * An operation declaring the event side of a two-way binding.\n   */\n  OpKind[OpKind[\"TwoWayListener\"] = 37] = \"TwoWayListener\";\n  /**\n   * A creation-time operation that initializes the slot for a `@let` declaration.\n   */\n  OpKind[OpKind[\"DeclareLet\"] = 38] = \"DeclareLet\";\n  /**\n   * An update-time operation that stores the current value of a `@let` declaration.\n   */\n  OpKind[OpKind[\"StoreLet\"] = 39] = \"StoreLet\";\n  /**\n   * The start of an i18n block.\n   */\n  OpKind[OpKind[\"I18nStart\"] = 40] = \"I18nStart\";\n  /**\n   * A self-closing i18n on a single element.\n   */\n  OpKind[OpKind[\"I18n\"] = 41] = \"I18n\";\n  /**\n   * The end of an i18n block.\n   */\n  OpKind[OpKind[\"I18nEnd\"] = 42] = \"I18nEnd\";\n  /**\n   * An expression in an i18n message.\n   */\n  OpKind[OpKind[\"I18nExpression\"] = 43] = \"I18nExpression\";\n  /**\n   * An instruction that applies a set of i18n expressions.\n   */\n  OpKind[OpKind[\"I18nApply\"] = 44] = \"I18nApply\";\n  /**\n   * An instruction to create an ICU expression.\n   */\n  OpKind[OpKind[\"IcuStart\"] = 45] = \"IcuStart\";\n  /**\n   * An instruction to update an ICU expression.\n   */\n  OpKind[OpKind[\"IcuEnd\"] = 46] = \"IcuEnd\";\n  /**\n   * An instruction representing a placeholder in an ICU expression.\n   */\n  OpKind[OpKind[\"IcuPlaceholder\"] = 47] = \"IcuPlaceholder\";\n  /**\n   * An i18n context containing information needed to generate an i18n message.\n   */\n  OpKind[OpKind[\"I18nContext\"] = 48] = \"I18nContext\";\n  /**\n   * A creation op that corresponds to i18n attributes on an element.\n   */\n  OpKind[OpKind[\"I18nAttributes\"] = 49] = \"I18nAttributes\";\n})(OpKind || (OpKind = {}));\n/**\n * Distinguishes different kinds of IR expressions.\n */\nvar ExpressionKind;\n(function (ExpressionKind) {\n  /**\n   * Read of a variable in a lexical scope.\n   */\n  ExpressionKind[ExpressionKind[\"LexicalRead\"] = 0] = \"LexicalRead\";\n  /**\n   * A reference to the current view context.\n   */\n  ExpressionKind[ExpressionKind[\"Context\"] = 1] = \"Context\";\n  /**\n   * A reference to the view context, for use inside a track function.\n   */\n  ExpressionKind[ExpressionKind[\"TrackContext\"] = 2] = \"TrackContext\";\n  /**\n   * Read of a variable declared in a `VariableOp`.\n   */\n  ExpressionKind[ExpressionKind[\"ReadVariable\"] = 3] = \"ReadVariable\";\n  /**\n   * Runtime operation to navigate to the next view context in the view hierarchy.\n   */\n  ExpressionKind[ExpressionKind[\"NextContext\"] = 4] = \"NextContext\";\n  /**\n   * Runtime operation to retrieve the value of a local reference.\n   */\n  ExpressionKind[ExpressionKind[\"Reference\"] = 5] = \"Reference\";\n  /**\n   * A call storing the value of a `@let` declaration.\n   */\n  ExpressionKind[ExpressionKind[\"StoreLet\"] = 6] = \"StoreLet\";\n  /**\n   * A reference to a `@let` declaration read from the context view.\n   */\n  ExpressionKind[ExpressionKind[\"ContextLetReference\"] = 7] = \"ContextLetReference\";\n  /**\n   * Runtime operation to snapshot the current view context.\n   */\n  ExpressionKind[ExpressionKind[\"GetCurrentView\"] = 8] = \"GetCurrentView\";\n  /**\n   * Runtime operation to restore a snapshotted view.\n   */\n  ExpressionKind[ExpressionKind[\"RestoreView\"] = 9] = \"RestoreView\";\n  /**\n   * Runtime operation to reset the current view context after `RestoreView`.\n   */\n  ExpressionKind[ExpressionKind[\"ResetView\"] = 10] = \"ResetView\";\n  /**\n   * Defines and calls a function with change-detected arguments.\n   */\n  ExpressionKind[ExpressionKind[\"PureFunctionExpr\"] = 11] = \"PureFunctionExpr\";\n  /**\n   * Indicates a positional parameter to a pure function definition.\n   */\n  ExpressionKind[ExpressionKind[\"PureFunctionParameterExpr\"] = 12] = \"PureFunctionParameterExpr\";\n  /**\n   * Binding to a pipe transformation.\n   */\n  ExpressionKind[ExpressionKind[\"PipeBinding\"] = 13] = \"PipeBinding\";\n  /**\n   * Binding to a pipe transformation with a variable number of arguments.\n   */\n  ExpressionKind[ExpressionKind[\"PipeBindingVariadic\"] = 14] = \"PipeBindingVariadic\";\n  /*\n   * A safe property read requiring expansion into a null check.\n   */\n  ExpressionKind[ExpressionKind[\"SafePropertyRead\"] = 15] = \"SafePropertyRead\";\n  /**\n   * A safe keyed read requiring expansion into a null check.\n   */\n  ExpressionKind[ExpressionKind[\"SafeKeyedRead\"] = 16] = \"SafeKeyedRead\";\n  /**\n   * A safe function call requiring expansion into a null check.\n   */\n  ExpressionKind[ExpressionKind[\"SafeInvokeFunction\"] = 17] = \"SafeInvokeFunction\";\n  /**\n   * An intermediate expression that will be expanded from a safe read into an explicit ternary.\n   */\n  ExpressionKind[ExpressionKind[\"SafeTernaryExpr\"] = 18] = \"SafeTernaryExpr\";\n  /**\n   * An empty expression that will be stipped before generating the final output.\n   */\n  ExpressionKind[ExpressionKind[\"EmptyExpr\"] = 19] = \"EmptyExpr\";\n  /*\n   * An assignment to a temporary variable.\n   */\n  ExpressionKind[ExpressionKind[\"AssignTemporaryExpr\"] = 20] = \"AssignTemporaryExpr\";\n  /**\n   * A reference to a temporary variable.\n   */\n  ExpressionKind[ExpressionKind[\"ReadTemporaryExpr\"] = 21] = \"ReadTemporaryExpr\";\n  /**\n   * An expression that will cause a literal slot index to be emitted.\n   */\n  ExpressionKind[ExpressionKind[\"SlotLiteralExpr\"] = 22] = \"SlotLiteralExpr\";\n  /**\n   * A test expression for a conditional op.\n   */\n  ExpressionKind[ExpressionKind[\"ConditionalCase\"] = 23] = \"ConditionalCase\";\n  /**\n   * An expression that will be automatically extracted to the component const array.\n   */\n  ExpressionKind[ExpressionKind[\"ConstCollected\"] = 24] = \"ConstCollected\";\n  /**\n   * Operation that sets the value of a two-way binding.\n   */\n  ExpressionKind[ExpressionKind[\"TwoWayBindingSet\"] = 25] = \"TwoWayBindingSet\";\n})(ExpressionKind || (ExpressionKind = {}));\nvar VariableFlags;\n(function (VariableFlags) {\n  VariableFlags[VariableFlags[\"None\"] = 0] = \"None\";\n  /**\n   * Always inline this variable, regardless of the number of times it's used.\n   * An `AlwaysInline` variable may not depend on context, because doing so may cause side effects\n   * that are illegal when multi-inlined. (The optimizer will enforce this constraint.)\n   */\n  VariableFlags[VariableFlags[\"AlwaysInline\"] = 1] = \"AlwaysInline\";\n})(VariableFlags || (VariableFlags = {}));\n/**\n * Distinguishes between different kinds of `SemanticVariable`s.\n */\nvar SemanticVariableKind;\n(function (SemanticVariableKind) {\n  /**\n   * Represents the context of a particular view.\n   */\n  SemanticVariableKind[SemanticVariableKind[\"Context\"] = 0] = \"Context\";\n  /**\n   * Represents an identifier declared in the lexical scope of a view.\n   */\n  SemanticVariableKind[SemanticVariableKind[\"Identifier\"] = 1] = \"Identifier\";\n  /**\n   * Represents a saved state that can be used to restore a view in a listener handler function.\n   */\n  SemanticVariableKind[SemanticVariableKind[\"SavedView\"] = 2] = \"SavedView\";\n  /**\n   * An alias generated by a special embedded view type (e.g. a `@for` block).\n   */\n  SemanticVariableKind[SemanticVariableKind[\"Alias\"] = 3] = \"Alias\";\n})(SemanticVariableKind || (SemanticVariableKind = {}));\n/**\n * Whether to compile in compatibilty mode. In compatibility mode, the template pipeline will\n * attempt to match the output of `TemplateDefinitionBuilder` as exactly as possible, at the cost\n * of producing quirky or larger code in some cases.\n */\nvar CompatibilityMode;\n(function (CompatibilityMode) {\n  CompatibilityMode[CompatibilityMode[\"Normal\"] = 0] = \"Normal\";\n  CompatibilityMode[CompatibilityMode[\"TemplateDefinitionBuilder\"] = 1] = \"TemplateDefinitionBuilder\";\n})(CompatibilityMode || (CompatibilityMode = {}));\n/**\n * Enumeration of the types of attributes which can be applied to an element.\n */\nvar BindingKind;\n(function (BindingKind) {\n  /**\n   * Static attributes.\n   */\n  BindingKind[BindingKind[\"Attribute\"] = 0] = \"Attribute\";\n  /**\n   * Class bindings.\n   */\n  BindingKind[BindingKind[\"ClassName\"] = 1] = \"ClassName\";\n  /**\n   * Style bindings.\n   */\n  BindingKind[BindingKind[\"StyleProperty\"] = 2] = \"StyleProperty\";\n  /**\n   * Dynamic property bindings.\n   */\n  BindingKind[BindingKind[\"Property\"] = 3] = \"Property\";\n  /**\n   * Property or attribute bindings on a template.\n   */\n  BindingKind[BindingKind[\"Template\"] = 4] = \"Template\";\n  /**\n   * Internationalized attributes.\n   */\n  BindingKind[BindingKind[\"I18n\"] = 5] = \"I18n\";\n  /**\n   * Animation property bindings.\n   */\n  BindingKind[BindingKind[\"Animation\"] = 6] = \"Animation\";\n  /**\n   * Property side of a two-way binding.\n   */\n  BindingKind[BindingKind[\"TwoWayProperty\"] = 7] = \"TwoWayProperty\";\n})(BindingKind || (BindingKind = {}));\n/**\n * Enumeration of possible times i18n params can be resolved.\n */\nvar I18nParamResolutionTime;\n(function (I18nParamResolutionTime) {\n  /**\n   * Param is resolved at message creation time. Most params should be resolved at message creation\n   * time. However, ICU params need to be handled in post-processing.\n   */\n  I18nParamResolutionTime[I18nParamResolutionTime[\"Creation\"] = 0] = \"Creation\";\n  /**\n   * Param is resolved during post-processing. This should be used for params whose value comes from\n   * an ICU.\n   */\n  I18nParamResolutionTime[I18nParamResolutionTime[\"Postproccessing\"] = 1] = \"Postproccessing\";\n})(I18nParamResolutionTime || (I18nParamResolutionTime = {}));\n/**\n * The contexts in which an i18n expression can be used.\n */\nvar I18nExpressionFor;\n(function (I18nExpressionFor) {\n  /**\n   * This expression is used as a value (i.e. inside an i18n block).\n   */\n  I18nExpressionFor[I18nExpressionFor[\"I18nText\"] = 0] = \"I18nText\";\n  /**\n   * This expression is used in a binding.\n   */\n  I18nExpressionFor[I18nExpressionFor[\"I18nAttribute\"] = 1] = \"I18nAttribute\";\n})(I18nExpressionFor || (I18nExpressionFor = {}));\n/**\n * Flags that describe what an i18n param value. These determine how the value is serialized into\n * the final map.\n */\nvar I18nParamValueFlags;\n(function (I18nParamValueFlags) {\n  I18nParamValueFlags[I18nParamValueFlags[\"None\"] = 0] = \"None\";\n  /**\n   *  This value represents an element tag.\n   */\n  I18nParamValueFlags[I18nParamValueFlags[\"ElementTag\"] = 1] = \"ElementTag\";\n  /**\n   * This value represents a template tag.\n   */\n  I18nParamValueFlags[I18nParamValueFlags[\"TemplateTag\"] = 2] = \"TemplateTag\";\n  /**\n   * This value represents the opening of a tag.\n   */\n  I18nParamValueFlags[I18nParamValueFlags[\"OpenTag\"] = 4] = \"OpenTag\";\n  /**\n   * This value represents the closing of a tag.\n   */\n  I18nParamValueFlags[I18nParamValueFlags[\"CloseTag\"] = 8] = \"CloseTag\";\n  /**\n   * This value represents an i18n expression index.\n   */\n  I18nParamValueFlags[I18nParamValueFlags[\"ExpressionIndex\"] = 16] = \"ExpressionIndex\";\n})(I18nParamValueFlags || (I18nParamValueFlags = {}));\n/**\n * Whether the active namespace is HTML, MathML, or SVG mode.\n */\nvar Namespace;\n(function (Namespace) {\n  Namespace[Namespace[\"HTML\"] = 0] = \"HTML\";\n  Namespace[Namespace[\"SVG\"] = 1] = \"SVG\";\n  Namespace[Namespace[\"Math\"] = 2] = \"Math\";\n})(Namespace || (Namespace = {}));\n/**\n * The type of a `@defer` trigger, for use in the ir.\n */\nvar DeferTriggerKind;\n(function (DeferTriggerKind) {\n  DeferTriggerKind[DeferTriggerKind[\"Idle\"] = 0] = \"Idle\";\n  DeferTriggerKind[DeferTriggerKind[\"Immediate\"] = 1] = \"Immediate\";\n  DeferTriggerKind[DeferTriggerKind[\"Timer\"] = 2] = \"Timer\";\n  DeferTriggerKind[DeferTriggerKind[\"Hover\"] = 3] = \"Hover\";\n  DeferTriggerKind[DeferTriggerKind[\"Interaction\"] = 4] = \"Interaction\";\n  DeferTriggerKind[DeferTriggerKind[\"Viewport\"] = 5] = \"Viewport\";\n})(DeferTriggerKind || (DeferTriggerKind = {}));\n/**\n * Kinds of i18n contexts. They can be created because of root i18n blocks, or ICUs.\n */\nvar I18nContextKind;\n(function (I18nContextKind) {\n  I18nContextKind[I18nContextKind[\"RootI18n\"] = 0] = \"RootI18n\";\n  I18nContextKind[I18nContextKind[\"Icu\"] = 1] = \"Icu\";\n  I18nContextKind[I18nContextKind[\"Attr\"] = 2] = \"Attr\";\n})(I18nContextKind || (I18nContextKind = {}));\nvar TemplateKind;\n(function (TemplateKind) {\n  TemplateKind[TemplateKind[\"NgTemplate\"] = 0] = \"NgTemplate\";\n  TemplateKind[TemplateKind[\"Structural\"] = 1] = \"Structural\";\n  TemplateKind[TemplateKind[\"Block\"] = 2] = \"Block\";\n})(TemplateKind || (TemplateKind = {}));\n\n/**\n * Marker symbol for `ConsumesSlotOpTrait`.\n */\nconst ConsumesSlot = Symbol('ConsumesSlot');\n/**\n * Marker symbol for `DependsOnSlotContextOpTrait`.\n */\nconst DependsOnSlotContext = Symbol('DependsOnSlotContext');\n/**\n * Marker symbol for `ConsumesVars` trait.\n */\nconst ConsumesVarsTrait = Symbol('ConsumesVars');\n/**\n * Marker symbol for `UsesVarOffset` trait.\n */\nconst UsesVarOffset = Symbol('UsesVarOffset');\n/**\n * Default values for most `ConsumesSlotOpTrait` fields (used with the spread operator to initialize\n * implementors of the trait).\n */\nconst TRAIT_CONSUMES_SLOT = {\n  [ConsumesSlot]: true,\n  numSlotsUsed: 1\n};\n/**\n * Default values for most `DependsOnSlotContextOpTrait` fields (used with the spread operator to\n * initialize implementors of the trait).\n */\nconst TRAIT_DEPENDS_ON_SLOT_CONTEXT = {\n  [DependsOnSlotContext]: true\n};\n/**\n * Default values for `UsesVars` fields (used with the spread operator to initialize\n * implementors of the trait).\n */\nconst TRAIT_CONSUMES_VARS = {\n  [ConsumesVarsTrait]: true\n};\n/**\n * Test whether an operation implements `ConsumesSlotOpTrait`.\n */\nfunction hasConsumesSlotTrait(op) {\n  return op[ConsumesSlot] === true;\n}\nfunction hasDependsOnSlotContextTrait(value) {\n  return value[DependsOnSlotContext] === true;\n}\nfunction hasConsumesVarsTrait(value) {\n  return value[ConsumesVarsTrait] === true;\n}\n/**\n * Test whether an expression implements `UsesVarOffsetTrait`.\n */\nfunction hasUsesVarOffsetTrait(expr) {\n  return expr[UsesVarOffset] === true;\n}\n\n/**\n * Create a `StatementOp`.\n */\nfunction createStatementOp(statement) {\n  return {\n    kind: OpKind.Statement,\n    statement,\n    ...NEW_OP\n  };\n}\n/**\n * Create a `VariableOp`.\n */\nfunction createVariableOp(xref, variable, initializer, flags) {\n  return {\n    kind: OpKind.Variable,\n    xref,\n    variable,\n    initializer,\n    flags,\n    ...NEW_OP\n  };\n}\n/**\n * Static structure shared by all operations.\n *\n * Used as a convenience via the spread operator (`...NEW_OP`) when creating new operations, and\n * ensures the fields are always in the same order.\n */\nconst NEW_OP = {\n  debugListId: null,\n  prev: null,\n  next: null\n};\n\n/**\n * Create an `InterpolationTextOp`.\n */\nfunction createInterpolateTextOp(xref, interpolation, sourceSpan) {\n  return {\n    kind: OpKind.InterpolateText,\n    target: xref,\n    interpolation,\n    sourceSpan,\n    ...TRAIT_DEPENDS_ON_SLOT_CONTEXT,\n    ...TRAIT_CONSUMES_VARS,\n    ...NEW_OP\n  };\n}\nclass Interpolation {\n  constructor(strings, expressions, i18nPlaceholders) {\n    this.strings = strings;\n    this.expressions = expressions;\n    this.i18nPlaceholders = i18nPlaceholders;\n    if (i18nPlaceholders.length !== 0 && i18nPlaceholders.length !== expressions.length) {\n      throw new Error(`Expected ${expressions.length} placeholders to match interpolation expression count, but got ${i18nPlaceholders.length}`);\n    }\n  }\n}\n/**\n * Create a `BindingOp`, not yet transformed into a particular type of binding.\n */\nfunction createBindingOp(target, kind, name, expression, unit, securityContext, isTextAttribute, isStructuralTemplateAttribute, templateKind, i18nMessage, sourceSpan) {\n  return {\n    kind: OpKind.Binding,\n    bindingKind: kind,\n    target,\n    name,\n    expression,\n    unit,\n    securityContext,\n    isTextAttribute,\n    isStructuralTemplateAttribute,\n    templateKind,\n    i18nContext: null,\n    i18nMessage,\n    sourceSpan,\n    ...NEW_OP\n  };\n}\n/**\n * Create a `PropertyOp`.\n */\nfunction createPropertyOp(target, name, expression, isAnimationTrigger, securityContext, isStructuralTemplateAttribute, templateKind, i18nContext, i18nMessage, sourceSpan) {\n  return {\n    kind: OpKind.Property,\n    target,\n    name,\n    expression,\n    isAnimationTrigger,\n    securityContext,\n    sanitizer: null,\n    isStructuralTemplateAttribute,\n    templateKind,\n    i18nContext,\n    i18nMessage,\n    sourceSpan,\n    ...TRAIT_DEPENDS_ON_SLOT_CONTEXT,\n    ...TRAIT_CONSUMES_VARS,\n    ...NEW_OP\n  };\n}\n/**\n * Create a `TwoWayPropertyOp`.\n */\nfunction createTwoWayPropertyOp(target, name, expression, securityContext, isStructuralTemplateAttribute, templateKind, i18nContext, i18nMessage, sourceSpan) {\n  return {\n    kind: OpKind.TwoWayProperty,\n    target,\n    name,\n    expression,\n    securityContext,\n    sanitizer: null,\n    isStructuralTemplateAttribute,\n    templateKind,\n    i18nContext,\n    i18nMessage,\n    sourceSpan,\n    ...TRAIT_DEPENDS_ON_SLOT_CONTEXT,\n    ...TRAIT_CONSUMES_VARS,\n    ...NEW_OP\n  };\n}\n/** Create a `StylePropOp`. */\nfunction createStylePropOp(xref, name, expression, unit, sourceSpan) {\n  return {\n    kind: OpKind.StyleProp,\n    target: xref,\n    name,\n    expression,\n    unit,\n    sourceSpan,\n    ...TRAIT_DEPENDS_ON_SLOT_CONTEXT,\n    ...TRAIT_CONSUMES_VARS,\n    ...NEW_OP\n  };\n}\n/**\n * Create a `ClassPropOp`.\n */\nfunction createClassPropOp(xref, name, expression, sourceSpan) {\n  return {\n    kind: OpKind.ClassProp,\n    target: xref,\n    name,\n    expression,\n    sourceSpan,\n    ...TRAIT_DEPENDS_ON_SLOT_CONTEXT,\n    ...TRAIT_CONSUMES_VARS,\n    ...NEW_OP\n  };\n}\n/** Create a `StyleMapOp`. */\nfunction createStyleMapOp(xref, expression, sourceSpan) {\n  return {\n    kind: OpKind.StyleMap,\n    target: xref,\n    expression,\n    sourceSpan,\n    ...TRAIT_DEPENDS_ON_SLOT_CONTEXT,\n    ...TRAIT_CONSUMES_VARS,\n    ...NEW_OP\n  };\n}\n/**\n * Create a `ClassMapOp`.\n */\nfunction createClassMapOp(xref, expression, sourceSpan) {\n  return {\n    kind: OpKind.ClassMap,\n    target: xref,\n    expression,\n    sourceSpan,\n    ...TRAIT_DEPENDS_ON_SLOT_CONTEXT,\n    ...TRAIT_CONSUMES_VARS,\n    ...NEW_OP\n  };\n}\n/**\n * Create an `AttributeOp`.\n */\nfunction createAttributeOp(target, namespace, name, expression, securityContext, isTextAttribute, isStructuralTemplateAttribute, templateKind, i18nMessage, sourceSpan) {\n  return {\n    kind: OpKind.Attribute,\n    target,\n    namespace,\n    name,\n    expression,\n    securityContext,\n    sanitizer: null,\n    isTextAttribute,\n    isStructuralTemplateAttribute,\n    templateKind,\n    i18nContext: null,\n    i18nMessage,\n    sourceSpan,\n    ...TRAIT_DEPENDS_ON_SLOT_CONTEXT,\n    ...TRAIT_CONSUMES_VARS,\n    ...NEW_OP\n  };\n}\n/**\n * Create an `AdvanceOp`.\n */\nfunction createAdvanceOp(delta, sourceSpan) {\n  return {\n    kind: OpKind.Advance,\n    delta,\n    sourceSpan,\n    ...NEW_OP\n  };\n}\n/**\n * Create a conditional op, which will display an embedded view according to a condtion.\n */\nfunction createConditionalOp(target, test, conditions, sourceSpan) {\n  return {\n    kind: OpKind.Conditional,\n    target,\n    test,\n    conditions,\n    processed: null,\n    sourceSpan,\n    contextValue: null,\n    ...NEW_OP,\n    ...TRAIT_DEPENDS_ON_SLOT_CONTEXT,\n    ...TRAIT_CONSUMES_VARS\n  };\n}\nfunction createRepeaterOp(repeaterCreate, targetSlot, collection, sourceSpan) {\n  return {\n    kind: OpKind.Repeater,\n    target: repeaterCreate,\n    targetSlot,\n    collection,\n    sourceSpan,\n    ...NEW_OP,\n    ...TRAIT_DEPENDS_ON_SLOT_CONTEXT\n  };\n}\nfunction createDeferWhenOp(target, expr, prefetch, sourceSpan) {\n  return {\n    kind: OpKind.DeferWhen,\n    target,\n    expr,\n    prefetch,\n    sourceSpan,\n    ...NEW_OP,\n    ...TRAIT_DEPENDS_ON_SLOT_CONTEXT,\n    ...TRAIT_CONSUMES_VARS\n  };\n}\n/**\n * Create an i18n expression op.\n */\nfunction createI18nExpressionOp(context, target, i18nOwner, handle, expression, icuPlaceholder, i18nPlaceholder, resolutionTime, usage, name, sourceSpan) {\n  return {\n    kind: OpKind.I18nExpression,\n    context,\n    target,\n    i18nOwner,\n    handle,\n    expression,\n    icuPlaceholder,\n    i18nPlaceholder,\n    resolutionTime,\n    usage,\n    name,\n    sourceSpan,\n    ...NEW_OP,\n    ...TRAIT_CONSUMES_VARS,\n    ...TRAIT_DEPENDS_ON_SLOT_CONTEXT\n  };\n}\n/**\n * Creates an op to apply i18n expression ops.\n */\nfunction createI18nApplyOp(owner, handle, sourceSpan) {\n  return {\n    kind: OpKind.I18nApply,\n    owner,\n    handle,\n    sourceSpan,\n    ...NEW_OP\n  };\n}\n/**\n * Creates a `StoreLetOp`.\n */\nfunction createStoreLetOp(target, declaredName, value, sourceSpan) {\n  return {\n    kind: OpKind.StoreLet,\n    target,\n    declaredName,\n    value,\n    sourceSpan,\n    ...TRAIT_DEPENDS_ON_SLOT_CONTEXT,\n    ...TRAIT_CONSUMES_VARS,\n    ...NEW_OP\n  };\n}\nvar _a, _b, _c, _d, _e, _f, _g, _h;\n/**\n * Check whether a given `o.Expression` is a logical IR expression type.\n */\nfunction isIrExpression(expr) {\n  return expr instanceof ExpressionBase;\n}\n/**\n * Base type used for all logical IR expressions.\n */\nclass ExpressionBase extends Expression {\n  constructor(sourceSpan = null) {\n    super(null, sourceSpan);\n  }\n}\n/**\n * Logical expression representing a lexical read of a variable name.\n */\nclass LexicalReadExpr extends ExpressionBase {\n  constructor(name) {\n    super();\n    this.name = name;\n    this.kind = ExpressionKind.LexicalRead;\n  }\n  visitExpression(visitor, context) {}\n  isEquivalent(other) {\n    // We assume that the lexical reads are in the same context, which must be true for parent\n    // expressions to be equivalent.\n    // TODO: is this generally safe?\n    return this.name === other.name;\n  }\n  isConstant() {\n    return false;\n  }\n  transformInternalExpressions() {}\n  clone() {\n    return new LexicalReadExpr(this.name);\n  }\n}\n/**\n * Runtime operation to retrieve the value of a local reference.\n */\nclass ReferenceExpr extends ExpressionBase {\n  constructor(target, targetSlot, offset) {\n    super();\n    this.target = target;\n    this.targetSlot = targetSlot;\n    this.offset = offset;\n    this.kind = ExpressionKind.Reference;\n  }\n  visitExpression() {}\n  isEquivalent(e) {\n    return e instanceof ReferenceExpr && e.target === this.target;\n  }\n  isConstant() {\n    return false;\n  }\n  transformInternalExpressions() {}\n  clone() {\n    return new ReferenceExpr(this.target, this.targetSlot, this.offset);\n  }\n}\nclass StoreLetExpr extends ExpressionBase {\n  static {\n    _a = ConsumesVarsTrait, _b = DependsOnSlotContext;\n  }\n  constructor(target, value, sourceSpan) {\n    super();\n    this.target = target;\n    this.value = value;\n    this.sourceSpan = sourceSpan;\n    this.kind = ExpressionKind.StoreLet;\n    this[_a] = true;\n    this[_b] = true;\n  }\n  visitExpression() {}\n  isEquivalent(e) {\n    return e instanceof StoreLetExpr && e.target === this.target && e.value.isEquivalent(this.value);\n  }\n  isConstant() {\n    return false;\n  }\n  transformInternalExpressions(transform, flags) {\n    this.value = transformExpressionsInExpression(this.value, transform, flags);\n  }\n  clone() {\n    return new StoreLetExpr(this.target, this.value, this.sourceSpan);\n  }\n}\nclass ContextLetReferenceExpr extends ExpressionBase {\n  constructor(target, targetSlot) {\n    super();\n    this.target = target;\n    this.targetSlot = targetSlot;\n    this.kind = ExpressionKind.ContextLetReference;\n  }\n  visitExpression() {}\n  isEquivalent(e) {\n    return e instanceof ContextLetReferenceExpr && e.target === this.target;\n  }\n  isConstant() {\n    return false;\n  }\n  transformInternalExpressions() {}\n  clone() {\n    return new ContextLetReferenceExpr(this.target, this.targetSlot);\n  }\n}\n/**\n * A reference to the current view context (usually the `ctx` variable in a template function).\n */\nclass ContextExpr extends ExpressionBase {\n  constructor(view) {\n    super();\n    this.view = view;\n    this.kind = ExpressionKind.Context;\n  }\n  visitExpression() {}\n  isEquivalent(e) {\n    return e instanceof ContextExpr && e.view === this.view;\n  }\n  isConstant() {\n    return false;\n  }\n  transformInternalExpressions() {}\n  clone() {\n    return new ContextExpr(this.view);\n  }\n}\n/**\n * A reference to the current view context inside a track function.\n */\nclass TrackContextExpr extends ExpressionBase {\n  constructor(view) {\n    super();\n    this.view = view;\n    this.kind = ExpressionKind.TrackContext;\n  }\n  visitExpression() {}\n  isEquivalent(e) {\n    return e instanceof TrackContextExpr && e.view === this.view;\n  }\n  isConstant() {\n    return false;\n  }\n  transformInternalExpressions() {}\n  clone() {\n    return new TrackContextExpr(this.view);\n  }\n}\n/**\n * Runtime operation to navigate to the next view context in the view hierarchy.\n */\nclass NextContextExpr extends ExpressionBase {\n  constructor() {\n    super();\n    this.kind = ExpressionKind.NextContext;\n    this.steps = 1;\n  }\n  visitExpression() {}\n  isEquivalent(e) {\n    return e instanceof NextContextExpr && e.steps === this.steps;\n  }\n  isConstant() {\n    return false;\n  }\n  transformInternalExpressions() {}\n  clone() {\n    const expr = new NextContextExpr();\n    expr.steps = this.steps;\n    return expr;\n  }\n}\n/**\n * Runtime operation to snapshot the current view context.\n *\n * The result of this operation can be stored in a variable and later used with the `RestoreView`\n * operation.\n */\nclass GetCurrentViewExpr extends ExpressionBase {\n  constructor() {\n    super();\n    this.kind = ExpressionKind.GetCurrentView;\n  }\n  visitExpression() {}\n  isEquivalent(e) {\n    return e instanceof GetCurrentViewExpr;\n  }\n  isConstant() {\n    return false;\n  }\n  transformInternalExpressions() {}\n  clone() {\n    return new GetCurrentViewExpr();\n  }\n}\n/**\n * Runtime operation to restore a snapshotted view.\n */\nclass RestoreViewExpr extends ExpressionBase {\n  constructor(view) {\n    super();\n    this.view = view;\n    this.kind = ExpressionKind.RestoreView;\n  }\n  visitExpression(visitor, context) {\n    if (typeof this.view !== 'number') {\n      this.view.visitExpression(visitor, context);\n    }\n  }\n  isEquivalent(e) {\n    if (!(e instanceof RestoreViewExpr) || typeof e.view !== typeof this.view) {\n      return false;\n    }\n    if (typeof this.view === 'number') {\n      return this.view === e.view;\n    } else {\n      return this.view.isEquivalent(e.view);\n    }\n  }\n  isConstant() {\n    return false;\n  }\n  transformInternalExpressions(transform, flags) {\n    if (typeof this.view !== 'number') {\n      this.view = transformExpressionsInExpression(this.view, transform, flags);\n    }\n  }\n  clone() {\n    return new RestoreViewExpr(this.view instanceof Expression ? this.view.clone() : this.view);\n  }\n}\n/**\n * Runtime operation to reset the current view context after `RestoreView`.\n */\nclass ResetViewExpr extends ExpressionBase {\n  constructor(expr) {\n    super();\n    this.expr = expr;\n    this.kind = ExpressionKind.ResetView;\n  }\n  visitExpression(visitor, context) {\n    this.expr.visitExpression(visitor, context);\n  }\n  isEquivalent(e) {\n    return e instanceof ResetViewExpr && this.expr.isEquivalent(e.expr);\n  }\n  isConstant() {\n    return false;\n  }\n  transformInternalExpressions(transform, flags) {\n    this.expr = transformExpressionsInExpression(this.expr, transform, flags);\n  }\n  clone() {\n    return new ResetViewExpr(this.expr.clone());\n  }\n}\nclass TwoWayBindingSetExpr extends ExpressionBase {\n  constructor(target, value) {\n    super();\n    this.target = target;\n    this.value = value;\n    this.kind = ExpressionKind.TwoWayBindingSet;\n  }\n  visitExpression(visitor, context) {\n    this.target.visitExpression(visitor, context);\n    this.value.visitExpression(visitor, context);\n  }\n  isEquivalent(other) {\n    return this.target.isEquivalent(other.target) && this.value.isEquivalent(other.value);\n  }\n  isConstant() {\n    return false;\n  }\n  transformInternalExpressions(transform, flags) {\n    this.target = transformExpressionsInExpression(this.target, transform, flags);\n    this.value = transformExpressionsInExpression(this.value, transform, flags);\n  }\n  clone() {\n    return new TwoWayBindingSetExpr(this.target, this.value);\n  }\n}\n/**\n * Read of a variable declared as an `ir.VariableOp` and referenced through its `ir.XrefId`.\n */\nclass ReadVariableExpr extends ExpressionBase {\n  constructor(xref) {\n    super();\n    this.xref = xref;\n    this.kind = ExpressionKind.ReadVariable;\n    this.name = null;\n  }\n  visitExpression() {}\n  isEquivalent(other) {\n    return other instanceof ReadVariableExpr && other.xref === this.xref;\n  }\n  isConstant() {\n    return false;\n  }\n  transformInternalExpressions() {}\n  clone() {\n    const expr = new ReadVariableExpr(this.xref);\n    expr.name = this.name;\n    return expr;\n  }\n}\nclass PureFunctionExpr extends ExpressionBase {\n  static {\n    _c = ConsumesVarsTrait, _d = UsesVarOffset;\n  }\n  constructor(expression, args) {\n    super();\n    this.kind = ExpressionKind.PureFunctionExpr;\n    this[_c] = true;\n    this[_d] = true;\n    this.varOffset = null;\n    /**\n     * Once extracted to the `ConstantPool`, a reference to the function which defines the computation\n     * of `body`.\n     */\n    this.fn = null;\n    this.body = expression;\n    this.args = args;\n  }\n  visitExpression(visitor, context) {\n    this.body?.visitExpression(visitor, context);\n    for (const arg of this.args) {\n      arg.visitExpression(visitor, context);\n    }\n  }\n  isEquivalent(other) {\n    if (!(other instanceof PureFunctionExpr) || other.args.length !== this.args.length) {\n      return false;\n    }\n    return other.body !== null && this.body !== null && other.body.isEquivalent(this.body) && other.args.every((arg, idx) => arg.isEquivalent(this.args[idx]));\n  }\n  isConstant() {\n    return false;\n  }\n  transformInternalExpressions(transform, flags) {\n    if (this.body !== null) {\n      // TODO: figure out if this is the right flag to pass here.\n      this.body = transformExpressionsInExpression(this.body, transform, flags | VisitorContextFlag.InChildOperation);\n    } else if (this.fn !== null) {\n      this.fn = transformExpressionsInExpression(this.fn, transform, flags);\n    }\n    for (let i = 0; i < this.args.length; i++) {\n      this.args[i] = transformExpressionsInExpression(this.args[i], transform, flags);\n    }\n  }\n  clone() {\n    const expr = new PureFunctionExpr(this.body?.clone() ?? null, this.args.map(arg => arg.clone()));\n    expr.fn = this.fn?.clone() ?? null;\n    expr.varOffset = this.varOffset;\n    return expr;\n  }\n}\nclass PureFunctionParameterExpr extends ExpressionBase {\n  constructor(index) {\n    super();\n    this.index = index;\n    this.kind = ExpressionKind.PureFunctionParameterExpr;\n  }\n  visitExpression() {}\n  isEquivalent(other) {\n    return other instanceof PureFunctionParameterExpr && other.index === this.index;\n  }\n  isConstant() {\n    return true;\n  }\n  transformInternalExpressions() {}\n  clone() {\n    return new PureFunctionParameterExpr(this.index);\n  }\n}\nclass PipeBindingExpr extends ExpressionBase {\n  static {\n    _e = ConsumesVarsTrait, _f = UsesVarOffset;\n  }\n  constructor(target, targetSlot, name, args) {\n    super();\n    this.target = target;\n    this.targetSlot = targetSlot;\n    this.name = name;\n    this.args = args;\n    this.kind = ExpressionKind.PipeBinding;\n    this[_e] = true;\n    this[_f] = true;\n    this.varOffset = null;\n  }\n  visitExpression(visitor, context) {\n    for (const arg of this.args) {\n      arg.visitExpression(visitor, context);\n    }\n  }\n  isEquivalent() {\n    return false;\n  }\n  isConstant() {\n    return false;\n  }\n  transformInternalExpressions(transform, flags) {\n    for (let idx = 0; idx < this.args.length; idx++) {\n      this.args[idx] = transformExpressionsInExpression(this.args[idx], transform, flags);\n    }\n  }\n  clone() {\n    const r = new PipeBindingExpr(this.target, this.targetSlot, this.name, this.args.map(a => a.clone()));\n    r.varOffset = this.varOffset;\n    return r;\n  }\n}\nclass PipeBindingVariadicExpr extends ExpressionBase {\n  static {\n    _g = ConsumesVarsTrait, _h = UsesVarOffset;\n  }\n  constructor(target, targetSlot, name, args, numArgs) {\n    super();\n    this.target = target;\n    this.targetSlot = targetSlot;\n    this.name = name;\n    this.args = args;\n    this.numArgs = numArgs;\n    this.kind = ExpressionKind.PipeBindingVariadic;\n    this[_g] = true;\n    this[_h] = true;\n    this.varOffset = null;\n  }\n  visitExpression(visitor, context) {\n    this.args.visitExpression(visitor, context);\n  }\n  isEquivalent() {\n    return false;\n  }\n  isConstant() {\n    return false;\n  }\n  transformInternalExpressions(transform, flags) {\n    this.args = transformExpressionsInExpression(this.args, transform, flags);\n  }\n  clone() {\n    const r = new PipeBindingVariadicExpr(this.target, this.targetSlot, this.name, this.args.clone(), this.numArgs);\n    r.varOffset = this.varOffset;\n    return r;\n  }\n}\nclass SafePropertyReadExpr extends ExpressionBase {\n  constructor(receiver, name) {\n    super();\n    this.receiver = receiver;\n    this.name = name;\n    this.kind = ExpressionKind.SafePropertyRead;\n  }\n  // An alias for name, which allows other logic to handle property reads and keyed reads together.\n  get index() {\n    return this.name;\n  }\n  visitExpression(visitor, context) {\n    this.receiver.visitExpression(visitor, context);\n  }\n  isEquivalent() {\n    return false;\n  }\n  isConstant() {\n    return false;\n  }\n  transformInternalExpressions(transform, flags) {\n    this.receiver = transformExpressionsInExpression(this.receiver, transform, flags);\n  }\n  clone() {\n    return new SafePropertyReadExpr(this.receiver.clone(), this.name);\n  }\n}\nclass SafeKeyedReadExpr extends ExpressionBase {\n  constructor(receiver, index, sourceSpan) {\n    super(sourceSpan);\n    this.receiver = receiver;\n    this.index = index;\n    this.kind = ExpressionKind.SafeKeyedRead;\n  }\n  visitExpression(visitor, context) {\n    this.receiver.visitExpression(visitor, context);\n    this.index.visitExpression(visitor, context);\n  }\n  isEquivalent() {\n    return false;\n  }\n  isConstant() {\n    return false;\n  }\n  transformInternalExpressions(transform, flags) {\n    this.receiver = transformExpressionsInExpression(this.receiver, transform, flags);\n    this.index = transformExpressionsInExpression(this.index, transform, flags);\n  }\n  clone() {\n    return new SafeKeyedReadExpr(this.receiver.clone(), this.index.clone(), this.sourceSpan);\n  }\n}\nclass SafeInvokeFunctionExpr extends ExpressionBase {\n  constructor(receiver, args) {\n    super();\n    this.receiver = receiver;\n    this.args = args;\n    this.kind = ExpressionKind.SafeInvokeFunction;\n  }\n  visitExpression(visitor, context) {\n    this.receiver.visitExpression(visitor, context);\n    for (const a of this.args) {\n      a.visitExpression(visitor, context);\n    }\n  }\n  isEquivalent() {\n    return false;\n  }\n  isConstant() {\n    return false;\n  }\n  transformInternalExpressions(transform, flags) {\n    this.receiver = transformExpressionsInExpression(this.receiver, transform, flags);\n    for (let i = 0; i < this.args.length; i++) {\n      this.args[i] = transformExpressionsInExpression(this.args[i], transform, flags);\n    }\n  }\n  clone() {\n    return new SafeInvokeFunctionExpr(this.receiver.clone(), this.args.map(a => a.clone()));\n  }\n}\nclass SafeTernaryExpr extends ExpressionBase {\n  constructor(guard, expr) {\n    super();\n    this.guard = guard;\n    this.expr = expr;\n    this.kind = ExpressionKind.SafeTernaryExpr;\n  }\n  visitExpression(visitor, context) {\n    this.guard.visitExpression(visitor, context);\n    this.expr.visitExpression(visitor, context);\n  }\n  isEquivalent() {\n    return false;\n  }\n  isConstant() {\n    return false;\n  }\n  transformInternalExpressions(transform, flags) {\n    this.guard = transformExpressionsInExpression(this.guard, transform, flags);\n    this.expr = transformExpressionsInExpression(this.expr, transform, flags);\n  }\n  clone() {\n    return new SafeTernaryExpr(this.guard.clone(), this.expr.clone());\n  }\n}\nclass EmptyExpr extends ExpressionBase {\n  constructor() {\n    super(...arguments);\n    this.kind = ExpressionKind.EmptyExpr;\n  }\n  visitExpression(visitor, context) {}\n  isEquivalent(e) {\n    return e instanceof EmptyExpr;\n  }\n  isConstant() {\n    return true;\n  }\n  clone() {\n    return new EmptyExpr();\n  }\n  transformInternalExpressions() {}\n}\nclass AssignTemporaryExpr extends ExpressionBase {\n  constructor(expr, xref) {\n    super();\n    this.expr = expr;\n    this.xref = xref;\n    this.kind = ExpressionKind.AssignTemporaryExpr;\n    this.name = null;\n  }\n  visitExpression(visitor, context) {\n    this.expr.visitExpression(visitor, context);\n  }\n  isEquivalent() {\n    return false;\n  }\n  isConstant() {\n    return false;\n  }\n  transformInternalExpressions(transform, flags) {\n    this.expr = transformExpressionsInExpression(this.expr, transform, flags);\n  }\n  clone() {\n    const a = new AssignTemporaryExpr(this.expr.clone(), this.xref);\n    a.name = this.name;\n    return a;\n  }\n}\nclass ReadTemporaryExpr extends ExpressionBase {\n  constructor(xref) {\n    super();\n    this.xref = xref;\n    this.kind = ExpressionKind.ReadTemporaryExpr;\n    this.name = null;\n  }\n  visitExpression(visitor, context) {}\n  isEquivalent() {\n    return this.xref === this.xref;\n  }\n  isConstant() {\n    return false;\n  }\n  transformInternalExpressions(transform, flags) {}\n  clone() {\n    const r = new ReadTemporaryExpr(this.xref);\n    r.name = this.name;\n    return r;\n  }\n}\nclass SlotLiteralExpr extends ExpressionBase {\n  constructor(slot) {\n    super();\n    this.slot = slot;\n    this.kind = ExpressionKind.SlotLiteralExpr;\n  }\n  visitExpression(visitor, context) {}\n  isEquivalent(e) {\n    return e instanceof SlotLiteralExpr && e.slot === this.slot;\n  }\n  isConstant() {\n    return true;\n  }\n  clone() {\n    return new SlotLiteralExpr(this.slot);\n  }\n  transformInternalExpressions() {}\n}\nclass ConditionalCaseExpr extends ExpressionBase {\n  /**\n   * Create an expression for one branch of a conditional.\n   * @param expr The expression to be tested for this case. Might be null, as in an `else` case.\n   * @param target The Xref of the view to be displayed if this condition is true.\n   */\n  constructor(expr, target, targetSlot, alias = null) {\n    super();\n    this.expr = expr;\n    this.target = target;\n    this.targetSlot = targetSlot;\n    this.alias = alias;\n    this.kind = ExpressionKind.ConditionalCase;\n  }\n  visitExpression(visitor, context) {\n    if (this.expr !== null) {\n      this.expr.visitExpression(visitor, context);\n    }\n  }\n  isEquivalent(e) {\n    return e instanceof ConditionalCaseExpr && e.expr === this.expr;\n  }\n  isConstant() {\n    return true;\n  }\n  clone() {\n    return new ConditionalCaseExpr(this.expr, this.target, this.targetSlot);\n  }\n  transformInternalExpressions(transform, flags) {\n    if (this.expr !== null) {\n      this.expr = transformExpressionsInExpression(this.expr, transform, flags);\n    }\n  }\n}\nclass ConstCollectedExpr extends ExpressionBase {\n  constructor(expr) {\n    super();\n    this.expr = expr;\n    this.kind = ExpressionKind.ConstCollected;\n  }\n  transformInternalExpressions(transform, flags) {\n    this.expr = transform(this.expr, flags);\n  }\n  visitExpression(visitor, context) {\n    this.expr.visitExpression(visitor, context);\n  }\n  isEquivalent(e) {\n    if (!(e instanceof ConstCollectedExpr)) {\n      return false;\n    }\n    return this.expr.isEquivalent(e.expr);\n  }\n  isConstant() {\n    return this.expr.isConstant();\n  }\n  clone() {\n    return new ConstCollectedExpr(this.expr);\n  }\n}\n/**\n * Visits all `Expression`s in the AST of `op` with the `visitor` function.\n */\nfunction visitExpressionsInOp(op, visitor) {\n  transformExpressionsInOp(op, (expr, flags) => {\n    visitor(expr, flags);\n    return expr;\n  }, VisitorContextFlag.None);\n}\nvar VisitorContextFlag;\n(function (VisitorContextFlag) {\n  VisitorContextFlag[VisitorContextFlag[\"None\"] = 0] = \"None\";\n  VisitorContextFlag[VisitorContextFlag[\"InChildOperation\"] = 1] = \"InChildOperation\";\n})(VisitorContextFlag || (VisitorContextFlag = {}));\nfunction transformExpressionsInInterpolation(interpolation, transform, flags) {\n  for (let i = 0; i < interpolation.expressions.length; i++) {\n    interpolation.expressions[i] = transformExpressionsInExpression(interpolation.expressions[i], transform, flags);\n  }\n}\n/**\n * Transform all `Expression`s in the AST of `op` with the `transform` function.\n *\n * All such operations will be replaced with the result of applying `transform`, which may be an\n * identity transformation.\n */\nfunction transformExpressionsInOp(op, transform, flags) {\n  switch (op.kind) {\n    case OpKind.StyleProp:\n    case OpKind.StyleMap:\n    case OpKind.ClassProp:\n    case OpKind.ClassMap:\n    case OpKind.Binding:\n      if (op.expression instanceof Interpolation) {\n        transformExpressionsInInterpolation(op.expression, transform, flags);\n      } else {\n        op.expression = transformExpressionsInExpression(op.expression, transform, flags);\n      }\n      break;\n    case OpKind.Property:\n    case OpKind.HostProperty:\n    case OpKind.Attribute:\n      if (op.expression instanceof Interpolation) {\n        transformExpressionsInInterpolation(op.expression, transform, flags);\n      } else {\n        op.expression = transformExpressionsInExpression(op.expression, transform, flags);\n      }\n      op.sanitizer = op.sanitizer && transformExpressionsInExpression(op.sanitizer, transform, flags);\n      break;\n    case OpKind.TwoWayProperty:\n      op.expression = transformExpressionsInExpression(op.expression, transform, flags);\n      op.sanitizer = op.sanitizer && transformExpressionsInExpression(op.sanitizer, transform, flags);\n      break;\n    case OpKind.I18nExpression:\n      op.expression = transformExpressionsInExpression(op.expression, transform, flags);\n      break;\n    case OpKind.InterpolateText:\n      transformExpressionsInInterpolation(op.interpolation, transform, flags);\n      break;\n    case OpKind.Statement:\n      transformExpressionsInStatement(op.statement, transform, flags);\n      break;\n    case OpKind.Variable:\n      op.initializer = transformExpressionsInExpression(op.initializer, transform, flags);\n      break;\n    case OpKind.Conditional:\n      for (const condition of op.conditions) {\n        if (condition.expr === null) {\n          // This is a default case.\n          continue;\n        }\n        condition.expr = transformExpressionsInExpression(condition.expr, transform, flags);\n      }\n      if (op.processed !== null) {\n        op.processed = transformExpressionsInExpression(op.processed, transform, flags);\n      }\n      if (op.contextValue !== null) {\n        op.contextValue = transformExpressionsInExpression(op.contextValue, transform, flags);\n      }\n      break;\n    case OpKind.Listener:\n    case OpKind.TwoWayListener:\n      for (const innerOp of op.handlerOps) {\n        transformExpressionsInOp(innerOp, transform, flags | VisitorContextFlag.InChildOperation);\n      }\n      break;\n    case OpKind.ExtractedAttribute:\n      op.expression = op.expression && transformExpressionsInExpression(op.expression, transform, flags);\n      op.trustedValueFn = op.trustedValueFn && transformExpressionsInExpression(op.trustedValueFn, transform, flags);\n      break;\n    case OpKind.RepeaterCreate:\n      op.track = transformExpressionsInExpression(op.track, transform, flags);\n      if (op.trackByFn !== null) {\n        op.trackByFn = transformExpressionsInExpression(op.trackByFn, transform, flags);\n      }\n      break;\n    case OpKind.Repeater:\n      op.collection = transformExpressionsInExpression(op.collection, transform, flags);\n      break;\n    case OpKind.Defer:\n      if (op.loadingConfig !== null) {\n        op.loadingConfig = transformExpressionsInExpression(op.loadingConfig, transform, flags);\n      }\n      if (op.placeholderConfig !== null) {\n        op.placeholderConfig = transformExpressionsInExpression(op.placeholderConfig, transform, flags);\n      }\n      if (op.resolverFn !== null) {\n        op.resolverFn = transformExpressionsInExpression(op.resolverFn, transform, flags);\n      }\n      break;\n    case OpKind.I18nMessage:\n      for (const [placeholder, expr] of op.params) {\n        op.params.set(placeholder, transformExpressionsInExpression(expr, transform, flags));\n      }\n      for (const [placeholder, expr] of op.postprocessingParams) {\n        op.postprocessingParams.set(placeholder, transformExpressionsInExpression(expr, transform, flags));\n      }\n      break;\n    case OpKind.DeferWhen:\n      op.expr = transformExpressionsInExpression(op.expr, transform, flags);\n      break;\n    case OpKind.StoreLet:\n      op.value = transformExpressionsInExpression(op.value, transform, flags);\n      break;\n    case OpKind.Advance:\n    case OpKind.Container:\n    case OpKind.ContainerEnd:\n    case OpKind.ContainerStart:\n    case OpKind.DeferOn:\n    case OpKind.DisableBindings:\n    case OpKind.Element:\n    case OpKind.ElementEnd:\n    case OpKind.ElementStart:\n    case OpKind.EnableBindings:\n    case OpKind.I18n:\n    case OpKind.I18nApply:\n    case OpKind.I18nContext:\n    case OpKind.I18nEnd:\n    case OpKind.I18nStart:\n    case OpKind.IcuEnd:\n    case OpKind.IcuStart:\n    case OpKind.Namespace:\n    case OpKind.Pipe:\n    case OpKind.Projection:\n    case OpKind.ProjectionDef:\n    case OpKind.Template:\n    case OpKind.Text:\n    case OpKind.I18nAttributes:\n    case OpKind.IcuPlaceholder:\n    case OpKind.DeclareLet:\n      // These operations contain no expressions.\n      break;\n    default:\n      throw new Error(`AssertionError: transformExpressionsInOp doesn't handle ${OpKind[op.kind]}`);\n  }\n}\n/**\n * Transform all `Expression`s in the AST of `expr` with the `transform` function.\n *\n * All such operations will be replaced with the result of applying `transform`, which may be an\n * identity transformation.\n */\nfunction transformExpressionsInExpression(expr, transform, flags) {\n  if (expr instanceof ExpressionBase) {\n    expr.transformInternalExpressions(transform, flags);\n  } else if (expr instanceof BinaryOperatorExpr) {\n    expr.lhs = transformExpressionsInExpression(expr.lhs, transform, flags);\n    expr.rhs = transformExpressionsInExpression(expr.rhs, transform, flags);\n  } else if (expr instanceof UnaryOperatorExpr) {\n    expr.expr = transformExpressionsInExpression(expr.expr, transform, flags);\n  } else if (expr instanceof ReadPropExpr) {\n    expr.receiver = transformExpressionsInExpression(expr.receiver, transform, flags);\n  } else if (expr instanceof ReadKeyExpr) {\n    expr.receiver = transformExpressionsInExpression(expr.receiver, transform, flags);\n    expr.index = transformExpressionsInExpression(expr.index, transform, flags);\n  } else if (expr instanceof WritePropExpr) {\n    expr.receiver = transformExpressionsInExpression(expr.receiver, transform, flags);\n    expr.value = transformExpressionsInExpression(expr.value, transform, flags);\n  } else if (expr instanceof WriteKeyExpr) {\n    expr.receiver = transformExpressionsInExpression(expr.receiver, transform, flags);\n    expr.index = transformExpressionsInExpression(expr.index, transform, flags);\n    expr.value = transformExpressionsInExpression(expr.value, transform, flags);\n  } else if (expr instanceof InvokeFunctionExpr) {\n    expr.fn = transformExpressionsInExpression(expr.fn, transform, flags);\n    for (let i = 0; i < expr.args.length; i++) {\n      expr.args[i] = transformExpressionsInExpression(expr.args[i], transform, flags);\n    }\n  } else if (expr instanceof LiteralArrayExpr) {\n    for (let i = 0; i < expr.entries.length; i++) {\n      expr.entries[i] = transformExpressionsInExpression(expr.entries[i], transform, flags);\n    }\n  } else if (expr instanceof LiteralMapExpr) {\n    for (let i = 0; i < expr.entries.length; i++) {\n      expr.entries[i].value = transformExpressionsInExpression(expr.entries[i].value, transform, flags);\n    }\n  } else if (expr instanceof ConditionalExpr) {\n    expr.condition = transformExpressionsInExpression(expr.condition, transform, flags);\n    expr.trueCase = transformExpressionsInExpression(expr.trueCase, transform, flags);\n    if (expr.falseCase !== null) {\n      expr.falseCase = transformExpressionsInExpression(expr.falseCase, transform, flags);\n    }\n  } else if (expr instanceof TypeofExpr) {\n    expr.expr = transformExpressionsInExpression(expr.expr, transform, flags);\n  } else if (expr instanceof WriteVarExpr) {\n    expr.value = transformExpressionsInExpression(expr.value, transform, flags);\n  } else if (expr instanceof LocalizedString) {\n    for (let i = 0; i < expr.expressions.length; i++) {\n      expr.expressions[i] = transformExpressionsInExpression(expr.expressions[i], transform, flags);\n    }\n  } else if (expr instanceof NotExpr) {\n    expr.condition = transformExpressionsInExpression(expr.condition, transform, flags);\n  } else if (expr instanceof TaggedTemplateExpr) {\n    expr.tag = transformExpressionsInExpression(expr.tag, transform, flags);\n    expr.template.expressions = expr.template.expressions.map(e => transformExpressionsInExpression(e, transform, flags));\n  } else if (expr instanceof ArrowFunctionExpr) {\n    if (Array.isArray(expr.body)) {\n      for (let i = 0; i < expr.body.length; i++) {\n        transformExpressionsInStatement(expr.body[i], transform, flags);\n      }\n    } else {\n      expr.body = transformExpressionsInExpression(expr.body, transform, flags);\n    }\n  } else if (expr instanceof WrappedNodeExpr) {\n    // TODO: Do we need to transform any TS nodes nested inside of this expression?\n  } else if (expr instanceof ReadVarExpr || expr instanceof ExternalExpr || expr instanceof LiteralExpr) {\n    // No action for these types.\n  } else {\n    throw new Error(`Unhandled expression kind: ${expr.constructor.name}`);\n  }\n  return transform(expr, flags);\n}\n/**\n * Transform all `Expression`s in the AST of `stmt` with the `transform` function.\n *\n * All such operations will be replaced with the result of applying `transform`, which may be an\n * identity transformation.\n */\nfunction transformExpressionsInStatement(stmt, transform, flags) {\n  if (stmt instanceof ExpressionStatement) {\n    stmt.expr = transformExpressionsInExpression(stmt.expr, transform, flags);\n  } else if (stmt instanceof ReturnStatement) {\n    stmt.value = transformExpressionsInExpression(stmt.value, transform, flags);\n  } else if (stmt instanceof DeclareVarStmt) {\n    if (stmt.value !== undefined) {\n      stmt.value = transformExpressionsInExpression(stmt.value, transform, flags);\n    }\n  } else if (stmt instanceof IfStmt) {\n    stmt.condition = transformExpressionsInExpression(stmt.condition, transform, flags);\n    for (const caseStatement of stmt.trueCase) {\n      transformExpressionsInStatement(caseStatement, transform, flags);\n    }\n    for (const caseStatement of stmt.falseCase) {\n      transformExpressionsInStatement(caseStatement, transform, flags);\n    }\n  } else {\n    throw new Error(`Unhandled statement kind: ${stmt.constructor.name}`);\n  }\n}\n/**\n * Checks whether the given expression is a string literal.\n */\nfunction isStringLiteral(expr) {\n  return expr instanceof LiteralExpr && typeof expr.value === 'string';\n}\n\n/**\n * A linked list of `Op` nodes of a given subtype.\n *\n * @param OpT specific subtype of `Op` nodes which this list contains.\n */\nclass OpList {\n  static {\n    this.nextListId = 0;\n  }\n  constructor() {\n    /**\n     * Debug ID of this `OpList` instance.\n     */\n    this.debugListId = OpList.nextListId++;\n    // OpList uses static head/tail nodes of a special `ListEnd` type.\n    // This avoids the need for special casing of the first and last list\n    // elements in all list operations.\n    this.head = {\n      kind: OpKind.ListEnd,\n      next: null,\n      prev: null,\n      debugListId: this.debugListId\n    };\n    this.tail = {\n      kind: OpKind.ListEnd,\n      next: null,\n      prev: null,\n      debugListId: this.debugListId\n    };\n    // Link `head` and `tail` together at the start (list is empty).\n    this.head.next = this.tail;\n    this.tail.prev = this.head;\n  }\n  /**\n   * Push a new operation to the tail of the list.\n   */\n  push(op) {\n    if (Array.isArray(op)) {\n      for (const o of op) {\n        this.push(o);\n      }\n      return;\n    }\n    OpList.assertIsNotEnd(op);\n    OpList.assertIsUnowned(op);\n    op.debugListId = this.debugListId;\n    // The old \"previous\" node (which might be the head, if the list is empty).\n    const oldLast = this.tail.prev;\n    // Insert `op` following the old last node.\n    op.prev = oldLast;\n    oldLast.next = op;\n    // Connect `op` with the list tail.\n    op.next = this.tail;\n    this.tail.prev = op;\n  }\n  /**\n   * Prepend one or more nodes to the start of the list.\n   */\n  prepend(ops) {\n    if (ops.length === 0) {\n      return;\n    }\n    for (const op of ops) {\n      OpList.assertIsNotEnd(op);\n      OpList.assertIsUnowned(op);\n      op.debugListId = this.debugListId;\n    }\n    const first = this.head.next;\n    let prev = this.head;\n    for (const op of ops) {\n      prev.next = op;\n      op.prev = prev;\n      prev = op;\n    }\n    prev.next = first;\n    first.prev = prev;\n  }\n  /**\n   * `OpList` is iterable via the iteration protocol.\n   *\n   * It's safe to mutate the part of the list that has already been returned by the iterator, up to\n   * and including the last operation returned. Mutations beyond that point _may_ be safe, but may\n   * also corrupt the iteration position and should be avoided.\n   */\n  *[Symbol.iterator]() {\n    let current = this.head.next;\n    while (current !== this.tail) {\n      // Guards against corruption of the iterator state by mutations to the tail of the list during\n      // iteration.\n      OpList.assertIsOwned(current, this.debugListId);\n      const next = current.next;\n      yield current;\n      current = next;\n    }\n  }\n  *reversed() {\n    let current = this.tail.prev;\n    while (current !== this.head) {\n      OpList.assertIsOwned(current, this.debugListId);\n      const prev = current.prev;\n      yield current;\n      current = prev;\n    }\n  }\n  /**\n   * Replace `oldOp` with `newOp` in the list.\n   */\n  static replace(oldOp, newOp) {\n    OpList.assertIsNotEnd(oldOp);\n    OpList.assertIsNotEnd(newOp);\n    OpList.assertIsOwned(oldOp);\n    OpList.assertIsUnowned(newOp);\n    newOp.debugListId = oldOp.debugListId;\n    if (oldOp.prev !== null) {\n      oldOp.prev.next = newOp;\n      newOp.prev = oldOp.prev;\n    }\n    if (oldOp.next !== null) {\n      oldOp.next.prev = newOp;\n      newOp.next = oldOp.next;\n    }\n    oldOp.debugListId = null;\n    oldOp.prev = null;\n    oldOp.next = null;\n  }\n  /**\n   * Replace `oldOp` with some number of new operations in the list (which may include `oldOp`).\n   */\n  static replaceWithMany(oldOp, newOps) {\n    if (newOps.length === 0) {\n      // Replacing with an empty list -> pure removal.\n      OpList.remove(oldOp);\n      return;\n    }\n    OpList.assertIsNotEnd(oldOp);\n    OpList.assertIsOwned(oldOp);\n    const listId = oldOp.debugListId;\n    oldOp.debugListId = null;\n    for (const newOp of newOps) {\n      OpList.assertIsNotEnd(newOp);\n      // `newOp` might be `oldOp`, but at this point it's been marked as unowned.\n      OpList.assertIsUnowned(newOp);\n    }\n    // It should be safe to reuse `oldOp` in the `newOps` list - maybe you want to sandwich an\n    // operation between two new ops.\n    const {\n      prev: oldPrev,\n      next: oldNext\n    } = oldOp;\n    oldOp.prev = null;\n    oldOp.next = null;\n    let prev = oldPrev;\n    for (const newOp of newOps) {\n      this.assertIsUnowned(newOp);\n      newOp.debugListId = listId;\n      prev.next = newOp;\n      newOp.prev = prev;\n      // This _should_ be the case, but set it just in case.\n      newOp.next = null;\n      prev = newOp;\n    }\n    // At the end of iteration, `prev` holds the last node in the list.\n    const first = newOps[0];\n    const last = prev;\n    // Replace `oldOp` with the chain `first` -> `last`.\n    if (oldPrev !== null) {\n      oldPrev.next = first;\n      first.prev = oldPrev;\n    }\n    if (oldNext !== null) {\n      oldNext.prev = last;\n      last.next = oldNext;\n    }\n  }\n  /**\n   * Remove the given node from the list which contains it.\n   */\n  static remove(op) {\n    OpList.assertIsNotEnd(op);\n    OpList.assertIsOwned(op);\n    op.prev.next = op.next;\n    op.next.prev = op.prev;\n    // Break any link between the node and this list to safeguard against its usage in future\n    // operations.\n    op.debugListId = null;\n    op.prev = null;\n    op.next = null;\n  }\n  /**\n   * Insert `op` before `target`.\n   */\n  static insertBefore(op, target) {\n    if (Array.isArray(op)) {\n      for (const o of op) {\n        this.insertBefore(o, target);\n      }\n      return;\n    }\n    OpList.assertIsOwned(target);\n    if (target.prev === null) {\n      throw new Error(`AssertionError: illegal operation on list start`);\n    }\n    OpList.assertIsNotEnd(op);\n    OpList.assertIsUnowned(op);\n    op.debugListId = target.debugListId;\n    // Just in case.\n    op.prev = null;\n    target.prev.next = op;\n    op.prev = target.prev;\n    op.next = target;\n    target.prev = op;\n  }\n  /**\n   * Insert `op` after `target`.\n   */\n  static insertAfter(op, target) {\n    OpList.assertIsOwned(target);\n    if (target.next === null) {\n      throw new Error(`AssertionError: illegal operation on list end`);\n    }\n    OpList.assertIsNotEnd(op);\n    OpList.assertIsUnowned(op);\n    op.debugListId = target.debugListId;\n    target.next.prev = op;\n    op.next = target.next;\n    op.prev = target;\n    target.next = op;\n  }\n  /**\n   * Asserts that `op` does not currently belong to a list.\n   */\n  static assertIsUnowned(op) {\n    if (op.debugListId !== null) {\n      throw new Error(`AssertionError: illegal operation on owned node: ${OpKind[op.kind]}`);\n    }\n  }\n  /**\n   * Asserts that `op` currently belongs to a list. If `byList` is passed, `op` is asserted to\n   * specifically belong to that list.\n   */\n  static assertIsOwned(op, byList) {\n    if (op.debugListId === null) {\n      throw new Error(`AssertionError: illegal operation on unowned node: ${OpKind[op.kind]}`);\n    } else if (byList !== undefined && op.debugListId !== byList) {\n      throw new Error(`AssertionError: node belongs to the wrong list (expected ${byList}, actual ${op.debugListId})`);\n    }\n  }\n  /**\n   * Asserts that `op` is not a special `ListEnd` node.\n   */\n  static assertIsNotEnd(op) {\n    if (op.kind === OpKind.ListEnd) {\n      throw new Error(`AssertionError: illegal operation on list head or tail`);\n    }\n  }\n}\nclass SlotHandle {\n  constructor() {\n    this.slot = null;\n  }\n}\n\n/**\n * The set of OpKinds that represent the creation of an element or container\n */\nconst elementContainerOpKinds = new Set([OpKind.Element, OpKind.ElementStart, OpKind.Container, OpKind.ContainerStart, OpKind.Template, OpKind.RepeaterCreate]);\n/**\n * Checks whether the given operation represents the creation of an element or container.\n */\nfunction isElementOrContainerOp(op) {\n  return elementContainerOpKinds.has(op.kind);\n}\n/**\n * Create an `ElementStartOp`.\n */\nfunction createElementStartOp(tag, xref, namespace, i18nPlaceholder, startSourceSpan, wholeSourceSpan) {\n  return {\n    kind: OpKind.ElementStart,\n    xref,\n    tag,\n    handle: new SlotHandle(),\n    attributes: null,\n    localRefs: [],\n    nonBindable: false,\n    namespace,\n    i18nPlaceholder,\n    startSourceSpan,\n    wholeSourceSpan,\n    ...TRAIT_CONSUMES_SLOT,\n    ...NEW_OP\n  };\n}\n/**\n * Create a `TemplateOp`.\n */\nfunction createTemplateOp(xref, templateKind, tag, functionNameSuffix, namespace, i18nPlaceholder, startSourceSpan, wholeSourceSpan) {\n  return {\n    kind: OpKind.Template,\n    xref,\n    templateKind,\n    attributes: null,\n    tag,\n    handle: new SlotHandle(),\n    functionNameSuffix,\n    decls: null,\n    vars: null,\n    localRefs: [],\n    nonBindable: false,\n    namespace,\n    i18nPlaceholder,\n    startSourceSpan,\n    wholeSourceSpan,\n    ...TRAIT_CONSUMES_SLOT,\n    ...NEW_OP\n  };\n}\nfunction createRepeaterCreateOp(primaryView, emptyView, tag, track, varNames, emptyTag, i18nPlaceholder, emptyI18nPlaceholder, startSourceSpan, wholeSourceSpan) {\n  return {\n    kind: OpKind.RepeaterCreate,\n    attributes: null,\n    xref: primaryView,\n    handle: new SlotHandle(),\n    emptyView,\n    track,\n    trackByFn: null,\n    tag,\n    emptyTag,\n    emptyAttributes: null,\n    functionNameSuffix: 'For',\n    namespace: Namespace.HTML,\n    nonBindable: false,\n    localRefs: [],\n    decls: null,\n    vars: null,\n    varNames,\n    usesComponentInstance: false,\n    i18nPlaceholder,\n    emptyI18nPlaceholder,\n    startSourceSpan,\n    wholeSourceSpan,\n    ...TRAIT_CONSUMES_SLOT,\n    ...NEW_OP,\n    ...TRAIT_CONSUMES_VARS,\n    numSlotsUsed: emptyView === null ? 2 : 3\n  };\n}\n/**\n * Create an `ElementEndOp`.\n */\nfunction createElementEndOp(xref, sourceSpan) {\n  return {\n    kind: OpKind.ElementEnd,\n    xref,\n    sourceSpan,\n    ...NEW_OP\n  };\n}\nfunction createDisableBindingsOp(xref) {\n  return {\n    kind: OpKind.DisableBindings,\n    xref,\n    ...NEW_OP\n  };\n}\nfunction createEnableBindingsOp(xref) {\n  return {\n    kind: OpKind.EnableBindings,\n    xref,\n    ...NEW_OP\n  };\n}\n/**\n * Create a `TextOp`.\n */\nfunction createTextOp(xref, initialValue, icuPlaceholder, sourceSpan) {\n  return {\n    kind: OpKind.Text,\n    xref,\n    handle: new SlotHandle(),\n    initialValue,\n    icuPlaceholder,\n    sourceSpan,\n    ...TRAIT_CONSUMES_SLOT,\n    ...NEW_OP\n  };\n}\n/**\n * Create a `ListenerOp`. Host bindings reuse all the listener logic.\n */\nfunction createListenerOp(target, targetSlot, name, tag, handlerOps, animationPhase, eventTarget, hostListener, sourceSpan) {\n  const handlerList = new OpList();\n  handlerList.push(handlerOps);\n  return {\n    kind: OpKind.Listener,\n    target,\n    targetSlot,\n    tag,\n    hostListener,\n    name,\n    handlerOps: handlerList,\n    handlerFnName: null,\n    consumesDollarEvent: false,\n    isAnimationListener: animationPhase !== null,\n    animationPhase,\n    eventTarget,\n    sourceSpan,\n    ...NEW_OP\n  };\n}\n/**\n * Create a `TwoWayListenerOp`.\n */\nfunction createTwoWayListenerOp(target, targetSlot, name, tag, handlerOps, sourceSpan) {\n  const handlerList = new OpList();\n  handlerList.push(handlerOps);\n  return {\n    kind: OpKind.TwoWayListener,\n    target,\n    targetSlot,\n    tag,\n    name,\n    handlerOps: handlerList,\n    handlerFnName: null,\n    sourceSpan,\n    ...NEW_OP\n  };\n}\nfunction createPipeOp(xref, slot, name) {\n  return {\n    kind: OpKind.Pipe,\n    xref,\n    handle: slot,\n    name,\n    ...NEW_OP,\n    ...TRAIT_CONSUMES_SLOT\n  };\n}\nfunction createNamespaceOp(namespace) {\n  return {\n    kind: OpKind.Namespace,\n    active: namespace,\n    ...NEW_OP\n  };\n}\nfunction createProjectionDefOp(def) {\n  return {\n    kind: OpKind.ProjectionDef,\n    def,\n    ...NEW_OP\n  };\n}\nfunction createProjectionOp(xref, selector, i18nPlaceholder, fallbackView, sourceSpan) {\n  return {\n    kind: OpKind.Projection,\n    xref,\n    handle: new SlotHandle(),\n    selector,\n    i18nPlaceholder,\n    fallbackView,\n    projectionSlotIndex: 0,\n    attributes: null,\n    localRefs: [],\n    sourceSpan,\n    ...NEW_OP,\n    ...TRAIT_CONSUMES_SLOT,\n    numSlotsUsed: fallbackView === null ? 1 : 2\n  };\n}\n/**\n * Create an `ExtractedAttributeOp`.\n */\nfunction createExtractedAttributeOp(target, bindingKind, namespace, name, expression, i18nContext, i18nMessage, securityContext) {\n  return {\n    kind: OpKind.ExtractedAttribute,\n    target,\n    bindingKind,\n    namespace,\n    name,\n    expression,\n    i18nContext,\n    i18nMessage,\n    securityContext,\n    trustedValueFn: null,\n    ...NEW_OP\n  };\n}\nfunction createDeferOp(xref, main, mainSlot, ownResolverFn, resolverFn, sourceSpan) {\n  return {\n    kind: OpKind.Defer,\n    xref,\n    handle: new SlotHandle(),\n    mainView: main,\n    mainSlot,\n    loadingView: null,\n    loadingSlot: null,\n    loadingConfig: null,\n    loadingMinimumTime: null,\n    loadingAfterTime: null,\n    placeholderView: null,\n    placeholderSlot: null,\n    placeholderConfig: null,\n    placeholderMinimumTime: null,\n    errorView: null,\n    errorSlot: null,\n    ownResolverFn,\n    resolverFn,\n    sourceSpan,\n    ...NEW_OP,\n    ...TRAIT_CONSUMES_SLOT,\n    numSlotsUsed: 2\n  };\n}\nfunction createDeferOnOp(defer, trigger, prefetch, sourceSpan) {\n  return {\n    kind: OpKind.DeferOn,\n    defer,\n    trigger,\n    prefetch,\n    sourceSpan,\n    ...NEW_OP\n  };\n}\n/**\n * Creates a `DeclareLetOp`.\n */\nfunction createDeclareLetOp(xref, declaredName, sourceSpan) {\n  return {\n    kind: OpKind.DeclareLet,\n    xref,\n    declaredName,\n    sourceSpan,\n    handle: new SlotHandle(),\n    ...TRAIT_CONSUMES_SLOT,\n    ...NEW_OP\n  };\n}\n/**\n * Create an `ExtractedMessageOp`.\n */\nfunction createI18nMessageOp(xref, i18nContext, i18nBlock, message, messagePlaceholder, params, postprocessingParams, needsPostprocessing) {\n  return {\n    kind: OpKind.I18nMessage,\n    xref,\n    i18nContext,\n    i18nBlock,\n    message,\n    messagePlaceholder,\n    params,\n    postprocessingParams,\n    needsPostprocessing,\n    subMessages: [],\n    ...NEW_OP\n  };\n}\n/**\n * Create an `I18nStartOp`.\n */\nfunction createI18nStartOp(xref, message, root, sourceSpan) {\n  return {\n    kind: OpKind.I18nStart,\n    xref,\n    handle: new SlotHandle(),\n    root: root ?? xref,\n    message,\n    messageIndex: null,\n    subTemplateIndex: null,\n    context: null,\n    sourceSpan,\n    ...NEW_OP,\n    ...TRAIT_CONSUMES_SLOT\n  };\n}\n/**\n * Create an `I18nEndOp`.\n */\nfunction createI18nEndOp(xref, sourceSpan) {\n  return {\n    kind: OpKind.I18nEnd,\n    xref,\n    sourceSpan,\n    ...NEW_OP\n  };\n}\n/**\n * Creates an ICU start op.\n */\nfunction createIcuStartOp(xref, message, messagePlaceholder, sourceSpan) {\n  return {\n    kind: OpKind.IcuStart,\n    xref,\n    message,\n    messagePlaceholder,\n    context: null,\n    sourceSpan,\n    ...NEW_OP\n  };\n}\n/**\n * Creates an ICU end op.\n */\nfunction createIcuEndOp(xref) {\n  return {\n    kind: OpKind.IcuEnd,\n    xref,\n    ...NEW_OP\n  };\n}\n/**\n * Creates an ICU placeholder op.\n */\nfunction createIcuPlaceholderOp(xref, name, strings) {\n  return {\n    kind: OpKind.IcuPlaceholder,\n    xref,\n    name,\n    strings,\n    expressionPlaceholders: [],\n    ...NEW_OP\n  };\n}\nfunction createI18nContextOp(contextKind, xref, i18nBlock, message, sourceSpan) {\n  if (i18nBlock === null && contextKind !== I18nContextKind.Attr) {\n    throw new Error('AssertionError: i18nBlock must be provided for non-attribute contexts.');\n  }\n  return {\n    kind: OpKind.I18nContext,\n    contextKind,\n    xref,\n    i18nBlock,\n    message,\n    sourceSpan,\n    params: new Map(),\n    postprocessingParams: new Map(),\n    ...NEW_OP\n  };\n}\nfunction createI18nAttributesOp(xref, handle, target) {\n  return {\n    kind: OpKind.I18nAttributes,\n    xref,\n    handle,\n    target,\n    i18nAttributesConfig: null,\n    ...NEW_OP,\n    ...TRAIT_CONSUMES_SLOT\n  };\n}\nfunction createHostPropertyOp(name, expression, isAnimationTrigger, i18nContext, securityContext, sourceSpan) {\n  return {\n    kind: OpKind.HostProperty,\n    name,\n    expression,\n    isAnimationTrigger,\n    i18nContext,\n    securityContext,\n    sanitizer: null,\n    sourceSpan,\n    ...TRAIT_CONSUMES_VARS,\n    ...NEW_OP\n  };\n}\n\n/**\n * When referenced in the template's context parameters, this indicates a reference to the entire\n * context object, rather than a specific parameter.\n */\nconst CTX_REF = 'CTX_REF_MARKER';\nvar CompilationJobKind;\n(function (CompilationJobKind) {\n  CompilationJobKind[CompilationJobKind[\"Tmpl\"] = 0] = \"Tmpl\";\n  CompilationJobKind[CompilationJobKind[\"Host\"] = 1] = \"Host\";\n  CompilationJobKind[CompilationJobKind[\"Both\"] = 2] = \"Both\";\n})(CompilationJobKind || (CompilationJobKind = {}));\n/**\n * An entire ongoing compilation, which will result in one or more template functions when complete.\n * Contains one or more corresponding compilation units.\n */\nclass CompilationJob {\n  constructor(componentName, pool, compatibility) {\n    this.componentName = componentName;\n    this.pool = pool;\n    this.compatibility = compatibility;\n    this.kind = CompilationJobKind.Both;\n    /**\n     * Tracks the next `ir.XrefId` which can be assigned as template structures are ingested.\n     */\n    this.nextXrefId = 0;\n  }\n  /**\n   * Generate a new unique `ir.XrefId` in this job.\n   */\n  allocateXrefId() {\n    return this.nextXrefId++;\n  }\n}\n/**\n * Compilation-in-progress of a whole component's template, including the main template and any\n * embedded views or host bindings.\n */\nclass ComponentCompilationJob extends CompilationJob {\n  constructor(componentName, pool, compatibility, relativeContextFilePath, i18nUseExternalIds, deferMeta, allDeferrableDepsFn) {\n    super(componentName, pool, compatibility);\n    this.relativeContextFilePath = relativeContextFilePath;\n    this.i18nUseExternalIds = i18nUseExternalIds;\n    this.deferMeta = deferMeta;\n    this.allDeferrableDepsFn = allDeferrableDepsFn;\n    this.kind = CompilationJobKind.Tmpl;\n    this.fnSuffix = 'Template';\n    this.views = new Map();\n    /**\n     * Causes ngContentSelectors to be emitted, for content projection slots in the view. Possibly a\n     * reference into the constant pool.\n     */\n    this.contentSelectors = null;\n    /**\n     * Constant expressions used by operations within this component's compilation.\n     *\n     * This will eventually become the `consts` array in the component definition.\n     */\n    this.consts = [];\n    /**\n     * Initialization statements needed to set up the consts.\n     */\n    this.constsInitializers = [];\n    this.root = new ViewCompilationUnit(this, this.allocateXrefId(), null);\n    this.views.set(this.root.xref, this.root);\n  }\n  /**\n   * Add a `ViewCompilation` for a new embedded view to this compilation.\n   */\n  allocateView(parent) {\n    const view = new ViewCompilationUnit(this, this.allocateXrefId(), parent);\n    this.views.set(view.xref, view);\n    return view;\n  }\n  get units() {\n    return this.views.values();\n  }\n  /**\n   * Add a constant `o.Expression` to the compilation and return its index in the `consts` array.\n   */\n  addConst(newConst, initializers) {\n    for (let idx = 0; idx < this.consts.length; idx++) {\n      if (this.consts[idx].isEquivalent(newConst)) {\n        return idx;\n      }\n    }\n    const idx = this.consts.length;\n    this.consts.push(newConst);\n    if (initializers) {\n      this.constsInitializers.push(...initializers);\n    }\n    return idx;\n  }\n}\n/**\n * A compilation unit is compiled into a template function. Some example units are views and host\n * bindings.\n */\nclass CompilationUnit {\n  constructor(xref) {\n    this.xref = xref;\n    /**\n     * List of creation operations for this view.\n     *\n     * Creation operations may internally contain other operations, including update operations.\n     */\n    this.create = new OpList();\n    /**\n     * List of update operations for this view.\n     */\n    this.update = new OpList();\n    /**\n     * Name of the function which will be generated for this unit.\n     *\n     * May be `null` if not yet determined.\n     */\n    this.fnName = null;\n    /**\n     * Number of variable slots used within this view, or `null` if variables have not yet been\n     * counted.\n     */\n    this.vars = null;\n  }\n  /**\n   * Iterate over all `ir.Op`s within this view.\n   *\n   * Some operations may have child operations, which this iterator will visit.\n   */\n  *ops() {\n    for (const op of this.create) {\n      yield op;\n      if (op.kind === OpKind.Listener || op.kind === OpKind.TwoWayListener) {\n        for (const listenerOp of op.handlerOps) {\n          yield listenerOp;\n        }\n      }\n    }\n    for (const op of this.update) {\n      yield op;\n    }\n  }\n}\n/**\n * Compilation-in-progress of an individual view within a template.\n */\nclass ViewCompilationUnit extends CompilationUnit {\n  constructor(job, xref, parent) {\n    super(xref);\n    this.job = job;\n    this.parent = parent;\n    /**\n     * Map of declared variables available within this view to the property on the context object\n     * which they alias.\n     */\n    this.contextVariables = new Map();\n    /**\n     * Set of aliases available within this view. An alias is a variable whose provided expression is\n     * inlined at every location it is used. It may also depend on context variables, by name.\n     */\n    this.aliases = new Set();\n    /**\n     * Number of declaration slots used within this view, or `null` if slots have not yet been\n     * allocated.\n     */\n    this.decls = null;\n  }\n}\n/**\n * Compilation-in-progress of a host binding, which contains a single unit for that host binding.\n */\nclass HostBindingCompilationJob extends CompilationJob {\n  constructor(componentName, pool, compatibility) {\n    super(componentName, pool, compatibility);\n    this.kind = CompilationJobKind.Host;\n    this.fnSuffix = 'HostBindings';\n    this.root = new HostBindingCompilationUnit(this);\n  }\n  get units() {\n    return [this.root];\n  }\n}\nclass HostBindingCompilationUnit extends CompilationUnit {\n  constructor(job) {\n    super(0);\n    this.job = job;\n    /**\n     * Much like an element can have attributes, so can a host binding function.\n     */\n    this.attributes = null;\n  }\n}\n\n/**\n * Find any function calls to `$any`, excluding `this.$any`, and delete them, since they have no\n * runtime effects.\n */\nfunction deleteAnyCasts(job) {\n  for (const unit of job.units) {\n    for (const op of unit.ops()) {\n      transformExpressionsInOp(op, removeAnys, VisitorContextFlag.None);\n    }\n  }\n}\nfunction removeAnys(e) {\n  if (e instanceof InvokeFunctionExpr && e.fn instanceof LexicalReadExpr && e.fn.name === '$any') {\n    if (e.args.length !== 1) {\n      throw new Error('The $any builtin function expects exactly one argument.');\n    }\n    return e.args[0];\n  }\n  return e;\n}\n\n/**\n * Adds apply operations after i18n expressions.\n */\nfunction applyI18nExpressions(job) {\n  const i18nContexts = new Map();\n  for (const unit of job.units) {\n    for (const op of unit.create) {\n      if (op.kind === OpKind.I18nContext) {\n        i18nContexts.set(op.xref, op);\n      }\n    }\n  }\n  for (const unit of job.units) {\n    for (const op of unit.update) {\n      // Only add apply after expressions that are not followed by more expressions.\n      if (op.kind === OpKind.I18nExpression && needsApplication(i18nContexts, op)) {\n        // TODO: what should be the source span for the apply op?\n        OpList.insertAfter(createI18nApplyOp(op.i18nOwner, op.handle, null), op);\n      }\n    }\n  }\n}\n/**\n * Checks whether the given expression op needs to be followed with an apply op.\n */\nfunction needsApplication(i18nContexts, op) {\n  // If the next op is not another expression, we need to apply.\n  if (op.next?.kind !== OpKind.I18nExpression) {\n    return true;\n  }\n  const context = i18nContexts.get(op.context);\n  const nextContext = i18nContexts.get(op.next.context);\n  if (context === undefined) {\n    throw new Error(\"AssertionError: expected an I18nContextOp to exist for the I18nExpressionOp's context\");\n  }\n  if (nextContext === undefined) {\n    throw new Error(\"AssertionError: expected an I18nContextOp to exist for the next I18nExpressionOp's context\");\n  }\n  // If the next op is an expression targeting a different i18n block (or different element, in the\n  // case of i18n attributes), we need to apply.\n  // First, handle the case of i18n blocks.\n  if (context.i18nBlock !== null) {\n    // This is a block context. Compare the blocks.\n    if (context.i18nBlock !== nextContext.i18nBlock) {\n      return true;\n    }\n    return false;\n  }\n  // Second, handle the case of i18n attributes.\n  if (op.i18nOwner !== op.next.i18nOwner) {\n    return true;\n  }\n  return false;\n}\n\n/**\n * Updates i18n expression ops to target the last slot in their owning i18n block, and moves them\n * after the last update instruction that depends on that slot.\n */\nfunction assignI18nSlotDependencies(job) {\n  for (const unit of job.units) {\n    // The first update op.\n    let updateOp = unit.update.head;\n    // I18n expressions currently being moved during the iteration.\n    let i18nExpressionsInProgress = [];\n    // Non-null  while we are iterating through an i18nStart/i18nEnd pair\n    let state = null;\n    for (const createOp of unit.create) {\n      if (createOp.kind === OpKind.I18nStart) {\n        state = {\n          blockXref: createOp.xref,\n          lastSlotConsumer: createOp.xref\n        };\n      } else if (createOp.kind === OpKind.I18nEnd) {\n        for (const op of i18nExpressionsInProgress) {\n          op.target = state.lastSlotConsumer;\n          OpList.insertBefore(op, updateOp);\n        }\n        i18nExpressionsInProgress.length = 0;\n        state = null;\n      }\n      if (hasConsumesSlotTrait(createOp)) {\n        if (state !== null) {\n          state.lastSlotConsumer = createOp.xref;\n        }\n        while (true) {\n          if (updateOp.next === null) {\n            break;\n          }\n          if (state !== null && updateOp.kind === OpKind.I18nExpression && updateOp.usage === I18nExpressionFor.I18nText && updateOp.i18nOwner === state.blockXref) {\n            const opToRemove = updateOp;\n            updateOp = updateOp.next;\n            OpList.remove(opToRemove);\n            i18nExpressionsInProgress.push(opToRemove);\n            continue;\n          }\n          if (hasDependsOnSlotContextTrait(updateOp) && updateOp.target !== createOp.xref) {\n            break;\n          }\n          updateOp = updateOp.next;\n        }\n      }\n    }\n  }\n}\n\n/**\n * Gets a map of all elements in the given view by their xref id.\n */\nfunction createOpXrefMap(unit) {\n  const map = new Map();\n  for (const op of unit.create) {\n    if (!hasConsumesSlotTrait(op)) {\n      continue;\n    }\n    map.set(op.xref, op);\n    // TODO(dylhunn): `@for` loops with `@empty` blocks need to be special-cased here,\n    // because the slot consumer trait currently only supports one slot per consumer and we\n    // need two. This should be revisited when making the refactors mentioned in:\n    // https://github.com/angular/angular/pull/53620#discussion_r1430918822\n    if (op.kind === OpKind.RepeaterCreate && op.emptyView !== null) {\n      map.set(op.emptyView, op);\n    }\n  }\n  return map;\n}\n\n/**\n * Find all extractable attribute and binding ops, and create ExtractedAttributeOps for them.\n * In cases where no instruction needs to be generated for the attribute or binding, it is removed.\n */\nfunction extractAttributes(job) {\n  for (const unit of job.units) {\n    const elements = createOpXrefMap(unit);\n    for (const op of unit.ops()) {\n      switch (op.kind) {\n        case OpKind.Attribute:\n          extractAttributeOp(unit, op, elements);\n          break;\n        case OpKind.Property:\n          if (!op.isAnimationTrigger) {\n            let bindingKind;\n            if (op.i18nMessage !== null && op.templateKind === null) {\n              // If the binding has an i18n context, it is an i18n attribute, and should have that\n              // kind in the consts array.\n              bindingKind = BindingKind.I18n;\n            } else if (op.isStructuralTemplateAttribute) {\n              bindingKind = BindingKind.Template;\n            } else {\n              bindingKind = BindingKind.Property;\n            }\n            OpList.insertBefore(\n            // Deliberately null i18nMessage value\n            createExtractedAttributeOp(op.target, bindingKind, null, op.name, /* expression */null, /* i18nContext */null, /* i18nMessage */null, op.securityContext), lookupElement$2(elements, op.target));\n          }\n          break;\n        case OpKind.TwoWayProperty:\n          OpList.insertBefore(createExtractedAttributeOp(op.target, BindingKind.TwoWayProperty, null, op.name, /* expression */null, /* i18nContext */null, /* i18nMessage */null, op.securityContext), lookupElement$2(elements, op.target));\n          break;\n        case OpKind.StyleProp:\n        case OpKind.ClassProp:\n          // TODO: Can style or class bindings be i18n attributes?\n          // The old compiler treated empty style bindings as regular bindings for the purpose of\n          // directive matching. That behavior is incorrect, but we emulate it in compatibility\n          // mode.\n          if (unit.job.compatibility === CompatibilityMode.TemplateDefinitionBuilder && op.expression instanceof EmptyExpr) {\n            OpList.insertBefore(createExtractedAttributeOp(op.target, BindingKind.Property, null, op.name, /* expression */null, /* i18nContext */null, /* i18nMessage */null, SecurityContext.STYLE), lookupElement$2(elements, op.target));\n          }\n          break;\n        case OpKind.Listener:\n          if (!op.isAnimationListener) {\n            const extractedAttributeOp = createExtractedAttributeOp(op.target, BindingKind.Property, null, op.name, /* expression */null, /* i18nContext */null, /* i18nMessage */null, SecurityContext.NONE);\n            if (job.kind === CompilationJobKind.Host) {\n              if (job.compatibility) {\n                // TemplateDefinitionBuilder does not extract listener bindings to the const array\n                // (which is honestly pretty inconsistent).\n                break;\n              }\n              // This attribute will apply to the enclosing host binding compilation unit, so order\n              // doesn't matter.\n              unit.create.push(extractedAttributeOp);\n            } else {\n              OpList.insertBefore(extractedAttributeOp, lookupElement$2(elements, op.target));\n            }\n          }\n          break;\n        case OpKind.TwoWayListener:\n          // Two-way listeners aren't supported in host bindings.\n          if (job.kind !== CompilationJobKind.Host) {\n            const extractedAttributeOp = createExtractedAttributeOp(op.target, BindingKind.Property, null, op.name, /* expression */null, /* i18nContext */null, /* i18nMessage */null, SecurityContext.NONE);\n            OpList.insertBefore(extractedAttributeOp, lookupElement$2(elements, op.target));\n          }\n          break;\n      }\n    }\n  }\n}\n/**\n * Looks up an element in the given map by xref ID.\n */\nfunction lookupElement$2(elements, xref) {\n  const el = elements.get(xref);\n  if (el === undefined) {\n    throw new Error('All attributes should have an element-like target.');\n  }\n  return el;\n}\n/**\n * Extracts an attribute binding.\n */\nfunction extractAttributeOp(unit, op, elements) {\n  if (op.expression instanceof Interpolation) {\n    return;\n  }\n  let extractable = op.isTextAttribute || op.expression.isConstant();\n  if (unit.job.compatibility === CompatibilityMode.TemplateDefinitionBuilder) {\n    // TemplateDefinitionBuilder only extracts text attributes. It does not extract attriibute\n    // bindings, even if they are constants.\n    extractable &&= op.isTextAttribute;\n  }\n  if (extractable) {\n    const extractedAttributeOp = createExtractedAttributeOp(op.target, op.isStructuralTemplateAttribute ? BindingKind.Template : BindingKind.Attribute, op.namespace, op.name, op.expression, op.i18nContext, op.i18nMessage, op.securityContext);\n    if (unit.job.kind === CompilationJobKind.Host) {\n      // This attribute will apply to the enclosing host binding compilation unit, so order doesn't\n      // matter.\n      unit.create.push(extractedAttributeOp);\n    } else {\n      const ownerOp = lookupElement$2(elements, op.target);\n      OpList.insertBefore(extractedAttributeOp, ownerOp);\n    }\n    OpList.remove(op);\n  }\n}\n\n/**\n * Looks up an element in the given map by xref ID.\n */\nfunction lookupElement$1(elements, xref) {\n  const el = elements.get(xref);\n  if (el === undefined) {\n    throw new Error('All attributes should have an element-like target.');\n  }\n  return el;\n}\nfunction specializeBindings(job) {\n  const elements = new Map();\n  for (const unit of job.units) {\n    for (const op of unit.create) {\n      if (!isElementOrContainerOp(op)) {\n        continue;\n      }\n      elements.set(op.xref, op);\n    }\n  }\n  for (const unit of job.units) {\n    for (const op of unit.ops()) {\n      if (op.kind !== OpKind.Binding) {\n        continue;\n      }\n      switch (op.bindingKind) {\n        case BindingKind.Attribute:\n          if (op.name === 'ngNonBindable') {\n            OpList.remove(op);\n            const target = lookupElement$1(elements, op.target);\n            target.nonBindable = true;\n          } else {\n            const [namespace, name] = splitNsName(op.name);\n            OpList.replace(op, createAttributeOp(op.target, namespace, name, op.expression, op.securityContext, op.isTextAttribute, op.isStructuralTemplateAttribute, op.templateKind, op.i18nMessage, op.sourceSpan));\n          }\n          break;\n        case BindingKind.Property:\n        case BindingKind.Animation:\n          if (job.kind === CompilationJobKind.Host) {\n            OpList.replace(op, createHostPropertyOp(op.name, op.expression, op.bindingKind === BindingKind.Animation, op.i18nContext, op.securityContext, op.sourceSpan));\n          } else {\n            OpList.replace(op, createPropertyOp(op.target, op.name, op.expression, op.bindingKind === BindingKind.Animation, op.securityContext, op.isStructuralTemplateAttribute, op.templateKind, op.i18nContext, op.i18nMessage, op.sourceSpan));\n          }\n          break;\n        case BindingKind.TwoWayProperty:\n          if (!(op.expression instanceof Expression)) {\n            // We shouldn't be able to hit this code path since interpolations in two-way bindings\n            // result in a parser error. We assert here so that downstream we can assume that\n            // the value is always an expression.\n            throw new Error(`Expected value of two-way property binding \"${op.name}\" to be an expression`);\n          }\n          OpList.replace(op, createTwoWayPropertyOp(op.target, op.name, op.expression, op.securityContext, op.isStructuralTemplateAttribute, op.templateKind, op.i18nContext, op.i18nMessage, op.sourceSpan));\n          break;\n        case BindingKind.I18n:\n        case BindingKind.ClassName:\n        case BindingKind.StyleProperty:\n          throw new Error(`Unhandled binding of kind ${BindingKind[op.bindingKind]}`);\n      }\n    }\n  }\n}\nconst CHAINABLE = new Set([Identifiers.attribute, Identifiers.classProp, Identifiers.element, Identifiers.elementContainer, Identifiers.elementContainerEnd, Identifiers.elementContainerStart, Identifiers.elementEnd, Identifiers.elementStart, Identifiers.hostProperty, Identifiers.i18nExp, Identifiers.listener, Identifiers.listener, Identifiers.property, Identifiers.styleProp, Identifiers.stylePropInterpolate1, Identifiers.stylePropInterpolate2, Identifiers.stylePropInterpolate3, Identifiers.stylePropInterpolate4, Identifiers.stylePropInterpolate5, Identifiers.stylePropInterpolate6, Identifiers.stylePropInterpolate7, Identifiers.stylePropInterpolate8, Identifiers.stylePropInterpolateV, Identifiers.syntheticHostListener, Identifiers.syntheticHostProperty, Identifiers.templateCreate, Identifiers.twoWayProperty, Identifiers.twoWayListener, Identifiers.declareLet]);\n/**\n * Chaining results in repeated call expressions, causing a deep AST of receiver expressions. To prevent running out of\n * stack depth the maximum number of chained instructions is limited to this threshold, which has been selected\n * arbitrarily.\n */\nconst MAX_CHAIN_LENGTH = 256;\n/**\n * Post-process a reified view compilation and convert sequential calls to chainable instructions\n * into chain calls.\n *\n * For example, two `elementStart` operations in sequence:\n *\n * ```typescript\n * elementStart(0, 'div');\n * elementStart(1, 'span');\n * ```\n *\n * Can be called as a chain instead:\n *\n * ```typescript\n * elementStart(0, 'div')(1, 'span');\n * ```\n */\nfunction chain(job) {\n  for (const unit of job.units) {\n    chainOperationsInList(unit.create);\n    chainOperationsInList(unit.update);\n  }\n}\nfunction chainOperationsInList(opList) {\n  let chain = null;\n  for (const op of opList) {\n    if (op.kind !== OpKind.Statement || !(op.statement instanceof ExpressionStatement)) {\n      // This type of statement isn't chainable.\n      chain = null;\n      continue;\n    }\n    if (!(op.statement.expr instanceof InvokeFunctionExpr) || !(op.statement.expr.fn instanceof ExternalExpr)) {\n      // This is a statement, but not an instruction-type call, so not chainable.\n      chain = null;\n      continue;\n    }\n    const instruction = op.statement.expr.fn.value;\n    if (!CHAINABLE.has(instruction)) {\n      // This instruction isn't chainable.\n      chain = null;\n      continue;\n    }\n    // This instruction can be chained. It can either be added on to the previous chain (if\n    // compatible) or it can be the start of a new chain.\n    if (chain !== null && chain.instruction === instruction && chain.length < MAX_CHAIN_LENGTH) {\n      // This instruction can be added onto the previous chain.\n      const expression = chain.expression.callFn(op.statement.expr.args, op.statement.expr.sourceSpan, op.statement.expr.pure);\n      chain.expression = expression;\n      chain.op.statement = expression.toStmt();\n      chain.length++;\n      OpList.remove(op);\n    } else {\n      // Leave this instruction alone for now, but consider it the start of a new chain.\n      chain = {\n        op,\n        instruction,\n        expression: op.statement.expr,\n        length: 1\n      };\n    }\n  }\n}\n\n/**\n * Attribute interpolations of the form `[attr.foo]=\"{{foo}}\"\"` should be \"collapsed\" into a plain\n * attribute instruction, instead of an `attributeInterpolate` instruction.\n *\n * (We cannot do this for singleton property interpolations, because `propertyInterpolate`\n * stringifies its expression.)\n *\n * The reification step is also capable of performing this transformation, but doing it early in the\n * pipeline allows other phases to accurately know what instruction will be emitted.\n */\nfunction collapseSingletonInterpolations(job) {\n  for (const unit of job.units) {\n    for (const op of unit.update) {\n      const eligibleOpKind = op.kind === OpKind.Attribute;\n      if (eligibleOpKind && op.expression instanceof Interpolation && op.expression.strings.length === 2 && op.expression.strings.every(s => s === '')) {\n        op.expression = op.expression.expressions[0];\n      }\n    }\n  }\n}\n\n/**\n * Collapse the various conditions of conditional ops (if, switch) into a single test expression.\n */\nfunction generateConditionalExpressions(job) {\n  for (const unit of job.units) {\n    for (const op of unit.ops()) {\n      if (op.kind !== OpKind.Conditional) {\n        continue;\n      }\n      let test;\n      // Any case with a `null` condition is `default`. If one exists, default to it instead.\n      const defaultCase = op.conditions.findIndex(cond => cond.expr === null);\n      if (defaultCase >= 0) {\n        const slot = op.conditions.splice(defaultCase, 1)[0].targetSlot;\n        test = new SlotLiteralExpr(slot);\n      } else {\n        // By default, a switch evaluates to `-1`, causing no template to be displayed.\n        test = literal(-1);\n      }\n      // Switch expressions assign their main test to a temporary, to avoid re-executing it.\n      let tmp = op.test == null ? null : new AssignTemporaryExpr(op.test, job.allocateXrefId());\n      // For each remaining condition, test whether the temporary satifies the check. (If no temp is\n      // present, just check each expression directly.)\n      for (let i = op.conditions.length - 1; i >= 0; i--) {\n        let conditionalCase = op.conditions[i];\n        if (conditionalCase.expr === null) {\n          continue;\n        }\n        if (tmp !== null) {\n          const useTmp = i === 0 ? tmp : new ReadTemporaryExpr(tmp.xref);\n          conditionalCase.expr = new BinaryOperatorExpr(BinaryOperator.Identical, useTmp, conditionalCase.expr);\n        } else if (conditionalCase.alias !== null) {\n          const caseExpressionTemporaryXref = job.allocateXrefId();\n          conditionalCase.expr = new AssignTemporaryExpr(conditionalCase.expr, caseExpressionTemporaryXref);\n          op.contextValue = new ReadTemporaryExpr(caseExpressionTemporaryXref);\n        }\n        test = new ConditionalExpr(conditionalCase.expr, new SlotLiteralExpr(conditionalCase.targetSlot), test);\n      }\n      // Save the resulting aggregate Joost-expression.\n      op.processed = test;\n      // Clear the original conditions array, since we no longer need it, and don't want it to\n      // affect subsequent phases (e.g. pipe creation).\n      op.conditions = [];\n    }\n  }\n}\nconst BINARY_OPERATORS = new Map([['&&', BinaryOperator.And], ['>', BinaryOperator.Bigger], ['>=', BinaryOperator.BiggerEquals], ['|', BinaryOperator.BitwiseOr], ['&', BinaryOperator.BitwiseAnd], ['/', BinaryOperator.Divide], ['==', BinaryOperator.Equals], ['===', BinaryOperator.Identical], ['<', BinaryOperator.Lower], ['<=', BinaryOperator.LowerEquals], ['-', BinaryOperator.Minus], ['%', BinaryOperator.Modulo], ['*', BinaryOperator.Multiply], ['!=', BinaryOperator.NotEquals], ['!==', BinaryOperator.NotIdentical], ['??', BinaryOperator.NullishCoalesce], ['||', BinaryOperator.Or], ['+', BinaryOperator.Plus]]);\nfunction namespaceForKey(namespacePrefixKey) {\n  const NAMESPACES = new Map([['svg', Namespace.SVG], ['math', Namespace.Math]]);\n  if (namespacePrefixKey === null) {\n    return Namespace.HTML;\n  }\n  return NAMESPACES.get(namespacePrefixKey) ?? Namespace.HTML;\n}\nfunction keyForNamespace(namespace) {\n  const NAMESPACES = new Map([['svg', Namespace.SVG], ['math', Namespace.Math]]);\n  for (const [k, n] of NAMESPACES.entries()) {\n    if (n === namespace) {\n      return k;\n    }\n  }\n  return null; // No namespace prefix for HTML\n}\nfunction prefixWithNamespace(strippedTag, namespace) {\n  if (namespace === Namespace.HTML) {\n    return strippedTag;\n  }\n  return `:${keyForNamespace(namespace)}:${strippedTag}`;\n}\nfunction literalOrArrayLiteral(value) {\n  if (Array.isArray(value)) {\n    return literalArr(value.map(literalOrArrayLiteral));\n  }\n  return literal(value);\n}\n\n/**\n * Converts the semantic attributes of element-like operations (elements, templates) into constant\n * array expressions, and lifts them into the overall component `consts`.\n */\nfunction collectElementConsts(job) {\n  // Collect all extracted attributes.\n  const allElementAttributes = new Map();\n  for (const unit of job.units) {\n    for (const op of unit.create) {\n      if (op.kind === OpKind.ExtractedAttribute) {\n        const attributes = allElementAttributes.get(op.target) || new ElementAttributes(job.compatibility);\n        allElementAttributes.set(op.target, attributes);\n        attributes.add(op.bindingKind, op.name, op.expression, op.namespace, op.trustedValueFn);\n        OpList.remove(op);\n      }\n    }\n  }\n  // Serialize the extracted attributes into the const array.\n  if (job instanceof ComponentCompilationJob) {\n    for (const unit of job.units) {\n      for (const op of unit.create) {\n        // TODO: Simplify and combine these cases.\n        if (op.kind == OpKind.Projection) {\n          const attributes = allElementAttributes.get(op.xref);\n          if (attributes !== undefined) {\n            const attrArray = serializeAttributes(attributes);\n            if (attrArray.entries.length > 0) {\n              op.attributes = attrArray;\n            }\n          }\n        } else if (isElementOrContainerOp(op)) {\n          op.attributes = getConstIndex(job, allElementAttributes, op.xref);\n          // TODO(dylhunn): `@for` loops with `@empty` blocks need to be special-cased here,\n          // because the slot consumer trait currently only supports one slot per consumer and we\n          // need two. This should be revisited when making the refactors mentioned in:\n          // https://github.com/angular/angular/pull/53620#discussion_r1430918822\n          if (op.kind === OpKind.RepeaterCreate && op.emptyView !== null) {\n            op.emptyAttributes = getConstIndex(job, allElementAttributes, op.emptyView);\n          }\n        }\n      }\n    }\n  } else if (job instanceof HostBindingCompilationJob) {\n    // TODO: If the host binding case further diverges, we may want to split it into its own\n    // phase.\n    for (const [xref, attributes] of allElementAttributes.entries()) {\n      if (xref !== job.root.xref) {\n        throw new Error(`An attribute would be const collected into the host binding's template function, but is not associated with the root xref.`);\n      }\n      const attrArray = serializeAttributes(attributes);\n      if (attrArray.entries.length > 0) {\n        job.root.attributes = attrArray;\n      }\n    }\n  }\n}\nfunction getConstIndex(job, allElementAttributes, xref) {\n  const attributes = allElementAttributes.get(xref);\n  if (attributes !== undefined) {\n    const attrArray = serializeAttributes(attributes);\n    if (attrArray.entries.length > 0) {\n      return job.addConst(attrArray);\n    }\n  }\n  return null;\n}\n/**\n * Shared instance of an empty array to avoid unnecessary array allocations.\n */\nconst FLYWEIGHT_ARRAY = Object.freeze([]);\n/**\n * Container for all of the various kinds of attributes which are applied on an element.\n */\nclass ElementAttributes {\n  get attributes() {\n    return this.byKind.get(BindingKind.Attribute) ?? FLYWEIGHT_ARRAY;\n  }\n  get classes() {\n    return this.byKind.get(BindingKind.ClassName) ?? FLYWEIGHT_ARRAY;\n  }\n  get styles() {\n    return this.byKind.get(BindingKind.StyleProperty) ?? FLYWEIGHT_ARRAY;\n  }\n  get bindings() {\n    return this.propertyBindings ?? FLYWEIGHT_ARRAY;\n  }\n  get template() {\n    return this.byKind.get(BindingKind.Template) ?? FLYWEIGHT_ARRAY;\n  }\n  get i18n() {\n    return this.byKind.get(BindingKind.I18n) ?? FLYWEIGHT_ARRAY;\n  }\n  constructor(compatibility) {\n    this.compatibility = compatibility;\n    this.known = new Map();\n    this.byKind = new Map();\n    this.propertyBindings = null;\n    this.projectAs = null;\n  }\n  isKnown(kind, name) {\n    const nameToValue = this.known.get(kind) ?? new Set();\n    this.known.set(kind, nameToValue);\n    if (nameToValue.has(name)) {\n      return true;\n    }\n    nameToValue.add(name);\n    return false;\n  }\n  add(kind, name, value, namespace, trustedValueFn) {\n    // TemplateDefinitionBuilder puts duplicate attribute, class, and style values into the consts\n    // array. This seems inefficient, we can probably keep just the first one or the last value\n    // (whichever actually gets applied when multiple values are listed for the same attribute).\n    const allowDuplicates = this.compatibility === CompatibilityMode.TemplateDefinitionBuilder && (kind === BindingKind.Attribute || kind === BindingKind.ClassName || kind === BindingKind.StyleProperty);\n    if (!allowDuplicates && this.isKnown(kind, name)) {\n      return;\n    }\n    // TODO: Can this be its own phase\n    if (name === 'ngProjectAs') {\n      if (value === null || !(value instanceof LiteralExpr) || value.value == null || typeof value.value?.toString() !== 'string') {\n        throw Error('ngProjectAs must have a string literal value');\n      }\n      this.projectAs = value.value.toString();\n      // TODO: TemplateDefinitionBuilder allows `ngProjectAs` to also be assigned as a literal\n      // attribute. Is this sane?\n    }\n    const array = this.arrayFor(kind);\n    array.push(...getAttributeNameLiterals(namespace, name));\n    if (kind === BindingKind.Attribute || kind === BindingKind.StyleProperty) {\n      if (value === null) {\n        throw Error('Attribute, i18n attribute, & style element attributes must have a value');\n      }\n      if (trustedValueFn !== null) {\n        if (!isStringLiteral(value)) {\n          throw Error('AssertionError: extracted attribute value should be string literal');\n        }\n        array.push(taggedTemplate(trustedValueFn, new TemplateLiteral([new TemplateLiteralElement(value.value)], []), undefined, value.sourceSpan));\n      } else {\n        array.push(value);\n      }\n    }\n  }\n  arrayFor(kind) {\n    if (kind === BindingKind.Property || kind === BindingKind.TwoWayProperty) {\n      this.propertyBindings ??= [];\n      return this.propertyBindings;\n    } else {\n      if (!this.byKind.has(kind)) {\n        this.byKind.set(kind, []);\n      }\n      return this.byKind.get(kind);\n    }\n  }\n}\n/**\n * Gets an array of literal expressions representing the attribute's namespaced name.\n */\nfunction getAttributeNameLiterals(namespace, name) {\n  const nameLiteral = literal(name);\n  if (namespace) {\n    return [literal(0 /* core.AttributeMarker.NamespaceURI */), literal(namespace), nameLiteral];\n  }\n  return [nameLiteral];\n}\n/**\n * Serializes an ElementAttributes object into an array expression.\n */\nfunction serializeAttributes({\n  attributes,\n  bindings,\n  classes,\n  i18n,\n  projectAs,\n  styles,\n  template\n}) {\n  const attrArray = [...attributes];\n  if (projectAs !== null) {\n    // Parse the attribute value into a CssSelectorList. Note that we only take the\n    // first selector, because we don't support multiple selectors in ngProjectAs.\n    const parsedR3Selector = parseSelectorToR3Selector(projectAs)[0];\n    attrArray.push(literal(5 /* core.AttributeMarker.ProjectAs */), literalOrArrayLiteral(parsedR3Selector));\n  }\n  if (classes.length > 0) {\n    attrArray.push(literal(1 /* core.AttributeMarker.Classes */), ...classes);\n  }\n  if (styles.length > 0) {\n    attrArray.push(literal(2 /* core.AttributeMarker.Styles */), ...styles);\n  }\n  if (bindings.length > 0) {\n    attrArray.push(literal(3 /* core.AttributeMarker.Bindings */), ...bindings);\n  }\n  if (template.length > 0) {\n    attrArray.push(literal(4 /* core.AttributeMarker.Template */), ...template);\n  }\n  if (i18n.length > 0) {\n    attrArray.push(literal(6 /* core.AttributeMarker.I18n */), ...i18n);\n  }\n  return literalArr(attrArray);\n}\n\n/**\n * Some binding instructions in the update block may actually correspond to i18n bindings. In that\n * case, they should be replaced with i18nExp instructions for the dynamic portions.\n */\nfunction convertI18nBindings(job) {\n  const i18nAttributesByElem = new Map();\n  for (const unit of job.units) {\n    for (const op of unit.create) {\n      if (op.kind === OpKind.I18nAttributes) {\n        i18nAttributesByElem.set(op.target, op);\n      }\n    }\n    for (const op of unit.update) {\n      switch (op.kind) {\n        case OpKind.Property:\n        case OpKind.Attribute:\n          if (op.i18nContext === null) {\n            continue;\n          }\n          if (!(op.expression instanceof Interpolation)) {\n            continue;\n          }\n          const i18nAttributesForElem = i18nAttributesByElem.get(op.target);\n          if (i18nAttributesForElem === undefined) {\n            throw new Error('AssertionError: An i18n attribute binding instruction requires the owning element to have an I18nAttributes create instruction');\n          }\n          if (i18nAttributesForElem.target !== op.target) {\n            throw new Error('AssertionError: Expected i18nAttributes target element to match binding target element');\n          }\n          const ops = [];\n          for (let i = 0; i < op.expression.expressions.length; i++) {\n            const expr = op.expression.expressions[i];\n            if (op.expression.i18nPlaceholders.length !== op.expression.expressions.length) {\n              throw new Error(`AssertionError: An i18n attribute binding instruction requires the same number of expressions and placeholders, but found ${op.expression.i18nPlaceholders.length} placeholders and ${op.expression.expressions.length} expressions`);\n            }\n            ops.push(createI18nExpressionOp(op.i18nContext, i18nAttributesForElem.target, i18nAttributesForElem.xref, i18nAttributesForElem.handle, expr, null, op.expression.i18nPlaceholders[i], I18nParamResolutionTime.Creation, I18nExpressionFor.I18nAttribute, op.name, op.sourceSpan));\n          }\n          OpList.replaceWithMany(op, ops);\n          break;\n      }\n    }\n  }\n}\n\n/**\n * Resolve the dependency function of a deferred block.\n */\nfunction resolveDeferDepsFns(job) {\n  for (const unit of job.units) {\n    for (const op of unit.create) {\n      if (op.kind === OpKind.Defer) {\n        if (op.resolverFn !== null) {\n          continue;\n        }\n        if (op.ownResolverFn !== null) {\n          if (op.handle.slot === null) {\n            throw new Error('AssertionError: slot must be assigned before extracting defer deps functions');\n          }\n          const fullPathName = unit.fnName?.replace('_Template', '');\n          op.resolverFn = job.pool.getSharedFunctionReference(op.ownResolverFn, `${fullPathName}_Defer_${op.handle.slot}_DepsFn`, /* Don't use unique names for TDB compatibility */false);\n        }\n      }\n    }\n  }\n}\n\n/**\n * Create one helper context op per i18n block (including generate descending blocks).\n *\n * Also, if an ICU exists inside an i18n block that also contains other localizable content (such as\n * string), create an additional helper context op for the ICU.\n *\n * These context ops are later used for generating i18n messages. (Although we generate at least one\n * context op per nested view, we will collect them up the tree later, to generate a top-level\n * message.)\n */\nfunction createI18nContexts(job) {\n  // Create i18n context ops for i18n attrs.\n  const attrContextByMessage = new Map();\n  for (const unit of job.units) {\n    for (const op of unit.ops()) {\n      switch (op.kind) {\n        case OpKind.Binding:\n        case OpKind.Property:\n        case OpKind.Attribute:\n        case OpKind.ExtractedAttribute:\n          if (op.i18nMessage === null) {\n            continue;\n          }\n          if (!attrContextByMessage.has(op.i18nMessage)) {\n            const i18nContext = createI18nContextOp(I18nContextKind.Attr, job.allocateXrefId(), null, op.i18nMessage, null);\n            unit.create.push(i18nContext);\n            attrContextByMessage.set(op.i18nMessage, i18nContext.xref);\n          }\n          op.i18nContext = attrContextByMessage.get(op.i18nMessage);\n          break;\n      }\n    }\n  }\n  // Create i18n context ops for root i18n blocks.\n  const blockContextByI18nBlock = new Map();\n  for (const unit of job.units) {\n    for (const op of unit.create) {\n      switch (op.kind) {\n        case OpKind.I18nStart:\n          if (op.xref === op.root) {\n            const contextOp = createI18nContextOp(I18nContextKind.RootI18n, job.allocateXrefId(), op.xref, op.message, null);\n            unit.create.push(contextOp);\n            op.context = contextOp.xref;\n            blockContextByI18nBlock.set(op.xref, contextOp);\n          }\n          break;\n      }\n    }\n  }\n  // Assign i18n contexts for child i18n blocks. These don't need their own conext, instead they\n  // should inherit from their root i18n block.\n  for (const unit of job.units) {\n    for (const op of unit.create) {\n      if (op.kind === OpKind.I18nStart && op.xref !== op.root) {\n        const rootContext = blockContextByI18nBlock.get(op.root);\n        if (rootContext === undefined) {\n          throw Error('AssertionError: Root i18n block i18n context should have been created.');\n        }\n        op.context = rootContext.xref;\n        blockContextByI18nBlock.set(op.xref, rootContext);\n      }\n    }\n  }\n  // Create or assign i18n contexts for ICUs.\n  let currentI18nOp = null;\n  for (const unit of job.units) {\n    for (const op of unit.create) {\n      switch (op.kind) {\n        case OpKind.I18nStart:\n          currentI18nOp = op;\n          break;\n        case OpKind.I18nEnd:\n          currentI18nOp = null;\n          break;\n        case OpKind.IcuStart:\n          if (currentI18nOp === null) {\n            throw Error('AssertionError: Unexpected ICU outside of an i18n block.');\n          }\n          if (op.message.id !== currentI18nOp.message.id) {\n            // This ICU is a sub-message inside its parent i18n block message. We need to give it\n            // its own context.\n            const contextOp = createI18nContextOp(I18nContextKind.Icu, job.allocateXrefId(), currentI18nOp.root, op.message, null);\n            unit.create.push(contextOp);\n            op.context = contextOp.xref;\n          } else {\n            // This ICU is the only translatable content in its parent i18n block. We need to\n            // convert the parent's context into an ICU context.\n            op.context = currentI18nOp.context;\n            blockContextByI18nBlock.get(currentI18nOp.xref).contextKind = I18nContextKind.Icu;\n          }\n          break;\n      }\n    }\n  }\n}\n\n/**\n * Deduplicate text bindings, e.g. <div class=\"cls1\" class=\"cls2\">\n */\nfunction deduplicateTextBindings(job) {\n  const seen = new Map();\n  for (const unit of job.units) {\n    for (const op of unit.update.reversed()) {\n      if (op.kind === OpKind.Binding && op.isTextAttribute) {\n        const seenForElement = seen.get(op.target) || new Set();\n        if (seenForElement.has(op.name)) {\n          if (job.compatibility === CompatibilityMode.TemplateDefinitionBuilder) {\n            // For most duplicated attributes, TemplateDefinitionBuilder lists all of the values in\n            // the consts array. However, for style and class attributes it only keeps the last one.\n            // We replicate that behavior here since it has actual consequences for apps with\n            // duplicate class or style attrs.\n            if (op.name === 'style' || op.name === 'class') {\n              OpList.remove(op);\n            }\n          } else {\n            // TODO: Determine the correct behavior. It would probably make sense to merge multiple\n            // style and class attributes. Alternatively we could just throw an error, as HTML\n            // doesn't permit duplicate attributes.\n          }\n        }\n        seenForElement.add(op.name);\n        seen.set(op.target, seenForElement);\n      }\n    }\n  }\n}\n\n/**\n * Defer instructions take a configuration array, which should be collected into the component\n * consts. This phase finds the config options, and creates the corresponding const array.\n */\nfunction configureDeferInstructions(job) {\n  for (const unit of job.units) {\n    for (const op of unit.create) {\n      if (op.kind !== OpKind.Defer) {\n        continue;\n      }\n      if (op.placeholderMinimumTime !== null) {\n        op.placeholderConfig = new ConstCollectedExpr(literalOrArrayLiteral([op.placeholderMinimumTime]));\n      }\n      if (op.loadingMinimumTime !== null || op.loadingAfterTime !== null) {\n        op.loadingConfig = new ConstCollectedExpr(literalOrArrayLiteral([op.loadingMinimumTime, op.loadingAfterTime]));\n      }\n    }\n  }\n}\n\n/**\n * Some `defer` conditions can reference other elements in the template, using their local reference\n * names. However, the semantics are quite different from the normal local reference system: in\n * particular, we need to look at local reference names in enclosing views. This phase resolves\n * all such references to actual xrefs.\n */\nfunction resolveDeferTargetNames(job) {\n  const scopes = new Map();\n  function getScopeForView(view) {\n    if (scopes.has(view.xref)) {\n      return scopes.get(view.xref);\n    }\n    const scope = new Scope$1();\n    for (const op of view.create) {\n      // add everything that can be referenced.\n      if (!isElementOrContainerOp(op) || op.localRefs === null) {\n        continue;\n      }\n      if (!Array.isArray(op.localRefs)) {\n        throw new Error('LocalRefs were already processed, but were needed to resolve defer targets.');\n      }\n      for (const ref of op.localRefs) {\n        if (ref.target !== '') {\n          continue;\n        }\n        scope.targets.set(ref.name, {\n          xref: op.xref,\n          slot: op.handle\n        });\n      }\n    }\n    scopes.set(view.xref, scope);\n    return scope;\n  }\n  function resolveTrigger(deferOwnerView, op, placeholderView) {\n    switch (op.trigger.kind) {\n      case DeferTriggerKind.Idle:\n      case DeferTriggerKind.Immediate:\n      case DeferTriggerKind.Timer:\n        return;\n      case DeferTriggerKind.Hover:\n      case DeferTriggerKind.Interaction:\n      case DeferTriggerKind.Viewport:\n        if (op.trigger.targetName === null) {\n          // A `null` target name indicates we should default to the first element in the\n          // placeholder block.\n          if (placeholderView === null) {\n            throw new Error('defer on trigger with no target name must have a placeholder block');\n          }\n          const placeholder = job.views.get(placeholderView);\n          if (placeholder == undefined) {\n            throw new Error('AssertionError: could not find placeholder view for defer on trigger');\n          }\n          for (const placeholderOp of placeholder.create) {\n            if (hasConsumesSlotTrait(placeholderOp) && (isElementOrContainerOp(placeholderOp) || placeholderOp.kind === OpKind.Projection)) {\n              op.trigger.targetXref = placeholderOp.xref;\n              op.trigger.targetView = placeholderView;\n              op.trigger.targetSlotViewSteps = -1;\n              op.trigger.targetSlot = placeholderOp.handle;\n              return;\n            }\n          }\n          return;\n        }\n        let view = placeholderView !== null ? job.views.get(placeholderView) : deferOwnerView;\n        let step = placeholderView !== null ? -1 : 0;\n        while (view !== null) {\n          const scope = getScopeForView(view);\n          if (scope.targets.has(op.trigger.targetName)) {\n            const {\n              xref,\n              slot\n            } = scope.targets.get(op.trigger.targetName);\n            op.trigger.targetXref = xref;\n            op.trigger.targetView = view.xref;\n            op.trigger.targetSlotViewSteps = step;\n            op.trigger.targetSlot = slot;\n            return;\n          }\n          view = view.parent !== null ? job.views.get(view.parent) : null;\n          step++;\n        }\n        break;\n      default:\n        throw new Error(`Trigger kind ${op.trigger.kind} not handled`);\n    }\n  }\n  // Find the defer ops, and assign the data about their targets.\n  for (const unit of job.units) {\n    const defers = new Map();\n    for (const op of unit.create) {\n      switch (op.kind) {\n        case OpKind.Defer:\n          defers.set(op.xref, op);\n          break;\n        case OpKind.DeferOn:\n          const deferOp = defers.get(op.defer);\n          resolveTrigger(unit, op, deferOp.placeholderView);\n          break;\n      }\n    }\n  }\n}\nclass Scope$1 {\n  constructor() {\n    this.targets = new Map();\n  }\n}\nconst REPLACEMENTS = new Map([[OpKind.ElementEnd, [OpKind.ElementStart, OpKind.Element]], [OpKind.ContainerEnd, [OpKind.ContainerStart, OpKind.Container]], [OpKind.I18nEnd, [OpKind.I18nStart, OpKind.I18n]]]);\n/**\n * Op kinds that should not prevent merging of start/end ops.\n */\nconst IGNORED_OP_KINDS = new Set([OpKind.Pipe]);\n/**\n * Replace sequences of mergable instructions (e.g. `ElementStart` and `ElementEnd`) with a\n * consolidated instruction (e.g. `Element`).\n */\nfunction collapseEmptyInstructions(job) {\n  for (const unit of job.units) {\n    for (const op of unit.create) {\n      // Find end ops that may be able to be merged.\n      const opReplacements = REPLACEMENTS.get(op.kind);\n      if (opReplacements === undefined) {\n        continue;\n      }\n      const [startKind, mergedKind] = opReplacements;\n      // Locate the previous (non-ignored) op.\n      let prevOp = op.prev;\n      while (prevOp !== null && IGNORED_OP_KINDS.has(prevOp.kind)) {\n        prevOp = prevOp.prev;\n      }\n      // If the previous op is the corresponding start op, we can megre.\n      if (prevOp !== null && prevOp.kind === startKind) {\n        // Transmute the start instruction to the merged version. This is safe as they're designed\n        // to be identical apart from the `kind`.\n        prevOp.kind = mergedKind;\n        // Remove the end instruction.\n        OpList.remove(op);\n      }\n    }\n  }\n}\n\n/**\n * Safe read expressions such as `a?.b` have different semantics in Angular templates as\n * compared to JavaScript. In particular, they default to `null` instead of `undefined`. This phase\n * finds all unresolved safe read expressions, and converts them into the appropriate output AST\n * reads, guarded by null checks. We generate temporaries as needed, to avoid re-evaluating the same\n * sub-expression multiple times.\n */\nfunction expandSafeReads(job) {\n  for (const unit of job.units) {\n    for (const op of unit.ops()) {\n      transformExpressionsInOp(op, e => safeTransform(e, {\n        job\n      }), VisitorContextFlag.None);\n      transformExpressionsInOp(op, ternaryTransform, VisitorContextFlag.None);\n    }\n  }\n}\n// A lookup set of all the expression kinds that require a temporary variable to be generated.\nconst requiresTemporary = [InvokeFunctionExpr, LiteralArrayExpr, LiteralMapExpr, SafeInvokeFunctionExpr, PipeBindingExpr].map(e => e.constructor.name);\nfunction needsTemporaryInSafeAccess(e) {\n  // TODO: We probably want to use an expression visitor to recursively visit all descendents.\n  // However, that would potentially do a lot of extra work (because it cannot short circuit), so we\n  // implement the logic ourselves for now.\n  if (e instanceof UnaryOperatorExpr) {\n    return needsTemporaryInSafeAccess(e.expr);\n  } else if (e instanceof BinaryOperatorExpr) {\n    return needsTemporaryInSafeAccess(e.lhs) || needsTemporaryInSafeAccess(e.rhs);\n  } else if (e instanceof ConditionalExpr) {\n    if (e.falseCase && needsTemporaryInSafeAccess(e.falseCase)) return true;\n    return needsTemporaryInSafeAccess(e.condition) || needsTemporaryInSafeAccess(e.trueCase);\n  } else if (e instanceof NotExpr) {\n    return needsTemporaryInSafeAccess(e.condition);\n  } else if (e instanceof AssignTemporaryExpr) {\n    return needsTemporaryInSafeAccess(e.expr);\n  } else if (e instanceof ReadPropExpr) {\n    return needsTemporaryInSafeAccess(e.receiver);\n  } else if (e instanceof ReadKeyExpr) {\n    return needsTemporaryInSafeAccess(e.receiver) || needsTemporaryInSafeAccess(e.index);\n  }\n  // TODO: Switch to a method which is exhaustive of newly added expression subtypes.\n  return e instanceof InvokeFunctionExpr || e instanceof LiteralArrayExpr || e instanceof LiteralMapExpr || e instanceof SafeInvokeFunctionExpr || e instanceof PipeBindingExpr;\n}\nfunction temporariesIn(e) {\n  const temporaries = new Set();\n  // TODO: Although it's not currently supported by the transform helper, we should be able to\n  // short-circuit exploring the tree to do less work. In particular, we don't have to penetrate\n  // into the subexpressions of temporary assignments.\n  transformExpressionsInExpression(e, e => {\n    if (e instanceof AssignTemporaryExpr) {\n      temporaries.add(e.xref);\n    }\n    return e;\n  }, VisitorContextFlag.None);\n  return temporaries;\n}\nfunction eliminateTemporaryAssignments(e, tmps, ctx) {\n  // TODO: We can be more efficient than the transform helper here. We don't need to visit any\n  // descendents of temporary assignments.\n  transformExpressionsInExpression(e, e => {\n    if (e instanceof AssignTemporaryExpr && tmps.has(e.xref)) {\n      const read = new ReadTemporaryExpr(e.xref);\n      // `TemplateDefinitionBuilder` has the (accidental?) behavior of generating assignments of\n      // temporary variables to themselves. This happens because some subexpression that the\n      // temporary refers to, possibly through nested temporaries, has a function call. We copy that\n      // behavior here.\n      return ctx.job.compatibility === CompatibilityMode.TemplateDefinitionBuilder ? new AssignTemporaryExpr(read, read.xref) : read;\n    }\n    return e;\n  }, VisitorContextFlag.None);\n  return e;\n}\n/**\n * Creates a safe ternary guarded by the input expression, and with a body generated by the provided\n * callback on the input expression. Generates a temporary variable assignment if needed, and\n * deduplicates nested temporary assignments if needed.\n */\nfunction safeTernaryWithTemporary(guard, body, ctx) {\n  let result;\n  if (needsTemporaryInSafeAccess(guard)) {\n    const xref = ctx.job.allocateXrefId();\n    result = [new AssignTemporaryExpr(guard, xref), new ReadTemporaryExpr(xref)];\n  } else {\n    result = [guard, guard.clone()];\n    // Consider an expression like `a?.[b?.c()]?.d`. The `b?.c()` will be transformed first,\n    // introducing a temporary assignment into the key. Then, as part of expanding the `?.d`. That\n    // assignment will be duplicated into both the guard and expression sides. We de-duplicate it,\n    // by transforming it from an assignment into a read on the expression side.\n    eliminateTemporaryAssignments(result[1], temporariesIn(result[0]), ctx);\n  }\n  return new SafeTernaryExpr(result[0], body(result[1]));\n}\nfunction isSafeAccessExpression(e) {\n  return e instanceof SafePropertyReadExpr || e instanceof SafeKeyedReadExpr || e instanceof SafeInvokeFunctionExpr;\n}\nfunction isUnsafeAccessExpression(e) {\n  return e instanceof ReadPropExpr || e instanceof ReadKeyExpr || e instanceof InvokeFunctionExpr;\n}\nfunction isAccessExpression(e) {\n  return isSafeAccessExpression(e) || isUnsafeAccessExpression(e);\n}\nfunction deepestSafeTernary(e) {\n  if (isAccessExpression(e) && e.receiver instanceof SafeTernaryExpr) {\n    let st = e.receiver;\n    while (st.expr instanceof SafeTernaryExpr) {\n      st = st.expr;\n    }\n    return st;\n  }\n  return null;\n}\n// TODO: When strict compatibility with TemplateDefinitionBuilder is not required, we can use `&&`\n// instead to save some code size.\nfunction safeTransform(e, ctx) {\n  if (!isAccessExpression(e)) {\n    return e;\n  }\n  const dst = deepestSafeTernary(e);\n  if (dst) {\n    if (e instanceof InvokeFunctionExpr) {\n      dst.expr = dst.expr.callFn(e.args);\n      return e.receiver;\n    }\n    if (e instanceof ReadPropExpr) {\n      dst.expr = dst.expr.prop(e.name);\n      return e.receiver;\n    }\n    if (e instanceof ReadKeyExpr) {\n      dst.expr = dst.expr.key(e.index);\n      return e.receiver;\n    }\n    if (e instanceof SafeInvokeFunctionExpr) {\n      dst.expr = safeTernaryWithTemporary(dst.expr, r => r.callFn(e.args), ctx);\n      return e.receiver;\n    }\n    if (e instanceof SafePropertyReadExpr) {\n      dst.expr = safeTernaryWithTemporary(dst.expr, r => r.prop(e.name), ctx);\n      return e.receiver;\n    }\n    if (e instanceof SafeKeyedReadExpr) {\n      dst.expr = safeTernaryWithTemporary(dst.expr, r => r.key(e.index), ctx);\n      return e.receiver;\n    }\n  } else {\n    if (e instanceof SafeInvokeFunctionExpr) {\n      return safeTernaryWithTemporary(e.receiver, r => r.callFn(e.args), ctx);\n    }\n    if (e instanceof SafePropertyReadExpr) {\n      return safeTernaryWithTemporary(e.receiver, r => r.prop(e.name), ctx);\n    }\n    if (e instanceof SafeKeyedReadExpr) {\n      return safeTernaryWithTemporary(e.receiver, r => r.key(e.index), ctx);\n    }\n  }\n  return e;\n}\nfunction ternaryTransform(e) {\n  if (!(e instanceof SafeTernaryExpr)) {\n    return e;\n  }\n  return new ConditionalExpr(new BinaryOperatorExpr(BinaryOperator.Equals, e.guard, NULL_EXPR), NULL_EXPR, e.expr);\n}\n\n/**\n * The escape sequence used indicate message param values.\n */\nconst ESCAPE$1 = '\\uFFFD';\n/**\n * Marker used to indicate an element tag.\n */\nconst ELEMENT_MARKER = '#';\n/**\n * Marker used to indicate a template tag.\n */\nconst TEMPLATE_MARKER = '*';\n/**\n * Marker used to indicate closing of an element or template tag.\n */\nconst TAG_CLOSE_MARKER = '/';\n/**\n * Marker used to indicate the sub-template context.\n */\nconst CONTEXT_MARKER = ':';\n/**\n * Marker used to indicate the start of a list of values.\n */\nconst LIST_START_MARKER = '[';\n/**\n * Marker used to indicate the end of a list of values.\n */\nconst LIST_END_MARKER = ']';\n/**\n * Delimiter used to separate multiple values in a list.\n */\nconst LIST_DELIMITER = '|';\n/**\n * Formats the param maps on extracted message ops into a maps of `Expression` objects that can be\n * used in the final output.\n */\nfunction extractI18nMessages(job) {\n  // Create an i18n message for each context.\n  // TODO: Merge the context op with the message op since they're 1:1 anyways.\n  const i18nMessagesByContext = new Map();\n  const i18nBlocks = new Map();\n  const i18nContexts = new Map();\n  for (const unit of job.units) {\n    for (const op of unit.create) {\n      switch (op.kind) {\n        case OpKind.I18nContext:\n          const i18nMessageOp = createI18nMessage(job, op);\n          unit.create.push(i18nMessageOp);\n          i18nMessagesByContext.set(op.xref, i18nMessageOp);\n          i18nContexts.set(op.xref, op);\n          break;\n        case OpKind.I18nStart:\n          i18nBlocks.set(op.xref, op);\n          break;\n      }\n    }\n  }\n  // Associate sub-messages for ICUs with their root message. At this point we can also remove the\n  // ICU start/end ops, as they are no longer needed.\n  let currentIcu = null;\n  for (const unit of job.units) {\n    for (const op of unit.create) {\n      switch (op.kind) {\n        case OpKind.IcuStart:\n          currentIcu = op;\n          OpList.remove(op);\n          // Skip any contexts not associated with an ICU.\n          const icuContext = i18nContexts.get(op.context);\n          if (icuContext.contextKind !== I18nContextKind.Icu) {\n            continue;\n          }\n          // Skip ICUs that share a context with their i18n message. These represent root-level\n          // ICUs, not sub-messages.\n          const i18nBlock = i18nBlocks.get(icuContext.i18nBlock);\n          if (i18nBlock.context === icuContext.xref) {\n            continue;\n          }\n          // Find the root message and push this ICUs message as a sub-message.\n          const rootI18nBlock = i18nBlocks.get(i18nBlock.root);\n          const rootMessage = i18nMessagesByContext.get(rootI18nBlock.context);\n          if (rootMessage === undefined) {\n            throw Error('AssertionError: ICU sub-message should belong to a root message.');\n          }\n          const subMessage = i18nMessagesByContext.get(icuContext.xref);\n          subMessage.messagePlaceholder = op.messagePlaceholder;\n          rootMessage.subMessages.push(subMessage.xref);\n          break;\n        case OpKind.IcuEnd:\n          currentIcu = null;\n          OpList.remove(op);\n          break;\n        case OpKind.IcuPlaceholder:\n          // Add ICU placeholders to the message, then remove the ICU placeholder ops.\n          if (currentIcu === null || currentIcu.context == null) {\n            throw Error('AssertionError: Unexpected ICU placeholder outside of i18n context');\n          }\n          const msg = i18nMessagesByContext.get(currentIcu.context);\n          msg.postprocessingParams.set(op.name, literal(formatIcuPlaceholder(op)));\n          OpList.remove(op);\n          break;\n      }\n    }\n  }\n}\n/**\n * Create an i18n message op from an i18n context op.\n */\nfunction createI18nMessage(job, context, messagePlaceholder) {\n  let formattedParams = formatParams(context.params);\n  const formattedPostprocessingParams = formatParams(context.postprocessingParams);\n  let needsPostprocessing = [...context.params.values()].some(v => v.length > 1);\n  return createI18nMessageOp(job.allocateXrefId(), context.xref, context.i18nBlock, context.message, messagePlaceholder ?? null, formattedParams, formattedPostprocessingParams, needsPostprocessing);\n}\n/**\n * Formats an ICU placeholder into a single string with expression placeholders.\n */\nfunction formatIcuPlaceholder(op) {\n  if (op.strings.length !== op.expressionPlaceholders.length + 1) {\n    throw Error(`AssertionError: Invalid ICU placeholder with ${op.strings.length} strings and ${op.expressionPlaceholders.length} expressions`);\n  }\n  const values = op.expressionPlaceholders.map(formatValue);\n  return op.strings.flatMap((str, i) => [str, values[i] || '']).join('');\n}\n/**\n * Formats a map of `I18nParamValue[]` values into a map of `Expression` values.\n */\nfunction formatParams(params) {\n  const formattedParams = new Map();\n  for (const [placeholder, placeholderValues] of params) {\n    const serializedValues = formatParamValues(placeholderValues);\n    if (serializedValues !== null) {\n      formattedParams.set(placeholder, literal(serializedValues));\n    }\n  }\n  return formattedParams;\n}\n/**\n * Formats an `I18nParamValue[]` into a string (or null for empty array).\n */\nfunction formatParamValues(values) {\n  if (values.length === 0) {\n    return null;\n  }\n  const serializedValues = values.map(value => formatValue(value));\n  return serializedValues.length === 1 ? serializedValues[0] : `${LIST_START_MARKER}${serializedValues.join(LIST_DELIMITER)}${LIST_END_MARKER}`;\n}\n/**\n * Formats a single `I18nParamValue` into a string\n */\nfunction formatValue(value) {\n  // Element tags with a structural directive use a special form that concatenates the element and\n  // template values.\n  if (value.flags & I18nParamValueFlags.ElementTag && value.flags & I18nParamValueFlags.TemplateTag) {\n    if (typeof value.value !== 'object') {\n      throw Error('AssertionError: Expected i18n param value to have an element and template slot');\n    }\n    const elementValue = formatValue({\n      ...value,\n      value: value.value.element,\n      flags: value.flags & ~I18nParamValueFlags.TemplateTag\n    });\n    const templateValue = formatValue({\n      ...value,\n      value: value.value.template,\n      flags: value.flags & ~I18nParamValueFlags.ElementTag\n    });\n    // TODO(mmalerba): This is likely a bug in TemplateDefinitionBuilder, we should not need to\n    // record the template value twice. For now I'm re-implementing the behavior here to keep the\n    // output consistent with TemplateDefinitionBuilder.\n    if (value.flags & I18nParamValueFlags.OpenTag && value.flags & I18nParamValueFlags.CloseTag) {\n      return `${templateValue}${elementValue}${templateValue}`;\n    }\n    // To match the TemplateDefinitionBuilder output, flip the order depending on whether the\n    // values represent a closing or opening tag (or both).\n    // TODO(mmalerba): Figure out if this makes a difference in terms of either functionality,\n    // or the resulting message ID. If not, we can remove the special-casing in the future.\n    return value.flags & I18nParamValueFlags.CloseTag ? `${elementValue}${templateValue}` : `${templateValue}${elementValue}`;\n  }\n  // Self-closing tags use a special form that concatenates the start and close tag values.\n  if (value.flags & I18nParamValueFlags.OpenTag && value.flags & I18nParamValueFlags.CloseTag) {\n    return `${formatValue({\n      ...value,\n      flags: value.flags & ~I18nParamValueFlags.CloseTag\n    })}${formatValue({\n      ...value,\n      flags: value.flags & ~I18nParamValueFlags.OpenTag\n    })}`;\n  }\n  // If there are no special flags, just return the raw value.\n  if (value.flags === I18nParamValueFlags.None) {\n    return `${value.value}`;\n  }\n  // Encode the remaining flags as part of the value.\n  let tagMarker = '';\n  let closeMarker = '';\n  if (value.flags & I18nParamValueFlags.ElementTag) {\n    tagMarker = ELEMENT_MARKER;\n  } else if (value.flags & I18nParamValueFlags.TemplateTag) {\n    tagMarker = TEMPLATE_MARKER;\n  }\n  if (tagMarker !== '') {\n    closeMarker = value.flags & I18nParamValueFlags.CloseTag ? TAG_CLOSE_MARKER : '';\n  }\n  const context = value.subTemplateIndex === null ? '' : `${CONTEXT_MARKER}${value.subTemplateIndex}`;\n  return `${ESCAPE$1}${closeMarker}${tagMarker}${value.value}${context}${ESCAPE$1}`;\n}\n\n/**\n * Generate `ir.AdvanceOp`s in between `ir.UpdateOp`s that ensure the runtime's implicit slot\n * context will be advanced correctly.\n */\nfunction generateAdvance(job) {\n  for (const unit of job.units) {\n    // First build a map of all of the declarations in the view that have assigned slots.\n    const slotMap = new Map();\n    for (const op of unit.create) {\n      if (!hasConsumesSlotTrait(op)) {\n        continue;\n      } else if (op.handle.slot === null) {\n        throw new Error(`AssertionError: expected slots to have been allocated before generating advance() calls`);\n      }\n      slotMap.set(op.xref, op.handle.slot);\n    }\n    // Next, step through the update operations and generate `ir.AdvanceOp`s as required to ensure\n    // the runtime's implicit slot counter will be set to the correct slot before executing each\n    // update operation which depends on it.\n    //\n    // To do that, we track what the runtime's slot counter will be through the update operations.\n    let slotContext = 0;\n    for (const op of unit.update) {\n      let consumer = null;\n      if (hasDependsOnSlotContextTrait(op)) {\n        consumer = op;\n      } else {\n        visitExpressionsInOp(op, expr => {\n          if (consumer === null && hasDependsOnSlotContextTrait(expr)) {\n            consumer = expr;\n          }\n        });\n      }\n      if (consumer === null) {\n        continue;\n      }\n      if (!slotMap.has(consumer.target)) {\n        // We expect ops that _do_ depend on the slot counter to point at declarations that exist in\n        // the `slotMap`.\n        throw new Error(`AssertionError: reference to unknown slot for target ${consumer.target}`);\n      }\n      const slot = slotMap.get(consumer.target);\n      // Does the slot counter need to be adjusted?\n      if (slotContext !== slot) {\n        // If so, generate an `ir.AdvanceOp` to advance the counter.\n        const delta = slot - slotContext;\n        if (delta < 0) {\n          throw new Error(`AssertionError: slot counter should never need to move backwards`);\n        }\n        OpList.insertBefore(createAdvanceOp(delta, consumer.sourceSpan), op);\n        slotContext = slot;\n      }\n    }\n  }\n}\n\n/**\n * Locate projection slots, populate the each component's `ngContentSelectors` literal field,\n * populate `project` arguments, and generate the required `projectionDef` instruction for the job's\n * root view.\n */\nfunction generateProjectionDefs(job) {\n  // TODO: Why does TemplateDefinitionBuilder force a shared constant?\n  const share = job.compatibility === CompatibilityMode.TemplateDefinitionBuilder;\n  // Collect all selectors from this component, and its nested views. Also, assign each projection a\n  // unique ascending projection slot index.\n  const selectors = [];\n  let projectionSlotIndex = 0;\n  for (const unit of job.units) {\n    for (const op of unit.create) {\n      if (op.kind === OpKind.Projection) {\n        selectors.push(op.selector);\n        op.projectionSlotIndex = projectionSlotIndex++;\n      }\n    }\n  }\n  if (selectors.length > 0) {\n    // Create the projectionDef array. If we only found a single wildcard selector, then we use the\n    // default behavior with no arguments instead.\n    let defExpr = null;\n    if (selectors.length > 1 || selectors[0] !== '*') {\n      const def = selectors.map(s => s === '*' ? s : parseSelectorToR3Selector(s));\n      defExpr = job.pool.getConstLiteral(literalOrArrayLiteral(def), share);\n    }\n    // Create the ngContentSelectors constant.\n    job.contentSelectors = job.pool.getConstLiteral(literalOrArrayLiteral(selectors), share);\n    // The projection def instruction goes at the beginning of the root view, before any\n    // `projection` instructions.\n    job.root.create.prepend([createProjectionDefOp(defExpr)]);\n  }\n}\n\n/**\n * Generate a preamble sequence for each view creation block and listener function which declares\n * any variables that be referenced in other operations in the block.\n *\n * Variables generated include:\n *   * a saved view context to be used to restore the current view in event listeners.\n *   * the context of the restored view within event listener handlers.\n *   * context variables from the current view as well as all parent views (including the root\n *     context if needed).\n *   * local references from elements within the current view and any lexical parents.\n *\n * Variables are generated here unconditionally, and may optimized away in future operations if it\n * turns out their values (and any side effects) are unused.\n */\nfunction generateVariables(job) {\n  recursivelyProcessView(job.root, /* there is no parent scope for the root view */null);\n}\n/**\n * Process the given `ViewCompilation` and generate preambles for it and any listeners that it\n * declares.\n *\n * @param `parentScope` a scope extracted from the parent view which captures any variables which\n *     should be inherited by this view. `null` if the current view is the root view.\n */\nfunction recursivelyProcessView(view, parentScope) {\n  // Extract a `Scope` from this view.\n  const scope = getScopeForView(view, parentScope);\n  for (const op of view.create) {\n    switch (op.kind) {\n      case OpKind.Template:\n        // Descend into child embedded views.\n        recursivelyProcessView(view.job.views.get(op.xref), scope);\n        break;\n      case OpKind.Projection:\n        if (op.fallbackView !== null) {\n          recursivelyProcessView(view.job.views.get(op.fallbackView), scope);\n        }\n        break;\n      case OpKind.RepeaterCreate:\n        // Descend into child embedded views.\n        recursivelyProcessView(view.job.views.get(op.xref), scope);\n        if (op.emptyView) {\n          recursivelyProcessView(view.job.views.get(op.emptyView), scope);\n        }\n        break;\n      case OpKind.Listener:\n      case OpKind.TwoWayListener:\n        // Prepend variables to listener handler functions.\n        op.handlerOps.prepend(generateVariablesInScopeForView(view, scope, true));\n        break;\n    }\n  }\n  view.update.prepend(generateVariablesInScopeForView(view, scope, false));\n}\n/**\n * Process a view and generate a `Scope` representing the variables available for reference within\n * that view.\n */\nfunction getScopeForView(view, parent) {\n  const scope = {\n    view: view.xref,\n    viewContextVariable: {\n      kind: SemanticVariableKind.Context,\n      name: null,\n      view: view.xref\n    },\n    contextVariables: new Map(),\n    aliases: view.aliases,\n    references: [],\n    letDeclarations: [],\n    parent\n  };\n  for (const identifier of view.contextVariables.keys()) {\n    scope.contextVariables.set(identifier, {\n      kind: SemanticVariableKind.Identifier,\n      name: null,\n      identifier,\n      local: false\n    });\n  }\n  for (const op of view.create) {\n    switch (op.kind) {\n      case OpKind.ElementStart:\n      case OpKind.Template:\n        if (!Array.isArray(op.localRefs)) {\n          throw new Error(`AssertionError: expected localRefs to be an array`);\n        }\n        // Record available local references from this element.\n        for (let offset = 0; offset < op.localRefs.length; offset++) {\n          scope.references.push({\n            name: op.localRefs[offset].name,\n            targetId: op.xref,\n            targetSlot: op.handle,\n            offset,\n            variable: {\n              kind: SemanticVariableKind.Identifier,\n              name: null,\n              identifier: op.localRefs[offset].name,\n              local: false\n            }\n          });\n        }\n        break;\n      case OpKind.DeclareLet:\n        scope.letDeclarations.push({\n          targetId: op.xref,\n          targetSlot: op.handle,\n          variable: {\n            kind: SemanticVariableKind.Identifier,\n            name: null,\n            identifier: op.declaredName,\n            local: false\n          }\n        });\n        break;\n    }\n  }\n  return scope;\n}\n/**\n * Generate declarations for all variables that are in scope for a given view.\n *\n * This is a recursive process, as views inherit variables available from their parent view, which\n * itself may have inherited variables, etc.\n */\nfunction generateVariablesInScopeForView(view, scope, isListener) {\n  const newOps = [];\n  if (scope.view !== view.xref) {\n    // Before generating variables for a parent view, we need to switch to the context of the parent\n    // view with a `nextContext` expression. This context switching operation itself declares a\n    // variable, because the context of the view may be referenced directly.\n    newOps.push(createVariableOp(view.job.allocateXrefId(), scope.viewContextVariable, new NextContextExpr(), VariableFlags.None));\n  }\n  // Add variables for all context variables available in this scope's view.\n  const scopeView = view.job.views.get(scope.view);\n  for (const [name, value] of scopeView.contextVariables) {\n    const context = new ContextExpr(scope.view);\n    // We either read the context, or, if the variable is CTX_REF, use the context directly.\n    const variable = value === CTX_REF ? context : new ReadPropExpr(context, value);\n    // Add the variable declaration.\n    newOps.push(createVariableOp(view.job.allocateXrefId(), scope.contextVariables.get(name), variable, VariableFlags.None));\n  }\n  for (const alias of scopeView.aliases) {\n    newOps.push(createVariableOp(view.job.allocateXrefId(), alias, alias.expression.clone(), VariableFlags.AlwaysInline));\n  }\n  // Add variables for all local references declared for elements in this scope.\n  for (const ref of scope.references) {\n    newOps.push(createVariableOp(view.job.allocateXrefId(), ref.variable, new ReferenceExpr(ref.targetId, ref.targetSlot, ref.offset), VariableFlags.None));\n  }\n  if (scope.view !== view.xref || isListener) {\n    for (const decl of scope.letDeclarations) {\n      newOps.push(createVariableOp(view.job.allocateXrefId(), decl.variable, new ContextLetReferenceExpr(decl.targetId, decl.targetSlot), VariableFlags.None));\n    }\n  }\n  if (scope.parent !== null) {\n    // Recursively add variables from the parent scope.\n    newOps.push(...generateVariablesInScopeForView(view, scope.parent, false));\n  }\n  return newOps;\n}\n\n/**\n * `ir.ConstCollectedExpr` may be present in any IR expression. This means that expression needs to\n * be lifted into the component const array, and replaced with a reference to the const array at its\n *\n * usage site. This phase walks the IR and performs this transformation.\n */\nfunction collectConstExpressions(job) {\n  for (const unit of job.units) {\n    for (const op of unit.ops()) {\n      transformExpressionsInOp(op, expr => {\n        if (!(expr instanceof ConstCollectedExpr)) {\n          return expr;\n        }\n        return literal(job.addConst(expr.expr));\n      }, VisitorContextFlag.None);\n    }\n  }\n}\nconst STYLE_DOT = 'style.';\nconst CLASS_DOT = 'class.';\nconst STYLE_BANG = 'style!';\nconst CLASS_BANG = 'class!';\nconst BANG_IMPORTANT = '!important';\n/**\n * Host bindings are compiled using a different parser entrypoint, and are parsed quite differently\n * as a result. Therefore, we need to do some extra parsing for host style properties, as compared\n * to non-host style properties.\n * TODO: Unify host bindings and non-host bindings in the parser.\n */\nfunction parseHostStyleProperties(job) {\n  for (const op of job.root.update) {\n    if (!(op.kind === OpKind.Binding && op.bindingKind === BindingKind.Property)) {\n      continue;\n    }\n    if (op.name.endsWith(BANG_IMPORTANT)) {\n      // Delete any `!important` suffixes from the binding name.\n      op.name = op.name.substring(0, op.name.length - BANG_IMPORTANT.length);\n    }\n    if (op.name.startsWith(STYLE_DOT)) {\n      op.bindingKind = BindingKind.StyleProperty;\n      op.name = op.name.substring(STYLE_DOT.length);\n      if (!isCssCustomProperty(op.name)) {\n        op.name = hyphenate$1(op.name);\n      }\n      const {\n        property,\n        suffix\n      } = parseProperty(op.name);\n      op.name = property;\n      op.unit = suffix;\n    } else if (op.name.startsWith(STYLE_BANG)) {\n      op.bindingKind = BindingKind.StyleProperty;\n      op.name = 'style';\n    } else if (op.name.startsWith(CLASS_DOT)) {\n      op.bindingKind = BindingKind.ClassName;\n      op.name = parseProperty(op.name.substring(CLASS_DOT.length)).property;\n    } else if (op.name.startsWith(CLASS_BANG)) {\n      op.bindingKind = BindingKind.ClassName;\n      op.name = parseProperty(op.name.substring(CLASS_BANG.length)).property;\n    }\n  }\n}\n/**\n * Checks whether property name is a custom CSS property.\n * See: https://www.w3.org/TR/css-variables-1\n */\nfunction isCssCustomProperty(name) {\n  return name.startsWith('--');\n}\nfunction hyphenate$1(value) {\n  return value.replace(/[a-z][A-Z]/g, v => {\n    return v.charAt(0) + '-' + v.charAt(1);\n  }).toLowerCase();\n}\nfunction parseProperty(name) {\n  const overrideIndex = name.indexOf('!important');\n  if (overrideIndex !== -1) {\n    name = overrideIndex > 0 ? name.substring(0, overrideIndex) : '';\n  }\n  let suffix = null;\n  let property = name;\n  const unitIndex = name.lastIndexOf('.');\n  if (unitIndex > 0) {\n    suffix = name.slice(unitIndex + 1);\n    property = name.substring(0, unitIndex);\n  }\n  return {\n    property,\n    suffix\n  };\n}\nfunction mapEntry(key, value) {\n  return {\n    key,\n    value,\n    quoted: false\n  };\n}\nfunction mapLiteral(obj, quoted = false) {\n  return literalMap(Object.keys(obj).map(key => ({\n    key,\n    quoted,\n    value: obj[key]\n  })));\n}\nclass IcuSerializerVisitor {\n  visitText(text) {\n    return text.value;\n  }\n  visitContainer(container) {\n    return container.children.map(child => child.visit(this)).join('');\n  }\n  visitIcu(icu) {\n    const strCases = Object.keys(icu.cases).map(k => `${k} {${icu.cases[k].visit(this)}}`);\n    const result = `{${icu.expressionPlaceholder}, ${icu.type}, ${strCases.join(' ')}}`;\n    return result;\n  }\n  visitTagPlaceholder(ph) {\n    return ph.isVoid ? this.formatPh(ph.startName) : `${this.formatPh(ph.startName)}${ph.children.map(child => child.visit(this)).join('')}${this.formatPh(ph.closeName)}`;\n  }\n  visitPlaceholder(ph) {\n    return this.formatPh(ph.name);\n  }\n  visitBlockPlaceholder(ph) {\n    return `${this.formatPh(ph.startName)}${ph.children.map(child => child.visit(this)).join('')}${this.formatPh(ph.closeName)}`;\n  }\n  visitIcuPlaceholder(ph, context) {\n    return this.formatPh(ph.name);\n  }\n  formatPh(value) {\n    return `{${formatI18nPlaceholderName(value, /* useCamelCase */false)}}`;\n  }\n}\nconst serializer = new IcuSerializerVisitor();\nfunction serializeIcuNode(icu) {\n  return icu.visit(serializer);\n}\nvar TokenType;\n(function (TokenType) {\n  TokenType[TokenType[\"Character\"] = 0] = \"Character\";\n  TokenType[TokenType[\"Identifier\"] = 1] = \"Identifier\";\n  TokenType[TokenType[\"PrivateIdentifier\"] = 2] = \"PrivateIdentifier\";\n  TokenType[TokenType[\"Keyword\"] = 3] = \"Keyword\";\n  TokenType[TokenType[\"String\"] = 4] = \"String\";\n  TokenType[TokenType[\"Operator\"] = 5] = \"Operator\";\n  TokenType[TokenType[\"Number\"] = 6] = \"Number\";\n  TokenType[TokenType[\"Error\"] = 7] = \"Error\";\n})(TokenType || (TokenType = {}));\nconst KEYWORDS = ['var', 'let', 'as', 'null', 'undefined', 'true', 'false', 'if', 'else', 'this'];\nclass Lexer {\n  tokenize(text) {\n    const scanner = new _Scanner(text);\n    const tokens = [];\n    let token = scanner.scanToken();\n    while (token != null) {\n      tokens.push(token);\n      token = scanner.scanToken();\n    }\n    return tokens;\n  }\n}\nclass Token {\n  constructor(index, end, type, numValue, strValue) {\n    this.index = index;\n    this.end = end;\n    this.type = type;\n    this.numValue = numValue;\n    this.strValue = strValue;\n  }\n  isCharacter(code) {\n    return this.type == TokenType.Character && this.numValue == code;\n  }\n  isNumber() {\n    return this.type == TokenType.Number;\n  }\n  isString() {\n    return this.type == TokenType.String;\n  }\n  isOperator(operator) {\n    return this.type == TokenType.Operator && this.strValue == operator;\n  }\n  isIdentifier() {\n    return this.type == TokenType.Identifier;\n  }\n  isPrivateIdentifier() {\n    return this.type == TokenType.PrivateIdentifier;\n  }\n  isKeyword() {\n    return this.type == TokenType.Keyword;\n  }\n  isKeywordLet() {\n    return this.type == TokenType.Keyword && this.strValue == 'let';\n  }\n  isKeywordAs() {\n    return this.type == TokenType.Keyword && this.strValue == 'as';\n  }\n  isKeywordNull() {\n    return this.type == TokenType.Keyword && this.strValue == 'null';\n  }\n  isKeywordUndefined() {\n    return this.type == TokenType.Keyword && this.strValue == 'undefined';\n  }\n  isKeywordTrue() {\n    return this.type == TokenType.Keyword && this.strValue == 'true';\n  }\n  isKeywordFalse() {\n    return this.type == TokenType.Keyword && this.strValue == 'false';\n  }\n  isKeywordThis() {\n    return this.type == TokenType.Keyword && this.strValue == 'this';\n  }\n  isError() {\n    return this.type == TokenType.Error;\n  }\n  toNumber() {\n    return this.type == TokenType.Number ? this.numValue : -1;\n  }\n  toString() {\n    switch (this.type) {\n      case TokenType.Character:\n      case TokenType.Identifier:\n      case TokenType.Keyword:\n      case TokenType.Operator:\n      case TokenType.PrivateIdentifier:\n      case TokenType.String:\n      case TokenType.Error:\n        return this.strValue;\n      case TokenType.Number:\n        return this.numValue.toString();\n      default:\n        return null;\n    }\n  }\n}\nfunction newCharacterToken(index, end, code) {\n  return new Token(index, end, TokenType.Character, code, String.fromCharCode(code));\n}\nfunction newIdentifierToken(index, end, text) {\n  return new Token(index, end, TokenType.Identifier, 0, text);\n}\nfunction newPrivateIdentifierToken(index, end, text) {\n  return new Token(index, end, TokenType.PrivateIdentifier, 0, text);\n}\nfunction newKeywordToken(index, end, text) {\n  return new Token(index, end, TokenType.Keyword, 0, text);\n}\nfunction newOperatorToken(index, end, text) {\n  return new Token(index, end, TokenType.Operator, 0, text);\n}\nfunction newStringToken(index, end, text) {\n  return new Token(index, end, TokenType.String, 0, text);\n}\nfunction newNumberToken(index, end, n) {\n  return new Token(index, end, TokenType.Number, n, '');\n}\nfunction newErrorToken(index, end, message) {\n  return new Token(index, end, TokenType.Error, 0, message);\n}\nconst EOF = new Token(-1, -1, TokenType.Character, 0, '');\nclass _Scanner {\n  constructor(input) {\n    this.input = input;\n    this.peek = 0;\n    this.index = -1;\n    this.length = input.length;\n    this.advance();\n  }\n  advance() {\n    this.peek = ++this.index >= this.length ? $EOF : this.input.charCodeAt(this.index);\n  }\n  scanToken() {\n    const input = this.input,\n      length = this.length;\n    let peek = this.peek,\n      index = this.index;\n    // Skip whitespace.\n    while (peek <= $SPACE) {\n      if (++index >= length) {\n        peek = $EOF;\n        break;\n      } else {\n        peek = input.charCodeAt(index);\n      }\n    }\n    this.peek = peek;\n    this.index = index;\n    if (index >= length) {\n      return null;\n    }\n    // Handle identifiers and numbers.\n    if (isIdentifierStart(peek)) return this.scanIdentifier();\n    if (isDigit(peek)) return this.scanNumber(index);\n    const start = index;\n    switch (peek) {\n      case $PERIOD:\n        this.advance();\n        return isDigit(this.peek) ? this.scanNumber(start) : newCharacterToken(start, this.index, $PERIOD);\n      case $LPAREN:\n      case $RPAREN:\n      case $LBRACE:\n      case $RBRACE:\n      case $LBRACKET:\n      case $RBRACKET:\n      case $COMMA:\n      case $COLON:\n      case $SEMICOLON:\n        return this.scanCharacter(start, peek);\n      case $SQ:\n      case $DQ:\n        return this.scanString();\n      case $HASH:\n        return this.scanPrivateIdentifier();\n      case $PLUS:\n      case $MINUS:\n      case $STAR:\n      case $SLASH:\n      case $PERCENT:\n      case $CARET:\n        return this.scanOperator(start, String.fromCharCode(peek));\n      case $QUESTION:\n        return this.scanQuestion(start);\n      case $LT:\n      case $GT:\n        return this.scanComplexOperator(start, String.fromCharCode(peek), $EQ, '=');\n      case $BANG:\n      case $EQ:\n        return this.scanComplexOperator(start, String.fromCharCode(peek), $EQ, '=', $EQ, '=');\n      case $AMPERSAND:\n        return this.scanComplexOperator(start, '&', $AMPERSAND, '&');\n      case $BAR:\n        return this.scanComplexOperator(start, '|', $BAR, '|');\n      case $NBSP:\n        while (isWhitespace(this.peek)) this.advance();\n        return this.scanToken();\n    }\n    this.advance();\n    return this.error(`Unexpected character [${String.fromCharCode(peek)}]`, 0);\n  }\n  scanCharacter(start, code) {\n    this.advance();\n    return newCharacterToken(start, this.index, code);\n  }\n  scanOperator(start, str) {\n    this.advance();\n    return newOperatorToken(start, this.index, str);\n  }\n  /**\n   * Tokenize a 2/3 char long operator\n   *\n   * @param start start index in the expression\n   * @param one first symbol (always part of the operator)\n   * @param twoCode code point for the second symbol\n   * @param two second symbol (part of the operator when the second code point matches)\n   * @param threeCode code point for the third symbol\n   * @param three third symbol (part of the operator when provided and matches source expression)\n   */\n  scanComplexOperator(start, one, twoCode, two, threeCode, three) {\n    this.advance();\n    let str = one;\n    if (this.peek == twoCode) {\n      this.advance();\n      str += two;\n    }\n    if (threeCode != null && this.peek == threeCode) {\n      this.advance();\n      str += three;\n    }\n    return newOperatorToken(start, this.index, str);\n  }\n  scanIdentifier() {\n    const start = this.index;\n    this.advance();\n    while (isIdentifierPart(this.peek)) this.advance();\n    const str = this.input.substring(start, this.index);\n    return KEYWORDS.indexOf(str) > -1 ? newKeywordToken(start, this.index, str) : newIdentifierToken(start, this.index, str);\n  }\n  /** Scans an ECMAScript private identifier. */\n  scanPrivateIdentifier() {\n    const start = this.index;\n    this.advance();\n    if (!isIdentifierStart(this.peek)) {\n      return this.error('Invalid character [#]', -1);\n    }\n    while (isIdentifierPart(this.peek)) this.advance();\n    const identifierName = this.input.substring(start, this.index);\n    return newPrivateIdentifierToken(start, this.index, identifierName);\n  }\n  scanNumber(start) {\n    let simple = this.index === start;\n    let hasSeparators = false;\n    this.advance(); // Skip initial digit.\n    while (true) {\n      if (isDigit(this.peek)) {\n        // Do nothing.\n      } else if (this.peek === $_) {\n        // Separators are only valid when they're surrounded by digits. E.g. `1_0_1` is\n        // valid while `_101` and `101_` are not. The separator can't be next to the decimal\n        // point or another separator either. Note that it's unlikely that we'll hit a case where\n        // the underscore is at the start, because that's a valid identifier and it will be picked\n        // up earlier in the parsing. We validate for it anyway just in case.\n        if (!isDigit(this.input.charCodeAt(this.index - 1)) || !isDigit(this.input.charCodeAt(this.index + 1))) {\n          return this.error('Invalid numeric separator', 0);\n        }\n        hasSeparators = true;\n      } else if (this.peek === $PERIOD) {\n        simple = false;\n      } else if (isExponentStart(this.peek)) {\n        this.advance();\n        if (isExponentSign(this.peek)) this.advance();\n        if (!isDigit(this.peek)) return this.error('Invalid exponent', -1);\n        simple = false;\n      } else {\n        break;\n      }\n      this.advance();\n    }\n    let str = this.input.substring(start, this.index);\n    if (hasSeparators) {\n      str = str.replace(/_/g, '');\n    }\n    const value = simple ? parseIntAutoRadix(str) : parseFloat(str);\n    return newNumberToken(start, this.index, value);\n  }\n  scanString() {\n    const start = this.index;\n    const quote = this.peek;\n    this.advance(); // Skip initial quote.\n    let buffer = '';\n    let marker = this.index;\n    const input = this.input;\n    while (this.peek != quote) {\n      if (this.peek == $BACKSLASH) {\n        buffer += input.substring(marker, this.index);\n        let unescapedCode;\n        this.advance(); // mutates this.peek\n        // @ts-expect-error see microsoft/TypeScript#9998\n        if (this.peek == $u) {\n          // 4 character hex code for unicode character.\n          const hex = input.substring(this.index + 1, this.index + 5);\n          if (/^[0-9a-f]+$/i.test(hex)) {\n            unescapedCode = parseInt(hex, 16);\n          } else {\n            return this.error(`Invalid unicode escape [\\\\u${hex}]`, 0);\n          }\n          for (let i = 0; i < 5; i++) {\n            this.advance();\n          }\n        } else {\n          unescapedCode = unescape(this.peek);\n          this.advance();\n        }\n        buffer += String.fromCharCode(unescapedCode);\n        marker = this.index;\n      } else if (this.peek == $EOF) {\n        return this.error('Unterminated quote', 0);\n      } else {\n        this.advance();\n      }\n    }\n    const last = input.substring(marker, this.index);\n    this.advance(); // Skip terminating quote.\n    return newStringToken(start, this.index, buffer + last);\n  }\n  scanQuestion(start) {\n    this.advance();\n    let str = '?';\n    // Either `a ?? b` or 'a?.b'.\n    if (this.peek === $QUESTION || this.peek === $PERIOD) {\n      str += this.peek === $PERIOD ? '.' : '?';\n      this.advance();\n    }\n    return newOperatorToken(start, this.index, str);\n  }\n  error(message, offset) {\n    const position = this.index + offset;\n    return newErrorToken(position, this.index, `Lexer Error: ${message} at column ${position} in expression [${this.input}]`);\n  }\n}\nfunction isIdentifierStart(code) {\n  return $a <= code && code <= $z || $A <= code && code <= $Z || code == $_ || code == $$;\n}\nfunction isIdentifier(input) {\n  if (input.length == 0) return false;\n  const scanner = new _Scanner(input);\n  if (!isIdentifierStart(scanner.peek)) return false;\n  scanner.advance();\n  while (scanner.peek !== $EOF) {\n    if (!isIdentifierPart(scanner.peek)) return false;\n    scanner.advance();\n  }\n  return true;\n}\nfunction isIdentifierPart(code) {\n  return isAsciiLetter(code) || isDigit(code) || code == $_ || code == $$;\n}\nfunction isExponentStart(code) {\n  return code == $e || code == $E;\n}\nfunction isExponentSign(code) {\n  return code == $MINUS || code == $PLUS;\n}\nfunction unescape(code) {\n  switch (code) {\n    case $n:\n      return $LF;\n    case $f:\n      return $FF;\n    case $r:\n      return $CR;\n    case $t:\n      return $TAB;\n    case $v:\n      return $VTAB;\n    default:\n      return code;\n  }\n}\nfunction parseIntAutoRadix(text) {\n  const result = parseInt(text);\n  if (isNaN(result)) {\n    throw new Error('Invalid integer literal when parsing ' + text);\n  }\n  return result;\n}\nclass SplitInterpolation {\n  constructor(strings, expressions, offsets) {\n    this.strings = strings;\n    this.expressions = expressions;\n    this.offsets = offsets;\n  }\n}\nclass TemplateBindingParseResult {\n  constructor(templateBindings, warnings, errors) {\n    this.templateBindings = templateBindings;\n    this.warnings = warnings;\n    this.errors = errors;\n  }\n}\nclass Parser$1 {\n  constructor(_lexer) {\n    this._lexer = _lexer;\n    this.errors = [];\n  }\n  parseAction(input, location, absoluteOffset, interpolationConfig = DEFAULT_INTERPOLATION_CONFIG) {\n    this._checkNoInterpolation(input, location, interpolationConfig);\n    const sourceToLex = this._stripComments(input);\n    const tokens = this._lexer.tokenize(sourceToLex);\n    const ast = new _ParseAST(input, location, absoluteOffset, tokens, 1 /* ParseFlags.Action */, this.errors, 0).parseChain();\n    return new ASTWithSource(ast, input, location, absoluteOffset, this.errors);\n  }\n  parseBinding(input, location, absoluteOffset, interpolationConfig = DEFAULT_INTERPOLATION_CONFIG) {\n    const ast = this._parseBindingAst(input, location, absoluteOffset, interpolationConfig);\n    return new ASTWithSource(ast, input, location, absoluteOffset, this.errors);\n  }\n  checkSimpleExpression(ast) {\n    const checker = new SimpleExpressionChecker();\n    ast.visit(checker);\n    return checker.errors;\n  }\n  // Host bindings parsed here\n  parseSimpleBinding(input, location, absoluteOffset, interpolationConfig = DEFAULT_INTERPOLATION_CONFIG) {\n    const ast = this._parseBindingAst(input, location, absoluteOffset, interpolationConfig);\n    const errors = this.checkSimpleExpression(ast);\n    if (errors.length > 0) {\n      this._reportError(`Host binding expression cannot contain ${errors.join(' ')}`, input, location);\n    }\n    return new ASTWithSource(ast, input, location, absoluteOffset, this.errors);\n  }\n  _reportError(message, input, errLocation, ctxLocation) {\n    this.errors.push(new ParserError(message, input, errLocation, ctxLocation));\n  }\n  _parseBindingAst(input, location, absoluteOffset, interpolationConfig) {\n    this._checkNoInterpolation(input, location, interpolationConfig);\n    const sourceToLex = this._stripComments(input);\n    const tokens = this._lexer.tokenize(sourceToLex);\n    return new _ParseAST(input, location, absoluteOffset, tokens, 0 /* ParseFlags.None */, this.errors, 0).parseChain();\n  }\n  /**\n   * Parse microsyntax template expression and return a list of bindings or\n   * parsing errors in case the given expression is invalid.\n   *\n   * For example,\n   * ```\n   *   <div *ngFor=\"let item of items\">\n   *         ^      ^ absoluteValueOffset for `templateValue`\n   *         absoluteKeyOffset for `templateKey`\n   * ```\n   * contains three bindings:\n   * 1. ngFor -> null\n   * 2. item -> NgForOfContext.$implicit\n   * 3. ngForOf -> items\n   *\n   * This is apparent from the de-sugared template:\n   * ```\n   *   <ng-template ngFor let-item [ngForOf]=\"items\">\n   * ```\n   *\n   * @param templateKey name of directive, without the * prefix. For example: ngIf, ngFor\n   * @param templateValue RHS of the microsyntax attribute\n   * @param templateUrl template filename if it's external, component filename if it's inline\n   * @param absoluteKeyOffset start of the `templateKey`\n   * @param absoluteValueOffset start of the `templateValue`\n   */\n  parseTemplateBindings(templateKey, templateValue, templateUrl, absoluteKeyOffset, absoluteValueOffset) {\n    const tokens = this._lexer.tokenize(templateValue);\n    const parser = new _ParseAST(templateValue, templateUrl, absoluteValueOffset, tokens, 0 /* ParseFlags.None */, this.errors, 0 /* relative offset */);\n    return parser.parseTemplateBindings({\n      source: templateKey,\n      span: new AbsoluteSourceSpan(absoluteKeyOffset, absoluteKeyOffset + templateKey.length)\n    });\n  }\n  parseInterpolation(input, location, absoluteOffset, interpolatedTokens, interpolationConfig = DEFAULT_INTERPOLATION_CONFIG) {\n    const {\n      strings,\n      expressions,\n      offsets\n    } = this.splitInterpolation(input, location, interpolatedTokens, interpolationConfig);\n    if (expressions.length === 0) return null;\n    const expressionNodes = [];\n    for (let i = 0; i < expressions.length; ++i) {\n      const expressionText = expressions[i].text;\n      const sourceToLex = this._stripComments(expressionText);\n      const tokens = this._lexer.tokenize(sourceToLex);\n      const ast = new _ParseAST(input, location, absoluteOffset, tokens, 0 /* ParseFlags.None */, this.errors, offsets[i]).parseChain();\n      expressionNodes.push(ast);\n    }\n    return this.createInterpolationAst(strings.map(s => s.text), expressionNodes, input, location, absoluteOffset);\n  }\n  /**\n   * Similar to `parseInterpolation`, but treats the provided string as a single expression\n   * element that would normally appear within the interpolation prefix and suffix (`{{` and `}}`).\n   * This is used for parsing the switch expression in ICUs.\n   */\n  parseInterpolationExpression(expression, location, absoluteOffset) {\n    const sourceToLex = this._stripComments(expression);\n    const tokens = this._lexer.tokenize(sourceToLex);\n    const ast = new _ParseAST(expression, location, absoluteOffset, tokens, 0 /* ParseFlags.None */, this.errors, 0).parseChain();\n    const strings = ['', '']; // The prefix and suffix strings are both empty\n    return this.createInterpolationAst(strings, [ast], expression, location, absoluteOffset);\n  }\n  createInterpolationAst(strings, expressions, input, location, absoluteOffset) {\n    const span = new ParseSpan(0, input.length);\n    const interpolation = new Interpolation$1(span, span.toAbsolute(absoluteOffset), strings, expressions);\n    return new ASTWithSource(interpolation, input, location, absoluteOffset, this.errors);\n  }\n  /**\n   * Splits a string of text into \"raw\" text segments and expressions present in interpolations in\n   * the string.\n   * Returns `null` if there are no interpolations, otherwise a\n   * `SplitInterpolation` with splits that look like\n   *   <raw text> <expression> <raw text> ... <raw text> <expression> <raw text>\n   */\n  splitInterpolation(input, location, interpolatedTokens, interpolationConfig = DEFAULT_INTERPOLATION_CONFIG) {\n    const strings = [];\n    const expressions = [];\n    const offsets = [];\n    const inputToTemplateIndexMap = interpolatedTokens ? getIndexMapForOriginalTemplate(interpolatedTokens) : null;\n    let i = 0;\n    let atInterpolation = false;\n    let extendLastString = false;\n    let {\n      start: interpStart,\n      end: interpEnd\n    } = interpolationConfig;\n    while (i < input.length) {\n      if (!atInterpolation) {\n        // parse until starting {{\n        const start = i;\n        i = input.indexOf(interpStart, i);\n        if (i === -1) {\n          i = input.length;\n        }\n        const text = input.substring(start, i);\n        strings.push({\n          text,\n          start,\n          end: i\n        });\n        atInterpolation = true;\n      } else {\n        // parse from starting {{ to ending }} while ignoring content inside quotes.\n        const fullStart = i;\n        const exprStart = fullStart + interpStart.length;\n        const exprEnd = this._getInterpolationEndIndex(input, interpEnd, exprStart);\n        if (exprEnd === -1) {\n          // Could not find the end of the interpolation; do not parse an expression.\n          // Instead we should extend the content on the last raw string.\n          atInterpolation = false;\n          extendLastString = true;\n          break;\n        }\n        const fullEnd = exprEnd + interpEnd.length;\n        const text = input.substring(exprStart, exprEnd);\n        if (text.trim().length === 0) {\n          this._reportError('Blank expressions are not allowed in interpolated strings', input, `at column ${i} in`, location);\n        }\n        expressions.push({\n          text,\n          start: fullStart,\n          end: fullEnd\n        });\n        const startInOriginalTemplate = inputToTemplateIndexMap?.get(fullStart) ?? fullStart;\n        const offset = startInOriginalTemplate + interpStart.length;\n        offsets.push(offset);\n        i = fullEnd;\n        atInterpolation = false;\n      }\n    }\n    if (!atInterpolation) {\n      // If we are now at a text section, add the remaining content as a raw string.\n      if (extendLastString) {\n        const piece = strings[strings.length - 1];\n        piece.text += input.substring(i);\n        piece.end = input.length;\n      } else {\n        strings.push({\n          text: input.substring(i),\n          start: i,\n          end: input.length\n        });\n      }\n    }\n    return new SplitInterpolation(strings, expressions, offsets);\n  }\n  wrapLiteralPrimitive(input, location, absoluteOffset) {\n    const span = new ParseSpan(0, input == null ? 0 : input.length);\n    return new ASTWithSource(new LiteralPrimitive(span, span.toAbsolute(absoluteOffset), input), input, location, absoluteOffset, this.errors);\n  }\n  _stripComments(input) {\n    const i = this._commentStart(input);\n    return i != null ? input.substring(0, i) : input;\n  }\n  _commentStart(input) {\n    let outerQuote = null;\n    for (let i = 0; i < input.length - 1; i++) {\n      const char = input.charCodeAt(i);\n      const nextChar = input.charCodeAt(i + 1);\n      if (char === $SLASH && nextChar == $SLASH && outerQuote == null) return i;\n      if (outerQuote === char) {\n        outerQuote = null;\n      } else if (outerQuote == null && isQuote(char)) {\n        outerQuote = char;\n      }\n    }\n    return null;\n  }\n  _checkNoInterpolation(input, location, {\n    start,\n    end\n  }) {\n    let startIndex = -1;\n    let endIndex = -1;\n    for (const charIndex of this._forEachUnquotedChar(input, 0)) {\n      if (startIndex === -1) {\n        if (input.startsWith(start)) {\n          startIndex = charIndex;\n        }\n      } else {\n        endIndex = this._getInterpolationEndIndex(input, end, charIndex);\n        if (endIndex > -1) {\n          break;\n        }\n      }\n    }\n    if (startIndex > -1 && endIndex > -1) {\n      this._reportError(`Got interpolation (${start}${end}) where expression was expected`, input, `at column ${startIndex} in`, location);\n    }\n  }\n  /**\n   * Finds the index of the end of an interpolation expression\n   * while ignoring comments and quoted content.\n   */\n  _getInterpolationEndIndex(input, expressionEnd, start) {\n    for (const charIndex of this._forEachUnquotedChar(input, start)) {\n      if (input.startsWith(expressionEnd, charIndex)) {\n        return charIndex;\n      }\n      // Nothing else in the expression matters after we've\n      // hit a comment so look directly for the end token.\n      if (input.startsWith('//', charIndex)) {\n        return input.indexOf(expressionEnd, charIndex);\n      }\n    }\n    return -1;\n  }\n  /**\n   * Generator used to iterate over the character indexes of a string that are outside of quotes.\n   * @param input String to loop through.\n   * @param start Index within the string at which to start.\n   */\n  *_forEachUnquotedChar(input, start) {\n    let currentQuote = null;\n    let escapeCount = 0;\n    for (let i = start; i < input.length; i++) {\n      const char = input[i];\n      // Skip the characters inside quotes. Note that we only care about the outer-most\n      // quotes matching up and we need to account for escape characters.\n      if (isQuote(input.charCodeAt(i)) && (currentQuote === null || currentQuote === char) && escapeCount % 2 === 0) {\n        currentQuote = currentQuote === null ? char : null;\n      } else if (currentQuote === null) {\n        yield i;\n      }\n      escapeCount = char === '\\\\' ? escapeCount + 1 : 0;\n    }\n  }\n}\n/** Describes a stateful context an expression parser is in. */\nvar ParseContextFlags;\n(function (ParseContextFlags) {\n  ParseContextFlags[ParseContextFlags[\"None\"] = 0] = \"None\";\n  /**\n   * A Writable context is one in which a value may be written to an lvalue.\n   * For example, after we see a property access, we may expect a write to the\n   * property via the \"=\" operator.\n   *   prop\n   *        ^ possible \"=\" after\n   */\n  ParseContextFlags[ParseContextFlags[\"Writable\"] = 1] = \"Writable\";\n})(ParseContextFlags || (ParseContextFlags = {}));\nclass _ParseAST {\n  constructor(input, location, absoluteOffset, tokens, parseFlags, errors, offset) {\n    this.input = input;\n    this.location = location;\n    this.absoluteOffset = absoluteOffset;\n    this.tokens = tokens;\n    this.parseFlags = parseFlags;\n    this.errors = errors;\n    this.offset = offset;\n    this.rparensExpected = 0;\n    this.rbracketsExpected = 0;\n    this.rbracesExpected = 0;\n    this.context = ParseContextFlags.None;\n    // Cache of expression start and input indeces to the absolute source span they map to, used to\n    // prevent creating superfluous source spans in `sourceSpan`.\n    // A serial of the expression start and input index is used for mapping because both are stateful\n    // and may change for subsequent expressions visited by the parser.\n    this.sourceSpanCache = new Map();\n    this.index = 0;\n  }\n  peek(offset) {\n    const i = this.index + offset;\n    return i < this.tokens.length ? this.tokens[i] : EOF;\n  }\n  get next() {\n    return this.peek(0);\n  }\n  /** Whether all the parser input has been processed. */\n  get atEOF() {\n    return this.index >= this.tokens.length;\n  }\n  /**\n   * Index of the next token to be processed, or the end of the last token if all have been\n   * processed.\n   */\n  get inputIndex() {\n    return this.atEOF ? this.currentEndIndex : this.next.index + this.offset;\n  }\n  /**\n   * End index of the last processed token, or the start of the first token if none have been\n   * processed.\n   */\n  get currentEndIndex() {\n    if (this.index > 0) {\n      const curToken = this.peek(-1);\n      return curToken.end + this.offset;\n    }\n    // No tokens have been processed yet; return the next token's start or the length of the input\n    // if there is no token.\n    if (this.tokens.length === 0) {\n      return this.input.length + this.offset;\n    }\n    return this.next.index + this.offset;\n  }\n  /**\n   * Returns the absolute offset of the start of the current token.\n   */\n  get currentAbsoluteOffset() {\n    return this.absoluteOffset + this.inputIndex;\n  }\n  /**\n   * Retrieve a `ParseSpan` from `start` to the current position (or to `artificialEndIndex` if\n   * provided).\n   *\n   * @param start Position from which the `ParseSpan` will start.\n   * @param artificialEndIndex Optional ending index to be used if provided (and if greater than the\n   *     natural ending index)\n   */\n  span(start, artificialEndIndex) {\n    let endIndex = this.currentEndIndex;\n    if (artificialEndIndex !== undefined && artificialEndIndex > this.currentEndIndex) {\n      endIndex = artificialEndIndex;\n    }\n    // In some unusual parsing scenarios (like when certain tokens are missing and an `EmptyExpr` is\n    // being created), the current token may already be advanced beyond the `currentEndIndex`. This\n    // appears to be a deep-seated parser bug.\n    //\n    // As a workaround for now, swap the start and end indices to ensure a valid `ParseSpan`.\n    // TODO(alxhub): fix the bug upstream in the parser state, and remove this workaround.\n    if (start > endIndex) {\n      const tmp = endIndex;\n      endIndex = start;\n      start = tmp;\n    }\n    return new ParseSpan(start, endIndex);\n  }\n  sourceSpan(start, artificialEndIndex) {\n    const serial = `${start}@${this.inputIndex}:${artificialEndIndex}`;\n    if (!this.sourceSpanCache.has(serial)) {\n      this.sourceSpanCache.set(serial, this.span(start, artificialEndIndex).toAbsolute(this.absoluteOffset));\n    }\n    return this.sourceSpanCache.get(serial);\n  }\n  advance() {\n    this.index++;\n  }\n  /**\n   * Executes a callback in the provided context.\n   */\n  withContext(context, cb) {\n    this.context |= context;\n    const ret = cb();\n    this.context ^= context;\n    return ret;\n  }\n  consumeOptionalCharacter(code) {\n    if (this.next.isCharacter(code)) {\n      this.advance();\n      return true;\n    } else {\n      return false;\n    }\n  }\n  peekKeywordLet() {\n    return this.next.isKeywordLet();\n  }\n  peekKeywordAs() {\n    return this.next.isKeywordAs();\n  }\n  /**\n   * Consumes an expected character, otherwise emits an error about the missing expected character\n   * and skips over the token stream until reaching a recoverable point.\n   *\n   * See `this.error` and `this.skip` for more details.\n   */\n  expectCharacter(code) {\n    if (this.consumeOptionalCharacter(code)) return;\n    this.error(`Missing expected ${String.fromCharCode(code)}`);\n  }\n  consumeOptionalOperator(op) {\n    if (this.next.isOperator(op)) {\n      this.advance();\n      return true;\n    } else {\n      return false;\n    }\n  }\n  expectOperator(operator) {\n    if (this.consumeOptionalOperator(operator)) return;\n    this.error(`Missing expected operator ${operator}`);\n  }\n  prettyPrintToken(tok) {\n    return tok === EOF ? 'end of input' : `token ${tok}`;\n  }\n  expectIdentifierOrKeyword() {\n    const n = this.next;\n    if (!n.isIdentifier() && !n.isKeyword()) {\n      if (n.isPrivateIdentifier()) {\n        this._reportErrorForPrivateIdentifier(n, 'expected identifier or keyword');\n      } else {\n        this.error(`Unexpected ${this.prettyPrintToken(n)}, expected identifier or keyword`);\n      }\n      return null;\n    }\n    this.advance();\n    return n.toString();\n  }\n  expectIdentifierOrKeywordOrString() {\n    const n = this.next;\n    if (!n.isIdentifier() && !n.isKeyword() && !n.isString()) {\n      if (n.isPrivateIdentifier()) {\n        this._reportErrorForPrivateIdentifier(n, 'expected identifier, keyword or string');\n      } else {\n        this.error(`Unexpected ${this.prettyPrintToken(n)}, expected identifier, keyword, or string`);\n      }\n      return '';\n    }\n    this.advance();\n    return n.toString();\n  }\n  parseChain() {\n    const exprs = [];\n    const start = this.inputIndex;\n    while (this.index < this.tokens.length) {\n      const expr = this.parsePipe();\n      exprs.push(expr);\n      if (this.consumeOptionalCharacter($SEMICOLON)) {\n        if (!(this.parseFlags & 1 /* ParseFlags.Action */)) {\n          this.error('Binding expression cannot contain chained expression');\n        }\n        while (this.consumeOptionalCharacter($SEMICOLON)) {} // read all semicolons\n      } else if (this.index < this.tokens.length) {\n        const errorIndex = this.index;\n        this.error(`Unexpected token '${this.next}'`);\n        // The `error` call above will skip ahead to the next recovery point in an attempt to\n        // recover part of the expression, but that might be the token we started from which will\n        // lead to an infinite loop. If that's the case, break the loop assuming that we can't\n        // parse further.\n        if (this.index === errorIndex) {\n          break;\n        }\n      }\n    }\n    if (exprs.length === 0) {\n      // We have no expressions so create an empty expression that spans the entire input length\n      const artificialStart = this.offset;\n      const artificialEnd = this.offset + this.input.length;\n      return new EmptyExpr$1(this.span(artificialStart, artificialEnd), this.sourceSpan(artificialStart, artificialEnd));\n    }\n    if (exprs.length == 1) return exprs[0];\n    return new Chain(this.span(start), this.sourceSpan(start), exprs);\n  }\n  parsePipe() {\n    const start = this.inputIndex;\n    let result = this.parseExpression();\n    if (this.consumeOptionalOperator('|')) {\n      if (this.parseFlags & 1 /* ParseFlags.Action */) {\n        this.error(`Cannot have a pipe in an action expression`);\n      }\n      do {\n        const nameStart = this.inputIndex;\n        let nameId = this.expectIdentifierOrKeyword();\n        let nameSpan;\n        let fullSpanEnd = undefined;\n        if (nameId !== null) {\n          nameSpan = this.sourceSpan(nameStart);\n        } else {\n          // No valid identifier was found, so we'll assume an empty pipe name ('').\n          nameId = '';\n          // However, there may have been whitespace present between the pipe character and the next\n          // token in the sequence (or the end of input). We want to track this whitespace so that\n          // the `BindingPipe` we produce covers not just the pipe character, but any trailing\n          // whitespace beyond it. Another way of thinking about this is that the zero-length name\n          // is assumed to be at the end of any whitespace beyond the pipe character.\n          //\n          // Therefore, we push the end of the `ParseSpan` for this pipe all the way up to the\n          // beginning of the next token, or until the end of input if the next token is EOF.\n          fullSpanEnd = this.next.index !== -1 ? this.next.index : this.input.length + this.offset;\n          // The `nameSpan` for an empty pipe name is zero-length at the end of any whitespace\n          // beyond the pipe character.\n          nameSpan = new ParseSpan(fullSpanEnd, fullSpanEnd).toAbsolute(this.absoluteOffset);\n        }\n        const args = [];\n        while (this.consumeOptionalCharacter($COLON)) {\n          args.push(this.parseExpression());\n          // If there are additional expressions beyond the name, then the artificial end for the\n          // name is no longer relevant.\n        }\n        result = new BindingPipe(this.span(start), this.sourceSpan(start, fullSpanEnd), result, nameId, args, nameSpan);\n      } while (this.consumeOptionalOperator('|'));\n    }\n    return result;\n  }\n  parseExpression() {\n    return this.parseConditional();\n  }\n  parseConditional() {\n    const start = this.inputIndex;\n    const result = this.parseLogicalOr();\n    if (this.consumeOptionalOperator('?')) {\n      const yes = this.parsePipe();\n      let no;\n      if (!this.consumeOptionalCharacter($COLON)) {\n        const end = this.inputIndex;\n        const expression = this.input.substring(start, end);\n        this.error(`Conditional expression ${expression} requires all 3 expressions`);\n        no = new EmptyExpr$1(this.span(start), this.sourceSpan(start));\n      } else {\n        no = this.parsePipe();\n      }\n      return new Conditional(this.span(start), this.sourceSpan(start), result, yes, no);\n    } else {\n      return result;\n    }\n  }\n  parseLogicalOr() {\n    // '||'\n    const start = this.inputIndex;\n    let result = this.parseLogicalAnd();\n    while (this.consumeOptionalOperator('||')) {\n      const right = this.parseLogicalAnd();\n      result = new Binary(this.span(start), this.sourceSpan(start), '||', result, right);\n    }\n    return result;\n  }\n  parseLogicalAnd() {\n    // '&&'\n    const start = this.inputIndex;\n    let result = this.parseNullishCoalescing();\n    while (this.consumeOptionalOperator('&&')) {\n      const right = this.parseNullishCoalescing();\n      result = new Binary(this.span(start), this.sourceSpan(start), '&&', result, right);\n    }\n    return result;\n  }\n  parseNullishCoalescing() {\n    // '??'\n    const start = this.inputIndex;\n    let result = this.parseEquality();\n    while (this.consumeOptionalOperator('??')) {\n      const right = this.parseEquality();\n      result = new Binary(this.span(start), this.sourceSpan(start), '??', result, right);\n    }\n    return result;\n  }\n  parseEquality() {\n    // '==','!=','===','!=='\n    const start = this.inputIndex;\n    let result = this.parseRelational();\n    while (this.next.type == TokenType.Operator) {\n      const operator = this.next.strValue;\n      switch (operator) {\n        case '==':\n        case '===':\n        case '!=':\n        case '!==':\n          this.advance();\n          const right = this.parseRelational();\n          result = new Binary(this.span(start), this.sourceSpan(start), operator, result, right);\n          continue;\n      }\n      break;\n    }\n    return result;\n  }\n  parseRelational() {\n    // '<', '>', '<=', '>='\n    const start = this.inputIndex;\n    let result = this.parseAdditive();\n    while (this.next.type == TokenType.Operator) {\n      const operator = this.next.strValue;\n      switch (operator) {\n        case '<':\n        case '>':\n        case '<=':\n        case '>=':\n          this.advance();\n          const right = this.parseAdditive();\n          result = new Binary(this.span(start), this.sourceSpan(start), operator, result, right);\n          continue;\n      }\n      break;\n    }\n    return result;\n  }\n  parseAdditive() {\n    // '+', '-'\n    const start = this.inputIndex;\n    let result = this.parseMultiplicative();\n    while (this.next.type == TokenType.Operator) {\n      const operator = this.next.strValue;\n      switch (operator) {\n        case '+':\n        case '-':\n          this.advance();\n          let right = this.parseMultiplicative();\n          result = new Binary(this.span(start), this.sourceSpan(start), operator, result, right);\n          continue;\n      }\n      break;\n    }\n    return result;\n  }\n  parseMultiplicative() {\n    // '*', '%', '/'\n    const start = this.inputIndex;\n    let result = this.parsePrefix();\n    while (this.next.type == TokenType.Operator) {\n      const operator = this.next.strValue;\n      switch (operator) {\n        case '*':\n        case '%':\n        case '/':\n          this.advance();\n          let right = this.parsePrefix();\n          result = new Binary(this.span(start), this.sourceSpan(start), operator, result, right);\n          continue;\n      }\n      break;\n    }\n    return result;\n  }\n  parsePrefix() {\n    if (this.next.type == TokenType.Operator) {\n      const start = this.inputIndex;\n      const operator = this.next.strValue;\n      let result;\n      switch (operator) {\n        case '+':\n          this.advance();\n          result = this.parsePrefix();\n          return Unary.createPlus(this.span(start), this.sourceSpan(start), result);\n        case '-':\n          this.advance();\n          result = this.parsePrefix();\n          return Unary.createMinus(this.span(start), this.sourceSpan(start), result);\n        case '!':\n          this.advance();\n          result = this.parsePrefix();\n          return new PrefixNot(this.span(start), this.sourceSpan(start), result);\n      }\n    }\n    return this.parseCallChain();\n  }\n  parseCallChain() {\n    const start = this.inputIndex;\n    let result = this.parsePrimary();\n    while (true) {\n      if (this.consumeOptionalCharacter($PERIOD)) {\n        result = this.parseAccessMember(result, start, false);\n      } else if (this.consumeOptionalOperator('?.')) {\n        if (this.consumeOptionalCharacter($LPAREN)) {\n          result = this.parseCall(result, start, true);\n        } else {\n          result = this.consumeOptionalCharacter($LBRACKET) ? this.parseKeyedReadOrWrite(result, start, true) : this.parseAccessMember(result, start, true);\n        }\n      } else if (this.consumeOptionalCharacter($LBRACKET)) {\n        result = this.parseKeyedReadOrWrite(result, start, false);\n      } else if (this.consumeOptionalCharacter($LPAREN)) {\n        result = this.parseCall(result, start, false);\n      } else if (this.consumeOptionalOperator('!')) {\n        result = new NonNullAssert(this.span(start), this.sourceSpan(start), result);\n      } else {\n        return result;\n      }\n    }\n  }\n  parsePrimary() {\n    const start = this.inputIndex;\n    if (this.consumeOptionalCharacter($LPAREN)) {\n      this.rparensExpected++;\n      const result = this.parsePipe();\n      this.rparensExpected--;\n      this.expectCharacter($RPAREN);\n      return result;\n    } else if (this.next.isKeywordNull()) {\n      this.advance();\n      return new LiteralPrimitive(this.span(start), this.sourceSpan(start), null);\n    } else if (this.next.isKeywordUndefined()) {\n      this.advance();\n      return new LiteralPrimitive(this.span(start), this.sourceSpan(start), void 0);\n    } else if (this.next.isKeywordTrue()) {\n      this.advance();\n      return new LiteralPrimitive(this.span(start), this.sourceSpan(start), true);\n    } else if (this.next.isKeywordFalse()) {\n      this.advance();\n      return new LiteralPrimitive(this.span(start), this.sourceSpan(start), false);\n    } else if (this.next.isKeywordThis()) {\n      this.advance();\n      return new ThisReceiver(this.span(start), this.sourceSpan(start));\n    } else if (this.consumeOptionalCharacter($LBRACKET)) {\n      this.rbracketsExpected++;\n      const elements = this.parseExpressionList($RBRACKET);\n      this.rbracketsExpected--;\n      this.expectCharacter($RBRACKET);\n      return new LiteralArray(this.span(start), this.sourceSpan(start), elements);\n    } else if (this.next.isCharacter($LBRACE)) {\n      return this.parseLiteralMap();\n    } else if (this.next.isIdentifier()) {\n      return this.parseAccessMember(new ImplicitReceiver(this.span(start), this.sourceSpan(start)), start, false);\n    } else if (this.next.isNumber()) {\n      const value = this.next.toNumber();\n      this.advance();\n      return new LiteralPrimitive(this.span(start), this.sourceSpan(start), value);\n    } else if (this.next.isString()) {\n      const literalValue = this.next.toString();\n      this.advance();\n      return new LiteralPrimitive(this.span(start), this.sourceSpan(start), literalValue);\n    } else if (this.next.isPrivateIdentifier()) {\n      this._reportErrorForPrivateIdentifier(this.next, null);\n      return new EmptyExpr$1(this.span(start), this.sourceSpan(start));\n    } else if (this.index >= this.tokens.length) {\n      this.error(`Unexpected end of expression: ${this.input}`);\n      return new EmptyExpr$1(this.span(start), this.sourceSpan(start));\n    } else {\n      this.error(`Unexpected token ${this.next}`);\n      return new EmptyExpr$1(this.span(start), this.sourceSpan(start));\n    }\n  }\n  parseExpressionList(terminator) {\n    const result = [];\n    do {\n      if (!this.next.isCharacter(terminator)) {\n        result.push(this.parsePipe());\n      } else {\n        break;\n      }\n    } while (this.consumeOptionalCharacter($COMMA));\n    return result;\n  }\n  parseLiteralMap() {\n    const keys = [];\n    const values = [];\n    const start = this.inputIndex;\n    this.expectCharacter($LBRACE);\n    if (!this.consumeOptionalCharacter($RBRACE)) {\n      this.rbracesExpected++;\n      do {\n        const keyStart = this.inputIndex;\n        const quoted = this.next.isString();\n        const key = this.expectIdentifierOrKeywordOrString();\n        const literalMapKey = {\n          key,\n          quoted\n        };\n        keys.push(literalMapKey);\n        // Properties with quoted keys can't use the shorthand syntax.\n        if (quoted) {\n          this.expectCharacter($COLON);\n          values.push(this.parsePipe());\n        } else if (this.consumeOptionalCharacter($COLON)) {\n          values.push(this.parsePipe());\n        } else {\n          literalMapKey.isShorthandInitialized = true;\n          const span = this.span(keyStart);\n          const sourceSpan = this.sourceSpan(keyStart);\n          values.push(new PropertyRead(span, sourceSpan, sourceSpan, new ImplicitReceiver(span, sourceSpan), key));\n        }\n      } while (this.consumeOptionalCharacter($COMMA) && !this.next.isCharacter($RBRACE));\n      this.rbracesExpected--;\n      this.expectCharacter($RBRACE);\n    }\n    return new LiteralMap(this.span(start), this.sourceSpan(start), keys, values);\n  }\n  parseAccessMember(readReceiver, start, isSafe) {\n    const nameStart = this.inputIndex;\n    const id = this.withContext(ParseContextFlags.Writable, () => {\n      const id = this.expectIdentifierOrKeyword() ?? '';\n      if (id.length === 0) {\n        this.error(`Expected identifier for property access`, readReceiver.span.end);\n      }\n      return id;\n    });\n    const nameSpan = this.sourceSpan(nameStart);\n    let receiver;\n    if (isSafe) {\n      if (this.consumeOptionalOperator('=')) {\n        this.error(\"The '?.' operator cannot be used in the assignment\");\n        receiver = new EmptyExpr$1(this.span(start), this.sourceSpan(start));\n      } else {\n        receiver = new SafePropertyRead(this.span(start), this.sourceSpan(start), nameSpan, readReceiver, id);\n      }\n    } else {\n      if (this.consumeOptionalOperator('=')) {\n        if (!(this.parseFlags & 1 /* ParseFlags.Action */)) {\n          this.error('Bindings cannot contain assignments');\n          return new EmptyExpr$1(this.span(start), this.sourceSpan(start));\n        }\n        const value = this.parseConditional();\n        receiver = new PropertyWrite(this.span(start), this.sourceSpan(start), nameSpan, readReceiver, id, value);\n      } else {\n        receiver = new PropertyRead(this.span(start), this.sourceSpan(start), nameSpan, readReceiver, id);\n      }\n    }\n    return receiver;\n  }\n  parseCall(receiver, start, isSafe) {\n    const argumentStart = this.inputIndex;\n    this.rparensExpected++;\n    const args = this.parseCallArguments();\n    const argumentSpan = this.span(argumentStart, this.inputIndex).toAbsolute(this.absoluteOffset);\n    this.expectCharacter($RPAREN);\n    this.rparensExpected--;\n    const span = this.span(start);\n    const sourceSpan = this.sourceSpan(start);\n    return isSafe ? new SafeCall(span, sourceSpan, receiver, args, argumentSpan) : new Call(span, sourceSpan, receiver, args, argumentSpan);\n  }\n  parseCallArguments() {\n    if (this.next.isCharacter($RPAREN)) return [];\n    const positionals = [];\n    do {\n      positionals.push(this.parsePipe());\n    } while (this.consumeOptionalCharacter($COMMA));\n    return positionals;\n  }\n  /**\n   * Parses an identifier, a keyword, a string with an optional `-` in between,\n   * and returns the string along with its absolute source span.\n   */\n  expectTemplateBindingKey() {\n    let result = '';\n    let operatorFound = false;\n    const start = this.currentAbsoluteOffset;\n    do {\n      result += this.expectIdentifierOrKeywordOrString();\n      operatorFound = this.consumeOptionalOperator('-');\n      if (operatorFound) {\n        result += '-';\n      }\n    } while (operatorFound);\n    return {\n      source: result,\n      span: new AbsoluteSourceSpan(start, start + result.length)\n    };\n  }\n  /**\n   * Parse microsyntax template expression and return a list of bindings or\n   * parsing errors in case the given expression is invalid.\n   *\n   * For example,\n   * ```\n   *   <div *ngFor=\"let item of items; index as i; trackBy: func\">\n   * ```\n   * contains five bindings:\n   * 1. ngFor -> null\n   * 2. item -> NgForOfContext.$implicit\n   * 3. ngForOf -> items\n   * 4. i -> NgForOfContext.index\n   * 5. ngForTrackBy -> func\n   *\n   * For a full description of the microsyntax grammar, see\n   * https://gist.github.com/mhevery/d3530294cff2e4a1b3fe15ff75d08855\n   *\n   * @param templateKey name of the microsyntax directive, like ngIf, ngFor,\n   * without the *, along with its absolute span.\n   */\n  parseTemplateBindings(templateKey) {\n    const bindings = [];\n    // The first binding is for the template key itself\n    // In *ngFor=\"let item of items\", key = \"ngFor\", value = null\n    // In *ngIf=\"cond | pipe\", key = \"ngIf\", value = \"cond | pipe\"\n    bindings.push(...this.parseDirectiveKeywordBindings(templateKey));\n    while (this.index < this.tokens.length) {\n      // If it starts with 'let', then this must be variable declaration\n      const letBinding = this.parseLetBinding();\n      if (letBinding) {\n        bindings.push(letBinding);\n      } else {\n        // Two possible cases here, either `value \"as\" key` or\n        // \"directive-keyword expression\". We don't know which case, but both\n        // \"value\" and \"directive-keyword\" are template binding key, so consume\n        // the key first.\n        const key = this.expectTemplateBindingKey();\n        // Peek at the next token, if it is \"as\" then this must be variable\n        // declaration.\n        const binding = this.parseAsBinding(key);\n        if (binding) {\n          bindings.push(binding);\n        } else {\n          // Otherwise the key must be a directive keyword, like \"of\". Transform\n          // the key to actual key. Eg. of -> ngForOf, trackBy -> ngForTrackBy\n          key.source = templateKey.source + key.source.charAt(0).toUpperCase() + key.source.substring(1);\n          bindings.push(...this.parseDirectiveKeywordBindings(key));\n        }\n      }\n      this.consumeStatementTerminator();\n    }\n    return new TemplateBindingParseResult(bindings, [] /* warnings */, this.errors);\n  }\n  parseKeyedReadOrWrite(receiver, start, isSafe) {\n    return this.withContext(ParseContextFlags.Writable, () => {\n      this.rbracketsExpected++;\n      const key = this.parsePipe();\n      if (key instanceof EmptyExpr$1) {\n        this.error(`Key access cannot be empty`);\n      }\n      this.rbracketsExpected--;\n      this.expectCharacter($RBRACKET);\n      if (this.consumeOptionalOperator('=')) {\n        if (isSafe) {\n          this.error(\"The '?.' operator cannot be used in the assignment\");\n        } else {\n          const value = this.parseConditional();\n          return new KeyedWrite(this.span(start), this.sourceSpan(start), receiver, key, value);\n        }\n      } else {\n        return isSafe ? new SafeKeyedRead(this.span(start), this.sourceSpan(start), receiver, key) : new KeyedRead(this.span(start), this.sourceSpan(start), receiver, key);\n      }\n      return new EmptyExpr$1(this.span(start), this.sourceSpan(start));\n    });\n  }\n  /**\n   * Parse a directive keyword, followed by a mandatory expression.\n   * For example, \"of items\", \"trackBy: func\".\n   * The bindings are: ngForOf -> items, ngForTrackBy -> func\n   * There could be an optional \"as\" binding that follows the expression.\n   * For example,\n   * ```\n   *   *ngFor=\"let item of items | slice:0:1 as collection\".\n   *                    ^^ ^^^^^^^^^^^^^^^^^ ^^^^^^^^^^^^^\n   *               keyword    bound target   optional 'as' binding\n   * ```\n   *\n   * @param key binding key, for example, ngFor, ngIf, ngForOf, along with its\n   * absolute span.\n   */\n  parseDirectiveKeywordBindings(key) {\n    const bindings = [];\n    this.consumeOptionalCharacter($COLON); // trackBy: trackByFunction\n    const value = this.getDirectiveBoundTarget();\n    let spanEnd = this.currentAbsoluteOffset;\n    // The binding could optionally be followed by \"as\". For example,\n    // *ngIf=\"cond | pipe as x\". In this case, the key in the \"as\" binding\n    // is \"x\" and the value is the template key itself (\"ngIf\"). Note that the\n    // 'key' in the current context now becomes the \"value\" in the next binding.\n    const asBinding = this.parseAsBinding(key);\n    if (!asBinding) {\n      this.consumeStatementTerminator();\n      spanEnd = this.currentAbsoluteOffset;\n    }\n    const sourceSpan = new AbsoluteSourceSpan(key.span.start, spanEnd);\n    bindings.push(new ExpressionBinding(sourceSpan, key, value));\n    if (asBinding) {\n      bindings.push(asBinding);\n    }\n    return bindings;\n  }\n  /**\n   * Return the expression AST for the bound target of a directive keyword\n   * binding. For example,\n   * ```\n   *   *ngIf=\"condition | pipe\"\n   *          ^^^^^^^^^^^^^^^^ bound target for \"ngIf\"\n   *   *ngFor=\"let item of items\"\n   *                       ^^^^^ bound target for \"ngForOf\"\n   * ```\n   */\n  getDirectiveBoundTarget() {\n    if (this.next === EOF || this.peekKeywordAs() || this.peekKeywordLet()) {\n      return null;\n    }\n    const ast = this.parsePipe(); // example: \"condition | async\"\n    const {\n      start,\n      end\n    } = ast.span;\n    const value = this.input.substring(start, end);\n    return new ASTWithSource(ast, value, this.location, this.absoluteOffset + start, this.errors);\n  }\n  /**\n   * Return the binding for a variable declared using `as`. Note that the order\n   * of the key-value pair in this declaration is reversed. For example,\n   * ```\n   *   *ngFor=\"let item of items; index as i\"\n   *                              ^^^^^    ^\n   *                              value    key\n   * ```\n   *\n   * @param value name of the value in the declaration, \"ngIf\" in the example\n   * above, along with its absolute span.\n   */\n  parseAsBinding(value) {\n    if (!this.peekKeywordAs()) {\n      return null;\n    }\n    this.advance(); // consume the 'as' keyword\n    const key = this.expectTemplateBindingKey();\n    this.consumeStatementTerminator();\n    const sourceSpan = new AbsoluteSourceSpan(value.span.start, this.currentAbsoluteOffset);\n    return new VariableBinding(sourceSpan, key, value);\n  }\n  /**\n   * Return the binding for a variable declared using `let`. For example,\n   * ```\n   *   *ngFor=\"let item of items; let i=index;\"\n   *           ^^^^^^^^           ^^^^^^^^^^^\n   * ```\n   * In the first binding, `item` is bound to `NgForOfContext.$implicit`.\n   * In the second binding, `i` is bound to `NgForOfContext.index`.\n   */\n  parseLetBinding() {\n    if (!this.peekKeywordLet()) {\n      return null;\n    }\n    const spanStart = this.currentAbsoluteOffset;\n    this.advance(); // consume the 'let' keyword\n    const key = this.expectTemplateBindingKey();\n    let value = null;\n    if (this.consumeOptionalOperator('=')) {\n      value = this.expectTemplateBindingKey();\n    }\n    this.consumeStatementTerminator();\n    const sourceSpan = new AbsoluteSourceSpan(spanStart, this.currentAbsoluteOffset);\n    return new VariableBinding(sourceSpan, key, value);\n  }\n  /**\n   * Consume the optional statement terminator: semicolon or comma.\n   */\n  consumeStatementTerminator() {\n    this.consumeOptionalCharacter($SEMICOLON) || this.consumeOptionalCharacter($COMMA);\n  }\n  /**\n   * Records an error and skips over the token stream until reaching a recoverable point. See\n   * `this.skip` for more details on token skipping.\n   */\n  error(message, index = null) {\n    this.errors.push(new ParserError(message, this.input, this.locationText(index), this.location));\n    this.skip();\n  }\n  locationText(index = null) {\n    if (index == null) index = this.index;\n    return index < this.tokens.length ? `at column ${this.tokens[index].index + 1} in` : `at the end of the expression`;\n  }\n  /**\n   * Records an error for an unexpected private identifier being discovered.\n   * @param token Token representing a private identifier.\n   * @param extraMessage Optional additional message being appended to the error.\n   */\n  _reportErrorForPrivateIdentifier(token, extraMessage) {\n    let errorMessage = `Private identifiers are not supported. Unexpected private identifier: ${token}`;\n    if (extraMessage !== null) {\n      errorMessage += `, ${extraMessage}`;\n    }\n    this.error(errorMessage);\n  }\n  /**\n   * Error recovery should skip tokens until it encounters a recovery point.\n   *\n   * The following are treated as unconditional recovery points:\n   *   - end of input\n   *   - ';' (parseChain() is always the root production, and it expects a ';')\n   *   - '|' (since pipes may be chained and each pipe expression may be treated independently)\n   *\n   * The following are conditional recovery points:\n   *   - ')', '}', ']' if one of calling productions is expecting one of these symbols\n   *     - This allows skip() to recover from errors such as '(a.) + 1' allowing more of the AST to\n   *       be retained (it doesn't skip any tokens as the ')' is retained because of the '(' begins\n   *       an '(' <expr> ')' production).\n   *       The recovery points of grouping symbols must be conditional as they must be skipped if\n   *       none of the calling productions are not expecting the closing token else we will never\n   *       make progress in the case of an extraneous group closing symbol (such as a stray ')').\n   *       That is, we skip a closing symbol if we are not in a grouping production.\n   *   - '=' in a `Writable` context\n   *     - In this context, we are able to recover after seeing the `=` operator, which\n   *       signals the presence of an independent rvalue expression following the `=` operator.\n   *\n   * If a production expects one of these token it increments the corresponding nesting count,\n   * and then decrements it just prior to checking if the token is in the input.\n   */\n  skip() {\n    let n = this.next;\n    while (this.index < this.tokens.length && !n.isCharacter($SEMICOLON) && !n.isOperator('|') && (this.rparensExpected <= 0 || !n.isCharacter($RPAREN)) && (this.rbracesExpected <= 0 || !n.isCharacter($RBRACE)) && (this.rbracketsExpected <= 0 || !n.isCharacter($RBRACKET)) && (!(this.context & ParseContextFlags.Writable) || !n.isOperator('='))) {\n      if (this.next.isError()) {\n        this.errors.push(new ParserError(this.next.toString(), this.input, this.locationText(), this.location));\n      }\n      this.advance();\n      n = this.next;\n    }\n  }\n}\nclass SimpleExpressionChecker extends RecursiveAstVisitor {\n  constructor() {\n    super(...arguments);\n    this.errors = [];\n  }\n  visitPipe() {\n    this.errors.push('pipes');\n  }\n}\n/**\n * Computes the real offset in the original template for indexes in an interpolation.\n *\n * Because templates can have encoded HTML entities and the input passed to the parser at this stage\n * of the compiler is the _decoded_ value, we need to compute the real offset using the original\n * encoded values in the interpolated tokens. Note that this is only a special case handling for\n * `MlParserTokenType.ENCODED_ENTITY` token types. All other interpolated tokens are expected to\n * have parts which exactly match the input string for parsing the interpolation.\n *\n * @param interpolatedTokens The tokens for the interpolated value.\n *\n * @returns A map of index locations in the decoded template to indexes in the original template\n */\nfunction getIndexMapForOriginalTemplate(interpolatedTokens) {\n  let offsetMap = new Map();\n  let consumedInOriginalTemplate = 0;\n  let consumedInInput = 0;\n  let tokenIndex = 0;\n  while (tokenIndex < interpolatedTokens.length) {\n    const currentToken = interpolatedTokens[tokenIndex];\n    if (currentToken.type === 9 /* MlParserTokenType.ENCODED_ENTITY */) {\n      const [decoded, encoded] = currentToken.parts;\n      consumedInOriginalTemplate += encoded.length;\n      consumedInInput += decoded.length;\n    } else {\n      const lengthOfParts = currentToken.parts.reduce((sum, current) => sum + current.length, 0);\n      consumedInInput += lengthOfParts;\n      consumedInOriginalTemplate += lengthOfParts;\n    }\n    offsetMap.set(consumedInInput, consumedInOriginalTemplate);\n    tokenIndex++;\n  }\n  return offsetMap;\n}\nclass NodeWithI18n {\n  constructor(sourceSpan, i18n) {\n    this.sourceSpan = sourceSpan;\n    this.i18n = i18n;\n  }\n}\nclass Text extends NodeWithI18n {\n  constructor(value, sourceSpan, tokens, i18n) {\n    super(sourceSpan, i18n);\n    this.value = value;\n    this.tokens = tokens;\n  }\n  visit(visitor, context) {\n    return visitor.visitText(this, context);\n  }\n}\nclass Expansion extends NodeWithI18n {\n  constructor(switchValue, type, cases, sourceSpan, switchValueSourceSpan, i18n) {\n    super(sourceSpan, i18n);\n    this.switchValue = switchValue;\n    this.type = type;\n    this.cases = cases;\n    this.switchValueSourceSpan = switchValueSourceSpan;\n  }\n  visit(visitor, context) {\n    return visitor.visitExpansion(this, context);\n  }\n}\nclass ExpansionCase {\n  constructor(value, expression, sourceSpan, valueSourceSpan, expSourceSpan) {\n    this.value = value;\n    this.expression = expression;\n    this.sourceSpan = sourceSpan;\n    this.valueSourceSpan = valueSourceSpan;\n    this.expSourceSpan = expSourceSpan;\n  }\n  visit(visitor, context) {\n    return visitor.visitExpansionCase(this, context);\n  }\n}\nclass Attribute extends NodeWithI18n {\n  constructor(name, value, sourceSpan, keySpan, valueSpan, valueTokens, i18n) {\n    super(sourceSpan, i18n);\n    this.name = name;\n    this.value = value;\n    this.keySpan = keySpan;\n    this.valueSpan = valueSpan;\n    this.valueTokens = valueTokens;\n  }\n  visit(visitor, context) {\n    return visitor.visitAttribute(this, context);\n  }\n}\nclass Element extends NodeWithI18n {\n  constructor(name, attrs, children, sourceSpan, startSourceSpan, endSourceSpan = null, i18n) {\n    super(sourceSpan, i18n);\n    this.name = name;\n    this.attrs = attrs;\n    this.children = children;\n    this.startSourceSpan = startSourceSpan;\n    this.endSourceSpan = endSourceSpan;\n  }\n  visit(visitor, context) {\n    return visitor.visitElement(this, context);\n  }\n}\nclass Comment {\n  constructor(value, sourceSpan) {\n    this.value = value;\n    this.sourceSpan = sourceSpan;\n  }\n  visit(visitor, context) {\n    return visitor.visitComment(this, context);\n  }\n}\nclass Block extends NodeWithI18n {\n  constructor(name, parameters, children, sourceSpan, nameSpan, startSourceSpan, endSourceSpan = null, i18n) {\n    super(sourceSpan, i18n);\n    this.name = name;\n    this.parameters = parameters;\n    this.children = children;\n    this.nameSpan = nameSpan;\n    this.startSourceSpan = startSourceSpan;\n    this.endSourceSpan = endSourceSpan;\n  }\n  visit(visitor, context) {\n    return visitor.visitBlock(this, context);\n  }\n}\nclass BlockParameter {\n  constructor(expression, sourceSpan) {\n    this.expression = expression;\n    this.sourceSpan = sourceSpan;\n  }\n  visit(visitor, context) {\n    return visitor.visitBlockParameter(this, context);\n  }\n}\nclass LetDeclaration {\n  constructor(name, value, sourceSpan, nameSpan, valueSpan) {\n    this.name = name;\n    this.value = value;\n    this.sourceSpan = sourceSpan;\n    this.nameSpan = nameSpan;\n    this.valueSpan = valueSpan;\n  }\n  visit(visitor, context) {\n    return visitor.visitLetDeclaration(this, context);\n  }\n}\nfunction visitAll(visitor, nodes, context = null) {\n  const result = [];\n  const visit = visitor.visit ? ast => visitor.visit(ast, context) || ast.visit(visitor, context) : ast => ast.visit(visitor, context);\n  nodes.forEach(ast => {\n    const astResult = visit(ast);\n    if (astResult) {\n      result.push(astResult);\n    }\n  });\n  return result;\n}\nclass RecursiveVisitor {\n  constructor() {}\n  visitElement(ast, context) {\n    this.visitChildren(context, visit => {\n      visit(ast.attrs);\n      visit(ast.children);\n    });\n  }\n  visitAttribute(ast, context) {}\n  visitText(ast, context) {}\n  visitComment(ast, context) {}\n  visitExpansion(ast, context) {\n    return this.visitChildren(context, visit => {\n      visit(ast.cases);\n    });\n  }\n  visitExpansionCase(ast, context) {}\n  visitBlock(block, context) {\n    this.visitChildren(context, visit => {\n      visit(block.parameters);\n      visit(block.children);\n    });\n  }\n  visitBlockParameter(ast, context) {}\n  visitLetDeclaration(decl, context) {}\n  visitChildren(context, cb) {\n    let results = [];\n    let t = this;\n    function visit(children) {\n      if (children) results.push(visitAll(t, children, context));\n    }\n    cb(visit);\n    return Array.prototype.concat.apply([], results);\n  }\n}\n\n// =================================================================================================\n// =================================================================================================\n// =========== S T O P   -  S T O P   -  S T O P   -  S T O P   -  S T O P   -  S T O P  ===========\n// =================================================================================================\n// =================================================================================================\n//\n//        DO NOT EDIT THIS LIST OF SECURITY SENSITIVE PROPERTIES WITHOUT A SECURITY REVIEW!\n//                               Reach out to mprobst for details.\n//\n// =================================================================================================\n/** Map from tagName|propertyName to SecurityContext. Properties applying to all tags use '*'. */\nlet _SECURITY_SCHEMA;\nfunction SECURITY_SCHEMA() {\n  if (!_SECURITY_SCHEMA) {\n    _SECURITY_SCHEMA = {};\n    // Case is insignificant below, all element and attribute names are lower-cased for lookup.\n    registerContext(SecurityContext.HTML, ['iframe|srcdoc', '*|innerHTML', '*|outerHTML']);\n    registerContext(SecurityContext.STYLE, ['*|style']);\n    // NB: no SCRIPT contexts here, they are never allowed due to the parser stripping them.\n    registerContext(SecurityContext.URL, ['*|formAction', 'area|href', 'area|ping', 'audio|src', 'a|href', 'a|ping', 'blockquote|cite', 'body|background', 'del|cite', 'form|action', 'img|src', 'input|src', 'ins|cite', 'q|cite', 'source|src', 'track|src', 'video|poster', 'video|src']);\n    registerContext(SecurityContext.RESOURCE_URL, ['applet|code', 'applet|codebase', 'base|href', 'embed|src', 'frame|src', 'head|profile', 'html|manifest', 'iframe|src', 'link|href', 'media|src', 'object|codebase', 'object|data', 'script|src']);\n  }\n  return _SECURITY_SCHEMA;\n}\nfunction registerContext(ctx, specs) {\n  for (const spec of specs) _SECURITY_SCHEMA[spec.toLowerCase()] = ctx;\n}\n/**\n * The set of security-sensitive attributes of an `<iframe>` that *must* be\n * applied as a static attribute only. This ensures that all security-sensitive\n * attributes are taken into account while creating an instance of an `<iframe>`\n * at runtime.\n *\n * Note: avoid using this set directly, use the `isIframeSecuritySensitiveAttr` function\n * in the code instead.\n */\nconst IFRAME_SECURITY_SENSITIVE_ATTRS = new Set(['sandbox', 'allow', 'allowfullscreen', 'referrerpolicy', 'csp', 'fetchpriority']);\n/**\n * Checks whether a given attribute name might represent a security-sensitive\n * attribute of an <iframe>.\n */\nfunction isIframeSecuritySensitiveAttr(attrName) {\n  // The `setAttribute` DOM API is case-insensitive, so we lowercase the value\n  // before checking it against a known security-sensitive attributes.\n  return IFRAME_SECURITY_SENSITIVE_ATTRS.has(attrName.toLowerCase());\n}\nclass ElementSchemaRegistry {}\nconst BOOLEAN = 'boolean';\nconst NUMBER = 'number';\nconst STRING = 'string';\nconst OBJECT = 'object';\n/**\n * This array represents the DOM schema. It encodes inheritance, properties, and events.\n *\n * ## Overview\n *\n * Each line represents one kind of element. The `element_inheritance` and properties are joined\n * using `element_inheritance|properties` syntax.\n *\n * ## Element Inheritance\n *\n * The `element_inheritance` can be further subdivided as `element1,element2,...^parentElement`.\n * Here the individual elements are separated by `,` (commas). Every element in the list\n * has identical properties.\n *\n * An `element` may inherit additional properties from `parentElement` If no `^parentElement` is\n * specified then `\"\"` (blank) element is assumed.\n *\n * NOTE: The blank element inherits from root `[Element]` element, the super element of all\n * elements.\n *\n * NOTE an element prefix such as `:svg:` has no special meaning to the schema.\n *\n * ## Properties\n *\n * Each element has a set of properties separated by `,` (commas). Each property can be prefixed\n * by a special character designating its type:\n *\n * - (no prefix): property is a string.\n * - `*`: property represents an event.\n * - `!`: property is a boolean.\n * - `#`: property is a number.\n * - `%`: property is an object.\n *\n * ## Query\n *\n * The class creates an internal squas representation which allows to easily answer the query of\n * if a given property exist on a given element.\n *\n * NOTE: We don't yet support querying for types or events.\n * NOTE: This schema is auto extracted from `schema_extractor.ts` located in the test folder,\n *       see dom_element_schema_registry_spec.ts\n */\n// =================================================================================================\n// =================================================================================================\n// =========== S T O P   -  S T O P   -  S T O P   -  S T O P   -  S T O P   -  S T O P  ===========\n// =================================================================================================\n// =================================================================================================\n//\n//                       DO NOT EDIT THIS DOM SCHEMA WITHOUT A SECURITY REVIEW!\n//\n// Newly added properties must be security reviewed and assigned an appropriate SecurityContext in\n// dom_security_schema.ts. Reach out to mprobst & rjamet for details.\n//\n// =================================================================================================\nconst SCHEMA = ['[Element]|textContent,%ariaAtomic,%ariaAutoComplete,%ariaBusy,%ariaChecked,%ariaColCount,%ariaColIndex,%ariaColSpan,%ariaCurrent,%ariaDescription,%ariaDisabled,%ariaExpanded,%ariaHasPopup,%ariaHidden,%ariaKeyShortcuts,%ariaLabel,%ariaLevel,%ariaLive,%ariaModal,%ariaMultiLine,%ariaMultiSelectable,%ariaOrientation,%ariaPlaceholder,%ariaPosInSet,%ariaPressed,%ariaReadOnly,%ariaRelevant,%ariaRequired,%ariaRoleDescription,%ariaRowCount,%ariaRowIndex,%ariaRowSpan,%ariaSelected,%ariaSetSize,%ariaSort,%ariaValueMax,%ariaValueMin,%ariaValueNow,%ariaValueText,%classList,className,elementTiming,id,innerHTML,*beforecopy,*beforecut,*beforepaste,*fullscreenchange,*fullscreenerror,*search,*webkitfullscreenchange,*webkitfullscreenerror,outerHTML,%part,#scrollLeft,#scrollTop,slot' + /* added manually to avoid breaking changes */\n',*message,*mozfullscreenchange,*mozfullscreenerror,*mozpointerlockchange,*mozpointerlockerror,*webglcontextcreationerror,*webglcontextlost,*webglcontextrestored', '[HTMLElement]^[Element]|accessKey,autocapitalize,!autofocus,contentEditable,dir,!draggable,enterKeyHint,!hidden,!inert,innerText,inputMode,lang,nonce,*abort,*animationend,*animationiteration,*animationstart,*auxclick,*beforexrselect,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*copy,*cuechange,*cut,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*formdata,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*paste,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerrawupdate,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*securitypolicyviolation,*seeked,*seeking,*select,*selectionchange,*selectstart,*slotchange,*stalled,*submit,*suspend,*timeupdate,*toggle,*transitioncancel,*transitionend,*transitionrun,*transitionstart,*volumechange,*waiting,*webkitanimationend,*webkitanimationiteration,*webkitanimationstart,*webkittransitionend,*wheel,outerText,!spellcheck,%style,#tabIndex,title,!translate,virtualKeyboardPolicy', 'abbr,address,article,aside,b,bdi,bdo,cite,content,code,dd,dfn,dt,em,figcaption,figure,footer,header,hgroup,i,kbd,main,mark,nav,noscript,rb,rp,rt,rtc,ruby,s,samp,section,small,strong,sub,sup,u,var,wbr^[HTMLElement]|accessKey,autocapitalize,!autofocus,contentEditable,dir,!draggable,enterKeyHint,!hidden,innerText,inputMode,lang,nonce,*abort,*animationend,*animationiteration,*animationstart,*auxclick,*beforexrselect,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*copy,*cuechange,*cut,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*formdata,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*paste,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerrawupdate,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*securitypolicyviolation,*seeked,*seeking,*select,*selectionchange,*selectstart,*slotchange,*stalled,*submit,*suspend,*timeupdate,*toggle,*transitioncancel,*transitionend,*transitionrun,*transitionstart,*volumechange,*waiting,*webkitanimationend,*webkitanimationiteration,*webkitanimationstart,*webkittransitionend,*wheel,outerText,!spellcheck,%style,#tabIndex,title,!translate,virtualKeyboardPolicy', 'media^[HTMLElement]|!autoplay,!controls,%controlsList,%crossOrigin,#currentTime,!defaultMuted,#defaultPlaybackRate,!disableRemotePlayback,!loop,!muted,*encrypted,*waitingforkey,#playbackRate,preload,!preservesPitch,src,%srcObject,#volume', ':svg:^[HTMLElement]|!autofocus,nonce,*abort,*animationend,*animationiteration,*animationstart,*auxclick,*beforexrselect,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*copy,*cuechange,*cut,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*formdata,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*paste,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerrawupdate,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*securitypolicyviolation,*seeked,*seeking,*select,*selectionchange,*selectstart,*slotchange,*stalled,*submit,*suspend,*timeupdate,*toggle,*transitioncancel,*transitionend,*transitionrun,*transitionstart,*volumechange,*waiting,*webkitanimationend,*webkitanimationiteration,*webkitanimationstart,*webkittransitionend,*wheel,%style,#tabIndex', ':svg:graphics^:svg:|', ':svg:animation^:svg:|*begin,*end,*repeat', ':svg:geometry^:svg:|', ':svg:componentTransferFunction^:svg:|', ':svg:gradient^:svg:|', ':svg:textContent^:svg:graphics|', ':svg:textPositioning^:svg:textContent|', 'a^[HTMLElement]|charset,coords,download,hash,host,hostname,href,hreflang,name,password,pathname,ping,port,protocol,referrerPolicy,rel,%relList,rev,search,shape,target,text,type,username', 'area^[HTMLElement]|alt,coords,download,hash,host,hostname,href,!noHref,password,pathname,ping,port,protocol,referrerPolicy,rel,%relList,search,shape,target,username', 'audio^media|', 'br^[HTMLElement]|clear', 'base^[HTMLElement]|href,target', 'body^[HTMLElement]|aLink,background,bgColor,link,*afterprint,*beforeprint,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*messageerror,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,text,vLink', 'button^[HTMLElement]|!disabled,formAction,formEnctype,formMethod,!formNoValidate,formTarget,name,type,value', 'canvas^[HTMLElement]|#height,#width', 'content^[HTMLElement]|select', 'dl^[HTMLElement]|!compact', 'data^[HTMLElement]|value', 'datalist^[HTMLElement]|', 'details^[HTMLElement]|!open', 'dialog^[HTMLElement]|!open,returnValue', 'dir^[HTMLElement]|!compact', 'div^[HTMLElement]|align', 'embed^[HTMLElement]|align,height,name,src,type,width', 'fieldset^[HTMLElement]|!disabled,name', 'font^[HTMLElement]|color,face,size', 'form^[HTMLElement]|acceptCharset,action,autocomplete,encoding,enctype,method,name,!noValidate,target', 'frame^[HTMLElement]|frameBorder,longDesc,marginHeight,marginWidth,name,!noResize,scrolling,src', 'frameset^[HTMLElement]|cols,*afterprint,*beforeprint,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*messageerror,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,rows', 'hr^[HTMLElement]|align,color,!noShade,size,width', 'head^[HTMLElement]|', 'h1,h2,h3,h4,h5,h6^[HTMLElement]|align', 'html^[HTMLElement]|version', 'iframe^[HTMLElement]|align,allow,!allowFullscreen,!allowPaymentRequest,csp,frameBorder,height,loading,longDesc,marginHeight,marginWidth,name,referrerPolicy,%sandbox,scrolling,src,srcdoc,width', 'img^[HTMLElement]|align,alt,border,%crossOrigin,decoding,#height,#hspace,!isMap,loading,longDesc,lowsrc,name,referrerPolicy,sizes,src,srcset,useMap,#vspace,#width', 'input^[HTMLElement]|accept,align,alt,autocomplete,!checked,!defaultChecked,defaultValue,dirName,!disabled,%files,formAction,formEnctype,formMethod,!formNoValidate,formTarget,#height,!incremental,!indeterminate,max,#maxLength,min,#minLength,!multiple,name,pattern,placeholder,!readOnly,!required,selectionDirection,#selectionEnd,#selectionStart,#size,src,step,type,useMap,value,%valueAsDate,#valueAsNumber,#width', 'li^[HTMLElement]|type,#value', 'label^[HTMLElement]|htmlFor', 'legend^[HTMLElement]|align', 'link^[HTMLElement]|as,charset,%crossOrigin,!disabled,href,hreflang,imageSizes,imageSrcset,integrity,media,referrerPolicy,rel,%relList,rev,%sizes,target,type', 'map^[HTMLElement]|name', 'marquee^[HTMLElement]|behavior,bgColor,direction,height,#hspace,#loop,#scrollAmount,#scrollDelay,!trueSpeed,#vspace,width', 'menu^[HTMLElement]|!compact', 'meta^[HTMLElement]|content,httpEquiv,media,name,scheme', 'meter^[HTMLElement]|#high,#low,#max,#min,#optimum,#value', 'ins,del^[HTMLElement]|cite,dateTime', 'ol^[HTMLElement]|!compact,!reversed,#start,type', 'object^[HTMLElement]|align,archive,border,code,codeBase,codeType,data,!declare,height,#hspace,name,standby,type,useMap,#vspace,width', 'optgroup^[HTMLElement]|!disabled,label', 'option^[HTMLElement]|!defaultSelected,!disabled,label,!selected,text,value', 'output^[HTMLElement]|defaultValue,%htmlFor,name,value', 'p^[HTMLElement]|align', 'param^[HTMLElement]|name,type,value,valueType', 'picture^[HTMLElement]|', 'pre^[HTMLElement]|#width', 'progress^[HTMLElement]|#max,#value', 'q,blockquote,cite^[HTMLElement]|', 'script^[HTMLElement]|!async,charset,%crossOrigin,!defer,event,htmlFor,integrity,!noModule,%referrerPolicy,src,text,type', 'select^[HTMLElement]|autocomplete,!disabled,#length,!multiple,name,!required,#selectedIndex,#size,value', 'slot^[HTMLElement]|name', 'source^[HTMLElement]|#height,media,sizes,src,srcset,type,#width', 'span^[HTMLElement]|', 'style^[HTMLElement]|!disabled,media,type', 'caption^[HTMLElement]|align', 'th,td^[HTMLElement]|abbr,align,axis,bgColor,ch,chOff,#colSpan,headers,height,!noWrap,#rowSpan,scope,vAlign,width', 'col,colgroup^[HTMLElement]|align,ch,chOff,#span,vAlign,width', 'table^[HTMLElement]|align,bgColor,border,%caption,cellPadding,cellSpacing,frame,rules,summary,%tFoot,%tHead,width', 'tr^[HTMLElement]|align,bgColor,ch,chOff,vAlign', 'tfoot,thead,tbody^[HTMLElement]|align,ch,chOff,vAlign', 'template^[HTMLElement]|', 'textarea^[HTMLElement]|autocomplete,#cols,defaultValue,dirName,!disabled,#maxLength,#minLength,name,placeholder,!readOnly,!required,#rows,selectionDirection,#selectionEnd,#selectionStart,value,wrap', 'time^[HTMLElement]|dateTime', 'title^[HTMLElement]|text', 'track^[HTMLElement]|!default,kind,label,src,srclang', 'ul^[HTMLElement]|!compact,type', 'unknown^[HTMLElement]|', 'video^media|!disablePictureInPicture,#height,*enterpictureinpicture,*leavepictureinpicture,!playsInline,poster,#width', ':svg:a^:svg:graphics|', ':svg:animate^:svg:animation|', ':svg:animateMotion^:svg:animation|', ':svg:animateTransform^:svg:animation|', ':svg:circle^:svg:geometry|', ':svg:clipPath^:svg:graphics|', ':svg:defs^:svg:graphics|', ':svg:desc^:svg:|', ':svg:discard^:svg:|', ':svg:ellipse^:svg:geometry|', ':svg:feBlend^:svg:|', ':svg:feColorMatrix^:svg:|', ':svg:feComponentTransfer^:svg:|', ':svg:feComposite^:svg:|', ':svg:feConvolveMatrix^:svg:|', ':svg:feDiffuseLighting^:svg:|', ':svg:feDisplacementMap^:svg:|', ':svg:feDistantLight^:svg:|', ':svg:feDropShadow^:svg:|', ':svg:feFlood^:svg:|', ':svg:feFuncA^:svg:componentTransferFunction|', ':svg:feFuncB^:svg:componentTransferFunction|', ':svg:feFuncG^:svg:componentTransferFunction|', ':svg:feFuncR^:svg:componentTransferFunction|', ':svg:feGaussianBlur^:svg:|', ':svg:feImage^:svg:|', ':svg:feMerge^:svg:|', ':svg:feMergeNode^:svg:|', ':svg:feMorphology^:svg:|', ':svg:feOffset^:svg:|', ':svg:fePointLight^:svg:|', ':svg:feSpecularLighting^:svg:|', ':svg:feSpotLight^:svg:|', ':svg:feTile^:svg:|', ':svg:feTurbulence^:svg:|', ':svg:filter^:svg:|', ':svg:foreignObject^:svg:graphics|', ':svg:g^:svg:graphics|', ':svg:image^:svg:graphics|decoding', ':svg:line^:svg:geometry|', ':svg:linearGradient^:svg:gradient|', ':svg:mpath^:svg:|', ':svg:marker^:svg:|', ':svg:mask^:svg:|', ':svg:metadata^:svg:|', ':svg:path^:svg:geometry|', ':svg:pattern^:svg:|', ':svg:polygon^:svg:geometry|', ':svg:polyline^:svg:geometry|', ':svg:radialGradient^:svg:gradient|', ':svg:rect^:svg:geometry|', ':svg:svg^:svg:graphics|#currentScale,#zoomAndPan', ':svg:script^:svg:|type', ':svg:set^:svg:animation|', ':svg:stop^:svg:|', ':svg:style^:svg:|!disabled,media,title,type', ':svg:switch^:svg:graphics|', ':svg:symbol^:svg:|', ':svg:tspan^:svg:textPositioning|', ':svg:text^:svg:textPositioning|', ':svg:textPath^:svg:textContent|', ':svg:title^:svg:|', ':svg:use^:svg:graphics|', ':svg:view^:svg:|#zoomAndPan', 'data^[HTMLElement]|value', 'keygen^[HTMLElement]|!autofocus,challenge,!disabled,form,keytype,name', 'menuitem^[HTMLElement]|type,label,icon,!disabled,!checked,radiogroup,!default', 'summary^[HTMLElement]|', 'time^[HTMLElement]|dateTime', ':svg:cursor^:svg:|', ':math:^[HTMLElement]|!autofocus,nonce,*abort,*animationend,*animationiteration,*animationstart,*auxclick,*beforeinput,*beforematch,*beforetoggle,*beforexrselect,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contentvisibilityautostatechange,*contextlost,*contextmenu,*contextrestored,*copy,*cuechange,*cut,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*formdata,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*paste,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerrawupdate,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*scrollend,*securitypolicyviolation,*seeked,*seeking,*select,*selectionchange,*selectstart,*slotchange,*stalled,*submit,*suspend,*timeupdate,*toggle,*transitioncancel,*transitionend,*transitionrun,*transitionstart,*volumechange,*waiting,*webkitanimationend,*webkitanimationiteration,*webkitanimationstart,*webkittransitionend,*wheel,%style,#tabIndex', ':math:math^:math:|', ':math:maction^:math:|', ':math:menclose^:math:|', ':math:merror^:math:|', ':math:mfenced^:math:|', ':math:mfrac^:math:|', ':math:mi^:math:|', ':math:mmultiscripts^:math:|', ':math:mn^:math:|', ':math:mo^:math:|', ':math:mover^:math:|', ':math:mpadded^:math:|', ':math:mphantom^:math:|', ':math:mroot^:math:|', ':math:mrow^:math:|', ':math:ms^:math:|', ':math:mspace^:math:|', ':math:msqrt^:math:|', ':math:mstyle^:math:|', ':math:msub^:math:|', ':math:msubsup^:math:|', ':math:msup^:math:|', ':math:mtable^:math:|', ':math:mtd^:math:|', ':math:mtext^:math:|', ':math:mtr^:math:|', ':math:munder^:math:|', ':math:munderover^:math:|', ':math:semantics^:math:|'];\nconst _ATTR_TO_PROP = new Map(Object.entries({\n  'class': 'className',\n  'for': 'htmlFor',\n  'formaction': 'formAction',\n  'innerHtml': 'innerHTML',\n  'readonly': 'readOnly',\n  'tabindex': 'tabIndex'\n}));\n// Invert _ATTR_TO_PROP.\nconst _PROP_TO_ATTR = Array.from(_ATTR_TO_PROP).reduce((inverted, [propertyName, attributeName]) => {\n  inverted.set(propertyName, attributeName);\n  return inverted;\n}, new Map());\nclass DomElementSchemaRegistry extends ElementSchemaRegistry {\n  constructor() {\n    super();\n    this._schema = new Map();\n    // We don't allow binding to events for security reasons. Allowing event bindings would almost\n    // certainly introduce bad XSS vulnerabilities. Instead, we store events in a separate schema.\n    this._eventSchema = new Map();\n    SCHEMA.forEach(encodedType => {\n      const type = new Map();\n      const events = new Set();\n      const [strType, strProperties] = encodedType.split('|');\n      const properties = strProperties.split(',');\n      const [typeNames, superName] = strType.split('^');\n      typeNames.split(',').forEach(tag => {\n        this._schema.set(tag.toLowerCase(), type);\n        this._eventSchema.set(tag.toLowerCase(), events);\n      });\n      const superType = superName && this._schema.get(superName.toLowerCase());\n      if (superType) {\n        for (const [prop, value] of superType) {\n          type.set(prop, value);\n        }\n        for (const superEvent of this._eventSchema.get(superName.toLowerCase())) {\n          events.add(superEvent);\n        }\n      }\n      properties.forEach(property => {\n        if (property.length > 0) {\n          switch (property[0]) {\n            case '*':\n              events.add(property.substring(1));\n              break;\n            case '!':\n              type.set(property.substring(1), BOOLEAN);\n              break;\n            case '#':\n              type.set(property.substring(1), NUMBER);\n              break;\n            case '%':\n              type.set(property.substring(1), OBJECT);\n              break;\n            default:\n              type.set(property, STRING);\n          }\n        }\n      });\n    });\n  }\n  hasProperty(tagName, propName, schemaMetas) {\n    if (schemaMetas.some(schema => schema.name === NO_ERRORS_SCHEMA.name)) {\n      return true;\n    }\n    if (tagName.indexOf('-') > -1) {\n      if (isNgContainer(tagName) || isNgContent(tagName)) {\n        return false;\n      }\n      if (schemaMetas.some(schema => schema.name === CUSTOM_ELEMENTS_SCHEMA.name)) {\n        // Can't tell now as we don't know which properties a custom element will get\n        // once it is instantiated\n        return true;\n      }\n    }\n    const elementProperties = this._schema.get(tagName.toLowerCase()) || this._schema.get('unknown');\n    return elementProperties.has(propName);\n  }\n  hasElement(tagName, schemaMetas) {\n    if (schemaMetas.some(schema => schema.name === NO_ERRORS_SCHEMA.name)) {\n      return true;\n    }\n    if (tagName.indexOf('-') > -1) {\n      if (isNgContainer(tagName) || isNgContent(tagName)) {\n        return true;\n      }\n      if (schemaMetas.some(schema => schema.name === CUSTOM_ELEMENTS_SCHEMA.name)) {\n        // Allow any custom elements\n        return true;\n      }\n    }\n    return this._schema.has(tagName.toLowerCase());\n  }\n  /**\n   * securityContext returns the security context for the given property on the given DOM tag.\n   *\n   * Tag and property name are statically known and cannot change at runtime, i.e. it is not\n   * possible to bind a value into a changing attribute or tag name.\n   *\n   * The filtering is based on a list of allowed tags|attributes. All attributes in the schema\n   * above are assumed to have the 'NONE' security context, i.e. that they are safe inert\n   * string values. Only specific well known attack vectors are assigned their appropriate context.\n   */\n  securityContext(tagName, propName, isAttribute) {\n    if (isAttribute) {\n      // NB: For security purposes, use the mapped property name, not the attribute name.\n      propName = this.getMappedPropName(propName);\n    }\n    // Make sure comparisons are case insensitive, so that case differences between attribute and\n    // property names do not have a security impact.\n    tagName = tagName.toLowerCase();\n    propName = propName.toLowerCase();\n    let ctx = SECURITY_SCHEMA()[tagName + '|' + propName];\n    if (ctx) {\n      return ctx;\n    }\n    ctx = SECURITY_SCHEMA()['*|' + propName];\n    return ctx ? ctx : SecurityContext.NONE;\n  }\n  getMappedPropName(propName) {\n    return _ATTR_TO_PROP.get(propName) ?? propName;\n  }\n  getDefaultComponentElementName() {\n    return 'ng-component';\n  }\n  validateProperty(name) {\n    if (name.toLowerCase().startsWith('on')) {\n      const msg = `Binding to event property '${name}' is disallowed for security reasons, ` + `please use (${name.slice(2)})=...` + `\\nIf '${name}' is a directive input, make sure the directive is imported by the` + ` current module.`;\n      return {\n        error: true,\n        msg: msg\n      };\n    } else {\n      return {\n        error: false\n      };\n    }\n  }\n  validateAttribute(name) {\n    if (name.toLowerCase().startsWith('on')) {\n      const msg = `Binding to event attribute '${name}' is disallowed for security reasons, ` + `please use (${name.slice(2)})=...`;\n      return {\n        error: true,\n        msg: msg\n      };\n    } else {\n      return {\n        error: false\n      };\n    }\n  }\n  allKnownElementNames() {\n    return Array.from(this._schema.keys());\n  }\n  allKnownAttributesOfElement(tagName) {\n    const elementProperties = this._schema.get(tagName.toLowerCase()) || this._schema.get('unknown');\n    // Convert properties to attributes.\n    return Array.from(elementProperties.keys()).map(prop => _PROP_TO_ATTR.get(prop) ?? prop);\n  }\n  allKnownEventsOfElement(tagName) {\n    return Array.from(this._eventSchema.get(tagName.toLowerCase()) ?? []);\n  }\n  normalizeAnimationStyleProperty(propName) {\n    return dashCaseToCamelCase(propName);\n  }\n  normalizeAnimationStyleValue(camelCaseProp, userProvidedProp, val) {\n    let unit = '';\n    const strVal = val.toString().trim();\n    let errorMsg = null;\n    if (_isPixelDimensionStyle(camelCaseProp) && val !== 0 && val !== '0') {\n      if (typeof val === 'number') {\n        unit = 'px';\n      } else {\n        const valAndSuffixMatch = val.match(/^[+-]?[\\d\\.]+([a-z]*)$/);\n        if (valAndSuffixMatch && valAndSuffixMatch[1].length == 0) {\n          errorMsg = `Please provide a CSS unit value for ${userProvidedProp}:${val}`;\n        }\n      }\n    }\n    return {\n      error: errorMsg,\n      value: strVal + unit\n    };\n  }\n}\nfunction _isPixelDimensionStyle(prop) {\n  switch (prop) {\n    case 'width':\n    case 'height':\n    case 'minWidth':\n    case 'minHeight':\n    case 'maxWidth':\n    case 'maxHeight':\n    case 'left':\n    case 'top':\n    case 'bottom':\n    case 'right':\n    case 'fontSize':\n    case 'outlineWidth':\n    case 'outlineOffset':\n    case 'paddingTop':\n    case 'paddingLeft':\n    case 'paddingBottom':\n    case 'paddingRight':\n    case 'marginTop':\n    case 'marginLeft':\n    case 'marginBottom':\n    case 'marginRight':\n    case 'borderRadius':\n    case 'borderWidth':\n    case 'borderTopWidth':\n    case 'borderLeftWidth':\n    case 'borderRightWidth':\n    case 'borderBottomWidth':\n    case 'textIndent':\n      return true;\n    default:\n      return false;\n  }\n}\nclass HtmlTagDefinition {\n  constructor({\n    closedByChildren,\n    implicitNamespacePrefix,\n    contentType = TagContentType.PARSABLE_DATA,\n    closedByParent = false,\n    isVoid = false,\n    ignoreFirstLf = false,\n    preventNamespaceInheritance = false,\n    canSelfClose = false\n  } = {}) {\n    this.closedByChildren = {};\n    this.closedByParent = false;\n    if (closedByChildren && closedByChildren.length > 0) {\n      closedByChildren.forEach(tagName => this.closedByChildren[tagName] = true);\n    }\n    this.isVoid = isVoid;\n    this.closedByParent = closedByParent || isVoid;\n    this.implicitNamespacePrefix = implicitNamespacePrefix || null;\n    this.contentType = contentType;\n    this.ignoreFirstLf = ignoreFirstLf;\n    this.preventNamespaceInheritance = preventNamespaceInheritance;\n    this.canSelfClose = canSelfClose ?? isVoid;\n  }\n  isClosedByChild(name) {\n    return this.isVoid || name.toLowerCase() in this.closedByChildren;\n  }\n  getContentType(prefix) {\n    if (typeof this.contentType === 'object') {\n      const overrideType = prefix === undefined ? undefined : this.contentType[prefix];\n      return overrideType ?? this.contentType.default;\n    }\n    return this.contentType;\n  }\n}\nlet DEFAULT_TAG_DEFINITION;\n// see https://www.w3.org/TR/html51/syntax.html#optional-tags\n// This implementation does not fully conform to the HTML5 spec.\nlet TAG_DEFINITIONS;\nfunction getHtmlTagDefinition(tagName) {\n  if (!TAG_DEFINITIONS) {\n    DEFAULT_TAG_DEFINITION = new HtmlTagDefinition({\n      canSelfClose: true\n    });\n    TAG_DEFINITIONS = Object.assign(Object.create(null), {\n      'base': new HtmlTagDefinition({\n        isVoid: true\n      }),\n      'meta': new HtmlTagDefinition({\n        isVoid: true\n      }),\n      'area': new HtmlTagDefinition({\n        isVoid: true\n      }),\n      'embed': new HtmlTagDefinition({\n        isVoid: true\n      }),\n      'link': new HtmlTagDefinition({\n        isVoid: true\n      }),\n      'img': new HtmlTagDefinition({\n        isVoid: true\n      }),\n      'input': new HtmlTagDefinition({\n        isVoid: true\n      }),\n      'param': new HtmlTagDefinition({\n        isVoid: true\n      }),\n      'hr': new HtmlTagDefinition({\n        isVoid: true\n      }),\n      'br': new HtmlTagDefinition({\n        isVoid: true\n      }),\n      'source': new HtmlTagDefinition({\n        isVoid: true\n      }),\n      'track': new HtmlTagDefinition({\n        isVoid: true\n      }),\n      'wbr': new HtmlTagDefinition({\n        isVoid: true\n      }),\n      'p': new HtmlTagDefinition({\n        closedByChildren: ['address', 'article', 'aside', 'blockquote', 'div', 'dl', 'fieldset', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'header', 'hgroup', 'hr', 'main', 'nav', 'ol', 'p', 'pre', 'section', 'table', 'ul'],\n        closedByParent: true\n      }),\n      'thead': new HtmlTagDefinition({\n        closedByChildren: ['tbody', 'tfoot']\n      }),\n      'tbody': new HtmlTagDefinition({\n        closedByChildren: ['tbody', 'tfoot'],\n        closedByParent: true\n      }),\n      'tfoot': new HtmlTagDefinition({\n        closedByChildren: ['tbody'],\n        closedByParent: true\n      }),\n      'tr': new HtmlTagDefinition({\n        closedByChildren: ['tr'],\n        closedByParent: true\n      }),\n      'td': new HtmlTagDefinition({\n        closedByChildren: ['td', 'th'],\n        closedByParent: true\n      }),\n      'th': new HtmlTagDefinition({\n        closedByChildren: ['td', 'th'],\n        closedByParent: true\n      }),\n      'col': new HtmlTagDefinition({\n        isVoid: true\n      }),\n      'svg': new HtmlTagDefinition({\n        implicitNamespacePrefix: 'svg'\n      }),\n      'foreignObject': new HtmlTagDefinition({\n        // Usually the implicit namespace here would be redundant since it will be inherited from\n        // the parent `svg`, but we have to do it for `foreignObject`, because the way the parser\n        // works is that the parent node of an end tag is its own start tag which means that\n        // the `preventNamespaceInheritance` on `foreignObject` would have it default to the\n        // implicit namespace which is `html`, unless specified otherwise.\n        implicitNamespacePrefix: 'svg',\n        // We want to prevent children of foreignObject from inheriting its namespace, because\n        // the point of the element is to allow nodes from other namespaces to be inserted.\n        preventNamespaceInheritance: true\n      }),\n      'math': new HtmlTagDefinition({\n        implicitNamespacePrefix: 'math'\n      }),\n      'li': new HtmlTagDefinition({\n        closedByChildren: ['li'],\n        closedByParent: true\n      }),\n      'dt': new HtmlTagDefinition({\n        closedByChildren: ['dt', 'dd']\n      }),\n      'dd': new HtmlTagDefinition({\n        closedByChildren: ['dt', 'dd'],\n        closedByParent: true\n      }),\n      'rb': new HtmlTagDefinition({\n        closedByChildren: ['rb', 'rt', 'rtc', 'rp'],\n        closedByParent: true\n      }),\n      'rt': new HtmlTagDefinition({\n        closedByChildren: ['rb', 'rt', 'rtc', 'rp'],\n        closedByParent: true\n      }),\n      'rtc': new HtmlTagDefinition({\n        closedByChildren: ['rb', 'rtc', 'rp'],\n        closedByParent: true\n      }),\n      'rp': new HtmlTagDefinition({\n        closedByChildren: ['rb', 'rt', 'rtc', 'rp'],\n        closedByParent: true\n      }),\n      'optgroup': new HtmlTagDefinition({\n        closedByChildren: ['optgroup'],\n        closedByParent: true\n      }),\n      'option': new HtmlTagDefinition({\n        closedByChildren: ['option', 'optgroup'],\n        closedByParent: true\n      }),\n      'pre': new HtmlTagDefinition({\n        ignoreFirstLf: true\n      }),\n      'listing': new HtmlTagDefinition({\n        ignoreFirstLf: true\n      }),\n      'style': new HtmlTagDefinition({\n        contentType: TagContentType.RAW_TEXT\n      }),\n      'script': new HtmlTagDefinition({\n        contentType: TagContentType.RAW_TEXT\n      }),\n      'title': new HtmlTagDefinition({\n        // The browser supports two separate `title` tags which have to use\n        // a different content type: `HTMLTitleElement` and `SVGTitleElement`\n        contentType: {\n          default: TagContentType.ESCAPABLE_RAW_TEXT,\n          svg: TagContentType.PARSABLE_DATA\n        }\n      }),\n      'textarea': new HtmlTagDefinition({\n        contentType: TagContentType.ESCAPABLE_RAW_TEXT,\n        ignoreFirstLf: true\n      })\n    });\n    new DomElementSchemaRegistry().allKnownElementNames().forEach(knownTagName => {\n      if (!TAG_DEFINITIONS[knownTagName] && getNsPrefix(knownTagName) === null) {\n        TAG_DEFINITIONS[knownTagName] = new HtmlTagDefinition({\n          canSelfClose: false\n        });\n      }\n    });\n  }\n  // We have to make both a case-sensitive and a case-insensitive lookup, because\n  // HTML tag names are case insensitive, whereas some SVG tags are case sensitive.\n  return TAG_DEFINITIONS[tagName] ?? TAG_DEFINITIONS[tagName.toLowerCase()] ?? DEFAULT_TAG_DEFINITION;\n}\nconst TAG_TO_PLACEHOLDER_NAMES = {\n  'A': 'LINK',\n  'B': 'BOLD_TEXT',\n  'BR': 'LINE_BREAK',\n  'EM': 'EMPHASISED_TEXT',\n  'H1': 'HEADING_LEVEL1',\n  'H2': 'HEADING_LEVEL2',\n  'H3': 'HEADING_LEVEL3',\n  'H4': 'HEADING_LEVEL4',\n  'H5': 'HEADING_LEVEL5',\n  'H6': 'HEADING_LEVEL6',\n  'HR': 'HORIZONTAL_RULE',\n  'I': 'ITALIC_TEXT',\n  'LI': 'LIST_ITEM',\n  'LINK': 'MEDIA_LINK',\n  'OL': 'ORDERED_LIST',\n  'P': 'PARAGRAPH',\n  'Q': 'QUOTATION',\n  'S': 'STRIKETHROUGH_TEXT',\n  'SMALL': 'SMALL_TEXT',\n  'SUB': 'SUBSTRIPT',\n  'SUP': 'SUPERSCRIPT',\n  'TBODY': 'TABLE_BODY',\n  'TD': 'TABLE_CELL',\n  'TFOOT': 'TABLE_FOOTER',\n  'TH': 'TABLE_HEADER_CELL',\n  'THEAD': 'TABLE_HEADER',\n  'TR': 'TABLE_ROW',\n  'TT': 'MONOSPACED_TEXT',\n  'U': 'UNDERLINED_TEXT',\n  'UL': 'UNORDERED_LIST'\n};\n/**\n * Creates unique names for placeholder with different content.\n *\n * Returns the same placeholder name when the content is identical.\n */\nclass PlaceholderRegistry {\n  constructor() {\n    // Count the occurrence of the base name top generate a unique name\n    this._placeHolderNameCounts = {};\n    // Maps signature to placeholder names\n    this._signatureToName = {};\n  }\n  getStartTagPlaceholderName(tag, attrs, isVoid) {\n    const signature = this._hashTag(tag, attrs, isVoid);\n    if (this._signatureToName[signature]) {\n      return this._signatureToName[signature];\n    }\n    const upperTag = tag.toUpperCase();\n    const baseName = TAG_TO_PLACEHOLDER_NAMES[upperTag] || `TAG_${upperTag}`;\n    const name = this._generateUniqueName(isVoid ? baseName : `START_${baseName}`);\n    this._signatureToName[signature] = name;\n    return name;\n  }\n  getCloseTagPlaceholderName(tag) {\n    const signature = this._hashClosingTag(tag);\n    if (this._signatureToName[signature]) {\n      return this._signatureToName[signature];\n    }\n    const upperTag = tag.toUpperCase();\n    const baseName = TAG_TO_PLACEHOLDER_NAMES[upperTag] || `TAG_${upperTag}`;\n    const name = this._generateUniqueName(`CLOSE_${baseName}`);\n    this._signatureToName[signature] = name;\n    return name;\n  }\n  getPlaceholderName(name, content) {\n    const upperName = name.toUpperCase();\n    const signature = `PH: ${upperName}=${content}`;\n    if (this._signatureToName[signature]) {\n      return this._signatureToName[signature];\n    }\n    const uniqueName = this._generateUniqueName(upperName);\n    this._signatureToName[signature] = uniqueName;\n    return uniqueName;\n  }\n  getUniquePlaceholder(name) {\n    return this._generateUniqueName(name.toUpperCase());\n  }\n  getStartBlockPlaceholderName(name, parameters) {\n    const signature = this._hashBlock(name, parameters);\n    if (this._signatureToName[signature]) {\n      return this._signatureToName[signature];\n    }\n    const placeholder = this._generateUniqueName(`START_BLOCK_${this._toSnakeCase(name)}`);\n    this._signatureToName[signature] = placeholder;\n    return placeholder;\n  }\n  getCloseBlockPlaceholderName(name) {\n    const signature = this._hashClosingBlock(name);\n    if (this._signatureToName[signature]) {\n      return this._signatureToName[signature];\n    }\n    const placeholder = this._generateUniqueName(`CLOSE_BLOCK_${this._toSnakeCase(name)}`);\n    this._signatureToName[signature] = placeholder;\n    return placeholder;\n  }\n  // Generate a hash for a tag - does not take attribute order into account\n  _hashTag(tag, attrs, isVoid) {\n    const start = `<${tag}`;\n    const strAttrs = Object.keys(attrs).sort().map(name => ` ${name}=${attrs[name]}`).join('');\n    const end = isVoid ? '/>' : `></${tag}>`;\n    return start + strAttrs + end;\n  }\n  _hashClosingTag(tag) {\n    return this._hashTag(`/${tag}`, {}, false);\n  }\n  _hashBlock(name, parameters) {\n    const params = parameters.length === 0 ? '' : ` (${parameters.sort().join('; ')})`;\n    return `@${name}${params} {}`;\n  }\n  _hashClosingBlock(name) {\n    return this._hashBlock(`close_${name}`, []);\n  }\n  _toSnakeCase(name) {\n    return name.toUpperCase().replace(/[^A-Z0-9]/g, '_');\n  }\n  _generateUniqueName(base) {\n    const seen = this._placeHolderNameCounts.hasOwnProperty(base);\n    if (!seen) {\n      this._placeHolderNameCounts[base] = 1;\n      return base;\n    }\n    const id = this._placeHolderNameCounts[base];\n    this._placeHolderNameCounts[base] = id + 1;\n    return `${base}_${id}`;\n  }\n}\nconst _expParser = new Parser$1(new Lexer());\n/**\n * Returns a function converting html nodes to an i18n Message given an interpolationConfig\n */\nfunction createI18nMessageFactory(interpolationConfig, containerBlocks) {\n  const visitor = new _I18nVisitor(_expParser, interpolationConfig, containerBlocks);\n  return (nodes, meaning, description, customId, visitNodeFn) => visitor.toI18nMessage(nodes, meaning, description, customId, visitNodeFn);\n}\nfunction noopVisitNodeFn(_html, i18n) {\n  return i18n;\n}\nclass _I18nVisitor {\n  constructor(_expressionParser, _interpolationConfig, _containerBlocks) {\n    this._expressionParser = _expressionParser;\n    this._interpolationConfig = _interpolationConfig;\n    this._containerBlocks = _containerBlocks;\n  }\n  toI18nMessage(nodes, meaning = '', description = '', customId = '', visitNodeFn) {\n    const context = {\n      isIcu: nodes.length == 1 && nodes[0] instanceof Expansion,\n      icuDepth: 0,\n      placeholderRegistry: new PlaceholderRegistry(),\n      placeholderToContent: {},\n      placeholderToMessage: {},\n      visitNodeFn: visitNodeFn || noopVisitNodeFn\n    };\n    const i18nodes = visitAll(this, nodes, context);\n    return new Message(i18nodes, context.placeholderToContent, context.placeholderToMessage, meaning, description, customId);\n  }\n  visitElement(el, context) {\n    const children = visitAll(this, el.children, context);\n    const attrs = {};\n    el.attrs.forEach(attr => {\n      // Do not visit the attributes, translatable ones are top-level ASTs\n      attrs[attr.name] = attr.value;\n    });\n    const isVoid = getHtmlTagDefinition(el.name).isVoid;\n    const startPhName = context.placeholderRegistry.getStartTagPlaceholderName(el.name, attrs, isVoid);\n    context.placeholderToContent[startPhName] = {\n      text: el.startSourceSpan.toString(),\n      sourceSpan: el.startSourceSpan\n    };\n    let closePhName = '';\n    if (!isVoid) {\n      closePhName = context.placeholderRegistry.getCloseTagPlaceholderName(el.name);\n      context.placeholderToContent[closePhName] = {\n        text: `</${el.name}>`,\n        sourceSpan: el.endSourceSpan ?? el.sourceSpan\n      };\n    }\n    const node = new TagPlaceholder(el.name, attrs, startPhName, closePhName, children, isVoid, el.sourceSpan, el.startSourceSpan, el.endSourceSpan);\n    return context.visitNodeFn(el, node);\n  }\n  visitAttribute(attribute, context) {\n    const node = attribute.valueTokens === undefined || attribute.valueTokens.length === 1 ? new Text$2(attribute.value, attribute.valueSpan || attribute.sourceSpan) : this._visitTextWithInterpolation(attribute.valueTokens, attribute.valueSpan || attribute.sourceSpan, context, attribute.i18n);\n    return context.visitNodeFn(attribute, node);\n  }\n  visitText(text, context) {\n    const node = text.tokens.length === 1 ? new Text$2(text.value, text.sourceSpan) : this._visitTextWithInterpolation(text.tokens, text.sourceSpan, context, text.i18n);\n    return context.visitNodeFn(text, node);\n  }\n  visitComment(comment, context) {\n    return null;\n  }\n  visitExpansion(icu, context) {\n    context.icuDepth++;\n    const i18nIcuCases = {};\n    const i18nIcu = new Icu(icu.switchValue, icu.type, i18nIcuCases, icu.sourceSpan);\n    icu.cases.forEach(caze => {\n      i18nIcuCases[caze.value] = new Container(caze.expression.map(node => node.visit(this, context)), caze.expSourceSpan);\n    });\n    context.icuDepth--;\n    if (context.isIcu || context.icuDepth > 0) {\n      // Returns an ICU node when:\n      // - the message (vs a part of the message) is an ICU message, or\n      // - the ICU message is nested.\n      const expPh = context.placeholderRegistry.getUniquePlaceholder(`VAR_${icu.type}`);\n      i18nIcu.expressionPlaceholder = expPh;\n      context.placeholderToContent[expPh] = {\n        text: icu.switchValue,\n        sourceSpan: icu.switchValueSourceSpan\n      };\n      return context.visitNodeFn(icu, i18nIcu);\n    }\n    // Else returns a placeholder\n    // ICU placeholders should not be replaced with their original content but with the their\n    // translations.\n    // TODO(vicb): add a html.Node -> i18n.Message cache to avoid having to re-create the msg\n    const phName = context.placeholderRegistry.getPlaceholderName('ICU', icu.sourceSpan.toString());\n    context.placeholderToMessage[phName] = this.toI18nMessage([icu], '', '', '', undefined);\n    const node = new IcuPlaceholder(i18nIcu, phName, icu.sourceSpan);\n    return context.visitNodeFn(icu, node);\n  }\n  visitExpansionCase(_icuCase, _context) {\n    throw new Error('Unreachable code');\n  }\n  visitBlock(block, context) {\n    const children = visitAll(this, block.children, context);\n    if (this._containerBlocks.has(block.name)) {\n      return new Container(children, block.sourceSpan);\n    }\n    const parameters = block.parameters.map(param => param.expression);\n    const startPhName = context.placeholderRegistry.getStartBlockPlaceholderName(block.name, parameters);\n    const closePhName = context.placeholderRegistry.getCloseBlockPlaceholderName(block.name);\n    context.placeholderToContent[startPhName] = {\n      text: block.startSourceSpan.toString(),\n      sourceSpan: block.startSourceSpan\n    };\n    context.placeholderToContent[closePhName] = {\n      text: block.endSourceSpan ? block.endSourceSpan.toString() : '}',\n      sourceSpan: block.endSourceSpan ?? block.sourceSpan\n    };\n    const node = new BlockPlaceholder(block.name, parameters, startPhName, closePhName, children, block.sourceSpan, block.startSourceSpan, block.endSourceSpan);\n    return context.visitNodeFn(block, node);\n  }\n  visitBlockParameter(_parameter, _context) {\n    throw new Error('Unreachable code');\n  }\n  visitLetDeclaration(decl, context) {\n    return null;\n  }\n  /**\n   * Convert, text and interpolated tokens up into text and placeholder pieces.\n   *\n   * @param tokens The text and interpolated tokens.\n   * @param sourceSpan The span of the whole of the `text` string.\n   * @param context The current context of the visitor, used to compute and store placeholders.\n   * @param previousI18n Any i18n metadata associated with this `text` from a previous pass.\n   */\n  _visitTextWithInterpolation(tokens, sourceSpan, context, previousI18n) {\n    // Return a sequence of `Text` and `Placeholder` nodes grouped in a `Container`.\n    const nodes = [];\n    // We will only create a container if there are actually interpolations,\n    // so this flag tracks that.\n    let hasInterpolation = false;\n    for (const token of tokens) {\n      switch (token.type) {\n        case 8 /* TokenType.INTERPOLATION */:\n        case 17 /* TokenType.ATTR_VALUE_INTERPOLATION */:\n          hasInterpolation = true;\n          const expression = token.parts[1];\n          const baseName = extractPlaceholderName(expression) || 'INTERPOLATION';\n          const phName = context.placeholderRegistry.getPlaceholderName(baseName, expression);\n          context.placeholderToContent[phName] = {\n            text: token.parts.join(''),\n            sourceSpan: token.sourceSpan\n          };\n          nodes.push(new Placeholder(expression, phName, token.sourceSpan));\n          break;\n        default:\n          if (token.parts[0].length > 0) {\n            // This token is text or an encoded entity.\n            // If it is following on from a previous text node then merge it into that node\n            // Otherwise, if it is following an interpolation, then add a new node.\n            const previous = nodes[nodes.length - 1];\n            if (previous instanceof Text$2) {\n              previous.value += token.parts[0];\n              previous.sourceSpan = new ParseSourceSpan(previous.sourceSpan.start, token.sourceSpan.end, previous.sourceSpan.fullStart, previous.sourceSpan.details);\n            } else {\n              nodes.push(new Text$2(token.parts[0], token.sourceSpan));\n            }\n          }\n          break;\n      }\n    }\n    if (hasInterpolation) {\n      // Whitespace removal may have invalidated the interpolation source-spans.\n      reusePreviousSourceSpans(nodes, previousI18n);\n      return new Container(nodes, sourceSpan);\n    } else {\n      return nodes[0];\n    }\n  }\n}\n/**\n * Re-use the source-spans from `previousI18n` metadata for the `nodes`.\n *\n * Whitespace removal can invalidate the source-spans of interpolation nodes, so we\n * reuse the source-span stored from a previous pass before the whitespace was removed.\n *\n * @param nodes The `Text` and `Placeholder` nodes to be processed.\n * @param previousI18n Any i18n metadata for these `nodes` stored from a previous pass.\n */\nfunction reusePreviousSourceSpans(nodes, previousI18n) {\n  if (previousI18n instanceof Message) {\n    // The `previousI18n` is an i18n `Message`, so we are processing an `Attribute` with i18n\n    // metadata. The `Message` should consist only of a single `Container` that contains the\n    // parts (`Text` and `Placeholder`) to process.\n    assertSingleContainerMessage(previousI18n);\n    previousI18n = previousI18n.nodes[0];\n  }\n  if (previousI18n instanceof Container) {\n    // The `previousI18n` is a `Container`, which means that this is a second i18n extraction pass\n    // after whitespace has been removed from the AST nodes.\n    assertEquivalentNodes(previousI18n.children, nodes);\n    // Reuse the source-spans from the first pass.\n    for (let i = 0; i < nodes.length; i++) {\n      nodes[i].sourceSpan = previousI18n.children[i].sourceSpan;\n    }\n  }\n}\n/**\n * Asserts that the `message` contains exactly one `Container` node.\n */\nfunction assertSingleContainerMessage(message) {\n  const nodes = message.nodes;\n  if (nodes.length !== 1 || !(nodes[0] instanceof Container)) {\n    throw new Error('Unexpected previous i18n message - expected it to consist of only a single `Container` node.');\n  }\n}\n/**\n * Asserts that the `previousNodes` and `node` collections have the same number of elements and\n * corresponding elements have the same node type.\n */\nfunction assertEquivalentNodes(previousNodes, nodes) {\n  if (previousNodes.length !== nodes.length) {\n    throw new Error('The number of i18n message children changed between first and second pass.');\n  }\n  if (previousNodes.some((node, i) => nodes[i].constructor !== node.constructor)) {\n    throw new Error('The types of the i18n message children changed between first and second pass.');\n  }\n}\nconst _CUSTOM_PH_EXP = /\\/\\/[\\s\\S]*i18n[\\s\\S]*\\([\\s\\S]*ph[\\s\\S]*=[\\s\\S]*(\"|')([\\s\\S]*?)\\1[\\s\\S]*\\)/g;\nfunction extractPlaceholderName(input) {\n  return input.split(_CUSTOM_PH_EXP)[2];\n}\n\n/**\n * An i18n error.\n */\nclass I18nError extends ParseError {\n  constructor(span, msg) {\n    super(span, msg);\n  }\n}\n\n// Mapping between all HTML entity names and their unicode representation.\n// Generated from https://html.spec.whatwg.org/multipage/entities.json by stripping\n// the `&` and `;` from the keys and removing the duplicates.\n// see https://www.w3.org/TR/html51/syntax.html#named-character-references\nconst NAMED_ENTITIES = {\n  'AElig': '\\u00C6',\n  'AMP': '\\u0026',\n  'amp': '\\u0026',\n  'Aacute': '\\u00C1',\n  'Abreve': '\\u0102',\n  'Acirc': '\\u00C2',\n  'Acy': '\\u0410',\n  'Afr': '\\uD835\\uDD04',\n  'Agrave': '\\u00C0',\n  'Alpha': '\\u0391',\n  'Amacr': '\\u0100',\n  'And': '\\u2A53',\n  'Aogon': '\\u0104',\n  'Aopf': '\\uD835\\uDD38',\n  'ApplyFunction': '\\u2061',\n  'af': '\\u2061',\n  'Aring': '\\u00C5',\n  'angst': '\\u00C5',\n  'Ascr': '\\uD835\\uDC9C',\n  'Assign': '\\u2254',\n  'colone': '\\u2254',\n  'coloneq': '\\u2254',\n  'Atilde': '\\u00C3',\n  'Auml': '\\u00C4',\n  'Backslash': '\\u2216',\n  'setminus': '\\u2216',\n  'setmn': '\\u2216',\n  'smallsetminus': '\\u2216',\n  'ssetmn': '\\u2216',\n  'Barv': '\\u2AE7',\n  'Barwed': '\\u2306',\n  'doublebarwedge': '\\u2306',\n  'Bcy': '\\u0411',\n  'Because': '\\u2235',\n  'becaus': '\\u2235',\n  'because': '\\u2235',\n  'Bernoullis': '\\u212C',\n  'Bscr': '\\u212C',\n  'bernou': '\\u212C',\n  'Beta': '\\u0392',\n  'Bfr': '\\uD835\\uDD05',\n  'Bopf': '\\uD835\\uDD39',\n  'Breve': '\\u02D8',\n  'breve': '\\u02D8',\n  'Bumpeq': '\\u224E',\n  'HumpDownHump': '\\u224E',\n  'bump': '\\u224E',\n  'CHcy': '\\u0427',\n  'COPY': '\\u00A9',\n  'copy': '\\u00A9',\n  'Cacute': '\\u0106',\n  'Cap': '\\u22D2',\n  'CapitalDifferentialD': '\\u2145',\n  'DD': '\\u2145',\n  'Cayleys': '\\u212D',\n  'Cfr': '\\u212D',\n  'Ccaron': '\\u010C',\n  'Ccedil': '\\u00C7',\n  'Ccirc': '\\u0108',\n  'Cconint': '\\u2230',\n  'Cdot': '\\u010A',\n  'Cedilla': '\\u00B8',\n  'cedil': '\\u00B8',\n  'CenterDot': '\\u00B7',\n  'centerdot': '\\u00B7',\n  'middot': '\\u00B7',\n  'Chi': '\\u03A7',\n  'CircleDot': '\\u2299',\n  'odot': '\\u2299',\n  'CircleMinus': '\\u2296',\n  'ominus': '\\u2296',\n  'CirclePlus': '\\u2295',\n  'oplus': '\\u2295',\n  'CircleTimes': '\\u2297',\n  'otimes': '\\u2297',\n  'ClockwiseContourIntegral': '\\u2232',\n  'cwconint': '\\u2232',\n  'CloseCurlyDoubleQuote': '\\u201D',\n  'rdquo': '\\u201D',\n  'rdquor': '\\u201D',\n  'CloseCurlyQuote': '\\u2019',\n  'rsquo': '\\u2019',\n  'rsquor': '\\u2019',\n  'Colon': '\\u2237',\n  'Proportion': '\\u2237',\n  'Colone': '\\u2A74',\n  'Congruent': '\\u2261',\n  'equiv': '\\u2261',\n  'Conint': '\\u222F',\n  'DoubleContourIntegral': '\\u222F',\n  'ContourIntegral': '\\u222E',\n  'conint': '\\u222E',\n  'oint': '\\u222E',\n  'Copf': '\\u2102',\n  'complexes': '\\u2102',\n  'Coproduct': '\\u2210',\n  'coprod': '\\u2210',\n  'CounterClockwiseContourIntegral': '\\u2233',\n  'awconint': '\\u2233',\n  'Cross': '\\u2A2F',\n  'Cscr': '\\uD835\\uDC9E',\n  'Cup': '\\u22D3',\n  'CupCap': '\\u224D',\n  'asympeq': '\\u224D',\n  'DDotrahd': '\\u2911',\n  'DJcy': '\\u0402',\n  'DScy': '\\u0405',\n  'DZcy': '\\u040F',\n  'Dagger': '\\u2021',\n  'ddagger': '\\u2021',\n  'Darr': '\\u21A1',\n  'Dashv': '\\u2AE4',\n  'DoubleLeftTee': '\\u2AE4',\n  'Dcaron': '\\u010E',\n  'Dcy': '\\u0414',\n  'Del': '\\u2207',\n  'nabla': '\\u2207',\n  'Delta': '\\u0394',\n  'Dfr': '\\uD835\\uDD07',\n  'DiacriticalAcute': '\\u00B4',\n  'acute': '\\u00B4',\n  'DiacriticalDot': '\\u02D9',\n  'dot': '\\u02D9',\n  'DiacriticalDoubleAcute': '\\u02DD',\n  'dblac': '\\u02DD',\n  'DiacriticalGrave': '\\u0060',\n  'grave': '\\u0060',\n  'DiacriticalTilde': '\\u02DC',\n  'tilde': '\\u02DC',\n  'Diamond': '\\u22C4',\n  'diam': '\\u22C4',\n  'diamond': '\\u22C4',\n  'DifferentialD': '\\u2146',\n  'dd': '\\u2146',\n  'Dopf': '\\uD835\\uDD3B',\n  'Dot': '\\u00A8',\n  'DoubleDot': '\\u00A8',\n  'die': '\\u00A8',\n  'uml': '\\u00A8',\n  'DotDot': '\\u20DC',\n  'DotEqual': '\\u2250',\n  'doteq': '\\u2250',\n  'esdot': '\\u2250',\n  'DoubleDownArrow': '\\u21D3',\n  'Downarrow': '\\u21D3',\n  'dArr': '\\u21D3',\n  'DoubleLeftArrow': '\\u21D0',\n  'Leftarrow': '\\u21D0',\n  'lArr': '\\u21D0',\n  'DoubleLeftRightArrow': '\\u21D4',\n  'Leftrightarrow': '\\u21D4',\n  'hArr': '\\u21D4',\n  'iff': '\\u21D4',\n  'DoubleLongLeftArrow': '\\u27F8',\n  'Longleftarrow': '\\u27F8',\n  'xlArr': '\\u27F8',\n  'DoubleLongLeftRightArrow': '\\u27FA',\n  'Longleftrightarrow': '\\u27FA',\n  'xhArr': '\\u27FA',\n  'DoubleLongRightArrow': '\\u27F9',\n  'Longrightarrow': '\\u27F9',\n  'xrArr': '\\u27F9',\n  'DoubleRightArrow': '\\u21D2',\n  'Implies': '\\u21D2',\n  'Rightarrow': '\\u21D2',\n  'rArr': '\\u21D2',\n  'DoubleRightTee': '\\u22A8',\n  'vDash': '\\u22A8',\n  'DoubleUpArrow': '\\u21D1',\n  'Uparrow': '\\u21D1',\n  'uArr': '\\u21D1',\n  'DoubleUpDownArrow': '\\u21D5',\n  'Updownarrow': '\\u21D5',\n  'vArr': '\\u21D5',\n  'DoubleVerticalBar': '\\u2225',\n  'par': '\\u2225',\n  'parallel': '\\u2225',\n  'shortparallel': '\\u2225',\n  'spar': '\\u2225',\n  'DownArrow': '\\u2193',\n  'ShortDownArrow': '\\u2193',\n  'darr': '\\u2193',\n  'downarrow': '\\u2193',\n  'DownArrowBar': '\\u2913',\n  'DownArrowUpArrow': '\\u21F5',\n  'duarr': '\\u21F5',\n  'DownBreve': '\\u0311',\n  'DownLeftRightVector': '\\u2950',\n  'DownLeftTeeVector': '\\u295E',\n  'DownLeftVector': '\\u21BD',\n  'leftharpoondown': '\\u21BD',\n  'lhard': '\\u21BD',\n  'DownLeftVectorBar': '\\u2956',\n  'DownRightTeeVector': '\\u295F',\n  'DownRightVector': '\\u21C1',\n  'rhard': '\\u21C1',\n  'rightharpoondown': '\\u21C1',\n  'DownRightVectorBar': '\\u2957',\n  'DownTee': '\\u22A4',\n  'top': '\\u22A4',\n  'DownTeeArrow': '\\u21A7',\n  'mapstodown': '\\u21A7',\n  'Dscr': '\\uD835\\uDC9F',\n  'Dstrok': '\\u0110',\n  'ENG': '\\u014A',\n  'ETH': '\\u00D0',\n  'Eacute': '\\u00C9',\n  'Ecaron': '\\u011A',\n  'Ecirc': '\\u00CA',\n  'Ecy': '\\u042D',\n  'Edot': '\\u0116',\n  'Efr': '\\uD835\\uDD08',\n  'Egrave': '\\u00C8',\n  'Element': '\\u2208',\n  'in': '\\u2208',\n  'isin': '\\u2208',\n  'isinv': '\\u2208',\n  'Emacr': '\\u0112',\n  'EmptySmallSquare': '\\u25FB',\n  'EmptyVerySmallSquare': '\\u25AB',\n  'Eogon': '\\u0118',\n  'Eopf': '\\uD835\\uDD3C',\n  'Epsilon': '\\u0395',\n  'Equal': '\\u2A75',\n  'EqualTilde': '\\u2242',\n  'eqsim': '\\u2242',\n  'esim': '\\u2242',\n  'Equilibrium': '\\u21CC',\n  'rightleftharpoons': '\\u21CC',\n  'rlhar': '\\u21CC',\n  'Escr': '\\u2130',\n  'expectation': '\\u2130',\n  'Esim': '\\u2A73',\n  'Eta': '\\u0397',\n  'Euml': '\\u00CB',\n  'Exists': '\\u2203',\n  'exist': '\\u2203',\n  'ExponentialE': '\\u2147',\n  'ee': '\\u2147',\n  'exponentiale': '\\u2147',\n  'Fcy': '\\u0424',\n  'Ffr': '\\uD835\\uDD09',\n  'FilledSmallSquare': '\\u25FC',\n  'FilledVerySmallSquare': '\\u25AA',\n  'blacksquare': '\\u25AA',\n  'squarf': '\\u25AA',\n  'squf': '\\u25AA',\n  'Fopf': '\\uD835\\uDD3D',\n  'ForAll': '\\u2200',\n  'forall': '\\u2200',\n  'Fouriertrf': '\\u2131',\n  'Fscr': '\\u2131',\n  'GJcy': '\\u0403',\n  'GT': '\\u003E',\n  'gt': '\\u003E',\n  'Gamma': '\\u0393',\n  'Gammad': '\\u03DC',\n  'Gbreve': '\\u011E',\n  'Gcedil': '\\u0122',\n  'Gcirc': '\\u011C',\n  'Gcy': '\\u0413',\n  'Gdot': '\\u0120',\n  'Gfr': '\\uD835\\uDD0A',\n  'Gg': '\\u22D9',\n  'ggg': '\\u22D9',\n  'Gopf': '\\uD835\\uDD3E',\n  'GreaterEqual': '\\u2265',\n  'ge': '\\u2265',\n  'geq': '\\u2265',\n  'GreaterEqualLess': '\\u22DB',\n  'gel': '\\u22DB',\n  'gtreqless': '\\u22DB',\n  'GreaterFullEqual': '\\u2267',\n  'gE': '\\u2267',\n  'geqq': '\\u2267',\n  'GreaterGreater': '\\u2AA2',\n  'GreaterLess': '\\u2277',\n  'gl': '\\u2277',\n  'gtrless': '\\u2277',\n  'GreaterSlantEqual': '\\u2A7E',\n  'geqslant': '\\u2A7E',\n  'ges': '\\u2A7E',\n  'GreaterTilde': '\\u2273',\n  'gsim': '\\u2273',\n  'gtrsim': '\\u2273',\n  'Gscr': '\\uD835\\uDCA2',\n  'Gt': '\\u226B',\n  'NestedGreaterGreater': '\\u226B',\n  'gg': '\\u226B',\n  'HARDcy': '\\u042A',\n  'Hacek': '\\u02C7',\n  'caron': '\\u02C7',\n  'Hat': '\\u005E',\n  'Hcirc': '\\u0124',\n  'Hfr': '\\u210C',\n  'Poincareplane': '\\u210C',\n  'HilbertSpace': '\\u210B',\n  'Hscr': '\\u210B',\n  'hamilt': '\\u210B',\n  'Hopf': '\\u210D',\n  'quaternions': '\\u210D',\n  'HorizontalLine': '\\u2500',\n  'boxh': '\\u2500',\n  'Hstrok': '\\u0126',\n  'HumpEqual': '\\u224F',\n  'bumpe': '\\u224F',\n  'bumpeq': '\\u224F',\n  'IEcy': '\\u0415',\n  'IJlig': '\\u0132',\n  'IOcy': '\\u0401',\n  'Iacute': '\\u00CD',\n  'Icirc': '\\u00CE',\n  'Icy': '\\u0418',\n  'Idot': '\\u0130',\n  'Ifr': '\\u2111',\n  'Im': '\\u2111',\n  'image': '\\u2111',\n  'imagpart': '\\u2111',\n  'Igrave': '\\u00CC',\n  'Imacr': '\\u012A',\n  'ImaginaryI': '\\u2148',\n  'ii': '\\u2148',\n  'Int': '\\u222C',\n  'Integral': '\\u222B',\n  'int': '\\u222B',\n  'Intersection': '\\u22C2',\n  'bigcap': '\\u22C2',\n  'xcap': '\\u22C2',\n  'InvisibleComma': '\\u2063',\n  'ic': '\\u2063',\n  'InvisibleTimes': '\\u2062',\n  'it': '\\u2062',\n  'Iogon': '\\u012E',\n  'Iopf': '\\uD835\\uDD40',\n  'Iota': '\\u0399',\n  'Iscr': '\\u2110',\n  'imagline': '\\u2110',\n  'Itilde': '\\u0128',\n  'Iukcy': '\\u0406',\n  'Iuml': '\\u00CF',\n  'Jcirc': '\\u0134',\n  'Jcy': '\\u0419',\n  'Jfr': '\\uD835\\uDD0D',\n  'Jopf': '\\uD835\\uDD41',\n  'Jscr': '\\uD835\\uDCA5',\n  'Jsercy': '\\u0408',\n  'Jukcy': '\\u0404',\n  'KHcy': '\\u0425',\n  'KJcy': '\\u040C',\n  'Kappa': '\\u039A',\n  'Kcedil': '\\u0136',\n  'Kcy': '\\u041A',\n  'Kfr': '\\uD835\\uDD0E',\n  'Kopf': '\\uD835\\uDD42',\n  'Kscr': '\\uD835\\uDCA6',\n  'LJcy': '\\u0409',\n  'LT': '\\u003C',\n  'lt': '\\u003C',\n  'Lacute': '\\u0139',\n  'Lambda': '\\u039B',\n  'Lang': '\\u27EA',\n  'Laplacetrf': '\\u2112',\n  'Lscr': '\\u2112',\n  'lagran': '\\u2112',\n  'Larr': '\\u219E',\n  'twoheadleftarrow': '\\u219E',\n  'Lcaron': '\\u013D',\n  'Lcedil': '\\u013B',\n  'Lcy': '\\u041B',\n  'LeftAngleBracket': '\\u27E8',\n  'lang': '\\u27E8',\n  'langle': '\\u27E8',\n  'LeftArrow': '\\u2190',\n  'ShortLeftArrow': '\\u2190',\n  'larr': '\\u2190',\n  'leftarrow': '\\u2190',\n  'slarr': '\\u2190',\n  'LeftArrowBar': '\\u21E4',\n  'larrb': '\\u21E4',\n  'LeftArrowRightArrow': '\\u21C6',\n  'leftrightarrows': '\\u21C6',\n  'lrarr': '\\u21C6',\n  'LeftCeiling': '\\u2308',\n  'lceil': '\\u2308',\n  'LeftDoubleBracket': '\\u27E6',\n  'lobrk': '\\u27E6',\n  'LeftDownTeeVector': '\\u2961',\n  'LeftDownVector': '\\u21C3',\n  'dharl': '\\u21C3',\n  'downharpoonleft': '\\u21C3',\n  'LeftDownVectorBar': '\\u2959',\n  'LeftFloor': '\\u230A',\n  'lfloor': '\\u230A',\n  'LeftRightArrow': '\\u2194',\n  'harr': '\\u2194',\n  'leftrightarrow': '\\u2194',\n  'LeftRightVector': '\\u294E',\n  'LeftTee': '\\u22A3',\n  'dashv': '\\u22A3',\n  'LeftTeeArrow': '\\u21A4',\n  'mapstoleft': '\\u21A4',\n  'LeftTeeVector': '\\u295A',\n  'LeftTriangle': '\\u22B2',\n  'vartriangleleft': '\\u22B2',\n  'vltri': '\\u22B2',\n  'LeftTriangleBar': '\\u29CF',\n  'LeftTriangleEqual': '\\u22B4',\n  'ltrie': '\\u22B4',\n  'trianglelefteq': '\\u22B4',\n  'LeftUpDownVector': '\\u2951',\n  'LeftUpTeeVector': '\\u2960',\n  'LeftUpVector': '\\u21BF',\n  'uharl': '\\u21BF',\n  'upharpoonleft': '\\u21BF',\n  'LeftUpVectorBar': '\\u2958',\n  'LeftVector': '\\u21BC',\n  'leftharpoonup': '\\u21BC',\n  'lharu': '\\u21BC',\n  'LeftVectorBar': '\\u2952',\n  'LessEqualGreater': '\\u22DA',\n  'leg': '\\u22DA',\n  'lesseqgtr': '\\u22DA',\n  'LessFullEqual': '\\u2266',\n  'lE': '\\u2266',\n  'leqq': '\\u2266',\n  'LessGreater': '\\u2276',\n  'lessgtr': '\\u2276',\n  'lg': '\\u2276',\n  'LessLess': '\\u2AA1',\n  'LessSlantEqual': '\\u2A7D',\n  'leqslant': '\\u2A7D',\n  'les': '\\u2A7D',\n  'LessTilde': '\\u2272',\n  'lesssim': '\\u2272',\n  'lsim': '\\u2272',\n  'Lfr': '\\uD835\\uDD0F',\n  'Ll': '\\u22D8',\n  'Lleftarrow': '\\u21DA',\n  'lAarr': '\\u21DA',\n  'Lmidot': '\\u013F',\n  'LongLeftArrow': '\\u27F5',\n  'longleftarrow': '\\u27F5',\n  'xlarr': '\\u27F5',\n  'LongLeftRightArrow': '\\u27F7',\n  'longleftrightarrow': '\\u27F7',\n  'xharr': '\\u27F7',\n  'LongRightArrow': '\\u27F6',\n  'longrightarrow': '\\u27F6',\n  'xrarr': '\\u27F6',\n  'Lopf': '\\uD835\\uDD43',\n  'LowerLeftArrow': '\\u2199',\n  'swarr': '\\u2199',\n  'swarrow': '\\u2199',\n  'LowerRightArrow': '\\u2198',\n  'searr': '\\u2198',\n  'searrow': '\\u2198',\n  'Lsh': '\\u21B0',\n  'lsh': '\\u21B0',\n  'Lstrok': '\\u0141',\n  'Lt': '\\u226A',\n  'NestedLessLess': '\\u226A',\n  'll': '\\u226A',\n  'Map': '\\u2905',\n  'Mcy': '\\u041C',\n  'MediumSpace': '\\u205F',\n  'Mellintrf': '\\u2133',\n  'Mscr': '\\u2133',\n  'phmmat': '\\u2133',\n  'Mfr': '\\uD835\\uDD10',\n  'MinusPlus': '\\u2213',\n  'mnplus': '\\u2213',\n  'mp': '\\u2213',\n  'Mopf': '\\uD835\\uDD44',\n  'Mu': '\\u039C',\n  'NJcy': '\\u040A',\n  'Nacute': '\\u0143',\n  'Ncaron': '\\u0147',\n  'Ncedil': '\\u0145',\n  'Ncy': '\\u041D',\n  'NegativeMediumSpace': '\\u200B',\n  'NegativeThickSpace': '\\u200B',\n  'NegativeThinSpace': '\\u200B',\n  'NegativeVeryThinSpace': '\\u200B',\n  'ZeroWidthSpace': '\\u200B',\n  'NewLine': '\\u000A',\n  'Nfr': '\\uD835\\uDD11',\n  'NoBreak': '\\u2060',\n  'NonBreakingSpace': '\\u00A0',\n  'nbsp': '\\u00A0',\n  'Nopf': '\\u2115',\n  'naturals': '\\u2115',\n  'Not': '\\u2AEC',\n  'NotCongruent': '\\u2262',\n  'nequiv': '\\u2262',\n  'NotCupCap': '\\u226D',\n  'NotDoubleVerticalBar': '\\u2226',\n  'npar': '\\u2226',\n  'nparallel': '\\u2226',\n  'nshortparallel': '\\u2226',\n  'nspar': '\\u2226',\n  'NotElement': '\\u2209',\n  'notin': '\\u2209',\n  'notinva': '\\u2209',\n  'NotEqual': '\\u2260',\n  'ne': '\\u2260',\n  'NotEqualTilde': '\\u2242\\u0338',\n  'nesim': '\\u2242\\u0338',\n  'NotExists': '\\u2204',\n  'nexist': '\\u2204',\n  'nexists': '\\u2204',\n  'NotGreater': '\\u226F',\n  'ngt': '\\u226F',\n  'ngtr': '\\u226F',\n  'NotGreaterEqual': '\\u2271',\n  'nge': '\\u2271',\n  'ngeq': '\\u2271',\n  'NotGreaterFullEqual': '\\u2267\\u0338',\n  'ngE': '\\u2267\\u0338',\n  'ngeqq': '\\u2267\\u0338',\n  'NotGreaterGreater': '\\u226B\\u0338',\n  'nGtv': '\\u226B\\u0338',\n  'NotGreaterLess': '\\u2279',\n  'ntgl': '\\u2279',\n  'NotGreaterSlantEqual': '\\u2A7E\\u0338',\n  'ngeqslant': '\\u2A7E\\u0338',\n  'nges': '\\u2A7E\\u0338',\n  'NotGreaterTilde': '\\u2275',\n  'ngsim': '\\u2275',\n  'NotHumpDownHump': '\\u224E\\u0338',\n  'nbump': '\\u224E\\u0338',\n  'NotHumpEqual': '\\u224F\\u0338',\n  'nbumpe': '\\u224F\\u0338',\n  'NotLeftTriangle': '\\u22EA',\n  'nltri': '\\u22EA',\n  'ntriangleleft': '\\u22EA',\n  'NotLeftTriangleBar': '\\u29CF\\u0338',\n  'NotLeftTriangleEqual': '\\u22EC',\n  'nltrie': '\\u22EC',\n  'ntrianglelefteq': '\\u22EC',\n  'NotLess': '\\u226E',\n  'nless': '\\u226E',\n  'nlt': '\\u226E',\n  'NotLessEqual': '\\u2270',\n  'nle': '\\u2270',\n  'nleq': '\\u2270',\n  'NotLessGreater': '\\u2278',\n  'ntlg': '\\u2278',\n  'NotLessLess': '\\u226A\\u0338',\n  'nLtv': '\\u226A\\u0338',\n  'NotLessSlantEqual': '\\u2A7D\\u0338',\n  'nleqslant': '\\u2A7D\\u0338',\n  'nles': '\\u2A7D\\u0338',\n  'NotLessTilde': '\\u2274',\n  'nlsim': '\\u2274',\n  'NotNestedGreaterGreater': '\\u2AA2\\u0338',\n  'NotNestedLessLess': '\\u2AA1\\u0338',\n  'NotPrecedes': '\\u2280',\n  'npr': '\\u2280',\n  'nprec': '\\u2280',\n  'NotPrecedesEqual': '\\u2AAF\\u0338',\n  'npre': '\\u2AAF\\u0338',\n  'npreceq': '\\u2AAF\\u0338',\n  'NotPrecedesSlantEqual': '\\u22E0',\n  'nprcue': '\\u22E0',\n  'NotReverseElement': '\\u220C',\n  'notni': '\\u220C',\n  'notniva': '\\u220C',\n  'NotRightTriangle': '\\u22EB',\n  'nrtri': '\\u22EB',\n  'ntriangleright': '\\u22EB',\n  'NotRightTriangleBar': '\\u29D0\\u0338',\n  'NotRightTriangleEqual': '\\u22ED',\n  'nrtrie': '\\u22ED',\n  'ntrianglerighteq': '\\u22ED',\n  'NotSquareSubset': '\\u228F\\u0338',\n  'NotSquareSubsetEqual': '\\u22E2',\n  'nsqsube': '\\u22E2',\n  'NotSquareSuperset': '\\u2290\\u0338',\n  'NotSquareSupersetEqual': '\\u22E3',\n  'nsqsupe': '\\u22E3',\n  'NotSubset': '\\u2282\\u20D2',\n  'nsubset': '\\u2282\\u20D2',\n  'vnsub': '\\u2282\\u20D2',\n  'NotSubsetEqual': '\\u2288',\n  'nsube': '\\u2288',\n  'nsubseteq': '\\u2288',\n  'NotSucceeds': '\\u2281',\n  'nsc': '\\u2281',\n  'nsucc': '\\u2281',\n  'NotSucceedsEqual': '\\u2AB0\\u0338',\n  'nsce': '\\u2AB0\\u0338',\n  'nsucceq': '\\u2AB0\\u0338',\n  'NotSucceedsSlantEqual': '\\u22E1',\n  'nsccue': '\\u22E1',\n  'NotSucceedsTilde': '\\u227F\\u0338',\n  'NotSuperset': '\\u2283\\u20D2',\n  'nsupset': '\\u2283\\u20D2',\n  'vnsup': '\\u2283\\u20D2',\n  'NotSupersetEqual': '\\u2289',\n  'nsupe': '\\u2289',\n  'nsupseteq': '\\u2289',\n  'NotTilde': '\\u2241',\n  'nsim': '\\u2241',\n  'NotTildeEqual': '\\u2244',\n  'nsime': '\\u2244',\n  'nsimeq': '\\u2244',\n  'NotTildeFullEqual': '\\u2247',\n  'ncong': '\\u2247',\n  'NotTildeTilde': '\\u2249',\n  'nap': '\\u2249',\n  'napprox': '\\u2249',\n  'NotVerticalBar': '\\u2224',\n  'nmid': '\\u2224',\n  'nshortmid': '\\u2224',\n  'nsmid': '\\u2224',\n  'Nscr': '\\uD835\\uDCA9',\n  'Ntilde': '\\u00D1',\n  'Nu': '\\u039D',\n  'OElig': '\\u0152',\n  'Oacute': '\\u00D3',\n  'Ocirc': '\\u00D4',\n  'Ocy': '\\u041E',\n  'Odblac': '\\u0150',\n  'Ofr': '\\uD835\\uDD12',\n  'Ograve': '\\u00D2',\n  'Omacr': '\\u014C',\n  'Omega': '\\u03A9',\n  'ohm': '\\u03A9',\n  'Omicron': '\\u039F',\n  'Oopf': '\\uD835\\uDD46',\n  'OpenCurlyDoubleQuote': '\\u201C',\n  'ldquo': '\\u201C',\n  'OpenCurlyQuote': '\\u2018',\n  'lsquo': '\\u2018',\n  'Or': '\\u2A54',\n  'Oscr': '\\uD835\\uDCAA',\n  'Oslash': '\\u00D8',\n  'Otilde': '\\u00D5',\n  'Otimes': '\\u2A37',\n  'Ouml': '\\u00D6',\n  'OverBar': '\\u203E',\n  'oline': '\\u203E',\n  'OverBrace': '\\u23DE',\n  'OverBracket': '\\u23B4',\n  'tbrk': '\\u23B4',\n  'OverParenthesis': '\\u23DC',\n  'PartialD': '\\u2202',\n  'part': '\\u2202',\n  'Pcy': '\\u041F',\n  'Pfr': '\\uD835\\uDD13',\n  'Phi': '\\u03A6',\n  'Pi': '\\u03A0',\n  'PlusMinus': '\\u00B1',\n  'plusmn': '\\u00B1',\n  'pm': '\\u00B1',\n  'Popf': '\\u2119',\n  'primes': '\\u2119',\n  'Pr': '\\u2ABB',\n  'Precedes': '\\u227A',\n  'pr': '\\u227A',\n  'prec': '\\u227A',\n  'PrecedesEqual': '\\u2AAF',\n  'pre': '\\u2AAF',\n  'preceq': '\\u2AAF',\n  'PrecedesSlantEqual': '\\u227C',\n  'prcue': '\\u227C',\n  'preccurlyeq': '\\u227C',\n  'PrecedesTilde': '\\u227E',\n  'precsim': '\\u227E',\n  'prsim': '\\u227E',\n  'Prime': '\\u2033',\n  'Product': '\\u220F',\n  'prod': '\\u220F',\n  'Proportional': '\\u221D',\n  'prop': '\\u221D',\n  'propto': '\\u221D',\n  'varpropto': '\\u221D',\n  'vprop': '\\u221D',\n  'Pscr': '\\uD835\\uDCAB',\n  'Psi': '\\u03A8',\n  'QUOT': '\\u0022',\n  'quot': '\\u0022',\n  'Qfr': '\\uD835\\uDD14',\n  'Qopf': '\\u211A',\n  'rationals': '\\u211A',\n  'Qscr': '\\uD835\\uDCAC',\n  'RBarr': '\\u2910',\n  'drbkarow': '\\u2910',\n  'REG': '\\u00AE',\n  'circledR': '\\u00AE',\n  'reg': '\\u00AE',\n  'Racute': '\\u0154',\n  'Rang': '\\u27EB',\n  'Rarr': '\\u21A0',\n  'twoheadrightarrow': '\\u21A0',\n  'Rarrtl': '\\u2916',\n  'Rcaron': '\\u0158',\n  'Rcedil': '\\u0156',\n  'Rcy': '\\u0420',\n  'Re': '\\u211C',\n  'Rfr': '\\u211C',\n  'real': '\\u211C',\n  'realpart': '\\u211C',\n  'ReverseElement': '\\u220B',\n  'SuchThat': '\\u220B',\n  'ni': '\\u220B',\n  'niv': '\\u220B',\n  'ReverseEquilibrium': '\\u21CB',\n  'leftrightharpoons': '\\u21CB',\n  'lrhar': '\\u21CB',\n  'ReverseUpEquilibrium': '\\u296F',\n  'duhar': '\\u296F',\n  'Rho': '\\u03A1',\n  'RightAngleBracket': '\\u27E9',\n  'rang': '\\u27E9',\n  'rangle': '\\u27E9',\n  'RightArrow': '\\u2192',\n  'ShortRightArrow': '\\u2192',\n  'rarr': '\\u2192',\n  'rightarrow': '\\u2192',\n  'srarr': '\\u2192',\n  'RightArrowBar': '\\u21E5',\n  'rarrb': '\\u21E5',\n  'RightArrowLeftArrow': '\\u21C4',\n  'rightleftarrows': '\\u21C4',\n  'rlarr': '\\u21C4',\n  'RightCeiling': '\\u2309',\n  'rceil': '\\u2309',\n  'RightDoubleBracket': '\\u27E7',\n  'robrk': '\\u27E7',\n  'RightDownTeeVector': '\\u295D',\n  'RightDownVector': '\\u21C2',\n  'dharr': '\\u21C2',\n  'downharpoonright': '\\u21C2',\n  'RightDownVectorBar': '\\u2955',\n  'RightFloor': '\\u230B',\n  'rfloor': '\\u230B',\n  'RightTee': '\\u22A2',\n  'vdash': '\\u22A2',\n  'RightTeeArrow': '\\u21A6',\n  'map': '\\u21A6',\n  'mapsto': '\\u21A6',\n  'RightTeeVector': '\\u295B',\n  'RightTriangle': '\\u22B3',\n  'vartriangleright': '\\u22B3',\n  'vrtri': '\\u22B3',\n  'RightTriangleBar': '\\u29D0',\n  'RightTriangleEqual': '\\u22B5',\n  'rtrie': '\\u22B5',\n  'trianglerighteq': '\\u22B5',\n  'RightUpDownVector': '\\u294F',\n  'RightUpTeeVector': '\\u295C',\n  'RightUpVector': '\\u21BE',\n  'uharr': '\\u21BE',\n  'upharpoonright': '\\u21BE',\n  'RightUpVectorBar': '\\u2954',\n  'RightVector': '\\u21C0',\n  'rharu': '\\u21C0',\n  'rightharpoonup': '\\u21C0',\n  'RightVectorBar': '\\u2953',\n  'Ropf': '\\u211D',\n  'reals': '\\u211D',\n  'RoundImplies': '\\u2970',\n  'Rrightarrow': '\\u21DB',\n  'rAarr': '\\u21DB',\n  'Rscr': '\\u211B',\n  'realine': '\\u211B',\n  'Rsh': '\\u21B1',\n  'rsh': '\\u21B1',\n  'RuleDelayed': '\\u29F4',\n  'SHCHcy': '\\u0429',\n  'SHcy': '\\u0428',\n  'SOFTcy': '\\u042C',\n  'Sacute': '\\u015A',\n  'Sc': '\\u2ABC',\n  'Scaron': '\\u0160',\n  'Scedil': '\\u015E',\n  'Scirc': '\\u015C',\n  'Scy': '\\u0421',\n  'Sfr': '\\uD835\\uDD16',\n  'ShortUpArrow': '\\u2191',\n  'UpArrow': '\\u2191',\n  'uarr': '\\u2191',\n  'uparrow': '\\u2191',\n  'Sigma': '\\u03A3',\n  'SmallCircle': '\\u2218',\n  'compfn': '\\u2218',\n  'Sopf': '\\uD835\\uDD4A',\n  'Sqrt': '\\u221A',\n  'radic': '\\u221A',\n  'Square': '\\u25A1',\n  'squ': '\\u25A1',\n  'square': '\\u25A1',\n  'SquareIntersection': '\\u2293',\n  'sqcap': '\\u2293',\n  'SquareSubset': '\\u228F',\n  'sqsub': '\\u228F',\n  'sqsubset': '\\u228F',\n  'SquareSubsetEqual': '\\u2291',\n  'sqsube': '\\u2291',\n  'sqsubseteq': '\\u2291',\n  'SquareSuperset': '\\u2290',\n  'sqsup': '\\u2290',\n  'sqsupset': '\\u2290',\n  'SquareSupersetEqual': '\\u2292',\n  'sqsupe': '\\u2292',\n  'sqsupseteq': '\\u2292',\n  'SquareUnion': '\\u2294',\n  'sqcup': '\\u2294',\n  'Sscr': '\\uD835\\uDCAE',\n  'Star': '\\u22C6',\n  'sstarf': '\\u22C6',\n  'Sub': '\\u22D0',\n  'Subset': '\\u22D0',\n  'SubsetEqual': '\\u2286',\n  'sube': '\\u2286',\n  'subseteq': '\\u2286',\n  'Succeeds': '\\u227B',\n  'sc': '\\u227B',\n  'succ': '\\u227B',\n  'SucceedsEqual': '\\u2AB0',\n  'sce': '\\u2AB0',\n  'succeq': '\\u2AB0',\n  'SucceedsSlantEqual': '\\u227D',\n  'sccue': '\\u227D',\n  'succcurlyeq': '\\u227D',\n  'SucceedsTilde': '\\u227F',\n  'scsim': '\\u227F',\n  'succsim': '\\u227F',\n  'Sum': '\\u2211',\n  'sum': '\\u2211',\n  'Sup': '\\u22D1',\n  'Supset': '\\u22D1',\n  'Superset': '\\u2283',\n  'sup': '\\u2283',\n  'supset': '\\u2283',\n  'SupersetEqual': '\\u2287',\n  'supe': '\\u2287',\n  'supseteq': '\\u2287',\n  'THORN': '\\u00DE',\n  'TRADE': '\\u2122',\n  'trade': '\\u2122',\n  'TSHcy': '\\u040B',\n  'TScy': '\\u0426',\n  'Tab': '\\u0009',\n  'Tau': '\\u03A4',\n  'Tcaron': '\\u0164',\n  'Tcedil': '\\u0162',\n  'Tcy': '\\u0422',\n  'Tfr': '\\uD835\\uDD17',\n  'Therefore': '\\u2234',\n  'there4': '\\u2234',\n  'therefore': '\\u2234',\n  'Theta': '\\u0398',\n  'ThickSpace': '\\u205F\\u200A',\n  'ThinSpace': '\\u2009',\n  'thinsp': '\\u2009',\n  'Tilde': '\\u223C',\n  'sim': '\\u223C',\n  'thicksim': '\\u223C',\n  'thksim': '\\u223C',\n  'TildeEqual': '\\u2243',\n  'sime': '\\u2243',\n  'simeq': '\\u2243',\n  'TildeFullEqual': '\\u2245',\n  'cong': '\\u2245',\n  'TildeTilde': '\\u2248',\n  'ap': '\\u2248',\n  'approx': '\\u2248',\n  'asymp': '\\u2248',\n  'thickapprox': '\\u2248',\n  'thkap': '\\u2248',\n  'Topf': '\\uD835\\uDD4B',\n  'TripleDot': '\\u20DB',\n  'tdot': '\\u20DB',\n  'Tscr': '\\uD835\\uDCAF',\n  'Tstrok': '\\u0166',\n  'Uacute': '\\u00DA',\n  'Uarr': '\\u219F',\n  'Uarrocir': '\\u2949',\n  'Ubrcy': '\\u040E',\n  'Ubreve': '\\u016C',\n  'Ucirc': '\\u00DB',\n  'Ucy': '\\u0423',\n  'Udblac': '\\u0170',\n  'Ufr': '\\uD835\\uDD18',\n  'Ugrave': '\\u00D9',\n  'Umacr': '\\u016A',\n  'UnderBar': '\\u005F',\n  'lowbar': '\\u005F',\n  'UnderBrace': '\\u23DF',\n  'UnderBracket': '\\u23B5',\n  'bbrk': '\\u23B5',\n  'UnderParenthesis': '\\u23DD',\n  'Union': '\\u22C3',\n  'bigcup': '\\u22C3',\n  'xcup': '\\u22C3',\n  'UnionPlus': '\\u228E',\n  'uplus': '\\u228E',\n  'Uogon': '\\u0172',\n  'Uopf': '\\uD835\\uDD4C',\n  'UpArrowBar': '\\u2912',\n  'UpArrowDownArrow': '\\u21C5',\n  'udarr': '\\u21C5',\n  'UpDownArrow': '\\u2195',\n  'updownarrow': '\\u2195',\n  'varr': '\\u2195',\n  'UpEquilibrium': '\\u296E',\n  'udhar': '\\u296E',\n  'UpTee': '\\u22A5',\n  'bot': '\\u22A5',\n  'bottom': '\\u22A5',\n  'perp': '\\u22A5',\n  'UpTeeArrow': '\\u21A5',\n  'mapstoup': '\\u21A5',\n  'UpperLeftArrow': '\\u2196',\n  'nwarr': '\\u2196',\n  'nwarrow': '\\u2196',\n  'UpperRightArrow': '\\u2197',\n  'nearr': '\\u2197',\n  'nearrow': '\\u2197',\n  'Upsi': '\\u03D2',\n  'upsih': '\\u03D2',\n  'Upsilon': '\\u03A5',\n  'Uring': '\\u016E',\n  'Uscr': '\\uD835\\uDCB0',\n  'Utilde': '\\u0168',\n  'Uuml': '\\u00DC',\n  'VDash': '\\u22AB',\n  'Vbar': '\\u2AEB',\n  'Vcy': '\\u0412',\n  'Vdash': '\\u22A9',\n  'Vdashl': '\\u2AE6',\n  'Vee': '\\u22C1',\n  'bigvee': '\\u22C1',\n  'xvee': '\\u22C1',\n  'Verbar': '\\u2016',\n  'Vert': '\\u2016',\n  'VerticalBar': '\\u2223',\n  'mid': '\\u2223',\n  'shortmid': '\\u2223',\n  'smid': '\\u2223',\n  'VerticalLine': '\\u007C',\n  'verbar': '\\u007C',\n  'vert': '\\u007C',\n  'VerticalSeparator': '\\u2758',\n  'VerticalTilde': '\\u2240',\n  'wr': '\\u2240',\n  'wreath': '\\u2240',\n  'VeryThinSpace': '\\u200A',\n  'hairsp': '\\u200A',\n  'Vfr': '\\uD835\\uDD19',\n  'Vopf': '\\uD835\\uDD4D',\n  'Vscr': '\\uD835\\uDCB1',\n  'Vvdash': '\\u22AA',\n  'Wcirc': '\\u0174',\n  'Wedge': '\\u22C0',\n  'bigwedge': '\\u22C0',\n  'xwedge': '\\u22C0',\n  'Wfr': '\\uD835\\uDD1A',\n  'Wopf': '\\uD835\\uDD4E',\n  'Wscr': '\\uD835\\uDCB2',\n  'Xfr': '\\uD835\\uDD1B',\n  'Xi': '\\u039E',\n  'Xopf': '\\uD835\\uDD4F',\n  'Xscr': '\\uD835\\uDCB3',\n  'YAcy': '\\u042F',\n  'YIcy': '\\u0407',\n  'YUcy': '\\u042E',\n  'Yacute': '\\u00DD',\n  'Ycirc': '\\u0176',\n  'Ycy': '\\u042B',\n  'Yfr': '\\uD835\\uDD1C',\n  'Yopf': '\\uD835\\uDD50',\n  'Yscr': '\\uD835\\uDCB4',\n  'Yuml': '\\u0178',\n  'ZHcy': '\\u0416',\n  'Zacute': '\\u0179',\n  'Zcaron': '\\u017D',\n  'Zcy': '\\u0417',\n  'Zdot': '\\u017B',\n  'Zeta': '\\u0396',\n  'Zfr': '\\u2128',\n  'zeetrf': '\\u2128',\n  'Zopf': '\\u2124',\n  'integers': '\\u2124',\n  'Zscr': '\\uD835\\uDCB5',\n  'aacute': '\\u00E1',\n  'abreve': '\\u0103',\n  'ac': '\\u223E',\n  'mstpos': '\\u223E',\n  'acE': '\\u223E\\u0333',\n  'acd': '\\u223F',\n  'acirc': '\\u00E2',\n  'acy': '\\u0430',\n  'aelig': '\\u00E6',\n  'afr': '\\uD835\\uDD1E',\n  'agrave': '\\u00E0',\n  'alefsym': '\\u2135',\n  'aleph': '\\u2135',\n  'alpha': '\\u03B1',\n  'amacr': '\\u0101',\n  'amalg': '\\u2A3F',\n  'and': '\\u2227',\n  'wedge': '\\u2227',\n  'andand': '\\u2A55',\n  'andd': '\\u2A5C',\n  'andslope': '\\u2A58',\n  'andv': '\\u2A5A',\n  'ang': '\\u2220',\n  'angle': '\\u2220',\n  'ange': '\\u29A4',\n  'angmsd': '\\u2221',\n  'measuredangle': '\\u2221',\n  'angmsdaa': '\\u29A8',\n  'angmsdab': '\\u29A9',\n  'angmsdac': '\\u29AA',\n  'angmsdad': '\\u29AB',\n  'angmsdae': '\\u29AC',\n  'angmsdaf': '\\u29AD',\n  'angmsdag': '\\u29AE',\n  'angmsdah': '\\u29AF',\n  'angrt': '\\u221F',\n  'angrtvb': '\\u22BE',\n  'angrtvbd': '\\u299D',\n  'angsph': '\\u2222',\n  'angzarr': '\\u237C',\n  'aogon': '\\u0105',\n  'aopf': '\\uD835\\uDD52',\n  'apE': '\\u2A70',\n  'apacir': '\\u2A6F',\n  'ape': '\\u224A',\n  'approxeq': '\\u224A',\n  'apid': '\\u224B',\n  'apos': '\\u0027',\n  'aring': '\\u00E5',\n  'ascr': '\\uD835\\uDCB6',\n  'ast': '\\u002A',\n  'midast': '\\u002A',\n  'atilde': '\\u00E3',\n  'auml': '\\u00E4',\n  'awint': '\\u2A11',\n  'bNot': '\\u2AED',\n  'backcong': '\\u224C',\n  'bcong': '\\u224C',\n  'backepsilon': '\\u03F6',\n  'bepsi': '\\u03F6',\n  'backprime': '\\u2035',\n  'bprime': '\\u2035',\n  'backsim': '\\u223D',\n  'bsim': '\\u223D',\n  'backsimeq': '\\u22CD',\n  'bsime': '\\u22CD',\n  'barvee': '\\u22BD',\n  'barwed': '\\u2305',\n  'barwedge': '\\u2305',\n  'bbrktbrk': '\\u23B6',\n  'bcy': '\\u0431',\n  'bdquo': '\\u201E',\n  'ldquor': '\\u201E',\n  'bemptyv': '\\u29B0',\n  'beta': '\\u03B2',\n  'beth': '\\u2136',\n  'between': '\\u226C',\n  'twixt': '\\u226C',\n  'bfr': '\\uD835\\uDD1F',\n  'bigcirc': '\\u25EF',\n  'xcirc': '\\u25EF',\n  'bigodot': '\\u2A00',\n  'xodot': '\\u2A00',\n  'bigoplus': '\\u2A01',\n  'xoplus': '\\u2A01',\n  'bigotimes': '\\u2A02',\n  'xotime': '\\u2A02',\n  'bigsqcup': '\\u2A06',\n  'xsqcup': '\\u2A06',\n  'bigstar': '\\u2605',\n  'starf': '\\u2605',\n  'bigtriangledown': '\\u25BD',\n  'xdtri': '\\u25BD',\n  'bigtriangleup': '\\u25B3',\n  'xutri': '\\u25B3',\n  'biguplus': '\\u2A04',\n  'xuplus': '\\u2A04',\n  'bkarow': '\\u290D',\n  'rbarr': '\\u290D',\n  'blacklozenge': '\\u29EB',\n  'lozf': '\\u29EB',\n  'blacktriangle': '\\u25B4',\n  'utrif': '\\u25B4',\n  'blacktriangledown': '\\u25BE',\n  'dtrif': '\\u25BE',\n  'blacktriangleleft': '\\u25C2',\n  'ltrif': '\\u25C2',\n  'blacktriangleright': '\\u25B8',\n  'rtrif': '\\u25B8',\n  'blank': '\\u2423',\n  'blk12': '\\u2592',\n  'blk14': '\\u2591',\n  'blk34': '\\u2593',\n  'block': '\\u2588',\n  'bne': '\\u003D\\u20E5',\n  'bnequiv': '\\u2261\\u20E5',\n  'bnot': '\\u2310',\n  'bopf': '\\uD835\\uDD53',\n  'bowtie': '\\u22C8',\n  'boxDL': '\\u2557',\n  'boxDR': '\\u2554',\n  'boxDl': '\\u2556',\n  'boxDr': '\\u2553',\n  'boxH': '\\u2550',\n  'boxHD': '\\u2566',\n  'boxHU': '\\u2569',\n  'boxHd': '\\u2564',\n  'boxHu': '\\u2567',\n  'boxUL': '\\u255D',\n  'boxUR': '\\u255A',\n  'boxUl': '\\u255C',\n  'boxUr': '\\u2559',\n  'boxV': '\\u2551',\n  'boxVH': '\\u256C',\n  'boxVL': '\\u2563',\n  'boxVR': '\\u2560',\n  'boxVh': '\\u256B',\n  'boxVl': '\\u2562',\n  'boxVr': '\\u255F',\n  'boxbox': '\\u29C9',\n  'boxdL': '\\u2555',\n  'boxdR': '\\u2552',\n  'boxdl': '\\u2510',\n  'boxdr': '\\u250C',\n  'boxhD': '\\u2565',\n  'boxhU': '\\u2568',\n  'boxhd': '\\u252C',\n  'boxhu': '\\u2534',\n  'boxminus': '\\u229F',\n  'minusb': '\\u229F',\n  'boxplus': '\\u229E',\n  'plusb': '\\u229E',\n  'boxtimes': '\\u22A0',\n  'timesb': '\\u22A0',\n  'boxuL': '\\u255B',\n  'boxuR': '\\u2558',\n  'boxul': '\\u2518',\n  'boxur': '\\u2514',\n  'boxv': '\\u2502',\n  'boxvH': '\\u256A',\n  'boxvL': '\\u2561',\n  'boxvR': '\\u255E',\n  'boxvh': '\\u253C',\n  'boxvl': '\\u2524',\n  'boxvr': '\\u251C',\n  'brvbar': '\\u00A6',\n  'bscr': '\\uD835\\uDCB7',\n  'bsemi': '\\u204F',\n  'bsol': '\\u005C',\n  'bsolb': '\\u29C5',\n  'bsolhsub': '\\u27C8',\n  'bull': '\\u2022',\n  'bullet': '\\u2022',\n  'bumpE': '\\u2AAE',\n  'cacute': '\\u0107',\n  'cap': '\\u2229',\n  'capand': '\\u2A44',\n  'capbrcup': '\\u2A49',\n  'capcap': '\\u2A4B',\n  'capcup': '\\u2A47',\n  'capdot': '\\u2A40',\n  'caps': '\\u2229\\uFE00',\n  'caret': '\\u2041',\n  'ccaps': '\\u2A4D',\n  'ccaron': '\\u010D',\n  'ccedil': '\\u00E7',\n  'ccirc': '\\u0109',\n  'ccups': '\\u2A4C',\n  'ccupssm': '\\u2A50',\n  'cdot': '\\u010B',\n  'cemptyv': '\\u29B2',\n  'cent': '\\u00A2',\n  'cfr': '\\uD835\\uDD20',\n  'chcy': '\\u0447',\n  'check': '\\u2713',\n  'checkmark': '\\u2713',\n  'chi': '\\u03C7',\n  'cir': '\\u25CB',\n  'cirE': '\\u29C3',\n  'circ': '\\u02C6',\n  'circeq': '\\u2257',\n  'cire': '\\u2257',\n  'circlearrowleft': '\\u21BA',\n  'olarr': '\\u21BA',\n  'circlearrowright': '\\u21BB',\n  'orarr': '\\u21BB',\n  'circledS': '\\u24C8',\n  'oS': '\\u24C8',\n  'circledast': '\\u229B',\n  'oast': '\\u229B',\n  'circledcirc': '\\u229A',\n  'ocir': '\\u229A',\n  'circleddash': '\\u229D',\n  'odash': '\\u229D',\n  'cirfnint': '\\u2A10',\n  'cirmid': '\\u2AEF',\n  'cirscir': '\\u29C2',\n  'clubs': '\\u2663',\n  'clubsuit': '\\u2663',\n  'colon': '\\u003A',\n  'comma': '\\u002C',\n  'commat': '\\u0040',\n  'comp': '\\u2201',\n  'complement': '\\u2201',\n  'congdot': '\\u2A6D',\n  'copf': '\\uD835\\uDD54',\n  'copysr': '\\u2117',\n  'crarr': '\\u21B5',\n  'cross': '\\u2717',\n  'cscr': '\\uD835\\uDCB8',\n  'csub': '\\u2ACF',\n  'csube': '\\u2AD1',\n  'csup': '\\u2AD0',\n  'csupe': '\\u2AD2',\n  'ctdot': '\\u22EF',\n  'cudarrl': '\\u2938',\n  'cudarrr': '\\u2935',\n  'cuepr': '\\u22DE',\n  'curlyeqprec': '\\u22DE',\n  'cuesc': '\\u22DF',\n  'curlyeqsucc': '\\u22DF',\n  'cularr': '\\u21B6',\n  'curvearrowleft': '\\u21B6',\n  'cularrp': '\\u293D',\n  'cup': '\\u222A',\n  'cupbrcap': '\\u2A48',\n  'cupcap': '\\u2A46',\n  'cupcup': '\\u2A4A',\n  'cupdot': '\\u228D',\n  'cupor': '\\u2A45',\n  'cups': '\\u222A\\uFE00',\n  'curarr': '\\u21B7',\n  'curvearrowright': '\\u21B7',\n  'curarrm': '\\u293C',\n  'curlyvee': '\\u22CE',\n  'cuvee': '\\u22CE',\n  'curlywedge': '\\u22CF',\n  'cuwed': '\\u22CF',\n  'curren': '\\u00A4',\n  'cwint': '\\u2231',\n  'cylcty': '\\u232D',\n  'dHar': '\\u2965',\n  'dagger': '\\u2020',\n  'daleth': '\\u2138',\n  'dash': '\\u2010',\n  'hyphen': '\\u2010',\n  'dbkarow': '\\u290F',\n  'rBarr': '\\u290F',\n  'dcaron': '\\u010F',\n  'dcy': '\\u0434',\n  'ddarr': '\\u21CA',\n  'downdownarrows': '\\u21CA',\n  'ddotseq': '\\u2A77',\n  'eDDot': '\\u2A77',\n  'deg': '\\u00B0',\n  'delta': '\\u03B4',\n  'demptyv': '\\u29B1',\n  'dfisht': '\\u297F',\n  'dfr': '\\uD835\\uDD21',\n  'diamondsuit': '\\u2666',\n  'diams': '\\u2666',\n  'digamma': '\\u03DD',\n  'gammad': '\\u03DD',\n  'disin': '\\u22F2',\n  'div': '\\u00F7',\n  'divide': '\\u00F7',\n  'divideontimes': '\\u22C7',\n  'divonx': '\\u22C7',\n  'djcy': '\\u0452',\n  'dlcorn': '\\u231E',\n  'llcorner': '\\u231E',\n  'dlcrop': '\\u230D',\n  'dollar': '\\u0024',\n  'dopf': '\\uD835\\uDD55',\n  'doteqdot': '\\u2251',\n  'eDot': '\\u2251',\n  'dotminus': '\\u2238',\n  'minusd': '\\u2238',\n  'dotplus': '\\u2214',\n  'plusdo': '\\u2214',\n  'dotsquare': '\\u22A1',\n  'sdotb': '\\u22A1',\n  'drcorn': '\\u231F',\n  'lrcorner': '\\u231F',\n  'drcrop': '\\u230C',\n  'dscr': '\\uD835\\uDCB9',\n  'dscy': '\\u0455',\n  'dsol': '\\u29F6',\n  'dstrok': '\\u0111',\n  'dtdot': '\\u22F1',\n  'dtri': '\\u25BF',\n  'triangledown': '\\u25BF',\n  'dwangle': '\\u29A6',\n  'dzcy': '\\u045F',\n  'dzigrarr': '\\u27FF',\n  'eacute': '\\u00E9',\n  'easter': '\\u2A6E',\n  'ecaron': '\\u011B',\n  'ecir': '\\u2256',\n  'eqcirc': '\\u2256',\n  'ecirc': '\\u00EA',\n  'ecolon': '\\u2255',\n  'eqcolon': '\\u2255',\n  'ecy': '\\u044D',\n  'edot': '\\u0117',\n  'efDot': '\\u2252',\n  'fallingdotseq': '\\u2252',\n  'efr': '\\uD835\\uDD22',\n  'eg': '\\u2A9A',\n  'egrave': '\\u00E8',\n  'egs': '\\u2A96',\n  'eqslantgtr': '\\u2A96',\n  'egsdot': '\\u2A98',\n  'el': '\\u2A99',\n  'elinters': '\\u23E7',\n  'ell': '\\u2113',\n  'els': '\\u2A95',\n  'eqslantless': '\\u2A95',\n  'elsdot': '\\u2A97',\n  'emacr': '\\u0113',\n  'empty': '\\u2205',\n  'emptyset': '\\u2205',\n  'emptyv': '\\u2205',\n  'varnothing': '\\u2205',\n  'emsp13': '\\u2004',\n  'emsp14': '\\u2005',\n  'emsp': '\\u2003',\n  'eng': '\\u014B',\n  'ensp': '\\u2002',\n  'eogon': '\\u0119',\n  'eopf': '\\uD835\\uDD56',\n  'epar': '\\u22D5',\n  'eparsl': '\\u29E3',\n  'eplus': '\\u2A71',\n  'epsi': '\\u03B5',\n  'epsilon': '\\u03B5',\n  'epsiv': '\\u03F5',\n  'straightepsilon': '\\u03F5',\n  'varepsilon': '\\u03F5',\n  'equals': '\\u003D',\n  'equest': '\\u225F',\n  'questeq': '\\u225F',\n  'equivDD': '\\u2A78',\n  'eqvparsl': '\\u29E5',\n  'erDot': '\\u2253',\n  'risingdotseq': '\\u2253',\n  'erarr': '\\u2971',\n  'escr': '\\u212F',\n  'eta': '\\u03B7',\n  'eth': '\\u00F0',\n  'euml': '\\u00EB',\n  'euro': '\\u20AC',\n  'excl': '\\u0021',\n  'fcy': '\\u0444',\n  'female': '\\u2640',\n  'ffilig': '\\uFB03',\n  'fflig': '\\uFB00',\n  'ffllig': '\\uFB04',\n  'ffr': '\\uD835\\uDD23',\n  'filig': '\\uFB01',\n  'fjlig': '\\u0066\\u006A',\n  'flat': '\\u266D',\n  'fllig': '\\uFB02',\n  'fltns': '\\u25B1',\n  'fnof': '\\u0192',\n  'fopf': '\\uD835\\uDD57',\n  'fork': '\\u22D4',\n  'pitchfork': '\\u22D4',\n  'forkv': '\\u2AD9',\n  'fpartint': '\\u2A0D',\n  'frac12': '\\u00BD',\n  'half': '\\u00BD',\n  'frac13': '\\u2153',\n  'frac14': '\\u00BC',\n  'frac15': '\\u2155',\n  'frac16': '\\u2159',\n  'frac18': '\\u215B',\n  'frac23': '\\u2154',\n  'frac25': '\\u2156',\n  'frac34': '\\u00BE',\n  'frac35': '\\u2157',\n  'frac38': '\\u215C',\n  'frac45': '\\u2158',\n  'frac56': '\\u215A',\n  'frac58': '\\u215D',\n  'frac78': '\\u215E',\n  'frasl': '\\u2044',\n  'frown': '\\u2322',\n  'sfrown': '\\u2322',\n  'fscr': '\\uD835\\uDCBB',\n  'gEl': '\\u2A8C',\n  'gtreqqless': '\\u2A8C',\n  'gacute': '\\u01F5',\n  'gamma': '\\u03B3',\n  'gap': '\\u2A86',\n  'gtrapprox': '\\u2A86',\n  'gbreve': '\\u011F',\n  'gcirc': '\\u011D',\n  'gcy': '\\u0433',\n  'gdot': '\\u0121',\n  'gescc': '\\u2AA9',\n  'gesdot': '\\u2A80',\n  'gesdoto': '\\u2A82',\n  'gesdotol': '\\u2A84',\n  'gesl': '\\u22DB\\uFE00',\n  'gesles': '\\u2A94',\n  'gfr': '\\uD835\\uDD24',\n  'gimel': '\\u2137',\n  'gjcy': '\\u0453',\n  'glE': '\\u2A92',\n  'gla': '\\u2AA5',\n  'glj': '\\u2AA4',\n  'gnE': '\\u2269',\n  'gneqq': '\\u2269',\n  'gnap': '\\u2A8A',\n  'gnapprox': '\\u2A8A',\n  'gne': '\\u2A88',\n  'gneq': '\\u2A88',\n  'gnsim': '\\u22E7',\n  'gopf': '\\uD835\\uDD58',\n  'gscr': '\\u210A',\n  'gsime': '\\u2A8E',\n  'gsiml': '\\u2A90',\n  'gtcc': '\\u2AA7',\n  'gtcir': '\\u2A7A',\n  'gtdot': '\\u22D7',\n  'gtrdot': '\\u22D7',\n  'gtlPar': '\\u2995',\n  'gtquest': '\\u2A7C',\n  'gtrarr': '\\u2978',\n  'gvertneqq': '\\u2269\\uFE00',\n  'gvnE': '\\u2269\\uFE00',\n  'hardcy': '\\u044A',\n  'harrcir': '\\u2948',\n  'harrw': '\\u21AD',\n  'leftrightsquigarrow': '\\u21AD',\n  'hbar': '\\u210F',\n  'hslash': '\\u210F',\n  'planck': '\\u210F',\n  'plankv': '\\u210F',\n  'hcirc': '\\u0125',\n  'hearts': '\\u2665',\n  'heartsuit': '\\u2665',\n  'hellip': '\\u2026',\n  'mldr': '\\u2026',\n  'hercon': '\\u22B9',\n  'hfr': '\\uD835\\uDD25',\n  'hksearow': '\\u2925',\n  'searhk': '\\u2925',\n  'hkswarow': '\\u2926',\n  'swarhk': '\\u2926',\n  'hoarr': '\\u21FF',\n  'homtht': '\\u223B',\n  'hookleftarrow': '\\u21A9',\n  'larrhk': '\\u21A9',\n  'hookrightarrow': '\\u21AA',\n  'rarrhk': '\\u21AA',\n  'hopf': '\\uD835\\uDD59',\n  'horbar': '\\u2015',\n  'hscr': '\\uD835\\uDCBD',\n  'hstrok': '\\u0127',\n  'hybull': '\\u2043',\n  'iacute': '\\u00ED',\n  'icirc': '\\u00EE',\n  'icy': '\\u0438',\n  'iecy': '\\u0435',\n  'iexcl': '\\u00A1',\n  'ifr': '\\uD835\\uDD26',\n  'igrave': '\\u00EC',\n  'iiiint': '\\u2A0C',\n  'qint': '\\u2A0C',\n  'iiint': '\\u222D',\n  'tint': '\\u222D',\n  'iinfin': '\\u29DC',\n  'iiota': '\\u2129',\n  'ijlig': '\\u0133',\n  'imacr': '\\u012B',\n  'imath': '\\u0131',\n  'inodot': '\\u0131',\n  'imof': '\\u22B7',\n  'imped': '\\u01B5',\n  'incare': '\\u2105',\n  'infin': '\\u221E',\n  'infintie': '\\u29DD',\n  'intcal': '\\u22BA',\n  'intercal': '\\u22BA',\n  'intlarhk': '\\u2A17',\n  'intprod': '\\u2A3C',\n  'iprod': '\\u2A3C',\n  'iocy': '\\u0451',\n  'iogon': '\\u012F',\n  'iopf': '\\uD835\\uDD5A',\n  'iota': '\\u03B9',\n  'iquest': '\\u00BF',\n  'iscr': '\\uD835\\uDCBE',\n  'isinE': '\\u22F9',\n  'isindot': '\\u22F5',\n  'isins': '\\u22F4',\n  'isinsv': '\\u22F3',\n  'itilde': '\\u0129',\n  'iukcy': '\\u0456',\n  'iuml': '\\u00EF',\n  'jcirc': '\\u0135',\n  'jcy': '\\u0439',\n  'jfr': '\\uD835\\uDD27',\n  'jmath': '\\u0237',\n  'jopf': '\\uD835\\uDD5B',\n  'jscr': '\\uD835\\uDCBF',\n  'jsercy': '\\u0458',\n  'jukcy': '\\u0454',\n  'kappa': '\\u03BA',\n  'kappav': '\\u03F0',\n  'varkappa': '\\u03F0',\n  'kcedil': '\\u0137',\n  'kcy': '\\u043A',\n  'kfr': '\\uD835\\uDD28',\n  'kgreen': '\\u0138',\n  'khcy': '\\u0445',\n  'kjcy': '\\u045C',\n  'kopf': '\\uD835\\uDD5C',\n  'kscr': '\\uD835\\uDCC0',\n  'lAtail': '\\u291B',\n  'lBarr': '\\u290E',\n  'lEg': '\\u2A8B',\n  'lesseqqgtr': '\\u2A8B',\n  'lHar': '\\u2962',\n  'lacute': '\\u013A',\n  'laemptyv': '\\u29B4',\n  'lambda': '\\u03BB',\n  'langd': '\\u2991',\n  'lap': '\\u2A85',\n  'lessapprox': '\\u2A85',\n  'laquo': '\\u00AB',\n  'larrbfs': '\\u291F',\n  'larrfs': '\\u291D',\n  'larrlp': '\\u21AB',\n  'looparrowleft': '\\u21AB',\n  'larrpl': '\\u2939',\n  'larrsim': '\\u2973',\n  'larrtl': '\\u21A2',\n  'leftarrowtail': '\\u21A2',\n  'lat': '\\u2AAB',\n  'latail': '\\u2919',\n  'late': '\\u2AAD',\n  'lates': '\\u2AAD\\uFE00',\n  'lbarr': '\\u290C',\n  'lbbrk': '\\u2772',\n  'lbrace': '\\u007B',\n  'lcub': '\\u007B',\n  'lbrack': '\\u005B',\n  'lsqb': '\\u005B',\n  'lbrke': '\\u298B',\n  'lbrksld': '\\u298F',\n  'lbrkslu': '\\u298D',\n  'lcaron': '\\u013E',\n  'lcedil': '\\u013C',\n  'lcy': '\\u043B',\n  'ldca': '\\u2936',\n  'ldrdhar': '\\u2967',\n  'ldrushar': '\\u294B',\n  'ldsh': '\\u21B2',\n  'le': '\\u2264',\n  'leq': '\\u2264',\n  'leftleftarrows': '\\u21C7',\n  'llarr': '\\u21C7',\n  'leftthreetimes': '\\u22CB',\n  'lthree': '\\u22CB',\n  'lescc': '\\u2AA8',\n  'lesdot': '\\u2A7F',\n  'lesdoto': '\\u2A81',\n  'lesdotor': '\\u2A83',\n  'lesg': '\\u22DA\\uFE00',\n  'lesges': '\\u2A93',\n  'lessdot': '\\u22D6',\n  'ltdot': '\\u22D6',\n  'lfisht': '\\u297C',\n  'lfr': '\\uD835\\uDD29',\n  'lgE': '\\u2A91',\n  'lharul': '\\u296A',\n  'lhblk': '\\u2584',\n  'ljcy': '\\u0459',\n  'llhard': '\\u296B',\n  'lltri': '\\u25FA',\n  'lmidot': '\\u0140',\n  'lmoust': '\\u23B0',\n  'lmoustache': '\\u23B0',\n  'lnE': '\\u2268',\n  'lneqq': '\\u2268',\n  'lnap': '\\u2A89',\n  'lnapprox': '\\u2A89',\n  'lne': '\\u2A87',\n  'lneq': '\\u2A87',\n  'lnsim': '\\u22E6',\n  'loang': '\\u27EC',\n  'loarr': '\\u21FD',\n  'longmapsto': '\\u27FC',\n  'xmap': '\\u27FC',\n  'looparrowright': '\\u21AC',\n  'rarrlp': '\\u21AC',\n  'lopar': '\\u2985',\n  'lopf': '\\uD835\\uDD5D',\n  'loplus': '\\u2A2D',\n  'lotimes': '\\u2A34',\n  'lowast': '\\u2217',\n  'loz': '\\u25CA',\n  'lozenge': '\\u25CA',\n  'lpar': '\\u0028',\n  'lparlt': '\\u2993',\n  'lrhard': '\\u296D',\n  'lrm': '\\u200E',\n  'lrtri': '\\u22BF',\n  'lsaquo': '\\u2039',\n  'lscr': '\\uD835\\uDCC1',\n  'lsime': '\\u2A8D',\n  'lsimg': '\\u2A8F',\n  'lsquor': '\\u201A',\n  'sbquo': '\\u201A',\n  'lstrok': '\\u0142',\n  'ltcc': '\\u2AA6',\n  'ltcir': '\\u2A79',\n  'ltimes': '\\u22C9',\n  'ltlarr': '\\u2976',\n  'ltquest': '\\u2A7B',\n  'ltrPar': '\\u2996',\n  'ltri': '\\u25C3',\n  'triangleleft': '\\u25C3',\n  'lurdshar': '\\u294A',\n  'luruhar': '\\u2966',\n  'lvertneqq': '\\u2268\\uFE00',\n  'lvnE': '\\u2268\\uFE00',\n  'mDDot': '\\u223A',\n  'macr': '\\u00AF',\n  'strns': '\\u00AF',\n  'male': '\\u2642',\n  'malt': '\\u2720',\n  'maltese': '\\u2720',\n  'marker': '\\u25AE',\n  'mcomma': '\\u2A29',\n  'mcy': '\\u043C',\n  'mdash': '\\u2014',\n  'mfr': '\\uD835\\uDD2A',\n  'mho': '\\u2127',\n  'micro': '\\u00B5',\n  'midcir': '\\u2AF0',\n  'minus': '\\u2212',\n  'minusdu': '\\u2A2A',\n  'mlcp': '\\u2ADB',\n  'models': '\\u22A7',\n  'mopf': '\\uD835\\uDD5E',\n  'mscr': '\\uD835\\uDCC2',\n  'mu': '\\u03BC',\n  'multimap': '\\u22B8',\n  'mumap': '\\u22B8',\n  'nGg': '\\u22D9\\u0338',\n  'nGt': '\\u226B\\u20D2',\n  'nLeftarrow': '\\u21CD',\n  'nlArr': '\\u21CD',\n  'nLeftrightarrow': '\\u21CE',\n  'nhArr': '\\u21CE',\n  'nLl': '\\u22D8\\u0338',\n  'nLt': '\\u226A\\u20D2',\n  'nRightarrow': '\\u21CF',\n  'nrArr': '\\u21CF',\n  'nVDash': '\\u22AF',\n  'nVdash': '\\u22AE',\n  'nacute': '\\u0144',\n  'nang': '\\u2220\\u20D2',\n  'napE': '\\u2A70\\u0338',\n  'napid': '\\u224B\\u0338',\n  'napos': '\\u0149',\n  'natur': '\\u266E',\n  'natural': '\\u266E',\n  'ncap': '\\u2A43',\n  'ncaron': '\\u0148',\n  'ncedil': '\\u0146',\n  'ncongdot': '\\u2A6D\\u0338',\n  'ncup': '\\u2A42',\n  'ncy': '\\u043D',\n  'ndash': '\\u2013',\n  'neArr': '\\u21D7',\n  'nearhk': '\\u2924',\n  'nedot': '\\u2250\\u0338',\n  'nesear': '\\u2928',\n  'toea': '\\u2928',\n  'nfr': '\\uD835\\uDD2B',\n  'nharr': '\\u21AE',\n  'nleftrightarrow': '\\u21AE',\n  'nhpar': '\\u2AF2',\n  'nis': '\\u22FC',\n  'nisd': '\\u22FA',\n  'njcy': '\\u045A',\n  'nlE': '\\u2266\\u0338',\n  'nleqq': '\\u2266\\u0338',\n  'nlarr': '\\u219A',\n  'nleftarrow': '\\u219A',\n  'nldr': '\\u2025',\n  'nopf': '\\uD835\\uDD5F',\n  'not': '\\u00AC',\n  'notinE': '\\u22F9\\u0338',\n  'notindot': '\\u22F5\\u0338',\n  'notinvb': '\\u22F7',\n  'notinvc': '\\u22F6',\n  'notnivb': '\\u22FE',\n  'notnivc': '\\u22FD',\n  'nparsl': '\\u2AFD\\u20E5',\n  'npart': '\\u2202\\u0338',\n  'npolint': '\\u2A14',\n  'nrarr': '\\u219B',\n  'nrightarrow': '\\u219B',\n  'nrarrc': '\\u2933\\u0338',\n  'nrarrw': '\\u219D\\u0338',\n  'nscr': '\\uD835\\uDCC3',\n  'nsub': '\\u2284',\n  'nsubE': '\\u2AC5\\u0338',\n  'nsubseteqq': '\\u2AC5\\u0338',\n  'nsup': '\\u2285',\n  'nsupE': '\\u2AC6\\u0338',\n  'nsupseteqq': '\\u2AC6\\u0338',\n  'ntilde': '\\u00F1',\n  'nu': '\\u03BD',\n  'num': '\\u0023',\n  'numero': '\\u2116',\n  'numsp': '\\u2007',\n  'nvDash': '\\u22AD',\n  'nvHarr': '\\u2904',\n  'nvap': '\\u224D\\u20D2',\n  'nvdash': '\\u22AC',\n  'nvge': '\\u2265\\u20D2',\n  'nvgt': '\\u003E\\u20D2',\n  'nvinfin': '\\u29DE',\n  'nvlArr': '\\u2902',\n  'nvle': '\\u2264\\u20D2',\n  'nvlt': '\\u003C\\u20D2',\n  'nvltrie': '\\u22B4\\u20D2',\n  'nvrArr': '\\u2903',\n  'nvrtrie': '\\u22B5\\u20D2',\n  'nvsim': '\\u223C\\u20D2',\n  'nwArr': '\\u21D6',\n  'nwarhk': '\\u2923',\n  'nwnear': '\\u2927',\n  'oacute': '\\u00F3',\n  'ocirc': '\\u00F4',\n  'ocy': '\\u043E',\n  'odblac': '\\u0151',\n  'odiv': '\\u2A38',\n  'odsold': '\\u29BC',\n  'oelig': '\\u0153',\n  'ofcir': '\\u29BF',\n  'ofr': '\\uD835\\uDD2C',\n  'ogon': '\\u02DB',\n  'ograve': '\\u00F2',\n  'ogt': '\\u29C1',\n  'ohbar': '\\u29B5',\n  'olcir': '\\u29BE',\n  'olcross': '\\u29BB',\n  'olt': '\\u29C0',\n  'omacr': '\\u014D',\n  'omega': '\\u03C9',\n  'omicron': '\\u03BF',\n  'omid': '\\u29B6',\n  'oopf': '\\uD835\\uDD60',\n  'opar': '\\u29B7',\n  'operp': '\\u29B9',\n  'or': '\\u2228',\n  'vee': '\\u2228',\n  'ord': '\\u2A5D',\n  'order': '\\u2134',\n  'orderof': '\\u2134',\n  'oscr': '\\u2134',\n  'ordf': '\\u00AA',\n  'ordm': '\\u00BA',\n  'origof': '\\u22B6',\n  'oror': '\\u2A56',\n  'orslope': '\\u2A57',\n  'orv': '\\u2A5B',\n  'oslash': '\\u00F8',\n  'osol': '\\u2298',\n  'otilde': '\\u00F5',\n  'otimesas': '\\u2A36',\n  'ouml': '\\u00F6',\n  'ovbar': '\\u233D',\n  'para': '\\u00B6',\n  'parsim': '\\u2AF3',\n  'parsl': '\\u2AFD',\n  'pcy': '\\u043F',\n  'percnt': '\\u0025',\n  'period': '\\u002E',\n  'permil': '\\u2030',\n  'pertenk': '\\u2031',\n  'pfr': '\\uD835\\uDD2D',\n  'phi': '\\u03C6',\n  'phiv': '\\u03D5',\n  'straightphi': '\\u03D5',\n  'varphi': '\\u03D5',\n  'phone': '\\u260E',\n  'pi': '\\u03C0',\n  'piv': '\\u03D6',\n  'varpi': '\\u03D6',\n  'planckh': '\\u210E',\n  'plus': '\\u002B',\n  'plusacir': '\\u2A23',\n  'pluscir': '\\u2A22',\n  'plusdu': '\\u2A25',\n  'pluse': '\\u2A72',\n  'plussim': '\\u2A26',\n  'plustwo': '\\u2A27',\n  'pointint': '\\u2A15',\n  'popf': '\\uD835\\uDD61',\n  'pound': '\\u00A3',\n  'prE': '\\u2AB3',\n  'prap': '\\u2AB7',\n  'precapprox': '\\u2AB7',\n  'precnapprox': '\\u2AB9',\n  'prnap': '\\u2AB9',\n  'precneqq': '\\u2AB5',\n  'prnE': '\\u2AB5',\n  'precnsim': '\\u22E8',\n  'prnsim': '\\u22E8',\n  'prime': '\\u2032',\n  'profalar': '\\u232E',\n  'profline': '\\u2312',\n  'profsurf': '\\u2313',\n  'prurel': '\\u22B0',\n  'pscr': '\\uD835\\uDCC5',\n  'psi': '\\u03C8',\n  'puncsp': '\\u2008',\n  'qfr': '\\uD835\\uDD2E',\n  'qopf': '\\uD835\\uDD62',\n  'qprime': '\\u2057',\n  'qscr': '\\uD835\\uDCC6',\n  'quatint': '\\u2A16',\n  'quest': '\\u003F',\n  'rAtail': '\\u291C',\n  'rHar': '\\u2964',\n  'race': '\\u223D\\u0331',\n  'racute': '\\u0155',\n  'raemptyv': '\\u29B3',\n  'rangd': '\\u2992',\n  'range': '\\u29A5',\n  'raquo': '\\u00BB',\n  'rarrap': '\\u2975',\n  'rarrbfs': '\\u2920',\n  'rarrc': '\\u2933',\n  'rarrfs': '\\u291E',\n  'rarrpl': '\\u2945',\n  'rarrsim': '\\u2974',\n  'rarrtl': '\\u21A3',\n  'rightarrowtail': '\\u21A3',\n  'rarrw': '\\u219D',\n  'rightsquigarrow': '\\u219D',\n  'ratail': '\\u291A',\n  'ratio': '\\u2236',\n  'rbbrk': '\\u2773',\n  'rbrace': '\\u007D',\n  'rcub': '\\u007D',\n  'rbrack': '\\u005D',\n  'rsqb': '\\u005D',\n  'rbrke': '\\u298C',\n  'rbrksld': '\\u298E',\n  'rbrkslu': '\\u2990',\n  'rcaron': '\\u0159',\n  'rcedil': '\\u0157',\n  'rcy': '\\u0440',\n  'rdca': '\\u2937',\n  'rdldhar': '\\u2969',\n  'rdsh': '\\u21B3',\n  'rect': '\\u25AD',\n  'rfisht': '\\u297D',\n  'rfr': '\\uD835\\uDD2F',\n  'rharul': '\\u296C',\n  'rho': '\\u03C1',\n  'rhov': '\\u03F1',\n  'varrho': '\\u03F1',\n  'rightrightarrows': '\\u21C9',\n  'rrarr': '\\u21C9',\n  'rightthreetimes': '\\u22CC',\n  'rthree': '\\u22CC',\n  'ring': '\\u02DA',\n  'rlm': '\\u200F',\n  'rmoust': '\\u23B1',\n  'rmoustache': '\\u23B1',\n  'rnmid': '\\u2AEE',\n  'roang': '\\u27ED',\n  'roarr': '\\u21FE',\n  'ropar': '\\u2986',\n  'ropf': '\\uD835\\uDD63',\n  'roplus': '\\u2A2E',\n  'rotimes': '\\u2A35',\n  'rpar': '\\u0029',\n  'rpargt': '\\u2994',\n  'rppolint': '\\u2A12',\n  'rsaquo': '\\u203A',\n  'rscr': '\\uD835\\uDCC7',\n  'rtimes': '\\u22CA',\n  'rtri': '\\u25B9',\n  'triangleright': '\\u25B9',\n  'rtriltri': '\\u29CE',\n  'ruluhar': '\\u2968',\n  'rx': '\\u211E',\n  'sacute': '\\u015B',\n  'scE': '\\u2AB4',\n  'scap': '\\u2AB8',\n  'succapprox': '\\u2AB8',\n  'scaron': '\\u0161',\n  'scedil': '\\u015F',\n  'scirc': '\\u015D',\n  'scnE': '\\u2AB6',\n  'succneqq': '\\u2AB6',\n  'scnap': '\\u2ABA',\n  'succnapprox': '\\u2ABA',\n  'scnsim': '\\u22E9',\n  'succnsim': '\\u22E9',\n  'scpolint': '\\u2A13',\n  'scy': '\\u0441',\n  'sdot': '\\u22C5',\n  'sdote': '\\u2A66',\n  'seArr': '\\u21D8',\n  'sect': '\\u00A7',\n  'semi': '\\u003B',\n  'seswar': '\\u2929',\n  'tosa': '\\u2929',\n  'sext': '\\u2736',\n  'sfr': '\\uD835\\uDD30',\n  'sharp': '\\u266F',\n  'shchcy': '\\u0449',\n  'shcy': '\\u0448',\n  'shy': '\\u00AD',\n  'sigma': '\\u03C3',\n  'sigmaf': '\\u03C2',\n  'sigmav': '\\u03C2',\n  'varsigma': '\\u03C2',\n  'simdot': '\\u2A6A',\n  'simg': '\\u2A9E',\n  'simgE': '\\u2AA0',\n  'siml': '\\u2A9D',\n  'simlE': '\\u2A9F',\n  'simne': '\\u2246',\n  'simplus': '\\u2A24',\n  'simrarr': '\\u2972',\n  'smashp': '\\u2A33',\n  'smeparsl': '\\u29E4',\n  'smile': '\\u2323',\n  'ssmile': '\\u2323',\n  'smt': '\\u2AAA',\n  'smte': '\\u2AAC',\n  'smtes': '\\u2AAC\\uFE00',\n  'softcy': '\\u044C',\n  'sol': '\\u002F',\n  'solb': '\\u29C4',\n  'solbar': '\\u233F',\n  'sopf': '\\uD835\\uDD64',\n  'spades': '\\u2660',\n  'spadesuit': '\\u2660',\n  'sqcaps': '\\u2293\\uFE00',\n  'sqcups': '\\u2294\\uFE00',\n  'sscr': '\\uD835\\uDCC8',\n  'star': '\\u2606',\n  'sub': '\\u2282',\n  'subset': '\\u2282',\n  'subE': '\\u2AC5',\n  'subseteqq': '\\u2AC5',\n  'subdot': '\\u2ABD',\n  'subedot': '\\u2AC3',\n  'submult': '\\u2AC1',\n  'subnE': '\\u2ACB',\n  'subsetneqq': '\\u2ACB',\n  'subne': '\\u228A',\n  'subsetneq': '\\u228A',\n  'subplus': '\\u2ABF',\n  'subrarr': '\\u2979',\n  'subsim': '\\u2AC7',\n  'subsub': '\\u2AD5',\n  'subsup': '\\u2AD3',\n  'sung': '\\u266A',\n  'sup1': '\\u00B9',\n  'sup2': '\\u00B2',\n  'sup3': '\\u00B3',\n  'supE': '\\u2AC6',\n  'supseteqq': '\\u2AC6',\n  'supdot': '\\u2ABE',\n  'supdsub': '\\u2AD8',\n  'supedot': '\\u2AC4',\n  'suphsol': '\\u27C9',\n  'suphsub': '\\u2AD7',\n  'suplarr': '\\u297B',\n  'supmult': '\\u2AC2',\n  'supnE': '\\u2ACC',\n  'supsetneqq': '\\u2ACC',\n  'supne': '\\u228B',\n  'supsetneq': '\\u228B',\n  'supplus': '\\u2AC0',\n  'supsim': '\\u2AC8',\n  'supsub': '\\u2AD4',\n  'supsup': '\\u2AD6',\n  'swArr': '\\u21D9',\n  'swnwar': '\\u292A',\n  'szlig': '\\u00DF',\n  'target': '\\u2316',\n  'tau': '\\u03C4',\n  'tcaron': '\\u0165',\n  'tcedil': '\\u0163',\n  'tcy': '\\u0442',\n  'telrec': '\\u2315',\n  'tfr': '\\uD835\\uDD31',\n  'theta': '\\u03B8',\n  'thetasym': '\\u03D1',\n  'thetav': '\\u03D1',\n  'vartheta': '\\u03D1',\n  'thorn': '\\u00FE',\n  'times': '\\u00D7',\n  'timesbar': '\\u2A31',\n  'timesd': '\\u2A30',\n  'topbot': '\\u2336',\n  'topcir': '\\u2AF1',\n  'topf': '\\uD835\\uDD65',\n  'topfork': '\\u2ADA',\n  'tprime': '\\u2034',\n  'triangle': '\\u25B5',\n  'utri': '\\u25B5',\n  'triangleq': '\\u225C',\n  'trie': '\\u225C',\n  'tridot': '\\u25EC',\n  'triminus': '\\u2A3A',\n  'triplus': '\\u2A39',\n  'trisb': '\\u29CD',\n  'tritime': '\\u2A3B',\n  'trpezium': '\\u23E2',\n  'tscr': '\\uD835\\uDCC9',\n  'tscy': '\\u0446',\n  'tshcy': '\\u045B',\n  'tstrok': '\\u0167',\n  'uHar': '\\u2963',\n  'uacute': '\\u00FA',\n  'ubrcy': '\\u045E',\n  'ubreve': '\\u016D',\n  'ucirc': '\\u00FB',\n  'ucy': '\\u0443',\n  'udblac': '\\u0171',\n  'ufisht': '\\u297E',\n  'ufr': '\\uD835\\uDD32',\n  'ugrave': '\\u00F9',\n  'uhblk': '\\u2580',\n  'ulcorn': '\\u231C',\n  'ulcorner': '\\u231C',\n  'ulcrop': '\\u230F',\n  'ultri': '\\u25F8',\n  'umacr': '\\u016B',\n  'uogon': '\\u0173',\n  'uopf': '\\uD835\\uDD66',\n  'upsi': '\\u03C5',\n  'upsilon': '\\u03C5',\n  'upuparrows': '\\u21C8',\n  'uuarr': '\\u21C8',\n  'urcorn': '\\u231D',\n  'urcorner': '\\u231D',\n  'urcrop': '\\u230E',\n  'uring': '\\u016F',\n  'urtri': '\\u25F9',\n  'uscr': '\\uD835\\uDCCA',\n  'utdot': '\\u22F0',\n  'utilde': '\\u0169',\n  'uuml': '\\u00FC',\n  'uwangle': '\\u29A7',\n  'vBar': '\\u2AE8',\n  'vBarv': '\\u2AE9',\n  'vangrt': '\\u299C',\n  'varsubsetneq': '\\u228A\\uFE00',\n  'vsubne': '\\u228A\\uFE00',\n  'varsubsetneqq': '\\u2ACB\\uFE00',\n  'vsubnE': '\\u2ACB\\uFE00',\n  'varsupsetneq': '\\u228B\\uFE00',\n  'vsupne': '\\u228B\\uFE00',\n  'varsupsetneqq': '\\u2ACC\\uFE00',\n  'vsupnE': '\\u2ACC\\uFE00',\n  'vcy': '\\u0432',\n  'veebar': '\\u22BB',\n  'veeeq': '\\u225A',\n  'vellip': '\\u22EE',\n  'vfr': '\\uD835\\uDD33',\n  'vopf': '\\uD835\\uDD67',\n  'vscr': '\\uD835\\uDCCB',\n  'vzigzag': '\\u299A',\n  'wcirc': '\\u0175',\n  'wedbar': '\\u2A5F',\n  'wedgeq': '\\u2259',\n  'weierp': '\\u2118',\n  'wp': '\\u2118',\n  'wfr': '\\uD835\\uDD34',\n  'wopf': '\\uD835\\uDD68',\n  'wscr': '\\uD835\\uDCCC',\n  'xfr': '\\uD835\\uDD35',\n  'xi': '\\u03BE',\n  'xnis': '\\u22FB',\n  'xopf': '\\uD835\\uDD69',\n  'xscr': '\\uD835\\uDCCD',\n  'yacute': '\\u00FD',\n  'yacy': '\\u044F',\n  'ycirc': '\\u0177',\n  'ycy': '\\u044B',\n  'yen': '\\u00A5',\n  'yfr': '\\uD835\\uDD36',\n  'yicy': '\\u0457',\n  'yopf': '\\uD835\\uDD6A',\n  'yscr': '\\uD835\\uDCCE',\n  'yucy': '\\u044E',\n  'yuml': '\\u00FF',\n  'zacute': '\\u017A',\n  'zcaron': '\\u017E',\n  'zcy': '\\u0437',\n  'zdot': '\\u017C',\n  'zeta': '\\u03B6',\n  'zfr': '\\uD835\\uDD37',\n  'zhcy': '\\u0436',\n  'zigrarr': '\\u21DD',\n  'zopf': '\\uD835\\uDD6B',\n  'zscr': '\\uD835\\uDCCF',\n  'zwj': '\\u200D',\n  'zwnj': '\\u200C'\n};\n// The &ngsp; pseudo-entity is denoting a space.\n// 0xE500 is a PUA (Private Use Areas) unicode character\n// This is inspired by the Angular Dart implementation.\nconst NGSP_UNICODE = '\\uE500';\nNAMED_ENTITIES['ngsp'] = NGSP_UNICODE;\nclass TokenError extends ParseError {\n  constructor(errorMsg, tokenType, span) {\n    super(span, errorMsg);\n    this.tokenType = tokenType;\n  }\n}\nclass TokenizeResult {\n  constructor(tokens, errors, nonNormalizedIcuExpressions) {\n    this.tokens = tokens;\n    this.errors = errors;\n    this.nonNormalizedIcuExpressions = nonNormalizedIcuExpressions;\n  }\n}\nfunction tokenize(source, url, getTagDefinition, options = {}) {\n  const tokenizer = new _Tokenizer(new ParseSourceFile(source, url), getTagDefinition, options);\n  tokenizer.tokenize();\n  return new TokenizeResult(mergeTextTokens(tokenizer.tokens), tokenizer.errors, tokenizer.nonNormalizedIcuExpressions);\n}\nconst _CR_OR_CRLF_REGEXP = /\\r\\n?/g;\nfunction _unexpectedCharacterErrorMsg(charCode) {\n  const char = charCode === $EOF ? 'EOF' : String.fromCharCode(charCode);\n  return `Unexpected character \"${char}\"`;\n}\nfunction _unknownEntityErrorMsg(entitySrc) {\n  return `Unknown entity \"${entitySrc}\" - use the \"&#<decimal>;\" or  \"&#x<hex>;\" syntax`;\n}\nfunction _unparsableEntityErrorMsg(type, entityStr) {\n  return `Unable to parse entity \"${entityStr}\" - ${type} character reference entities must end with \";\"`;\n}\nvar CharacterReferenceType;\n(function (CharacterReferenceType) {\n  CharacterReferenceType[\"HEX\"] = \"hexadecimal\";\n  CharacterReferenceType[\"DEC\"] = \"decimal\";\n})(CharacterReferenceType || (CharacterReferenceType = {}));\nclass _ControlFlowError {\n  constructor(error) {\n    this.error = error;\n  }\n}\n// See https://www.w3.org/TR/html51/syntax.html#writing-html-documents\nclass _Tokenizer {\n  /**\n   * @param _file The html source file being tokenized.\n   * @param _getTagDefinition A function that will retrieve a tag definition for a given tag name.\n   * @param options Configuration of the tokenization.\n   */\n  constructor(_file, _getTagDefinition, options) {\n    this._getTagDefinition = _getTagDefinition;\n    this._currentTokenStart = null;\n    this._currentTokenType = null;\n    this._expansionCaseStack = [];\n    this._inInterpolation = false;\n    this.tokens = [];\n    this.errors = [];\n    this.nonNormalizedIcuExpressions = [];\n    this._tokenizeIcu = options.tokenizeExpansionForms || false;\n    this._interpolationConfig = options.interpolationConfig || DEFAULT_INTERPOLATION_CONFIG;\n    this._leadingTriviaCodePoints = options.leadingTriviaChars && options.leadingTriviaChars.map(c => c.codePointAt(0) || 0);\n    const range = options.range || {\n      endPos: _file.content.length,\n      startPos: 0,\n      startLine: 0,\n      startCol: 0\n    };\n    this._cursor = options.escapedString ? new EscapedCharacterCursor(_file, range) : new PlainCharacterCursor(_file, range);\n    this._preserveLineEndings = options.preserveLineEndings || false;\n    this._i18nNormalizeLineEndingsInICUs = options.i18nNormalizeLineEndingsInICUs || false;\n    this._tokenizeBlocks = options.tokenizeBlocks ?? true;\n    this._tokenizeLet = options.tokenizeLet ?? true;\n    try {\n      this._cursor.init();\n    } catch (e) {\n      this.handleError(e);\n    }\n  }\n  _processCarriageReturns(content) {\n    if (this._preserveLineEndings) {\n      return content;\n    }\n    // https://www.w3.org/TR/html51/syntax.html#preprocessing-the-input-stream\n    // In order to keep the original position in the source, we can not\n    // pre-process it.\n    // Instead CRs are processed right before instantiating the tokens.\n    return content.replace(_CR_OR_CRLF_REGEXP, '\\n');\n  }\n  tokenize() {\n    while (this._cursor.peek() !== $EOF) {\n      const start = this._cursor.clone();\n      try {\n        if (this._attemptCharCode($LT)) {\n          if (this._attemptCharCode($BANG)) {\n            if (this._attemptCharCode($LBRACKET)) {\n              this._consumeCdata(start);\n            } else if (this._attemptCharCode($MINUS)) {\n              this._consumeComment(start);\n            } else {\n              this._consumeDocType(start);\n            }\n          } else if (this._attemptCharCode($SLASH)) {\n            this._consumeTagClose(start);\n          } else {\n            this._consumeTagOpen(start);\n          }\n        } else if (this._tokenizeLet &&\n        // Use `peek` instead of `attempCharCode` since we\n        // don't want to advance in case it's not `@let`.\n        this._cursor.peek() === $AT && !this._inInterpolation && this._attemptStr('@let')) {\n          this._consumeLetDeclaration(start);\n        } else if (this._tokenizeBlocks && this._attemptCharCode($AT)) {\n          this._consumeBlockStart(start);\n        } else if (this._tokenizeBlocks && !this._inInterpolation && !this._isInExpansionCase() && !this._isInExpansionForm() && this._attemptCharCode($RBRACE)) {\n          this._consumeBlockEnd(start);\n        } else if (!(this._tokenizeIcu && this._tokenizeExpansionForm())) {\n          // In (possibly interpolated) text the end of the text is given by `isTextEnd()`, while\n          // the premature end of an interpolation is given by the start of a new HTML element.\n          this._consumeWithInterpolation(5 /* TokenType.TEXT */, 8 /* TokenType.INTERPOLATION */, () => this._isTextEnd(), () => this._isTagStart());\n        }\n      } catch (e) {\n        this.handleError(e);\n      }\n    }\n    this._beginToken(33 /* TokenType.EOF */);\n    this._endToken([]);\n  }\n  _getBlockName() {\n    // This allows us to capture up something like `@else if`, but not `@ if`.\n    let spacesInNameAllowed = false;\n    const nameCursor = this._cursor.clone();\n    this._attemptCharCodeUntilFn(code => {\n      if (isWhitespace(code)) {\n        return !spacesInNameAllowed;\n      }\n      if (isBlockNameChar(code)) {\n        spacesInNameAllowed = true;\n        return false;\n      }\n      return true;\n    });\n    return this._cursor.getChars(nameCursor).trim();\n  }\n  _consumeBlockStart(start) {\n    this._beginToken(24 /* TokenType.BLOCK_OPEN_START */, start);\n    const startToken = this._endToken([this._getBlockName()]);\n    if (this._cursor.peek() === $LPAREN) {\n      // Advance past the opening paren.\n      this._cursor.advance();\n      // Capture the parameters.\n      this._consumeBlockParameters();\n      // Allow spaces before the closing paren.\n      this._attemptCharCodeUntilFn(isNotWhitespace);\n      if (this._attemptCharCode($RPAREN)) {\n        // Allow spaces after the paren.\n        this._attemptCharCodeUntilFn(isNotWhitespace);\n      } else {\n        startToken.type = 28 /* TokenType.INCOMPLETE_BLOCK_OPEN */;\n        return;\n      }\n    }\n    if (this._attemptCharCode($LBRACE)) {\n      this._beginToken(25 /* TokenType.BLOCK_OPEN_END */);\n      this._endToken([]);\n    } else {\n      startToken.type = 28 /* TokenType.INCOMPLETE_BLOCK_OPEN */;\n    }\n  }\n  _consumeBlockEnd(start) {\n    this._beginToken(26 /* TokenType.BLOCK_CLOSE */, start);\n    this._endToken([]);\n  }\n  _consumeBlockParameters() {\n    // Trim the whitespace until the first parameter.\n    this._attemptCharCodeUntilFn(isBlockParameterChar);\n    while (this._cursor.peek() !== $RPAREN && this._cursor.peek() !== $EOF) {\n      this._beginToken(27 /* TokenType.BLOCK_PARAMETER */);\n      const start = this._cursor.clone();\n      let inQuote = null;\n      let openParens = 0;\n      // Consume the parameter until the next semicolon or brace.\n      // Note that we skip over semicolons/braces inside of strings.\n      while (this._cursor.peek() !== $SEMICOLON && this._cursor.peek() !== $EOF || inQuote !== null) {\n        const char = this._cursor.peek();\n        // Skip to the next character if it was escaped.\n        if (char === $BACKSLASH) {\n          this._cursor.advance();\n        } else if (char === inQuote) {\n          inQuote = null;\n        } else if (inQuote === null && isQuote(char)) {\n          inQuote = char;\n        } else if (char === $LPAREN && inQuote === null) {\n          openParens++;\n        } else if (char === $RPAREN && inQuote === null) {\n          if (openParens === 0) {\n            break;\n          } else if (openParens > 0) {\n            openParens--;\n          }\n        }\n        this._cursor.advance();\n      }\n      this._endToken([this._cursor.getChars(start)]);\n      // Skip to the next parameter.\n      this._attemptCharCodeUntilFn(isBlockParameterChar);\n    }\n  }\n  _consumeLetDeclaration(start) {\n    this._beginToken(29 /* TokenType.LET_START */, start);\n    // Require at least one white space after the `@let`.\n    if (isWhitespace(this._cursor.peek())) {\n      this._attemptCharCodeUntilFn(isNotWhitespace);\n    } else {\n      const token = this._endToken([this._cursor.getChars(start)]);\n      token.type = 32 /* TokenType.INCOMPLETE_LET */;\n      return;\n    }\n    const startToken = this._endToken([this._getLetDeclarationName()]);\n    // Skip over white space before the equals character.\n    this._attemptCharCodeUntilFn(isNotWhitespace);\n    // Expect an equals sign.\n    if (!this._attemptCharCode($EQ)) {\n      startToken.type = 32 /* TokenType.INCOMPLETE_LET */;\n      return;\n    }\n    // Skip spaces after the equals.\n    this._attemptCharCodeUntilFn(code => isNotWhitespace(code) && !isNewLine(code));\n    this._consumeLetDeclarationValue();\n    // Terminate the `@let` with a semicolon.\n    const endChar = this._cursor.peek();\n    if (endChar === $SEMICOLON) {\n      this._beginToken(31 /* TokenType.LET_END */);\n      this._endToken([]);\n      this._cursor.advance();\n    } else {\n      startToken.type = 32 /* TokenType.INCOMPLETE_LET */;\n      startToken.sourceSpan = this._cursor.getSpan(start);\n    }\n  }\n  _getLetDeclarationName() {\n    const nameCursor = this._cursor.clone();\n    let allowDigit = false;\n    this._attemptCharCodeUntilFn(code => {\n      if (isAsciiLetter(code) || code === $$ || code === $_ ||\n      // `@let` names can't start with a digit, but digits are valid anywhere else in the name.\n      allowDigit && isDigit(code)) {\n        allowDigit = true;\n        return false;\n      }\n      return true;\n    });\n    return this._cursor.getChars(nameCursor).trim();\n  }\n  _consumeLetDeclarationValue() {\n    const start = this._cursor.clone();\n    this._beginToken(30 /* TokenType.LET_VALUE */, start);\n    while (this._cursor.peek() !== $EOF) {\n      const char = this._cursor.peek();\n      // `@let` declarations terminate with a semicolon.\n      if (char === $SEMICOLON) {\n        break;\n      }\n      // If we hit a quote, skip over its content since we don't care what's inside.\n      if (isQuote(char)) {\n        this._cursor.advance();\n        this._attemptCharCodeUntilFn(inner => {\n          if (inner === $BACKSLASH) {\n            this._cursor.advance();\n            return false;\n          }\n          return inner === char;\n        });\n      }\n      this._cursor.advance();\n    }\n    this._endToken([this._cursor.getChars(start)]);\n  }\n  /**\n   * @returns whether an ICU token has been created\n   * @internal\n   */\n  _tokenizeExpansionForm() {\n    if (this.isExpansionFormStart()) {\n      this._consumeExpansionFormStart();\n      return true;\n    }\n    if (isExpansionCaseStart(this._cursor.peek()) && this._isInExpansionForm()) {\n      this._consumeExpansionCaseStart();\n      return true;\n    }\n    if (this._cursor.peek() === $RBRACE) {\n      if (this._isInExpansionCase()) {\n        this._consumeExpansionCaseEnd();\n        return true;\n      }\n      if (this._isInExpansionForm()) {\n        this._consumeExpansionFormEnd();\n        return true;\n      }\n    }\n    return false;\n  }\n  _beginToken(type, start = this._cursor.clone()) {\n    this._currentTokenStart = start;\n    this._currentTokenType = type;\n  }\n  _endToken(parts, end) {\n    if (this._currentTokenStart === null) {\n      throw new TokenError('Programming error - attempted to end a token when there was no start to the token', this._currentTokenType, this._cursor.getSpan(end));\n    }\n    if (this._currentTokenType === null) {\n      throw new TokenError('Programming error - attempted to end a token which has no token type', null, this._cursor.getSpan(this._currentTokenStart));\n    }\n    const token = {\n      type: this._currentTokenType,\n      parts,\n      sourceSpan: (end ?? this._cursor).getSpan(this._currentTokenStart, this._leadingTriviaCodePoints)\n    };\n    this.tokens.push(token);\n    this._currentTokenStart = null;\n    this._currentTokenType = null;\n    return token;\n  }\n  _createError(msg, span) {\n    if (this._isInExpansionForm()) {\n      msg += ` (Do you have an unescaped \"{\" in your template? Use \"{{ '{' }}\") to escape it.)`;\n    }\n    const error = new TokenError(msg, this._currentTokenType, span);\n    this._currentTokenStart = null;\n    this._currentTokenType = null;\n    return new _ControlFlowError(error);\n  }\n  handleError(e) {\n    if (e instanceof CursorError) {\n      e = this._createError(e.msg, this._cursor.getSpan(e.cursor));\n    }\n    if (e instanceof _ControlFlowError) {\n      this.errors.push(e.error);\n    } else {\n      throw e;\n    }\n  }\n  _attemptCharCode(charCode) {\n    if (this._cursor.peek() === charCode) {\n      this._cursor.advance();\n      return true;\n    }\n    return false;\n  }\n  _attemptCharCodeCaseInsensitive(charCode) {\n    if (compareCharCodeCaseInsensitive(this._cursor.peek(), charCode)) {\n      this._cursor.advance();\n      return true;\n    }\n    return false;\n  }\n  _requireCharCode(charCode) {\n    const location = this._cursor.clone();\n    if (!this._attemptCharCode(charCode)) {\n      throw this._createError(_unexpectedCharacterErrorMsg(this._cursor.peek()), this._cursor.getSpan(location));\n    }\n  }\n  _attemptStr(chars) {\n    const len = chars.length;\n    if (this._cursor.charsLeft() < len) {\n      return false;\n    }\n    const initialPosition = this._cursor.clone();\n    for (let i = 0; i < len; i++) {\n      if (!this._attemptCharCode(chars.charCodeAt(i))) {\n        // If attempting to parse the string fails, we want to reset the parser\n        // to where it was before the attempt\n        this._cursor = initialPosition;\n        return false;\n      }\n    }\n    return true;\n  }\n  _attemptStrCaseInsensitive(chars) {\n    for (let i = 0; i < chars.length; i++) {\n      if (!this._attemptCharCodeCaseInsensitive(chars.charCodeAt(i))) {\n        return false;\n      }\n    }\n    return true;\n  }\n  _requireStr(chars) {\n    const location = this._cursor.clone();\n    if (!this._attemptStr(chars)) {\n      throw this._createError(_unexpectedCharacterErrorMsg(this._cursor.peek()), this._cursor.getSpan(location));\n    }\n  }\n  _attemptCharCodeUntilFn(predicate) {\n    while (!predicate(this._cursor.peek())) {\n      this._cursor.advance();\n    }\n  }\n  _requireCharCodeUntilFn(predicate, len) {\n    const start = this._cursor.clone();\n    this._attemptCharCodeUntilFn(predicate);\n    if (this._cursor.diff(start) < len) {\n      throw this._createError(_unexpectedCharacterErrorMsg(this._cursor.peek()), this._cursor.getSpan(start));\n    }\n  }\n  _attemptUntilChar(char) {\n    while (this._cursor.peek() !== char) {\n      this._cursor.advance();\n    }\n  }\n  _readChar() {\n    // Don't rely upon reading directly from `_input` as the actual char value\n    // may have been generated from an escape sequence.\n    const char = String.fromCodePoint(this._cursor.peek());\n    this._cursor.advance();\n    return char;\n  }\n  _consumeEntity(textTokenType) {\n    this._beginToken(9 /* TokenType.ENCODED_ENTITY */);\n    const start = this._cursor.clone();\n    this._cursor.advance();\n    if (this._attemptCharCode($HASH)) {\n      const isHex = this._attemptCharCode($x) || this._attemptCharCode($X);\n      const codeStart = this._cursor.clone();\n      this._attemptCharCodeUntilFn(isDigitEntityEnd);\n      if (this._cursor.peek() != $SEMICOLON) {\n        // Advance cursor to include the peeked character in the string provided to the error\n        // message.\n        this._cursor.advance();\n        const entityType = isHex ? CharacterReferenceType.HEX : CharacterReferenceType.DEC;\n        throw this._createError(_unparsableEntityErrorMsg(entityType, this._cursor.getChars(start)), this._cursor.getSpan());\n      }\n      const strNum = this._cursor.getChars(codeStart);\n      this._cursor.advance();\n      try {\n        const charCode = parseInt(strNum, isHex ? 16 : 10);\n        this._endToken([String.fromCharCode(charCode), this._cursor.getChars(start)]);\n      } catch {\n        throw this._createError(_unknownEntityErrorMsg(this._cursor.getChars(start)), this._cursor.getSpan());\n      }\n    } else {\n      const nameStart = this._cursor.clone();\n      this._attemptCharCodeUntilFn(isNamedEntityEnd);\n      if (this._cursor.peek() != $SEMICOLON) {\n        // No semicolon was found so abort the encoded entity token that was in progress, and treat\n        // this as a text token\n        this._beginToken(textTokenType, start);\n        this._cursor = nameStart;\n        this._endToken(['&']);\n      } else {\n        const name = this._cursor.getChars(nameStart);\n        this._cursor.advance();\n        const char = NAMED_ENTITIES[name];\n        if (!char) {\n          throw this._createError(_unknownEntityErrorMsg(name), this._cursor.getSpan(start));\n        }\n        this._endToken([char, `&${name};`]);\n      }\n    }\n  }\n  _consumeRawText(consumeEntities, endMarkerPredicate) {\n    this._beginToken(consumeEntities ? 6 /* TokenType.ESCAPABLE_RAW_TEXT */ : 7 /* TokenType.RAW_TEXT */);\n    const parts = [];\n    while (true) {\n      const tagCloseStart = this._cursor.clone();\n      const foundEndMarker = endMarkerPredicate();\n      this._cursor = tagCloseStart;\n      if (foundEndMarker) {\n        break;\n      }\n      if (consumeEntities && this._cursor.peek() === $AMPERSAND) {\n        this._endToken([this._processCarriageReturns(parts.join(''))]);\n        parts.length = 0;\n        this._consumeEntity(6 /* TokenType.ESCAPABLE_RAW_TEXT */);\n        this._beginToken(6 /* TokenType.ESCAPABLE_RAW_TEXT */);\n      } else {\n        parts.push(this._readChar());\n      }\n    }\n    this._endToken([this._processCarriageReturns(parts.join(''))]);\n  }\n  _consumeComment(start) {\n    this._beginToken(10 /* TokenType.COMMENT_START */, start);\n    this._requireCharCode($MINUS);\n    this._endToken([]);\n    this._consumeRawText(false, () => this._attemptStr('-->'));\n    this._beginToken(11 /* TokenType.COMMENT_END */);\n    this._requireStr('-->');\n    this._endToken([]);\n  }\n  _consumeCdata(start) {\n    this._beginToken(12 /* TokenType.CDATA_START */, start);\n    this._requireStr('CDATA[');\n    this._endToken([]);\n    this._consumeRawText(false, () => this._attemptStr(']]>'));\n    this._beginToken(13 /* TokenType.CDATA_END */);\n    this._requireStr(']]>');\n    this._endToken([]);\n  }\n  _consumeDocType(start) {\n    this._beginToken(18 /* TokenType.DOC_TYPE */, start);\n    const contentStart = this._cursor.clone();\n    this._attemptUntilChar($GT);\n    const content = this._cursor.getChars(contentStart);\n    this._cursor.advance();\n    this._endToken([content]);\n  }\n  _consumePrefixAndName() {\n    const nameOrPrefixStart = this._cursor.clone();\n    let prefix = '';\n    while (this._cursor.peek() !== $COLON && !isPrefixEnd(this._cursor.peek())) {\n      this._cursor.advance();\n    }\n    let nameStart;\n    if (this._cursor.peek() === $COLON) {\n      prefix = this._cursor.getChars(nameOrPrefixStart);\n      this._cursor.advance();\n      nameStart = this._cursor.clone();\n    } else {\n      nameStart = nameOrPrefixStart;\n    }\n    this._requireCharCodeUntilFn(isNameEnd, prefix === '' ? 0 : 1);\n    const name = this._cursor.getChars(nameStart);\n    return [prefix, name];\n  }\n  _consumeTagOpen(start) {\n    let tagName;\n    let prefix;\n    let openTagToken;\n    try {\n      if (!isAsciiLetter(this._cursor.peek())) {\n        throw this._createError(_unexpectedCharacterErrorMsg(this._cursor.peek()), this._cursor.getSpan(start));\n      }\n      openTagToken = this._consumeTagOpenStart(start);\n      prefix = openTagToken.parts[0];\n      tagName = openTagToken.parts[1];\n      this._attemptCharCodeUntilFn(isNotWhitespace);\n      while (this._cursor.peek() !== $SLASH && this._cursor.peek() !== $GT && this._cursor.peek() !== $LT && this._cursor.peek() !== $EOF) {\n        this._consumeAttributeName();\n        this._attemptCharCodeUntilFn(isNotWhitespace);\n        if (this._attemptCharCode($EQ)) {\n          this._attemptCharCodeUntilFn(isNotWhitespace);\n          this._consumeAttributeValue();\n        }\n        this._attemptCharCodeUntilFn(isNotWhitespace);\n      }\n      this._consumeTagOpenEnd();\n    } catch (e) {\n      if (e instanceof _ControlFlowError) {\n        if (openTagToken) {\n          // We errored before we could close the opening tag, so it is incomplete.\n          openTagToken.type = 4 /* TokenType.INCOMPLETE_TAG_OPEN */;\n        } else {\n          // When the start tag is invalid, assume we want a \"<\" as text.\n          // Back to back text tokens are merged at the end.\n          this._beginToken(5 /* TokenType.TEXT */, start);\n          this._endToken(['<']);\n        }\n        return;\n      }\n      throw e;\n    }\n    const contentTokenType = this._getTagDefinition(tagName).getContentType(prefix);\n    if (contentTokenType === TagContentType.RAW_TEXT) {\n      this._consumeRawTextWithTagClose(prefix, tagName, false);\n    } else if (contentTokenType === TagContentType.ESCAPABLE_RAW_TEXT) {\n      this._consumeRawTextWithTagClose(prefix, tagName, true);\n    }\n  }\n  _consumeRawTextWithTagClose(prefix, tagName, consumeEntities) {\n    this._consumeRawText(consumeEntities, () => {\n      if (!this._attemptCharCode($LT)) return false;\n      if (!this._attemptCharCode($SLASH)) return false;\n      this._attemptCharCodeUntilFn(isNotWhitespace);\n      if (!this._attemptStrCaseInsensitive(tagName)) return false;\n      this._attemptCharCodeUntilFn(isNotWhitespace);\n      return this._attemptCharCode($GT);\n    });\n    this._beginToken(3 /* TokenType.TAG_CLOSE */);\n    this._requireCharCodeUntilFn(code => code === $GT, 3);\n    this._cursor.advance(); // Consume the `>`\n    this._endToken([prefix, tagName]);\n  }\n  _consumeTagOpenStart(start) {\n    this._beginToken(0 /* TokenType.TAG_OPEN_START */, start);\n    const parts = this._consumePrefixAndName();\n    return this._endToken(parts);\n  }\n  _consumeAttributeName() {\n    const attrNameStart = this._cursor.peek();\n    if (attrNameStart === $SQ || attrNameStart === $DQ) {\n      throw this._createError(_unexpectedCharacterErrorMsg(attrNameStart), this._cursor.getSpan());\n    }\n    this._beginToken(14 /* TokenType.ATTR_NAME */);\n    const prefixAndName = this._consumePrefixAndName();\n    this._endToken(prefixAndName);\n  }\n  _consumeAttributeValue() {\n    if (this._cursor.peek() === $SQ || this._cursor.peek() === $DQ) {\n      const quoteChar = this._cursor.peek();\n      this._consumeQuote(quoteChar);\n      // In an attribute then end of the attribute value and the premature end to an interpolation\n      // are both triggered by the `quoteChar`.\n      const endPredicate = () => this._cursor.peek() === quoteChar;\n      this._consumeWithInterpolation(16 /* TokenType.ATTR_VALUE_TEXT */, 17 /* TokenType.ATTR_VALUE_INTERPOLATION */, endPredicate, endPredicate);\n      this._consumeQuote(quoteChar);\n    } else {\n      const endPredicate = () => isNameEnd(this._cursor.peek());\n      this._consumeWithInterpolation(16 /* TokenType.ATTR_VALUE_TEXT */, 17 /* TokenType.ATTR_VALUE_INTERPOLATION */, endPredicate, endPredicate);\n    }\n  }\n  _consumeQuote(quoteChar) {\n    this._beginToken(15 /* TokenType.ATTR_QUOTE */);\n    this._requireCharCode(quoteChar);\n    this._endToken([String.fromCodePoint(quoteChar)]);\n  }\n  _consumeTagOpenEnd() {\n    const tokenType = this._attemptCharCode($SLASH) ? 2 /* TokenType.TAG_OPEN_END_VOID */ : 1 /* TokenType.TAG_OPEN_END */;\n    this._beginToken(tokenType);\n    this._requireCharCode($GT);\n    this._endToken([]);\n  }\n  _consumeTagClose(start) {\n    this._beginToken(3 /* TokenType.TAG_CLOSE */, start);\n    this._attemptCharCodeUntilFn(isNotWhitespace);\n    const prefixAndName = this._consumePrefixAndName();\n    this._attemptCharCodeUntilFn(isNotWhitespace);\n    this._requireCharCode($GT);\n    this._endToken(prefixAndName);\n  }\n  _consumeExpansionFormStart() {\n    this._beginToken(19 /* TokenType.EXPANSION_FORM_START */);\n    this._requireCharCode($LBRACE);\n    this._endToken([]);\n    this._expansionCaseStack.push(19 /* TokenType.EXPANSION_FORM_START */);\n    this._beginToken(7 /* TokenType.RAW_TEXT */);\n    const condition = this._readUntil($COMMA);\n    const normalizedCondition = this._processCarriageReturns(condition);\n    if (this._i18nNormalizeLineEndingsInICUs) {\n      // We explicitly want to normalize line endings for this text.\n      this._endToken([normalizedCondition]);\n    } else {\n      // We are not normalizing line endings.\n      const conditionToken = this._endToken([condition]);\n      if (normalizedCondition !== condition) {\n        this.nonNormalizedIcuExpressions.push(conditionToken);\n      }\n    }\n    this._requireCharCode($COMMA);\n    this._attemptCharCodeUntilFn(isNotWhitespace);\n    this._beginToken(7 /* TokenType.RAW_TEXT */);\n    const type = this._readUntil($COMMA);\n    this._endToken([type]);\n    this._requireCharCode($COMMA);\n    this._attemptCharCodeUntilFn(isNotWhitespace);\n  }\n  _consumeExpansionCaseStart() {\n    this._beginToken(20 /* TokenType.EXPANSION_CASE_VALUE */);\n    const value = this._readUntil($LBRACE).trim();\n    this._endToken([value]);\n    this._attemptCharCodeUntilFn(isNotWhitespace);\n    this._beginToken(21 /* TokenType.EXPANSION_CASE_EXP_START */);\n    this._requireCharCode($LBRACE);\n    this._endToken([]);\n    this._attemptCharCodeUntilFn(isNotWhitespace);\n    this._expansionCaseStack.push(21 /* TokenType.EXPANSION_CASE_EXP_START */);\n  }\n  _consumeExpansionCaseEnd() {\n    this._beginToken(22 /* TokenType.EXPANSION_CASE_EXP_END */);\n    this._requireCharCode($RBRACE);\n    this._endToken([]);\n    this._attemptCharCodeUntilFn(isNotWhitespace);\n    this._expansionCaseStack.pop();\n  }\n  _consumeExpansionFormEnd() {\n    this._beginToken(23 /* TokenType.EXPANSION_FORM_END */);\n    this._requireCharCode($RBRACE);\n    this._endToken([]);\n    this._expansionCaseStack.pop();\n  }\n  /**\n   * Consume a string that may contain interpolation expressions.\n   *\n   * The first token consumed will be of `tokenType` and then there will be alternating\n   * `interpolationTokenType` and `tokenType` tokens until the `endPredicate()` returns true.\n   *\n   * If an interpolation token ends prematurely it will have no end marker in its `parts` array.\n   *\n   * @param textTokenType the kind of tokens to interleave around interpolation tokens.\n   * @param interpolationTokenType the kind of tokens that contain interpolation.\n   * @param endPredicate a function that should return true when we should stop consuming.\n   * @param endInterpolation a function that should return true if there is a premature end to an\n   *     interpolation expression - i.e. before we get to the normal interpolation closing marker.\n   */\n  _consumeWithInterpolation(textTokenType, interpolationTokenType, endPredicate, endInterpolation) {\n    this._beginToken(textTokenType);\n    const parts = [];\n    while (!endPredicate()) {\n      const current = this._cursor.clone();\n      if (this._interpolationConfig && this._attemptStr(this._interpolationConfig.start)) {\n        this._endToken([this._processCarriageReturns(parts.join(''))], current);\n        parts.length = 0;\n        this._consumeInterpolation(interpolationTokenType, current, endInterpolation);\n        this._beginToken(textTokenType);\n      } else if (this._cursor.peek() === $AMPERSAND) {\n        this._endToken([this._processCarriageReturns(parts.join(''))]);\n        parts.length = 0;\n        this._consumeEntity(textTokenType);\n        this._beginToken(textTokenType);\n      } else {\n        parts.push(this._readChar());\n      }\n    }\n    // It is possible that an interpolation was started but not ended inside this text token.\n    // Make sure that we reset the state of the lexer correctly.\n    this._inInterpolation = false;\n    this._endToken([this._processCarriageReturns(parts.join(''))]);\n  }\n  /**\n   * Consume a block of text that has been interpreted as an Angular interpolation.\n   *\n   * @param interpolationTokenType the type of the interpolation token to generate.\n   * @param interpolationStart a cursor that points to the start of this interpolation.\n   * @param prematureEndPredicate a function that should return true if the next characters indicate\n   *     an end to the interpolation before its normal closing marker.\n   */\n  _consumeInterpolation(interpolationTokenType, interpolationStart, prematureEndPredicate) {\n    const parts = [];\n    this._beginToken(interpolationTokenType, interpolationStart);\n    parts.push(this._interpolationConfig.start);\n    // Find the end of the interpolation, ignoring content inside quotes.\n    const expressionStart = this._cursor.clone();\n    let inQuote = null;\n    let inComment = false;\n    while (this._cursor.peek() !== $EOF && (prematureEndPredicate === null || !prematureEndPredicate())) {\n      const current = this._cursor.clone();\n      if (this._isTagStart()) {\n        // We are starting what looks like an HTML element in the middle of this interpolation.\n        // Reset the cursor to before the `<` character and end the interpolation token.\n        // (This is actually wrong but here for backward compatibility).\n        this._cursor = current;\n        parts.push(this._getProcessedChars(expressionStart, current));\n        this._endToken(parts);\n        return;\n      }\n      if (inQuote === null) {\n        if (this._attemptStr(this._interpolationConfig.end)) {\n          // We are not in a string, and we hit the end interpolation marker\n          parts.push(this._getProcessedChars(expressionStart, current));\n          parts.push(this._interpolationConfig.end);\n          this._endToken(parts);\n          return;\n        } else if (this._attemptStr('//')) {\n          // Once we are in a comment we ignore any quotes\n          inComment = true;\n        }\n      }\n      const char = this._cursor.peek();\n      this._cursor.advance();\n      if (char === $BACKSLASH) {\n        // Skip the next character because it was escaped.\n        this._cursor.advance();\n      } else if (char === inQuote) {\n        // Exiting the current quoted string\n        inQuote = null;\n      } else if (!inComment && inQuote === null && isQuote(char)) {\n        // Entering a new quoted string\n        inQuote = char;\n      }\n    }\n    // We hit EOF without finding a closing interpolation marker\n    parts.push(this._getProcessedChars(expressionStart, this._cursor));\n    this._endToken(parts);\n  }\n  _getProcessedChars(start, end) {\n    return this._processCarriageReturns(end.getChars(start));\n  }\n  _isTextEnd() {\n    if (this._isTagStart() || this._cursor.peek() === $EOF) {\n      return true;\n    }\n    if (this._tokenizeIcu && !this._inInterpolation) {\n      if (this.isExpansionFormStart()) {\n        // start of an expansion form\n        return true;\n      }\n      if (this._cursor.peek() === $RBRACE && this._isInExpansionCase()) {\n        // end of and expansion case\n        return true;\n      }\n    }\n    if (this._tokenizeBlocks && !this._inInterpolation && !this._isInExpansion() && (this._cursor.peek() === $AT || this._cursor.peek() === $RBRACE)) {\n      return true;\n    }\n    return false;\n  }\n  /**\n   * Returns true if the current cursor is pointing to the start of a tag\n   * (opening/closing/comments/cdata/etc).\n   */\n  _isTagStart() {\n    if (this._cursor.peek() === $LT) {\n      // We assume that `<` followed by whitespace is not the start of an HTML element.\n      const tmp = this._cursor.clone();\n      tmp.advance();\n      // If the next character is alphabetic, ! nor / then it is a tag start\n      const code = tmp.peek();\n      if ($a <= code && code <= $z || $A <= code && code <= $Z || code === $SLASH || code === $BANG) {\n        return true;\n      }\n    }\n    return false;\n  }\n  _readUntil(char) {\n    const start = this._cursor.clone();\n    this._attemptUntilChar(char);\n    return this._cursor.getChars(start);\n  }\n  _isInExpansion() {\n    return this._isInExpansionCase() || this._isInExpansionForm();\n  }\n  _isInExpansionCase() {\n    return this._expansionCaseStack.length > 0 && this._expansionCaseStack[this._expansionCaseStack.length - 1] === 21 /* TokenType.EXPANSION_CASE_EXP_START */;\n  }\n  _isInExpansionForm() {\n    return this._expansionCaseStack.length > 0 && this._expansionCaseStack[this._expansionCaseStack.length - 1] === 19 /* TokenType.EXPANSION_FORM_START */;\n  }\n  isExpansionFormStart() {\n    if (this._cursor.peek() !== $LBRACE) {\n      return false;\n    }\n    if (this._interpolationConfig) {\n      const start = this._cursor.clone();\n      const isInterpolation = this._attemptStr(this._interpolationConfig.start);\n      this._cursor = start;\n      return !isInterpolation;\n    }\n    return true;\n  }\n}\nfunction isNotWhitespace(code) {\n  return !isWhitespace(code) || code === $EOF;\n}\nfunction isNameEnd(code) {\n  return isWhitespace(code) || code === $GT || code === $LT || code === $SLASH || code === $SQ || code === $DQ || code === $EQ || code === $EOF;\n}\nfunction isPrefixEnd(code) {\n  return (code < $a || $z < code) && (code < $A || $Z < code) && (code < $0 || code > $9);\n}\nfunction isDigitEntityEnd(code) {\n  return code === $SEMICOLON || code === $EOF || !isAsciiHexDigit(code);\n}\nfunction isNamedEntityEnd(code) {\n  return code === $SEMICOLON || code === $EOF || !isAsciiLetter(code);\n}\nfunction isExpansionCaseStart(peek) {\n  return peek !== $RBRACE;\n}\nfunction compareCharCodeCaseInsensitive(code1, code2) {\n  return toUpperCaseCharCode(code1) === toUpperCaseCharCode(code2);\n}\nfunction toUpperCaseCharCode(code) {\n  return code >= $a && code <= $z ? code - $a + $A : code;\n}\nfunction isBlockNameChar(code) {\n  return isAsciiLetter(code) || isDigit(code) || code === $_;\n}\nfunction isBlockParameterChar(code) {\n  return code !== $SEMICOLON && isNotWhitespace(code);\n}\nfunction mergeTextTokens(srcTokens) {\n  const dstTokens = [];\n  let lastDstToken = undefined;\n  for (let i = 0; i < srcTokens.length; i++) {\n    const token = srcTokens[i];\n    if (lastDstToken && lastDstToken.type === 5 /* TokenType.TEXT */ && token.type === 5 /* TokenType.TEXT */ || lastDstToken && lastDstToken.type === 16 /* TokenType.ATTR_VALUE_TEXT */ && token.type === 16 /* TokenType.ATTR_VALUE_TEXT */) {\n      lastDstToken.parts[0] += token.parts[0];\n      lastDstToken.sourceSpan.end = token.sourceSpan.end;\n    } else {\n      lastDstToken = token;\n      dstTokens.push(lastDstToken);\n    }\n  }\n  return dstTokens;\n}\nclass PlainCharacterCursor {\n  constructor(fileOrCursor, range) {\n    if (fileOrCursor instanceof PlainCharacterCursor) {\n      this.file = fileOrCursor.file;\n      this.input = fileOrCursor.input;\n      this.end = fileOrCursor.end;\n      const state = fileOrCursor.state;\n      // Note: avoid using `{...fileOrCursor.state}` here as that has a severe performance penalty.\n      // In ES5 bundles the object spread operator is translated into the `__assign` helper, which\n      // is not optimized by VMs as efficiently as a raw object literal. Since this constructor is\n      // called in tight loops, this difference matters.\n      this.state = {\n        peek: state.peek,\n        offset: state.offset,\n        line: state.line,\n        column: state.column\n      };\n    } else {\n      if (!range) {\n        throw new Error('Programming error: the range argument must be provided with a file argument.');\n      }\n      this.file = fileOrCursor;\n      this.input = fileOrCursor.content;\n      this.end = range.endPos;\n      this.state = {\n        peek: -1,\n        offset: range.startPos,\n        line: range.startLine,\n        column: range.startCol\n      };\n    }\n  }\n  clone() {\n    return new PlainCharacterCursor(this);\n  }\n  peek() {\n    return this.state.peek;\n  }\n  charsLeft() {\n    return this.end - this.state.offset;\n  }\n  diff(other) {\n    return this.state.offset - other.state.offset;\n  }\n  advance() {\n    this.advanceState(this.state);\n  }\n  init() {\n    this.updatePeek(this.state);\n  }\n  getSpan(start, leadingTriviaCodePoints) {\n    start = start || this;\n    let fullStart = start;\n    if (leadingTriviaCodePoints) {\n      while (this.diff(start) > 0 && leadingTriviaCodePoints.indexOf(start.peek()) !== -1) {\n        if (fullStart === start) {\n          start = start.clone();\n        }\n        start.advance();\n      }\n    }\n    const startLocation = this.locationFromCursor(start);\n    const endLocation = this.locationFromCursor(this);\n    const fullStartLocation = fullStart !== start ? this.locationFromCursor(fullStart) : startLocation;\n    return new ParseSourceSpan(startLocation, endLocation, fullStartLocation);\n  }\n  getChars(start) {\n    return this.input.substring(start.state.offset, this.state.offset);\n  }\n  charAt(pos) {\n    return this.input.charCodeAt(pos);\n  }\n  advanceState(state) {\n    if (state.offset >= this.end) {\n      this.state = state;\n      throw new CursorError('Unexpected character \"EOF\"', this);\n    }\n    const currentChar = this.charAt(state.offset);\n    if (currentChar === $LF) {\n      state.line++;\n      state.column = 0;\n    } else if (!isNewLine(currentChar)) {\n      state.column++;\n    }\n    state.offset++;\n    this.updatePeek(state);\n  }\n  updatePeek(state) {\n    state.peek = state.offset >= this.end ? $EOF : this.charAt(state.offset);\n  }\n  locationFromCursor(cursor) {\n    return new ParseLocation(cursor.file, cursor.state.offset, cursor.state.line, cursor.state.column);\n  }\n}\nclass EscapedCharacterCursor extends PlainCharacterCursor {\n  constructor(fileOrCursor, range) {\n    if (fileOrCursor instanceof EscapedCharacterCursor) {\n      super(fileOrCursor);\n      this.internalState = {\n        ...fileOrCursor.internalState\n      };\n    } else {\n      super(fileOrCursor, range);\n      this.internalState = this.state;\n    }\n  }\n  advance() {\n    this.state = this.internalState;\n    super.advance();\n    this.processEscapeSequence();\n  }\n  init() {\n    super.init();\n    this.processEscapeSequence();\n  }\n  clone() {\n    return new EscapedCharacterCursor(this);\n  }\n  getChars(start) {\n    const cursor = start.clone();\n    let chars = '';\n    while (cursor.internalState.offset < this.internalState.offset) {\n      chars += String.fromCodePoint(cursor.peek());\n      cursor.advance();\n    }\n    return chars;\n  }\n  /**\n   * Process the escape sequence that starts at the current position in the text.\n   *\n   * This method is called to ensure that `peek` has the unescaped value of escape sequences.\n   */\n  processEscapeSequence() {\n    const peek = () => this.internalState.peek;\n    if (peek() === $BACKSLASH) {\n      // We have hit an escape sequence so we need the internal state to become independent\n      // of the external state.\n      this.internalState = {\n        ...this.state\n      };\n      // Move past the backslash\n      this.advanceState(this.internalState);\n      // First check for standard control char sequences\n      if (peek() === $n) {\n        this.state.peek = $LF;\n      } else if (peek() === $r) {\n        this.state.peek = $CR;\n      } else if (peek() === $v) {\n        this.state.peek = $VTAB;\n      } else if (peek() === $t) {\n        this.state.peek = $TAB;\n      } else if (peek() === $b) {\n        this.state.peek = $BSPACE;\n      } else if (peek() === $f) {\n        this.state.peek = $FF;\n      }\n      // Now consider more complex sequences\n      else if (peek() === $u) {\n        // Unicode code-point sequence\n        this.advanceState(this.internalState); // advance past the `u` char\n        if (peek() === $LBRACE) {\n          // Variable length Unicode, e.g. `\\x{123}`\n          this.advanceState(this.internalState); // advance past the `{` char\n          // Advance past the variable number of hex digits until we hit a `}` char\n          const digitStart = this.clone();\n          let length = 0;\n          while (peek() !== $RBRACE) {\n            this.advanceState(this.internalState);\n            length++;\n          }\n          this.state.peek = this.decodeHexDigits(digitStart, length);\n        } else {\n          // Fixed length Unicode, e.g. `\\u1234`\n          const digitStart = this.clone();\n          this.advanceState(this.internalState);\n          this.advanceState(this.internalState);\n          this.advanceState(this.internalState);\n          this.state.peek = this.decodeHexDigits(digitStart, 4);\n        }\n      } else if (peek() === $x) {\n        // Hex char code, e.g. `\\x2F`\n        this.advanceState(this.internalState); // advance past the `x` char\n        const digitStart = this.clone();\n        this.advanceState(this.internalState);\n        this.state.peek = this.decodeHexDigits(digitStart, 2);\n      } else if (isOctalDigit(peek())) {\n        // Octal char code, e.g. `\\012`,\n        let octal = '';\n        let length = 0;\n        let previous = this.clone();\n        while (isOctalDigit(peek()) && length < 3) {\n          previous = this.clone();\n          octal += String.fromCodePoint(peek());\n          this.advanceState(this.internalState);\n          length++;\n        }\n        this.state.peek = parseInt(octal, 8);\n        // Backup one char\n        this.internalState = previous.internalState;\n      } else if (isNewLine(this.internalState.peek)) {\n        // Line continuation `\\` followed by a new line\n        this.advanceState(this.internalState); // advance over the newline\n        this.state = this.internalState;\n      } else {\n        // If none of the `if` blocks were executed then we just have an escaped normal character.\n        // In that case we just, effectively, skip the backslash from the character.\n        this.state.peek = this.internalState.peek;\n      }\n    }\n  }\n  decodeHexDigits(start, length) {\n    const hex = this.input.slice(start.internalState.offset, start.internalState.offset + length);\n    const charCode = parseInt(hex, 16);\n    if (!isNaN(charCode)) {\n      return charCode;\n    } else {\n      start.state = start.internalState;\n      throw new CursorError('Invalid hexadecimal escape sequence', start);\n    }\n  }\n}\nclass CursorError {\n  constructor(msg, cursor) {\n    this.msg = msg;\n    this.cursor = cursor;\n  }\n}\nclass TreeError extends ParseError {\n  static create(elementName, span, msg) {\n    return new TreeError(elementName, span, msg);\n  }\n  constructor(elementName, span, msg) {\n    super(span, msg);\n    this.elementName = elementName;\n  }\n}\nclass ParseTreeResult {\n  constructor(rootNodes, errors) {\n    this.rootNodes = rootNodes;\n    this.errors = errors;\n  }\n}\nclass Parser {\n  constructor(getTagDefinition) {\n    this.getTagDefinition = getTagDefinition;\n  }\n  parse(source, url, options) {\n    const tokenizeResult = tokenize(source, url, this.getTagDefinition, options);\n    const parser = new _TreeBuilder(tokenizeResult.tokens, this.getTagDefinition);\n    parser.build();\n    return new ParseTreeResult(parser.rootNodes, tokenizeResult.errors.concat(parser.errors));\n  }\n}\nclass _TreeBuilder {\n  constructor(tokens, getTagDefinition) {\n    this.tokens = tokens;\n    this.getTagDefinition = getTagDefinition;\n    this._index = -1;\n    this._containerStack = [];\n    this.rootNodes = [];\n    this.errors = [];\n    this._advance();\n  }\n  build() {\n    while (this._peek.type !== 33 /* TokenType.EOF */) {\n      if (this._peek.type === 0 /* TokenType.TAG_OPEN_START */ || this._peek.type === 4 /* TokenType.INCOMPLETE_TAG_OPEN */) {\n        this._consumeStartTag(this._advance());\n      } else if (this._peek.type === 3 /* TokenType.TAG_CLOSE */) {\n        this._consumeEndTag(this._advance());\n      } else if (this._peek.type === 12 /* TokenType.CDATA_START */) {\n        this._closeVoidElement();\n        this._consumeCdata(this._advance());\n      } else if (this._peek.type === 10 /* TokenType.COMMENT_START */) {\n        this._closeVoidElement();\n        this._consumeComment(this._advance());\n      } else if (this._peek.type === 5 /* TokenType.TEXT */ || this._peek.type === 7 /* TokenType.RAW_TEXT */ || this._peek.type === 6 /* TokenType.ESCAPABLE_RAW_TEXT */) {\n        this._closeVoidElement();\n        this._consumeText(this._advance());\n      } else if (this._peek.type === 19 /* TokenType.EXPANSION_FORM_START */) {\n        this._consumeExpansion(this._advance());\n      } else if (this._peek.type === 24 /* TokenType.BLOCK_OPEN_START */) {\n        this._closeVoidElement();\n        this._consumeBlockOpen(this._advance());\n      } else if (this._peek.type === 26 /* TokenType.BLOCK_CLOSE */) {\n        this._closeVoidElement();\n        this._consumeBlockClose(this._advance());\n      } else if (this._peek.type === 28 /* TokenType.INCOMPLETE_BLOCK_OPEN */) {\n        this._closeVoidElement();\n        this._consumeIncompleteBlock(this._advance());\n      } else if (this._peek.type === 29 /* TokenType.LET_START */) {\n        this._closeVoidElement();\n        this._consumeLet(this._advance());\n      } else if (this._peek.type === 32 /* TokenType.INCOMPLETE_LET */) {\n        this._closeVoidElement();\n        this._consumeIncompleteLet(this._advance());\n      } else {\n        // Skip all other tokens...\n        this._advance();\n      }\n    }\n    for (const leftoverContainer of this._containerStack) {\n      // Unlike HTML elements, blocks aren't closed implicitly by the end of the file.\n      if (leftoverContainer instanceof Block) {\n        this.errors.push(TreeError.create(leftoverContainer.name, leftoverContainer.sourceSpan, `Unclosed block \"${leftoverContainer.name}\"`));\n      }\n    }\n  }\n  _advance() {\n    const prev = this._peek;\n    if (this._index < this.tokens.length - 1) {\n      // Note: there is always an EOF token at the end\n      this._index++;\n    }\n    this._peek = this.tokens[this._index];\n    return prev;\n  }\n  _advanceIf(type) {\n    if (this._peek.type === type) {\n      return this._advance();\n    }\n    return null;\n  }\n  _consumeCdata(_startToken) {\n    this._consumeText(this._advance());\n    this._advanceIf(13 /* TokenType.CDATA_END */);\n  }\n  _consumeComment(token) {\n    const text = this._advanceIf(7 /* TokenType.RAW_TEXT */);\n    const endToken = this._advanceIf(11 /* TokenType.COMMENT_END */);\n    const value = text != null ? text.parts[0].trim() : null;\n    const sourceSpan = endToken == null ? token.sourceSpan : new ParseSourceSpan(token.sourceSpan.start, endToken.sourceSpan.end, token.sourceSpan.fullStart);\n    this._addToParent(new Comment(value, sourceSpan));\n  }\n  _consumeExpansion(token) {\n    const switchValue = this._advance();\n    const type = this._advance();\n    const cases = [];\n    // read =\n    while (this._peek.type === 20 /* TokenType.EXPANSION_CASE_VALUE */) {\n      const expCase = this._parseExpansionCase();\n      if (!expCase) return; // error\n      cases.push(expCase);\n    }\n    // read the final }\n    if (this._peek.type !== 23 /* TokenType.EXPANSION_FORM_END */) {\n      this.errors.push(TreeError.create(null, this._peek.sourceSpan, `Invalid ICU message. Missing '}'.`));\n      return;\n    }\n    const sourceSpan = new ParseSourceSpan(token.sourceSpan.start, this._peek.sourceSpan.end, token.sourceSpan.fullStart);\n    this._addToParent(new Expansion(switchValue.parts[0], type.parts[0], cases, sourceSpan, switchValue.sourceSpan));\n    this._advance();\n  }\n  _parseExpansionCase() {\n    const value = this._advance();\n    // read {\n    if (this._peek.type !== 21 /* TokenType.EXPANSION_CASE_EXP_START */) {\n      this.errors.push(TreeError.create(null, this._peek.sourceSpan, `Invalid ICU message. Missing '{'.`));\n      return null;\n    }\n    // read until }\n    const start = this._advance();\n    const exp = this._collectExpansionExpTokens(start);\n    if (!exp) return null;\n    const end = this._advance();\n    exp.push({\n      type: 33 /* TokenType.EOF */,\n      parts: [],\n      sourceSpan: end.sourceSpan\n    });\n    // parse everything in between { and }\n    const expansionCaseParser = new _TreeBuilder(exp, this.getTagDefinition);\n    expansionCaseParser.build();\n    if (expansionCaseParser.errors.length > 0) {\n      this.errors = this.errors.concat(expansionCaseParser.errors);\n      return null;\n    }\n    const sourceSpan = new ParseSourceSpan(value.sourceSpan.start, end.sourceSpan.end, value.sourceSpan.fullStart);\n    const expSourceSpan = new ParseSourceSpan(start.sourceSpan.start, end.sourceSpan.end, start.sourceSpan.fullStart);\n    return new ExpansionCase(value.parts[0], expansionCaseParser.rootNodes, sourceSpan, value.sourceSpan, expSourceSpan);\n  }\n  _collectExpansionExpTokens(start) {\n    const exp = [];\n    const expansionFormStack = [21 /* TokenType.EXPANSION_CASE_EXP_START */];\n    while (true) {\n      if (this._peek.type === 19 /* TokenType.EXPANSION_FORM_START */ || this._peek.type === 21 /* TokenType.EXPANSION_CASE_EXP_START */) {\n        expansionFormStack.push(this._peek.type);\n      }\n      if (this._peek.type === 22 /* TokenType.EXPANSION_CASE_EXP_END */) {\n        if (lastOnStack(expansionFormStack, 21 /* TokenType.EXPANSION_CASE_EXP_START */)) {\n          expansionFormStack.pop();\n          if (expansionFormStack.length === 0) return exp;\n        } else {\n          this.errors.push(TreeError.create(null, start.sourceSpan, `Invalid ICU message. Missing '}'.`));\n          return null;\n        }\n      }\n      if (this._peek.type === 23 /* TokenType.EXPANSION_FORM_END */) {\n        if (lastOnStack(expansionFormStack, 19 /* TokenType.EXPANSION_FORM_START */)) {\n          expansionFormStack.pop();\n        } else {\n          this.errors.push(TreeError.create(null, start.sourceSpan, `Invalid ICU message. Missing '}'.`));\n          return null;\n        }\n      }\n      if (this._peek.type === 33 /* TokenType.EOF */) {\n        this.errors.push(TreeError.create(null, start.sourceSpan, `Invalid ICU message. Missing '}'.`));\n        return null;\n      }\n      exp.push(this._advance());\n    }\n  }\n  _consumeText(token) {\n    const tokens = [token];\n    const startSpan = token.sourceSpan;\n    let text = token.parts[0];\n    if (text.length > 0 && text[0] === '\\n') {\n      const parent = this._getContainer();\n      if (parent != null && parent.children.length === 0 && this.getTagDefinition(parent.name).ignoreFirstLf) {\n        text = text.substring(1);\n        tokens[0] = {\n          type: token.type,\n          sourceSpan: token.sourceSpan,\n          parts: [text]\n        };\n      }\n    }\n    while (this._peek.type === 8 /* TokenType.INTERPOLATION */ || this._peek.type === 5 /* TokenType.TEXT */ || this._peek.type === 9 /* TokenType.ENCODED_ENTITY */) {\n      token = this._advance();\n      tokens.push(token);\n      if (token.type === 8 /* TokenType.INTERPOLATION */) {\n        // For backward compatibility we decode HTML entities that appear in interpolation\n        // expressions. This is arguably a bug, but it could be a considerable breaking change to\n        // fix it. It should be addressed in a larger project to refactor the entire parser/lexer\n        // chain after View Engine has been removed.\n        text += token.parts.join('').replace(/&([^;]+);/g, decodeEntity);\n      } else if (token.type === 9 /* TokenType.ENCODED_ENTITY */) {\n        text += token.parts[0];\n      } else {\n        text += token.parts.join('');\n      }\n    }\n    if (text.length > 0) {\n      const endSpan = token.sourceSpan;\n      this._addToParent(new Text(text, new ParseSourceSpan(startSpan.start, endSpan.end, startSpan.fullStart, startSpan.details), tokens));\n    }\n  }\n  _closeVoidElement() {\n    const el = this._getContainer();\n    if (el instanceof Element && this.getTagDefinition(el.name).isVoid) {\n      this._containerStack.pop();\n    }\n  }\n  _consumeStartTag(startTagToken) {\n    const [prefix, name] = startTagToken.parts;\n    const attrs = [];\n    while (this._peek.type === 14 /* TokenType.ATTR_NAME */) {\n      attrs.push(this._consumeAttr(this._advance()));\n    }\n    const fullName = this._getElementFullName(prefix, name, this._getClosestParentElement());\n    let selfClosing = false;\n    // Note: There could have been a tokenizer error\n    // so that we don't get a token for the end tag...\n    if (this._peek.type === 2 /* TokenType.TAG_OPEN_END_VOID */) {\n      this._advance();\n      selfClosing = true;\n      const tagDef = this.getTagDefinition(fullName);\n      if (!(tagDef.canSelfClose || getNsPrefix(fullName) !== null || tagDef.isVoid)) {\n        this.errors.push(TreeError.create(fullName, startTagToken.sourceSpan, `Only void, custom and foreign elements can be self closed \"${startTagToken.parts[1]}\"`));\n      }\n    } else if (this._peek.type === 1 /* TokenType.TAG_OPEN_END */) {\n      this._advance();\n      selfClosing = false;\n    }\n    const end = this._peek.sourceSpan.fullStart;\n    const span = new ParseSourceSpan(startTagToken.sourceSpan.start, end, startTagToken.sourceSpan.fullStart);\n    // Create a separate `startSpan` because `span` will be modified when there is an `end` span.\n    const startSpan = new ParseSourceSpan(startTagToken.sourceSpan.start, end, startTagToken.sourceSpan.fullStart);\n    const el = new Element(fullName, attrs, [], span, startSpan, undefined);\n    const parentEl = this._getContainer();\n    this._pushContainer(el, parentEl instanceof Element && this.getTagDefinition(parentEl.name).isClosedByChild(el.name));\n    if (selfClosing) {\n      // Elements that are self-closed have their `endSourceSpan` set to the full span, as the\n      // element start tag also represents the end tag.\n      this._popContainer(fullName, Element, span);\n    } else if (startTagToken.type === 4 /* TokenType.INCOMPLETE_TAG_OPEN */) {\n      // We already know the opening tag is not complete, so it is unlikely it has a corresponding\n      // close tag. Let's optimistically parse it as a full element and emit an error.\n      this._popContainer(fullName, Element, null);\n      this.errors.push(TreeError.create(fullName, span, `Opening tag \"${fullName}\" not terminated.`));\n    }\n  }\n  _pushContainer(node, isClosedByChild) {\n    if (isClosedByChild) {\n      this._containerStack.pop();\n    }\n    this._addToParent(node);\n    this._containerStack.push(node);\n  }\n  _consumeEndTag(endTagToken) {\n    const fullName = this._getElementFullName(endTagToken.parts[0], endTagToken.parts[1], this._getClosestParentElement());\n    if (this.getTagDefinition(fullName).isVoid) {\n      this.errors.push(TreeError.create(fullName, endTagToken.sourceSpan, `Void elements do not have end tags \"${endTagToken.parts[1]}\"`));\n    } else if (!this._popContainer(fullName, Element, endTagToken.sourceSpan)) {\n      const errMsg = `Unexpected closing tag \"${fullName}\". It may happen when the tag has already been closed by another tag. For more info see https://www.w3.org/TR/html5/syntax.html#closing-elements-that-have-implied-end-tags`;\n      this.errors.push(TreeError.create(fullName, endTagToken.sourceSpan, errMsg));\n    }\n  }\n  /**\n   * Closes the nearest element with the tag name `fullName` in the parse tree.\n   * `endSourceSpan` is the span of the closing tag, or null if the element does\n   * not have a closing tag (for example, this happens when an incomplete\n   * opening tag is recovered).\n   */\n  _popContainer(expectedName, expectedType, endSourceSpan) {\n    let unexpectedCloseTagDetected = false;\n    for (let stackIndex = this._containerStack.length - 1; stackIndex >= 0; stackIndex--) {\n      const node = this._containerStack[stackIndex];\n      if ((node.name === expectedName || expectedName === null) && node instanceof expectedType) {\n        // Record the parse span with the element that is being closed. Any elements that are\n        // removed from the element stack at this point are closed implicitly, so they won't get\n        // an end source span (as there is no explicit closing element).\n        node.endSourceSpan = endSourceSpan;\n        node.sourceSpan.end = endSourceSpan !== null ? endSourceSpan.end : node.sourceSpan.end;\n        this._containerStack.splice(stackIndex, this._containerStack.length - stackIndex);\n        return !unexpectedCloseTagDetected;\n      }\n      // Blocks and most elements are not self closing.\n      if (node instanceof Block || node instanceof Element && !this.getTagDefinition(node.name).closedByParent) {\n        // Note that we encountered an unexpected close tag but continue processing the element\n        // stack so we can assign an `endSourceSpan` if there is a corresponding start tag for this\n        // end tag in the stack.\n        unexpectedCloseTagDetected = true;\n      }\n    }\n    return false;\n  }\n  _consumeAttr(attrName) {\n    const fullName = mergeNsAndName(attrName.parts[0], attrName.parts[1]);\n    let attrEnd = attrName.sourceSpan.end;\n    // Consume any quote\n    if (this._peek.type === 15 /* TokenType.ATTR_QUOTE */) {\n      this._advance();\n    }\n    // Consume the attribute value\n    let value = '';\n    const valueTokens = [];\n    let valueStartSpan = undefined;\n    let valueEnd = undefined;\n    // NOTE: We need to use a new variable `nextTokenType` here to hide the actual type of\n    // `_peek.type` from TS. Otherwise TS will narrow the type of `_peek.type` preventing it from\n    // being able to consider `ATTR_VALUE_INTERPOLATION` as an option. This is because TS is not\n    // able to see that `_advance()` will actually mutate `_peek`.\n    const nextTokenType = this._peek.type;\n    if (nextTokenType === 16 /* TokenType.ATTR_VALUE_TEXT */) {\n      valueStartSpan = this._peek.sourceSpan;\n      valueEnd = this._peek.sourceSpan.end;\n      while (this._peek.type === 16 /* TokenType.ATTR_VALUE_TEXT */ || this._peek.type === 17 /* TokenType.ATTR_VALUE_INTERPOLATION */ || this._peek.type === 9 /* TokenType.ENCODED_ENTITY */) {\n        const valueToken = this._advance();\n        valueTokens.push(valueToken);\n        if (valueToken.type === 17 /* TokenType.ATTR_VALUE_INTERPOLATION */) {\n          // For backward compatibility we decode HTML entities that appear in interpolation\n          // expressions. This is arguably a bug, but it could be a considerable breaking change to\n          // fix it. It should be addressed in a larger project to refactor the entire parser/lexer\n          // chain after View Engine has been removed.\n          value += valueToken.parts.join('').replace(/&([^;]+);/g, decodeEntity);\n        } else if (valueToken.type === 9 /* TokenType.ENCODED_ENTITY */) {\n          value += valueToken.parts[0];\n        } else {\n          value += valueToken.parts.join('');\n        }\n        valueEnd = attrEnd = valueToken.sourceSpan.end;\n      }\n    }\n    // Consume any quote\n    if (this._peek.type === 15 /* TokenType.ATTR_QUOTE */) {\n      const quoteToken = this._advance();\n      attrEnd = quoteToken.sourceSpan.end;\n    }\n    const valueSpan = valueStartSpan && valueEnd && new ParseSourceSpan(valueStartSpan.start, valueEnd, valueStartSpan.fullStart);\n    return new Attribute(fullName, value, new ParseSourceSpan(attrName.sourceSpan.start, attrEnd, attrName.sourceSpan.fullStart), attrName.sourceSpan, valueSpan, valueTokens.length > 0 ? valueTokens : undefined, undefined);\n  }\n  _consumeBlockOpen(token) {\n    const parameters = [];\n    while (this._peek.type === 27 /* TokenType.BLOCK_PARAMETER */) {\n      const paramToken = this._advance();\n      parameters.push(new BlockParameter(paramToken.parts[0], paramToken.sourceSpan));\n    }\n    if (this._peek.type === 25 /* TokenType.BLOCK_OPEN_END */) {\n      this._advance();\n    }\n    const end = this._peek.sourceSpan.fullStart;\n    const span = new ParseSourceSpan(token.sourceSpan.start, end, token.sourceSpan.fullStart);\n    // Create a separate `startSpan` because `span` will be modified when there is an `end` span.\n    const startSpan = new ParseSourceSpan(token.sourceSpan.start, end, token.sourceSpan.fullStart);\n    const block = new Block(token.parts[0], parameters, [], span, token.sourceSpan, startSpan);\n    this._pushContainer(block, false);\n  }\n  _consumeBlockClose(token) {\n    if (!this._popContainer(null, Block, token.sourceSpan)) {\n      this.errors.push(TreeError.create(null, token.sourceSpan, `Unexpected closing block. The block may have been closed earlier. ` + `If you meant to write the } character, you should use the \"&#125;\" ` + `HTML entity instead.`));\n    }\n  }\n  _consumeIncompleteBlock(token) {\n    const parameters = [];\n    while (this._peek.type === 27 /* TokenType.BLOCK_PARAMETER */) {\n      const paramToken = this._advance();\n      parameters.push(new BlockParameter(paramToken.parts[0], paramToken.sourceSpan));\n    }\n    const end = this._peek.sourceSpan.fullStart;\n    const span = new ParseSourceSpan(token.sourceSpan.start, end, token.sourceSpan.fullStart);\n    // Create a separate `startSpan` because `span` will be modified when there is an `end` span.\n    const startSpan = new ParseSourceSpan(token.sourceSpan.start, end, token.sourceSpan.fullStart);\n    const block = new Block(token.parts[0], parameters, [], span, token.sourceSpan, startSpan);\n    this._pushContainer(block, false);\n    // Incomplete blocks don't have children so we close them immediately and report an error.\n    this._popContainer(null, Block, null);\n    this.errors.push(TreeError.create(token.parts[0], span, `Incomplete block \"${token.parts[0]}\". If you meant to write the @ character, ` + `you should use the \"&#64;\" HTML entity instead.`));\n  }\n  _consumeLet(startToken) {\n    const name = startToken.parts[0];\n    let valueToken;\n    let endToken;\n    if (this._peek.type !== 30 /* TokenType.LET_VALUE */) {\n      this.errors.push(TreeError.create(startToken.parts[0], startToken.sourceSpan, `Invalid @let declaration \"${name}\". Declaration must have a value.`));\n      return;\n    } else {\n      valueToken = this._advance();\n    }\n    // Type cast is necessary here since TS narrowed the type of `peek` above.\n    if (this._peek.type !== 31 /* TokenType.LET_END */) {\n      this.errors.push(TreeError.create(startToken.parts[0], startToken.sourceSpan, `Unterminated @let declaration \"${name}\". Declaration must be terminated with a semicolon.`));\n      return;\n    } else {\n      endToken = this._advance();\n    }\n    const end = endToken.sourceSpan.fullStart;\n    const span = new ParseSourceSpan(startToken.sourceSpan.start, end, startToken.sourceSpan.fullStart);\n    // The start token usually captures the `@let`. Construct a name span by\n    // offsetting the start by the length of any text before the name.\n    const startOffset = startToken.sourceSpan.toString().lastIndexOf(name);\n    const nameStart = startToken.sourceSpan.start.moveBy(startOffset);\n    const nameSpan = new ParseSourceSpan(nameStart, startToken.sourceSpan.end);\n    const node = new LetDeclaration(name, valueToken.parts[0], span, nameSpan, valueToken.sourceSpan);\n    this._addToParent(node);\n  }\n  _consumeIncompleteLet(token) {\n    // Incomplete `@let` declaration may end up with an empty name.\n    const name = token.parts[0] ?? '';\n    const nameString = name ? ` \"${name}\"` : '';\n    // If there's at least a name, we can salvage an AST node that can be used for completions.\n    if (name.length > 0) {\n      const startOffset = token.sourceSpan.toString().lastIndexOf(name);\n      const nameStart = token.sourceSpan.start.moveBy(startOffset);\n      const nameSpan = new ParseSourceSpan(nameStart, token.sourceSpan.end);\n      const valueSpan = new ParseSourceSpan(token.sourceSpan.start, token.sourceSpan.start.moveBy(0));\n      const node = new LetDeclaration(name, '', token.sourceSpan, nameSpan, valueSpan);\n      this._addToParent(node);\n    }\n    this.errors.push(TreeError.create(token.parts[0], token.sourceSpan, `Incomplete @let declaration${nameString}. ` + `@let declarations must be written as \\`@let <name> = <value>;\\``));\n  }\n  _getContainer() {\n    return this._containerStack.length > 0 ? this._containerStack[this._containerStack.length - 1] : null;\n  }\n  _getClosestParentElement() {\n    for (let i = this._containerStack.length - 1; i > -1; i--) {\n      if (this._containerStack[i] instanceof Element) {\n        return this._containerStack[i];\n      }\n    }\n    return null;\n  }\n  _addToParent(node) {\n    const parent = this._getContainer();\n    if (parent === null) {\n      this.rootNodes.push(node);\n    } else {\n      parent.children.push(node);\n    }\n  }\n  _getElementFullName(prefix, localName, parentElement) {\n    if (prefix === '') {\n      prefix = this.getTagDefinition(localName).implicitNamespacePrefix || '';\n      if (prefix === '' && parentElement != null) {\n        const parentTagName = splitNsName(parentElement.name)[1];\n        const parentTagDefinition = this.getTagDefinition(parentTagName);\n        if (!parentTagDefinition.preventNamespaceInheritance) {\n          prefix = getNsPrefix(parentElement.name);\n        }\n      }\n    }\n    return mergeNsAndName(prefix, localName);\n  }\n}\nfunction lastOnStack(stack, element) {\n  return stack.length > 0 && stack[stack.length - 1] === element;\n}\n/**\n * Decode the `entity` string, which we believe is the contents of an HTML entity.\n *\n * If the string is not actually a valid/known entity then just return the original `match` string.\n */\nfunction decodeEntity(match, entity) {\n  if (NAMED_ENTITIES[entity] !== undefined) {\n    return NAMED_ENTITIES[entity] || match;\n  }\n  if (/^#x[a-f0-9]+$/i.test(entity)) {\n    return String.fromCodePoint(parseInt(entity.slice(2), 16));\n  }\n  if (/^#\\d+$/.test(entity)) {\n    return String.fromCodePoint(parseInt(entity.slice(1), 10));\n  }\n  return match;\n}\n\n/**\n * Set of tagName|propertyName corresponding to Trusted Types sinks. Properties applying to all\n * tags use '*'.\n *\n * Extracted from, and should be kept in sync with\n * https://w3c.github.io/webappsec-trusted-types/dist/spec/#integrations\n */\nconst TRUSTED_TYPES_SINKS = new Set([\n// NOTE: All strings in this set *must* be lowercase!\n// TrustedHTML\n'iframe|srcdoc', '*|innerhtml', '*|outerhtml',\n// NB: no TrustedScript here, as the corresponding tags are stripped by the compiler.\n// TrustedScriptURL\n'embed|src', 'object|codebase', 'object|data']);\n/**\n * isTrustedTypesSink returns true if the given property on the given DOM tag is a Trusted Types\n * sink. In that case, use `ElementSchemaRegistry.securityContext` to determine which particular\n * Trusted Type is required for values passed to the sink:\n * - SecurityContext.HTML corresponds to TrustedHTML\n * - SecurityContext.RESOURCE_URL corresponds to TrustedScriptURL\n */\nfunction isTrustedTypesSink(tagName, propName) {\n  // Make sure comparisons are case insensitive, so that case differences between attribute and\n  // property names do not have a security impact.\n  tagName = tagName.toLowerCase();\n  propName = propName.toLowerCase();\n  return TRUSTED_TYPES_SINKS.has(tagName + '|' + propName) || TRUSTED_TYPES_SINKS.has('*|' + propName);\n}\nconst setI18nRefs = (htmlNode, i18nNode) => {\n  if (htmlNode instanceof NodeWithI18n) {\n    if (i18nNode instanceof IcuPlaceholder && htmlNode.i18n instanceof Message) {\n      // This html node represents an ICU but this is a second processing pass, and the legacy id\n      // was computed in the previous pass and stored in the `i18n` property as a message.\n      // We are about to wipe out that property so capture the previous message to be reused when\n      // generating the message for this ICU later. See `_generateI18nMessage()`.\n      i18nNode.previousMessage = htmlNode.i18n;\n    }\n    htmlNode.i18n = i18nNode;\n  }\n  return i18nNode;\n};\n/**\n * This visitor walks over HTML parse tree and converts information stored in\n * i18n-related attributes (\"i18n\" and \"i18n-*\") into i18n meta object that is\n * stored with other element's and attribute's information.\n */\nclass I18nMetaVisitor {\n  constructor(interpolationConfig = DEFAULT_INTERPOLATION_CONFIG, keepI18nAttrs = false, enableI18nLegacyMessageIdFormat = false, containerBlocks = DEFAULT_CONTAINER_BLOCKS) {\n    this.interpolationConfig = interpolationConfig;\n    this.keepI18nAttrs = keepI18nAttrs;\n    this.enableI18nLegacyMessageIdFormat = enableI18nLegacyMessageIdFormat;\n    this.containerBlocks = containerBlocks;\n    // whether visited nodes contain i18n information\n    this.hasI18nMeta = false;\n    this._errors = [];\n  }\n  _generateI18nMessage(nodes, meta = '', visitNodeFn) {\n    const {\n      meaning,\n      description,\n      customId\n    } = this._parseMetadata(meta);\n    const createI18nMessage = createI18nMessageFactory(this.interpolationConfig, this.containerBlocks);\n    const message = createI18nMessage(nodes, meaning, description, customId, visitNodeFn);\n    this._setMessageId(message, meta);\n    this._setLegacyIds(message, meta);\n    return message;\n  }\n  visitAllWithErrors(nodes) {\n    const result = nodes.map(node => node.visit(this, null));\n    return new ParseTreeResult(result, this._errors);\n  }\n  visitElement(element) {\n    let message = undefined;\n    if (hasI18nAttrs(element)) {\n      this.hasI18nMeta = true;\n      const attrs = [];\n      const attrsMeta = {};\n      for (const attr of element.attrs) {\n        if (attr.name === I18N_ATTR) {\n          // root 'i18n' node attribute\n          const i18n = element.i18n || attr.value;\n          message = this._generateI18nMessage(element.children, i18n, setI18nRefs);\n          if (message.nodes.length === 0) {\n            // Ignore the message if it is empty.\n            message = undefined;\n          }\n          // Store the message on the element\n          element.i18n = message;\n        } else if (attr.name.startsWith(I18N_ATTR_PREFIX)) {\n          // 'i18n-*' attributes\n          const name = attr.name.slice(I18N_ATTR_PREFIX.length);\n          if (isTrustedTypesSink(element.name, name)) {\n            this._reportError(attr, `Translating attribute '${name}' is disallowed for security reasons.`);\n          } else {\n            attrsMeta[name] = attr.value;\n          }\n        } else {\n          // non-i18n attributes\n          attrs.push(attr);\n        }\n      }\n      // set i18n meta for attributes\n      if (Object.keys(attrsMeta).length) {\n        for (const attr of attrs) {\n          const meta = attrsMeta[attr.name];\n          // do not create translation for empty attributes\n          if (meta !== undefined && attr.value) {\n            attr.i18n = this._generateI18nMessage([attr], attr.i18n || meta);\n          }\n        }\n      }\n      if (!this.keepI18nAttrs) {\n        // update element's attributes,\n        // keeping only non-i18n related ones\n        element.attrs = attrs;\n      }\n    }\n    visitAll(this, element.children, message);\n    return element;\n  }\n  visitExpansion(expansion, currentMessage) {\n    let message;\n    const meta = expansion.i18n;\n    this.hasI18nMeta = true;\n    if (meta instanceof IcuPlaceholder) {\n      // set ICU placeholder name (e.g. \"ICU_1\"),\n      // generated while processing root element contents,\n      // so we can reference it when we output translation\n      const name = meta.name;\n      message = this._generateI18nMessage([expansion], meta);\n      const icu = icuFromI18nMessage(message);\n      icu.name = name;\n      if (currentMessage !== null) {\n        // Also update the placeholderToMessage map with this new message\n        currentMessage.placeholderToMessage[name] = message;\n      }\n    } else {\n      // ICU is a top level message, try to use metadata from container element if provided via\n      // `context` argument. Note: context may not be available for standalone ICUs (without\n      // wrapping element), so fallback to ICU metadata in this case.\n      message = this._generateI18nMessage([expansion], currentMessage || meta);\n    }\n    expansion.i18n = message;\n    return expansion;\n  }\n  visitText(text) {\n    return text;\n  }\n  visitAttribute(attribute) {\n    return attribute;\n  }\n  visitComment(comment) {\n    return comment;\n  }\n  visitExpansionCase(expansionCase) {\n    return expansionCase;\n  }\n  visitBlock(block, context) {\n    visitAll(this, block.children, context);\n    return block;\n  }\n  visitBlockParameter(parameter, context) {\n    return parameter;\n  }\n  visitLetDeclaration(decl, context) {\n    return decl;\n  }\n  /**\n   * Parse the general form `meta` passed into extract the explicit metadata needed to create a\n   * `Message`.\n   *\n   * There are three possibilities for the `meta` variable\n   * 1) a string from an `i18n` template attribute: parse it to extract the metadata values.\n   * 2) a `Message` from a previous processing pass: reuse the metadata values in the message.\n   * 4) other: ignore this and just process the message metadata as normal\n   *\n   * @param meta the bucket that holds information about the message\n   * @returns the parsed metadata.\n   */\n  _parseMetadata(meta) {\n    return typeof meta === 'string' ? parseI18nMeta(meta) : meta instanceof Message ? meta : {};\n  }\n  /**\n   * Generate (or restore) message id if not specified already.\n   */\n  _setMessageId(message, meta) {\n    if (!message.id) {\n      message.id = meta instanceof Message && meta.id || decimalDigest(message);\n    }\n  }\n  /**\n   * Update the `message` with a `legacyId` if necessary.\n   *\n   * @param message the message whose legacy id should be set\n   * @param meta information about the message being processed\n   */\n  _setLegacyIds(message, meta) {\n    if (this.enableI18nLegacyMessageIdFormat) {\n      message.legacyIds = [computeDigest(message), computeDecimalDigest(message)];\n    } else if (typeof meta !== 'string') {\n      // This occurs if we are doing the 2nd pass after whitespace removal (see `parseTemplate()` in\n      // `packages/compiler/src/render3/view/template.ts`).\n      // In that case we want to reuse the legacy message generated in the 1st pass (see\n      // `setI18nRefs()`).\n      const previousMessage = meta instanceof Message ? meta : meta instanceof IcuPlaceholder ? meta.previousMessage : undefined;\n      message.legacyIds = previousMessage ? previousMessage.legacyIds : [];\n    }\n  }\n  _reportError(node, msg) {\n    this._errors.push(new I18nError(node.sourceSpan, msg));\n  }\n}\n/** I18n separators for metadata **/\nconst I18N_MEANING_SEPARATOR = '|';\nconst I18N_ID_SEPARATOR = '@@';\n/**\n * Parses i18n metas like:\n *  - \"@@id\",\n *  - \"description[@@id]\",\n *  - \"meaning|description[@@id]\"\n * and returns an object with parsed output.\n *\n * @param meta String that represents i18n meta\n * @returns Object with id, meaning and description fields\n */\nfunction parseI18nMeta(meta = '') {\n  let customId;\n  let meaning;\n  let description;\n  meta = meta.trim();\n  if (meta) {\n    const idIndex = meta.indexOf(I18N_ID_SEPARATOR);\n    const descIndex = meta.indexOf(I18N_MEANING_SEPARATOR);\n    let meaningAndDesc;\n    [meaningAndDesc, customId] = idIndex > -1 ? [meta.slice(0, idIndex), meta.slice(idIndex + 2)] : [meta, ''];\n    [meaning, description] = descIndex > -1 ? [meaningAndDesc.slice(0, descIndex), meaningAndDesc.slice(descIndex + 1)] : ['', meaningAndDesc];\n  }\n  return {\n    customId,\n    meaning,\n    description\n  };\n}\n// Converts i18n meta information for a message (id, description, meaning)\n// to a JsDoc statement formatted as expected by the Closure compiler.\nfunction i18nMetaToJSDoc(meta) {\n  const tags = [];\n  if (meta.description) {\n    tags.push({\n      tagName: \"desc\" /* o.JSDocTagName.Desc */,\n      text: meta.description\n    });\n  } else {\n    // Suppress the JSCompiler warning that a `@desc` was not given for this message.\n    tags.push({\n      tagName: \"suppress\" /* o.JSDocTagName.Suppress */,\n      text: '{msgDescriptions}'\n    });\n  }\n  if (meta.meaning) {\n    tags.push({\n      tagName: \"meaning\" /* o.JSDocTagName.Meaning */,\n      text: meta.meaning\n    });\n  }\n  return jsDocComment(tags);\n}\n\n/** Closure uses `goog.getMsg(message)` to lookup translations */\nconst GOOG_GET_MSG = 'goog.getMsg';\n/**\n * Generates a `goog.getMsg()` statement and reassignment. The template:\n *\n * ```html\n * <div i18n>Sent from {{ sender }} to <span class=\"receiver\">{{ receiver }}</span></div>\n * ```\n *\n * Generates:\n *\n * ```typescript\n * const MSG_FOO = goog.getMsg(\n *   // Message template.\n *   'Sent from {$interpolation} to {$startTagSpan}{$interpolation_1}{$closeTagSpan}.',\n *   // Placeholder values, set to magic strings which get replaced by the Angular runtime.\n *   {\n *     'interpolation': '\\uFFFD0\\uFFFD',\n *     'startTagSpan': '\\uFFFD1\\uFFFD',\n *     'interpolation_1': '\\uFFFD2\\uFFFD',\n *     'closeTagSpan': '\\uFFFD3\\uFFFD',\n *   },\n *   // Options bag.\n *   {\n *     // Maps each placeholder to the original Angular source code which generates it's value.\n *     original_code: {\n *       'interpolation': '{{ sender }}',\n *       'startTagSpan': '<span class=\"receiver\">',\n *       'interpolation_1': '{{ receiver }}',\n *       'closeTagSpan': '</span>',\n *     },\n *   },\n * );\n * const I18N_0 = MSG_FOO;\n * ```\n */\nfunction createGoogleGetMsgStatements(variable$1, message, closureVar, placeholderValues) {\n  const messageString = serializeI18nMessageForGetMsg(message);\n  const args = [literal(messageString)];\n  if (Object.keys(placeholderValues).length) {\n    // Message template parameters containing the magic strings replaced by the Angular runtime with\n    // real data, e.g. `{'interpolation': '\\uFFFD0\\uFFFD'}`.\n    args.push(mapLiteral(formatI18nPlaceholderNamesInMap(placeholderValues, true /* useCamelCase */), true /* quoted */));\n    // Message options object, which contains original source code for placeholders (as they are\n    // present in a template, e.g.\n    // `{original_code: {'interpolation': '{{ name }}', 'startTagSpan': '<span>'}}`.\n    args.push(mapLiteral({\n      original_code: literalMap(Object.keys(placeholderValues).map(param => ({\n        key: formatI18nPlaceholderName(param),\n        quoted: true,\n        value: message.placeholders[param] ?\n        // Get source span for typical placeholder if it exists.\n        literal(message.placeholders[param].sourceSpan.toString()) :\n        // Otherwise must be an ICU expression, get it's source span.\n        literal(message.placeholderToMessage[param].nodes.map(node => node.sourceSpan.toString()).join(''))\n      })))\n    }));\n  }\n  // /**\n  //  * @desc description of message\n  //  * @meaning meaning of message\n  //  */\n  // const MSG_... = goog.getMsg(..);\n  // I18N_X = MSG_...;\n  const googGetMsgStmt = closureVar.set(variable(GOOG_GET_MSG).callFn(args)).toConstDecl();\n  googGetMsgStmt.addLeadingComment(i18nMetaToJSDoc(message));\n  const i18nAssignmentStmt = new ExpressionStatement(variable$1.set(closureVar));\n  return [googGetMsgStmt, i18nAssignmentStmt];\n}\n/**\n * This visitor walks over i18n tree and generates its string representation, including ICUs and\n * placeholders in `{$placeholder}` (for plain messages) or `{PLACEHOLDER}` (inside ICUs) format.\n */\nclass GetMsgSerializerVisitor {\n  formatPh(value) {\n    return `{$${formatI18nPlaceholderName(value)}}`;\n  }\n  visitText(text) {\n    return text.value;\n  }\n  visitContainer(container) {\n    return container.children.map(child => child.visit(this)).join('');\n  }\n  visitIcu(icu) {\n    return serializeIcuNode(icu);\n  }\n  visitTagPlaceholder(ph) {\n    return ph.isVoid ? this.formatPh(ph.startName) : `${this.formatPh(ph.startName)}${ph.children.map(child => child.visit(this)).join('')}${this.formatPh(ph.closeName)}`;\n  }\n  visitPlaceholder(ph) {\n    return this.formatPh(ph.name);\n  }\n  visitBlockPlaceholder(ph) {\n    return `${this.formatPh(ph.startName)}${ph.children.map(child => child.visit(this)).join('')}${this.formatPh(ph.closeName)}`;\n  }\n  visitIcuPlaceholder(ph, context) {\n    return this.formatPh(ph.name);\n  }\n}\nconst serializerVisitor = new GetMsgSerializerVisitor();\nfunction serializeI18nMessageForGetMsg(message) {\n  return message.nodes.map(node => node.visit(serializerVisitor, null)).join('');\n}\nfunction createLocalizeStatements(variable, message, params) {\n  const {\n    messageParts,\n    placeHolders\n  } = serializeI18nMessageForLocalize(message);\n  const sourceSpan = getSourceSpan(message);\n  const expressions = placeHolders.map(ph => params[ph.text]);\n  const localizedString$1 = localizedString(message, messageParts, placeHolders, expressions, sourceSpan);\n  const variableInitialization = variable.set(localizedString$1);\n  return [new ExpressionStatement(variableInitialization)];\n}\n/**\n * This visitor walks over an i18n tree, capturing literal strings and placeholders.\n *\n * The result can be used for generating the `$localize` tagged template literals.\n */\nclass LocalizeSerializerVisitor {\n  constructor(placeholderToMessage, pieces) {\n    this.placeholderToMessage = placeholderToMessage;\n    this.pieces = pieces;\n  }\n  visitText(text) {\n    if (this.pieces[this.pieces.length - 1] instanceof LiteralPiece) {\n      // Two literal pieces in a row means that there was some comment node in-between.\n      this.pieces[this.pieces.length - 1].text += text.value;\n    } else {\n      const sourceSpan = new ParseSourceSpan(text.sourceSpan.fullStart, text.sourceSpan.end, text.sourceSpan.fullStart, text.sourceSpan.details);\n      this.pieces.push(new LiteralPiece(text.value, sourceSpan));\n    }\n  }\n  visitContainer(container) {\n    container.children.forEach(child => child.visit(this));\n  }\n  visitIcu(icu) {\n    this.pieces.push(new LiteralPiece(serializeIcuNode(icu), icu.sourceSpan));\n  }\n  visitTagPlaceholder(ph) {\n    this.pieces.push(this.createPlaceholderPiece(ph.startName, ph.startSourceSpan ?? ph.sourceSpan));\n    if (!ph.isVoid) {\n      ph.children.forEach(child => child.visit(this));\n      this.pieces.push(this.createPlaceholderPiece(ph.closeName, ph.endSourceSpan ?? ph.sourceSpan));\n    }\n  }\n  visitPlaceholder(ph) {\n    this.pieces.push(this.createPlaceholderPiece(ph.name, ph.sourceSpan));\n  }\n  visitBlockPlaceholder(ph) {\n    this.pieces.push(this.createPlaceholderPiece(ph.startName, ph.startSourceSpan ?? ph.sourceSpan));\n    ph.children.forEach(child => child.visit(this));\n    this.pieces.push(this.createPlaceholderPiece(ph.closeName, ph.endSourceSpan ?? ph.sourceSpan));\n  }\n  visitIcuPlaceholder(ph) {\n    this.pieces.push(this.createPlaceholderPiece(ph.name, ph.sourceSpan, this.placeholderToMessage[ph.name]));\n  }\n  createPlaceholderPiece(name, sourceSpan, associatedMessage) {\n    return new PlaceholderPiece(formatI18nPlaceholderName(name, /* useCamelCase */false), sourceSpan, associatedMessage);\n  }\n}\n/**\n * Serialize an i18n message into two arrays: messageParts and placeholders.\n *\n * These arrays will be used to generate `$localize` tagged template literals.\n *\n * @param message The message to be serialized.\n * @returns an object containing the messageParts and placeholders.\n */\nfunction serializeI18nMessageForLocalize(message) {\n  const pieces = [];\n  const serializerVisitor = new LocalizeSerializerVisitor(message.placeholderToMessage, pieces);\n  message.nodes.forEach(node => node.visit(serializerVisitor));\n  return processMessagePieces(pieces);\n}\nfunction getSourceSpan(message) {\n  const startNode = message.nodes[0];\n  const endNode = message.nodes[message.nodes.length - 1];\n  return new ParseSourceSpan(startNode.sourceSpan.fullStart, endNode.sourceSpan.end, startNode.sourceSpan.fullStart, startNode.sourceSpan.details);\n}\n/**\n * Convert the list of serialized MessagePieces into two arrays.\n *\n * One contains the literal string pieces and the other the placeholders that will be replaced by\n * expressions when rendering `$localize` tagged template literals.\n *\n * @param pieces The pieces to process.\n * @returns an object containing the messageParts and placeholders.\n */\nfunction processMessagePieces(pieces) {\n  const messageParts = [];\n  const placeHolders = [];\n  if (pieces[0] instanceof PlaceholderPiece) {\n    // The first piece was a placeholder so we need to add an initial empty message part.\n    messageParts.push(createEmptyMessagePart(pieces[0].sourceSpan.start));\n  }\n  for (let i = 0; i < pieces.length; i++) {\n    const part = pieces[i];\n    if (part instanceof LiteralPiece) {\n      messageParts.push(part);\n    } else {\n      placeHolders.push(part);\n      if (pieces[i - 1] instanceof PlaceholderPiece) {\n        // There were two placeholders in a row, so we need to add an empty message part.\n        messageParts.push(createEmptyMessagePart(pieces[i - 1].sourceSpan.end));\n      }\n    }\n  }\n  if (pieces[pieces.length - 1] instanceof PlaceholderPiece) {\n    // The last piece was a placeholder so we need to add a final empty message part.\n    messageParts.push(createEmptyMessagePart(pieces[pieces.length - 1].sourceSpan.end));\n  }\n  return {\n    messageParts,\n    placeHolders\n  };\n}\nfunction createEmptyMessagePart(location) {\n  return new LiteralPiece('', new ParseSourceSpan(location, location));\n}\n\n/** Name of the global variable that is used to determine if we use Closure translations or not */\nconst NG_I18N_CLOSURE_MODE = 'ngI18nClosureMode';\n/**\n * Prefix for non-`goog.getMsg` i18n-related vars.\n * Note: the prefix uses lowercase characters intentionally due to a Closure behavior that\n * considers variables like `I18N_0` as constants and throws an error when their value changes.\n */\nconst TRANSLATION_VAR_PREFIX = 'i18n_';\n/** Prefix of ICU expressions for post processing */\nconst I18N_ICU_MAPPING_PREFIX = 'I18N_EXP_';\n/**\n * The escape sequence used for message param values.\n */\nconst ESCAPE = '\\uFFFD';\n/* Closure variables holding messages must be named `MSG_[A-Z0-9]+` */\nconst CLOSURE_TRANSLATION_VAR_PREFIX = 'MSG_';\n/**\n * Generates a prefix for translation const name.\n *\n * @param extra Additional local prefix that should be injected into translation var name\n * @returns Complete translation const prefix\n */\nfunction getTranslationConstPrefix(extra) {\n  return `${CLOSURE_TRANSLATION_VAR_PREFIX}${extra}`.toUpperCase();\n}\n/**\n * Generate AST to declare a variable. E.g. `var I18N_1;`.\n * @param variable the name of the variable to declare.\n */\nfunction declareI18nVariable(variable) {\n  return new DeclareVarStmt(variable.name, undefined, INFERRED_TYPE, undefined, variable.sourceSpan);\n}\n/**\n * Lifts i18n properties into the consts array.\n * TODO: Can we use `ConstCollectedExpr`?\n * TODO: The way the various attributes are linked together is very complex. Perhaps we could\n * simplify the process, maybe by combining the context and message ops?\n */\nfunction collectI18nConsts(job) {\n  const fileBasedI18nSuffix = job.relativeContextFilePath.replace(/[^A-Za-z0-9]/g, '_').toUpperCase() + '_';\n  // Step One: Build up various lookup maps we need to collect all the consts.\n  // Context Xref -> Extracted Attribute Ops\n  const extractedAttributesByI18nContext = new Map();\n  // Element/ElementStart Xref -> I18n Attributes config op\n  const i18nAttributesByElement = new Map();\n  // Element/ElementStart Xref -> All I18n Expression ops for attrs on that target\n  const i18nExpressionsByElement = new Map();\n  // I18n Message Xref -> I18n Message Op (TODO: use a central op map)\n  const messages = new Map();\n  for (const unit of job.units) {\n    for (const op of unit.ops()) {\n      if (op.kind === OpKind.ExtractedAttribute && op.i18nContext !== null) {\n        const attributes = extractedAttributesByI18nContext.get(op.i18nContext) ?? [];\n        attributes.push(op);\n        extractedAttributesByI18nContext.set(op.i18nContext, attributes);\n      } else if (op.kind === OpKind.I18nAttributes) {\n        i18nAttributesByElement.set(op.target, op);\n      } else if (op.kind === OpKind.I18nExpression && op.usage === I18nExpressionFor.I18nAttribute) {\n        const expressions = i18nExpressionsByElement.get(op.target) ?? [];\n        expressions.push(op);\n        i18nExpressionsByElement.set(op.target, expressions);\n      } else if (op.kind === OpKind.I18nMessage) {\n        messages.set(op.xref, op);\n      }\n    }\n  }\n  // Step Two: Serialize the extracted i18n messages for root i18n blocks and i18n attributes into\n  // the const array.\n  //\n  // Also, each i18n message will have a variable expression that can refer to its\n  // value. Store these expressions in the appropriate place:\n  // 1. For normal i18n content, it also goes in the const array. We save the const index to use\n  // later.\n  // 2. For extracted attributes, it becomes the value of the extracted attribute instruction.\n  // 3. For i18n bindings, it will go in a separate const array instruction below; for now, we just\n  // save it.\n  const i18nValuesByContext = new Map();\n  const messageConstIndices = new Map();\n  for (const unit of job.units) {\n    for (const op of unit.create) {\n      if (op.kind === OpKind.I18nMessage) {\n        if (op.messagePlaceholder === null) {\n          const {\n            mainVar,\n            statements\n          } = collectMessage(job, fileBasedI18nSuffix, messages, op);\n          if (op.i18nBlock !== null) {\n            // This is a regular i18n message with a corresponding i18n block. Collect it into the\n            // const array.\n            const i18nConst = job.addConst(mainVar, statements);\n            messageConstIndices.set(op.i18nBlock, i18nConst);\n          } else {\n            // This is an i18n attribute. Extract the initializers into the const pool.\n            job.constsInitializers.push(...statements);\n            // Save the i18n variable value for later.\n            i18nValuesByContext.set(op.i18nContext, mainVar);\n            // This i18n message may correspond to an individual extracted attribute. If so, The\n            // value of that attribute is updated to read the extracted i18n variable.\n            const attributesForMessage = extractedAttributesByI18nContext.get(op.i18nContext);\n            if (attributesForMessage !== undefined) {\n              for (const attr of attributesForMessage) {\n                attr.expression = mainVar.clone();\n              }\n            }\n          }\n        }\n        OpList.remove(op);\n      }\n    }\n  }\n  // Step Three: Serialize I18nAttributes configurations into the const array. Each I18nAttributes\n  // instruction has a config array, which contains k-v pairs describing each binding name, and the\n  // i18n variable that provides the value.\n  for (const unit of job.units) {\n    for (const elem of unit.create) {\n      if (isElementOrContainerOp(elem)) {\n        const i18nAttributes = i18nAttributesByElement.get(elem.xref);\n        if (i18nAttributes === undefined) {\n          // This element is not associated with an i18n attributes configuration instruction.\n          continue;\n        }\n        let i18nExpressions = i18nExpressionsByElement.get(elem.xref);\n        if (i18nExpressions === undefined) {\n          // Unused i18nAttributes should have already been removed.\n          // TODO: Should the removal of those dead instructions be merged with this phase?\n          throw new Error('AssertionError: Could not find any i18n expressions associated with an I18nAttributes instruction');\n        }\n        // Find expressions for all the unique property names, removing duplicates.\n        const seenPropertyNames = new Set();\n        i18nExpressions = i18nExpressions.filter(i18nExpr => {\n          const seen = seenPropertyNames.has(i18nExpr.name);\n          seenPropertyNames.add(i18nExpr.name);\n          return !seen;\n        });\n        const i18nAttributeConfig = i18nExpressions.flatMap(i18nExpr => {\n          const i18nExprValue = i18nValuesByContext.get(i18nExpr.context);\n          if (i18nExprValue === undefined) {\n            throw new Error(\"AssertionError: Could not find i18n expression's value\");\n          }\n          return [literal(i18nExpr.name), i18nExprValue];\n        });\n        i18nAttributes.i18nAttributesConfig = job.addConst(new LiteralArrayExpr(i18nAttributeConfig));\n      }\n    }\n  }\n  // Step Four: Propagate the extracted const index into i18n ops that messages were extracted from.\n  for (const unit of job.units) {\n    for (const op of unit.create) {\n      if (op.kind === OpKind.I18nStart) {\n        const msgIndex = messageConstIndices.get(op.root);\n        if (msgIndex === undefined) {\n          throw new Error('AssertionError: Could not find corresponding i18n block index for an i18n message op; was an i18n message incorrectly assumed to correspond to an attribute?');\n        }\n        op.messageIndex = msgIndex;\n      }\n    }\n  }\n}\n/**\n * Collects the given message into a set of statements that can be added to the const array.\n * This will recursively collect any sub-messages referenced from the parent message as well.\n */\nfunction collectMessage(job, fileBasedI18nSuffix, messages, messageOp) {\n  // Recursively collect any sub-messages, record each sub-message's main variable under its\n  // placeholder so that we can add them to the params for the parent message. It is possible\n  // that multiple sub-messages will share the same placeholder, so we need to track an array of\n  // variables for each placeholder.\n  const statements = [];\n  const subMessagePlaceholders = new Map();\n  for (const subMessageId of messageOp.subMessages) {\n    const subMessage = messages.get(subMessageId);\n    const {\n      mainVar: subMessageVar,\n      statements: subMessageStatements\n    } = collectMessage(job, fileBasedI18nSuffix, messages, subMessage);\n    statements.push(...subMessageStatements);\n    const subMessages = subMessagePlaceholders.get(subMessage.messagePlaceholder) ?? [];\n    subMessages.push(subMessageVar);\n    subMessagePlaceholders.set(subMessage.messagePlaceholder, subMessages);\n  }\n  addSubMessageParams(messageOp, subMessagePlaceholders);\n  // Sort the params for consistency with TemaplateDefinitionBuilder output.\n  messageOp.params = new Map([...messageOp.params.entries()].sort());\n  const mainVar = variable(job.pool.uniqueName(TRANSLATION_VAR_PREFIX));\n  // Closure Compiler requires const names to start with `MSG_` but disallows any other\n  // const to start with `MSG_`. We define a variable starting with `MSG_` just for the\n  // `goog.getMsg` call\n  const closureVar = i18nGenerateClosureVar(job.pool, messageOp.message.id, fileBasedI18nSuffix, job.i18nUseExternalIds);\n  let transformFn = undefined;\n  // If nescessary, add a post-processing step and resolve any placeholder params that are\n  // set in post-processing.\n  if (messageOp.needsPostprocessing || messageOp.postprocessingParams.size > 0) {\n    // Sort the post-processing params for consistency with TemaplateDefinitionBuilder output.\n    const postprocessingParams = Object.fromEntries([...messageOp.postprocessingParams.entries()].sort());\n    const formattedPostprocessingParams = formatI18nPlaceholderNamesInMap(postprocessingParams, /* useCamelCase */false);\n    const extraTransformFnParams = [];\n    if (messageOp.postprocessingParams.size > 0) {\n      extraTransformFnParams.push(mapLiteral(formattedPostprocessingParams, /* quoted */true));\n    }\n    transformFn = expr => importExpr(Identifiers.i18nPostprocess).callFn([expr, ...extraTransformFnParams]);\n  }\n  // Add the message's statements\n  statements.push(...getTranslationDeclStmts(messageOp.message, mainVar, closureVar, messageOp.params, transformFn));\n  return {\n    mainVar,\n    statements\n  };\n}\n/**\n * Adds the given subMessage placeholders to the given message op.\n *\n * If a placeholder only corresponds to a single sub-message variable, we just set that variable\n * as the param value. However, if the placeholder corresponds to multiple sub-message\n * variables, we need to add a special placeholder value that is handled by the post-processing\n * step. We then add the array of variables as a post-processing param.\n */\nfunction addSubMessageParams(messageOp, subMessagePlaceholders) {\n  for (const [placeholder, subMessages] of subMessagePlaceholders) {\n    if (subMessages.length === 1) {\n      messageOp.params.set(placeholder, subMessages[0]);\n    } else {\n      messageOp.params.set(placeholder, literal(`${ESCAPE}${I18N_ICU_MAPPING_PREFIX}${placeholder}${ESCAPE}`));\n      messageOp.postprocessingParams.set(placeholder, literalArr(subMessages));\n    }\n  }\n}\n/**\n * Generate statements that define a given translation message.\n *\n * ```\n * var I18N_1;\n * if (typeof ngI18nClosureMode !== undefined && ngI18nClosureMode) {\n *     var MSG_EXTERNAL_XXX = goog.getMsg(\n *          \"Some message with {$interpolation}!\",\n *          { \"interpolation\": \"\\uFFFD0\\uFFFD\" }\n *     );\n *     I18N_1 = MSG_EXTERNAL_XXX;\n * }\n * else {\n *     I18N_1 = $localize`Some message with ${'\\uFFFD0\\uFFFD'}!`;\n * }\n * ```\n *\n * @param message The original i18n AST message node\n * @param variable The variable that will be assigned the translation, e.g. `I18N_1`.\n * @param closureVar The variable for Closure `goog.getMsg` calls, e.g. `MSG_EXTERNAL_XXX`.\n * @param params Object mapping placeholder names to their values (e.g.\n * `{ \"interpolation\": \"\\uFFFD0\\uFFFD\" }`).\n * @param transformFn Optional transformation function that will be applied to the translation\n *     (e.g.\n * post-processing).\n * @returns An array of statements that defined a given translation.\n */\nfunction getTranslationDeclStmts(message, variable, closureVar, params, transformFn) {\n  const paramsObject = Object.fromEntries(params);\n  const statements = [declareI18nVariable(variable), ifStmt(createClosureModeGuard(), createGoogleGetMsgStatements(variable, message, closureVar, paramsObject), createLocalizeStatements(variable, message, formatI18nPlaceholderNamesInMap(paramsObject, /* useCamelCase */false)))];\n  if (transformFn) {\n    statements.push(new ExpressionStatement(variable.set(transformFn(variable))));\n  }\n  return statements;\n}\n/**\n * Create the expression that will be used to guard the closure mode block\n * It is equivalent to:\n *\n * ```\n * typeof ngI18nClosureMode !== undefined && ngI18nClosureMode\n * ```\n */\nfunction createClosureModeGuard() {\n  return typeofExpr(variable(NG_I18N_CLOSURE_MODE)).notIdentical(literal('undefined', STRING_TYPE)).and(variable(NG_I18N_CLOSURE_MODE));\n}\n/**\n * Generates vars with Closure-specific names for i18n blocks (i.e. `MSG_XXX`).\n */\nfunction i18nGenerateClosureVar(pool, messageId, fileBasedI18nSuffix, useExternalIds) {\n  let name;\n  const suffix = fileBasedI18nSuffix;\n  if (useExternalIds) {\n    const prefix = getTranslationConstPrefix(`EXTERNAL_`);\n    const uniqueSuffix = pool.uniqueName(suffix);\n    name = `${prefix}${sanitizeIdentifier(messageId)}$$${uniqueSuffix}`;\n  } else {\n    const prefix = getTranslationConstPrefix(suffix);\n    name = pool.uniqueName(prefix);\n  }\n  return variable(name);\n}\n\n/**\n * Removes text nodes within i18n blocks since they are already hardcoded into the i18n message.\n * Also, replaces interpolations on these text nodes with i18n expressions of the non-text portions,\n * which will be applied later.\n */\nfunction convertI18nText(job) {\n  for (const unit of job.units) {\n    // Remove all text nodes within i18n blocks, their content is already captured in the i18n\n    // message.\n    let currentI18n = null;\n    let currentIcu = null;\n    const textNodeI18nBlocks = new Map();\n    const textNodeIcus = new Map();\n    const icuPlaceholderByText = new Map();\n    for (const op of unit.create) {\n      switch (op.kind) {\n        case OpKind.I18nStart:\n          if (op.context === null) {\n            throw Error('I18n op should have its context set.');\n          }\n          currentI18n = op;\n          break;\n        case OpKind.I18nEnd:\n          currentI18n = null;\n          break;\n        case OpKind.IcuStart:\n          if (op.context === null) {\n            throw Error('Icu op should have its context set.');\n          }\n          currentIcu = op;\n          break;\n        case OpKind.IcuEnd:\n          currentIcu = null;\n          break;\n        case OpKind.Text:\n          if (currentI18n !== null) {\n            textNodeI18nBlocks.set(op.xref, currentI18n);\n            textNodeIcus.set(op.xref, currentIcu);\n            if (op.icuPlaceholder !== null) {\n              // Create an op to represent the ICU placeholder. Initially set its static text to the\n              // value of the text op, though this may be overwritten later if this text op is a\n              // placeholder for an interpolation.\n              const icuPlaceholderOp = createIcuPlaceholderOp(job.allocateXrefId(), op.icuPlaceholder, [op.initialValue]);\n              OpList.replace(op, icuPlaceholderOp);\n              icuPlaceholderByText.set(op.xref, icuPlaceholderOp);\n            } else {\n              // Otherwise just remove the text op, since its value is already accounted for in the\n              // translated message.\n              OpList.remove(op);\n            }\n          }\n          break;\n      }\n    }\n    // Update any interpolations to the removed text, and instead represent them as a series of i18n\n    // expressions that we then apply.\n    for (const op of unit.update) {\n      switch (op.kind) {\n        case OpKind.InterpolateText:\n          if (!textNodeI18nBlocks.has(op.target)) {\n            continue;\n          }\n          const i18nOp = textNodeI18nBlocks.get(op.target);\n          const icuOp = textNodeIcus.get(op.target);\n          const icuPlaceholder = icuPlaceholderByText.get(op.target);\n          const contextId = icuOp ? icuOp.context : i18nOp.context;\n          const resolutionTime = icuOp ? I18nParamResolutionTime.Postproccessing : I18nParamResolutionTime.Creation;\n          const ops = [];\n          for (let i = 0; i < op.interpolation.expressions.length; i++) {\n            const expr = op.interpolation.expressions[i];\n            // For now, this i18nExpression depends on the slot context of the enclosing i18n block.\n            // Later, we will modify this, and advance to a different point.\n            ops.push(createI18nExpressionOp(contextId, i18nOp.xref, i18nOp.xref, i18nOp.handle, expr, icuPlaceholder?.xref ?? null, op.interpolation.i18nPlaceholders[i] ?? null, resolutionTime, I18nExpressionFor.I18nText, '', expr.sourceSpan ?? op.sourceSpan));\n          }\n          OpList.replaceWithMany(op, ops);\n          // If this interpolation is part of an ICU placeholder, add the strings and expressions to\n          // the placeholder.\n          if (icuPlaceholder !== undefined) {\n            icuPlaceholder.strings = op.interpolation.strings;\n          }\n          break;\n      }\n    }\n  }\n}\n\n/**\n * Lifts local reference declarations on element-like structures within each view into an entry in\n * the `consts` array for the whole component.\n */\nfunction liftLocalRefs(job) {\n  for (const unit of job.units) {\n    for (const op of unit.create) {\n      switch (op.kind) {\n        case OpKind.ElementStart:\n        case OpKind.Template:\n          if (!Array.isArray(op.localRefs)) {\n            throw new Error(`AssertionError: expected localRefs to be an array still`);\n          }\n          op.numSlotsUsed += op.localRefs.length;\n          if (op.localRefs.length > 0) {\n            const localRefs = serializeLocalRefs(op.localRefs);\n            op.localRefs = job.addConst(localRefs);\n          } else {\n            op.localRefs = null;\n          }\n          break;\n      }\n    }\n  }\n}\nfunction serializeLocalRefs(refs) {\n  const constRefs = [];\n  for (const ref of refs) {\n    constRefs.push(literal(ref.name), literal(ref.target));\n  }\n  return literalArr(constRefs);\n}\n\n/**\n * Change namespaces between HTML, SVG and MathML, depending on the next element.\n */\nfunction emitNamespaceChanges(job) {\n  for (const unit of job.units) {\n    let activeNamespace = Namespace.HTML;\n    for (const op of unit.create) {\n      if (op.kind !== OpKind.ElementStart) {\n        continue;\n      }\n      if (op.namespace !== activeNamespace) {\n        OpList.insertBefore(createNamespaceOp(op.namespace), op);\n        activeNamespace = op.namespace;\n      }\n    }\n  }\n}\n\n/**\n * Parses string representation of a style and converts it into object literal.\n *\n * @param value string representation of style as used in the `style` attribute in HTML.\n *   Example: `color: red; height: auto`.\n * @returns An array of style property name and value pairs, e.g. `['color', 'red', 'height',\n * 'auto']`\n */\nfunction parse(value) {\n  // we use a string array here instead of a string map\n  // because a string-map is not guaranteed to retain the\n  // order of the entries whereas a string array can be\n  // constructed in a [key, value, key, value] format.\n  const styles = [];\n  let i = 0;\n  let parenDepth = 0;\n  let quote = 0 /* Char.QuoteNone */;\n  let valueStart = 0;\n  let propStart = 0;\n  let currentProp = null;\n  while (i < value.length) {\n    const token = value.charCodeAt(i++);\n    switch (token) {\n      case 40 /* Char.OpenParen */:\n        parenDepth++;\n        break;\n      case 41 /* Char.CloseParen */:\n        parenDepth--;\n        break;\n      case 39 /* Char.QuoteSingle */:\n        // valueStart needs to be there since prop values don't\n        // have quotes in CSS\n        if (quote === 0 /* Char.QuoteNone */) {\n          quote = 39 /* Char.QuoteSingle */;\n        } else if (quote === 39 /* Char.QuoteSingle */ && value.charCodeAt(i - 1) !== 92 /* Char.BackSlash */) {\n          quote = 0 /* Char.QuoteNone */;\n        }\n        break;\n      case 34 /* Char.QuoteDouble */:\n        // same logic as above\n        if (quote === 0 /* Char.QuoteNone */) {\n          quote = 34 /* Char.QuoteDouble */;\n        } else if (quote === 34 /* Char.QuoteDouble */ && value.charCodeAt(i - 1) !== 92 /* Char.BackSlash */) {\n          quote = 0 /* Char.QuoteNone */;\n        }\n        break;\n      case 58 /* Char.Colon */:\n        if (!currentProp && parenDepth === 0 && quote === 0 /* Char.QuoteNone */) {\n          // TODO: Do not hyphenate CSS custom property names like: `--intentionallyCamelCase`\n          currentProp = hyphenate(value.substring(propStart, i - 1).trim());\n          valueStart = i;\n        }\n        break;\n      case 59 /* Char.Semicolon */:\n        if (currentProp && valueStart > 0 && parenDepth === 0 && quote === 0 /* Char.QuoteNone */) {\n          const styleVal = value.substring(valueStart, i - 1).trim();\n          styles.push(currentProp, styleVal);\n          propStart = i;\n          valueStart = 0;\n          currentProp = null;\n        }\n        break;\n    }\n  }\n  if (currentProp && valueStart) {\n    const styleVal = value.slice(valueStart).trim();\n    styles.push(currentProp, styleVal);\n  }\n  return styles;\n}\nfunction hyphenate(value) {\n  return value.replace(/[a-z][A-Z]/g, v => {\n    return v.charAt(0) + '-' + v.charAt(1);\n  }).toLowerCase();\n}\n/**\n * Parses extracted style and class attributes into separate ExtractedAttributeOps per style or\n * class property.\n */\nfunction parseExtractedStyles(job) {\n  const elements = new Map();\n  for (const unit of job.units) {\n    for (const op of unit.create) {\n      if (isElementOrContainerOp(op)) {\n        elements.set(op.xref, op);\n      }\n    }\n  }\n  for (const unit of job.units) {\n    for (const op of unit.create) {\n      if (op.kind === OpKind.ExtractedAttribute && op.bindingKind === BindingKind.Attribute && isStringLiteral(op.expression)) {\n        const target = elements.get(op.target);\n        if (target !== undefined && target.kind === OpKind.Template && target.templateKind === TemplateKind.Structural) {\n          // TemplateDefinitionBuilder will not apply class and style bindings to structural\n          // directives; instead, it will leave them as attributes.\n          // (It's not clear what that would mean, anyway -- classes and styles on a structural\n          // element should probably be a parse error.)\n          // TODO: We may be able to remove this once Template Pipeline is the default.\n          continue;\n        }\n        if (op.name === 'style') {\n          const parsedStyles = parse(op.expression.value);\n          for (let i = 0; i < parsedStyles.length - 1; i += 2) {\n            OpList.insertBefore(createExtractedAttributeOp(op.target, BindingKind.StyleProperty, null, parsedStyles[i], literal(parsedStyles[i + 1]), null, null, SecurityContext.STYLE), op);\n          }\n          OpList.remove(op);\n        } else if (op.name === 'class') {\n          const parsedClasses = op.expression.value.trim().split(/\\s+/g);\n          for (const parsedClass of parsedClasses) {\n            OpList.insertBefore(createExtractedAttributeOp(op.target, BindingKind.ClassName, null, parsedClass, null, null, null, SecurityContext.NONE), op);\n          }\n          OpList.remove(op);\n        }\n      }\n    }\n  }\n}\n\n/**\n * Generate names for functions and variables across all views.\n *\n * This includes propagating those names into any `ir.ReadVariableExpr`s of those variables, so that\n * the reads can be emitted correctly.\n */\nfunction nameFunctionsAndVariables(job) {\n  addNamesToView(job.root, job.componentName, {\n    index: 0\n  }, job.compatibility === CompatibilityMode.TemplateDefinitionBuilder);\n}\nfunction addNamesToView(unit, baseName, state, compatibility) {\n  if (unit.fnName === null) {\n    // Ensure unique names for view units. This is necessary because there might be multiple\n    // components with same names in the context of the same pool. Only add the suffix\n    // if really needed.\n    unit.fnName = unit.job.pool.uniqueName(sanitizeIdentifier(`${baseName}_${unit.job.fnSuffix}`), /* alwaysIncludeSuffix */false);\n  }\n  // Keep track of the names we assign to variables in the view. We'll need to propagate these\n  // into reads of those variables afterwards.\n  const varNames = new Map();\n  for (const op of unit.ops()) {\n    switch (op.kind) {\n      case OpKind.Property:\n      case OpKind.HostProperty:\n        if (op.isAnimationTrigger) {\n          op.name = '@' + op.name;\n        }\n        break;\n      case OpKind.Listener:\n        if (op.handlerFnName !== null) {\n          break;\n        }\n        if (!op.hostListener && op.targetSlot.slot === null) {\n          throw new Error(`Expected a slot to be assigned`);\n        }\n        let animation = '';\n        if (op.isAnimationListener) {\n          op.name = `@${op.name}.${op.animationPhase}`;\n          animation = 'animation';\n        }\n        if (op.hostListener) {\n          op.handlerFnName = `${baseName}_${animation}${op.name}_HostBindingHandler`;\n        } else {\n          op.handlerFnName = `${unit.fnName}_${op.tag.replace('-', '_')}_${animation}${op.name}_${op.targetSlot.slot}_listener`;\n        }\n        op.handlerFnName = sanitizeIdentifier(op.handlerFnName);\n        break;\n      case OpKind.TwoWayListener:\n        if (op.handlerFnName !== null) {\n          break;\n        }\n        if (op.targetSlot.slot === null) {\n          throw new Error(`Expected a slot to be assigned`);\n        }\n        op.handlerFnName = sanitizeIdentifier(`${unit.fnName}_${op.tag.replace('-', '_')}_${op.name}_${op.targetSlot.slot}_listener`);\n        break;\n      case OpKind.Variable:\n        varNames.set(op.xref, getVariableName(unit, op.variable, state));\n        break;\n      case OpKind.RepeaterCreate:\n        if (!(unit instanceof ViewCompilationUnit)) {\n          throw new Error(`AssertionError: must be compiling a component`);\n        }\n        if (op.handle.slot === null) {\n          throw new Error(`Expected slot to be assigned`);\n        }\n        if (op.emptyView !== null) {\n          const emptyView = unit.job.views.get(op.emptyView);\n          // Repeater empty view function is at slot +2 (metadata is in the first slot).\n          addNamesToView(emptyView, `${baseName}_${op.functionNameSuffix}Empty_${op.handle.slot + 2}`, state, compatibility);\n        }\n        // Repeater primary view function is at slot +1 (metadata is in the first slot).\n        addNamesToView(unit.job.views.get(op.xref), `${baseName}_${op.functionNameSuffix}_${op.handle.slot + 1}`, state, compatibility);\n        break;\n      case OpKind.Projection:\n        if (!(unit instanceof ViewCompilationUnit)) {\n          throw new Error(`AssertionError: must be compiling a component`);\n        }\n        if (op.handle.slot === null) {\n          throw new Error(`Expected slot to be assigned`);\n        }\n        if (op.fallbackView !== null) {\n          const fallbackView = unit.job.views.get(op.fallbackView);\n          addNamesToView(fallbackView, `${baseName}_ProjectionFallback_${op.handle.slot}`, state, compatibility);\n        }\n        break;\n      case OpKind.Template:\n        if (!(unit instanceof ViewCompilationUnit)) {\n          throw new Error(`AssertionError: must be compiling a component`);\n        }\n        const childView = unit.job.views.get(op.xref);\n        if (op.handle.slot === null) {\n          throw new Error(`Expected slot to be assigned`);\n        }\n        const suffix = op.functionNameSuffix.length === 0 ? '' : `_${op.functionNameSuffix}`;\n        addNamesToView(childView, `${baseName}${suffix}_${op.handle.slot}`, state, compatibility);\n        break;\n      case OpKind.StyleProp:\n        op.name = normalizeStylePropName(op.name);\n        if (compatibility) {\n          op.name = stripImportant(op.name);\n        }\n        break;\n      case OpKind.ClassProp:\n        if (compatibility) {\n          op.name = stripImportant(op.name);\n        }\n        break;\n    }\n  }\n  // Having named all variables declared in the view, now we can push those names into the\n  // `ir.ReadVariableExpr` expressions which represent reads of those variables.\n  for (const op of unit.ops()) {\n    visitExpressionsInOp(op, expr => {\n      if (!(expr instanceof ReadVariableExpr) || expr.name !== null) {\n        return;\n      }\n      if (!varNames.has(expr.xref)) {\n        throw new Error(`Variable ${expr.xref} not yet named`);\n      }\n      expr.name = varNames.get(expr.xref);\n    });\n  }\n}\nfunction getVariableName(unit, variable, state) {\n  if (variable.name === null) {\n    switch (variable.kind) {\n      case SemanticVariableKind.Context:\n        variable.name = `ctx_r${state.index++}`;\n        break;\n      case SemanticVariableKind.Identifier:\n        if (unit.job.compatibility === CompatibilityMode.TemplateDefinitionBuilder) {\n          // TODO: Prefix increment and `_r` are for compatibility with the old naming scheme.\n          // This has the potential to cause collisions when `ctx` is the identifier, so we need a\n          // special check for that as well.\n          const compatPrefix = variable.identifier === 'ctx' ? 'i' : '';\n          variable.name = `${variable.identifier}_${compatPrefix}r${++state.index}`;\n        } else {\n          variable.name = `${variable.identifier}_i${state.index++}`;\n        }\n        break;\n      default:\n        // TODO: Prefix increment for compatibility only.\n        variable.name = `_r${++state.index}`;\n        break;\n    }\n  }\n  return variable.name;\n}\n/**\n * Normalizes a style prop name by hyphenating it (unless its a CSS variable).\n */\nfunction normalizeStylePropName(name) {\n  return name.startsWith('--') ? name : hyphenate(name);\n}\n/**\n * Strips `!important` out of the given style or class name.\n */\nfunction stripImportant(name) {\n  const importantIndex = name.indexOf('!important');\n  if (importantIndex > -1) {\n    return name.substring(0, importantIndex);\n  }\n  return name;\n}\n\n/**\n * Merges logically sequential `NextContextExpr` operations.\n *\n * `NextContextExpr` can be referenced repeatedly, \"popping\" the runtime's context stack each time.\n * When two such expressions appear back-to-back, it's possible to merge them together into a single\n * `NextContextExpr` that steps multiple contexts. This merging is possible if all conditions are\n * met:\n *\n *   * The result of the `NextContextExpr` that's folded into the subsequent one is not stored (that\n *     is, the call is purely side-effectful).\n *   * No operations in between them uses the implicit context.\n */\nfunction mergeNextContextExpressions(job) {\n  for (const unit of job.units) {\n    for (const op of unit.create) {\n      if (op.kind === OpKind.Listener || op.kind === OpKind.TwoWayListener) {\n        mergeNextContextsInOps(op.handlerOps);\n      }\n    }\n    mergeNextContextsInOps(unit.update);\n  }\n}\nfunction mergeNextContextsInOps(ops) {\n  for (const op of ops) {\n    // Look for a candidate operation to maybe merge.\n    if (op.kind !== OpKind.Statement || !(op.statement instanceof ExpressionStatement) || !(op.statement.expr instanceof NextContextExpr)) {\n      continue;\n    }\n    const mergeSteps = op.statement.expr.steps;\n    // Try to merge this `ir.NextContextExpr`.\n    let tryToMerge = true;\n    for (let candidate = op.next; candidate.kind !== OpKind.ListEnd && tryToMerge; candidate = candidate.next) {\n      visitExpressionsInOp(candidate, (expr, flags) => {\n        if (!isIrExpression(expr)) {\n          return expr;\n        }\n        if (!tryToMerge) {\n          // Either we've already merged, or failed to merge.\n          return;\n        }\n        if (flags & VisitorContextFlag.InChildOperation) {\n          // We cannot merge into child operations.\n          return;\n        }\n        switch (expr.kind) {\n          case ExpressionKind.NextContext:\n            // Merge the previous `ir.NextContextExpr` into this one.\n            expr.steps += mergeSteps;\n            OpList.remove(op);\n            tryToMerge = false;\n            break;\n          case ExpressionKind.GetCurrentView:\n          case ExpressionKind.Reference:\n          case ExpressionKind.ContextLetReference:\n            // Can't merge past a dependency on the context.\n            tryToMerge = false;\n            break;\n        }\n        return;\n      });\n    }\n  }\n}\nconst CONTAINER_TAG = 'ng-container';\n/**\n * Replace an `Element` or `ElementStart` whose tag is `ng-container` with a specific op.\n */\nfunction generateNgContainerOps(job) {\n  for (const unit of job.units) {\n    const updatedElementXrefs = new Set();\n    for (const op of unit.create) {\n      if (op.kind === OpKind.ElementStart && op.tag === CONTAINER_TAG) {\n        // Transmute the `ElementStart` instruction to `ContainerStart`.\n        op.kind = OpKind.ContainerStart;\n        updatedElementXrefs.add(op.xref);\n      }\n      if (op.kind === OpKind.ElementEnd && updatedElementXrefs.has(op.xref)) {\n        // This `ElementEnd` is associated with an `ElementStart` we already transmuted.\n        op.kind = OpKind.ContainerEnd;\n      }\n    }\n  }\n}\n\n/**\n * Looks up an element in the given map by xref ID.\n */\nfunction lookupElement(elements, xref) {\n  const el = elements.get(xref);\n  if (el === undefined) {\n    throw new Error('All attributes should have an element-like target.');\n  }\n  return el;\n}\n/**\n * When a container is marked with `ngNonBindable`, the non-bindable characteristic also applies to\n * all descendants of that container. Therefore, we must emit `disableBindings` and `enableBindings`\n * instructions for every such container.\n */\nfunction disableBindings$1(job) {\n  const elements = new Map();\n  for (const view of job.units) {\n    for (const op of view.create) {\n      if (!isElementOrContainerOp(op)) {\n        continue;\n      }\n      elements.set(op.xref, op);\n    }\n  }\n  for (const unit of job.units) {\n    for (const op of unit.create) {\n      if ((op.kind === OpKind.ElementStart || op.kind === OpKind.ContainerStart) && op.nonBindable) {\n        OpList.insertAfter(createDisableBindingsOp(op.xref), op);\n      }\n      if ((op.kind === OpKind.ElementEnd || op.kind === OpKind.ContainerEnd) && lookupElement(elements, op.xref).nonBindable) {\n        OpList.insertBefore(createEnableBindingsOp(op.xref), op);\n      }\n    }\n  }\n}\n\n/**\n * Nullish coalescing expressions such as `a ?? b` have different semantics in Angular templates as\n * compared to JavaScript. In particular, they default to `null` instead of `undefined`. Therefore,\n * we replace them with ternary expressions, assigning temporaries as needed to avoid re-evaluating\n * the same sub-expression multiple times.\n */\nfunction generateNullishCoalesceExpressions(job) {\n  for (const unit of job.units) {\n    for (const op of unit.ops()) {\n      transformExpressionsInOp(op, expr => {\n        if (!(expr instanceof BinaryOperatorExpr) || expr.operator !== BinaryOperator.NullishCoalesce) {\n          return expr;\n        }\n        const assignment = new AssignTemporaryExpr(expr.lhs.clone(), job.allocateXrefId());\n        const read = new ReadTemporaryExpr(assignment.xref);\n        // TODO: When not in compatibility mode for TemplateDefinitionBuilder, we can just emit\n        // `t != null` instead of including an undefined check as well.\n        return new ConditionalExpr(new BinaryOperatorExpr(BinaryOperator.And, new BinaryOperatorExpr(BinaryOperator.NotIdentical, assignment, NULL_EXPR), new BinaryOperatorExpr(BinaryOperator.NotIdentical, read, new LiteralExpr(undefined))), read.clone(), expr.rhs);\n      }, VisitorContextFlag.None);\n    }\n  }\n}\nfunction kindTest(kind) {\n  return op => op.kind === kind;\n}\nfunction kindWithInterpolationTest(kind, interpolation) {\n  return op => {\n    return op.kind === kind && interpolation === op.expression instanceof Interpolation;\n  };\n}\nfunction basicListenerKindTest(op) {\n  return op.kind === OpKind.Listener && !(op.hostListener && op.isAnimationListener) || op.kind === OpKind.TwoWayListener;\n}\nfunction nonInterpolationPropertyKindTest(op) {\n  return (op.kind === OpKind.Property || op.kind === OpKind.TwoWayProperty) && !(op.expression instanceof Interpolation);\n}\n/**\n * Defines the groups based on `OpKind` that ops will be divided into, for the various create\n * op kinds. Ops will be collected into groups, then optionally transformed, before recombining\n * the groups in the order defined here.\n */\nconst CREATE_ORDERING = [{\n  test: op => op.kind === OpKind.Listener && op.hostListener && op.isAnimationListener\n}, {\n  test: basicListenerKindTest\n}];\n/**\n * Defines the groups based on `OpKind` that ops will be divided into, for the various update\n * op kinds.\n */\nconst UPDATE_ORDERING = [{\n  test: kindTest(OpKind.StyleMap),\n  transform: keepLast\n}, {\n  test: kindTest(OpKind.ClassMap),\n  transform: keepLast\n}, {\n  test: kindTest(OpKind.StyleProp)\n}, {\n  test: kindTest(OpKind.ClassProp)\n}, {\n  test: kindWithInterpolationTest(OpKind.Attribute, true)\n}, {\n  test: kindWithInterpolationTest(OpKind.Property, true)\n}, {\n  test: nonInterpolationPropertyKindTest\n}, {\n  test: kindWithInterpolationTest(OpKind.Attribute, false)\n}];\n/**\n * Host bindings have their own update ordering.\n */\nconst UPDATE_HOST_ORDERING = [{\n  test: kindWithInterpolationTest(OpKind.HostProperty, true)\n}, {\n  test: kindWithInterpolationTest(OpKind.HostProperty, false)\n}, {\n  test: kindTest(OpKind.Attribute)\n}, {\n  test: kindTest(OpKind.StyleMap),\n  transform: keepLast\n}, {\n  test: kindTest(OpKind.ClassMap),\n  transform: keepLast\n}, {\n  test: kindTest(OpKind.StyleProp)\n}, {\n  test: kindTest(OpKind.ClassProp)\n}];\n/**\n * The set of all op kinds we handle in the reordering phase.\n */\nconst handledOpKinds = new Set([OpKind.Listener, OpKind.TwoWayListener, OpKind.StyleMap, OpKind.ClassMap, OpKind.StyleProp, OpKind.ClassProp, OpKind.Property, OpKind.TwoWayProperty, OpKind.HostProperty, OpKind.Attribute]);\n/**\n * Many type of operations have ordering constraints that must be respected. For example, a\n * `ClassMap` instruction must be ordered after a `StyleMap` instruction, in order to have\n * predictable semantics that match TemplateDefinitionBuilder and don't break applications.\n */\nfunction orderOps(job) {\n  for (const unit of job.units) {\n    // First, we pull out ops that need to be ordered. Then, when we encounter an op that shouldn't\n    // be reordered, put the ones we've pulled so far back in the correct order. Finally, if we\n    // still have ops pulled at the end, put them back in the correct order.\n    // Create mode:\n    orderWithin(unit.create, CREATE_ORDERING);\n    // Update mode:\n    const ordering = unit.job.kind === CompilationJobKind.Host ? UPDATE_HOST_ORDERING : UPDATE_ORDERING;\n    orderWithin(unit.update, ordering);\n  }\n}\n/**\n * Order all the ops within the specified group.\n */\nfunction orderWithin(opList, ordering) {\n  let opsToOrder = [];\n  // Only reorder ops that target the same xref; do not mix ops that target different xrefs.\n  let firstTargetInGroup = null;\n  for (const op of opList) {\n    const currentTarget = hasDependsOnSlotContextTrait(op) ? op.target : null;\n    if (!handledOpKinds.has(op.kind) || currentTarget !== firstTargetInGroup && firstTargetInGroup !== null && currentTarget !== null) {\n      OpList.insertBefore(reorder(opsToOrder, ordering), op);\n      opsToOrder = [];\n      firstTargetInGroup = null;\n    }\n    if (handledOpKinds.has(op.kind)) {\n      opsToOrder.push(op);\n      OpList.remove(op);\n      firstTargetInGroup = currentTarget ?? firstTargetInGroup;\n    }\n  }\n  opList.push(reorder(opsToOrder, ordering));\n}\n/**\n * Reorders the given list of ops according to the ordering defined by `ORDERING`.\n */\nfunction reorder(ops, ordering) {\n  // Break the ops list into groups based on OpKind.\n  const groups = Array.from(ordering, () => new Array());\n  for (const op of ops) {\n    const groupIndex = ordering.findIndex(o => o.test(op));\n    groups[groupIndex].push(op);\n  }\n  // Reassemble the groups into a single list, in the correct order.\n  return groups.flatMap((group, i) => {\n    const transform = ordering[i].transform;\n    return transform ? transform(group) : group;\n  });\n}\n/**\n * Keeps only the last op in a list of ops.\n */\nfunction keepLast(ops) {\n  return ops.slice(ops.length - 1);\n}\n\n/**\n * Attributes of `ng-content` named 'select' are specifically removed, because they control which\n * content matches as a property of the `projection`, and are not a plain attribute.\n */\nfunction removeContentSelectors(job) {\n  for (const unit of job.units) {\n    const elements = createOpXrefMap(unit);\n    for (const op of unit.ops()) {\n      switch (op.kind) {\n        case OpKind.Binding:\n          const target = lookupInXrefMap(elements, op.target);\n          if (isSelectAttribute(op.name) && target.kind === OpKind.Projection) {\n            OpList.remove(op);\n          }\n          break;\n      }\n    }\n  }\n}\nfunction isSelectAttribute(name) {\n  return name.toLowerCase() === 'select';\n}\n/**\n * Looks up an element in the given map by xref ID.\n */\nfunction lookupInXrefMap(map, xref) {\n  const el = map.get(xref);\n  if (el === undefined) {\n    throw new Error('All attributes should have an slottable target.');\n  }\n  return el;\n}\n\n/**\n * This phase generates pipe creation instructions. We do this based on the pipe bindings found in\n * the update block, in the order we see them.\n *\n * When not in compatibility mode, we can simply group all these creation instructions together, to\n * maximize chaining opportunities.\n */\nfunction createPipes(job) {\n  for (const unit of job.units) {\n    processPipeBindingsInView(unit);\n  }\n}\nfunction processPipeBindingsInView(unit) {\n  for (const updateOp of unit.update) {\n    visitExpressionsInOp(updateOp, (expr, flags) => {\n      if (!isIrExpression(expr)) {\n        return;\n      }\n      if (expr.kind !== ExpressionKind.PipeBinding) {\n        return;\n      }\n      if (flags & VisitorContextFlag.InChildOperation) {\n        throw new Error(`AssertionError: pipe bindings should not appear in child expressions`);\n      }\n      if (unit.job.compatibility) {\n        // TODO: We can delete this cast and check once compatibility mode is removed.\n        const slotHandle = updateOp.target;\n        if (slotHandle == undefined) {\n          throw new Error(`AssertionError: expected slot handle to be assigned for pipe creation`);\n        }\n        addPipeToCreationBlock(unit, updateOp.target, expr);\n      } else {\n        // When not in compatibility mode, we just add the pipe to the end of the create block. This\n        // is not only simpler and faster, but allows more chaining opportunities for other\n        // instructions.\n        unit.create.push(createPipeOp(expr.target, expr.targetSlot, expr.name));\n      }\n    });\n  }\n}\nfunction addPipeToCreationBlock(unit, afterTargetXref, binding) {\n  // Find the appropriate point to insert the Pipe creation operation.\n  // We're looking for `afterTargetXref` (and also want to insert after any other pipe operations\n  // which might be beyond it).\n  for (let op = unit.create.head.next; op.kind !== OpKind.ListEnd; op = op.next) {\n    if (!hasConsumesSlotTrait(op)) {\n      continue;\n    }\n    if (op.xref !== afterTargetXref) {\n      continue;\n    }\n    // We've found a tentative insertion point; however, we also want to skip past any _other_ pipe\n    // operations present.\n    while (op.next.kind === OpKind.Pipe) {\n      op = op.next;\n    }\n    const pipe = createPipeOp(binding.target, binding.targetSlot, binding.name);\n    OpList.insertBefore(pipe, op.next);\n    // This completes adding the pipe to the creation block.\n    return;\n  }\n  // At this point, we've failed to add the pipe to the creation block.\n  throw new Error(`AssertionError: unable to find insertion point for pipe ${binding.name}`);\n}\n\n/**\n * Pipes that accept more than 4 arguments are variadic, and are handled with a different runtime\n * instruction.\n */\nfunction createVariadicPipes(job) {\n  for (const unit of job.units) {\n    for (const op of unit.update) {\n      transformExpressionsInOp(op, expr => {\n        if (!(expr instanceof PipeBindingExpr)) {\n          return expr;\n        }\n        // Pipes are variadic if they have more than 4 arguments.\n        if (expr.args.length <= 4) {\n          return expr;\n        }\n        return new PipeBindingVariadicExpr(expr.target, expr.targetSlot, expr.name, literalArr(expr.args), expr.args.length);\n      }, VisitorContextFlag.None);\n    }\n  }\n}\n\n/**\n * Propagate i18n blocks down through child templates that act as placeholders in the root i18n\n * message. Specifically, perform an in-order traversal of all the views, and add i18nStart/i18nEnd\n * op pairs into descending views. Also, assign an increasing sub-template index to each\n * descending view.\n */\nfunction propagateI18nBlocks(job) {\n  propagateI18nBlocksToTemplates(job.root, 0);\n}\n/**\n * Propagates i18n ops in the given view through to any child views recursively.\n */\nfunction propagateI18nBlocksToTemplates(unit, subTemplateIndex) {\n  let i18nBlock = null;\n  for (const op of unit.create) {\n    switch (op.kind) {\n      case OpKind.I18nStart:\n        op.subTemplateIndex = subTemplateIndex === 0 ? null : subTemplateIndex;\n        i18nBlock = op;\n        break;\n      case OpKind.I18nEnd:\n        // When we exit a root-level i18n block, reset the sub-template index counter.\n        if (i18nBlock.subTemplateIndex === null) {\n          subTemplateIndex = 0;\n        }\n        i18nBlock = null;\n        break;\n      case OpKind.Template:\n        subTemplateIndex = propagateI18nBlocksForView(unit.job.views.get(op.xref), i18nBlock, op.i18nPlaceholder, subTemplateIndex);\n        break;\n      case OpKind.RepeaterCreate:\n        // Propagate i18n blocks to the @for template.\n        const forView = unit.job.views.get(op.xref);\n        subTemplateIndex = propagateI18nBlocksForView(forView, i18nBlock, op.i18nPlaceholder, subTemplateIndex);\n        // Then if there's an @empty template, propagate the i18n blocks for it as well.\n        if (op.emptyView !== null) {\n          subTemplateIndex = propagateI18nBlocksForView(unit.job.views.get(op.emptyView), i18nBlock, op.emptyI18nPlaceholder, subTemplateIndex);\n        }\n        break;\n    }\n  }\n  return subTemplateIndex;\n}\n/**\n * Propagate i18n blocks for a view.\n */\nfunction propagateI18nBlocksForView(view, i18nBlock, i18nPlaceholder, subTemplateIndex) {\n  // We found an <ng-template> inside an i18n block; increment the sub-template counter and\n  // wrap the template's view in a child i18n block.\n  if (i18nPlaceholder !== undefined) {\n    if (i18nBlock === null) {\n      throw Error('Expected template with i18n placeholder to be in an i18n block.');\n    }\n    subTemplateIndex++;\n    wrapTemplateWithI18n(view, i18nBlock);\n  }\n  // Continue traversing inside the template's view.\n  return propagateI18nBlocksToTemplates(view, subTemplateIndex);\n}\n/**\n * Wraps a template view with i18n start and end ops.\n */\nfunction wrapTemplateWithI18n(unit, parentI18n) {\n  // Only add i18n ops if they have not already been propagated to this template.\n  if (unit.create.head.next?.kind !== OpKind.I18nStart) {\n    const id = unit.job.allocateXrefId();\n    OpList.insertAfter(\n    // Nested ng-template i18n start/end ops should not receive source spans.\n    createI18nStartOp(id, parentI18n.message, parentI18n.root, null), unit.create.head);\n    OpList.insertBefore(createI18nEndOp(id, null), unit.create.tail);\n  }\n}\nfunction extractPureFunctions(job) {\n  for (const view of job.units) {\n    for (const op of view.ops()) {\n      visitExpressionsInOp(op, expr => {\n        if (!(expr instanceof PureFunctionExpr) || expr.body === null) {\n          return;\n        }\n        const constantDef = new PureFunctionConstant(expr.args.length);\n        expr.fn = job.pool.getSharedConstant(constantDef, expr.body);\n        expr.body = null;\n      });\n    }\n  }\n}\nclass PureFunctionConstant extends GenericKeyFn {\n  constructor(numArgs) {\n    super();\n    this.numArgs = numArgs;\n  }\n  keyOf(expr) {\n    if (expr instanceof PureFunctionParameterExpr) {\n      return `param(${expr.index})`;\n    } else {\n      return super.keyOf(expr);\n    }\n  }\n  // TODO: Use the new pool method `getSharedFunctionReference`\n  toSharedConstantDeclaration(declName, keyExpr) {\n    const fnParams = [];\n    for (let idx = 0; idx < this.numArgs; idx++) {\n      fnParams.push(new FnParam('a' + idx));\n    }\n    // We will never visit `ir.PureFunctionParameterExpr`s that don't belong to us, because this\n    // transform runs inside another visitor which will visit nested pure functions before this one.\n    const returnExpr = transformExpressionsInExpression(keyExpr, expr => {\n      if (!(expr instanceof PureFunctionParameterExpr)) {\n        return expr;\n      }\n      return variable('a' + expr.index);\n    }, VisitorContextFlag.None);\n    return new DeclareVarStmt(declName, new ArrowFunctionExpr(fnParams, returnExpr), undefined, StmtModifier.Final);\n  }\n}\nfunction generatePureLiteralStructures(job) {\n  for (const unit of job.units) {\n    for (const op of unit.update) {\n      transformExpressionsInOp(op, (expr, flags) => {\n        if (flags & VisitorContextFlag.InChildOperation) {\n          return expr;\n        }\n        if (expr instanceof LiteralArrayExpr) {\n          return transformLiteralArray(expr);\n        } else if (expr instanceof LiteralMapExpr) {\n          return transformLiteralMap(expr);\n        }\n        return expr;\n      }, VisitorContextFlag.None);\n    }\n  }\n}\nfunction transformLiteralArray(expr) {\n  const derivedEntries = [];\n  const nonConstantArgs = [];\n  for (const entry of expr.entries) {\n    if (entry.isConstant()) {\n      derivedEntries.push(entry);\n    } else {\n      const idx = nonConstantArgs.length;\n      nonConstantArgs.push(entry);\n      derivedEntries.push(new PureFunctionParameterExpr(idx));\n    }\n  }\n  return new PureFunctionExpr(literalArr(derivedEntries), nonConstantArgs);\n}\nfunction transformLiteralMap(expr) {\n  let derivedEntries = [];\n  const nonConstantArgs = [];\n  for (const entry of expr.entries) {\n    if (entry.value.isConstant()) {\n      derivedEntries.push(entry);\n    } else {\n      const idx = nonConstantArgs.length;\n      nonConstantArgs.push(entry.value);\n      derivedEntries.push(new LiteralMapEntry(entry.key, new PureFunctionParameterExpr(idx), entry.quoted));\n    }\n  }\n  return new PureFunctionExpr(literalMap(derivedEntries), nonConstantArgs);\n}\n\n// This file contains helpers for generating calls to Ivy instructions. In particular, each\n// instruction type is represented as a function, which may select a specific instruction variant\n// depending on the exact arguments.\nfunction element(slot, tag, constIndex, localRefIndex, sourceSpan) {\n  return elementOrContainerBase(Identifiers.element, slot, tag, constIndex, localRefIndex, sourceSpan);\n}\nfunction elementStart(slot, tag, constIndex, localRefIndex, sourceSpan) {\n  return elementOrContainerBase(Identifiers.elementStart, slot, tag, constIndex, localRefIndex, sourceSpan);\n}\nfunction elementOrContainerBase(instruction, slot, tag, constIndex, localRefIndex, sourceSpan) {\n  const args = [literal(slot)];\n  if (tag !== null) {\n    args.push(literal(tag));\n  }\n  if (localRefIndex !== null) {\n    args.push(literal(constIndex),\n    // might be null, but that's okay.\n    literal(localRefIndex));\n  } else if (constIndex !== null) {\n    args.push(literal(constIndex));\n  }\n  return call(instruction, args, sourceSpan);\n}\nfunction elementEnd(sourceSpan) {\n  return call(Identifiers.elementEnd, [], sourceSpan);\n}\nfunction elementContainerStart(slot, constIndex, localRefIndex, sourceSpan) {\n  return elementOrContainerBase(Identifiers.elementContainerStart, slot, /* tag */null, constIndex, localRefIndex, sourceSpan);\n}\nfunction elementContainer(slot, constIndex, localRefIndex, sourceSpan) {\n  return elementOrContainerBase(Identifiers.elementContainer, slot, /* tag */null, constIndex, localRefIndex, sourceSpan);\n}\nfunction elementContainerEnd() {\n  return call(Identifiers.elementContainerEnd, [], null);\n}\nfunction template(slot, templateFnRef, decls, vars, tag, constIndex, localRefs, sourceSpan) {\n  const args = [literal(slot), templateFnRef, literal(decls), literal(vars), literal(tag), literal(constIndex)];\n  if (localRefs !== null) {\n    args.push(literal(localRefs));\n    args.push(importExpr(Identifiers.templateRefExtractor));\n  }\n  while (args[args.length - 1].isEquivalent(NULL_EXPR)) {\n    args.pop();\n  }\n  return call(Identifiers.templateCreate, args, sourceSpan);\n}\nfunction disableBindings() {\n  return call(Identifiers.disableBindings, [], null);\n}\nfunction enableBindings() {\n  return call(Identifiers.enableBindings, [], null);\n}\nfunction listener(name, handlerFn, eventTargetResolver, syntheticHost, sourceSpan) {\n  const args = [literal(name), handlerFn];\n  if (eventTargetResolver !== null) {\n    args.push(literal(false)); // `useCapture` flag, defaults to `false`\n    args.push(importExpr(eventTargetResolver));\n  }\n  return call(syntheticHost ? Identifiers.syntheticHostListener : Identifiers.listener, args, sourceSpan);\n}\nfunction twoWayBindingSet(target, value) {\n  return importExpr(Identifiers.twoWayBindingSet).callFn([target, value]);\n}\nfunction twoWayListener(name, handlerFn, sourceSpan) {\n  return call(Identifiers.twoWayListener, [literal(name), handlerFn], sourceSpan);\n}\nfunction pipe(slot, name) {\n  return call(Identifiers.pipe, [literal(slot), literal(name)], null);\n}\nfunction namespaceHTML() {\n  return call(Identifiers.namespaceHTML, [], null);\n}\nfunction namespaceSVG() {\n  return call(Identifiers.namespaceSVG, [], null);\n}\nfunction namespaceMath() {\n  return call(Identifiers.namespaceMathML, [], null);\n}\nfunction advance(delta, sourceSpan) {\n  return call(Identifiers.advance, delta > 1 ? [literal(delta)] : [], sourceSpan);\n}\nfunction reference(slot) {\n  return importExpr(Identifiers.reference).callFn([literal(slot)]);\n}\nfunction nextContext(steps) {\n  return importExpr(Identifiers.nextContext).callFn(steps === 1 ? [] : [literal(steps)]);\n}\nfunction getCurrentView() {\n  return importExpr(Identifiers.getCurrentView).callFn([]);\n}\nfunction restoreView(savedView) {\n  return importExpr(Identifiers.restoreView).callFn([savedView]);\n}\nfunction resetView(returnValue) {\n  return importExpr(Identifiers.resetView).callFn([returnValue]);\n}\nfunction text(slot, initialValue, sourceSpan) {\n  const args = [literal(slot, null)];\n  if (initialValue !== '') {\n    args.push(literal(initialValue));\n  }\n  return call(Identifiers.text, args, sourceSpan);\n}\nfunction defer(selfSlot, primarySlot, dependencyResolverFn, loadingSlot, placeholderSlot, errorSlot, loadingConfig, placeholderConfig, enableTimerScheduling, sourceSpan) {\n  const args = [literal(selfSlot), literal(primarySlot), dependencyResolverFn ?? literal(null), literal(loadingSlot), literal(placeholderSlot), literal(errorSlot), loadingConfig ?? literal(null), placeholderConfig ?? literal(null), enableTimerScheduling ? importExpr(Identifiers.deferEnableTimerScheduling) : literal(null)];\n  let expr;\n  while ((expr = args[args.length - 1]) !== null && expr instanceof LiteralExpr && expr.value === null) {\n    args.pop();\n  }\n  return call(Identifiers.defer, args, sourceSpan);\n}\nconst deferTriggerToR3TriggerInstructionsMap = new Map([[DeferTriggerKind.Idle, [Identifiers.deferOnIdle, Identifiers.deferPrefetchOnIdle]], [DeferTriggerKind.Immediate, [Identifiers.deferOnImmediate, Identifiers.deferPrefetchOnImmediate]], [DeferTriggerKind.Timer, [Identifiers.deferOnTimer, Identifiers.deferPrefetchOnTimer]], [DeferTriggerKind.Hover, [Identifiers.deferOnHover, Identifiers.deferPrefetchOnHover]], [DeferTriggerKind.Interaction, [Identifiers.deferOnInteraction, Identifiers.deferPrefetchOnInteraction]], [DeferTriggerKind.Viewport, [Identifiers.deferOnViewport, Identifiers.deferPrefetchOnViewport]]]);\nfunction deferOn(trigger, args, prefetch, sourceSpan) {\n  const instructions = deferTriggerToR3TriggerInstructionsMap.get(trigger);\n  if (instructions === undefined) {\n    throw new Error(`Unable to determine instruction for trigger ${trigger}`);\n  }\n  const instructionToCall = prefetch ? instructions[1] : instructions[0];\n  return call(instructionToCall, args.map(a => literal(a)), sourceSpan);\n}\nfunction projectionDef(def) {\n  return call(Identifiers.projectionDef, def ? [def] : [], null);\n}\nfunction projection(slot, projectionSlotIndex, attributes, fallbackFnName, fallbackDecls, fallbackVars, sourceSpan) {\n  const args = [literal(slot)];\n  if (projectionSlotIndex !== 0 || attributes !== null || fallbackFnName !== null) {\n    args.push(literal(projectionSlotIndex));\n    if (attributes !== null) {\n      args.push(attributes);\n    }\n    if (fallbackFnName !== null) {\n      if (attributes === null) {\n        args.push(literal(null));\n      }\n      args.push(variable(fallbackFnName), literal(fallbackDecls), literal(fallbackVars));\n    }\n  }\n  return call(Identifiers.projection, args, sourceSpan);\n}\nfunction i18nStart(slot, constIndex, subTemplateIndex, sourceSpan) {\n  const args = [literal(slot), literal(constIndex)];\n  if (subTemplateIndex !== null) {\n    args.push(literal(subTemplateIndex));\n  }\n  return call(Identifiers.i18nStart, args, sourceSpan);\n}\nfunction repeaterCreate(slot, viewFnName, decls, vars, tag, constIndex, trackByFn, trackByUsesComponentInstance, emptyViewFnName, emptyDecls, emptyVars, emptyTag, emptyConstIndex, sourceSpan) {\n  const args = [literal(slot), variable(viewFnName), literal(decls), literal(vars), literal(tag), literal(constIndex), trackByFn];\n  if (trackByUsesComponentInstance || emptyViewFnName !== null) {\n    args.push(literal(trackByUsesComponentInstance));\n    if (emptyViewFnName !== null) {\n      args.push(variable(emptyViewFnName), literal(emptyDecls), literal(emptyVars));\n      if (emptyTag !== null || emptyConstIndex !== null) {\n        args.push(literal(emptyTag));\n      }\n      if (emptyConstIndex !== null) {\n        args.push(literal(emptyConstIndex));\n      }\n    }\n  }\n  return call(Identifiers.repeaterCreate, args, sourceSpan);\n}\nfunction repeater(collection, sourceSpan) {\n  return call(Identifiers.repeater, [collection], sourceSpan);\n}\nfunction deferWhen(prefetch, expr, sourceSpan) {\n  return call(prefetch ? Identifiers.deferPrefetchWhen : Identifiers.deferWhen, [expr], sourceSpan);\n}\nfunction declareLet(slot, sourceSpan) {\n  return call(Identifiers.declareLet, [literal(slot)], sourceSpan);\n}\nfunction storeLet(value, sourceSpan) {\n  return importExpr(Identifiers.storeLet).callFn([value], sourceSpan);\n}\nfunction readContextLet(slot) {\n  return importExpr(Identifiers.readContextLet).callFn([literal(slot)]);\n}\nfunction i18n(slot, constIndex, subTemplateIndex, sourceSpan) {\n  const args = [literal(slot), literal(constIndex)];\n  if (subTemplateIndex) {\n    args.push(literal(subTemplateIndex));\n  }\n  return call(Identifiers.i18n, args, sourceSpan);\n}\nfunction i18nEnd(endSourceSpan) {\n  return call(Identifiers.i18nEnd, [], endSourceSpan);\n}\nfunction i18nAttributes(slot, i18nAttributesConfig) {\n  const args = [literal(slot), literal(i18nAttributesConfig)];\n  return call(Identifiers.i18nAttributes, args, null);\n}\nfunction property(name, expression, sanitizer, sourceSpan) {\n  const args = [literal(name), expression];\n  if (sanitizer !== null) {\n    args.push(sanitizer);\n  }\n  return call(Identifiers.property, args, sourceSpan);\n}\nfunction twoWayProperty(name, expression, sanitizer, sourceSpan) {\n  const args = [literal(name), expression];\n  if (sanitizer !== null) {\n    args.push(sanitizer);\n  }\n  return call(Identifiers.twoWayProperty, args, sourceSpan);\n}\nfunction attribute(name, expression, sanitizer, namespace) {\n  const args = [literal(name), expression];\n  if (sanitizer !== null || namespace !== null) {\n    args.push(sanitizer ?? literal(null));\n  }\n  if (namespace !== null) {\n    args.push(literal(namespace));\n  }\n  return call(Identifiers.attribute, args, null);\n}\nfunction styleProp(name, expression, unit, sourceSpan) {\n  const args = [literal(name), expression];\n  if (unit !== null) {\n    args.push(literal(unit));\n  }\n  return call(Identifiers.styleProp, args, sourceSpan);\n}\nfunction classProp(name, expression, sourceSpan) {\n  return call(Identifiers.classProp, [literal(name), expression], sourceSpan);\n}\nfunction styleMap(expression, sourceSpan) {\n  return call(Identifiers.styleMap, [expression], sourceSpan);\n}\nfunction classMap(expression, sourceSpan) {\n  return call(Identifiers.classMap, [expression], sourceSpan);\n}\nconst PIPE_BINDINGS = [Identifiers.pipeBind1, Identifiers.pipeBind2, Identifiers.pipeBind3, Identifiers.pipeBind4];\nfunction pipeBind(slot, varOffset, args) {\n  if (args.length < 1 || args.length > PIPE_BINDINGS.length) {\n    throw new Error(`pipeBind() argument count out of bounds`);\n  }\n  const instruction = PIPE_BINDINGS[args.length - 1];\n  return importExpr(instruction).callFn([literal(slot), literal(varOffset), ...args]);\n}\nfunction pipeBindV(slot, varOffset, args) {\n  return importExpr(Identifiers.pipeBindV).callFn([literal(slot), literal(varOffset), args]);\n}\nfunction textInterpolate(strings, expressions, sourceSpan) {\n  const interpolationArgs = collateInterpolationArgs(strings, expressions);\n  return callVariadicInstruction(TEXT_INTERPOLATE_CONFIG, [], interpolationArgs, [], sourceSpan);\n}\nfunction i18nExp(expr, sourceSpan) {\n  return call(Identifiers.i18nExp, [expr], sourceSpan);\n}\nfunction i18nApply(slot, sourceSpan) {\n  return call(Identifiers.i18nApply, [literal(slot)], sourceSpan);\n}\nfunction propertyInterpolate(name, strings, expressions, sanitizer, sourceSpan) {\n  const interpolationArgs = collateInterpolationArgs(strings, expressions);\n  const extraArgs = [];\n  if (sanitizer !== null) {\n    extraArgs.push(sanitizer);\n  }\n  return callVariadicInstruction(PROPERTY_INTERPOLATE_CONFIG, [literal(name)], interpolationArgs, extraArgs, sourceSpan);\n}\nfunction attributeInterpolate(name, strings, expressions, sanitizer, sourceSpan) {\n  const interpolationArgs = collateInterpolationArgs(strings, expressions);\n  const extraArgs = [];\n  if (sanitizer !== null) {\n    extraArgs.push(sanitizer);\n  }\n  return callVariadicInstruction(ATTRIBUTE_INTERPOLATE_CONFIG, [literal(name)], interpolationArgs, extraArgs, sourceSpan);\n}\nfunction stylePropInterpolate(name, strings, expressions, unit, sourceSpan) {\n  const interpolationArgs = collateInterpolationArgs(strings, expressions);\n  const extraArgs = [];\n  if (unit !== null) {\n    extraArgs.push(literal(unit));\n  }\n  return callVariadicInstruction(STYLE_PROP_INTERPOLATE_CONFIG, [literal(name)], interpolationArgs, extraArgs, sourceSpan);\n}\nfunction styleMapInterpolate(strings, expressions, sourceSpan) {\n  const interpolationArgs = collateInterpolationArgs(strings, expressions);\n  return callVariadicInstruction(STYLE_MAP_INTERPOLATE_CONFIG, [], interpolationArgs, [], sourceSpan);\n}\nfunction classMapInterpolate(strings, expressions, sourceSpan) {\n  const interpolationArgs = collateInterpolationArgs(strings, expressions);\n  return callVariadicInstruction(CLASS_MAP_INTERPOLATE_CONFIG, [], interpolationArgs, [], sourceSpan);\n}\nfunction hostProperty(name, expression, sanitizer, sourceSpan) {\n  const args = [literal(name), expression];\n  if (sanitizer !== null) {\n    args.push(sanitizer);\n  }\n  return call(Identifiers.hostProperty, args, sourceSpan);\n}\nfunction syntheticHostProperty(name, expression, sourceSpan) {\n  return call(Identifiers.syntheticHostProperty, [literal(name), expression], sourceSpan);\n}\nfunction pureFunction(varOffset, fn, args) {\n  return callVariadicInstructionExpr(PURE_FUNCTION_CONFIG, [literal(varOffset), fn], args, [], null);\n}\n/**\n * Collates the string an expression arguments for an interpolation instruction.\n */\nfunction collateInterpolationArgs(strings, expressions) {\n  if (strings.length < 1 || expressions.length !== strings.length - 1) {\n    throw new Error(`AssertionError: expected specific shape of args for strings/expressions in interpolation`);\n  }\n  const interpolationArgs = [];\n  if (expressions.length === 1 && strings[0] === '' && strings[1] === '') {\n    interpolationArgs.push(expressions[0]);\n  } else {\n    let idx;\n    for (idx = 0; idx < expressions.length; idx++) {\n      interpolationArgs.push(literal(strings[idx]), expressions[idx]);\n    }\n    // idx points at the last string.\n    interpolationArgs.push(literal(strings[idx]));\n  }\n  return interpolationArgs;\n}\nfunction call(instruction, args, sourceSpan) {\n  const expr = importExpr(instruction).callFn(args, sourceSpan);\n  return createStatementOp(new ExpressionStatement(expr, sourceSpan));\n}\nfunction conditional(condition, contextValue, sourceSpan) {\n  const args = [condition];\n  if (contextValue !== null) {\n    args.push(contextValue);\n  }\n  return call(Identifiers.conditional, args, sourceSpan);\n}\n/**\n * `InterpolationConfig` for the `textInterpolate` instruction.\n */\nconst TEXT_INTERPOLATE_CONFIG = {\n  constant: [Identifiers.textInterpolate, Identifiers.textInterpolate1, Identifiers.textInterpolate2, Identifiers.textInterpolate3, Identifiers.textInterpolate4, Identifiers.textInterpolate5, Identifiers.textInterpolate6, Identifiers.textInterpolate7, Identifiers.textInterpolate8],\n  variable: Identifiers.textInterpolateV,\n  mapping: n => {\n    if (n % 2 === 0) {\n      throw new Error(`Expected odd number of arguments`);\n    }\n    return (n - 1) / 2;\n  }\n};\n/**\n * `InterpolationConfig` for the `propertyInterpolate` instruction.\n */\nconst PROPERTY_INTERPOLATE_CONFIG = {\n  constant: [Identifiers.propertyInterpolate, Identifiers.propertyInterpolate1, Identifiers.propertyInterpolate2, Identifiers.propertyInterpolate3, Identifiers.propertyInterpolate4, Identifiers.propertyInterpolate5, Identifiers.propertyInterpolate6, Identifiers.propertyInterpolate7, Identifiers.propertyInterpolate8],\n  variable: Identifiers.propertyInterpolateV,\n  mapping: n => {\n    if (n % 2 === 0) {\n      throw new Error(`Expected odd number of arguments`);\n    }\n    return (n - 1) / 2;\n  }\n};\n/**\n * `InterpolationConfig` for the `stylePropInterpolate` instruction.\n */\nconst STYLE_PROP_INTERPOLATE_CONFIG = {\n  constant: [Identifiers.styleProp, Identifiers.stylePropInterpolate1, Identifiers.stylePropInterpolate2, Identifiers.stylePropInterpolate3, Identifiers.stylePropInterpolate4, Identifiers.stylePropInterpolate5, Identifiers.stylePropInterpolate6, Identifiers.stylePropInterpolate7, Identifiers.stylePropInterpolate8],\n  variable: Identifiers.stylePropInterpolateV,\n  mapping: n => {\n    if (n % 2 === 0) {\n      throw new Error(`Expected odd number of arguments`);\n    }\n    return (n - 1) / 2;\n  }\n};\n/**\n * `InterpolationConfig` for the `attributeInterpolate` instruction.\n */\nconst ATTRIBUTE_INTERPOLATE_CONFIG = {\n  constant: [Identifiers.attribute, Identifiers.attributeInterpolate1, Identifiers.attributeInterpolate2, Identifiers.attributeInterpolate3, Identifiers.attributeInterpolate4, Identifiers.attributeInterpolate5, Identifiers.attributeInterpolate6, Identifiers.attributeInterpolate7, Identifiers.attributeInterpolate8],\n  variable: Identifiers.attributeInterpolateV,\n  mapping: n => {\n    if (n % 2 === 0) {\n      throw new Error(`Expected odd number of arguments`);\n    }\n    return (n - 1) / 2;\n  }\n};\n/**\n * `InterpolationConfig` for the `styleMapInterpolate` instruction.\n */\nconst STYLE_MAP_INTERPOLATE_CONFIG = {\n  constant: [Identifiers.styleMap, Identifiers.styleMapInterpolate1, Identifiers.styleMapInterpolate2, Identifiers.styleMapInterpolate3, Identifiers.styleMapInterpolate4, Identifiers.styleMapInterpolate5, Identifiers.styleMapInterpolate6, Identifiers.styleMapInterpolate7, Identifiers.styleMapInterpolate8],\n  variable: Identifiers.styleMapInterpolateV,\n  mapping: n => {\n    if (n % 2 === 0) {\n      throw new Error(`Expected odd number of arguments`);\n    }\n    return (n - 1) / 2;\n  }\n};\n/**\n * `InterpolationConfig` for the `classMapInterpolate` instruction.\n */\nconst CLASS_MAP_INTERPOLATE_CONFIG = {\n  constant: [Identifiers.classMap, Identifiers.classMapInterpolate1, Identifiers.classMapInterpolate2, Identifiers.classMapInterpolate3, Identifiers.classMapInterpolate4, Identifiers.classMapInterpolate5, Identifiers.classMapInterpolate6, Identifiers.classMapInterpolate7, Identifiers.classMapInterpolate8],\n  variable: Identifiers.classMapInterpolateV,\n  mapping: n => {\n    if (n % 2 === 0) {\n      throw new Error(`Expected odd number of arguments`);\n    }\n    return (n - 1) / 2;\n  }\n};\nconst PURE_FUNCTION_CONFIG = {\n  constant: [Identifiers.pureFunction0, Identifiers.pureFunction1, Identifiers.pureFunction2, Identifiers.pureFunction3, Identifiers.pureFunction4, Identifiers.pureFunction5, Identifiers.pureFunction6, Identifiers.pureFunction7, Identifiers.pureFunction8],\n  variable: Identifiers.pureFunctionV,\n  mapping: n => n\n};\nfunction callVariadicInstructionExpr(config, baseArgs, interpolationArgs, extraArgs, sourceSpan) {\n  const n = config.mapping(interpolationArgs.length);\n  if (n < config.constant.length) {\n    // Constant calling pattern.\n    return importExpr(config.constant[n]).callFn([...baseArgs, ...interpolationArgs, ...extraArgs], sourceSpan);\n  } else if (config.variable !== null) {\n    // Variable calling pattern.\n    return importExpr(config.variable).callFn([...baseArgs, literalArr(interpolationArgs), ...extraArgs], sourceSpan);\n  } else {\n    throw new Error(`AssertionError: unable to call variadic function`);\n  }\n}\nfunction callVariadicInstruction(config, baseArgs, interpolationArgs, extraArgs, sourceSpan) {\n  return createStatementOp(callVariadicInstructionExpr(config, baseArgs, interpolationArgs, extraArgs, sourceSpan).toStmt());\n}\n\n/**\n * Map of target resolvers for event listeners.\n */\nconst GLOBAL_TARGET_RESOLVERS = new Map([['window', Identifiers.resolveWindow], ['document', Identifiers.resolveDocument], ['body', Identifiers.resolveBody]]);\n/**\n * Compiles semantic operations across all views and generates output `o.Statement`s with actual\n * runtime calls in their place.\n *\n * Reification replaces semantic operations with selected Ivy instructions and other generated code\n * structures. After reification, the create/update operation lists of all views should only contain\n * `ir.StatementOp`s (which wrap generated `o.Statement`s).\n */\nfunction reify(job) {\n  for (const unit of job.units) {\n    reifyCreateOperations(unit, unit.create);\n    reifyUpdateOperations(unit, unit.update);\n  }\n}\n/**\n * This function can be used a sanity check -- it walks every expression in the const pool, and\n * every expression reachable from an op, and makes sure that there are no IR expressions\n * left. This is nice to use for debugging mysterious failures where an IR expression cannot be\n * output from the output AST code.\n */\nfunction ensureNoIrForDebug(job) {\n  for (const stmt of job.pool.statements) {\n    transformExpressionsInStatement(stmt, expr => {\n      if (isIrExpression(expr)) {\n        throw new Error(`AssertionError: IR expression found during reify: ${ExpressionKind[expr.kind]}`);\n      }\n      return expr;\n    }, VisitorContextFlag.None);\n  }\n  for (const unit of job.units) {\n    for (const op of unit.ops()) {\n      visitExpressionsInOp(op, expr => {\n        if (isIrExpression(expr)) {\n          throw new Error(`AssertionError: IR expression found during reify: ${ExpressionKind[expr.kind]}`);\n        }\n      });\n    }\n  }\n}\nfunction reifyCreateOperations(unit, ops) {\n  for (const op of ops) {\n    transformExpressionsInOp(op, reifyIrExpression, VisitorContextFlag.None);\n    switch (op.kind) {\n      case OpKind.Text:\n        OpList.replace(op, text(op.handle.slot, op.initialValue, op.sourceSpan));\n        break;\n      case OpKind.ElementStart:\n        OpList.replace(op, elementStart(op.handle.slot, op.tag, op.attributes, op.localRefs, op.startSourceSpan));\n        break;\n      case OpKind.Element:\n        OpList.replace(op, element(op.handle.slot, op.tag, op.attributes, op.localRefs, op.wholeSourceSpan));\n        break;\n      case OpKind.ElementEnd:\n        OpList.replace(op, elementEnd(op.sourceSpan));\n        break;\n      case OpKind.ContainerStart:\n        OpList.replace(op, elementContainerStart(op.handle.slot, op.attributes, op.localRefs, op.startSourceSpan));\n        break;\n      case OpKind.Container:\n        OpList.replace(op, elementContainer(op.handle.slot, op.attributes, op.localRefs, op.wholeSourceSpan));\n        break;\n      case OpKind.ContainerEnd:\n        OpList.replace(op, elementContainerEnd());\n        break;\n      case OpKind.I18nStart:\n        OpList.replace(op, i18nStart(op.handle.slot, op.messageIndex, op.subTemplateIndex, op.sourceSpan));\n        break;\n      case OpKind.I18nEnd:\n        OpList.replace(op, i18nEnd(op.sourceSpan));\n        break;\n      case OpKind.I18n:\n        OpList.replace(op, i18n(op.handle.slot, op.messageIndex, op.subTemplateIndex, op.sourceSpan));\n        break;\n      case OpKind.I18nAttributes:\n        if (op.i18nAttributesConfig === null) {\n          throw new Error(`AssertionError: i18nAttributesConfig was not set`);\n        }\n        OpList.replace(op, i18nAttributes(op.handle.slot, op.i18nAttributesConfig));\n        break;\n      case OpKind.Template:\n        if (!(unit instanceof ViewCompilationUnit)) {\n          throw new Error(`AssertionError: must be compiling a component`);\n        }\n        if (Array.isArray(op.localRefs)) {\n          throw new Error(`AssertionError: local refs array should have been extracted into a constant`);\n        }\n        const childView = unit.job.views.get(op.xref);\n        OpList.replace(op, template(op.handle.slot, variable(childView.fnName), childView.decls, childView.vars, op.tag, op.attributes, op.localRefs, op.startSourceSpan));\n        break;\n      case OpKind.DisableBindings:\n        OpList.replace(op, disableBindings());\n        break;\n      case OpKind.EnableBindings:\n        OpList.replace(op, enableBindings());\n        break;\n      case OpKind.Pipe:\n        OpList.replace(op, pipe(op.handle.slot, op.name));\n        break;\n      case OpKind.DeclareLet:\n        OpList.replace(op, declareLet(op.handle.slot, op.sourceSpan));\n        break;\n      case OpKind.Listener:\n        const listenerFn = reifyListenerHandler(unit, op.handlerFnName, op.handlerOps, op.consumesDollarEvent);\n        const eventTargetResolver = op.eventTarget ? GLOBAL_TARGET_RESOLVERS.get(op.eventTarget) : null;\n        if (eventTargetResolver === undefined) {\n          throw new Error(`Unexpected global target '${op.eventTarget}' defined for '${op.name}' event. Supported list of global targets: window,document,body.`);\n        }\n        OpList.replace(op, listener(op.name, listenerFn, eventTargetResolver, op.hostListener && op.isAnimationListener, op.sourceSpan));\n        break;\n      case OpKind.TwoWayListener:\n        OpList.replace(op, twoWayListener(op.name, reifyListenerHandler(unit, op.handlerFnName, op.handlerOps, true), op.sourceSpan));\n        break;\n      case OpKind.Variable:\n        if (op.variable.name === null) {\n          throw new Error(`AssertionError: unnamed variable ${op.xref}`);\n        }\n        OpList.replace(op, createStatementOp(new DeclareVarStmt(op.variable.name, op.initializer, undefined, StmtModifier.Final)));\n        break;\n      case OpKind.Namespace:\n        switch (op.active) {\n          case Namespace.HTML:\n            OpList.replace(op, namespaceHTML());\n            break;\n          case Namespace.SVG:\n            OpList.replace(op, namespaceSVG());\n            break;\n          case Namespace.Math:\n            OpList.replace(op, namespaceMath());\n            break;\n        }\n        break;\n      case OpKind.Defer:\n        const timerScheduling = !!op.loadingMinimumTime || !!op.loadingAfterTime || !!op.placeholderMinimumTime;\n        OpList.replace(op, defer(op.handle.slot, op.mainSlot.slot, op.resolverFn, op.loadingSlot?.slot ?? null, op.placeholderSlot?.slot ?? null, op.errorSlot?.slot ?? null, op.loadingConfig, op.placeholderConfig, timerScheduling, op.sourceSpan));\n        break;\n      case OpKind.DeferOn:\n        let args = [];\n        switch (op.trigger.kind) {\n          case DeferTriggerKind.Idle:\n          case DeferTriggerKind.Immediate:\n            break;\n          case DeferTriggerKind.Timer:\n            args = [op.trigger.delay];\n            break;\n          case DeferTriggerKind.Interaction:\n          case DeferTriggerKind.Hover:\n          case DeferTriggerKind.Viewport:\n            if (op.trigger.targetSlot?.slot == null || op.trigger.targetSlotViewSteps === null) {\n              throw new Error(`Slot or view steps not set in trigger reification for trigger kind ${op.trigger.kind}`);\n            }\n            args = [op.trigger.targetSlot.slot];\n            if (op.trigger.targetSlotViewSteps !== 0) {\n              args.push(op.trigger.targetSlotViewSteps);\n            }\n            break;\n          default:\n            throw new Error(`AssertionError: Unsupported reification of defer trigger kind ${op.trigger.kind}`);\n        }\n        OpList.replace(op, deferOn(op.trigger.kind, args, op.prefetch, op.sourceSpan));\n        break;\n      case OpKind.ProjectionDef:\n        OpList.replace(op, projectionDef(op.def));\n        break;\n      case OpKind.Projection:\n        if (op.handle.slot === null) {\n          throw new Error('No slot was assigned for project instruction');\n        }\n        let fallbackViewFnName = null;\n        let fallbackDecls = null;\n        let fallbackVars = null;\n        if (op.fallbackView !== null) {\n          if (!(unit instanceof ViewCompilationUnit)) {\n            throw new Error(`AssertionError: must be compiling a component`);\n          }\n          const fallbackView = unit.job.views.get(op.fallbackView);\n          if (fallbackView === undefined) {\n            throw new Error('AssertionError: projection had fallback view xref, but fallback view was not found');\n          }\n          if (fallbackView.fnName === null || fallbackView.decls === null || fallbackView.vars === null) {\n            throw new Error(`AssertionError: expected projection fallback view to have been named and counted`);\n          }\n          fallbackViewFnName = fallbackView.fnName;\n          fallbackDecls = fallbackView.decls;\n          fallbackVars = fallbackView.vars;\n        }\n        OpList.replace(op, projection(op.handle.slot, op.projectionSlotIndex, op.attributes, fallbackViewFnName, fallbackDecls, fallbackVars, op.sourceSpan));\n        break;\n      case OpKind.RepeaterCreate:\n        if (op.handle.slot === null) {\n          throw new Error('No slot was assigned for repeater instruction');\n        }\n        if (!(unit instanceof ViewCompilationUnit)) {\n          throw new Error(`AssertionError: must be compiling a component`);\n        }\n        const repeaterView = unit.job.views.get(op.xref);\n        if (repeaterView.fnName === null) {\n          throw new Error(`AssertionError: expected repeater primary view to have been named`);\n        }\n        let emptyViewFnName = null;\n        let emptyDecls = null;\n        let emptyVars = null;\n        if (op.emptyView !== null) {\n          const emptyView = unit.job.views.get(op.emptyView);\n          if (emptyView === undefined) {\n            throw new Error('AssertionError: repeater had empty view xref, but empty view was not found');\n          }\n          if (emptyView.fnName === null || emptyView.decls === null || emptyView.vars === null) {\n            throw new Error(`AssertionError: expected repeater empty view to have been named and counted`);\n          }\n          emptyViewFnName = emptyView.fnName;\n          emptyDecls = emptyView.decls;\n          emptyVars = emptyView.vars;\n        }\n        OpList.replace(op, repeaterCreate(op.handle.slot, repeaterView.fnName, op.decls, op.vars, op.tag, op.attributes, op.trackByFn, op.usesComponentInstance, emptyViewFnName, emptyDecls, emptyVars, op.emptyTag, op.emptyAttributes, op.wholeSourceSpan));\n        break;\n      case OpKind.Statement:\n        // Pass statement operations directly through.\n        break;\n      default:\n        throw new Error(`AssertionError: Unsupported reification of create op ${OpKind[op.kind]}`);\n    }\n  }\n}\nfunction reifyUpdateOperations(_unit, ops) {\n  for (const op of ops) {\n    transformExpressionsInOp(op, reifyIrExpression, VisitorContextFlag.None);\n    switch (op.kind) {\n      case OpKind.Advance:\n        OpList.replace(op, advance(op.delta, op.sourceSpan));\n        break;\n      case OpKind.Property:\n        if (op.expression instanceof Interpolation) {\n          OpList.replace(op, propertyInterpolate(op.name, op.expression.strings, op.expression.expressions, op.sanitizer, op.sourceSpan));\n        } else {\n          OpList.replace(op, property(op.name, op.expression, op.sanitizer, op.sourceSpan));\n        }\n        break;\n      case OpKind.TwoWayProperty:\n        OpList.replace(op, twoWayProperty(op.name, op.expression, op.sanitizer, op.sourceSpan));\n        break;\n      case OpKind.StyleProp:\n        if (op.expression instanceof Interpolation) {\n          OpList.replace(op, stylePropInterpolate(op.name, op.expression.strings, op.expression.expressions, op.unit, op.sourceSpan));\n        } else {\n          OpList.replace(op, styleProp(op.name, op.expression, op.unit, op.sourceSpan));\n        }\n        break;\n      case OpKind.ClassProp:\n        OpList.replace(op, classProp(op.name, op.expression, op.sourceSpan));\n        break;\n      case OpKind.StyleMap:\n        if (op.expression instanceof Interpolation) {\n          OpList.replace(op, styleMapInterpolate(op.expression.strings, op.expression.expressions, op.sourceSpan));\n        } else {\n          OpList.replace(op, styleMap(op.expression, op.sourceSpan));\n        }\n        break;\n      case OpKind.ClassMap:\n        if (op.expression instanceof Interpolation) {\n          OpList.replace(op, classMapInterpolate(op.expression.strings, op.expression.expressions, op.sourceSpan));\n        } else {\n          OpList.replace(op, classMap(op.expression, op.sourceSpan));\n        }\n        break;\n      case OpKind.I18nExpression:\n        OpList.replace(op, i18nExp(op.expression, op.sourceSpan));\n        break;\n      case OpKind.I18nApply:\n        OpList.replace(op, i18nApply(op.handle.slot, op.sourceSpan));\n        break;\n      case OpKind.InterpolateText:\n        OpList.replace(op, textInterpolate(op.interpolation.strings, op.interpolation.expressions, op.sourceSpan));\n        break;\n      case OpKind.Attribute:\n        if (op.expression instanceof Interpolation) {\n          OpList.replace(op, attributeInterpolate(op.name, op.expression.strings, op.expression.expressions, op.sanitizer, op.sourceSpan));\n        } else {\n          OpList.replace(op, attribute(op.name, op.expression, op.sanitizer, op.namespace));\n        }\n        break;\n      case OpKind.HostProperty:\n        if (op.expression instanceof Interpolation) {\n          throw new Error('not yet handled');\n        } else {\n          if (op.isAnimationTrigger) {\n            OpList.replace(op, syntheticHostProperty(op.name, op.expression, op.sourceSpan));\n          } else {\n            OpList.replace(op, hostProperty(op.name, op.expression, op.sanitizer, op.sourceSpan));\n          }\n        }\n        break;\n      case OpKind.Variable:\n        if (op.variable.name === null) {\n          throw new Error(`AssertionError: unnamed variable ${op.xref}`);\n        }\n        OpList.replace(op, createStatementOp(new DeclareVarStmt(op.variable.name, op.initializer, undefined, StmtModifier.Final)));\n        break;\n      case OpKind.Conditional:\n        if (op.processed === null) {\n          throw new Error(`Conditional test was not set.`);\n        }\n        OpList.replace(op, conditional(op.processed, op.contextValue, op.sourceSpan));\n        break;\n      case OpKind.Repeater:\n        OpList.replace(op, repeater(op.collection, op.sourceSpan));\n        break;\n      case OpKind.DeferWhen:\n        OpList.replace(op, deferWhen(op.prefetch, op.expr, op.sourceSpan));\n        break;\n      case OpKind.StoreLet:\n        throw new Error(`AssertionError: unexpected storeLet ${op.declaredName}`);\n      case OpKind.Statement:\n        // Pass statement operations directly through.\n        break;\n      default:\n        throw new Error(`AssertionError: Unsupported reification of update op ${OpKind[op.kind]}`);\n    }\n  }\n}\nfunction reifyIrExpression(expr) {\n  if (!isIrExpression(expr)) {\n    return expr;\n  }\n  switch (expr.kind) {\n    case ExpressionKind.NextContext:\n      return nextContext(expr.steps);\n    case ExpressionKind.Reference:\n      return reference(expr.targetSlot.slot + 1 + expr.offset);\n    case ExpressionKind.LexicalRead:\n      throw new Error(`AssertionError: unresolved LexicalRead of ${expr.name}`);\n    case ExpressionKind.TwoWayBindingSet:\n      throw new Error(`AssertionError: unresolved TwoWayBindingSet`);\n    case ExpressionKind.RestoreView:\n      if (typeof expr.view === 'number') {\n        throw new Error(`AssertionError: unresolved RestoreView`);\n      }\n      return restoreView(expr.view);\n    case ExpressionKind.ResetView:\n      return resetView(expr.expr);\n    case ExpressionKind.GetCurrentView:\n      return getCurrentView();\n    case ExpressionKind.ReadVariable:\n      if (expr.name === null) {\n        throw new Error(`Read of unnamed variable ${expr.xref}`);\n      }\n      return variable(expr.name);\n    case ExpressionKind.ReadTemporaryExpr:\n      if (expr.name === null) {\n        throw new Error(`Read of unnamed temporary ${expr.xref}`);\n      }\n      return variable(expr.name);\n    case ExpressionKind.AssignTemporaryExpr:\n      if (expr.name === null) {\n        throw new Error(`Assign of unnamed temporary ${expr.xref}`);\n      }\n      return variable(expr.name).set(expr.expr);\n    case ExpressionKind.PureFunctionExpr:\n      if (expr.fn === null) {\n        throw new Error(`AssertionError: expected PureFunctions to have been extracted`);\n      }\n      return pureFunction(expr.varOffset, expr.fn, expr.args);\n    case ExpressionKind.PureFunctionParameterExpr:\n      throw new Error(`AssertionError: expected PureFunctionParameterExpr to have been extracted`);\n    case ExpressionKind.PipeBinding:\n      return pipeBind(expr.targetSlot.slot, expr.varOffset, expr.args);\n    case ExpressionKind.PipeBindingVariadic:\n      return pipeBindV(expr.targetSlot.slot, expr.varOffset, expr.args);\n    case ExpressionKind.SlotLiteralExpr:\n      return literal(expr.slot.slot);\n    case ExpressionKind.ContextLetReference:\n      return readContextLet(expr.targetSlot.slot);\n    case ExpressionKind.StoreLet:\n      return storeLet(expr.value, expr.sourceSpan);\n    default:\n      throw new Error(`AssertionError: Unsupported reification of ir.Expression kind: ${ExpressionKind[expr.kind]}`);\n  }\n}\n/**\n * Listeners get turned into a function expression, which may or may not have the `$event`\n * parameter defined.\n */\nfunction reifyListenerHandler(unit, name, handlerOps, consumesDollarEvent) {\n  // First, reify all instruction calls within `handlerOps`.\n  reifyUpdateOperations(unit, handlerOps);\n  // Next, extract all the `o.Statement`s from the reified operations. We can expect that at this\n  // point, all operations have been converted to statements.\n  const handlerStmts = [];\n  for (const op of handlerOps) {\n    if (op.kind !== OpKind.Statement) {\n      throw new Error(`AssertionError: expected reified statements, but found op ${OpKind[op.kind]}`);\n    }\n    handlerStmts.push(op.statement);\n  }\n  // If `$event` is referenced, we need to generate it as a parameter.\n  const params = [];\n  if (consumesDollarEvent) {\n    // We need the `$event` parameter.\n    params.push(new FnParam('$event'));\n  }\n  return fn(params, handlerStmts, undefined, undefined, name);\n}\n\n/**\n * Binding with no content can be safely deleted.\n */\nfunction removeEmptyBindings(job) {\n  for (const unit of job.units) {\n    for (const op of unit.update) {\n      switch (op.kind) {\n        case OpKind.Attribute:\n        case OpKind.Binding:\n        case OpKind.ClassProp:\n        case OpKind.ClassMap:\n        case OpKind.Property:\n        case OpKind.StyleProp:\n        case OpKind.StyleMap:\n          if (op.expression instanceof EmptyExpr) {\n            OpList.remove(op);\n          }\n          break;\n      }\n    }\n  }\n}\n\n/**\n * Remove the i18n context ops after they are no longer needed, and null out references to them to\n * be safe.\n */\nfunction removeI18nContexts(job) {\n  for (const unit of job.units) {\n    for (const op of unit.create) {\n      switch (op.kind) {\n        case OpKind.I18nContext:\n          OpList.remove(op);\n          break;\n        case OpKind.I18nStart:\n          op.context = null;\n          break;\n      }\n    }\n  }\n}\n\n/**\n * i18nAttributes ops will be generated for each i18n attribute. However, not all i18n attribues\n * will contain dynamic content, and so some of these i18nAttributes ops may be unnecessary.\n */\nfunction removeUnusedI18nAttributesOps(job) {\n  for (const unit of job.units) {\n    const ownersWithI18nExpressions = new Set();\n    for (const op of unit.update) {\n      switch (op.kind) {\n        case OpKind.I18nExpression:\n          ownersWithI18nExpressions.add(op.i18nOwner);\n      }\n    }\n    for (const op of unit.create) {\n      switch (op.kind) {\n        case OpKind.I18nAttributes:\n          if (ownersWithI18nExpressions.has(op.xref)) {\n            continue;\n          }\n          OpList.remove(op);\n      }\n    }\n  }\n}\n\n/**\n * Resolves `ir.ContextExpr` expressions (which represent embedded view or component contexts) to\n * either the `ctx` parameter to component functions (for the current view context) or to variables\n * that store those contexts (for contexts accessed via the `nextContext()` instruction).\n */\nfunction resolveContexts(job) {\n  for (const unit of job.units) {\n    processLexicalScope$1(unit, unit.create);\n    processLexicalScope$1(unit, unit.update);\n  }\n}\nfunction processLexicalScope$1(view, ops) {\n  // Track the expressions used to access all available contexts within the current view, by the\n  // view `ir.XrefId`.\n  const scope = new Map();\n  // The current view's context is accessible via the `ctx` parameter.\n  scope.set(view.xref, variable('ctx'));\n  for (const op of ops) {\n    switch (op.kind) {\n      case OpKind.Variable:\n        switch (op.variable.kind) {\n          case SemanticVariableKind.Context:\n            scope.set(op.variable.view, new ReadVariableExpr(op.xref));\n            break;\n        }\n        break;\n      case OpKind.Listener:\n      case OpKind.TwoWayListener:\n        processLexicalScope$1(view, op.handlerOps);\n        break;\n    }\n  }\n  if (view === view.job.root) {\n    // Prefer `ctx` of the root view to any variables which happen to contain the root context.\n    scope.set(view.xref, variable('ctx'));\n  }\n  for (const op of ops) {\n    transformExpressionsInOp(op, expr => {\n      if (expr instanceof ContextExpr) {\n        if (!scope.has(expr.view)) {\n          throw new Error(`No context found for reference to view ${expr.view} from view ${view.xref}`);\n        }\n        return scope.get(expr.view);\n      } else {\n        return expr;\n      }\n    }, VisitorContextFlag.None);\n  }\n}\n\n/**\n * Any variable inside a listener with the name `$event` will be transformed into a output lexical\n * read immediately, and does not participate in any of the normal logic for handling variables.\n */\nfunction resolveDollarEvent(job) {\n  for (const unit of job.units) {\n    transformDollarEvent(unit.create);\n    transformDollarEvent(unit.update);\n  }\n}\nfunction transformDollarEvent(ops) {\n  for (const op of ops) {\n    if (op.kind === OpKind.Listener || op.kind === OpKind.TwoWayListener) {\n      transformExpressionsInOp(op, expr => {\n        if (expr instanceof LexicalReadExpr && expr.name === '$event') {\n          // Two-way listeners always consume `$event` so they omit this field.\n          if (op.kind === OpKind.Listener) {\n            op.consumesDollarEvent = true;\n          }\n          return new ReadVarExpr(expr.name);\n        }\n        return expr;\n      }, VisitorContextFlag.InChildOperation);\n    }\n  }\n}\n\n/**\n * Resolve the element placeholders in i18n messages.\n */\nfunction resolveI18nElementPlaceholders(job) {\n  // Record all of the element and i18n context ops for use later.\n  const i18nContexts = new Map();\n  const elements = new Map();\n  for (const unit of job.units) {\n    for (const op of unit.create) {\n      switch (op.kind) {\n        case OpKind.I18nContext:\n          i18nContexts.set(op.xref, op);\n          break;\n        case OpKind.ElementStart:\n          elements.set(op.xref, op);\n          break;\n      }\n    }\n  }\n  resolvePlaceholdersForView(job, job.root, i18nContexts, elements);\n}\n/**\n * Recursively resolves element and template tag placeholders in the given view.\n */\nfunction resolvePlaceholdersForView(job, unit, i18nContexts, elements, pendingStructuralDirective) {\n  // Track the current i18n op and corresponding i18n context op as we step through the creation\n  // IR.\n  let currentOps = null;\n  let pendingStructuralDirectiveCloses = new Map();\n  for (const op of unit.create) {\n    switch (op.kind) {\n      case OpKind.I18nStart:\n        if (!op.context) {\n          throw Error('Could not find i18n context for i18n op');\n        }\n        currentOps = {\n          i18nBlock: op,\n          i18nContext: i18nContexts.get(op.context)\n        };\n        break;\n      case OpKind.I18nEnd:\n        currentOps = null;\n        break;\n      case OpKind.ElementStart:\n        // For elements with i18n placeholders, record its slot value in the params map under the\n        // corresponding tag start placeholder.\n        if (op.i18nPlaceholder !== undefined) {\n          if (currentOps === null) {\n            throw Error('i18n tag placeholder should only occur inside an i18n block');\n          }\n          recordElementStart(op, currentOps.i18nContext, currentOps.i18nBlock, pendingStructuralDirective);\n          // If there is a separate close tag placeholder for this element, save the pending\n          // structural directive so we can pass it to the closing tag as well.\n          if (pendingStructuralDirective && op.i18nPlaceholder.closeName) {\n            pendingStructuralDirectiveCloses.set(op.xref, pendingStructuralDirective);\n          }\n          // Clear out the pending structural directive now that its been accounted for.\n          pendingStructuralDirective = undefined;\n        }\n        break;\n      case OpKind.ElementEnd:\n        // For elements with i18n placeholders, record its slot value in the params map under the\n        // corresponding tag close placeholder.\n        const startOp = elements.get(op.xref);\n        if (startOp && startOp.i18nPlaceholder !== undefined) {\n          if (currentOps === null) {\n            throw Error('AssertionError: i18n tag placeholder should only occur inside an i18n block');\n          }\n          recordElementClose(startOp, currentOps.i18nContext, currentOps.i18nBlock, pendingStructuralDirectiveCloses.get(op.xref));\n          // Clear out the pending structural directive close that was accounted for.\n          pendingStructuralDirectiveCloses.delete(op.xref);\n        }\n        break;\n      case OpKind.Projection:\n        // For content projections with i18n placeholders, record its slot value in the params map\n        // under the corresponding tag start and close placeholders.\n        if (op.i18nPlaceholder !== undefined) {\n          if (currentOps === null) {\n            throw Error('i18n tag placeholder should only occur inside an i18n block');\n          }\n          recordElementStart(op, currentOps.i18nContext, currentOps.i18nBlock, pendingStructuralDirective);\n          recordElementClose(op, currentOps.i18nContext, currentOps.i18nBlock, pendingStructuralDirective);\n          // Clear out the pending structural directive now that its been accounted for.\n          pendingStructuralDirective = undefined;\n        }\n        break;\n      case OpKind.Template:\n        const view = job.views.get(op.xref);\n        if (op.i18nPlaceholder === undefined) {\n          // If there is no i18n placeholder, just recurse into the view in case it contains i18n\n          // blocks.\n          resolvePlaceholdersForView(job, view, i18nContexts, elements);\n        } else {\n          if (currentOps === null) {\n            throw Error('i18n tag placeholder should only occur inside an i18n block');\n          }\n          if (op.templateKind === TemplateKind.Structural) {\n            // If this is a structural directive template, don't record anything yet. Instead pass\n            // the current template as a pending structural directive to be recorded when we find\n            // the element, content, or template it belongs to. This allows us to create combined\n            // values that represent, e.g. the start of a template and element at the same time.\n            resolvePlaceholdersForView(job, view, i18nContexts, elements, op);\n          } else {\n            // If this is some other kind of template, we can record its start, recurse into its\n            // view, and then record its end.\n            recordTemplateStart(job, view, op.handle.slot, op.i18nPlaceholder, currentOps.i18nContext, currentOps.i18nBlock, pendingStructuralDirective);\n            resolvePlaceholdersForView(job, view, i18nContexts, elements);\n            recordTemplateClose(job, view, op.handle.slot, op.i18nPlaceholder, currentOps.i18nContext, currentOps.i18nBlock, pendingStructuralDirective);\n            pendingStructuralDirective = undefined;\n          }\n        }\n        break;\n      case OpKind.RepeaterCreate:\n        if (pendingStructuralDirective !== undefined) {\n          throw Error('AssertionError: Unexpected structural directive associated with @for block');\n        }\n        // RepeaterCreate has 3 slots: the first is for the op itself, the second is for the @for\n        // template and the (optional) third is for the @empty template.\n        const forSlot = op.handle.slot + 1;\n        const forView = job.views.get(op.xref);\n        // First record all of the placeholders for the @for template.\n        if (op.i18nPlaceholder === undefined) {\n          // If there is no i18n placeholder, just recurse into the view in case it contains i18n\n          // blocks.\n          resolvePlaceholdersForView(job, forView, i18nContexts, elements);\n        } else {\n          if (currentOps === null) {\n            throw Error('i18n tag placeholder should only occur inside an i18n block');\n          }\n          recordTemplateStart(job, forView, forSlot, op.i18nPlaceholder, currentOps.i18nContext, currentOps.i18nBlock, pendingStructuralDirective);\n          resolvePlaceholdersForView(job, forView, i18nContexts, elements);\n          recordTemplateClose(job, forView, forSlot, op.i18nPlaceholder, currentOps.i18nContext, currentOps.i18nBlock, pendingStructuralDirective);\n          pendingStructuralDirective = undefined;\n        }\n        // Then if there's an @empty template, add its placeholders as well.\n        if (op.emptyView !== null) {\n          // RepeaterCreate has 3 slots: the first is for the op itself, the second is for the @for\n          // template and the (optional) third is for the @empty template.\n          const emptySlot = op.handle.slot + 2;\n          const emptyView = job.views.get(op.emptyView);\n          if (op.emptyI18nPlaceholder === undefined) {\n            // If there is no i18n placeholder, just recurse into the view in case it contains i18n\n            // blocks.\n            resolvePlaceholdersForView(job, emptyView, i18nContexts, elements);\n          } else {\n            if (currentOps === null) {\n              throw Error('i18n tag placeholder should only occur inside an i18n block');\n            }\n            recordTemplateStart(job, emptyView, emptySlot, op.emptyI18nPlaceholder, currentOps.i18nContext, currentOps.i18nBlock, pendingStructuralDirective);\n            resolvePlaceholdersForView(job, emptyView, i18nContexts, elements);\n            recordTemplateClose(job, emptyView, emptySlot, op.emptyI18nPlaceholder, currentOps.i18nContext, currentOps.i18nBlock, pendingStructuralDirective);\n            pendingStructuralDirective = undefined;\n          }\n        }\n        break;\n    }\n  }\n}\n/**\n * Records an i18n param value for the start of an element.\n */\nfunction recordElementStart(op, i18nContext, i18nBlock, structuralDirective) {\n  const {\n    startName,\n    closeName\n  } = op.i18nPlaceholder;\n  let flags = I18nParamValueFlags.ElementTag | I18nParamValueFlags.OpenTag;\n  let value = op.handle.slot;\n  // If the element is associated with a structural directive, start it as well.\n  if (structuralDirective !== undefined) {\n    flags |= I18nParamValueFlags.TemplateTag;\n    value = {\n      element: value,\n      template: structuralDirective.handle.slot\n    };\n  }\n  // For self-closing tags, there is no close tag placeholder. Instead, the start tag\n  // placeholder accounts for the start and close of the element.\n  if (!closeName) {\n    flags |= I18nParamValueFlags.CloseTag;\n  }\n  addParam(i18nContext.params, startName, value, i18nBlock.subTemplateIndex, flags);\n}\n/**\n * Records an i18n param value for the closing of an element.\n */\nfunction recordElementClose(op, i18nContext, i18nBlock, structuralDirective) {\n  const {\n    closeName\n  } = op.i18nPlaceholder;\n  // Self-closing tags don't have a closing tag placeholder, instead the element closing is\n  // recorded via an additional flag on the element start value.\n  if (closeName) {\n    let flags = I18nParamValueFlags.ElementTag | I18nParamValueFlags.CloseTag;\n    let value = op.handle.slot;\n    // If the element is associated with a structural directive, close it as well.\n    if (structuralDirective !== undefined) {\n      flags |= I18nParamValueFlags.TemplateTag;\n      value = {\n        element: value,\n        template: structuralDirective.handle.slot\n      };\n    }\n    addParam(i18nContext.params, closeName, value, i18nBlock.subTemplateIndex, flags);\n  }\n}\n/**\n * Records an i18n param value for the start of a template.\n */\nfunction recordTemplateStart(job, view, slot, i18nPlaceholder, i18nContext, i18nBlock, structuralDirective) {\n  let {\n    startName,\n    closeName\n  } = i18nPlaceholder;\n  let flags = I18nParamValueFlags.TemplateTag | I18nParamValueFlags.OpenTag;\n  // For self-closing tags, there is no close tag placeholder. Instead, the start tag\n  // placeholder accounts for the start and close of the element.\n  if (!closeName) {\n    flags |= I18nParamValueFlags.CloseTag;\n  }\n  // If the template is associated with a structural directive, record the structural directive's\n  // start first. Since this template must be in the structural directive's view, we can just\n  // directly use the current i18n block's sub-template index.\n  if (structuralDirective !== undefined) {\n    addParam(i18nContext.params, startName, structuralDirective.handle.slot, i18nBlock.subTemplateIndex, flags);\n  }\n  // Record the start of the template. For the sub-template index, pass the index for the template's\n  // view, rather than the current i18n block's index.\n  addParam(i18nContext.params, startName, slot, getSubTemplateIndexForTemplateTag(job, i18nBlock, view), flags);\n}\n/**\n * Records an i18n param value for the closing of a template.\n */\nfunction recordTemplateClose(job, view, slot, i18nPlaceholder, i18nContext, i18nBlock, structuralDirective) {\n  const {\n    closeName\n  } = i18nPlaceholder;\n  const flags = I18nParamValueFlags.TemplateTag | I18nParamValueFlags.CloseTag;\n  // Self-closing tags don't have a closing tag placeholder, instead the template's closing is\n  // recorded via an additional flag on the template start value.\n  if (closeName) {\n    // Record the closing of the template. For the sub-template index, pass the index for the\n    // template's view, rather than the current i18n block's index.\n    addParam(i18nContext.params, closeName, slot, getSubTemplateIndexForTemplateTag(job, i18nBlock, view), flags);\n    // If the template is associated with a structural directive, record the structural directive's\n    // closing after. Since this template must be in the structural directive's view, we can just\n    // directly use the current i18n block's sub-template index.\n    if (structuralDirective !== undefined) {\n      addParam(i18nContext.params, closeName, structuralDirective.handle.slot, i18nBlock.subTemplateIndex, flags);\n    }\n  }\n}\n/**\n * Get the subTemplateIndex for the given template op. For template ops, use the subTemplateIndex of\n * the child i18n block inside the template.\n */\nfunction getSubTemplateIndexForTemplateTag(job, i18nOp, view) {\n  for (const childOp of view.create) {\n    if (childOp.kind === OpKind.I18nStart) {\n      return childOp.subTemplateIndex;\n    }\n  }\n  return i18nOp.subTemplateIndex;\n}\n/**\n * Add a param value to the given params map.\n */\nfunction addParam(params, placeholder, value, subTemplateIndex, flags) {\n  const values = params.get(placeholder) ?? [];\n  values.push({\n    value,\n    subTemplateIndex,\n    flags\n  });\n  params.set(placeholder, values);\n}\n\n/**\n * Resolve the i18n expression placeholders in i18n messages.\n */\nfunction resolveI18nExpressionPlaceholders(job) {\n  // Record all of the i18n context ops, and the sub-template index for each i18n op.\n  const subTemplateIndices = new Map();\n  const i18nContexts = new Map();\n  const icuPlaceholders = new Map();\n  for (const unit of job.units) {\n    for (const op of unit.create) {\n      switch (op.kind) {\n        case OpKind.I18nStart:\n          subTemplateIndices.set(op.xref, op.subTemplateIndex);\n          break;\n        case OpKind.I18nContext:\n          i18nContexts.set(op.xref, op);\n          break;\n        case OpKind.IcuPlaceholder:\n          icuPlaceholders.set(op.xref, op);\n          break;\n      }\n    }\n  }\n  // Keep track of the next available expression index for each i18n message.\n  const expressionIndices = new Map();\n  // Keep track of a reference index for each expression.\n  // We use different references for normal i18n expressio and attribute i18n expressions. This is\n  // because child i18n blocks in templates don't get their own context, since they're rolled into\n  // the translated message of the parent, but they may target a different slot.\n  const referenceIndex = op => op.usage === I18nExpressionFor.I18nText ? op.i18nOwner : op.context;\n  for (const unit of job.units) {\n    for (const op of unit.update) {\n      if (op.kind === OpKind.I18nExpression) {\n        const index = expressionIndices.get(referenceIndex(op)) || 0;\n        const subTemplateIndex = subTemplateIndices.get(op.i18nOwner) ?? null;\n        const value = {\n          value: index,\n          subTemplateIndex: subTemplateIndex,\n          flags: I18nParamValueFlags.ExpressionIndex\n        };\n        updatePlaceholder(op, value, i18nContexts, icuPlaceholders);\n        expressionIndices.set(referenceIndex(op), index + 1);\n      }\n    }\n  }\n}\nfunction updatePlaceholder(op, value, i18nContexts, icuPlaceholders) {\n  if (op.i18nPlaceholder !== null) {\n    const i18nContext = i18nContexts.get(op.context);\n    const params = op.resolutionTime === I18nParamResolutionTime.Creation ? i18nContext.params : i18nContext.postprocessingParams;\n    const values = params.get(op.i18nPlaceholder) || [];\n    values.push(value);\n    params.set(op.i18nPlaceholder, values);\n  }\n  if (op.icuPlaceholder !== null) {\n    const icuPlaceholderOp = icuPlaceholders.get(op.icuPlaceholder);\n    icuPlaceholderOp?.expressionPlaceholders.push(value);\n  }\n}\n\n/**\n * Resolves lexical references in views (`ir.LexicalReadExpr`) to either a target variable or to\n * property reads on the top-level component context.\n *\n * Also matches `ir.RestoreViewExpr` expressions with the variables of their corresponding saved\n * views.\n */\nfunction resolveNames(job) {\n  for (const unit of job.units) {\n    processLexicalScope(unit, unit.create, null);\n    processLexicalScope(unit, unit.update, null);\n  }\n}\nfunction processLexicalScope(unit, ops, savedView) {\n  // Maps names defined in the lexical scope of this template to the `ir.XrefId`s of the variable\n  // declarations which represent those values.\n  //\n  // Since variables are generated in each view for the entire lexical scope (including any\n  // identifiers from parent templates) only local variables need be considered here.\n  const scope = new Map();\n  // Symbols defined within the current scope. They take precedence over ones defined outside.\n  const localDefinitions = new Map();\n  // First, step through the operations list and:\n  // 1) build up the `scope` mapping\n  // 2) recurse into any listener functions\n  for (const op of ops) {\n    switch (op.kind) {\n      case OpKind.Variable:\n        switch (op.variable.kind) {\n          case SemanticVariableKind.Identifier:\n            if (op.variable.local) {\n              if (localDefinitions.has(op.variable.identifier)) {\n                continue;\n              }\n              localDefinitions.set(op.variable.identifier, op.xref);\n            } else if (scope.has(op.variable.identifier)) {\n              continue;\n            }\n            scope.set(op.variable.identifier, op.xref);\n            break;\n          case SemanticVariableKind.Alias:\n            // This variable represents some kind of identifier which can be used in the template.\n            if (scope.has(op.variable.identifier)) {\n              continue;\n            }\n            scope.set(op.variable.identifier, op.xref);\n            break;\n          case SemanticVariableKind.SavedView:\n            // This variable represents a snapshot of the current view context, and can be used to\n            // restore that context within listener functions.\n            savedView = {\n              view: op.variable.view,\n              variable: op.xref\n            };\n            break;\n        }\n        break;\n      case OpKind.Listener:\n      case OpKind.TwoWayListener:\n        // Listener functions have separate variable declarations, so process them as a separate\n        // lexical scope.\n        processLexicalScope(unit, op.handlerOps, savedView);\n        break;\n    }\n  }\n  // Next, use the `scope` mapping to match `ir.LexicalReadExpr` with defined names in the lexical\n  // scope. Also, look for `ir.RestoreViewExpr`s and match them with the snapshotted view context\n  // variable.\n  for (const op of ops) {\n    if (op.kind == OpKind.Listener || op.kind === OpKind.TwoWayListener) {\n      // Listeners were already processed above with their own scopes.\n      continue;\n    }\n    transformExpressionsInOp(op, expr => {\n      if (expr instanceof LexicalReadExpr) {\n        // `expr` is a read of a name within the lexical scope of this view.\n        // Either that name is defined within the current view, or it represents a property from the\n        // main component context.\n        if (localDefinitions.has(expr.name)) {\n          return new ReadVariableExpr(localDefinitions.get(expr.name));\n        } else if (scope.has(expr.name)) {\n          // This was a defined variable in the current scope.\n          return new ReadVariableExpr(scope.get(expr.name));\n        } else {\n          // Reading from the component context.\n          return new ReadPropExpr(new ContextExpr(unit.job.root.xref), expr.name);\n        }\n      } else if (expr instanceof RestoreViewExpr && typeof expr.view === 'number') {\n        // `ir.RestoreViewExpr` happens in listener functions and restores a saved view from the\n        // parent creation list. We expect to find that we captured the `savedView` previously, and\n        // that it matches the expected view to be restored.\n        if (savedView === null || savedView.view !== expr.view) {\n          throw new Error(`AssertionError: no saved view ${expr.view} from view ${unit.xref}`);\n        }\n        expr.view = new ReadVariableExpr(savedView.variable);\n        return expr;\n      } else {\n        return expr;\n      }\n    }, VisitorContextFlag.None);\n  }\n  for (const op of ops) {\n    visitExpressionsInOp(op, expr => {\n      if (expr instanceof LexicalReadExpr) {\n        throw new Error(`AssertionError: no lexical reads should remain, but found read of ${expr.name}`);\n      }\n    });\n  }\n}\n\n/**\n * Map of security contexts to their sanitizer function.\n */\nconst sanitizerFns = new Map([[SecurityContext.HTML, Identifiers.sanitizeHtml], [SecurityContext.RESOURCE_URL, Identifiers.sanitizeResourceUrl], [SecurityContext.SCRIPT, Identifiers.sanitizeScript], [SecurityContext.STYLE, Identifiers.sanitizeStyle], [SecurityContext.URL, Identifiers.sanitizeUrl]]);\n/**\n * Map of security contexts to their trusted value function.\n */\nconst trustedValueFns = new Map([[SecurityContext.HTML, Identifiers.trustConstantHtml], [SecurityContext.RESOURCE_URL, Identifiers.trustConstantResourceUrl]]);\n/**\n * Resolves sanitization functions for ops that need them.\n */\nfunction resolveSanitizers(job) {\n  for (const unit of job.units) {\n    const elements = createOpXrefMap(unit);\n    // For normal element bindings we create trusted values for security sensitive constant\n    // attributes. However, for host bindings we skip this step (this matches what\n    // TemplateDefinitionBuilder does).\n    // TODO: Is the TDB behavior correct here?\n    if (job.kind !== CompilationJobKind.Host) {\n      for (const op of unit.create) {\n        if (op.kind === OpKind.ExtractedAttribute) {\n          const trustedValueFn = trustedValueFns.get(getOnlySecurityContext(op.securityContext)) ?? null;\n          op.trustedValueFn = trustedValueFn !== null ? importExpr(trustedValueFn) : null;\n        }\n      }\n    }\n    for (const op of unit.update) {\n      switch (op.kind) {\n        case OpKind.Property:\n        case OpKind.Attribute:\n        case OpKind.HostProperty:\n          let sanitizerFn = null;\n          if (Array.isArray(op.securityContext) && op.securityContext.length === 2 && op.securityContext.indexOf(SecurityContext.URL) > -1 && op.securityContext.indexOf(SecurityContext.RESOURCE_URL) > -1) {\n            // When the host element isn't known, some URL attributes (such as \"src\" and \"href\") may\n            // be part of multiple different security contexts. In this case we use special\n            // sanitization function and select the actual sanitizer at runtime based on a tag name\n            // that is provided while invoking sanitization function.\n            sanitizerFn = Identifiers.sanitizeUrlOrResourceUrl;\n          } else {\n            sanitizerFn = sanitizerFns.get(getOnlySecurityContext(op.securityContext)) ?? null;\n          }\n          op.sanitizer = sanitizerFn !== null ? importExpr(sanitizerFn) : null;\n          // If there was no sanitization function found based on the security context of an\n          // attribute/property, check whether this attribute/property is one of the\n          // security-sensitive <iframe> attributes (and that the current element is actually an\n          // <iframe>).\n          if (op.sanitizer === null) {\n            let isIframe = false;\n            if (job.kind === CompilationJobKind.Host || op.kind === OpKind.HostProperty) {\n              // Note: for host bindings defined on a directive, we do not try to find all\n              // possible places where it can be matched, so we can not determine whether\n              // the host element is an <iframe>. In this case, we just assume it is and append a\n              // validation function, which is invoked at runtime and would have access to the\n              // underlying DOM element to check if it's an <iframe> and if so - run extra checks.\n              isIframe = true;\n            } else {\n              // For a normal binding we can just check if the element its on is an iframe.\n              const ownerOp = elements.get(op.target);\n              if (ownerOp === undefined || !isElementOrContainerOp(ownerOp)) {\n                throw Error('Property should have an element-like owner');\n              }\n              isIframe = isIframeElement(ownerOp);\n            }\n            if (isIframe && isIframeSecuritySensitiveAttr(op.name)) {\n              op.sanitizer = importExpr(Identifiers.validateIframeAttribute);\n            }\n          }\n          break;\n      }\n    }\n  }\n}\n/**\n * Checks whether the given op represents an iframe element.\n */\nfunction isIframeElement(op) {\n  return op.kind === OpKind.ElementStart && op.tag?.toLowerCase() === 'iframe';\n}\n/**\n * Asserts that there is only a single security context and returns it.\n */\nfunction getOnlySecurityContext(securityContext) {\n  if (Array.isArray(securityContext)) {\n    if (securityContext.length > 1) {\n      // TODO: What should we do here? TDB just took the first one, but this feels like something we\n      // would want to know about and create a special case for like we did for Url/ResourceUrl. My\n      // guess is that, outside of the Url/ResourceUrl case, this never actually happens. If there\n      // do turn out to be other cases, throwing an error until we can address it feels safer.\n      throw Error(`AssertionError: Ambiguous security context`);\n    }\n    return securityContext[0] || SecurityContext.NONE;\n  }\n  return securityContext;\n}\n\n/**\n * Transforms a `TwoWayBindingSet` expression into an expression that either\n * sets a value through the `twoWayBindingSet` instruction or falls back to setting\n * the value directly. E.g. the expression `TwoWayBindingSet(target, value)` becomes:\n * `ng.twoWayBindingSet(target, value) || (target = value)`.\n */\nfunction transformTwoWayBindingSet(job) {\n  for (const unit of job.units) {\n    for (const op of unit.create) {\n      if (op.kind === OpKind.TwoWayListener) {\n        transformExpressionsInOp(op, expr => {\n          if (!(expr instanceof TwoWayBindingSetExpr)) {\n            return expr;\n          }\n          const {\n            target,\n            value\n          } = expr;\n          if (target instanceof ReadPropExpr || target instanceof ReadKeyExpr) {\n            return twoWayBindingSet(target, value).or(target.set(value));\n          }\n          // ASSUMPTION: here we're assuming that `ReadVariableExpr` will be a reference\n          // to a local template variable. This appears to be the case at the time of writing.\n          // If the expression is targeting a variable read, we only emit the `twoWayBindingSet`\n          // since the fallback would be attempting to write into a constant. Invalid usages will be\n          // flagged during template type checking.\n          if (target instanceof ReadVariableExpr) {\n            return twoWayBindingSet(target, value);\n          }\n          throw new Error(`Unsupported expression in two-way action binding.`);\n        }, VisitorContextFlag.InChildOperation);\n      }\n    }\n  }\n}\n\n/**\n * When inside of a listener, we may need access to one or more enclosing views. Therefore, each\n * view should save the current view, and each listener must have the ability to restore the\n * appropriate view. We eagerly generate all save view variables; they will be optimized away later.\n */\nfunction saveAndRestoreView(job) {\n  for (const unit of job.units) {\n    unit.create.prepend([createVariableOp(unit.job.allocateXrefId(), {\n      kind: SemanticVariableKind.SavedView,\n      name: null,\n      view: unit.xref\n    }, new GetCurrentViewExpr(), VariableFlags.None)]);\n    for (const op of unit.create) {\n      if (op.kind !== OpKind.Listener && op.kind !== OpKind.TwoWayListener) {\n        continue;\n      }\n      // Embedded views always need the save/restore view operation.\n      let needsRestoreView = unit !== job.root;\n      if (!needsRestoreView) {\n        for (const handlerOp of op.handlerOps) {\n          visitExpressionsInOp(handlerOp, expr => {\n            if (expr instanceof ReferenceExpr || expr instanceof ContextLetReferenceExpr) {\n              // Listeners that reference() a local ref need the save/restore view operation.\n              needsRestoreView = true;\n            }\n          });\n        }\n      }\n      if (needsRestoreView) {\n        addSaveRestoreViewOperationToListener(unit, op);\n      }\n    }\n  }\n}\nfunction addSaveRestoreViewOperationToListener(unit, op) {\n  op.handlerOps.prepend([createVariableOp(unit.job.allocateXrefId(), {\n    kind: SemanticVariableKind.Context,\n    name: null,\n    view: unit.xref\n  }, new RestoreViewExpr(unit.xref), VariableFlags.None)]);\n  // The \"restore view\" operation in listeners requires a call to `resetView` to reset the\n  // context prior to returning from the listener operation. Find any `return` statements in\n  // the listener body and wrap them in a call to reset the view.\n  for (const handlerOp of op.handlerOps) {\n    if (handlerOp.kind === OpKind.Statement && handlerOp.statement instanceof ReturnStatement) {\n      handlerOp.statement.value = new ResetViewExpr(handlerOp.statement.value);\n    }\n  }\n}\n\n/**\n * Assign data slots for all operations which implement `ConsumesSlotOpTrait`, and propagate the\n * assigned data slots of those operations to any expressions which reference them via\n * `UsesSlotIndexTrait`.\n *\n * This phase is also responsible for counting the number of slots used for each view (its `decls`)\n * and propagating that number into the `Template` operations which declare embedded views.\n */\nfunction allocateSlots(job) {\n  // Map of all declarations in all views within the component which require an assigned slot index.\n  // This map needs to be global (across all views within the component) since it's possible to\n  // reference a slot from one view from an expression within another (e.g. local references work\n  // this way).\n  const slotMap = new Map();\n  // Process all views in the component and assign slot indexes.\n  for (const unit of job.units) {\n    // Slot indices start at 0 for each view (and are not unique between views).\n    let slotCount = 0;\n    for (const op of unit.create) {\n      // Only consider declarations which consume data slots.\n      if (!hasConsumesSlotTrait(op)) {\n        continue;\n      }\n      // Assign slots to this declaration starting at the current `slotCount`.\n      op.handle.slot = slotCount;\n      // And track its assigned slot in the `slotMap`.\n      slotMap.set(op.xref, op.handle.slot);\n      // Each declaration may use more than 1 slot, so increment `slotCount` to reserve the number\n      // of slots required.\n      slotCount += op.numSlotsUsed;\n    }\n    // Record the total number of slots used on the view itself. This will later be propagated into\n    // `ir.TemplateOp`s which declare those views (except for the root view).\n    unit.decls = slotCount;\n  }\n  // After slot assignment, `slotMap` now contains slot assignments for every declaration in the\n  // whole template, across all views. Next, look for expressions which implement\n  // `UsesSlotIndexExprTrait` and propagate the assigned slot indexes into them.\n  // Additionally, this second scan allows us to find `ir.TemplateOp`s which declare views and\n  // propagate the number of slots used for each view into the operation which declares it.\n  for (const unit of job.units) {\n    for (const op of unit.ops()) {\n      if (op.kind === OpKind.Template || op.kind === OpKind.RepeaterCreate) {\n        // Record the number of slots used by the view this `ir.TemplateOp` declares in the\n        // operation itself, so it can be emitted later.\n        const childView = job.views.get(op.xref);\n        op.decls = childView.decls;\n        // TODO: currently we handle the decls for the RepeaterCreate empty template in the reify\n        // phase. We should handle that here instead.\n      }\n    }\n  }\n}\n\n/**\n * Transforms special-case bindings with 'style' or 'class' in their names. Must run before the\n * main binding specialization pass.\n */\nfunction specializeStyleBindings(job) {\n  for (const unit of job.units) {\n    for (const op of unit.update) {\n      if (op.kind !== OpKind.Binding) {\n        continue;\n      }\n      switch (op.bindingKind) {\n        case BindingKind.ClassName:\n          if (op.expression instanceof Interpolation) {\n            throw new Error(`Unexpected interpolation in ClassName binding`);\n          }\n          OpList.replace(op, createClassPropOp(op.target, op.name, op.expression, op.sourceSpan));\n          break;\n        case BindingKind.StyleProperty:\n          OpList.replace(op, createStylePropOp(op.target, op.name, op.expression, op.unit, op.sourceSpan));\n          break;\n        case BindingKind.Property:\n        case BindingKind.Template:\n          if (op.name === 'style') {\n            OpList.replace(op, createStyleMapOp(op.target, op.expression, op.sourceSpan));\n          } else if (op.name === 'class') {\n            OpList.replace(op, createClassMapOp(op.target, op.expression, op.sourceSpan));\n          }\n          break;\n      }\n    }\n  }\n}\n\n/**\n * Find all assignments and usages of temporary variables, which are linked to each other with cross\n * references. Generate names for each cross-reference, and add a `DeclareVarStmt` to initialize\n * them at the beginning of the update block.\n *\n * TODO: Sometimes, it will be possible to reuse names across different subexpressions. For example,\n * in the double keyed read `a?.[f()]?.[f()]`, the two function calls have non-overlapping scopes.\n * Implement an algorithm for reuse.\n */\nfunction generateTemporaryVariables(job) {\n  for (const unit of job.units) {\n    unit.create.prepend(generateTemporaries(unit.create));\n    unit.update.prepend(generateTemporaries(unit.update));\n  }\n}\nfunction generateTemporaries(ops) {\n  let opCount = 0;\n  let generatedStatements = [];\n  // For each op, search for any variables that are assigned or read. For each variable, generate a\n  // name and produce a `DeclareVarStmt` to the beginning of the block.\n  for (const op of ops) {\n    // Identify the final time each temp var is read.\n    const finalReads = new Map();\n    visitExpressionsInOp(op, (expr, flag) => {\n      if (flag & VisitorContextFlag.InChildOperation) {\n        return;\n      }\n      if (expr instanceof ReadTemporaryExpr) {\n        finalReads.set(expr.xref, expr);\n      }\n    });\n    // Name the temp vars, accounting for the fact that a name can be reused after it has been\n    // read for the final time.\n    let count = 0;\n    const assigned = new Set();\n    const released = new Set();\n    const defs = new Map();\n    visitExpressionsInOp(op, (expr, flag) => {\n      if (flag & VisitorContextFlag.InChildOperation) {\n        return;\n      }\n      if (expr instanceof AssignTemporaryExpr) {\n        if (!assigned.has(expr.xref)) {\n          assigned.add(expr.xref);\n          // TODO: Exactly replicate the naming scheme used by `TemplateDefinitionBuilder`.\n          // It seems to rely on an expression index instead of an op index.\n          defs.set(expr.xref, `tmp_${opCount}_${count++}`);\n        }\n        assignName(defs, expr);\n      } else if (expr instanceof ReadTemporaryExpr) {\n        if (finalReads.get(expr.xref) === expr) {\n          released.add(expr.xref);\n          count--;\n        }\n        assignName(defs, expr);\n      }\n    });\n    // Add declarations for the temp vars.\n    generatedStatements.push(...Array.from(new Set(defs.values())).map(name => createStatementOp(new DeclareVarStmt(name))));\n    opCount++;\n    if (op.kind === OpKind.Listener || op.kind === OpKind.TwoWayListener) {\n      op.handlerOps.prepend(generateTemporaries(op.handlerOps));\n    }\n  }\n  return generatedStatements;\n}\n/**\n * Assigns a name to the temporary variable in the given temporary variable expression.\n */\nfunction assignName(names, expr) {\n  const name = names.get(expr.xref);\n  if (name === undefined) {\n    throw new Error(`Found xref with unassigned name: ${expr.xref}`);\n  }\n  expr.name = name;\n}\n\n/**\n * Generate track functions that need to be extracted to the constant pool. This entails wrapping\n * them in an arrow (or traditional) function, replacing context reads with `this.`, and storing\n * them in the constant pool.\n *\n * Note that, if a track function was previously optimized, it will not need to be extracted, and\n * this phase is a no-op.\n */\nfunction generateTrackFns(job) {\n  for (const unit of job.units) {\n    for (const op of unit.create) {\n      if (op.kind !== OpKind.RepeaterCreate) {\n        continue;\n      }\n      if (op.trackByFn !== null) {\n        // The final track function was already set, probably because it was optimized.\n        continue;\n      }\n      // Find all component context reads.\n      let usesComponentContext = false;\n      op.track = transformExpressionsInExpression(op.track, expr => {\n        if (expr instanceof PipeBindingExpr || expr instanceof PipeBindingVariadicExpr) {\n          throw new Error(`Illegal State: Pipes are not allowed in this context`);\n        }\n        if (expr instanceof TrackContextExpr) {\n          usesComponentContext = true;\n          return variable('this');\n        }\n        return expr;\n      }, VisitorContextFlag.None);\n      let fn;\n      const fnParams = [new FnParam('$index'), new FnParam('$item')];\n      if (usesComponentContext) {\n        fn = new FunctionExpr(fnParams, [new ReturnStatement(op.track)]);\n      } else {\n        fn = arrowFn(fnParams, op.track);\n      }\n      op.trackByFn = job.pool.getSharedFunctionReference(fn, '_forTrack');\n    }\n  }\n}\n\n/**\n * `track` functions in `for` repeaters can sometimes be \"optimized,\" i.e. transformed into inline\n * expressions, in lieu of an external function call. For example, tracking by `$index` can be be\n * optimized into an inline `trackByIndex` reference. This phase checks track expressions for\n * optimizable cases.\n */\nfunction optimizeTrackFns(job) {\n  for (const unit of job.units) {\n    for (const op of unit.create) {\n      if (op.kind !== OpKind.RepeaterCreate) {\n        continue;\n      }\n      if (op.track instanceof ReadVarExpr && op.track.name === '$index') {\n        // Top-level access of `$index` uses the built in `repeaterTrackByIndex`.\n        op.trackByFn = importExpr(Identifiers.repeaterTrackByIndex);\n      } else if (op.track instanceof ReadVarExpr && op.track.name === '$item') {\n        // Top-level access of the item uses the built in `repeaterTrackByIdentity`.\n        op.trackByFn = importExpr(Identifiers.repeaterTrackByIdentity);\n      } else if (isTrackByFunctionCall(job.root.xref, op.track)) {\n        // Mark the function as using the component instance to play it safe\n        // since the method might be using `this` internally (see #53628).\n        op.usesComponentInstance = true;\n        // Top-level method calls in the form of `fn($index, item)` can be passed in directly.\n        if (op.track.receiver.receiver.view === unit.xref) {\n          // TODO: this may be wrong\n          op.trackByFn = op.track.receiver;\n        } else {\n          // This is a plain method call, but not in the component's root view.\n          // We need to get the component instance, and then call the method on it.\n          op.trackByFn = importExpr(Identifiers.componentInstance).callFn([]).prop(op.track.receiver.name);\n          // Because the context is not avaiable (without a special function), we don't want to\n          // try to resolve it later. Let's get rid of it by overwriting the original track\n          // expression (which won't be used anyway).\n          op.track = op.trackByFn;\n        }\n      } else {\n        // The track function could not be optimized.\n        // Replace context reads with a special IR expression, since context reads in a track\n        // function are emitted specially.\n        op.track = transformExpressionsInExpression(op.track, expr => {\n          if (expr instanceof ContextExpr) {\n            op.usesComponentInstance = true;\n            return new TrackContextExpr(expr.view);\n          }\n          return expr;\n        }, VisitorContextFlag.None);\n      }\n    }\n  }\n}\nfunction isTrackByFunctionCall(rootView, expr) {\n  if (!(expr instanceof InvokeFunctionExpr) || expr.args.length === 0 || expr.args.length > 2) {\n    return false;\n  }\n  if (!(expr.receiver instanceof ReadPropExpr && expr.receiver.receiver instanceof ContextExpr) || expr.receiver.receiver.view !== rootView) {\n    return false;\n  }\n  const [arg0, arg1] = expr.args;\n  if (!(arg0 instanceof ReadVarExpr) || arg0.name !== '$index') {\n    return false;\n  } else if (expr.args.length === 1) {\n    return true;\n  }\n  if (!(arg1 instanceof ReadVarExpr) || arg1.name !== '$item') {\n    return false;\n  }\n  return true;\n}\n\n/**\n * Inside the `track` expression on a `for` repeater, the `$index` and `$item` variables are\n * ambiently available. In this phase, we find those variable usages, and replace them with the\n * appropriate output read.\n */\nfunction generateTrackVariables(job) {\n  for (const unit of job.units) {\n    for (const op of unit.create) {\n      if (op.kind !== OpKind.RepeaterCreate) {\n        continue;\n      }\n      op.track = transformExpressionsInExpression(op.track, expr => {\n        if (expr instanceof LexicalReadExpr) {\n          if (op.varNames.$index.has(expr.name)) {\n            return variable('$index');\n          } else if (expr.name === op.varNames.$implicit) {\n            return variable('$item');\n          }\n          // TODO: handle prohibited context variables (emit as globals?)\n        }\n        return expr;\n      }, VisitorContextFlag.None);\n    }\n  }\n}\n\n/**\n * Counts the number of variable slots used within each view, and stores that on the view itself, as\n * well as propagates it to the `ir.TemplateOp` for embedded views.\n */\nfunction countVariables(job) {\n  // First, count the vars used in each view, and update the view-level counter.\n  for (const unit of job.units) {\n    let varCount = 0;\n    // Count variables on top-level ops first. Don't explore nested expressions just yet.\n    for (const op of unit.ops()) {\n      if (hasConsumesVarsTrait(op)) {\n        varCount += varsUsedByOp(op);\n      }\n    }\n    // Count variables on expressions inside ops. We do this later because some of these expressions\n    // might be conditional (e.g. `pipeBinding` inside of a ternary), and we don't want to interfere\n    // with indices for top-level binding slots (e.g. `property`).\n    for (const op of unit.ops()) {\n      visitExpressionsInOp(op, expr => {\n        if (!isIrExpression(expr)) {\n          return;\n        }\n        // TemplateDefinitionBuilder assigns variable offsets for everything but pure functions\n        // first, and then assigns offsets to pure functions lazily. We emulate that behavior by\n        // assigning offsets in two passes instead of one, only in compatibility mode.\n        if (job.compatibility === CompatibilityMode.TemplateDefinitionBuilder && expr instanceof PureFunctionExpr) {\n          return;\n        }\n        // Some expressions require knowledge of the number of variable slots consumed.\n        if (hasUsesVarOffsetTrait(expr)) {\n          expr.varOffset = varCount;\n        }\n        if (hasConsumesVarsTrait(expr)) {\n          varCount += varsUsedByIrExpression(expr);\n        }\n      });\n    }\n    // Compatibility mode pass for pure function offsets (as explained above).\n    if (job.compatibility === CompatibilityMode.TemplateDefinitionBuilder) {\n      for (const op of unit.ops()) {\n        visitExpressionsInOp(op, expr => {\n          if (!isIrExpression(expr) || !(expr instanceof PureFunctionExpr)) {\n            return;\n          }\n          // Some expressions require knowledge of the number of variable slots consumed.\n          if (hasUsesVarOffsetTrait(expr)) {\n            expr.varOffset = varCount;\n          }\n          if (hasConsumesVarsTrait(expr)) {\n            varCount += varsUsedByIrExpression(expr);\n          }\n        });\n      }\n    }\n    unit.vars = varCount;\n  }\n  if (job instanceof ComponentCompilationJob) {\n    // Add var counts for each view to the `ir.TemplateOp` which declares that view (if the view is\n    // an embedded view).\n    for (const unit of job.units) {\n      for (const op of unit.create) {\n        if (op.kind !== OpKind.Template && op.kind !== OpKind.RepeaterCreate) {\n          continue;\n        }\n        const childView = job.views.get(op.xref);\n        op.vars = childView.vars;\n        // TODO: currently we handle the vars for the RepeaterCreate empty template in the reify\n        // phase. We should handle that here instead.\n      }\n    }\n  }\n}\n/**\n * Different operations that implement `ir.UsesVarsTrait` use different numbers of variables, so\n * count the variables used by any particular `op`.\n */\nfunction varsUsedByOp(op) {\n  let slots;\n  switch (op.kind) {\n    case OpKind.Property:\n    case OpKind.HostProperty:\n    case OpKind.Attribute:\n      // All of these bindings use 1 variable slot, plus 1 slot for every interpolated expression,\n      // if any.\n      slots = 1;\n      if (op.expression instanceof Interpolation && !isSingletonInterpolation(op.expression)) {\n        slots += op.expression.expressions.length;\n      }\n      return slots;\n    case OpKind.TwoWayProperty:\n      // Two-way properties can only have expressions so they only need one variable slot.\n      return 1;\n    case OpKind.StyleProp:\n    case OpKind.ClassProp:\n    case OpKind.StyleMap:\n    case OpKind.ClassMap:\n      // Style & class bindings use 2 variable slots, plus 1 slot for every interpolated expression,\n      // if any.\n      slots = 2;\n      if (op.expression instanceof Interpolation) {\n        slots += op.expression.expressions.length;\n      }\n      return slots;\n    case OpKind.InterpolateText:\n      // `ir.InterpolateTextOp`s use a variable slot for each dynamic expression.\n      return op.interpolation.expressions.length;\n    case OpKind.I18nExpression:\n    case OpKind.Conditional:\n    case OpKind.DeferWhen:\n    case OpKind.StoreLet:\n      return 1;\n    case OpKind.RepeaterCreate:\n      // Repeaters may require an extra variable binding slot, if they have an empty view, for the\n      // empty block tracking.\n      // TODO: It's a bit odd to have a create mode instruction consume variable slots. Maybe we can\n      // find a way to use the Repeater update op instead.\n      return op.emptyView ? 1 : 0;\n    default:\n      throw new Error(`Unhandled op: ${OpKind[op.kind]}`);\n  }\n}\nfunction varsUsedByIrExpression(expr) {\n  switch (expr.kind) {\n    case ExpressionKind.PureFunctionExpr:\n      return 1 + expr.args.length;\n    case ExpressionKind.PipeBinding:\n      return 1 + expr.args.length;\n    case ExpressionKind.PipeBindingVariadic:\n      return 1 + expr.numArgs;\n    case ExpressionKind.StoreLet:\n      return 1;\n    default:\n      throw new Error(`AssertionError: unhandled ConsumesVarsTrait expression ${expr.constructor.name}`);\n  }\n}\nfunction isSingletonInterpolation(expr) {\n  if (expr.expressions.length !== 1 || expr.strings.length !== 2) {\n    return false;\n  }\n  if (expr.strings[0] !== '' || expr.strings[1] !== '') {\n    return false;\n  }\n  return true;\n}\n\n/**\n * Optimize variables declared and used in the IR.\n *\n * Variables are eagerly generated by pipeline stages for all possible values that could be\n * referenced. This stage processes the list of declared variables and all variable usages,\n * and optimizes where possible. It performs 3 main optimizations:\n *\n *   * It transforms variable declarations to side effectful expressions when the\n *     variable is not used, but its initializer has global effects which other\n *     operations rely upon.\n *   * It removes variable declarations if those variables are not referenced and\n *     either they do not have global effects, or nothing relies on them.\n *   * It inlines variable declarations when those variables are only used once\n *     and the inlining is semantically safe.\n *\n * To guarantee correctness, analysis of \"fences\" in the instruction lists is used to determine\n * which optimizations are safe to perform.\n */\nfunction optimizeVariables(job) {\n  for (const unit of job.units) {\n    inlineAlwaysInlineVariables(unit.create);\n    inlineAlwaysInlineVariables(unit.update);\n    for (const op of unit.create) {\n      if (op.kind === OpKind.Listener || op.kind === OpKind.TwoWayListener) {\n        inlineAlwaysInlineVariables(op.handlerOps);\n      }\n    }\n    optimizeVariablesInOpList(unit.create, job.compatibility);\n    optimizeVariablesInOpList(unit.update, job.compatibility);\n    for (const op of unit.create) {\n      if (op.kind === OpKind.Listener || op.kind === OpKind.TwoWayListener) {\n        optimizeVariablesInOpList(op.handlerOps, job.compatibility);\n      }\n    }\n  }\n}\n/**\n * A [fence](https://en.wikipedia.org/wiki/Memory_barrier) flag for an expression which indicates\n * how that expression can be optimized in relation to other expressions or instructions.\n *\n * `Fence`s are a bitfield, so multiple flags may be set on a single expression.\n */\nvar Fence;\n(function (Fence) {\n  /**\n   * Empty flag (no fence exists).\n   */\n  Fence[Fence[\"None\"] = 0] = \"None\";\n  /**\n   * A context read fence, meaning that the expression in question reads from the \"current view\"\n   * context of the runtime.\n   */\n  Fence[Fence[\"ViewContextRead\"] = 1] = \"ViewContextRead\";\n  /**\n   * A context write fence, meaning that the expression in question writes to the \"current view\"\n   * context of the runtime.\n   *\n   * Note that all `ContextWrite` fences are implicitly `ContextRead` fences as operations which\n   * change the view context do so based on the current one.\n   */\n  Fence[Fence[\"ViewContextWrite\"] = 2] = \"ViewContextWrite\";\n  /**\n   * Indicates that a call is required for its side-effects, even if nothing reads its result.\n   *\n   * This is also true of `ViewContextWrite` operations **if** they are followed by a\n   * `ViewContextRead`.\n   */\n  Fence[Fence[\"SideEffectful\"] = 4] = \"SideEffectful\";\n})(Fence || (Fence = {}));\nfunction inlineAlwaysInlineVariables(ops) {\n  const vars = new Map();\n  for (const op of ops) {\n    if (op.kind === OpKind.Variable && op.flags & VariableFlags.AlwaysInline) {\n      visitExpressionsInOp(op, expr => {\n        if (isIrExpression(expr) && fencesForIrExpression(expr) !== Fence.None) {\n          throw new Error(`AssertionError: A context-sensitive variable was marked AlwaysInline`);\n        }\n      });\n      vars.set(op.xref, op);\n    }\n    transformExpressionsInOp(op, expr => {\n      if (expr instanceof ReadVariableExpr && vars.has(expr.xref)) {\n        const varOp = vars.get(expr.xref);\n        // Inline by cloning, because we might inline into multiple places.\n        return varOp.initializer.clone();\n      }\n      return expr;\n    }, VisitorContextFlag.None);\n  }\n  for (const op of vars.values()) {\n    OpList.remove(op);\n  }\n}\n/**\n * Process a list of operations and optimize variables within that list.\n */\nfunction optimizeVariablesInOpList(ops, compatibility) {\n  const varDecls = new Map();\n  const varUsages = new Map();\n  // Track variables that are used outside of the immediate operation list. For example, within\n  // `ListenerOp` handler operations of listeners in the current operation list.\n  const varRemoteUsages = new Set();\n  const opMap = new Map();\n  // First, extract information about variables declared or used within the whole list.\n  for (const op of ops) {\n    if (op.kind === OpKind.Variable) {\n      if (varDecls.has(op.xref) || varUsages.has(op.xref)) {\n        throw new Error(`Should not see two declarations of the same variable: ${op.xref}`);\n      }\n      varDecls.set(op.xref, op);\n      varUsages.set(op.xref, 0);\n    }\n    opMap.set(op, collectOpInfo(op));\n    countVariableUsages(op, varUsages, varRemoteUsages);\n  }\n  // The next step is to remove any variable declarations for variables that aren't used. The\n  // variable initializer expressions may be side-effectful, so they may need to be retained as\n  // expression statements.\n  // Track whether we've seen an operation which reads from the view context yet. This is used to\n  // determine whether a write to the view context in a variable initializer can be observed.\n  let contextIsUsed = false;\n  // Note that iteration through the list happens in reverse, which guarantees that we'll process\n  // all reads of a variable prior to processing its declaration.\n  for (const op of ops.reversed()) {\n    const opInfo = opMap.get(op);\n    if (op.kind === OpKind.Variable && varUsages.get(op.xref) === 0) {\n      // This variable is unused and can be removed. We might need to keep the initializer around,\n      // though, if something depends on it running.\n      if (contextIsUsed && opInfo.fences & Fence.ViewContextWrite || opInfo.fences & Fence.SideEffectful) {\n        // This variable initializer has a side effect which must be retained. Either:\n        //  * it writes to the view context, and we know there is a future operation which depends\n        //    on that write, or\n        //  * it's an operation which is inherently side-effectful.\n        // We can't remove the initializer, but we can remove the variable declaration itself and\n        // replace it with a side-effectful statement.\n        const stmtOp = createStatementOp(op.initializer.toStmt());\n        opMap.set(stmtOp, opInfo);\n        OpList.replace(op, stmtOp);\n      } else {\n        // It's safe to delete this entire variable declaration as nothing depends on it, even\n        // side-effectfully. Note that doing this might make other variables unused. Since we're\n        // iterating in reverse order, we should always be processing usages before declarations\n        // and therefore by the time we get to a declaration, all removable usages will have been\n        // removed.\n        uncountVariableUsages(op, varUsages);\n        OpList.remove(op);\n      }\n      opMap.delete(op);\n      varDecls.delete(op.xref);\n      varUsages.delete(op.xref);\n      continue;\n    }\n    // Does this operation depend on the view context?\n    if (opInfo.fences & Fence.ViewContextRead) {\n      contextIsUsed = true;\n    }\n  }\n  // Next, inline any remaining variables with exactly one usage.\n  const toInline = [];\n  for (const [id, count] of varUsages) {\n    const decl = varDecls.get(id);\n    // We can inline variables that:\n    //  - are used exactly once, and\n    //  - are not used remotely\n    // OR\n    //  - are marked for always inlining\n    const isAlwaysInline = !!(decl.flags & VariableFlags.AlwaysInline);\n    if (count !== 1 || isAlwaysInline) {\n      // We can't inline this variable as it's used more than once.\n      continue;\n    }\n    if (varRemoteUsages.has(id)) {\n      // This variable is used once, but across an operation boundary, so it can't be inlined.\n      continue;\n    }\n    toInline.push(id);\n  }\n  let candidate;\n  while (candidate = toInline.pop()) {\n    // We will attempt to inline this variable. If inlining fails (due to fences for example),\n    // no future operation will make inlining legal.\n    const decl = varDecls.get(candidate);\n    const varInfo = opMap.get(decl);\n    const isAlwaysInline = !!(decl.flags & VariableFlags.AlwaysInline);\n    if (isAlwaysInline) {\n      throw new Error(`AssertionError: Found an 'AlwaysInline' variable after the always inlining pass.`);\n    }\n    // Scan operations following the variable declaration and look for the point where that variable\n    // is used. There should only be one usage given the precondition above.\n    for (let targetOp = decl.next; targetOp.kind !== OpKind.ListEnd; targetOp = targetOp.next) {\n      const opInfo = opMap.get(targetOp);\n      // Is the variable used in this operation?\n      if (opInfo.variablesUsed.has(candidate)) {\n        if (compatibility === CompatibilityMode.TemplateDefinitionBuilder && !allowConservativeInlining(decl, targetOp)) {\n          // We're in conservative mode, and this variable is not eligible for inlining into the\n          // target operation in this mode.\n          break;\n        }\n        // Yes, try to inline it. Inlining may not be successful if fences in this operation before\n        // the variable's usage cannot be safely crossed.\n        if (tryInlineVariableInitializer(candidate, decl.initializer, targetOp, varInfo.fences)) {\n          // Inlining was successful! Update the tracking structures to reflect the inlined\n          // variable.\n          opInfo.variablesUsed.delete(candidate);\n          // Add all variables used in the variable's initializer to its new usage site.\n          for (const id of varInfo.variablesUsed) {\n            opInfo.variablesUsed.add(id);\n          }\n          // Merge fences in the variable's initializer into its new usage site.\n          opInfo.fences |= varInfo.fences;\n          // Delete tracking info related to the declaration.\n          varDecls.delete(candidate);\n          varUsages.delete(candidate);\n          opMap.delete(decl);\n          // And finally, delete the original declaration from the operation list.\n          OpList.remove(decl);\n        }\n        // Whether inlining succeeded or failed, we're done processing this variable.\n        break;\n      }\n      // If the variable is not used in this operation, then we'd need to inline across it. Check if\n      // that's safe to do.\n      if (!safeToInlinePastFences(opInfo.fences, varInfo.fences)) {\n        // We can't safely inline this variable beyond this operation, so don't proceed with\n        // inlining this variable.\n        break;\n      }\n    }\n  }\n}\n/**\n * Given an `ir.Expression`, returns the `Fence` flags for that expression type.\n */\nfunction fencesForIrExpression(expr) {\n  switch (expr.kind) {\n    case ExpressionKind.NextContext:\n      return Fence.ViewContextRead | Fence.ViewContextWrite;\n    case ExpressionKind.RestoreView:\n      return Fence.ViewContextRead | Fence.ViewContextWrite | Fence.SideEffectful;\n    case ExpressionKind.StoreLet:\n      return Fence.SideEffectful;\n    case ExpressionKind.Reference:\n    case ExpressionKind.ContextLetReference:\n      return Fence.ViewContextRead;\n    default:\n      return Fence.None;\n  }\n}\n/**\n * Build the `OpInfo` structure for the given `op`. This performs two operations:\n *\n *  * It tracks which variables are used in the operation's expressions.\n *  * It rolls up fence flags for expressions within the operation.\n */\nfunction collectOpInfo(op) {\n  let fences = Fence.None;\n  const variablesUsed = new Set();\n  visitExpressionsInOp(op, expr => {\n    if (!isIrExpression(expr)) {\n      return;\n    }\n    switch (expr.kind) {\n      case ExpressionKind.ReadVariable:\n        variablesUsed.add(expr.xref);\n        break;\n      default:\n        fences |= fencesForIrExpression(expr);\n    }\n  });\n  return {\n    fences,\n    variablesUsed\n  };\n}\n/**\n * Count the number of usages of each variable, being careful to track whether those usages are\n * local or remote.\n */\nfunction countVariableUsages(op, varUsages, varRemoteUsage) {\n  visitExpressionsInOp(op, (expr, flags) => {\n    if (!isIrExpression(expr)) {\n      return;\n    }\n    if (expr.kind !== ExpressionKind.ReadVariable) {\n      return;\n    }\n    const count = varUsages.get(expr.xref);\n    if (count === undefined) {\n      // This variable is declared outside the current scope of optimization.\n      return;\n    }\n    varUsages.set(expr.xref, count + 1);\n    if (flags & VisitorContextFlag.InChildOperation) {\n      varRemoteUsage.add(expr.xref);\n    }\n  });\n}\n/**\n * Remove usages of a variable in `op` from the `varUsages` tracking.\n */\nfunction uncountVariableUsages(op, varUsages) {\n  visitExpressionsInOp(op, expr => {\n    if (!isIrExpression(expr)) {\n      return;\n    }\n    if (expr.kind !== ExpressionKind.ReadVariable) {\n      return;\n    }\n    const count = varUsages.get(expr.xref);\n    if (count === undefined) {\n      // This variable is declared outside the current scope of optimization.\n      return;\n    } else if (count === 0) {\n      throw new Error(`Inaccurate variable count: ${expr.xref} - found another read but count is already 0`);\n    }\n    varUsages.set(expr.xref, count - 1);\n  });\n}\n/**\n * Checks whether it's safe to inline a variable across a particular operation.\n *\n * @param fences the fences of the operation which the inlining will cross\n * @param declFences the fences of the variable being inlined.\n */\nfunction safeToInlinePastFences(fences, declFences) {\n  if (fences & Fence.ViewContextWrite) {\n    // It's not safe to inline context reads across context writes.\n    if (declFences & Fence.ViewContextRead) {\n      return false;\n    }\n  } else if (fences & Fence.ViewContextRead) {\n    // It's not safe to inline context writes across context reads.\n    if (declFences & Fence.ViewContextWrite) {\n      return false;\n    }\n  }\n  return true;\n}\n/**\n * Attempt to inline the initializer of a variable into a target operation's expressions.\n *\n * This may or may not be safe to do. For example, the variable could be read following the\n * execution of an expression with fences that don't permit the variable to be inlined across them.\n */\nfunction tryInlineVariableInitializer(id, initializer, target, declFences) {\n  // We use `ir.transformExpressionsInOp` to walk the expressions and inline the variable if\n  // possible. Since this operation is callback-based, once inlining succeeds or fails we can't\n  // \"stop\" the expression processing, and have to keep track of whether inlining has succeeded or\n  // is no longer allowed.\n  let inlined = false;\n  let inliningAllowed = true;\n  transformExpressionsInOp(target, (expr, flags) => {\n    if (!isIrExpression(expr)) {\n      return expr;\n    }\n    if (inlined || !inliningAllowed) {\n      // Either the inlining has already succeeded, or we've passed a fence that disallows inlining\n      // at this point, so don't try.\n      return expr;\n    } else if (flags & VisitorContextFlag.InChildOperation && declFences & Fence.ViewContextRead) {\n      // We cannot inline variables that are sensitive to the current context across operation\n      // boundaries.\n      return expr;\n    }\n    switch (expr.kind) {\n      case ExpressionKind.ReadVariable:\n        if (expr.xref === id) {\n          // This is the usage site of the variable. Since nothing has disallowed inlining, it's\n          // safe to inline the initializer here.\n          inlined = true;\n          return initializer;\n        }\n        break;\n      default:\n        // For other types of `ir.Expression`s, whether inlining is allowed depends on their fences.\n        const exprFences = fencesForIrExpression(expr);\n        inliningAllowed = inliningAllowed && safeToInlinePastFences(exprFences, declFences);\n        break;\n    }\n    return expr;\n  }, VisitorContextFlag.None);\n  return inlined;\n}\n/**\n * Determines whether inlining of `decl` should be allowed in \"conservative\" mode.\n *\n * In conservative mode, inlining behavior is limited to those operations which the\n * `TemplateDefinitionBuilder` supported, with the goal of producing equivalent output.\n */\nfunction allowConservativeInlining(decl, target) {\n  // TODO(alxhub): understand exactly how TemplateDefinitionBuilder approaches inlining, and record\n  // that behavior here.\n  switch (decl.variable.kind) {\n    case SemanticVariableKind.Identifier:\n      if (decl.initializer instanceof ReadVarExpr && decl.initializer.name === 'ctx') {\n        // Although TemplateDefinitionBuilder is cautious about inlining, we still want to do so\n        // when the variable is the context, to imitate its behavior with aliases in control flow\n        // blocks. This quirky behavior will become dead code once compatibility mode is no longer\n        // supported.\n        return true;\n      }\n      return false;\n    case SemanticVariableKind.Context:\n      // Context can only be inlined into other variables.\n      return target.kind === OpKind.Variable;\n    default:\n      return true;\n  }\n}\n\n/**\n * Wraps ICUs that do not already belong to an i18n block in a new i18n block.\n */\nfunction wrapI18nIcus(job) {\n  for (const unit of job.units) {\n    let currentI18nOp = null;\n    let addedI18nId = null;\n    for (const op of unit.create) {\n      switch (op.kind) {\n        case OpKind.I18nStart:\n          currentI18nOp = op;\n          break;\n        case OpKind.I18nEnd:\n          currentI18nOp = null;\n          break;\n        case OpKind.IcuStart:\n          if (currentI18nOp === null) {\n            addedI18nId = job.allocateXrefId();\n            // ICU i18n start/end ops should not receive source spans.\n            OpList.insertBefore(createI18nStartOp(addedI18nId, op.message, undefined, null), op);\n          }\n          break;\n        case OpKind.IcuEnd:\n          if (addedI18nId !== null) {\n            OpList.insertAfter(createI18nEndOp(addedI18nId, null), op);\n            addedI18nId = null;\n          }\n          break;\n      }\n    }\n  }\n}\n\n/*!\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Removes any `storeLet` calls that aren't referenced outside of the current view.\n */\nfunction optimizeStoreLet(job) {\n  const letUsedExternally = new Set();\n  // Since `@let` declarations can be referenced in child views, both in\n  // the creation block (via listeners) and in the update block, we have\n  // to look through all the ops to find the references.\n  for (const unit of job.units) {\n    for (const op of unit.ops()) {\n      visitExpressionsInOp(op, expr => {\n        if (expr instanceof ContextLetReferenceExpr) {\n          letUsedExternally.add(expr.target);\n        }\n      });\n    }\n  }\n  // TODO(crisbeto): potentially remove the unused calls completely, pending discussion.\n  for (const unit of job.units) {\n    for (const op of unit.update) {\n      transformExpressionsInOp(op, expression => expression instanceof StoreLetExpr && !letUsedExternally.has(expression.target) ? expression.value : expression, VisitorContextFlag.None);\n    }\n  }\n}\n\n/**\n * It's not allowed to access a `@let` declaration before it has been defined. This is enforced\n * already via template type checking, however it can trip some of the assertions in the pipeline.\n * E.g. the naming phase can fail because we resolved the variable here, but the variable doesn't\n * exist anymore because the optimization phase removed it since it's invalid. To avoid surfacing\n * confusing errors to users in the case where template type checking isn't running (e.g. in JIT\n * mode) this phase detects illegal forward references and replaces them with `undefined`.\n * Eventually users will see the proper error from the template type checker.\n */\nfunction removeIllegalLetReferences(job) {\n  for (const unit of job.units) {\n    for (const op of unit.update) {\n      if (op.kind !== OpKind.Variable || op.variable.kind !== SemanticVariableKind.Identifier || !(op.initializer instanceof StoreLetExpr)) {\n        continue;\n      }\n      const name = op.variable.identifier;\n      let current = op;\n      while (current && current.kind !== OpKind.ListEnd) {\n        transformExpressionsInOp(current, expr => expr instanceof LexicalReadExpr && expr.name === name ? literal(undefined) : expr, VisitorContextFlag.None);\n        current = current.prev;\n      }\n    }\n  }\n}\n\n/**\n * Replaces the `storeLet` ops with variables that can be\n * used to reference the value within the same view.\n */\nfunction generateLocalLetReferences(job) {\n  for (const unit of job.units) {\n    for (const op of unit.update) {\n      if (op.kind !== OpKind.StoreLet) {\n        continue;\n      }\n      const variable = {\n        kind: SemanticVariableKind.Identifier,\n        name: null,\n        identifier: op.declaredName,\n        local: true\n      };\n      OpList.replace(op, createVariableOp(job.allocateXrefId(), variable, new StoreLetExpr(op.target, op.value, op.sourceSpan), VariableFlags.None));\n    }\n  }\n}\n\n/**\n *\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nconst phases = [{\n  kind: CompilationJobKind.Tmpl,\n  fn: removeContentSelectors\n}, {\n  kind: CompilationJobKind.Host,\n  fn: parseHostStyleProperties\n}, {\n  kind: CompilationJobKind.Tmpl,\n  fn: emitNamespaceChanges\n}, {\n  kind: CompilationJobKind.Tmpl,\n  fn: propagateI18nBlocks\n}, {\n  kind: CompilationJobKind.Tmpl,\n  fn: wrapI18nIcus\n}, {\n  kind: CompilationJobKind.Both,\n  fn: deduplicateTextBindings\n}, {\n  kind: CompilationJobKind.Both,\n  fn: specializeStyleBindings\n}, {\n  kind: CompilationJobKind.Both,\n  fn: specializeBindings\n}, {\n  kind: CompilationJobKind.Both,\n  fn: extractAttributes\n}, {\n  kind: CompilationJobKind.Tmpl,\n  fn: createI18nContexts\n}, {\n  kind: CompilationJobKind.Both,\n  fn: parseExtractedStyles\n}, {\n  kind: CompilationJobKind.Tmpl,\n  fn: removeEmptyBindings\n}, {\n  kind: CompilationJobKind.Both,\n  fn: collapseSingletonInterpolations\n}, {\n  kind: CompilationJobKind.Both,\n  fn: orderOps\n}, {\n  kind: CompilationJobKind.Tmpl,\n  fn: generateConditionalExpressions\n}, {\n  kind: CompilationJobKind.Tmpl,\n  fn: createPipes\n}, {\n  kind: CompilationJobKind.Tmpl,\n  fn: configureDeferInstructions\n}, {\n  kind: CompilationJobKind.Tmpl,\n  fn: convertI18nText\n}, {\n  kind: CompilationJobKind.Tmpl,\n  fn: convertI18nBindings\n}, {\n  kind: CompilationJobKind.Tmpl,\n  fn: removeUnusedI18nAttributesOps\n}, {\n  kind: CompilationJobKind.Tmpl,\n  fn: assignI18nSlotDependencies\n}, {\n  kind: CompilationJobKind.Tmpl,\n  fn: applyI18nExpressions\n}, {\n  kind: CompilationJobKind.Tmpl,\n  fn: createVariadicPipes\n}, {\n  kind: CompilationJobKind.Both,\n  fn: generatePureLiteralStructures\n}, {\n  kind: CompilationJobKind.Tmpl,\n  fn: generateProjectionDefs\n}, {\n  kind: CompilationJobKind.Tmpl,\n  fn: generateLocalLetReferences\n}, {\n  kind: CompilationJobKind.Tmpl,\n  fn: generateVariables\n}, {\n  kind: CompilationJobKind.Tmpl,\n  fn: saveAndRestoreView\n}, {\n  kind: CompilationJobKind.Both,\n  fn: deleteAnyCasts\n}, {\n  kind: CompilationJobKind.Both,\n  fn: resolveDollarEvent\n}, {\n  kind: CompilationJobKind.Tmpl,\n  fn: generateTrackVariables\n}, {\n  kind: CompilationJobKind.Tmpl,\n  fn: removeIllegalLetReferences\n}, {\n  kind: CompilationJobKind.Both,\n  fn: resolveNames\n}, {\n  kind: CompilationJobKind.Tmpl,\n  fn: resolveDeferTargetNames\n}, {\n  kind: CompilationJobKind.Tmpl,\n  fn: transformTwoWayBindingSet\n}, {\n  kind: CompilationJobKind.Tmpl,\n  fn: optimizeTrackFns\n}, {\n  kind: CompilationJobKind.Both,\n  fn: resolveContexts\n}, {\n  kind: CompilationJobKind.Both,\n  fn: resolveSanitizers\n}, {\n  kind: CompilationJobKind.Tmpl,\n  fn: liftLocalRefs\n}, {\n  kind: CompilationJobKind.Both,\n  fn: generateNullishCoalesceExpressions\n}, {\n  kind: CompilationJobKind.Both,\n  fn: expandSafeReads\n}, {\n  kind: CompilationJobKind.Both,\n  fn: generateTemporaryVariables\n}, {\n  kind: CompilationJobKind.Both,\n  fn: optimizeVariables\n}, {\n  kind: CompilationJobKind.Both,\n  fn: optimizeStoreLet\n}, {\n  kind: CompilationJobKind.Tmpl,\n  fn: allocateSlots\n}, {\n  kind: CompilationJobKind.Tmpl,\n  fn: resolveI18nElementPlaceholders\n}, {\n  kind: CompilationJobKind.Tmpl,\n  fn: resolveI18nExpressionPlaceholders\n}, {\n  kind: CompilationJobKind.Tmpl,\n  fn: extractI18nMessages\n}, {\n  kind: CompilationJobKind.Tmpl,\n  fn: generateTrackFns\n}, {\n  kind: CompilationJobKind.Tmpl,\n  fn: collectI18nConsts\n}, {\n  kind: CompilationJobKind.Tmpl,\n  fn: collectConstExpressions\n}, {\n  kind: CompilationJobKind.Both,\n  fn: collectElementConsts\n}, {\n  kind: CompilationJobKind.Tmpl,\n  fn: removeI18nContexts\n}, {\n  kind: CompilationJobKind.Both,\n  fn: countVariables\n}, {\n  kind: CompilationJobKind.Tmpl,\n  fn: generateAdvance\n}, {\n  kind: CompilationJobKind.Both,\n  fn: nameFunctionsAndVariables\n}, {\n  kind: CompilationJobKind.Tmpl,\n  fn: resolveDeferDepsFns\n}, {\n  kind: CompilationJobKind.Tmpl,\n  fn: mergeNextContextExpressions\n}, {\n  kind: CompilationJobKind.Tmpl,\n  fn: generateNgContainerOps\n}, {\n  kind: CompilationJobKind.Tmpl,\n  fn: collapseEmptyInstructions\n}, {\n  kind: CompilationJobKind.Tmpl,\n  fn: disableBindings$1\n}, {\n  kind: CompilationJobKind.Both,\n  fn: extractPureFunctions\n}, {\n  kind: CompilationJobKind.Both,\n  fn: reify\n}, {\n  kind: CompilationJobKind.Both,\n  fn: chain\n}];\n/**\n * Run all transformation phases in the correct order against a compilation job. After this\n * processing, the compilation should be in a state where it can be emitted.\n */\nfunction transform(job, kind) {\n  for (const phase of phases) {\n    if (phase.kind === kind || phase.kind === CompilationJobKind.Both) {\n      // The type of `Phase` above ensures it is impossible to call a phase that doesn't support the\n      // job kind.\n      phase.fn(job);\n    }\n  }\n}\n/**\n * Compile all views in the given `ComponentCompilation` into the final template function, which may\n * reference constants defined in a `ConstantPool`.\n */\nfunction emitTemplateFn(tpl, pool) {\n  const rootFn = emitView(tpl.root);\n  emitChildViews(tpl.root, pool);\n  return rootFn;\n}\nfunction emitChildViews(parent, pool) {\n  for (const unit of parent.job.units) {\n    if (unit.parent !== parent.xref) {\n      continue;\n    }\n    // Child views are emitted depth-first.\n    emitChildViews(unit, pool);\n    const viewFn = emitView(unit);\n    pool.statements.push(viewFn.toDeclStmt(viewFn.name));\n  }\n}\n/**\n * Emit a template function for an individual `ViewCompilation` (which may be either the root view\n * or an embedded view).\n */\nfunction emitView(view) {\n  if (view.fnName === null) {\n    throw new Error(`AssertionError: view ${view.xref} is unnamed`);\n  }\n  const createStatements = [];\n  for (const op of view.create) {\n    if (op.kind !== OpKind.Statement) {\n      throw new Error(`AssertionError: expected all create ops to have been compiled, but got ${OpKind[op.kind]}`);\n    }\n    createStatements.push(op.statement);\n  }\n  const updateStatements = [];\n  for (const op of view.update) {\n    if (op.kind !== OpKind.Statement) {\n      throw new Error(`AssertionError: expected all update ops to have been compiled, but got ${OpKind[op.kind]}`);\n    }\n    updateStatements.push(op.statement);\n  }\n  const createCond = maybeGenerateRfBlock(1, createStatements);\n  const updateCond = maybeGenerateRfBlock(2, updateStatements);\n  return fn([new FnParam('rf'), new FnParam('ctx')], [...createCond, ...updateCond], /* type */undefined, /* sourceSpan */undefined, view.fnName);\n}\nfunction maybeGenerateRfBlock(flag, statements) {\n  if (statements.length === 0) {\n    return [];\n  }\n  return [ifStmt(new BinaryOperatorExpr(BinaryOperator.BitwiseAnd, variable('rf'), literal(flag)), statements)];\n}\nfunction emitHostBindingFunction(job) {\n  if (job.root.fnName === null) {\n    throw new Error(`AssertionError: host binding function is unnamed`);\n  }\n  const createStatements = [];\n  for (const op of job.root.create) {\n    if (op.kind !== OpKind.Statement) {\n      throw new Error(`AssertionError: expected all create ops to have been compiled, but got ${OpKind[op.kind]}`);\n    }\n    createStatements.push(op.statement);\n  }\n  const updateStatements = [];\n  for (const op of job.root.update) {\n    if (op.kind !== OpKind.Statement) {\n      throw new Error(`AssertionError: expected all update ops to have been compiled, but got ${OpKind[op.kind]}`);\n    }\n    updateStatements.push(op.statement);\n  }\n  if (createStatements.length === 0 && updateStatements.length === 0) {\n    return null;\n  }\n  const createCond = maybeGenerateRfBlock(1, createStatements);\n  const updateCond = maybeGenerateRfBlock(2, updateStatements);\n  return fn([new FnParam('rf'), new FnParam('ctx')], [...createCond, ...updateCond], /* type */undefined, /* sourceSpan */undefined, job.root.fnName);\n}\nconst compatibilityMode = CompatibilityMode.TemplateDefinitionBuilder;\n// Schema containing DOM elements and their properties.\nconst domSchema = new DomElementSchemaRegistry();\n// Tag name of the `ng-template` element.\nconst NG_TEMPLATE_TAG_NAME = 'ng-template';\nfunction isI18nRootNode(meta) {\n  return meta instanceof Message;\n}\nfunction isSingleI18nIcu(meta) {\n  return isI18nRootNode(meta) && meta.nodes.length === 1 && meta.nodes[0] instanceof Icu;\n}\n/**\n * Process a template AST and convert it into a `ComponentCompilation` in the intermediate\n * representation.\n * TODO: Refactor more of the ingestion code into phases.\n */\nfunction ingestComponent(componentName, template, constantPool, relativeContextFilePath, i18nUseExternalIds, deferMeta, allDeferrableDepsFn) {\n  const job = new ComponentCompilationJob(componentName, constantPool, compatibilityMode, relativeContextFilePath, i18nUseExternalIds, deferMeta, allDeferrableDepsFn);\n  ingestNodes(job.root, template);\n  return job;\n}\n/**\n * Process a host binding AST and convert it into a `HostBindingCompilationJob` in the intermediate\n * representation.\n */\nfunction ingestHostBinding(input, bindingParser, constantPool) {\n  const job = new HostBindingCompilationJob(input.componentName, constantPool, compatibilityMode);\n  for (const property of input.properties ?? []) {\n    let bindingKind = BindingKind.Property;\n    // TODO: this should really be handled in the parser.\n    if (property.name.startsWith('attr.')) {\n      property.name = property.name.substring('attr.'.length);\n      bindingKind = BindingKind.Attribute;\n    }\n    if (property.isAnimation) {\n      bindingKind = BindingKind.Animation;\n    }\n    const securityContexts = bindingParser.calcPossibleSecurityContexts(input.componentSelector, property.name, bindingKind === BindingKind.Attribute).filter(context => context !== SecurityContext.NONE);\n    ingestHostProperty(job, property, bindingKind, securityContexts);\n  }\n  for (const [name, expr] of Object.entries(input.attributes) ?? []) {\n    const securityContexts = bindingParser.calcPossibleSecurityContexts(input.componentSelector, name, true).filter(context => context !== SecurityContext.NONE);\n    ingestHostAttribute(job, name, expr, securityContexts);\n  }\n  for (const event of input.events ?? []) {\n    ingestHostEvent(job, event);\n  }\n  return job;\n}\n// TODO: We should refactor the parser to use the same types and structures for host bindings as\n// with ordinary components. This would allow us to share a lot more ingestion code.\nfunction ingestHostProperty(job, property, bindingKind, securityContexts) {\n  let expression;\n  const ast = property.expression.ast;\n  if (ast instanceof Interpolation$1) {\n    expression = new Interpolation(ast.strings, ast.expressions.map(expr => convertAst(expr, job, property.sourceSpan)), []);\n  } else {\n    expression = convertAst(ast, job, property.sourceSpan);\n  }\n  job.root.update.push(createBindingOp(job.root.xref, bindingKind, property.name, expression, null, securityContexts, false, false, null, /* TODO: How do Host bindings handle i18n attrs? */null, property.sourceSpan));\n}\nfunction ingestHostAttribute(job, name, value, securityContexts) {\n  const attrBinding = createBindingOp(job.root.xref, BindingKind.Attribute, name, value, null, securityContexts,\n  /* Host attributes should always be extracted to const hostAttrs, even if they are not\n   *strictly* text literals */\n  true, false, null, /* TODO */null, /** TODO: May be null? */value.sourceSpan);\n  job.root.update.push(attrBinding);\n}\nfunction ingestHostEvent(job, event) {\n  const [phase, target] = event.type !== ParsedEventType.Animation ? [null, event.targetOrPhase] : [event.targetOrPhase, null];\n  const eventBinding = createListenerOp(job.root.xref, new SlotHandle(), event.name, null, makeListenerHandlerOps(job.root, event.handler, event.handlerSpan), phase, target, true, event.sourceSpan);\n  job.root.create.push(eventBinding);\n}\n/**\n * Ingest the nodes of a template AST into the given `ViewCompilation`.\n */\nfunction ingestNodes(unit, template) {\n  for (const node of template) {\n    if (node instanceof Element$1) {\n      ingestElement(unit, node);\n    } else if (node instanceof Template) {\n      ingestTemplate(unit, node);\n    } else if (node instanceof Content) {\n      ingestContent(unit, node);\n    } else if (node instanceof Text$3) {\n      ingestText(unit, node, null);\n    } else if (node instanceof BoundText) {\n      ingestBoundText(unit, node, null);\n    } else if (node instanceof IfBlock) {\n      ingestIfBlock(unit, node);\n    } else if (node instanceof SwitchBlock) {\n      ingestSwitchBlock(unit, node);\n    } else if (node instanceof DeferredBlock) {\n      ingestDeferBlock(unit, node);\n    } else if (node instanceof Icu$1) {\n      ingestIcu(unit, node);\n    } else if (node instanceof ForLoopBlock) {\n      ingestForBlock(unit, node);\n    } else if (node instanceof LetDeclaration$1) {\n      ingestLetDeclaration(unit, node);\n    } else {\n      throw new Error(`Unsupported template node: ${node.constructor.name}`);\n    }\n  }\n}\n/**\n * Ingest an element AST from the template into the given `ViewCompilation`.\n */\nfunction ingestElement(unit, element) {\n  if (element.i18n !== undefined && !(element.i18n instanceof Message || element.i18n instanceof TagPlaceholder)) {\n    throw Error(`Unhandled i18n metadata type for element: ${element.i18n.constructor.name}`);\n  }\n  const id = unit.job.allocateXrefId();\n  const [namespaceKey, elementName] = splitNsName(element.name);\n  const startOp = createElementStartOp(elementName, id, namespaceForKey(namespaceKey), element.i18n instanceof TagPlaceholder ? element.i18n : undefined, element.startSourceSpan, element.sourceSpan);\n  unit.create.push(startOp);\n  ingestElementBindings(unit, startOp, element);\n  ingestReferences(startOp, element);\n  // Start i18n, if needed, goes after the element create and bindings, but before the nodes\n  let i18nBlockId = null;\n  if (element.i18n instanceof Message) {\n    i18nBlockId = unit.job.allocateXrefId();\n    unit.create.push(createI18nStartOp(i18nBlockId, element.i18n, undefined, element.startSourceSpan));\n  }\n  ingestNodes(unit, element.children);\n  // The source span for the end op is typically the element closing tag. However, if no closing tag\n  // exists, such as in `<input>`, we use the start source span instead. Usually the start and end\n  // instructions will be collapsed into one `element` instruction, negating the purpose of this\n  // fallback, but in cases when it is not collapsed (such as an input with a binding), we still\n  // want to map the end instruction to the main element.\n  const endOp = createElementEndOp(id, element.endSourceSpan ?? element.startSourceSpan);\n  unit.create.push(endOp);\n  // If there is an i18n message associated with this element, insert i18n start and end ops.\n  if (i18nBlockId !== null) {\n    OpList.insertBefore(createI18nEndOp(i18nBlockId, element.endSourceSpan ?? element.startSourceSpan), endOp);\n  }\n}\n/**\n * Ingest an `ng-template` node from the AST into the given `ViewCompilation`.\n */\nfunction ingestTemplate(unit, tmpl) {\n  if (tmpl.i18n !== undefined && !(tmpl.i18n instanceof Message || tmpl.i18n instanceof TagPlaceholder)) {\n    throw Error(`Unhandled i18n metadata type for template: ${tmpl.i18n.constructor.name}`);\n  }\n  const childView = unit.job.allocateView(unit.xref);\n  let tagNameWithoutNamespace = tmpl.tagName;\n  let namespacePrefix = '';\n  if (tmpl.tagName) {\n    [namespacePrefix, tagNameWithoutNamespace] = splitNsName(tmpl.tagName);\n  }\n  const i18nPlaceholder = tmpl.i18n instanceof TagPlaceholder ? tmpl.i18n : undefined;\n  const namespace = namespaceForKey(namespacePrefix);\n  const functionNameSuffix = tagNameWithoutNamespace === null ? '' : prefixWithNamespace(tagNameWithoutNamespace, namespace);\n  const templateKind = isPlainTemplate(tmpl) ? TemplateKind.NgTemplate : TemplateKind.Structural;\n  const templateOp = createTemplateOp(childView.xref, templateKind, tagNameWithoutNamespace, functionNameSuffix, namespace, i18nPlaceholder, tmpl.startSourceSpan, tmpl.sourceSpan);\n  unit.create.push(templateOp);\n  ingestTemplateBindings(unit, templateOp, tmpl, templateKind);\n  ingestReferences(templateOp, tmpl);\n  ingestNodes(childView, tmpl.children);\n  for (const {\n    name,\n    value\n  } of tmpl.variables) {\n    childView.contextVariables.set(name, value !== '' ? value : '$implicit');\n  }\n  // If this is a plain template and there is an i18n message associated with it, insert i18n start\n  // and end ops. For structural directive templates, the i18n ops will be added when ingesting the\n  // element/template the directive is placed on.\n  if (templateKind === TemplateKind.NgTemplate && tmpl.i18n instanceof Message) {\n    const id = unit.job.allocateXrefId();\n    OpList.insertAfter(createI18nStartOp(id, tmpl.i18n, undefined, tmpl.startSourceSpan), childView.create.head);\n    OpList.insertBefore(createI18nEndOp(id, tmpl.endSourceSpan ?? tmpl.startSourceSpan), childView.create.tail);\n  }\n}\n/**\n * Ingest a content node from the AST into the given `ViewCompilation`.\n */\nfunction ingestContent(unit, content) {\n  if (content.i18n !== undefined && !(content.i18n instanceof TagPlaceholder)) {\n    throw Error(`Unhandled i18n metadata type for element: ${content.i18n.constructor.name}`);\n  }\n  let fallbackView = null;\n  // Don't capture default content that's only made up of empty text nodes and comments.\n  // Note that we process the default content before the projection in order to match the\n  // insertion order at runtime.\n  if (content.children.some(child => !(child instanceof Comment$1) && (!(child instanceof Text$3) || child.value.trim().length > 0))) {\n    fallbackView = unit.job.allocateView(unit.xref);\n    ingestNodes(fallbackView, content.children);\n  }\n  const id = unit.job.allocateXrefId();\n  const op = createProjectionOp(id, content.selector, content.i18n, fallbackView?.xref ?? null, content.sourceSpan);\n  for (const attr of content.attributes) {\n    const securityContext = domSchema.securityContext(content.name, attr.name, true);\n    unit.update.push(createBindingOp(op.xref, BindingKind.Attribute, attr.name, literal(attr.value), null, securityContext, true, false, null, asMessage(attr.i18n), attr.sourceSpan));\n  }\n  unit.create.push(op);\n}\n/**\n * Ingest a literal text node from the AST into the given `ViewCompilation`.\n */\nfunction ingestText(unit, text, icuPlaceholder) {\n  unit.create.push(createTextOp(unit.job.allocateXrefId(), text.value, icuPlaceholder, text.sourceSpan));\n}\n/**\n * Ingest an interpolated text node from the AST into the given `ViewCompilation`.\n */\nfunction ingestBoundText(unit, text, icuPlaceholder) {\n  let value = text.value;\n  if (value instanceof ASTWithSource) {\n    value = value.ast;\n  }\n  if (!(value instanceof Interpolation$1)) {\n    throw new Error(`AssertionError: expected Interpolation for BoundText node, got ${value.constructor.name}`);\n  }\n  if (text.i18n !== undefined && !(text.i18n instanceof Container)) {\n    throw Error(`Unhandled i18n metadata type for text interpolation: ${text.i18n?.constructor.name}`);\n  }\n  const i18nPlaceholders = text.i18n instanceof Container ? text.i18n.children.filter(node => node instanceof Placeholder).map(placeholder => placeholder.name) : [];\n  if (i18nPlaceholders.length > 0 && i18nPlaceholders.length !== value.expressions.length) {\n    throw Error(`Unexpected number of i18n placeholders (${value.expressions.length}) for BoundText with ${value.expressions.length} expressions`);\n  }\n  const textXref = unit.job.allocateXrefId();\n  unit.create.push(createTextOp(textXref, '', icuPlaceholder, text.sourceSpan));\n  // TemplateDefinitionBuilder does not generate source maps for sub-expressions inside an\n  // interpolation. We copy that behavior in compatibility mode.\n  // TODO: is it actually correct to generate these extra maps in modern mode?\n  const baseSourceSpan = unit.job.compatibility ? null : text.sourceSpan;\n  unit.update.push(createInterpolateTextOp(textXref, new Interpolation(value.strings, value.expressions.map(expr => convertAst(expr, unit.job, baseSourceSpan)), i18nPlaceholders), text.sourceSpan));\n}\n/**\n * Ingest an `@if` block into the given `ViewCompilation`.\n */\nfunction ingestIfBlock(unit, ifBlock) {\n  let firstXref = null;\n  let conditions = [];\n  for (let i = 0; i < ifBlock.branches.length; i++) {\n    const ifCase = ifBlock.branches[i];\n    const cView = unit.job.allocateView(unit.xref);\n    const tagName = ingestControlFlowInsertionPoint(unit, cView.xref, ifCase);\n    if (ifCase.expressionAlias !== null) {\n      cView.contextVariables.set(ifCase.expressionAlias.name, CTX_REF);\n    }\n    let ifCaseI18nMeta = undefined;\n    if (ifCase.i18n !== undefined) {\n      if (!(ifCase.i18n instanceof BlockPlaceholder)) {\n        throw Error(`Unhandled i18n metadata type for if block: ${ifCase.i18n?.constructor.name}`);\n      }\n      ifCaseI18nMeta = ifCase.i18n;\n    }\n    const templateOp = createTemplateOp(cView.xref, TemplateKind.Block, tagName, 'Conditional', Namespace.HTML, ifCaseI18nMeta, ifCase.startSourceSpan, ifCase.sourceSpan);\n    unit.create.push(templateOp);\n    if (firstXref === null) {\n      firstXref = cView.xref;\n    }\n    const caseExpr = ifCase.expression ? convertAst(ifCase.expression, unit.job, null) : null;\n    const conditionalCaseExpr = new ConditionalCaseExpr(caseExpr, templateOp.xref, templateOp.handle, ifCase.expressionAlias);\n    conditions.push(conditionalCaseExpr);\n    ingestNodes(cView, ifCase.children);\n  }\n  unit.update.push(createConditionalOp(firstXref, null, conditions, ifBlock.sourceSpan));\n}\n/**\n * Ingest an `@switch` block into the given `ViewCompilation`.\n */\nfunction ingestSwitchBlock(unit, switchBlock) {\n  // Don't ingest empty switches since they won't render anything.\n  if (switchBlock.cases.length === 0) {\n    return;\n  }\n  let firstXref = null;\n  let conditions = [];\n  for (const switchCase of switchBlock.cases) {\n    const cView = unit.job.allocateView(unit.xref);\n    const tagName = ingestControlFlowInsertionPoint(unit, cView.xref, switchCase);\n    let switchCaseI18nMeta = undefined;\n    if (switchCase.i18n !== undefined) {\n      if (!(switchCase.i18n instanceof BlockPlaceholder)) {\n        throw Error(`Unhandled i18n metadata type for switch block: ${switchCase.i18n?.constructor.name}`);\n      }\n      switchCaseI18nMeta = switchCase.i18n;\n    }\n    const templateOp = createTemplateOp(cView.xref, TemplateKind.Block, tagName, 'Case', Namespace.HTML, switchCaseI18nMeta, switchCase.startSourceSpan, switchCase.sourceSpan);\n    unit.create.push(templateOp);\n    if (firstXref === null) {\n      firstXref = cView.xref;\n    }\n    const caseExpr = switchCase.expression ? convertAst(switchCase.expression, unit.job, switchBlock.startSourceSpan) : null;\n    const conditionalCaseExpr = new ConditionalCaseExpr(caseExpr, templateOp.xref, templateOp.handle);\n    conditions.push(conditionalCaseExpr);\n    ingestNodes(cView, switchCase.children);\n  }\n  unit.update.push(createConditionalOp(firstXref, convertAst(switchBlock.expression, unit.job, null), conditions, switchBlock.sourceSpan));\n}\nfunction ingestDeferView(unit, suffix, i18nMeta, children, sourceSpan) {\n  if (i18nMeta !== undefined && !(i18nMeta instanceof BlockPlaceholder)) {\n    throw Error('Unhandled i18n metadata type for defer block');\n  }\n  if (children === undefined) {\n    return null;\n  }\n  const secondaryView = unit.job.allocateView(unit.xref);\n  ingestNodes(secondaryView, children);\n  const templateOp = createTemplateOp(secondaryView.xref, TemplateKind.Block, null, `Defer${suffix}`, Namespace.HTML, i18nMeta, sourceSpan, sourceSpan);\n  unit.create.push(templateOp);\n  return templateOp;\n}\nfunction ingestDeferBlock(unit, deferBlock) {\n  let ownResolverFn = null;\n  if (unit.job.deferMeta.mode === 0 /* DeferBlockDepsEmitMode.PerBlock */) {\n    if (!unit.job.deferMeta.blocks.has(deferBlock)) {\n      throw new Error(`AssertionError: unable to find a dependency function for this deferred block`);\n    }\n    ownResolverFn = unit.job.deferMeta.blocks.get(deferBlock) ?? null;\n  }\n  // Generate the defer main view and all secondary views.\n  const main = ingestDeferView(unit, '', deferBlock.i18n, deferBlock.children, deferBlock.sourceSpan);\n  const loading = ingestDeferView(unit, 'Loading', deferBlock.loading?.i18n, deferBlock.loading?.children, deferBlock.loading?.sourceSpan);\n  const placeholder = ingestDeferView(unit, 'Placeholder', deferBlock.placeholder?.i18n, deferBlock.placeholder?.children, deferBlock.placeholder?.sourceSpan);\n  const error = ingestDeferView(unit, 'Error', deferBlock.error?.i18n, deferBlock.error?.children, deferBlock.error?.sourceSpan);\n  // Create the main defer op, and ops for all secondary views.\n  const deferXref = unit.job.allocateXrefId();\n  const deferOp = createDeferOp(deferXref, main.xref, main.handle, ownResolverFn, unit.job.allDeferrableDepsFn, deferBlock.sourceSpan);\n  deferOp.placeholderView = placeholder?.xref ?? null;\n  deferOp.placeholderSlot = placeholder?.handle ?? null;\n  deferOp.loadingSlot = loading?.handle ?? null;\n  deferOp.errorSlot = error?.handle ?? null;\n  deferOp.placeholderMinimumTime = deferBlock.placeholder?.minimumTime ?? null;\n  deferOp.loadingMinimumTime = deferBlock.loading?.minimumTime ?? null;\n  deferOp.loadingAfterTime = deferBlock.loading?.afterTime ?? null;\n  unit.create.push(deferOp);\n  // Configure all defer `on` conditions.\n  // TODO: refactor prefetch triggers to use a separate op type, with a shared superclass. This will\n  // make it easier to refactor prefetch behavior in the future.\n  let prefetch = false;\n  let deferOnOps = [];\n  let deferWhenOps = [];\n  for (const triggers of [deferBlock.triggers, deferBlock.prefetchTriggers]) {\n    if (triggers.idle !== undefined) {\n      const deferOnOp = createDeferOnOp(deferXref, {\n        kind: DeferTriggerKind.Idle\n      }, prefetch, triggers.idle.sourceSpan);\n      deferOnOps.push(deferOnOp);\n    }\n    if (triggers.immediate !== undefined) {\n      const deferOnOp = createDeferOnOp(deferXref, {\n        kind: DeferTriggerKind.Immediate\n      }, prefetch, triggers.immediate.sourceSpan);\n      deferOnOps.push(deferOnOp);\n    }\n    if (triggers.timer !== undefined) {\n      const deferOnOp = createDeferOnOp(deferXref, {\n        kind: DeferTriggerKind.Timer,\n        delay: triggers.timer.delay\n      }, prefetch, triggers.timer.sourceSpan);\n      deferOnOps.push(deferOnOp);\n    }\n    if (triggers.hover !== undefined) {\n      const deferOnOp = createDeferOnOp(deferXref, {\n        kind: DeferTriggerKind.Hover,\n        targetName: triggers.hover.reference,\n        targetXref: null,\n        targetSlot: null,\n        targetView: null,\n        targetSlotViewSteps: null\n      }, prefetch, triggers.hover.sourceSpan);\n      deferOnOps.push(deferOnOp);\n    }\n    if (triggers.interaction !== undefined) {\n      const deferOnOp = createDeferOnOp(deferXref, {\n        kind: DeferTriggerKind.Interaction,\n        targetName: triggers.interaction.reference,\n        targetXref: null,\n        targetSlot: null,\n        targetView: null,\n        targetSlotViewSteps: null\n      }, prefetch, triggers.interaction.sourceSpan);\n      deferOnOps.push(deferOnOp);\n    }\n    if (triggers.viewport !== undefined) {\n      const deferOnOp = createDeferOnOp(deferXref, {\n        kind: DeferTriggerKind.Viewport,\n        targetName: triggers.viewport.reference,\n        targetXref: null,\n        targetSlot: null,\n        targetView: null,\n        targetSlotViewSteps: null\n      }, prefetch, triggers.viewport.sourceSpan);\n      deferOnOps.push(deferOnOp);\n    }\n    if (triggers.when !== undefined) {\n      if (triggers.when.value instanceof Interpolation$1) {\n        // TemplateDefinitionBuilder supports this case, but it's very strange to me. What would it\n        // even mean?\n        throw new Error(`Unexpected interpolation in defer block when trigger`);\n      }\n      const deferOnOp = createDeferWhenOp(deferXref, convertAst(triggers.when.value, unit.job, triggers.when.sourceSpan), prefetch, triggers.when.sourceSpan);\n      deferWhenOps.push(deferOnOp);\n    }\n    // If no (non-prefetching) defer triggers were provided, default to `idle`.\n    if (deferOnOps.length === 0 && deferWhenOps.length === 0) {\n      deferOnOps.push(createDeferOnOp(deferXref, {\n        kind: DeferTriggerKind.Idle\n      }, false, null));\n    }\n    prefetch = true;\n  }\n  unit.create.push(deferOnOps);\n  unit.update.push(deferWhenOps);\n}\nfunction ingestIcu(unit, icu) {\n  if (icu.i18n instanceof Message && isSingleI18nIcu(icu.i18n)) {\n    const xref = unit.job.allocateXrefId();\n    unit.create.push(createIcuStartOp(xref, icu.i18n, icuFromI18nMessage(icu.i18n).name, null));\n    for (const [placeholder, text] of Object.entries({\n      ...icu.vars,\n      ...icu.placeholders\n    })) {\n      if (text instanceof BoundText) {\n        ingestBoundText(unit, text, placeholder);\n      } else {\n        ingestText(unit, text, placeholder);\n      }\n    }\n    unit.create.push(createIcuEndOp(xref));\n  } else {\n    throw Error(`Unhandled i18n metadata type for ICU: ${icu.i18n?.constructor.name}`);\n  }\n}\n/**\n * Ingest an `@for` block into the given `ViewCompilation`.\n */\nfunction ingestForBlock(unit, forBlock) {\n  const repeaterView = unit.job.allocateView(unit.xref);\n  // We copy TemplateDefinitionBuilder's scheme of creating names for `$count` and `$index`\n  // that are suffixed with special information, to disambiguate which level of nested loop\n  // the below aliases refer to.\n  // TODO: We should refactor Template Pipeline's variable phases to gracefully handle\n  // shadowing, and arbitrarily many levels of variables depending on each other.\n  const indexName = `ɵ$index_${repeaterView.xref}`;\n  const countName = `ɵ$count_${repeaterView.xref}`;\n  const indexVarNames = new Set();\n  // Set all the context variables and aliases available in the repeater.\n  repeaterView.contextVariables.set(forBlock.item.name, forBlock.item.value);\n  for (const variable of forBlock.contextVariables) {\n    if (variable.value === '$index') {\n      indexVarNames.add(variable.name);\n    }\n    if (variable.name === '$index') {\n      repeaterView.contextVariables.set('$index', variable.value).set(indexName, variable.value);\n    } else if (variable.name === '$count') {\n      repeaterView.contextVariables.set('$count', variable.value).set(countName, variable.value);\n    } else {\n      repeaterView.aliases.add({\n        kind: SemanticVariableKind.Alias,\n        name: null,\n        identifier: variable.name,\n        expression: getComputedForLoopVariableExpression(variable, indexName, countName)\n      });\n    }\n  }\n  const sourceSpan = convertSourceSpan(forBlock.trackBy.span, forBlock.sourceSpan);\n  const track = convertAst(forBlock.trackBy, unit.job, sourceSpan);\n  ingestNodes(repeaterView, forBlock.children);\n  let emptyView = null;\n  let emptyTagName = null;\n  if (forBlock.empty !== null) {\n    emptyView = unit.job.allocateView(unit.xref);\n    ingestNodes(emptyView, forBlock.empty.children);\n    emptyTagName = ingestControlFlowInsertionPoint(unit, emptyView.xref, forBlock.empty);\n  }\n  const varNames = {\n    $index: indexVarNames,\n    $implicit: forBlock.item.name\n  };\n  if (forBlock.i18n !== undefined && !(forBlock.i18n instanceof BlockPlaceholder)) {\n    throw Error('AssertionError: Unhandled i18n metadata type or @for');\n  }\n  if (forBlock.empty?.i18n !== undefined && !(forBlock.empty.i18n instanceof BlockPlaceholder)) {\n    throw Error('AssertionError: Unhandled i18n metadata type or @empty');\n  }\n  const i18nPlaceholder = forBlock.i18n;\n  const emptyI18nPlaceholder = forBlock.empty?.i18n;\n  const tagName = ingestControlFlowInsertionPoint(unit, repeaterView.xref, forBlock);\n  const repeaterCreate = createRepeaterCreateOp(repeaterView.xref, emptyView?.xref ?? null, tagName, track, varNames, emptyTagName, i18nPlaceholder, emptyI18nPlaceholder, forBlock.startSourceSpan, forBlock.sourceSpan);\n  unit.create.push(repeaterCreate);\n  const expression = convertAst(forBlock.expression, unit.job, convertSourceSpan(forBlock.expression.span, forBlock.sourceSpan));\n  const repeater = createRepeaterOp(repeaterCreate.xref, repeaterCreate.handle, expression, forBlock.sourceSpan);\n  unit.update.push(repeater);\n}\n/**\n * Gets an expression that represents a variable in an `@for` loop.\n * @param variable AST representing the variable.\n * @param indexName Loop-specific name for `$index`.\n * @param countName Loop-specific name for `$count`.\n */\nfunction getComputedForLoopVariableExpression(variable, indexName, countName) {\n  switch (variable.value) {\n    case '$index':\n      return new LexicalReadExpr(indexName);\n    case '$count':\n      return new LexicalReadExpr(countName);\n    case '$first':\n      return new LexicalReadExpr(indexName).identical(literal(0));\n    case '$last':\n      return new LexicalReadExpr(indexName).identical(new LexicalReadExpr(countName).minus(literal(1)));\n    case '$even':\n      return new LexicalReadExpr(indexName).modulo(literal(2)).identical(literal(0));\n    case '$odd':\n      return new LexicalReadExpr(indexName).modulo(literal(2)).notIdentical(literal(0));\n    default:\n      throw new Error(`AssertionError: unknown @for loop variable ${variable.value}`);\n  }\n}\nfunction ingestLetDeclaration(unit, node) {\n  const target = unit.job.allocateXrefId();\n  unit.create.push(createDeclareLetOp(target, node.name, node.sourceSpan));\n  unit.update.push(createStoreLetOp(target, node.name, convertAst(node.value, unit.job, node.valueSpan), node.sourceSpan));\n}\n/**\n * Convert a template AST expression into an output AST expression.\n */\nfunction convertAst(ast, job, baseSourceSpan) {\n  if (ast instanceof ASTWithSource) {\n    return convertAst(ast.ast, job, baseSourceSpan);\n  } else if (ast instanceof PropertyRead) {\n    const isThisReceiver = ast.receiver instanceof ThisReceiver;\n    // Whether this is an implicit receiver, *excluding* explicit reads of `this`.\n    const isImplicitReceiver = ast.receiver instanceof ImplicitReceiver && !(ast.receiver instanceof ThisReceiver);\n    // Whether the  name of the read is a node that should be never retain its explicit this\n    // receiver.\n    const isSpecialNode = ast.name === '$any' || ast.name === '$event';\n    // TODO: The most sensible condition here would be simply `isImplicitReceiver`, to convert only\n    // actual implicit `this` reads, and not explicit ones. However, TemplateDefinitionBuilder (and\n    // the Typecheck block!) both have the same bug, in which they also consider explicit `this`\n    // reads to be implicit. This causes problems when the explicit `this` read is inside a\n    // template with a context that also provides the variable name being read:\n    // ```\n    // <ng-template let-a>{{this.a}}</ng-template>\n    // ```\n    // The whole point of the explicit `this` was to access the class property, but TDB and the\n    // current TCB treat the read as implicit, and give you the context property instead!\n    //\n    // For now, we emulate this old behavior by aggressively converting explicit reads to to\n    // implicit reads, except for the special cases that TDB and the current TCB protect. However,\n    // it would be an improvement to fix this.\n    //\n    // See also the corresponding comment for the TCB, in `type_check_block.ts`.\n    if (isImplicitReceiver || isThisReceiver && !isSpecialNode) {\n      return new LexicalReadExpr(ast.name);\n    } else {\n      return new ReadPropExpr(convertAst(ast.receiver, job, baseSourceSpan), ast.name, null, convertSourceSpan(ast.span, baseSourceSpan));\n    }\n  } else if (ast instanceof PropertyWrite) {\n    if (ast.receiver instanceof ImplicitReceiver) {\n      return new WritePropExpr(\n      // TODO: Is it correct to always use the root context in place of the implicit receiver?\n      new ContextExpr(job.root.xref), ast.name, convertAst(ast.value, job, baseSourceSpan), null, convertSourceSpan(ast.span, baseSourceSpan));\n    }\n    return new WritePropExpr(convertAst(ast.receiver, job, baseSourceSpan), ast.name, convertAst(ast.value, job, baseSourceSpan), undefined, convertSourceSpan(ast.span, baseSourceSpan));\n  } else if (ast instanceof KeyedWrite) {\n    return new WriteKeyExpr(convertAst(ast.receiver, job, baseSourceSpan), convertAst(ast.key, job, baseSourceSpan), convertAst(ast.value, job, baseSourceSpan), undefined, convertSourceSpan(ast.span, baseSourceSpan));\n  } else if (ast instanceof Call) {\n    if (ast.receiver instanceof ImplicitReceiver) {\n      throw new Error(`Unexpected ImplicitReceiver`);\n    } else {\n      return new InvokeFunctionExpr(convertAst(ast.receiver, job, baseSourceSpan), ast.args.map(arg => convertAst(arg, job, baseSourceSpan)), undefined, convertSourceSpan(ast.span, baseSourceSpan));\n    }\n  } else if (ast instanceof LiteralPrimitive) {\n    return literal(ast.value, undefined, convertSourceSpan(ast.span, baseSourceSpan));\n  } else if (ast instanceof Unary) {\n    switch (ast.operator) {\n      case '+':\n        return new UnaryOperatorExpr(UnaryOperator.Plus, convertAst(ast.expr, job, baseSourceSpan), undefined, convertSourceSpan(ast.span, baseSourceSpan));\n      case '-':\n        return new UnaryOperatorExpr(UnaryOperator.Minus, convertAst(ast.expr, job, baseSourceSpan), undefined, convertSourceSpan(ast.span, baseSourceSpan));\n      default:\n        throw new Error(`AssertionError: unknown unary operator ${ast.operator}`);\n    }\n  } else if (ast instanceof Binary) {\n    const operator = BINARY_OPERATORS.get(ast.operation);\n    if (operator === undefined) {\n      throw new Error(`AssertionError: unknown binary operator ${ast.operation}`);\n    }\n    return new BinaryOperatorExpr(operator, convertAst(ast.left, job, baseSourceSpan), convertAst(ast.right, job, baseSourceSpan), undefined, convertSourceSpan(ast.span, baseSourceSpan));\n  } else if (ast instanceof ThisReceiver) {\n    // TODO: should context expressions have source maps?\n    return new ContextExpr(job.root.xref);\n  } else if (ast instanceof KeyedRead) {\n    return new ReadKeyExpr(convertAst(ast.receiver, job, baseSourceSpan), convertAst(ast.key, job, baseSourceSpan), undefined, convertSourceSpan(ast.span, baseSourceSpan));\n  } else if (ast instanceof Chain) {\n    throw new Error(`AssertionError: Chain in unknown context`);\n  } else if (ast instanceof LiteralMap) {\n    const entries = ast.keys.map((key, idx) => {\n      const value = ast.values[idx];\n      // TODO: should literals have source maps, or do we just map the whole surrounding\n      // expression?\n      return new LiteralMapEntry(key.key, convertAst(value, job, baseSourceSpan), key.quoted);\n    });\n    return new LiteralMapExpr(entries, undefined, convertSourceSpan(ast.span, baseSourceSpan));\n  } else if (ast instanceof LiteralArray) {\n    // TODO: should literals have source maps, or do we just map the whole surrounding expression?\n    return new LiteralArrayExpr(ast.expressions.map(expr => convertAst(expr, job, baseSourceSpan)));\n  } else if (ast instanceof Conditional) {\n    return new ConditionalExpr(convertAst(ast.condition, job, baseSourceSpan), convertAst(ast.trueExp, job, baseSourceSpan), convertAst(ast.falseExp, job, baseSourceSpan), undefined, convertSourceSpan(ast.span, baseSourceSpan));\n  } else if (ast instanceof NonNullAssert) {\n    // A non-null assertion shouldn't impact generated instructions, so we can just drop it.\n    return convertAst(ast.expression, job, baseSourceSpan);\n  } else if (ast instanceof BindingPipe) {\n    // TODO: pipes should probably have source maps; figure out details.\n    return new PipeBindingExpr(job.allocateXrefId(), new SlotHandle(), ast.name, [convertAst(ast.exp, job, baseSourceSpan), ...ast.args.map(arg => convertAst(arg, job, baseSourceSpan))]);\n  } else if (ast instanceof SafeKeyedRead) {\n    return new SafeKeyedReadExpr(convertAst(ast.receiver, job, baseSourceSpan), convertAst(ast.key, job, baseSourceSpan), convertSourceSpan(ast.span, baseSourceSpan));\n  } else if (ast instanceof SafePropertyRead) {\n    // TODO: source span\n    return new SafePropertyReadExpr(convertAst(ast.receiver, job, baseSourceSpan), ast.name);\n  } else if (ast instanceof SafeCall) {\n    // TODO: source span\n    return new SafeInvokeFunctionExpr(convertAst(ast.receiver, job, baseSourceSpan), ast.args.map(a => convertAst(a, job, baseSourceSpan)));\n  } else if (ast instanceof EmptyExpr$1) {\n    return new EmptyExpr(convertSourceSpan(ast.span, baseSourceSpan));\n  } else if (ast instanceof PrefixNot) {\n    return not(convertAst(ast.expression, job, baseSourceSpan), convertSourceSpan(ast.span, baseSourceSpan));\n  } else {\n    throw new Error(`Unhandled expression type \"${ast.constructor.name}\" in file \"${baseSourceSpan?.start.file.url}\"`);\n  }\n}\nfunction convertAstWithInterpolation(job, value, i18nMeta, sourceSpan) {\n  let expression;\n  if (value instanceof Interpolation$1) {\n    expression = new Interpolation(value.strings, value.expressions.map(e => convertAst(e, job, sourceSpan ?? null)), Object.keys(asMessage(i18nMeta)?.placeholders ?? {}));\n  } else if (value instanceof AST) {\n    expression = convertAst(value, job, sourceSpan ?? null);\n  } else {\n    expression = literal(value);\n  }\n  return expression;\n}\n// TODO: Can we populate Template binding kinds in ingest?\nconst BINDING_KINDS = new Map([[BindingType.Property, BindingKind.Property], [BindingType.TwoWay, BindingKind.TwoWayProperty], [BindingType.Attribute, BindingKind.Attribute], [BindingType.Class, BindingKind.ClassName], [BindingType.Style, BindingKind.StyleProperty], [BindingType.Animation, BindingKind.Animation]]);\n/**\n * Checks whether the given template is a plain ng-template (as opposed to another kind of template\n * such as a structural directive template or control flow template). This is checked based on the\n * tagName. We can expect that only plain ng-templates will come through with a tagName of\n * 'ng-template'.\n *\n * Here are some of the cases we expect:\n *\n * | Angular HTML                       | Template tagName   |\n * | ---------------------------------- | ------------------ |\n * | `<ng-template>`                    | 'ng-template'      |\n * | `<div *ngIf=\"true\">`               | 'div'              |\n * | `<svg><ng-template>`               | 'svg:ng-template'  |\n * | `@if (true) {`                     | 'Conditional'      |\n * | `<ng-template *ngIf>` (plain)      | 'ng-template'      |\n * | `<ng-template *ngIf>` (structural) | null               |\n */\nfunction isPlainTemplate(tmpl) {\n  return splitNsName(tmpl.tagName ?? '')[1] === NG_TEMPLATE_TAG_NAME;\n}\n/**\n * Ensures that the i18nMeta, if provided, is an i18n.Message.\n */\nfunction asMessage(i18nMeta) {\n  if (i18nMeta == null) {\n    return null;\n  }\n  if (!(i18nMeta instanceof Message)) {\n    throw Error(`Expected i18n meta to be a Message, but got: ${i18nMeta.constructor.name}`);\n  }\n  return i18nMeta;\n}\n/**\n * Process all of the bindings on an element in the template AST and convert them to their IR\n * representation.\n */\nfunction ingestElementBindings(unit, op, element) {\n  let bindings = new Array();\n  let i18nAttributeBindingNames = new Set();\n  for (const attr of element.attributes) {\n    // Attribute literal bindings, such as `attr.foo=\"bar\"`.\n    const securityContext = domSchema.securityContext(element.name, attr.name, true);\n    bindings.push(createBindingOp(op.xref, BindingKind.Attribute, attr.name, convertAstWithInterpolation(unit.job, attr.value, attr.i18n), null, securityContext, true, false, null, asMessage(attr.i18n), attr.sourceSpan));\n    if (attr.i18n) {\n      i18nAttributeBindingNames.add(attr.name);\n    }\n  }\n  for (const input of element.inputs) {\n    if (i18nAttributeBindingNames.has(input.name)) {\n      console.error(`On component ${unit.job.componentName}, the binding ${input.name} is both an i18n attribute and a property. You may want to remove the property binding. This will become a compilation error in future versions of Angular.`);\n    }\n    // All dynamic bindings (both attribute and property bindings).\n    bindings.push(createBindingOp(op.xref, BINDING_KINDS.get(input.type), input.name, convertAstWithInterpolation(unit.job, astOf(input.value), input.i18n), input.unit, input.securityContext, false, false, null, asMessage(input.i18n) ?? null, input.sourceSpan));\n  }\n  unit.create.push(bindings.filter(b => b?.kind === OpKind.ExtractedAttribute));\n  unit.update.push(bindings.filter(b => b?.kind === OpKind.Binding));\n  for (const output of element.outputs) {\n    if (output.type === ParsedEventType.Animation && output.phase === null) {\n      throw Error('Animation listener should have a phase');\n    }\n    if (output.type === ParsedEventType.TwoWay) {\n      unit.create.push(createTwoWayListenerOp(op.xref, op.handle, output.name, op.tag, makeTwoWayListenerHandlerOps(unit, output.handler, output.handlerSpan), output.sourceSpan));\n    } else {\n      unit.create.push(createListenerOp(op.xref, op.handle, output.name, op.tag, makeListenerHandlerOps(unit, output.handler, output.handlerSpan), output.phase, output.target, false, output.sourceSpan));\n    }\n  }\n  // If any of the bindings on this element have an i18n message, then an i18n attrs configuration\n  // op is also required.\n  if (bindings.some(b => b?.i18nMessage) !== null) {\n    unit.create.push(createI18nAttributesOp(unit.job.allocateXrefId(), new SlotHandle(), op.xref));\n  }\n}\n/**\n * Process all of the bindings on a template in the template AST and convert them to their IR\n * representation.\n */\nfunction ingestTemplateBindings(unit, op, template, templateKind) {\n  let bindings = new Array();\n  for (const attr of template.templateAttrs) {\n    if (attr instanceof TextAttribute) {\n      const securityContext = domSchema.securityContext(NG_TEMPLATE_TAG_NAME, attr.name, true);\n      bindings.push(createTemplateBinding(unit, op.xref, BindingType.Attribute, attr.name, attr.value, null, securityContext, true, templateKind, asMessage(attr.i18n), attr.sourceSpan));\n    } else {\n      bindings.push(createTemplateBinding(unit, op.xref, attr.type, attr.name, astOf(attr.value), attr.unit, attr.securityContext, true, templateKind, asMessage(attr.i18n), attr.sourceSpan));\n    }\n  }\n  for (const attr of template.attributes) {\n    // Attribute literal bindings, such as `attr.foo=\"bar\"`.\n    const securityContext = domSchema.securityContext(NG_TEMPLATE_TAG_NAME, attr.name, true);\n    bindings.push(createTemplateBinding(unit, op.xref, BindingType.Attribute, attr.name, attr.value, null, securityContext, false, templateKind, asMessage(attr.i18n), attr.sourceSpan));\n  }\n  for (const input of template.inputs) {\n    // Dynamic bindings (both attribute and property bindings).\n    bindings.push(createTemplateBinding(unit, op.xref, input.type, input.name, astOf(input.value), input.unit, input.securityContext, false, templateKind, asMessage(input.i18n), input.sourceSpan));\n  }\n  unit.create.push(bindings.filter(b => b?.kind === OpKind.ExtractedAttribute));\n  unit.update.push(bindings.filter(b => b?.kind === OpKind.Binding));\n  for (const output of template.outputs) {\n    if (output.type === ParsedEventType.Animation && output.phase === null) {\n      throw Error('Animation listener should have a phase');\n    }\n    if (templateKind === TemplateKind.NgTemplate) {\n      if (output.type === ParsedEventType.TwoWay) {\n        unit.create.push(createTwoWayListenerOp(op.xref, op.handle, output.name, op.tag, makeTwoWayListenerHandlerOps(unit, output.handler, output.handlerSpan), output.sourceSpan));\n      } else {\n        unit.create.push(createListenerOp(op.xref, op.handle, output.name, op.tag, makeListenerHandlerOps(unit, output.handler, output.handlerSpan), output.phase, output.target, false, output.sourceSpan));\n      }\n    }\n    if (templateKind === TemplateKind.Structural && output.type !== ParsedEventType.Animation) {\n      // Animation bindings are excluded from the structural template's const array.\n      const securityContext = domSchema.securityContext(NG_TEMPLATE_TAG_NAME, output.name, false);\n      unit.create.push(createExtractedAttributeOp(op.xref, BindingKind.Property, null, output.name, null, null, null, securityContext));\n    }\n  }\n  // TODO: Perhaps we could do this in a phase? (It likely wouldn't change the slot indices.)\n  if (bindings.some(b => b?.i18nMessage) !== null) {\n    unit.create.push(createI18nAttributesOp(unit.job.allocateXrefId(), new SlotHandle(), op.xref));\n  }\n}\n/**\n * Helper to ingest an individual binding on a template, either an explicit `ng-template`, or an\n * implicit template created via structural directive.\n *\n * Bindings on templates are *extremely* tricky. I have tried to isolate all of the confusing edge\n * cases into this function, and to comment it well to document the behavior.\n *\n * Some of this behavior is intuitively incorrect, and we should consider changing it in the future.\n *\n * @param view The compilation unit for the view containing the template.\n * @param xref The xref of the template op.\n * @param type The binding type, according to the parser. This is fairly reasonable, e.g. both\n *     dynamic and static attributes have e.BindingType.Attribute.\n * @param name The binding's name.\n * @param value The bindings's value, which will either be an input AST expression, or a string\n *     literal. Note that the input AST expression may or may not be const -- it will only be a\n *     string literal if the parser considered it a text binding.\n * @param unit If the binding has a unit (e.g. `px` for style bindings), then this is the unit.\n * @param securityContext The security context of the binding.\n * @param isStructuralTemplateAttribute Whether this binding actually applies to the structural\n *     ng-template. For example, an `ngFor` would actually apply to the structural template. (Most\n *     bindings on structural elements target the inner element, not the template.)\n * @param templateKind Whether this is an explicit `ng-template` or an implicit template created by\n *     a structural directive. This should never be a block template.\n * @param i18nMessage The i18n metadata for the binding, if any.\n * @param sourceSpan The source span of the binding.\n * @returns An IR binding op, or null if the binding should be skipped.\n */\nfunction createTemplateBinding(view, xref, type, name, value, unit, securityContext, isStructuralTemplateAttribute, templateKind, i18nMessage, sourceSpan) {\n  const isTextBinding = typeof value === 'string';\n  // If this is a structural template, then several kinds of bindings should not result in an\n  // update instruction.\n  if (templateKind === TemplateKind.Structural) {\n    if (!isStructuralTemplateAttribute) {\n      switch (type) {\n        case BindingType.Property:\n        case BindingType.Class:\n        case BindingType.Style:\n          // Because this binding doesn't really target the ng-template, it must be a binding on an\n          // inner node of a structural template. We can't skip it entirely, because we still need\n          // it on the ng-template's consts (e.g. for the purposes of directive matching). However,\n          // we should not generate an update instruction for it.\n          return createExtractedAttributeOp(xref, BindingKind.Property, null, name, null, null, i18nMessage, securityContext);\n        case BindingType.TwoWay:\n          return createExtractedAttributeOp(xref, BindingKind.TwoWayProperty, null, name, null, null, i18nMessage, securityContext);\n      }\n    }\n    if (!isTextBinding && (type === BindingType.Attribute || type === BindingType.Animation)) {\n      // Again, this binding doesn't really target the ng-template; it actually targets the element\n      // inside the structural template. In the case of non-text attribute or animation bindings,\n      // the binding doesn't even show up on the ng-template const array, so we just skip it\n      // entirely.\n      return null;\n    }\n  }\n  let bindingType = BINDING_KINDS.get(type);\n  if (templateKind === TemplateKind.NgTemplate) {\n    // We know we are dealing with bindings directly on an explicit ng-template.\n    // Static attribute bindings should be collected into the const array as k/v pairs. Property\n    // bindings should result in a `property` instruction, and `AttributeMarker.Bindings` const\n    // entries.\n    //\n    // The difficulty is with dynamic attribute, style, and class bindings. These don't really make\n    // sense on an `ng-template` and should probably be parser errors. However,\n    // TemplateDefinitionBuilder generates `property` instructions for them, and so we do that as\n    // well.\n    //\n    // Note that we do have a slight behavior difference with TemplateDefinitionBuilder: although\n    // TDB emits `property` instructions for dynamic attributes, styles, and classes, only styles\n    // and classes also get const collected into the `AttributeMarker.Bindings` field. Dynamic\n    // attribute bindings are missing from the consts entirely. We choose to emit them into the\n    // consts field anyway, to avoid creating special cases for something so arcane and nonsensical.\n    if (type === BindingType.Class || type === BindingType.Style || type === BindingType.Attribute && !isTextBinding) {\n      // TODO: These cases should be parse errors.\n      bindingType = BindingKind.Property;\n    }\n  }\n  return createBindingOp(xref, bindingType, name, convertAstWithInterpolation(view.job, value, i18nMessage), unit, securityContext, isTextBinding, isStructuralTemplateAttribute, templateKind, i18nMessage, sourceSpan);\n}\nfunction makeListenerHandlerOps(unit, handler, handlerSpan) {\n  handler = astOf(handler);\n  const handlerOps = new Array();\n  let handlerExprs = handler instanceof Chain ? handler.expressions : [handler];\n  if (handlerExprs.length === 0) {\n    throw new Error('Expected listener to have non-empty expression list.');\n  }\n  const expressions = handlerExprs.map(expr => convertAst(expr, unit.job, handlerSpan));\n  const returnExpr = expressions.pop();\n  handlerOps.push(...expressions.map(e => createStatementOp(new ExpressionStatement(e, e.sourceSpan))));\n  handlerOps.push(createStatementOp(new ReturnStatement(returnExpr, returnExpr.sourceSpan)));\n  return handlerOps;\n}\nfunction makeTwoWayListenerHandlerOps(unit, handler, handlerSpan) {\n  handler = astOf(handler);\n  const handlerOps = new Array();\n  if (handler instanceof Chain) {\n    if (handler.expressions.length === 1) {\n      handler = handler.expressions[0];\n    } else {\n      // This is validated during parsing already, but we do it here just in case.\n      throw new Error('Expected two-way listener to have a single expression.');\n    }\n  }\n  const handlerExpr = convertAst(handler, unit.job, handlerSpan);\n  const eventReference = new LexicalReadExpr('$event');\n  const twoWaySetExpr = new TwoWayBindingSetExpr(handlerExpr, eventReference);\n  handlerOps.push(createStatementOp(new ExpressionStatement(twoWaySetExpr)));\n  handlerOps.push(createStatementOp(new ReturnStatement(eventReference)));\n  return handlerOps;\n}\nfunction astOf(ast) {\n  return ast instanceof ASTWithSource ? ast.ast : ast;\n}\n/**\n * Process all of the local references on an element-like structure in the template AST and\n * convert them to their IR representation.\n */\nfunction ingestReferences(op, element) {\n  assertIsArray(op.localRefs);\n  for (const {\n    name,\n    value\n  } of element.references) {\n    op.localRefs.push({\n      name,\n      target: value\n    });\n  }\n}\n/**\n * Assert that the given value is an array.\n */\nfunction assertIsArray(value) {\n  if (!Array.isArray(value)) {\n    throw new Error(`AssertionError: expected an array`);\n  }\n}\n/**\n * Creates an absolute `ParseSourceSpan` from the relative `ParseSpan`.\n *\n * `ParseSpan` objects are relative to the start of the expression.\n * This method converts these to full `ParseSourceSpan` objects that\n * show where the span is within the overall source file.\n *\n * @param span the relative span to convert.\n * @param baseSourceSpan a span corresponding to the base of the expression tree.\n * @returns a `ParseSourceSpan` for the given span or null if no `baseSourceSpan` was provided.\n */\nfunction convertSourceSpan(span, baseSourceSpan) {\n  if (baseSourceSpan === null) {\n    return null;\n  }\n  const start = baseSourceSpan.start.moveBy(span.start);\n  const end = baseSourceSpan.start.moveBy(span.end);\n  const fullStart = baseSourceSpan.fullStart.moveBy(span.start);\n  return new ParseSourceSpan(start, end, fullStart);\n}\n/**\n * With the directive-based control flow users were able to conditionally project content using\n * the `*` syntax. E.g. `<div *ngIf=\"expr\" projectMe></div>` will be projected into\n * `<ng-content select=\"[projectMe]\"/>`, because the attributes and tag name from the `div` are\n * copied to the template via the template creation instruction. With `@if` and `@for` that is\n * not the case, because the conditional is placed *around* elements, rather than *on* them.\n * The result is that content projection won't work in the same way if a user converts from\n * `*ngIf` to `@if`.\n *\n * This function aims to cover the most common case by doing the same copying when a control flow\n * node has *one and only one* root element or template node.\n *\n * This approach comes with some caveats:\n * 1. As soon as any other node is added to the root, the copying behavior won't work anymore.\n *    A diagnostic will be added to flag cases like this and to explain how to work around it.\n * 2. If `preserveWhitespaces` is enabled, it's very likely that indentation will break this\n *    workaround, because it'll include an additional text node as the first child. We can work\n *    around it here, but in a discussion it was decided not to, because the user explicitly opted\n *    into preserving the whitespace and we would have to drop it from the generated code.\n *    The diagnostic mentioned point #1 will flag such cases to users.\n *\n * @returns Tag name to be used for the control flow template.\n */\nfunction ingestControlFlowInsertionPoint(unit, xref, node) {\n  let root = null;\n  for (const child of node.children) {\n    // Skip over comment nodes.\n    if (child instanceof Comment$1) {\n      continue;\n    }\n    // We can only infer the tag name/attributes if there's a single root node.\n    if (root !== null) {\n      return null;\n    }\n    // Root nodes can only elements or templates with a tag name (e.g. `<div *foo></div>`).\n    if (child instanceof Element$1 || child instanceof Template && child.tagName !== null) {\n      root = child;\n    }\n  }\n  // If we've found a single root node, its tag name and attributes can be\n  // copied to the surrounding template to be used for content projection.\n  if (root !== null) {\n    // Collect the static attributes for content projection purposes.\n    for (const attr of root.attributes) {\n      const securityContext = domSchema.securityContext(NG_TEMPLATE_TAG_NAME, attr.name, true);\n      unit.update.push(createBindingOp(xref, BindingKind.Attribute, attr.name, literal(attr.value), null, securityContext, true, false, null, asMessage(attr.i18n), attr.sourceSpan));\n    }\n    // Also collect the inputs since they participate in content projection as well.\n    // Note that TDB used to collect the outputs as well, but it wasn't passing them into\n    // the template instruction. Here we just don't collect them.\n    for (const attr of root.inputs) {\n      if (attr.type !== BindingType.Animation && attr.type !== BindingType.Attribute) {\n        const securityContext = domSchema.securityContext(NG_TEMPLATE_TAG_NAME, attr.name, true);\n        unit.create.push(createExtractedAttributeOp(xref, BindingKind.Property, null, attr.name, null, null, null, securityContext));\n      }\n    }\n    const tagName = root instanceof Element$1 ? root.name : root.tagName;\n    // Don't pass along `ng-template` tag name since it enables directive matching.\n    return tagName === NG_TEMPLATE_TAG_NAME ? null : tagName;\n  }\n  return null;\n}\n\n//  if (rf & flags) { .. }\nfunction renderFlagCheckIfStmt(flags, statements) {\n  return ifStmt(variable(RENDER_FLAGS).bitwiseAnd(literal(flags), null, false), statements);\n}\n/**\n * Translates query flags into `TQueryFlags` type in\n * packages/core/src/render3/interfaces/query.ts\n * @param query\n */\nfunction toQueryFlags(query) {\n  return (query.descendants ? 1 /* QueryFlags.descendants */ : 0 /* QueryFlags.none */) | (query.static ? 2 /* QueryFlags.isStatic */ : 0 /* QueryFlags.none */) | (query.emitDistinctChangesOnly ? 4 /* QueryFlags.emitDistinctChangesOnly */ : 0 /* QueryFlags.none */);\n}\nfunction getQueryPredicate(query, constantPool) {\n  if (Array.isArray(query.predicate)) {\n    let predicate = [];\n    query.predicate.forEach(selector => {\n      // Each item in predicates array may contain strings with comma-separated refs\n      // (for ex. 'ref, ref1, ..., refN'), thus we extract individual refs and store them\n      // as separate array entities\n      const selectors = selector.split(',').map(token => literal(token.trim()));\n      predicate.push(...selectors);\n    });\n    return constantPool.getConstLiteral(literalArr(predicate), true);\n  } else {\n    // The original predicate may have been wrapped in a `forwardRef()` call.\n    switch (query.predicate.forwardRef) {\n      case 0 /* ForwardRefHandling.None */:\n      case 2 /* ForwardRefHandling.Unwrapped */:\n        return query.predicate.expression;\n      case 1 /* ForwardRefHandling.Wrapped */:\n        return importExpr(Identifiers.resolveForwardRef).callFn([query.predicate.expression]);\n    }\n  }\n}\nfunction createQueryCreateCall(query, constantPool, queryTypeFns, prependParams) {\n  const parameters = [];\n  if (prependParams !== undefined) {\n    parameters.push(...prependParams);\n  }\n  if (query.isSignal) {\n    parameters.push(new ReadPropExpr(variable(CONTEXT_NAME), query.propertyName));\n  }\n  parameters.push(getQueryPredicate(query, constantPool), literal(toQueryFlags(query)));\n  if (query.read) {\n    parameters.push(query.read);\n  }\n  const queryCreateFn = query.isSignal ? queryTypeFns.signalBased : queryTypeFns.nonSignal;\n  return importExpr(queryCreateFn).callFn(parameters);\n}\nconst queryAdvancePlaceholder = Symbol('queryAdvancePlaceholder');\n/**\n * Collapses query advance placeholders in a list of statements.\n *\n * This allows for less generated code because multiple sibling query advance\n * statements can be collapsed into a single call with the count as argument.\n *\n * e.g.\n *\n * ```ts\n *   bla();\n *   queryAdvance();\n *   queryAdvance();\n *   bla();\n * ```\n *\n *   --> will turn into\n *\n * ```\n *   bla();\n *   queryAdvance(2);\n *   bla();\n * ```\n */\nfunction collapseAdvanceStatements(statements) {\n  const result = [];\n  let advanceCollapseCount = 0;\n  const flushAdvanceCount = () => {\n    if (advanceCollapseCount > 0) {\n      result.unshift(importExpr(Identifiers.queryAdvance).callFn(advanceCollapseCount === 1 ? [] : [literal(advanceCollapseCount)]).toStmt());\n      advanceCollapseCount = 0;\n    }\n  };\n  // Iterate through statements in reverse and collapse advance placeholders.\n  for (let i = statements.length - 1; i >= 0; i--) {\n    const st = statements[i];\n    if (st === queryAdvancePlaceholder) {\n      advanceCollapseCount++;\n    } else {\n      flushAdvanceCount();\n      result.unshift(st);\n    }\n  }\n  flushAdvanceCount();\n  return result;\n}\n// Define and update any view queries\nfunction createViewQueriesFunction(viewQueries, constantPool, name) {\n  const createStatements = [];\n  const updateStatements = [];\n  const tempAllocator = temporaryAllocator(st => updateStatements.push(st), TEMPORARY_NAME);\n  viewQueries.forEach(query => {\n    // creation call, e.g. r3.viewQuery(somePredicate, true) or\n    //                r3.viewQuerySignal(ctx.prop, somePredicate, true);\n    const queryDefinitionCall = createQueryCreateCall(query, constantPool, {\n      signalBased: Identifiers.viewQuerySignal,\n      nonSignal: Identifiers.viewQuery\n    });\n    createStatements.push(queryDefinitionCall.toStmt());\n    // Signal queries update lazily and we just advance the index.\n    if (query.isSignal) {\n      updateStatements.push(queryAdvancePlaceholder);\n      return;\n    }\n    // update, e.g. (r3.queryRefresh(tmp = r3.loadQuery()) && (ctx.someDir = tmp));\n    const temporary = tempAllocator();\n    const getQueryList = importExpr(Identifiers.loadQuery).callFn([]);\n    const refresh = importExpr(Identifiers.queryRefresh).callFn([temporary.set(getQueryList)]);\n    const updateDirective = variable(CONTEXT_NAME).prop(query.propertyName).set(query.first ? temporary.prop('first') : temporary);\n    updateStatements.push(refresh.and(updateDirective).toStmt());\n  });\n  const viewQueryFnName = name ? `${name}_Query` : null;\n  return fn([new FnParam(RENDER_FLAGS, NUMBER_TYPE), new FnParam(CONTEXT_NAME, null)], [renderFlagCheckIfStmt(1 /* core.RenderFlags.Create */, createStatements), renderFlagCheckIfStmt(2 /* core.RenderFlags.Update */, collapseAdvanceStatements(updateStatements))], INFERRED_TYPE, null, viewQueryFnName);\n}\n// Define and update any content queries\nfunction createContentQueriesFunction(queries, constantPool, name) {\n  const createStatements = [];\n  const updateStatements = [];\n  const tempAllocator = temporaryAllocator(st => updateStatements.push(st), TEMPORARY_NAME);\n  for (const query of queries) {\n    // creation, e.g. r3.contentQuery(dirIndex, somePredicate, true, null) or\n    //                r3.contentQuerySignal(dirIndex, propName, somePredicate, <flags>, <read>).\n    createStatements.push(createQueryCreateCall(query, constantPool, {\n      nonSignal: Identifiers.contentQuery,\n      signalBased: Identifiers.contentQuerySignal\n    }, /* prependParams */[variable('dirIndex')]).toStmt());\n    // Signal queries update lazily and we just advance the index.\n    if (query.isSignal) {\n      updateStatements.push(queryAdvancePlaceholder);\n      continue;\n    }\n    // update, e.g. (r3.queryRefresh(tmp = r3.loadQuery()) && (ctx.someDir = tmp));\n    const temporary = tempAllocator();\n    const getQueryList = importExpr(Identifiers.loadQuery).callFn([]);\n    const refresh = importExpr(Identifiers.queryRefresh).callFn([temporary.set(getQueryList)]);\n    const updateDirective = variable(CONTEXT_NAME).prop(query.propertyName).set(query.first ? temporary.prop('first') : temporary);\n    updateStatements.push(refresh.and(updateDirective).toStmt());\n  }\n  const contentQueriesFnName = name ? `${name}_ContentQueries` : null;\n  return fn([new FnParam(RENDER_FLAGS, NUMBER_TYPE), new FnParam(CONTEXT_NAME, null), new FnParam('dirIndex', null)], [renderFlagCheckIfStmt(1 /* core.RenderFlags.Create */, createStatements), renderFlagCheckIfStmt(2 /* core.RenderFlags.Update */, collapseAdvanceStatements(updateStatements))], INFERRED_TYPE, null, contentQueriesFnName);\n}\nclass HtmlParser extends Parser {\n  constructor() {\n    super(getHtmlTagDefinition);\n  }\n  parse(source, url, options) {\n    return super.parse(source, url, options);\n  }\n}\nconst PRESERVE_WS_ATTR_NAME = 'ngPreserveWhitespaces';\nconst SKIP_WS_TRIM_TAGS = new Set(['pre', 'template', 'textarea', 'script', 'style']);\n// Equivalent to \\s with \\u00a0 (non-breaking space) excluded.\n// Based on https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp\nconst WS_CHARS = ' \\f\\n\\r\\t\\v\\u1680\\u180e\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000\\ufeff';\nconst NO_WS_REGEXP = new RegExp(`[^${WS_CHARS}]`);\nconst WS_REPLACE_REGEXP = new RegExp(`[${WS_CHARS}]{2,}`, 'g');\nfunction hasPreserveWhitespacesAttr(attrs) {\n  return attrs.some(attr => attr.name === PRESERVE_WS_ATTR_NAME);\n}\n/**\n * &ngsp; is a placeholder for non-removable space\n * &ngsp; is converted to the 0xE500 PUA (Private Use Areas) unicode character\n * and later on replaced by a space.\n */\nfunction replaceNgsp(value) {\n  // lexer is replacing the &ngsp; pseudo-entity with NGSP_UNICODE\n  return value.replace(new RegExp(NGSP_UNICODE, 'g'), ' ');\n}\n/**\n * This visitor can walk HTML parse tree and remove / trim text nodes using the following rules:\n * - consider spaces, tabs and new lines as whitespace characters;\n * - drop text nodes consisting of whitespace characters only;\n * - for all other text nodes replace consecutive whitespace characters with one space;\n * - convert &ngsp; pseudo-entity to a single space;\n *\n * Removal and trimming of whitespaces have positive performance impact (less code to generate\n * while compiling templates, faster view creation). At the same time it can be \"destructive\"\n * in some cases (whitespaces can influence layout). Because of the potential of breaking layout\n * this visitor is not activated by default in Angular 5 and people need to explicitly opt-in for\n * whitespace removal. The default option for whitespace removal will be revisited in Angular 6\n * and might be changed to \"on\" by default.\n */\nclass WhitespaceVisitor {\n  visitElement(element, context) {\n    if (SKIP_WS_TRIM_TAGS.has(element.name) || hasPreserveWhitespacesAttr(element.attrs)) {\n      // don't descent into elements where we need to preserve whitespaces\n      // but still visit all attributes to eliminate one used as a market to preserve WS\n      return new Element(element.name, visitAll(this, element.attrs), element.children, element.sourceSpan, element.startSourceSpan, element.endSourceSpan, element.i18n);\n    }\n    return new Element(element.name, element.attrs, visitAllWithSiblings(this, element.children), element.sourceSpan, element.startSourceSpan, element.endSourceSpan, element.i18n);\n  }\n  visitAttribute(attribute, context) {\n    return attribute.name !== PRESERVE_WS_ATTR_NAME ? attribute : null;\n  }\n  visitText(text, context) {\n    const isNotBlank = text.value.match(NO_WS_REGEXP);\n    const hasExpansionSibling = context && (context.prev instanceof Expansion || context.next instanceof Expansion);\n    if (isNotBlank || hasExpansionSibling) {\n      // Process the whitespace in the tokens of this Text node\n      const tokens = text.tokens.map(token => token.type === 5 /* TokenType.TEXT */ ? createWhitespaceProcessedTextToken(token) : token);\n      // Process the whitespace of the value of this Text node\n      const value = processWhitespace(text.value);\n      return new Text(value, text.sourceSpan, tokens, text.i18n);\n    }\n    return null;\n  }\n  visitComment(comment, context) {\n    return comment;\n  }\n  visitExpansion(expansion, context) {\n    return expansion;\n  }\n  visitExpansionCase(expansionCase, context) {\n    return expansionCase;\n  }\n  visitBlock(block, context) {\n    return new Block(block.name, block.parameters, visitAllWithSiblings(this, block.children), block.sourceSpan, block.nameSpan, block.startSourceSpan, block.endSourceSpan);\n  }\n  visitBlockParameter(parameter, context) {\n    return parameter;\n  }\n  visitLetDeclaration(decl, context) {\n    return decl;\n  }\n}\nfunction createWhitespaceProcessedTextToken({\n  type,\n  parts,\n  sourceSpan\n}) {\n  return {\n    type,\n    parts: [processWhitespace(parts[0])],\n    sourceSpan\n  };\n}\nfunction processWhitespace(text) {\n  return replaceNgsp(text).replace(WS_REPLACE_REGEXP, ' ');\n}\nfunction removeWhitespaces(htmlAstWithErrors) {\n  return new ParseTreeResult(visitAll(new WhitespaceVisitor(), htmlAstWithErrors.rootNodes), htmlAstWithErrors.errors);\n}\nfunction visitAllWithSiblings(visitor, nodes) {\n  const result = [];\n  nodes.forEach((ast, i) => {\n    const context = {\n      prev: nodes[i - 1],\n      next: nodes[i + 1]\n    };\n    const astResult = ast.visit(visitor, context);\n    if (astResult) {\n      result.push(astResult);\n    }\n  });\n  return result;\n}\nconst PROPERTY_PARTS_SEPARATOR = '.';\nconst ATTRIBUTE_PREFIX = 'attr';\nconst CLASS_PREFIX = 'class';\nconst STYLE_PREFIX = 'style';\nconst TEMPLATE_ATTR_PREFIX$1 = '*';\nconst ANIMATE_PROP_PREFIX = 'animate-';\n/**\n * Parses bindings in templates and in the directive host area.\n */\nclass BindingParser {\n  constructor(_exprParser, _interpolationConfig, _schemaRegistry, errors, _allowInvalidAssignmentEvents = false) {\n    this._exprParser = _exprParser;\n    this._interpolationConfig = _interpolationConfig;\n    this._schemaRegistry = _schemaRegistry;\n    this.errors = errors;\n    this._allowInvalidAssignmentEvents = _allowInvalidAssignmentEvents;\n  }\n  get interpolationConfig() {\n    return this._interpolationConfig;\n  }\n  createBoundHostProperties(properties, sourceSpan) {\n    const boundProps = [];\n    for (const propName of Object.keys(properties)) {\n      const expression = properties[propName];\n      if (typeof expression === 'string') {\n        this.parsePropertyBinding(propName, expression, true, false, sourceSpan, sourceSpan.start.offset, undefined, [],\n        // Use the `sourceSpan` for  `keySpan`. This isn't really accurate, but neither is the\n        // sourceSpan, as it represents the sourceSpan of the host itself rather than the\n        // source of the host binding (which doesn't exist in the template). Regardless,\n        // neither of these values are used in Ivy but are only here to satisfy the function\n        // signature. This should likely be refactored in the future so that `sourceSpan`\n        // isn't being used inaccurately.\n        boundProps, sourceSpan);\n      } else {\n        this._reportError(`Value of the host property binding \"${propName}\" needs to be a string representing an expression but got \"${expression}\" (${typeof expression})`, sourceSpan);\n      }\n    }\n    return boundProps;\n  }\n  createDirectiveHostEventAsts(hostListeners, sourceSpan) {\n    const targetEvents = [];\n    for (const propName of Object.keys(hostListeners)) {\n      const expression = hostListeners[propName];\n      if (typeof expression === 'string') {\n        // Use the `sourceSpan` for  `keySpan` and `handlerSpan`. This isn't really accurate, but\n        // neither is the `sourceSpan`, as it represents the `sourceSpan` of the host itself\n        // rather than the source of the host binding (which doesn't exist in the template).\n        // Regardless, neither of these values are used in Ivy but are only here to satisfy the\n        // function signature. This should likely be refactored in the future so that `sourceSpan`\n        // isn't being used inaccurately.\n        this.parseEvent(propName, expression, /* isAssignmentEvent */false, sourceSpan, sourceSpan, [], targetEvents, sourceSpan);\n      } else {\n        this._reportError(`Value of the host listener \"${propName}\" needs to be a string representing an expression but got \"${expression}\" (${typeof expression})`, sourceSpan);\n      }\n    }\n    return targetEvents;\n  }\n  parseInterpolation(value, sourceSpan, interpolatedTokens) {\n    const sourceInfo = sourceSpan.start.toString();\n    const absoluteOffset = sourceSpan.fullStart.offset;\n    try {\n      const ast = this._exprParser.parseInterpolation(value, sourceInfo, absoluteOffset, interpolatedTokens, this._interpolationConfig);\n      if (ast) this._reportExpressionParserErrors(ast.errors, sourceSpan);\n      return ast;\n    } catch (e) {\n      this._reportError(`${e}`, sourceSpan);\n      return this._exprParser.wrapLiteralPrimitive('ERROR', sourceInfo, absoluteOffset);\n    }\n  }\n  /**\n   * Similar to `parseInterpolation`, but treats the provided string as a single expression\n   * element that would normally appear within the interpolation prefix and suffix (`{{` and `}}`).\n   * This is used for parsing the switch expression in ICUs.\n   */\n  parseInterpolationExpression(expression, sourceSpan) {\n    const sourceInfo = sourceSpan.start.toString();\n    const absoluteOffset = sourceSpan.start.offset;\n    try {\n      const ast = this._exprParser.parseInterpolationExpression(expression, sourceInfo, absoluteOffset);\n      if (ast) this._reportExpressionParserErrors(ast.errors, sourceSpan);\n      return ast;\n    } catch (e) {\n      this._reportError(`${e}`, sourceSpan);\n      return this._exprParser.wrapLiteralPrimitive('ERROR', sourceInfo, absoluteOffset);\n    }\n  }\n  /**\n   * Parses the bindings in a microsyntax expression, and converts them to\n   * `ParsedProperty` or `ParsedVariable`.\n   *\n   * @param tplKey template binding name\n   * @param tplValue template binding value\n   * @param sourceSpan span of template binding relative to entire the template\n   * @param absoluteValueOffset start of the tplValue relative to the entire template\n   * @param targetMatchableAttrs potential attributes to match in the template\n   * @param targetProps target property bindings in the template\n   * @param targetVars target variables in the template\n   */\n  parseInlineTemplateBinding(tplKey, tplValue, sourceSpan, absoluteValueOffset, targetMatchableAttrs, targetProps, targetVars, isIvyAst) {\n    const absoluteKeyOffset = sourceSpan.start.offset + TEMPLATE_ATTR_PREFIX$1.length;\n    const bindings = this._parseTemplateBindings(tplKey, tplValue, sourceSpan, absoluteKeyOffset, absoluteValueOffset);\n    for (const binding of bindings) {\n      // sourceSpan is for the entire HTML attribute. bindingSpan is for a particular\n      // binding within the microsyntax expression so it's more narrow than sourceSpan.\n      const bindingSpan = moveParseSourceSpan(sourceSpan, binding.sourceSpan);\n      const key = binding.key.source;\n      const keySpan = moveParseSourceSpan(sourceSpan, binding.key.span);\n      if (binding instanceof VariableBinding) {\n        const value = binding.value ? binding.value.source : '$implicit';\n        const valueSpan = binding.value ? moveParseSourceSpan(sourceSpan, binding.value.span) : undefined;\n        targetVars.push(new ParsedVariable(key, value, bindingSpan, keySpan, valueSpan));\n      } else if (binding.value) {\n        const srcSpan = isIvyAst ? bindingSpan : sourceSpan;\n        const valueSpan = moveParseSourceSpan(sourceSpan, binding.value.ast.sourceSpan);\n        this._parsePropertyAst(key, binding.value, false, srcSpan, keySpan, valueSpan, targetMatchableAttrs, targetProps);\n      } else {\n        targetMatchableAttrs.push([key, '' /* value */]);\n        // Since this is a literal attribute with no RHS, source span should be\n        // just the key span.\n        this.parseLiteralAttr(key, null /* value */, keySpan, absoluteValueOffset, undefined /* valueSpan */, targetMatchableAttrs, targetProps, keySpan);\n      }\n    }\n  }\n  /**\n   * Parses the bindings in a microsyntax expression, e.g.\n   * ```\n   *    <tag *tplKey=\"let value1 = prop; let value2 = localVar\">\n   * ```\n   *\n   * @param tplKey template binding name\n   * @param tplValue template binding value\n   * @param sourceSpan span of template binding relative to entire the template\n   * @param absoluteKeyOffset start of the `tplKey`\n   * @param absoluteValueOffset start of the `tplValue`\n   */\n  _parseTemplateBindings(tplKey, tplValue, sourceSpan, absoluteKeyOffset, absoluteValueOffset) {\n    const sourceInfo = sourceSpan.start.toString();\n    try {\n      const bindingsResult = this._exprParser.parseTemplateBindings(tplKey, tplValue, sourceInfo, absoluteKeyOffset, absoluteValueOffset);\n      this._reportExpressionParserErrors(bindingsResult.errors, sourceSpan);\n      bindingsResult.warnings.forEach(warning => {\n        this._reportError(warning, sourceSpan, ParseErrorLevel.WARNING);\n      });\n      return bindingsResult.templateBindings;\n    } catch (e) {\n      this._reportError(`${e}`, sourceSpan);\n      return [];\n    }\n  }\n  parseLiteralAttr(name, value, sourceSpan, absoluteOffset, valueSpan, targetMatchableAttrs, targetProps, keySpan) {\n    if (isAnimationLabel(name)) {\n      name = name.substring(1);\n      if (keySpan !== undefined) {\n        keySpan = moveParseSourceSpan(keySpan, new AbsoluteSourceSpan(keySpan.start.offset + 1, keySpan.end.offset));\n      }\n      if (value) {\n        this._reportError(`Assigning animation triggers via @prop=\"exp\" attributes with an expression is invalid.` + ` Use property bindings (e.g. [@prop]=\"exp\") or use an attribute without a value (e.g. @prop) instead.`, sourceSpan, ParseErrorLevel.ERROR);\n      }\n      this._parseAnimation(name, value, sourceSpan, absoluteOffset, keySpan, valueSpan, targetMatchableAttrs, targetProps);\n    } else {\n      targetProps.push(new ParsedProperty(name, this._exprParser.wrapLiteralPrimitive(value, '', absoluteOffset), ParsedPropertyType.LITERAL_ATTR, sourceSpan, keySpan, valueSpan));\n    }\n  }\n  parsePropertyBinding(name, expression, isHost, isPartOfAssignmentBinding, sourceSpan, absoluteOffset, valueSpan, targetMatchableAttrs, targetProps, keySpan) {\n    if (name.length === 0) {\n      this._reportError(`Property name is missing in binding`, sourceSpan);\n    }\n    let isAnimationProp = false;\n    if (name.startsWith(ANIMATE_PROP_PREFIX)) {\n      isAnimationProp = true;\n      name = name.substring(ANIMATE_PROP_PREFIX.length);\n      if (keySpan !== undefined) {\n        keySpan = moveParseSourceSpan(keySpan, new AbsoluteSourceSpan(keySpan.start.offset + ANIMATE_PROP_PREFIX.length, keySpan.end.offset));\n      }\n    } else if (isAnimationLabel(name)) {\n      isAnimationProp = true;\n      name = name.substring(1);\n      if (keySpan !== undefined) {\n        keySpan = moveParseSourceSpan(keySpan, new AbsoluteSourceSpan(keySpan.start.offset + 1, keySpan.end.offset));\n      }\n    }\n    if (isAnimationProp) {\n      this._parseAnimation(name, expression, sourceSpan, absoluteOffset, keySpan, valueSpan, targetMatchableAttrs, targetProps);\n    } else {\n      this._parsePropertyAst(name, this.parseBinding(expression, isHost, valueSpan || sourceSpan, absoluteOffset), isPartOfAssignmentBinding, sourceSpan, keySpan, valueSpan, targetMatchableAttrs, targetProps);\n    }\n  }\n  parsePropertyInterpolation(name, value, sourceSpan, valueSpan, targetMatchableAttrs, targetProps, keySpan, interpolatedTokens) {\n    const expr = this.parseInterpolation(value, valueSpan || sourceSpan, interpolatedTokens);\n    if (expr) {\n      this._parsePropertyAst(name, expr, false, sourceSpan, keySpan, valueSpan, targetMatchableAttrs, targetProps);\n      return true;\n    }\n    return false;\n  }\n  _parsePropertyAst(name, ast, isPartOfAssignmentBinding, sourceSpan, keySpan, valueSpan, targetMatchableAttrs, targetProps) {\n    targetMatchableAttrs.push([name, ast.source]);\n    targetProps.push(new ParsedProperty(name, ast, isPartOfAssignmentBinding ? ParsedPropertyType.TWO_WAY : ParsedPropertyType.DEFAULT, sourceSpan, keySpan, valueSpan));\n  }\n  _parseAnimation(name, expression, sourceSpan, absoluteOffset, keySpan, valueSpan, targetMatchableAttrs, targetProps) {\n    if (name.length === 0) {\n      this._reportError('Animation trigger is missing', sourceSpan);\n    }\n    // This will occur when a @trigger is not paired with an expression.\n    // For animations it is valid to not have an expression since */void\n    // states will be applied by angular when the element is attached/detached\n    const ast = this.parseBinding(expression || 'undefined', false, valueSpan || sourceSpan, absoluteOffset);\n    targetMatchableAttrs.push([name, ast.source]);\n    targetProps.push(new ParsedProperty(name, ast, ParsedPropertyType.ANIMATION, sourceSpan, keySpan, valueSpan));\n  }\n  parseBinding(value, isHostBinding, sourceSpan, absoluteOffset) {\n    const sourceInfo = (sourceSpan && sourceSpan.start || '(unknown)').toString();\n    try {\n      const ast = isHostBinding ? this._exprParser.parseSimpleBinding(value, sourceInfo, absoluteOffset, this._interpolationConfig) : this._exprParser.parseBinding(value, sourceInfo, absoluteOffset, this._interpolationConfig);\n      if (ast) this._reportExpressionParserErrors(ast.errors, sourceSpan);\n      return ast;\n    } catch (e) {\n      this._reportError(`${e}`, sourceSpan);\n      return this._exprParser.wrapLiteralPrimitive('ERROR', sourceInfo, absoluteOffset);\n    }\n  }\n  createBoundElementProperty(elementSelector, boundProp, skipValidation = false, mapPropertyName = true) {\n    if (boundProp.isAnimation) {\n      return new BoundElementProperty(boundProp.name, BindingType.Animation, SecurityContext.NONE, boundProp.expression, null, boundProp.sourceSpan, boundProp.keySpan, boundProp.valueSpan);\n    }\n    let unit = null;\n    let bindingType = undefined;\n    let boundPropertyName = null;\n    const parts = boundProp.name.split(PROPERTY_PARTS_SEPARATOR);\n    let securityContexts = undefined;\n    // Check for special cases (prefix style, attr, class)\n    if (parts.length > 1) {\n      if (parts[0] == ATTRIBUTE_PREFIX) {\n        boundPropertyName = parts.slice(1).join(PROPERTY_PARTS_SEPARATOR);\n        if (!skipValidation) {\n          this._validatePropertyOrAttributeName(boundPropertyName, boundProp.sourceSpan, true);\n        }\n        securityContexts = calcPossibleSecurityContexts(this._schemaRegistry, elementSelector, boundPropertyName, true);\n        const nsSeparatorIdx = boundPropertyName.indexOf(':');\n        if (nsSeparatorIdx > -1) {\n          const ns = boundPropertyName.substring(0, nsSeparatorIdx);\n          const name = boundPropertyName.substring(nsSeparatorIdx + 1);\n          boundPropertyName = mergeNsAndName(ns, name);\n        }\n        bindingType = BindingType.Attribute;\n      } else if (parts[0] == CLASS_PREFIX) {\n        boundPropertyName = parts[1];\n        bindingType = BindingType.Class;\n        securityContexts = [SecurityContext.NONE];\n      } else if (parts[0] == STYLE_PREFIX) {\n        unit = parts.length > 2 ? parts[2] : null;\n        boundPropertyName = parts[1];\n        bindingType = BindingType.Style;\n        securityContexts = [SecurityContext.STYLE];\n      }\n    }\n    // If not a special case, use the full property name\n    if (boundPropertyName === null) {\n      const mappedPropName = this._schemaRegistry.getMappedPropName(boundProp.name);\n      boundPropertyName = mapPropertyName ? mappedPropName : boundProp.name;\n      securityContexts = calcPossibleSecurityContexts(this._schemaRegistry, elementSelector, mappedPropName, false);\n      bindingType = boundProp.type === ParsedPropertyType.TWO_WAY ? BindingType.TwoWay : BindingType.Property;\n      if (!skipValidation) {\n        this._validatePropertyOrAttributeName(mappedPropName, boundProp.sourceSpan, false);\n      }\n    }\n    return new BoundElementProperty(boundPropertyName, bindingType, securityContexts[0], boundProp.expression, unit, boundProp.sourceSpan, boundProp.keySpan, boundProp.valueSpan);\n  }\n  // TODO: keySpan should be required but was made optional to avoid changing VE parser.\n  parseEvent(name, expression, isAssignmentEvent, sourceSpan, handlerSpan, targetMatchableAttrs, targetEvents, keySpan) {\n    if (name.length === 0) {\n      this._reportError(`Event name is missing in binding`, sourceSpan);\n    }\n    if (isAnimationLabel(name)) {\n      name = name.slice(1);\n      if (keySpan !== undefined) {\n        keySpan = moveParseSourceSpan(keySpan, new AbsoluteSourceSpan(keySpan.start.offset + 1, keySpan.end.offset));\n      }\n      this._parseAnimationEvent(name, expression, sourceSpan, handlerSpan, targetEvents, keySpan);\n    } else {\n      this._parseRegularEvent(name, expression, isAssignmentEvent, sourceSpan, handlerSpan, targetMatchableAttrs, targetEvents, keySpan);\n    }\n  }\n  calcPossibleSecurityContexts(selector, propName, isAttribute) {\n    const prop = this._schemaRegistry.getMappedPropName(propName);\n    return calcPossibleSecurityContexts(this._schemaRegistry, selector, prop, isAttribute);\n  }\n  _parseAnimationEvent(name, expression, sourceSpan, handlerSpan, targetEvents, keySpan) {\n    const matches = splitAtPeriod(name, [name, '']);\n    const eventName = matches[0];\n    const phase = matches[1].toLowerCase();\n    const ast = this._parseAction(expression, handlerSpan);\n    targetEvents.push(new ParsedEvent(eventName, phase, ParsedEventType.Animation, ast, sourceSpan, handlerSpan, keySpan));\n    if (eventName.length === 0) {\n      this._reportError(`Animation event name is missing in binding`, sourceSpan);\n    }\n    if (phase) {\n      if (phase !== 'start' && phase !== 'done') {\n        this._reportError(`The provided animation output phase value \"${phase}\" for \"@${eventName}\" is not supported (use start or done)`, sourceSpan);\n      }\n    } else {\n      this._reportError(`The animation trigger output event (@${eventName}) is missing its phase value name (start or done are currently supported)`, sourceSpan);\n    }\n  }\n  _parseRegularEvent(name, expression, isAssignmentEvent, sourceSpan, handlerSpan, targetMatchableAttrs, targetEvents, keySpan) {\n    // long format: 'target: eventName'\n    const [target, eventName] = splitAtColon(name, [null, name]);\n    const prevErrorCount = this.errors.length;\n    const ast = this._parseAction(expression, handlerSpan);\n    const isValid = this.errors.length === prevErrorCount;\n    targetMatchableAttrs.push([name, ast.source]);\n    // Don't try to validate assignment events if there were other\n    // parsing errors to avoid adding more noise to the error logs.\n    if (isAssignmentEvent && isValid && !this._isAllowedAssignmentEvent(ast)) {\n      this._reportError('Unsupported expression in a two-way binding', sourceSpan);\n    }\n    targetEvents.push(new ParsedEvent(eventName, target, isAssignmentEvent ? ParsedEventType.TwoWay : ParsedEventType.Regular, ast, sourceSpan, handlerSpan, keySpan));\n    // Don't detect directives for event names for now,\n    // so don't add the event name to the matchableAttrs\n  }\n  _parseAction(value, sourceSpan) {\n    const sourceInfo = (sourceSpan && sourceSpan.start || '(unknown').toString();\n    const absoluteOffset = sourceSpan && sourceSpan.start ? sourceSpan.start.offset : 0;\n    try {\n      const ast = this._exprParser.parseAction(value, sourceInfo, absoluteOffset, this._interpolationConfig);\n      if (ast) {\n        this._reportExpressionParserErrors(ast.errors, sourceSpan);\n      }\n      if (!ast || ast.ast instanceof EmptyExpr$1) {\n        this._reportError(`Empty expressions are not allowed`, sourceSpan);\n        return this._exprParser.wrapLiteralPrimitive('ERROR', sourceInfo, absoluteOffset);\n      }\n      return ast;\n    } catch (e) {\n      this._reportError(`${e}`, sourceSpan);\n      return this._exprParser.wrapLiteralPrimitive('ERROR', sourceInfo, absoluteOffset);\n    }\n  }\n  _reportError(message, sourceSpan, level = ParseErrorLevel.ERROR) {\n    this.errors.push(new ParseError(sourceSpan, message, level));\n  }\n  _reportExpressionParserErrors(errors, sourceSpan) {\n    for (const error of errors) {\n      this._reportError(error.message, sourceSpan);\n    }\n  }\n  /**\n   * @param propName the name of the property / attribute\n   * @param sourceSpan\n   * @param isAttr true when binding to an attribute\n   */\n  _validatePropertyOrAttributeName(propName, sourceSpan, isAttr) {\n    const report = isAttr ? this._schemaRegistry.validateAttribute(propName) : this._schemaRegistry.validateProperty(propName);\n    if (report.error) {\n      this._reportError(report.msg, sourceSpan, ParseErrorLevel.ERROR);\n    }\n  }\n  /**\n   * Returns whether a parsed AST is allowed to be used within the event side of a two-way binding.\n   * @param ast Parsed AST to be checked.\n   */\n  _isAllowedAssignmentEvent(ast) {\n    if (ast instanceof ASTWithSource) {\n      return this._isAllowedAssignmentEvent(ast.ast);\n    }\n    if (ast instanceof NonNullAssert) {\n      return this._isAllowedAssignmentEvent(ast.expression);\n    }\n    if (ast instanceof PropertyRead || ast instanceof KeyedRead) {\n      return true;\n    }\n    // TODO(crisbeto): this logic is only here to support the automated migration away\n    // from invalid bindings. It should be removed once the migration is deleted.\n    if (!this._allowInvalidAssignmentEvents) {\n      return false;\n    }\n    if (ast instanceof Binary) {\n      return (ast.operation === '&&' || ast.operation === '||' || ast.operation === '??') && (ast.right instanceof PropertyRead || ast.right instanceof KeyedRead);\n    }\n    return ast instanceof Conditional || ast instanceof PrefixNot;\n  }\n}\nclass PipeCollector extends RecursiveAstVisitor {\n  constructor() {\n    super(...arguments);\n    this.pipes = new Map();\n  }\n  visitPipe(ast, context) {\n    this.pipes.set(ast.name, ast);\n    ast.exp.visit(this);\n    this.visitAll(ast.args, context);\n    return null;\n  }\n}\nfunction isAnimationLabel(name) {\n  return name[0] == '@';\n}\nfunction calcPossibleSecurityContexts(registry, selector, propName, isAttribute) {\n  const ctxs = [];\n  CssSelector.parse(selector).forEach(selector => {\n    const elementNames = selector.element ? [selector.element] : registry.allKnownElementNames();\n    const notElementNames = new Set(selector.notSelectors.filter(selector => selector.isElementSelector()).map(selector => selector.element));\n    const possibleElementNames = elementNames.filter(elementName => !notElementNames.has(elementName));\n    ctxs.push(...possibleElementNames.map(elementName => registry.securityContext(elementName, propName, isAttribute)));\n  });\n  return ctxs.length === 0 ? [SecurityContext.NONE] : Array.from(new Set(ctxs)).sort();\n}\n/**\n * Compute a new ParseSourceSpan based off an original `sourceSpan` by using\n * absolute offsets from the specified `absoluteSpan`.\n *\n * @param sourceSpan original source span\n * @param absoluteSpan absolute source span to move to\n */\nfunction moveParseSourceSpan(sourceSpan, absoluteSpan) {\n  // The difference of two absolute offsets provide the relative offset\n  const startDiff = absoluteSpan.start - sourceSpan.start.offset;\n  const endDiff = absoluteSpan.end - sourceSpan.end.offset;\n  return new ParseSourceSpan(sourceSpan.start.moveBy(startDiff), sourceSpan.end.moveBy(endDiff), sourceSpan.fullStart.moveBy(startDiff), sourceSpan.details);\n}\n\n// Some of the code comes from WebComponents.JS\n// https://github.com/webcomponents/webcomponentsjs/blob/master/src/HTMLImports/path.js\nfunction isStyleUrlResolvable(url) {\n  if (url == null || url.length === 0 || url[0] == '/') return false;\n  const schemeMatch = url.match(URL_WITH_SCHEMA_REGEXP);\n  return schemeMatch === null || schemeMatch[1] == 'package' || schemeMatch[1] == 'asset';\n}\nconst URL_WITH_SCHEMA_REGEXP = /^([^:/?#]+):/;\nconst NG_CONTENT_SELECT_ATTR = 'select';\nconst LINK_ELEMENT = 'link';\nconst LINK_STYLE_REL_ATTR = 'rel';\nconst LINK_STYLE_HREF_ATTR = 'href';\nconst LINK_STYLE_REL_VALUE = 'stylesheet';\nconst STYLE_ELEMENT = 'style';\nconst SCRIPT_ELEMENT = 'script';\nconst NG_NON_BINDABLE_ATTR = 'ngNonBindable';\nconst NG_PROJECT_AS = 'ngProjectAs';\nfunction preparseElement(ast) {\n  let selectAttr = null;\n  let hrefAttr = null;\n  let relAttr = null;\n  let nonBindable = false;\n  let projectAs = '';\n  ast.attrs.forEach(attr => {\n    const lcAttrName = attr.name.toLowerCase();\n    if (lcAttrName == NG_CONTENT_SELECT_ATTR) {\n      selectAttr = attr.value;\n    } else if (lcAttrName == LINK_STYLE_HREF_ATTR) {\n      hrefAttr = attr.value;\n    } else if (lcAttrName == LINK_STYLE_REL_ATTR) {\n      relAttr = attr.value;\n    } else if (attr.name == NG_NON_BINDABLE_ATTR) {\n      nonBindable = true;\n    } else if (attr.name == NG_PROJECT_AS) {\n      if (attr.value.length > 0) {\n        projectAs = attr.value;\n      }\n    }\n  });\n  selectAttr = normalizeNgContentSelect(selectAttr);\n  const nodeName = ast.name.toLowerCase();\n  let type = PreparsedElementType.OTHER;\n  if (isNgContent(nodeName)) {\n    type = PreparsedElementType.NG_CONTENT;\n  } else if (nodeName == STYLE_ELEMENT) {\n    type = PreparsedElementType.STYLE;\n  } else if (nodeName == SCRIPT_ELEMENT) {\n    type = PreparsedElementType.SCRIPT;\n  } else if (nodeName == LINK_ELEMENT && relAttr == LINK_STYLE_REL_VALUE) {\n    type = PreparsedElementType.STYLESHEET;\n  }\n  return new PreparsedElement(type, selectAttr, hrefAttr, nonBindable, projectAs);\n}\nvar PreparsedElementType;\n(function (PreparsedElementType) {\n  PreparsedElementType[PreparsedElementType[\"NG_CONTENT\"] = 0] = \"NG_CONTENT\";\n  PreparsedElementType[PreparsedElementType[\"STYLE\"] = 1] = \"STYLE\";\n  PreparsedElementType[PreparsedElementType[\"STYLESHEET\"] = 2] = \"STYLESHEET\";\n  PreparsedElementType[PreparsedElementType[\"SCRIPT\"] = 3] = \"SCRIPT\";\n  PreparsedElementType[PreparsedElementType[\"OTHER\"] = 4] = \"OTHER\";\n})(PreparsedElementType || (PreparsedElementType = {}));\nclass PreparsedElement {\n  constructor(type, selectAttr, hrefAttr, nonBindable, projectAs) {\n    this.type = type;\n    this.selectAttr = selectAttr;\n    this.hrefAttr = hrefAttr;\n    this.nonBindable = nonBindable;\n    this.projectAs = projectAs;\n  }\n}\nfunction normalizeNgContentSelect(selectAttr) {\n  if (selectAttr === null || selectAttr.length === 0) {\n    return '*';\n  }\n  return selectAttr;\n}\n\n/** Pattern for the expression in a for loop block. */\nconst FOR_LOOP_EXPRESSION_PATTERN = /^\\s*([0-9A-Za-z_$]*)\\s+of\\s+([\\S\\s]*)/;\n/** Pattern for the tracking expression in a for loop block. */\nconst FOR_LOOP_TRACK_PATTERN = /^track\\s+([\\S\\s]*)/;\n/** Pattern for the `as` expression in a conditional block. */\nconst CONDITIONAL_ALIAS_PATTERN = /^(as\\s)+(.*)/;\n/** Pattern used to identify an `else if` block. */\nconst ELSE_IF_PATTERN = /^else[^\\S\\r\\n]+if/;\n/** Pattern used to identify a `let` parameter. */\nconst FOR_LOOP_LET_PATTERN = /^let\\s+([\\S\\s]*)/;\n/**\n * Pattern to group a string into leading whitespace, non whitespace, and trailing whitespace.\n * Useful for getting the variable name span when a span can contain leading and trailing space.\n */\nconst CHARACTERS_IN_SURROUNDING_WHITESPACE_PATTERN = /(\\s*)(\\S+)(\\s*)/;\n/** Names of variables that are allowed to be used in the `let` expression of a `for` loop. */\nconst ALLOWED_FOR_LOOP_LET_VARIABLES = new Set(['$index', '$first', '$last', '$even', '$odd', '$count']);\n/**\n * Predicate function that determines if a block with\n * a specific name cam be connected to a `for` block.\n */\nfunction isConnectedForLoopBlock(name) {\n  return name === 'empty';\n}\n/**\n * Predicate function that determines if a block with\n * a specific name cam be connected to an `if` block.\n */\nfunction isConnectedIfLoopBlock(name) {\n  return name === 'else' || ELSE_IF_PATTERN.test(name);\n}\n/** Creates an `if` loop block from an HTML AST node. */\nfunction createIfBlock(ast, connectedBlocks, visitor, bindingParser) {\n  const errors = validateIfConnectedBlocks(connectedBlocks);\n  const branches = [];\n  const mainBlockParams = parseConditionalBlockParameters(ast, errors, bindingParser);\n  if (mainBlockParams !== null) {\n    branches.push(new IfBlockBranch(mainBlockParams.expression, visitAll(visitor, ast.children, ast.children), mainBlockParams.expressionAlias, ast.sourceSpan, ast.startSourceSpan, ast.endSourceSpan, ast.nameSpan, ast.i18n));\n  }\n  for (const block of connectedBlocks) {\n    if (ELSE_IF_PATTERN.test(block.name)) {\n      const params = parseConditionalBlockParameters(block, errors, bindingParser);\n      if (params !== null) {\n        const children = visitAll(visitor, block.children, block.children);\n        branches.push(new IfBlockBranch(params.expression, children, params.expressionAlias, block.sourceSpan, block.startSourceSpan, block.endSourceSpan, block.nameSpan, block.i18n));\n      }\n    } else if (block.name === 'else') {\n      const children = visitAll(visitor, block.children, block.children);\n      branches.push(new IfBlockBranch(null, children, null, block.sourceSpan, block.startSourceSpan, block.endSourceSpan, block.nameSpan, block.i18n));\n    }\n  }\n  // The outer IfBlock should have a span that encapsulates all branches.\n  const ifBlockStartSourceSpan = branches.length > 0 ? branches[0].startSourceSpan : ast.startSourceSpan;\n  const ifBlockEndSourceSpan = branches.length > 0 ? branches[branches.length - 1].endSourceSpan : ast.endSourceSpan;\n  let wholeSourceSpan = ast.sourceSpan;\n  const lastBranch = branches[branches.length - 1];\n  if (lastBranch !== undefined) {\n    wholeSourceSpan = new ParseSourceSpan(ifBlockStartSourceSpan.start, lastBranch.sourceSpan.end);\n  }\n  return {\n    node: new IfBlock(branches, wholeSourceSpan, ast.startSourceSpan, ifBlockEndSourceSpan, ast.nameSpan),\n    errors\n  };\n}\n/** Creates a `for` loop block from an HTML AST node. */\nfunction createForLoop(ast, connectedBlocks, visitor, bindingParser) {\n  const errors = [];\n  const params = parseForLoopParameters(ast, errors, bindingParser);\n  let node = null;\n  let empty = null;\n  for (const block of connectedBlocks) {\n    if (block.name === 'empty') {\n      if (empty !== null) {\n        errors.push(new ParseError(block.sourceSpan, '@for loop can only have one @empty block'));\n      } else if (block.parameters.length > 0) {\n        errors.push(new ParseError(block.sourceSpan, '@empty block cannot have parameters'));\n      } else {\n        empty = new ForLoopBlockEmpty(visitAll(visitor, block.children, block.children), block.sourceSpan, block.startSourceSpan, block.endSourceSpan, block.nameSpan, block.i18n);\n      }\n    } else {\n      errors.push(new ParseError(block.sourceSpan, `Unrecognized @for loop block \"${block.name}\"`));\n    }\n  }\n  if (params !== null) {\n    if (params.trackBy === null) {\n      // TODO: We should not fail here, and instead try to produce some AST for the language\n      // service.\n      errors.push(new ParseError(ast.sourceSpan, '@for loop must have a \"track\" expression'));\n    } else {\n      // The `for` block has a main span that includes the `empty` branch. For only the span of the\n      // main `for` body, use `mainSourceSpan`.\n      const endSpan = empty?.endSourceSpan ?? ast.endSourceSpan;\n      const sourceSpan = new ParseSourceSpan(ast.sourceSpan.start, endSpan?.end ?? ast.sourceSpan.end);\n      node = new ForLoopBlock(params.itemName, params.expression, params.trackBy.expression, params.trackBy.keywordSpan, params.context, visitAll(visitor, ast.children, ast.children), empty, sourceSpan, ast.sourceSpan, ast.startSourceSpan, endSpan, ast.nameSpan, ast.i18n);\n    }\n  }\n  return {\n    node,\n    errors\n  };\n}\n/** Creates a switch block from an HTML AST node. */\nfunction createSwitchBlock(ast, visitor, bindingParser) {\n  const errors = validateSwitchBlock(ast);\n  const primaryExpression = ast.parameters.length > 0 ? parseBlockParameterToBinding(ast.parameters[0], bindingParser) : bindingParser.parseBinding('', false, ast.sourceSpan, 0);\n  const cases = [];\n  const unknownBlocks = [];\n  let defaultCase = null;\n  // Here we assume that all the blocks are valid given that we validated them above.\n  for (const node of ast.children) {\n    if (!(node instanceof Block)) {\n      continue;\n    }\n    if ((node.name !== 'case' || node.parameters.length === 0) && node.name !== 'default') {\n      unknownBlocks.push(new UnknownBlock(node.name, node.sourceSpan, node.nameSpan));\n      continue;\n    }\n    const expression = node.name === 'case' ? parseBlockParameterToBinding(node.parameters[0], bindingParser) : null;\n    const ast = new SwitchBlockCase(expression, visitAll(visitor, node.children, node.children), node.sourceSpan, node.startSourceSpan, node.endSourceSpan, node.nameSpan, node.i18n);\n    if (expression === null) {\n      defaultCase = ast;\n    } else {\n      cases.push(ast);\n    }\n  }\n  // Ensure that the default case is last in the array.\n  if (defaultCase !== null) {\n    cases.push(defaultCase);\n  }\n  return {\n    node: new SwitchBlock(primaryExpression, cases, unknownBlocks, ast.sourceSpan, ast.startSourceSpan, ast.endSourceSpan, ast.nameSpan),\n    errors\n  };\n}\n/** Parses the parameters of a `for` loop block. */\nfunction parseForLoopParameters(block, errors, bindingParser) {\n  if (block.parameters.length === 0) {\n    errors.push(new ParseError(block.sourceSpan, '@for loop does not have an expression'));\n    return null;\n  }\n  const [expressionParam, ...secondaryParams] = block.parameters;\n  const match = stripOptionalParentheses(expressionParam, errors)?.match(FOR_LOOP_EXPRESSION_PATTERN);\n  if (!match || match[2].trim().length === 0) {\n    errors.push(new ParseError(expressionParam.sourceSpan, 'Cannot parse expression. @for loop expression must match the pattern \"<identifier> of <expression>\"'));\n    return null;\n  }\n  const [, itemName, rawExpression] = match;\n  if (ALLOWED_FOR_LOOP_LET_VARIABLES.has(itemName)) {\n    errors.push(new ParseError(expressionParam.sourceSpan, `@for loop item name cannot be one of ${Array.from(ALLOWED_FOR_LOOP_LET_VARIABLES).join(', ')}.`));\n  }\n  // `expressionParam.expression` contains the variable declaration and the expression of the\n  // for...of statement, i.e. 'user of users' The variable of a ForOfStatement is _only_ the \"const\n  // user\" part and does not include \"of x\".\n  const variableName = expressionParam.expression.split(' ')[0];\n  const variableSpan = new ParseSourceSpan(expressionParam.sourceSpan.start, expressionParam.sourceSpan.start.moveBy(variableName.length));\n  const result = {\n    itemName: new Variable(itemName, '$implicit', variableSpan, variableSpan),\n    trackBy: null,\n    expression: parseBlockParameterToBinding(expressionParam, bindingParser, rawExpression),\n    context: Array.from(ALLOWED_FOR_LOOP_LET_VARIABLES, variableName => {\n      // Give ambiently-available context variables empty spans at the end of\n      // the start of the `for` block, since they are not explicitly defined.\n      const emptySpanAfterForBlockStart = new ParseSourceSpan(block.startSourceSpan.end, block.startSourceSpan.end);\n      return new Variable(variableName, variableName, emptySpanAfterForBlockStart, emptySpanAfterForBlockStart);\n    })\n  };\n  for (const param of secondaryParams) {\n    const letMatch = param.expression.match(FOR_LOOP_LET_PATTERN);\n    if (letMatch !== null) {\n      const variablesSpan = new ParseSourceSpan(param.sourceSpan.start.moveBy(letMatch[0].length - letMatch[1].length), param.sourceSpan.end);\n      parseLetParameter(param.sourceSpan, letMatch[1], variablesSpan, itemName, result.context, errors);\n      continue;\n    }\n    const trackMatch = param.expression.match(FOR_LOOP_TRACK_PATTERN);\n    if (trackMatch !== null) {\n      if (result.trackBy !== null) {\n        errors.push(new ParseError(param.sourceSpan, '@for loop can only have one \"track\" expression'));\n      } else {\n        const expression = parseBlockParameterToBinding(param, bindingParser, trackMatch[1]);\n        if (expression.ast instanceof EmptyExpr$1) {\n          errors.push(new ParseError(param.sourceSpan, '@for loop must have a \"track\" expression'));\n        }\n        const keywordSpan = new ParseSourceSpan(param.sourceSpan.start, param.sourceSpan.start.moveBy('track'.length));\n        result.trackBy = {\n          expression,\n          keywordSpan\n        };\n      }\n      continue;\n    }\n    errors.push(new ParseError(param.sourceSpan, `Unrecognized @for loop paramater \"${param.expression}\"`));\n  }\n  return result;\n}\n/** Parses the `let` parameter of a `for` loop block. */\nfunction parseLetParameter(sourceSpan, expression, span, loopItemName, context, errors) {\n  const parts = expression.split(',');\n  let startSpan = span.start;\n  for (const part of parts) {\n    const expressionParts = part.split('=');\n    const name = expressionParts.length === 2 ? expressionParts[0].trim() : '';\n    const variableName = expressionParts.length === 2 ? expressionParts[1].trim() : '';\n    if (name.length === 0 || variableName.length === 0) {\n      errors.push(new ParseError(sourceSpan, `Invalid @for loop \"let\" parameter. Parameter should match the pattern \"<name> = <variable name>\"`));\n    } else if (!ALLOWED_FOR_LOOP_LET_VARIABLES.has(variableName)) {\n      errors.push(new ParseError(sourceSpan, `Unknown \"let\" parameter variable \"${variableName}\". The allowed variables are: ${Array.from(ALLOWED_FOR_LOOP_LET_VARIABLES).join(', ')}`));\n    } else if (name === loopItemName) {\n      errors.push(new ParseError(sourceSpan, `Invalid @for loop \"let\" parameter. Variable cannot be called \"${loopItemName}\"`));\n    } else if (context.some(v => v.name === name)) {\n      errors.push(new ParseError(sourceSpan, `Duplicate \"let\" parameter variable \"${variableName}\"`));\n    } else {\n      const [, keyLeadingWhitespace, keyName] = expressionParts[0].match(CHARACTERS_IN_SURROUNDING_WHITESPACE_PATTERN) ?? [];\n      const keySpan = keyLeadingWhitespace !== undefined && expressionParts.length === 2 ? new ParseSourceSpan( /* strip leading spaces */\n      startSpan.moveBy(keyLeadingWhitespace.length), /* advance to end of the variable name */\n      startSpan.moveBy(keyLeadingWhitespace.length + keyName.length)) : span;\n      let valueSpan = undefined;\n      if (expressionParts.length === 2) {\n        const [, valueLeadingWhitespace, implicit] = expressionParts[1].match(CHARACTERS_IN_SURROUNDING_WHITESPACE_PATTERN) ?? [];\n        valueSpan = valueLeadingWhitespace !== undefined ? new ParseSourceSpan(startSpan.moveBy(expressionParts[0].length + 1 + valueLeadingWhitespace.length), startSpan.moveBy(expressionParts[0].length + 1 + valueLeadingWhitespace.length + implicit.length)) : undefined;\n      }\n      const sourceSpan = new ParseSourceSpan(keySpan.start, valueSpan?.end ?? keySpan.end);\n      context.push(new Variable(name, variableName, sourceSpan, keySpan, valueSpan));\n    }\n    startSpan = startSpan.moveBy(part.length + 1 /* add 1 to move past the comma */);\n  }\n}\n/**\n * Checks that the shape of the blocks connected to an\n * `@if` block is correct. Returns an array of errors.\n */\nfunction validateIfConnectedBlocks(connectedBlocks) {\n  const errors = [];\n  let hasElse = false;\n  for (let i = 0; i < connectedBlocks.length; i++) {\n    const block = connectedBlocks[i];\n    if (block.name === 'else') {\n      if (hasElse) {\n        errors.push(new ParseError(block.sourceSpan, 'Conditional can only have one @else block'));\n      } else if (connectedBlocks.length > 1 && i < connectedBlocks.length - 1) {\n        errors.push(new ParseError(block.sourceSpan, '@else block must be last inside the conditional'));\n      } else if (block.parameters.length > 0) {\n        errors.push(new ParseError(block.sourceSpan, '@else block cannot have parameters'));\n      }\n      hasElse = true;\n    } else if (!ELSE_IF_PATTERN.test(block.name)) {\n      errors.push(new ParseError(block.sourceSpan, `Unrecognized conditional block @${block.name}`));\n    }\n  }\n  return errors;\n}\n/** Checks that the shape of a `switch` block is valid. Returns an array of errors. */\nfunction validateSwitchBlock(ast) {\n  const errors = [];\n  let hasDefault = false;\n  if (ast.parameters.length !== 1) {\n    errors.push(new ParseError(ast.sourceSpan, '@switch block must have exactly one parameter'));\n    return errors;\n  }\n  for (const node of ast.children) {\n    // Skip over comments and empty text nodes inside the switch block.\n    // Empty text nodes can be used for formatting while comments don't affect the runtime.\n    if (node instanceof Comment || node instanceof Text && node.value.trim().length === 0) {\n      continue;\n    }\n    if (!(node instanceof Block) || node.name !== 'case' && node.name !== 'default') {\n      errors.push(new ParseError(node.sourceSpan, '@switch block can only contain @case and @default blocks'));\n      continue;\n    }\n    if (node.name === 'default') {\n      if (hasDefault) {\n        errors.push(new ParseError(node.sourceSpan, '@switch block can only have one @default block'));\n      } else if (node.parameters.length > 0) {\n        errors.push(new ParseError(node.sourceSpan, '@default block cannot have parameters'));\n      }\n      hasDefault = true;\n    } else if (node.name === 'case' && node.parameters.length !== 1) {\n      errors.push(new ParseError(node.sourceSpan, '@case block must have exactly one parameter'));\n    }\n  }\n  return errors;\n}\n/**\n * Parses a block parameter into a binding AST.\n * @param ast Block parameter that should be parsed.\n * @param bindingParser Parser that the expression should be parsed with.\n * @param part Specific part of the expression that should be parsed.\n */\nfunction parseBlockParameterToBinding(ast, bindingParser, part) {\n  let start;\n  let end;\n  if (typeof part === 'string') {\n    // Note: `lastIndexOf` here should be enough to know the start index of the expression,\n    // because we know that it'll be at the end of the param. Ideally we could use the `d`\n    // flag when matching via regex and get the index from `match.indices`, but it's unclear\n    // if we can use it yet since it's a relatively new feature. See:\n    // https://github.com/tc39/proposal-regexp-match-indices\n    start = Math.max(0, ast.expression.lastIndexOf(part));\n    end = start + part.length;\n  } else {\n    start = 0;\n    end = ast.expression.length;\n  }\n  return bindingParser.parseBinding(ast.expression.slice(start, end), false, ast.sourceSpan, ast.sourceSpan.start.offset + start);\n}\n/** Parses the parameter of a conditional block (`if` or `else if`). */\nfunction parseConditionalBlockParameters(block, errors, bindingParser) {\n  if (block.parameters.length === 0) {\n    errors.push(new ParseError(block.sourceSpan, 'Conditional block does not have an expression'));\n    return null;\n  }\n  const expression = parseBlockParameterToBinding(block.parameters[0], bindingParser);\n  let expressionAlias = null;\n  // Start from 1 since we processed the first parameter already.\n  for (let i = 1; i < block.parameters.length; i++) {\n    const param = block.parameters[i];\n    const aliasMatch = param.expression.match(CONDITIONAL_ALIAS_PATTERN);\n    // For now conditionals can only have an `as` parameter.\n    // We may want to rework this later if we add more.\n    if (aliasMatch === null) {\n      errors.push(new ParseError(param.sourceSpan, `Unrecognized conditional paramater \"${param.expression}\"`));\n    } else if (block.name !== 'if') {\n      errors.push(new ParseError(param.sourceSpan, '\"as\" expression is only allowed on the primary @if block'));\n    } else if (expressionAlias !== null) {\n      errors.push(new ParseError(param.sourceSpan, 'Conditional can only have one \"as\" expression'));\n    } else {\n      const name = aliasMatch[2].trim();\n      const variableStart = param.sourceSpan.start.moveBy(aliasMatch[1].length);\n      const variableSpan = new ParseSourceSpan(variableStart, variableStart.moveBy(name.length));\n      expressionAlias = new Variable(name, name, variableSpan, variableSpan);\n    }\n  }\n  return {\n    expression,\n    expressionAlias\n  };\n}\n/** Strips optional parentheses around from a control from expression parameter. */\nfunction stripOptionalParentheses(param, errors) {\n  const expression = param.expression;\n  const spaceRegex = /^\\s$/;\n  let openParens = 0;\n  let start = 0;\n  let end = expression.length - 1;\n  for (let i = 0; i < expression.length; i++) {\n    const char = expression[i];\n    if (char === '(') {\n      start = i + 1;\n      openParens++;\n    } else if (spaceRegex.test(char)) {\n      continue;\n    } else {\n      break;\n    }\n  }\n  if (openParens === 0) {\n    return expression;\n  }\n  for (let i = expression.length - 1; i > -1; i--) {\n    const char = expression[i];\n    if (char === ')') {\n      end = i;\n      openParens--;\n      if (openParens === 0) {\n        break;\n      }\n    } else if (spaceRegex.test(char)) {\n      continue;\n    } else {\n      break;\n    }\n  }\n  if (openParens !== 0) {\n    errors.push(new ParseError(param.sourceSpan, 'Unclosed parentheses in expression'));\n    return null;\n  }\n  return expression.slice(start, end);\n}\n\n/** Pattern for a timing value in a trigger. */\nconst TIME_PATTERN = /^\\d+\\.?\\d*(ms|s)?$/;\n/** Pattern for a separator between keywords in a trigger expression. */\nconst SEPARATOR_PATTERN = /^\\s$/;\n/** Pairs of characters that form syntax that is comma-delimited. */\nconst COMMA_DELIMITED_SYNTAX = new Map([[$LBRACE, $RBRACE],\n// Object literals\n[$LBRACKET, $RBRACKET],\n// Array literals\n[$LPAREN, $RPAREN] // Function calls\n]);\n/** Possible types of `on` triggers. */\nvar OnTriggerType;\n(function (OnTriggerType) {\n  OnTriggerType[\"IDLE\"] = \"idle\";\n  OnTriggerType[\"TIMER\"] = \"timer\";\n  OnTriggerType[\"INTERACTION\"] = \"interaction\";\n  OnTriggerType[\"IMMEDIATE\"] = \"immediate\";\n  OnTriggerType[\"HOVER\"] = \"hover\";\n  OnTriggerType[\"VIEWPORT\"] = \"viewport\";\n})(OnTriggerType || (OnTriggerType = {}));\n/** Parses a `when` deferred trigger. */\nfunction parseWhenTrigger({\n  expression,\n  sourceSpan\n}, bindingParser, triggers, errors) {\n  const whenIndex = expression.indexOf('when');\n  const whenSourceSpan = new ParseSourceSpan(sourceSpan.start.moveBy(whenIndex), sourceSpan.start.moveBy(whenIndex + 'when'.length));\n  const prefetchSpan = getPrefetchSpan(expression, sourceSpan);\n  // This is here just to be safe, we shouldn't enter this function\n  // in the first place if a block doesn't have the \"when\" keyword.\n  if (whenIndex === -1) {\n    errors.push(new ParseError(sourceSpan, `Could not find \"when\" keyword in expression`));\n  } else {\n    const start = getTriggerParametersStart(expression, whenIndex + 1);\n    const parsed = bindingParser.parseBinding(expression.slice(start), false, sourceSpan, sourceSpan.start.offset + start);\n    trackTrigger('when', triggers, errors, new BoundDeferredTrigger(parsed, sourceSpan, prefetchSpan, whenSourceSpan));\n  }\n}\n/** Parses an `on` trigger */\nfunction parseOnTrigger({\n  expression,\n  sourceSpan\n}, triggers, errors, placeholder) {\n  const onIndex = expression.indexOf('on');\n  const onSourceSpan = new ParseSourceSpan(sourceSpan.start.moveBy(onIndex), sourceSpan.start.moveBy(onIndex + 'on'.length));\n  const prefetchSpan = getPrefetchSpan(expression, sourceSpan);\n  // This is here just to be safe, we shouldn't enter this function\n  // in the first place if a block doesn't have the \"on\" keyword.\n  if (onIndex === -1) {\n    errors.push(new ParseError(sourceSpan, `Could not find \"on\" keyword in expression`));\n  } else {\n    const start = getTriggerParametersStart(expression, onIndex + 1);\n    const parser = new OnTriggerParser(expression, start, sourceSpan, triggers, errors, placeholder, prefetchSpan, onSourceSpan);\n    parser.parse();\n  }\n}\nfunction getPrefetchSpan(expression, sourceSpan) {\n  if (!expression.startsWith('prefetch')) {\n    return null;\n  }\n  return new ParseSourceSpan(sourceSpan.start, sourceSpan.start.moveBy('prefetch'.length));\n}\nclass OnTriggerParser {\n  constructor(expression, start, span, triggers, errors, placeholder, prefetchSpan, onSourceSpan) {\n    this.expression = expression;\n    this.start = start;\n    this.span = span;\n    this.triggers = triggers;\n    this.errors = errors;\n    this.placeholder = placeholder;\n    this.prefetchSpan = prefetchSpan;\n    this.onSourceSpan = onSourceSpan;\n    this.index = 0;\n    this.tokens = new Lexer().tokenize(expression.slice(start));\n  }\n  parse() {\n    while (this.tokens.length > 0 && this.index < this.tokens.length) {\n      const token = this.token();\n      if (!token.isIdentifier()) {\n        this.unexpectedToken(token);\n        break;\n      }\n      // An identifier immediately followed by a comma or the end of\n      // the expression cannot have parameters so we can exit early.\n      if (this.isFollowedByOrLast($COMMA)) {\n        this.consumeTrigger(token, []);\n        this.advance();\n      } else if (this.isFollowedByOrLast($LPAREN)) {\n        this.advance(); // Advance to the opening paren.\n        const prevErrors = this.errors.length;\n        const parameters = this.consumeParameters();\n        if (this.errors.length !== prevErrors) {\n          break;\n        }\n        this.consumeTrigger(token, parameters);\n        this.advance(); // Advance past the closing paren.\n      } else if (this.index < this.tokens.length - 1) {\n        this.unexpectedToken(this.tokens[this.index + 1]);\n      }\n      this.advance();\n    }\n  }\n  advance() {\n    this.index++;\n  }\n  isFollowedByOrLast(char) {\n    if (this.index === this.tokens.length - 1) {\n      return true;\n    }\n    return this.tokens[this.index + 1].isCharacter(char);\n  }\n  token() {\n    return this.tokens[Math.min(this.index, this.tokens.length - 1)];\n  }\n  consumeTrigger(identifier, parameters) {\n    const triggerNameStartSpan = this.span.start.moveBy(this.start + identifier.index - this.tokens[0].index);\n    const nameSpan = new ParseSourceSpan(triggerNameStartSpan, triggerNameStartSpan.moveBy(identifier.strValue.length));\n    const endSpan = triggerNameStartSpan.moveBy(this.token().end - identifier.index);\n    // Put the prefetch and on spans with the first trigger\n    // This should maybe be refactored to have something like an outer OnGroup AST\n    // Since triggers can be grouped with commas \"on hover(x), interaction(y)\"\n    const isFirstTrigger = identifier.index === 0;\n    const onSourceSpan = isFirstTrigger ? this.onSourceSpan : null;\n    const prefetchSourceSpan = isFirstTrigger ? this.prefetchSpan : null;\n    const sourceSpan = new ParseSourceSpan(isFirstTrigger ? this.span.start : triggerNameStartSpan, endSpan);\n    try {\n      switch (identifier.toString()) {\n        case OnTriggerType.IDLE:\n          this.trackTrigger('idle', createIdleTrigger(parameters, nameSpan, sourceSpan, prefetchSourceSpan, onSourceSpan));\n          break;\n        case OnTriggerType.TIMER:\n          this.trackTrigger('timer', createTimerTrigger(parameters, nameSpan, sourceSpan, this.prefetchSpan, this.onSourceSpan));\n          break;\n        case OnTriggerType.INTERACTION:\n          this.trackTrigger('interaction', createInteractionTrigger(parameters, nameSpan, sourceSpan, this.prefetchSpan, this.onSourceSpan, this.placeholder));\n          break;\n        case OnTriggerType.IMMEDIATE:\n          this.trackTrigger('immediate', createImmediateTrigger(parameters, nameSpan, sourceSpan, this.prefetchSpan, this.onSourceSpan));\n          break;\n        case OnTriggerType.HOVER:\n          this.trackTrigger('hover', createHoverTrigger(parameters, nameSpan, sourceSpan, this.prefetchSpan, this.onSourceSpan, this.placeholder));\n          break;\n        case OnTriggerType.VIEWPORT:\n          this.trackTrigger('viewport', createViewportTrigger(parameters, nameSpan, sourceSpan, this.prefetchSpan, this.onSourceSpan, this.placeholder));\n          break;\n        default:\n          throw new Error(`Unrecognized trigger type \"${identifier}\"`);\n      }\n    } catch (e) {\n      this.error(identifier, e.message);\n    }\n  }\n  consumeParameters() {\n    const parameters = [];\n    if (!this.token().isCharacter($LPAREN)) {\n      this.unexpectedToken(this.token());\n      return parameters;\n    }\n    this.advance();\n    const commaDelimStack = [];\n    let current = '';\n    while (this.index < this.tokens.length) {\n      const token = this.token();\n      // Stop parsing if we've hit the end character and we're outside of a comma-delimited syntax.\n      // Note that we don't need to account for strings here since the lexer already parsed them\n      // into string tokens.\n      if (token.isCharacter($RPAREN) && commaDelimStack.length === 0) {\n        if (current.length) {\n          parameters.push(current);\n        }\n        break;\n      }\n      // In the `on` microsyntax \"top-level\" commas (e.g. ones outside of an parameters) separate\n      // the different triggers (e.g. `on idle,timer(500)`). This is problematic, because the\n      // function-like syntax also implies that multiple parameters can be passed into the\n      // individual trigger (e.g. `on foo(a, b)`). To avoid tripping up the parser with commas that\n      // are part of other sorts of syntax (object literals, arrays), we treat anything inside\n      // a comma-delimited syntax block as plain text.\n      if (token.type === TokenType.Character && COMMA_DELIMITED_SYNTAX.has(token.numValue)) {\n        commaDelimStack.push(COMMA_DELIMITED_SYNTAX.get(token.numValue));\n      }\n      if (commaDelimStack.length > 0 && token.isCharacter(commaDelimStack[commaDelimStack.length - 1])) {\n        commaDelimStack.pop();\n      }\n      // If we hit a comma outside of a comma-delimited syntax, it means\n      // that we're at the top level and we're starting a new parameter.\n      if (commaDelimStack.length === 0 && token.isCharacter($COMMA) && current.length > 0) {\n        parameters.push(current);\n        current = '';\n        this.advance();\n        continue;\n      }\n      // Otherwise treat the token as a plain text character in the current parameter.\n      current += this.tokenText();\n      this.advance();\n    }\n    if (!this.token().isCharacter($RPAREN) || commaDelimStack.length > 0) {\n      this.error(this.token(), 'Unexpected end of expression');\n    }\n    if (this.index < this.tokens.length - 1 && !this.tokens[this.index + 1].isCharacter($COMMA)) {\n      this.unexpectedToken(this.tokens[this.index + 1]);\n    }\n    return parameters;\n  }\n  tokenText() {\n    // Tokens have a toString already which we could use, but for string tokens it omits the quotes.\n    // Eventually we could expose this information on the token directly.\n    return this.expression.slice(this.start + this.token().index, this.start + this.token().end);\n  }\n  trackTrigger(name, trigger) {\n    trackTrigger(name, this.triggers, this.errors, trigger);\n  }\n  error(token, message) {\n    const newStart = this.span.start.moveBy(this.start + token.index);\n    const newEnd = newStart.moveBy(token.end - token.index);\n    this.errors.push(new ParseError(new ParseSourceSpan(newStart, newEnd), message));\n  }\n  unexpectedToken(token) {\n    this.error(token, `Unexpected token \"${token}\"`);\n  }\n}\n/** Adds a trigger to a map of triggers. */\nfunction trackTrigger(name, allTriggers, errors, trigger) {\n  if (allTriggers[name]) {\n    errors.push(new ParseError(trigger.sourceSpan, `Duplicate \"${name}\" trigger is not allowed`));\n  } else {\n    allTriggers[name] = trigger;\n  }\n}\nfunction createIdleTrigger(parameters, nameSpan, sourceSpan, prefetchSpan, onSourceSpan) {\n  if (parameters.length > 0) {\n    throw new Error(`\"${OnTriggerType.IDLE}\" trigger cannot have parameters`);\n  }\n  return new IdleDeferredTrigger(nameSpan, sourceSpan, prefetchSpan, onSourceSpan);\n}\nfunction createTimerTrigger(parameters, nameSpan, sourceSpan, prefetchSpan, onSourceSpan) {\n  if (parameters.length !== 1) {\n    throw new Error(`\"${OnTriggerType.TIMER}\" trigger must have exactly one parameter`);\n  }\n  const delay = parseDeferredTime(parameters[0]);\n  if (delay === null) {\n    throw new Error(`Could not parse time value of trigger \"${OnTriggerType.TIMER}\"`);\n  }\n  return new TimerDeferredTrigger(delay, nameSpan, sourceSpan, prefetchSpan, onSourceSpan);\n}\nfunction createImmediateTrigger(parameters, nameSpan, sourceSpan, prefetchSpan, onSourceSpan) {\n  if (parameters.length > 0) {\n    throw new Error(`\"${OnTriggerType.IMMEDIATE}\" trigger cannot have parameters`);\n  }\n  return new ImmediateDeferredTrigger(nameSpan, sourceSpan, prefetchSpan, onSourceSpan);\n}\nfunction createHoverTrigger(parameters, nameSpan, sourceSpan, prefetchSpan, onSourceSpan, placeholder) {\n  validateReferenceBasedTrigger(OnTriggerType.HOVER, parameters, placeholder);\n  return new HoverDeferredTrigger(parameters[0] ?? null, nameSpan, sourceSpan, prefetchSpan, onSourceSpan);\n}\nfunction createInteractionTrigger(parameters, nameSpan, sourceSpan, prefetchSpan, onSourceSpan, placeholder) {\n  validateReferenceBasedTrigger(OnTriggerType.INTERACTION, parameters, placeholder);\n  return new InteractionDeferredTrigger(parameters[0] ?? null, nameSpan, sourceSpan, prefetchSpan, onSourceSpan);\n}\nfunction createViewportTrigger(parameters, nameSpan, sourceSpan, prefetchSpan, onSourceSpan, placeholder) {\n  validateReferenceBasedTrigger(OnTriggerType.VIEWPORT, parameters, placeholder);\n  return new ViewportDeferredTrigger(parameters[0] ?? null, nameSpan, sourceSpan, prefetchSpan, onSourceSpan);\n}\nfunction validateReferenceBasedTrigger(type, parameters, placeholder) {\n  if (parameters.length > 1) {\n    throw new Error(`\"${type}\" trigger can only have zero or one parameters`);\n  }\n  if (parameters.length === 0) {\n    if (placeholder === null) {\n      throw new Error(`\"${type}\" trigger with no parameters can only be placed on an @defer that has a @placeholder block`);\n    }\n    if (placeholder.children.length !== 1 || !(placeholder.children[0] instanceof Element$1)) {\n      throw new Error(`\"${type}\" trigger with no parameters can only be placed on an @defer that has a ` + `@placeholder block with exactly one root element node`);\n    }\n  }\n}\n/** Gets the index within an expression at which the trigger parameters start. */\nfunction getTriggerParametersStart(value, startPosition = 0) {\n  let hasFoundSeparator = false;\n  for (let i = startPosition; i < value.length; i++) {\n    if (SEPARATOR_PATTERN.test(value[i])) {\n      hasFoundSeparator = true;\n    } else if (hasFoundSeparator) {\n      return i;\n    }\n  }\n  return -1;\n}\n/**\n * Parses a time expression from a deferred trigger to\n * milliseconds. Returns null if it cannot be parsed.\n */\nfunction parseDeferredTime(value) {\n  const match = value.match(TIME_PATTERN);\n  if (!match) {\n    return null;\n  }\n  const [time, units] = match;\n  return parseFloat(time) * (units === 's' ? 1000 : 1);\n}\n\n/** Pattern to identify a `prefetch when` trigger. */\nconst PREFETCH_WHEN_PATTERN = /^prefetch\\s+when\\s/;\n/** Pattern to identify a `prefetch on` trigger. */\nconst PREFETCH_ON_PATTERN = /^prefetch\\s+on\\s/;\n/** Pattern to identify a `minimum` parameter in a block. */\nconst MINIMUM_PARAMETER_PATTERN = /^minimum\\s/;\n/** Pattern to identify a `after` parameter in a block. */\nconst AFTER_PARAMETER_PATTERN = /^after\\s/;\n/** Pattern to identify a `when` parameter in a block. */\nconst WHEN_PARAMETER_PATTERN = /^when\\s/;\n/** Pattern to identify a `on` parameter in a block. */\nconst ON_PARAMETER_PATTERN = /^on\\s/;\n/**\n * Predicate function that determines if a block with\n * a specific name cam be connected to a `defer` block.\n */\nfunction isConnectedDeferLoopBlock(name) {\n  return name === 'placeholder' || name === 'loading' || name === 'error';\n}\n/** Creates a deferred block from an HTML AST node. */\nfunction createDeferredBlock(ast, connectedBlocks, visitor, bindingParser) {\n  const errors = [];\n  const {\n    placeholder,\n    loading,\n    error\n  } = parseConnectedBlocks(connectedBlocks, errors, visitor);\n  const {\n    triggers,\n    prefetchTriggers\n  } = parsePrimaryTriggers(ast.parameters, bindingParser, errors, placeholder);\n  // The `defer` block has a main span encompassing all of the connected branches as well.\n  let lastEndSourceSpan = ast.endSourceSpan;\n  let endOfLastSourceSpan = ast.sourceSpan.end;\n  if (connectedBlocks.length > 0) {\n    const lastConnectedBlock = connectedBlocks[connectedBlocks.length - 1];\n    lastEndSourceSpan = lastConnectedBlock.endSourceSpan;\n    endOfLastSourceSpan = lastConnectedBlock.sourceSpan.end;\n  }\n  const sourceSpanWithConnectedBlocks = new ParseSourceSpan(ast.sourceSpan.start, endOfLastSourceSpan);\n  const node = new DeferredBlock(visitAll(visitor, ast.children, ast.children), triggers, prefetchTriggers, placeholder, loading, error, ast.nameSpan, sourceSpanWithConnectedBlocks, ast.sourceSpan, ast.startSourceSpan, lastEndSourceSpan, ast.i18n);\n  return {\n    node,\n    errors\n  };\n}\nfunction parseConnectedBlocks(connectedBlocks, errors, visitor) {\n  let placeholder = null;\n  let loading = null;\n  let error = null;\n  for (const block of connectedBlocks) {\n    try {\n      if (!isConnectedDeferLoopBlock(block.name)) {\n        errors.push(new ParseError(block.startSourceSpan, `Unrecognized block \"@${block.name}\"`));\n        break;\n      }\n      switch (block.name) {\n        case 'placeholder':\n          if (placeholder !== null) {\n            errors.push(new ParseError(block.startSourceSpan, `@defer block can only have one @placeholder block`));\n          } else {\n            placeholder = parsePlaceholderBlock(block, visitor);\n          }\n          break;\n        case 'loading':\n          if (loading !== null) {\n            errors.push(new ParseError(block.startSourceSpan, `@defer block can only have one @loading block`));\n          } else {\n            loading = parseLoadingBlock(block, visitor);\n          }\n          break;\n        case 'error':\n          if (error !== null) {\n            errors.push(new ParseError(block.startSourceSpan, `@defer block can only have one @error block`));\n          } else {\n            error = parseErrorBlock(block, visitor);\n          }\n          break;\n      }\n    } catch (e) {\n      errors.push(new ParseError(block.startSourceSpan, e.message));\n    }\n  }\n  return {\n    placeholder,\n    loading,\n    error\n  };\n}\nfunction parsePlaceholderBlock(ast, visitor) {\n  let minimumTime = null;\n  for (const param of ast.parameters) {\n    if (MINIMUM_PARAMETER_PATTERN.test(param.expression)) {\n      if (minimumTime != null) {\n        throw new Error(`@placeholder block can only have one \"minimum\" parameter`);\n      }\n      const parsedTime = parseDeferredTime(param.expression.slice(getTriggerParametersStart(param.expression)));\n      if (parsedTime === null) {\n        throw new Error(`Could not parse time value of parameter \"minimum\"`);\n      }\n      minimumTime = parsedTime;\n    } else {\n      throw new Error(`Unrecognized parameter in @placeholder block: \"${param.expression}\"`);\n    }\n  }\n  return new DeferredBlockPlaceholder(visitAll(visitor, ast.children, ast.children), minimumTime, ast.nameSpan, ast.sourceSpan, ast.startSourceSpan, ast.endSourceSpan, ast.i18n);\n}\nfunction parseLoadingBlock(ast, visitor) {\n  let afterTime = null;\n  let minimumTime = null;\n  for (const param of ast.parameters) {\n    if (AFTER_PARAMETER_PATTERN.test(param.expression)) {\n      if (afterTime != null) {\n        throw new Error(`@loading block can only have one \"after\" parameter`);\n      }\n      const parsedTime = parseDeferredTime(param.expression.slice(getTriggerParametersStart(param.expression)));\n      if (parsedTime === null) {\n        throw new Error(`Could not parse time value of parameter \"after\"`);\n      }\n      afterTime = parsedTime;\n    } else if (MINIMUM_PARAMETER_PATTERN.test(param.expression)) {\n      if (minimumTime != null) {\n        throw new Error(`@loading block can only have one \"minimum\" parameter`);\n      }\n      const parsedTime = parseDeferredTime(param.expression.slice(getTriggerParametersStart(param.expression)));\n      if (parsedTime === null) {\n        throw new Error(`Could not parse time value of parameter \"minimum\"`);\n      }\n      minimumTime = parsedTime;\n    } else {\n      throw new Error(`Unrecognized parameter in @loading block: \"${param.expression}\"`);\n    }\n  }\n  return new DeferredBlockLoading(visitAll(visitor, ast.children, ast.children), afterTime, minimumTime, ast.nameSpan, ast.sourceSpan, ast.startSourceSpan, ast.endSourceSpan, ast.i18n);\n}\nfunction parseErrorBlock(ast, visitor) {\n  if (ast.parameters.length > 0) {\n    throw new Error(`@error block cannot have parameters`);\n  }\n  return new DeferredBlockError(visitAll(visitor, ast.children, ast.children), ast.nameSpan, ast.sourceSpan, ast.startSourceSpan, ast.endSourceSpan, ast.i18n);\n}\nfunction parsePrimaryTriggers(params, bindingParser, errors, placeholder) {\n  const triggers = {};\n  const prefetchTriggers = {};\n  for (const param of params) {\n    // The lexer ignores the leading spaces so we can assume\n    // that the expression starts with a keyword.\n    if (WHEN_PARAMETER_PATTERN.test(param.expression)) {\n      parseWhenTrigger(param, bindingParser, triggers, errors);\n    } else if (ON_PARAMETER_PATTERN.test(param.expression)) {\n      parseOnTrigger(param, triggers, errors, placeholder);\n    } else if (PREFETCH_WHEN_PATTERN.test(param.expression)) {\n      parseWhenTrigger(param, bindingParser, prefetchTriggers, errors);\n    } else if (PREFETCH_ON_PATTERN.test(param.expression)) {\n      parseOnTrigger(param, prefetchTriggers, errors, placeholder);\n    } else {\n      errors.push(new ParseError(param.sourceSpan, 'Unrecognized trigger'));\n    }\n  }\n  return {\n    triggers,\n    prefetchTriggers\n  };\n}\nconst BIND_NAME_REGEXP = /^(?:(bind-)|(let-)|(ref-|#)|(on-)|(bindon-)|(@))(.*)$/;\n// Group 1 = \"bind-\"\nconst KW_BIND_IDX = 1;\n// Group 2 = \"let-\"\nconst KW_LET_IDX = 2;\n// Group 3 = \"ref-/#\"\nconst KW_REF_IDX = 3;\n// Group 4 = \"on-\"\nconst KW_ON_IDX = 4;\n// Group 5 = \"bindon-\"\nconst KW_BINDON_IDX = 5;\n// Group 6 = \"@\"\nconst KW_AT_IDX = 6;\n// Group 7 = the identifier after \"bind-\", \"let-\", \"ref-/#\", \"on-\", \"bindon-\" or \"@\"\nconst IDENT_KW_IDX = 7;\nconst BINDING_DELIMS = {\n  BANANA_BOX: {\n    start: '[(',\n    end: ')]'\n  },\n  PROPERTY: {\n    start: '[',\n    end: ']'\n  },\n  EVENT: {\n    start: '(',\n    end: ')'\n  }\n};\nconst TEMPLATE_ATTR_PREFIX = '*';\nfunction htmlAstToRender3Ast(htmlNodes, bindingParser, options) {\n  const transformer = new HtmlAstToIvyAst(bindingParser, options);\n  const ivyNodes = visitAll(transformer, htmlNodes, htmlNodes);\n  // Errors might originate in either the binding parser or the html to ivy transformer\n  const allErrors = bindingParser.errors.concat(transformer.errors);\n  const result = {\n    nodes: ivyNodes,\n    errors: allErrors,\n    styleUrls: transformer.styleUrls,\n    styles: transformer.styles,\n    ngContentSelectors: transformer.ngContentSelectors\n  };\n  if (options.collectCommentNodes) {\n    result.commentNodes = transformer.commentNodes;\n  }\n  return result;\n}\nclass HtmlAstToIvyAst {\n  constructor(bindingParser, options) {\n    this.bindingParser = bindingParser;\n    this.options = options;\n    this.errors = [];\n    this.styles = [];\n    this.styleUrls = [];\n    this.ngContentSelectors = [];\n    // This array will be populated if `Render3ParseOptions['collectCommentNodes']` is true\n    this.commentNodes = [];\n    this.inI18nBlock = false;\n    /**\n     * Keeps track of the nodes that have been processed already when previous nodes were visited.\n     * These are typically blocks connected to other blocks or text nodes between connected blocks.\n     */\n    this.processedNodes = new Set();\n  }\n  // HTML visitor\n  visitElement(element) {\n    const isI18nRootElement = isI18nRootNode(element.i18n);\n    if (isI18nRootElement) {\n      if (this.inI18nBlock) {\n        this.reportError('Cannot mark an element as translatable inside of a translatable section. Please remove the nested i18n marker.', element.sourceSpan);\n      }\n      this.inI18nBlock = true;\n    }\n    const preparsedElement = preparseElement(element);\n    if (preparsedElement.type === PreparsedElementType.SCRIPT) {\n      return null;\n    } else if (preparsedElement.type === PreparsedElementType.STYLE) {\n      const contents = textContents(element);\n      if (contents !== null) {\n        this.styles.push(contents);\n      }\n      return null;\n    } else if (preparsedElement.type === PreparsedElementType.STYLESHEET && isStyleUrlResolvable(preparsedElement.hrefAttr)) {\n      this.styleUrls.push(preparsedElement.hrefAttr);\n      return null;\n    }\n    // Whether the element is a `<ng-template>`\n    const isTemplateElement = isNgTemplate(element.name);\n    const parsedProperties = [];\n    const boundEvents = [];\n    const variables = [];\n    const references = [];\n    const attributes = [];\n    const i18nAttrsMeta = {};\n    const templateParsedProperties = [];\n    const templateVariables = [];\n    // Whether the element has any *-attribute\n    let elementHasInlineTemplate = false;\n    for (const attribute of element.attrs) {\n      let hasBinding = false;\n      const normalizedName = normalizeAttributeName(attribute.name);\n      // `*attr` defines template bindings\n      let isTemplateBinding = false;\n      if (attribute.i18n) {\n        i18nAttrsMeta[attribute.name] = attribute.i18n;\n      }\n      if (normalizedName.startsWith(TEMPLATE_ATTR_PREFIX)) {\n        // *-attributes\n        if (elementHasInlineTemplate) {\n          this.reportError(`Can't have multiple template bindings on one element. Use only one attribute prefixed with *`, attribute.sourceSpan);\n        }\n        isTemplateBinding = true;\n        elementHasInlineTemplate = true;\n        const templateValue = attribute.value;\n        const templateKey = normalizedName.substring(TEMPLATE_ATTR_PREFIX.length);\n        const parsedVariables = [];\n        const absoluteValueOffset = attribute.valueSpan ? attribute.valueSpan.start.offset :\n        // If there is no value span the attribute does not have a value, like `attr` in\n        //`<div attr></div>`. In this case, point to one character beyond the last character of\n        // the attribute name.\n        attribute.sourceSpan.start.offset + attribute.name.length;\n        this.bindingParser.parseInlineTemplateBinding(templateKey, templateValue, attribute.sourceSpan, absoluteValueOffset, [], templateParsedProperties, parsedVariables, true /* isIvyAst */);\n        templateVariables.push(...parsedVariables.map(v => new Variable(v.name, v.value, v.sourceSpan, v.keySpan, v.valueSpan)));\n      } else {\n        // Check for variables, events, property bindings, interpolation\n        hasBinding = this.parseAttribute(isTemplateElement, attribute, [], parsedProperties, boundEvents, variables, references);\n      }\n      if (!hasBinding && !isTemplateBinding) {\n        // don't include the bindings as attributes as well in the AST\n        attributes.push(this.visitAttribute(attribute));\n      }\n    }\n    let children;\n    if (preparsedElement.nonBindable) {\n      // The `NonBindableVisitor` may need to return an array of nodes for blocks so we need\n      // to flatten the array here. Avoid doing this for the `HtmlAstToIvyAst` since `flat` creates\n      // a new array.\n      children = visitAll(NON_BINDABLE_VISITOR, element.children).flat(Infinity);\n    } else {\n      children = visitAll(this, element.children, element.children);\n    }\n    let parsedElement;\n    if (preparsedElement.type === PreparsedElementType.NG_CONTENT) {\n      const selector = preparsedElement.selectAttr;\n      const attrs = element.attrs.map(attr => this.visitAttribute(attr));\n      parsedElement = new Content(selector, attrs, children, element.sourceSpan, element.i18n);\n      this.ngContentSelectors.push(selector);\n    } else if (isTemplateElement) {\n      // `<ng-template>`\n      const attrs = this.extractAttributes(element.name, parsedProperties, i18nAttrsMeta);\n      parsedElement = new Template(element.name, attributes, attrs.bound, boundEvents, [\n        /* no template attributes */\n      ], children, references, variables, element.sourceSpan, element.startSourceSpan, element.endSourceSpan, element.i18n);\n    } else {\n      const attrs = this.extractAttributes(element.name, parsedProperties, i18nAttrsMeta);\n      parsedElement = new Element$1(element.name, attributes, attrs.bound, boundEvents, children, references, element.sourceSpan, element.startSourceSpan, element.endSourceSpan, element.i18n);\n    }\n    if (elementHasInlineTemplate) {\n      // If this node is an inline-template (e.g. has *ngFor) then we need to create a template\n      // node that contains this node.\n      // Moreover, if the node is an element, then we need to hoist its attributes to the template\n      // node for matching against content projection selectors.\n      const attrs = this.extractAttributes('ng-template', templateParsedProperties, i18nAttrsMeta);\n      const templateAttrs = [];\n      attrs.literal.forEach(attr => templateAttrs.push(attr));\n      attrs.bound.forEach(attr => templateAttrs.push(attr));\n      const hoistedAttrs = parsedElement instanceof Element$1 ? {\n        attributes: parsedElement.attributes,\n        inputs: parsedElement.inputs,\n        outputs: parsedElement.outputs\n      } : {\n        attributes: [],\n        inputs: [],\n        outputs: []\n      };\n      // For <ng-template>s with structural directives on them, avoid passing i18n information to\n      // the wrapping template to prevent unnecessary i18n instructions from being generated. The\n      // necessary i18n meta information will be extracted from child elements.\n      const i18n = isTemplateElement && isI18nRootElement ? undefined : element.i18n;\n      const name = parsedElement instanceof Template ? null : parsedElement.name;\n      parsedElement = new Template(name, hoistedAttrs.attributes, hoistedAttrs.inputs, hoistedAttrs.outputs, templateAttrs, [parsedElement], [\n        /* no references */\n      ], templateVariables, element.sourceSpan, element.startSourceSpan, element.endSourceSpan, i18n);\n    }\n    if (isI18nRootElement) {\n      this.inI18nBlock = false;\n    }\n    return parsedElement;\n  }\n  visitAttribute(attribute) {\n    return new TextAttribute(attribute.name, attribute.value, attribute.sourceSpan, attribute.keySpan, attribute.valueSpan, attribute.i18n);\n  }\n  visitText(text) {\n    return this.processedNodes.has(text) ? null : this._visitTextWithInterpolation(text.value, text.sourceSpan, text.tokens, text.i18n);\n  }\n  visitExpansion(expansion) {\n    if (!expansion.i18n) {\n      // do not generate Icu in case it was created\n      // outside of i18n block in a template\n      return null;\n    }\n    if (!isI18nRootNode(expansion.i18n)) {\n      throw new Error(`Invalid type \"${expansion.i18n.constructor}\" for \"i18n\" property of ${expansion.sourceSpan.toString()}. Expected a \"Message\"`);\n    }\n    const message = expansion.i18n;\n    const vars = {};\n    const placeholders = {};\n    // extract VARs from ICUs - we process them separately while\n    // assembling resulting message via goog.getMsg function, since\n    // we need to pass them to top-level goog.getMsg call\n    Object.keys(message.placeholders).forEach(key => {\n      const value = message.placeholders[key];\n      if (key.startsWith(I18N_ICU_VAR_PREFIX)) {\n        // Currently when the `plural` or `select` keywords in an ICU contain trailing spaces (e.g.\n        // `{count, select , ...}`), these spaces are also included into the key names in ICU vars\n        // (e.g. \"VAR_SELECT \"). These trailing spaces are not desirable, since they will later be\n        // converted into `_` symbols while normalizing placeholder names, which might lead to\n        // mismatches at runtime (i.e. placeholder will not be replaced with the correct value).\n        const formattedKey = key.trim();\n        const ast = this.bindingParser.parseInterpolationExpression(value.text, value.sourceSpan);\n        vars[formattedKey] = new BoundText(ast, value.sourceSpan);\n      } else {\n        placeholders[key] = this._visitTextWithInterpolation(value.text, value.sourceSpan, null);\n      }\n    });\n    return new Icu$1(vars, placeholders, expansion.sourceSpan, message);\n  }\n  visitExpansionCase(expansionCase) {\n    return null;\n  }\n  visitComment(comment) {\n    if (this.options.collectCommentNodes) {\n      this.commentNodes.push(new Comment$1(comment.value || '', comment.sourceSpan));\n    }\n    return null;\n  }\n  visitLetDeclaration(decl, context) {\n    const value = this.bindingParser.parseBinding(decl.value, false, decl.valueSpan, decl.valueSpan.start.offset);\n    if (value.errors.length === 0 && value.ast instanceof EmptyExpr$1) {\n      this.reportError('@let declaration value cannot be empty', decl.valueSpan);\n    }\n    return new LetDeclaration$1(decl.name, value, decl.sourceSpan, decl.nameSpan, decl.valueSpan);\n  }\n  visitBlockParameter() {\n    return null;\n  }\n  visitBlock(block, context) {\n    const index = Array.isArray(context) ? context.indexOf(block) : -1;\n    if (index === -1) {\n      throw new Error('Visitor invoked incorrectly. Expecting visitBlock to be invoked siblings array as its context');\n    }\n    // Connected blocks may have been processed as a part of the previous block.\n    if (this.processedNodes.has(block)) {\n      return null;\n    }\n    let result = null;\n    switch (block.name) {\n      case 'defer':\n        result = createDeferredBlock(block, this.findConnectedBlocks(index, context, isConnectedDeferLoopBlock), this, this.bindingParser);\n        break;\n      case 'switch':\n        result = createSwitchBlock(block, this, this.bindingParser);\n        break;\n      case 'for':\n        result = createForLoop(block, this.findConnectedBlocks(index, context, isConnectedForLoopBlock), this, this.bindingParser);\n        break;\n      case 'if':\n        result = createIfBlock(block, this.findConnectedBlocks(index, context, isConnectedIfLoopBlock), this, this.bindingParser);\n        break;\n      default:\n        let errorMessage;\n        if (isConnectedDeferLoopBlock(block.name)) {\n          errorMessage = `@${block.name} block can only be used after an @defer block.`;\n          this.processedNodes.add(block);\n        } else if (isConnectedForLoopBlock(block.name)) {\n          errorMessage = `@${block.name} block can only be used after an @for block.`;\n          this.processedNodes.add(block);\n        } else if (isConnectedIfLoopBlock(block.name)) {\n          errorMessage = `@${block.name} block can only be used after an @if or @else if block.`;\n          this.processedNodes.add(block);\n        } else {\n          errorMessage = `Unrecognized block @${block.name}.`;\n        }\n        result = {\n          node: new UnknownBlock(block.name, block.sourceSpan, block.nameSpan),\n          errors: [new ParseError(block.sourceSpan, errorMessage)]\n        };\n        break;\n    }\n    this.errors.push(...result.errors);\n    return result.node;\n  }\n  findConnectedBlocks(primaryBlockIndex, siblings, predicate) {\n    const relatedBlocks = [];\n    for (let i = primaryBlockIndex + 1; i < siblings.length; i++) {\n      const node = siblings[i];\n      // Skip over comments.\n      if (node instanceof Comment) {\n        continue;\n      }\n      // Ignore empty text nodes between blocks.\n      if (node instanceof Text && node.value.trim().length === 0) {\n        // Add the text node to the processed nodes since we don't want\n        // it to be generated between the connected nodes.\n        this.processedNodes.add(node);\n        continue;\n      }\n      // Stop searching as soon as we hit a non-block node or a block that is unrelated.\n      if (!(node instanceof Block) || !predicate(node.name)) {\n        break;\n      }\n      relatedBlocks.push(node);\n      this.processedNodes.add(node);\n    }\n    return relatedBlocks;\n  }\n  // convert view engine `ParsedProperty` to a format suitable for IVY\n  extractAttributes(elementName, properties, i18nPropsMeta) {\n    const bound = [];\n    const literal = [];\n    properties.forEach(prop => {\n      const i18n = i18nPropsMeta[prop.name];\n      if (prop.isLiteral) {\n        literal.push(new TextAttribute(prop.name, prop.expression.source || '', prop.sourceSpan, prop.keySpan, prop.valueSpan, i18n));\n      } else {\n        // Note that validation is skipped and property mapping is disabled\n        // due to the fact that we need to make sure a given prop is not an\n        // input of a directive and directive matching happens at runtime.\n        const bep = this.bindingParser.createBoundElementProperty(elementName, prop, /* skipValidation */true, /* mapPropertyName */false);\n        bound.push(BoundAttribute.fromBoundElementProperty(bep, i18n));\n      }\n    });\n    return {\n      bound,\n      literal\n    };\n  }\n  parseAttribute(isTemplateElement, attribute, matchableAttributes, parsedProperties, boundEvents, variables, references) {\n    const name = normalizeAttributeName(attribute.name);\n    const value = attribute.value;\n    const srcSpan = attribute.sourceSpan;\n    const absoluteOffset = attribute.valueSpan ? attribute.valueSpan.start.offset : srcSpan.start.offset;\n    function createKeySpan(srcSpan, prefix, identifier) {\n      // We need to adjust the start location for the keySpan to account for the removed 'data-'\n      // prefix from `normalizeAttributeName`.\n      const normalizationAdjustment = attribute.name.length - name.length;\n      const keySpanStart = srcSpan.start.moveBy(prefix.length + normalizationAdjustment);\n      const keySpanEnd = keySpanStart.moveBy(identifier.length);\n      return new ParseSourceSpan(keySpanStart, keySpanEnd, keySpanStart, identifier);\n    }\n    const bindParts = name.match(BIND_NAME_REGEXP);\n    if (bindParts) {\n      if (bindParts[KW_BIND_IDX] != null) {\n        const identifier = bindParts[IDENT_KW_IDX];\n        const keySpan = createKeySpan(srcSpan, bindParts[KW_BIND_IDX], identifier);\n        this.bindingParser.parsePropertyBinding(identifier, value, false, false, srcSpan, absoluteOffset, attribute.valueSpan, matchableAttributes, parsedProperties, keySpan);\n      } else if (bindParts[KW_LET_IDX]) {\n        if (isTemplateElement) {\n          const identifier = bindParts[IDENT_KW_IDX];\n          const keySpan = createKeySpan(srcSpan, bindParts[KW_LET_IDX], identifier);\n          this.parseVariable(identifier, value, srcSpan, keySpan, attribute.valueSpan, variables);\n        } else {\n          this.reportError(`\"let-\" is only supported on ng-template elements.`, srcSpan);\n        }\n      } else if (bindParts[KW_REF_IDX]) {\n        const identifier = bindParts[IDENT_KW_IDX];\n        const keySpan = createKeySpan(srcSpan, bindParts[KW_REF_IDX], identifier);\n        this.parseReference(identifier, value, srcSpan, keySpan, attribute.valueSpan, references);\n      } else if (bindParts[KW_ON_IDX]) {\n        const events = [];\n        const identifier = bindParts[IDENT_KW_IDX];\n        const keySpan = createKeySpan(srcSpan, bindParts[KW_ON_IDX], identifier);\n        this.bindingParser.parseEvent(identifier, value, /* isAssignmentEvent */false, srcSpan, attribute.valueSpan || srcSpan, matchableAttributes, events, keySpan);\n        addEvents(events, boundEvents);\n      } else if (bindParts[KW_BINDON_IDX]) {\n        const identifier = bindParts[IDENT_KW_IDX];\n        const keySpan = createKeySpan(srcSpan, bindParts[KW_BINDON_IDX], identifier);\n        this.bindingParser.parsePropertyBinding(identifier, value, false, true, srcSpan, absoluteOffset, attribute.valueSpan, matchableAttributes, parsedProperties, keySpan);\n        this.parseAssignmentEvent(identifier, value, srcSpan, attribute.valueSpan, matchableAttributes, boundEvents, keySpan);\n      } else if (bindParts[KW_AT_IDX]) {\n        const keySpan = createKeySpan(srcSpan, '', name);\n        this.bindingParser.parseLiteralAttr(name, value, srcSpan, absoluteOffset, attribute.valueSpan, matchableAttributes, parsedProperties, keySpan);\n      }\n      return true;\n    }\n    // We didn't see a kw-prefixed property binding, but we have not yet checked\n    // for the []/()/[()] syntax.\n    let delims = null;\n    if (name.startsWith(BINDING_DELIMS.BANANA_BOX.start)) {\n      delims = BINDING_DELIMS.BANANA_BOX;\n    } else if (name.startsWith(BINDING_DELIMS.PROPERTY.start)) {\n      delims = BINDING_DELIMS.PROPERTY;\n    } else if (name.startsWith(BINDING_DELIMS.EVENT.start)) {\n      delims = BINDING_DELIMS.EVENT;\n    }\n    if (delims !== null &&\n    // NOTE: older versions of the parser would match a start/end delimited\n    // binding iff the property name was terminated by the ending delimiter\n    // and the identifier in the binding was non-empty.\n    // TODO(ayazhafiz): update this to handle malformed bindings.\n    name.endsWith(delims.end) && name.length > delims.start.length + delims.end.length) {\n      const identifier = name.substring(delims.start.length, name.length - delims.end.length);\n      const keySpan = createKeySpan(srcSpan, delims.start, identifier);\n      if (delims.start === BINDING_DELIMS.BANANA_BOX.start) {\n        this.bindingParser.parsePropertyBinding(identifier, value, false, true, srcSpan, absoluteOffset, attribute.valueSpan, matchableAttributes, parsedProperties, keySpan);\n        this.parseAssignmentEvent(identifier, value, srcSpan, attribute.valueSpan, matchableAttributes, boundEvents, keySpan);\n      } else if (delims.start === BINDING_DELIMS.PROPERTY.start) {\n        this.bindingParser.parsePropertyBinding(identifier, value, false, false, srcSpan, absoluteOffset, attribute.valueSpan, matchableAttributes, parsedProperties, keySpan);\n      } else {\n        const events = [];\n        this.bindingParser.parseEvent(identifier, value, /* isAssignmentEvent */false, srcSpan, attribute.valueSpan || srcSpan, matchableAttributes, events, keySpan);\n        addEvents(events, boundEvents);\n      }\n      return true;\n    }\n    // No explicit binding found.\n    const keySpan = createKeySpan(srcSpan, '' /* prefix */, name);\n    const hasBinding = this.bindingParser.parsePropertyInterpolation(name, value, srcSpan, attribute.valueSpan, matchableAttributes, parsedProperties, keySpan, attribute.valueTokens ?? null);\n    return hasBinding;\n  }\n  _visitTextWithInterpolation(value, sourceSpan, interpolatedTokens, i18n) {\n    const valueNoNgsp = replaceNgsp(value);\n    const expr = this.bindingParser.parseInterpolation(valueNoNgsp, sourceSpan, interpolatedTokens);\n    return expr ? new BoundText(expr, sourceSpan, i18n) : new Text$3(valueNoNgsp, sourceSpan);\n  }\n  parseVariable(identifier, value, sourceSpan, keySpan, valueSpan, variables) {\n    if (identifier.indexOf('-') > -1) {\n      this.reportError(`\"-\" is not allowed in variable names`, sourceSpan);\n    } else if (identifier.length === 0) {\n      this.reportError(`Variable does not have a name`, sourceSpan);\n    }\n    variables.push(new Variable(identifier, value, sourceSpan, keySpan, valueSpan));\n  }\n  parseReference(identifier, value, sourceSpan, keySpan, valueSpan, references) {\n    if (identifier.indexOf('-') > -1) {\n      this.reportError(`\"-\" is not allowed in reference names`, sourceSpan);\n    } else if (identifier.length === 0) {\n      this.reportError(`Reference does not have a name`, sourceSpan);\n    } else if (references.some(reference => reference.name === identifier)) {\n      this.reportError(`Reference \"#${identifier}\" is defined more than once`, sourceSpan);\n    }\n    references.push(new Reference(identifier, value, sourceSpan, keySpan, valueSpan));\n  }\n  parseAssignmentEvent(name, expression, sourceSpan, valueSpan, targetMatchableAttrs, boundEvents, keySpan) {\n    const events = [];\n    this.bindingParser.parseEvent(`${name}Change`, expression, /* isAssignmentEvent */true, sourceSpan, valueSpan || sourceSpan, targetMatchableAttrs, events, keySpan);\n    addEvents(events, boundEvents);\n  }\n  reportError(message, sourceSpan, level = ParseErrorLevel.ERROR) {\n    this.errors.push(new ParseError(sourceSpan, message, level));\n  }\n}\nclass NonBindableVisitor {\n  visitElement(ast) {\n    const preparsedElement = preparseElement(ast);\n    if (preparsedElement.type === PreparsedElementType.SCRIPT || preparsedElement.type === PreparsedElementType.STYLE || preparsedElement.type === PreparsedElementType.STYLESHEET) {\n      // Skipping <script> for security reasons\n      // Skipping <style> and stylesheets as we already processed them\n      // in the StyleCompiler\n      return null;\n    }\n    const children = visitAll(this, ast.children, null);\n    return new Element$1(ast.name, visitAll(this, ast.attrs), /* inputs */[], /* outputs */[], children, /* references */[], ast.sourceSpan, ast.startSourceSpan, ast.endSourceSpan);\n  }\n  visitComment(comment) {\n    return null;\n  }\n  visitAttribute(attribute) {\n    return new TextAttribute(attribute.name, attribute.value, attribute.sourceSpan, attribute.keySpan, attribute.valueSpan, attribute.i18n);\n  }\n  visitText(text) {\n    return new Text$3(text.value, text.sourceSpan);\n  }\n  visitExpansion(expansion) {\n    return null;\n  }\n  visitExpansionCase(expansionCase) {\n    return null;\n  }\n  visitBlock(block, context) {\n    const nodes = [\n    // In an ngNonBindable context we treat the opening/closing tags of block as plain text.\n    // This is the as if the `tokenizeBlocks` option was disabled.\n    new Text$3(block.startSourceSpan.toString(), block.startSourceSpan), ...visitAll(this, block.children)];\n    if (block.endSourceSpan !== null) {\n      nodes.push(new Text$3(block.endSourceSpan.toString(), block.endSourceSpan));\n    }\n    return nodes;\n  }\n  visitBlockParameter(parameter, context) {\n    return null;\n  }\n  visitLetDeclaration(decl, context) {\n    return new Text$3(`@let ${decl.name} = ${decl.value};`, decl.sourceSpan);\n  }\n}\nconst NON_BINDABLE_VISITOR = new NonBindableVisitor();\nfunction normalizeAttributeName(attrName) {\n  return /^data-/i.test(attrName) ? attrName.substring(5) : attrName;\n}\nfunction addEvents(events, boundEvents) {\n  boundEvents.push(...events.map(e => BoundEvent.fromParsedEvent(e)));\n}\nfunction textContents(node) {\n  if (node.children.length !== 1 || !(node.children[0] instanceof Text)) {\n    return null;\n  } else {\n    return node.children[0].value;\n  }\n}\nconst LEADING_TRIVIA_CHARS = [' ', '\\n', '\\r', '\\t'];\n/**\n * Parse a template into render3 `Node`s and additional metadata, with no other dependencies.\n *\n * @param template text of the template to parse\n * @param templateUrl URL to use for source mapping of the parsed template\n * @param options options to modify how the template is parsed\n */\nfunction parseTemplate(template, templateUrl, options = {}) {\n  const {\n    interpolationConfig,\n    preserveWhitespaces,\n    enableI18nLegacyMessageIdFormat,\n    allowInvalidAssignmentEvents\n  } = options;\n  const bindingParser = makeBindingParser(interpolationConfig, allowInvalidAssignmentEvents);\n  const htmlParser = new HtmlParser();\n  const parseResult = htmlParser.parse(template, templateUrl, {\n    leadingTriviaChars: LEADING_TRIVIA_CHARS,\n    ...options,\n    tokenizeExpansionForms: true,\n    tokenizeBlocks: options.enableBlockSyntax ?? true,\n    tokenizeLet: options.enableLetSyntax ?? true\n  });\n  if (!options.alwaysAttemptHtmlToR3AstConversion && parseResult.errors && parseResult.errors.length > 0) {\n    const parsedTemplate = {\n      interpolationConfig,\n      preserveWhitespaces,\n      errors: parseResult.errors,\n      nodes: [],\n      styleUrls: [],\n      styles: [],\n      ngContentSelectors: []\n    };\n    if (options.collectCommentNodes) {\n      parsedTemplate.commentNodes = [];\n    }\n    return parsedTemplate;\n  }\n  let rootNodes = parseResult.rootNodes;\n  // process i18n meta information (scan attributes, generate ids)\n  // before we run whitespace removal process, because existing i18n\n  // extraction process (ng extract-i18n) relies on a raw content to generate\n  // message ids\n  const i18nMetaVisitor = new I18nMetaVisitor(interpolationConfig, /* keepI18nAttrs */!preserveWhitespaces, enableI18nLegacyMessageIdFormat);\n  const i18nMetaResult = i18nMetaVisitor.visitAllWithErrors(rootNodes);\n  if (!options.alwaysAttemptHtmlToR3AstConversion && i18nMetaResult.errors && i18nMetaResult.errors.length > 0) {\n    const parsedTemplate = {\n      interpolationConfig,\n      preserveWhitespaces,\n      errors: i18nMetaResult.errors,\n      nodes: [],\n      styleUrls: [],\n      styles: [],\n      ngContentSelectors: []\n    };\n    if (options.collectCommentNodes) {\n      parsedTemplate.commentNodes = [];\n    }\n    return parsedTemplate;\n  }\n  rootNodes = i18nMetaResult.rootNodes;\n  if (!preserveWhitespaces) {\n    rootNodes = visitAll(new WhitespaceVisitor(), rootNodes);\n    // run i18n meta visitor again in case whitespaces are removed (because that might affect\n    // generated i18n message content) and first pass indicated that i18n content is present in a\n    // template. During this pass i18n IDs generated at the first pass will be preserved, so we can\n    // mimic existing extraction process (ng extract-i18n)\n    if (i18nMetaVisitor.hasI18nMeta) {\n      rootNodes = visitAll(new I18nMetaVisitor(interpolationConfig, /* keepI18nAttrs */false), rootNodes);\n    }\n  }\n  const {\n    nodes,\n    errors,\n    styleUrls,\n    styles,\n    ngContentSelectors,\n    commentNodes\n  } = htmlAstToRender3Ast(rootNodes, bindingParser, {\n    collectCommentNodes: !!options.collectCommentNodes\n  });\n  errors.push(...parseResult.errors, ...i18nMetaResult.errors);\n  const parsedTemplate = {\n    interpolationConfig,\n    preserveWhitespaces,\n    errors: errors.length > 0 ? errors : null,\n    nodes,\n    styleUrls,\n    styles,\n    ngContentSelectors\n  };\n  if (options.collectCommentNodes) {\n    parsedTemplate.commentNodes = commentNodes;\n  }\n  return parsedTemplate;\n}\nconst elementRegistry = new DomElementSchemaRegistry();\n/**\n * Construct a `BindingParser` with a default configuration.\n */\nfunction makeBindingParser(interpolationConfig = DEFAULT_INTERPOLATION_CONFIG, allowInvalidAssignmentEvents = false) {\n  return new BindingParser(new Parser$1(new Lexer()), interpolationConfig, elementRegistry, [], allowInvalidAssignmentEvents);\n}\nconst COMPONENT_VARIABLE = '%COMP%';\nconst HOST_ATTR = `_nghost-${COMPONENT_VARIABLE}`;\nconst CONTENT_ATTR = `_ngcontent-${COMPONENT_VARIABLE}`;\nfunction baseDirectiveFields(meta, constantPool, bindingParser) {\n  const definitionMap = new DefinitionMap();\n  const selectors = parseSelectorToR3Selector(meta.selector);\n  // e.g. `type: MyDirective`\n  definitionMap.set('type', meta.type.value);\n  // e.g. `selectors: [['', 'someDir', '']]`\n  if (selectors.length > 0) {\n    definitionMap.set('selectors', asLiteral(selectors));\n  }\n  if (meta.queries.length > 0) {\n    // e.g. `contentQueries: (rf, ctx, dirIndex) => { ... }\n    definitionMap.set('contentQueries', createContentQueriesFunction(meta.queries, constantPool, meta.name));\n  }\n  if (meta.viewQueries.length) {\n    definitionMap.set('viewQuery', createViewQueriesFunction(meta.viewQueries, constantPool, meta.name));\n  }\n  // e.g. `hostBindings: (rf, ctx) => { ... }\n  definitionMap.set('hostBindings', createHostBindingsFunction(meta.host, meta.typeSourceSpan, bindingParser, constantPool, meta.selector || '', meta.name, definitionMap));\n  // e.g 'inputs: {a: 'a'}`\n  definitionMap.set('inputs', conditionallyCreateDirectiveBindingLiteral(meta.inputs, true));\n  // e.g 'outputs: {a: 'a'}`\n  definitionMap.set('outputs', conditionallyCreateDirectiveBindingLiteral(meta.outputs));\n  if (meta.exportAs !== null) {\n    definitionMap.set('exportAs', literalArr(meta.exportAs.map(e => literal(e))));\n  }\n  if (meta.isStandalone) {\n    definitionMap.set('standalone', literal(true));\n  }\n  if (meta.isSignal) {\n    definitionMap.set('signals', literal(true));\n  }\n  return definitionMap;\n}\n/**\n * Add features to the definition map.\n */\nfunction addFeatures(definitionMap, meta) {\n  // e.g. `features: [NgOnChangesFeature]`\n  const features = [];\n  const providers = meta.providers;\n  const viewProviders = meta.viewProviders;\n  const inputKeys = Object.keys(meta.inputs);\n  if (providers || viewProviders) {\n    const args = [providers || new LiteralArrayExpr([])];\n    if (viewProviders) {\n      args.push(viewProviders);\n    }\n    features.push(importExpr(Identifiers.ProvidersFeature).callFn(args));\n  }\n  for (const key of inputKeys) {\n    if (meta.inputs[key].transformFunction !== null) {\n      features.push(importExpr(Identifiers.InputTransformsFeatureFeature));\n      break;\n    }\n  }\n  // Note: host directives feature needs to be inserted before the\n  // inheritance feature to ensure the correct execution order.\n  if (meta.hostDirectives?.length) {\n    features.push(importExpr(Identifiers.HostDirectivesFeature).callFn([createHostDirectivesFeatureArg(meta.hostDirectives)]));\n  }\n  if (meta.usesInheritance) {\n    features.push(importExpr(Identifiers.InheritDefinitionFeature));\n  }\n  if (meta.fullInheritance) {\n    features.push(importExpr(Identifiers.CopyDefinitionFeature));\n  }\n  if (meta.lifecycle.usesOnChanges) {\n    features.push(importExpr(Identifiers.NgOnChangesFeature));\n  }\n  // TODO: better way of differentiating component vs directive metadata.\n  if (meta.hasOwnProperty('template') && meta.isStandalone) {\n    features.push(importExpr(Identifiers.StandaloneFeature));\n  }\n  if (features.length) {\n    definitionMap.set('features', literalArr(features));\n  }\n}\n/**\n * Compile a directive for the render3 runtime as defined by the `R3DirectiveMetadata`.\n */\nfunction compileDirectiveFromMetadata(meta, constantPool, bindingParser) {\n  const definitionMap = baseDirectiveFields(meta, constantPool, bindingParser);\n  addFeatures(definitionMap, meta);\n  const expression = importExpr(Identifiers.defineDirective).callFn([definitionMap.toLiteralMap()], undefined, true);\n  const type = createDirectiveType(meta);\n  return {\n    expression,\n    type,\n    statements: []\n  };\n}\n/**\n * Compile a component for the render3 runtime as defined by the `R3ComponentMetadata`.\n */\nfunction compileComponentFromMetadata(meta, constantPool, bindingParser) {\n  const definitionMap = baseDirectiveFields(meta, constantPool, bindingParser);\n  addFeatures(definitionMap, meta);\n  const selector = meta.selector && CssSelector.parse(meta.selector);\n  const firstSelector = selector && selector[0];\n  // e.g. `attr: [\"class\", \".my.app\"]`\n  // This is optional an only included if the first selector of a component specifies attributes.\n  if (firstSelector) {\n    const selectorAttributes = firstSelector.getAttrs();\n    if (selectorAttributes.length) {\n      definitionMap.set('attrs', constantPool.getConstLiteral(literalArr(selectorAttributes.map(value => value != null ? literal(value) : literal(undefined))), /* forceShared */true));\n    }\n  }\n  // e.g. `template: function MyComponent_Template(_ctx, _cm) {...}`\n  const templateTypeName = meta.name;\n  let allDeferrableDepsFn = null;\n  if (meta.defer.mode === 1 /* DeferBlockDepsEmitMode.PerComponent */ && meta.defer.dependenciesFn !== null) {\n    const fnName = `${templateTypeName}_DeferFn`;\n    constantPool.statements.push(new DeclareVarStmt(fnName, meta.defer.dependenciesFn, undefined, StmtModifier.Final));\n    allDeferrableDepsFn = variable(fnName);\n  }\n  // First the template is ingested into IR:\n  const tpl = ingestComponent(meta.name, meta.template.nodes, constantPool, meta.relativeContextFilePath, meta.i18nUseExternalIds, meta.defer, allDeferrableDepsFn);\n  // Then the IR is transformed to prepare it for cod egeneration.\n  transform(tpl, CompilationJobKind.Tmpl);\n  // Finally we emit the template function:\n  const templateFn = emitTemplateFn(tpl, constantPool);\n  if (tpl.contentSelectors !== null) {\n    definitionMap.set('ngContentSelectors', tpl.contentSelectors);\n  }\n  definitionMap.set('decls', literal(tpl.root.decls));\n  definitionMap.set('vars', literal(tpl.root.vars));\n  if (tpl.consts.length > 0) {\n    if (tpl.constsInitializers.length > 0) {\n      definitionMap.set('consts', arrowFn([], [...tpl.constsInitializers, new ReturnStatement(literalArr(tpl.consts))]));\n    } else {\n      definitionMap.set('consts', literalArr(tpl.consts));\n    }\n  }\n  definitionMap.set('template', templateFn);\n  if (meta.declarationListEmitMode !== 3 /* DeclarationListEmitMode.RuntimeResolved */ && meta.declarations.length > 0) {\n    definitionMap.set('dependencies', compileDeclarationList(literalArr(meta.declarations.map(decl => decl.type)), meta.declarationListEmitMode));\n  } else if (meta.declarationListEmitMode === 3 /* DeclarationListEmitMode.RuntimeResolved */) {\n    const args = [meta.type.value];\n    if (meta.rawImports) {\n      args.push(meta.rawImports);\n    }\n    definitionMap.set('dependencies', importExpr(Identifiers.getComponentDepsFactory).callFn(args));\n  }\n  if (meta.encapsulation === null) {\n    meta.encapsulation = ViewEncapsulation.Emulated;\n  }\n  // e.g. `styles: [str1, str2]`\n  if (meta.styles && meta.styles.length) {\n    const styleValues = meta.encapsulation == ViewEncapsulation.Emulated ? compileStyles(meta.styles, CONTENT_ATTR, HOST_ATTR) : meta.styles;\n    const styleNodes = styleValues.reduce((result, style) => {\n      if (style.trim().length > 0) {\n        result.push(constantPool.getConstLiteral(literal(style)));\n      }\n      return result;\n    }, []);\n    if (styleNodes.length > 0) {\n      definitionMap.set('styles', literalArr(styleNodes));\n    }\n  } else if (meta.encapsulation === ViewEncapsulation.Emulated) {\n    // If there is no style, don't generate css selectors on elements\n    meta.encapsulation = ViewEncapsulation.None;\n  }\n  // Only set view encapsulation if it's not the default value\n  if (meta.encapsulation !== ViewEncapsulation.Emulated) {\n    definitionMap.set('encapsulation', literal(meta.encapsulation));\n  }\n  // e.g. `animation: [trigger('123', [])]`\n  if (meta.animations !== null) {\n    definitionMap.set('data', literalMap([{\n      key: 'animation',\n      value: meta.animations,\n      quoted: false\n    }]));\n  }\n  // Setting change detection flag\n  if (meta.changeDetection !== null) {\n    if (typeof meta.changeDetection === 'number' && meta.changeDetection !== ChangeDetectionStrategy.Default) {\n      // changeDetection is resolved during analysis. Only set it if not the default.\n      definitionMap.set('changeDetection', literal(meta.changeDetection));\n    } else if (typeof meta.changeDetection === 'object') {\n      // changeDetection is not resolved during analysis (e.g., we are in local compilation mode).\n      // So place it as is.\n      definitionMap.set('changeDetection', meta.changeDetection);\n    }\n  }\n  const expression = importExpr(Identifiers.defineComponent).callFn([definitionMap.toLiteralMap()], undefined, true);\n  const type = createComponentType(meta);\n  return {\n    expression,\n    type,\n    statements: []\n  };\n}\n/**\n * Creates the type specification from the component meta. This type is inserted into .d.ts files\n * to be consumed by upstream compilations.\n */\nfunction createComponentType(meta) {\n  const typeParams = createBaseDirectiveTypeParams(meta);\n  typeParams.push(stringArrayAsType(meta.template.ngContentSelectors));\n  typeParams.push(expressionType(literal(meta.isStandalone)));\n  typeParams.push(createHostDirectivesType(meta));\n  // TODO(signals): Always include this metadata starting with v17. Right\n  // now Angular v16.0.x does not support this field and library distributions\n  // would then be incompatible with v16.0.x framework users.\n  if (meta.isSignal) {\n    typeParams.push(expressionType(literal(meta.isSignal)));\n  }\n  return expressionType(importExpr(Identifiers.ComponentDeclaration, typeParams));\n}\n/**\n * Compiles the array literal of declarations into an expression according to the provided emit\n * mode.\n */\nfunction compileDeclarationList(list, mode) {\n  switch (mode) {\n    case 0 /* DeclarationListEmitMode.Direct */:\n      // directives: [MyDir],\n      return list;\n    case 1 /* DeclarationListEmitMode.Closure */:\n      // directives: function () { return [MyDir]; }\n      return arrowFn([], list);\n    case 2 /* DeclarationListEmitMode.ClosureResolved */:\n      // directives: function () { return [MyDir].map(ng.resolveForwardRef); }\n      const resolvedList = list.prop('map').callFn([importExpr(Identifiers.resolveForwardRef)]);\n      return arrowFn([], resolvedList);\n    case 3 /* DeclarationListEmitMode.RuntimeResolved */:\n      throw new Error(`Unsupported with an array of pre-resolved dependencies`);\n  }\n}\nfunction stringAsType(str) {\n  return expressionType(literal(str));\n}\nfunction stringMapAsLiteralExpression(map) {\n  const mapValues = Object.keys(map).map(key => {\n    const value = Array.isArray(map[key]) ? map[key][0] : map[key];\n    return {\n      key,\n      value: literal(value),\n      quoted: true\n    };\n  });\n  return literalMap(mapValues);\n}\nfunction stringArrayAsType(arr) {\n  return arr.length > 0 ? expressionType(literalArr(arr.map(value => literal(value)))) : NONE_TYPE;\n}\nfunction createBaseDirectiveTypeParams(meta) {\n  // On the type side, remove newlines from the selector as it will need to fit into a TypeScript\n  // string literal, which must be on one line.\n  const selectorForType = meta.selector !== null ? meta.selector.replace(/\\n/g, '') : null;\n  return [typeWithParameters(meta.type.type, meta.typeArgumentCount), selectorForType !== null ? stringAsType(selectorForType) : NONE_TYPE, meta.exportAs !== null ? stringArrayAsType(meta.exportAs) : NONE_TYPE, expressionType(getInputsTypeExpression(meta)), expressionType(stringMapAsLiteralExpression(meta.outputs)), stringArrayAsType(meta.queries.map(q => q.propertyName))];\n}\nfunction getInputsTypeExpression(meta) {\n  return literalMap(Object.keys(meta.inputs).map(key => {\n    const value = meta.inputs[key];\n    const values = [{\n      key: 'alias',\n      value: literal(value.bindingPropertyName),\n      quoted: true\n    }, {\n      key: 'required',\n      value: literal(value.required),\n      quoted: true\n    }];\n    // TODO(legacy-partial-output-inputs): Consider always emitting this information,\n    // or leaving it as is.\n    if (value.isSignal) {\n      values.push({\n        key: 'isSignal',\n        value: literal(value.isSignal),\n        quoted: true\n      });\n    }\n    return {\n      key,\n      value: literalMap(values),\n      quoted: true\n    };\n  }));\n}\n/**\n * Creates the type specification from the directive meta. This type is inserted into .d.ts files\n * to be consumed by upstream compilations.\n */\nfunction createDirectiveType(meta) {\n  const typeParams = createBaseDirectiveTypeParams(meta);\n  // Directives have no NgContentSelectors slot, but instead express a `never` type\n  // so that future fields align.\n  typeParams.push(NONE_TYPE);\n  typeParams.push(expressionType(literal(meta.isStandalone)));\n  typeParams.push(createHostDirectivesType(meta));\n  // TODO(signals): Always include this metadata starting with v17. Right\n  // now Angular v16.0.x does not support this field and library distributions\n  // would then be incompatible with v16.0.x framework users.\n  if (meta.isSignal) {\n    typeParams.push(expressionType(literal(meta.isSignal)));\n  }\n  return expressionType(importExpr(Identifiers.DirectiveDeclaration, typeParams));\n}\n// Return a host binding function or null if one is not necessary.\nfunction createHostBindingsFunction(hostBindingsMetadata, typeSourceSpan, bindingParser, constantPool, selector, name, definitionMap) {\n  const bindings = bindingParser.createBoundHostProperties(hostBindingsMetadata.properties, typeSourceSpan);\n  // Calculate host event bindings\n  const eventBindings = bindingParser.createDirectiveHostEventAsts(hostBindingsMetadata.listeners, typeSourceSpan);\n  // The parser for host bindings treats class and style attributes specially -- they are\n  // extracted into these separate fields. This is not the case for templates, so the compiler can\n  // actually already handle these special attributes internally. Therefore, we just drop them\n  // into the attributes map.\n  if (hostBindingsMetadata.specialAttributes.styleAttr) {\n    hostBindingsMetadata.attributes['style'] = literal(hostBindingsMetadata.specialAttributes.styleAttr);\n  }\n  if (hostBindingsMetadata.specialAttributes.classAttr) {\n    hostBindingsMetadata.attributes['class'] = literal(hostBindingsMetadata.specialAttributes.classAttr);\n  }\n  const hostJob = ingestHostBinding({\n    componentName: name,\n    componentSelector: selector,\n    properties: bindings,\n    events: eventBindings,\n    attributes: hostBindingsMetadata.attributes\n  }, bindingParser, constantPool);\n  transform(hostJob, CompilationJobKind.Host);\n  definitionMap.set('hostAttrs', hostJob.root.attributes);\n  const varCount = hostJob.root.vars;\n  if (varCount !== null && varCount > 0) {\n    definitionMap.set('hostVars', literal(varCount));\n  }\n  return emitHostBindingFunction(hostJob);\n}\nconst HOST_REG_EXP = /^(?:\\[([^\\]]+)\\])|(?:\\(([^\\)]+)\\))$/;\nfunction parseHostBindings(host) {\n  const attributes = {};\n  const listeners = {};\n  const properties = {};\n  const specialAttributes = {};\n  for (const key of Object.keys(host)) {\n    const value = host[key];\n    const matches = key.match(HOST_REG_EXP);\n    if (matches === null) {\n      switch (key) {\n        case 'class':\n          if (typeof value !== 'string') {\n            // TODO(alxhub): make this a diagnostic.\n            throw new Error(`Class binding must be string`);\n          }\n          specialAttributes.classAttr = value;\n          break;\n        case 'style':\n          if (typeof value !== 'string') {\n            // TODO(alxhub): make this a diagnostic.\n            throw new Error(`Style binding must be string`);\n          }\n          specialAttributes.styleAttr = value;\n          break;\n        default:\n          if (typeof value === 'string') {\n            attributes[key] = literal(value);\n          } else {\n            attributes[key] = value;\n          }\n      }\n    } else if (matches[1 /* HostBindingGroup.Binding */] != null) {\n      if (typeof value !== 'string') {\n        // TODO(alxhub): make this a diagnostic.\n        throw new Error(`Property binding must be string`);\n      }\n      // synthetic properties (the ones that have a `@` as a prefix)\n      // are still treated the same as regular properties. Therefore\n      // there is no point in storing them in a separate map.\n      properties[matches[1 /* HostBindingGroup.Binding */]] = value;\n    } else if (matches[2 /* HostBindingGroup.Event */] != null) {\n      if (typeof value !== 'string') {\n        // TODO(alxhub): make this a diagnostic.\n        throw new Error(`Event binding must be string`);\n      }\n      listeners[matches[2 /* HostBindingGroup.Event */]] = value;\n    }\n  }\n  return {\n    attributes,\n    listeners,\n    properties,\n    specialAttributes\n  };\n}\n/**\n * Verifies host bindings and returns the list of errors (if any). Empty array indicates that a\n * given set of host bindings has no errors.\n *\n * @param bindings set of host bindings to verify.\n * @param sourceSpan source span where host bindings were defined.\n * @returns array of errors associated with a given set of host bindings.\n */\nfunction verifyHostBindings(bindings, sourceSpan) {\n  // TODO: abstract out host bindings verification logic and use it instead of\n  // creating events and properties ASTs to detect errors (FW-996)\n  const bindingParser = makeBindingParser();\n  bindingParser.createDirectiveHostEventAsts(bindings.listeners, sourceSpan);\n  bindingParser.createBoundHostProperties(bindings.properties, sourceSpan);\n  return bindingParser.errors;\n}\nfunction compileStyles(styles, selector, hostSelector) {\n  const shadowCss = new ShadowCss();\n  return styles.map(style => {\n    return shadowCss.shimCssText(style, selector, hostSelector);\n  });\n}\n/**\n * Encapsulates a CSS stylesheet with emulated view encapsulation.\n * This allows a stylesheet to be used with an Angular component that\n * is using the `ViewEncapsulation.Emulated` mode.\n *\n * @param style The content of a CSS stylesheet.\n * @returns The encapsulated content for the style.\n */\nfunction encapsulateStyle(style) {\n  const shadowCss = new ShadowCss();\n  return shadowCss.shimCssText(style, CONTENT_ATTR, HOST_ATTR);\n}\nfunction createHostDirectivesType(meta) {\n  if (!meta.hostDirectives?.length) {\n    return NONE_TYPE;\n  }\n  return expressionType(literalArr(meta.hostDirectives.map(hostMeta => literalMap([{\n    key: 'directive',\n    value: typeofExpr(hostMeta.directive.type),\n    quoted: false\n  }, {\n    key: 'inputs',\n    value: stringMapAsLiteralExpression(hostMeta.inputs || {}),\n    quoted: false\n  }, {\n    key: 'outputs',\n    value: stringMapAsLiteralExpression(hostMeta.outputs || {}),\n    quoted: false\n  }]))));\n}\nfunction createHostDirectivesFeatureArg(hostDirectives) {\n  const expressions = [];\n  let hasForwardRef = false;\n  for (const current of hostDirectives) {\n    // Use a shorthand if there are no inputs or outputs.\n    if (!current.inputs && !current.outputs) {\n      expressions.push(current.directive.type);\n    } else {\n      const keys = [{\n        key: 'directive',\n        value: current.directive.type,\n        quoted: false\n      }];\n      if (current.inputs) {\n        const inputsLiteral = createHostDirectivesMappingArray(current.inputs);\n        if (inputsLiteral) {\n          keys.push({\n            key: 'inputs',\n            value: inputsLiteral,\n            quoted: false\n          });\n        }\n      }\n      if (current.outputs) {\n        const outputsLiteral = createHostDirectivesMappingArray(current.outputs);\n        if (outputsLiteral) {\n          keys.push({\n            key: 'outputs',\n            value: outputsLiteral,\n            quoted: false\n          });\n        }\n      }\n      expressions.push(literalMap(keys));\n    }\n    if (current.isForwardReference) {\n      hasForwardRef = true;\n    }\n  }\n  // If there's a forward reference, we generate a `function() { return [HostDir] }`,\n  // otherwise we can save some bytes by using a plain array, e.g. `[HostDir]`.\n  return hasForwardRef ? new FunctionExpr([], [new ReturnStatement(literalArr(expressions))]) : literalArr(expressions);\n}\n/**\n * Converts an input/output mapping object literal into an array where the even keys are the\n * public name of the binding and the odd ones are the name it was aliased to. E.g.\n * `{inputOne: 'aliasOne', inputTwo: 'aliasTwo'}` will become\n * `['inputOne', 'aliasOne', 'inputTwo', 'aliasTwo']`.\n *\n * This conversion is necessary, because hosts bind to the public name of the host directive and\n * keeping the mapping in an object literal will break for apps using property renaming.\n */\nfunction createHostDirectivesMappingArray(mapping) {\n  const elements = [];\n  for (const publicName in mapping) {\n    if (mapping.hasOwnProperty(publicName)) {\n      elements.push(literal(publicName), literal(mapping[publicName]));\n    }\n  }\n  return elements.length > 0 ? literalArr(elements) : null;\n}\n/**\n * Compiles the dependency resolver function for a defer block.\n */\nfunction compileDeferResolverFunction(meta) {\n  const depExpressions = [];\n  if (meta.mode === 0 /* DeferBlockDepsEmitMode.PerBlock */) {\n    for (const dep of meta.dependencies) {\n      if (dep.isDeferrable) {\n        // Callback function, e.g. `m () => m.MyCmp;`.\n        const innerFn = arrowFn(\n        // Default imports are always accessed through the `default` property.\n        [new FnParam('m', DYNAMIC_TYPE)], variable('m').prop(dep.isDefaultImport ? 'default' : dep.symbolName));\n        // Dynamic import, e.g. `import('./a').then(...)`.\n        const importExpr = new DynamicImportExpr(dep.importPath).prop('then').callFn([innerFn]);\n        depExpressions.push(importExpr);\n      } else {\n        // Non-deferrable symbol, just use a reference to the type. Note that it's important to\n        // go through `typeReference`, rather than `symbolName` in order to preserve the\n        // original reference within the source file.\n        depExpressions.push(dep.typeReference);\n      }\n    }\n  } else {\n    for (const {\n      symbolName,\n      importPath,\n      isDefaultImport\n    } of meta.dependencies) {\n      // Callback function, e.g. `m () => m.MyCmp;`.\n      const innerFn = arrowFn([new FnParam('m', DYNAMIC_TYPE)], variable('m').prop(isDefaultImport ? 'default' : symbolName));\n      // Dynamic import, e.g. `import('./a').then(...)`.\n      const importExpr = new DynamicImportExpr(importPath).prop('then').callFn([innerFn]);\n      depExpressions.push(importExpr);\n    }\n  }\n  return arrowFn([], literalArr(depExpressions));\n}\n\n/**\n * Processes `Target`s with a given set of directives and performs a binding operation, which\n * returns an object similar to TypeScript's `ts.TypeChecker` that contains knowledge about the\n * target.\n */\nclass R3TargetBinder {\n  constructor(directiveMatcher) {\n    this.directiveMatcher = directiveMatcher;\n  }\n  /**\n   * Perform a binding operation on the given `Target` and return a `BoundTarget` which contains\n   * metadata about the types referenced in the template.\n   */\n  bind(target) {\n    if (!target.template) {\n      // TODO(alxhub): handle targets which contain things like HostBindings, etc.\n      throw new Error('Binding without a template not yet supported');\n    }\n    // First, parse the template into a `Scope` structure. This operation captures the syntactic\n    // scopes in the template and makes them available for later use.\n    const scope = Scope.apply(target.template);\n    // Use the `Scope` to extract the entities present at every level of the template.\n    const scopedNodeEntities = extractScopedNodeEntities(scope);\n    // Next, perform directive matching on the template using the `DirectiveBinder`. This returns:\n    //   - directives: Map of nodes (elements & ng-templates) to the directives on them.\n    //   - bindings: Map of inputs, outputs, and attributes to the directive/element that claims\n    //     them. TODO(alxhub): handle multiple directives claiming an input/output/etc.\n    //   - references: Map of #references to their targets.\n    const {\n      directives,\n      eagerDirectives,\n      bindings,\n      references\n    } = DirectiveBinder.apply(target.template, this.directiveMatcher);\n    // Finally, run the TemplateBinder to bind references, variables, and other entities within the\n    // template. This extracts all the metadata that doesn't depend on directive matching.\n    const {\n      expressions,\n      symbols,\n      nestingLevel,\n      usedPipes,\n      eagerPipes,\n      deferBlocks\n    } = TemplateBinder.applyWithScope(target.template, scope);\n    return new R3BoundTarget(target, directives, eagerDirectives, bindings, references, expressions, symbols, nestingLevel, scopedNodeEntities, usedPipes, eagerPipes, deferBlocks);\n  }\n}\n/**\n * Represents a binding scope within a template.\n *\n * Any variables, references, or other named entities declared within the template will\n * be captured and available by name in `namedEntities`. Additionally, child templates will\n * be analyzed and have their child `Scope`s available in `childScopes`.\n */\nclass Scope {\n  constructor(parentScope, rootNode) {\n    this.parentScope = parentScope;\n    this.rootNode = rootNode;\n    /**\n     * Named members of the `Scope`, such as `Reference`s or `Variable`s.\n     */\n    this.namedEntities = new Map();\n    /**\n     * Set of elements that belong to this scope.\n     */\n    this.elementsInScope = new Set();\n    /**\n     * Child `Scope`s for immediately nested `ScopedNode`s.\n     */\n    this.childScopes = new Map();\n    this.isDeferred = parentScope !== null && parentScope.isDeferred ? true : rootNode instanceof DeferredBlock;\n  }\n  static newRootScope() {\n    return new Scope(null, null);\n  }\n  /**\n   * Process a template (either as a `Template` sub-template with variables, or a plain array of\n   * template `Node`s) and construct its `Scope`.\n   */\n  static apply(template) {\n    const scope = Scope.newRootScope();\n    scope.ingest(template);\n    return scope;\n  }\n  /**\n   * Internal method to process the scoped node and populate the `Scope`.\n   */\n  ingest(nodeOrNodes) {\n    if (nodeOrNodes instanceof Template) {\n      // Variables on an <ng-template> are defined in the inner scope.\n      nodeOrNodes.variables.forEach(node => this.visitVariable(node));\n      // Process the nodes of the template.\n      nodeOrNodes.children.forEach(node => node.visit(this));\n    } else if (nodeOrNodes instanceof IfBlockBranch) {\n      if (nodeOrNodes.expressionAlias !== null) {\n        this.visitVariable(nodeOrNodes.expressionAlias);\n      }\n      nodeOrNodes.children.forEach(node => node.visit(this));\n    } else if (nodeOrNodes instanceof ForLoopBlock) {\n      this.visitVariable(nodeOrNodes.item);\n      nodeOrNodes.contextVariables.forEach(v => this.visitVariable(v));\n      nodeOrNodes.children.forEach(node => node.visit(this));\n    } else if (nodeOrNodes instanceof SwitchBlockCase || nodeOrNodes instanceof ForLoopBlockEmpty || nodeOrNodes instanceof DeferredBlock || nodeOrNodes instanceof DeferredBlockError || nodeOrNodes instanceof DeferredBlockPlaceholder || nodeOrNodes instanceof DeferredBlockLoading || nodeOrNodes instanceof Content) {\n      nodeOrNodes.children.forEach(node => node.visit(this));\n    } else {\n      // No overarching `Template` instance, so process the nodes directly.\n      nodeOrNodes.forEach(node => node.visit(this));\n    }\n  }\n  visitElement(element) {\n    // `Element`s in the template may have `Reference`s which are captured in the scope.\n    element.references.forEach(node => this.visitReference(node));\n    // Recurse into the `Element`'s children.\n    element.children.forEach(node => node.visit(this));\n    this.elementsInScope.add(element);\n  }\n  visitTemplate(template) {\n    // References on a <ng-template> are defined in the outer scope, so capture them before\n    // processing the template's child scope.\n    template.references.forEach(node => this.visitReference(node));\n    // Next, create an inner scope and process the template within it.\n    this.ingestScopedNode(template);\n  }\n  visitVariable(variable) {\n    // Declare the variable if it's not already.\n    this.maybeDeclare(variable);\n  }\n  visitReference(reference) {\n    // Declare the variable if it's not already.\n    this.maybeDeclare(reference);\n  }\n  visitDeferredBlock(deferred) {\n    this.ingestScopedNode(deferred);\n    deferred.placeholder?.visit(this);\n    deferred.loading?.visit(this);\n    deferred.error?.visit(this);\n  }\n  visitDeferredBlockPlaceholder(block) {\n    this.ingestScopedNode(block);\n  }\n  visitDeferredBlockError(block) {\n    this.ingestScopedNode(block);\n  }\n  visitDeferredBlockLoading(block) {\n    this.ingestScopedNode(block);\n  }\n  visitSwitchBlock(block) {\n    block.cases.forEach(node => node.visit(this));\n  }\n  visitSwitchBlockCase(block) {\n    this.ingestScopedNode(block);\n  }\n  visitForLoopBlock(block) {\n    this.ingestScopedNode(block);\n    block.empty?.visit(this);\n  }\n  visitForLoopBlockEmpty(block) {\n    this.ingestScopedNode(block);\n  }\n  visitIfBlock(block) {\n    block.branches.forEach(node => node.visit(this));\n  }\n  visitIfBlockBranch(block) {\n    this.ingestScopedNode(block);\n  }\n  visitContent(content) {\n    this.ingestScopedNode(content);\n  }\n  visitLetDeclaration(decl) {\n    this.maybeDeclare(decl);\n  }\n  // Unused visitors.\n  visitBoundAttribute(attr) {}\n  visitBoundEvent(event) {}\n  visitBoundText(text) {}\n  visitText(text) {}\n  visitTextAttribute(attr) {}\n  visitIcu(icu) {}\n  visitDeferredTrigger(trigger) {}\n  visitUnknownBlock(block) {}\n  maybeDeclare(thing) {\n    // Declare something with a name, as long as that name isn't taken.\n    if (!this.namedEntities.has(thing.name)) {\n      this.namedEntities.set(thing.name, thing);\n    }\n  }\n  /**\n   * Look up a variable within this `Scope`.\n   *\n   * This can recurse into a parent `Scope` if it's available.\n   */\n  lookup(name) {\n    if (this.namedEntities.has(name)) {\n      // Found in the local scope.\n      return this.namedEntities.get(name);\n    } else if (this.parentScope !== null) {\n      // Not in the local scope, but there's a parent scope so check there.\n      return this.parentScope.lookup(name);\n    } else {\n      // At the top level and it wasn't found.\n      return null;\n    }\n  }\n  /**\n   * Get the child scope for a `ScopedNode`.\n   *\n   * This should always be defined.\n   */\n  getChildScope(node) {\n    const res = this.childScopes.get(node);\n    if (res === undefined) {\n      throw new Error(`Assertion error: child scope for ${node} not found`);\n    }\n    return res;\n  }\n  ingestScopedNode(node) {\n    const scope = new Scope(this, node);\n    scope.ingest(node);\n    this.childScopes.set(node, scope);\n  }\n}\n/**\n * Processes a template and matches directives on nodes (elements and templates).\n *\n * Usually used via the static `apply()` method.\n */\nclass DirectiveBinder {\n  constructor(matcher, directives, eagerDirectives, bindings, references) {\n    this.matcher = matcher;\n    this.directives = directives;\n    this.eagerDirectives = eagerDirectives;\n    this.bindings = bindings;\n    this.references = references;\n    // Indicates whether we are visiting elements within a `defer` block\n    this.isInDeferBlock = false;\n  }\n  /**\n   * Process a template (list of `Node`s) and perform directive matching against each node.\n   *\n   * @param template the list of template `Node`s to match (recursively).\n   * @param selectorMatcher a `SelectorMatcher` containing the directives that are in scope for\n   * this template.\n   * @returns three maps which contain information about directives in the template: the\n   * `directives` map which lists directives matched on each node, the `bindings` map which\n   * indicates which directives claimed which bindings (inputs, outputs, etc), and the `references`\n   * map which resolves #references (`Reference`s) within the template to the named directive or\n   * template node.\n   */\n  static apply(template, selectorMatcher) {\n    const directives = new Map();\n    const bindings = new Map();\n    const references = new Map();\n    const eagerDirectives = [];\n    const matcher = new DirectiveBinder(selectorMatcher, directives, eagerDirectives, bindings, references);\n    matcher.ingest(template);\n    return {\n      directives,\n      eagerDirectives,\n      bindings,\n      references\n    };\n  }\n  ingest(template) {\n    template.forEach(node => node.visit(this));\n  }\n  visitElement(element) {\n    this.visitElementOrTemplate(element);\n  }\n  visitTemplate(template) {\n    this.visitElementOrTemplate(template);\n  }\n  visitElementOrTemplate(node) {\n    // First, determine the HTML shape of the node for the purpose of directive matching.\n    // Do this by building up a `CssSelector` for the node.\n    const cssSelector = createCssSelectorFromNode(node);\n    // Next, use the `SelectorMatcher` to get the list of directives on the node.\n    const directives = [];\n    this.matcher.match(cssSelector, (_selector, results) => directives.push(...results));\n    if (directives.length > 0) {\n      this.directives.set(node, directives);\n      if (!this.isInDeferBlock) {\n        this.eagerDirectives.push(...directives);\n      }\n    }\n    // Resolve any references that are created on this node.\n    node.references.forEach(ref => {\n      let dirTarget = null;\n      // If the reference expression is empty, then it matches the \"primary\" directive on the node\n      // (if there is one). Otherwise it matches the host node itself (either an element or\n      // <ng-template> node).\n      if (ref.value.trim() === '') {\n        // This could be a reference to a component if there is one.\n        dirTarget = directives.find(dir => dir.isComponent) || null;\n      } else {\n        // This should be a reference to a directive exported via exportAs.\n        dirTarget = directives.find(dir => dir.exportAs !== null && dir.exportAs.some(value => value === ref.value)) || null;\n        // Check if a matching directive was found.\n        if (dirTarget === null) {\n          // No matching directive was found - this reference points to an unknown target. Leave it\n          // unmapped.\n          return;\n        }\n      }\n      if (dirTarget !== null) {\n        // This reference points to a directive.\n        this.references.set(ref, {\n          directive: dirTarget,\n          node\n        });\n      } else {\n        // This reference points to the node itself.\n        this.references.set(ref, node);\n      }\n    });\n    const setAttributeBinding = (attribute, ioType) => {\n      const dir = directives.find(dir => dir[ioType].hasBindingPropertyName(attribute.name));\n      const binding = dir !== undefined ? dir : node;\n      this.bindings.set(attribute, binding);\n    };\n    // Node inputs (bound attributes) and text attributes can be bound to an\n    // input on a directive.\n    node.inputs.forEach(input => setAttributeBinding(input, 'inputs'));\n    node.attributes.forEach(attr => setAttributeBinding(attr, 'inputs'));\n    if (node instanceof Template) {\n      node.templateAttrs.forEach(attr => setAttributeBinding(attr, 'inputs'));\n    }\n    // Node outputs (bound events) can be bound to an output on a directive.\n    node.outputs.forEach(output => setAttributeBinding(output, 'outputs'));\n    // Recurse into the node's children.\n    node.children.forEach(child => child.visit(this));\n  }\n  visitDeferredBlock(deferred) {\n    const wasInDeferBlock = this.isInDeferBlock;\n    this.isInDeferBlock = true;\n    deferred.children.forEach(child => child.visit(this));\n    this.isInDeferBlock = wasInDeferBlock;\n    deferred.placeholder?.visit(this);\n    deferred.loading?.visit(this);\n    deferred.error?.visit(this);\n  }\n  visitDeferredBlockPlaceholder(block) {\n    block.children.forEach(child => child.visit(this));\n  }\n  visitDeferredBlockError(block) {\n    block.children.forEach(child => child.visit(this));\n  }\n  visitDeferredBlockLoading(block) {\n    block.children.forEach(child => child.visit(this));\n  }\n  visitSwitchBlock(block) {\n    block.cases.forEach(node => node.visit(this));\n  }\n  visitSwitchBlockCase(block) {\n    block.children.forEach(node => node.visit(this));\n  }\n  visitForLoopBlock(block) {\n    block.item.visit(this);\n    block.contextVariables.forEach(v => v.visit(this));\n    block.children.forEach(node => node.visit(this));\n    block.empty?.visit(this);\n  }\n  visitForLoopBlockEmpty(block) {\n    block.children.forEach(node => node.visit(this));\n  }\n  visitIfBlock(block) {\n    block.branches.forEach(node => node.visit(this));\n  }\n  visitIfBlockBranch(block) {\n    block.expressionAlias?.visit(this);\n    block.children.forEach(node => node.visit(this));\n  }\n  visitContent(content) {\n    content.children.forEach(child => child.visit(this));\n  }\n  // Unused visitors.\n  visitVariable(variable) {}\n  visitReference(reference) {}\n  visitTextAttribute(attribute) {}\n  visitBoundAttribute(attribute) {}\n  visitBoundEvent(attribute) {}\n  visitBoundAttributeOrEvent(node) {}\n  visitText(text) {}\n  visitBoundText(text) {}\n  visitIcu(icu) {}\n  visitDeferredTrigger(trigger) {}\n  visitUnknownBlock(block) {}\n  visitLetDeclaration(decl) {}\n}\n/**\n * Processes a template and extract metadata about expressions and symbols within.\n *\n * This is a companion to the `DirectiveBinder` that doesn't require knowledge of directives matched\n * within the template in order to operate.\n *\n * Expressions are visited by the superclass `RecursiveAstVisitor`, with custom logic provided\n * by overridden methods from that visitor.\n */\nclass TemplateBinder extends RecursiveAstVisitor {\n  constructor(bindings, symbols, usedPipes, eagerPipes, deferBlocks, nestingLevel, scope, rootNode, level) {\n    super();\n    this.bindings = bindings;\n    this.symbols = symbols;\n    this.usedPipes = usedPipes;\n    this.eagerPipes = eagerPipes;\n    this.deferBlocks = deferBlocks;\n    this.nestingLevel = nestingLevel;\n    this.scope = scope;\n    this.rootNode = rootNode;\n    this.level = level;\n    // Save a bit of processing time by constructing this closure in advance.\n    this.visitNode = node => node.visit(this);\n  }\n  // This method is defined to reconcile the type of TemplateBinder since both\n  // RecursiveAstVisitor and Visitor define the visit() method in their\n  // interfaces.\n  visit(node, context) {\n    if (node instanceof AST) {\n      node.visit(this, context);\n    } else {\n      node.visit(this);\n    }\n  }\n  /**\n   * Process a template and extract metadata about expressions and symbols within.\n   *\n   * @param nodes the nodes of the template to process\n   * @param scope the `Scope` of the template being processed.\n   * @returns three maps which contain metadata about the template: `expressions` which interprets\n   * special `AST` nodes in expressions as pointing to references or variables declared within the\n   * template, `symbols` which maps those variables and references to the nested `Template` which\n   * declares them, if any, and `nestingLevel` which associates each `Template` with a integer\n   * nesting level (how many levels deep within the template structure the `Template` is), starting\n   * at 1.\n   */\n  static applyWithScope(nodes, scope) {\n    const expressions = new Map();\n    const symbols = new Map();\n    const nestingLevel = new Map();\n    const usedPipes = new Set();\n    const eagerPipes = new Set();\n    const template = nodes instanceof Template ? nodes : null;\n    const deferBlocks = [];\n    // The top-level template has nesting level 0.\n    const binder = new TemplateBinder(expressions, symbols, usedPipes, eagerPipes, deferBlocks, nestingLevel, scope, template, 0);\n    binder.ingest(nodes);\n    return {\n      expressions,\n      symbols,\n      nestingLevel,\n      usedPipes,\n      eagerPipes,\n      deferBlocks\n    };\n  }\n  ingest(nodeOrNodes) {\n    if (nodeOrNodes instanceof Template) {\n      // For <ng-template>s, process only variables and child nodes. Inputs, outputs, templateAttrs,\n      // and references were all processed in the scope of the containing template.\n      nodeOrNodes.variables.forEach(this.visitNode);\n      nodeOrNodes.children.forEach(this.visitNode);\n      // Set the nesting level.\n      this.nestingLevel.set(nodeOrNodes, this.level);\n    } else if (nodeOrNodes instanceof IfBlockBranch) {\n      if (nodeOrNodes.expressionAlias !== null) {\n        this.visitNode(nodeOrNodes.expressionAlias);\n      }\n      nodeOrNodes.children.forEach(this.visitNode);\n      this.nestingLevel.set(nodeOrNodes, this.level);\n    } else if (nodeOrNodes instanceof ForLoopBlock) {\n      this.visitNode(nodeOrNodes.item);\n      nodeOrNodes.contextVariables.forEach(v => this.visitNode(v));\n      nodeOrNodes.trackBy.visit(this);\n      nodeOrNodes.children.forEach(this.visitNode);\n      this.nestingLevel.set(nodeOrNodes, this.level);\n    } else if (nodeOrNodes instanceof DeferredBlock) {\n      if (this.scope.rootNode !== nodeOrNodes) {\n        throw new Error(`Assertion error: resolved incorrect scope for deferred block ${nodeOrNodes}`);\n      }\n      this.deferBlocks.push([nodeOrNodes, this.scope]);\n      nodeOrNodes.children.forEach(node => node.visit(this));\n      this.nestingLevel.set(nodeOrNodes, this.level);\n    } else if (nodeOrNodes instanceof SwitchBlockCase || nodeOrNodes instanceof ForLoopBlockEmpty || nodeOrNodes instanceof DeferredBlockError || nodeOrNodes instanceof DeferredBlockPlaceholder || nodeOrNodes instanceof DeferredBlockLoading || nodeOrNodes instanceof Content) {\n      nodeOrNodes.children.forEach(node => node.visit(this));\n      this.nestingLevel.set(nodeOrNodes, this.level);\n    } else {\n      // Visit each node from the top-level template.\n      nodeOrNodes.forEach(this.visitNode);\n    }\n  }\n  visitElement(element) {\n    // Visit the inputs, outputs, and children of the element.\n    element.inputs.forEach(this.visitNode);\n    element.outputs.forEach(this.visitNode);\n    element.children.forEach(this.visitNode);\n    element.references.forEach(this.visitNode);\n  }\n  visitTemplate(template) {\n    // First, visit inputs, outputs and template attributes of the template node.\n    template.inputs.forEach(this.visitNode);\n    template.outputs.forEach(this.visitNode);\n    template.templateAttrs.forEach(this.visitNode);\n    template.references.forEach(this.visitNode);\n    // Next, recurse into the template.\n    this.ingestScopedNode(template);\n  }\n  visitVariable(variable) {\n    // Register the `Variable` as a symbol in the current `Template`.\n    if (this.rootNode !== null) {\n      this.symbols.set(variable, this.rootNode);\n    }\n  }\n  visitReference(reference) {\n    // Register the `Reference` as a symbol in the current `Template`.\n    if (this.rootNode !== null) {\n      this.symbols.set(reference, this.rootNode);\n    }\n  }\n  // Unused template visitors\n  visitText(text) {}\n  visitTextAttribute(attribute) {}\n  visitUnknownBlock(block) {}\n  visitDeferredTrigger() {}\n  visitIcu(icu) {\n    Object.keys(icu.vars).forEach(key => icu.vars[key].visit(this));\n    Object.keys(icu.placeholders).forEach(key => icu.placeholders[key].visit(this));\n  }\n  // The remaining visitors are concerned with processing AST expressions within template bindings\n  visitBoundAttribute(attribute) {\n    attribute.value.visit(this);\n  }\n  visitBoundEvent(event) {\n    event.handler.visit(this);\n  }\n  visitDeferredBlock(deferred) {\n    this.ingestScopedNode(deferred);\n    deferred.triggers.when?.value.visit(this);\n    deferred.prefetchTriggers.when?.value.visit(this);\n    deferred.placeholder && this.visitNode(deferred.placeholder);\n    deferred.loading && this.visitNode(deferred.loading);\n    deferred.error && this.visitNode(deferred.error);\n  }\n  visitDeferredBlockPlaceholder(block) {\n    this.ingestScopedNode(block);\n  }\n  visitDeferredBlockError(block) {\n    this.ingestScopedNode(block);\n  }\n  visitDeferredBlockLoading(block) {\n    this.ingestScopedNode(block);\n  }\n  visitSwitchBlock(block) {\n    block.expression.visit(this);\n    block.cases.forEach(this.visitNode);\n  }\n  visitSwitchBlockCase(block) {\n    block.expression?.visit(this);\n    this.ingestScopedNode(block);\n  }\n  visitForLoopBlock(block) {\n    block.expression.visit(this);\n    this.ingestScopedNode(block);\n    block.empty?.visit(this);\n  }\n  visitForLoopBlockEmpty(block) {\n    this.ingestScopedNode(block);\n  }\n  visitIfBlock(block) {\n    block.branches.forEach(node => node.visit(this));\n  }\n  visitIfBlockBranch(block) {\n    block.expression?.visit(this);\n    this.ingestScopedNode(block);\n  }\n  visitContent(content) {\n    this.ingestScopedNode(content);\n  }\n  visitBoundText(text) {\n    text.value.visit(this);\n  }\n  visitLetDeclaration(decl) {\n    decl.value.visit(this);\n    if (this.rootNode !== null) {\n      this.symbols.set(decl, this.rootNode);\n    }\n  }\n  visitPipe(ast, context) {\n    this.usedPipes.add(ast.name);\n    if (!this.scope.isDeferred) {\n      this.eagerPipes.add(ast.name);\n    }\n    return super.visitPipe(ast, context);\n  }\n  // These five types of AST expressions can refer to expression roots, which could be variables\n  // or references in the current scope.\n  visitPropertyRead(ast, context) {\n    this.maybeMap(ast, ast.name);\n    return super.visitPropertyRead(ast, context);\n  }\n  visitSafePropertyRead(ast, context) {\n    this.maybeMap(ast, ast.name);\n    return super.visitSafePropertyRead(ast, context);\n  }\n  visitPropertyWrite(ast, context) {\n    this.maybeMap(ast, ast.name);\n    return super.visitPropertyWrite(ast, context);\n  }\n  ingestScopedNode(node) {\n    const childScope = this.scope.getChildScope(node);\n    const binder = new TemplateBinder(this.bindings, this.symbols, this.usedPipes, this.eagerPipes, this.deferBlocks, this.nestingLevel, childScope, node, this.level + 1);\n    binder.ingest(node);\n  }\n  maybeMap(ast, name) {\n    // If the receiver of the expression isn't the `ImplicitReceiver`, this isn't the root of an\n    // `AST` expression that maps to a `Variable` or `Reference`.\n    if (!(ast.receiver instanceof ImplicitReceiver)) {\n      return;\n    }\n    // Check whether the name exists in the current scope. If so, map it. Otherwise, the name is\n    // probably a property on the top-level component context.\n    const target = this.scope.lookup(name);\n    // It's not allowed to read template entities via `this`, however it previously worked by\n    // accident (see #55115). Since `@let` declarations are new, we can fix it from the beginning,\n    // whereas pre-existing template entities will be fixed in #55115.\n    if (target instanceof LetDeclaration$1 && ast.receiver instanceof ThisReceiver) {\n      return;\n    }\n    if (target !== null) {\n      this.bindings.set(ast, target);\n    }\n  }\n}\n/**\n * Metadata container for a `Target` that allows queries for specific bits of metadata.\n *\n * See `BoundTarget` for documentation on the individual methods.\n */\nclass R3BoundTarget {\n  constructor(target, directives, eagerDirectives, bindings, references, exprTargets, symbols, nestingLevel, scopedNodeEntities, usedPipes, eagerPipes, rawDeferred) {\n    this.target = target;\n    this.directives = directives;\n    this.eagerDirectives = eagerDirectives;\n    this.bindings = bindings;\n    this.references = references;\n    this.exprTargets = exprTargets;\n    this.symbols = symbols;\n    this.nestingLevel = nestingLevel;\n    this.scopedNodeEntities = scopedNodeEntities;\n    this.usedPipes = usedPipes;\n    this.eagerPipes = eagerPipes;\n    this.deferredBlocks = rawDeferred.map(current => current[0]);\n    this.deferredScopes = new Map(rawDeferred);\n  }\n  getEntitiesInScope(node) {\n    return this.scopedNodeEntities.get(node) ?? new Set();\n  }\n  getDirectivesOfNode(node) {\n    return this.directives.get(node) || null;\n  }\n  getReferenceTarget(ref) {\n    return this.references.get(ref) || null;\n  }\n  getConsumerOfBinding(binding) {\n    return this.bindings.get(binding) || null;\n  }\n  getExpressionTarget(expr) {\n    return this.exprTargets.get(expr) || null;\n  }\n  getDefinitionNodeOfSymbol(symbol) {\n    return this.symbols.get(symbol) || null;\n  }\n  getNestingLevel(node) {\n    return this.nestingLevel.get(node) || 0;\n  }\n  getUsedDirectives() {\n    const set = new Set();\n    this.directives.forEach(dirs => dirs.forEach(dir => set.add(dir)));\n    return Array.from(set.values());\n  }\n  getEagerlyUsedDirectives() {\n    const set = new Set(this.eagerDirectives);\n    return Array.from(set.values());\n  }\n  getUsedPipes() {\n    return Array.from(this.usedPipes);\n  }\n  getEagerlyUsedPipes() {\n    return Array.from(this.eagerPipes);\n  }\n  getDeferBlocks() {\n    return this.deferredBlocks;\n  }\n  getDeferredTriggerTarget(block, trigger) {\n    // Only triggers that refer to DOM nodes can be resolved.\n    if (!(trigger instanceof InteractionDeferredTrigger) && !(trigger instanceof ViewportDeferredTrigger) && !(trigger instanceof HoverDeferredTrigger)) {\n      return null;\n    }\n    const name = trigger.reference;\n    if (name === null) {\n      let trigger = null;\n      if (block.placeholder !== null) {\n        for (const child of block.placeholder.children) {\n          // Skip over comment nodes. Currently by default the template parser doesn't capture\n          // comments, but we have a safeguard here just in case since it can be enabled.\n          if (child instanceof Comment$1) {\n            continue;\n          }\n          // We can only infer the trigger if there's one root element node. Any other\n          // nodes at the root make it so that we can't infer the trigger anymore.\n          if (trigger !== null) {\n            return null;\n          }\n          if (child instanceof Element$1) {\n            trigger = child;\n          }\n        }\n      }\n      return trigger;\n    }\n    const outsideRef = this.findEntityInScope(block, name);\n    // First try to resolve the target in the scope of the main deferred block. Note that we\n    // skip triggers defined inside the main block itself, because they might not exist yet.\n    if (outsideRef instanceof Reference && this.getDefinitionNodeOfSymbol(outsideRef) !== block) {\n      const target = this.getReferenceTarget(outsideRef);\n      if (target !== null) {\n        return this.referenceTargetToElement(target);\n      }\n    }\n    // If the trigger couldn't be found in the main block, check the\n    // placeholder block which is shown before the main block has loaded.\n    if (block.placeholder !== null) {\n      const refInPlaceholder = this.findEntityInScope(block.placeholder, name);\n      const targetInPlaceholder = refInPlaceholder instanceof Reference ? this.getReferenceTarget(refInPlaceholder) : null;\n      if (targetInPlaceholder !== null) {\n        return this.referenceTargetToElement(targetInPlaceholder);\n      }\n    }\n    return null;\n  }\n  isDeferred(element) {\n    for (const block of this.deferredBlocks) {\n      if (!this.deferredScopes.has(block)) {\n        continue;\n      }\n      const stack = [this.deferredScopes.get(block)];\n      while (stack.length > 0) {\n        const current = stack.pop();\n        if (current.elementsInScope.has(element)) {\n          return true;\n        }\n        stack.push(...current.childScopes.values());\n      }\n    }\n    return false;\n  }\n  /**\n   * Finds an entity with a specific name in a scope.\n   * @param rootNode Root node of the scope.\n   * @param name Name of the entity.\n   */\n  findEntityInScope(rootNode, name) {\n    const entities = this.getEntitiesInScope(rootNode);\n    for (const entity of entities) {\n      if (entity.name === name) {\n        return entity;\n      }\n    }\n    return null;\n  }\n  /** Coerces a `ReferenceTarget` to an `Element`, if possible. */\n  referenceTargetToElement(target) {\n    if (target instanceof Element$1) {\n      return target;\n    }\n    if (target instanceof Template) {\n      return null;\n    }\n    return this.referenceTargetToElement(target.node);\n  }\n}\nfunction extractScopedNodeEntities(rootScope) {\n  const entityMap = new Map();\n  function extractScopeEntities(scope) {\n    if (entityMap.has(scope.rootNode)) {\n      return entityMap.get(scope.rootNode);\n    }\n    const currentEntities = scope.namedEntities;\n    let entities;\n    if (scope.parentScope !== null) {\n      entities = new Map([...extractScopeEntities(scope.parentScope), ...currentEntities]);\n    } else {\n      entities = new Map(currentEntities);\n    }\n    entityMap.set(scope.rootNode, entities);\n    return entities;\n  }\n  const scopesToProcess = [rootScope];\n  while (scopesToProcess.length > 0) {\n    const scope = scopesToProcess.pop();\n    for (const childScope of scope.childScopes.values()) {\n      scopesToProcess.push(childScope);\n    }\n    extractScopeEntities(scope);\n  }\n  const templateEntities = new Map();\n  for (const [template, entities] of entityMap) {\n    templateEntities.set(template, new Set(entities.values()));\n  }\n  return templateEntities;\n}\n\n/**\n * An interface for retrieving documents by URL that the compiler uses to\n * load templates.\n *\n * This is an abstract class, rather than an interface, so that it can be used\n * as injection token.\n */\nclass ResourceLoader {}\nclass CompilerFacadeImpl {\n  constructor(jitEvaluator = new JitEvaluator()) {\n    this.jitEvaluator = jitEvaluator;\n    this.FactoryTarget = FactoryTarget$1;\n    this.ResourceLoader = ResourceLoader;\n    this.elementSchemaRegistry = new DomElementSchemaRegistry();\n  }\n  compilePipe(angularCoreEnv, sourceMapUrl, facade) {\n    const metadata = {\n      name: facade.name,\n      type: wrapReference(facade.type),\n      typeArgumentCount: 0,\n      deps: null,\n      pipeName: facade.pipeName,\n      pure: facade.pure,\n      isStandalone: facade.isStandalone\n    };\n    const res = compilePipeFromMetadata(metadata);\n    return this.jitExpression(res.expression, angularCoreEnv, sourceMapUrl, []);\n  }\n  compilePipeDeclaration(angularCoreEnv, sourceMapUrl, declaration) {\n    const meta = convertDeclarePipeFacadeToMetadata(declaration);\n    const res = compilePipeFromMetadata(meta);\n    return this.jitExpression(res.expression, angularCoreEnv, sourceMapUrl, []);\n  }\n  compileInjectable(angularCoreEnv, sourceMapUrl, facade) {\n    const {\n      expression,\n      statements\n    } = compileInjectable({\n      name: facade.name,\n      type: wrapReference(facade.type),\n      typeArgumentCount: facade.typeArgumentCount,\n      providedIn: computeProvidedIn(facade.providedIn),\n      useClass: convertToProviderExpression(facade, 'useClass'),\n      useFactory: wrapExpression(facade, 'useFactory'),\n      useValue: convertToProviderExpression(facade, 'useValue'),\n      useExisting: convertToProviderExpression(facade, 'useExisting'),\n      deps: facade.deps?.map(convertR3DependencyMetadata)\n    }, /* resolveForwardRefs */true);\n    return this.jitExpression(expression, angularCoreEnv, sourceMapUrl, statements);\n  }\n  compileInjectableDeclaration(angularCoreEnv, sourceMapUrl, facade) {\n    const {\n      expression,\n      statements\n    } = compileInjectable({\n      name: facade.type.name,\n      type: wrapReference(facade.type),\n      typeArgumentCount: 0,\n      providedIn: computeProvidedIn(facade.providedIn),\n      useClass: convertToProviderExpression(facade, 'useClass'),\n      useFactory: wrapExpression(facade, 'useFactory'),\n      useValue: convertToProviderExpression(facade, 'useValue'),\n      useExisting: convertToProviderExpression(facade, 'useExisting'),\n      deps: facade.deps?.map(convertR3DeclareDependencyMetadata)\n    }, /* resolveForwardRefs */true);\n    return this.jitExpression(expression, angularCoreEnv, sourceMapUrl, statements);\n  }\n  compileInjector(angularCoreEnv, sourceMapUrl, facade) {\n    const meta = {\n      name: facade.name,\n      type: wrapReference(facade.type),\n      providers: facade.providers && facade.providers.length > 0 ? new WrappedNodeExpr(facade.providers) : null,\n      imports: facade.imports.map(i => new WrappedNodeExpr(i))\n    };\n    const res = compileInjector(meta);\n    return this.jitExpression(res.expression, angularCoreEnv, sourceMapUrl, []);\n  }\n  compileInjectorDeclaration(angularCoreEnv, sourceMapUrl, declaration) {\n    const meta = convertDeclareInjectorFacadeToMetadata(declaration);\n    const res = compileInjector(meta);\n    return this.jitExpression(res.expression, angularCoreEnv, sourceMapUrl, []);\n  }\n  compileNgModule(angularCoreEnv, sourceMapUrl, facade) {\n    const meta = {\n      kind: R3NgModuleMetadataKind.Global,\n      type: wrapReference(facade.type),\n      bootstrap: facade.bootstrap.map(wrapReference),\n      declarations: facade.declarations.map(wrapReference),\n      publicDeclarationTypes: null,\n      // only needed for types in AOT\n      imports: facade.imports.map(wrapReference),\n      includeImportTypes: true,\n      exports: facade.exports.map(wrapReference),\n      selectorScopeMode: R3SelectorScopeMode.Inline,\n      containsForwardDecls: false,\n      schemas: facade.schemas ? facade.schemas.map(wrapReference) : null,\n      id: facade.id ? new WrappedNodeExpr(facade.id) : null\n    };\n    const res = compileNgModule(meta);\n    return this.jitExpression(res.expression, angularCoreEnv, sourceMapUrl, []);\n  }\n  compileNgModuleDeclaration(angularCoreEnv, sourceMapUrl, declaration) {\n    const expression = compileNgModuleDeclarationExpression(declaration);\n    return this.jitExpression(expression, angularCoreEnv, sourceMapUrl, []);\n  }\n  compileDirective(angularCoreEnv, sourceMapUrl, facade) {\n    const meta = convertDirectiveFacadeToMetadata(facade);\n    return this.compileDirectiveFromMeta(angularCoreEnv, sourceMapUrl, meta);\n  }\n  compileDirectiveDeclaration(angularCoreEnv, sourceMapUrl, declaration) {\n    const typeSourceSpan = this.createParseSourceSpan('Directive', declaration.type.name, sourceMapUrl);\n    const meta = convertDeclareDirectiveFacadeToMetadata(declaration, typeSourceSpan);\n    return this.compileDirectiveFromMeta(angularCoreEnv, sourceMapUrl, meta);\n  }\n  compileDirectiveFromMeta(angularCoreEnv, sourceMapUrl, meta) {\n    const constantPool = new ConstantPool();\n    const bindingParser = makeBindingParser();\n    const res = compileDirectiveFromMetadata(meta, constantPool, bindingParser);\n    return this.jitExpression(res.expression, angularCoreEnv, sourceMapUrl, constantPool.statements);\n  }\n  compileComponent(angularCoreEnv, sourceMapUrl, facade) {\n    // Parse the template and check for errors.\n    const {\n      template,\n      interpolation,\n      defer\n    } = parseJitTemplate(facade.template, facade.name, sourceMapUrl, facade.preserveWhitespaces, facade.interpolation, undefined);\n    // Compile the component metadata, including template, into an expression.\n    const meta = {\n      ...facade,\n      ...convertDirectiveFacadeToMetadata(facade),\n      selector: facade.selector || this.elementSchemaRegistry.getDefaultComponentElementName(),\n      template,\n      declarations: facade.declarations.map(convertDeclarationFacadeToMetadata),\n      declarationListEmitMode: 0 /* DeclarationListEmitMode.Direct */,\n      defer,\n      styles: [...facade.styles, ...template.styles],\n      encapsulation: facade.encapsulation,\n      interpolation,\n      changeDetection: facade.changeDetection ?? null,\n      animations: facade.animations != null ? new WrappedNodeExpr(facade.animations) : null,\n      viewProviders: facade.viewProviders != null ? new WrappedNodeExpr(facade.viewProviders) : null,\n      relativeContextFilePath: '',\n      i18nUseExternalIds: true\n    };\n    const jitExpressionSourceMap = `ng:///${facade.name}.js`;\n    return this.compileComponentFromMeta(angularCoreEnv, jitExpressionSourceMap, meta);\n  }\n  compileComponentDeclaration(angularCoreEnv, sourceMapUrl, declaration) {\n    const typeSourceSpan = this.createParseSourceSpan('Component', declaration.type.name, sourceMapUrl);\n    const meta = convertDeclareComponentFacadeToMetadata(declaration, typeSourceSpan, sourceMapUrl);\n    return this.compileComponentFromMeta(angularCoreEnv, sourceMapUrl, meta);\n  }\n  compileComponentFromMeta(angularCoreEnv, sourceMapUrl, meta) {\n    const constantPool = new ConstantPool();\n    const bindingParser = makeBindingParser(meta.interpolation);\n    const res = compileComponentFromMetadata(meta, constantPool, bindingParser);\n    return this.jitExpression(res.expression, angularCoreEnv, sourceMapUrl, constantPool.statements);\n  }\n  compileFactory(angularCoreEnv, sourceMapUrl, meta) {\n    const factoryRes = compileFactoryFunction({\n      name: meta.name,\n      type: wrapReference(meta.type),\n      typeArgumentCount: meta.typeArgumentCount,\n      deps: convertR3DependencyMetadataArray(meta.deps),\n      target: meta.target\n    });\n    return this.jitExpression(factoryRes.expression, angularCoreEnv, sourceMapUrl, factoryRes.statements);\n  }\n  compileFactoryDeclaration(angularCoreEnv, sourceMapUrl, meta) {\n    const factoryRes = compileFactoryFunction({\n      name: meta.type.name,\n      type: wrapReference(meta.type),\n      typeArgumentCount: 0,\n      deps: Array.isArray(meta.deps) ? meta.deps.map(convertR3DeclareDependencyMetadata) : meta.deps,\n      target: meta.target\n    });\n    return this.jitExpression(factoryRes.expression, angularCoreEnv, sourceMapUrl, factoryRes.statements);\n  }\n  createParseSourceSpan(kind, typeName, sourceUrl) {\n    return r3JitTypeSourceSpan(kind, typeName, sourceUrl);\n  }\n  /**\n   * JIT compiles an expression and returns the result of executing that expression.\n   *\n   * @param def the definition which will be compiled and executed to get the value to patch\n   * @param context an object map of @angular/core symbol names to symbols which will be available\n   * in the context of the compiled expression\n   * @param sourceUrl a URL to use for the source map of the compiled expression\n   * @param preStatements a collection of statements that should be evaluated before the expression.\n   */\n  jitExpression(def, context, sourceUrl, preStatements) {\n    // The ConstantPool may contain Statements which declare variables used in the final expression.\n    // Therefore, its statements need to precede the actual JIT operation. The final statement is a\n    // declaration of $def which is set to the expression being compiled.\n    const statements = [...preStatements, new DeclareVarStmt('$def', def, undefined, StmtModifier.Exported)];\n    const res = this.jitEvaluator.evaluateStatements(sourceUrl, statements, new R3JitReflector(context), /* enableSourceMaps */true);\n    return res['$def'];\n  }\n}\nfunction convertToR3QueryMetadata(facade) {\n  return {\n    ...facade,\n    isSignal: facade.isSignal,\n    predicate: convertQueryPredicate(facade.predicate),\n    read: facade.read ? new WrappedNodeExpr(facade.read) : null,\n    static: facade.static,\n    emitDistinctChangesOnly: facade.emitDistinctChangesOnly\n  };\n}\nfunction convertQueryDeclarationToMetadata(declaration) {\n  return {\n    propertyName: declaration.propertyName,\n    first: declaration.first ?? false,\n    predicate: convertQueryPredicate(declaration.predicate),\n    descendants: declaration.descendants ?? false,\n    read: declaration.read ? new WrappedNodeExpr(declaration.read) : null,\n    static: declaration.static ?? false,\n    emitDistinctChangesOnly: declaration.emitDistinctChangesOnly ?? true,\n    isSignal: !!declaration.isSignal\n  };\n}\nfunction convertQueryPredicate(predicate) {\n  return Array.isArray(predicate) ?\n  // The predicate is an array of strings so pass it through.\n  predicate :\n  // The predicate is a type - assume that we will need to unwrap any `forwardRef()` calls.\n  createMayBeForwardRefExpression(new WrappedNodeExpr(predicate), 1 /* ForwardRefHandling.Wrapped */);\n}\nfunction convertDirectiveFacadeToMetadata(facade) {\n  const inputsFromMetadata = parseInputsArray(facade.inputs || []);\n  const outputsFromMetadata = parseMappingStringArray(facade.outputs || []);\n  const propMetadata = facade.propMetadata;\n  const inputsFromType = {};\n  const outputsFromType = {};\n  for (const field in propMetadata) {\n    if (propMetadata.hasOwnProperty(field)) {\n      propMetadata[field].forEach(ann => {\n        if (isInput(ann)) {\n          inputsFromType[field] = {\n            bindingPropertyName: ann.alias || field,\n            classPropertyName: field,\n            required: ann.required || false,\n            // For JIT, decorators are used to declare signal inputs. That is because of\n            // a technical limitation where it's not possible to statically reflect class\n            // members of a directive/component at runtime before instantiating the class.\n            isSignal: !!ann.isSignal,\n            transformFunction: ann.transform != null ? new WrappedNodeExpr(ann.transform) : null\n          };\n        } else if (isOutput(ann)) {\n          outputsFromType[field] = ann.alias || field;\n        }\n      });\n    }\n  }\n  const hostDirectives = facade.hostDirectives?.length ? facade.hostDirectives.map(hostDirective => {\n    return typeof hostDirective === 'function' ? {\n      directive: wrapReference(hostDirective),\n      inputs: null,\n      outputs: null,\n      isForwardReference: false\n    } : {\n      directive: wrapReference(hostDirective.directive),\n      isForwardReference: false,\n      inputs: hostDirective.inputs ? parseMappingStringArray(hostDirective.inputs) : null,\n      outputs: hostDirective.outputs ? parseMappingStringArray(hostDirective.outputs) : null\n    };\n  }) : null;\n  return {\n    ...facade,\n    typeArgumentCount: 0,\n    typeSourceSpan: facade.typeSourceSpan,\n    type: wrapReference(facade.type),\n    deps: null,\n    host: {\n      ...extractHostBindings(facade.propMetadata, facade.typeSourceSpan, facade.host)\n    },\n    inputs: {\n      ...inputsFromMetadata,\n      ...inputsFromType\n    },\n    outputs: {\n      ...outputsFromMetadata,\n      ...outputsFromType\n    },\n    queries: facade.queries.map(convertToR3QueryMetadata),\n    providers: facade.providers != null ? new WrappedNodeExpr(facade.providers) : null,\n    viewQueries: facade.viewQueries.map(convertToR3QueryMetadata),\n    fullInheritance: false,\n    hostDirectives\n  };\n}\nfunction convertDeclareDirectiveFacadeToMetadata(declaration, typeSourceSpan) {\n  const hostDirectives = declaration.hostDirectives?.length ? declaration.hostDirectives.map(dir => ({\n    directive: wrapReference(dir.directive),\n    isForwardReference: false,\n    inputs: dir.inputs ? getHostDirectiveBindingMapping(dir.inputs) : null,\n    outputs: dir.outputs ? getHostDirectiveBindingMapping(dir.outputs) : null\n  })) : null;\n  return {\n    name: declaration.type.name,\n    type: wrapReference(declaration.type),\n    typeSourceSpan,\n    selector: declaration.selector ?? null,\n    inputs: declaration.inputs ? inputsPartialMetadataToInputMetadata(declaration.inputs) : {},\n    outputs: declaration.outputs ?? {},\n    host: convertHostDeclarationToMetadata(declaration.host),\n    queries: (declaration.queries ?? []).map(convertQueryDeclarationToMetadata),\n    viewQueries: (declaration.viewQueries ?? []).map(convertQueryDeclarationToMetadata),\n    providers: declaration.providers !== undefined ? new WrappedNodeExpr(declaration.providers) : null,\n    exportAs: declaration.exportAs ?? null,\n    usesInheritance: declaration.usesInheritance ?? false,\n    lifecycle: {\n      usesOnChanges: declaration.usesOnChanges ?? false\n    },\n    deps: null,\n    typeArgumentCount: 0,\n    fullInheritance: false,\n    isStandalone: declaration.isStandalone ?? false,\n    isSignal: declaration.isSignal ?? false,\n    hostDirectives\n  };\n}\nfunction convertHostDeclarationToMetadata(host = {}) {\n  return {\n    attributes: convertOpaqueValuesToExpressions(host.attributes ?? {}),\n    listeners: host.listeners ?? {},\n    properties: host.properties ?? {},\n    specialAttributes: {\n      classAttr: host.classAttribute,\n      styleAttr: host.styleAttribute\n    }\n  };\n}\n/**\n * Parses a host directive mapping where each odd array key is the name of an input/output\n * and each even key is its public name, e.g. `['one', 'oneAlias', 'two', 'two']`.\n */\nfunction getHostDirectiveBindingMapping(array) {\n  let result = null;\n  for (let i = 1; i < array.length; i += 2) {\n    result = result || {};\n    result[array[i - 1]] = array[i];\n  }\n  return result;\n}\nfunction convertOpaqueValuesToExpressions(obj) {\n  const result = {};\n  for (const key of Object.keys(obj)) {\n    result[key] = new WrappedNodeExpr(obj[key]);\n  }\n  return result;\n}\nfunction convertDeclareComponentFacadeToMetadata(decl, typeSourceSpan, sourceMapUrl) {\n  const {\n    template,\n    interpolation,\n    defer\n  } = parseJitTemplate(decl.template, decl.type.name, sourceMapUrl, decl.preserveWhitespaces ?? false, decl.interpolation, decl.deferBlockDependencies);\n  const declarations = [];\n  if (decl.dependencies) {\n    for (const innerDep of decl.dependencies) {\n      switch (innerDep.kind) {\n        case 'directive':\n        case 'component':\n          declarations.push(convertDirectiveDeclarationToMetadata(innerDep));\n          break;\n        case 'pipe':\n          declarations.push(convertPipeDeclarationToMetadata(innerDep));\n          break;\n      }\n    }\n  } else if (decl.components || decl.directives || decl.pipes) {\n    // Existing declarations on NPM may not be using the new `dependencies` merged field, and may\n    // have separate fields for dependencies instead. Unify them for JIT compilation.\n    decl.components && declarations.push(...decl.components.map(dir => convertDirectiveDeclarationToMetadata(dir, /* isComponent */true)));\n    decl.directives && declarations.push(...decl.directives.map(dir => convertDirectiveDeclarationToMetadata(dir)));\n    decl.pipes && declarations.push(...convertPipeMapToMetadata(decl.pipes));\n  }\n  return {\n    ...convertDeclareDirectiveFacadeToMetadata(decl, typeSourceSpan),\n    template,\n    styles: decl.styles ?? [],\n    declarations,\n    viewProviders: decl.viewProviders !== undefined ? new WrappedNodeExpr(decl.viewProviders) : null,\n    animations: decl.animations !== undefined ? new WrappedNodeExpr(decl.animations) : null,\n    defer,\n    changeDetection: decl.changeDetection ?? ChangeDetectionStrategy.Default,\n    encapsulation: decl.encapsulation ?? ViewEncapsulation.Emulated,\n    interpolation,\n    declarationListEmitMode: 2 /* DeclarationListEmitMode.ClosureResolved */,\n    relativeContextFilePath: '',\n    i18nUseExternalIds: true\n  };\n}\nfunction convertDeclarationFacadeToMetadata(declaration) {\n  return {\n    ...declaration,\n    type: new WrappedNodeExpr(declaration.type)\n  };\n}\nfunction convertDirectiveDeclarationToMetadata(declaration, isComponent = null) {\n  return {\n    kind: R3TemplateDependencyKind.Directive,\n    isComponent: isComponent || declaration.kind === 'component',\n    selector: declaration.selector,\n    type: new WrappedNodeExpr(declaration.type),\n    inputs: declaration.inputs ?? [],\n    outputs: declaration.outputs ?? [],\n    exportAs: declaration.exportAs ?? null\n  };\n}\nfunction convertPipeMapToMetadata(pipes) {\n  if (!pipes) {\n    return [];\n  }\n  return Object.keys(pipes).map(name => {\n    return {\n      kind: R3TemplateDependencyKind.Pipe,\n      name,\n      type: new WrappedNodeExpr(pipes[name])\n    };\n  });\n}\nfunction convertPipeDeclarationToMetadata(pipe) {\n  return {\n    kind: R3TemplateDependencyKind.Pipe,\n    name: pipe.name,\n    type: new WrappedNodeExpr(pipe.type)\n  };\n}\nfunction parseJitTemplate(template, typeName, sourceMapUrl, preserveWhitespaces, interpolation, deferBlockDependencies) {\n  const interpolationConfig = interpolation ? InterpolationConfig.fromArray(interpolation) : DEFAULT_INTERPOLATION_CONFIG;\n  // Parse the template and check for errors.\n  const parsed = parseTemplate(template, sourceMapUrl, {\n    preserveWhitespaces,\n    interpolationConfig\n  });\n  if (parsed.errors !== null) {\n    const errors = parsed.errors.map(err => err.toString()).join(', ');\n    throw new Error(`Errors during JIT compilation of template for ${typeName}: ${errors}`);\n  }\n  const binder = new R3TargetBinder(new SelectorMatcher());\n  const boundTarget = binder.bind({\n    template: parsed.nodes\n  });\n  return {\n    template: parsed,\n    interpolation: interpolationConfig,\n    defer: createR3ComponentDeferMetadata(boundTarget, deferBlockDependencies)\n  };\n}\n/**\n * Convert the expression, if present to an `R3ProviderExpression`.\n *\n * In JIT mode we do not want the compiler to wrap the expression in a `forwardRef()` call because,\n * if it is referencing a type that has not yet been defined, it will have already been wrapped in\n * a `forwardRef()` - either by the application developer or during partial-compilation. Thus we can\n * use `ForwardRefHandling.None`.\n */\nfunction convertToProviderExpression(obj, property) {\n  if (obj.hasOwnProperty(property)) {\n    return createMayBeForwardRefExpression(new WrappedNodeExpr(obj[property]), 0 /* ForwardRefHandling.None */);\n  } else {\n    return undefined;\n  }\n}\nfunction wrapExpression(obj, property) {\n  if (obj.hasOwnProperty(property)) {\n    return new WrappedNodeExpr(obj[property]);\n  } else {\n    return undefined;\n  }\n}\nfunction computeProvidedIn(providedIn) {\n  const expression = typeof providedIn === 'function' ? new WrappedNodeExpr(providedIn) : new LiteralExpr(providedIn ?? null);\n  // See `convertToProviderExpression()` for why this uses `ForwardRefHandling.None`.\n  return createMayBeForwardRefExpression(expression, 0 /* ForwardRefHandling.None */);\n}\nfunction convertR3DependencyMetadataArray(facades) {\n  return facades == null ? null : facades.map(convertR3DependencyMetadata);\n}\nfunction convertR3DependencyMetadata(facade) {\n  const isAttributeDep = facade.attribute != null; // both `null` and `undefined`\n  const rawToken = facade.token === null ? null : new WrappedNodeExpr(facade.token);\n  // In JIT mode, if the dep is an `@Attribute()` then we use the attribute name given in\n  // `attribute` rather than the `token`.\n  const token = isAttributeDep ? new WrappedNodeExpr(facade.attribute) : rawToken;\n  return createR3DependencyMetadata(token, isAttributeDep, facade.host, facade.optional, facade.self, facade.skipSelf);\n}\nfunction convertR3DeclareDependencyMetadata(facade) {\n  const isAttributeDep = facade.attribute ?? false;\n  const token = facade.token === null ? null : new WrappedNodeExpr(facade.token);\n  return createR3DependencyMetadata(token, isAttributeDep, facade.host ?? false, facade.optional ?? false, facade.self ?? false, facade.skipSelf ?? false);\n}\nfunction createR3DependencyMetadata(token, isAttributeDep, host, optional, self, skipSelf) {\n  // If the dep is an `@Attribute()` the `attributeNameType` ought to be the `unknown` type.\n  // But types are not available at runtime so we just use a literal `\"<unknown>\"` string as a dummy\n  // marker.\n  const attributeNameType = isAttributeDep ? literal('unknown') : null;\n  return {\n    token,\n    attributeNameType,\n    host,\n    optional,\n    self,\n    skipSelf\n  };\n}\nfunction createR3ComponentDeferMetadata(boundTarget, deferBlockDependencies) {\n  const deferredBlocks = boundTarget.getDeferBlocks();\n  const blocks = new Map();\n  for (let i = 0; i < deferredBlocks.length; i++) {\n    const dependencyFn = deferBlockDependencies?.[i];\n    blocks.set(deferredBlocks[i], dependencyFn ? new WrappedNodeExpr(dependencyFn) : null);\n  }\n  return {\n    mode: 0 /* DeferBlockDepsEmitMode.PerBlock */,\n    blocks\n  };\n}\nfunction extractHostBindings(propMetadata, sourceSpan, host) {\n  // First parse the declarations from the metadata.\n  const bindings = parseHostBindings(host || {});\n  // After that check host bindings for errors\n  const errors = verifyHostBindings(bindings, sourceSpan);\n  if (errors.length) {\n    throw new Error(errors.map(error => error.msg).join('\\n'));\n  }\n  // Next, loop over the properties of the object, looking for @HostBinding and @HostListener.\n  for (const field in propMetadata) {\n    if (propMetadata.hasOwnProperty(field)) {\n      propMetadata[field].forEach(ann => {\n        if (isHostBinding(ann)) {\n          // Since this is a decorator, we know that the value is a class member. Always access it\n          // through `this` so that further down the line it can't be confused for a literal value\n          // (e.g. if there's a property called `true`).\n          bindings.properties[ann.hostPropertyName || field] = getSafePropertyAccessString('this', field);\n        } else if (isHostListener(ann)) {\n          bindings.listeners[ann.eventName || field] = `${field}(${(ann.args || []).join(',')})`;\n        }\n      });\n    }\n  }\n  return bindings;\n}\nfunction isHostBinding(value) {\n  return value.ngMetadataName === 'HostBinding';\n}\nfunction isHostListener(value) {\n  return value.ngMetadataName === 'HostListener';\n}\nfunction isInput(value) {\n  return value.ngMetadataName === 'Input';\n}\nfunction isOutput(value) {\n  return value.ngMetadataName === 'Output';\n}\nfunction inputsPartialMetadataToInputMetadata(inputs) {\n  return Object.keys(inputs).reduce((result, minifiedClassName) => {\n    const value = inputs[minifiedClassName];\n    // Handle legacy partial input output.\n    if (typeof value === 'string' || Array.isArray(value)) {\n      result[minifiedClassName] = parseLegacyInputPartialOutput(value);\n    } else {\n      result[minifiedClassName] = {\n        bindingPropertyName: value.publicName,\n        classPropertyName: minifiedClassName,\n        transformFunction: value.transformFunction !== null ? new WrappedNodeExpr(value.transformFunction) : null,\n        required: value.isRequired,\n        isSignal: value.isSignal\n      };\n    }\n    return result;\n  }, {});\n}\n/**\n * Parses the legacy input partial output. For more details see `partial/directive.ts`.\n * TODO(legacy-partial-output-inputs): Remove in v18.\n */\nfunction parseLegacyInputPartialOutput(value) {\n  if (typeof value === 'string') {\n    return {\n      bindingPropertyName: value,\n      classPropertyName: value,\n      transformFunction: null,\n      required: false,\n      // legacy partial output does not capture signal inputs.\n      isSignal: false\n    };\n  }\n  return {\n    bindingPropertyName: value[0],\n    classPropertyName: value[1],\n    transformFunction: value[2] ? new WrappedNodeExpr(value[2]) : null,\n    required: false,\n    // legacy partial output does not capture signal inputs.\n    isSignal: false\n  };\n}\nfunction parseInputsArray(values) {\n  return values.reduce((results, value) => {\n    if (typeof value === 'string') {\n      const [bindingPropertyName, classPropertyName] = parseMappingString(value);\n      results[classPropertyName] = {\n        bindingPropertyName,\n        classPropertyName,\n        required: false,\n        // Signal inputs not supported for the inputs array.\n        isSignal: false,\n        transformFunction: null\n      };\n    } else {\n      results[value.name] = {\n        bindingPropertyName: value.alias || value.name,\n        classPropertyName: value.name,\n        required: value.required || false,\n        // Signal inputs not supported for the inputs array.\n        isSignal: false,\n        transformFunction: value.transform != null ? new WrappedNodeExpr(value.transform) : null\n      };\n    }\n    return results;\n  }, {});\n}\nfunction parseMappingStringArray(values) {\n  return values.reduce((results, value) => {\n    const [alias, fieldName] = parseMappingString(value);\n    results[fieldName] = alias;\n    return results;\n  }, {});\n}\nfunction parseMappingString(value) {\n  // Either the value is 'field' or 'field: property'. In the first case, `property` will\n  // be undefined, in which case the field name should also be used as the property name.\n  const [fieldName, bindingPropertyName] = value.split(':', 2).map(str => str.trim());\n  return [bindingPropertyName ?? fieldName, fieldName];\n}\nfunction convertDeclarePipeFacadeToMetadata(declaration) {\n  return {\n    name: declaration.type.name,\n    type: wrapReference(declaration.type),\n    typeArgumentCount: 0,\n    pipeName: declaration.name,\n    deps: null,\n    pure: declaration.pure ?? true,\n    isStandalone: declaration.isStandalone ?? false\n  };\n}\nfunction convertDeclareInjectorFacadeToMetadata(declaration) {\n  return {\n    name: declaration.type.name,\n    type: wrapReference(declaration.type),\n    providers: declaration.providers !== undefined && declaration.providers.length > 0 ? new WrappedNodeExpr(declaration.providers) : null,\n    imports: declaration.imports !== undefined ? declaration.imports.map(i => new WrappedNodeExpr(i)) : []\n  };\n}\nfunction publishFacade(global) {\n  const ng = global.ng || (global.ng = {});\n  ng.ɵcompilerFacade = new CompilerFacadeImpl();\n}\n\n/**\n * @module\n * @description\n * Entry point for all public APIs of the compiler package.\n */\nconst VERSION = new Version('18.1.4');\nclass CompilerConfig {\n  constructor({\n    defaultEncapsulation = ViewEncapsulation.Emulated,\n    preserveWhitespaces,\n    strictInjectionParameters\n  } = {}) {\n    this.defaultEncapsulation = defaultEncapsulation;\n    this.preserveWhitespaces = preserveWhitespacesDefault(noUndefined(preserveWhitespaces));\n    this.strictInjectionParameters = strictInjectionParameters === true;\n  }\n}\nfunction preserveWhitespacesDefault(preserveWhitespacesOption, defaultSetting = false) {\n  return preserveWhitespacesOption === null ? defaultSetting : preserveWhitespacesOption;\n}\nconst _I18N_ATTR = 'i18n';\nconst _I18N_ATTR_PREFIX = 'i18n-';\nconst _I18N_COMMENT_PREFIX_REGEXP = /^i18n:?/;\nconst MEANING_SEPARATOR = '|';\nconst ID_SEPARATOR = '@@';\nlet i18nCommentsWarned = false;\n/**\n * Extract translatable messages from an html AST\n */\nfunction extractMessages(nodes, interpolationConfig, implicitTags, implicitAttrs) {\n  const visitor = new _Visitor(implicitTags, implicitAttrs);\n  return visitor.extract(nodes, interpolationConfig);\n}\nfunction mergeTranslations(nodes, translations, interpolationConfig, implicitTags, implicitAttrs) {\n  const visitor = new _Visitor(implicitTags, implicitAttrs);\n  return visitor.merge(nodes, translations, interpolationConfig);\n}\nclass ExtractionResult {\n  constructor(messages, errors) {\n    this.messages = messages;\n    this.errors = errors;\n  }\n}\nvar _VisitorMode;\n(function (_VisitorMode) {\n  _VisitorMode[_VisitorMode[\"Extract\"] = 0] = \"Extract\";\n  _VisitorMode[_VisitorMode[\"Merge\"] = 1] = \"Merge\";\n})(_VisitorMode || (_VisitorMode = {}));\n/**\n * This Visitor is used:\n * 1. to extract all the translatable strings from an html AST (see `extract()`),\n * 2. to replace the translatable strings with the actual translations (see `merge()`)\n *\n * @internal\n */\nclass _Visitor {\n  constructor(_implicitTags, _implicitAttrs) {\n    this._implicitTags = _implicitTags;\n    this._implicitAttrs = _implicitAttrs;\n  }\n  /**\n   * Extracts the messages from the tree\n   */\n  extract(nodes, interpolationConfig) {\n    this._init(_VisitorMode.Extract, interpolationConfig);\n    nodes.forEach(node => node.visit(this, null));\n    if (this._inI18nBlock) {\n      this._reportError(nodes[nodes.length - 1], 'Unclosed block');\n    }\n    return new ExtractionResult(this._messages, this._errors);\n  }\n  /**\n   * Returns a tree where all translatable nodes are translated\n   */\n  merge(nodes, translations, interpolationConfig) {\n    this._init(_VisitorMode.Merge, interpolationConfig);\n    this._translations = translations;\n    // Construct a single fake root element\n    const wrapper = new Element('wrapper', [], nodes, undefined, undefined, undefined);\n    const translatedNode = wrapper.visit(this, null);\n    if (this._inI18nBlock) {\n      this._reportError(nodes[nodes.length - 1], 'Unclosed block');\n    }\n    return new ParseTreeResult(translatedNode.children, this._errors);\n  }\n  visitExpansionCase(icuCase, context) {\n    // Parse cases for translatable html attributes\n    const expression = visitAll(this, icuCase.expression, context);\n    if (this._mode === _VisitorMode.Merge) {\n      return new ExpansionCase(icuCase.value, expression, icuCase.sourceSpan, icuCase.valueSourceSpan, icuCase.expSourceSpan);\n    }\n  }\n  visitExpansion(icu, context) {\n    this._mayBeAddBlockChildren(icu);\n    const wasInIcu = this._inIcu;\n    if (!this._inIcu) {\n      // nested ICU messages should not be extracted but top-level translated as a whole\n      if (this._isInTranslatableSection) {\n        this._addMessage([icu]);\n      }\n      this._inIcu = true;\n    }\n    const cases = visitAll(this, icu.cases, context);\n    if (this._mode === _VisitorMode.Merge) {\n      icu = new Expansion(icu.switchValue, icu.type, cases, icu.sourceSpan, icu.switchValueSourceSpan);\n    }\n    this._inIcu = wasInIcu;\n    return icu;\n  }\n  visitComment(comment, context) {\n    const isOpening = _isOpeningComment(comment);\n    if (isOpening && this._isInTranslatableSection) {\n      this._reportError(comment, 'Could not start a block inside a translatable section');\n      return;\n    }\n    const isClosing = _isClosingComment(comment);\n    if (isClosing && !this._inI18nBlock) {\n      this._reportError(comment, 'Trying to close an unopened block');\n      return;\n    }\n    if (!this._inI18nNode && !this._inIcu) {\n      if (!this._inI18nBlock) {\n        if (isOpening) {\n          // deprecated from v5 you should use <ng-container i18n> instead of i18n comments\n          if (!i18nCommentsWarned && console && console.warn) {\n            i18nCommentsWarned = true;\n            const details = comment.sourceSpan.details ? `, ${comment.sourceSpan.details}` : '';\n            // TODO(ocombe): use a log service once there is a public one available\n            console.warn(`I18n comments are deprecated, use an <ng-container> element instead (${comment.sourceSpan.start}${details})`);\n          }\n          this._inI18nBlock = true;\n          this._blockStartDepth = this._depth;\n          this._blockChildren = [];\n          this._blockMeaningAndDesc = comment.value.replace(_I18N_COMMENT_PREFIX_REGEXP, '').trim();\n          this._openTranslatableSection(comment);\n        }\n      } else {\n        if (isClosing) {\n          if (this._depth == this._blockStartDepth) {\n            this._closeTranslatableSection(comment, this._blockChildren);\n            this._inI18nBlock = false;\n            const message = this._addMessage(this._blockChildren, this._blockMeaningAndDesc);\n            // merge attributes in sections\n            const nodes = this._translateMessage(comment, message);\n            return visitAll(this, nodes);\n          } else {\n            this._reportError(comment, 'I18N blocks should not cross element boundaries');\n            return;\n          }\n        }\n      }\n    }\n  }\n  visitText(text, context) {\n    if (this._isInTranslatableSection) {\n      this._mayBeAddBlockChildren(text);\n    }\n    return text;\n  }\n  visitElement(el, context) {\n    this._mayBeAddBlockChildren(el);\n    this._depth++;\n    const wasInI18nNode = this._inI18nNode;\n    const wasInImplicitNode = this._inImplicitNode;\n    let childNodes = [];\n    let translatedChildNodes = undefined;\n    // Extract:\n    // - top level nodes with the (implicit) \"i18n\" attribute if not already in a section\n    // - ICU messages\n    const i18nAttr = _getI18nAttr(el);\n    const i18nMeta = i18nAttr ? i18nAttr.value : '';\n    const isImplicit = this._implicitTags.some(tag => el.name === tag) && !this._inIcu && !this._isInTranslatableSection;\n    const isTopLevelImplicit = !wasInImplicitNode && isImplicit;\n    this._inImplicitNode = wasInImplicitNode || isImplicit;\n    if (!this._isInTranslatableSection && !this._inIcu) {\n      if (i18nAttr || isTopLevelImplicit) {\n        this._inI18nNode = true;\n        const message = this._addMessage(el.children, i18nMeta);\n        translatedChildNodes = this._translateMessage(el, message);\n      }\n      if (this._mode == _VisitorMode.Extract) {\n        const isTranslatable = i18nAttr || isTopLevelImplicit;\n        if (isTranslatable) this._openTranslatableSection(el);\n        visitAll(this, el.children);\n        if (isTranslatable) this._closeTranslatableSection(el, el.children);\n      }\n    } else {\n      if (i18nAttr || isTopLevelImplicit) {\n        this._reportError(el, 'Could not mark an element as translatable inside a translatable section');\n      }\n      if (this._mode == _VisitorMode.Extract) {\n        // Descend into child nodes for extraction\n        visitAll(this, el.children);\n      }\n    }\n    if (this._mode === _VisitorMode.Merge) {\n      const visitNodes = translatedChildNodes || el.children;\n      visitNodes.forEach(child => {\n        const visited = child.visit(this, context);\n        if (visited && !this._isInTranslatableSection) {\n          // Do not add the children from translatable sections (= i18n blocks here)\n          // They will be added later in this loop when the block closes (i.e. on `<!-- /i18n -->`)\n          childNodes = childNodes.concat(visited);\n        }\n      });\n    }\n    this._visitAttributesOf(el);\n    this._depth--;\n    this._inI18nNode = wasInI18nNode;\n    this._inImplicitNode = wasInImplicitNode;\n    if (this._mode === _VisitorMode.Merge) {\n      const translatedAttrs = this._translateAttributes(el);\n      return new Element(el.name, translatedAttrs, childNodes, el.sourceSpan, el.startSourceSpan, el.endSourceSpan);\n    }\n    return null;\n  }\n  visitAttribute(attribute, context) {\n    throw new Error('unreachable code');\n  }\n  visitBlock(block, context) {\n    visitAll(this, block.children, context);\n  }\n  visitBlockParameter(parameter, context) {}\n  visitLetDeclaration(decl, context) {}\n  _init(mode, interpolationConfig) {\n    this._mode = mode;\n    this._inI18nBlock = false;\n    this._inI18nNode = false;\n    this._depth = 0;\n    this._inIcu = false;\n    this._msgCountAtSectionStart = undefined;\n    this._errors = [];\n    this._messages = [];\n    this._inImplicitNode = false;\n    this._createI18nMessage = createI18nMessageFactory(interpolationConfig, DEFAULT_CONTAINER_BLOCKS);\n  }\n  // looks for translatable attributes\n  _visitAttributesOf(el) {\n    const explicitAttrNameToValue = {};\n    const implicitAttrNames = this._implicitAttrs[el.name] || [];\n    el.attrs.filter(attr => attr.name.startsWith(_I18N_ATTR_PREFIX)).forEach(attr => explicitAttrNameToValue[attr.name.slice(_I18N_ATTR_PREFIX.length)] = attr.value);\n    el.attrs.forEach(attr => {\n      if (attr.name in explicitAttrNameToValue) {\n        this._addMessage([attr], explicitAttrNameToValue[attr.name]);\n      } else if (implicitAttrNames.some(name => attr.name === name)) {\n        this._addMessage([attr]);\n      }\n    });\n  }\n  // add a translatable message\n  _addMessage(ast, msgMeta) {\n    if (ast.length == 0 || ast.length == 1 && ast[0] instanceof Attribute && !ast[0].value) {\n      // Do not create empty messages\n      return null;\n    }\n    const {\n      meaning,\n      description,\n      id\n    } = _parseMessageMeta(msgMeta);\n    const message = this._createI18nMessage(ast, meaning, description, id);\n    this._messages.push(message);\n    return message;\n  }\n  // Translates the given message given the `TranslationBundle`\n  // This is used for translating elements / blocks - see `_translateAttributes` for attributes\n  // no-op when called in extraction mode (returns [])\n  _translateMessage(el, message) {\n    if (message && this._mode === _VisitorMode.Merge) {\n      const nodes = this._translations.get(message);\n      if (nodes) {\n        return nodes;\n      }\n      this._reportError(el, `Translation unavailable for message id=\"${this._translations.digest(message)}\"`);\n    }\n    return [];\n  }\n  // translate the attributes of an element and remove i18n specific attributes\n  _translateAttributes(el) {\n    const attributes = el.attrs;\n    const i18nParsedMessageMeta = {};\n    attributes.forEach(attr => {\n      if (attr.name.startsWith(_I18N_ATTR_PREFIX)) {\n        i18nParsedMessageMeta[attr.name.slice(_I18N_ATTR_PREFIX.length)] = _parseMessageMeta(attr.value);\n      }\n    });\n    const translatedAttributes = [];\n    attributes.forEach(attr => {\n      if (attr.name === _I18N_ATTR || attr.name.startsWith(_I18N_ATTR_PREFIX)) {\n        // strip i18n specific attributes\n        return;\n      }\n      if (attr.value && attr.value != '' && i18nParsedMessageMeta.hasOwnProperty(attr.name)) {\n        const {\n          meaning,\n          description,\n          id\n        } = i18nParsedMessageMeta[attr.name];\n        const message = this._createI18nMessage([attr], meaning, description, id);\n        const nodes = this._translations.get(message);\n        if (nodes) {\n          if (nodes.length == 0) {\n            translatedAttributes.push(new Attribute(attr.name, '', attr.sourceSpan, undefined /* keySpan */, undefined /* valueSpan */, undefined /* valueTokens */, undefined /* i18n */));\n          } else if (nodes[0] instanceof Text) {\n            const value = nodes[0].value;\n            translatedAttributes.push(new Attribute(attr.name, value, attr.sourceSpan, undefined /* keySpan */, undefined /* valueSpan */, undefined /* valueTokens */, undefined /* i18n */));\n          } else {\n            this._reportError(el, `Unexpected translation for attribute \"${attr.name}\" (id=\"${id || this._translations.digest(message)}\")`);\n          }\n        } else {\n          this._reportError(el, `Translation unavailable for attribute \"${attr.name}\" (id=\"${id || this._translations.digest(message)}\")`);\n        }\n      } else {\n        translatedAttributes.push(attr);\n      }\n    });\n    return translatedAttributes;\n  }\n  /**\n   * Add the node as a child of the block when:\n   * - we are in a block,\n   * - we are not inside a ICU message (those are handled separately),\n   * - the node is a \"direct child\" of the block\n   */\n  _mayBeAddBlockChildren(node) {\n    if (this._inI18nBlock && !this._inIcu && this._depth == this._blockStartDepth) {\n      this._blockChildren.push(node);\n    }\n  }\n  /**\n   * Marks the start of a section, see `_closeTranslatableSection`\n   */\n  _openTranslatableSection(node) {\n    if (this._isInTranslatableSection) {\n      this._reportError(node, 'Unexpected section start');\n    } else {\n      this._msgCountAtSectionStart = this._messages.length;\n    }\n  }\n  /**\n   * A translatable section could be:\n   * - the content of translatable element,\n   * - nodes between `<!-- i18n -->` and `<!-- /i18n -->` comments\n   */\n  get _isInTranslatableSection() {\n    return this._msgCountAtSectionStart !== void 0;\n  }\n  /**\n   * Terminates a section.\n   *\n   * If a section has only one significant children (comments not significant) then we should not\n   * keep the message from this children:\n   *\n   * `<p i18n=\"meaning|description\">{ICU message}</p>` would produce two messages:\n   * - one for the <p> content with meaning and description,\n   * - another one for the ICU message.\n   *\n   * In this case the last message is discarded as it contains less information (the AST is\n   * otherwise identical).\n   *\n   * Note that we should still keep messages extracted from attributes inside the section (ie in the\n   * ICU message here)\n   */\n  _closeTranslatableSection(node, directChildren) {\n    if (!this._isInTranslatableSection) {\n      this._reportError(node, 'Unexpected section end');\n      return;\n    }\n    const startIndex = this._msgCountAtSectionStart;\n    const significantChildren = directChildren.reduce((count, node) => count + (node instanceof Comment ? 0 : 1), 0);\n    if (significantChildren == 1) {\n      for (let i = this._messages.length - 1; i >= startIndex; i--) {\n        const ast = this._messages[i].nodes;\n        if (!(ast.length == 1 && ast[0] instanceof Text$2)) {\n          this._messages.splice(i, 1);\n          break;\n        }\n      }\n    }\n    this._msgCountAtSectionStart = undefined;\n  }\n  _reportError(node, msg) {\n    this._errors.push(new I18nError(node.sourceSpan, msg));\n  }\n}\nfunction _isOpeningComment(n) {\n  return !!(n instanceof Comment && n.value && n.value.startsWith('i18n'));\n}\nfunction _isClosingComment(n) {\n  return !!(n instanceof Comment && n.value && n.value === '/i18n');\n}\nfunction _getI18nAttr(p) {\n  return p.attrs.find(attr => attr.name === _I18N_ATTR) || null;\n}\nfunction _parseMessageMeta(i18n) {\n  if (!i18n) return {\n    meaning: '',\n    description: '',\n    id: ''\n  };\n  const idIndex = i18n.indexOf(ID_SEPARATOR);\n  const descIndex = i18n.indexOf(MEANING_SEPARATOR);\n  const [meaningAndDesc, id] = idIndex > -1 ? [i18n.slice(0, idIndex), i18n.slice(idIndex + 2)] : [i18n, ''];\n  const [meaning, description] = descIndex > -1 ? [meaningAndDesc.slice(0, descIndex), meaningAndDesc.slice(descIndex + 1)] : ['', meaningAndDesc];\n  return {\n    meaning,\n    description,\n    id: id.trim()\n  };\n}\nclass XmlTagDefinition {\n  constructor() {\n    this.closedByParent = false;\n    this.implicitNamespacePrefix = null;\n    this.isVoid = false;\n    this.ignoreFirstLf = false;\n    this.canSelfClose = true;\n    this.preventNamespaceInheritance = false;\n  }\n  requireExtraParent(currentParent) {\n    return false;\n  }\n  isClosedByChild(name) {\n    return false;\n  }\n  getContentType() {\n    return TagContentType.PARSABLE_DATA;\n  }\n}\nconst _TAG_DEFINITION = new XmlTagDefinition();\nfunction getXmlTagDefinition(tagName) {\n  return _TAG_DEFINITION;\n}\nclass XmlParser extends Parser {\n  constructor() {\n    super(getXmlTagDefinition);\n  }\n  parse(source, url, options = {}) {\n    // Blocks and let declarations aren't supported in an XML context.\n    return super.parse(source, url, {\n      ...options,\n      tokenizeBlocks: false,\n      tokenizeLet: false\n    });\n  }\n}\nconst _VERSION$1 = '1.2';\nconst _XMLNS$1 = 'urn:oasis:names:tc:xliff:document:1.2';\n// TODO(vicb): make this a param (s/_/-/)\nconst _DEFAULT_SOURCE_LANG$1 = 'en';\nconst _PLACEHOLDER_TAG$2 = 'x';\nconst _MARKER_TAG$1 = 'mrk';\nconst _FILE_TAG = 'file';\nconst _SOURCE_TAG$1 = 'source';\nconst _SEGMENT_SOURCE_TAG = 'seg-source';\nconst _ALT_TRANS_TAG = 'alt-trans';\nconst _TARGET_TAG$1 = 'target';\nconst _UNIT_TAG$1 = 'trans-unit';\nconst _CONTEXT_GROUP_TAG = 'context-group';\nconst _CONTEXT_TAG = 'context';\n// https://docs.oasis-open.org/xliff/v1.2/os/xliff-core.html\n// https://docs.oasis-open.org/xliff/v1.2/xliff-profile-html/xliff-profile-html-1.2.html\nclass Xliff extends Serializer {\n  write(messages, locale) {\n    const visitor = new _WriteVisitor$1();\n    const transUnits = [];\n    messages.forEach(message => {\n      let contextTags = [];\n      message.sources.forEach(source => {\n        let contextGroupTag = new Tag(_CONTEXT_GROUP_TAG, {\n          purpose: 'location'\n        });\n        contextGroupTag.children.push(new CR(10), new Tag(_CONTEXT_TAG, {\n          'context-type': 'sourcefile'\n        }, [new Text$1(source.filePath)]), new CR(10), new Tag(_CONTEXT_TAG, {\n          'context-type': 'linenumber'\n        }, [new Text$1(`${source.startLine}`)]), new CR(8));\n        contextTags.push(new CR(8), contextGroupTag);\n      });\n      const transUnit = new Tag(_UNIT_TAG$1, {\n        id: message.id,\n        datatype: 'html'\n      });\n      transUnit.children.push(new CR(8), new Tag(_SOURCE_TAG$1, {}, visitor.serialize(message.nodes)), ...contextTags);\n      if (message.description) {\n        transUnit.children.push(new CR(8), new Tag('note', {\n          priority: '1',\n          from: 'description'\n        }, [new Text$1(message.description)]));\n      }\n      if (message.meaning) {\n        transUnit.children.push(new CR(8), new Tag('note', {\n          priority: '1',\n          from: 'meaning'\n        }, [new Text$1(message.meaning)]));\n      }\n      transUnit.children.push(new CR(6));\n      transUnits.push(new CR(6), transUnit);\n    });\n    const body = new Tag('body', {}, [...transUnits, new CR(4)]);\n    const file = new Tag('file', {\n      'source-language': locale || _DEFAULT_SOURCE_LANG$1,\n      datatype: 'plaintext',\n      original: 'ng2.template'\n    }, [new CR(4), body, new CR(2)]);\n    const xliff = new Tag('xliff', {\n      version: _VERSION$1,\n      xmlns: _XMLNS$1\n    }, [new CR(2), file, new CR()]);\n    return serialize([new Declaration({\n      version: '1.0',\n      encoding: 'UTF-8'\n    }), new CR(), xliff, new CR()]);\n  }\n  load(content, url) {\n    // xliff to xml nodes\n    const xliffParser = new XliffParser();\n    const {\n      locale,\n      msgIdToHtml,\n      errors\n    } = xliffParser.parse(content, url);\n    // xml nodes to i18n nodes\n    const i18nNodesByMsgId = {};\n    const converter = new XmlToI18n$2();\n    Object.keys(msgIdToHtml).forEach(msgId => {\n      const {\n        i18nNodes,\n        errors: e\n      } = converter.convert(msgIdToHtml[msgId], url);\n      errors.push(...e);\n      i18nNodesByMsgId[msgId] = i18nNodes;\n    });\n    if (errors.length) {\n      throw new Error(`xliff parse errors:\\n${errors.join('\\n')}`);\n    }\n    return {\n      locale: locale,\n      i18nNodesByMsgId\n    };\n  }\n  digest(message) {\n    return digest$1(message);\n  }\n}\nclass _WriteVisitor$1 {\n  visitText(text, context) {\n    return [new Text$1(text.value)];\n  }\n  visitContainer(container, context) {\n    const nodes = [];\n    container.children.forEach(node => nodes.push(...node.visit(this)));\n    return nodes;\n  }\n  visitIcu(icu, context) {\n    const nodes = [new Text$1(`{${icu.expressionPlaceholder}, ${icu.type}, `)];\n    Object.keys(icu.cases).forEach(c => {\n      nodes.push(new Text$1(`${c} {`), ...icu.cases[c].visit(this), new Text$1(`} `));\n    });\n    nodes.push(new Text$1(`}`));\n    return nodes;\n  }\n  visitTagPlaceholder(ph, context) {\n    const ctype = getCtypeForTag(ph.tag);\n    if (ph.isVoid) {\n      // void tags have no children nor closing tags\n      return [new Tag(_PLACEHOLDER_TAG$2, {\n        id: ph.startName,\n        ctype,\n        'equiv-text': `<${ph.tag}/>`\n      })];\n    }\n    const startTagPh = new Tag(_PLACEHOLDER_TAG$2, {\n      id: ph.startName,\n      ctype,\n      'equiv-text': `<${ph.tag}>`\n    });\n    const closeTagPh = new Tag(_PLACEHOLDER_TAG$2, {\n      id: ph.closeName,\n      ctype,\n      'equiv-text': `</${ph.tag}>`\n    });\n    return [startTagPh, ...this.serialize(ph.children), closeTagPh];\n  }\n  visitPlaceholder(ph, context) {\n    return [new Tag(_PLACEHOLDER_TAG$2, {\n      id: ph.name,\n      'equiv-text': `{{${ph.value}}}`\n    })];\n  }\n  visitBlockPlaceholder(ph, context) {\n    const ctype = `x-${ph.name.toLowerCase().replace(/[^a-z0-9]/g, '-')}`;\n    const startTagPh = new Tag(_PLACEHOLDER_TAG$2, {\n      id: ph.startName,\n      ctype,\n      'equiv-text': `@${ph.name}`\n    });\n    const closeTagPh = new Tag(_PLACEHOLDER_TAG$2, {\n      id: ph.closeName,\n      ctype,\n      'equiv-text': `}`\n    });\n    return [startTagPh, ...this.serialize(ph.children), closeTagPh];\n  }\n  visitIcuPlaceholder(ph, context) {\n    const equivText = `{${ph.value.expression}, ${ph.value.type}, ${Object.keys(ph.value.cases).map(value => value + ' {...}').join(' ')}}`;\n    return [new Tag(_PLACEHOLDER_TAG$2, {\n      id: ph.name,\n      'equiv-text': equivText\n    })];\n  }\n  serialize(nodes) {\n    return [].concat(...nodes.map(node => node.visit(this)));\n  }\n}\n// TODO(vicb): add error management (structure)\n// Extract messages as xml nodes from the xliff file\nclass XliffParser {\n  constructor() {\n    this._locale = null;\n  }\n  parse(xliff, url) {\n    this._unitMlString = null;\n    this._msgIdToHtml = {};\n    const xml = new XmlParser().parse(xliff, url);\n    this._errors = xml.errors;\n    visitAll(this, xml.rootNodes, null);\n    return {\n      msgIdToHtml: this._msgIdToHtml,\n      errors: this._errors,\n      locale: this._locale\n    };\n  }\n  visitElement(element, context) {\n    switch (element.name) {\n      case _UNIT_TAG$1:\n        this._unitMlString = null;\n        const idAttr = element.attrs.find(attr => attr.name === 'id');\n        if (!idAttr) {\n          this._addError(element, `<${_UNIT_TAG$1}> misses the \"id\" attribute`);\n        } else {\n          const id = idAttr.value;\n          if (this._msgIdToHtml.hasOwnProperty(id)) {\n            this._addError(element, `Duplicated translations for msg ${id}`);\n          } else {\n            visitAll(this, element.children, null);\n            if (typeof this._unitMlString === 'string') {\n              this._msgIdToHtml[id] = this._unitMlString;\n            } else {\n              this._addError(element, `Message ${id} misses a translation`);\n            }\n          }\n        }\n        break;\n      // ignore those tags\n      case _SOURCE_TAG$1:\n      case _SEGMENT_SOURCE_TAG:\n      case _ALT_TRANS_TAG:\n        break;\n      case _TARGET_TAG$1:\n        const innerTextStart = element.startSourceSpan.end.offset;\n        const innerTextEnd = element.endSourceSpan.start.offset;\n        const content = element.startSourceSpan.start.file.content;\n        const innerText = content.slice(innerTextStart, innerTextEnd);\n        this._unitMlString = innerText;\n        break;\n      case _FILE_TAG:\n        const localeAttr = element.attrs.find(attr => attr.name === 'target-language');\n        if (localeAttr) {\n          this._locale = localeAttr.value;\n        }\n        visitAll(this, element.children, null);\n        break;\n      default:\n        // TODO(vicb): assert file structure, xliff version\n        // For now only recurse on unhandled nodes\n        visitAll(this, element.children, null);\n    }\n  }\n  visitAttribute(attribute, context) {}\n  visitText(text, context) {}\n  visitComment(comment, context) {}\n  visitExpansion(expansion, context) {}\n  visitExpansionCase(expansionCase, context) {}\n  visitBlock(block, context) {}\n  visitBlockParameter(parameter, context) {}\n  visitLetDeclaration(decl, context) {}\n  _addError(node, message) {\n    this._errors.push(new I18nError(node.sourceSpan, message));\n  }\n}\n// Convert ml nodes (xliff syntax) to i18n nodes\nclass XmlToI18n$2 {\n  convert(message, url) {\n    const xmlIcu = new XmlParser().parse(message, url, {\n      tokenizeExpansionForms: true\n    });\n    this._errors = xmlIcu.errors;\n    const i18nNodes = this._errors.length > 0 || xmlIcu.rootNodes.length == 0 ? [] : [].concat(...visitAll(this, xmlIcu.rootNodes));\n    return {\n      i18nNodes: i18nNodes,\n      errors: this._errors\n    };\n  }\n  visitText(text, context) {\n    return new Text$2(text.value, text.sourceSpan);\n  }\n  visitElement(el, context) {\n    if (el.name === _PLACEHOLDER_TAG$2) {\n      const nameAttr = el.attrs.find(attr => attr.name === 'id');\n      if (nameAttr) {\n        return new Placeholder('', nameAttr.value, el.sourceSpan);\n      }\n      this._addError(el, `<${_PLACEHOLDER_TAG$2}> misses the \"id\" attribute`);\n      return null;\n    }\n    if (el.name === _MARKER_TAG$1) {\n      return [].concat(...visitAll(this, el.children));\n    }\n    this._addError(el, `Unexpected tag`);\n    return null;\n  }\n  visitExpansion(icu, context) {\n    const caseMap = {};\n    visitAll(this, icu.cases).forEach(c => {\n      caseMap[c.value] = new Container(c.nodes, icu.sourceSpan);\n    });\n    return new Icu(icu.switchValue, icu.type, caseMap, icu.sourceSpan);\n  }\n  visitExpansionCase(icuCase, context) {\n    return {\n      value: icuCase.value,\n      nodes: visitAll(this, icuCase.expression)\n    };\n  }\n  visitComment(comment, context) {}\n  visitAttribute(attribute, context) {}\n  visitBlock(block, context) {}\n  visitBlockParameter(parameter, context) {}\n  visitLetDeclaration(decl, context) {}\n  _addError(node, message) {\n    this._errors.push(new I18nError(node.sourceSpan, message));\n  }\n}\nfunction getCtypeForTag(tag) {\n  switch (tag.toLowerCase()) {\n    case 'br':\n      return 'lb';\n    case 'img':\n      return 'image';\n    default:\n      return `x-${tag}`;\n  }\n}\nconst _VERSION = '2.0';\nconst _XMLNS = 'urn:oasis:names:tc:xliff:document:2.0';\n// TODO(vicb): make this a param (s/_/-/)\nconst _DEFAULT_SOURCE_LANG = 'en';\nconst _PLACEHOLDER_TAG$1 = 'ph';\nconst _PLACEHOLDER_SPANNING_TAG = 'pc';\nconst _MARKER_TAG = 'mrk';\nconst _XLIFF_TAG = 'xliff';\nconst _SOURCE_TAG = 'source';\nconst _TARGET_TAG = 'target';\nconst _UNIT_TAG = 'unit';\n// https://docs.oasis-open.org/xliff/xliff-core/v2.0/os/xliff-core-v2.0-os.html\nclass Xliff2 extends Serializer {\n  write(messages, locale) {\n    const visitor = new _WriteVisitor();\n    const units = [];\n    messages.forEach(message => {\n      const unit = new Tag(_UNIT_TAG, {\n        id: message.id\n      });\n      const notes = new Tag('notes');\n      if (message.description || message.meaning) {\n        if (message.description) {\n          notes.children.push(new CR(8), new Tag('note', {\n            category: 'description'\n          }, [new Text$1(message.description)]));\n        }\n        if (message.meaning) {\n          notes.children.push(new CR(8), new Tag('note', {\n            category: 'meaning'\n          }, [new Text$1(message.meaning)]));\n        }\n      }\n      message.sources.forEach(source => {\n        notes.children.push(new CR(8), new Tag('note', {\n          category: 'location'\n        }, [new Text$1(`${source.filePath}:${source.startLine}${source.endLine !== source.startLine ? ',' + source.endLine : ''}`)]));\n      });\n      notes.children.push(new CR(6));\n      unit.children.push(new CR(6), notes);\n      const segment = new Tag('segment');\n      segment.children.push(new CR(8), new Tag(_SOURCE_TAG, {}, visitor.serialize(message.nodes)), new CR(6));\n      unit.children.push(new CR(6), segment, new CR(4));\n      units.push(new CR(4), unit);\n    });\n    const file = new Tag('file', {\n      'original': 'ng.template',\n      id: 'ngi18n'\n    }, [...units, new CR(2)]);\n    const xliff = new Tag(_XLIFF_TAG, {\n      version: _VERSION,\n      xmlns: _XMLNS,\n      srcLang: locale || _DEFAULT_SOURCE_LANG\n    }, [new CR(2), file, new CR()]);\n    return serialize([new Declaration({\n      version: '1.0',\n      encoding: 'UTF-8'\n    }), new CR(), xliff, new CR()]);\n  }\n  load(content, url) {\n    // xliff to xml nodes\n    const xliff2Parser = new Xliff2Parser();\n    const {\n      locale,\n      msgIdToHtml,\n      errors\n    } = xliff2Parser.parse(content, url);\n    // xml nodes to i18n nodes\n    const i18nNodesByMsgId = {};\n    const converter = new XmlToI18n$1();\n    Object.keys(msgIdToHtml).forEach(msgId => {\n      const {\n        i18nNodes,\n        errors: e\n      } = converter.convert(msgIdToHtml[msgId], url);\n      errors.push(...e);\n      i18nNodesByMsgId[msgId] = i18nNodes;\n    });\n    if (errors.length) {\n      throw new Error(`xliff2 parse errors:\\n${errors.join('\\n')}`);\n    }\n    return {\n      locale: locale,\n      i18nNodesByMsgId\n    };\n  }\n  digest(message) {\n    return decimalDigest(message);\n  }\n}\nclass _WriteVisitor {\n  constructor() {\n    this._nextPlaceholderId = 0;\n  }\n  visitText(text, context) {\n    return [new Text$1(text.value)];\n  }\n  visitContainer(container, context) {\n    const nodes = [];\n    container.children.forEach(node => nodes.push(...node.visit(this)));\n    return nodes;\n  }\n  visitIcu(icu, context) {\n    const nodes = [new Text$1(`{${icu.expressionPlaceholder}, ${icu.type}, `)];\n    Object.keys(icu.cases).forEach(c => {\n      nodes.push(new Text$1(`${c} {`), ...icu.cases[c].visit(this), new Text$1(`} `));\n    });\n    nodes.push(new Text$1(`}`));\n    return nodes;\n  }\n  visitTagPlaceholder(ph, context) {\n    const type = getTypeForTag(ph.tag);\n    if (ph.isVoid) {\n      const tagPh = new Tag(_PLACEHOLDER_TAG$1, {\n        id: (this._nextPlaceholderId++).toString(),\n        equiv: ph.startName,\n        type: type,\n        disp: `<${ph.tag}/>`\n      });\n      return [tagPh];\n    }\n    const tagPc = new Tag(_PLACEHOLDER_SPANNING_TAG, {\n      id: (this._nextPlaceholderId++).toString(),\n      equivStart: ph.startName,\n      equivEnd: ph.closeName,\n      type: type,\n      dispStart: `<${ph.tag}>`,\n      dispEnd: `</${ph.tag}>`\n    });\n    const nodes = [].concat(...ph.children.map(node => node.visit(this)));\n    if (nodes.length) {\n      nodes.forEach(node => tagPc.children.push(node));\n    } else {\n      tagPc.children.push(new Text$1(''));\n    }\n    return [tagPc];\n  }\n  visitPlaceholder(ph, context) {\n    const idStr = (this._nextPlaceholderId++).toString();\n    return [new Tag(_PLACEHOLDER_TAG$1, {\n      id: idStr,\n      equiv: ph.name,\n      disp: `{{${ph.value}}}`\n    })];\n  }\n  visitBlockPlaceholder(ph, context) {\n    const tagPc = new Tag(_PLACEHOLDER_SPANNING_TAG, {\n      id: (this._nextPlaceholderId++).toString(),\n      equivStart: ph.startName,\n      equivEnd: ph.closeName,\n      type: 'other',\n      dispStart: `@${ph.name}`,\n      dispEnd: `}`\n    });\n    const nodes = [].concat(...ph.children.map(node => node.visit(this)));\n    if (nodes.length) {\n      nodes.forEach(node => tagPc.children.push(node));\n    } else {\n      tagPc.children.push(new Text$1(''));\n    }\n    return [tagPc];\n  }\n  visitIcuPlaceholder(ph, context) {\n    const cases = Object.keys(ph.value.cases).map(value => value + ' {...}').join(' ');\n    const idStr = (this._nextPlaceholderId++).toString();\n    return [new Tag(_PLACEHOLDER_TAG$1, {\n      id: idStr,\n      equiv: ph.name,\n      disp: `{${ph.value.expression}, ${ph.value.type}, ${cases}}`\n    })];\n  }\n  serialize(nodes) {\n    this._nextPlaceholderId = 0;\n    return [].concat(...nodes.map(node => node.visit(this)));\n  }\n}\n// Extract messages as xml nodes from the xliff file\nclass Xliff2Parser {\n  constructor() {\n    this._locale = null;\n  }\n  parse(xliff, url) {\n    this._unitMlString = null;\n    this._msgIdToHtml = {};\n    const xml = new XmlParser().parse(xliff, url);\n    this._errors = xml.errors;\n    visitAll(this, xml.rootNodes, null);\n    return {\n      msgIdToHtml: this._msgIdToHtml,\n      errors: this._errors,\n      locale: this._locale\n    };\n  }\n  visitElement(element, context) {\n    switch (element.name) {\n      case _UNIT_TAG:\n        this._unitMlString = null;\n        const idAttr = element.attrs.find(attr => attr.name === 'id');\n        if (!idAttr) {\n          this._addError(element, `<${_UNIT_TAG}> misses the \"id\" attribute`);\n        } else {\n          const id = idAttr.value;\n          if (this._msgIdToHtml.hasOwnProperty(id)) {\n            this._addError(element, `Duplicated translations for msg ${id}`);\n          } else {\n            visitAll(this, element.children, null);\n            if (typeof this._unitMlString === 'string') {\n              this._msgIdToHtml[id] = this._unitMlString;\n            } else {\n              this._addError(element, `Message ${id} misses a translation`);\n            }\n          }\n        }\n        break;\n      case _SOURCE_TAG:\n        // ignore source message\n        break;\n      case _TARGET_TAG:\n        const innerTextStart = element.startSourceSpan.end.offset;\n        const innerTextEnd = element.endSourceSpan.start.offset;\n        const content = element.startSourceSpan.start.file.content;\n        const innerText = content.slice(innerTextStart, innerTextEnd);\n        this._unitMlString = innerText;\n        break;\n      case _XLIFF_TAG:\n        const localeAttr = element.attrs.find(attr => attr.name === 'trgLang');\n        if (localeAttr) {\n          this._locale = localeAttr.value;\n        }\n        const versionAttr = element.attrs.find(attr => attr.name === 'version');\n        if (versionAttr) {\n          const version = versionAttr.value;\n          if (version !== '2.0') {\n            this._addError(element, `The XLIFF file version ${version} is not compatible with XLIFF 2.0 serializer`);\n          } else {\n            visitAll(this, element.children, null);\n          }\n        }\n        break;\n      default:\n        visitAll(this, element.children, null);\n    }\n  }\n  visitAttribute(attribute, context) {}\n  visitText(text, context) {}\n  visitComment(comment, context) {}\n  visitExpansion(expansion, context) {}\n  visitExpansionCase(expansionCase, context) {}\n  visitBlock(block, context) {}\n  visitBlockParameter(parameter, context) {}\n  visitLetDeclaration(decl, context) {}\n  _addError(node, message) {\n    this._errors.push(new I18nError(node.sourceSpan, message));\n  }\n}\n// Convert ml nodes (xliff syntax) to i18n nodes\nclass XmlToI18n$1 {\n  convert(message, url) {\n    const xmlIcu = new XmlParser().parse(message, url, {\n      tokenizeExpansionForms: true\n    });\n    this._errors = xmlIcu.errors;\n    const i18nNodes = this._errors.length > 0 || xmlIcu.rootNodes.length == 0 ? [] : [].concat(...visitAll(this, xmlIcu.rootNodes));\n    return {\n      i18nNodes,\n      errors: this._errors\n    };\n  }\n  visitText(text, context) {\n    return new Text$2(text.value, text.sourceSpan);\n  }\n  visitElement(el, context) {\n    switch (el.name) {\n      case _PLACEHOLDER_TAG$1:\n        const nameAttr = el.attrs.find(attr => attr.name === 'equiv');\n        if (nameAttr) {\n          return [new Placeholder('', nameAttr.value, el.sourceSpan)];\n        }\n        this._addError(el, `<${_PLACEHOLDER_TAG$1}> misses the \"equiv\" attribute`);\n        break;\n      case _PLACEHOLDER_SPANNING_TAG:\n        const startAttr = el.attrs.find(attr => attr.name === 'equivStart');\n        const endAttr = el.attrs.find(attr => attr.name === 'equivEnd');\n        if (!startAttr) {\n          this._addError(el, `<${_PLACEHOLDER_TAG$1}> misses the \"equivStart\" attribute`);\n        } else if (!endAttr) {\n          this._addError(el, `<${_PLACEHOLDER_TAG$1}> misses the \"equivEnd\" attribute`);\n        } else {\n          const startId = startAttr.value;\n          const endId = endAttr.value;\n          const nodes = [];\n          return nodes.concat(new Placeholder('', startId, el.sourceSpan), ...el.children.map(node => node.visit(this, null)), new Placeholder('', endId, el.sourceSpan));\n        }\n        break;\n      case _MARKER_TAG:\n        return [].concat(...visitAll(this, el.children));\n      default:\n        this._addError(el, `Unexpected tag`);\n    }\n    return null;\n  }\n  visitExpansion(icu, context) {\n    const caseMap = {};\n    visitAll(this, icu.cases).forEach(c => {\n      caseMap[c.value] = new Container(c.nodes, icu.sourceSpan);\n    });\n    return new Icu(icu.switchValue, icu.type, caseMap, icu.sourceSpan);\n  }\n  visitExpansionCase(icuCase, context) {\n    return {\n      value: icuCase.value,\n      nodes: [].concat(...visitAll(this, icuCase.expression))\n    };\n  }\n  visitComment(comment, context) {}\n  visitAttribute(attribute, context) {}\n  visitBlock(block, context) {}\n  visitBlockParameter(parameter, context) {}\n  visitLetDeclaration(decl, context) {}\n  _addError(node, message) {\n    this._errors.push(new I18nError(node.sourceSpan, message));\n  }\n}\nfunction getTypeForTag(tag) {\n  switch (tag.toLowerCase()) {\n    case 'br':\n    case 'b':\n    case 'i':\n    case 'u':\n      return 'fmt';\n    case 'img':\n      return 'image';\n    case 'a':\n      return 'link';\n    default:\n      return 'other';\n  }\n}\nconst _TRANSLATIONS_TAG = 'translationbundle';\nconst _TRANSLATION_TAG = 'translation';\nconst _PLACEHOLDER_TAG = 'ph';\nclass Xtb extends Serializer {\n  write(messages, locale) {\n    throw new Error('Unsupported');\n  }\n  load(content, url) {\n    // xtb to xml nodes\n    const xtbParser = new XtbParser();\n    const {\n      locale,\n      msgIdToHtml,\n      errors\n    } = xtbParser.parse(content, url);\n    // xml nodes to i18n nodes\n    const i18nNodesByMsgId = {};\n    const converter = new XmlToI18n();\n    // Because we should be able to load xtb files that rely on features not supported by angular,\n    // we need to delay the conversion of html to i18n nodes so that non angular messages are not\n    // converted\n    Object.keys(msgIdToHtml).forEach(msgId => {\n      const valueFn = function () {\n        const {\n          i18nNodes,\n          errors\n        } = converter.convert(msgIdToHtml[msgId], url);\n        if (errors.length) {\n          throw new Error(`xtb parse errors:\\n${errors.join('\\n')}`);\n        }\n        return i18nNodes;\n      };\n      createLazyProperty(i18nNodesByMsgId, msgId, valueFn);\n    });\n    if (errors.length) {\n      throw new Error(`xtb parse errors:\\n${errors.join('\\n')}`);\n    }\n    return {\n      locale: locale,\n      i18nNodesByMsgId\n    };\n  }\n  digest(message) {\n    return digest(message);\n  }\n  createNameMapper(message) {\n    return new SimplePlaceholderMapper(message, toPublicName);\n  }\n}\nfunction createLazyProperty(messages, id, valueFn) {\n  Object.defineProperty(messages, id, {\n    configurable: true,\n    enumerable: true,\n    get: function () {\n      const value = valueFn();\n      Object.defineProperty(messages, id, {\n        enumerable: true,\n        value\n      });\n      return value;\n    },\n    set: _ => {\n      throw new Error('Could not overwrite an XTB translation');\n    }\n  });\n}\n// Extract messages as xml nodes from the xtb file\nclass XtbParser {\n  constructor() {\n    this._locale = null;\n  }\n  parse(xtb, url) {\n    this._bundleDepth = 0;\n    this._msgIdToHtml = {};\n    // We can not parse the ICU messages at this point as some messages might not originate\n    // from Angular that could not be lex'd.\n    const xml = new XmlParser().parse(xtb, url);\n    this._errors = xml.errors;\n    visitAll(this, xml.rootNodes);\n    return {\n      msgIdToHtml: this._msgIdToHtml,\n      errors: this._errors,\n      locale: this._locale\n    };\n  }\n  visitElement(element, context) {\n    switch (element.name) {\n      case _TRANSLATIONS_TAG:\n        this._bundleDepth++;\n        if (this._bundleDepth > 1) {\n          this._addError(element, `<${_TRANSLATIONS_TAG}> elements can not be nested`);\n        }\n        const langAttr = element.attrs.find(attr => attr.name === 'lang');\n        if (langAttr) {\n          this._locale = langAttr.value;\n        }\n        visitAll(this, element.children, null);\n        this._bundleDepth--;\n        break;\n      case _TRANSLATION_TAG:\n        const idAttr = element.attrs.find(attr => attr.name === 'id');\n        if (!idAttr) {\n          this._addError(element, `<${_TRANSLATION_TAG}> misses the \"id\" attribute`);\n        } else {\n          const id = idAttr.value;\n          if (this._msgIdToHtml.hasOwnProperty(id)) {\n            this._addError(element, `Duplicated translations for msg ${id}`);\n          } else {\n            const innerTextStart = element.startSourceSpan.end.offset;\n            const innerTextEnd = element.endSourceSpan.start.offset;\n            const content = element.startSourceSpan.start.file.content;\n            const innerText = content.slice(innerTextStart, innerTextEnd);\n            this._msgIdToHtml[id] = innerText;\n          }\n        }\n        break;\n      default:\n        this._addError(element, 'Unexpected tag');\n    }\n  }\n  visitAttribute(attribute, context) {}\n  visitText(text, context) {}\n  visitComment(comment, context) {}\n  visitExpansion(expansion, context) {}\n  visitExpansionCase(expansionCase, context) {}\n  visitBlock(block, context) {}\n  visitBlockParameter(block, context) {}\n  visitLetDeclaration(decl, context) {}\n  _addError(node, message) {\n    this._errors.push(new I18nError(node.sourceSpan, message));\n  }\n}\n// Convert ml nodes (xtb syntax) to i18n nodes\nclass XmlToI18n {\n  convert(message, url) {\n    const xmlIcu = new XmlParser().parse(message, url, {\n      tokenizeExpansionForms: true\n    });\n    this._errors = xmlIcu.errors;\n    const i18nNodes = this._errors.length > 0 || xmlIcu.rootNodes.length == 0 ? [] : visitAll(this, xmlIcu.rootNodes);\n    return {\n      i18nNodes,\n      errors: this._errors\n    };\n  }\n  visitText(text, context) {\n    return new Text$2(text.value, text.sourceSpan);\n  }\n  visitExpansion(icu, context) {\n    const caseMap = {};\n    visitAll(this, icu.cases).forEach(c => {\n      caseMap[c.value] = new Container(c.nodes, icu.sourceSpan);\n    });\n    return new Icu(icu.switchValue, icu.type, caseMap, icu.sourceSpan);\n  }\n  visitExpansionCase(icuCase, context) {\n    return {\n      value: icuCase.value,\n      nodes: visitAll(this, icuCase.expression)\n    };\n  }\n  visitElement(el, context) {\n    if (el.name === _PLACEHOLDER_TAG) {\n      const nameAttr = el.attrs.find(attr => attr.name === 'name');\n      if (nameAttr) {\n        return new Placeholder('', nameAttr.value, el.sourceSpan);\n      }\n      this._addError(el, `<${_PLACEHOLDER_TAG}> misses the \"name\" attribute`);\n    } else {\n      this._addError(el, `Unexpected tag`);\n    }\n    return null;\n  }\n  visitComment(comment, context) {}\n  visitAttribute(attribute, context) {}\n  visitBlock(block, context) {}\n  visitBlockParameter(block, context) {}\n  visitLetDeclaration(decl, context) {}\n  _addError(node, message) {\n    this._errors.push(new I18nError(node.sourceSpan, message));\n  }\n}\n\n/**\n * A container for translated messages\n */\nclass TranslationBundle {\n  constructor(_i18nNodesByMsgId = {}, locale, digest, mapperFactory, missingTranslationStrategy = MissingTranslationStrategy.Warning, console) {\n    this._i18nNodesByMsgId = _i18nNodesByMsgId;\n    this.digest = digest;\n    this.mapperFactory = mapperFactory;\n    this._i18nToHtml = new I18nToHtmlVisitor(_i18nNodesByMsgId, locale, digest, mapperFactory, missingTranslationStrategy, console);\n  }\n  // Creates a `TranslationBundle` by parsing the given `content` with the `serializer`.\n  static load(content, url, serializer, missingTranslationStrategy, console) {\n    const {\n      locale,\n      i18nNodesByMsgId\n    } = serializer.load(content, url);\n    const digestFn = m => serializer.digest(m);\n    const mapperFactory = m => serializer.createNameMapper(m);\n    return new TranslationBundle(i18nNodesByMsgId, locale, digestFn, mapperFactory, missingTranslationStrategy, console);\n  }\n  // Returns the translation as HTML nodes from the given source message.\n  get(srcMsg) {\n    const html = this._i18nToHtml.convert(srcMsg);\n    if (html.errors.length) {\n      throw new Error(html.errors.join('\\n'));\n    }\n    return html.nodes;\n  }\n  has(srcMsg) {\n    return this.digest(srcMsg) in this._i18nNodesByMsgId;\n  }\n}\nclass I18nToHtmlVisitor {\n  constructor(_i18nNodesByMsgId = {}, _locale, _digest, _mapperFactory, _missingTranslationStrategy, _console) {\n    this._i18nNodesByMsgId = _i18nNodesByMsgId;\n    this._locale = _locale;\n    this._digest = _digest;\n    this._mapperFactory = _mapperFactory;\n    this._missingTranslationStrategy = _missingTranslationStrategy;\n    this._console = _console;\n    this._errors = [];\n    this._contextStack = [];\n  }\n  convert(srcMsg) {\n    this._contextStack.length = 0;\n    this._errors.length = 0;\n    // i18n to text\n    const text = this._convertToText(srcMsg);\n    // text to html\n    const url = srcMsg.nodes[0].sourceSpan.start.file.url;\n    const html = new HtmlParser().parse(text, url, {\n      tokenizeExpansionForms: true\n    });\n    return {\n      nodes: html.rootNodes,\n      errors: [...this._errors, ...html.errors]\n    };\n  }\n  visitText(text, context) {\n    // `convert()` uses an `HtmlParser` to return `html.Node`s\n    // we should then make sure that any special characters are escaped\n    return escapeXml(text.value);\n  }\n  visitContainer(container, context) {\n    return container.children.map(n => n.visit(this)).join('');\n  }\n  visitIcu(icu, context) {\n    const cases = Object.keys(icu.cases).map(k => `${k} {${icu.cases[k].visit(this)}}`);\n    // TODO(vicb): Once all format switch to using expression placeholders\n    // we should throw when the placeholder is not in the source message\n    const exp = this._srcMsg.placeholders.hasOwnProperty(icu.expression) ? this._srcMsg.placeholders[icu.expression].text : icu.expression;\n    return `{${exp}, ${icu.type}, ${cases.join(' ')}}`;\n  }\n  visitPlaceholder(ph, context) {\n    const phName = this._mapper(ph.name);\n    if (this._srcMsg.placeholders.hasOwnProperty(phName)) {\n      return this._srcMsg.placeholders[phName].text;\n    }\n    if (this._srcMsg.placeholderToMessage.hasOwnProperty(phName)) {\n      return this._convertToText(this._srcMsg.placeholderToMessage[phName]);\n    }\n    this._addError(ph, `Unknown placeholder \"${ph.name}\"`);\n    return '';\n  }\n  // Loaded message contains only placeholders (vs tag and icu placeholders).\n  // However when a translation can not be found, we need to serialize the source message\n  // which can contain tag placeholders\n  visitTagPlaceholder(ph, context) {\n    const tag = `${ph.tag}`;\n    const attrs = Object.keys(ph.attrs).map(name => `${name}=\"${ph.attrs[name]}\"`).join(' ');\n    if (ph.isVoid) {\n      return `<${tag} ${attrs}/>`;\n    }\n    const children = ph.children.map(c => c.visit(this)).join('');\n    return `<${tag} ${attrs}>${children}</${tag}>`;\n  }\n  // Loaded message contains only placeholders (vs tag and icu placeholders).\n  // However when a translation can not be found, we need to serialize the source message\n  // which can contain tag placeholders\n  visitIcuPlaceholder(ph, context) {\n    // An ICU placeholder references the source message to be serialized\n    return this._convertToText(this._srcMsg.placeholderToMessage[ph.name]);\n  }\n  visitBlockPlaceholder(ph, context) {\n    const params = ph.parameters.length === 0 ? '' : ` (${ph.parameters.join('; ')})`;\n    const children = ph.children.map(c => c.visit(this)).join('');\n    return `@${ph.name}${params} {${children}}`;\n  }\n  /**\n   * Convert a source message to a translated text string:\n   * - text nodes are replaced with their translation,\n   * - placeholders are replaced with their content,\n   * - ICU nodes are converted to ICU expressions.\n   */\n  _convertToText(srcMsg) {\n    const id = this._digest(srcMsg);\n    const mapper = this._mapperFactory ? this._mapperFactory(srcMsg) : null;\n    let nodes;\n    this._contextStack.push({\n      msg: this._srcMsg,\n      mapper: this._mapper\n    });\n    this._srcMsg = srcMsg;\n    if (this._i18nNodesByMsgId.hasOwnProperty(id)) {\n      // When there is a translation use its nodes as the source\n      // And create a mapper to convert serialized placeholder names to internal names\n      nodes = this._i18nNodesByMsgId[id];\n      this._mapper = name => mapper ? mapper.toInternalName(name) : name;\n    } else {\n      // When no translation has been found\n      // - report an error / a warning / nothing,\n      // - use the nodes from the original message\n      // - placeholders are already internal and need no mapper\n      if (this._missingTranslationStrategy === MissingTranslationStrategy.Error) {\n        const ctx = this._locale ? ` for locale \"${this._locale}\"` : '';\n        this._addError(srcMsg.nodes[0], `Missing translation for message \"${id}\"${ctx}`);\n      } else if (this._console && this._missingTranslationStrategy === MissingTranslationStrategy.Warning) {\n        const ctx = this._locale ? ` for locale \"${this._locale}\"` : '';\n        this._console.warn(`Missing translation for message \"${id}\"${ctx}`);\n      }\n      nodes = srcMsg.nodes;\n      this._mapper = name => name;\n    }\n    const text = nodes.map(node => node.visit(this)).join('');\n    const context = this._contextStack.pop();\n    this._srcMsg = context.msg;\n    this._mapper = context.mapper;\n    return text;\n  }\n  _addError(el, msg) {\n    this._errors.push(new I18nError(el.sourceSpan, msg));\n  }\n}\nclass I18NHtmlParser {\n  constructor(_htmlParser, translations, translationsFormat, missingTranslation = MissingTranslationStrategy.Warning, console) {\n    this._htmlParser = _htmlParser;\n    if (translations) {\n      const serializer = createSerializer(translationsFormat);\n      this._translationBundle = TranslationBundle.load(translations, 'i18n', serializer, missingTranslation, console);\n    } else {\n      this._translationBundle = new TranslationBundle({}, null, digest$1, undefined, missingTranslation, console);\n    }\n  }\n  parse(source, url, options = {}) {\n    const interpolationConfig = options.interpolationConfig || DEFAULT_INTERPOLATION_CONFIG;\n    const parseResult = this._htmlParser.parse(source, url, {\n      interpolationConfig,\n      ...options\n    });\n    if (parseResult.errors.length) {\n      return new ParseTreeResult(parseResult.rootNodes, parseResult.errors);\n    }\n    return mergeTranslations(parseResult.rootNodes, this._translationBundle, interpolationConfig, [], {});\n  }\n}\nfunction createSerializer(format) {\n  format = (format || 'xlf').toLowerCase();\n  switch (format) {\n    case 'xmb':\n      return new Xmb();\n    case 'xtb':\n      return new Xtb();\n    case 'xliff2':\n    case 'xlf2':\n      return new Xliff2();\n    case 'xliff':\n    case 'xlf':\n    default:\n      return new Xliff();\n  }\n}\n\n/**\n * A container for message extracted from the templates.\n */\nclass MessageBundle {\n  constructor(_htmlParser, _implicitTags, _implicitAttrs, _locale = null) {\n    this._htmlParser = _htmlParser;\n    this._implicitTags = _implicitTags;\n    this._implicitAttrs = _implicitAttrs;\n    this._locale = _locale;\n    this._messages = [];\n  }\n  updateFromTemplate(html, url, interpolationConfig) {\n    const htmlParserResult = this._htmlParser.parse(html, url, {\n      tokenizeExpansionForms: true,\n      interpolationConfig\n    });\n    if (htmlParserResult.errors.length) {\n      return htmlParserResult.errors;\n    }\n    const i18nParserResult = extractMessages(htmlParserResult.rootNodes, interpolationConfig, this._implicitTags, this._implicitAttrs);\n    if (i18nParserResult.errors.length) {\n      return i18nParserResult.errors;\n    }\n    this._messages.push(...i18nParserResult.messages);\n    return [];\n  }\n  // Return the message in the internal format\n  // The public (serialized) format might be different, see the `write` method.\n  getMessages() {\n    return this._messages;\n  }\n  write(serializer, filterSources) {\n    const messages = {};\n    const mapperVisitor = new MapPlaceholderNames();\n    // Deduplicate messages based on their ID\n    this._messages.forEach(message => {\n      const id = serializer.digest(message);\n      if (!messages.hasOwnProperty(id)) {\n        messages[id] = message;\n      } else {\n        messages[id].sources.push(...message.sources);\n      }\n    });\n    // Transform placeholder names using the serializer mapping\n    const msgList = Object.keys(messages).map(id => {\n      const mapper = serializer.createNameMapper(messages[id]);\n      const src = messages[id];\n      const nodes = mapper ? mapperVisitor.convert(src.nodes, mapper) : src.nodes;\n      let transformedMessage = new Message(nodes, {}, {}, src.meaning, src.description, id);\n      transformedMessage.sources = src.sources;\n      if (filterSources) {\n        transformedMessage.sources.forEach(source => source.filePath = filterSources(source.filePath));\n      }\n      return transformedMessage;\n    });\n    return serializer.write(msgList, this._locale);\n  }\n}\n// Transform an i18n AST by renaming the placeholder nodes with the given mapper\nclass MapPlaceholderNames extends CloneVisitor {\n  convert(nodes, mapper) {\n    return mapper ? nodes.map(n => n.visit(this, mapper)) : nodes;\n  }\n  visitTagPlaceholder(ph, mapper) {\n    const startName = mapper.toPublicName(ph.startName);\n    const closeName = ph.closeName ? mapper.toPublicName(ph.closeName) : ph.closeName;\n    const children = ph.children.map(n => n.visit(this, mapper));\n    return new TagPlaceholder(ph.tag, ph.attrs, startName, closeName, children, ph.isVoid, ph.sourceSpan, ph.startSourceSpan, ph.endSourceSpan);\n  }\n  visitBlockPlaceholder(ph, mapper) {\n    const startName = mapper.toPublicName(ph.startName);\n    const closeName = ph.closeName ? mapper.toPublicName(ph.closeName) : ph.closeName;\n    const children = ph.children.map(n => n.visit(this, mapper));\n    return new BlockPlaceholder(ph.name, ph.parameters, startName, closeName, children, ph.sourceSpan, ph.startSourceSpan, ph.endSourceSpan);\n  }\n  visitPlaceholder(ph, mapper) {\n    return new Placeholder(ph.value, mapper.toPublicName(ph.name), ph.sourceSpan);\n  }\n  visitIcuPlaceholder(ph, mapper) {\n    return new IcuPlaceholder(ph.value, mapper.toPublicName(ph.name), ph.sourceSpan);\n  }\n}\nvar FactoryTarget;\n(function (FactoryTarget) {\n  FactoryTarget[FactoryTarget[\"Directive\"] = 0] = \"Directive\";\n  FactoryTarget[FactoryTarget[\"Component\"] = 1] = \"Component\";\n  FactoryTarget[FactoryTarget[\"Injectable\"] = 2] = \"Injectable\";\n  FactoryTarget[FactoryTarget[\"Pipe\"] = 3] = \"Pipe\";\n  FactoryTarget[FactoryTarget[\"NgModule\"] = 4] = \"NgModule\";\n})(FactoryTarget || (FactoryTarget = {}));\nfunction compileClassMetadata(metadata) {\n  const fnCall = internalCompileClassMetadata(metadata);\n  return arrowFn([], [devOnlyGuardedExpression(fnCall).toStmt()]).callFn([]);\n}\n/** Compiles only the `setClassMetadata` call without any additional wrappers. */\nfunction internalCompileClassMetadata(metadata) {\n  return importExpr(Identifiers.setClassMetadata).callFn([metadata.type, metadata.decorators, metadata.ctorParameters ?? literal(null), metadata.propDecorators ?? literal(null)]);\n}\n/**\n * Wraps the `setClassMetadata` function with extra logic that dynamically\n * loads dependencies from `@defer` blocks.\n *\n * Generates a call like this:\n * ```\n * setClassMetadataAsync(type, () => [\n *   import('./cmp-a').then(m => m.CmpA);\n *   import('./cmp-b').then(m => m.CmpB);\n * ], (CmpA, CmpB) => {\n *   setClassMetadata(type, decorators, ctorParameters, propParameters);\n * });\n * ```\n *\n * Similar to the `setClassMetadata` call, it's wrapped into the `ngDevMode`\n * check to tree-shake away this code in production mode.\n */\nfunction compileComponentClassMetadata(metadata, dependencies) {\n  if (dependencies === null || dependencies.length === 0) {\n    // If there are no deferrable symbols - just generate a regular `setClassMetadata` call.\n    return compileClassMetadata(metadata);\n  }\n  return internalCompileSetClassMetadataAsync(metadata, dependencies.map(dep => new FnParam(dep.symbolName, DYNAMIC_TYPE)), compileComponentMetadataAsyncResolver(dependencies));\n}\n/**\n * Identical to `compileComponentClassMetadata`. Used for the cases where we're unable to\n * analyze the deferred block dependencies, but we have a reference to the compiled\n * dependency resolver function that we can use as is.\n * @param metadata Class metadata for the internal `setClassMetadata` call.\n * @param deferResolver Expression representing the deferred dependency loading function.\n * @param deferredDependencyNames Names of the dependencies that are being loaded asynchronously.\n */\nfunction compileOpaqueAsyncClassMetadata(metadata, deferResolver, deferredDependencyNames) {\n  return internalCompileSetClassMetadataAsync(metadata, deferredDependencyNames.map(name => new FnParam(name, DYNAMIC_TYPE)), deferResolver);\n}\n/**\n * Internal logic used to compile a `setClassMetadataAsync` call.\n * @param metadata Class metadata for the internal `setClassMetadata` call.\n * @param wrapperParams Parameters to be set on the callback that wraps `setClassMetata`.\n * @param dependencyResolverFn Function to resolve the deferred dependencies.\n */\nfunction internalCompileSetClassMetadataAsync(metadata, wrapperParams, dependencyResolverFn) {\n  // Omit the wrapper since it'll be added around `setClassMetadataAsync` instead.\n  const setClassMetadataCall = internalCompileClassMetadata(metadata);\n  const setClassMetaWrapper = arrowFn(wrapperParams, [setClassMetadataCall.toStmt()]);\n  const setClassMetaAsync = importExpr(Identifiers.setClassMetadataAsync).callFn([metadata.type, dependencyResolverFn, setClassMetaWrapper]);\n  return arrowFn([], [devOnlyGuardedExpression(setClassMetaAsync).toStmt()]).callFn([]);\n}\n/**\n * Compiles the function that loads the dependencies for the\n * entire component in `setClassMetadataAsync`.\n */\nfunction compileComponentMetadataAsyncResolver(dependencies) {\n  const dynamicImports = dependencies.map(({\n    symbolName,\n    importPath,\n    isDefaultImport\n  }) => {\n    // e.g. `(m) => m.CmpA`\n    const innerFn =\n    // Default imports are always accessed through the `default` property.\n    arrowFn([new FnParam('m', DYNAMIC_TYPE)], variable('m').prop(isDefaultImport ? 'default' : symbolName));\n    // e.g. `import('./cmp-a').then(...)`\n    return new DynamicImportExpr(importPath).prop('then').callFn([innerFn]);\n  });\n  // e.g. `() => [ ... ];`\n  return arrowFn([], literalArr(dynamicImports));\n}\n\n/**\n * Generate an ngDevMode guarded call to setClassDebugInfo with the debug info about the class\n * (e.g., the file name in which the class is defined)\n */\nfunction compileClassDebugInfo(debugInfo) {\n  const debugInfoObject = {\n    className: debugInfo.className\n  };\n  // Include file path and line number only if the file relative path is calculated successfully.\n  if (debugInfo.filePath) {\n    debugInfoObject.filePath = debugInfo.filePath;\n    debugInfoObject.lineNumber = debugInfo.lineNumber;\n  }\n  // Include forbidOrphanRendering only if it's set to true (to reduce generated code)\n  if (debugInfo.forbidOrphanRendering) {\n    debugInfoObject.forbidOrphanRendering = literal(true);\n  }\n  const fnCall = importExpr(Identifiers.setClassDebugInfo).callFn([debugInfo.type, mapLiteral(debugInfoObject)]);\n  const iife = arrowFn([], [devOnlyGuardedExpression(fnCall).toStmt()]);\n  return iife.callFn([]);\n}\n\n/**\n * Every time we make a breaking change to the declaration interface or partial-linker behavior, we\n * must update this constant to prevent old partial-linkers from incorrectly processing the\n * declaration.\n *\n * Do not include any prerelease in these versions as they are ignored.\n */\nconst MINIMUM_PARTIAL_LINKER_VERSION$5 = '12.0.0';\n/**\n * Minimum version at which deferred blocks are supported in the linker.\n */\nconst MINIMUM_PARTIAL_LINKER_DEFER_SUPPORT_VERSION = '18.0.0';\nfunction compileDeclareClassMetadata(metadata) {\n  const definitionMap = new DefinitionMap();\n  definitionMap.set('minVersion', literal(MINIMUM_PARTIAL_LINKER_VERSION$5));\n  definitionMap.set('version', literal('18.1.4'));\n  definitionMap.set('ngImport', importExpr(Identifiers.core));\n  definitionMap.set('type', metadata.type);\n  definitionMap.set('decorators', metadata.decorators);\n  definitionMap.set('ctorParameters', metadata.ctorParameters);\n  definitionMap.set('propDecorators', metadata.propDecorators);\n  return importExpr(Identifiers.declareClassMetadata).callFn([definitionMap.toLiteralMap()]);\n}\nfunction compileComponentDeclareClassMetadata(metadata, dependencies) {\n  if (dependencies === null || dependencies.length === 0) {\n    return compileDeclareClassMetadata(metadata);\n  }\n  const definitionMap = new DefinitionMap();\n  const callbackReturnDefinitionMap = new DefinitionMap();\n  callbackReturnDefinitionMap.set('decorators', metadata.decorators);\n  callbackReturnDefinitionMap.set('ctorParameters', metadata.ctorParameters ?? literal(null));\n  callbackReturnDefinitionMap.set('propDecorators', metadata.propDecorators ?? literal(null));\n  definitionMap.set('minVersion', literal(MINIMUM_PARTIAL_LINKER_DEFER_SUPPORT_VERSION));\n  definitionMap.set('version', literal('18.1.4'));\n  definitionMap.set('ngImport', importExpr(Identifiers.core));\n  definitionMap.set('type', metadata.type);\n  definitionMap.set('resolveDeferredDeps', compileComponentMetadataAsyncResolver(dependencies));\n  definitionMap.set('resolveMetadata', arrowFn(dependencies.map(dep => new FnParam(dep.symbolName, DYNAMIC_TYPE)), callbackReturnDefinitionMap.toLiteralMap()));\n  return importExpr(Identifiers.declareClassMetadataAsync).callFn([definitionMap.toLiteralMap()]);\n}\n\n/**\n * Creates an array literal expression from the given array, mapping all values to an expression\n * using the provided mapping function. If the array is empty or null, then null is returned.\n *\n * @param values The array to transfer into literal array expression.\n * @param mapper The logic to use for creating an expression for the array's values.\n * @returns An array literal expression representing `values`, or null if `values` is empty or\n * is itself null.\n */\nfunction toOptionalLiteralArray(values, mapper) {\n  if (values === null || values.length === 0) {\n    return null;\n  }\n  return literalArr(values.map(value => mapper(value)));\n}\n/**\n * Creates an object literal expression from the given object, mapping all values to an expression\n * using the provided mapping function. If the object has no keys, then null is returned.\n *\n * @param object The object to transfer into an object literal expression.\n * @param mapper The logic to use for creating an expression for the object's values.\n * @returns An object literal expression representing `object`, or null if `object` does not have\n * any keys.\n */\nfunction toOptionalLiteralMap(object, mapper) {\n  const entries = Object.keys(object).map(key => {\n    const value = object[key];\n    return {\n      key,\n      value: mapper(value),\n      quoted: true\n    };\n  });\n  if (entries.length > 0) {\n    return literalMap(entries);\n  } else {\n    return null;\n  }\n}\nfunction compileDependencies(deps) {\n  if (deps === 'invalid') {\n    // The `deps` can be set to the string \"invalid\"  by the `unwrapConstructorDependencies()`\n    // function, which tries to convert `ConstructorDeps` into `R3DependencyMetadata[]`.\n    return literal('invalid');\n  } else if (deps === null) {\n    return literal(null);\n  } else {\n    return literalArr(deps.map(compileDependency));\n  }\n}\nfunction compileDependency(dep) {\n  const depMeta = new DefinitionMap();\n  depMeta.set('token', dep.token);\n  if (dep.attributeNameType !== null) {\n    depMeta.set('attribute', literal(true));\n  }\n  if (dep.host) {\n    depMeta.set('host', literal(true));\n  }\n  if (dep.optional) {\n    depMeta.set('optional', literal(true));\n  }\n  if (dep.self) {\n    depMeta.set('self', literal(true));\n  }\n  if (dep.skipSelf) {\n    depMeta.set('skipSelf', literal(true));\n  }\n  return depMeta.toLiteralMap();\n}\n\n/**\n * Compile a directive declaration defined by the `R3DirectiveMetadata`.\n */\nfunction compileDeclareDirectiveFromMetadata(meta) {\n  const definitionMap = createDirectiveDefinitionMap(meta);\n  const expression = importExpr(Identifiers.declareDirective).callFn([definitionMap.toLiteralMap()]);\n  const type = createDirectiveType(meta);\n  return {\n    expression,\n    type,\n    statements: []\n  };\n}\n/**\n * Gathers the declaration fields for a directive into a `DefinitionMap`. This allows for reusing\n * this logic for components, as they extend the directive metadata.\n */\nfunction createDirectiveDefinitionMap(meta) {\n  const definitionMap = new DefinitionMap();\n  const minVersion = getMinimumVersionForPartialOutput(meta);\n  definitionMap.set('minVersion', literal(minVersion));\n  definitionMap.set('version', literal('18.1.4'));\n  // e.g. `type: MyDirective`\n  definitionMap.set('type', meta.type.value);\n  if (meta.isStandalone) {\n    definitionMap.set('isStandalone', literal(meta.isStandalone));\n  }\n  if (meta.isSignal) {\n    definitionMap.set('isSignal', literal(meta.isSignal));\n  }\n  // e.g. `selector: 'some-dir'`\n  if (meta.selector !== null) {\n    definitionMap.set('selector', literal(meta.selector));\n  }\n  definitionMap.set('inputs', needsNewInputPartialOutput(meta) ? createInputsPartialMetadata(meta.inputs) : legacyInputsPartialMetadata(meta.inputs));\n  definitionMap.set('outputs', conditionallyCreateDirectiveBindingLiteral(meta.outputs));\n  definitionMap.set('host', compileHostMetadata(meta.host));\n  definitionMap.set('providers', meta.providers);\n  if (meta.queries.length > 0) {\n    definitionMap.set('queries', literalArr(meta.queries.map(compileQuery)));\n  }\n  if (meta.viewQueries.length > 0) {\n    definitionMap.set('viewQueries', literalArr(meta.viewQueries.map(compileQuery)));\n  }\n  if (meta.exportAs !== null) {\n    definitionMap.set('exportAs', asLiteral(meta.exportAs));\n  }\n  if (meta.usesInheritance) {\n    definitionMap.set('usesInheritance', literal(true));\n  }\n  if (meta.lifecycle.usesOnChanges) {\n    definitionMap.set('usesOnChanges', literal(true));\n  }\n  if (meta.hostDirectives?.length) {\n    definitionMap.set('hostDirectives', createHostDirectives(meta.hostDirectives));\n  }\n  definitionMap.set('ngImport', importExpr(Identifiers.core));\n  return definitionMap;\n}\n/**\n * Determines the minimum linker version for the partial output\n * generated for this directive.\n *\n * Every time we make a breaking change to the declaration interface or partial-linker\n * behavior, we must update the minimum versions to prevent old partial-linkers from\n * incorrectly processing the declaration.\n *\n * NOTE: Do not include any prerelease in these versions as they are ignored.\n */\nfunction getMinimumVersionForPartialOutput(meta) {\n  // We are starting with the oldest minimum version that can work for common\n  // directive partial compilation output. As we discover usages of new features\n  // that require a newer partial output emit, we bump the `minVersion`. Our goal\n  // is to keep libraries as much compatible with older linker versions as possible.\n  let minVersion = '14.0.0';\n  // Note: in order to allow consuming Angular libraries that have been compiled with 16.1+ in\n  // Angular 16.0, we only force a minimum version of 16.1 if input transform feature as introduced\n  // in 16.1 is actually used.\n  const hasDecoratorTransformFunctions = Object.values(meta.inputs).some(input => input.transformFunction !== null);\n  if (hasDecoratorTransformFunctions) {\n    minVersion = '16.1.0';\n  }\n  // If there are input flags and we need the new emit, use the actual minimum version,\n  // where this was introduced. i.e. in 17.1.0\n  // TODO(legacy-partial-output-inputs): Remove in v18.\n  if (needsNewInputPartialOutput(meta)) {\n    minVersion = '17.1.0';\n  }\n  // If there are signal-based queries, partial output generates an extra field\n  // that should be parsed by linkers. Ensure a proper minimum linker version.\n  if (meta.queries.some(q => q.isSignal) || meta.viewQueries.some(q => q.isSignal)) {\n    minVersion = '17.2.0';\n  }\n  return minVersion;\n}\n/**\n * Gets whether the given directive needs the new input partial output structure\n * that can hold additional metadata like `isRequired`, `isSignal` etc.\n */\nfunction needsNewInputPartialOutput(meta) {\n  return Object.values(meta.inputs).some(input => input.isSignal);\n}\n/**\n * Compiles the metadata of a single query into its partial declaration form as declared\n * by `R3DeclareQueryMetadata`.\n */\nfunction compileQuery(query) {\n  const meta = new DefinitionMap();\n  meta.set('propertyName', literal(query.propertyName));\n  if (query.first) {\n    meta.set('first', literal(true));\n  }\n  meta.set('predicate', Array.isArray(query.predicate) ? asLiteral(query.predicate) : convertFromMaybeForwardRefExpression(query.predicate));\n  if (!query.emitDistinctChangesOnly) {\n    // `emitDistinctChangesOnly` is special because we expect it to be `true`.\n    // Therefore we explicitly emit the field, and explicitly place it only when it's `false`.\n    meta.set('emitDistinctChangesOnly', literal(false));\n  } else {\n    // The linker will assume that an absent `emitDistinctChangesOnly` flag is by default `true`.\n  }\n  if (query.descendants) {\n    meta.set('descendants', literal(true));\n  }\n  meta.set('read', query.read);\n  if (query.static) {\n    meta.set('static', literal(true));\n  }\n  if (query.isSignal) {\n    meta.set('isSignal', literal(true));\n  }\n  return meta.toLiteralMap();\n}\n/**\n * Compiles the host metadata into its partial declaration form as declared\n * in `R3DeclareDirectiveMetadata['host']`\n */\nfunction compileHostMetadata(meta) {\n  const hostMetadata = new DefinitionMap();\n  hostMetadata.set('attributes', toOptionalLiteralMap(meta.attributes, expression => expression));\n  hostMetadata.set('listeners', toOptionalLiteralMap(meta.listeners, literal));\n  hostMetadata.set('properties', toOptionalLiteralMap(meta.properties, literal));\n  if (meta.specialAttributes.styleAttr) {\n    hostMetadata.set('styleAttribute', literal(meta.specialAttributes.styleAttr));\n  }\n  if (meta.specialAttributes.classAttr) {\n    hostMetadata.set('classAttribute', literal(meta.specialAttributes.classAttr));\n  }\n  if (hostMetadata.values.length > 0) {\n    return hostMetadata.toLiteralMap();\n  } else {\n    return null;\n  }\n}\nfunction createHostDirectives(hostDirectives) {\n  const expressions = hostDirectives.map(current => {\n    const keys = [{\n      key: 'directive',\n      value: current.isForwardReference ? generateForwardRef(current.directive.type) : current.directive.type,\n      quoted: false\n    }];\n    const inputsLiteral = current.inputs ? createHostDirectivesMappingArray(current.inputs) : null;\n    const outputsLiteral = current.outputs ? createHostDirectivesMappingArray(current.outputs) : null;\n    if (inputsLiteral) {\n      keys.push({\n        key: 'inputs',\n        value: inputsLiteral,\n        quoted: false\n      });\n    }\n    if (outputsLiteral) {\n      keys.push({\n        key: 'outputs',\n        value: outputsLiteral,\n        quoted: false\n      });\n    }\n    return literalMap(keys);\n  });\n  // If there's a forward reference, we generate a `function() { return [{directive: HostDir}] }`,\n  // otherwise we can save some bytes by using a plain array, e.g. `[{directive: HostDir}]`.\n  return literalArr(expressions);\n}\n/**\n * Generates partial output metadata for inputs of a directive.\n *\n * The generated structure is expected to match `R3DeclareDirectiveFacade['inputs']`.\n */\nfunction createInputsPartialMetadata(inputs) {\n  const keys = Object.getOwnPropertyNames(inputs);\n  if (keys.length === 0) {\n    return null;\n  }\n  return literalMap(keys.map(declaredName => {\n    const value = inputs[declaredName];\n    return {\n      key: declaredName,\n      // put quotes around keys that contain potentially unsafe characters\n      quoted: UNSAFE_OBJECT_KEY_NAME_REGEXP.test(declaredName),\n      value: literalMap([{\n        key: 'classPropertyName',\n        quoted: false,\n        value: asLiteral(value.classPropertyName)\n      }, {\n        key: 'publicName',\n        quoted: false,\n        value: asLiteral(value.bindingPropertyName)\n      }, {\n        key: 'isSignal',\n        quoted: false,\n        value: asLiteral(value.isSignal)\n      }, {\n        key: 'isRequired',\n        quoted: false,\n        value: asLiteral(value.required)\n      }, {\n        key: 'transformFunction',\n        quoted: false,\n        value: value.transformFunction ?? NULL_EXPR\n      }])\n    };\n  }));\n}\n/**\n * Pre v18 legacy partial output for inputs.\n *\n * Previously, inputs did not capture metadata like `isSignal` in the partial compilation output.\n * To enable capturing such metadata, we restructured how input metadata is communicated in the\n * partial output. This would make libraries incompatible with older Angular FW versions where the\n * linker would not know how to handle this new \"format\". For this reason, if we know this metadata\n * does not need to be captured- we fall back to the old format. This is what this function\n * generates.\n *\n * See:\n * https://github.com/angular/angular/blob/d4b423690210872b5c32a322a6090beda30b05a3/packages/core/src/compiler/compiler_facade_interface.ts#L197-L199\n */\nfunction legacyInputsPartialMetadata(inputs) {\n  // TODO(legacy-partial-output-inputs): Remove function in v18.\n  const keys = Object.getOwnPropertyNames(inputs);\n  if (keys.length === 0) {\n    return null;\n  }\n  return literalMap(keys.map(declaredName => {\n    const value = inputs[declaredName];\n    const publicName = value.bindingPropertyName;\n    const differentDeclaringName = publicName !== declaredName;\n    let result;\n    if (differentDeclaringName || value.transformFunction !== null) {\n      const values = [asLiteral(publicName), asLiteral(declaredName)];\n      if (value.transformFunction !== null) {\n        values.push(value.transformFunction);\n      }\n      result = literalArr(values);\n    } else {\n      result = asLiteral(publicName);\n    }\n    return {\n      key: declaredName,\n      // put quotes around keys that contain potentially unsafe characters\n      quoted: UNSAFE_OBJECT_KEY_NAME_REGEXP.test(declaredName),\n      value: result\n    };\n  }));\n}\n\n/**\n * Compile a component declaration defined by the `R3ComponentMetadata`.\n */\nfunction compileDeclareComponentFromMetadata(meta, template, additionalTemplateInfo) {\n  const definitionMap = createComponentDefinitionMap(meta, template, additionalTemplateInfo);\n  const expression = importExpr(Identifiers.declareComponent).callFn([definitionMap.toLiteralMap()]);\n  const type = createComponentType(meta);\n  return {\n    expression,\n    type,\n    statements: []\n  };\n}\n/**\n * Gathers the declaration fields for a component into a `DefinitionMap`.\n */\nfunction createComponentDefinitionMap(meta, template, templateInfo) {\n  const definitionMap = createDirectiveDefinitionMap(meta);\n  const blockVisitor = new BlockPresenceVisitor();\n  visitAll$1(blockVisitor, template.nodes);\n  definitionMap.set('template', getTemplateExpression(template, templateInfo));\n  if (templateInfo.isInline) {\n    definitionMap.set('isInline', literal(true));\n  }\n  // Set the minVersion to 17.0.0 if the component is using at least one block in its template.\n  // We don't do this for templates without blocks, in order to preserve backwards compatibility.\n  if (blockVisitor.hasBlocks) {\n    definitionMap.set('minVersion', literal('17.0.0'));\n  }\n  definitionMap.set('styles', toOptionalLiteralArray(meta.styles, literal));\n  definitionMap.set('dependencies', compileUsedDependenciesMetadata(meta));\n  definitionMap.set('viewProviders', meta.viewProviders);\n  definitionMap.set('animations', meta.animations);\n  if (meta.changeDetection !== null) {\n    if (typeof meta.changeDetection === 'object') {\n      throw new Error('Impossible state! Change detection flag is not resolved!');\n    }\n    definitionMap.set('changeDetection', importExpr(Identifiers.ChangeDetectionStrategy).prop(ChangeDetectionStrategy[meta.changeDetection]));\n  }\n  if (meta.encapsulation !== ViewEncapsulation.Emulated) {\n    definitionMap.set('encapsulation', importExpr(Identifiers.ViewEncapsulation).prop(ViewEncapsulation[meta.encapsulation]));\n  }\n  if (meta.interpolation !== DEFAULT_INTERPOLATION_CONFIG) {\n    definitionMap.set('interpolation', literalArr([literal(meta.interpolation.start), literal(meta.interpolation.end)]));\n  }\n  if (template.preserveWhitespaces === true) {\n    definitionMap.set('preserveWhitespaces', literal(true));\n  }\n  if (meta.defer.mode === 0 /* DeferBlockDepsEmitMode.PerBlock */) {\n    const resolvers = [];\n    let hasResolvers = false;\n    for (const deps of meta.defer.blocks.values()) {\n      // Note: we need to push a `null` even if there are no dependencies, because matching of\n      // defer resolver functions to defer blocks happens by index and not adding an array\n      // entry for a block can throw off the blocks coming after it.\n      if (deps === null) {\n        resolvers.push(literal(null));\n      } else {\n        resolvers.push(deps);\n        hasResolvers = true;\n      }\n    }\n    // If *all* the resolvers are null, we can skip the field.\n    if (hasResolvers) {\n      definitionMap.set('deferBlockDependencies', literalArr(resolvers));\n    }\n  } else {\n    throw new Error('Unsupported defer function emit mode in partial compilation');\n  }\n  return definitionMap;\n}\nfunction getTemplateExpression(template, templateInfo) {\n  // If the template has been defined using a direct literal, we use that expression directly\n  // without any modifications. This is ensures proper source mapping from the partially\n  // compiled code to the source file declaring the template. Note that this does not capture\n  // template literals referenced indirectly through an identifier.\n  if (templateInfo.inlineTemplateLiteralExpression !== null) {\n    return templateInfo.inlineTemplateLiteralExpression;\n  }\n  // If the template is defined inline but not through a literal, the template has been resolved\n  // through static interpretation. We create a literal but cannot provide any source span. Note\n  // that we cannot use the expression defining the template because the linker expects the template\n  // to be defined as a literal in the declaration.\n  if (templateInfo.isInline) {\n    return literal(templateInfo.content, null, null);\n  }\n  // The template is external so we must synthesize an expression node with\n  // the appropriate source-span.\n  const contents = templateInfo.content;\n  const file = new ParseSourceFile(contents, templateInfo.sourceUrl);\n  const start = new ParseLocation(file, 0, 0, 0);\n  const end = computeEndLocation(file, contents);\n  const span = new ParseSourceSpan(start, end);\n  return literal(contents, null, span);\n}\nfunction computeEndLocation(file, contents) {\n  const length = contents.length;\n  let lineStart = 0;\n  let lastLineStart = 0;\n  let line = 0;\n  do {\n    lineStart = contents.indexOf('\\n', lastLineStart);\n    if (lineStart !== -1) {\n      lastLineStart = lineStart + 1;\n      line++;\n    }\n  } while (lineStart !== -1);\n  return new ParseLocation(file, length, line, length - lastLineStart);\n}\nfunction compileUsedDependenciesMetadata(meta) {\n  const wrapType = meta.declarationListEmitMode !== 0 /* DeclarationListEmitMode.Direct */ ? generateForwardRef : expr => expr;\n  if (meta.declarationListEmitMode === 3 /* DeclarationListEmitMode.RuntimeResolved */) {\n    throw new Error(`Unsupported emit mode`);\n  }\n  return toOptionalLiteralArray(meta.declarations, decl => {\n    switch (decl.kind) {\n      case R3TemplateDependencyKind.Directive:\n        const dirMeta = new DefinitionMap();\n        dirMeta.set('kind', literal(decl.isComponent ? 'component' : 'directive'));\n        dirMeta.set('type', wrapType(decl.type));\n        dirMeta.set('selector', literal(decl.selector));\n        dirMeta.set('inputs', toOptionalLiteralArray(decl.inputs, literal));\n        dirMeta.set('outputs', toOptionalLiteralArray(decl.outputs, literal));\n        dirMeta.set('exportAs', toOptionalLiteralArray(decl.exportAs, literal));\n        return dirMeta.toLiteralMap();\n      case R3TemplateDependencyKind.Pipe:\n        const pipeMeta = new DefinitionMap();\n        pipeMeta.set('kind', literal('pipe'));\n        pipeMeta.set('type', wrapType(decl.type));\n        pipeMeta.set('name', literal(decl.name));\n        return pipeMeta.toLiteralMap();\n      case R3TemplateDependencyKind.NgModule:\n        const ngModuleMeta = new DefinitionMap();\n        ngModuleMeta.set('kind', literal('ngmodule'));\n        ngModuleMeta.set('type', wrapType(decl.type));\n        return ngModuleMeta.toLiteralMap();\n    }\n  });\n}\nclass BlockPresenceVisitor extends RecursiveVisitor$1 {\n  constructor() {\n    super(...arguments);\n    this.hasBlocks = false;\n  }\n  visitDeferredBlock() {\n    this.hasBlocks = true;\n  }\n  visitDeferredBlockPlaceholder() {\n    this.hasBlocks = true;\n  }\n  visitDeferredBlockLoading() {\n    this.hasBlocks = true;\n  }\n  visitDeferredBlockError() {\n    this.hasBlocks = true;\n  }\n  visitIfBlock() {\n    this.hasBlocks = true;\n  }\n  visitIfBlockBranch() {\n    this.hasBlocks = true;\n  }\n  visitForLoopBlock() {\n    this.hasBlocks = true;\n  }\n  visitForLoopBlockEmpty() {\n    this.hasBlocks = true;\n  }\n  visitSwitchBlock() {\n    this.hasBlocks = true;\n  }\n  visitSwitchBlockCase() {\n    this.hasBlocks = true;\n  }\n}\n\n/**\n * Every time we make a breaking change to the declaration interface or partial-linker behavior, we\n * must update this constant to prevent old partial-linkers from incorrectly processing the\n * declaration.\n *\n * Do not include any prerelease in these versions as they are ignored.\n */\nconst MINIMUM_PARTIAL_LINKER_VERSION$4 = '12.0.0';\nfunction compileDeclareFactoryFunction(meta) {\n  const definitionMap = new DefinitionMap();\n  definitionMap.set('minVersion', literal(MINIMUM_PARTIAL_LINKER_VERSION$4));\n  definitionMap.set('version', literal('18.1.4'));\n  definitionMap.set('ngImport', importExpr(Identifiers.core));\n  definitionMap.set('type', meta.type.value);\n  definitionMap.set('deps', compileDependencies(meta.deps));\n  definitionMap.set('target', importExpr(Identifiers.FactoryTarget).prop(FactoryTarget$1[meta.target]));\n  return {\n    expression: importExpr(Identifiers.declareFactory).callFn([definitionMap.toLiteralMap()]),\n    statements: [],\n    type: createFactoryType(meta)\n  };\n}\n\n/**\n * Every time we make a breaking change to the declaration interface or partial-linker behavior, we\n * must update this constant to prevent old partial-linkers from incorrectly processing the\n * declaration.\n *\n * Do not include any prerelease in these versions as they are ignored.\n */\nconst MINIMUM_PARTIAL_LINKER_VERSION$3 = '12.0.0';\n/**\n * Compile a Injectable declaration defined by the `R3InjectableMetadata`.\n */\nfunction compileDeclareInjectableFromMetadata(meta) {\n  const definitionMap = createInjectableDefinitionMap(meta);\n  const expression = importExpr(Identifiers.declareInjectable).callFn([definitionMap.toLiteralMap()]);\n  const type = createInjectableType(meta);\n  return {\n    expression,\n    type,\n    statements: []\n  };\n}\n/**\n * Gathers the declaration fields for a Injectable into a `DefinitionMap`.\n */\nfunction createInjectableDefinitionMap(meta) {\n  const definitionMap = new DefinitionMap();\n  definitionMap.set('minVersion', literal(MINIMUM_PARTIAL_LINKER_VERSION$3));\n  definitionMap.set('version', literal('18.1.4'));\n  definitionMap.set('ngImport', importExpr(Identifiers.core));\n  definitionMap.set('type', meta.type.value);\n  // Only generate providedIn property if it has a non-null value\n  if (meta.providedIn !== undefined) {\n    const providedIn = convertFromMaybeForwardRefExpression(meta.providedIn);\n    if (providedIn.value !== null) {\n      definitionMap.set('providedIn', providedIn);\n    }\n  }\n  if (meta.useClass !== undefined) {\n    definitionMap.set('useClass', convertFromMaybeForwardRefExpression(meta.useClass));\n  }\n  if (meta.useExisting !== undefined) {\n    definitionMap.set('useExisting', convertFromMaybeForwardRefExpression(meta.useExisting));\n  }\n  if (meta.useValue !== undefined) {\n    definitionMap.set('useValue', convertFromMaybeForwardRefExpression(meta.useValue));\n  }\n  // Factories do not contain `ForwardRef`s since any types are already wrapped in a function call\n  // so the types will not be eagerly evaluated. Therefore we do not need to process this expression\n  // with `convertFromProviderExpression()`.\n  if (meta.useFactory !== undefined) {\n    definitionMap.set('useFactory', meta.useFactory);\n  }\n  if (meta.deps !== undefined) {\n    definitionMap.set('deps', literalArr(meta.deps.map(compileDependency)));\n  }\n  return definitionMap;\n}\n\n/**\n * Every time we make a breaking change to the declaration interface or partial-linker behavior, we\n * must update this constant to prevent old partial-linkers from incorrectly processing the\n * declaration.\n *\n * Do not include any prerelease in these versions as they are ignored.\n */\nconst MINIMUM_PARTIAL_LINKER_VERSION$2 = '12.0.0';\nfunction compileDeclareInjectorFromMetadata(meta) {\n  const definitionMap = createInjectorDefinitionMap(meta);\n  const expression = importExpr(Identifiers.declareInjector).callFn([definitionMap.toLiteralMap()]);\n  const type = createInjectorType(meta);\n  return {\n    expression,\n    type,\n    statements: []\n  };\n}\n/**\n * Gathers the declaration fields for an Injector into a `DefinitionMap`.\n */\nfunction createInjectorDefinitionMap(meta) {\n  const definitionMap = new DefinitionMap();\n  definitionMap.set('minVersion', literal(MINIMUM_PARTIAL_LINKER_VERSION$2));\n  definitionMap.set('version', literal('18.1.4'));\n  definitionMap.set('ngImport', importExpr(Identifiers.core));\n  definitionMap.set('type', meta.type.value);\n  definitionMap.set('providers', meta.providers);\n  if (meta.imports.length > 0) {\n    definitionMap.set('imports', literalArr(meta.imports));\n  }\n  return definitionMap;\n}\n\n/**\n * Every time we make a breaking change to the declaration interface or partial-linker behavior, we\n * must update this constant to prevent old partial-linkers from incorrectly processing the\n * declaration.\n *\n * Do not include any prerelease in these versions as they are ignored.\n */\nconst MINIMUM_PARTIAL_LINKER_VERSION$1 = '14.0.0';\nfunction compileDeclareNgModuleFromMetadata(meta) {\n  const definitionMap = createNgModuleDefinitionMap(meta);\n  const expression = importExpr(Identifiers.declareNgModule).callFn([definitionMap.toLiteralMap()]);\n  const type = createNgModuleType(meta);\n  return {\n    expression,\n    type,\n    statements: []\n  };\n}\n/**\n * Gathers the declaration fields for an NgModule into a `DefinitionMap`.\n */\nfunction createNgModuleDefinitionMap(meta) {\n  const definitionMap = new DefinitionMap();\n  if (meta.kind === R3NgModuleMetadataKind.Local) {\n    throw new Error('Invalid path! Local compilation mode should not get into the partial compilation path');\n  }\n  definitionMap.set('minVersion', literal(MINIMUM_PARTIAL_LINKER_VERSION$1));\n  definitionMap.set('version', literal('18.1.4'));\n  definitionMap.set('ngImport', importExpr(Identifiers.core));\n  definitionMap.set('type', meta.type.value);\n  // We only generate the keys in the metadata if the arrays contain values.\n  // We must wrap the arrays inside a function if any of the values are a forward reference to a\n  // not-yet-declared class. This is to support JIT execution of the `ɵɵngDeclareNgModule()` call.\n  // In the linker these wrappers are stripped and then reapplied for the `ɵɵdefineNgModule()` call.\n  if (meta.bootstrap.length > 0) {\n    definitionMap.set('bootstrap', refsToArray(meta.bootstrap, meta.containsForwardDecls));\n  }\n  if (meta.declarations.length > 0) {\n    definitionMap.set('declarations', refsToArray(meta.declarations, meta.containsForwardDecls));\n  }\n  if (meta.imports.length > 0) {\n    definitionMap.set('imports', refsToArray(meta.imports, meta.containsForwardDecls));\n  }\n  if (meta.exports.length > 0) {\n    definitionMap.set('exports', refsToArray(meta.exports, meta.containsForwardDecls));\n  }\n  if (meta.schemas !== null && meta.schemas.length > 0) {\n    definitionMap.set('schemas', literalArr(meta.schemas.map(ref => ref.value)));\n  }\n  if (meta.id !== null) {\n    definitionMap.set('id', meta.id);\n  }\n  return definitionMap;\n}\n\n/**\n * Every time we make a breaking change to the declaration interface or partial-linker behavior, we\n * must update this constant to prevent old partial-linkers from incorrectly processing the\n * declaration.\n *\n * Do not include any prerelease in these versions as they are ignored.\n */\nconst MINIMUM_PARTIAL_LINKER_VERSION = '14.0.0';\n/**\n * Compile a Pipe declaration defined by the `R3PipeMetadata`.\n */\nfunction compileDeclarePipeFromMetadata(meta) {\n  const definitionMap = createPipeDefinitionMap(meta);\n  const expression = importExpr(Identifiers.declarePipe).callFn([definitionMap.toLiteralMap()]);\n  const type = createPipeType(meta);\n  return {\n    expression,\n    type,\n    statements: []\n  };\n}\n/**\n * Gathers the declaration fields for a Pipe into a `DefinitionMap`.\n */\nfunction createPipeDefinitionMap(meta) {\n  const definitionMap = new DefinitionMap();\n  definitionMap.set('minVersion', literal(MINIMUM_PARTIAL_LINKER_VERSION));\n  definitionMap.set('version', literal('18.1.4'));\n  definitionMap.set('ngImport', importExpr(Identifiers.core));\n  // e.g. `type: MyPipe`\n  definitionMap.set('type', meta.type.value);\n  if (meta.isStandalone) {\n    definitionMap.set('isStandalone', literal(meta.isStandalone));\n  }\n  // e.g. `name: \"myPipe\"`\n  definitionMap.set('name', literal(meta.pipeName));\n  if (meta.pure === false) {\n    // e.g. `pure: false`\n    definitionMap.set('pure', literal(meta.pure));\n  }\n  return definitionMap;\n}\n\n//////////////////////////////////////\n// This file only reexports content of the `src` folder. Keep it that way.\n// This function call has a global side effects and publishes the compiler into global namespace for\n// the late binding of the Compiler to the @angular/core for jit compilation.\npublishFacade(_global);\n\n/**\n * @module\n * @description\n * Entry point for all public APIs of this package.\n */\n// This file only reexports content of the `src` folder. Keep it that way.\n\n// This file is not used to build this module. It is only used during editing\n\n// This file is not used to build this module. It is only used during editing\n\nexport { AST, ASTWithName, ASTWithSource, AbsoluteSourceSpan, ArrayType, ArrowFunctionExpr, AstMemoryEfficientTransformer, AstTransformer, Attribute, Binary, BinaryOperator, BinaryOperatorExpr, BindingPipe, BindingType, Block, BlockParameter, BoundElementProperty, BuiltinType, BuiltinTypeName, CUSTOM_ELEMENTS_SCHEMA, Call, Chain, ChangeDetectionStrategy, CommaExpr, Comment, CompilerConfig, Conditional, ConditionalExpr, ConstantPool, CssSelector, DEFAULT_INTERPOLATION_CONFIG, DYNAMIC_TYPE, DeclareFunctionStmt, DeclareVarStmt, DomElementSchemaRegistry, DynamicImportExpr, EOF, Element, ElementSchemaRegistry, EmitterVisitorContext, EmptyExpr$1 as EmptyExpr, Expansion, ExpansionCase, Expression, ExpressionBinding, ExpressionStatement, ExpressionType, ExternalExpr, ExternalReference, FactoryTarget$1 as FactoryTarget, FunctionExpr, HtmlParser, HtmlTagDefinition, I18NHtmlParser, IfStmt, ImplicitReceiver, InstantiateExpr, Interpolation$1 as Interpolation, InterpolationConfig, InvokeFunctionExpr, JSDocComment, JitEvaluator, KeyedRead, KeyedWrite, LeadingComment, LetDeclaration, Lexer, LiteralArray, LiteralArrayExpr, LiteralExpr, LiteralMap, LiteralMapExpr, LiteralPrimitive, LocalizedString, MapType, MessageBundle, NONE_TYPE, NO_ERRORS_SCHEMA, NodeWithI18n, NonNullAssert, NotExpr, ParseError, ParseErrorLevel, ParseLocation, ParseSourceFile, ParseSourceSpan, ParseSpan, ParseTreeResult, ParsedEvent, ParsedEventType, ParsedProperty, ParsedPropertyType, ParsedVariable, Parser$1 as Parser, ParserError, PrefixNot, PropertyRead, PropertyWrite, R3BoundTarget, Identifiers as R3Identifiers, R3NgModuleMetadataKind, R3SelectorScopeMode, R3TargetBinder, R3TemplateDependencyKind, ReadKeyExpr, ReadPropExpr, ReadVarExpr, RecursiveAstVisitor, RecursiveVisitor, ResourceLoader, ReturnStatement, STRING_TYPE, SafeCall, SafeKeyedRead, SafePropertyRead, SelectorContext, SelectorListContext, SelectorMatcher, Serializer, SplitInterpolation, Statement, StmtModifier, TagContentType, TaggedTemplateExpr, TemplateBindingParseResult, TemplateLiteral, TemplateLiteralElement, Text, ThisReceiver, BlockNode as TmplAstBlockNode, BoundAttribute as TmplAstBoundAttribute, BoundDeferredTrigger as TmplAstBoundDeferredTrigger, BoundEvent as TmplAstBoundEvent, BoundText as TmplAstBoundText, Content as TmplAstContent, DeferredBlock as TmplAstDeferredBlock, DeferredBlockError as TmplAstDeferredBlockError, DeferredBlockLoading as TmplAstDeferredBlockLoading, DeferredBlockPlaceholder as TmplAstDeferredBlockPlaceholder, DeferredTrigger as TmplAstDeferredTrigger, Element$1 as TmplAstElement, ForLoopBlock as TmplAstForLoopBlock, ForLoopBlockEmpty as TmplAstForLoopBlockEmpty, HoverDeferredTrigger as TmplAstHoverDeferredTrigger, Icu$1 as TmplAstIcu, IdleDeferredTrigger as TmplAstIdleDeferredTrigger, IfBlock as TmplAstIfBlock, IfBlockBranch as TmplAstIfBlockBranch, ImmediateDeferredTrigger as TmplAstImmediateDeferredTrigger, InteractionDeferredTrigger as TmplAstInteractionDeferredTrigger, LetDeclaration$1 as TmplAstLetDeclaration, RecursiveVisitor$1 as TmplAstRecursiveVisitor, Reference as TmplAstReference, SwitchBlock as TmplAstSwitchBlock, SwitchBlockCase as TmplAstSwitchBlockCase, Template as TmplAstTemplate, Text$3 as TmplAstText, TextAttribute as TmplAstTextAttribute, TimerDeferredTrigger as TmplAstTimerDeferredTrigger, UnknownBlock as TmplAstUnknownBlock, Variable as TmplAstVariable, ViewportDeferredTrigger as TmplAstViewportDeferredTrigger, Token, TokenType, TransplantedType, TreeError, Type, TypeModifier, TypeofExpr, Unary, UnaryOperator, UnaryOperatorExpr, VERSION, VariableBinding, Version, ViewEncapsulation, WrappedNodeExpr, WriteKeyExpr, WritePropExpr, WriteVarExpr, Xliff, Xliff2, Xmb, XmlParser, Xtb, compileClassDebugInfo, compileClassMetadata, compileComponentClassMetadata, compileComponentDeclareClassMetadata, compileComponentFromMetadata, compileDeclareClassMetadata, compileDeclareComponentFromMetadata, compileDeclareDirectiveFromMetadata, compileDeclareFactoryFunction, compileDeclareInjectableFromMetadata, compileDeclareInjectorFromMetadata, compileDeclareNgModuleFromMetadata, compileDeclarePipeFromMetadata, compileDeferResolverFunction, compileDirectiveFromMetadata, compileFactoryFunction, compileInjectable, compileInjector, compileNgModule, compileOpaqueAsyncClassMetadata, compilePipeFromMetadata, computeMsgId, core, createCssSelectorFromNode, createInjectableType, createMayBeForwardRefExpression, devOnlyGuardedExpression, emitDistinctChangesOnlyDefaultValue, encapsulateStyle, getHtmlTagDefinition, getNsPrefix, getSafePropertyAccessString, identifierName, isIdentifier, isNgContainer, isNgContent, isNgTemplate, jsDocComment, leadingComment, literal, literalMap, makeBindingParser, mergeNsAndName, output_ast as outputAst, parseHostBindings, parseTemplate, preserveWhitespacesDefault, publishFacade, r3JitTypeSourceSpan, sanitizeIdentifier, splitNsName, visitAll$1 as tmplAstVisitAll, verifyHostBindings, visitAll };\n","/**\n * @license Angular v18.1.4\n * (c) 2010-2024 Google LLC. https://angular.io/\n * License: MIT\n */\n\nimport * as i0 from '@angular/core';\nimport { Compiler, ViewEncapsulation, Injector, createPlatformFactory, platformCore, COMPILER_OPTIONS, CompilerFactory, Injectable, PLATFORM_ID, Version } from '@angular/core';\nimport { CompilerConfig, ResourceLoader } from '@angular/compiler';\nimport { ɵPLATFORM_BROWSER_ID } from '@angular/common';\nimport { ɵINTERNAL_BROWSER_PLATFORM_PROVIDERS } from '@angular/platform-browser';\nconst COMPILER_PROVIDERS = [{\n  provide: Compiler,\n  useFactory: () => new Compiler()\n}];\n/**\n * @publicApi\n *\n * @deprecated\n * Ivy JIT mode doesn't require accessing this symbol.\n */\nclass JitCompilerFactory {\n  /** @internal */\n  constructor(defaultOptions) {\n    const compilerOptions = {\n      defaultEncapsulation: ViewEncapsulation.Emulated\n    };\n    this._defaultOptions = [compilerOptions, ...defaultOptions];\n  }\n  createCompiler(options = []) {\n    const opts = _mergeOptions(this._defaultOptions.concat(options));\n    const injector = Injector.create({\n      providers: [COMPILER_PROVIDERS, {\n        provide: CompilerConfig,\n        useFactory: () => {\n          return new CompilerConfig({\n            defaultEncapsulation: opts.defaultEncapsulation,\n            preserveWhitespaces: opts.preserveWhitespaces\n          });\n        },\n        deps: []\n      }, opts.providers]\n    });\n    return injector.get(Compiler);\n  }\n}\nfunction _mergeOptions(optionsArr) {\n  return {\n    defaultEncapsulation: _lastDefined(optionsArr.map(options => options.defaultEncapsulation)),\n    providers: _mergeArrays(optionsArr.map(options => options.providers)),\n    preserveWhitespaces: _lastDefined(optionsArr.map(options => options.preserveWhitespaces))\n  };\n}\nfunction _lastDefined(args) {\n  for (let i = args.length - 1; i >= 0; i--) {\n    if (args[i] !== undefined) {\n      return args[i];\n    }\n  }\n  return undefined;\n}\nfunction _mergeArrays(parts) {\n  const result = [];\n  parts.forEach(part => part && result.push(...part));\n  return result;\n}\n\n/**\n * A platform that included corePlatform and the compiler.\n *\n * @publicApi\n */\nconst platformCoreDynamic = createPlatformFactory(platformCore, 'coreDynamic', [{\n  provide: COMPILER_OPTIONS,\n  useValue: {},\n  multi: true\n}, {\n  provide: CompilerFactory,\n  useClass: JitCompilerFactory,\n  deps: [COMPILER_OPTIONS]\n}]);\nclass ResourceLoaderImpl extends ResourceLoader {\n  get(url) {\n    let resolve;\n    let reject;\n    const promise = new Promise((res, rej) => {\n      resolve = res;\n      reject = rej;\n    });\n    const xhr = new XMLHttpRequest();\n    xhr.open('GET', url, true);\n    xhr.responseType = 'text';\n    xhr.onload = function () {\n      const response = xhr.response;\n      let status = xhr.status;\n      // fix status code when it is 0 (0 status is undocumented).\n      // Occurs when accessing file resources or on Android 4.1 stock browser\n      // while retrieving files from application cache.\n      if (status === 0) {\n        status = response ? 200 : 0;\n      }\n      if (200 <= status && status <= 300) {\n        resolve(response);\n      } else {\n        reject(`Failed to load ${url}`);\n      }\n    };\n    xhr.onerror = function () {\n      reject(`Failed to load ${url}`);\n    };\n    xhr.send();\n    return promise;\n  }\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: ResourceLoaderImpl,\n      deps: null,\n      target: i0.ɵɵFactoryTarget.Injectable\n    });\n  }\n  static {\n    this.ɵprov = i0.ɵɵngDeclareInjectable({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: ResourceLoaderImpl\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.1.4\",\n  ngImport: i0,\n  type: ResourceLoaderImpl,\n  decorators: [{\n    type: Injectable\n  }]\n});\n\n/**\n * @publicApi\n */\nconst INTERNAL_BROWSER_DYNAMIC_PLATFORM_PROVIDERS = [ɵINTERNAL_BROWSER_PLATFORM_PROVIDERS, {\n  provide: COMPILER_OPTIONS,\n  useValue: {\n    providers: [{\n      provide: ResourceLoader,\n      useClass: ResourceLoaderImpl,\n      deps: []\n    }]\n  },\n  multi: true\n}, {\n  provide: PLATFORM_ID,\n  useValue: ɵPLATFORM_BROWSER_ID\n}];\n\n/**\n * @module\n * @description\n * Entry point for all public APIs of the platform-browser-dynamic package.\n */\n/**\n * @publicApi\n */\nconst VERSION = new Version('18.1.4');\n\n/**\n * @publicApi\n */\nconst platformBrowserDynamic = createPlatformFactory(platformCoreDynamic, 'browserDynamic', INTERNAL_BROWSER_DYNAMIC_PLATFORM_PROVIDERS);\n\n/**\n * @module\n * @description\n * Entry point for all public APIs of this package.\n */\n// This file only reexports content of the `src` folder. Keep it that way.\n\n// This file is not used to build this module. It is only used during editing\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { JitCompilerFactory, VERSION, platformBrowserDynamic, INTERNAL_BROWSER_DYNAMIC_PLATFORM_PROVIDERS as ɵINTERNAL_BROWSER_DYNAMIC_PLATFORM_PROVIDERS, platformCoreDynamic as ɵplatformCoreDynamic };\n","/**\n * @license Angular v18.1.4\n * (c) 2010-2024 Google LLC. https://angular.io/\n * License: MIT\n */\n\nimport * as i0 from '@angular/core';\nimport { Directive, InjectionToken, forwardRef, Optional, Inject, ɵisPromise, ɵisSubscribable, ɵRuntimeError, Self, computed, signal, untracked, EventEmitter, Input, Host, SkipSelf, booleanAttribute, ChangeDetectorRef, Output, Injectable, inject, NgModule, Version } from '@angular/core';\nimport { ɵgetDOM } from '@angular/common';\nimport { from, forkJoin, Subject } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\n/**\n * Base class for all ControlValueAccessor classes defined in Forms package.\n * Contains common logic and utility functions.\n *\n * Note: this is an *internal-only* class and should not be extended or used directly in\n * applications code.\n */\nclass BaseControlValueAccessor {\n  constructor(_renderer, _elementRef) {\n    this._renderer = _renderer;\n    this._elementRef = _elementRef;\n    /**\n     * The registered callback function called when a change or input event occurs on the input\n     * element.\n     * @nodoc\n     */\n    this.onChange = _ => {};\n    /**\n     * The registered callback function called when a blur event occurs on the input element.\n     * @nodoc\n     */\n    this.onTouched = () => {};\n  }\n  /**\n   * Helper method that sets a property on a target element using the current Renderer\n   * implementation.\n   * @nodoc\n   */\n  setProperty(key, value) {\n    this._renderer.setProperty(this._elementRef.nativeElement, key, value);\n  }\n  /**\n   * Registers a function called when the control is touched.\n   * @nodoc\n   */\n  registerOnTouched(fn) {\n    this.onTouched = fn;\n  }\n  /**\n   * Registers a function called when the control value changes.\n   * @nodoc\n   */\n  registerOnChange(fn) {\n    this.onChange = fn;\n  }\n  /**\n   * Sets the \"disabled\" property on the range input element.\n   * @nodoc\n   */\n  setDisabledState(isDisabled) {\n    this.setProperty('disabled', isDisabled);\n  }\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: BaseControlValueAccessor,\n      deps: [{\n        token: i0.Renderer2\n      }, {\n        token: i0.ElementRef\n      }],\n      target: i0.ɵɵFactoryTarget.Directive\n    });\n  }\n  static {\n    this.ɵdir = i0.ɵɵngDeclareDirective({\n      minVersion: \"14.0.0\",\n      version: \"18.1.4\",\n      type: BaseControlValueAccessor,\n      ngImport: i0\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.1.4\",\n  ngImport: i0,\n  type: BaseControlValueAccessor,\n  decorators: [{\n    type: Directive\n  }],\n  ctorParameters: () => [{\n    type: i0.Renderer2\n  }, {\n    type: i0.ElementRef\n  }]\n});\n/**\n * Base class for all built-in ControlValueAccessor classes (except DefaultValueAccessor, which is\n * used in case no other CVAs can be found). We use this class to distinguish between default CVA,\n * built-in CVAs and custom CVAs, so that Forms logic can recognize built-in CVAs and treat custom\n * ones with higher priority (when both built-in and custom CVAs are present).\n *\n * Note: this is an *internal-only* class and should not be extended or used directly in\n * applications code.\n */\nclass BuiltInControlValueAccessor extends BaseControlValueAccessor {\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: BuiltInControlValueAccessor,\n      deps: null,\n      target: i0.ɵɵFactoryTarget.Directive\n    });\n  }\n  static {\n    this.ɵdir = i0.ɵɵngDeclareDirective({\n      minVersion: \"14.0.0\",\n      version: \"18.1.4\",\n      type: BuiltInControlValueAccessor,\n      usesInheritance: true,\n      ngImport: i0\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.1.4\",\n  ngImport: i0,\n  type: BuiltInControlValueAccessor,\n  decorators: [{\n    type: Directive\n  }]\n});\n/**\n * Used to provide a `ControlValueAccessor` for form controls.\n *\n * See `DefaultValueAccessor` for how to implement one.\n *\n * @publicApi\n */\nconst NG_VALUE_ACCESSOR = new InjectionToken(ngDevMode ? 'NgValueAccessor' : '');\nconst CHECKBOX_VALUE_ACCESSOR = {\n  provide: NG_VALUE_ACCESSOR,\n  useExisting: forwardRef(() => CheckboxControlValueAccessor),\n  multi: true\n};\n/**\n * @description\n * A `ControlValueAccessor` for writing a value and listening to changes on a checkbox input\n * element.\n *\n * @usageNotes\n *\n * ### Using a checkbox with a reactive form.\n *\n * The following example shows how to use a checkbox with a reactive form.\n *\n * ```ts\n * const rememberLoginControl = new FormControl();\n * ```\n *\n * ```\n * <input type=\"checkbox\" [formControl]=\"rememberLoginControl\">\n * ```\n *\n * @ngModule ReactiveFormsModule\n * @ngModule FormsModule\n * @publicApi\n */\nclass CheckboxControlValueAccessor extends BuiltInControlValueAccessor {\n  /**\n   * Sets the \"checked\" property on the input element.\n   * @nodoc\n   */\n  writeValue(value) {\n    this.setProperty('checked', value);\n  }\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: CheckboxControlValueAccessor,\n      deps: null,\n      target: i0.ɵɵFactoryTarget.Directive\n    });\n  }\n  static {\n    this.ɵdir = i0.ɵɵngDeclareDirective({\n      minVersion: \"14.0.0\",\n      version: \"18.1.4\",\n      type: CheckboxControlValueAccessor,\n      selector: \"input[type=checkbox][formControlName],input[type=checkbox][formControl],input[type=checkbox][ngModel]\",\n      host: {\n        listeners: {\n          \"change\": \"onChange($event.target.checked)\",\n          \"blur\": \"onTouched()\"\n        }\n      },\n      providers: [CHECKBOX_VALUE_ACCESSOR],\n      usesInheritance: true,\n      ngImport: i0\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.1.4\",\n  ngImport: i0,\n  type: CheckboxControlValueAccessor,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: 'input[type=checkbox][formControlName],input[type=checkbox][formControl],input[type=checkbox][ngModel]',\n      host: {\n        '(change)': 'onChange($event.target.checked)',\n        '(blur)': 'onTouched()'\n      },\n      providers: [CHECKBOX_VALUE_ACCESSOR]\n    }]\n  }]\n});\nconst DEFAULT_VALUE_ACCESSOR = {\n  provide: NG_VALUE_ACCESSOR,\n  useExisting: forwardRef(() => DefaultValueAccessor),\n  multi: true\n};\n/**\n * We must check whether the agent is Android because composition events\n * behave differently between iOS and Android.\n */\nfunction _isAndroid() {\n  const userAgent = ɵgetDOM() ? ɵgetDOM().getUserAgent() : '';\n  return /android (\\d+)/.test(userAgent.toLowerCase());\n}\n/**\n * @description\n * Provide this token to control if form directives buffer IME input until\n * the \"compositionend\" event occurs.\n * @publicApi\n */\nconst COMPOSITION_BUFFER_MODE = new InjectionToken(ngDevMode ? 'CompositionEventMode' : '');\n/**\n * The default `ControlValueAccessor` for writing a value and listening to changes on input\n * elements. The accessor is used by the `FormControlDirective`, `FormControlName`, and\n * `NgModel` directives.\n *\n * {@searchKeywords ngDefaultControl}\n *\n * @usageNotes\n *\n * ### Using the default value accessor\n *\n * The following example shows how to use an input element that activates the default value accessor\n * (in this case, a text field).\n *\n * ```ts\n * const firstNameControl = new FormControl();\n * ```\n *\n * ```\n * <input type=\"text\" [formControl]=\"firstNameControl\">\n * ```\n *\n * This value accessor is used by default for `<input type=\"text\">` and `<textarea>` elements, but\n * you could also use it for custom components that have similar behavior and do not require special\n * processing. In order to attach the default value accessor to a custom element, add the\n * `ngDefaultControl` attribute as shown below.\n *\n * ```\n * <custom-input-component ngDefaultControl [(ngModel)]=\"value\"></custom-input-component>\n * ```\n *\n * @ngModule ReactiveFormsModule\n * @ngModule FormsModule\n * @publicApi\n */\nclass DefaultValueAccessor extends BaseControlValueAccessor {\n  constructor(renderer, elementRef, _compositionMode) {\n    super(renderer, elementRef);\n    this._compositionMode = _compositionMode;\n    /** Whether the user is creating a composition string (IME events). */\n    this._composing = false;\n    if (this._compositionMode == null) {\n      this._compositionMode = !_isAndroid();\n    }\n  }\n  /**\n   * Sets the \"value\" property on the input element.\n   * @nodoc\n   */\n  writeValue(value) {\n    const normalizedValue = value == null ? '' : value;\n    this.setProperty('value', normalizedValue);\n  }\n  /** @internal */\n  _handleInput(value) {\n    if (!this._compositionMode || this._compositionMode && !this._composing) {\n      this.onChange(value);\n    }\n  }\n  /** @internal */\n  _compositionStart() {\n    this._composing = true;\n  }\n  /** @internal */\n  _compositionEnd(value) {\n    this._composing = false;\n    this._compositionMode && this.onChange(value);\n  }\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: DefaultValueAccessor,\n      deps: [{\n        token: i0.Renderer2\n      }, {\n        token: i0.ElementRef\n      }, {\n        token: COMPOSITION_BUFFER_MODE,\n        optional: true\n      }],\n      target: i0.ɵɵFactoryTarget.Directive\n    });\n  }\n  static {\n    this.ɵdir = i0.ɵɵngDeclareDirective({\n      minVersion: \"14.0.0\",\n      version: \"18.1.4\",\n      type: DefaultValueAccessor,\n      selector: \"input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]\",\n      host: {\n        listeners: {\n          \"input\": \"$any(this)._handleInput($event.target.value)\",\n          \"blur\": \"onTouched()\",\n          \"compositionstart\": \"$any(this)._compositionStart()\",\n          \"compositionend\": \"$any(this)._compositionEnd($event.target.value)\"\n        }\n      },\n      providers: [DEFAULT_VALUE_ACCESSOR],\n      usesInheritance: true,\n      ngImport: i0\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.1.4\",\n  ngImport: i0,\n  type: DefaultValueAccessor,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: 'input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]',\n      // TODO: vsavkin replace the above selector with the one below it once\n      // https://github.com/angular/angular/issues/3011 is implemented\n      // selector: '[ngModel],[formControl],[formControlName]',\n      host: {\n        '(input)': '$any(this)._handleInput($event.target.value)',\n        '(blur)': 'onTouched()',\n        '(compositionstart)': '$any(this)._compositionStart()',\n        '(compositionend)': '$any(this)._compositionEnd($event.target.value)'\n      },\n      providers: [DEFAULT_VALUE_ACCESSOR]\n    }]\n  }],\n  ctorParameters: () => [{\n    type: i0.Renderer2\n  }, {\n    type: i0.ElementRef\n  }, {\n    type: undefined,\n    decorators: [{\n      type: Optional\n    }, {\n      type: Inject,\n      args: [COMPOSITION_BUFFER_MODE]\n    }]\n  }]\n});\nfunction isEmptyInputValue(value) {\n  /**\n   * Check if the object is a string or array before evaluating the length attribute.\n   * This avoids falsely rejecting objects that contain a custom length attribute.\n   * For example, the object {id: 1, length: 0, width: 0} should not be returned as empty.\n   */\n  return value == null || (typeof value === 'string' || Array.isArray(value)) && value.length === 0;\n}\nfunction hasValidLength(value) {\n  // non-strict comparison is intentional, to check for both `null` and `undefined` values\n  return value != null && typeof value.length === 'number';\n}\n/**\n * @description\n * An `InjectionToken` for registering additional synchronous validators used with\n * `AbstractControl`s.\n *\n * @see {@link NG_ASYNC_VALIDATORS}\n *\n * @usageNotes\n *\n * ### Providing a custom validator\n *\n * The following example registers a custom validator directive. Adding the validator to the\n * existing collection of validators requires the `multi: true` option.\n *\n * ```typescript\n * @Directive({\n *   selector: '[customValidator]',\n *   providers: [{provide: NG_VALIDATORS, useExisting: CustomValidatorDirective, multi: true}]\n * })\n * class CustomValidatorDirective implements Validator {\n *   validate(control: AbstractControl): ValidationErrors | null {\n *     return { 'custom': true };\n *   }\n * }\n * ```\n *\n * @publicApi\n */\nconst NG_VALIDATORS = new InjectionToken(ngDevMode ? 'NgValidators' : '');\n/**\n * @description\n * An `InjectionToken` for registering additional asynchronous validators used with\n * `AbstractControl`s.\n *\n * @see {@link NG_VALIDATORS}\n *\n * @usageNotes\n *\n * ### Provide a custom async validator directive\n *\n * The following example implements the `AsyncValidator` interface to create an\n * async validator directive with a custom error key.\n *\n * ```typescript\n * @Directive({\n *   selector: '[customAsyncValidator]',\n *   providers: [{provide: NG_ASYNC_VALIDATORS, useExisting: CustomAsyncValidatorDirective, multi:\n * true}]\n * })\n * class CustomAsyncValidatorDirective implements AsyncValidator {\n *   validate(control: AbstractControl): Promise<ValidationErrors|null> {\n *     return Promise.resolve({'custom': true});\n *   }\n * }\n * ```\n *\n * @publicApi\n */\nconst NG_ASYNC_VALIDATORS = new InjectionToken(ngDevMode ? 'NgAsyncValidators' : '');\n/**\n * A regular expression that matches valid e-mail addresses.\n *\n * At a high level, this regexp matches e-mail addresses of the format `local-part@tld`, where:\n * - `local-part` consists of one or more of the allowed characters (alphanumeric and some\n *   punctuation symbols).\n * - `local-part` cannot begin or end with a period (`.`).\n * - `local-part` cannot be longer than 64 characters.\n * - `tld` consists of one or more `labels` separated by periods (`.`). For example `localhost` or\n *   `foo.com`.\n * - A `label` consists of one or more of the allowed characters (alphanumeric, dashes (`-`) and\n *   periods (`.`)).\n * - A `label` cannot begin or end with a dash (`-`) or a period (`.`).\n * - A `label` cannot be longer than 63 characters.\n * - The whole address cannot be longer than 254 characters.\n *\n * ## Implementation background\n *\n * This regexp was ported over from AngularJS (see there for git history):\n * https://github.com/angular/angular.js/blob/c133ef836/src/ng/directive/input.js#L27\n * It is based on the\n * [WHATWG version](https://html.spec.whatwg.org/multipage/input.html#valid-e-mail-address) with\n * some enhancements to incorporate more RFC rules (such as rules related to domain names and the\n * lengths of different parts of the address). The main differences from the WHATWG version are:\n *   - Disallow `local-part` to begin or end with a period (`.`).\n *   - Disallow `local-part` length to exceed 64 characters.\n *   - Disallow total address length to exceed 254 characters.\n *\n * See [this commit](https://github.com/angular/angular.js/commit/f3f5cf72e) for more details.\n */\nconst EMAIL_REGEXP = /^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\n/**\n * @description\n * Provides a set of built-in validators that can be used by form controls.\n *\n * A validator is a function that processes a `FormControl` or collection of\n * controls and returns an error map or null. A null map means that validation has passed.\n *\n * @see [Form Validation](guide/forms/form-validation)\n *\n * @publicApi\n */\nclass Validators {\n  /**\n   * @description\n   * Validator that requires the control's value to be greater than or equal to the provided number.\n   *\n   * @usageNotes\n   *\n   * ### Validate against a minimum of 3\n   *\n   * ```typescript\n   * const control = new FormControl(2, Validators.min(3));\n   *\n   * console.log(control.errors); // {min: {min: 3, actual: 2}}\n   * ```\n   *\n   * @returns A validator function that returns an error map with the\n   * `min` property if the validation check fails, otherwise `null`.\n   *\n   * @see {@link updateValueAndValidity()}\n   *\n   */\n  static min(min) {\n    return minValidator(min);\n  }\n  /**\n   * @description\n   * Validator that requires the control's value to be less than or equal to the provided number.\n   *\n   * @usageNotes\n   *\n   * ### Validate against a maximum of 15\n   *\n   * ```typescript\n   * const control = new FormControl(16, Validators.max(15));\n   *\n   * console.log(control.errors); // {max: {max: 15, actual: 16}}\n   * ```\n   *\n   * @returns A validator function that returns an error map with the\n   * `max` property if the validation check fails, otherwise `null`.\n   *\n   * @see {@link updateValueAndValidity()}\n   *\n   */\n  static max(max) {\n    return maxValidator(max);\n  }\n  /**\n   * @description\n   * Validator that requires the control have a non-empty value.\n   *\n   * @usageNotes\n   *\n   * ### Validate that the field is non-empty\n   *\n   * ```typescript\n   * const control = new FormControl('', Validators.required);\n   *\n   * console.log(control.errors); // {required: true}\n   * ```\n   *\n   * @returns An error map with the `required` property\n   * if the validation check fails, otherwise `null`.\n   *\n   * @see {@link updateValueAndValidity()}\n   *\n   */\n  static required(control) {\n    return requiredValidator(control);\n  }\n  /**\n   * @description\n   * Validator that requires the control's value be true. This validator is commonly\n   * used for required checkboxes.\n   *\n   * @usageNotes\n   *\n   * ### Validate that the field value is true\n   *\n   * ```typescript\n   * const control = new FormControl('some value', Validators.requiredTrue);\n   *\n   * console.log(control.errors); // {required: true}\n   * ```\n   *\n   * @returns An error map that contains the `required` property\n   * set to `true` if the validation check fails, otherwise `null`.\n   *\n   * @see {@link updateValueAndValidity()}\n   *\n   */\n  static requiredTrue(control) {\n    return requiredTrueValidator(control);\n  }\n  /**\n   * @description\n   * Validator that requires the control's value pass an email validation test.\n   *\n   * Tests the value using a [regular\n   * expression](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions)\n   * pattern suitable for common use cases. The pattern is based on the definition of a valid email\n   * address in the [WHATWG HTML\n   * specification](https://html.spec.whatwg.org/multipage/input.html#valid-e-mail-address) with\n   * some enhancements to incorporate more RFC rules (such as rules related to domain names and the\n   * lengths of different parts of the address).\n   *\n   * The differences from the WHATWG version include:\n   * - Disallow `local-part` (the part before the `@` symbol) to begin or end with a period (`.`).\n   * - Disallow `local-part` to be longer than 64 characters.\n   * - Disallow the whole address to be longer than 254 characters.\n   *\n   * If this pattern does not satisfy your business needs, you can use `Validators.pattern()` to\n   * validate the value against a different pattern.\n   *\n   * @usageNotes\n   *\n   * ### Validate that the field matches a valid email pattern\n   *\n   * ```typescript\n   * const control = new FormControl('bad@', Validators.email);\n   *\n   * console.log(control.errors); // {email: true}\n   * ```\n   *\n   * @returns An error map with the `email` property\n   * if the validation check fails, otherwise `null`.\n   *\n   * @see {@link updateValueAndValidity()}\n   *\n   */\n  static email(control) {\n    return emailValidator(control);\n  }\n  /**\n   * @description\n   * Validator that requires the length of the control's value to be greater than or equal\n   * to the provided minimum length. This validator is also provided by default if you use the\n   * the HTML5 `minlength` attribute. Note that the `minLength` validator is intended to be used\n   * only for types that have a numeric `length` property, such as strings or arrays. The\n   * `minLength` validator logic is also not invoked for values when their `length` property is 0\n   * (for example in case of an empty string or an empty array), to support optional controls. You\n   * can use the standard `required` validator if empty values should not be considered valid.\n   *\n   * @usageNotes\n   *\n   * ### Validate that the field has a minimum of 3 characters\n   *\n   * ```typescript\n   * const control = new FormControl('ng', Validators.minLength(3));\n   *\n   * console.log(control.errors); // {minlength: {requiredLength: 3, actualLength: 2}}\n   * ```\n   *\n   * ```html\n   * <input minlength=\"5\">\n   * ```\n   *\n   * @returns A validator function that returns an error map with the\n   * `minlength` property if the validation check fails, otherwise `null`.\n   *\n   * @see {@link updateValueAndValidity()}\n   *\n   */\n  static minLength(minLength) {\n    return minLengthValidator(minLength);\n  }\n  /**\n   * @description\n   * Validator that requires the length of the control's value to be less than or equal\n   * to the provided maximum length. This validator is also provided by default if you use the\n   * the HTML5 `maxlength` attribute. Note that the `maxLength` validator is intended to be used\n   * only for types that have a numeric `length` property, such as strings or arrays.\n   *\n   * @usageNotes\n   *\n   * ### Validate that the field has maximum of 5 characters\n   *\n   * ```typescript\n   * const control = new FormControl('Angular', Validators.maxLength(5));\n   *\n   * console.log(control.errors); // {maxlength: {requiredLength: 5, actualLength: 7}}\n   * ```\n   *\n   * ```html\n   * <input maxlength=\"5\">\n   * ```\n   *\n   * @returns A validator function that returns an error map with the\n   * `maxlength` property if the validation check fails, otherwise `null`.\n   *\n   * @see {@link updateValueAndValidity()}\n   *\n   */\n  static maxLength(maxLength) {\n    return maxLengthValidator(maxLength);\n  }\n  /**\n   * @description\n   * Validator that requires the control's value to match a regex pattern. This validator is also\n   * provided by default if you use the HTML5 `pattern` attribute.\n   *\n   * @usageNotes\n   *\n   * ### Validate that the field only contains letters or spaces\n   *\n   * ```typescript\n   * const control = new FormControl('1', Validators.pattern('[a-zA-Z ]*'));\n   *\n   * console.log(control.errors); // {pattern: {requiredPattern: '^[a-zA-Z ]*$', actualValue: '1'}}\n   * ```\n   *\n   * ```html\n   * <input pattern=\"[a-zA-Z ]*\">\n   * ```\n   *\n   * ### Pattern matching with the global or sticky flag\n   *\n   * `RegExp` objects created with the `g` or `y` flags that are passed into `Validators.pattern`\n   * can produce different results on the same input when validations are run consecutively. This is\n   * due to how the behavior of `RegExp.prototype.test` is\n   * specified in [ECMA-262](https://tc39.es/ecma262/#sec-regexpbuiltinexec)\n   * (`RegExp` preserves the index of the last match when the global or sticky flag is used).\n   * Due to this behavior, it is recommended that when using\n   * `Validators.pattern` you **do not** pass in a `RegExp` object with either the global or sticky\n   * flag enabled.\n   *\n   * ```typescript\n   * // Not recommended (since the `g` flag is used)\n   * const controlOne = new FormControl('1', Validators.pattern(/foo/g));\n   *\n   * // Good\n   * const controlTwo = new FormControl('1', Validators.pattern(/foo/));\n   * ```\n   *\n   * @param pattern A regular expression to be used as is to test the values, or a string.\n   * If a string is passed, the `^` character is prepended and the `$` character is\n   * appended to the provided string (if not already present), and the resulting regular\n   * expression is used to test the values.\n   *\n   * @returns A validator function that returns an error map with the\n   * `pattern` property if the validation check fails, otherwise `null`.\n   *\n   * @see {@link updateValueAndValidity()}\n   *\n   */\n  static pattern(pattern) {\n    return patternValidator(pattern);\n  }\n  /**\n   * @description\n   * Validator that performs no operation.\n   *\n   * @see {@link updateValueAndValidity()}\n   *\n   */\n  static nullValidator(control) {\n    return nullValidator(control);\n  }\n  static compose(validators) {\n    return compose(validators);\n  }\n  /**\n   * @description\n   * Compose multiple async validators into a single function that returns the union\n   * of the individual error objects for the provided control.\n   *\n   * @returns A validator function that returns an error map with the\n   * merged error objects of the async validators if the validation check fails, otherwise `null`.\n   *\n   * @see {@link updateValueAndValidity()}\n   *\n   */\n  static composeAsync(validators) {\n    return composeAsync(validators);\n  }\n}\n/**\n * Validator that requires the control's value to be greater than or equal to the provided number.\n * See `Validators.min` for additional information.\n */\nfunction minValidator(min) {\n  return control => {\n    if (isEmptyInputValue(control.value) || isEmptyInputValue(min)) {\n      return null; // don't validate empty values to allow optional controls\n    }\n    const value = parseFloat(control.value);\n    // Controls with NaN values after parsing should be treated as not having a\n    // minimum, per the HTML forms spec: https://www.w3.org/TR/html5/forms.html#attr-input-min\n    return !isNaN(value) && value < min ? {\n      'min': {\n        'min': min,\n        'actual': control.value\n      }\n    } : null;\n  };\n}\n/**\n * Validator that requires the control's value to be less than or equal to the provided number.\n * See `Validators.max` for additional information.\n */\nfunction maxValidator(max) {\n  return control => {\n    if (isEmptyInputValue(control.value) || isEmptyInputValue(max)) {\n      return null; // don't validate empty values to allow optional controls\n    }\n    const value = parseFloat(control.value);\n    // Controls with NaN values after parsing should be treated as not having a\n    // maximum, per the HTML forms spec: https://www.w3.org/TR/html5/forms.html#attr-input-max\n    return !isNaN(value) && value > max ? {\n      'max': {\n        'max': max,\n        'actual': control.value\n      }\n    } : null;\n  };\n}\n/**\n * Validator that requires the control have a non-empty value.\n * See `Validators.required` for additional information.\n */\nfunction requiredValidator(control) {\n  return isEmptyInputValue(control.value) ? {\n    'required': true\n  } : null;\n}\n/**\n * Validator that requires the control's value be true. This validator is commonly\n * used for required checkboxes.\n * See `Validators.requiredTrue` for additional information.\n */\nfunction requiredTrueValidator(control) {\n  return control.value === true ? null : {\n    'required': true\n  };\n}\n/**\n * Validator that requires the control's value pass an email validation test.\n * See `Validators.email` for additional information.\n */\nfunction emailValidator(control) {\n  if (isEmptyInputValue(control.value)) {\n    return null; // don't validate empty values to allow optional controls\n  }\n  return EMAIL_REGEXP.test(control.value) ? null : {\n    'email': true\n  };\n}\n/**\n * Validator that requires the length of the control's value to be greater than or equal\n * to the provided minimum length. See `Validators.minLength` for additional information.\n */\nfunction minLengthValidator(minLength) {\n  return control => {\n    if (isEmptyInputValue(control.value) || !hasValidLength(control.value)) {\n      // don't validate empty values to allow optional controls\n      // don't validate values without `length` property\n      return null;\n    }\n    return control.value.length < minLength ? {\n      'minlength': {\n        'requiredLength': minLength,\n        'actualLength': control.value.length\n      }\n    } : null;\n  };\n}\n/**\n * Validator that requires the length of the control's value to be less than or equal\n * to the provided maximum length. See `Validators.maxLength` for additional information.\n */\nfunction maxLengthValidator(maxLength) {\n  return control => {\n    return hasValidLength(control.value) && control.value.length > maxLength ? {\n      'maxlength': {\n        'requiredLength': maxLength,\n        'actualLength': control.value.length\n      }\n    } : null;\n  };\n}\n/**\n * Validator that requires the control's value to match a regex pattern.\n * See `Validators.pattern` for additional information.\n */\nfunction patternValidator(pattern) {\n  if (!pattern) return nullValidator;\n  let regex;\n  let regexStr;\n  if (typeof pattern === 'string') {\n    regexStr = '';\n    if (pattern.charAt(0) !== '^') regexStr += '^';\n    regexStr += pattern;\n    if (pattern.charAt(pattern.length - 1) !== '$') regexStr += '$';\n    regex = new RegExp(regexStr);\n  } else {\n    regexStr = pattern.toString();\n    regex = pattern;\n  }\n  return control => {\n    if (isEmptyInputValue(control.value)) {\n      return null; // don't validate empty values to allow optional controls\n    }\n    const value = control.value;\n    return regex.test(value) ? null : {\n      'pattern': {\n        'requiredPattern': regexStr,\n        'actualValue': value\n      }\n    };\n  };\n}\n/**\n * Function that has `ValidatorFn` shape, but performs no operation.\n */\nfunction nullValidator(control) {\n  return null;\n}\nfunction isPresent(o) {\n  return o != null;\n}\nfunction toObservable(value) {\n  const obs = ɵisPromise(value) ? from(value) : value;\n  if ((typeof ngDevMode === 'undefined' || ngDevMode) && !ɵisSubscribable(obs)) {\n    let errorMessage = `Expected async validator to return Promise or Observable.`;\n    // A synchronous validator will return object or null.\n    if (typeof value === 'object') {\n      errorMessage += ' Are you using a synchronous validator where an async validator is expected?';\n    }\n    throw new ɵRuntimeError(-1101 /* RuntimeErrorCode.WRONG_VALIDATOR_RETURN_TYPE */, errorMessage);\n  }\n  return obs;\n}\nfunction mergeErrors(arrayOfErrors) {\n  let res = {};\n  arrayOfErrors.forEach(errors => {\n    res = errors != null ? {\n      ...res,\n      ...errors\n    } : res;\n  });\n  return Object.keys(res).length === 0 ? null : res;\n}\nfunction executeValidators(control, validators) {\n  return validators.map(validator => validator(control));\n}\nfunction isValidatorFn(validator) {\n  return !validator.validate;\n}\n/**\n * Given the list of validators that may contain both functions as well as classes, return the list\n * of validator functions (convert validator classes into validator functions). This is needed to\n * have consistent structure in validators list before composing them.\n *\n * @param validators The set of validators that may contain validators both in plain function form\n *     as well as represented as a validator class.\n */\nfunction normalizeValidators(validators) {\n  return validators.map(validator => {\n    return isValidatorFn(validator) ? validator : c => validator.validate(c);\n  });\n}\n/**\n * Merges synchronous validators into a single validator function.\n * See `Validators.compose` for additional information.\n */\nfunction compose(validators) {\n  if (!validators) return null;\n  const presentValidators = validators.filter(isPresent);\n  if (presentValidators.length == 0) return null;\n  return function (control) {\n    return mergeErrors(executeValidators(control, presentValidators));\n  };\n}\n/**\n * Accepts a list of validators of different possible shapes (`Validator` and `ValidatorFn`),\n * normalizes the list (converts everything to `ValidatorFn`) and merges them into a single\n * validator function.\n */\nfunction composeValidators(validators) {\n  return validators != null ? compose(normalizeValidators(validators)) : null;\n}\n/**\n * Merges asynchronous validators into a single validator function.\n * See `Validators.composeAsync` for additional information.\n */\nfunction composeAsync(validators) {\n  if (!validators) return null;\n  const presentValidators = validators.filter(isPresent);\n  if (presentValidators.length == 0) return null;\n  return function (control) {\n    const observables = executeValidators(control, presentValidators).map(toObservable);\n    return forkJoin(observables).pipe(map(mergeErrors));\n  };\n}\n/**\n * Accepts a list of async validators of different possible shapes (`AsyncValidator` and\n * `AsyncValidatorFn`), normalizes the list (converts everything to `AsyncValidatorFn`) and merges\n * them into a single validator function.\n */\nfunction composeAsyncValidators(validators) {\n  return validators != null ? composeAsync(normalizeValidators(validators)) : null;\n}\n/**\n * Merges raw control validators with a given directive validator and returns the combined list of\n * validators as an array.\n */\nfunction mergeValidators(controlValidators, dirValidator) {\n  if (controlValidators === null) return [dirValidator];\n  return Array.isArray(controlValidators) ? [...controlValidators, dirValidator] : [controlValidators, dirValidator];\n}\n/**\n * Retrieves the list of raw synchronous validators attached to a given control.\n */\nfunction getControlValidators(control) {\n  return control._rawValidators;\n}\n/**\n * Retrieves the list of raw asynchronous validators attached to a given control.\n */\nfunction getControlAsyncValidators(control) {\n  return control._rawAsyncValidators;\n}\n/**\n * Accepts a singleton validator, an array, or null, and returns an array type with the provided\n * validators.\n *\n * @param validators A validator, validators, or null.\n * @returns A validators array.\n */\nfunction makeValidatorsArray(validators) {\n  if (!validators) return [];\n  return Array.isArray(validators) ? validators : [validators];\n}\n/**\n * Determines whether a validator or validators array has a given validator.\n *\n * @param validators The validator or validators to compare against.\n * @param validator The validator to check.\n * @returns Whether the validator is present.\n */\nfunction hasValidator(validators, validator) {\n  return Array.isArray(validators) ? validators.includes(validator) : validators === validator;\n}\n/**\n * Combines two arrays of validators into one. If duplicates are provided, only one will be added.\n *\n * @param validators The new validators.\n * @param currentValidators The base array of current validators.\n * @returns An array of validators.\n */\nfunction addValidators(validators, currentValidators) {\n  const current = makeValidatorsArray(currentValidators);\n  const validatorsToAdd = makeValidatorsArray(validators);\n  validatorsToAdd.forEach(v => {\n    // Note: if there are duplicate entries in the new validators array,\n    // only the first one would be added to the current list of validators.\n    // Duplicate ones would be ignored since `hasValidator` would detect\n    // the presence of a validator function and we update the current list in place.\n    if (!hasValidator(current, v)) {\n      current.push(v);\n    }\n  });\n  return current;\n}\nfunction removeValidators(validators, currentValidators) {\n  return makeValidatorsArray(currentValidators).filter(v => !hasValidator(validators, v));\n}\n\n/**\n * @description\n * Base class for control directives.\n *\n * This class is only used internally in the `ReactiveFormsModule` and the `FormsModule`.\n *\n * @publicApi\n */\nclass AbstractControlDirective {\n  constructor() {\n    /**\n     * Set of synchronous validators as they were provided while calling `setValidators` function.\n     * @internal\n     */\n    this._rawValidators = [];\n    /**\n     * Set of asynchronous validators as they were provided while calling `setAsyncValidators`\n     * function.\n     * @internal\n     */\n    this._rawAsyncValidators = [];\n    /*\n     * The set of callbacks to be invoked when directive instance is being destroyed.\n     */\n    this._onDestroyCallbacks = [];\n  }\n  /**\n   * @description\n   * Reports the value of the control if it is present, otherwise null.\n   */\n  get value() {\n    return this.control ? this.control.value : null;\n  }\n  /**\n   * @description\n   * Reports whether the control is valid. A control is considered valid if no\n   * validation errors exist with the current value.\n   * If the control is not present, null is returned.\n   */\n  get valid() {\n    return this.control ? this.control.valid : null;\n  }\n  /**\n   * @description\n   * Reports whether the control is invalid, meaning that an error exists in the input value.\n   * If the control is not present, null is returned.\n   */\n  get invalid() {\n    return this.control ? this.control.invalid : null;\n  }\n  /**\n   * @description\n   * Reports whether a control is pending, meaning that async validation is occurring and\n   * errors are not yet available for the input value. If the control is not present, null is\n   * returned.\n   */\n  get pending() {\n    return this.control ? this.control.pending : null;\n  }\n  /**\n   * @description\n   * Reports whether the control is disabled, meaning that the control is disabled\n   * in the UI and is exempt from validation checks and excluded from aggregate\n   * values of ancestor controls. If the control is not present, null is returned.\n   */\n  get disabled() {\n    return this.control ? this.control.disabled : null;\n  }\n  /**\n   * @description\n   * Reports whether the control is enabled, meaning that the control is included in ancestor\n   * calculations of validity or value. If the control is not present, null is returned.\n   */\n  get enabled() {\n    return this.control ? this.control.enabled : null;\n  }\n  /**\n   * @description\n   * Reports the control's validation errors. If the control is not present, null is returned.\n   */\n  get errors() {\n    return this.control ? this.control.errors : null;\n  }\n  /**\n   * @description\n   * Reports whether the control is pristine, meaning that the user has not yet changed\n   * the value in the UI. If the control is not present, null is returned.\n   */\n  get pristine() {\n    return this.control ? this.control.pristine : null;\n  }\n  /**\n   * @description\n   * Reports whether the control is dirty, meaning that the user has changed\n   * the value in the UI. If the control is not present, null is returned.\n   */\n  get dirty() {\n    return this.control ? this.control.dirty : null;\n  }\n  /**\n   * @description\n   * Reports whether the control is touched, meaning that the user has triggered\n   * a `blur` event on it. If the control is not present, null is returned.\n   */\n  get touched() {\n    return this.control ? this.control.touched : null;\n  }\n  /**\n   * @description\n   * Reports the validation status of the control. Possible values include:\n   * 'VALID', 'INVALID', 'DISABLED', and 'PENDING'.\n   * If the control is not present, null is returned.\n   */\n  get status() {\n    return this.control ? this.control.status : null;\n  }\n  /**\n   * @description\n   * Reports whether the control is untouched, meaning that the user has not yet triggered\n   * a `blur` event on it. If the control is not present, null is returned.\n   */\n  get untouched() {\n    return this.control ? this.control.untouched : null;\n  }\n  /**\n   * @description\n   * Returns a multicasting observable that emits a validation status whenever it is\n   * calculated for the control. If the control is not present, null is returned.\n   */\n  get statusChanges() {\n    return this.control ? this.control.statusChanges : null;\n  }\n  /**\n   * @description\n   * Returns a multicasting observable of value changes for the control that emits every time the\n   * value of the control changes in the UI or programmatically.\n   * If the control is not present, null is returned.\n   */\n  get valueChanges() {\n    return this.control ? this.control.valueChanges : null;\n  }\n  /**\n   * @description\n   * Returns an array that represents the path from the top-level form to this control.\n   * Each index is the string name of the control on that level.\n   */\n  get path() {\n    return null;\n  }\n  /**\n   * Sets synchronous validators for this directive.\n   * @internal\n   */\n  _setValidators(validators) {\n    this._rawValidators = validators || [];\n    this._composedValidatorFn = composeValidators(this._rawValidators);\n  }\n  /**\n   * Sets asynchronous validators for this directive.\n   * @internal\n   */\n  _setAsyncValidators(validators) {\n    this._rawAsyncValidators = validators || [];\n    this._composedAsyncValidatorFn = composeAsyncValidators(this._rawAsyncValidators);\n  }\n  /**\n   * @description\n   * Synchronous validator function composed of all the synchronous validators registered with this\n   * directive.\n   */\n  get validator() {\n    return this._composedValidatorFn || null;\n  }\n  /**\n   * @description\n   * Asynchronous validator function composed of all the asynchronous validators registered with\n   * this directive.\n   */\n  get asyncValidator() {\n    return this._composedAsyncValidatorFn || null;\n  }\n  /**\n   * Internal function to register callbacks that should be invoked\n   * when directive instance is being destroyed.\n   * @internal\n   */\n  _registerOnDestroy(fn) {\n    this._onDestroyCallbacks.push(fn);\n  }\n  /**\n   * Internal function to invoke all registered \"on destroy\" callbacks.\n   * Note: calling this function also clears the list of callbacks.\n   * @internal\n   */\n  _invokeOnDestroyCallbacks() {\n    this._onDestroyCallbacks.forEach(fn => fn());\n    this._onDestroyCallbacks = [];\n  }\n  /**\n   * @description\n   * Resets the control with the provided value if the control is present.\n   */\n  reset(value = undefined) {\n    if (this.control) this.control.reset(value);\n  }\n  /**\n   * @description\n   * Reports whether the control with the given path has the error specified.\n   *\n   * @param errorCode The code of the error to check\n   * @param path A list of control names that designates how to move from the current control\n   * to the control that should be queried for errors.\n   *\n   * @usageNotes\n   * For example, for the following `FormGroup`:\n   *\n   * ```\n   * form = new FormGroup({\n   *   address: new FormGroup({ street: new FormControl() })\n   * });\n   * ```\n   *\n   * The path to the 'street' control from the root form would be 'address' -> 'street'.\n   *\n   * It can be provided to this method in one of two formats:\n   *\n   * 1. An array of string control names, e.g. `['address', 'street']`\n   * 1. A period-delimited list of control names in one string, e.g. `'address.street'`\n   *\n   * If no path is given, this method checks for the error on the current control.\n   *\n   * @returns whether the given error is present in the control at the given path.\n   *\n   * If the control is not present, false is returned.\n   */\n  hasError(errorCode, path) {\n    return this.control ? this.control.hasError(errorCode, path) : false;\n  }\n  /**\n   * @description\n   * Reports error data for the control with the given path.\n   *\n   * @param errorCode The code of the error to check\n   * @param path A list of control names that designates how to move from the current control\n   * to the control that should be queried for errors.\n   *\n   * @usageNotes\n   * For example, for the following `FormGroup`:\n   *\n   * ```\n   * form = new FormGroup({\n   *   address: new FormGroup({ street: new FormControl() })\n   * });\n   * ```\n   *\n   * The path to the 'street' control from the root form would be 'address' -> 'street'.\n   *\n   * It can be provided to this method in one of two formats:\n   *\n   * 1. An array of string control names, e.g. `['address', 'street']`\n   * 1. A period-delimited list of control names in one string, e.g. `'address.street'`\n   *\n   * @returns error data for that particular error. If the control or error is not present,\n   * null is returned.\n   */\n  getError(errorCode, path) {\n    return this.control ? this.control.getError(errorCode, path) : null;\n  }\n}\n\n/**\n * @description\n * A base class for directives that contain multiple registered instances of `NgControl`.\n * Only used by the forms module.\n *\n * @publicApi\n */\nclass ControlContainer extends AbstractControlDirective {\n  /**\n   * @description\n   * The top-level form directive for the control.\n   */\n  get formDirective() {\n    return null;\n  }\n  /**\n   * @description\n   * The path to this group.\n   */\n  get path() {\n    return null;\n  }\n}\n\n/**\n * @description\n * A base class that all `FormControl`-based directives extend. It binds a `FormControl`\n * object to a DOM element.\n *\n * @publicApi\n */\nclass NgControl extends AbstractControlDirective {\n  constructor() {\n    super(...arguments);\n    /**\n     * @description\n     * The parent form for the control.\n     *\n     * @internal\n     */\n    this._parent = null;\n    /**\n     * @description\n     * The name for the control\n     */\n    this.name = null;\n    /**\n     * @description\n     * The value accessor for the control\n     */\n    this.valueAccessor = null;\n  }\n}\n\n// DO NOT REFACTOR!\n// Each status is represented by a separate function to make sure that\n// advanced Closure Compiler optimizations related to property renaming\n// can work correctly.\nclass AbstractControlStatus {\n  constructor(cd) {\n    this._cd = cd;\n  }\n  get isTouched() {\n    // track the touched signal\n    this._cd?.control?._touched?.();\n    return !!this._cd?.control?.touched;\n  }\n  get isUntouched() {\n    return !!this._cd?.control?.untouched;\n  }\n  get isPristine() {\n    // track the pristine signal\n    this._cd?.control?._pristine?.();\n    return !!this._cd?.control?.pristine;\n  }\n  get isDirty() {\n    // pristine signal already tracked above\n    return !!this._cd?.control?.dirty;\n  }\n  get isValid() {\n    // track the status signal\n    this._cd?.control?._status?.();\n    return !!this._cd?.control?.valid;\n  }\n  get isInvalid() {\n    // status signal already tracked above\n    return !!this._cd?.control?.invalid;\n  }\n  get isPending() {\n    // status signal already tracked above\n    return !!this._cd?.control?.pending;\n  }\n  get isSubmitted() {\n    // track the submitted signal\n    this._cd?._submitted?.();\n    // We check for the `submitted` field from `NgForm` and `FormGroupDirective` classes, but\n    // we avoid instanceof checks to prevent non-tree-shakable references to those types.\n    return !!this._cd?.submitted;\n  }\n}\nconst ngControlStatusHost = {\n  '[class.ng-untouched]': 'isUntouched',\n  '[class.ng-touched]': 'isTouched',\n  '[class.ng-pristine]': 'isPristine',\n  '[class.ng-dirty]': 'isDirty',\n  '[class.ng-valid]': 'isValid',\n  '[class.ng-invalid]': 'isInvalid',\n  '[class.ng-pending]': 'isPending'\n};\nconst ngGroupStatusHost = {\n  ...ngControlStatusHost,\n  '[class.ng-submitted]': 'isSubmitted'\n};\n/**\n * @description\n * Directive automatically applied to Angular form controls that sets CSS classes\n * based on control status.\n *\n * @usageNotes\n *\n * ### CSS classes applied\n *\n * The following classes are applied as the properties become true:\n *\n * * ng-valid\n * * ng-invalid\n * * ng-pending\n * * ng-pristine\n * * ng-dirty\n * * ng-untouched\n * * ng-touched\n *\n * @ngModule ReactiveFormsModule\n * @ngModule FormsModule\n * @publicApi\n */\nclass NgControlStatus extends AbstractControlStatus {\n  constructor(cd) {\n    super(cd);\n  }\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: NgControlStatus,\n      deps: [{\n        token: NgControl,\n        self: true\n      }],\n      target: i0.ɵɵFactoryTarget.Directive\n    });\n  }\n  static {\n    this.ɵdir = i0.ɵɵngDeclareDirective({\n      minVersion: \"14.0.0\",\n      version: \"18.1.4\",\n      type: NgControlStatus,\n      selector: \"[formControlName],[ngModel],[formControl]\",\n      host: {\n        properties: {\n          \"class.ng-untouched\": \"isUntouched\",\n          \"class.ng-touched\": \"isTouched\",\n          \"class.ng-pristine\": \"isPristine\",\n          \"class.ng-dirty\": \"isDirty\",\n          \"class.ng-valid\": \"isValid\",\n          \"class.ng-invalid\": \"isInvalid\",\n          \"class.ng-pending\": \"isPending\"\n        }\n      },\n      usesInheritance: true,\n      ngImport: i0\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.1.4\",\n  ngImport: i0,\n  type: NgControlStatus,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: '[formControlName],[ngModel],[formControl]',\n      host: ngControlStatusHost\n    }]\n  }],\n  ctorParameters: () => [{\n    type: NgControl,\n    decorators: [{\n      type: Self\n    }]\n  }]\n});\n/**\n * @description\n * Directive automatically applied to Angular form groups that sets CSS classes\n * based on control status (valid/invalid/dirty/etc). On groups, this includes the additional\n * class ng-submitted.\n *\n * @see {@link NgControlStatus}\n *\n * @ngModule ReactiveFormsModule\n * @ngModule FormsModule\n * @publicApi\n */\nclass NgControlStatusGroup extends AbstractControlStatus {\n  constructor(cd) {\n    super(cd);\n  }\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: NgControlStatusGroup,\n      deps: [{\n        token: ControlContainer,\n        optional: true,\n        self: true\n      }],\n      target: i0.ɵɵFactoryTarget.Directive\n    });\n  }\n  static {\n    this.ɵdir = i0.ɵɵngDeclareDirective({\n      minVersion: \"14.0.0\",\n      version: \"18.1.4\",\n      type: NgControlStatusGroup,\n      selector: \"[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]\",\n      host: {\n        properties: {\n          \"class.ng-untouched\": \"isUntouched\",\n          \"class.ng-touched\": \"isTouched\",\n          \"class.ng-pristine\": \"isPristine\",\n          \"class.ng-dirty\": \"isDirty\",\n          \"class.ng-valid\": \"isValid\",\n          \"class.ng-invalid\": \"isInvalid\",\n          \"class.ng-pending\": \"isPending\",\n          \"class.ng-submitted\": \"isSubmitted\"\n        }\n      },\n      usesInheritance: true,\n      ngImport: i0\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.1.4\",\n  ngImport: i0,\n  type: NgControlStatusGroup,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: '[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]',\n      host: ngGroupStatusHost\n    }]\n  }],\n  ctorParameters: () => [{\n    type: ControlContainer,\n    decorators: [{\n      type: Optional\n    }, {\n      type: Self\n    }]\n  }]\n});\nconst formControlNameExample = `\n  <div [formGroup]=\"myGroup\">\n    <input formControlName=\"firstName\">\n  </div>\n\n  In your class:\n\n  this.myGroup = new FormGroup({\n      firstName: new FormControl()\n  });`;\nconst formGroupNameExample = `\n  <div [formGroup]=\"myGroup\">\n      <div formGroupName=\"person\">\n        <input formControlName=\"firstName\">\n      </div>\n  </div>\n\n  In your class:\n\n  this.myGroup = new FormGroup({\n      person: new FormGroup({ firstName: new FormControl() })\n  });`;\nconst formArrayNameExample = `\n  <div [formGroup]=\"myGroup\">\n    <div formArrayName=\"cities\">\n      <div *ngFor=\"let city of cityArray.controls; index as i\">\n        <input [formControlName]=\"i\">\n      </div>\n    </div>\n  </div>\n\n  In your class:\n\n  this.cityArray = new FormArray([new FormControl('SF')]);\n  this.myGroup = new FormGroup({\n    cities: this.cityArray\n  });`;\nconst ngModelGroupExample = `\n  <form>\n      <div ngModelGroup=\"person\">\n        <input [(ngModel)]=\"person.name\" name=\"firstName\">\n      </div>\n  </form>`;\nconst ngModelWithFormGroupExample = `\n  <div [formGroup]=\"myGroup\">\n      <input formControlName=\"firstName\">\n      <input [(ngModel)]=\"showMoreControls\" [ngModelOptions]=\"{standalone: true}\">\n  </div>\n`;\nfunction controlParentException(nameOrIndex) {\n  return new ɵRuntimeError(1050 /* RuntimeErrorCode.FORM_CONTROL_NAME_MISSING_PARENT */, `formControlName must be used with a parent formGroup directive. You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      ${describeFormControl(nameOrIndex)}\n\n    Example:\n\n    ${formControlNameExample}`);\n}\nfunction describeFormControl(nameOrIndex) {\n  if (nameOrIndex == null || nameOrIndex === '') {\n    return '';\n  }\n  const valueType = typeof nameOrIndex === 'string' ? 'name' : 'index';\n  return `Affected Form Control ${valueType}: \"${nameOrIndex}\"`;\n}\nfunction ngModelGroupException() {\n  return new ɵRuntimeError(1051 /* RuntimeErrorCode.FORM_CONTROL_NAME_INSIDE_MODEL_GROUP */, `formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n      that also have a \"form\" prefix: formGroupName, formArrayName, or formGroup.\n\n      Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n      ${formGroupNameExample}\n\n      Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n      ${ngModelGroupExample}`);\n}\nfunction missingFormException() {\n  return new ɵRuntimeError(1052 /* RuntimeErrorCode.FORM_GROUP_MISSING_INSTANCE */, `formGroup expects a FormGroup instance. Please pass one in.\n\n      Example:\n\n      ${formControlNameExample}`);\n}\nfunction groupParentException() {\n  return new ɵRuntimeError(1053 /* RuntimeErrorCode.FORM_GROUP_NAME_MISSING_PARENT */, `formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n    directive and pass it an existing FormGroup instance (you can create one in your class).\n\n    Example:\n\n    ${formGroupNameExample}`);\n}\nfunction arrayParentException() {\n  return new ɵRuntimeError(1054 /* RuntimeErrorCode.FORM_ARRAY_NAME_MISSING_PARENT */, `formArrayName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ${formArrayNameExample}`);\n}\nconst disabledAttrWarning = `\n  It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n  when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n  you. We recommend using this approach to avoid 'changed after checked' errors.\n\n  Example:\n  // Specify the \\`disabled\\` property at control creation time:\n  form = new FormGroup({\n    first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n    last: new FormControl('Drew', Validators.required)\n  });\n\n  // Controls can also be enabled/disabled after creation:\n  form.get('first')?.enable();\n  form.get('last')?.disable();\n`;\nconst asyncValidatorsDroppedWithOptsWarning = `\n  It looks like you're constructing using a FormControl with both an options argument and an\n  async validators argument. Mixing these arguments will cause your async validators to be dropped.\n  You should either put all your validators in the options object, or in separate validators\n  arguments. For example:\n\n  // Using validators arguments\n  fc = new FormControl(42, Validators.required, myAsyncValidator);\n\n  // Using AbstractControlOptions\n  fc = new FormControl(42, {validators: Validators.required, asyncValidators: myAV});\n\n  // Do NOT mix them: async validators will be dropped!\n  fc = new FormControl(42, {validators: Validators.required}, /* Oops! */ myAsyncValidator);\n`;\nfunction ngModelWarning(directiveName) {\n  return `\n  It looks like you're using ngModel on the same form field as ${directiveName}.\n  Support for using the ngModel input property and ngModelChange event with\n  reactive form directives has been deprecated in Angular v6 and will be removed\n  in a future version of Angular.\n\n  For more information on this, see our API docs here:\n  https://angular.io/api/forms/${directiveName === 'formControl' ? 'FormControlDirective' : 'FormControlName'}#use-with-ngmodel\n  `;\n}\nfunction describeKey(isFormGroup, key) {\n  return isFormGroup ? `with name: '${key}'` : `at index: ${key}`;\n}\nfunction noControlsError(isFormGroup) {\n  return `\n    There are no form controls registered with this ${isFormGroup ? 'group' : 'array'} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `;\n}\nfunction missingControlError(isFormGroup, key) {\n  return `Cannot find form control ${describeKey(isFormGroup, key)}`;\n}\nfunction missingControlValueError(isFormGroup, key) {\n  return `Must supply a value for form control ${describeKey(isFormGroup, key)}`;\n}\n\n/**\n * Reports that a control is valid, meaning that no errors exist in the input value.\n *\n * @see {@link status}\n */\nconst VALID = 'VALID';\n/**\n * Reports that a control is invalid, meaning that an error exists in the input value.\n *\n * @see {@link status}\n */\nconst INVALID = 'INVALID';\n/**\n * Reports that a control is pending, meaning that async validation is occurring and\n * errors are not yet available for the input value.\n *\n * @see {@link markAsPending}\n * @see {@link status}\n */\nconst PENDING = 'PENDING';\n/**\n * Reports that a control is disabled, meaning that the control is exempt from ancestor\n * calculations of validity or value.\n *\n * @see {@link markAsDisabled}\n * @see {@link status}\n */\nconst DISABLED = 'DISABLED';\n/**\n * Base class for every event sent by `AbstractControl.events()`\n *\n * @publicApi\n */\nclass ControlEvent {}\n/**\n * Event fired when the value of a control changes.\n *\n * @publicApi\n */\nclass ValueChangeEvent extends ControlEvent {\n  constructor(value, source) {\n    super();\n    this.value = value;\n    this.source = source;\n  }\n}\n/**\n * Event fired when the control's pristine state changes (pristine <=> dirty).\n *\n * @publicApi */\nclass PristineChangeEvent extends ControlEvent {\n  constructor(pristine, source) {\n    super();\n    this.pristine = pristine;\n    this.source = source;\n  }\n}\n/**\n * Event fired when the control's touched status changes (touched <=> untouched).\n *\n * @publicApi\n */\nclass TouchedChangeEvent extends ControlEvent {\n  constructor(touched, source) {\n    super();\n    this.touched = touched;\n    this.source = source;\n  }\n}\n/**\n * Event fired when the control's status changes.\n *\n * @publicApi\n */\nclass StatusChangeEvent extends ControlEvent {\n  constructor(status, source) {\n    super();\n    this.status = status;\n    this.source = source;\n  }\n}\n/**\n * Event fired when a form is submitted\n *\n * @publicApi\n */\nclass FormSubmittedEvent extends ControlEvent {\n  constructor(source) {\n    super();\n    this.source = source;\n  }\n}\n/**\n * Event fired when a form is reset.\n *\n * @publicApi\n */\nclass FormResetEvent extends ControlEvent {\n  constructor(source) {\n    super();\n    this.source = source;\n  }\n}\n/**\n * Gets validators from either an options object or given validators.\n */\nfunction pickValidators(validatorOrOpts) {\n  return (isOptionsObj(validatorOrOpts) ? validatorOrOpts.validators : validatorOrOpts) || null;\n}\n/**\n * Creates validator function by combining provided validators.\n */\nfunction coerceToValidator(validator) {\n  return Array.isArray(validator) ? composeValidators(validator) : validator || null;\n}\n/**\n * Gets async validators from either an options object or given validators.\n */\nfunction pickAsyncValidators(asyncValidator, validatorOrOpts) {\n  if (typeof ngDevMode === 'undefined' || ngDevMode) {\n    if (isOptionsObj(validatorOrOpts) && asyncValidator) {\n      console.warn(asyncValidatorsDroppedWithOptsWarning);\n    }\n  }\n  return (isOptionsObj(validatorOrOpts) ? validatorOrOpts.asyncValidators : asyncValidator) || null;\n}\n/**\n * Creates async validator function by combining provided async validators.\n */\nfunction coerceToAsyncValidator(asyncValidator) {\n  return Array.isArray(asyncValidator) ? composeAsyncValidators(asyncValidator) : asyncValidator || null;\n}\nfunction isOptionsObj(validatorOrOpts) {\n  return validatorOrOpts != null && !Array.isArray(validatorOrOpts) && typeof validatorOrOpts === 'object';\n}\nfunction assertControlPresent(parent, isGroup, key) {\n  const controls = parent.controls;\n  const collection = isGroup ? Object.keys(controls) : controls;\n  if (!collection.length) {\n    throw new ɵRuntimeError(1000 /* RuntimeErrorCode.NO_CONTROLS */, typeof ngDevMode === 'undefined' || ngDevMode ? noControlsError(isGroup) : '');\n  }\n  if (!controls[key]) {\n    throw new ɵRuntimeError(1001 /* RuntimeErrorCode.MISSING_CONTROL */, typeof ngDevMode === 'undefined' || ngDevMode ? missingControlError(isGroup, key) : '');\n  }\n}\nfunction assertAllValuesPresent(control, isGroup, value) {\n  control._forEachChild((_, key) => {\n    if (value[key] === undefined) {\n      throw new ɵRuntimeError(1002 /* RuntimeErrorCode.MISSING_CONTROL_VALUE */, typeof ngDevMode === 'undefined' || ngDevMode ? missingControlValueError(isGroup, key) : '');\n    }\n  });\n}\n/**\n * This is the base class for `FormControl`, `FormGroup`, and `FormArray`.\n *\n * It provides some of the shared behavior that all controls and groups of controls have, like\n * running validators, calculating status, and resetting state. It also defines the properties\n * that are shared between all sub-classes, like `value`, `valid`, and `dirty`. It shouldn't be\n * instantiated directly.\n *\n * The first type parameter TValue represents the value type of the control (`control.value`).\n * The optional type parameter TRawValue  represents the raw value type (`control.getRawValue()`).\n *\n * @see [Forms Guide](guide/forms)\n * @see [Reactive Forms Guide](guide/forms/reactive-forms)\n * @see [Dynamic Forms Guide](guide/forms/dynamic-forms)\n *\n * @publicApi\n */\nclass AbstractControl {\n  /**\n   * Initialize the AbstractControl instance.\n   *\n   * @param validators The function or array of functions that is used to determine the validity of\n   *     this control synchronously.\n   * @param asyncValidators The function or array of functions that is used to determine validity of\n   *     this control asynchronously.\n   */\n  constructor(validators, asyncValidators) {\n    /** @internal */\n    this._pendingDirty = false;\n    /**\n     * Indicates that a control has its own pending asynchronous validation in progress.\n     * It also stores if the control should emit events when the validation status changes.\n     *\n     * @internal\n     */\n    this._hasOwnPendingAsyncValidator = null;\n    /** @internal */\n    this._pendingTouched = false;\n    /** @internal */\n    this._onCollectionChange = () => {};\n    this._parent = null;\n    /** @internal */\n    this._status = computed(() => this.statusReactive());\n    this.statusReactive = signal(undefined);\n    /** @internal */\n    this._pristine = computed(() => this.pristineReactive());\n    this.pristineReactive = signal(true);\n    /** @internal */\n    this._touched = computed(() => this.touchedReactive());\n    this.touchedReactive = signal(false);\n    /**\n     * Exposed as observable, see below.\n     *\n     * @internal\n     */\n    this._events = new Subject();\n    /**\n     * A multicasting observable that emits an event every time the state of the control changes.\n     * It emits for value, status, pristine or touched changes.\n     *\n     * **Note**: On value change, the emit happens right after a value of this control is updated. The\n     * value of a parent control (for example if this FormControl is a part of a FormGroup) is updated\n     * later, so accessing a value of a parent control (using the `value` property) from the callback\n     * of this event might result in getting a value that has not been updated yet. Subscribe to the\n     * `events` of the parent control instead.\n     * For other event types, the events are emitted after the parent control has been updated.\n     *\n     */\n    this.events = this._events.asObservable();\n    /** @internal */\n    this._onDisabledChange = [];\n    this._assignValidators(validators);\n    this._assignAsyncValidators(asyncValidators);\n  }\n  /**\n   * Returns the function that is used to determine the validity of this control synchronously.\n   * If multiple validators have been added, this will be a single composed function.\n   * See `Validators.compose()` for additional information.\n   */\n  get validator() {\n    return this._composedValidatorFn;\n  }\n  set validator(validatorFn) {\n    this._rawValidators = this._composedValidatorFn = validatorFn;\n  }\n  /**\n   * Returns the function that is used to determine the validity of this control asynchronously.\n   * If multiple validators have been added, this will be a single composed function.\n   * See `Validators.compose()` for additional information.\n   */\n  get asyncValidator() {\n    return this._composedAsyncValidatorFn;\n  }\n  set asyncValidator(asyncValidatorFn) {\n    this._rawAsyncValidators = this._composedAsyncValidatorFn = asyncValidatorFn;\n  }\n  /**\n   * The parent control.\n   */\n  get parent() {\n    return this._parent;\n  }\n  /**\n   * The validation status of the control.\n   *\n   * @see {@link FormControlStatus}\n   *\n   * These status values are mutually exclusive, so a control cannot be\n   * both valid AND invalid or invalid AND disabled.\n   */\n  get status() {\n    return untracked(this.statusReactive);\n  }\n  set status(v) {\n    untracked(() => this.statusReactive.set(v));\n  }\n  /**\n   * A control is `valid` when its `status` is `VALID`.\n   *\n   * @see {@link AbstractControl.status}\n   *\n   * @returns True if the control has passed all of its validation tests,\n   * false otherwise.\n   */\n  get valid() {\n    return this.status === VALID;\n  }\n  /**\n   * A control is `invalid` when its `status` is `INVALID`.\n   *\n   * @see {@link AbstractControl.status}\n   *\n   * @returns True if this control has failed one or more of its validation checks,\n   * false otherwise.\n   */\n  get invalid() {\n    return this.status === INVALID;\n  }\n  /**\n   * A control is `pending` when its `status` is `PENDING`.\n   *\n   * @see {@link AbstractControl.status}\n   *\n   * @returns True if this control is in the process of conducting a validation check,\n   * false otherwise.\n   */\n  get pending() {\n    return this.status == PENDING;\n  }\n  /**\n   * A control is `disabled` when its `status` is `DISABLED`.\n   *\n   * Disabled controls are exempt from validation checks and\n   * are not included in the aggregate value of their ancestor\n   * controls.\n   *\n   * @see {@link AbstractControl.status}\n   *\n   * @returns True if the control is disabled, false otherwise.\n   */\n  get disabled() {\n    return this.status === DISABLED;\n  }\n  /**\n   * A control is `enabled` as long as its `status` is not `DISABLED`.\n   *\n   * @returns True if the control has any status other than 'DISABLED',\n   * false if the status is 'DISABLED'.\n   *\n   * @see {@link AbstractControl.status}\n   *\n   */\n  get enabled() {\n    return this.status !== DISABLED;\n  }\n  /**\n   * A control is `pristine` if the user has not yet changed\n   * the value in the UI.\n   *\n   * @returns True if the user has not yet changed the value in the UI; compare `dirty`.\n   * Programmatic changes to a control's value do not mark it dirty.\n   */\n  get pristine() {\n    return untracked(this.pristineReactive);\n  }\n  set pristine(v) {\n    untracked(() => this.pristineReactive.set(v));\n  }\n  /**\n   * A control is `dirty` if the user has changed the value\n   * in the UI.\n   *\n   * @returns True if the user has changed the value of this control in the UI; compare `pristine`.\n   * Programmatic changes to a control's value do not mark it dirty.\n   */\n  get dirty() {\n    return !this.pristine;\n  }\n  /**\n   * True if the control is marked as `touched`.\n   *\n   * A control is marked `touched` once the user has triggered\n   * a `blur` event on it.\n   */\n  get touched() {\n    return untracked(this.touchedReactive);\n  }\n  set touched(v) {\n    untracked(() => this.touchedReactive.set(v));\n  }\n  /**\n   * True if the control has not been marked as touched\n   *\n   * A control is `untouched` if the user has not yet triggered\n   * a `blur` event on it.\n   */\n  get untouched() {\n    return !this.touched;\n  }\n  /**\n   * Reports the update strategy of the `AbstractControl` (meaning\n   * the event on which the control updates itself).\n   * Possible values: `'change'` | `'blur'` | `'submit'`\n   * Default value: `'change'`\n   */\n  get updateOn() {\n    return this._updateOn ? this._updateOn : this.parent ? this.parent.updateOn : 'change';\n  }\n  /**\n   * Sets the synchronous validators that are active on this control.  Calling\n   * this overwrites any existing synchronous validators.\n   *\n   * When you add or remove a validator at run time, you must call\n   * `updateValueAndValidity()` for the new validation to take effect.\n   *\n   * If you want to add a new validator without affecting existing ones, consider\n   * using `addValidators()` method instead.\n   */\n  setValidators(validators) {\n    this._assignValidators(validators);\n  }\n  /**\n   * Sets the asynchronous validators that are active on this control. Calling this\n   * overwrites any existing asynchronous validators.\n   *\n   * When you add or remove a validator at run time, you must call\n   * `updateValueAndValidity()` for the new validation to take effect.\n   *\n   * If you want to add a new validator without affecting existing ones, consider\n   * using `addAsyncValidators()` method instead.\n   */\n  setAsyncValidators(validators) {\n    this._assignAsyncValidators(validators);\n  }\n  /**\n   * Add a synchronous validator or validators to this control, without affecting other validators.\n   *\n   * When you add or remove a validator at run time, you must call\n   * `updateValueAndValidity()` for the new validation to take effect.\n   *\n   * Adding a validator that already exists will have no effect. If duplicate validator functions\n   * are present in the `validators` array, only the first instance would be added to a form\n   * control.\n   *\n   * @param validators The new validator function or functions to add to this control.\n   */\n  addValidators(validators) {\n    this.setValidators(addValidators(validators, this._rawValidators));\n  }\n  /**\n   * Add an asynchronous validator or validators to this control, without affecting other\n   * validators.\n   *\n   * When you add or remove a validator at run time, you must call\n   * `updateValueAndValidity()` for the new validation to take effect.\n   *\n   * Adding a validator that already exists will have no effect.\n   *\n   * @param validators The new asynchronous validator function or functions to add to this control.\n   */\n  addAsyncValidators(validators) {\n    this.setAsyncValidators(addValidators(validators, this._rawAsyncValidators));\n  }\n  /**\n   * Remove a synchronous validator from this control, without affecting other validators.\n   * Validators are compared by function reference; you must pass a reference to the exact same\n   * validator function as the one that was originally set. If a provided validator is not found,\n   * it is ignored.\n   *\n   * @usageNotes\n   *\n   * ### Reference to a ValidatorFn\n   *\n   * ```\n   * // Reference to the RequiredValidator\n   * const ctrl = new FormControl<string | null>('', Validators.required);\n   * ctrl.removeValidators(Validators.required);\n   *\n   * // Reference to anonymous function inside MinValidator\n   * const minValidator = Validators.min(3);\n   * const ctrl = new FormControl<string | null>('', minValidator);\n   * expect(ctrl.hasValidator(minValidator)).toEqual(true)\n   * expect(ctrl.hasValidator(Validators.min(3))).toEqual(false)\n   *\n   * ctrl.removeValidators(minValidator);\n   * ```\n   *\n   * When you add or remove a validator at run time, you must call\n   * `updateValueAndValidity()` for the new validation to take effect.\n   *\n   * @param validators The validator or validators to remove.\n   */\n  removeValidators(validators) {\n    this.setValidators(removeValidators(validators, this._rawValidators));\n  }\n  /**\n   * Remove an asynchronous validator from this control, without affecting other validators.\n   * Validators are compared by function reference; you must pass a reference to the exact same\n   * validator function as the one that was originally set. If a provided validator is not found, it\n   * is ignored.\n   *\n   * When you add or remove a validator at run time, you must call\n   * `updateValueAndValidity()` for the new validation to take effect.\n   *\n   * @param validators The asynchronous validator or validators to remove.\n   */\n  removeAsyncValidators(validators) {\n    this.setAsyncValidators(removeValidators(validators, this._rawAsyncValidators));\n  }\n  /**\n   * Check whether a synchronous validator function is present on this control. The provided\n   * validator must be a reference to the exact same function that was provided.\n   *\n   * @usageNotes\n   *\n   * ### Reference to a ValidatorFn\n   *\n   * ```\n   * // Reference to the RequiredValidator\n   * const ctrl = new FormControl<number | null>(0, Validators.required);\n   * expect(ctrl.hasValidator(Validators.required)).toEqual(true)\n   *\n   * // Reference to anonymous function inside MinValidator\n   * const minValidator = Validators.min(3);\n   * const ctrl = new FormControl<number | null>(0, minValidator);\n   * expect(ctrl.hasValidator(minValidator)).toEqual(true)\n   * expect(ctrl.hasValidator(Validators.min(3))).toEqual(false)\n   * ```\n   *\n   * @param validator The validator to check for presence. Compared by function reference.\n   * @returns Whether the provided validator was found on this control.\n   */\n  hasValidator(validator) {\n    return hasValidator(this._rawValidators, validator);\n  }\n  /**\n   * Check whether an asynchronous validator function is present on this control. The provided\n   * validator must be a reference to the exact same function that was provided.\n   *\n   * @param validator The asynchronous validator to check for presence. Compared by function\n   *     reference.\n   * @returns Whether the provided asynchronous validator was found on this control.\n   */\n  hasAsyncValidator(validator) {\n    return hasValidator(this._rawAsyncValidators, validator);\n  }\n  /**\n   * Empties out the synchronous validator list.\n   *\n   * When you add or remove a validator at run time, you must call\n   * `updateValueAndValidity()` for the new validation to take effect.\n   *\n   */\n  clearValidators() {\n    this.validator = null;\n  }\n  /**\n   * Empties out the async validator list.\n   *\n   * When you add or remove a validator at run time, you must call\n   * `updateValueAndValidity()` for the new validation to take effect.\n   *\n   */\n  clearAsyncValidators() {\n    this.asyncValidator = null;\n  }\n  markAsTouched(opts = {}) {\n    const changed = this.touched === false;\n    this.touched = true;\n    const sourceControl = opts.sourceControl ?? this;\n    if (this._parent && !opts.onlySelf) {\n      this._parent.markAsTouched({\n        ...opts,\n        sourceControl\n      });\n    }\n    if (changed && opts.emitEvent !== false) {\n      this._events.next(new TouchedChangeEvent(true, sourceControl));\n    }\n  }\n  /**\n   * Marks the control and all its descendant controls as `touched`.\n   * @see {@link markAsTouched()}\n   *\n   * @param opts Configuration options that determine how the control propagates changes\n   * and emits events after marking is applied.\n   * * `emitEvent`: When true or not supplied (the default), the `events`\n   * observable emits a `TouchedChangeEvent` with the `touched` property being `true`.\n   * When false, no events are emitted.\n   */\n  markAllAsTouched(opts = {}) {\n    this.markAsTouched({\n      onlySelf: true,\n      emitEvent: opts.emitEvent,\n      sourceControl: this\n    });\n    this._forEachChild(control => control.markAllAsTouched(opts));\n  }\n  markAsUntouched(opts = {}) {\n    const changed = this.touched === true;\n    this.touched = false;\n    this._pendingTouched = false;\n    const sourceControl = opts.sourceControl ?? this;\n    this._forEachChild(control => {\n      control.markAsUntouched({\n        onlySelf: true,\n        emitEvent: opts.emitEvent,\n        sourceControl\n      });\n    });\n    if (this._parent && !opts.onlySelf) {\n      this._parent._updateTouched(opts, sourceControl);\n    }\n    if (changed && opts.emitEvent !== false) {\n      this._events.next(new TouchedChangeEvent(false, sourceControl));\n    }\n  }\n  markAsDirty(opts = {}) {\n    const changed = this.pristine === true;\n    this.pristine = false;\n    const sourceControl = opts.sourceControl ?? this;\n    if (this._parent && !opts.onlySelf) {\n      this._parent.markAsDirty({\n        ...opts,\n        sourceControl\n      });\n    }\n    if (changed && opts.emitEvent !== false) {\n      this._events.next(new PristineChangeEvent(false, sourceControl));\n    }\n  }\n  markAsPristine(opts = {}) {\n    const changed = this.pristine === false;\n    this.pristine = true;\n    this._pendingDirty = false;\n    const sourceControl = opts.sourceControl ?? this;\n    this._forEachChild(control => {\n      /** We don't propagate the source control downwards */\n      control.markAsPristine({\n        onlySelf: true,\n        emitEvent: opts.emitEvent\n      });\n    });\n    if (this._parent && !opts.onlySelf) {\n      this._parent._updatePristine(opts, sourceControl);\n    }\n    if (changed && opts.emitEvent !== false) {\n      this._events.next(new PristineChangeEvent(true, sourceControl));\n    }\n  }\n  markAsPending(opts = {}) {\n    this.status = PENDING;\n    const sourceControl = opts.sourceControl ?? this;\n    if (opts.emitEvent !== false) {\n      this._events.next(new StatusChangeEvent(this.status, sourceControl));\n      this.statusChanges.emit(this.status);\n    }\n    if (this._parent && !opts.onlySelf) {\n      this._parent.markAsPending({\n        ...opts,\n        sourceControl\n      });\n    }\n  }\n  disable(opts = {}) {\n    // If parent has been marked artificially dirty we don't want to re-calculate the\n    // parent's dirtiness based on the children.\n    const skipPristineCheck = this._parentMarkedDirty(opts.onlySelf);\n    this.status = DISABLED;\n    this.errors = null;\n    this._forEachChild(control => {\n      /** We don't propagate the source control downwards */\n      control.disable({\n        ...opts,\n        onlySelf: true\n      });\n    });\n    this._updateValue();\n    const sourceControl = opts.sourceControl ?? this;\n    if (opts.emitEvent !== false) {\n      this._events.next(new ValueChangeEvent(this.value, sourceControl));\n      this._events.next(new StatusChangeEvent(this.status, sourceControl));\n      this.valueChanges.emit(this.value);\n      this.statusChanges.emit(this.status);\n    }\n    this._updateAncestors({\n      ...opts,\n      skipPristineCheck\n    }, this);\n    this._onDisabledChange.forEach(changeFn => changeFn(true));\n  }\n  /**\n   * Enables the control. This means the control is included in validation checks and\n   * the aggregate value of its parent. Its status recalculates based on its value and\n   * its validators.\n   *\n   * By default, if the control has children, all children are enabled.\n   *\n   * @see {@link AbstractControl.status}\n   *\n   * @param opts Configure options that control how the control propagates changes and\n   * emits events when marked as untouched\n   * * `onlySelf`: When true, mark only this control. When false or not supplied,\n   * marks all direct ancestors. Default is false.\n   * * `emitEvent`: When true or not supplied (the default), the `statusChanges`,\n   * `valueChanges` and `events`\n   * observables emit events with the latest status and value when the control is enabled.\n   * When false, no events are emitted.\n   */\n  enable(opts = {}) {\n    // If parent has been marked artificially dirty we don't want to re-calculate the\n    // parent's dirtiness based on the children.\n    const skipPristineCheck = this._parentMarkedDirty(opts.onlySelf);\n    this.status = VALID;\n    this._forEachChild(control => {\n      control.enable({\n        ...opts,\n        onlySelf: true\n      });\n    });\n    this.updateValueAndValidity({\n      onlySelf: true,\n      emitEvent: opts.emitEvent\n    });\n    this._updateAncestors({\n      ...opts,\n      skipPristineCheck\n    }, this);\n    this._onDisabledChange.forEach(changeFn => changeFn(false));\n  }\n  _updateAncestors(opts, sourceControl) {\n    if (this._parent && !opts.onlySelf) {\n      this._parent.updateValueAndValidity(opts);\n      if (!opts.skipPristineCheck) {\n        this._parent._updatePristine({}, sourceControl);\n      }\n      this._parent._updateTouched({}, sourceControl);\n    }\n  }\n  /**\n   * Sets the parent of the control\n   *\n   * @param parent The new parent.\n   */\n  setParent(parent) {\n    this._parent = parent;\n  }\n  /**\n   * The raw value of this control. For most control implementations, the raw value will include\n   * disabled children.\n   */\n  getRawValue() {\n    return this.value;\n  }\n  updateValueAndValidity(opts = {}) {\n    this._setInitialStatus();\n    this._updateValue();\n    if (this.enabled) {\n      const shouldHaveEmitted = this._cancelExistingSubscription();\n      this.errors = this._runValidator();\n      this.status = this._calculateStatus();\n      if (this.status === VALID || this.status === PENDING) {\n        // If the canceled subscription should have emitted\n        // we make sure the async validator emits the status change on completion\n        this._runAsyncValidator(shouldHaveEmitted, opts.emitEvent);\n      }\n    }\n    const sourceControl = opts.sourceControl ?? this;\n    if (opts.emitEvent !== false) {\n      this._events.next(new ValueChangeEvent(this.value, sourceControl));\n      this._events.next(new StatusChangeEvent(this.status, sourceControl));\n      this.valueChanges.emit(this.value);\n      this.statusChanges.emit(this.status);\n    }\n    if (this._parent && !opts.onlySelf) {\n      this._parent.updateValueAndValidity({\n        ...opts,\n        sourceControl\n      });\n    }\n  }\n  /** @internal */\n  _updateTreeValidity(opts = {\n    emitEvent: true\n  }) {\n    this._forEachChild(ctrl => ctrl._updateTreeValidity(opts));\n    this.updateValueAndValidity({\n      onlySelf: true,\n      emitEvent: opts.emitEvent\n    });\n  }\n  _setInitialStatus() {\n    this.status = this._allControlsDisabled() ? DISABLED : VALID;\n  }\n  _runValidator() {\n    return this.validator ? this.validator(this) : null;\n  }\n  _runAsyncValidator(shouldHaveEmitted, emitEvent) {\n    if (this.asyncValidator) {\n      this.status = PENDING;\n      this._hasOwnPendingAsyncValidator = {\n        emitEvent: emitEvent !== false\n      };\n      const obs = toObservable(this.asyncValidator(this));\n      this._asyncValidationSubscription = obs.subscribe(errors => {\n        this._hasOwnPendingAsyncValidator = null;\n        // This will trigger the recalculation of the validation status, which depends on\n        // the state of the asynchronous validation (whether it is in progress or not). So, it is\n        // necessary that we have updated the `_hasOwnPendingAsyncValidator` boolean flag first.\n        this.setErrors(errors, {\n          emitEvent,\n          shouldHaveEmitted\n        });\n      });\n    }\n  }\n  _cancelExistingSubscription() {\n    if (this._asyncValidationSubscription) {\n      this._asyncValidationSubscription.unsubscribe();\n      // we're cancelling the validator subscribtion, we keep if it should have emitted\n      // because we want to emit eventually if it was required at least once.\n      const shouldHaveEmitted = this._hasOwnPendingAsyncValidator?.emitEvent ?? false;\n      this._hasOwnPendingAsyncValidator = null;\n      return shouldHaveEmitted;\n    }\n    return false;\n  }\n  setErrors(errors, opts = {}) {\n    this.errors = errors;\n    this._updateControlsErrors(opts.emitEvent !== false, this, opts.shouldHaveEmitted);\n  }\n  /**\n   * Retrieves a child control given the control's name or path.\n   *\n   * @param path A dot-delimited string or array of string/number values that define the path to the\n   * control. If a string is provided, passing it as a string literal will result in improved type\n   * information. Likewise, if an array is provided, passing it `as const` will cause improved type\n   * information to be available.\n   *\n   * @usageNotes\n   * ### Retrieve a nested control\n   *\n   * For example, to get a `name` control nested within a `person` sub-group:\n   *\n   * * `this.form.get('person.name');`\n   *\n   * -OR-\n   *\n   * * `this.form.get(['person', 'name'] as const);` // `as const` gives improved typings\n   *\n   * ### Retrieve a control in a FormArray\n   *\n   * When accessing an element inside a FormArray, you can use an element index.\n   * For example, to get a `price` control from the first element in an `items` array you can use:\n   *\n   * * `this.form.get('items.0.price');`\n   *\n   * -OR-\n   *\n   * * `this.form.get(['items', 0, 'price']);`\n   */\n  get(path) {\n    let currPath = path;\n    if (currPath == null) return null;\n    if (!Array.isArray(currPath)) currPath = currPath.split('.');\n    if (currPath.length === 0) return null;\n    return currPath.reduce((control, name) => control && control._find(name), this);\n  }\n  /**\n   * @description\n   * Reports error data for the control with the given path.\n   *\n   * @param errorCode The code of the error to check\n   * @param path A list of control names that designates how to move from the current control\n   * to the control that should be queried for errors.\n   *\n   * @usageNotes\n   * For example, for the following `FormGroup`:\n   *\n   * ```\n   * form = new FormGroup({\n   *   address: new FormGroup({ street: new FormControl() })\n   * });\n   * ```\n   *\n   * The path to the 'street' control from the root form would be 'address' -> 'street'.\n   *\n   * It can be provided to this method in one of two formats:\n   *\n   * 1. An array of string control names, e.g. `['address', 'street']`\n   * 1. A period-delimited list of control names in one string, e.g. `'address.street'`\n   *\n   * @returns error data for that particular error. If the control or error is not present,\n   * null is returned.\n   */\n  getError(errorCode, path) {\n    const control = path ? this.get(path) : this;\n    return control && control.errors ? control.errors[errorCode] : null;\n  }\n  /**\n   * @description\n   * Reports whether the control with the given path has the error specified.\n   *\n   * @param errorCode The code of the error to check\n   * @param path A list of control names that designates how to move from the current control\n   * to the control that should be queried for errors.\n   *\n   * @usageNotes\n   * For example, for the following `FormGroup`:\n   *\n   * ```\n   * form = new FormGroup({\n   *   address: new FormGroup({ street: new FormControl() })\n   * });\n   * ```\n   *\n   * The path to the 'street' control from the root form would be 'address' -> 'street'.\n   *\n   * It can be provided to this method in one of two formats:\n   *\n   * 1. An array of string control names, e.g. `['address', 'street']`\n   * 1. A period-delimited list of control names in one string, e.g. `'address.street'`\n   *\n   * If no path is given, this method checks for the error on the current control.\n   *\n   * @returns whether the given error is present in the control at the given path.\n   *\n   * If the control is not present, false is returned.\n   */\n  hasError(errorCode, path) {\n    return !!this.getError(errorCode, path);\n  }\n  /**\n   * Retrieves the top-level ancestor of this control.\n   */\n  get root() {\n    let x = this;\n    while (x._parent) {\n      x = x._parent;\n    }\n    return x;\n  }\n  /** @internal */\n  _updateControlsErrors(emitEvent, changedControl, shouldHaveEmitted) {\n    this.status = this._calculateStatus();\n    if (emitEvent) {\n      this.statusChanges.emit(this.status);\n    }\n    // The Events Observable expose a slight different bevahior than the statusChanges obs\n    // An async validator will still emit a StatusChangeEvent is a previously cancelled\n    // async validator has emitEvent set to true\n    if (emitEvent || shouldHaveEmitted) {\n      this._events.next(new StatusChangeEvent(this.status, changedControl));\n    }\n    if (this._parent) {\n      this._parent._updateControlsErrors(emitEvent, changedControl, shouldHaveEmitted);\n    }\n  }\n  /** @internal */\n  _initObservables() {\n    this.valueChanges = new EventEmitter();\n    this.statusChanges = new EventEmitter();\n  }\n  _calculateStatus() {\n    if (this._allControlsDisabled()) return DISABLED;\n    if (this.errors) return INVALID;\n    if (this._hasOwnPendingAsyncValidator || this._anyControlsHaveStatus(PENDING)) return PENDING;\n    if (this._anyControlsHaveStatus(INVALID)) return INVALID;\n    return VALID;\n  }\n  /** @internal */\n  _anyControlsHaveStatus(status) {\n    return this._anyControls(control => control.status === status);\n  }\n  /** @internal */\n  _anyControlsDirty() {\n    return this._anyControls(control => control.dirty);\n  }\n  /** @internal */\n  _anyControlsTouched() {\n    return this._anyControls(control => control.touched);\n  }\n  /** @internal */\n  _updatePristine(opts, changedControl) {\n    const newPristine = !this._anyControlsDirty();\n    const changed = this.pristine !== newPristine;\n    this.pristine = newPristine;\n    if (this._parent && !opts.onlySelf) {\n      this._parent._updatePristine(opts, changedControl);\n    }\n    if (changed) {\n      this._events.next(new PristineChangeEvent(this.pristine, changedControl));\n    }\n  }\n  /** @internal */\n  _updateTouched(opts = {}, changedControl) {\n    this.touched = this._anyControlsTouched();\n    this._events.next(new TouchedChangeEvent(this.touched, changedControl));\n    if (this._parent && !opts.onlySelf) {\n      this._parent._updateTouched(opts, changedControl);\n    }\n  }\n  /** @internal */\n  _registerOnCollectionChange(fn) {\n    this._onCollectionChange = fn;\n  }\n  /** @internal */\n  _setUpdateStrategy(opts) {\n    if (isOptionsObj(opts) && opts.updateOn != null) {\n      this._updateOn = opts.updateOn;\n    }\n  }\n  /**\n   * Check to see if parent has been marked artificially dirty.\n   *\n   * @internal\n   */\n  _parentMarkedDirty(onlySelf) {\n    const parentDirty = this._parent && this._parent.dirty;\n    return !onlySelf && !!parentDirty && !this._parent._anyControlsDirty();\n  }\n  /** @internal */\n  _find(name) {\n    return null;\n  }\n  /**\n   * Internal implementation of the `setValidators` method. Needs to be separated out into a\n   * different method, because it is called in the constructor and it can break cases where\n   * a control is extended.\n   */\n  _assignValidators(validators) {\n    this._rawValidators = Array.isArray(validators) ? validators.slice() : validators;\n    this._composedValidatorFn = coerceToValidator(this._rawValidators);\n  }\n  /**\n   * Internal implementation of the `setAsyncValidators` method. Needs to be separated out into a\n   * different method, because it is called in the constructor and it can break cases where\n   * a control is extended.\n   */\n  _assignAsyncValidators(validators) {\n    this._rawAsyncValidators = Array.isArray(validators) ? validators.slice() : validators;\n    this._composedAsyncValidatorFn = coerceToAsyncValidator(this._rawAsyncValidators);\n  }\n}\n\n/**\n * Tracks the value and validity state of a group of `FormControl` instances.\n *\n * A `FormGroup` aggregates the values of each child `FormControl` into one object,\n * with each control name as the key.  It calculates its status by reducing the status values\n * of its children. For example, if one of the controls in a group is invalid, the entire\n * group becomes invalid.\n *\n * `FormGroup` is one of the four fundamental building blocks used to define forms in Angular,\n * along with `FormControl`, `FormArray`, and `FormRecord`.\n *\n * When instantiating a `FormGroup`, pass in a collection of child controls as the first\n * argument. The key for each child registers the name for the control.\n *\n * `FormGroup` is intended for use cases where the keys are known ahead of time.\n * If you need to dynamically add and remove controls, use {@link FormRecord} instead.\n *\n * `FormGroup` accepts an optional type parameter `TControl`, which is an object type with inner\n * control types as values.\n *\n * @usageNotes\n *\n * ### Create a form group with 2 controls\n *\n * ```\n * const form = new FormGroup({\n *   first: new FormControl('Nancy', Validators.minLength(2)),\n *   last: new FormControl('Drew'),\n * });\n *\n * console.log(form.value);   // {first: 'Nancy', last; 'Drew'}\n * console.log(form.status);  // 'VALID'\n * ```\n *\n * ### The type argument, and optional controls\n *\n * `FormGroup` accepts one generic argument, which is an object containing its inner controls.\n * This type will usually be inferred automatically, but you can always specify it explicitly if you\n * wish.\n *\n * If you have controls that are optional (i.e. they can be removed, you can use the `?` in the\n * type):\n *\n * ```\n * const form = new FormGroup<{\n *   first: FormControl<string|null>,\n *   middle?: FormControl<string|null>, // Middle name is optional.\n *   last: FormControl<string|null>,\n * }>({\n *   first: new FormControl('Nancy'),\n *   last: new FormControl('Drew'),\n * });\n * ```\n *\n * ### Create a form group with a group-level validator\n *\n * You include group-level validators as the second arg, or group-level async\n * validators as the third arg. These come in handy when you want to perform validation\n * that considers the value of more than one child control.\n *\n * ```\n * const form = new FormGroup({\n *   password: new FormControl('', Validators.minLength(2)),\n *   passwordConfirm: new FormControl('', Validators.minLength(2)),\n * }, passwordMatchValidator);\n *\n *\n * function passwordMatchValidator(g: FormGroup) {\n *    return g.get('password').value === g.get('passwordConfirm').value\n *       ? null : {'mismatch': true};\n * }\n * ```\n *\n * Like `FormControl` instances, you choose to pass in\n * validators and async validators as part of an options object.\n *\n * ```\n * const form = new FormGroup({\n *   password: new FormControl('')\n *   passwordConfirm: new FormControl('')\n * }, { validators: passwordMatchValidator, asyncValidators: otherValidator });\n * ```\n *\n * ### Set the updateOn property for all controls in a form group\n *\n * The options object is used to set a default value for each child\n * control's `updateOn` property. If you set `updateOn` to `'blur'` at the\n * group level, all child controls default to 'blur', unless the child\n * has explicitly specified a different `updateOn` value.\n *\n * ```ts\n * const c = new FormGroup({\n *   one: new FormControl()\n * }, { updateOn: 'blur' });\n * ```\n *\n * ### Using a FormGroup with optional controls\n *\n * It is possible to have optional controls in a FormGroup. An optional control can be removed later\n * using `removeControl`, and can be omitted when calling `reset`. Optional controls must be\n * declared optional in the group's type.\n *\n * ```ts\n * const c = new FormGroup<{one?: FormControl<string>}>({\n *   one: new FormControl('')\n * });\n * ```\n *\n * Notice that `c.value.one` has type `string|null|undefined`. This is because calling `c.reset({})`\n * without providing the optional key `one` will cause it to become `null`.\n *\n * @publicApi\n */\nclass FormGroup extends AbstractControl {\n  /**\n   * Creates a new `FormGroup` instance.\n   *\n   * @param controls A collection of child controls. The key for each child is the name\n   * under which it is registered.\n   *\n   * @param validatorOrOpts A synchronous validator function, or an array of\n   * such functions, or an `AbstractControlOptions` object that contains validation functions\n   * and a validation trigger.\n   *\n   * @param asyncValidator A single async validator or array of async validator functions\n   *\n   */\n  constructor(controls, validatorOrOpts, asyncValidator) {\n    super(pickValidators(validatorOrOpts), pickAsyncValidators(asyncValidator, validatorOrOpts));\n    (typeof ngDevMode === 'undefined' || ngDevMode) && validateFormGroupControls(controls);\n    this.controls = controls;\n    this._initObservables();\n    this._setUpdateStrategy(validatorOrOpts);\n    this._setUpControls();\n    this.updateValueAndValidity({\n      onlySelf: true,\n      // If `asyncValidator` is present, it will trigger control status change from `PENDING` to\n      // `VALID` or `INVALID`. The status should be broadcasted via the `statusChanges` observable,\n      // so we set `emitEvent` to `true` to allow that during the control creation process.\n      emitEvent: !!this.asyncValidator\n    });\n  }\n  registerControl(name, control) {\n    if (this.controls[name]) return this.controls[name];\n    this.controls[name] = control;\n    control.setParent(this);\n    control._registerOnCollectionChange(this._onCollectionChange);\n    return control;\n  }\n  addControl(name, control, options = {}) {\n    this.registerControl(name, control);\n    this.updateValueAndValidity({\n      emitEvent: options.emitEvent\n    });\n    this._onCollectionChange();\n  }\n  /**\n   * Remove a control from this group. In a strongly-typed group, required controls cannot be\n   * removed.\n   *\n   * This method also updates the value and validity of the control.\n   *\n   * @param name The control name to remove from the collection\n   * @param options Specifies whether this FormGroup instance should emit events after a\n   *     control is removed.\n   * * `emitEvent`: When true or not supplied (the default), both the `statusChanges` and\n   * `valueChanges` observables emit events with the latest status and value when the control is\n   * removed. When false, no events are emitted.\n   */\n  removeControl(name, options = {}) {\n    if (this.controls[name]) this.controls[name]._registerOnCollectionChange(() => {});\n    delete this.controls[name];\n    this.updateValueAndValidity({\n      emitEvent: options.emitEvent\n    });\n    this._onCollectionChange();\n  }\n  setControl(name, control, options = {}) {\n    if (this.controls[name]) this.controls[name]._registerOnCollectionChange(() => {});\n    delete this.controls[name];\n    if (control) this.registerControl(name, control);\n    this.updateValueAndValidity({\n      emitEvent: options.emitEvent\n    });\n    this._onCollectionChange();\n  }\n  contains(controlName) {\n    return this.controls.hasOwnProperty(controlName) && this.controls[controlName].enabled;\n  }\n  /**\n   * Sets the value of the `FormGroup`. It accepts an object that matches\n   * the structure of the group, with control names as keys.\n   *\n   * @usageNotes\n   * ### Set the complete value for the form group\n   *\n   * ```\n   * const form = new FormGroup({\n   *   first: new FormControl(),\n   *   last: new FormControl()\n   * });\n   *\n   * console.log(form.value);   // {first: null, last: null}\n   *\n   * form.setValue({first: 'Nancy', last: 'Drew'});\n   * console.log(form.value);   // {first: 'Nancy', last: 'Drew'}\n   * ```\n   *\n   * @throws When strict checks fail, such as setting the value of a control\n   * that doesn't exist or if you exclude a value of a control that does exist.\n   *\n   * @param value The new value for the control that matches the structure of the group.\n   * @param options Configuration options that determine how the control propagates changes\n   * and emits events after the value changes.\n   * The configuration options are passed to the {@link AbstractControl#updateValueAndValidity\n   * updateValueAndValidity} method.\n   *\n   * * `onlySelf`: When true, each change only affects this control, and not its parent. Default is\n   * false.\n   * * `emitEvent`: When true or not supplied (the default), both the `statusChanges` and\n   * `valueChanges`\n   * observables emit events with the latest status and value when the control value is updated.\n   * When false, no events are emitted.\n   */\n  setValue(value, options = {}) {\n    assertAllValuesPresent(this, true, value);\n    Object.keys(value).forEach(name => {\n      assertControlPresent(this, true, name);\n      this.controls[name].setValue(value[name], {\n        onlySelf: true,\n        emitEvent: options.emitEvent\n      });\n    });\n    this.updateValueAndValidity(options);\n  }\n  /**\n   * Patches the value of the `FormGroup`. It accepts an object with control\n   * names as keys, and does its best to match the values to the correct controls\n   * in the group.\n   *\n   * It accepts both super-sets and sub-sets of the group without throwing an error.\n   *\n   * @usageNotes\n   * ### Patch the value for a form group\n   *\n   * ```\n   * const form = new FormGroup({\n   *    first: new FormControl(),\n   *    last: new FormControl()\n   * });\n   * console.log(form.value);   // {first: null, last: null}\n   *\n   * form.patchValue({first: 'Nancy'});\n   * console.log(form.value);   // {first: 'Nancy', last: null}\n   * ```\n   *\n   * @param value The object that matches the structure of the group.\n   * @param options Configuration options that determine how the control propagates changes and\n   * emits events after the value is patched.\n   * * `onlySelf`: When true, each change only affects this control and not its parent. Default is\n   * true.\n   * * `emitEvent`: When true or not supplied (the default), both the `statusChanges` and\n   * `valueChanges` observables emit events with the latest status and value when the control value\n   * is updated. When false, no events are emitted. The configuration options are passed to\n   * the {@link AbstractControl#updateValueAndValidity updateValueAndValidity} method.\n   */\n  patchValue(value, options = {}) {\n    // Even though the `value` argument type doesn't allow `null` and `undefined` values, the\n    // `patchValue` can be called recursively and inner data structures might have these values, so\n    // we just ignore such cases when a field containing FormGroup instance receives `null` or\n    // `undefined` as a value.\n    if (value == null /* both `null` and `undefined` */) return;\n    Object.keys(value).forEach(name => {\n      // The compiler cannot see through the uninstantiated conditional type of `this.controls`, so\n      // `as any` is required.\n      const control = this.controls[name];\n      if (control) {\n        control.patchValue( /* Guaranteed to be present, due to the outer forEach. */value[name], {\n          onlySelf: true,\n          emitEvent: options.emitEvent\n        });\n      }\n    });\n    this.updateValueAndValidity(options);\n  }\n  /**\n   * Resets the `FormGroup`, marks all descendants `pristine` and `untouched` and sets\n   * the value of all descendants to their default values, or null if no defaults were provided.\n   *\n   * You reset to a specific form state by passing in a map of states\n   * that matches the structure of your form, with control names as keys. The state\n   * is a standalone value or a form state object with both a value and a disabled\n   * status.\n   *\n   * @param value Resets the control with an initial value,\n   * or an object that defines the initial value and disabled state.\n   *\n   * @param options Configuration options that determine how the control propagates changes\n   * and emits events when the group is reset.\n   * * `onlySelf`: When true, each change only affects this control, and not its parent. Default is\n   * false.\n   * * `emitEvent`: When true or not supplied (the default), both the `statusChanges` and\n   * `valueChanges`\n   * observables emit events with the latest status and value when the control is reset.\n   * When false, no events are emitted.\n   * The configuration options are passed to the {@link AbstractControl#updateValueAndValidity\n   * updateValueAndValidity} method.\n   *\n   * @usageNotes\n   *\n   * ### Reset the form group values\n   *\n   * ```ts\n   * const form = new FormGroup({\n   *   first: new FormControl('first name'),\n   *   last: new FormControl('last name')\n   * });\n   *\n   * console.log(form.value);  // {first: 'first name', last: 'last name'}\n   *\n   * form.reset({ first: 'name', last: 'last name' });\n   *\n   * console.log(form.value);  // {first: 'name', last: 'last name'}\n   * ```\n   *\n   * ### Reset the form group values and disabled status\n   *\n   * ```\n   * const form = new FormGroup({\n   *   first: new FormControl('first name'),\n   *   last: new FormControl('last name')\n   * });\n   *\n   * form.reset({\n   *   first: {value: 'name', disabled: true},\n   *   last: 'last'\n   * });\n   *\n   * console.log(form.value);  // {last: 'last'}\n   * console.log(form.get('first').status);  // 'DISABLED'\n   * ```\n   */\n  reset(value = {}, options = {}) {\n    this._forEachChild((control, name) => {\n      control.reset(value ? value[name] : null, {\n        onlySelf: true,\n        emitEvent: options.emitEvent\n      });\n    });\n    this._updatePristine(options, this);\n    this._updateTouched(options, this);\n    this.updateValueAndValidity(options);\n  }\n  /**\n   * The aggregate value of the `FormGroup`, including any disabled controls.\n   *\n   * Retrieves all values regardless of disabled status.\n   */\n  getRawValue() {\n    return this._reduceChildren({}, (acc, control, name) => {\n      acc[name] = control.getRawValue();\n      return acc;\n    });\n  }\n  /** @internal */\n  _syncPendingControls() {\n    let subtreeUpdated = this._reduceChildren(false, (updated, child) => {\n      return child._syncPendingControls() ? true : updated;\n    });\n    if (subtreeUpdated) this.updateValueAndValidity({\n      onlySelf: true\n    });\n    return subtreeUpdated;\n  }\n  /** @internal */\n  _forEachChild(cb) {\n    Object.keys(this.controls).forEach(key => {\n      // The list of controls can change (for ex. controls might be removed) while the loop\n      // is running (as a result of invoking Forms API in `valueChanges` subscription), so we\n      // have to null check before invoking the callback.\n      const control = this.controls[key];\n      control && cb(control, key);\n    });\n  }\n  /** @internal */\n  _setUpControls() {\n    this._forEachChild(control => {\n      control.setParent(this);\n      control._registerOnCollectionChange(this._onCollectionChange);\n    });\n  }\n  /** @internal */\n  _updateValue() {\n    this.value = this._reduceValue();\n  }\n  /** @internal */\n  _anyControls(condition) {\n    for (const [controlName, control] of Object.entries(this.controls)) {\n      if (this.contains(controlName) && condition(control)) {\n        return true;\n      }\n    }\n    return false;\n  }\n  /** @internal */\n  _reduceValue() {\n    let acc = {};\n    return this._reduceChildren(acc, (acc, control, name) => {\n      if (control.enabled || this.disabled) {\n        acc[name] = control.value;\n      }\n      return acc;\n    });\n  }\n  /** @internal */\n  _reduceChildren(initValue, fn) {\n    let res = initValue;\n    this._forEachChild((control, name) => {\n      res = fn(res, control, name);\n    });\n    return res;\n  }\n  /** @internal */\n  _allControlsDisabled() {\n    for (const controlName of Object.keys(this.controls)) {\n      if (this.controls[controlName].enabled) {\n        return false;\n      }\n    }\n    return Object.keys(this.controls).length > 0 || this.disabled;\n  }\n  /** @internal */\n  _find(name) {\n    return this.controls.hasOwnProperty(name) ? this.controls[name] : null;\n  }\n}\n/**\n * Will validate that none of the controls has a key with a dot\n * Throws other wise\n */\nfunction validateFormGroupControls(controls) {\n  const invalidKeys = Object.keys(controls).filter(key => key.includes('.'));\n  if (invalidKeys.length > 0) {\n    // TODO: make this an error once there are no more uses in G3\n    console.warn(`FormGroup keys cannot include \\`.\\`, please replace the keys for: ${invalidKeys.join(',')}.`);\n  }\n}\nconst UntypedFormGroup = FormGroup;\n/**\n * @description\n * Asserts that the given control is an instance of `FormGroup`\n *\n * @publicApi\n */\nconst isFormGroup = control => control instanceof FormGroup;\n/**\n * Tracks the value and validity state of a collection of `FormControl` instances, each of which has\n * the same value type.\n *\n * `FormRecord` is very similar to {@link FormGroup}, except it can be used with a dynamic keys,\n * with controls added and removed as needed.\n *\n * `FormRecord` accepts one generic argument, which describes the type of the controls it contains.\n *\n * @usageNotes\n *\n * ```\n * let numbers = new FormRecord({bill: new FormControl('415-123-456')});\n * numbers.addControl('bob', new FormControl('415-234-567'));\n * numbers.removeControl('bill');\n * ```\n *\n * @publicApi\n */\nclass FormRecord extends FormGroup {}\n/**\n * @description\n * Asserts that the given control is an instance of `FormRecord`\n *\n * @publicApi\n */\nconst isFormRecord = control => control instanceof FormRecord;\n\n/**\n * Token to provide to allow SetDisabledState to always be called when a CVA is added, regardless of\n * whether the control is disabled or enabled.\n *\n * @see {@link FormsModule#withconfig}\n */\nconst CALL_SET_DISABLED_STATE = new InjectionToken('CallSetDisabledState', {\n  providedIn: 'root',\n  factory: () => setDisabledStateDefault\n});\n/**\n * Whether to use the fixed setDisabledState behavior by default.\n */\nconst setDisabledStateDefault = 'always';\nfunction controlPath(name, parent) {\n  return [...parent.path, name];\n}\n/**\n * Links a Form control and a Form directive by setting up callbacks (such as `onChange`) on both\n * instances. This function is typically invoked when form directive is being initialized.\n *\n * @param control Form control instance that should be linked.\n * @param dir Directive that should be linked with a given control.\n */\nfunction setUpControl(control, dir, callSetDisabledState = setDisabledStateDefault) {\n  if (typeof ngDevMode === 'undefined' || ngDevMode) {\n    if (!control) _throwError(dir, 'Cannot find control with');\n    if (!dir.valueAccessor) _throwMissingValueAccessorError(dir);\n  }\n  setUpValidators(control, dir);\n  dir.valueAccessor.writeValue(control.value);\n  // The legacy behavior only calls the CVA's `setDisabledState` if the control is disabled.\n  // If the `callSetDisabledState` option is set to `always`, then this bug is fixed and\n  // the method is always called.\n  if (control.disabled || callSetDisabledState === 'always') {\n    dir.valueAccessor.setDisabledState?.(control.disabled);\n  }\n  setUpViewChangePipeline(control, dir);\n  setUpModelChangePipeline(control, dir);\n  setUpBlurPipeline(control, dir);\n  setUpDisabledChangeHandler(control, dir);\n}\n/**\n * Reverts configuration performed by the `setUpControl` control function.\n * Effectively disconnects form control with a given form directive.\n * This function is typically invoked when corresponding form directive is being destroyed.\n *\n * @param control Form control which should be cleaned up.\n * @param dir Directive that should be disconnected from a given control.\n * @param validateControlPresenceOnChange Flag that indicates whether onChange handler should\n *     contain asserts to verify that it's not called once directive is destroyed. We need this flag\n *     to avoid potentially breaking changes caused by better control cleanup introduced in #39235.\n */\nfunction cleanUpControl(control, dir, validateControlPresenceOnChange = true) {\n  const noop = () => {\n    if (validateControlPresenceOnChange && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n      _noControlError(dir);\n    }\n  };\n  // The `valueAccessor` field is typically defined on FromControl and FormControlName directive\n  // instances and there is a logic in `selectValueAccessor` function that throws if it's not the\n  // case. We still check the presence of `valueAccessor` before invoking its methods to make sure\n  // that cleanup works correctly if app code or tests are setup to ignore the error thrown from\n  // `selectValueAccessor`. See https://github.com/angular/angular/issues/40521.\n  if (dir.valueAccessor) {\n    dir.valueAccessor.registerOnChange(noop);\n    dir.valueAccessor.registerOnTouched(noop);\n  }\n  cleanUpValidators(control, dir);\n  if (control) {\n    dir._invokeOnDestroyCallbacks();\n    control._registerOnCollectionChange(() => {});\n  }\n}\nfunction registerOnValidatorChange(validators, onChange) {\n  validators.forEach(validator => {\n    if (validator.registerOnValidatorChange) validator.registerOnValidatorChange(onChange);\n  });\n}\n/**\n * Sets up disabled change handler function on a given form control if ControlValueAccessor\n * associated with a given directive instance supports the `setDisabledState` call.\n *\n * @param control Form control where disabled change handler should be setup.\n * @param dir Corresponding directive instance associated with this control.\n */\nfunction setUpDisabledChangeHandler(control, dir) {\n  if (dir.valueAccessor.setDisabledState) {\n    const onDisabledChange = isDisabled => {\n      dir.valueAccessor.setDisabledState(isDisabled);\n    };\n    control.registerOnDisabledChange(onDisabledChange);\n    // Register a callback function to cleanup disabled change handler\n    // from a control instance when a directive is destroyed.\n    dir._registerOnDestroy(() => {\n      control._unregisterOnDisabledChange(onDisabledChange);\n    });\n  }\n}\n/**\n * Sets up sync and async directive validators on provided form control.\n * This function merges validators from the directive into the validators of the control.\n *\n * @param control Form control where directive validators should be setup.\n * @param dir Directive instance that contains validators to be setup.\n */\nfunction setUpValidators(control, dir) {\n  const validators = getControlValidators(control);\n  if (dir.validator !== null) {\n    control.setValidators(mergeValidators(validators, dir.validator));\n  } else if (typeof validators === 'function') {\n    // If sync validators are represented by a single validator function, we force the\n    // `Validators.compose` call to happen by executing the `setValidators` function with\n    // an array that contains that function. We need this to avoid possible discrepancies in\n    // validators behavior, so sync validators are always processed by the `Validators.compose`.\n    // Note: we should consider moving this logic inside the `setValidators` function itself, so we\n    // have consistent behavior on AbstractControl API level. The same applies to the async\n    // validators logic below.\n    control.setValidators([validators]);\n  }\n  const asyncValidators = getControlAsyncValidators(control);\n  if (dir.asyncValidator !== null) {\n    control.setAsyncValidators(mergeValidators(asyncValidators, dir.asyncValidator));\n  } else if (typeof asyncValidators === 'function') {\n    control.setAsyncValidators([asyncValidators]);\n  }\n  // Re-run validation when validator binding changes, e.g. minlength=3 -> minlength=4\n  const onValidatorChange = () => control.updateValueAndValidity();\n  registerOnValidatorChange(dir._rawValidators, onValidatorChange);\n  registerOnValidatorChange(dir._rawAsyncValidators, onValidatorChange);\n}\n/**\n * Cleans up sync and async directive validators on provided form control.\n * This function reverts the setup performed by the `setUpValidators` function, i.e.\n * removes directive-specific validators from a given control instance.\n *\n * @param control Form control from where directive validators should be removed.\n * @param dir Directive instance that contains validators to be removed.\n * @returns true if a control was updated as a result of this action.\n */\nfunction cleanUpValidators(control, dir) {\n  let isControlUpdated = false;\n  if (control !== null) {\n    if (dir.validator !== null) {\n      const validators = getControlValidators(control);\n      if (Array.isArray(validators) && validators.length > 0) {\n        // Filter out directive validator function.\n        const updatedValidators = validators.filter(validator => validator !== dir.validator);\n        if (updatedValidators.length !== validators.length) {\n          isControlUpdated = true;\n          control.setValidators(updatedValidators);\n        }\n      }\n    }\n    if (dir.asyncValidator !== null) {\n      const asyncValidators = getControlAsyncValidators(control);\n      if (Array.isArray(asyncValidators) && asyncValidators.length > 0) {\n        // Filter out directive async validator function.\n        const updatedAsyncValidators = asyncValidators.filter(asyncValidator => asyncValidator !== dir.asyncValidator);\n        if (updatedAsyncValidators.length !== asyncValidators.length) {\n          isControlUpdated = true;\n          control.setAsyncValidators(updatedAsyncValidators);\n        }\n      }\n    }\n  }\n  // Clear onValidatorChange callbacks by providing a noop function.\n  const noop = () => {};\n  registerOnValidatorChange(dir._rawValidators, noop);\n  registerOnValidatorChange(dir._rawAsyncValidators, noop);\n  return isControlUpdated;\n}\nfunction setUpViewChangePipeline(control, dir) {\n  dir.valueAccessor.registerOnChange(newValue => {\n    control._pendingValue = newValue;\n    control._pendingChange = true;\n    control._pendingDirty = true;\n    if (control.updateOn === 'change') updateControl(control, dir);\n  });\n}\nfunction setUpBlurPipeline(control, dir) {\n  dir.valueAccessor.registerOnTouched(() => {\n    control._pendingTouched = true;\n    if (control.updateOn === 'blur' && control._pendingChange) updateControl(control, dir);\n    if (control.updateOn !== 'submit') control.markAsTouched();\n  });\n}\nfunction updateControl(control, dir) {\n  if (control._pendingDirty) control.markAsDirty();\n  control.setValue(control._pendingValue, {\n    emitModelToViewChange: false\n  });\n  dir.viewToModelUpdate(control._pendingValue);\n  control._pendingChange = false;\n}\nfunction setUpModelChangePipeline(control, dir) {\n  const onChange = (newValue, emitModelEvent) => {\n    // control -> view\n    dir.valueAccessor.writeValue(newValue);\n    // control -> ngModel\n    if (emitModelEvent) dir.viewToModelUpdate(newValue);\n  };\n  control.registerOnChange(onChange);\n  // Register a callback function to cleanup onChange handler\n  // from a control instance when a directive is destroyed.\n  dir._registerOnDestroy(() => {\n    control._unregisterOnChange(onChange);\n  });\n}\n/**\n * Links a FormGroup or FormArray instance and corresponding Form directive by setting up validators\n * present in the view.\n *\n * @param control FormGroup or FormArray instance that should be linked.\n * @param dir Directive that provides view validators.\n */\nfunction setUpFormContainer(control, dir) {\n  if (control == null && (typeof ngDevMode === 'undefined' || ngDevMode)) _throwError(dir, 'Cannot find control with');\n  setUpValidators(control, dir);\n}\n/**\n * Reverts the setup performed by the `setUpFormContainer` function.\n *\n * @param control FormGroup or FormArray instance that should be cleaned up.\n * @param dir Directive that provided view validators.\n * @returns true if a control was updated as a result of this action.\n */\nfunction cleanUpFormContainer(control, dir) {\n  return cleanUpValidators(control, dir);\n}\nfunction _noControlError(dir) {\n  return _throwError(dir, 'There is no FormControl instance attached to form control element with');\n}\nfunction _throwError(dir, message) {\n  const messageEnd = _describeControlLocation(dir);\n  throw new Error(`${message} ${messageEnd}`);\n}\nfunction _describeControlLocation(dir) {\n  const path = dir.path;\n  if (path && path.length > 1) return `path: '${path.join(' -> ')}'`;\n  if (path?.[0]) return `name: '${path}'`;\n  return 'unspecified name attribute';\n}\nfunction _throwMissingValueAccessorError(dir) {\n  const loc = _describeControlLocation(dir);\n  throw new ɵRuntimeError(-1203 /* RuntimeErrorCode.NG_MISSING_VALUE_ACCESSOR */, `No value accessor for form control ${loc}.`);\n}\nfunction _throwInvalidValueAccessorError(dir) {\n  const loc = _describeControlLocation(dir);\n  throw new ɵRuntimeError(1200 /* RuntimeErrorCode.NG_VALUE_ACCESSOR_NOT_PROVIDED */, `Value accessor was not provided as an array for form control with ${loc}. ` + `Check that the \\`NG_VALUE_ACCESSOR\\` token is configured as a \\`multi: true\\` provider.`);\n}\nfunction isPropertyUpdated(changes, viewModel) {\n  if (!changes.hasOwnProperty('model')) return false;\n  const change = changes['model'];\n  if (change.isFirstChange()) return true;\n  return !Object.is(viewModel, change.currentValue);\n}\nfunction isBuiltInAccessor(valueAccessor) {\n  // Check if a given value accessor is an instance of a class that directly extends\n  // `BuiltInControlValueAccessor` one.\n  return Object.getPrototypeOf(valueAccessor.constructor) === BuiltInControlValueAccessor;\n}\nfunction syncPendingControls(form, directives) {\n  form._syncPendingControls();\n  directives.forEach(dir => {\n    const control = dir.control;\n    if (control.updateOn === 'submit' && control._pendingChange) {\n      dir.viewToModelUpdate(control._pendingValue);\n      control._pendingChange = false;\n    }\n  });\n}\n// TODO: vsavkin remove it once https://github.com/angular/angular/issues/3011 is implemented\nfunction selectValueAccessor(dir, valueAccessors) {\n  if (!valueAccessors) return null;\n  if (!Array.isArray(valueAccessors) && (typeof ngDevMode === 'undefined' || ngDevMode)) _throwInvalidValueAccessorError(dir);\n  let defaultAccessor = undefined;\n  let builtinAccessor = undefined;\n  let customAccessor = undefined;\n  valueAccessors.forEach(v => {\n    if (v.constructor === DefaultValueAccessor) {\n      defaultAccessor = v;\n    } else if (isBuiltInAccessor(v)) {\n      if (builtinAccessor && (typeof ngDevMode === 'undefined' || ngDevMode)) _throwError(dir, 'More than one built-in value accessor matches form control with');\n      builtinAccessor = v;\n    } else {\n      if (customAccessor && (typeof ngDevMode === 'undefined' || ngDevMode)) _throwError(dir, 'More than one custom value accessor matches form control with');\n      customAccessor = v;\n    }\n  });\n  if (customAccessor) return customAccessor;\n  if (builtinAccessor) return builtinAccessor;\n  if (defaultAccessor) return defaultAccessor;\n  if (typeof ngDevMode === 'undefined' || ngDevMode) {\n    _throwError(dir, 'No valid value accessor for form control with');\n  }\n  return null;\n}\nfunction removeListItem$1(list, el) {\n  const index = list.indexOf(el);\n  if (index > -1) list.splice(index, 1);\n}\n// TODO(kara): remove after deprecation period\nfunction _ngModelWarning(name, type, instance, warningConfig) {\n  if (warningConfig === 'never') return;\n  if ((warningConfig === null || warningConfig === 'once') && !type._ngModelWarningSentOnce || warningConfig === 'always' && !instance._ngModelWarningSent) {\n    console.warn(ngModelWarning(name));\n    type._ngModelWarningSentOnce = true;\n    instance._ngModelWarningSent = true;\n  }\n}\nconst formDirectiveProvider$1 = {\n  provide: ControlContainer,\n  useExisting: forwardRef(() => NgForm)\n};\nconst resolvedPromise$1 = (() => Promise.resolve())();\n/**\n * @description\n * Creates a top-level `FormGroup` instance and binds it to a form\n * to track aggregate form value and validation status.\n *\n * As soon as you import the `FormsModule`, this directive becomes active by default on\n * all `<form>` tags.  You don't need to add a special selector.\n *\n * You optionally export the directive into a local template variable using `ngForm` as the key\n * (ex: `#myForm=\"ngForm\"`). This is optional, but useful.  Many properties from the underlying\n * `FormGroup` instance are duplicated on the directive itself, so a reference to it\n * gives you access to the aggregate value and validity status of the form, as well as\n * user interaction properties like `dirty` and `touched`.\n *\n * To register child controls with the form, use `NgModel` with a `name`\n * attribute. You may use `NgModelGroup` to create sub-groups within the form.\n *\n * If necessary, listen to the directive's `ngSubmit` event to be notified when the user has\n * triggered a form submission. The `ngSubmit` event emits the original form\n * submission event.\n *\n * In template driven forms, all `<form>` tags are automatically tagged as `NgForm`.\n * To import the `FormsModule` but skip its usage in some forms,\n * for example, to use native HTML5 validation, add the `ngNoForm` and the `<form>`\n * tags won't create an `NgForm` directive. In reactive forms, using `ngNoForm` is\n * unnecessary because the `<form>` tags are inert. In that case, you would\n * refrain from using the `formGroup` directive.\n *\n * @usageNotes\n *\n * ### Listening for form submission\n *\n * The following example shows how to capture the form values from the \"ngSubmit\" event.\n *\n * {@example forms/ts/simpleForm/simple_form_example.ts region='Component'}\n *\n * ### Setting the update options\n *\n * The following example shows you how to change the \"updateOn\" option from its default using\n * ngFormOptions.\n *\n * ```html\n * <form [ngFormOptions]=\"{updateOn: 'blur'}\">\n *    <input name=\"one\" ngModel>  <!-- this ngModel will update on blur -->\n * </form>\n * ```\n *\n * ### Native DOM validation UI\n *\n * In order to prevent the native DOM form validation UI from interfering with Angular's form\n * validation, Angular automatically adds the `novalidate` attribute on any `<form>` whenever\n * `FormModule` or `ReactiveFormModule` are imported into the application.\n * If you want to explicitly enable native DOM validation UI with Angular forms, you can add the\n * `ngNativeValidate` attribute to the `<form>` element:\n *\n * ```html\n * <form ngNativeValidate>\n *   ...\n * </form>\n * ```\n *\n * @ngModule FormsModule\n * @publicApi\n */\nclass NgForm extends ControlContainer {\n  /**\n   * @description\n   * Returns whether the form submission has been triggered.\n   */\n  get submitted() {\n    return untracked(this.submittedReactive);\n  }\n  constructor(validators, asyncValidators, callSetDisabledState) {\n    super();\n    this.callSetDisabledState = callSetDisabledState;\n    /** @internal */\n    this._submitted = computed(() => this.submittedReactive());\n    this.submittedReactive = signal(false);\n    this._directives = new Set();\n    /**\n     * @description\n     * Event emitter for the \"ngSubmit\" event\n     */\n    this.ngSubmit = new EventEmitter();\n    this.form = new FormGroup({}, composeValidators(validators), composeAsyncValidators(asyncValidators));\n  }\n  /** @nodoc */\n  ngAfterViewInit() {\n    this._setUpdateStrategy();\n  }\n  /**\n   * @description\n   * The directive instance.\n   */\n  get formDirective() {\n    return this;\n  }\n  /**\n   * @description\n   * The internal `FormGroup` instance.\n   */\n  get control() {\n    return this.form;\n  }\n  /**\n   * @description\n   * Returns an array representing the path to this group. Because this directive\n   * always lives at the top level of a form, it is always an empty array.\n   */\n  get path() {\n    return [];\n  }\n  /**\n   * @description\n   * Returns a map of the controls in this group.\n   */\n  get controls() {\n    return this.form.controls;\n  }\n  /**\n   * @description\n   * Method that sets up the control directive in this group, re-calculates its value\n   * and validity, and adds the instance to the internal list of directives.\n   *\n   * @param dir The `NgModel` directive instance.\n   */\n  addControl(dir) {\n    resolvedPromise$1.then(() => {\n      const container = this._findContainer(dir.path);\n      dir.control = container.registerControl(dir.name, dir.control);\n      setUpControl(dir.control, dir, this.callSetDisabledState);\n      dir.control.updateValueAndValidity({\n        emitEvent: false\n      });\n      this._directives.add(dir);\n    });\n  }\n  /**\n   * @description\n   * Retrieves the `FormControl` instance from the provided `NgModel` directive.\n   *\n   * @param dir The `NgModel` directive instance.\n   */\n  getControl(dir) {\n    return this.form.get(dir.path);\n  }\n  /**\n   * @description\n   * Removes the `NgModel` instance from the internal list of directives\n   *\n   * @param dir The `NgModel` directive instance.\n   */\n  removeControl(dir) {\n    resolvedPromise$1.then(() => {\n      const container = this._findContainer(dir.path);\n      if (container) {\n        container.removeControl(dir.name);\n      }\n      this._directives.delete(dir);\n    });\n  }\n  /**\n   * @description\n   * Adds a new `NgModelGroup` directive instance to the form.\n   *\n   * @param dir The `NgModelGroup` directive instance.\n   */\n  addFormGroup(dir) {\n    resolvedPromise$1.then(() => {\n      const container = this._findContainer(dir.path);\n      const group = new FormGroup({});\n      setUpFormContainer(group, dir);\n      container.registerControl(dir.name, group);\n      group.updateValueAndValidity({\n        emitEvent: false\n      });\n    });\n  }\n  /**\n   * @description\n   * Removes the `NgModelGroup` directive instance from the form.\n   *\n   * @param dir The `NgModelGroup` directive instance.\n   */\n  removeFormGroup(dir) {\n    resolvedPromise$1.then(() => {\n      const container = this._findContainer(dir.path);\n      if (container) {\n        container.removeControl(dir.name);\n      }\n    });\n  }\n  /**\n   * @description\n   * Retrieves the `FormGroup` for a provided `NgModelGroup` directive instance\n   *\n   * @param dir The `NgModelGroup` directive instance.\n   */\n  getFormGroup(dir) {\n    return this.form.get(dir.path);\n  }\n  /**\n   * Sets the new value for the provided `NgControl` directive.\n   *\n   * @param dir The `NgControl` directive instance.\n   * @param value The new value for the directive's control.\n   */\n  updateModel(dir, value) {\n    resolvedPromise$1.then(() => {\n      const ctrl = this.form.get(dir.path);\n      ctrl.setValue(value);\n    });\n  }\n  /**\n   * @description\n   * Sets the value for this `FormGroup`.\n   *\n   * @param value The new value\n   */\n  setValue(value) {\n    this.control.setValue(value);\n  }\n  /**\n   * @description\n   * Method called when the \"submit\" event is triggered on the form.\n   * Triggers the `ngSubmit` emitter to emit the \"submit\" event as its payload.\n   *\n   * @param $event The \"submit\" event object\n   */\n  onSubmit($event) {\n    this.submittedReactive.set(true);\n    syncPendingControls(this.form, this._directives);\n    this.ngSubmit.emit($event);\n    // Forms with `method=\"dialog\"` have some special behavior\n    // that won't reload the page and that shouldn't be prevented.\n    return $event?.target?.method === 'dialog';\n  }\n  /**\n   * @description\n   * Method called when the \"reset\" event is triggered on the form.\n   */\n  onReset() {\n    this.resetForm();\n  }\n  /**\n   * @description\n   * Resets the form to an initial value and resets its submitted status.\n   *\n   * @param value The new value for the form.\n   */\n  resetForm(value = undefined) {\n    this.form.reset(value);\n    this.submittedReactive.set(false);\n  }\n  _setUpdateStrategy() {\n    if (this.options && this.options.updateOn != null) {\n      this.form._updateOn = this.options.updateOn;\n    }\n  }\n  _findContainer(path) {\n    path.pop();\n    return path.length ? this.form.get(path) : this.form;\n  }\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: NgForm,\n      deps: [{\n        token: NG_VALIDATORS,\n        optional: true,\n        self: true\n      }, {\n        token: NG_ASYNC_VALIDATORS,\n        optional: true,\n        self: true\n      }, {\n        token: CALL_SET_DISABLED_STATE,\n        optional: true\n      }],\n      target: i0.ɵɵFactoryTarget.Directive\n    });\n  }\n  static {\n    this.ɵdir = i0.ɵɵngDeclareDirective({\n      minVersion: \"14.0.0\",\n      version: \"18.1.4\",\n      type: NgForm,\n      selector: \"form:not([ngNoForm]):not([formGroup]),ng-form,[ngForm]\",\n      inputs: {\n        options: [\"ngFormOptions\", \"options\"]\n      },\n      outputs: {\n        ngSubmit: \"ngSubmit\"\n      },\n      host: {\n        listeners: {\n          \"submit\": \"onSubmit($event)\",\n          \"reset\": \"onReset()\"\n        }\n      },\n      providers: [formDirectiveProvider$1],\n      exportAs: [\"ngForm\"],\n      usesInheritance: true,\n      ngImport: i0\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.1.4\",\n  ngImport: i0,\n  type: NgForm,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: 'form:not([ngNoForm]):not([formGroup]),ng-form,[ngForm]',\n      providers: [formDirectiveProvider$1],\n      host: {\n        '(submit)': 'onSubmit($event)',\n        '(reset)': 'onReset()'\n      },\n      outputs: ['ngSubmit'],\n      exportAs: 'ngForm'\n    }]\n  }],\n  ctorParameters: () => [{\n    type: undefined,\n    decorators: [{\n      type: Optional\n    }, {\n      type: Self\n    }, {\n      type: Inject,\n      args: [NG_VALIDATORS]\n    }]\n  }, {\n    type: undefined,\n    decorators: [{\n      type: Optional\n    }, {\n      type: Self\n    }, {\n      type: Inject,\n      args: [NG_ASYNC_VALIDATORS]\n    }]\n  }, {\n    type: undefined,\n    decorators: [{\n      type: Optional\n    }, {\n      type: Inject,\n      args: [CALL_SET_DISABLED_STATE]\n    }]\n  }],\n  propDecorators: {\n    options: [{\n      type: Input,\n      args: ['ngFormOptions']\n    }]\n  }\n});\nfunction removeListItem(list, el) {\n  const index = list.indexOf(el);\n  if (index > -1) list.splice(index, 1);\n}\nfunction isFormControlState(formState) {\n  return typeof formState === 'object' && formState !== null && Object.keys(formState).length === 2 && 'value' in formState && 'disabled' in formState;\n}\nconst FormControl = class FormControl extends AbstractControl {\n  constructor(\n  // formState and defaultValue will only be null if T is nullable\n  formState = null, validatorOrOpts, asyncValidator) {\n    super(pickValidators(validatorOrOpts), pickAsyncValidators(asyncValidator, validatorOrOpts));\n    /** @publicApi */\n    this.defaultValue = null;\n    /** @internal */\n    this._onChange = [];\n    /** @internal */\n    this._pendingChange = false;\n    this._applyFormState(formState);\n    this._setUpdateStrategy(validatorOrOpts);\n    this._initObservables();\n    this.updateValueAndValidity({\n      onlySelf: true,\n      // If `asyncValidator` is present, it will trigger control status change from `PENDING` to\n      // `VALID` or `INVALID`.\n      // The status should be broadcasted via the `statusChanges` observable, so we set\n      // `emitEvent` to `true` to allow that during the control creation process.\n      emitEvent: !!this.asyncValidator\n    });\n    if (isOptionsObj(validatorOrOpts) && (validatorOrOpts.nonNullable || validatorOrOpts.initialValueIsDefault)) {\n      if (isFormControlState(formState)) {\n        this.defaultValue = formState.value;\n      } else {\n        this.defaultValue = formState;\n      }\n    }\n  }\n  setValue(value, options = {}) {\n    this.value = this._pendingValue = value;\n    if (this._onChange.length && options.emitModelToViewChange !== false) {\n      this._onChange.forEach(changeFn => changeFn(this.value, options.emitViewToModelChange !== false));\n    }\n    this.updateValueAndValidity(options);\n  }\n  patchValue(value, options = {}) {\n    this.setValue(value, options);\n  }\n  reset(formState = this.defaultValue, options = {}) {\n    this._applyFormState(formState);\n    this.markAsPristine(options);\n    this.markAsUntouched(options);\n    this.setValue(this.value, options);\n    this._pendingChange = false;\n  }\n  /**  @internal */\n  _updateValue() {}\n  /**  @internal */\n  _anyControls(condition) {\n    return false;\n  }\n  /**  @internal */\n  _allControlsDisabled() {\n    return this.disabled;\n  }\n  registerOnChange(fn) {\n    this._onChange.push(fn);\n  }\n  /** @internal */\n  _unregisterOnChange(fn) {\n    removeListItem(this._onChange, fn);\n  }\n  registerOnDisabledChange(fn) {\n    this._onDisabledChange.push(fn);\n  }\n  /** @internal */\n  _unregisterOnDisabledChange(fn) {\n    removeListItem(this._onDisabledChange, fn);\n  }\n  /** @internal */\n  _forEachChild(cb) {}\n  /** @internal */\n  _syncPendingControls() {\n    if (this.updateOn === 'submit') {\n      if (this._pendingDirty) this.markAsDirty();\n      if (this._pendingTouched) this.markAsTouched();\n      if (this._pendingChange) {\n        this.setValue(this._pendingValue, {\n          onlySelf: true,\n          emitModelToViewChange: false\n        });\n        return true;\n      }\n    }\n    return false;\n  }\n  _applyFormState(formState) {\n    if (isFormControlState(formState)) {\n      this.value = this._pendingValue = formState.value;\n      formState.disabled ? this.disable({\n        onlySelf: true,\n        emitEvent: false\n      }) : this.enable({\n        onlySelf: true,\n        emitEvent: false\n      });\n    } else {\n      this.value = this._pendingValue = formState;\n    }\n  }\n};\nconst UntypedFormControl = FormControl;\n/**\n * @description\n * Asserts that the given control is an instance of `FormControl`\n *\n * @publicApi\n */\nconst isFormControl = control => control instanceof FormControl;\n\n/**\n * @description\n * A base class for code shared between the `NgModelGroup` and `FormGroupName` directives.\n *\n * @publicApi\n */\nclass AbstractFormGroupDirective extends ControlContainer {\n  /** @nodoc */\n  ngOnInit() {\n    this._checkParentType();\n    // Register the group with its parent group.\n    this.formDirective.addFormGroup(this);\n  }\n  /** @nodoc */\n  ngOnDestroy() {\n    if (this.formDirective) {\n      // Remove the group from its parent group.\n      this.formDirective.removeFormGroup(this);\n    }\n  }\n  /**\n   * @description\n   * The `FormGroup` bound to this directive.\n   */\n  get control() {\n    return this.formDirective.getFormGroup(this);\n  }\n  /**\n   * @description\n   * The path to this group from the top-level directive.\n   */\n  get path() {\n    return controlPath(this.name == null ? this.name : this.name.toString(), this._parent);\n  }\n  /**\n   * @description\n   * The top-level directive for this group if present, otherwise null.\n   */\n  get formDirective() {\n    return this._parent ? this._parent.formDirective : null;\n  }\n  /** @internal */\n  _checkParentType() {}\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: AbstractFormGroupDirective,\n      deps: null,\n      target: i0.ɵɵFactoryTarget.Directive\n    });\n  }\n  static {\n    this.ɵdir = i0.ɵɵngDeclareDirective({\n      minVersion: \"14.0.0\",\n      version: \"18.1.4\",\n      type: AbstractFormGroupDirective,\n      usesInheritance: true,\n      ngImport: i0\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.1.4\",\n  ngImport: i0,\n  type: AbstractFormGroupDirective,\n  decorators: [{\n    type: Directive\n  }]\n});\nfunction modelParentException() {\n  return new ɵRuntimeError(1350 /* RuntimeErrorCode.NGMODEL_IN_FORM_GROUP */, `\n    ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n    formGroup's partner directive \"formControlName\" instead.  Example:\n\n    ${formControlNameExample}\n\n    Or, if you'd like to avoid registering this form control, indicate that it's standalone in ngModelOptions:\n\n    Example:\n\n    ${ngModelWithFormGroupExample}`);\n}\nfunction formGroupNameException() {\n  return new ɵRuntimeError(1351 /* RuntimeErrorCode.NGMODEL_IN_FORM_GROUP_NAME */, `\n    ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n    Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n    ${formGroupNameExample}\n\n    Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n    ${ngModelGroupExample}`);\n}\nfunction missingNameException() {\n  return new ɵRuntimeError(1352 /* RuntimeErrorCode.NGMODEL_WITHOUT_NAME */, `If ngModel is used within a form tag, either the name attribute must be set or the form\n    control must be defined as 'standalone' in ngModelOptions.\n\n    Example 1: <input [(ngModel)]=\"person.firstName\" name=\"first\">\n    Example 2: <input [(ngModel)]=\"person.firstName\" [ngModelOptions]=\"{standalone: true}\">`);\n}\nfunction modelGroupParentException() {\n  return new ɵRuntimeError(1353 /* RuntimeErrorCode.NGMODELGROUP_IN_FORM_GROUP */, `\n    ngModelGroup cannot be used with a parent formGroup directive.\n\n    Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n    ${formGroupNameExample}\n\n    Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n    ${ngModelGroupExample}`);\n}\nconst modelGroupProvider = {\n  provide: ControlContainer,\n  useExisting: forwardRef(() => NgModelGroup)\n};\n/**\n * @description\n * Creates and binds a `FormGroup` instance to a DOM element.\n *\n * This directive can only be used as a child of `NgForm` (within `<form>` tags).\n *\n * Use this directive to validate a sub-group of your form separately from the\n * rest of your form, or if some values in your domain model make more sense\n * to consume together in a nested object.\n *\n * Provide a name for the sub-group and it will become the key\n * for the sub-group in the form's full value. If you need direct access, export the directive into\n * a local template variable using `ngModelGroup` (ex: `#myGroup=\"ngModelGroup\"`).\n *\n * @usageNotes\n *\n * ### Consuming controls in a grouping\n *\n * The following example shows you how to combine controls together in a sub-group\n * of the form.\n *\n * {@example forms/ts/ngModelGroup/ng_model_group_example.ts region='Component'}\n *\n * @ngModule FormsModule\n * @publicApi\n */\nclass NgModelGroup extends AbstractFormGroupDirective {\n  constructor(parent, validators, asyncValidators) {\n    super();\n    /**\n     * @description\n     * Tracks the name of the `NgModelGroup` bound to the directive. The name corresponds\n     * to a key in the parent `NgForm`.\n     */\n    this.name = '';\n    this._parent = parent;\n    this._setValidators(validators);\n    this._setAsyncValidators(asyncValidators);\n  }\n  /** @internal */\n  _checkParentType() {\n    if (!(this._parent instanceof NgModelGroup) && !(this._parent instanceof NgForm) && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n      throw modelGroupParentException();\n    }\n  }\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: NgModelGroup,\n      deps: [{\n        token: ControlContainer,\n        host: true,\n        skipSelf: true\n      }, {\n        token: NG_VALIDATORS,\n        optional: true,\n        self: true\n      }, {\n        token: NG_ASYNC_VALIDATORS,\n        optional: true,\n        self: true\n      }],\n      target: i0.ɵɵFactoryTarget.Directive\n    });\n  }\n  static {\n    this.ɵdir = i0.ɵɵngDeclareDirective({\n      minVersion: \"14.0.0\",\n      version: \"18.1.4\",\n      type: NgModelGroup,\n      selector: \"[ngModelGroup]\",\n      inputs: {\n        name: [\"ngModelGroup\", \"name\"]\n      },\n      providers: [modelGroupProvider],\n      exportAs: [\"ngModelGroup\"],\n      usesInheritance: true,\n      ngImport: i0\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.1.4\",\n  ngImport: i0,\n  type: NgModelGroup,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: '[ngModelGroup]',\n      providers: [modelGroupProvider],\n      exportAs: 'ngModelGroup'\n    }]\n  }],\n  ctorParameters: () => [{\n    type: ControlContainer,\n    decorators: [{\n      type: Host\n    }, {\n      type: SkipSelf\n    }]\n  }, {\n    type: undefined,\n    decorators: [{\n      type: Optional\n    }, {\n      type: Self\n    }, {\n      type: Inject,\n      args: [NG_VALIDATORS]\n    }]\n  }, {\n    type: undefined,\n    decorators: [{\n      type: Optional\n    }, {\n      type: Self\n    }, {\n      type: Inject,\n      args: [NG_ASYNC_VALIDATORS]\n    }]\n  }],\n  propDecorators: {\n    name: [{\n      type: Input,\n      args: ['ngModelGroup']\n    }]\n  }\n});\nconst formControlBinding$1 = {\n  provide: NgControl,\n  useExisting: forwardRef(() => NgModel)\n};\n/**\n * `ngModel` forces an additional change detection run when its inputs change:\n * E.g.:\n * ```\n * <div>{{myModel.valid}}</div>\n * <input [(ngModel)]=\"myValue\" #myModel=\"ngModel\">\n * ```\n * I.e. `ngModel` can export itself on the element and then be used in the template.\n * Normally, this would result in expressions before the `input` that use the exported directive\n * to have an old value as they have been\n * dirty checked before. As this is a very common case for `ngModel`, we added this second change\n * detection run.\n *\n * Notes:\n * - this is just one extra run no matter how many `ngModel`s have been changed.\n * - this is a general problem when using `exportAs` for directives!\n */\nconst resolvedPromise = (() => Promise.resolve())();\n/**\n * @description\n * Creates a `FormControl` instance from a [domain\n * model](https://en.wikipedia.org/wiki/Domain_model) and binds it to a form control element.\n *\n * The `FormControl` instance tracks the value, user interaction, and\n * validation status of the control and keeps the view synced with the model. If used\n * within a parent form, the directive also registers itself with the form as a child\n * control.\n *\n * This directive is used by itself or as part of a larger form. Use the\n * `ngModel` selector to activate it.\n *\n * It accepts a domain model as an optional `Input`. If you have a one-way binding\n * to `ngModel` with `[]` syntax, changing the domain model's value in the component\n * class sets the value in the view. If you have a two-way binding with `[()]` syntax\n * (also known as 'banana-in-a-box syntax'), the value in the UI always syncs back to\n * the domain model in your class.\n *\n * To inspect the properties of the associated `FormControl` (like the validity state),\n * export the directive into a local template variable using `ngModel` as the key (ex:\n * `#myVar=\"ngModel\"`). You can then access the control using the directive's `control` property.\n * However, the most commonly used properties (like `valid` and `dirty`) also exist on the control\n * for direct access. See a full list of properties directly available in\n * `AbstractControlDirective`.\n *\n * @see {@link RadioControlValueAccessor}\n * @see {@link SelectControlValueAccessor}\n *\n * @usageNotes\n *\n * ### Using ngModel on a standalone control\n *\n * The following examples show a simple standalone control using `ngModel`:\n *\n * {@example forms/ts/simpleNgModel/simple_ng_model_example.ts region='Component'}\n *\n * When using the `ngModel` within `<form>` tags, you'll also need to supply a `name` attribute\n * so that the control can be registered with the parent form under that name.\n *\n * In the context of a parent form, it's often unnecessary to include one-way or two-way binding,\n * as the parent form syncs the value for you. You access its properties by exporting it into a\n * local template variable using `ngForm` such as (`#f=\"ngForm\"`). Use the variable where\n * needed on form submission.\n *\n * If you do need to populate initial values into your form, using a one-way binding for\n * `ngModel` tends to be sufficient as long as you use the exported form's value rather\n * than the domain model's value on submit.\n *\n * ### Using ngModel within a form\n *\n * The following example shows controls using `ngModel` within a form:\n *\n * {@example forms/ts/simpleForm/simple_form_example.ts region='Component'}\n *\n * ### Using a standalone ngModel within a group\n *\n * The following example shows you how to use a standalone ngModel control\n * within a form. This controls the display of the form, but doesn't contain form data.\n *\n * ```html\n * <form>\n *   <input name=\"login\" ngModel placeholder=\"Login\">\n *   <input type=\"checkbox\" ngModel [ngModelOptions]=\"{standalone: true}\"> Show more options?\n * </form>\n * <!-- form value: {login: ''} -->\n * ```\n *\n * ### Setting the ngModel `name` attribute through options\n *\n * The following example shows you an alternate way to set the name attribute. Here,\n * an attribute identified as name is used within a custom form control component. To still be able\n * to specify the NgModel's name, you must specify it using the `ngModelOptions` input instead.\n *\n * ```html\n * <form>\n *   <my-custom-form-control name=\"Nancy\" ngModel [ngModelOptions]=\"{name: 'user'}\">\n *   </my-custom-form-control>\n * </form>\n * <!-- form value: {user: ''} -->\n * ```\n *\n * @ngModule FormsModule\n * @publicApi\n */\nclass NgModel extends NgControl {\n  constructor(parent, validators, asyncValidators, valueAccessors, _changeDetectorRef, callSetDisabledState) {\n    super();\n    this._changeDetectorRef = _changeDetectorRef;\n    this.callSetDisabledState = callSetDisabledState;\n    this.control = new FormControl();\n    /** @internal */\n    this._registered = false;\n    /**\n     * @description\n     * Tracks the name bound to the directive. If a parent form exists, it\n     * uses this name as a key to retrieve this control's value.\n     */\n    this.name = '';\n    /**\n     * @description\n     * Event emitter for producing the `ngModelChange` event after\n     * the view model updates.\n     */\n    this.update = new EventEmitter();\n    this._parent = parent;\n    this._setValidators(validators);\n    this._setAsyncValidators(asyncValidators);\n    this.valueAccessor = selectValueAccessor(this, valueAccessors);\n  }\n  /** @nodoc */\n  ngOnChanges(changes) {\n    this._checkForErrors();\n    if (!this._registered || 'name' in changes) {\n      if (this._registered) {\n        this._checkName();\n        if (this.formDirective) {\n          // We can't call `formDirective.removeControl(this)`, because the `name` has already been\n          // changed. We also can't reset the name temporarily since the logic in `removeControl`\n          // is inside a promise and it won't run immediately. We work around it by giving it an\n          // object with the same shape instead.\n          const oldName = changes['name'].previousValue;\n          this.formDirective.removeControl({\n            name: oldName,\n            path: this._getPath(oldName)\n          });\n        }\n      }\n      this._setUpControl();\n    }\n    if ('isDisabled' in changes) {\n      this._updateDisabled(changes);\n    }\n    if (isPropertyUpdated(changes, this.viewModel)) {\n      this._updateValue(this.model);\n      this.viewModel = this.model;\n    }\n  }\n  /** @nodoc */\n  ngOnDestroy() {\n    this.formDirective && this.formDirective.removeControl(this);\n  }\n  /**\n   * @description\n   * Returns an array that represents the path from the top-level form to this control.\n   * Each index is the string name of the control on that level.\n   */\n  get path() {\n    return this._getPath(this.name);\n  }\n  /**\n   * @description\n   * The top-level directive for this control if present, otherwise null.\n   */\n  get formDirective() {\n    return this._parent ? this._parent.formDirective : null;\n  }\n  /**\n   * @description\n   * Sets the new value for the view model and emits an `ngModelChange` event.\n   *\n   * @param newValue The new value emitted by `ngModelChange`.\n   */\n  viewToModelUpdate(newValue) {\n    this.viewModel = newValue;\n    this.update.emit(newValue);\n  }\n  _setUpControl() {\n    this._setUpdateStrategy();\n    this._isStandalone() ? this._setUpStandalone() : this.formDirective.addControl(this);\n    this._registered = true;\n  }\n  _setUpdateStrategy() {\n    if (this.options && this.options.updateOn != null) {\n      this.control._updateOn = this.options.updateOn;\n    }\n  }\n  _isStandalone() {\n    return !this._parent || !!(this.options && this.options.standalone);\n  }\n  _setUpStandalone() {\n    setUpControl(this.control, this, this.callSetDisabledState);\n    this.control.updateValueAndValidity({\n      emitEvent: false\n    });\n  }\n  _checkForErrors() {\n    if (!this._isStandalone()) {\n      this._checkParentType();\n    }\n    this._checkName();\n  }\n  _checkParentType() {\n    if (typeof ngDevMode === 'undefined' || ngDevMode) {\n      if (!(this._parent instanceof NgModelGroup) && this._parent instanceof AbstractFormGroupDirective) {\n        throw formGroupNameException();\n      } else if (!(this._parent instanceof NgModelGroup) && !(this._parent instanceof NgForm)) {\n        throw modelParentException();\n      }\n    }\n  }\n  _checkName() {\n    if (this.options && this.options.name) this.name = this.options.name;\n    if (!this._isStandalone() && !this.name && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n      throw missingNameException();\n    }\n  }\n  _updateValue(value) {\n    resolvedPromise.then(() => {\n      this.control.setValue(value, {\n        emitViewToModelChange: false\n      });\n      this._changeDetectorRef?.markForCheck();\n    });\n  }\n  _updateDisabled(changes) {\n    const disabledValue = changes['isDisabled'].currentValue;\n    // checking for 0 to avoid breaking change\n    const isDisabled = disabledValue !== 0 && booleanAttribute(disabledValue);\n    resolvedPromise.then(() => {\n      if (isDisabled && !this.control.disabled) {\n        this.control.disable();\n      } else if (!isDisabled && this.control.disabled) {\n        this.control.enable();\n      }\n      this._changeDetectorRef?.markForCheck();\n    });\n  }\n  _getPath(controlName) {\n    return this._parent ? controlPath(controlName, this._parent) : [controlName];\n  }\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: NgModel,\n      deps: [{\n        token: ControlContainer,\n        host: true,\n        optional: true\n      }, {\n        token: NG_VALIDATORS,\n        optional: true,\n        self: true\n      }, {\n        token: NG_ASYNC_VALIDATORS,\n        optional: true,\n        self: true\n      }, {\n        token: NG_VALUE_ACCESSOR,\n        optional: true,\n        self: true\n      }, {\n        token: ChangeDetectorRef,\n        optional: true\n      }, {\n        token: CALL_SET_DISABLED_STATE,\n        optional: true\n      }],\n      target: i0.ɵɵFactoryTarget.Directive\n    });\n  }\n  static {\n    this.ɵdir = i0.ɵɵngDeclareDirective({\n      minVersion: \"14.0.0\",\n      version: \"18.1.4\",\n      type: NgModel,\n      selector: \"[ngModel]:not([formControlName]):not([formControl])\",\n      inputs: {\n        name: \"name\",\n        isDisabled: [\"disabled\", \"isDisabled\"],\n        model: [\"ngModel\", \"model\"],\n        options: [\"ngModelOptions\", \"options\"]\n      },\n      outputs: {\n        update: \"ngModelChange\"\n      },\n      providers: [formControlBinding$1],\n      exportAs: [\"ngModel\"],\n      usesInheritance: true,\n      usesOnChanges: true,\n      ngImport: i0\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.1.4\",\n  ngImport: i0,\n  type: NgModel,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: '[ngModel]:not([formControlName]):not([formControl])',\n      providers: [formControlBinding$1],\n      exportAs: 'ngModel'\n    }]\n  }],\n  ctorParameters: () => [{\n    type: ControlContainer,\n    decorators: [{\n      type: Optional\n    }, {\n      type: Host\n    }]\n  }, {\n    type: undefined,\n    decorators: [{\n      type: Optional\n    }, {\n      type: Self\n    }, {\n      type: Inject,\n      args: [NG_VALIDATORS]\n    }]\n  }, {\n    type: undefined,\n    decorators: [{\n      type: Optional\n    }, {\n      type: Self\n    }, {\n      type: Inject,\n      args: [NG_ASYNC_VALIDATORS]\n    }]\n  }, {\n    type: undefined,\n    decorators: [{\n      type: Optional\n    }, {\n      type: Self\n    }, {\n      type: Inject,\n      args: [NG_VALUE_ACCESSOR]\n    }]\n  }, {\n    type: i0.ChangeDetectorRef,\n    decorators: [{\n      type: Optional\n    }, {\n      type: Inject,\n      args: [ChangeDetectorRef]\n    }]\n  }, {\n    type: undefined,\n    decorators: [{\n      type: Optional\n    }, {\n      type: Inject,\n      args: [CALL_SET_DISABLED_STATE]\n    }]\n  }],\n  propDecorators: {\n    name: [{\n      type: Input\n    }],\n    isDisabled: [{\n      type: Input,\n      args: ['disabled']\n    }],\n    model: [{\n      type: Input,\n      args: ['ngModel']\n    }],\n    options: [{\n      type: Input,\n      args: ['ngModelOptions']\n    }],\n    update: [{\n      type: Output,\n      args: ['ngModelChange']\n    }]\n  }\n});\n\n/**\n * @description\n *\n * Adds `novalidate` attribute to all forms by default.\n *\n * `novalidate` is used to disable browser's native form validation.\n *\n * If you want to use native validation with Angular forms, just add `ngNativeValidate` attribute:\n *\n * ```\n * <form ngNativeValidate></form>\n * ```\n *\n * @publicApi\n * @ngModule ReactiveFormsModule\n * @ngModule FormsModule\n */\nclass ɵNgNoValidate {\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: ɵNgNoValidate,\n      deps: [],\n      target: i0.ɵɵFactoryTarget.Directive\n    });\n  }\n  static {\n    this.ɵdir = i0.ɵɵngDeclareDirective({\n      minVersion: \"14.0.0\",\n      version: \"18.1.4\",\n      type: ɵNgNoValidate,\n      selector: \"form:not([ngNoForm]):not([ngNativeValidate])\",\n      host: {\n        attributes: {\n          \"novalidate\": \"\"\n        }\n      },\n      ngImport: i0\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.1.4\",\n  ngImport: i0,\n  type: ɵNgNoValidate,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: 'form:not([ngNoForm]):not([ngNativeValidate])',\n      host: {\n        'novalidate': ''\n      }\n    }]\n  }]\n});\nconst NUMBER_VALUE_ACCESSOR = {\n  provide: NG_VALUE_ACCESSOR,\n  useExisting: forwardRef(() => NumberValueAccessor),\n  multi: true\n};\n/**\n * @description\n * The `ControlValueAccessor` for writing a number value and listening to number input changes.\n * The value accessor is used by the `FormControlDirective`, `FormControlName`, and `NgModel`\n * directives.\n *\n * @usageNotes\n *\n * ### Using a number input with a reactive form.\n *\n * The following example shows how to use a number input with a reactive form.\n *\n * ```ts\n * const totalCountControl = new FormControl();\n * ```\n *\n * ```\n * <input type=\"number\" [formControl]=\"totalCountControl\">\n * ```\n *\n * @ngModule ReactiveFormsModule\n * @ngModule FormsModule\n * @publicApi\n */\nclass NumberValueAccessor extends BuiltInControlValueAccessor {\n  /**\n   * Sets the \"value\" property on the input element.\n   * @nodoc\n   */\n  writeValue(value) {\n    // The value needs to be normalized for IE9, otherwise it is set to 'null' when null\n    const normalizedValue = value == null ? '' : value;\n    this.setProperty('value', normalizedValue);\n  }\n  /**\n   * Registers a function called when the control value changes.\n   * @nodoc\n   */\n  registerOnChange(fn) {\n    this.onChange = value => {\n      fn(value == '' ? null : parseFloat(value));\n    };\n  }\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: NumberValueAccessor,\n      deps: null,\n      target: i0.ɵɵFactoryTarget.Directive\n    });\n  }\n  static {\n    this.ɵdir = i0.ɵɵngDeclareDirective({\n      minVersion: \"14.0.0\",\n      version: \"18.1.4\",\n      type: NumberValueAccessor,\n      selector: \"input[type=number][formControlName],input[type=number][formControl],input[type=number][ngModel]\",\n      host: {\n        listeners: {\n          \"input\": \"onChange($event.target.value)\",\n          \"blur\": \"onTouched()\"\n        }\n      },\n      providers: [NUMBER_VALUE_ACCESSOR],\n      usesInheritance: true,\n      ngImport: i0\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.1.4\",\n  ngImport: i0,\n  type: NumberValueAccessor,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: 'input[type=number][formControlName],input[type=number][formControl],input[type=number][ngModel]',\n      host: {\n        '(input)': 'onChange($event.target.value)',\n        '(blur)': 'onTouched()'\n      },\n      providers: [NUMBER_VALUE_ACCESSOR]\n    }]\n  }]\n});\nconst RADIO_VALUE_ACCESSOR = {\n  provide: NG_VALUE_ACCESSOR,\n  useExisting: forwardRef(() => RadioControlValueAccessor),\n  multi: true\n};\nfunction throwNameError() {\n  throw new ɵRuntimeError(1202 /* RuntimeErrorCode.NAME_AND_FORM_CONTROL_NAME_MUST_MATCH */, `\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type=\"radio\" formControlName=\"food\" name=\"food\">\n    `);\n}\n/**\n * @description\n * Class used by Angular to track radio buttons. For internal use only.\n */\nclass RadioControlRegistry {\n  constructor() {\n    this._accessors = [];\n  }\n  /**\n   * @description\n   * Adds a control to the internal registry. For internal use only.\n   */\n  add(control, accessor) {\n    this._accessors.push([control, accessor]);\n  }\n  /**\n   * @description\n   * Removes a control from the internal registry. For internal use only.\n   */\n  remove(accessor) {\n    for (let i = this._accessors.length - 1; i >= 0; --i) {\n      if (this._accessors[i][1] === accessor) {\n        this._accessors.splice(i, 1);\n        return;\n      }\n    }\n  }\n  /**\n   * @description\n   * Selects a radio button. For internal use only.\n   */\n  select(accessor) {\n    this._accessors.forEach(c => {\n      if (this._isSameGroup(c, accessor) && c[1] !== accessor) {\n        c[1].fireUncheck(accessor.value);\n      }\n    });\n  }\n  _isSameGroup(controlPair, accessor) {\n    if (!controlPair[0].control) return false;\n    return controlPair[0]._parent === accessor._control._parent && controlPair[1].name === accessor.name;\n  }\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: RadioControlRegistry,\n      deps: [],\n      target: i0.ɵɵFactoryTarget.Injectable\n    });\n  }\n  static {\n    this.ɵprov = i0.ɵɵngDeclareInjectable({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: RadioControlRegistry,\n      providedIn: 'root'\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.1.4\",\n  ngImport: i0,\n  type: RadioControlRegistry,\n  decorators: [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }]\n});\n/**\n * @description\n * The `ControlValueAccessor` for writing radio control values and listening to radio control\n * changes. The value accessor is used by the `FormControlDirective`, `FormControlName`, and\n * `NgModel` directives.\n *\n * @usageNotes\n *\n * ### Using radio buttons with reactive form directives\n *\n * The follow example shows how to use radio buttons in a reactive form. When using radio buttons in\n * a reactive form, radio buttons in the same group should have the same `formControlName`.\n * Providing a `name` attribute is optional.\n *\n * {@example forms/ts/reactiveRadioButtons/reactive_radio_button_example.ts region='Reactive'}\n *\n * @ngModule ReactiveFormsModule\n * @ngModule FormsModule\n * @publicApi\n */\nclass RadioControlValueAccessor extends BuiltInControlValueAccessor {\n  constructor(renderer, elementRef, _registry, _injector) {\n    super(renderer, elementRef);\n    this._registry = _registry;\n    this._injector = _injector;\n    this.setDisabledStateFired = false;\n    /**\n     * The registered callback function called when a change event occurs on the input element.\n     * Note: we declare `onChange` here (also used as host listener) as a function with no arguments\n     * to override the `onChange` function (which expects 1 argument) in the parent\n     * `BaseControlValueAccessor` class.\n     * @nodoc\n     */\n    this.onChange = () => {};\n    this.callSetDisabledState = inject(CALL_SET_DISABLED_STATE, {\n      optional: true\n    }) ?? setDisabledStateDefault;\n  }\n  /** @nodoc */\n  ngOnInit() {\n    this._control = this._injector.get(NgControl);\n    this._checkName();\n    this._registry.add(this._control, this);\n  }\n  /** @nodoc */\n  ngOnDestroy() {\n    this._registry.remove(this);\n  }\n  /**\n   * Sets the \"checked\" property value on the radio input element.\n   * @nodoc\n   */\n  writeValue(value) {\n    this._state = value === this.value;\n    this.setProperty('checked', this._state);\n  }\n  /**\n   * Registers a function called when the control value changes.\n   * @nodoc\n   */\n  registerOnChange(fn) {\n    this._fn = fn;\n    this.onChange = () => {\n      fn(this.value);\n      this._registry.select(this);\n    };\n  }\n  /** @nodoc */\n  setDisabledState(isDisabled) {\n    /**\n     * `setDisabledState` is supposed to be called whenever the disabled state of a control changes,\n     * including upon control creation. However, a longstanding bug caused the method to not fire\n     * when an *enabled* control was attached. This bug was fixed in v15 in #47576.\n     *\n     * This had a side effect: previously, it was possible to instantiate a reactive form control\n     * with `[attr.disabled]=true`, even though the corresponding control was enabled in the\n     * model. This resulted in a mismatch between the model and the DOM. Now, because\n     * `setDisabledState` is always called, the value in the DOM will be immediately overwritten\n     * with the \"correct\" enabled value.\n     *\n     * However, the fix also created an exceptional case: radio buttons. Because Reactive Forms\n     * models the entire group of radio buttons as a single `FormControl`, there is no way to\n     * control the disabled state for individual radios, so they can no longer be configured as\n     * disabled. Thus, we keep the old behavior for radio buttons, so that `[attr.disabled]`\n     * continues to work. Specifically, we drop the first call to `setDisabledState` if `disabled`\n     * is `false`, and we are not in legacy mode.\n     */\n    if (this.setDisabledStateFired || isDisabled || this.callSetDisabledState === 'whenDisabledForLegacyCode') {\n      this.setProperty('disabled', isDisabled);\n    }\n    this.setDisabledStateFired = true;\n  }\n  /**\n   * Sets the \"value\" on the radio input element and unchecks it.\n   *\n   * @param value\n   */\n  fireUncheck(value) {\n    this.writeValue(value);\n  }\n  _checkName() {\n    if (this.name && this.formControlName && this.name !== this.formControlName && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n      throwNameError();\n    }\n    if (!this.name && this.formControlName) this.name = this.formControlName;\n  }\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: RadioControlValueAccessor,\n      deps: [{\n        token: i0.Renderer2\n      }, {\n        token: i0.ElementRef\n      }, {\n        token: RadioControlRegistry\n      }, {\n        token: i0.Injector\n      }],\n      target: i0.ɵɵFactoryTarget.Directive\n    });\n  }\n  static {\n    this.ɵdir = i0.ɵɵngDeclareDirective({\n      minVersion: \"14.0.0\",\n      version: \"18.1.4\",\n      type: RadioControlValueAccessor,\n      selector: \"input[type=radio][formControlName],input[type=radio][formControl],input[type=radio][ngModel]\",\n      inputs: {\n        name: \"name\",\n        formControlName: \"formControlName\",\n        value: \"value\"\n      },\n      host: {\n        listeners: {\n          \"change\": \"onChange()\",\n          \"blur\": \"onTouched()\"\n        }\n      },\n      providers: [RADIO_VALUE_ACCESSOR],\n      usesInheritance: true,\n      ngImport: i0\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.1.4\",\n  ngImport: i0,\n  type: RadioControlValueAccessor,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: 'input[type=radio][formControlName],input[type=radio][formControl],input[type=radio][ngModel]',\n      host: {\n        '(change)': 'onChange()',\n        '(blur)': 'onTouched()'\n      },\n      providers: [RADIO_VALUE_ACCESSOR]\n    }]\n  }],\n  ctorParameters: () => [{\n    type: i0.Renderer2\n  }, {\n    type: i0.ElementRef\n  }, {\n    type: RadioControlRegistry\n  }, {\n    type: i0.Injector\n  }],\n  propDecorators: {\n    name: [{\n      type: Input\n    }],\n    formControlName: [{\n      type: Input\n    }],\n    value: [{\n      type: Input\n    }]\n  }\n});\nconst RANGE_VALUE_ACCESSOR = {\n  provide: NG_VALUE_ACCESSOR,\n  useExisting: forwardRef(() => RangeValueAccessor),\n  multi: true\n};\n/**\n * @description\n * The `ControlValueAccessor` for writing a range value and listening to range input changes.\n * The value accessor is used by the `FormControlDirective`, `FormControlName`, and  `NgModel`\n * directives.\n *\n * @usageNotes\n *\n * ### Using a range input with a reactive form\n *\n * The following example shows how to use a range input with a reactive form.\n *\n * ```ts\n * const ageControl = new FormControl();\n * ```\n *\n * ```\n * <input type=\"range\" [formControl]=\"ageControl\">\n * ```\n *\n * @ngModule ReactiveFormsModule\n * @ngModule FormsModule\n * @publicApi\n */\nclass RangeValueAccessor extends BuiltInControlValueAccessor {\n  /**\n   * Sets the \"value\" property on the input element.\n   * @nodoc\n   */\n  writeValue(value) {\n    this.setProperty('value', parseFloat(value));\n  }\n  /**\n   * Registers a function called when the control value changes.\n   * @nodoc\n   */\n  registerOnChange(fn) {\n    this.onChange = value => {\n      fn(value == '' ? null : parseFloat(value));\n    };\n  }\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: RangeValueAccessor,\n      deps: null,\n      target: i0.ɵɵFactoryTarget.Directive\n    });\n  }\n  static {\n    this.ɵdir = i0.ɵɵngDeclareDirective({\n      minVersion: \"14.0.0\",\n      version: \"18.1.4\",\n      type: RangeValueAccessor,\n      selector: \"input[type=range][formControlName],input[type=range][formControl],input[type=range][ngModel]\",\n      host: {\n        listeners: {\n          \"change\": \"onChange($event.target.value)\",\n          \"input\": \"onChange($event.target.value)\",\n          \"blur\": \"onTouched()\"\n        }\n      },\n      providers: [RANGE_VALUE_ACCESSOR],\n      usesInheritance: true,\n      ngImport: i0\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.1.4\",\n  ngImport: i0,\n  type: RangeValueAccessor,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: 'input[type=range][formControlName],input[type=range][formControl],input[type=range][ngModel]',\n      host: {\n        '(change)': 'onChange($event.target.value)',\n        '(input)': 'onChange($event.target.value)',\n        '(blur)': 'onTouched()'\n      },\n      providers: [RANGE_VALUE_ACCESSOR]\n    }]\n  }]\n});\n\n/**\n * Token to provide to turn off the ngModel warning on formControl and formControlName.\n */\nconst NG_MODEL_WITH_FORM_CONTROL_WARNING = new InjectionToken(ngDevMode ? 'NgModelWithFormControlWarning' : '');\nconst formControlBinding = {\n  provide: NgControl,\n  useExisting: forwardRef(() => FormControlDirective)\n};\n/**\n * @description\n * Synchronizes a standalone `FormControl` instance to a form control element.\n *\n * Note that support for using the `ngModel` input property and `ngModelChange` event with reactive\n * form directives was deprecated in Angular v6 and is scheduled for removal in\n * a future version of Angular.\n *\n * @see [Reactive Forms Guide](guide/forms/reactive-forms)\n * @see {@link FormControl}\n * @see {@link AbstractControl}\n *\n * @usageNotes\n *\n * The following example shows how to register a standalone control and set its value.\n *\n * {@example forms/ts/simpleFormControl/simple_form_control_example.ts region='Component'}\n *\n * @ngModule ReactiveFormsModule\n * @publicApi\n */\nclass FormControlDirective extends NgControl {\n  /**\n   * @description\n   * Triggers a warning in dev mode that this input should not be used with reactive forms.\n   */\n  set isDisabled(isDisabled) {\n    if (typeof ngDevMode === 'undefined' || ngDevMode) {\n      console.warn(disabledAttrWarning);\n    }\n  }\n  /**\n   * @description\n   * Static property used to track whether any ngModel warnings have been sent across\n   * all instances of FormControlDirective. Used to support warning config of \"once\".\n   *\n   * @internal\n   */\n  static {\n    this._ngModelWarningSentOnce = false;\n  }\n  constructor(validators, asyncValidators, valueAccessors, _ngModelWarningConfig, callSetDisabledState) {\n    super();\n    this._ngModelWarningConfig = _ngModelWarningConfig;\n    this.callSetDisabledState = callSetDisabledState;\n    /** @deprecated as of v6 */\n    this.update = new EventEmitter();\n    /**\n     * @description\n     * Instance property used to track whether an ngModel warning has been sent out for this\n     * particular `FormControlDirective` instance. Used to support warning config of \"always\".\n     *\n     * @internal\n     */\n    this._ngModelWarningSent = false;\n    this._setValidators(validators);\n    this._setAsyncValidators(asyncValidators);\n    this.valueAccessor = selectValueAccessor(this, valueAccessors);\n  }\n  /** @nodoc */\n  ngOnChanges(changes) {\n    if (this._isControlChanged(changes)) {\n      const previousForm = changes['form'].previousValue;\n      if (previousForm) {\n        cleanUpControl(previousForm, this, /* validateControlPresenceOnChange */false);\n      }\n      setUpControl(this.form, this, this.callSetDisabledState);\n      this.form.updateValueAndValidity({\n        emitEvent: false\n      });\n    }\n    if (isPropertyUpdated(changes, this.viewModel)) {\n      if (typeof ngDevMode === 'undefined' || ngDevMode) {\n        _ngModelWarning('formControl', FormControlDirective, this, this._ngModelWarningConfig);\n      }\n      this.form.setValue(this.model);\n      this.viewModel = this.model;\n    }\n  }\n  /** @nodoc */\n  ngOnDestroy() {\n    if (this.form) {\n      cleanUpControl(this.form, this, /* validateControlPresenceOnChange */false);\n    }\n  }\n  /**\n   * @description\n   * Returns an array that represents the path from the top-level form to this control.\n   * Each index is the string name of the control on that level.\n   */\n  get path() {\n    return [];\n  }\n  /**\n   * @description\n   * The `FormControl` bound to this directive.\n   */\n  get control() {\n    return this.form;\n  }\n  /**\n   * @description\n   * Sets the new value for the view model and emits an `ngModelChange` event.\n   *\n   * @param newValue The new value for the view model.\n   */\n  viewToModelUpdate(newValue) {\n    this.viewModel = newValue;\n    this.update.emit(newValue);\n  }\n  _isControlChanged(changes) {\n    return changes.hasOwnProperty('form');\n  }\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: FormControlDirective,\n      deps: [{\n        token: NG_VALIDATORS,\n        optional: true,\n        self: true\n      }, {\n        token: NG_ASYNC_VALIDATORS,\n        optional: true,\n        self: true\n      }, {\n        token: NG_VALUE_ACCESSOR,\n        optional: true,\n        self: true\n      }, {\n        token: NG_MODEL_WITH_FORM_CONTROL_WARNING,\n        optional: true\n      }, {\n        token: CALL_SET_DISABLED_STATE,\n        optional: true\n      }],\n      target: i0.ɵɵFactoryTarget.Directive\n    });\n  }\n  static {\n    this.ɵdir = i0.ɵɵngDeclareDirective({\n      minVersion: \"14.0.0\",\n      version: \"18.1.4\",\n      type: FormControlDirective,\n      selector: \"[formControl]\",\n      inputs: {\n        form: [\"formControl\", \"form\"],\n        isDisabled: [\"disabled\", \"isDisabled\"],\n        model: [\"ngModel\", \"model\"]\n      },\n      outputs: {\n        update: \"ngModelChange\"\n      },\n      providers: [formControlBinding],\n      exportAs: [\"ngForm\"],\n      usesInheritance: true,\n      usesOnChanges: true,\n      ngImport: i0\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.1.4\",\n  ngImport: i0,\n  type: FormControlDirective,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: '[formControl]',\n      providers: [formControlBinding],\n      exportAs: 'ngForm'\n    }]\n  }],\n  ctorParameters: () => [{\n    type: undefined,\n    decorators: [{\n      type: Optional\n    }, {\n      type: Self\n    }, {\n      type: Inject,\n      args: [NG_VALIDATORS]\n    }]\n  }, {\n    type: undefined,\n    decorators: [{\n      type: Optional\n    }, {\n      type: Self\n    }, {\n      type: Inject,\n      args: [NG_ASYNC_VALIDATORS]\n    }]\n  }, {\n    type: undefined,\n    decorators: [{\n      type: Optional\n    }, {\n      type: Self\n    }, {\n      type: Inject,\n      args: [NG_VALUE_ACCESSOR]\n    }]\n  }, {\n    type: undefined,\n    decorators: [{\n      type: Optional\n    }, {\n      type: Inject,\n      args: [NG_MODEL_WITH_FORM_CONTROL_WARNING]\n    }]\n  }, {\n    type: undefined,\n    decorators: [{\n      type: Optional\n    }, {\n      type: Inject,\n      args: [CALL_SET_DISABLED_STATE]\n    }]\n  }],\n  propDecorators: {\n    form: [{\n      type: Input,\n      args: ['formControl']\n    }],\n    isDisabled: [{\n      type: Input,\n      args: ['disabled']\n    }],\n    model: [{\n      type: Input,\n      args: ['ngModel']\n    }],\n    update: [{\n      type: Output,\n      args: ['ngModelChange']\n    }]\n  }\n});\nconst formDirectiveProvider = {\n  provide: ControlContainer,\n  useExisting: forwardRef(() => FormGroupDirective)\n};\n/**\n * @description\n *\n * Binds an existing `FormGroup` or `FormRecord` to a DOM element.\n *\n * This directive accepts an existing `FormGroup` instance. It will then use this\n * `FormGroup` instance to match any child `FormControl`, `FormGroup`/`FormRecord`,\n * and `FormArray` instances to child `FormControlName`, `FormGroupName`,\n * and `FormArrayName` directives.\n *\n * @see [Reactive Forms Guide](guide/forms/reactive-forms)\n * @see {@link AbstractControl}\n *\n * @usageNotes\n * ### Register Form Group\n *\n * The following example registers a `FormGroup` with first name and last name controls,\n * and listens for the *ngSubmit* event when the button is clicked.\n *\n * {@example forms/ts/simpleFormGroup/simple_form_group_example.ts region='Component'}\n *\n * @ngModule ReactiveFormsModule\n * @publicApi\n */\nclass FormGroupDirective extends ControlContainer {\n  /**\n   * @description\n   * Reports whether the form submission has been triggered.\n   */\n  get submitted() {\n    return untracked(this._submittedReactive);\n  }\n  // TODO(atscott): Remove once invalid API usage is cleaned up internally\n  set submitted(value) {\n    this._submittedReactive.set(value);\n  }\n  constructor(validators, asyncValidators, callSetDisabledState) {\n    super();\n    this.callSetDisabledState = callSetDisabledState;\n    /** @internal */\n    this._submitted = computed(() => this._submittedReactive());\n    this._submittedReactive = signal(false);\n    /**\n     * Callback that should be invoked when controls in FormGroup or FormArray collection change\n     * (added or removed). This callback triggers corresponding DOM updates.\n     */\n    this._onCollectionChange = () => this._updateDomValue();\n    /**\n     * @description\n     * Tracks the list of added `FormControlName` instances\n     */\n    this.directives = [];\n    /**\n     * @description\n     * Tracks the `FormGroup` bound to this directive.\n     */\n    this.form = null;\n    /**\n     * @description\n     * Emits an event when the form submission has been triggered.\n     */\n    this.ngSubmit = new EventEmitter();\n    this._setValidators(validators);\n    this._setAsyncValidators(asyncValidators);\n  }\n  /** @nodoc */\n  ngOnChanges(changes) {\n    this._checkFormPresent();\n    if (changes.hasOwnProperty('form')) {\n      this._updateValidators();\n      this._updateDomValue();\n      this._updateRegistrations();\n      this._oldForm = this.form;\n    }\n  }\n  /** @nodoc */\n  ngOnDestroy() {\n    if (this.form) {\n      cleanUpValidators(this.form, this);\n      // Currently the `onCollectionChange` callback is rewritten each time the\n      // `_registerOnCollectionChange` function is invoked. The implication is that cleanup should\n      // happen *only* when the `onCollectionChange` callback was set by this directive instance.\n      // Otherwise it might cause overriding a callback of some other directive instances. We should\n      // consider updating this logic later to make it similar to how `onChange` callbacks are\n      // handled, see https://github.com/angular/angular/issues/39732 for additional info.\n      if (this.form._onCollectionChange === this._onCollectionChange) {\n        this.form._registerOnCollectionChange(() => {});\n      }\n    }\n  }\n  /**\n   * @description\n   * Returns this directive's instance.\n   */\n  get formDirective() {\n    return this;\n  }\n  /**\n   * @description\n   * Returns the `FormGroup` bound to this directive.\n   */\n  get control() {\n    return this.form;\n  }\n  /**\n   * @description\n   * Returns an array representing the path to this group. Because this directive\n   * always lives at the top level of a form, it always an empty array.\n   */\n  get path() {\n    return [];\n  }\n  /**\n   * @description\n   * Method that sets up the control directive in this group, re-calculates its value\n   * and validity, and adds the instance to the internal list of directives.\n   *\n   * @param dir The `FormControlName` directive instance.\n   */\n  addControl(dir) {\n    const ctrl = this.form.get(dir.path);\n    setUpControl(ctrl, dir, this.callSetDisabledState);\n    ctrl.updateValueAndValidity({\n      emitEvent: false\n    });\n    this.directives.push(dir);\n    return ctrl;\n  }\n  /**\n   * @description\n   * Retrieves the `FormControl` instance from the provided `FormControlName` directive\n   *\n   * @param dir The `FormControlName` directive instance.\n   */\n  getControl(dir) {\n    return this.form.get(dir.path);\n  }\n  /**\n   * @description\n   * Removes the `FormControlName` instance from the internal list of directives\n   *\n   * @param dir The `FormControlName` directive instance.\n   */\n  removeControl(dir) {\n    cleanUpControl(dir.control || null, dir, /* validateControlPresenceOnChange */false);\n    removeListItem$1(this.directives, dir);\n  }\n  /**\n   * Adds a new `FormGroupName` directive instance to the form.\n   *\n   * @param dir The `FormGroupName` directive instance.\n   */\n  addFormGroup(dir) {\n    this._setUpFormContainer(dir);\n  }\n  /**\n   * Performs the necessary cleanup when a `FormGroupName` directive instance is removed from the\n   * view.\n   *\n   * @param dir The `FormGroupName` directive instance.\n   */\n  removeFormGroup(dir) {\n    this._cleanUpFormContainer(dir);\n  }\n  /**\n   * @description\n   * Retrieves the `FormGroup` for a provided `FormGroupName` directive instance\n   *\n   * @param dir The `FormGroupName` directive instance.\n   */\n  getFormGroup(dir) {\n    return this.form.get(dir.path);\n  }\n  /**\n   * Performs the necessary setup when a `FormArrayName` directive instance is added to the view.\n   *\n   * @param dir The `FormArrayName` directive instance.\n   */\n  addFormArray(dir) {\n    this._setUpFormContainer(dir);\n  }\n  /**\n   * Performs the necessary cleanup when a `FormArrayName` directive instance is removed from the\n   * view.\n   *\n   * @param dir The `FormArrayName` directive instance.\n   */\n  removeFormArray(dir) {\n    this._cleanUpFormContainer(dir);\n  }\n  /**\n   * @description\n   * Retrieves the `FormArray` for a provided `FormArrayName` directive instance.\n   *\n   * @param dir The `FormArrayName` directive instance.\n   */\n  getFormArray(dir) {\n    return this.form.get(dir.path);\n  }\n  /**\n   * Sets the new value for the provided `FormControlName` directive.\n   *\n   * @param dir The `FormControlName` directive instance.\n   * @param value The new value for the directive's control.\n   */\n  updateModel(dir, value) {\n    const ctrl = this.form.get(dir.path);\n    ctrl.setValue(value);\n  }\n  /**\n   * @description\n   * Method called with the \"submit\" event is triggered on the form.\n   * Triggers the `ngSubmit` emitter to emit the \"submit\" event as its payload.\n   *\n   * @param $event The \"submit\" event object\n   */\n  onSubmit($event) {\n    this._submittedReactive.set(true);\n    syncPendingControls(this.form, this.directives);\n    this.ngSubmit.emit($event);\n    this.form._events.next(new FormSubmittedEvent(this.control));\n    // Forms with `method=\"dialog\"` have some special behavior that won't reload the page and that\n    // shouldn't be prevented. Note that we need to null check the `event` and the `target`, because\n    // some internal apps call this method directly with the wrong arguments.\n    return $event?.target?.method === 'dialog';\n  }\n  /**\n   * @description\n   * Method called when the \"reset\" event is triggered on the form.\n   */\n  onReset() {\n    this.resetForm();\n  }\n  /**\n   * @description\n   * Resets the form to an initial value and resets its submitted status.\n   *\n   * @param value The new value for the form.\n   */\n  resetForm(value = undefined) {\n    this.form.reset(value);\n    this._submittedReactive.set(false);\n    this.form._events.next(new FormResetEvent(this.form));\n  }\n  /** @internal */\n  _updateDomValue() {\n    this.directives.forEach(dir => {\n      const oldCtrl = dir.control;\n      const newCtrl = this.form.get(dir.path);\n      if (oldCtrl !== newCtrl) {\n        // Note: the value of the `dir.control` may not be defined, for example when it's a first\n        // `FormControl` that is added to a `FormGroup` instance (via `addControl` call).\n        cleanUpControl(oldCtrl || null, dir);\n        // Check whether new control at the same location inside the corresponding `FormGroup` is an\n        // instance of `FormControl` and perform control setup only if that's the case.\n        // Note: we don't need to clear the list of directives (`this.directives`) here, it would be\n        // taken care of in the `removeControl` method invoked when corresponding `formControlName`\n        // directive instance is being removed (invoked from `FormControlName.ngOnDestroy`).\n        if (isFormControl(newCtrl)) {\n          setUpControl(newCtrl, dir, this.callSetDisabledState);\n          dir.control = newCtrl;\n        }\n      }\n    });\n    this.form._updateTreeValidity({\n      emitEvent: false\n    });\n  }\n  _setUpFormContainer(dir) {\n    const ctrl = this.form.get(dir.path);\n    setUpFormContainer(ctrl, dir);\n    // NOTE: this operation looks unnecessary in case no new validators were added in\n    // `setUpFormContainer` call. Consider updating this code to match the logic in\n    // `_cleanUpFormContainer` function.\n    ctrl.updateValueAndValidity({\n      emitEvent: false\n    });\n  }\n  _cleanUpFormContainer(dir) {\n    if (this.form) {\n      const ctrl = this.form.get(dir.path);\n      if (ctrl) {\n        const isControlUpdated = cleanUpFormContainer(ctrl, dir);\n        if (isControlUpdated) {\n          // Run validity check only in case a control was updated (i.e. view validators were\n          // removed) as removing view validators might cause validity to change.\n          ctrl.updateValueAndValidity({\n            emitEvent: false\n          });\n        }\n      }\n    }\n  }\n  _updateRegistrations() {\n    this.form._registerOnCollectionChange(this._onCollectionChange);\n    if (this._oldForm) {\n      this._oldForm._registerOnCollectionChange(() => {});\n    }\n  }\n  _updateValidators() {\n    setUpValidators(this.form, this);\n    if (this._oldForm) {\n      cleanUpValidators(this._oldForm, this);\n    }\n  }\n  _checkFormPresent() {\n    if (!this.form && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n      throw missingFormException();\n    }\n  }\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: FormGroupDirective,\n      deps: [{\n        token: NG_VALIDATORS,\n        optional: true,\n        self: true\n      }, {\n        token: NG_ASYNC_VALIDATORS,\n        optional: true,\n        self: true\n      }, {\n        token: CALL_SET_DISABLED_STATE,\n        optional: true\n      }],\n      target: i0.ɵɵFactoryTarget.Directive\n    });\n  }\n  static {\n    this.ɵdir = i0.ɵɵngDeclareDirective({\n      minVersion: \"14.0.0\",\n      version: \"18.1.4\",\n      type: FormGroupDirective,\n      selector: \"[formGroup]\",\n      inputs: {\n        form: [\"formGroup\", \"form\"]\n      },\n      outputs: {\n        ngSubmit: \"ngSubmit\"\n      },\n      host: {\n        listeners: {\n          \"submit\": \"onSubmit($event)\",\n          \"reset\": \"onReset()\"\n        }\n      },\n      providers: [formDirectiveProvider],\n      exportAs: [\"ngForm\"],\n      usesInheritance: true,\n      usesOnChanges: true,\n      ngImport: i0\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.1.4\",\n  ngImport: i0,\n  type: FormGroupDirective,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: '[formGroup]',\n      providers: [formDirectiveProvider],\n      host: {\n        '(submit)': 'onSubmit($event)',\n        '(reset)': 'onReset()'\n      },\n      exportAs: 'ngForm'\n    }]\n  }],\n  ctorParameters: () => [{\n    type: undefined,\n    decorators: [{\n      type: Optional\n    }, {\n      type: Self\n    }, {\n      type: Inject,\n      args: [NG_VALIDATORS]\n    }]\n  }, {\n    type: undefined,\n    decorators: [{\n      type: Optional\n    }, {\n      type: Self\n    }, {\n      type: Inject,\n      args: [NG_ASYNC_VALIDATORS]\n    }]\n  }, {\n    type: undefined,\n    decorators: [{\n      type: Optional\n    }, {\n      type: Inject,\n      args: [CALL_SET_DISABLED_STATE]\n    }]\n  }],\n  propDecorators: {\n    form: [{\n      type: Input,\n      args: ['formGroup']\n    }],\n    ngSubmit: [{\n      type: Output\n    }]\n  }\n});\nconst formGroupNameProvider = {\n  provide: ControlContainer,\n  useExisting: forwardRef(() => FormGroupName)\n};\n/**\n * @description\n *\n * Syncs a nested `FormGroup` or `FormRecord` to a DOM element.\n *\n * This directive can only be used with a parent `FormGroupDirective`.\n *\n * It accepts the string name of the nested `FormGroup` or `FormRecord` to link, and\n * looks for a `FormGroup` or `FormRecord` registered with that name in the parent\n * `FormGroup` instance you passed into `FormGroupDirective`.\n *\n * Use nested form groups to validate a sub-group of a\n * form separately from the rest or to group the values of certain\n * controls into their own nested object.\n *\n * @see [Reactive Forms Guide](guide/forms/reactive-forms)\n *\n * @usageNotes\n *\n * ### Access the group by name\n *\n * The following example uses the `AbstractControl.get` method to access the\n * associated `FormGroup`\n *\n * ```ts\n *   this.form.get('name');\n * ```\n *\n * ### Access individual controls in the group\n *\n * The following example uses the `AbstractControl.get` method to access\n * individual controls within the group using dot syntax.\n *\n * ```ts\n *   this.form.get('name.first');\n * ```\n *\n * ### Register a nested `FormGroup`.\n *\n * The following example registers a nested *name* `FormGroup` within an existing `FormGroup`,\n * and provides methods to retrieve the nested `FormGroup` and individual controls.\n *\n * {@example forms/ts/nestedFormGroup/nested_form_group_example.ts region='Component'}\n *\n * @ngModule ReactiveFormsModule\n * @publicApi\n */\nclass FormGroupName extends AbstractFormGroupDirective {\n  constructor(parent, validators, asyncValidators) {\n    super();\n    /**\n     * @description\n     * Tracks the name of the `FormGroup` bound to the directive. The name corresponds\n     * to a key in the parent `FormGroup` or `FormArray`.\n     * Accepts a name as a string or a number.\n     * The name in the form of a string is useful for individual forms,\n     * while the numerical form allows for form groups to be bound\n     * to indices when iterating over groups in a `FormArray`.\n     */\n    this.name = null;\n    this._parent = parent;\n    this._setValidators(validators);\n    this._setAsyncValidators(asyncValidators);\n  }\n  /** @internal */\n  _checkParentType() {\n    if (_hasInvalidParent(this._parent) && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n      throw groupParentException();\n    }\n  }\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: FormGroupName,\n      deps: [{\n        token: ControlContainer,\n        host: true,\n        optional: true,\n        skipSelf: true\n      }, {\n        token: NG_VALIDATORS,\n        optional: true,\n        self: true\n      }, {\n        token: NG_ASYNC_VALIDATORS,\n        optional: true,\n        self: true\n      }],\n      target: i0.ɵɵFactoryTarget.Directive\n    });\n  }\n  static {\n    this.ɵdir = i0.ɵɵngDeclareDirective({\n      minVersion: \"14.0.0\",\n      version: \"18.1.4\",\n      type: FormGroupName,\n      selector: \"[formGroupName]\",\n      inputs: {\n        name: [\"formGroupName\", \"name\"]\n      },\n      providers: [formGroupNameProvider],\n      usesInheritance: true,\n      ngImport: i0\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.1.4\",\n  ngImport: i0,\n  type: FormGroupName,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: '[formGroupName]',\n      providers: [formGroupNameProvider]\n    }]\n  }],\n  ctorParameters: () => [{\n    type: ControlContainer,\n    decorators: [{\n      type: Optional\n    }, {\n      type: Host\n    }, {\n      type: SkipSelf\n    }]\n  }, {\n    type: undefined,\n    decorators: [{\n      type: Optional\n    }, {\n      type: Self\n    }, {\n      type: Inject,\n      args: [NG_VALIDATORS]\n    }]\n  }, {\n    type: undefined,\n    decorators: [{\n      type: Optional\n    }, {\n      type: Self\n    }, {\n      type: Inject,\n      args: [NG_ASYNC_VALIDATORS]\n    }]\n  }],\n  propDecorators: {\n    name: [{\n      type: Input,\n      args: ['formGroupName']\n    }]\n  }\n});\nconst formArrayNameProvider = {\n  provide: ControlContainer,\n  useExisting: forwardRef(() => FormArrayName)\n};\n/**\n * @description\n *\n * Syncs a nested `FormArray` to a DOM element.\n *\n * This directive is designed to be used with a parent `FormGroupDirective` (selector:\n * `[formGroup]`).\n *\n * It accepts the string name of the nested `FormArray` you want to link, and\n * will look for a `FormArray` registered with that name in the parent\n * `FormGroup` instance you passed into `FormGroupDirective`.\n *\n * @see [Reactive Forms Guide](guide/forms/reactive-forms)\n * @see {@link AbstractControl}\n *\n * @usageNotes\n *\n * ### Example\n *\n * {@example forms/ts/nestedFormArray/nested_form_array_example.ts region='Component'}\n *\n * @ngModule ReactiveFormsModule\n * @publicApi\n */\nclass FormArrayName extends ControlContainer {\n  constructor(parent, validators, asyncValidators) {\n    super();\n    /**\n     * @description\n     * Tracks the name of the `FormArray` bound to the directive. The name corresponds\n     * to a key in the parent `FormGroup` or `FormArray`.\n     * Accepts a name as a string or a number.\n     * The name in the form of a string is useful for individual forms,\n     * while the numerical form allows for form arrays to be bound\n     * to indices when iterating over arrays in a `FormArray`.\n     */\n    this.name = null;\n    this._parent = parent;\n    this._setValidators(validators);\n    this._setAsyncValidators(asyncValidators);\n  }\n  /**\n   * A lifecycle method called when the directive's inputs are initialized. For internal use only.\n   * @throws If the directive does not have a valid parent.\n   * @nodoc\n   */\n  ngOnInit() {\n    this._checkParentType();\n    this.formDirective.addFormArray(this);\n  }\n  /**\n   * A lifecycle method called before the directive's instance is destroyed. For internal use only.\n   * @nodoc\n   */\n  ngOnDestroy() {\n    if (this.formDirective) {\n      this.formDirective.removeFormArray(this);\n    }\n  }\n  /**\n   * @description\n   * The `FormArray` bound to this directive.\n   */\n  get control() {\n    return this.formDirective.getFormArray(this);\n  }\n  /**\n   * @description\n   * The top-level directive for this group if present, otherwise null.\n   */\n  get formDirective() {\n    return this._parent ? this._parent.formDirective : null;\n  }\n  /**\n   * @description\n   * Returns an array that represents the path from the top-level form to this control.\n   * Each index is the string name of the control on that level.\n   */\n  get path() {\n    return controlPath(this.name == null ? this.name : this.name.toString(), this._parent);\n  }\n  _checkParentType() {\n    if (_hasInvalidParent(this._parent) && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n      throw arrayParentException();\n    }\n  }\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: FormArrayName,\n      deps: [{\n        token: ControlContainer,\n        host: true,\n        optional: true,\n        skipSelf: true\n      }, {\n        token: NG_VALIDATORS,\n        optional: true,\n        self: true\n      }, {\n        token: NG_ASYNC_VALIDATORS,\n        optional: true,\n        self: true\n      }],\n      target: i0.ɵɵFactoryTarget.Directive\n    });\n  }\n  static {\n    this.ɵdir = i0.ɵɵngDeclareDirective({\n      minVersion: \"14.0.0\",\n      version: \"18.1.4\",\n      type: FormArrayName,\n      selector: \"[formArrayName]\",\n      inputs: {\n        name: [\"formArrayName\", \"name\"]\n      },\n      providers: [formArrayNameProvider],\n      usesInheritance: true,\n      ngImport: i0\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.1.4\",\n  ngImport: i0,\n  type: FormArrayName,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: '[formArrayName]',\n      providers: [formArrayNameProvider]\n    }]\n  }],\n  ctorParameters: () => [{\n    type: ControlContainer,\n    decorators: [{\n      type: Optional\n    }, {\n      type: Host\n    }, {\n      type: SkipSelf\n    }]\n  }, {\n    type: undefined,\n    decorators: [{\n      type: Optional\n    }, {\n      type: Self\n    }, {\n      type: Inject,\n      args: [NG_VALIDATORS]\n    }]\n  }, {\n    type: undefined,\n    decorators: [{\n      type: Optional\n    }, {\n      type: Self\n    }, {\n      type: Inject,\n      args: [NG_ASYNC_VALIDATORS]\n    }]\n  }],\n  propDecorators: {\n    name: [{\n      type: Input,\n      args: ['formArrayName']\n    }]\n  }\n});\nfunction _hasInvalidParent(parent) {\n  return !(parent instanceof FormGroupName) && !(parent instanceof FormGroupDirective) && !(parent instanceof FormArrayName);\n}\nconst controlNameBinding = {\n  provide: NgControl,\n  useExisting: forwardRef(() => FormControlName)\n};\n/**\n * @description\n * Syncs a `FormControl` in an existing `FormGroup` to a form control\n * element by name.\n *\n * @see [Reactive Forms Guide](guide/forms/reactive-forms)\n * @see {@link FormControl}\n * @see {@link AbstractControl}\n *\n * @usageNotes\n *\n * ### Register `FormControl` within a group\n *\n * The following example shows how to register multiple form controls within a form group\n * and set their value.\n *\n * {@example forms/ts/simpleFormGroup/simple_form_group_example.ts region='Component'}\n *\n * To see `formControlName` examples with different form control types, see:\n *\n * * Radio buttons: `RadioControlValueAccessor`\n * * Selects: `SelectControlValueAccessor`\n *\n * ### Use with ngModel is deprecated\n *\n * Support for using the `ngModel` input property and `ngModelChange` event with reactive\n * form directives has been deprecated in Angular v6 and is scheduled for removal in\n * a future version of Angular.\n *\n * @ngModule ReactiveFormsModule\n * @publicApi\n */\nclass FormControlName extends NgControl {\n  /**\n   * @description\n   * Triggers a warning in dev mode that this input should not be used with reactive forms.\n   */\n  set isDisabled(isDisabled) {\n    if (typeof ngDevMode === 'undefined' || ngDevMode) {\n      console.warn(disabledAttrWarning);\n    }\n  }\n  /**\n   * @description\n   * Static property used to track whether any ngModel warnings have been sent across\n   * all instances of FormControlName. Used to support warning config of \"once\".\n   *\n   * @internal\n   */\n  static {\n    this._ngModelWarningSentOnce = false;\n  }\n  constructor(parent, validators, asyncValidators, valueAccessors, _ngModelWarningConfig) {\n    super();\n    this._ngModelWarningConfig = _ngModelWarningConfig;\n    this._added = false;\n    /**\n     * @description\n     * Tracks the name of the `FormControl` bound to the directive. The name corresponds\n     * to a key in the parent `FormGroup` or `FormArray`.\n     * Accepts a name as a string or a number.\n     * The name in the form of a string is useful for individual forms,\n     * while the numerical form allows for form controls to be bound\n     * to indices when iterating over controls in a `FormArray`.\n     */\n    this.name = null;\n    /** @deprecated as of v6 */\n    this.update = new EventEmitter();\n    /**\n     * @description\n     * Instance property used to track whether an ngModel warning has been sent out for this\n     * particular FormControlName instance. Used to support warning config of \"always\".\n     *\n     * @internal\n     */\n    this._ngModelWarningSent = false;\n    this._parent = parent;\n    this._setValidators(validators);\n    this._setAsyncValidators(asyncValidators);\n    this.valueAccessor = selectValueAccessor(this, valueAccessors);\n  }\n  /** @nodoc */\n  ngOnChanges(changes) {\n    if (!this._added) this._setUpControl();\n    if (isPropertyUpdated(changes, this.viewModel)) {\n      if (typeof ngDevMode === 'undefined' || ngDevMode) {\n        _ngModelWarning('formControlName', FormControlName, this, this._ngModelWarningConfig);\n      }\n      this.viewModel = this.model;\n      this.formDirective.updateModel(this, this.model);\n    }\n  }\n  /** @nodoc */\n  ngOnDestroy() {\n    if (this.formDirective) {\n      this.formDirective.removeControl(this);\n    }\n  }\n  /**\n   * @description\n   * Sets the new value for the view model and emits an `ngModelChange` event.\n   *\n   * @param newValue The new value for the view model.\n   */\n  viewToModelUpdate(newValue) {\n    this.viewModel = newValue;\n    this.update.emit(newValue);\n  }\n  /**\n   * @description\n   * Returns an array that represents the path from the top-level form to this control.\n   * Each index is the string name of the control on that level.\n   */\n  get path() {\n    return controlPath(this.name == null ? this.name : this.name.toString(), this._parent);\n  }\n  /**\n   * @description\n   * The top-level directive for this group if present, otherwise null.\n   */\n  get formDirective() {\n    return this._parent ? this._parent.formDirective : null;\n  }\n  _checkParentType() {\n    if (typeof ngDevMode === 'undefined' || ngDevMode) {\n      if (!(this._parent instanceof FormGroupName) && this._parent instanceof AbstractFormGroupDirective) {\n        throw ngModelGroupException();\n      } else if (!(this._parent instanceof FormGroupName) && !(this._parent instanceof FormGroupDirective) && !(this._parent instanceof FormArrayName)) {\n        throw controlParentException(this.name);\n      }\n    }\n  }\n  _setUpControl() {\n    this._checkParentType();\n    this.control = this.formDirective.addControl(this);\n    this._added = true;\n  }\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: FormControlName,\n      deps: [{\n        token: ControlContainer,\n        host: true,\n        optional: true,\n        skipSelf: true\n      }, {\n        token: NG_VALIDATORS,\n        optional: true,\n        self: true\n      }, {\n        token: NG_ASYNC_VALIDATORS,\n        optional: true,\n        self: true\n      }, {\n        token: NG_VALUE_ACCESSOR,\n        optional: true,\n        self: true\n      }, {\n        token: NG_MODEL_WITH_FORM_CONTROL_WARNING,\n        optional: true\n      }],\n      target: i0.ɵɵFactoryTarget.Directive\n    });\n  }\n  static {\n    this.ɵdir = i0.ɵɵngDeclareDirective({\n      minVersion: \"14.0.0\",\n      version: \"18.1.4\",\n      type: FormControlName,\n      selector: \"[formControlName]\",\n      inputs: {\n        name: [\"formControlName\", \"name\"],\n        isDisabled: [\"disabled\", \"isDisabled\"],\n        model: [\"ngModel\", \"model\"]\n      },\n      outputs: {\n        update: \"ngModelChange\"\n      },\n      providers: [controlNameBinding],\n      usesInheritance: true,\n      usesOnChanges: true,\n      ngImport: i0\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.1.4\",\n  ngImport: i0,\n  type: FormControlName,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: '[formControlName]',\n      providers: [controlNameBinding]\n    }]\n  }],\n  ctorParameters: () => [{\n    type: ControlContainer,\n    decorators: [{\n      type: Optional\n    }, {\n      type: Host\n    }, {\n      type: SkipSelf\n    }]\n  }, {\n    type: undefined,\n    decorators: [{\n      type: Optional\n    }, {\n      type: Self\n    }, {\n      type: Inject,\n      args: [NG_VALIDATORS]\n    }]\n  }, {\n    type: undefined,\n    decorators: [{\n      type: Optional\n    }, {\n      type: Self\n    }, {\n      type: Inject,\n      args: [NG_ASYNC_VALIDATORS]\n    }]\n  }, {\n    type: undefined,\n    decorators: [{\n      type: Optional\n    }, {\n      type: Self\n    }, {\n      type: Inject,\n      args: [NG_VALUE_ACCESSOR]\n    }]\n  }, {\n    type: undefined,\n    decorators: [{\n      type: Optional\n    }, {\n      type: Inject,\n      args: [NG_MODEL_WITH_FORM_CONTROL_WARNING]\n    }]\n  }],\n  propDecorators: {\n    name: [{\n      type: Input,\n      args: ['formControlName']\n    }],\n    isDisabled: [{\n      type: Input,\n      args: ['disabled']\n    }],\n    model: [{\n      type: Input,\n      args: ['ngModel']\n    }],\n    update: [{\n      type: Output,\n      args: ['ngModelChange']\n    }]\n  }\n});\nconst SELECT_VALUE_ACCESSOR = {\n  provide: NG_VALUE_ACCESSOR,\n  useExisting: forwardRef(() => SelectControlValueAccessor),\n  multi: true\n};\nfunction _buildValueString$1(id, value) {\n  if (id == null) return `${value}`;\n  if (value && typeof value === 'object') value = 'Object';\n  return `${id}: ${value}`.slice(0, 50);\n}\nfunction _extractId$1(valueString) {\n  return valueString.split(':')[0];\n}\n/**\n * @description\n * The `ControlValueAccessor` for writing select control values and listening to select control\n * changes. The value accessor is used by the `FormControlDirective`, `FormControlName`, and\n * `NgModel` directives.\n *\n * @usageNotes\n *\n * ### Using select controls in a reactive form\n *\n * The following examples show how to use a select control in a reactive form.\n *\n * {@example forms/ts/reactiveSelectControl/reactive_select_control_example.ts region='Component'}\n *\n * ### Using select controls in a template-driven form\n *\n * To use a select in a template-driven form, simply add an `ngModel` and a `name`\n * attribute to the main `<select>` tag.\n *\n * {@example forms/ts/selectControl/select_control_example.ts region='Component'}\n *\n * ### Customizing option selection\n *\n * Angular uses object identity to select option. It's possible for the identities of items\n * to change while the data does not. This can happen, for example, if the items are produced\n * from an RPC to the server, and that RPC is re-run. Even if the data hasn't changed, the\n * second response will produce objects with different identities.\n *\n * To customize the default option comparison algorithm, `<select>` supports `compareWith` input.\n * `compareWith` takes a **function** which has two arguments: `option1` and `option2`.\n * If `compareWith` is given, Angular selects option by the return value of the function.\n *\n * ```ts\n * const selectedCountriesControl = new FormControl();\n * ```\n *\n * ```\n * <select [compareWith]=\"compareFn\"  [formControl]=\"selectedCountriesControl\">\n *     <option *ngFor=\"let country of countries\" [ngValue]=\"country\">\n *         {{country.name}}\n *     </option>\n * </select>\n *\n * compareFn(c1: Country, c2: Country): boolean {\n *     return c1 && c2 ? c1.id === c2.id : c1 === c2;\n * }\n * ```\n *\n * **Note:** We listen to the 'change' event because 'input' events aren't fired\n * for selects in IE, see:\n * https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/input_event#browser_compatibility\n *\n * @ngModule ReactiveFormsModule\n * @ngModule FormsModule\n * @publicApi\n */\nclass SelectControlValueAccessor extends BuiltInControlValueAccessor {\n  constructor() {\n    super(...arguments);\n    /** @internal */\n    this._optionMap = new Map();\n    /** @internal */\n    this._idCounter = 0;\n    this._compareWith = Object.is;\n  }\n  /**\n   * @description\n   * Tracks the option comparison algorithm for tracking identities when\n   * checking for changes.\n   */\n  set compareWith(fn) {\n    if (typeof fn !== 'function' && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n      throw new ɵRuntimeError(1201 /* RuntimeErrorCode.COMPAREWITH_NOT_A_FN */, `compareWith must be a function, but received ${JSON.stringify(fn)}`);\n    }\n    this._compareWith = fn;\n  }\n  /**\n   * Sets the \"value\" property on the select element.\n   * @nodoc\n   */\n  writeValue(value) {\n    this.value = value;\n    const id = this._getOptionId(value);\n    const valueString = _buildValueString$1(id, value);\n    this.setProperty('value', valueString);\n  }\n  /**\n   * Registers a function called when the control value changes.\n   * @nodoc\n   */\n  registerOnChange(fn) {\n    this.onChange = valueString => {\n      this.value = this._getOptionValue(valueString);\n      fn(this.value);\n    };\n  }\n  /** @internal */\n  _registerOption() {\n    return (this._idCounter++).toString();\n  }\n  /** @internal */\n  _getOptionId(value) {\n    for (const id of this._optionMap.keys()) {\n      if (this._compareWith(this._optionMap.get(id), value)) return id;\n    }\n    return null;\n  }\n  /** @internal */\n  _getOptionValue(valueString) {\n    const id = _extractId$1(valueString);\n    return this._optionMap.has(id) ? this._optionMap.get(id) : valueString;\n  }\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: SelectControlValueAccessor,\n      deps: null,\n      target: i0.ɵɵFactoryTarget.Directive\n    });\n  }\n  static {\n    this.ɵdir = i0.ɵɵngDeclareDirective({\n      minVersion: \"14.0.0\",\n      version: \"18.1.4\",\n      type: SelectControlValueAccessor,\n      selector: \"select:not([multiple])[formControlName],select:not([multiple])[formControl],select:not([multiple])[ngModel]\",\n      inputs: {\n        compareWith: \"compareWith\"\n      },\n      host: {\n        listeners: {\n          \"change\": \"onChange($event.target.value)\",\n          \"blur\": \"onTouched()\"\n        }\n      },\n      providers: [SELECT_VALUE_ACCESSOR],\n      usesInheritance: true,\n      ngImport: i0\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.1.4\",\n  ngImport: i0,\n  type: SelectControlValueAccessor,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: 'select:not([multiple])[formControlName],select:not([multiple])[formControl],select:not([multiple])[ngModel]',\n      host: {\n        '(change)': 'onChange($event.target.value)',\n        '(blur)': 'onTouched()'\n      },\n      providers: [SELECT_VALUE_ACCESSOR]\n    }]\n  }],\n  propDecorators: {\n    compareWith: [{\n      type: Input\n    }]\n  }\n});\n/**\n * @description\n * Marks `<option>` as dynamic, so Angular can be notified when options change.\n *\n * @see {@link SelectControlValueAccessor}\n *\n * @ngModule ReactiveFormsModule\n * @ngModule FormsModule\n * @publicApi\n */\nclass NgSelectOption {\n  constructor(_element, _renderer, _select) {\n    this._element = _element;\n    this._renderer = _renderer;\n    this._select = _select;\n    if (this._select) this.id = this._select._registerOption();\n  }\n  /**\n   * @description\n   * Tracks the value bound to the option element. Unlike the value binding,\n   * ngValue supports binding to objects.\n   */\n  set ngValue(value) {\n    if (this._select == null) return;\n    this._select._optionMap.set(this.id, value);\n    this._setElementValue(_buildValueString$1(this.id, value));\n    this._select.writeValue(this._select.value);\n  }\n  /**\n   * @description\n   * Tracks simple string values bound to the option element.\n   * For objects, use the `ngValue` input binding.\n   */\n  set value(value) {\n    this._setElementValue(value);\n    if (this._select) this._select.writeValue(this._select.value);\n  }\n  /** @internal */\n  _setElementValue(value) {\n    this._renderer.setProperty(this._element.nativeElement, 'value', value);\n  }\n  /** @nodoc */\n  ngOnDestroy() {\n    if (this._select) {\n      this._select._optionMap.delete(this.id);\n      this._select.writeValue(this._select.value);\n    }\n  }\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: NgSelectOption,\n      deps: [{\n        token: i0.ElementRef\n      }, {\n        token: i0.Renderer2\n      }, {\n        token: SelectControlValueAccessor,\n        host: true,\n        optional: true\n      }],\n      target: i0.ɵɵFactoryTarget.Directive\n    });\n  }\n  static {\n    this.ɵdir = i0.ɵɵngDeclareDirective({\n      minVersion: \"14.0.0\",\n      version: \"18.1.4\",\n      type: NgSelectOption,\n      selector: \"option\",\n      inputs: {\n        ngValue: \"ngValue\",\n        value: \"value\"\n      },\n      ngImport: i0\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.1.4\",\n  ngImport: i0,\n  type: NgSelectOption,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: 'option'\n    }]\n  }],\n  ctorParameters: () => [{\n    type: i0.ElementRef\n  }, {\n    type: i0.Renderer2\n  }, {\n    type: SelectControlValueAccessor,\n    decorators: [{\n      type: Optional\n    }, {\n      type: Host\n    }]\n  }],\n  propDecorators: {\n    ngValue: [{\n      type: Input,\n      args: ['ngValue']\n    }],\n    value: [{\n      type: Input,\n      args: ['value']\n    }]\n  }\n});\nconst SELECT_MULTIPLE_VALUE_ACCESSOR = {\n  provide: NG_VALUE_ACCESSOR,\n  useExisting: forwardRef(() => SelectMultipleControlValueAccessor),\n  multi: true\n};\nfunction _buildValueString(id, value) {\n  if (id == null) return `${value}`;\n  if (typeof value === 'string') value = `'${value}'`;\n  if (value && typeof value === 'object') value = 'Object';\n  return `${id}: ${value}`.slice(0, 50);\n}\nfunction _extractId(valueString) {\n  return valueString.split(':')[0];\n}\n/** Mock interface for HTMLCollection */\nclass HTMLCollection {}\n/**\n * @description\n * The `ControlValueAccessor` for writing multi-select control values and listening to multi-select\n * control changes. The value accessor is used by the `FormControlDirective`, `FormControlName`, and\n * `NgModel` directives.\n *\n * @see {@link SelectControlValueAccessor}\n *\n * @usageNotes\n *\n * ### Using a multi-select control\n *\n * The follow example shows you how to use a multi-select control with a reactive form.\n *\n * ```ts\n * const countryControl = new FormControl();\n * ```\n *\n * ```\n * <select multiple name=\"countries\" [formControl]=\"countryControl\">\n *   <option *ngFor=\"let country of countries\" [ngValue]=\"country\">\n *     {{ country.name }}\n *   </option>\n * </select>\n * ```\n *\n * ### Customizing option selection\n *\n * To customize the default option comparison algorithm, `<select>` supports `compareWith` input.\n * See the `SelectControlValueAccessor` for usage.\n *\n * @ngModule ReactiveFormsModule\n * @ngModule FormsModule\n * @publicApi\n */\nclass SelectMultipleControlValueAccessor extends BuiltInControlValueAccessor {\n  constructor() {\n    super(...arguments);\n    /** @internal */\n    this._optionMap = new Map();\n    /** @internal */\n    this._idCounter = 0;\n    this._compareWith = Object.is;\n  }\n  /**\n   * @description\n   * Tracks the option comparison algorithm for tracking identities when\n   * checking for changes.\n   */\n  set compareWith(fn) {\n    if (typeof fn !== 'function' && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n      throw new ɵRuntimeError(1201 /* RuntimeErrorCode.COMPAREWITH_NOT_A_FN */, `compareWith must be a function, but received ${JSON.stringify(fn)}`);\n    }\n    this._compareWith = fn;\n  }\n  /**\n   * Sets the \"value\" property on one or of more of the select's options.\n   * @nodoc\n   */\n  writeValue(value) {\n    this.value = value;\n    let optionSelectedStateSetter;\n    if (Array.isArray(value)) {\n      // convert values to ids\n      const ids = value.map(v => this._getOptionId(v));\n      optionSelectedStateSetter = (opt, o) => {\n        opt._setSelected(ids.indexOf(o.toString()) > -1);\n      };\n    } else {\n      optionSelectedStateSetter = (opt, o) => {\n        opt._setSelected(false);\n      };\n    }\n    this._optionMap.forEach(optionSelectedStateSetter);\n  }\n  /**\n   * Registers a function called when the control value changes\n   * and writes an array of the selected options.\n   * @nodoc\n   */\n  registerOnChange(fn) {\n    this.onChange = element => {\n      const selected = [];\n      const selectedOptions = element.selectedOptions;\n      if (selectedOptions !== undefined) {\n        const options = selectedOptions;\n        for (let i = 0; i < options.length; i++) {\n          const opt = options[i];\n          const val = this._getOptionValue(opt.value);\n          selected.push(val);\n        }\n      }\n      // Degrade to use `options` when `selectedOptions` property is not available.\n      // Note: the `selectedOptions` is available in all supported browsers, but the Domino lib\n      // doesn't have it currently, see https://github.com/fgnass/domino/issues/177.\n      else {\n        const options = element.options;\n        for (let i = 0; i < options.length; i++) {\n          const opt = options[i];\n          if (opt.selected) {\n            const val = this._getOptionValue(opt.value);\n            selected.push(val);\n          }\n        }\n      }\n      this.value = selected;\n      fn(selected);\n    };\n  }\n  /** @internal */\n  _registerOption(value) {\n    const id = (this._idCounter++).toString();\n    this._optionMap.set(id, value);\n    return id;\n  }\n  /** @internal */\n  _getOptionId(value) {\n    for (const id of this._optionMap.keys()) {\n      if (this._compareWith(this._optionMap.get(id)._value, value)) return id;\n    }\n    return null;\n  }\n  /** @internal */\n  _getOptionValue(valueString) {\n    const id = _extractId(valueString);\n    return this._optionMap.has(id) ? this._optionMap.get(id)._value : valueString;\n  }\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: SelectMultipleControlValueAccessor,\n      deps: null,\n      target: i0.ɵɵFactoryTarget.Directive\n    });\n  }\n  static {\n    this.ɵdir = i0.ɵɵngDeclareDirective({\n      minVersion: \"14.0.0\",\n      version: \"18.1.4\",\n      type: SelectMultipleControlValueAccessor,\n      selector: \"select[multiple][formControlName],select[multiple][formControl],select[multiple][ngModel]\",\n      inputs: {\n        compareWith: \"compareWith\"\n      },\n      host: {\n        listeners: {\n          \"change\": \"onChange($event.target)\",\n          \"blur\": \"onTouched()\"\n        }\n      },\n      providers: [SELECT_MULTIPLE_VALUE_ACCESSOR],\n      usesInheritance: true,\n      ngImport: i0\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.1.4\",\n  ngImport: i0,\n  type: SelectMultipleControlValueAccessor,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: 'select[multiple][formControlName],select[multiple][formControl],select[multiple][ngModel]',\n      host: {\n        '(change)': 'onChange($event.target)',\n        '(blur)': 'onTouched()'\n      },\n      providers: [SELECT_MULTIPLE_VALUE_ACCESSOR]\n    }]\n  }],\n  propDecorators: {\n    compareWith: [{\n      type: Input\n    }]\n  }\n});\n/**\n * @description\n * Marks `<option>` as dynamic, so Angular can be notified when options change.\n *\n * @see {@link SelectMultipleControlValueAccessor}\n *\n * @ngModule ReactiveFormsModule\n * @ngModule FormsModule\n * @publicApi\n */\nclass ɵNgSelectMultipleOption {\n  constructor(_element, _renderer, _select) {\n    this._element = _element;\n    this._renderer = _renderer;\n    this._select = _select;\n    if (this._select) {\n      this.id = this._select._registerOption(this);\n    }\n  }\n  /**\n   * @description\n   * Tracks the value bound to the option element. Unlike the value binding,\n   * ngValue supports binding to objects.\n   */\n  set ngValue(value) {\n    if (this._select == null) return;\n    this._value = value;\n    this._setElementValue(_buildValueString(this.id, value));\n    this._select.writeValue(this._select.value);\n  }\n  /**\n   * @description\n   * Tracks simple string values bound to the option element.\n   * For objects, use the `ngValue` input binding.\n   */\n  set value(value) {\n    if (this._select) {\n      this._value = value;\n      this._setElementValue(_buildValueString(this.id, value));\n      this._select.writeValue(this._select.value);\n    } else {\n      this._setElementValue(value);\n    }\n  }\n  /** @internal */\n  _setElementValue(value) {\n    this._renderer.setProperty(this._element.nativeElement, 'value', value);\n  }\n  /** @internal */\n  _setSelected(selected) {\n    this._renderer.setProperty(this._element.nativeElement, 'selected', selected);\n  }\n  /** @nodoc */\n  ngOnDestroy() {\n    if (this._select) {\n      this._select._optionMap.delete(this.id);\n      this._select.writeValue(this._select.value);\n    }\n  }\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: ɵNgSelectMultipleOption,\n      deps: [{\n        token: i0.ElementRef\n      }, {\n        token: i0.Renderer2\n      }, {\n        token: SelectMultipleControlValueAccessor,\n        host: true,\n        optional: true\n      }],\n      target: i0.ɵɵFactoryTarget.Directive\n    });\n  }\n  static {\n    this.ɵdir = i0.ɵɵngDeclareDirective({\n      minVersion: \"14.0.0\",\n      version: \"18.1.4\",\n      type: ɵNgSelectMultipleOption,\n      selector: \"option\",\n      inputs: {\n        ngValue: \"ngValue\",\n        value: \"value\"\n      },\n      ngImport: i0\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.1.4\",\n  ngImport: i0,\n  type: ɵNgSelectMultipleOption,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: 'option'\n    }]\n  }],\n  ctorParameters: () => [{\n    type: i0.ElementRef\n  }, {\n    type: i0.Renderer2\n  }, {\n    type: SelectMultipleControlValueAccessor,\n    decorators: [{\n      type: Optional\n    }, {\n      type: Host\n    }]\n  }],\n  propDecorators: {\n    ngValue: [{\n      type: Input,\n      args: ['ngValue']\n    }],\n    value: [{\n      type: Input,\n      args: ['value']\n    }]\n  }\n});\n\n/**\n * Method that updates string to integer if not already a number\n *\n * @param value The value to convert to integer.\n * @returns value of parameter converted to number or integer.\n */\nfunction toInteger(value) {\n  return typeof value === 'number' ? value : parseInt(value, 10);\n}\n/**\n * Method that ensures that provided value is a float (and converts it to float if needed).\n *\n * @param value The value to convert to float.\n * @returns value of parameter converted to number or float.\n */\nfunction toFloat(value) {\n  return typeof value === 'number' ? value : parseFloat(value);\n}\n/**\n * A base class for Validator-based Directives. The class contains common logic shared across such\n * Directives.\n *\n * For internal use only, this class is not intended for use outside of the Forms package.\n */\nclass AbstractValidatorDirective {\n  constructor() {\n    this._validator = nullValidator;\n  }\n  /** @nodoc */\n  ngOnChanges(changes) {\n    if (this.inputName in changes) {\n      const input = this.normalizeInput(changes[this.inputName].currentValue);\n      this._enabled = this.enabled(input);\n      this._validator = this._enabled ? this.createValidator(input) : nullValidator;\n      if (this._onChange) {\n        this._onChange();\n      }\n    }\n  }\n  /** @nodoc */\n  validate(control) {\n    return this._validator(control);\n  }\n  /** @nodoc */\n  registerOnValidatorChange(fn) {\n    this._onChange = fn;\n  }\n  /**\n   * @description\n   * Determines whether this validator should be active or not based on an input.\n   * Base class implementation checks whether an input is defined (if the value is different from\n   * `null` and `undefined`). Validator classes that extend this base class can override this\n   * function with the logic specific to a particular validator directive.\n   */\n  enabled(input) {\n    return input != null /* both `null` and `undefined` */;\n  }\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: AbstractValidatorDirective,\n      deps: [],\n      target: i0.ɵɵFactoryTarget.Directive\n    });\n  }\n  static {\n    this.ɵdir = i0.ɵɵngDeclareDirective({\n      minVersion: \"14.0.0\",\n      version: \"18.1.4\",\n      type: AbstractValidatorDirective,\n      usesOnChanges: true,\n      ngImport: i0\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.1.4\",\n  ngImport: i0,\n  type: AbstractValidatorDirective,\n  decorators: [{\n    type: Directive\n  }]\n});\n/**\n * @description\n * Provider which adds `MaxValidator` to the `NG_VALIDATORS` multi-provider list.\n */\nconst MAX_VALIDATOR = {\n  provide: NG_VALIDATORS,\n  useExisting: forwardRef(() => MaxValidator),\n  multi: true\n};\n/**\n * A directive which installs the {@link MaxValidator} for any `formControlName`,\n * `formControl`, or control with `ngModel` that also has a `max` attribute.\n *\n * @see [Form Validation](guide/forms/form-validation)\n *\n * @usageNotes\n *\n * ### Adding a max validator\n *\n * The following example shows how to add a max validator to an input attached to an\n * ngModel binding.\n *\n * ```html\n * <input type=\"number\" ngModel max=\"4\">\n * ```\n *\n * @ngModule ReactiveFormsModule\n * @ngModule FormsModule\n * @publicApi\n */\nclass MaxValidator extends AbstractValidatorDirective {\n  constructor() {\n    super(...arguments);\n    /** @internal */\n    this.inputName = 'max';\n    /** @internal */\n    this.normalizeInput = input => toFloat(input);\n    /** @internal */\n    this.createValidator = max => maxValidator(max);\n  }\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: MaxValidator,\n      deps: null,\n      target: i0.ɵɵFactoryTarget.Directive\n    });\n  }\n  static {\n    this.ɵdir = i0.ɵɵngDeclareDirective({\n      minVersion: \"14.0.0\",\n      version: \"18.1.4\",\n      type: MaxValidator,\n      selector: \"input[type=number][max][formControlName],input[type=number][max][formControl],input[type=number][max][ngModel]\",\n      inputs: {\n        max: \"max\"\n      },\n      host: {\n        properties: {\n          \"attr.max\": \"_enabled ? max : null\"\n        }\n      },\n      providers: [MAX_VALIDATOR],\n      usesInheritance: true,\n      ngImport: i0\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.1.4\",\n  ngImport: i0,\n  type: MaxValidator,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: 'input[type=number][max][formControlName],input[type=number][max][formControl],input[type=number][max][ngModel]',\n      providers: [MAX_VALIDATOR],\n      host: {\n        '[attr.max]': '_enabled ? max : null'\n      }\n    }]\n  }],\n  propDecorators: {\n    max: [{\n      type: Input\n    }]\n  }\n});\n/**\n * @description\n * Provider which adds `MinValidator` to the `NG_VALIDATORS` multi-provider list.\n */\nconst MIN_VALIDATOR = {\n  provide: NG_VALIDATORS,\n  useExisting: forwardRef(() => MinValidator),\n  multi: true\n};\n/**\n * A directive which installs the {@link MinValidator} for any `formControlName`,\n * `formControl`, or control with `ngModel` that also has a `min` attribute.\n *\n * @see [Form Validation](guide/forms/form-validation)\n *\n * @usageNotes\n *\n * ### Adding a min validator\n *\n * The following example shows how to add a min validator to an input attached to an\n * ngModel binding.\n *\n * ```html\n * <input type=\"number\" ngModel min=\"4\">\n * ```\n *\n * @ngModule ReactiveFormsModule\n * @ngModule FormsModule\n * @publicApi\n */\nclass MinValidator extends AbstractValidatorDirective {\n  constructor() {\n    super(...arguments);\n    /** @internal */\n    this.inputName = 'min';\n    /** @internal */\n    this.normalizeInput = input => toFloat(input);\n    /** @internal */\n    this.createValidator = min => minValidator(min);\n  }\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: MinValidator,\n      deps: null,\n      target: i0.ɵɵFactoryTarget.Directive\n    });\n  }\n  static {\n    this.ɵdir = i0.ɵɵngDeclareDirective({\n      minVersion: \"14.0.0\",\n      version: \"18.1.4\",\n      type: MinValidator,\n      selector: \"input[type=number][min][formControlName],input[type=number][min][formControl],input[type=number][min][ngModel]\",\n      inputs: {\n        min: \"min\"\n      },\n      host: {\n        properties: {\n          \"attr.min\": \"_enabled ? min : null\"\n        }\n      },\n      providers: [MIN_VALIDATOR],\n      usesInheritance: true,\n      ngImport: i0\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.1.4\",\n  ngImport: i0,\n  type: MinValidator,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: 'input[type=number][min][formControlName],input[type=number][min][formControl],input[type=number][min][ngModel]',\n      providers: [MIN_VALIDATOR],\n      host: {\n        '[attr.min]': '_enabled ? min : null'\n      }\n    }]\n  }],\n  propDecorators: {\n    min: [{\n      type: Input\n    }]\n  }\n});\n/**\n * @description\n * Provider which adds `RequiredValidator` to the `NG_VALIDATORS` multi-provider list.\n */\nconst REQUIRED_VALIDATOR = {\n  provide: NG_VALIDATORS,\n  useExisting: forwardRef(() => RequiredValidator),\n  multi: true\n};\n/**\n * @description\n * Provider which adds `CheckboxRequiredValidator` to the `NG_VALIDATORS` multi-provider list.\n */\nconst CHECKBOX_REQUIRED_VALIDATOR = {\n  provide: NG_VALIDATORS,\n  useExisting: forwardRef(() => CheckboxRequiredValidator),\n  multi: true\n};\n/**\n * @description\n * A directive that adds the `required` validator to any controls marked with the\n * `required` attribute. The directive is provided with the `NG_VALIDATORS` multi-provider list.\n *\n * @see [Form Validation](guide/forms/form-validation)\n *\n * @usageNotes\n *\n * ### Adding a required validator using template-driven forms\n *\n * ```\n * <input name=\"fullName\" ngModel required>\n * ```\n *\n * @ngModule FormsModule\n * @ngModule ReactiveFormsModule\n * @publicApi\n */\nclass RequiredValidator extends AbstractValidatorDirective {\n  constructor() {\n    super(...arguments);\n    /** @internal */\n    this.inputName = 'required';\n    /** @internal */\n    this.normalizeInput = booleanAttribute;\n    /** @internal */\n    this.createValidator = input => requiredValidator;\n  }\n  /** @nodoc */\n  enabled(input) {\n    return input;\n  }\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: RequiredValidator,\n      deps: null,\n      target: i0.ɵɵFactoryTarget.Directive\n    });\n  }\n  static {\n    this.ɵdir = i0.ɵɵngDeclareDirective({\n      minVersion: \"14.0.0\",\n      version: \"18.1.4\",\n      type: RequiredValidator,\n      selector: \":not([type=checkbox])[required][formControlName],:not([type=checkbox])[required][formControl],:not([type=checkbox])[required][ngModel]\",\n      inputs: {\n        required: \"required\"\n      },\n      host: {\n        properties: {\n          \"attr.required\": \"_enabled ? \\\"\\\" : null\"\n        }\n      },\n      providers: [REQUIRED_VALIDATOR],\n      usesInheritance: true,\n      ngImport: i0\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.1.4\",\n  ngImport: i0,\n  type: RequiredValidator,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: ':not([type=checkbox])[required][formControlName],:not([type=checkbox])[required][formControl],:not([type=checkbox])[required][ngModel]',\n      providers: [REQUIRED_VALIDATOR],\n      host: {\n        '[attr.required]': '_enabled ? \"\" : null'\n      }\n    }]\n  }],\n  propDecorators: {\n    required: [{\n      type: Input\n    }]\n  }\n});\n/**\n * A Directive that adds the `required` validator to checkbox controls marked with the\n * `required` attribute. The directive is provided with the `NG_VALIDATORS` multi-provider list.\n *\n * @see [Form Validation](guide/forms/form-validation)\n *\n * @usageNotes\n *\n * ### Adding a required checkbox validator using template-driven forms\n *\n * The following example shows how to add a checkbox required validator to an input attached to an\n * ngModel binding.\n *\n * ```\n * <input type=\"checkbox\" name=\"active\" ngModel required>\n * ```\n *\n * @publicApi\n * @ngModule FormsModule\n * @ngModule ReactiveFormsModule\n */\nclass CheckboxRequiredValidator extends RequiredValidator {\n  constructor() {\n    super(...arguments);\n    /** @internal */\n    this.createValidator = input => requiredTrueValidator;\n  }\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: CheckboxRequiredValidator,\n      deps: null,\n      target: i0.ɵɵFactoryTarget.Directive\n    });\n  }\n  static {\n    this.ɵdir = i0.ɵɵngDeclareDirective({\n      minVersion: \"14.0.0\",\n      version: \"18.1.4\",\n      type: CheckboxRequiredValidator,\n      selector: \"input[type=checkbox][required][formControlName],input[type=checkbox][required][formControl],input[type=checkbox][required][ngModel]\",\n      host: {\n        properties: {\n          \"attr.required\": \"_enabled ? \\\"\\\" : null\"\n        }\n      },\n      providers: [CHECKBOX_REQUIRED_VALIDATOR],\n      usesInheritance: true,\n      ngImport: i0\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.1.4\",\n  ngImport: i0,\n  type: CheckboxRequiredValidator,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: 'input[type=checkbox][required][formControlName],input[type=checkbox][required][formControl],input[type=checkbox][required][ngModel]',\n      providers: [CHECKBOX_REQUIRED_VALIDATOR],\n      host: {\n        '[attr.required]': '_enabled ? \"\" : null'\n      }\n    }]\n  }]\n});\n/**\n * @description\n * Provider which adds `EmailValidator` to the `NG_VALIDATORS` multi-provider list.\n */\nconst EMAIL_VALIDATOR = {\n  provide: NG_VALIDATORS,\n  useExisting: forwardRef(() => EmailValidator),\n  multi: true\n};\n/**\n * A directive that adds the `email` validator to controls marked with the\n * `email` attribute. The directive is provided with the `NG_VALIDATORS` multi-provider list.\n *\n * The email validation is based on the WHATWG HTML specification with some enhancements to\n * incorporate more RFC rules. More information can be found on the [Validators.email\n * page](api/forms/Validators#email).\n *\n * @see [Form Validation](guide/forms/form-validation)\n *\n * @usageNotes\n *\n * ### Adding an email validator\n *\n * The following example shows how to add an email validator to an input attached to an ngModel\n * binding.\n *\n * ```\n * <input type=\"email\" name=\"email\" ngModel email>\n * <input type=\"email\" name=\"email\" ngModel email=\"true\">\n * <input type=\"email\" name=\"email\" ngModel [email]=\"true\">\n * ```\n *\n * @publicApi\n * @ngModule FormsModule\n * @ngModule ReactiveFormsModule\n */\nclass EmailValidator extends AbstractValidatorDirective {\n  constructor() {\n    super(...arguments);\n    /** @internal */\n    this.inputName = 'email';\n    /** @internal */\n    this.normalizeInput = booleanAttribute;\n    /** @internal */\n    this.createValidator = input => emailValidator;\n  }\n  /** @nodoc */\n  enabled(input) {\n    return input;\n  }\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: EmailValidator,\n      deps: null,\n      target: i0.ɵɵFactoryTarget.Directive\n    });\n  }\n  static {\n    this.ɵdir = i0.ɵɵngDeclareDirective({\n      minVersion: \"14.0.0\",\n      version: \"18.1.4\",\n      type: EmailValidator,\n      selector: \"[email][formControlName],[email][formControl],[email][ngModel]\",\n      inputs: {\n        email: \"email\"\n      },\n      providers: [EMAIL_VALIDATOR],\n      usesInheritance: true,\n      ngImport: i0\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.1.4\",\n  ngImport: i0,\n  type: EmailValidator,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: '[email][formControlName],[email][formControl],[email][ngModel]',\n      providers: [EMAIL_VALIDATOR]\n    }]\n  }],\n  propDecorators: {\n    email: [{\n      type: Input\n    }]\n  }\n});\n/**\n * @description\n * Provider which adds `MinLengthValidator` to the `NG_VALIDATORS` multi-provider list.\n */\nconst MIN_LENGTH_VALIDATOR = {\n  provide: NG_VALIDATORS,\n  useExisting: forwardRef(() => MinLengthValidator),\n  multi: true\n};\n/**\n * A directive that adds minimum length validation to controls marked with the\n * `minlength` attribute. The directive is provided with the `NG_VALIDATORS` multi-provider list.\n *\n * @see [Form Validation](guide/forms/form-validation)\n *\n * @usageNotes\n *\n * ### Adding a minimum length validator\n *\n * The following example shows how to add a minimum length validator to an input attached to an\n * ngModel binding.\n *\n * ```html\n * <input name=\"firstName\" ngModel minlength=\"4\">\n * ```\n *\n * @ngModule ReactiveFormsModule\n * @ngModule FormsModule\n * @publicApi\n */\nclass MinLengthValidator extends AbstractValidatorDirective {\n  constructor() {\n    super(...arguments);\n    /** @internal */\n    this.inputName = 'minlength';\n    /** @internal */\n    this.normalizeInput = input => toInteger(input);\n    /** @internal */\n    this.createValidator = minlength => minLengthValidator(minlength);\n  }\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: MinLengthValidator,\n      deps: null,\n      target: i0.ɵɵFactoryTarget.Directive\n    });\n  }\n  static {\n    this.ɵdir = i0.ɵɵngDeclareDirective({\n      minVersion: \"14.0.0\",\n      version: \"18.1.4\",\n      type: MinLengthValidator,\n      selector: \"[minlength][formControlName],[minlength][formControl],[minlength][ngModel]\",\n      inputs: {\n        minlength: \"minlength\"\n      },\n      host: {\n        properties: {\n          \"attr.minlength\": \"_enabled ? minlength : null\"\n        }\n      },\n      providers: [MIN_LENGTH_VALIDATOR],\n      usesInheritance: true,\n      ngImport: i0\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.1.4\",\n  ngImport: i0,\n  type: MinLengthValidator,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: '[minlength][formControlName],[minlength][formControl],[minlength][ngModel]',\n      providers: [MIN_LENGTH_VALIDATOR],\n      host: {\n        '[attr.minlength]': '_enabled ? minlength : null'\n      }\n    }]\n  }],\n  propDecorators: {\n    minlength: [{\n      type: Input\n    }]\n  }\n});\n/**\n * @description\n * Provider which adds `MaxLengthValidator` to the `NG_VALIDATORS` multi-provider list.\n */\nconst MAX_LENGTH_VALIDATOR = {\n  provide: NG_VALIDATORS,\n  useExisting: forwardRef(() => MaxLengthValidator),\n  multi: true\n};\n/**\n * A directive that adds maximum length validation to controls marked with the\n * `maxlength` attribute. The directive is provided with the `NG_VALIDATORS` multi-provider list.\n *\n * @see [Form Validation](guide/forms/form-validation)\n *\n * @usageNotes\n *\n * ### Adding a maximum length validator\n *\n * The following example shows how to add a maximum length validator to an input attached to an\n * ngModel binding.\n *\n * ```html\n * <input name=\"firstName\" ngModel maxlength=\"25\">\n * ```\n *\n * @ngModule ReactiveFormsModule\n * @ngModule FormsModule\n * @publicApi\n */\nclass MaxLengthValidator extends AbstractValidatorDirective {\n  constructor() {\n    super(...arguments);\n    /** @internal */\n    this.inputName = 'maxlength';\n    /** @internal */\n    this.normalizeInput = input => toInteger(input);\n    /** @internal */\n    this.createValidator = maxlength => maxLengthValidator(maxlength);\n  }\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: MaxLengthValidator,\n      deps: null,\n      target: i0.ɵɵFactoryTarget.Directive\n    });\n  }\n  static {\n    this.ɵdir = i0.ɵɵngDeclareDirective({\n      minVersion: \"14.0.0\",\n      version: \"18.1.4\",\n      type: MaxLengthValidator,\n      selector: \"[maxlength][formControlName],[maxlength][formControl],[maxlength][ngModel]\",\n      inputs: {\n        maxlength: \"maxlength\"\n      },\n      host: {\n        properties: {\n          \"attr.maxlength\": \"_enabled ? maxlength : null\"\n        }\n      },\n      providers: [MAX_LENGTH_VALIDATOR],\n      usesInheritance: true,\n      ngImport: i0\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.1.4\",\n  ngImport: i0,\n  type: MaxLengthValidator,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: '[maxlength][formControlName],[maxlength][formControl],[maxlength][ngModel]',\n      providers: [MAX_LENGTH_VALIDATOR],\n      host: {\n        '[attr.maxlength]': '_enabled ? maxlength : null'\n      }\n    }]\n  }],\n  propDecorators: {\n    maxlength: [{\n      type: Input\n    }]\n  }\n});\n/**\n * @description\n * Provider which adds `PatternValidator` to the `NG_VALIDATORS` multi-provider list.\n */\nconst PATTERN_VALIDATOR = {\n  provide: NG_VALIDATORS,\n  useExisting: forwardRef(() => PatternValidator),\n  multi: true\n};\n/**\n * @description\n * A directive that adds regex pattern validation to controls marked with the\n * `pattern` attribute. The regex must match the entire control value.\n * The directive is provided with the `NG_VALIDATORS` multi-provider list.\n *\n * @see [Form Validation](guide/forms/form-validation)\n *\n * @usageNotes\n *\n * ### Adding a pattern validator\n *\n * The following example shows how to add a pattern validator to an input attached to an\n * ngModel binding.\n *\n * ```html\n * <input name=\"firstName\" ngModel pattern=\"[a-zA-Z ]*\">\n * ```\n *\n * @ngModule ReactiveFormsModule\n * @ngModule FormsModule\n * @publicApi\n */\nclass PatternValidator extends AbstractValidatorDirective {\n  constructor() {\n    super(...arguments);\n    /** @internal */\n    this.inputName = 'pattern';\n    /** @internal */\n    this.normalizeInput = input => input;\n    /** @internal */\n    this.createValidator = input => patternValidator(input);\n  }\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: PatternValidator,\n      deps: null,\n      target: i0.ɵɵFactoryTarget.Directive\n    });\n  }\n  static {\n    this.ɵdir = i0.ɵɵngDeclareDirective({\n      minVersion: \"14.0.0\",\n      version: \"18.1.4\",\n      type: PatternValidator,\n      selector: \"[pattern][formControlName],[pattern][formControl],[pattern][ngModel]\",\n      inputs: {\n        pattern: \"pattern\"\n      },\n      host: {\n        properties: {\n          \"attr.pattern\": \"_enabled ? pattern : null\"\n        }\n      },\n      providers: [PATTERN_VALIDATOR],\n      usesInheritance: true,\n      ngImport: i0\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.1.4\",\n  ngImport: i0,\n  type: PatternValidator,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: '[pattern][formControlName],[pattern][formControl],[pattern][ngModel]',\n      providers: [PATTERN_VALIDATOR],\n      host: {\n        '[attr.pattern]': '_enabled ? pattern : null'\n      }\n    }]\n  }],\n  propDecorators: {\n    pattern: [{\n      type: Input\n    }]\n  }\n});\nconst SHARED_FORM_DIRECTIVES = [ɵNgNoValidate, NgSelectOption, ɵNgSelectMultipleOption, DefaultValueAccessor, NumberValueAccessor, RangeValueAccessor, CheckboxControlValueAccessor, SelectControlValueAccessor, SelectMultipleControlValueAccessor, RadioControlValueAccessor, NgControlStatus, NgControlStatusGroup, RequiredValidator, MinLengthValidator, MaxLengthValidator, PatternValidator, CheckboxRequiredValidator, EmailValidator, MinValidator, MaxValidator];\nconst TEMPLATE_DRIVEN_DIRECTIVES = [NgModel, NgModelGroup, NgForm];\nconst REACTIVE_DRIVEN_DIRECTIVES = [FormControlDirective, FormGroupDirective, FormControlName, FormGroupName, FormArrayName];\n/**\n * Internal module used for sharing directives between FormsModule and ReactiveFormsModule\n */\nclass ɵInternalFormsSharedModule {\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: ɵInternalFormsSharedModule,\n      deps: [],\n      target: i0.ɵɵFactoryTarget.NgModule\n    });\n  }\n  static {\n    this.ɵmod = i0.ɵɵngDeclareNgModule({\n      minVersion: \"14.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: ɵInternalFormsSharedModule,\n      declarations: [ɵNgNoValidate, NgSelectOption, ɵNgSelectMultipleOption, DefaultValueAccessor, NumberValueAccessor, RangeValueAccessor, CheckboxControlValueAccessor, SelectControlValueAccessor, SelectMultipleControlValueAccessor, RadioControlValueAccessor, NgControlStatus, NgControlStatusGroup, RequiredValidator, MinLengthValidator, MaxLengthValidator, PatternValidator, CheckboxRequiredValidator, EmailValidator, MinValidator, MaxValidator],\n      exports: [ɵNgNoValidate, NgSelectOption, ɵNgSelectMultipleOption, DefaultValueAccessor, NumberValueAccessor, RangeValueAccessor, CheckboxControlValueAccessor, SelectControlValueAccessor, SelectMultipleControlValueAccessor, RadioControlValueAccessor, NgControlStatus, NgControlStatusGroup, RequiredValidator, MinLengthValidator, MaxLengthValidator, PatternValidator, CheckboxRequiredValidator, EmailValidator, MinValidator, MaxValidator]\n    });\n  }\n  static {\n    this.ɵinj = i0.ɵɵngDeclareInjector({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: ɵInternalFormsSharedModule\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.1.4\",\n  ngImport: i0,\n  type: ɵInternalFormsSharedModule,\n  decorators: [{\n    type: NgModule,\n    args: [{\n      declarations: SHARED_FORM_DIRECTIVES,\n      exports: SHARED_FORM_DIRECTIVES\n    }]\n  }]\n});\n\n/**\n * Tracks the value and validity state of an array of `FormControl`,\n * `FormGroup` or `FormArray` instances.\n *\n * A `FormArray` aggregates the values of each child `FormControl` into an array.\n * It calculates its status by reducing the status values of its children. For example, if one of\n * the controls in a `FormArray` is invalid, the entire array becomes invalid.\n *\n * `FormArray` accepts one generic argument, which is the type of the controls inside.\n * If you need a heterogenous array, use {@link UntypedFormArray}.\n *\n * `FormArray` is one of the four fundamental building blocks used to define forms in Angular,\n * along with `FormControl`, `FormGroup`, and `FormRecord`.\n *\n * @usageNotes\n *\n * ### Create an array of form controls\n *\n * ```\n * const arr = new FormArray([\n *   new FormControl('Nancy', Validators.minLength(2)),\n *   new FormControl('Drew'),\n * ]);\n *\n * console.log(arr.value);   // ['Nancy', 'Drew']\n * console.log(arr.status);  // 'VALID'\n * ```\n *\n * ### Create a form array with array-level validators\n *\n * You include array-level validators and async validators. These come in handy\n * when you want to perform validation that considers the value of more than one child\n * control.\n *\n * The two types of validators are passed in separately as the second and third arg\n * respectively, or together as part of an options object.\n *\n * ```\n * const arr = new FormArray([\n *   new FormControl('Nancy'),\n *   new FormControl('Drew')\n * ], {validators: myValidator, asyncValidators: myAsyncValidator});\n * ```\n *\n * ### Set the updateOn property for all controls in a form array\n *\n * The options object is used to set a default value for each child\n * control's `updateOn` property. If you set `updateOn` to `'blur'` at the\n * array level, all child controls default to 'blur', unless the child\n * has explicitly specified a different `updateOn` value.\n *\n * ```ts\n * const arr = new FormArray([\n *    new FormControl()\n * ], {updateOn: 'blur'});\n * ```\n *\n * ### Adding or removing controls from a form array\n *\n * To change the controls in the array, use the `push`, `insert`, `removeAt` or `clear` methods\n * in `FormArray` itself. These methods ensure the controls are properly tracked in the\n * form's hierarchy. Do not modify the array of `AbstractControl`s used to instantiate\n * the `FormArray` directly, as that result in strange and unexpected behavior such\n * as broken change detection.\n *\n * @publicApi\n */\nclass FormArray extends AbstractControl {\n  /**\n   * Creates a new `FormArray` instance.\n   *\n   * @param controls An array of child controls. Each child control is given an index\n   * where it is registered.\n   *\n   * @param validatorOrOpts A synchronous validator function, or an array of\n   * such functions, or an `AbstractControlOptions` object that contains validation functions\n   * and a validation trigger.\n   *\n   * @param asyncValidator A single async validator or array of async validator functions\n   *\n   */\n  constructor(controls, validatorOrOpts, asyncValidator) {\n    super(pickValidators(validatorOrOpts), pickAsyncValidators(asyncValidator, validatorOrOpts));\n    this.controls = controls;\n    this._initObservables();\n    this._setUpdateStrategy(validatorOrOpts);\n    this._setUpControls();\n    this.updateValueAndValidity({\n      onlySelf: true,\n      // If `asyncValidator` is present, it will trigger control status change from `PENDING` to\n      // `VALID` or `INVALID`.\n      // The status should be broadcasted via the `statusChanges` observable, so we set `emitEvent`\n      // to `true` to allow that during the control creation process.\n      emitEvent: !!this.asyncValidator\n    });\n  }\n  /**\n   * Get the `AbstractControl` at the given `index` in the array.\n   *\n   * @param index Index in the array to retrieve the control. If `index` is negative, it will wrap\n   *     around from the back, and if index is greatly negative (less than `-length`), the result is\n   * undefined. This behavior is the same as `Array.at(index)`.\n   */\n  at(index) {\n    return this.controls[this._adjustIndex(index)];\n  }\n  /**\n   * Insert a new `AbstractControl` at the end of the array.\n   *\n   * @param control Form control to be inserted\n   * @param options Specifies whether this FormArray instance should emit events after a new\n   *     control is added.\n   * * `emitEvent`: When true or not supplied (the default), both the `statusChanges` and\n   * `valueChanges` observables emit events with the latest status and value when the control is\n   * inserted. When false, no events are emitted.\n   */\n  push(control, options = {}) {\n    this.controls.push(control);\n    this._registerControl(control);\n    this.updateValueAndValidity({\n      emitEvent: options.emitEvent\n    });\n    this._onCollectionChange();\n  }\n  /**\n   * Insert a new `AbstractControl` at the given `index` in the array.\n   *\n   * @param index Index in the array to insert the control. If `index` is negative, wraps around\n   *     from the back. If `index` is greatly negative (less than `-length`), prepends to the array.\n   * This behavior is the same as `Array.splice(index, 0, control)`.\n   * @param control Form control to be inserted\n   * @param options Specifies whether this FormArray instance should emit events after a new\n   *     control is inserted.\n   * * `emitEvent`: When true or not supplied (the default), both the `statusChanges` and\n   * `valueChanges` observables emit events with the latest status and value when the control is\n   * inserted. When false, no events are emitted.\n   */\n  insert(index, control, options = {}) {\n    this.controls.splice(index, 0, control);\n    this._registerControl(control);\n    this.updateValueAndValidity({\n      emitEvent: options.emitEvent\n    });\n  }\n  /**\n   * Remove the control at the given `index` in the array.\n   *\n   * @param index Index in the array to remove the control.  If `index` is negative, wraps around\n   *     from the back. If `index` is greatly negative (less than `-length`), removes the first\n   *     element. This behavior is the same as `Array.splice(index, 1)`.\n   * @param options Specifies whether this FormArray instance should emit events after a\n   *     control is removed.\n   * * `emitEvent`: When true or not supplied (the default), both the `statusChanges` and\n   * `valueChanges` observables emit events with the latest status and value when the control is\n   * removed. When false, no events are emitted.\n   */\n  removeAt(index, options = {}) {\n    // Adjust the index, then clamp it at no less than 0 to prevent undesired underflows.\n    let adjustedIndex = this._adjustIndex(index);\n    if (adjustedIndex < 0) adjustedIndex = 0;\n    if (this.controls[adjustedIndex]) this.controls[adjustedIndex]._registerOnCollectionChange(() => {});\n    this.controls.splice(adjustedIndex, 1);\n    this.updateValueAndValidity({\n      emitEvent: options.emitEvent\n    });\n  }\n  /**\n   * Replace an existing control.\n   *\n   * @param index Index in the array to replace the control. If `index` is negative, wraps around\n   *     from the back. If `index` is greatly negative (less than `-length`), replaces the first\n   *     element. This behavior is the same as `Array.splice(index, 1, control)`.\n   * @param control The `AbstractControl` control to replace the existing control\n   * @param options Specifies whether this FormArray instance should emit events after an\n   *     existing control is replaced with a new one.\n   * * `emitEvent`: When true or not supplied (the default), both the `statusChanges` and\n   * `valueChanges` observables emit events with the latest status and value when the control is\n   * replaced with a new one. When false, no events are emitted.\n   */\n  setControl(index, control, options = {}) {\n    // Adjust the index, then clamp it at no less than 0 to prevent undesired underflows.\n    let adjustedIndex = this._adjustIndex(index);\n    if (adjustedIndex < 0) adjustedIndex = 0;\n    if (this.controls[adjustedIndex]) this.controls[adjustedIndex]._registerOnCollectionChange(() => {});\n    this.controls.splice(adjustedIndex, 1);\n    if (control) {\n      this.controls.splice(adjustedIndex, 0, control);\n      this._registerControl(control);\n    }\n    this.updateValueAndValidity({\n      emitEvent: options.emitEvent\n    });\n    this._onCollectionChange();\n  }\n  /**\n   * Length of the control array.\n   */\n  get length() {\n    return this.controls.length;\n  }\n  /**\n   * Sets the value of the `FormArray`. It accepts an array that matches\n   * the structure of the control.\n   *\n   * This method performs strict checks, and throws an error if you try\n   * to set the value of a control that doesn't exist or if you exclude the\n   * value of a control.\n   *\n   * @usageNotes\n   * ### Set the values for the controls in the form array\n   *\n   * ```\n   * const arr = new FormArray([\n   *   new FormControl(),\n   *   new FormControl()\n   * ]);\n   * console.log(arr.value);   // [null, null]\n   *\n   * arr.setValue(['Nancy', 'Drew']);\n   * console.log(arr.value);   // ['Nancy', 'Drew']\n   * ```\n   *\n   * @param value Array of values for the controls\n   * @param options Configure options that determine how the control propagates changes and\n   * emits events after the value changes\n   *\n   * * `onlySelf`: When true, each change only affects this control, and not its parent. Default\n   * is false.\n   * * `emitEvent`: When true or not supplied (the default), both the `statusChanges` and\n   * `valueChanges`\n   * observables emit events with the latest status and value when the control value is updated.\n   * When false, no events are emitted.\n   * The configuration options are passed to the {@link AbstractControl#updateValueAndValidity\n   * updateValueAndValidity} method.\n   */\n  setValue(value, options = {}) {\n    assertAllValuesPresent(this, false, value);\n    value.forEach((newValue, index) => {\n      assertControlPresent(this, false, index);\n      this.at(index).setValue(newValue, {\n        onlySelf: true,\n        emitEvent: options.emitEvent\n      });\n    });\n    this.updateValueAndValidity(options);\n  }\n  /**\n   * Patches the value of the `FormArray`. It accepts an array that matches the\n   * structure of the control, and does its best to match the values to the correct\n   * controls in the group.\n   *\n   * It accepts both super-sets and sub-sets of the array without throwing an error.\n   *\n   * @usageNotes\n   * ### Patch the values for controls in a form array\n   *\n   * ```\n   * const arr = new FormArray([\n   *    new FormControl(),\n   *    new FormControl()\n   * ]);\n   * console.log(arr.value);   // [null, null]\n   *\n   * arr.patchValue(['Nancy']);\n   * console.log(arr.value);   // ['Nancy', null]\n   * ```\n   *\n   * @param value Array of latest values for the controls\n   * @param options Configure options that determine how the control propagates changes and\n   * emits events after the value changes\n   *\n   * * `onlySelf`: When true, each change only affects this control, and not its parent. Default\n   * is false.\n   * * `emitEvent`: When true or not supplied (the default), both the `statusChanges` and\n   * `valueChanges` observables emit events with the latest status and value when the control\n   * value is updated. When false, no events are emitted. The configuration options are passed to\n   * the {@link AbstractControl#updateValueAndValidity updateValueAndValidity} method.\n   */\n  patchValue(value, options = {}) {\n    // Even though the `value` argument type doesn't allow `null` and `undefined` values, the\n    // `patchValue` can be called recursively and inner data structures might have these values,\n    // so we just ignore such cases when a field containing FormArray instance receives `null` or\n    // `undefined` as a value.\n    if (value == null /* both `null` and `undefined` */) return;\n    value.forEach((newValue, index) => {\n      if (this.at(index)) {\n        this.at(index).patchValue(newValue, {\n          onlySelf: true,\n          emitEvent: options.emitEvent\n        });\n      }\n    });\n    this.updateValueAndValidity(options);\n  }\n  /**\n   * Resets the `FormArray` and all descendants are marked `pristine` and `untouched`, and the\n   * value of all descendants to null or null maps.\n   *\n   * You reset to a specific form state by passing in an array of states\n   * that matches the structure of the control. The state is a standalone value\n   * or a form state object with both a value and a disabled status.\n   *\n   * @usageNotes\n   * ### Reset the values in a form array\n   *\n   * ```ts\n   * const arr = new FormArray([\n   *    new FormControl(),\n   *    new FormControl()\n   * ]);\n   * arr.reset(['name', 'last name']);\n   *\n   * console.log(arr.value);  // ['name', 'last name']\n   * ```\n   *\n   * ### Reset the values in a form array and the disabled status for the first control\n   *\n   * ```\n   * arr.reset([\n   *   {value: 'name', disabled: true},\n   *   'last'\n   * ]);\n   *\n   * console.log(arr.value);  // ['last']\n   * console.log(arr.at(0).status);  // 'DISABLED'\n   * ```\n   *\n   * @param value Array of values for the controls\n   * @param options Configure options that determine how the control propagates changes and\n   * emits events after the value changes\n   *\n   * * `onlySelf`: When true, each change only affects this control, and not its parent. Default\n   * is false.\n   * * `emitEvent`: When true or not supplied (the default), both the `statusChanges` and\n   * `valueChanges`\n   * observables emit events with the latest status and value when the control is reset.\n   * When false, no events are emitted.\n   * The configuration options are passed to the {@link AbstractControl#updateValueAndValidity\n   * updateValueAndValidity} method.\n   */\n  reset(value = [], options = {}) {\n    this._forEachChild((control, index) => {\n      control.reset(value[index], {\n        onlySelf: true,\n        emitEvent: options.emitEvent\n      });\n    });\n    this._updatePristine(options, this);\n    this._updateTouched(options, this);\n    this.updateValueAndValidity(options);\n  }\n  /**\n   * The aggregate value of the array, including any disabled controls.\n   *\n   * Reports all values regardless of disabled status.\n   */\n  getRawValue() {\n    return this.controls.map(control => control.getRawValue());\n  }\n  /**\n   * Remove all controls in the `FormArray`.\n   *\n   * @param options Specifies whether this FormArray instance should emit events after all\n   *     controls are removed.\n   * * `emitEvent`: When true or not supplied (the default), both the `statusChanges` and\n   * `valueChanges` observables emit events with the latest status and value when all controls\n   * in this FormArray instance are removed. When false, no events are emitted.\n   *\n   * @usageNotes\n   * ### Remove all elements from a FormArray\n   *\n   * ```ts\n   * const arr = new FormArray([\n   *    new FormControl(),\n   *    new FormControl()\n   * ]);\n   * console.log(arr.length);  // 2\n   *\n   * arr.clear();\n   * console.log(arr.length);  // 0\n   * ```\n   *\n   * It's a simpler and more efficient alternative to removing all elements one by one:\n   *\n   * ```ts\n   * const arr = new FormArray([\n   *    new FormControl(),\n   *    new FormControl()\n   * ]);\n   *\n   * while (arr.length) {\n   *    arr.removeAt(0);\n   * }\n   * ```\n   */\n  clear(options = {}) {\n    if (this.controls.length < 1) return;\n    this._forEachChild(control => control._registerOnCollectionChange(() => {}));\n    this.controls.splice(0);\n    this.updateValueAndValidity({\n      emitEvent: options.emitEvent\n    });\n  }\n  /**\n   * Adjusts a negative index by summing it with the length of the array. For very negative\n   * indices, the result may remain negative.\n   * @internal\n   */\n  _adjustIndex(index) {\n    return index < 0 ? index + this.length : index;\n  }\n  /** @internal */\n  _syncPendingControls() {\n    let subtreeUpdated = this.controls.reduce((updated, child) => {\n      return child._syncPendingControls() ? true : updated;\n    }, false);\n    if (subtreeUpdated) this.updateValueAndValidity({\n      onlySelf: true\n    });\n    return subtreeUpdated;\n  }\n  /** @internal */\n  _forEachChild(cb) {\n    this.controls.forEach((control, index) => {\n      cb(control, index);\n    });\n  }\n  /** @internal */\n  _updateValue() {\n    this.value = this.controls.filter(control => control.enabled || this.disabled).map(control => control.value);\n  }\n  /** @internal */\n  _anyControls(condition) {\n    return this.controls.some(control => control.enabled && condition(control));\n  }\n  /** @internal */\n  _setUpControls() {\n    this._forEachChild(control => this._registerControl(control));\n  }\n  /** @internal */\n  _allControlsDisabled() {\n    for (const control of this.controls) {\n      if (control.enabled) return false;\n    }\n    return this.controls.length > 0 || this.disabled;\n  }\n  _registerControl(control) {\n    control.setParent(this);\n    control._registerOnCollectionChange(this._onCollectionChange);\n  }\n  /** @internal */\n  _find(name) {\n    return this.at(name) ?? null;\n  }\n}\nconst UntypedFormArray = FormArray;\n/**\n * @description\n * Asserts that the given control is an instance of `FormArray`\n *\n * @publicApi\n */\nconst isFormArray = control => control instanceof FormArray;\nfunction isAbstractControlOptions(options) {\n  return !!options && (options.asyncValidators !== undefined || options.validators !== undefined || options.updateOn !== undefined);\n}\n/**\n * @description\n * Creates an `AbstractControl` from a user-specified configuration.\n *\n * The `FormBuilder` provides syntactic sugar that shortens creating instances of a\n * `FormControl`, `FormGroup`, or `FormArray`. It reduces the amount of boilerplate needed to\n * build complex forms.\n *\n * @see [Reactive Forms Guide](guide/forms/reactive-forms)\n *\n * @publicApi\n */\nclass FormBuilder {\n  constructor() {\n    this.useNonNullable = false;\n  }\n  /**\n   * @description\n   * Returns a FormBuilder in which automatically constructed `FormControl` elements\n   * have `{nonNullable: true}` and are non-nullable.\n   *\n   * **Constructing non-nullable controls**\n   *\n   * When constructing a control, it will be non-nullable, and will reset to its initial value.\n   *\n   * ```ts\n   * let nnfb = new FormBuilder().nonNullable;\n   * let name = nnfb.control('Alex'); // FormControl<string>\n   * name.reset();\n   * console.log(name); // 'Alex'\n   * ```\n   *\n   * **Constructing non-nullable groups or arrays**\n   *\n   * When constructing a group or array, all automatically created inner controls will be\n   * non-nullable, and will reset to their initial values.\n   *\n   * ```ts\n   * let nnfb = new FormBuilder().nonNullable;\n   * let name = nnfb.group({who: 'Alex'}); // FormGroup<{who: FormControl<string>}>\n   * name.reset();\n   * console.log(name); // {who: 'Alex'}\n   * ```\n   * **Constructing *nullable* fields on groups or arrays**\n   *\n   * It is still possible to have a nullable field. In particular, any `FormControl` which is\n   * *already* constructed will not be altered. For example:\n   *\n   * ```ts\n   * let nnfb = new FormBuilder().nonNullable;\n   * // FormGroup<{who: FormControl<string|null>}>\n   * let name = nnfb.group({who: new FormControl('Alex')});\n   * name.reset(); console.log(name); // {who: null}\n   * ```\n   *\n   * Because the inner control is constructed explicitly by the caller, the builder has\n   * no control over how it is created, and cannot exclude the `null`.\n   */\n  get nonNullable() {\n    const nnfb = new FormBuilder();\n    nnfb.useNonNullable = true;\n    return nnfb;\n  }\n  group(controls, options = null) {\n    const reducedControls = this._reduceControls(controls);\n    let newOptions = {};\n    if (isAbstractControlOptions(options)) {\n      // `options` are `AbstractControlOptions`\n      newOptions = options;\n    } else if (options !== null) {\n      // `options` are legacy form group options\n      newOptions.validators = options.validator;\n      newOptions.asyncValidators = options.asyncValidator;\n    }\n    return new FormGroup(reducedControls, newOptions);\n  }\n  /**\n   * @description\n   * Constructs a new `FormRecord` instance. Accepts a single generic argument, which is an object\n   * containing all the keys and corresponding inner control types.\n   *\n   * @param controls A collection of child controls. The key for each child is the name\n   * under which it is registered.\n   *\n   * @param options Configuration options object for the `FormRecord`. The object should have the\n   * `AbstractControlOptions` type and might contain the following fields:\n   * * `validators`: A synchronous validator function, or an array of validator functions.\n   * * `asyncValidators`: A single async validator or array of async validator functions.\n   * * `updateOn`: The event upon which the control should be updated (options: 'change' | 'blur'\n   * | submit').\n   */\n  record(controls, options = null) {\n    const reducedControls = this._reduceControls(controls);\n    // Cast to `any` because the inferred types are not as specific as Element.\n    return new FormRecord(reducedControls, options);\n  }\n  /**\n   * @description\n   * Constructs a new `FormControl` with the given state, validators and options. Sets\n   * `{nonNullable: true}` in the options to get a non-nullable control. Otherwise, the\n   * control will be nullable. Accepts a single generic argument, which is the type  of the\n   * control's value.\n   *\n   * @param formState Initializes the control with an initial state value, or\n   * with an object that contains both a value and a disabled status.\n   *\n   * @param validatorOrOpts A synchronous validator function, or an array of\n   * such functions, or a `FormControlOptions` object that contains\n   * validation functions and a validation trigger.\n   *\n   * @param asyncValidator A single async validator or array of async validator\n   * functions.\n   *\n   * @usageNotes\n   *\n   * ### Initialize a control as disabled\n   *\n   * The following example returns a control with an initial value in a disabled state.\n   *\n   * <code-example path=\"forms/ts/formBuilder/form_builder_example.ts\" region=\"disabled-control\">\n   * </code-example>\n   */\n  control(formState, validatorOrOpts, asyncValidator) {\n    let newOptions = {};\n    if (!this.useNonNullable) {\n      return new FormControl(formState, validatorOrOpts, asyncValidator);\n    }\n    if (isAbstractControlOptions(validatorOrOpts)) {\n      // If the second argument is options, then they are copied.\n      newOptions = validatorOrOpts;\n    } else {\n      // If the other arguments are validators, they are copied into an options object.\n      newOptions.validators = validatorOrOpts;\n      newOptions.asyncValidators = asyncValidator;\n    }\n    return new FormControl(formState, {\n      ...newOptions,\n      nonNullable: true\n    });\n  }\n  /**\n   * Constructs a new `FormArray` from the given array of configurations,\n   * validators and options. Accepts a single generic argument, which is the type of each control\n   * inside the array.\n   *\n   * @param controls An array of child controls or control configs. Each child control is given an\n   *     index when it is registered.\n   *\n   * @param validatorOrOpts A synchronous validator function, or an array of such functions, or an\n   *     `AbstractControlOptions` object that contains\n   * validation functions and a validation trigger.\n   *\n   * @param asyncValidator A single async validator or array of async validator functions.\n   */\n  array(controls, validatorOrOpts, asyncValidator) {\n    const createdControls = controls.map(c => this._createControl(c));\n    // Cast to `any` because the inferred types are not as specific as Element.\n    return new FormArray(createdControls, validatorOrOpts, asyncValidator);\n  }\n  /** @internal */\n  _reduceControls(controls) {\n    const createdControls = {};\n    Object.keys(controls).forEach(controlName => {\n      createdControls[controlName] = this._createControl(controls[controlName]);\n    });\n    return createdControls;\n  }\n  /** @internal */\n  _createControl(controls) {\n    if (controls instanceof FormControl) {\n      return controls;\n    } else if (controls instanceof AbstractControl) {\n      // A control; just return it\n      return controls;\n    } else if (Array.isArray(controls)) {\n      // ControlConfig Tuple\n      const value = controls[0];\n      const validator = controls.length > 1 ? controls[1] : null;\n      const asyncValidator = controls.length > 2 ? controls[2] : null;\n      return this.control(value, validator, asyncValidator);\n    } else {\n      // T or FormControlState<T>\n      return this.control(controls);\n    }\n  }\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: FormBuilder,\n      deps: [],\n      target: i0.ɵɵFactoryTarget.Injectable\n    });\n  }\n  static {\n    this.ɵprov = i0.ɵɵngDeclareInjectable({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: FormBuilder,\n      providedIn: 'root'\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.1.4\",\n  ngImport: i0,\n  type: FormBuilder,\n  decorators: [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }]\n});\n/**\n * @description\n * `NonNullableFormBuilder` is similar to {@link FormBuilder}, but automatically constructed\n * {@link FormControl} elements have `{nonNullable: true}` and are non-nullable.\n *\n * @publicApi\n */\nclass NonNullableFormBuilder {\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: NonNullableFormBuilder,\n      deps: [],\n      target: i0.ɵɵFactoryTarget.Injectable\n    });\n  }\n  static {\n    this.ɵprov = i0.ɵɵngDeclareInjectable({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: NonNullableFormBuilder,\n      providedIn: 'root',\n      useFactory: () => inject(FormBuilder).nonNullable\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.1.4\",\n  ngImport: i0,\n  type: NonNullableFormBuilder,\n  decorators: [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root',\n      useFactory: () => inject(FormBuilder).nonNullable\n    }]\n  }]\n});\n/**\n * UntypedFormBuilder is the same as `FormBuilder`, but it provides untyped controls.\n */\nclass UntypedFormBuilder extends FormBuilder {\n  group(controlsConfig, options = null) {\n    return super.group(controlsConfig, options);\n  }\n  /**\n   * Like `FormBuilder#control`, except the resulting control is untyped.\n   */\n  control(formState, validatorOrOpts, asyncValidator) {\n    return super.control(formState, validatorOrOpts, asyncValidator);\n  }\n  /**\n   * Like `FormBuilder#array`, except the resulting array is untyped.\n   */\n  array(controlsConfig, validatorOrOpts, asyncValidator) {\n    return super.array(controlsConfig, validatorOrOpts, asyncValidator);\n  }\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: UntypedFormBuilder,\n      deps: null,\n      target: i0.ɵɵFactoryTarget.Injectable\n    });\n  }\n  static {\n    this.ɵprov = i0.ɵɵngDeclareInjectable({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: UntypedFormBuilder,\n      providedIn: 'root'\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.1.4\",\n  ngImport: i0,\n  type: UntypedFormBuilder,\n  decorators: [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }]\n});\n\n/**\n * @module\n * @description\n * Entry point for all public APIs of the forms package.\n */\n/**\n * @publicApi\n */\nconst VERSION = new Version('18.1.4');\n\n/**\n * Exports the required providers and directives for template-driven forms,\n * making them available for import by NgModules that import this module.\n *\n * @see [Forms Overview](guide/forms)\n * @see [Template-driven Forms Guide](guide/forms)\n *\n * @publicApi\n */\nclass FormsModule {\n  /**\n   * @description\n   * Provides options for configuring the forms module.\n   *\n   * @param opts An object of configuration options\n   * * `callSetDisabledState` Configures whether to `always` call `setDisabledState`, which is more\n   * correct, or to only call it `whenDisabled`, which is the legacy behavior.\n   */\n  static withConfig(opts) {\n    return {\n      ngModule: FormsModule,\n      providers: [{\n        provide: CALL_SET_DISABLED_STATE,\n        useValue: opts.callSetDisabledState ?? setDisabledStateDefault\n      }]\n    };\n  }\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: FormsModule,\n      deps: [],\n      target: i0.ɵɵFactoryTarget.NgModule\n    });\n  }\n  static {\n    this.ɵmod = i0.ɵɵngDeclareNgModule({\n      minVersion: \"14.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: FormsModule,\n      declarations: [NgModel, NgModelGroup, NgForm],\n      exports: [ɵInternalFormsSharedModule, NgModel, NgModelGroup, NgForm]\n    });\n  }\n  static {\n    this.ɵinj = i0.ɵɵngDeclareInjector({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: FormsModule,\n      imports: [ɵInternalFormsSharedModule]\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.1.4\",\n  ngImport: i0,\n  type: FormsModule,\n  decorators: [{\n    type: NgModule,\n    args: [{\n      declarations: TEMPLATE_DRIVEN_DIRECTIVES,\n      exports: [ɵInternalFormsSharedModule, TEMPLATE_DRIVEN_DIRECTIVES]\n    }]\n  }]\n});\n/**\n * Exports the required infrastructure and directives for reactive forms,\n * making them available for import by NgModules that import this module.\n *\n * @see [Forms Overview](guide/forms)\n * @see [Reactive Forms Guide](guide/forms/reactive-forms)\n *\n * @publicApi\n */\nclass ReactiveFormsModule {\n  /**\n   * @description\n   * Provides options for configuring the reactive forms module.\n   *\n   * @param opts An object of configuration options\n   * * `warnOnNgModelWithFormControl` Configures when to emit a warning when an `ngModel`\n   * binding is used with reactive form directives.\n   * * `callSetDisabledState` Configures whether to `always` call `setDisabledState`, which is more\n   * correct, or to only call it `whenDisabled`, which is the legacy behavior.\n   */\n  static withConfig(opts) {\n    return {\n      ngModule: ReactiveFormsModule,\n      providers: [{\n        provide: NG_MODEL_WITH_FORM_CONTROL_WARNING,\n        useValue: opts.warnOnNgModelWithFormControl ?? 'always'\n      }, {\n        provide: CALL_SET_DISABLED_STATE,\n        useValue: opts.callSetDisabledState ?? setDisabledStateDefault\n      }]\n    };\n  }\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: ReactiveFormsModule,\n      deps: [],\n      target: i0.ɵɵFactoryTarget.NgModule\n    });\n  }\n  static {\n    this.ɵmod = i0.ɵɵngDeclareNgModule({\n      minVersion: \"14.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: ReactiveFormsModule,\n      declarations: [FormControlDirective, FormGroupDirective, FormControlName, FormGroupName, FormArrayName],\n      exports: [ɵInternalFormsSharedModule, FormControlDirective, FormGroupDirective, FormControlName, FormGroupName, FormArrayName]\n    });\n  }\n  static {\n    this.ɵinj = i0.ɵɵngDeclareInjector({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: ReactiveFormsModule,\n      imports: [ɵInternalFormsSharedModule]\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.1.4\",\n  ngImport: i0,\n  type: ReactiveFormsModule,\n  decorators: [{\n    type: NgModule,\n    args: [{\n      declarations: [REACTIVE_DRIVEN_DIRECTIVES],\n      exports: [ɵInternalFormsSharedModule, REACTIVE_DRIVEN_DIRECTIVES]\n    }]\n  }]\n});\n\n/**\n * @module\n * @description\n * This module is used for handling user input, by defining and building a `FormGroup` that\n * consists of `FormControl` objects, and mapping them onto the DOM. `FormControl`\n * objects can then be used to read information from the form DOM elements.\n *\n * Forms providers are not included in default providers; you must import these providers\n * explicitly.\n */\n\n/**\n * @module\n * @description\n * Entry point for all public APIs of this package.\n */\n// This file only reexports content of the `src` folder. Keep it that way.\n\n// This file is not used to build this module. It is only used during editing\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { AbstractControl, AbstractControlDirective, AbstractFormGroupDirective, COMPOSITION_BUFFER_MODE, CheckboxControlValueAccessor, CheckboxRequiredValidator, ControlContainer, ControlEvent, DefaultValueAccessor, EmailValidator, FormArray, FormArrayName, FormBuilder, FormControl, FormControlDirective, FormControlName, FormGroup, FormGroupDirective, FormGroupName, FormRecord, FormResetEvent, FormSubmittedEvent, FormsModule, MaxLengthValidator, MaxValidator, MinLengthValidator, MinValidator, NG_ASYNC_VALIDATORS, NG_VALIDATORS, NG_VALUE_ACCESSOR, NgControl, NgControlStatus, NgControlStatusGroup, NgForm, NgModel, NgModelGroup, NgSelectOption, NonNullableFormBuilder, NumberValueAccessor, PatternValidator, PristineChangeEvent, RadioControlValueAccessor, RangeValueAccessor, ReactiveFormsModule, RequiredValidator, SelectControlValueAccessor, SelectMultipleControlValueAccessor, StatusChangeEvent, TouchedChangeEvent, UntypedFormArray, UntypedFormBuilder, UntypedFormControl, UntypedFormGroup, VERSION, Validators, ValueChangeEvent, isFormArray, isFormControl, isFormGroup, isFormRecord, ɵInternalFormsSharedModule, ɵNgNoValidate, ɵNgSelectMultipleOption };\n","<div>\n  <header id=\"masthead\" class=\"masthead\">\n    <!-- COMPLEX PORTAL HEADER SECTION -->\n    <div class=\"masthead-inner row\"> <!-- expanded -->\n      <!-- local-title -->\n      <div class=\"columns medium-6\" id=\"local-title\">\n        <h1><a routerLink=\"/home\" title=\"Back to Complex Portal homepage\">\n          <img src=\"assets/images/logo.png\" style=\"width: 43px; height: 63px;\"> Complex Portal</a>\n        </h1>\n      </div>\n      <!--/local-title -->\n\n      <div class=\"columns medium-6\">\n        <cp-local-search></cp-local-search>\n      </div>\n    </div>\n  </header>\n  <!-- END COMPLEX PORTAL HEADER SECTION -->\n\n  <!--  <cp-progress-bar></cp-progress-bar>-->\n</div>\n\n<!---->\n<div id=\"content\" role=\"main\" class=\"row expanded\">\n\n  <!-- local-nav -->\n  <div class=\"masthead sticky-nav-container\">\n    <nav>\n      <ul id=\"local-nav\" class=\"dropdown menu float-left\" data-dropdown-menu=\"true\" data-description=\"navigational\">\n        <li routerLinkActive=\"active\"><a routerLink=\"/home\" routerLinkActive=\"active\">Home</a></li>\n        <li routerLinkActive=\"active\"><a routerLink=\"/about\" routerLinkActive=\"active\">About</a></li>\n        <li routerLinkActive=\"active\"><a routerLink=\"/documentation\" routerLinkActive=\"active\">Documentation</a></li>\n        <li routerLinkActive=\"active\"><a routerLink=\"/basket\" routerLinkActive=\"active\"\n                                         [ngClass]=\"{'animated flash': onChangeInBasket}\">Basket\n          <div routerLink=\"/basket\" routerLinkActive=\"active\" class=\"basket\">\n            &nbsp;<strong>{{ basketCount }}</strong>&nbsp;\n          </div>\n        </a>\n        </li>\n        <li routerLinkActive=\"active\"><a href=\"{{complexPortalSupportUrl}}\">Support <i class=\"icon icon-generic\"\n                                                                                       data-icon=\"x\"></i></a></li>\n      </ul>\n    </nav>\n  </div>\n\n  <!-- /local-nav -->\n  <!-- Suggested layout containers -->\n  <section>\n    <router-outlet></router-outlet>\n    <!-- Routed views go here -->\n  </section>\n  <!-- End suggested layout containers -->\n</div>\n\n\n<!-- Local footer -->\n<cp-local-footer [environmentName]=\"environmentName\" [version]=\"version\"></cp-local-footer>\n",".basket{padding:.2rem 0;border-radius:2px;font-size:.8rem;line-height:1;white-space:nowrap;cursor:default;color:var(--primary);background-color:#fff;display:inline}.basket.active{padding:.2rem 0;border-radius:2px;font-size:.8rem;line-height:1;white-space:nowrap;cursor:default;color:#fff;background-color:var(--primary);display:inline}.no-border-submenu{border-right:0!important}.sticky-nav-container{--global-margin: calc((100vw - 80rem)/-2) ;position:sticky;top:0;background:var(--primary);padding:0 calc(-1 * var(--global-margin));width:100vw;z-index:4;border-bottom:1px solid white}.sticky-nav-container nav{display:flex}\n/*# sourceMappingURL=app.component.css.map */\n","import {AfterViewInit, Component, OnInit} from '@angular/core';\nimport {environment} from '../environments/environment';\nimport {ProgressBarComponent} from './shared/loading-indicators/progress-bar/progress-bar.component';\nimport {NavigationEnd, Router} from '@angular/router';\nimport {BasketService} from './shared/basket/service/basket.service';\n\n\nconst {version: version} = require('../../package.json');\nconst environmentName: string = environment.evn;\n\n@Component({\n  selector: 'cp-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent implements OnInit, AfterViewInit {\n  private _version: string;\n  private _environmentName: string;\n  private _basketCount = 0;\n  private _complexPortalSupportUrl = environment.complex_portal_support_url;\n  private _onChangeInBasket: boolean;\n\n  constructor(private router: Router,\n              private basketService: BasketService) {\n    this._basketCount = this.basketService.getBasketCount();\n    this._version = version;\n    this._environmentName = environmentName;\n  }\n\n  ngOnInit(): void {\n    this.observeRouteChange();\n    this.observeBasketChange();\n    this.initialiseFoundation();\n  }\n\n  ngAfterViewInit(): void {\n    // Init some libs.\n    // this.initialiseFoundation();\n    // this.initialiseFoundationHacks();\n  }\n\n  // Candidate for utils.\n  private initialiseFoundation(): void {\n    $(document).foundation();\n    // @ts-ignore\n    $(document).foundationExtendEBI();\n  }\n\n  private observeRouteChange() {\n    // For every router change, we load the ProgressBar by default.\n    this.router.events.subscribe((evt) => {\n      if (!(evt instanceof NavigationEnd)) {\n        ProgressBarComponent.display();\n        return;\n      }\n      window.scrollTo(0, 0);\n    });\n  }\n\n  private observeBasketChange() {\n    this.basketService.onBasketCountChanged$.subscribe(count => {\n      this._basketCount = count;\n      this._onChangeInBasket = true;\n      const ctx = this;\n      setTimeout(function () {\n        ctx._onChangeInBasket = false;\n      }, 1000);\n    });\n  }\n\n\n  // private initialiseFoundationHacks(): void {\n  //   // copied from script.js (ebi framework)\n  //   // Assign global nav background images through meta tags\n  //   (function assignImageByMetaTags() {\n  //     const localMasthead = document.getElementById('local-masthead');\n  //     // check for both ebi: and ebi- formatted meta tags\n  //     // tslint:disable\n  //     let localMastheadColor = document.querySelector(\"meta[name='ebi:localmasthead-color']\")\n  //       || document.querySelector(\"meta[name='ebi-localmasthead-color']\");\n  //     let localMastheadImage = document.querySelector(\"meta[name='ebi:localmasthead-image']\")\n  //       || document.querySelector(\"meta[name='ebi-localmasthead-image']\");\n  //     if (localMastheadColor != null) {\n  //       localMasthead.style.backgroundColor = localMastheadColor.getAttribute(\"content\");\n  //       localMasthead.className += ' meta-background-color';\n  //     }\n  //     if (localMastheadImage != null) {\n  //       localMasthead.style.backgroundImage = 'url(' + localMastheadImage.getAttribute(\"content\") + ')';\n  //       localMasthead.className += ' meta-background-image';\n  //     }\n  //     // tslint:enable\n  //   })();\n  // }\n\n  get version(): string {\n    return this._version;\n  }\n\n  set version(value: string) {\n    this._version = value;\n  }\n\n  get environmentName(): string {\n    return this._environmentName;\n  }\n\n  set environmentName(value: string) {\n    this._environmentName = value;\n  }\n\n\n  get basketCount(): number {\n    return this._basketCount;\n  }\n\n  get complexPortalSupportUrl(): string {\n    return this._complexPortalSupportUrl;\n  }\n\n  get onChangeInBasket(): boolean {\n    return this._onChangeInBasket;\n  }\n}\n","<!--<input style=\"font-weight: normal\" size=\"35\" type=\"text\" name=\"q\" data-olswidget=\"select\" data-olsontology=\"\" data-selectpath=\"http://www.ebi.ac.uk/ols/\" olstype=\"\" id=\"local-searchbox\" placeholder=\"Enter the term you are looking for\" class=\"ac_input\"/>-->\n","/*# sourceMappingURL=ontologies.component.css.map */\n","import {Component, OnInit} from '@angular/core';\nimport {Router} from '@angular/router';\nimport {Title} from '@angular/platform-browser';\n\n\n@Component({\n  selector: 'cp-ontologies',\n  templateUrl: './ontologies.component.html',\n  styleUrls: ['./ontologies.component.css']\n})\nexport class OntologiesComponent implements OnInit {\n\n  constructor(private router: Router, private titleService: Title) {\n  }\n\n  ngOnInit() {\n    this.titleService.setTitle('Complex Portal - Ontologies');\n    this.router.navigate(['home']);\n  }\n\n}\n","<div class=\"columns margin-top-large margin-bottom-large\">\n  <h1>About</h1>\n  <ul class=\"tabs\" data-tabs data-deep-link=\"true\" data-update-history=\"false\" id=\"about-tabs\">\n    <li class=\"tabs-title is-active\"><a href=\"about#overview\" aria-selected=\"true\">Overview</a></li>\n    <li class=\"tabs-title\"><a href=\"about#requests\">Requests</a></li>\n    <li class=\"tabs-title\"><a href=\"about#license_privacy\">License and Privacy</a></li>\n    <li class=\"tabs-title\"><a href=\"about#code\">Code Repository</a></li>\n    <li class=\"tabs-title\"><a href=\"about#funding\">Funding</a></li>\n    <li class=\"tabs-title\"><a href=\"about#publications\">Publications</a></li>\n    <li class=\"tabs-title\"><a href=\"about#sab\">SAB</a></li>\n  </ul>\n\n  <div class=\"tabs-content\" data-tabs-content=\"about-tabs\">\n    <div class=\"tabs-panel is-active\" id=\"overview\">\n      <markdown [src]=overview></markdown>\n    </div>\n\n    <div class=\"tabs-panel\" id=\"requests\">\n      <markdown [src]=requests></markdown>\n    </div>\n\n    <div class=\"tabs-panel\" id=\"license_privacy\">\n      <markdown [src]=license_privacy></markdown>\n    </div>\n\n    <div class=\"tabs-panel\" id=\"code\">\n      <markdown [src]=code></markdown>\n    </div>\n\n    <div class=\"tabs-panel\" id=\"funding\">\n      <markdown [src]=funding></markdown>\n    </div>\n\n    <div class=\"tabs-panel\" id=\"publications\">\n      <markdown [src]=publications></markdown>\n    </div>\n\n    <div class=\"tabs-panel\" id=\"sab\">\n      <markdown [src]=sab></markdown>\n      <markdown [src]=imex_partners></markdown>\n    </div>\n  </div>\n</div>\n","markdown ::ng-deep h1{font-size:xx-large}markdown ::ng-deep h2{font-size:x-large}markdown ::ng-deep h3{font-size:large}markdown ::ng-deep img{display:block;margin:0 auto;text-align:center;height:100px}\n/*# sourceMappingURL=about.component.css.map */\n","import {Component, OnInit} from '@angular/core';\nimport {Title} from '@angular/platform-browser';\nimport {environment} from '../../../environments/environment';\nimport {ProgressBarComponent} from '../../shared/loading-indicators/progress-bar/progress-bar.component';\nimport {Router} from '@angular/router';\n\n@Component({\n  selector: 'cp-about',\n  templateUrl: './about.component.html',\n  styleUrls: ['./about.component.css']\n})\nexport class AboutComponent implements OnInit {\n\n  overview = environment.complex_portal_documentation_url + 'about/overview.md';\n  funding = environment.complex_portal_documentation_url + 'about/funding.md';\n  code = environment.complex_portal_documentation_url + 'about/code-repository.md';\n  license_privacy = environment.complex_portal_documentation_url + 'about/license.md';\n  publications = environment.complex_portal_documentation_url + 'about/publications.md';\n  // We use the Intact Portal documentation for the SAB page to keep it in sync between Intact and Complex Portal\n  sab = environment.intact_portal_documentation_url + 'about/scientific-advisory-board.md';\n  imex_partners = environment.intact_portal_documentation_url + 'about/imex-consortium-partners.md';\n  requests = environment.complex_portal_documentation_url + 'about/requests.md';\n\n  constructor(private titleService: Title, private router: Router) {\n  }\n\n  ngOnInit() {\n    this.titleService.setTitle('Complex Portal - About');\n    $('cp-about').foundation();\n    ProgressBarComponent.hide();\n  }\n}\n","<div class=\"columns margin-top-large margin-bottom-large\">\n  <h1>Downloads</h1>\n  <p>The Complex Portal is released monthly and data on individual complexes is available for download in both PSI-MI\n    XML2.5 and XML3.0 formats (see the PSI website for a detailed format description). The files are grouped by\n    species. We have now also developed ComplexTAB, a flatfile format to enable simpler parsing or loading into\n    Microsoft Excel. A separate ComplexTAB file has been produced for each species - details on the format are\n    available <a (click)=\"goToComplexTabeReadMe()\">here <i class=\"icon icon-generic small\" data-icon=\"x\"></i></a>. All\n    files are available from the <a\n      (click)=\"goToComplexFTPCurrent()\">ftp site <i class=\"icon icon-generic small\" data-icon=\"x\"></i></a> and will be\n    updated as we add new complexes with every data release.</p>\n  <ul>\n    <li class=\"icon-bullet\"><span class=\"icon icon-generic\" data-icon=\"*\"></span> For license details, please visit our\n      <a routerLink=\"/about\" fragment=\"license_privacy\">About section.</a>\n    </li>\n  </ul>\n  <div class=\"row button-grid small-up-1 medium-up-4 large-up-4 margin-top-xlarge no-pad-right\" data-equalizer\n       data-equalize-on=\"medium\" id=\"large-button-grid\">\n    <div class=\"column  padding-bottom-large\">\n      <a class=\"button medium-12 columns text-center\" data-equalizer-watch (click)=\"goToComplexPSI25()\">\n        <h3 class=\"icon icon-fileformats  white-color\" data-icon=\"1\"></h3>\n        <h5 class=\"white-color\">PSI-MI XML 2.5</h5>\n      </a>\n    </div>\n    <div class=\"column  padding-bottom-large\">\n      <a class=\"button medium-12 columns text-center\" data-equalizer-watch\n         (click)=\"goToComplexPSI30()\">\n        <h3 class=\"icon icon-fileformats  white-color\" data-icon=\"1\"></h3>\n        <h5 class=\"white-color\">PSI-MI XML 3.0</h5>\n      </a>\n    </div>\n    <div class=\"column  padding-bottom-large\">\n      <a class=\"button medium-12 columns text-center\" data-equalizer-watch\n         (click)=\"goToComplexTAB()\">\n        <h3 class=\"icon icon-fileformats  white-color\" data-icon=\"v\"></h3>\n        <h5 class=\"white-color\">ComplexTab</h5>\n      </a>\n    </div>\n    <div class=\"column  padding-bottom-large\">\n      <a class=\"button medium-12 columns text-center\" data-equalizer-watch\n         (click)=\"goToComplexWS()\">\n        <h3 class=\"icon icon-fileformats white-color\" data-icon=\"J\"></h3>\n        <h5 class=\"white-color\">Web Service</h5>\n      </a>\n    </div>\n  </div>\n</div>\n","/*# sourceMappingURL=download.component.css.map */\n","import {AfterViewInit, Component, OnInit} from '@angular/core';\nimport {ProgressBarComponent} from '../shared/loading-indicators/progress-bar/progress-bar.component';\nimport {environment} from '../../environments/environment';\nimport {AnalyticsService} from '../shared/google-analytics/service/analytics.service';\nimport {Category} from '../shared/google-analytics/types/category.enum';\nimport {Title} from '@angular/platform-browser';\n\n@Component({\n  selector: 'cp-download',\n  templateUrl: './download.component.html',\n  styleUrls: ['./download.component.css']\n})\nexport class DownloadComponent implements OnInit, AfterViewInit {\n\n  constructor(private googleAnalyticsService: AnalyticsService, private titleService: Title) {\n  }\n\n  ngOnInit() {\n    this.titleService.setTitle('Complex Portal - Downloads');\n    ProgressBarComponent.display();\n  }\n\n  ngAfterViewInit(): void {\n    ProgressBarComponent.hide();\n  }\n\n  goToComplexPSI25(): void {\n    this.googleAnalyticsService.fireDownloadResourceEvent(Category.download, 'PSIXML25');\n    window.open(environment.complex_psi25, '_blank');\n  }\n\n  goToComplexPSI30(): void {\n    this.googleAnalyticsService.fireDownloadResourceEvent(Category.download, 'PSIXML30');\n    window.open(environment.complex_psi30, '_blank');\n  }\n\n  goToComplexTAB(): void {\n    this.googleAnalyticsService.fireDownloadResourceEvent(Category.download, 'ComplexTAB');\n    window.open(environment.complex_tab, '_blank');\n  }\n\n  goToComplexWS(): void {\n    this.googleAnalyticsService.fireDownloadResourceEvent(Category.download, 'ComplexWS');\n    window.open(environment.complex_ws_base_url, '_blank');\n  }\n\n  goToComplexTabeReadMe(): void {\n    this.googleAnalyticsService.fireOpenExternalLinkEvent(Category.download, 'ComplexTABReadMe');\n    window.open(environment.complex_tab_readme, '_blank');\n  }\n\n  goToComplexFTPCurrent(): void {\n    this.googleAnalyticsService.fireOpenExternalLinkEvent(Category.download, 'ComplexCurrentFTP');\n    window.open(environment.complex_current, '_blank');\n  }\n}\n","<div class=\"columns margin-top-large margin-bottom-large\">\n  <h1>Documentation</h1>\n  <ul class=\"tabs\" data-tabs data-deep-link=\"true\" data-update-history=\"false\" id=\"documentation-tabs\">\n    <li class=\"tabs-title is-active\"><a href=\"documentation#data_content\" aria-selected=\"true\">Data Content</a>\n    <li class=\"tabs-title\"><a href=\"documentation#file_formats\">File Formats</a></li>\n    <li class=\"tabs-title\"><a href=\"documentation#query_syntax\">Query Syntax</a></li>\n  </ul>\n\n  <div class=\"tabs-content\" data-tabs-content=\"documentation-tabs\">\n    <div class=\"tabs-panel is-active\" id=\"data_content\">\n      <markdown [src]=data_content></markdown>\n    </div>\n\n    <div class=\"tabs-panel\" id=\"file_formats\">\n      <markdown [src]=file_formats></markdown>\n    </div>\n\n    <div class=\"tabs-panel\" id=\"query_syntax\">\n      <markdown [src]=query_syntax></markdown>\n    </div>\n\n  </div>\n</div>\n","markdown ::ng-deep h1{font-size:xx-large}markdown ::ng-deep h2{font-size:x-large}markdown ::ng-deep h3{font-size:large}markdown ::ng-deep img{display:block;margin:0 auto;text-align:center}\n/*# sourceMappingURL=documentation.component.css.map */\n","import {Component, OnInit} from '@angular/core';\nimport {Title} from '@angular/platform-browser';\nimport {ProgressBarComponent} from '../../shared/loading-indicators/progress-bar/progress-bar.component';\nimport {environment} from '../../../environments/environment';\n\n@Component({\n  selector: 'cp-documentation',\n  templateUrl: './documentation.component.html',\n  styleUrls: ['./documentation.component.css']\n})\nexport class DocumentationComponent implements OnInit {\n\n  data_content = environment.complex_portal_documentation_url + 'documentation/cp_content.md';\n  file_formats = environment.complex_portal_documentation_url + 'documentation/file_formats.md';\n  query_syntax = environment.complex_portal_documentation_url + 'documentation/cql.md';\n\n  constructor(private titleService: Title) {\n  }\n\n  ngOnInit() {\n    this.titleService.setTitle('Complex Portal - Documentation');\n    $('cp-documentation').foundation();\n    ProgressBarComponent.hide();\n  }\n}\n","import {NgModule} from '@angular/core';\nimport {RouterModule, Routes} from '@angular/router';\nimport {OntologiesComponent} from './ontologies/ontologies.component';\nimport {AboutComponent} from './navigation/about/about.component';\nimport {DownloadComponent} from './download/download.component';\nimport {DocumentationComponent} from './navigation/documentation/documentation.component';\n\nconst routes: Routes = [\n  {\n    path: 'complex',\n    loadChildren: () => import('./complex/complex.module').then(m => m.ComplexModule)\n  },\n  {\n    path: 'basket',\n    loadChildren: () => import('./basket/basket.module').then(m => m.BasketModule)\n  },\n  {\n    path: 'about',\n    component: AboutComponent,\n  },\n  {\n    path: 'download',\n    component: DownloadComponent\n  },\n  {\n    path: 'ontologies',\n    component: OntologiesComponent\n  },\n  {\n    path: 'documentation',\n    component: DocumentationComponent\n  },\n  {\n    path: '**',\n    redirectTo: 'home'\n  }\n];\n\n@NgModule({\n  exports: [RouterModule],\n  imports: [RouterModule.forRoot(routes, { useHash: false })],\n})\nexport class AppRoutingModule {}\n","<div [hidden]=\"!display\" id=\"local-search\" name=\"local-search\">\n  <fieldset>\n    <div class=\"input-group margin-bottom-none\">\n      <input #searchTerm type=\"text\" name=\"first\" id=\"local-searchbox\" placeholder=\"Search this service\"\n             value=\"{{query}}\"\n             class=\"input-group-field\" (keydown.enter)=\"search(searchTerm.value, 'enter')\">\n      <div class=\"input-group-button\">\n        <input type=\"button\" name=\"submit\" value=\"1\" (click)=\"search(searchTerm.value, 'button')\"\n               class=\"button icon icon-functional\"></div>\n    </div>\n    <small>\n      <!-- If your search is more complex than just a keyword search, you can link to an Advanced Search -->\n      <!-- <span class=\"adv\"><a href=\"../search\" id=\"adv-search\" title=\"Advanced\">Advanced</a></span> | -->\n      <!-- Include some example searchterms - keep them short and few. -->\n      Examples:\n      <a (click)=\"search('GO:0016491', 'example')\">GO:0016491</a>\n      <a (click)=\"search('Ndc80', 'example')\">Ndc80</a>\n      <a (click)=\"search('Q05471', 'example')\">Q05471</a>\n      <a (click)=\"search('PCNA', 'example')\">PCNA</a>\n      <a (click)=\"search('CPX-2158', 'example')\">CPX-2158</a>\n      <a (click)=\"search('&quot;nuclear pore&quot;', 'example')\">\"nuclear pore\"</a>\n      <a (click)=\"search('Q15554, P54274, Q96AP0', 'example')\">Q15554, P54274, Q96AP0</a>\n    </small>\n  </fieldset>\n</div>\n<!-- /local-search -->\n","/*# sourceMappingURL=local-search.component.css.map */\n","import {Injectable} from '@angular/core';\nimport {AnalyticsService} from '../../shared/google-analytics/service/analytics.service';\nimport {Router} from '@angular/router';\nimport {Category} from '../../shared/google-analytics/types/category.enum';\n\n@Injectable()\nexport class SearchService {\n  private _query: string;\n\n  constructor(private router: Router, private googleAnalyticsService: AnalyticsService) {\n  }\n\n  search(query: string, category: Category, typeOfButton: string) {\n    this._query = query;\n\n    this.googleAnalyticsService.fireSearchInvokerEvent(category, typeOfButton);\n    this.googleAnalyticsService.fireSearchTermEvent(category, query);\n    this.router.navigate(['complex/search'], {queryParams: {query: query, page: 1}});\n  }\n\n  get query(): string {\n    return this._query;\n  }\n\n  set query(value: string) {\n    this._query = value;\n  }\n}\n","import {Component, OnInit} from '@angular/core';\nimport {ActivatedRoute, Router} from '@angular/router';\nimport {Location} from '@angular/common';\nimport {Category} from '../../shared/google-analytics/types/category.enum';\nimport {SearchService} from '../service/search.service';\n\n\n@Component({\n  selector: 'cp-local-search',\n  templateUrl: './local-search.component.html',\n  styleUrls: ['./local-search.component.css']\n})\nexport class LocalSearchComponent implements OnInit {\n  private _display: boolean;\n  private _query: string;\n\n  constructor(private location: Location, private router: Router, private route: ActivatedRoute,\n              private searchService: SearchService) {\n\n  }\n\n  ngOnInit() {\n    this.extractQueryFromURL();\n  }\n\n  // TODO: REVIEW THIS METHOD\n  private extractQueryFromURL() {\n    // Retrieve query from URL. Would be nice to have it in the service.. but time etc.\n    this.router.events.subscribe((val) => {\n        if (this.location.path().startsWith('/home')) {\n          this._display = false;\n        } else {\n          this._display = true;\n          if (this.location.path().startsWith('/complex/search')) {\n            this.route\n              .queryParams\n              .subscribe(queryParams => {\n                this._query = queryParams['query'];\n              });\n          } else if (this.location.path().startsWith('/complex/organisms')) {\n            this._query = '';\n          } else if (this.location.path().startsWith('/complex')) {\n            this._query = ''; // this.location.path().split('/')[2];\n          } else {\n            this._query = '';\n          }\n        }\n      }\n    );\n  }\n\n  search(query: string, typeOfButton: string) {\n    this.searchService.search(query, Category.header, typeOfButton)\n  }\n\n  get display(): boolean {\n    return this._display;\n  }\n\n  get query(): string {\n    return this._query;\n  }\n}\n","/**\n * @license Angular v18.1.4\n * (c) 2010-2024 Google LLC. https://angular.io/\n * License: MIT\n */\n\nimport { ɵAnimationGroupPlayer, NoopAnimationPlayer, AUTO_STYLE, ɵPRE_STYLE, sequence, AnimationMetadataType, style } from '@angular/animations';\nimport * as i0 from '@angular/core';\nimport { ɵRuntimeError, Injectable } from '@angular/core';\nconst LINE_START = '\\n - ';\nfunction invalidTimingValue(exp) {\n  return new ɵRuntimeError(3000 /* RuntimeErrorCode.INVALID_TIMING_VALUE */, ngDevMode && `The provided timing value \"${exp}\" is invalid.`);\n}\nfunction negativeStepValue() {\n  return new ɵRuntimeError(3100 /* RuntimeErrorCode.NEGATIVE_STEP_VALUE */, ngDevMode && 'Duration values below 0 are not allowed for this animation step.');\n}\nfunction negativeDelayValue() {\n  return new ɵRuntimeError(3101 /* RuntimeErrorCode.NEGATIVE_DELAY_VALUE */, ngDevMode && 'Delay values below 0 are not allowed for this animation step.');\n}\nfunction invalidStyleParams(varName) {\n  return new ɵRuntimeError(3001 /* RuntimeErrorCode.INVALID_STYLE_PARAMS */, ngDevMode && `Unable to resolve the local animation param ${varName} in the given list of values`);\n}\nfunction invalidParamValue(varName) {\n  return new ɵRuntimeError(3003 /* RuntimeErrorCode.INVALID_PARAM_VALUE */, ngDevMode && `Please provide a value for the animation param ${varName}`);\n}\nfunction invalidNodeType(nodeType) {\n  return new ɵRuntimeError(3004 /* RuntimeErrorCode.INVALID_NODE_TYPE */, ngDevMode && `Unable to resolve animation metadata node #${nodeType}`);\n}\nfunction invalidCssUnitValue(userProvidedProperty, value) {\n  return new ɵRuntimeError(3005 /* RuntimeErrorCode.INVALID_CSS_UNIT_VALUE */, ngDevMode && `Please provide a CSS unit value for ${userProvidedProperty}:${value}`);\n}\nfunction invalidTrigger() {\n  return new ɵRuntimeError(3006 /* RuntimeErrorCode.INVALID_TRIGGER */, ngDevMode && \"animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))\");\n}\nfunction invalidDefinition() {\n  return new ɵRuntimeError(3007 /* RuntimeErrorCode.INVALID_DEFINITION */, ngDevMode && 'only state() and transition() definitions can sit inside of a trigger()');\n}\nfunction invalidState(metadataName, missingSubs) {\n  return new ɵRuntimeError(3008 /* RuntimeErrorCode.INVALID_STATE */, ngDevMode && `state(\"${metadataName}\", ...) must define default values for all the following style substitutions: ${missingSubs.join(', ')}`);\n}\nfunction invalidStyleValue(value) {\n  return new ɵRuntimeError(3002 /* RuntimeErrorCode.INVALID_STYLE_VALUE */, ngDevMode && `The provided style string value ${value} is not allowed.`);\n}\nfunction invalidProperty(prop) {\n  return new ɵRuntimeError(3009 /* RuntimeErrorCode.INVALID_PROPERTY */, ngDevMode && `The provided animation property \"${prop}\" is not a supported CSS property for animations`);\n}\nfunction invalidParallelAnimation(prop, firstStart, firstEnd, secondStart, secondEnd) {\n  return new ɵRuntimeError(3010 /* RuntimeErrorCode.INVALID_PARALLEL_ANIMATION */, ngDevMode && `The CSS property \"${prop}\" that exists between the times of \"${firstStart}ms\" and \"${firstEnd}ms\" is also being animated in a parallel animation between the times of \"${secondStart}ms\" and \"${secondEnd}ms\"`);\n}\nfunction invalidKeyframes() {\n  return new ɵRuntimeError(3011 /* RuntimeErrorCode.INVALID_KEYFRAMES */, ngDevMode && `keyframes() must be placed inside of a call to animate()`);\n}\nfunction invalidOffset() {\n  return new ɵRuntimeError(3012 /* RuntimeErrorCode.INVALID_OFFSET */, ngDevMode && `Please ensure that all keyframe offsets are between 0 and 1`);\n}\nfunction keyframeOffsetsOutOfOrder() {\n  return new ɵRuntimeError(3200 /* RuntimeErrorCode.KEYFRAME_OFFSETS_OUT_OF_ORDER */, ngDevMode && `Please ensure that all keyframe offsets are in order`);\n}\nfunction keyframesMissingOffsets() {\n  return new ɵRuntimeError(3202 /* RuntimeErrorCode.KEYFRAMES_MISSING_OFFSETS */, ngDevMode && `Not all style() steps within the declared keyframes() contain offsets`);\n}\nfunction invalidStagger() {\n  return new ɵRuntimeError(3013 /* RuntimeErrorCode.INVALID_STAGGER */, ngDevMode && `stagger() can only be used inside of query()`);\n}\nfunction invalidQuery(selector) {\n  return new ɵRuntimeError(3014 /* RuntimeErrorCode.INVALID_QUERY */, ngDevMode && `\\`query(\"${selector}\")\\` returned zero elements. (Use \\`query(\"${selector}\", { optional: true })\\` if you wish to allow this.)`);\n}\nfunction invalidExpression(expr) {\n  return new ɵRuntimeError(3015 /* RuntimeErrorCode.INVALID_EXPRESSION */, ngDevMode && `The provided transition expression \"${expr}\" is not supported`);\n}\nfunction invalidTransitionAlias(alias) {\n  return new ɵRuntimeError(3016 /* RuntimeErrorCode.INVALID_TRANSITION_ALIAS */, ngDevMode && `The transition alias value \"${alias}\" is not supported`);\n}\nfunction validationFailed(errors) {\n  return new ɵRuntimeError(3500 /* RuntimeErrorCode.VALIDATION_FAILED */, ngDevMode && `animation validation failed:\\n${errors.map(err => err.message).join('\\n')}`);\n}\nfunction buildingFailed(errors) {\n  return new ɵRuntimeError(3501 /* RuntimeErrorCode.BUILDING_FAILED */, ngDevMode && `animation building failed:\\n${errors.map(err => err.message).join('\\n')}`);\n}\nfunction triggerBuildFailed(name, errors) {\n  return new ɵRuntimeError(3404 /* RuntimeErrorCode.TRIGGER_BUILD_FAILED */, ngDevMode && `The animation trigger \"${name}\" has failed to build due to the following errors:\\n - ${errors.map(err => err.message).join('\\n - ')}`);\n}\nfunction animationFailed(errors) {\n  return new ɵRuntimeError(3502 /* RuntimeErrorCode.ANIMATION_FAILED */, ngDevMode && `Unable to animate due to the following errors:${LINE_START}${errors.map(err => err.message).join(LINE_START)}`);\n}\nfunction registerFailed(errors) {\n  return new ɵRuntimeError(3503 /* RuntimeErrorCode.REGISTRATION_FAILED */, ngDevMode && `Unable to build the animation due to the following errors: ${errors.map(err => err.message).join('\\n')}`);\n}\nfunction missingOrDestroyedAnimation() {\n  return new ɵRuntimeError(3300 /* RuntimeErrorCode.MISSING_OR_DESTROYED_ANIMATION */, ngDevMode && \"The requested animation doesn't exist or has already been destroyed\");\n}\nfunction createAnimationFailed(errors) {\n  return new ɵRuntimeError(3504 /* RuntimeErrorCode.CREATE_ANIMATION_FAILED */, ngDevMode && `Unable to create the animation due to the following errors:${errors.map(err => err.message).join('\\n')}`);\n}\nfunction missingPlayer(id) {\n  return new ɵRuntimeError(3301 /* RuntimeErrorCode.MISSING_PLAYER */, ngDevMode && `Unable to find the timeline player referenced by ${id}`);\n}\nfunction missingTrigger(phase, name) {\n  return new ɵRuntimeError(3302 /* RuntimeErrorCode.MISSING_TRIGGER */, ngDevMode && `Unable to listen on the animation trigger event \"${phase}\" because the animation trigger \"${name}\" doesn\\'t exist!`);\n}\nfunction missingEvent(name) {\n  return new ɵRuntimeError(3303 /* RuntimeErrorCode.MISSING_EVENT */, ngDevMode && `Unable to listen on the animation trigger \"${name}\" because the provided event is undefined!`);\n}\nfunction unsupportedTriggerEvent(phase, name) {\n  return new ɵRuntimeError(3400 /* RuntimeErrorCode.UNSUPPORTED_TRIGGER_EVENT */, ngDevMode && `The provided animation trigger event \"${phase}\" for the animation trigger \"${name}\" is not supported!`);\n}\nfunction unregisteredTrigger(name) {\n  return new ɵRuntimeError(3401 /* RuntimeErrorCode.UNREGISTERED_TRIGGER */, ngDevMode && `The provided animation trigger \"${name}\" has not been registered!`);\n}\nfunction triggerTransitionsFailed(errors) {\n  return new ɵRuntimeError(3402 /* RuntimeErrorCode.TRIGGER_TRANSITIONS_FAILED */, ngDevMode && `Unable to process animations due to the following failed trigger transitions\\n ${errors.map(err => err.message).join('\\n')}`);\n}\nfunction triggerParsingFailed(name, errors) {\n  return new ɵRuntimeError(3403 /* RuntimeErrorCode.TRIGGER_PARSING_FAILED */, ngDevMode && `Animation parsing for the ${name} trigger have failed:${LINE_START}${errors.map(err => err.message).join(LINE_START)}`);\n}\nfunction transitionFailed(name, errors) {\n  return new ɵRuntimeError(3505 /* RuntimeErrorCode.TRANSITION_FAILED */, ngDevMode && `@${name} has failed due to:\\n ${errors.map(err => err.message).join('\\n- ')}`);\n}\n\n/**\n * Set of all animatable CSS properties\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_animated_properties\n */\nconst ANIMATABLE_PROP_SET = new Set(['-moz-outline-radius', '-moz-outline-radius-bottomleft', '-moz-outline-radius-bottomright', '-moz-outline-radius-topleft', '-moz-outline-radius-topright', '-ms-grid-columns', '-ms-grid-rows', '-webkit-line-clamp', '-webkit-text-fill-color', '-webkit-text-stroke', '-webkit-text-stroke-color', 'accent-color', 'all', 'backdrop-filter', 'background', 'background-color', 'background-position', 'background-size', 'block-size', 'border', 'border-block-end', 'border-block-end-color', 'border-block-end-width', 'border-block-start', 'border-block-start-color', 'border-block-start-width', 'border-bottom', 'border-bottom-color', 'border-bottom-left-radius', 'border-bottom-right-radius', 'border-bottom-width', 'border-color', 'border-end-end-radius', 'border-end-start-radius', 'border-image-outset', 'border-image-slice', 'border-image-width', 'border-inline-end', 'border-inline-end-color', 'border-inline-end-width', 'border-inline-start', 'border-inline-start-color', 'border-inline-start-width', 'border-left', 'border-left-color', 'border-left-width', 'border-radius', 'border-right', 'border-right-color', 'border-right-width', 'border-start-end-radius', 'border-start-start-radius', 'border-top', 'border-top-color', 'border-top-left-radius', 'border-top-right-radius', 'border-top-width', 'border-width', 'bottom', 'box-shadow', 'caret-color', 'clip', 'clip-path', 'color', 'column-count', 'column-gap', 'column-rule', 'column-rule-color', 'column-rule-width', 'column-width', 'columns', 'filter', 'flex', 'flex-basis', 'flex-grow', 'flex-shrink', 'font', 'font-size', 'font-size-adjust', 'font-stretch', 'font-variation-settings', 'font-weight', 'gap', 'grid-column-gap', 'grid-gap', 'grid-row-gap', 'grid-template-columns', 'grid-template-rows', 'height', 'inline-size', 'input-security', 'inset', 'inset-block', 'inset-block-end', 'inset-block-start', 'inset-inline', 'inset-inline-end', 'inset-inline-start', 'left', 'letter-spacing', 'line-clamp', 'line-height', 'margin', 'margin-block-end', 'margin-block-start', 'margin-bottom', 'margin-inline-end', 'margin-inline-start', 'margin-left', 'margin-right', 'margin-top', 'mask', 'mask-border', 'mask-position', 'mask-size', 'max-block-size', 'max-height', 'max-inline-size', 'max-lines', 'max-width', 'min-block-size', 'min-height', 'min-inline-size', 'min-width', 'object-position', 'offset', 'offset-anchor', 'offset-distance', 'offset-path', 'offset-position', 'offset-rotate', 'opacity', 'order', 'outline', 'outline-color', 'outline-offset', 'outline-width', 'padding', 'padding-block-end', 'padding-block-start', 'padding-bottom', 'padding-inline-end', 'padding-inline-start', 'padding-left', 'padding-right', 'padding-top', 'perspective', 'perspective-origin', 'right', 'rotate', 'row-gap', 'scale', 'scroll-margin', 'scroll-margin-block', 'scroll-margin-block-end', 'scroll-margin-block-start', 'scroll-margin-bottom', 'scroll-margin-inline', 'scroll-margin-inline-end', 'scroll-margin-inline-start', 'scroll-margin-left', 'scroll-margin-right', 'scroll-margin-top', 'scroll-padding', 'scroll-padding-block', 'scroll-padding-block-end', 'scroll-padding-block-start', 'scroll-padding-bottom', 'scroll-padding-inline', 'scroll-padding-inline-end', 'scroll-padding-inline-start', 'scroll-padding-left', 'scroll-padding-right', 'scroll-padding-top', 'scroll-snap-coordinate', 'scroll-snap-destination', 'scrollbar-color', 'shape-image-threshold', 'shape-margin', 'shape-outside', 'tab-size', 'text-decoration', 'text-decoration-color', 'text-decoration-thickness', 'text-emphasis', 'text-emphasis-color', 'text-indent', 'text-shadow', 'text-underline-offset', 'top', 'transform', 'transform-origin', 'translate', 'vertical-align', 'visibility', 'width', 'word-spacing', 'z-index', 'zoom']);\nfunction optimizeGroupPlayer(players) {\n  switch (players.length) {\n    case 0:\n      return new NoopAnimationPlayer();\n    case 1:\n      return players[0];\n    default:\n      return new ɵAnimationGroupPlayer(players);\n  }\n}\nfunction normalizeKeyframes$1(normalizer, keyframes, preStyles = new Map(), postStyles = new Map()) {\n  const errors = [];\n  const normalizedKeyframes = [];\n  let previousOffset = -1;\n  let previousKeyframe = null;\n  keyframes.forEach(kf => {\n    const offset = kf.get('offset');\n    const isSameOffset = offset == previousOffset;\n    const normalizedKeyframe = isSameOffset && previousKeyframe || new Map();\n    kf.forEach((val, prop) => {\n      let normalizedProp = prop;\n      let normalizedValue = val;\n      if (prop !== 'offset') {\n        normalizedProp = normalizer.normalizePropertyName(normalizedProp, errors);\n        switch (normalizedValue) {\n          case ɵPRE_STYLE:\n            normalizedValue = preStyles.get(prop);\n            break;\n          case AUTO_STYLE:\n            normalizedValue = postStyles.get(prop);\n            break;\n          default:\n            normalizedValue = normalizer.normalizeStyleValue(prop, normalizedProp, normalizedValue, errors);\n            break;\n        }\n      }\n      normalizedKeyframe.set(normalizedProp, normalizedValue);\n    });\n    if (!isSameOffset) {\n      normalizedKeyframes.push(normalizedKeyframe);\n    }\n    previousKeyframe = normalizedKeyframe;\n    previousOffset = offset;\n  });\n  if (errors.length) {\n    throw animationFailed(errors);\n  }\n  return normalizedKeyframes;\n}\nfunction listenOnPlayer(player, eventName, event, callback) {\n  switch (eventName) {\n    case 'start':\n      player.onStart(() => callback(event && copyAnimationEvent(event, 'start', player)));\n      break;\n    case 'done':\n      player.onDone(() => callback(event && copyAnimationEvent(event, 'done', player)));\n      break;\n    case 'destroy':\n      player.onDestroy(() => callback(event && copyAnimationEvent(event, 'destroy', player)));\n      break;\n  }\n}\nfunction copyAnimationEvent(e, phaseName, player) {\n  const totalTime = player.totalTime;\n  const disabled = player.disabled ? true : false;\n  const event = makeAnimationEvent(e.element, e.triggerName, e.fromState, e.toState, phaseName || e.phaseName, totalTime == undefined ? e.totalTime : totalTime, disabled);\n  const data = e['_data'];\n  if (data != null) {\n    event['_data'] = data;\n  }\n  return event;\n}\nfunction makeAnimationEvent(element, triggerName, fromState, toState, phaseName = '', totalTime = 0, disabled) {\n  return {\n    element,\n    triggerName,\n    fromState,\n    toState,\n    phaseName,\n    totalTime,\n    disabled: !!disabled\n  };\n}\nfunction getOrSetDefaultValue(map, key, defaultValue) {\n  let value = map.get(key);\n  if (!value) {\n    map.set(key, value = defaultValue);\n  }\n  return value;\n}\nfunction parseTimelineCommand(command) {\n  const separatorPos = command.indexOf(':');\n  const id = command.substring(1, separatorPos);\n  const action = command.slice(separatorPos + 1);\n  return [id, action];\n}\nconst documentElement = /* @__PURE__ */(() => typeof document === 'undefined' ? null : document.documentElement)();\nfunction getParentElement(element) {\n  const parent = element.parentNode || element.host || null; // consider host to support shadow DOM\n  if (parent === documentElement) {\n    return null;\n  }\n  return parent;\n}\nfunction containsVendorPrefix(prop) {\n  // Webkit is the only real popular vendor prefix nowadays\n  // cc: http://shouldiprefix.com/\n  return prop.substring(1, 6) == 'ebkit'; // webkit or Webkit\n}\nlet _CACHED_BODY = null;\nlet _IS_WEBKIT = false;\nfunction validateStyleProperty(prop) {\n  if (!_CACHED_BODY) {\n    _CACHED_BODY = getBodyNode() || {};\n    _IS_WEBKIT = _CACHED_BODY.style ? 'WebkitAppearance' in _CACHED_BODY.style : false;\n  }\n  let result = true;\n  if (_CACHED_BODY.style && !containsVendorPrefix(prop)) {\n    result = prop in _CACHED_BODY.style;\n    if (!result && _IS_WEBKIT) {\n      const camelProp = 'Webkit' + prop.charAt(0).toUpperCase() + prop.slice(1);\n      result = camelProp in _CACHED_BODY.style;\n    }\n  }\n  return result;\n}\nfunction validateWebAnimatableStyleProperty(prop) {\n  return ANIMATABLE_PROP_SET.has(prop);\n}\nfunction getBodyNode() {\n  if (typeof document != 'undefined') {\n    return document.body;\n  }\n  return null;\n}\nfunction containsElement(elm1, elm2) {\n  while (elm2) {\n    if (elm2 === elm1) {\n      return true;\n    }\n    elm2 = getParentElement(elm2);\n  }\n  return false;\n}\nfunction invokeQuery(element, selector, multi) {\n  if (multi) {\n    return Array.from(element.querySelectorAll(selector));\n  }\n  const elem = element.querySelector(selector);\n  return elem ? [elem] : [];\n}\nfunction hypenatePropsKeys(original) {\n  const newMap = new Map();\n  original.forEach((val, prop) => {\n    const newProp = prop.replace(/([a-z])([A-Z])/g, '$1-$2');\n    newMap.set(newProp, val);\n  });\n  return newMap;\n}\n\n/**\n * @publicApi\n *\n * `AnimationDriver` implentation for Noop animations\n */\nclass NoopAnimationDriver {\n  /**\n   * @returns Whether `prop` is a valid CSS property\n   */\n  validateStyleProperty(prop) {\n    return validateStyleProperty(prop);\n  }\n  /**\n   *\n   * @returns Whether elm1 contains elm2.\n   */\n  containsElement(elm1, elm2) {\n    return containsElement(elm1, elm2);\n  }\n  /**\n   * @returns Rhe parent of the given element or `null` if the element is the `document`\n   */\n  getParentElement(element) {\n    return getParentElement(element);\n  }\n  /**\n   * @returns The result of the query selector on the element. The array will contain up to 1 item\n   *     if `multi` is  `false`.\n   */\n  query(element, selector, multi) {\n    return invokeQuery(element, selector, multi);\n  }\n  /**\n   * @returns The `defaultValue` or empty string\n   */\n  computeStyle(element, prop, defaultValue) {\n    return defaultValue || '';\n  }\n  /**\n   * @returns An `NoopAnimationPlayer`\n   */\n  animate(element, keyframes, duration, delay, easing, previousPlayers = [], scrubberAccessRequested) {\n    return new NoopAnimationPlayer(duration, delay);\n  }\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: NoopAnimationDriver,\n      deps: [],\n      target: i0.ɵɵFactoryTarget.Injectable\n    });\n  }\n  static {\n    this.ɵprov = i0.ɵɵngDeclareInjectable({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: NoopAnimationDriver\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.1.4\",\n  ngImport: i0,\n  type: NoopAnimationDriver,\n  decorators: [{\n    type: Injectable\n  }]\n});\n/**\n * @publicApi\n */\nclass AnimationDriver {\n  /**\n   * @deprecated Use the NoopAnimationDriver class.\n   */\n  static {\n    this.NOOP = new NoopAnimationDriver();\n  }\n}\nclass AnimationStyleNormalizer {}\nclass NoopAnimationStyleNormalizer {\n  normalizePropertyName(propertyName, errors) {\n    return propertyName;\n  }\n  normalizeStyleValue(userProvidedProperty, normalizedProperty, value, errors) {\n    return value;\n  }\n}\nconst ONE_SECOND = 1000;\nconst SUBSTITUTION_EXPR_START = '{{';\nconst SUBSTITUTION_EXPR_END = '}}';\nconst ENTER_CLASSNAME = 'ng-enter';\nconst LEAVE_CLASSNAME = 'ng-leave';\nconst NG_TRIGGER_CLASSNAME = 'ng-trigger';\nconst NG_TRIGGER_SELECTOR = '.ng-trigger';\nconst NG_ANIMATING_CLASSNAME = 'ng-animating';\nconst NG_ANIMATING_SELECTOR = '.ng-animating';\nfunction resolveTimingValue(value) {\n  if (typeof value == 'number') return value;\n  const matches = value.match(/^(-?[\\.\\d]+)(m?s)/);\n  if (!matches || matches.length < 2) return 0;\n  return _convertTimeValueToMS(parseFloat(matches[1]), matches[2]);\n}\nfunction _convertTimeValueToMS(value, unit) {\n  switch (unit) {\n    case 's':\n      return value * ONE_SECOND;\n    default:\n      // ms or something else\n      return value;\n  }\n}\nfunction resolveTiming(timings, errors, allowNegativeValues) {\n  return timings.hasOwnProperty('duration') ? timings : parseTimeExpression(timings, errors, allowNegativeValues);\n}\nfunction parseTimeExpression(exp, errors, allowNegativeValues) {\n  const regex = /^(-?[\\.\\d]+)(m?s)(?:\\s+(-?[\\.\\d]+)(m?s))?(?:\\s+([-a-z]+(?:\\(.+?\\))?))?$/i;\n  let duration;\n  let delay = 0;\n  let easing = '';\n  if (typeof exp === 'string') {\n    const matches = exp.match(regex);\n    if (matches === null) {\n      errors.push(invalidTimingValue(exp));\n      return {\n        duration: 0,\n        delay: 0,\n        easing: ''\n      };\n    }\n    duration = _convertTimeValueToMS(parseFloat(matches[1]), matches[2]);\n    const delayMatch = matches[3];\n    if (delayMatch != null) {\n      delay = _convertTimeValueToMS(parseFloat(delayMatch), matches[4]);\n    }\n    const easingVal = matches[5];\n    if (easingVal) {\n      easing = easingVal;\n    }\n  } else {\n    duration = exp;\n  }\n  if (!allowNegativeValues) {\n    let containsErrors = false;\n    let startIndex = errors.length;\n    if (duration < 0) {\n      errors.push(negativeStepValue());\n      containsErrors = true;\n    }\n    if (delay < 0) {\n      errors.push(negativeDelayValue());\n      containsErrors = true;\n    }\n    if (containsErrors) {\n      errors.splice(startIndex, 0, invalidTimingValue(exp));\n    }\n  }\n  return {\n    duration,\n    delay,\n    easing\n  };\n}\nfunction normalizeKeyframes(keyframes) {\n  if (!keyframes.length) {\n    return [];\n  }\n  if (keyframes[0] instanceof Map) {\n    return keyframes;\n  }\n  return keyframes.map(kf => new Map(Object.entries(kf)));\n}\nfunction normalizeStyles(styles) {\n  return Array.isArray(styles) ? new Map(...styles) : new Map(styles);\n}\nfunction setStyles(element, styles, formerStyles) {\n  styles.forEach((val, prop) => {\n    const camelProp = dashCaseToCamelCase(prop);\n    if (formerStyles && !formerStyles.has(prop)) {\n      formerStyles.set(prop, element.style[camelProp]);\n    }\n    element.style[camelProp] = val;\n  });\n}\nfunction eraseStyles(element, styles) {\n  styles.forEach((_, prop) => {\n    const camelProp = dashCaseToCamelCase(prop);\n    element.style[camelProp] = '';\n  });\n}\nfunction normalizeAnimationEntry(steps) {\n  if (Array.isArray(steps)) {\n    if (steps.length == 1) return steps[0];\n    return sequence(steps);\n  }\n  return steps;\n}\nfunction validateStyleParams(value, options, errors) {\n  const params = options.params || {};\n  const matches = extractStyleParams(value);\n  if (matches.length) {\n    matches.forEach(varName => {\n      if (!params.hasOwnProperty(varName)) {\n        errors.push(invalidStyleParams(varName));\n      }\n    });\n  }\n}\nconst PARAM_REGEX = new RegExp(`${SUBSTITUTION_EXPR_START}\\\\s*(.+?)\\\\s*${SUBSTITUTION_EXPR_END}`, 'g');\nfunction extractStyleParams(value) {\n  let params = [];\n  if (typeof value === 'string') {\n    let match;\n    while (match = PARAM_REGEX.exec(value)) {\n      params.push(match[1]);\n    }\n    PARAM_REGEX.lastIndex = 0;\n  }\n  return params;\n}\nfunction interpolateParams(value, params, errors) {\n  const original = `${value}`;\n  const str = original.replace(PARAM_REGEX, (_, varName) => {\n    let localVal = params[varName];\n    // this means that the value was never overridden by the data passed in by the user\n    if (localVal == null) {\n      errors.push(invalidParamValue(varName));\n      localVal = '';\n    }\n    return localVal.toString();\n  });\n  // we do this to assert that numeric values stay as they are\n  return str == original ? value : str;\n}\nconst DASH_CASE_REGEXP = /-+([a-z0-9])/g;\nfunction dashCaseToCamelCase(input) {\n  return input.replace(DASH_CASE_REGEXP, (...m) => m[1].toUpperCase());\n}\nfunction camelCaseToDashCase(input) {\n  return input.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n}\nfunction allowPreviousPlayerStylesMerge(duration, delay) {\n  return duration === 0 || delay === 0;\n}\nfunction balancePreviousStylesIntoKeyframes(element, keyframes, previousStyles) {\n  if (previousStyles.size && keyframes.length) {\n    let startingKeyframe = keyframes[0];\n    let missingStyleProps = [];\n    previousStyles.forEach((val, prop) => {\n      if (!startingKeyframe.has(prop)) {\n        missingStyleProps.push(prop);\n      }\n      startingKeyframe.set(prop, val);\n    });\n    if (missingStyleProps.length) {\n      for (let i = 1; i < keyframes.length; i++) {\n        let kf = keyframes[i];\n        missingStyleProps.forEach(prop => kf.set(prop, computeStyle(element, prop)));\n      }\n    }\n  }\n  return keyframes;\n}\nfunction visitDslNode(visitor, node, context) {\n  switch (node.type) {\n    case AnimationMetadataType.Trigger:\n      return visitor.visitTrigger(node, context);\n    case AnimationMetadataType.State:\n      return visitor.visitState(node, context);\n    case AnimationMetadataType.Transition:\n      return visitor.visitTransition(node, context);\n    case AnimationMetadataType.Sequence:\n      return visitor.visitSequence(node, context);\n    case AnimationMetadataType.Group:\n      return visitor.visitGroup(node, context);\n    case AnimationMetadataType.Animate:\n      return visitor.visitAnimate(node, context);\n    case AnimationMetadataType.Keyframes:\n      return visitor.visitKeyframes(node, context);\n    case AnimationMetadataType.Style:\n      return visitor.visitStyle(node, context);\n    case AnimationMetadataType.Reference:\n      return visitor.visitReference(node, context);\n    case AnimationMetadataType.AnimateChild:\n      return visitor.visitAnimateChild(node, context);\n    case AnimationMetadataType.AnimateRef:\n      return visitor.visitAnimateRef(node, context);\n    case AnimationMetadataType.Query:\n      return visitor.visitQuery(node, context);\n    case AnimationMetadataType.Stagger:\n      return visitor.visitStagger(node, context);\n    default:\n      throw invalidNodeType(node.type);\n  }\n}\nfunction computeStyle(element, prop) {\n  return window.getComputedStyle(element)[prop];\n}\nconst DIMENSIONAL_PROP_SET = new Set(['width', 'height', 'minWidth', 'minHeight', 'maxWidth', 'maxHeight', 'left', 'top', 'bottom', 'right', 'fontSize', 'outlineWidth', 'outlineOffset', 'paddingTop', 'paddingLeft', 'paddingBottom', 'paddingRight', 'marginTop', 'marginLeft', 'marginBottom', 'marginRight', 'borderRadius', 'borderWidth', 'borderTopWidth', 'borderLeftWidth', 'borderRightWidth', 'borderBottomWidth', 'textIndent', 'perspective']);\nclass WebAnimationsStyleNormalizer extends AnimationStyleNormalizer {\n  normalizePropertyName(propertyName, errors) {\n    return dashCaseToCamelCase(propertyName);\n  }\n  normalizeStyleValue(userProvidedProperty, normalizedProperty, value, errors) {\n    let unit = '';\n    const strVal = value.toString().trim();\n    if (DIMENSIONAL_PROP_SET.has(normalizedProperty) && value !== 0 && value !== '0') {\n      if (typeof value === 'number') {\n        unit = 'px';\n      } else {\n        const valAndSuffixMatch = value.match(/^[+-]?[\\d\\.]+([a-z]*)$/);\n        if (valAndSuffixMatch && valAndSuffixMatch[1].length == 0) {\n          errors.push(invalidCssUnitValue(userProvidedProperty, value));\n        }\n      }\n    }\n    return strVal + unit;\n  }\n}\nfunction createListOfWarnings(warnings) {\n  const LINE_START = '\\n - ';\n  return `${LINE_START}${warnings.filter(Boolean).map(warning => warning).join(LINE_START)}`;\n}\nfunction warnValidation(warnings) {\n  (typeof ngDevMode === 'undefined' || ngDevMode) && console.warn(`animation validation warnings:${createListOfWarnings(warnings)}`);\n}\nfunction warnTriggerBuild(name, warnings) {\n  (typeof ngDevMode === 'undefined' || ngDevMode) && console.warn(`The animation trigger \"${name}\" has built with the following warnings:${createListOfWarnings(warnings)}`);\n}\nfunction warnRegister(warnings) {\n  (typeof ngDevMode === 'undefined' || ngDevMode) && console.warn(`Animation built with the following warnings:${createListOfWarnings(warnings)}`);\n}\nfunction triggerParsingWarnings(name, warnings) {\n  (typeof ngDevMode === 'undefined' || ngDevMode) && console.warn(`Animation parsing for the ${name} trigger presents the following warnings:${createListOfWarnings(warnings)}`);\n}\nfunction pushUnrecognizedPropertiesWarning(warnings, props) {\n  if (props.length) {\n    warnings.push(`The following provided properties are not recognized: ${props.join(', ')}`);\n  }\n}\nconst ANY_STATE = '*';\nfunction parseTransitionExpr(transitionValue, errors) {\n  const expressions = [];\n  if (typeof transitionValue == 'string') {\n    transitionValue.split(/\\s*,\\s*/).forEach(str => parseInnerTransitionStr(str, expressions, errors));\n  } else {\n    expressions.push(transitionValue);\n  }\n  return expressions;\n}\nfunction parseInnerTransitionStr(eventStr, expressions, errors) {\n  if (eventStr[0] == ':') {\n    const result = parseAnimationAlias(eventStr, errors);\n    if (typeof result == 'function') {\n      expressions.push(result);\n      return;\n    }\n    eventStr = result;\n  }\n  const match = eventStr.match(/^(\\*|[-\\w]+)\\s*(<?[=-]>)\\s*(\\*|[-\\w]+)$/);\n  if (match == null || match.length < 4) {\n    errors.push(invalidExpression(eventStr));\n    return expressions;\n  }\n  const fromState = match[1];\n  const separator = match[2];\n  const toState = match[3];\n  expressions.push(makeLambdaFromStates(fromState, toState));\n  const isFullAnyStateExpr = fromState == ANY_STATE && toState == ANY_STATE;\n  if (separator[0] == '<' && !isFullAnyStateExpr) {\n    expressions.push(makeLambdaFromStates(toState, fromState));\n  }\n  return;\n}\nfunction parseAnimationAlias(alias, errors) {\n  switch (alias) {\n    case ':enter':\n      return 'void => *';\n    case ':leave':\n      return '* => void';\n    case ':increment':\n      return (fromState, toState) => parseFloat(toState) > parseFloat(fromState);\n    case ':decrement':\n      return (fromState, toState) => parseFloat(toState) < parseFloat(fromState);\n    default:\n      errors.push(invalidTransitionAlias(alias));\n      return '* => *';\n  }\n}\n// DO NOT REFACTOR ... keep the follow set instantiations\n// with the values intact (closure compiler for some reason\n// removes follow-up lines that add the values outside of\n// the constructor...\nconst TRUE_BOOLEAN_VALUES = new Set(['true', '1']);\nconst FALSE_BOOLEAN_VALUES = new Set(['false', '0']);\nfunction makeLambdaFromStates(lhs, rhs) {\n  const LHS_MATCH_BOOLEAN = TRUE_BOOLEAN_VALUES.has(lhs) || FALSE_BOOLEAN_VALUES.has(lhs);\n  const RHS_MATCH_BOOLEAN = TRUE_BOOLEAN_VALUES.has(rhs) || FALSE_BOOLEAN_VALUES.has(rhs);\n  return (fromState, toState) => {\n    let lhsMatch = lhs == ANY_STATE || lhs == fromState;\n    let rhsMatch = rhs == ANY_STATE || rhs == toState;\n    if (!lhsMatch && LHS_MATCH_BOOLEAN && typeof fromState === 'boolean') {\n      lhsMatch = fromState ? TRUE_BOOLEAN_VALUES.has(lhs) : FALSE_BOOLEAN_VALUES.has(lhs);\n    }\n    if (!rhsMatch && RHS_MATCH_BOOLEAN && typeof toState === 'boolean') {\n      rhsMatch = toState ? TRUE_BOOLEAN_VALUES.has(rhs) : FALSE_BOOLEAN_VALUES.has(rhs);\n    }\n    return lhsMatch && rhsMatch;\n  };\n}\nconst SELF_TOKEN = ':self';\nconst SELF_TOKEN_REGEX = new RegExp(`s*${SELF_TOKEN}s*,?`, 'g');\n/*\n * [Validation]\n * The visitor code below will traverse the animation AST generated by the animation verb functions\n * (the output is a tree of objects) and attempt to perform a series of validations on the data. The\n * following corner-cases will be validated:\n *\n * 1. Overlap of animations\n * Given that a CSS property cannot be animated in more than one place at the same time, it's\n * important that this behavior is detected and validated. The way in which this occurs is that\n * each time a style property is examined, a string-map containing the property will be updated with\n * the start and end times for when the property is used within an animation step.\n *\n * If there are two or more parallel animations that are currently running (these are invoked by the\n * group()) on the same element then the validator will throw an error. Since the start/end timing\n * values are collected for each property then if the current animation step is animating the same\n * property and its timing values fall anywhere into the window of time that the property is\n * currently being animated within then this is what causes an error.\n *\n * 2. Timing values\n * The validator will validate to see if a timing value of `duration delay easing` or\n * `durationNumber` is valid or not.\n *\n * (note that upon validation the code below will replace the timing data with an object containing\n * {duration,delay,easing}.\n *\n * 3. Offset Validation\n * Each of the style() calls are allowed to have an offset value when placed inside of keyframes().\n * Offsets within keyframes() are considered valid when:\n *\n *   - No offsets are used at all\n *   - Each style() entry contains an offset value\n *   - Each offset is between 0 and 1\n *   - Each offset is greater to or equal than the previous one\n *\n * Otherwise an error will be thrown.\n */\nfunction buildAnimationAst(driver, metadata, errors, warnings) {\n  return new AnimationAstBuilderVisitor(driver).build(metadata, errors, warnings);\n}\nconst ROOT_SELECTOR = '';\nclass AnimationAstBuilderVisitor {\n  constructor(_driver) {\n    this._driver = _driver;\n  }\n  build(metadata, errors, warnings) {\n    const context = new AnimationAstBuilderContext(errors);\n    this._resetContextStyleTimingState(context);\n    const ast = visitDslNode(this, normalizeAnimationEntry(metadata), context);\n    if (typeof ngDevMode === 'undefined' || ngDevMode) {\n      if (context.unsupportedCSSPropertiesFound.size) {\n        pushUnrecognizedPropertiesWarning(warnings, [...context.unsupportedCSSPropertiesFound.keys()]);\n      }\n    }\n    return ast;\n  }\n  _resetContextStyleTimingState(context) {\n    context.currentQuerySelector = ROOT_SELECTOR;\n    context.collectedStyles = new Map();\n    context.collectedStyles.set(ROOT_SELECTOR, new Map());\n    context.currentTime = 0;\n  }\n  visitTrigger(metadata, context) {\n    let queryCount = context.queryCount = 0;\n    let depCount = context.depCount = 0;\n    const states = [];\n    const transitions = [];\n    if (metadata.name.charAt(0) == '@') {\n      context.errors.push(invalidTrigger());\n    }\n    metadata.definitions.forEach(def => {\n      this._resetContextStyleTimingState(context);\n      if (def.type == AnimationMetadataType.State) {\n        const stateDef = def;\n        const name = stateDef.name;\n        name.toString().split(/\\s*,\\s*/).forEach(n => {\n          stateDef.name = n;\n          states.push(this.visitState(stateDef, context));\n        });\n        stateDef.name = name;\n      } else if (def.type == AnimationMetadataType.Transition) {\n        const transition = this.visitTransition(def, context);\n        queryCount += transition.queryCount;\n        depCount += transition.depCount;\n        transitions.push(transition);\n      } else {\n        context.errors.push(invalidDefinition());\n      }\n    });\n    return {\n      type: AnimationMetadataType.Trigger,\n      name: metadata.name,\n      states,\n      transitions,\n      queryCount,\n      depCount,\n      options: null\n    };\n  }\n  visitState(metadata, context) {\n    const styleAst = this.visitStyle(metadata.styles, context);\n    const astParams = metadata.options && metadata.options.params || null;\n    if (styleAst.containsDynamicStyles) {\n      const missingSubs = new Set();\n      const params = astParams || {};\n      styleAst.styles.forEach(style => {\n        if (style instanceof Map) {\n          style.forEach(value => {\n            extractStyleParams(value).forEach(sub => {\n              if (!params.hasOwnProperty(sub)) {\n                missingSubs.add(sub);\n              }\n            });\n          });\n        }\n      });\n      if (missingSubs.size) {\n        context.errors.push(invalidState(metadata.name, [...missingSubs.values()]));\n      }\n    }\n    return {\n      type: AnimationMetadataType.State,\n      name: metadata.name,\n      style: styleAst,\n      options: astParams ? {\n        params: astParams\n      } : null\n    };\n  }\n  visitTransition(metadata, context) {\n    context.queryCount = 0;\n    context.depCount = 0;\n    const animation = visitDslNode(this, normalizeAnimationEntry(metadata.animation), context);\n    const matchers = parseTransitionExpr(metadata.expr, context.errors);\n    return {\n      type: AnimationMetadataType.Transition,\n      matchers,\n      animation,\n      queryCount: context.queryCount,\n      depCount: context.depCount,\n      options: normalizeAnimationOptions(metadata.options)\n    };\n  }\n  visitSequence(metadata, context) {\n    return {\n      type: AnimationMetadataType.Sequence,\n      steps: metadata.steps.map(s => visitDslNode(this, s, context)),\n      options: normalizeAnimationOptions(metadata.options)\n    };\n  }\n  visitGroup(metadata, context) {\n    const currentTime = context.currentTime;\n    let furthestTime = 0;\n    const steps = metadata.steps.map(step => {\n      context.currentTime = currentTime;\n      const innerAst = visitDslNode(this, step, context);\n      furthestTime = Math.max(furthestTime, context.currentTime);\n      return innerAst;\n    });\n    context.currentTime = furthestTime;\n    return {\n      type: AnimationMetadataType.Group,\n      steps,\n      options: normalizeAnimationOptions(metadata.options)\n    };\n  }\n  visitAnimate(metadata, context) {\n    const timingAst = constructTimingAst(metadata.timings, context.errors);\n    context.currentAnimateTimings = timingAst;\n    let styleAst;\n    let styleMetadata = metadata.styles ? metadata.styles : style({});\n    if (styleMetadata.type == AnimationMetadataType.Keyframes) {\n      styleAst = this.visitKeyframes(styleMetadata, context);\n    } else {\n      let styleMetadata = metadata.styles;\n      let isEmpty = false;\n      if (!styleMetadata) {\n        isEmpty = true;\n        const newStyleData = {};\n        if (timingAst.easing) {\n          newStyleData['easing'] = timingAst.easing;\n        }\n        styleMetadata = style(newStyleData);\n      }\n      context.currentTime += timingAst.duration + timingAst.delay;\n      const _styleAst = this.visitStyle(styleMetadata, context);\n      _styleAst.isEmptyStep = isEmpty;\n      styleAst = _styleAst;\n    }\n    context.currentAnimateTimings = null;\n    return {\n      type: AnimationMetadataType.Animate,\n      timings: timingAst,\n      style: styleAst,\n      options: null\n    };\n  }\n  visitStyle(metadata, context) {\n    const ast = this._makeStyleAst(metadata, context);\n    this._validateStyleAst(ast, context);\n    return ast;\n  }\n  _makeStyleAst(metadata, context) {\n    const styles = [];\n    const metadataStyles = Array.isArray(metadata.styles) ? metadata.styles : [metadata.styles];\n    for (let styleTuple of metadataStyles) {\n      if (typeof styleTuple === 'string') {\n        if (styleTuple === AUTO_STYLE) {\n          styles.push(styleTuple);\n        } else {\n          context.errors.push(invalidStyleValue(styleTuple));\n        }\n      } else {\n        styles.push(new Map(Object.entries(styleTuple)));\n      }\n    }\n    let containsDynamicStyles = false;\n    let collectedEasing = null;\n    styles.forEach(styleData => {\n      if (styleData instanceof Map) {\n        if (styleData.has('easing')) {\n          collectedEasing = styleData.get('easing');\n          styleData.delete('easing');\n        }\n        if (!containsDynamicStyles) {\n          for (let value of styleData.values()) {\n            if (value.toString().indexOf(SUBSTITUTION_EXPR_START) >= 0) {\n              containsDynamicStyles = true;\n              break;\n            }\n          }\n        }\n      }\n    });\n    return {\n      type: AnimationMetadataType.Style,\n      styles,\n      easing: collectedEasing,\n      offset: metadata.offset,\n      containsDynamicStyles,\n      options: null\n    };\n  }\n  _validateStyleAst(ast, context) {\n    const timings = context.currentAnimateTimings;\n    let endTime = context.currentTime;\n    let startTime = context.currentTime;\n    if (timings && startTime > 0) {\n      startTime -= timings.duration + timings.delay;\n    }\n    ast.styles.forEach(tuple => {\n      if (typeof tuple === 'string') return;\n      tuple.forEach((value, prop) => {\n        if (typeof ngDevMode === 'undefined' || ngDevMode) {\n          if (!this._driver.validateStyleProperty(prop)) {\n            tuple.delete(prop);\n            context.unsupportedCSSPropertiesFound.add(prop);\n            return;\n          }\n        }\n        // This is guaranteed to have a defined Map at this querySelector location making it\n        // safe to add the assertion here. It is set as a default empty map in prior methods.\n        const collectedStyles = context.collectedStyles.get(context.currentQuerySelector);\n        const collectedEntry = collectedStyles.get(prop);\n        let updateCollectedStyle = true;\n        if (collectedEntry) {\n          if (startTime != endTime && startTime >= collectedEntry.startTime && endTime <= collectedEntry.endTime) {\n            context.errors.push(invalidParallelAnimation(prop, collectedEntry.startTime, collectedEntry.endTime, startTime, endTime));\n            updateCollectedStyle = false;\n          }\n          // we always choose the smaller start time value since we\n          // want to have a record of the entire animation window where\n          // the style property is being animated in between\n          startTime = collectedEntry.startTime;\n        }\n        if (updateCollectedStyle) {\n          collectedStyles.set(prop, {\n            startTime,\n            endTime\n          });\n        }\n        if (context.options) {\n          validateStyleParams(value, context.options, context.errors);\n        }\n      });\n    });\n  }\n  visitKeyframes(metadata, context) {\n    const ast = {\n      type: AnimationMetadataType.Keyframes,\n      styles: [],\n      options: null\n    };\n    if (!context.currentAnimateTimings) {\n      context.errors.push(invalidKeyframes());\n      return ast;\n    }\n    const MAX_KEYFRAME_OFFSET = 1;\n    let totalKeyframesWithOffsets = 0;\n    const offsets = [];\n    let offsetsOutOfOrder = false;\n    let keyframesOutOfRange = false;\n    let previousOffset = 0;\n    const keyframes = metadata.steps.map(styles => {\n      const style = this._makeStyleAst(styles, context);\n      let offsetVal = style.offset != null ? style.offset : consumeOffset(style.styles);\n      let offset = 0;\n      if (offsetVal != null) {\n        totalKeyframesWithOffsets++;\n        offset = style.offset = offsetVal;\n      }\n      keyframesOutOfRange = keyframesOutOfRange || offset < 0 || offset > 1;\n      offsetsOutOfOrder = offsetsOutOfOrder || offset < previousOffset;\n      previousOffset = offset;\n      offsets.push(offset);\n      return style;\n    });\n    if (keyframesOutOfRange) {\n      context.errors.push(invalidOffset());\n    }\n    if (offsetsOutOfOrder) {\n      context.errors.push(keyframeOffsetsOutOfOrder());\n    }\n    const length = metadata.steps.length;\n    let generatedOffset = 0;\n    if (totalKeyframesWithOffsets > 0 && totalKeyframesWithOffsets < length) {\n      context.errors.push(keyframesMissingOffsets());\n    } else if (totalKeyframesWithOffsets == 0) {\n      generatedOffset = MAX_KEYFRAME_OFFSET / (length - 1);\n    }\n    const limit = length - 1;\n    const currentTime = context.currentTime;\n    const currentAnimateTimings = context.currentAnimateTimings;\n    const animateDuration = currentAnimateTimings.duration;\n    keyframes.forEach((kf, i) => {\n      const offset = generatedOffset > 0 ? i == limit ? 1 : generatedOffset * i : offsets[i];\n      const durationUpToThisFrame = offset * animateDuration;\n      context.currentTime = currentTime + currentAnimateTimings.delay + durationUpToThisFrame;\n      currentAnimateTimings.duration = durationUpToThisFrame;\n      this._validateStyleAst(kf, context);\n      kf.offset = offset;\n      ast.styles.push(kf);\n    });\n    return ast;\n  }\n  visitReference(metadata, context) {\n    return {\n      type: AnimationMetadataType.Reference,\n      animation: visitDslNode(this, normalizeAnimationEntry(metadata.animation), context),\n      options: normalizeAnimationOptions(metadata.options)\n    };\n  }\n  visitAnimateChild(metadata, context) {\n    context.depCount++;\n    return {\n      type: AnimationMetadataType.AnimateChild,\n      options: normalizeAnimationOptions(metadata.options)\n    };\n  }\n  visitAnimateRef(metadata, context) {\n    return {\n      type: AnimationMetadataType.AnimateRef,\n      animation: this.visitReference(metadata.animation, context),\n      options: normalizeAnimationOptions(metadata.options)\n    };\n  }\n  visitQuery(metadata, context) {\n    const parentSelector = context.currentQuerySelector;\n    const options = metadata.options || {};\n    context.queryCount++;\n    context.currentQuery = metadata;\n    const [selector, includeSelf] = normalizeSelector(metadata.selector);\n    context.currentQuerySelector = parentSelector.length ? parentSelector + ' ' + selector : selector;\n    getOrSetDefaultValue(context.collectedStyles, context.currentQuerySelector, new Map());\n    const animation = visitDslNode(this, normalizeAnimationEntry(metadata.animation), context);\n    context.currentQuery = null;\n    context.currentQuerySelector = parentSelector;\n    return {\n      type: AnimationMetadataType.Query,\n      selector,\n      limit: options.limit || 0,\n      optional: !!options.optional,\n      includeSelf,\n      animation,\n      originalSelector: metadata.selector,\n      options: normalizeAnimationOptions(metadata.options)\n    };\n  }\n  visitStagger(metadata, context) {\n    if (!context.currentQuery) {\n      context.errors.push(invalidStagger());\n    }\n    const timings = metadata.timings === 'full' ? {\n      duration: 0,\n      delay: 0,\n      easing: 'full'\n    } : resolveTiming(metadata.timings, context.errors, true);\n    return {\n      type: AnimationMetadataType.Stagger,\n      animation: visitDslNode(this, normalizeAnimationEntry(metadata.animation), context),\n      timings,\n      options: null\n    };\n  }\n}\nfunction normalizeSelector(selector) {\n  const hasAmpersand = selector.split(/\\s*,\\s*/).find(token => token == SELF_TOKEN) ? true : false;\n  if (hasAmpersand) {\n    selector = selector.replace(SELF_TOKEN_REGEX, '');\n  }\n  // Note: the :enter and :leave aren't normalized here since those\n  // selectors are filled in at runtime during timeline building\n  selector = selector.replace(/@\\*/g, NG_TRIGGER_SELECTOR).replace(/@\\w+/g, match => NG_TRIGGER_SELECTOR + '-' + match.slice(1)).replace(/:animating/g, NG_ANIMATING_SELECTOR);\n  return [selector, hasAmpersand];\n}\nfunction normalizeParams(obj) {\n  return obj ? {\n    ...obj\n  } : null;\n}\nclass AnimationAstBuilderContext {\n  constructor(errors) {\n    this.errors = errors;\n    this.queryCount = 0;\n    this.depCount = 0;\n    this.currentTransition = null;\n    this.currentQuery = null;\n    this.currentQuerySelector = null;\n    this.currentAnimateTimings = null;\n    this.currentTime = 0;\n    this.collectedStyles = new Map();\n    this.options = null;\n    this.unsupportedCSSPropertiesFound = new Set();\n  }\n}\nfunction consumeOffset(styles) {\n  if (typeof styles == 'string') return null;\n  let offset = null;\n  if (Array.isArray(styles)) {\n    styles.forEach(styleTuple => {\n      if (styleTuple instanceof Map && styleTuple.has('offset')) {\n        const obj = styleTuple;\n        offset = parseFloat(obj.get('offset'));\n        obj.delete('offset');\n      }\n    });\n  } else if (styles instanceof Map && styles.has('offset')) {\n    const obj = styles;\n    offset = parseFloat(obj.get('offset'));\n    obj.delete('offset');\n  }\n  return offset;\n}\nfunction constructTimingAst(value, errors) {\n  if (value.hasOwnProperty('duration')) {\n    return value;\n  }\n  if (typeof value == 'number') {\n    const duration = resolveTiming(value, errors).duration;\n    return makeTimingAst(duration, 0, '');\n  }\n  const strValue = value;\n  const isDynamic = strValue.split(/\\s+/).some(v => v.charAt(0) == '{' && v.charAt(1) == '{');\n  if (isDynamic) {\n    const ast = makeTimingAst(0, 0, '');\n    ast.dynamic = true;\n    ast.strValue = strValue;\n    return ast;\n  }\n  const timings = resolveTiming(strValue, errors);\n  return makeTimingAst(timings.duration, timings.delay, timings.easing);\n}\nfunction normalizeAnimationOptions(options) {\n  if (options) {\n    options = {\n      ...options\n    };\n    if (options['params']) {\n      options['params'] = normalizeParams(options['params']);\n    }\n  } else {\n    options = {};\n  }\n  return options;\n}\nfunction makeTimingAst(duration, delay, easing) {\n  return {\n    duration,\n    delay,\n    easing\n  };\n}\nfunction createTimelineInstruction(element, keyframes, preStyleProps, postStyleProps, duration, delay, easing = null, subTimeline = false) {\n  return {\n    type: 1 /* AnimationTransitionInstructionType.TimelineAnimation */,\n    element,\n    keyframes,\n    preStyleProps,\n    postStyleProps,\n    duration,\n    delay,\n    totalTime: duration + delay,\n    easing,\n    subTimeline\n  };\n}\nclass ElementInstructionMap {\n  constructor() {\n    this._map = new Map();\n  }\n  get(element) {\n    return this._map.get(element) || [];\n  }\n  append(element, instructions) {\n    let existingInstructions = this._map.get(element);\n    if (!existingInstructions) {\n      this._map.set(element, existingInstructions = []);\n    }\n    existingInstructions.push(...instructions);\n  }\n  has(element) {\n    return this._map.has(element);\n  }\n  clear() {\n    this._map.clear();\n  }\n}\nconst ONE_FRAME_IN_MILLISECONDS = 1;\nconst ENTER_TOKEN = ':enter';\nconst ENTER_TOKEN_REGEX = new RegExp(ENTER_TOKEN, 'g');\nconst LEAVE_TOKEN = ':leave';\nconst LEAVE_TOKEN_REGEX = new RegExp(LEAVE_TOKEN, 'g');\n/*\n * The code within this file aims to generate web-animations-compatible keyframes from Angular's\n * animation DSL code.\n *\n * The code below will be converted from:\n *\n * ```\n * sequence([\n *   style({ opacity: 0 }),\n *   animate(1000, style({ opacity: 0 }))\n * ])\n * ```\n *\n * To:\n * ```\n * keyframes = [{ opacity: 0, offset: 0 }, { opacity: 1, offset: 1 }]\n * duration = 1000\n * delay = 0\n * easing = ''\n * ```\n *\n * For this operation to cover the combination of animation verbs (style, animate, group, etc...) a\n * combination of AST traversal and merge-sort-like algorithms are used.\n *\n * [AST Traversal]\n * Each of the animation verbs, when executed, will return an string-map object representing what\n * type of action it is (style, animate, group, etc...) and the data associated with it. This means\n * that when functional composition mix of these functions is evaluated (like in the example above)\n * then it will end up producing a tree of objects representing the animation itself.\n *\n * When this animation object tree is processed by the visitor code below it will visit each of the\n * verb statements within the visitor. And during each visit it will build the context of the\n * animation keyframes by interacting with the `TimelineBuilder`.\n *\n * [TimelineBuilder]\n * This class is responsible for tracking the styles and building a series of keyframe objects for a\n * timeline between a start and end time. The builder starts off with an initial timeline and each\n * time the AST comes across a `group()`, `keyframes()` or a combination of the two within a\n * `sequence()` then it will generate a sub timeline for each step as well as a new one after\n * they are complete.\n *\n * As the AST is traversed, the timing state on each of the timelines will be incremented. If a sub\n * timeline was created (based on one of the cases above) then the parent timeline will attempt to\n * merge the styles used within the sub timelines into itself (only with group() this will happen).\n * This happens with a merge operation (much like how the merge works in mergeSort) and it will only\n * copy the most recently used styles from the sub timelines into the parent timeline. This ensures\n * that if the styles are used later on in another phase of the animation then they will be the most\n * up-to-date values.\n *\n * [How Missing Styles Are Updated]\n * Each timeline has a `backFill` property which is responsible for filling in new styles into\n * already processed keyframes if a new style shows up later within the animation sequence.\n *\n * ```\n * sequence([\n *   style({ width: 0 }),\n *   animate(1000, style({ width: 100 })),\n *   animate(1000, style({ width: 200 })),\n *   animate(1000, style({ width: 300 }))\n *   animate(1000, style({ width: 400, height: 400 })) // notice how `height` doesn't exist anywhere\n * else\n * ])\n * ```\n *\n * What is happening here is that the `height` value is added later in the sequence, but is missing\n * from all previous animation steps. Therefore when a keyframe is created it would also be missing\n * from all previous keyframes up until where it is first used. For the timeline keyframe generation\n * to properly fill in the style it will place the previous value (the value from the parent\n * timeline) or a default value of `*` into the backFill map.\n *\n * When a sub-timeline is created it will have its own backFill property. This is done so that\n * styles present within the sub-timeline do not accidentally seep into the previous/future timeline\n * keyframes\n *\n * [Validation]\n * The code in this file is not responsible for validation. That functionality happens with within\n * the `AnimationValidatorVisitor` code.\n */\nfunction buildAnimationTimelines(driver, rootElement, ast, enterClassName, leaveClassName, startingStyles = new Map(), finalStyles = new Map(), options, subInstructions, errors = []) {\n  return new AnimationTimelineBuilderVisitor().buildKeyframes(driver, rootElement, ast, enterClassName, leaveClassName, startingStyles, finalStyles, options, subInstructions, errors);\n}\nclass AnimationTimelineBuilderVisitor {\n  buildKeyframes(driver, rootElement, ast, enterClassName, leaveClassName, startingStyles, finalStyles, options, subInstructions, errors = []) {\n    subInstructions = subInstructions || new ElementInstructionMap();\n    const context = new AnimationTimelineContext(driver, rootElement, subInstructions, enterClassName, leaveClassName, errors, []);\n    context.options = options;\n    const delay = options.delay ? resolveTimingValue(options.delay) : 0;\n    context.currentTimeline.delayNextStep(delay);\n    context.currentTimeline.setStyles([startingStyles], null, context.errors, options);\n    visitDslNode(this, ast, context);\n    // this checks to see if an actual animation happened\n    const timelines = context.timelines.filter(timeline => timeline.containsAnimation());\n    // note: we just want to apply the final styles for the rootElement, so we do not\n    //       just apply the styles to the last timeline but the last timeline which\n    //       element is the root one (basically `*`-styles are replaced with the actual\n    //       state style values only for the root element)\n    if (timelines.length && finalStyles.size) {\n      let lastRootTimeline;\n      for (let i = timelines.length - 1; i >= 0; i--) {\n        const timeline = timelines[i];\n        if (timeline.element === rootElement) {\n          lastRootTimeline = timeline;\n          break;\n        }\n      }\n      if (lastRootTimeline && !lastRootTimeline.allowOnlyTimelineStyles()) {\n        lastRootTimeline.setStyles([finalStyles], null, context.errors, options);\n      }\n    }\n    return timelines.length ? timelines.map(timeline => timeline.buildKeyframes()) : [createTimelineInstruction(rootElement, [], [], [], 0, delay, '', false)];\n  }\n  visitTrigger(ast, context) {\n    // these values are not visited in this AST\n  }\n  visitState(ast, context) {\n    // these values are not visited in this AST\n  }\n  visitTransition(ast, context) {\n    // these values are not visited in this AST\n  }\n  visitAnimateChild(ast, context) {\n    const elementInstructions = context.subInstructions.get(context.element);\n    if (elementInstructions) {\n      const innerContext = context.createSubContext(ast.options);\n      const startTime = context.currentTimeline.currentTime;\n      const endTime = this._visitSubInstructions(elementInstructions, innerContext, innerContext.options);\n      if (startTime != endTime) {\n        // we do this on the upper context because we created a sub context for\n        // the sub child animations\n        context.transformIntoNewTimeline(endTime);\n      }\n    }\n    context.previousNode = ast;\n  }\n  visitAnimateRef(ast, context) {\n    const innerContext = context.createSubContext(ast.options);\n    innerContext.transformIntoNewTimeline();\n    this._applyAnimationRefDelays([ast.options, ast.animation.options], context, innerContext);\n    this.visitReference(ast.animation, innerContext);\n    context.transformIntoNewTimeline(innerContext.currentTimeline.currentTime);\n    context.previousNode = ast;\n  }\n  _applyAnimationRefDelays(animationsRefsOptions, context, innerContext) {\n    for (const animationRefOptions of animationsRefsOptions) {\n      const animationDelay = animationRefOptions?.delay;\n      if (animationDelay) {\n        const animationDelayValue = typeof animationDelay === 'number' ? animationDelay : resolveTimingValue(interpolateParams(animationDelay, animationRefOptions?.params ?? {}, context.errors));\n        innerContext.delayNextStep(animationDelayValue);\n      }\n    }\n  }\n  _visitSubInstructions(instructions, context, options) {\n    const startTime = context.currentTimeline.currentTime;\n    let furthestTime = startTime;\n    // this is a special-case for when a user wants to skip a sub\n    // animation from being fired entirely.\n    const duration = options.duration != null ? resolveTimingValue(options.duration) : null;\n    const delay = options.delay != null ? resolveTimingValue(options.delay) : null;\n    if (duration !== 0) {\n      instructions.forEach(instruction => {\n        const instructionTimings = context.appendInstructionToTimeline(instruction, duration, delay);\n        furthestTime = Math.max(furthestTime, instructionTimings.duration + instructionTimings.delay);\n      });\n    }\n    return furthestTime;\n  }\n  visitReference(ast, context) {\n    context.updateOptions(ast.options, true);\n    visitDslNode(this, ast.animation, context);\n    context.previousNode = ast;\n  }\n  visitSequence(ast, context) {\n    const subContextCount = context.subContextCount;\n    let ctx = context;\n    const options = ast.options;\n    if (options && (options.params || options.delay)) {\n      ctx = context.createSubContext(options);\n      ctx.transformIntoNewTimeline();\n      if (options.delay != null) {\n        if (ctx.previousNode.type == AnimationMetadataType.Style) {\n          ctx.currentTimeline.snapshotCurrentStyles();\n          ctx.previousNode = DEFAULT_NOOP_PREVIOUS_NODE;\n        }\n        const delay = resolveTimingValue(options.delay);\n        ctx.delayNextStep(delay);\n      }\n    }\n    if (ast.steps.length) {\n      ast.steps.forEach(s => visitDslNode(this, s, ctx));\n      // this is here just in case the inner steps only contain or end with a style() call\n      ctx.currentTimeline.applyStylesToKeyframe();\n      // this means that some animation function within the sequence\n      // ended up creating a sub timeline (which means the current\n      // timeline cannot overlap with the contents of the sequence)\n      if (ctx.subContextCount > subContextCount) {\n        ctx.transformIntoNewTimeline();\n      }\n    }\n    context.previousNode = ast;\n  }\n  visitGroup(ast, context) {\n    const innerTimelines = [];\n    let furthestTime = context.currentTimeline.currentTime;\n    const delay = ast.options && ast.options.delay ? resolveTimingValue(ast.options.delay) : 0;\n    ast.steps.forEach(s => {\n      const innerContext = context.createSubContext(ast.options);\n      if (delay) {\n        innerContext.delayNextStep(delay);\n      }\n      visitDslNode(this, s, innerContext);\n      furthestTime = Math.max(furthestTime, innerContext.currentTimeline.currentTime);\n      innerTimelines.push(innerContext.currentTimeline);\n    });\n    // this operation is run after the AST loop because otherwise\n    // if the parent timeline's collected styles were updated then\n    // it would pass in invalid data into the new-to-be forked items\n    innerTimelines.forEach(timeline => context.currentTimeline.mergeTimelineCollectedStyles(timeline));\n    context.transformIntoNewTimeline(furthestTime);\n    context.previousNode = ast;\n  }\n  _visitTiming(ast, context) {\n    if (ast.dynamic) {\n      const strValue = ast.strValue;\n      const timingValue = context.params ? interpolateParams(strValue, context.params, context.errors) : strValue;\n      return resolveTiming(timingValue, context.errors);\n    } else {\n      return {\n        duration: ast.duration,\n        delay: ast.delay,\n        easing: ast.easing\n      };\n    }\n  }\n  visitAnimate(ast, context) {\n    const timings = context.currentAnimateTimings = this._visitTiming(ast.timings, context);\n    const timeline = context.currentTimeline;\n    if (timings.delay) {\n      context.incrementTime(timings.delay);\n      timeline.snapshotCurrentStyles();\n    }\n    const style = ast.style;\n    if (style.type == AnimationMetadataType.Keyframes) {\n      this.visitKeyframes(style, context);\n    } else {\n      context.incrementTime(timings.duration);\n      this.visitStyle(style, context);\n      timeline.applyStylesToKeyframe();\n    }\n    context.currentAnimateTimings = null;\n    context.previousNode = ast;\n  }\n  visitStyle(ast, context) {\n    const timeline = context.currentTimeline;\n    const timings = context.currentAnimateTimings;\n    // this is a special case for when a style() call\n    // directly follows  an animate() call (but not inside of an animate() call)\n    if (!timings && timeline.hasCurrentStyleProperties()) {\n      timeline.forwardFrame();\n    }\n    const easing = timings && timings.easing || ast.easing;\n    if (ast.isEmptyStep) {\n      timeline.applyEmptyStep(easing);\n    } else {\n      timeline.setStyles(ast.styles, easing, context.errors, context.options);\n    }\n    context.previousNode = ast;\n  }\n  visitKeyframes(ast, context) {\n    const currentAnimateTimings = context.currentAnimateTimings;\n    const startTime = context.currentTimeline.duration;\n    const duration = currentAnimateTimings.duration;\n    const innerContext = context.createSubContext();\n    const innerTimeline = innerContext.currentTimeline;\n    innerTimeline.easing = currentAnimateTimings.easing;\n    ast.styles.forEach(step => {\n      const offset = step.offset || 0;\n      innerTimeline.forwardTime(offset * duration);\n      innerTimeline.setStyles(step.styles, step.easing, context.errors, context.options);\n      innerTimeline.applyStylesToKeyframe();\n    });\n    // this will ensure that the parent timeline gets all the styles from\n    // the child even if the new timeline below is not used\n    context.currentTimeline.mergeTimelineCollectedStyles(innerTimeline);\n    // we do this because the window between this timeline and the sub timeline\n    // should ensure that the styles within are exactly the same as they were before\n    context.transformIntoNewTimeline(startTime + duration);\n    context.previousNode = ast;\n  }\n  visitQuery(ast, context) {\n    // in the event that the first step before this is a style step we need\n    // to ensure the styles are applied before the children are animated\n    const startTime = context.currentTimeline.currentTime;\n    const options = ast.options || {};\n    const delay = options.delay ? resolveTimingValue(options.delay) : 0;\n    if (delay && (context.previousNode.type === AnimationMetadataType.Style || startTime == 0 && context.currentTimeline.hasCurrentStyleProperties())) {\n      context.currentTimeline.snapshotCurrentStyles();\n      context.previousNode = DEFAULT_NOOP_PREVIOUS_NODE;\n    }\n    let furthestTime = startTime;\n    const elms = context.invokeQuery(ast.selector, ast.originalSelector, ast.limit, ast.includeSelf, options.optional ? true : false, context.errors);\n    context.currentQueryTotal = elms.length;\n    let sameElementTimeline = null;\n    elms.forEach((element, i) => {\n      context.currentQueryIndex = i;\n      const innerContext = context.createSubContext(ast.options, element);\n      if (delay) {\n        innerContext.delayNextStep(delay);\n      }\n      if (element === context.element) {\n        sameElementTimeline = innerContext.currentTimeline;\n      }\n      visitDslNode(this, ast.animation, innerContext);\n      // this is here just incase the inner steps only contain or end\n      // with a style() call (which is here to signal that this is a preparatory\n      // call to style an element before it is animated again)\n      innerContext.currentTimeline.applyStylesToKeyframe();\n      const endTime = innerContext.currentTimeline.currentTime;\n      furthestTime = Math.max(furthestTime, endTime);\n    });\n    context.currentQueryIndex = 0;\n    context.currentQueryTotal = 0;\n    context.transformIntoNewTimeline(furthestTime);\n    if (sameElementTimeline) {\n      context.currentTimeline.mergeTimelineCollectedStyles(sameElementTimeline);\n      context.currentTimeline.snapshotCurrentStyles();\n    }\n    context.previousNode = ast;\n  }\n  visitStagger(ast, context) {\n    const parentContext = context.parentContext;\n    const tl = context.currentTimeline;\n    const timings = ast.timings;\n    const duration = Math.abs(timings.duration);\n    const maxTime = duration * (context.currentQueryTotal - 1);\n    let delay = duration * context.currentQueryIndex;\n    let staggerTransformer = timings.duration < 0 ? 'reverse' : timings.easing;\n    switch (staggerTransformer) {\n      case 'reverse':\n        delay = maxTime - delay;\n        break;\n      case 'full':\n        delay = parentContext.currentStaggerTime;\n        break;\n    }\n    const timeline = context.currentTimeline;\n    if (delay) {\n      timeline.delayNextStep(delay);\n    }\n    const startingTime = timeline.currentTime;\n    visitDslNode(this, ast.animation, context);\n    context.previousNode = ast;\n    // time = duration + delay\n    // the reason why this computation is so complex is because\n    // the inner timeline may either have a delay value or a stretched\n    // keyframe depending on if a subtimeline is not used or is used.\n    parentContext.currentStaggerTime = tl.currentTime - startingTime + (tl.startTime - parentContext.currentTimeline.startTime);\n  }\n}\nconst DEFAULT_NOOP_PREVIOUS_NODE = {};\nclass AnimationTimelineContext {\n  constructor(_driver, element, subInstructions, _enterClassName, _leaveClassName, errors, timelines, initialTimeline) {\n    this._driver = _driver;\n    this.element = element;\n    this.subInstructions = subInstructions;\n    this._enterClassName = _enterClassName;\n    this._leaveClassName = _leaveClassName;\n    this.errors = errors;\n    this.timelines = timelines;\n    this.parentContext = null;\n    this.currentAnimateTimings = null;\n    this.previousNode = DEFAULT_NOOP_PREVIOUS_NODE;\n    this.subContextCount = 0;\n    this.options = {};\n    this.currentQueryIndex = 0;\n    this.currentQueryTotal = 0;\n    this.currentStaggerTime = 0;\n    this.currentTimeline = initialTimeline || new TimelineBuilder(this._driver, element, 0);\n    timelines.push(this.currentTimeline);\n  }\n  get params() {\n    return this.options.params;\n  }\n  updateOptions(options, skipIfExists) {\n    if (!options) return;\n    const newOptions = options;\n    let optionsToUpdate = this.options;\n    // NOTE: this will get patched up when other animation methods support duration overrides\n    if (newOptions.duration != null) {\n      optionsToUpdate.duration = resolveTimingValue(newOptions.duration);\n    }\n    if (newOptions.delay != null) {\n      optionsToUpdate.delay = resolveTimingValue(newOptions.delay);\n    }\n    const newParams = newOptions.params;\n    if (newParams) {\n      let paramsToUpdate = optionsToUpdate.params;\n      if (!paramsToUpdate) {\n        paramsToUpdate = this.options.params = {};\n      }\n      Object.keys(newParams).forEach(name => {\n        if (!skipIfExists || !paramsToUpdate.hasOwnProperty(name)) {\n          paramsToUpdate[name] = interpolateParams(newParams[name], paramsToUpdate, this.errors);\n        }\n      });\n    }\n  }\n  _copyOptions() {\n    const options = {};\n    if (this.options) {\n      const oldParams = this.options.params;\n      if (oldParams) {\n        const params = options['params'] = {};\n        Object.keys(oldParams).forEach(name => {\n          params[name] = oldParams[name];\n        });\n      }\n    }\n    return options;\n  }\n  createSubContext(options = null, element, newTime) {\n    const target = element || this.element;\n    const context = new AnimationTimelineContext(this._driver, target, this.subInstructions, this._enterClassName, this._leaveClassName, this.errors, this.timelines, this.currentTimeline.fork(target, newTime || 0));\n    context.previousNode = this.previousNode;\n    context.currentAnimateTimings = this.currentAnimateTimings;\n    context.options = this._copyOptions();\n    context.updateOptions(options);\n    context.currentQueryIndex = this.currentQueryIndex;\n    context.currentQueryTotal = this.currentQueryTotal;\n    context.parentContext = this;\n    this.subContextCount++;\n    return context;\n  }\n  transformIntoNewTimeline(newTime) {\n    this.previousNode = DEFAULT_NOOP_PREVIOUS_NODE;\n    this.currentTimeline = this.currentTimeline.fork(this.element, newTime);\n    this.timelines.push(this.currentTimeline);\n    return this.currentTimeline;\n  }\n  appendInstructionToTimeline(instruction, duration, delay) {\n    const updatedTimings = {\n      duration: duration != null ? duration : instruction.duration,\n      delay: this.currentTimeline.currentTime + (delay != null ? delay : 0) + instruction.delay,\n      easing: ''\n    };\n    const builder = new SubTimelineBuilder(this._driver, instruction.element, instruction.keyframes, instruction.preStyleProps, instruction.postStyleProps, updatedTimings, instruction.stretchStartingKeyframe);\n    this.timelines.push(builder);\n    return updatedTimings;\n  }\n  incrementTime(time) {\n    this.currentTimeline.forwardTime(this.currentTimeline.duration + time);\n  }\n  delayNextStep(delay) {\n    // negative delays are not yet supported\n    if (delay > 0) {\n      this.currentTimeline.delayNextStep(delay);\n    }\n  }\n  invokeQuery(selector, originalSelector, limit, includeSelf, optional, errors) {\n    let results = [];\n    if (includeSelf) {\n      results.push(this.element);\n    }\n    if (selector.length > 0) {\n      // only if :self is used then the selector can be empty\n      selector = selector.replace(ENTER_TOKEN_REGEX, '.' + this._enterClassName);\n      selector = selector.replace(LEAVE_TOKEN_REGEX, '.' + this._leaveClassName);\n      const multi = limit != 1;\n      let elements = this._driver.query(this.element, selector, multi);\n      if (limit !== 0) {\n        elements = limit < 0 ? elements.slice(elements.length + limit, elements.length) : elements.slice(0, limit);\n      }\n      results.push(...elements);\n    }\n    if (!optional && results.length == 0) {\n      errors.push(invalidQuery(originalSelector));\n    }\n    return results;\n  }\n}\nclass TimelineBuilder {\n  constructor(_driver, element, startTime, _elementTimelineStylesLookup) {\n    this._driver = _driver;\n    this.element = element;\n    this.startTime = startTime;\n    this._elementTimelineStylesLookup = _elementTimelineStylesLookup;\n    this.duration = 0;\n    this.easing = null;\n    this._previousKeyframe = new Map();\n    this._currentKeyframe = new Map();\n    this._keyframes = new Map();\n    this._styleSummary = new Map();\n    this._localTimelineStyles = new Map();\n    this._pendingStyles = new Map();\n    this._backFill = new Map();\n    this._currentEmptyStepKeyframe = null;\n    if (!this._elementTimelineStylesLookup) {\n      this._elementTimelineStylesLookup = new Map();\n    }\n    this._globalTimelineStyles = this._elementTimelineStylesLookup.get(element);\n    if (!this._globalTimelineStyles) {\n      this._globalTimelineStyles = this._localTimelineStyles;\n      this._elementTimelineStylesLookup.set(element, this._localTimelineStyles);\n    }\n    this._loadKeyframe();\n  }\n  containsAnimation() {\n    switch (this._keyframes.size) {\n      case 0:\n        return false;\n      case 1:\n        return this.hasCurrentStyleProperties();\n      default:\n        return true;\n    }\n  }\n  hasCurrentStyleProperties() {\n    return this._currentKeyframe.size > 0;\n  }\n  get currentTime() {\n    return this.startTime + this.duration;\n  }\n  delayNextStep(delay) {\n    // in the event that a style() step is placed right before a stagger()\n    // and that style() step is the very first style() value in the animation\n    // then we need to make a copy of the keyframe [0, copy, 1] so that the delay\n    // properly applies the style() values to work with the stagger...\n    const hasPreStyleStep = this._keyframes.size === 1 && this._pendingStyles.size;\n    if (this.duration || hasPreStyleStep) {\n      this.forwardTime(this.currentTime + delay);\n      if (hasPreStyleStep) {\n        this.snapshotCurrentStyles();\n      }\n    } else {\n      this.startTime += delay;\n    }\n  }\n  fork(element, currentTime) {\n    this.applyStylesToKeyframe();\n    return new TimelineBuilder(this._driver, element, currentTime || this.currentTime, this._elementTimelineStylesLookup);\n  }\n  _loadKeyframe() {\n    if (this._currentKeyframe) {\n      this._previousKeyframe = this._currentKeyframe;\n    }\n    this._currentKeyframe = this._keyframes.get(this.duration);\n    if (!this._currentKeyframe) {\n      this._currentKeyframe = new Map();\n      this._keyframes.set(this.duration, this._currentKeyframe);\n    }\n  }\n  forwardFrame() {\n    this.duration += ONE_FRAME_IN_MILLISECONDS;\n    this._loadKeyframe();\n  }\n  forwardTime(time) {\n    this.applyStylesToKeyframe();\n    this.duration = time;\n    this._loadKeyframe();\n  }\n  _updateStyle(prop, value) {\n    this._localTimelineStyles.set(prop, value);\n    this._globalTimelineStyles.set(prop, value);\n    this._styleSummary.set(prop, {\n      time: this.currentTime,\n      value\n    });\n  }\n  allowOnlyTimelineStyles() {\n    return this._currentEmptyStepKeyframe !== this._currentKeyframe;\n  }\n  applyEmptyStep(easing) {\n    if (easing) {\n      this._previousKeyframe.set('easing', easing);\n    }\n    // special case for animate(duration):\n    // all missing styles are filled with a `*` value then\n    // if any destination styles are filled in later on the same\n    // keyframe then they will override the overridden styles\n    // We use `_globalTimelineStyles` here because there may be\n    // styles in previous keyframes that are not present in this timeline\n    for (let [prop, value] of this._globalTimelineStyles) {\n      this._backFill.set(prop, value || AUTO_STYLE);\n      this._currentKeyframe.set(prop, AUTO_STYLE);\n    }\n    this._currentEmptyStepKeyframe = this._currentKeyframe;\n  }\n  setStyles(input, easing, errors, options) {\n    if (easing) {\n      this._previousKeyframe.set('easing', easing);\n    }\n    const params = options && options.params || {};\n    const styles = flattenStyles(input, this._globalTimelineStyles);\n    for (let [prop, value] of styles) {\n      const val = interpolateParams(value, params, errors);\n      this._pendingStyles.set(prop, val);\n      if (!this._localTimelineStyles.has(prop)) {\n        this._backFill.set(prop, this._globalTimelineStyles.get(prop) ?? AUTO_STYLE);\n      }\n      this._updateStyle(prop, val);\n    }\n  }\n  applyStylesToKeyframe() {\n    if (this._pendingStyles.size == 0) return;\n    this._pendingStyles.forEach((val, prop) => {\n      this._currentKeyframe.set(prop, val);\n    });\n    this._pendingStyles.clear();\n    this._localTimelineStyles.forEach((val, prop) => {\n      if (!this._currentKeyframe.has(prop)) {\n        this._currentKeyframe.set(prop, val);\n      }\n    });\n  }\n  snapshotCurrentStyles() {\n    for (let [prop, val] of this._localTimelineStyles) {\n      this._pendingStyles.set(prop, val);\n      this._updateStyle(prop, val);\n    }\n  }\n  getFinalKeyframe() {\n    return this._keyframes.get(this.duration);\n  }\n  get properties() {\n    const properties = [];\n    for (let prop in this._currentKeyframe) {\n      properties.push(prop);\n    }\n    return properties;\n  }\n  mergeTimelineCollectedStyles(timeline) {\n    timeline._styleSummary.forEach((details1, prop) => {\n      const details0 = this._styleSummary.get(prop);\n      if (!details0 || details1.time > details0.time) {\n        this._updateStyle(prop, details1.value);\n      }\n    });\n  }\n  buildKeyframes() {\n    this.applyStylesToKeyframe();\n    const preStyleProps = new Set();\n    const postStyleProps = new Set();\n    const isEmpty = this._keyframes.size === 1 && this.duration === 0;\n    let finalKeyframes = [];\n    this._keyframes.forEach((keyframe, time) => {\n      const finalKeyframe = new Map([...this._backFill, ...keyframe]);\n      finalKeyframe.forEach((value, prop) => {\n        if (value === ɵPRE_STYLE) {\n          preStyleProps.add(prop);\n        } else if (value === AUTO_STYLE) {\n          postStyleProps.add(prop);\n        }\n      });\n      if (!isEmpty) {\n        finalKeyframe.set('offset', time / this.duration);\n      }\n      finalKeyframes.push(finalKeyframe);\n    });\n    const preProps = [...preStyleProps.values()];\n    const postProps = [...postStyleProps.values()];\n    // special case for a 0-second animation (which is designed just to place styles onscreen)\n    if (isEmpty) {\n      const kf0 = finalKeyframes[0];\n      const kf1 = new Map(kf0);\n      kf0.set('offset', 0);\n      kf1.set('offset', 1);\n      finalKeyframes = [kf0, kf1];\n    }\n    return createTimelineInstruction(this.element, finalKeyframes, preProps, postProps, this.duration, this.startTime, this.easing, false);\n  }\n}\nclass SubTimelineBuilder extends TimelineBuilder {\n  constructor(driver, element, keyframes, preStyleProps, postStyleProps, timings, _stretchStartingKeyframe = false) {\n    super(driver, element, timings.delay);\n    this.keyframes = keyframes;\n    this.preStyleProps = preStyleProps;\n    this.postStyleProps = postStyleProps;\n    this._stretchStartingKeyframe = _stretchStartingKeyframe;\n    this.timings = {\n      duration: timings.duration,\n      delay: timings.delay,\n      easing: timings.easing\n    };\n  }\n  containsAnimation() {\n    return this.keyframes.length > 1;\n  }\n  buildKeyframes() {\n    let keyframes = this.keyframes;\n    let {\n      delay,\n      duration,\n      easing\n    } = this.timings;\n    if (this._stretchStartingKeyframe && delay) {\n      const newKeyframes = [];\n      const totalTime = duration + delay;\n      const startingGap = delay / totalTime;\n      // the original starting keyframe now starts once the delay is done\n      const newFirstKeyframe = new Map(keyframes[0]);\n      newFirstKeyframe.set('offset', 0);\n      newKeyframes.push(newFirstKeyframe);\n      const oldFirstKeyframe = new Map(keyframes[0]);\n      oldFirstKeyframe.set('offset', roundOffset(startingGap));\n      newKeyframes.push(oldFirstKeyframe);\n      /*\n        When the keyframe is stretched then it means that the delay before the animation\n        starts is gone. Instead the first keyframe is placed at the start of the animation\n        and it is then copied to where it starts when the original delay is over. This basically\n        means nothing animates during that delay, but the styles are still rendered. For this\n        to work the original offset values that exist in the original keyframes must be \"warped\"\n        so that they can take the new keyframe + delay into account.\n               delay=1000, duration=1000, keyframes = 0 .5 1\n               turns into\n               delay=0, duration=2000, keyframes = 0 .33 .66 1\n       */\n      // offsets between 1 ... n -1 are all warped by the keyframe stretch\n      const limit = keyframes.length - 1;\n      for (let i = 1; i <= limit; i++) {\n        let kf = new Map(keyframes[i]);\n        const oldOffset = kf.get('offset');\n        const timeAtKeyframe = delay + oldOffset * duration;\n        kf.set('offset', roundOffset(timeAtKeyframe / totalTime));\n        newKeyframes.push(kf);\n      }\n      // the new starting keyframe should be added at the start\n      duration = totalTime;\n      delay = 0;\n      easing = '';\n      keyframes = newKeyframes;\n    }\n    return createTimelineInstruction(this.element, keyframes, this.preStyleProps, this.postStyleProps, duration, delay, easing, true);\n  }\n}\nfunction roundOffset(offset, decimalPoints = 3) {\n  const mult = Math.pow(10, decimalPoints - 1);\n  return Math.round(offset * mult) / mult;\n}\nfunction flattenStyles(input, allStyles) {\n  const styles = new Map();\n  let allProperties;\n  input.forEach(token => {\n    if (token === '*') {\n      allProperties ??= allStyles.keys();\n      for (let prop of allProperties) {\n        styles.set(prop, AUTO_STYLE);\n      }\n    } else {\n      for (let [prop, val] of token) {\n        styles.set(prop, val);\n      }\n    }\n  });\n  return styles;\n}\nfunction createTransitionInstruction(element, triggerName, fromState, toState, isRemovalTransition, fromStyles, toStyles, timelines, queriedElements, preStyleProps, postStyleProps, totalTime, errors) {\n  return {\n    type: 0 /* AnimationTransitionInstructionType.TransitionAnimation */,\n    element,\n    triggerName,\n    isRemovalTransition,\n    fromState,\n    fromStyles,\n    toState,\n    toStyles,\n    timelines,\n    queriedElements,\n    preStyleProps,\n    postStyleProps,\n    totalTime,\n    errors\n  };\n}\nconst EMPTY_OBJECT = {};\nclass AnimationTransitionFactory {\n  constructor(_triggerName, ast, _stateStyles) {\n    this._triggerName = _triggerName;\n    this.ast = ast;\n    this._stateStyles = _stateStyles;\n  }\n  match(currentState, nextState, element, params) {\n    return oneOrMoreTransitionsMatch(this.ast.matchers, currentState, nextState, element, params);\n  }\n  buildStyles(stateName, params, errors) {\n    let styler = this._stateStyles.get('*');\n    if (stateName !== undefined) {\n      styler = this._stateStyles.get(stateName?.toString()) || styler;\n    }\n    return styler ? styler.buildStyles(params, errors) : new Map();\n  }\n  build(driver, element, currentState, nextState, enterClassName, leaveClassName, currentOptions, nextOptions, subInstructions, skipAstBuild) {\n    const errors = [];\n    const transitionAnimationParams = this.ast.options && this.ast.options.params || EMPTY_OBJECT;\n    const currentAnimationParams = currentOptions && currentOptions.params || EMPTY_OBJECT;\n    const currentStateStyles = this.buildStyles(currentState, currentAnimationParams, errors);\n    const nextAnimationParams = nextOptions && nextOptions.params || EMPTY_OBJECT;\n    const nextStateStyles = this.buildStyles(nextState, nextAnimationParams, errors);\n    const queriedElements = new Set();\n    const preStyleMap = new Map();\n    const postStyleMap = new Map();\n    const isRemoval = nextState === 'void';\n    const animationOptions = {\n      params: applyParamDefaults(nextAnimationParams, transitionAnimationParams),\n      delay: this.ast.options?.delay\n    };\n    const timelines = skipAstBuild ? [] : buildAnimationTimelines(driver, element, this.ast.animation, enterClassName, leaveClassName, currentStateStyles, nextStateStyles, animationOptions, subInstructions, errors);\n    let totalTime = 0;\n    timelines.forEach(tl => {\n      totalTime = Math.max(tl.duration + tl.delay, totalTime);\n    });\n    if (errors.length) {\n      return createTransitionInstruction(element, this._triggerName, currentState, nextState, isRemoval, currentStateStyles, nextStateStyles, [], [], preStyleMap, postStyleMap, totalTime, errors);\n    }\n    timelines.forEach(tl => {\n      const elm = tl.element;\n      const preProps = getOrSetDefaultValue(preStyleMap, elm, new Set());\n      tl.preStyleProps.forEach(prop => preProps.add(prop));\n      const postProps = getOrSetDefaultValue(postStyleMap, elm, new Set());\n      tl.postStyleProps.forEach(prop => postProps.add(prop));\n      if (elm !== element) {\n        queriedElements.add(elm);\n      }\n    });\n    if (typeof ngDevMode === 'undefined' || ngDevMode) {\n      checkNonAnimatableInTimelines(timelines, this._triggerName, driver);\n    }\n    return createTransitionInstruction(element, this._triggerName, currentState, nextState, isRemoval, currentStateStyles, nextStateStyles, timelines, [...queriedElements.values()], preStyleMap, postStyleMap, totalTime);\n  }\n}\n/**\n * Checks inside a set of timelines if they try to animate a css property which is not considered\n * animatable, in that case it prints a warning on the console.\n * Besides that the function doesn't have any other effect.\n *\n * Note: this check is done here after the timelines are built instead of doing on a lower level so\n * that we can make sure that the warning appears only once per instruction (we can aggregate here\n * all the issues instead of finding them separately).\n *\n * @param timelines The built timelines for the current instruction.\n * @param triggerName The name of the trigger for the current instruction.\n * @param driver Animation driver used to perform the check.\n *\n */\nfunction checkNonAnimatableInTimelines(timelines, triggerName, driver) {\n  if (!driver.validateAnimatableStyleProperty) {\n    return;\n  }\n  const allowedNonAnimatableProps = new Set([\n  // 'easing' is a utility/synthetic prop we use to represent\n  // easing functions, it represents a property of the animation\n  // which is not animatable but different values can be used\n  // in different steps\n  'easing']);\n  const invalidNonAnimatableProps = new Set();\n  timelines.forEach(({\n    keyframes\n  }) => {\n    const nonAnimatablePropsInitialValues = new Map();\n    keyframes.forEach(keyframe => {\n      const entriesToCheck = Array.from(keyframe.entries()).filter(([prop]) => !allowedNonAnimatableProps.has(prop));\n      for (const [prop, value] of entriesToCheck) {\n        if (!driver.validateAnimatableStyleProperty(prop)) {\n          if (nonAnimatablePropsInitialValues.has(prop) && !invalidNonAnimatableProps.has(prop)) {\n            const propInitialValue = nonAnimatablePropsInitialValues.get(prop);\n            if (propInitialValue !== value) {\n              invalidNonAnimatableProps.add(prop);\n            }\n          } else {\n            nonAnimatablePropsInitialValues.set(prop, value);\n          }\n        }\n      }\n    });\n  });\n  if (invalidNonAnimatableProps.size > 0) {\n    console.warn(`Warning: The animation trigger \"${triggerName}\" is attempting to animate the following` + ' not animatable properties: ' + Array.from(invalidNonAnimatableProps).join(', ') + '\\n' + '(to check the list of all animatable properties visit https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_animated_properties)');\n  }\n}\nfunction oneOrMoreTransitionsMatch(matchFns, currentState, nextState, element, params) {\n  return matchFns.some(fn => fn(currentState, nextState, element, params));\n}\nfunction applyParamDefaults(userParams, defaults) {\n  const result = {\n    ...defaults\n  };\n  Object.entries(userParams).forEach(([key, value]) => {\n    if (value != null) {\n      result[key] = value;\n    }\n  });\n  return result;\n}\nclass AnimationStateStyles {\n  constructor(styles, defaultParams, normalizer) {\n    this.styles = styles;\n    this.defaultParams = defaultParams;\n    this.normalizer = normalizer;\n  }\n  buildStyles(params, errors) {\n    const finalStyles = new Map();\n    const combinedParams = applyParamDefaults(params, this.defaultParams);\n    this.styles.styles.forEach(value => {\n      if (typeof value !== 'string') {\n        value.forEach((val, prop) => {\n          if (val) {\n            val = interpolateParams(val, combinedParams, errors);\n          }\n          const normalizedProp = this.normalizer.normalizePropertyName(prop, errors);\n          val = this.normalizer.normalizeStyleValue(prop, normalizedProp, val, errors);\n          finalStyles.set(prop, val);\n        });\n      }\n    });\n    return finalStyles;\n  }\n}\nfunction buildTrigger(name, ast, normalizer) {\n  return new AnimationTrigger(name, ast, normalizer);\n}\nclass AnimationTrigger {\n  constructor(name, ast, _normalizer) {\n    this.name = name;\n    this.ast = ast;\n    this._normalizer = _normalizer;\n    this.transitionFactories = [];\n    this.states = new Map();\n    ast.states.forEach(ast => {\n      const defaultParams = ast.options && ast.options.params || {};\n      this.states.set(ast.name, new AnimationStateStyles(ast.style, defaultParams, _normalizer));\n    });\n    balanceProperties(this.states, 'true', '1');\n    balanceProperties(this.states, 'false', '0');\n    ast.transitions.forEach(ast => {\n      this.transitionFactories.push(new AnimationTransitionFactory(name, ast, this.states));\n    });\n    this.fallbackTransition = createFallbackTransition(name, this.states, this._normalizer);\n  }\n  get containsQueries() {\n    return this.ast.queryCount > 0;\n  }\n  matchTransition(currentState, nextState, element, params) {\n    const entry = this.transitionFactories.find(f => f.match(currentState, nextState, element, params));\n    return entry || null;\n  }\n  matchStyles(currentState, params, errors) {\n    return this.fallbackTransition.buildStyles(currentState, params, errors);\n  }\n}\nfunction createFallbackTransition(triggerName, states, normalizer) {\n  const matchers = [(fromState, toState) => true];\n  const animation = {\n    type: AnimationMetadataType.Sequence,\n    steps: [],\n    options: null\n  };\n  const transition = {\n    type: AnimationMetadataType.Transition,\n    animation,\n    matchers,\n    options: null,\n    queryCount: 0,\n    depCount: 0\n  };\n  return new AnimationTransitionFactory(triggerName, transition, states);\n}\nfunction balanceProperties(stateMap, key1, key2) {\n  if (stateMap.has(key1)) {\n    if (!stateMap.has(key2)) {\n      stateMap.set(key2, stateMap.get(key1));\n    }\n  } else if (stateMap.has(key2)) {\n    stateMap.set(key1, stateMap.get(key2));\n  }\n}\nconst EMPTY_INSTRUCTION_MAP = new ElementInstructionMap();\nclass TimelineAnimationEngine {\n  constructor(bodyNode, _driver, _normalizer) {\n    this.bodyNode = bodyNode;\n    this._driver = _driver;\n    this._normalizer = _normalizer;\n    this._animations = new Map();\n    this._playersById = new Map();\n    this.players = [];\n  }\n  register(id, metadata) {\n    const errors = [];\n    const warnings = [];\n    const ast = buildAnimationAst(this._driver, metadata, errors, warnings);\n    if (errors.length) {\n      throw registerFailed(errors);\n    } else {\n      if (warnings.length) {\n        warnRegister(warnings);\n      }\n      this._animations.set(id, ast);\n    }\n  }\n  _buildPlayer(i, preStyles, postStyles) {\n    const element = i.element;\n    const keyframes = normalizeKeyframes$1(this._normalizer, i.keyframes, preStyles, postStyles);\n    return this._driver.animate(element, keyframes, i.duration, i.delay, i.easing, [], true);\n  }\n  create(id, element, options = {}) {\n    const errors = [];\n    const ast = this._animations.get(id);\n    let instructions;\n    const autoStylesMap = new Map();\n    if (ast) {\n      instructions = buildAnimationTimelines(this._driver, element, ast, ENTER_CLASSNAME, LEAVE_CLASSNAME, new Map(), new Map(), options, EMPTY_INSTRUCTION_MAP, errors);\n      instructions.forEach(inst => {\n        const styles = getOrSetDefaultValue(autoStylesMap, inst.element, new Map());\n        inst.postStyleProps.forEach(prop => styles.set(prop, null));\n      });\n    } else {\n      errors.push(missingOrDestroyedAnimation());\n      instructions = [];\n    }\n    if (errors.length) {\n      throw createAnimationFailed(errors);\n    }\n    autoStylesMap.forEach((styles, element) => {\n      styles.forEach((_, prop) => {\n        styles.set(prop, this._driver.computeStyle(element, prop, AUTO_STYLE));\n      });\n    });\n    const players = instructions.map(i => {\n      const styles = autoStylesMap.get(i.element);\n      return this._buildPlayer(i, new Map(), styles);\n    });\n    const player = optimizeGroupPlayer(players);\n    this._playersById.set(id, player);\n    player.onDestroy(() => this.destroy(id));\n    this.players.push(player);\n    return player;\n  }\n  destroy(id) {\n    const player = this._getPlayer(id);\n    player.destroy();\n    this._playersById.delete(id);\n    const index = this.players.indexOf(player);\n    if (index >= 0) {\n      this.players.splice(index, 1);\n    }\n  }\n  _getPlayer(id) {\n    const player = this._playersById.get(id);\n    if (!player) {\n      throw missingPlayer(id);\n    }\n    return player;\n  }\n  listen(id, element, eventName, callback) {\n    // triggerName, fromState, toState are all ignored for timeline animations\n    const baseEvent = makeAnimationEvent(element, '', '', '');\n    listenOnPlayer(this._getPlayer(id), eventName, baseEvent, callback);\n    return () => {};\n  }\n  command(id, element, command, args) {\n    if (command == 'register') {\n      this.register(id, args[0]);\n      return;\n    }\n    if (command == 'create') {\n      const options = args[0] || {};\n      this.create(id, element, options);\n      return;\n    }\n    const player = this._getPlayer(id);\n    switch (command) {\n      case 'play':\n        player.play();\n        break;\n      case 'pause':\n        player.pause();\n        break;\n      case 'reset':\n        player.reset();\n        break;\n      case 'restart':\n        player.restart();\n        break;\n      case 'finish':\n        player.finish();\n        break;\n      case 'init':\n        player.init();\n        break;\n      case 'setPosition':\n        player.setPosition(parseFloat(args[0]));\n        break;\n      case 'destroy':\n        this.destroy(id);\n        break;\n    }\n  }\n}\nconst QUEUED_CLASSNAME = 'ng-animate-queued';\nconst QUEUED_SELECTOR = '.ng-animate-queued';\nconst DISABLED_CLASSNAME = 'ng-animate-disabled';\nconst DISABLED_SELECTOR = '.ng-animate-disabled';\nconst STAR_CLASSNAME = 'ng-star-inserted';\nconst STAR_SELECTOR = '.ng-star-inserted';\nconst EMPTY_PLAYER_ARRAY = [];\nconst NULL_REMOVAL_STATE = {\n  namespaceId: '',\n  setForRemoval: false,\n  setForMove: false,\n  hasAnimation: false,\n  removedBeforeQueried: false\n};\nconst NULL_REMOVED_QUERIED_STATE = {\n  namespaceId: '',\n  setForMove: false,\n  setForRemoval: false,\n  hasAnimation: false,\n  removedBeforeQueried: true\n};\nconst REMOVAL_FLAG = '__ng_removed';\nclass StateValue {\n  get params() {\n    return this.options.params;\n  }\n  constructor(input, namespaceId = '') {\n    this.namespaceId = namespaceId;\n    const isObj = input && input.hasOwnProperty('value');\n    const value = isObj ? input['value'] : input;\n    this.value = normalizeTriggerValue(value);\n    if (isObj) {\n      // we drop the value property from options.\n      const {\n        value,\n        ...options\n      } = input;\n      this.options = options;\n    } else {\n      this.options = {};\n    }\n    if (!this.options.params) {\n      this.options.params = {};\n    }\n  }\n  absorbOptions(options) {\n    const newParams = options.params;\n    if (newParams) {\n      const oldParams = this.options.params;\n      Object.keys(newParams).forEach(prop => {\n        if (oldParams[prop] == null) {\n          oldParams[prop] = newParams[prop];\n        }\n      });\n    }\n  }\n}\nconst VOID_VALUE = 'void';\nconst DEFAULT_STATE_VALUE = new StateValue(VOID_VALUE);\nclass AnimationTransitionNamespace {\n  constructor(id, hostElement, _engine) {\n    this.id = id;\n    this.hostElement = hostElement;\n    this._engine = _engine;\n    this.players = [];\n    this._triggers = new Map();\n    this._queue = [];\n    this._elementListeners = new Map();\n    this._hostClassName = 'ng-tns-' + id;\n    addClass(hostElement, this._hostClassName);\n  }\n  listen(element, name, phase, callback) {\n    if (!this._triggers.has(name)) {\n      throw missingTrigger(phase, name);\n    }\n    if (phase == null || phase.length == 0) {\n      throw missingEvent(name);\n    }\n    if (!isTriggerEventValid(phase)) {\n      throw unsupportedTriggerEvent(phase, name);\n    }\n    const listeners = getOrSetDefaultValue(this._elementListeners, element, []);\n    const data = {\n      name,\n      phase,\n      callback\n    };\n    listeners.push(data);\n    const triggersWithStates = getOrSetDefaultValue(this._engine.statesByElement, element, new Map());\n    if (!triggersWithStates.has(name)) {\n      addClass(element, NG_TRIGGER_CLASSNAME);\n      addClass(element, NG_TRIGGER_CLASSNAME + '-' + name);\n      triggersWithStates.set(name, DEFAULT_STATE_VALUE);\n    }\n    return () => {\n      // the event listener is removed AFTER the flush has occurred such\n      // that leave animations callbacks can fire (otherwise if the node\n      // is removed in between then the listeners would be deregistered)\n      this._engine.afterFlush(() => {\n        const index = listeners.indexOf(data);\n        if (index >= 0) {\n          listeners.splice(index, 1);\n        }\n        if (!this._triggers.has(name)) {\n          triggersWithStates.delete(name);\n        }\n      });\n    };\n  }\n  register(name, ast) {\n    if (this._triggers.has(name)) {\n      // throw\n      return false;\n    } else {\n      this._triggers.set(name, ast);\n      return true;\n    }\n  }\n  _getTrigger(name) {\n    const trigger = this._triggers.get(name);\n    if (!trigger) {\n      throw unregisteredTrigger(name);\n    }\n    return trigger;\n  }\n  trigger(element, triggerName, value, defaultToFallback = true) {\n    const trigger = this._getTrigger(triggerName);\n    const player = new TransitionAnimationPlayer(this.id, triggerName, element);\n    let triggersWithStates = this._engine.statesByElement.get(element);\n    if (!triggersWithStates) {\n      addClass(element, NG_TRIGGER_CLASSNAME);\n      addClass(element, NG_TRIGGER_CLASSNAME + '-' + triggerName);\n      this._engine.statesByElement.set(element, triggersWithStates = new Map());\n    }\n    let fromState = triggersWithStates.get(triggerName);\n    const toState = new StateValue(value, this.id);\n    const isObj = value && value.hasOwnProperty('value');\n    if (!isObj && fromState) {\n      toState.absorbOptions(fromState.options);\n    }\n    triggersWithStates.set(triggerName, toState);\n    if (!fromState) {\n      fromState = DEFAULT_STATE_VALUE;\n    }\n    const isRemoval = toState.value === VOID_VALUE;\n    // normally this isn't reached by here, however, if an object expression\n    // is passed in then it may be a new object each time. Comparing the value\n    // is important since that will stay the same despite there being a new object.\n    // The removal arc here is special cased because the same element is triggered\n    // twice in the event that it contains animations on the outer/inner portions\n    // of the host container\n    if (!isRemoval && fromState.value === toState.value) {\n      // this means that despite the value not changing, some inner params\n      // have changed which means that the animation final styles need to be applied\n      if (!objEquals(fromState.params, toState.params)) {\n        const errors = [];\n        const fromStyles = trigger.matchStyles(fromState.value, fromState.params, errors);\n        const toStyles = trigger.matchStyles(toState.value, toState.params, errors);\n        if (errors.length) {\n          this._engine.reportError(errors);\n        } else {\n          this._engine.afterFlush(() => {\n            eraseStyles(element, fromStyles);\n            setStyles(element, toStyles);\n          });\n        }\n      }\n      return;\n    }\n    const playersOnElement = getOrSetDefaultValue(this._engine.playersByElement, element, []);\n    playersOnElement.forEach(player => {\n      // only remove the player if it is queued on the EXACT same trigger/namespace\n      // we only also deal with queued players here because if the animation has\n      // started then we want to keep the player alive until the flush happens\n      // (which is where the previousPlayers are passed into the new player)\n      if (player.namespaceId == this.id && player.triggerName == triggerName && player.queued) {\n        player.destroy();\n      }\n    });\n    let transition = trigger.matchTransition(fromState.value, toState.value, element, toState.params);\n    let isFallbackTransition = false;\n    if (!transition) {\n      if (!defaultToFallback) return;\n      transition = trigger.fallbackTransition;\n      isFallbackTransition = true;\n    }\n    this._engine.totalQueuedPlayers++;\n    this._queue.push({\n      element,\n      triggerName,\n      transition,\n      fromState,\n      toState,\n      player,\n      isFallbackTransition\n    });\n    if (!isFallbackTransition) {\n      addClass(element, QUEUED_CLASSNAME);\n      player.onStart(() => {\n        removeClass(element, QUEUED_CLASSNAME);\n      });\n    }\n    player.onDone(() => {\n      let index = this.players.indexOf(player);\n      if (index >= 0) {\n        this.players.splice(index, 1);\n      }\n      const players = this._engine.playersByElement.get(element);\n      if (players) {\n        let index = players.indexOf(player);\n        if (index >= 0) {\n          players.splice(index, 1);\n        }\n      }\n    });\n    this.players.push(player);\n    playersOnElement.push(player);\n    return player;\n  }\n  deregister(name) {\n    this._triggers.delete(name);\n    this._engine.statesByElement.forEach(stateMap => stateMap.delete(name));\n    this._elementListeners.forEach((listeners, element) => {\n      this._elementListeners.set(element, listeners.filter(entry => {\n        return entry.name != name;\n      }));\n    });\n  }\n  clearElementCache(element) {\n    this._engine.statesByElement.delete(element);\n    this._elementListeners.delete(element);\n    const elementPlayers = this._engine.playersByElement.get(element);\n    if (elementPlayers) {\n      elementPlayers.forEach(player => player.destroy());\n      this._engine.playersByElement.delete(element);\n    }\n  }\n  _signalRemovalForInnerTriggers(rootElement, context) {\n    const elements = this._engine.driver.query(rootElement, NG_TRIGGER_SELECTOR, true);\n    // emulate a leave animation for all inner nodes within this node.\n    // If there are no animations found for any of the nodes then clear the cache\n    // for the element.\n    elements.forEach(elm => {\n      // this means that an inner remove() operation has already kicked off\n      // the animation on this element...\n      if (elm[REMOVAL_FLAG]) return;\n      const namespaces = this._engine.fetchNamespacesByElement(elm);\n      if (namespaces.size) {\n        namespaces.forEach(ns => ns.triggerLeaveAnimation(elm, context, false, true));\n      } else {\n        this.clearElementCache(elm);\n      }\n    });\n    // If the child elements were removed along with the parent, their animations might not\n    // have completed. Clear all the elements from the cache so we don't end up with a memory leak.\n    this._engine.afterFlushAnimationsDone(() => elements.forEach(elm => this.clearElementCache(elm)));\n  }\n  triggerLeaveAnimation(element, context, destroyAfterComplete, defaultToFallback) {\n    const triggerStates = this._engine.statesByElement.get(element);\n    const previousTriggersValues = new Map();\n    if (triggerStates) {\n      const players = [];\n      triggerStates.forEach((state, triggerName) => {\n        previousTriggersValues.set(triggerName, state.value);\n        // this check is here in the event that an element is removed\n        // twice (both on the host level and the component level)\n        if (this._triggers.has(triggerName)) {\n          const player = this.trigger(element, triggerName, VOID_VALUE, defaultToFallback);\n          if (player) {\n            players.push(player);\n          }\n        }\n      });\n      if (players.length) {\n        this._engine.markElementAsRemoved(this.id, element, true, context, previousTriggersValues);\n        if (destroyAfterComplete) {\n          optimizeGroupPlayer(players).onDone(() => this._engine.processLeaveNode(element));\n        }\n        return true;\n      }\n    }\n    return false;\n  }\n  prepareLeaveAnimationListeners(element) {\n    const listeners = this._elementListeners.get(element);\n    const elementStates = this._engine.statesByElement.get(element);\n    // if this statement fails then it means that the element was picked up\n    // by an earlier flush (or there are no listeners at all to track the leave).\n    if (listeners && elementStates) {\n      const visitedTriggers = new Set();\n      listeners.forEach(listener => {\n        const triggerName = listener.name;\n        if (visitedTriggers.has(triggerName)) return;\n        visitedTriggers.add(triggerName);\n        const trigger = this._triggers.get(triggerName);\n        const transition = trigger.fallbackTransition;\n        const fromState = elementStates.get(triggerName) || DEFAULT_STATE_VALUE;\n        const toState = new StateValue(VOID_VALUE);\n        const player = new TransitionAnimationPlayer(this.id, triggerName, element);\n        this._engine.totalQueuedPlayers++;\n        this._queue.push({\n          element,\n          triggerName,\n          transition,\n          fromState,\n          toState,\n          player,\n          isFallbackTransition: true\n        });\n      });\n    }\n  }\n  removeNode(element, context) {\n    const engine = this._engine;\n    if (element.childElementCount) {\n      this._signalRemovalForInnerTriggers(element, context);\n    }\n    // this means that a * => VOID animation was detected and kicked off\n    if (this.triggerLeaveAnimation(element, context, true)) return;\n    // find the player that is animating and make sure that the\n    // removal is delayed until that player has completed\n    let containsPotentialParentTransition = false;\n    if (engine.totalAnimations) {\n      const currentPlayers = engine.players.length ? engine.playersByQueriedElement.get(element) : [];\n      // when this `if statement` does not continue forward it means that\n      // a previous animation query has selected the current element and\n      // is animating it. In this situation want to continue forwards and\n      // allow the element to be queued up for animation later.\n      if (currentPlayers && currentPlayers.length) {\n        containsPotentialParentTransition = true;\n      } else {\n        let parent = element;\n        while (parent = parent.parentNode) {\n          const triggers = engine.statesByElement.get(parent);\n          if (triggers) {\n            containsPotentialParentTransition = true;\n            break;\n          }\n        }\n      }\n    }\n    // at this stage we know that the element will either get removed\n    // during flush or will be picked up by a parent query. Either way\n    // we need to fire the listeners for this element when it DOES get\n    // removed (once the query parent animation is done or after flush)\n    this.prepareLeaveAnimationListeners(element);\n    // whether or not a parent has an animation we need to delay the deferral of the leave\n    // operation until we have more information (which we do after flush() has been called)\n    if (containsPotentialParentTransition) {\n      engine.markElementAsRemoved(this.id, element, false, context);\n    } else {\n      const removalFlag = element[REMOVAL_FLAG];\n      if (!removalFlag || removalFlag === NULL_REMOVAL_STATE) {\n        // we do this after the flush has occurred such\n        // that the callbacks can be fired\n        engine.afterFlush(() => this.clearElementCache(element));\n        engine.destroyInnerAnimations(element);\n        engine._onRemovalComplete(element, context);\n      }\n    }\n  }\n  insertNode(element, parent) {\n    addClass(element, this._hostClassName);\n  }\n  drainQueuedTransitions(microtaskId) {\n    const instructions = [];\n    this._queue.forEach(entry => {\n      const player = entry.player;\n      if (player.destroyed) return;\n      const element = entry.element;\n      const listeners = this._elementListeners.get(element);\n      if (listeners) {\n        listeners.forEach(listener => {\n          if (listener.name == entry.triggerName) {\n            const baseEvent = makeAnimationEvent(element, entry.triggerName, entry.fromState.value, entry.toState.value);\n            baseEvent['_data'] = microtaskId;\n            listenOnPlayer(entry.player, listener.phase, baseEvent, listener.callback);\n          }\n        });\n      }\n      if (player.markedForDestroy) {\n        this._engine.afterFlush(() => {\n          // now we can destroy the element properly since the event listeners have\n          // been bound to the player\n          player.destroy();\n        });\n      } else {\n        instructions.push(entry);\n      }\n    });\n    this._queue = [];\n    return instructions.sort((a, b) => {\n      // if depCount == 0 them move to front\n      // otherwise if a contains b then move back\n      const d0 = a.transition.ast.depCount;\n      const d1 = b.transition.ast.depCount;\n      if (d0 == 0 || d1 == 0) {\n        return d0 - d1;\n      }\n      return this._engine.driver.containsElement(a.element, b.element) ? 1 : -1;\n    });\n  }\n  destroy(context) {\n    this.players.forEach(p => p.destroy());\n    this._signalRemovalForInnerTriggers(this.hostElement, context);\n  }\n}\nclass TransitionAnimationEngine {\n  /** @internal */\n  _onRemovalComplete(element, context) {\n    this.onRemovalComplete(element, context);\n  }\n  constructor(bodyNode, driver, _normalizer) {\n    this.bodyNode = bodyNode;\n    this.driver = driver;\n    this._normalizer = _normalizer;\n    this.players = [];\n    this.newHostElements = new Map();\n    this.playersByElement = new Map();\n    this.playersByQueriedElement = new Map();\n    this.statesByElement = new Map();\n    this.disabledNodes = new Set();\n    this.totalAnimations = 0;\n    this.totalQueuedPlayers = 0;\n    this._namespaceLookup = {};\n    this._namespaceList = [];\n    this._flushFns = [];\n    this._whenQuietFns = [];\n    this.namespacesByHostElement = new Map();\n    this.collectedEnterElements = [];\n    this.collectedLeaveElements = [];\n    // this method is designed to be overridden by the code that uses this engine\n    this.onRemovalComplete = (element, context) => {};\n  }\n  get queuedPlayers() {\n    const players = [];\n    this._namespaceList.forEach(ns => {\n      ns.players.forEach(player => {\n        if (player.queued) {\n          players.push(player);\n        }\n      });\n    });\n    return players;\n  }\n  createNamespace(namespaceId, hostElement) {\n    const ns = new AnimationTransitionNamespace(namespaceId, hostElement, this);\n    if (this.bodyNode && this.driver.containsElement(this.bodyNode, hostElement)) {\n      this._balanceNamespaceList(ns, hostElement);\n    } else {\n      // defer this later until flush during when the host element has\n      // been inserted so that we know exactly where to place it in\n      // the namespace list\n      this.newHostElements.set(hostElement, ns);\n      // given that this host element is a part of the animation code, it\n      // may or may not be inserted by a parent node that is of an\n      // animation renderer type. If this happens then we can still have\n      // access to this item when we query for :enter nodes. If the parent\n      // is a renderer then the set data-structure will normalize the entry\n      this.collectEnterElement(hostElement);\n    }\n    return this._namespaceLookup[namespaceId] = ns;\n  }\n  _balanceNamespaceList(ns, hostElement) {\n    const namespaceList = this._namespaceList;\n    const namespacesByHostElement = this.namespacesByHostElement;\n    const limit = namespaceList.length - 1;\n    if (limit >= 0) {\n      let found = false;\n      // Find the closest ancestor with an existing namespace so we can then insert `ns` after it,\n      // establishing a top-down ordering of namespaces in `this._namespaceList`.\n      let ancestor = this.driver.getParentElement(hostElement);\n      while (ancestor) {\n        const ancestorNs = namespacesByHostElement.get(ancestor);\n        if (ancestorNs) {\n          // An animation namespace has been registered for this ancestor, so we insert `ns`\n          // right after it to establish top-down ordering of animation namespaces.\n          const index = namespaceList.indexOf(ancestorNs);\n          namespaceList.splice(index + 1, 0, ns);\n          found = true;\n          break;\n        }\n        ancestor = this.driver.getParentElement(ancestor);\n      }\n      if (!found) {\n        // No namespace exists that is an ancestor of `ns`, so `ns` is inserted at the front to\n        // ensure that any existing descendants are ordered after `ns`, retaining the desired\n        // top-down ordering.\n        namespaceList.unshift(ns);\n      }\n    } else {\n      namespaceList.push(ns);\n    }\n    namespacesByHostElement.set(hostElement, ns);\n    return ns;\n  }\n  register(namespaceId, hostElement) {\n    let ns = this._namespaceLookup[namespaceId];\n    if (!ns) {\n      ns = this.createNamespace(namespaceId, hostElement);\n    }\n    return ns;\n  }\n  registerTrigger(namespaceId, name, trigger) {\n    let ns = this._namespaceLookup[namespaceId];\n    if (ns && ns.register(name, trigger)) {\n      this.totalAnimations++;\n    }\n  }\n  destroy(namespaceId, context) {\n    if (!namespaceId) return;\n    this.afterFlush(() => {});\n    this.afterFlushAnimationsDone(() => {\n      const ns = this._fetchNamespace(namespaceId);\n      this.namespacesByHostElement.delete(ns.hostElement);\n      const index = this._namespaceList.indexOf(ns);\n      if (index >= 0) {\n        this._namespaceList.splice(index, 1);\n      }\n      ns.destroy(context);\n      delete this._namespaceLookup[namespaceId];\n    });\n  }\n  _fetchNamespace(id) {\n    return this._namespaceLookup[id];\n  }\n  fetchNamespacesByElement(element) {\n    // normally there should only be one namespace per element, however\n    // if @triggers are placed on both the component element and then\n    // its host element (within the component code) then there will be\n    // two namespaces returned. We use a set here to simply deduplicate\n    // the namespaces in case (for the reason described above) there are multiple triggers\n    const namespaces = new Set();\n    const elementStates = this.statesByElement.get(element);\n    if (elementStates) {\n      for (let stateValue of elementStates.values()) {\n        if (stateValue.namespaceId) {\n          const ns = this._fetchNamespace(stateValue.namespaceId);\n          if (ns) {\n            namespaces.add(ns);\n          }\n        }\n      }\n    }\n    return namespaces;\n  }\n  trigger(namespaceId, element, name, value) {\n    if (isElementNode(element)) {\n      const ns = this._fetchNamespace(namespaceId);\n      if (ns) {\n        ns.trigger(element, name, value);\n        return true;\n      }\n    }\n    return false;\n  }\n  insertNode(namespaceId, element, parent, insertBefore) {\n    if (!isElementNode(element)) return;\n    // special case for when an element is removed and reinserted (move operation)\n    // when this occurs we do not want to use the element for deletion later\n    const details = element[REMOVAL_FLAG];\n    if (details && details.setForRemoval) {\n      details.setForRemoval = false;\n      details.setForMove = true;\n      const index = this.collectedLeaveElements.indexOf(element);\n      if (index >= 0) {\n        this.collectedLeaveElements.splice(index, 1);\n      }\n    }\n    // in the event that the namespaceId is blank then the caller\n    // code does not contain any animation code in it, but it is\n    // just being called so that the node is marked as being inserted\n    if (namespaceId) {\n      const ns = this._fetchNamespace(namespaceId);\n      // This if-statement is a workaround for router issue #21947.\n      // The router sometimes hits a race condition where while a route\n      // is being instantiated a new navigation arrives, triggering leave\n      // animation of DOM that has not been fully initialized, until this\n      // is resolved, we need to handle the scenario when DOM is not in a\n      // consistent state during the animation.\n      if (ns) {\n        ns.insertNode(element, parent);\n      }\n    }\n    // only *directives and host elements are inserted before\n    if (insertBefore) {\n      this.collectEnterElement(element);\n    }\n  }\n  collectEnterElement(element) {\n    this.collectedEnterElements.push(element);\n  }\n  markElementAsDisabled(element, value) {\n    if (value) {\n      if (!this.disabledNodes.has(element)) {\n        this.disabledNodes.add(element);\n        addClass(element, DISABLED_CLASSNAME);\n      }\n    } else if (this.disabledNodes.has(element)) {\n      this.disabledNodes.delete(element);\n      removeClass(element, DISABLED_CLASSNAME);\n    }\n  }\n  removeNode(namespaceId, element, context) {\n    if (isElementNode(element)) {\n      const ns = namespaceId ? this._fetchNamespace(namespaceId) : null;\n      if (ns) {\n        ns.removeNode(element, context);\n      } else {\n        this.markElementAsRemoved(namespaceId, element, false, context);\n      }\n      const hostNS = this.namespacesByHostElement.get(element);\n      if (hostNS && hostNS.id !== namespaceId) {\n        hostNS.removeNode(element, context);\n      }\n    } else {\n      this._onRemovalComplete(element, context);\n    }\n  }\n  markElementAsRemoved(namespaceId, element, hasAnimation, context, previousTriggersValues) {\n    this.collectedLeaveElements.push(element);\n    element[REMOVAL_FLAG] = {\n      namespaceId,\n      setForRemoval: context,\n      hasAnimation,\n      removedBeforeQueried: false,\n      previousTriggersValues\n    };\n  }\n  listen(namespaceId, element, name, phase, callback) {\n    if (isElementNode(element)) {\n      return this._fetchNamespace(namespaceId).listen(element, name, phase, callback);\n    }\n    return () => {};\n  }\n  _buildInstruction(entry, subTimelines, enterClassName, leaveClassName, skipBuildAst) {\n    return entry.transition.build(this.driver, entry.element, entry.fromState.value, entry.toState.value, enterClassName, leaveClassName, entry.fromState.options, entry.toState.options, subTimelines, skipBuildAst);\n  }\n  destroyInnerAnimations(containerElement) {\n    let elements = this.driver.query(containerElement, NG_TRIGGER_SELECTOR, true);\n    elements.forEach(element => this.destroyActiveAnimationsForElement(element));\n    if (this.playersByQueriedElement.size == 0) return;\n    elements = this.driver.query(containerElement, NG_ANIMATING_SELECTOR, true);\n    elements.forEach(element => this.finishActiveQueriedAnimationOnElement(element));\n  }\n  destroyActiveAnimationsForElement(element) {\n    const players = this.playersByElement.get(element);\n    if (players) {\n      players.forEach(player => {\n        // special case for when an element is set for destruction, but hasn't started.\n        // in this situation we want to delay the destruction until the flush occurs\n        // so that any event listeners attached to the player are triggered.\n        if (player.queued) {\n          player.markedForDestroy = true;\n        } else {\n          player.destroy();\n        }\n      });\n    }\n  }\n  finishActiveQueriedAnimationOnElement(element) {\n    const players = this.playersByQueriedElement.get(element);\n    if (players) {\n      players.forEach(player => player.finish());\n    }\n  }\n  whenRenderingDone() {\n    return new Promise(resolve => {\n      if (this.players.length) {\n        return optimizeGroupPlayer(this.players).onDone(() => resolve());\n      } else {\n        resolve();\n      }\n    });\n  }\n  processLeaveNode(element) {\n    const details = element[REMOVAL_FLAG];\n    if (details && details.setForRemoval) {\n      // this will prevent it from removing it twice\n      element[REMOVAL_FLAG] = NULL_REMOVAL_STATE;\n      if (details.namespaceId) {\n        this.destroyInnerAnimations(element);\n        const ns = this._fetchNamespace(details.namespaceId);\n        if (ns) {\n          ns.clearElementCache(element);\n        }\n      }\n      this._onRemovalComplete(element, details.setForRemoval);\n    }\n    if (element.classList?.contains(DISABLED_CLASSNAME)) {\n      this.markElementAsDisabled(element, false);\n    }\n    this.driver.query(element, DISABLED_SELECTOR, true).forEach(node => {\n      this.markElementAsDisabled(node, false);\n    });\n  }\n  flush(microtaskId = -1) {\n    let players = [];\n    if (this.newHostElements.size) {\n      this.newHostElements.forEach((ns, element) => this._balanceNamespaceList(ns, element));\n      this.newHostElements.clear();\n    }\n    if (this.totalAnimations && this.collectedEnterElements.length) {\n      for (let i = 0; i < this.collectedEnterElements.length; i++) {\n        const elm = this.collectedEnterElements[i];\n        addClass(elm, STAR_CLASSNAME);\n      }\n    }\n    if (this._namespaceList.length && (this.totalQueuedPlayers || this.collectedLeaveElements.length)) {\n      const cleanupFns = [];\n      try {\n        players = this._flushAnimations(cleanupFns, microtaskId);\n      } finally {\n        for (let i = 0; i < cleanupFns.length; i++) {\n          cleanupFns[i]();\n        }\n      }\n    } else {\n      for (let i = 0; i < this.collectedLeaveElements.length; i++) {\n        const element = this.collectedLeaveElements[i];\n        this.processLeaveNode(element);\n      }\n    }\n    this.totalQueuedPlayers = 0;\n    this.collectedEnterElements.length = 0;\n    this.collectedLeaveElements.length = 0;\n    this._flushFns.forEach(fn => fn());\n    this._flushFns = [];\n    if (this._whenQuietFns.length) {\n      // we move these over to a variable so that\n      // if any new callbacks are registered in another\n      // flush they do not populate the existing set\n      const quietFns = this._whenQuietFns;\n      this._whenQuietFns = [];\n      if (players.length) {\n        optimizeGroupPlayer(players).onDone(() => {\n          quietFns.forEach(fn => fn());\n        });\n      } else {\n        quietFns.forEach(fn => fn());\n      }\n    }\n  }\n  reportError(errors) {\n    throw triggerTransitionsFailed(errors);\n  }\n  _flushAnimations(cleanupFns, microtaskId) {\n    const subTimelines = new ElementInstructionMap();\n    const skippedPlayers = [];\n    const skippedPlayersMap = new Map();\n    const queuedInstructions = [];\n    const queriedElements = new Map();\n    const allPreStyleElements = new Map();\n    const allPostStyleElements = new Map();\n    const disabledElementsSet = new Set();\n    this.disabledNodes.forEach(node => {\n      disabledElementsSet.add(node);\n      const nodesThatAreDisabled = this.driver.query(node, QUEUED_SELECTOR, true);\n      for (let i = 0; i < nodesThatAreDisabled.length; i++) {\n        disabledElementsSet.add(nodesThatAreDisabled[i]);\n      }\n    });\n    const bodyNode = this.bodyNode;\n    const allTriggerElements = Array.from(this.statesByElement.keys());\n    const enterNodeMap = buildRootMap(allTriggerElements, this.collectedEnterElements);\n    // this must occur before the instructions are built below such that\n    // the :enter queries match the elements (since the timeline queries\n    // are fired during instruction building).\n    const enterNodeMapIds = new Map();\n    let i = 0;\n    enterNodeMap.forEach((nodes, root) => {\n      const className = ENTER_CLASSNAME + i++;\n      enterNodeMapIds.set(root, className);\n      nodes.forEach(node => addClass(node, className));\n    });\n    const allLeaveNodes = [];\n    const mergedLeaveNodes = new Set();\n    const leaveNodesWithoutAnimations = new Set();\n    for (let i = 0; i < this.collectedLeaveElements.length; i++) {\n      const element = this.collectedLeaveElements[i];\n      const details = element[REMOVAL_FLAG];\n      if (details && details.setForRemoval) {\n        allLeaveNodes.push(element);\n        mergedLeaveNodes.add(element);\n        if (details.hasAnimation) {\n          this.driver.query(element, STAR_SELECTOR, true).forEach(elm => mergedLeaveNodes.add(elm));\n        } else {\n          leaveNodesWithoutAnimations.add(element);\n        }\n      }\n    }\n    const leaveNodeMapIds = new Map();\n    const leaveNodeMap = buildRootMap(allTriggerElements, Array.from(mergedLeaveNodes));\n    leaveNodeMap.forEach((nodes, root) => {\n      const className = LEAVE_CLASSNAME + i++;\n      leaveNodeMapIds.set(root, className);\n      nodes.forEach(node => addClass(node, className));\n    });\n    cleanupFns.push(() => {\n      enterNodeMap.forEach((nodes, root) => {\n        const className = enterNodeMapIds.get(root);\n        nodes.forEach(node => removeClass(node, className));\n      });\n      leaveNodeMap.forEach((nodes, root) => {\n        const className = leaveNodeMapIds.get(root);\n        nodes.forEach(node => removeClass(node, className));\n      });\n      allLeaveNodes.forEach(element => {\n        this.processLeaveNode(element);\n      });\n    });\n    const allPlayers = [];\n    const erroneousTransitions = [];\n    for (let i = this._namespaceList.length - 1; i >= 0; i--) {\n      const ns = this._namespaceList[i];\n      ns.drainQueuedTransitions(microtaskId).forEach(entry => {\n        const player = entry.player;\n        const element = entry.element;\n        allPlayers.push(player);\n        if (this.collectedEnterElements.length) {\n          const details = element[REMOVAL_FLAG];\n          // animations for move operations (elements being removed and reinserted,\n          // e.g. when the order of an *ngFor list changes) are currently not supported\n          if (details && details.setForMove) {\n            if (details.previousTriggersValues && details.previousTriggersValues.has(entry.triggerName)) {\n              const previousValue = details.previousTriggersValues.get(entry.triggerName);\n              // we need to restore the previous trigger value since the element has\n              // only been moved and hasn't actually left the DOM\n              const triggersWithStates = this.statesByElement.get(entry.element);\n              if (triggersWithStates && triggersWithStates.has(entry.triggerName)) {\n                const state = triggersWithStates.get(entry.triggerName);\n                state.value = previousValue;\n                triggersWithStates.set(entry.triggerName, state);\n              }\n            }\n            player.destroy();\n            return;\n          }\n        }\n        const nodeIsOrphaned = !bodyNode || !this.driver.containsElement(bodyNode, element);\n        const leaveClassName = leaveNodeMapIds.get(element);\n        const enterClassName = enterNodeMapIds.get(element);\n        const instruction = this._buildInstruction(entry, subTimelines, enterClassName, leaveClassName, nodeIsOrphaned);\n        if (instruction.errors && instruction.errors.length) {\n          erroneousTransitions.push(instruction);\n          return;\n        }\n        // even though the element may not be in the DOM, it may still\n        // be added at a later point (due to the mechanics of content\n        // projection and/or dynamic component insertion) therefore it's\n        // important to still style the element.\n        if (nodeIsOrphaned) {\n          player.onStart(() => eraseStyles(element, instruction.fromStyles));\n          player.onDestroy(() => setStyles(element, instruction.toStyles));\n          skippedPlayers.push(player);\n          return;\n        }\n        // if an unmatched transition is queued and ready to go\n        // then it SHOULD NOT render an animation and cancel the\n        // previously running animations.\n        if (entry.isFallbackTransition) {\n          player.onStart(() => eraseStyles(element, instruction.fromStyles));\n          player.onDestroy(() => setStyles(element, instruction.toStyles));\n          skippedPlayers.push(player);\n          return;\n        }\n        // this means that if a parent animation uses this animation as a sub-trigger\n        // then it will instruct the timeline builder not to add a player delay, but\n        // instead stretch the first keyframe gap until the animation starts. This is\n        // important in order to prevent extra initialization styles from being\n        // required by the user for the animation.\n        const timelines = [];\n        instruction.timelines.forEach(tl => {\n          tl.stretchStartingKeyframe = true;\n          if (!this.disabledNodes.has(tl.element)) {\n            timelines.push(tl);\n          }\n        });\n        instruction.timelines = timelines;\n        subTimelines.append(element, instruction.timelines);\n        const tuple = {\n          instruction,\n          player,\n          element\n        };\n        queuedInstructions.push(tuple);\n        instruction.queriedElements.forEach(element => getOrSetDefaultValue(queriedElements, element, []).push(player));\n        instruction.preStyleProps.forEach((stringMap, element) => {\n          if (stringMap.size) {\n            let setVal = allPreStyleElements.get(element);\n            if (!setVal) {\n              allPreStyleElements.set(element, setVal = new Set());\n            }\n            stringMap.forEach((_, prop) => setVal.add(prop));\n          }\n        });\n        instruction.postStyleProps.forEach((stringMap, element) => {\n          let setVal = allPostStyleElements.get(element);\n          if (!setVal) {\n            allPostStyleElements.set(element, setVal = new Set());\n          }\n          stringMap.forEach((_, prop) => setVal.add(prop));\n        });\n      });\n    }\n    if (erroneousTransitions.length) {\n      const errors = [];\n      erroneousTransitions.forEach(instruction => {\n        errors.push(transitionFailed(instruction.triggerName, instruction.errors));\n      });\n      allPlayers.forEach(player => player.destroy());\n      this.reportError(errors);\n    }\n    const allPreviousPlayersMap = new Map();\n    // this map tells us which element in the DOM tree is contained by\n    // which animation. Further down this map will get populated once\n    // the players are built and in doing so we can use it to efficiently\n    // figure out if a sub player is skipped due to a parent player having priority.\n    const animationElementMap = new Map();\n    queuedInstructions.forEach(entry => {\n      const element = entry.element;\n      if (subTimelines.has(element)) {\n        animationElementMap.set(element, element);\n        this._beforeAnimationBuild(entry.player.namespaceId, entry.instruction, allPreviousPlayersMap);\n      }\n    });\n    skippedPlayers.forEach(player => {\n      const element = player.element;\n      const previousPlayers = this._getPreviousPlayers(element, false, player.namespaceId, player.triggerName, null);\n      previousPlayers.forEach(prevPlayer => {\n        getOrSetDefaultValue(allPreviousPlayersMap, element, []).push(prevPlayer);\n        prevPlayer.destroy();\n      });\n    });\n    // this is a special case for nodes that will be removed either by\n    // having their own leave animations or by being queried in a container\n    // that will be removed once a parent animation is complete. The idea\n    // here is that * styles must be identical to ! styles because of\n    // backwards compatibility (* is also filled in by default in many places).\n    // Otherwise * styles will return an empty value or \"auto\" since the element\n    // passed to getComputedStyle will not be visible (since * === destination)\n    const replaceNodes = allLeaveNodes.filter(node => {\n      return replacePostStylesAsPre(node, allPreStyleElements, allPostStyleElements);\n    });\n    // POST STAGE: fill the * styles\n    const postStylesMap = new Map();\n    const allLeaveQueriedNodes = cloakAndComputeStyles(postStylesMap, this.driver, leaveNodesWithoutAnimations, allPostStyleElements, AUTO_STYLE);\n    allLeaveQueriedNodes.forEach(node => {\n      if (replacePostStylesAsPre(node, allPreStyleElements, allPostStyleElements)) {\n        replaceNodes.push(node);\n      }\n    });\n    // PRE STAGE: fill the ! styles\n    const preStylesMap = new Map();\n    enterNodeMap.forEach((nodes, root) => {\n      cloakAndComputeStyles(preStylesMap, this.driver, new Set(nodes), allPreStyleElements, ɵPRE_STYLE);\n    });\n    replaceNodes.forEach(node => {\n      const post = postStylesMap.get(node);\n      const pre = preStylesMap.get(node);\n      postStylesMap.set(node, new Map([...(post?.entries() ?? []), ...(pre?.entries() ?? [])]));\n    });\n    const rootPlayers = [];\n    const subPlayers = [];\n    const NO_PARENT_ANIMATION_ELEMENT_DETECTED = {};\n    queuedInstructions.forEach(entry => {\n      const {\n        element,\n        player,\n        instruction\n      } = entry;\n      // this means that it was never consumed by a parent animation which\n      // means that it is independent and therefore should be set for animation\n      if (subTimelines.has(element)) {\n        if (disabledElementsSet.has(element)) {\n          player.onDestroy(() => setStyles(element, instruction.toStyles));\n          player.disabled = true;\n          player.overrideTotalTime(instruction.totalTime);\n          skippedPlayers.push(player);\n          return;\n        }\n        // this will flow up the DOM and query the map to figure out\n        // if a parent animation has priority over it. In the situation\n        // that a parent is detected then it will cancel the loop. If\n        // nothing is detected, or it takes a few hops to find a parent,\n        // then it will fill in the missing nodes and signal them as having\n        // a detected parent (or a NO_PARENT value via a special constant).\n        let parentWithAnimation = NO_PARENT_ANIMATION_ELEMENT_DETECTED;\n        if (animationElementMap.size > 1) {\n          let elm = element;\n          const parentsToAdd = [];\n          while (elm = elm.parentNode) {\n            const detectedParent = animationElementMap.get(elm);\n            if (detectedParent) {\n              parentWithAnimation = detectedParent;\n              break;\n            }\n            parentsToAdd.push(elm);\n          }\n          parentsToAdd.forEach(parent => animationElementMap.set(parent, parentWithAnimation));\n        }\n        const innerPlayer = this._buildAnimation(player.namespaceId, instruction, allPreviousPlayersMap, skippedPlayersMap, preStylesMap, postStylesMap);\n        player.setRealPlayer(innerPlayer);\n        if (parentWithAnimation === NO_PARENT_ANIMATION_ELEMENT_DETECTED) {\n          rootPlayers.push(player);\n        } else {\n          const parentPlayers = this.playersByElement.get(parentWithAnimation);\n          if (parentPlayers && parentPlayers.length) {\n            player.parentPlayer = optimizeGroupPlayer(parentPlayers);\n          }\n          skippedPlayers.push(player);\n        }\n      } else {\n        eraseStyles(element, instruction.fromStyles);\n        player.onDestroy(() => setStyles(element, instruction.toStyles));\n        // there still might be a ancestor player animating this\n        // element therefore we will still add it as a sub player\n        // even if its animation may be disabled\n        subPlayers.push(player);\n        if (disabledElementsSet.has(element)) {\n          skippedPlayers.push(player);\n        }\n      }\n    });\n    // find all of the sub players' corresponding inner animation players\n    subPlayers.forEach(player => {\n      // even if no players are found for a sub animation it\n      // will still complete itself after the next tick since it's Noop\n      const playersForElement = skippedPlayersMap.get(player.element);\n      if (playersForElement && playersForElement.length) {\n        const innerPlayer = optimizeGroupPlayer(playersForElement);\n        player.setRealPlayer(innerPlayer);\n      }\n    });\n    // the reason why we don't actually play the animation is\n    // because all that a skipped player is designed to do is to\n    // fire the start/done transition callback events\n    skippedPlayers.forEach(player => {\n      if (player.parentPlayer) {\n        player.syncPlayerEvents(player.parentPlayer);\n      } else {\n        player.destroy();\n      }\n    });\n    // run through all of the queued removals and see if they\n    // were picked up by a query. If not then perform the removal\n    // operation right away unless a parent animation is ongoing.\n    for (let i = 0; i < allLeaveNodes.length; i++) {\n      const element = allLeaveNodes[i];\n      const details = element[REMOVAL_FLAG];\n      removeClass(element, LEAVE_CLASSNAME);\n      // this means the element has a removal animation that is being\n      // taken care of and therefore the inner elements will hang around\n      // until that animation is over (or the parent queried animation)\n      if (details && details.hasAnimation) continue;\n      let players = [];\n      // if this element is queried or if it contains queried children\n      // then we want for the element not to be removed from the page\n      // until the queried animations have finished\n      if (queriedElements.size) {\n        let queriedPlayerResults = queriedElements.get(element);\n        if (queriedPlayerResults && queriedPlayerResults.length) {\n          players.push(...queriedPlayerResults);\n        }\n        let queriedInnerElements = this.driver.query(element, NG_ANIMATING_SELECTOR, true);\n        for (let j = 0; j < queriedInnerElements.length; j++) {\n          let queriedPlayers = queriedElements.get(queriedInnerElements[j]);\n          if (queriedPlayers && queriedPlayers.length) {\n            players.push(...queriedPlayers);\n          }\n        }\n      }\n      const activePlayers = players.filter(p => !p.destroyed);\n      if (activePlayers.length) {\n        removeNodesAfterAnimationDone(this, element, activePlayers);\n      } else {\n        this.processLeaveNode(element);\n      }\n    }\n    // this is required so the cleanup method doesn't remove them\n    allLeaveNodes.length = 0;\n    rootPlayers.forEach(player => {\n      this.players.push(player);\n      player.onDone(() => {\n        player.destroy();\n        const index = this.players.indexOf(player);\n        this.players.splice(index, 1);\n      });\n      player.play();\n    });\n    return rootPlayers;\n  }\n  afterFlush(callback) {\n    this._flushFns.push(callback);\n  }\n  afterFlushAnimationsDone(callback) {\n    this._whenQuietFns.push(callback);\n  }\n  _getPreviousPlayers(element, isQueriedElement, namespaceId, triggerName, toStateValue) {\n    let players = [];\n    if (isQueriedElement) {\n      const queriedElementPlayers = this.playersByQueriedElement.get(element);\n      if (queriedElementPlayers) {\n        players = queriedElementPlayers;\n      }\n    } else {\n      const elementPlayers = this.playersByElement.get(element);\n      if (elementPlayers) {\n        const isRemovalAnimation = !toStateValue || toStateValue == VOID_VALUE;\n        elementPlayers.forEach(player => {\n          if (player.queued) return;\n          if (!isRemovalAnimation && player.triggerName != triggerName) return;\n          players.push(player);\n        });\n      }\n    }\n    if (namespaceId || triggerName) {\n      players = players.filter(player => {\n        if (namespaceId && namespaceId != player.namespaceId) return false;\n        if (triggerName && triggerName != player.triggerName) return false;\n        return true;\n      });\n    }\n    return players;\n  }\n  _beforeAnimationBuild(namespaceId, instruction, allPreviousPlayersMap) {\n    const triggerName = instruction.triggerName;\n    const rootElement = instruction.element;\n    // when a removal animation occurs, ALL previous players are collected\n    // and destroyed (even if they are outside of the current namespace)\n    const targetNameSpaceId = instruction.isRemovalTransition ? undefined : namespaceId;\n    const targetTriggerName = instruction.isRemovalTransition ? undefined : triggerName;\n    for (const timelineInstruction of instruction.timelines) {\n      const element = timelineInstruction.element;\n      const isQueriedElement = element !== rootElement;\n      const players = getOrSetDefaultValue(allPreviousPlayersMap, element, []);\n      const previousPlayers = this._getPreviousPlayers(element, isQueriedElement, targetNameSpaceId, targetTriggerName, instruction.toState);\n      previousPlayers.forEach(player => {\n        const realPlayer = player.getRealPlayer();\n        if (realPlayer.beforeDestroy) {\n          realPlayer.beforeDestroy();\n        }\n        player.destroy();\n        players.push(player);\n      });\n    }\n    // this needs to be done so that the PRE/POST styles can be\n    // computed properly without interfering with the previous animation\n    eraseStyles(rootElement, instruction.fromStyles);\n  }\n  _buildAnimation(namespaceId, instruction, allPreviousPlayersMap, skippedPlayersMap, preStylesMap, postStylesMap) {\n    const triggerName = instruction.triggerName;\n    const rootElement = instruction.element;\n    // we first run this so that the previous animation player\n    // data can be passed into the successive animation players\n    const allQueriedPlayers = [];\n    const allConsumedElements = new Set();\n    const allSubElements = new Set();\n    const allNewPlayers = instruction.timelines.map(timelineInstruction => {\n      const element = timelineInstruction.element;\n      allConsumedElements.add(element);\n      // FIXME (matsko): make sure to-be-removed animations are removed properly\n      const details = element[REMOVAL_FLAG];\n      if (details && details.removedBeforeQueried) return new NoopAnimationPlayer(timelineInstruction.duration, timelineInstruction.delay);\n      const isQueriedElement = element !== rootElement;\n      const previousPlayers = flattenGroupPlayers((allPreviousPlayersMap.get(element) || EMPTY_PLAYER_ARRAY).map(p => p.getRealPlayer())).filter(p => {\n        // the `element` is not apart of the AnimationPlayer definition, but\n        // Mock/WebAnimations\n        // use the element within their implementation. This will be added in Angular5 to\n        // AnimationPlayer\n        const pp = p;\n        return pp.element ? pp.element === element : false;\n      });\n      const preStyles = preStylesMap.get(element);\n      const postStyles = postStylesMap.get(element);\n      const keyframes = normalizeKeyframes$1(this._normalizer, timelineInstruction.keyframes, preStyles, postStyles);\n      const player = this._buildPlayer(timelineInstruction, keyframes, previousPlayers);\n      // this means that this particular player belongs to a sub trigger. It is\n      // important that we match this player up with the corresponding (@trigger.listener)\n      if (timelineInstruction.subTimeline && skippedPlayersMap) {\n        allSubElements.add(element);\n      }\n      if (isQueriedElement) {\n        const wrappedPlayer = new TransitionAnimationPlayer(namespaceId, triggerName, element);\n        wrappedPlayer.setRealPlayer(player);\n        allQueriedPlayers.push(wrappedPlayer);\n      }\n      return player;\n    });\n    allQueriedPlayers.forEach(player => {\n      getOrSetDefaultValue(this.playersByQueriedElement, player.element, []).push(player);\n      player.onDone(() => deleteOrUnsetInMap(this.playersByQueriedElement, player.element, player));\n    });\n    allConsumedElements.forEach(element => addClass(element, NG_ANIMATING_CLASSNAME));\n    const player = optimizeGroupPlayer(allNewPlayers);\n    player.onDestroy(() => {\n      allConsumedElements.forEach(element => removeClass(element, NG_ANIMATING_CLASSNAME));\n      setStyles(rootElement, instruction.toStyles);\n    });\n    // this basically makes all of the callbacks for sub element animations\n    // be dependent on the upper players for when they finish\n    allSubElements.forEach(element => {\n      getOrSetDefaultValue(skippedPlayersMap, element, []).push(player);\n    });\n    return player;\n  }\n  _buildPlayer(instruction, keyframes, previousPlayers) {\n    if (keyframes.length > 0) {\n      return this.driver.animate(instruction.element, keyframes, instruction.duration, instruction.delay, instruction.easing, previousPlayers);\n    }\n    // special case for when an empty transition|definition is provided\n    // ... there is no point in rendering an empty animation\n    return new NoopAnimationPlayer(instruction.duration, instruction.delay);\n  }\n}\nclass TransitionAnimationPlayer {\n  constructor(namespaceId, triggerName, element) {\n    this.namespaceId = namespaceId;\n    this.triggerName = triggerName;\n    this.element = element;\n    this._player = new NoopAnimationPlayer();\n    this._containsRealPlayer = false;\n    this._queuedCallbacks = new Map();\n    this.destroyed = false;\n    this.parentPlayer = null;\n    this.markedForDestroy = false;\n    this.disabled = false;\n    this.queued = true;\n    this.totalTime = 0;\n  }\n  setRealPlayer(player) {\n    if (this._containsRealPlayer) return;\n    this._player = player;\n    this._queuedCallbacks.forEach((callbacks, phase) => {\n      callbacks.forEach(callback => listenOnPlayer(player, phase, undefined, callback));\n    });\n    this._queuedCallbacks.clear();\n    this._containsRealPlayer = true;\n    this.overrideTotalTime(player.totalTime);\n    this.queued = false;\n  }\n  getRealPlayer() {\n    return this._player;\n  }\n  overrideTotalTime(totalTime) {\n    this.totalTime = totalTime;\n  }\n  syncPlayerEvents(player) {\n    const p = this._player;\n    if (p.triggerCallback) {\n      player.onStart(() => p.triggerCallback('start'));\n    }\n    player.onDone(() => this.finish());\n    player.onDestroy(() => this.destroy());\n  }\n  _queueEvent(name, callback) {\n    getOrSetDefaultValue(this._queuedCallbacks, name, []).push(callback);\n  }\n  onDone(fn) {\n    if (this.queued) {\n      this._queueEvent('done', fn);\n    }\n    this._player.onDone(fn);\n  }\n  onStart(fn) {\n    if (this.queued) {\n      this._queueEvent('start', fn);\n    }\n    this._player.onStart(fn);\n  }\n  onDestroy(fn) {\n    if (this.queued) {\n      this._queueEvent('destroy', fn);\n    }\n    this._player.onDestroy(fn);\n  }\n  init() {\n    this._player.init();\n  }\n  hasStarted() {\n    return this.queued ? false : this._player.hasStarted();\n  }\n  play() {\n    !this.queued && this._player.play();\n  }\n  pause() {\n    !this.queued && this._player.pause();\n  }\n  restart() {\n    !this.queued && this._player.restart();\n  }\n  finish() {\n    this._player.finish();\n  }\n  destroy() {\n    this.destroyed = true;\n    this._player.destroy();\n  }\n  reset() {\n    !this.queued && this._player.reset();\n  }\n  setPosition(p) {\n    if (!this.queued) {\n      this._player.setPosition(p);\n    }\n  }\n  getPosition() {\n    return this.queued ? 0 : this._player.getPosition();\n  }\n  /** @internal */\n  triggerCallback(phaseName) {\n    const p = this._player;\n    if (p.triggerCallback) {\n      p.triggerCallback(phaseName);\n    }\n  }\n}\nfunction deleteOrUnsetInMap(map, key, value) {\n  let currentValues = map.get(key);\n  if (currentValues) {\n    if (currentValues.length) {\n      const index = currentValues.indexOf(value);\n      currentValues.splice(index, 1);\n    }\n    if (currentValues.length == 0) {\n      map.delete(key);\n    }\n  }\n  return currentValues;\n}\nfunction normalizeTriggerValue(value) {\n  // we use `!= null` here because it's the most simple\n  // way to test against a \"falsy\" value without mixing\n  // in empty strings or a zero value. DO NOT OPTIMIZE.\n  return value != null ? value : null;\n}\nfunction isElementNode(node) {\n  return node && node['nodeType'] === 1;\n}\nfunction isTriggerEventValid(eventName) {\n  return eventName == 'start' || eventName == 'done';\n}\nfunction cloakElement(element, value) {\n  const oldValue = element.style.display;\n  element.style.display = value != null ? value : 'none';\n  return oldValue;\n}\nfunction cloakAndComputeStyles(valuesMap, driver, elements, elementPropsMap, defaultStyle) {\n  const cloakVals = [];\n  elements.forEach(element => cloakVals.push(cloakElement(element)));\n  const failedElements = [];\n  elementPropsMap.forEach((props, element) => {\n    const styles = new Map();\n    props.forEach(prop => {\n      const value = driver.computeStyle(element, prop, defaultStyle);\n      styles.set(prop, value);\n      // there is no easy way to detect this because a sub element could be removed\n      // by a parent animation element being detached.\n      if (!value || value.length == 0) {\n        element[REMOVAL_FLAG] = NULL_REMOVED_QUERIED_STATE;\n        failedElements.push(element);\n      }\n    });\n    valuesMap.set(element, styles);\n  });\n  // we use a index variable here since Set.forEach(a, i) does not return\n  // an index value for the closure (but instead just the value)\n  let i = 0;\n  elements.forEach(element => cloakElement(element, cloakVals[i++]));\n  return failedElements;\n}\n/*\nSince the Angular renderer code will return a collection of inserted\nnodes in all areas of a DOM tree, it's up to this algorithm to figure\nout which nodes are roots for each animation @trigger.\n\nBy placing each inserted node into a Set and traversing upwards, it\nis possible to find the @trigger elements and well any direct *star\ninsertion nodes, if a @trigger root is found then the enter element\nis placed into the Map[@trigger] spot.\n */\nfunction buildRootMap(roots, nodes) {\n  const rootMap = new Map();\n  roots.forEach(root => rootMap.set(root, []));\n  if (nodes.length == 0) return rootMap;\n  const NULL_NODE = 1;\n  const nodeSet = new Set(nodes);\n  const localRootMap = new Map();\n  function getRoot(node) {\n    if (!node) return NULL_NODE;\n    let root = localRootMap.get(node);\n    if (root) return root;\n    const parent = node.parentNode;\n    if (rootMap.has(parent)) {\n      // ngIf inside @trigger\n      root = parent;\n    } else if (nodeSet.has(parent)) {\n      // ngIf inside ngIf\n      root = NULL_NODE;\n    } else {\n      // recurse upwards\n      root = getRoot(parent);\n    }\n    localRootMap.set(node, root);\n    return root;\n  }\n  nodes.forEach(node => {\n    const root = getRoot(node);\n    if (root !== NULL_NODE) {\n      rootMap.get(root).push(node);\n    }\n  });\n  return rootMap;\n}\nfunction addClass(element, className) {\n  element.classList?.add(className);\n}\nfunction removeClass(element, className) {\n  element.classList?.remove(className);\n}\nfunction removeNodesAfterAnimationDone(engine, element, players) {\n  optimizeGroupPlayer(players).onDone(() => engine.processLeaveNode(element));\n}\nfunction flattenGroupPlayers(players) {\n  const finalPlayers = [];\n  _flattenGroupPlayersRecur(players, finalPlayers);\n  return finalPlayers;\n}\nfunction _flattenGroupPlayersRecur(players, finalPlayers) {\n  for (let i = 0; i < players.length; i++) {\n    const player = players[i];\n    if (player instanceof ɵAnimationGroupPlayer) {\n      _flattenGroupPlayersRecur(player.players, finalPlayers);\n    } else {\n      finalPlayers.push(player);\n    }\n  }\n}\nfunction objEquals(a, b) {\n  const k1 = Object.keys(a);\n  const k2 = Object.keys(b);\n  if (k1.length != k2.length) return false;\n  for (let i = 0; i < k1.length; i++) {\n    const prop = k1[i];\n    if (!b.hasOwnProperty(prop) || a[prop] !== b[prop]) return false;\n  }\n  return true;\n}\nfunction replacePostStylesAsPre(element, allPreStyleElements, allPostStyleElements) {\n  const postEntry = allPostStyleElements.get(element);\n  if (!postEntry) return false;\n  let preEntry = allPreStyleElements.get(element);\n  if (preEntry) {\n    postEntry.forEach(data => preEntry.add(data));\n  } else {\n    allPreStyleElements.set(element, postEntry);\n  }\n  allPostStyleElements.delete(element);\n  return true;\n}\nclass AnimationEngine {\n  constructor(doc, _driver, _normalizer) {\n    this._driver = _driver;\n    this._normalizer = _normalizer;\n    this._triggerCache = {};\n    // this method is designed to be overridden by the code that uses this engine\n    this.onRemovalComplete = (element, context) => {};\n    this._transitionEngine = new TransitionAnimationEngine(doc.body, _driver, _normalizer);\n    this._timelineEngine = new TimelineAnimationEngine(doc.body, _driver, _normalizer);\n    this._transitionEngine.onRemovalComplete = (element, context) => this.onRemovalComplete(element, context);\n  }\n  registerTrigger(componentId, namespaceId, hostElement, name, metadata) {\n    const cacheKey = componentId + '-' + name;\n    let trigger = this._triggerCache[cacheKey];\n    if (!trigger) {\n      const errors = [];\n      const warnings = [];\n      const ast = buildAnimationAst(this._driver, metadata, errors, warnings);\n      if (errors.length) {\n        throw triggerBuildFailed(name, errors);\n      }\n      if (warnings.length) {\n        warnTriggerBuild(name, warnings);\n      }\n      trigger = buildTrigger(name, ast, this._normalizer);\n      this._triggerCache[cacheKey] = trigger;\n    }\n    this._transitionEngine.registerTrigger(namespaceId, name, trigger);\n  }\n  register(namespaceId, hostElement) {\n    this._transitionEngine.register(namespaceId, hostElement);\n  }\n  destroy(namespaceId, context) {\n    this._transitionEngine.destroy(namespaceId, context);\n  }\n  onInsert(namespaceId, element, parent, insertBefore) {\n    this._transitionEngine.insertNode(namespaceId, element, parent, insertBefore);\n  }\n  onRemove(namespaceId, element, context) {\n    this._transitionEngine.removeNode(namespaceId, element, context);\n  }\n  disableAnimations(element, disable) {\n    this._transitionEngine.markElementAsDisabled(element, disable);\n  }\n  process(namespaceId, element, property, value) {\n    if (property.charAt(0) == '@') {\n      const [id, action] = parseTimelineCommand(property);\n      const args = value;\n      this._timelineEngine.command(id, element, action, args);\n    } else {\n      this._transitionEngine.trigger(namespaceId, element, property, value);\n    }\n  }\n  listen(namespaceId, element, eventName, eventPhase, callback) {\n    // @@listen\n    if (eventName.charAt(0) == '@') {\n      const [id, action] = parseTimelineCommand(eventName);\n      return this._timelineEngine.listen(id, element, action, callback);\n    }\n    return this._transitionEngine.listen(namespaceId, element, eventName, eventPhase, callback);\n  }\n  flush(microtaskId = -1) {\n    this._transitionEngine.flush(microtaskId);\n  }\n  get players() {\n    return [...this._transitionEngine.players, ...this._timelineEngine.players];\n  }\n  whenRenderingDone() {\n    return this._transitionEngine.whenRenderingDone();\n  }\n  afterFlushAnimationsDone(cb) {\n    this._transitionEngine.afterFlushAnimationsDone(cb);\n  }\n}\n\n/**\n * Returns an instance of `SpecialCasedStyles` if and when any special (non animateable) styles are\n * detected.\n *\n * In CSS there exist properties that cannot be animated within a keyframe animation\n * (whether it be via CSS keyframes or web-animations) and the animation implementation\n * will ignore them. This function is designed to detect those special cased styles and\n * return a container that will be executed at the start and end of the animation.\n *\n * @returns an instance of `SpecialCasedStyles` if any special styles are detected otherwise `null`\n */\nfunction packageNonAnimatableStyles(element, styles) {\n  let startStyles = null;\n  let endStyles = null;\n  if (Array.isArray(styles) && styles.length) {\n    startStyles = filterNonAnimatableStyles(styles[0]);\n    if (styles.length > 1) {\n      endStyles = filterNonAnimatableStyles(styles[styles.length - 1]);\n    }\n  } else if (styles instanceof Map) {\n    startStyles = filterNonAnimatableStyles(styles);\n  }\n  return startStyles || endStyles ? new SpecialCasedStyles(element, startStyles, endStyles) : null;\n}\n/**\n * Designed to be executed during a keyframe-based animation to apply any special-cased styles.\n *\n * When started (when the `start()` method is run) then the provided `startStyles`\n * will be applied. When finished (when the `finish()` method is called) the\n * `endStyles` will be applied as well any any starting styles. Finally when\n * `destroy()` is called then all styles will be removed.\n */\nclass SpecialCasedStyles {\n  static {\n    this.initialStylesByElement = new WeakMap();\n  }\n  constructor(_element, _startStyles, _endStyles) {\n    this._element = _element;\n    this._startStyles = _startStyles;\n    this._endStyles = _endStyles;\n    this._state = 0 /* SpecialCasedStylesState.Pending */;\n    let initialStyles = SpecialCasedStyles.initialStylesByElement.get(_element);\n    if (!initialStyles) {\n      SpecialCasedStyles.initialStylesByElement.set(_element, initialStyles = new Map());\n    }\n    this._initialStyles = initialStyles;\n  }\n  start() {\n    if (this._state < 1 /* SpecialCasedStylesState.Started */) {\n      if (this._startStyles) {\n        setStyles(this._element, this._startStyles, this._initialStyles);\n      }\n      this._state = 1 /* SpecialCasedStylesState.Started */;\n    }\n  }\n  finish() {\n    this.start();\n    if (this._state < 2 /* SpecialCasedStylesState.Finished */) {\n      setStyles(this._element, this._initialStyles);\n      if (this._endStyles) {\n        setStyles(this._element, this._endStyles);\n        this._endStyles = null;\n      }\n      this._state = 1 /* SpecialCasedStylesState.Started */;\n    }\n  }\n  destroy() {\n    this.finish();\n    if (this._state < 3 /* SpecialCasedStylesState.Destroyed */) {\n      SpecialCasedStyles.initialStylesByElement.delete(this._element);\n      if (this._startStyles) {\n        eraseStyles(this._element, this._startStyles);\n        this._endStyles = null;\n      }\n      if (this._endStyles) {\n        eraseStyles(this._element, this._endStyles);\n        this._endStyles = null;\n      }\n      setStyles(this._element, this._initialStyles);\n      this._state = 3 /* SpecialCasedStylesState.Destroyed */;\n    }\n  }\n}\nfunction filterNonAnimatableStyles(styles) {\n  let result = null;\n  styles.forEach((val, prop) => {\n    if (isNonAnimatableStyle(prop)) {\n      result = result || new Map();\n      result.set(prop, val);\n    }\n  });\n  return result;\n}\nfunction isNonAnimatableStyle(prop) {\n  return prop === 'display' || prop === 'position';\n}\nclass WebAnimationsPlayer {\n  constructor(element, keyframes, options, _specialStyles) {\n    this.element = element;\n    this.keyframes = keyframes;\n    this.options = options;\n    this._specialStyles = _specialStyles;\n    this._onDoneFns = [];\n    this._onStartFns = [];\n    this._onDestroyFns = [];\n    this._initialized = false;\n    this._finished = false;\n    this._started = false;\n    this._destroyed = false;\n    // the following original fns are persistent copies of the _onStartFns and _onDoneFns\n    // and are used to reset the fns to their original values upon reset()\n    // (since the _onStartFns and _onDoneFns get deleted after they are called)\n    this._originalOnDoneFns = [];\n    this._originalOnStartFns = [];\n    this.time = 0;\n    this.parentPlayer = null;\n    this.currentSnapshot = new Map();\n    this._duration = options['duration'];\n    this._delay = options['delay'] || 0;\n    this.time = this._duration + this._delay;\n  }\n  _onFinish() {\n    if (!this._finished) {\n      this._finished = true;\n      this._onDoneFns.forEach(fn => fn());\n      this._onDoneFns = [];\n    }\n  }\n  init() {\n    this._buildPlayer();\n    this._preparePlayerBeforeStart();\n  }\n  _buildPlayer() {\n    if (this._initialized) return;\n    this._initialized = true;\n    const keyframes = this.keyframes;\n    // @ts-expect-error overwriting a readonly property\n    this.domPlayer = this._triggerWebAnimation(this.element, keyframes, this.options);\n    this._finalKeyframe = keyframes.length ? keyframes[keyframes.length - 1] : new Map();\n    const onFinish = () => this._onFinish();\n    this.domPlayer.addEventListener('finish', onFinish);\n    this.onDestroy(() => {\n      // We must remove the `finish` event listener once an animation has completed all its\n      // iterations. This action is necessary to prevent a memory leak since the listener captures\n      // `this`, creating a closure that prevents `this` from being garbage collected.\n      this.domPlayer.removeEventListener('finish', onFinish);\n    });\n  }\n  _preparePlayerBeforeStart() {\n    // this is required so that the player doesn't start to animate right away\n    if (this._delay) {\n      this._resetDomPlayerState();\n    } else {\n      this.domPlayer.pause();\n    }\n  }\n  _convertKeyframesToObject(keyframes) {\n    const kfs = [];\n    keyframes.forEach(frame => {\n      kfs.push(Object.fromEntries(frame));\n    });\n    return kfs;\n  }\n  /** @internal */\n  _triggerWebAnimation(element, keyframes, options) {\n    return element.animate(this._convertKeyframesToObject(keyframes), options);\n  }\n  onStart(fn) {\n    this._originalOnStartFns.push(fn);\n    this._onStartFns.push(fn);\n  }\n  onDone(fn) {\n    this._originalOnDoneFns.push(fn);\n    this._onDoneFns.push(fn);\n  }\n  onDestroy(fn) {\n    this._onDestroyFns.push(fn);\n  }\n  play() {\n    this._buildPlayer();\n    if (!this.hasStarted()) {\n      this._onStartFns.forEach(fn => fn());\n      this._onStartFns = [];\n      this._started = true;\n      if (this._specialStyles) {\n        this._specialStyles.start();\n      }\n    }\n    this.domPlayer.play();\n  }\n  pause() {\n    this.init();\n    this.domPlayer.pause();\n  }\n  finish() {\n    this.init();\n    if (this._specialStyles) {\n      this._specialStyles.finish();\n    }\n    this._onFinish();\n    this.domPlayer.finish();\n  }\n  reset() {\n    this._resetDomPlayerState();\n    this._destroyed = false;\n    this._finished = false;\n    this._started = false;\n    this._onStartFns = this._originalOnStartFns;\n    this._onDoneFns = this._originalOnDoneFns;\n  }\n  _resetDomPlayerState() {\n    if (this.domPlayer) {\n      this.domPlayer.cancel();\n    }\n  }\n  restart() {\n    this.reset();\n    this.play();\n  }\n  hasStarted() {\n    return this._started;\n  }\n  destroy() {\n    if (!this._destroyed) {\n      this._destroyed = true;\n      this._resetDomPlayerState();\n      this._onFinish();\n      if (this._specialStyles) {\n        this._specialStyles.destroy();\n      }\n      this._onDestroyFns.forEach(fn => fn());\n      this._onDestroyFns = [];\n    }\n  }\n  setPosition(p) {\n    if (this.domPlayer === undefined) {\n      this.init();\n    }\n    this.domPlayer.currentTime = p * this.time;\n  }\n  getPosition() {\n    // tsc is complaining with TS2362 without the conversion to number\n    return +(this.domPlayer.currentTime ?? 0) / this.time;\n  }\n  get totalTime() {\n    return this._delay + this._duration;\n  }\n  beforeDestroy() {\n    const styles = new Map();\n    if (this.hasStarted()) {\n      // note: this code is invoked only when the `play` function was called prior to this\n      // (thus `hasStarted` returns true), this implies that the code that initializes\n      // `_finalKeyframe` has also been executed and the non-null assertion can be safely used here\n      const finalKeyframe = this._finalKeyframe;\n      finalKeyframe.forEach((val, prop) => {\n        if (prop !== 'offset') {\n          styles.set(prop, this._finished ? val : computeStyle(this.element, prop));\n        }\n      });\n    }\n    this.currentSnapshot = styles;\n  }\n  /** @internal */\n  triggerCallback(phaseName) {\n    const methods = phaseName === 'start' ? this._onStartFns : this._onDoneFns;\n    methods.forEach(fn => fn());\n    methods.length = 0;\n  }\n}\nclass WebAnimationsDriver {\n  validateStyleProperty(prop) {\n    // Perform actual validation in dev mode only, in prod mode this check is a noop.\n    if (typeof ngDevMode === 'undefined' || ngDevMode) {\n      return validateStyleProperty(prop);\n    }\n    return true;\n  }\n  validateAnimatableStyleProperty(prop) {\n    // Perform actual validation in dev mode only, in prod mode this check is a noop.\n    if (typeof ngDevMode === 'undefined' || ngDevMode) {\n      const cssProp = camelCaseToDashCase(prop);\n      return validateWebAnimatableStyleProperty(cssProp);\n    }\n    return true;\n  }\n  containsElement(elm1, elm2) {\n    return containsElement(elm1, elm2);\n  }\n  getParentElement(element) {\n    return getParentElement(element);\n  }\n  query(element, selector, multi) {\n    return invokeQuery(element, selector, multi);\n  }\n  computeStyle(element, prop, defaultValue) {\n    return computeStyle(element, prop);\n  }\n  animate(element, keyframes, duration, delay, easing, previousPlayers = []) {\n    const fill = delay == 0 ? 'both' : 'forwards';\n    const playerOptions = {\n      duration,\n      delay,\n      fill\n    };\n    // we check for this to avoid having a null|undefined value be present\n    // for the easing (which results in an error for certain browsers #9752)\n    if (easing) {\n      playerOptions['easing'] = easing;\n    }\n    const previousStyles = new Map();\n    const previousWebAnimationPlayers = previousPlayers.filter(player => player instanceof WebAnimationsPlayer);\n    if (allowPreviousPlayerStylesMerge(duration, delay)) {\n      previousWebAnimationPlayers.forEach(player => {\n        player.currentSnapshot.forEach((val, prop) => previousStyles.set(prop, val));\n      });\n    }\n    let _keyframes = normalizeKeyframes(keyframes).map(styles => new Map(styles));\n    _keyframes = balancePreviousStylesIntoKeyframes(element, _keyframes, previousStyles);\n    const specialStyles = packageNonAnimatableStyles(element, _keyframes);\n    return new WebAnimationsPlayer(element, _keyframes, playerOptions, specialStyles);\n  }\n}\nfunction createEngine(type, doc) {\n  // TODO: find a way to make this tree shakable.\n  if (type === 'noop') {\n    return new AnimationEngine(doc, new NoopAnimationDriver(), new NoopAnimationStyleNormalizer());\n  }\n  return new AnimationEngine(doc, new WebAnimationsDriver(), new WebAnimationsStyleNormalizer());\n}\nclass Animation {\n  constructor(_driver, input) {\n    this._driver = _driver;\n    const errors = [];\n    const warnings = [];\n    const ast = buildAnimationAst(_driver, input, errors, warnings);\n    if (errors.length) {\n      throw validationFailed(errors);\n    }\n    if (warnings.length) {\n      warnValidation(warnings);\n    }\n    this._animationAst = ast;\n  }\n  buildTimelines(element, startingStyles, destinationStyles, options, subInstructions) {\n    const start = Array.isArray(startingStyles) ? normalizeStyles(startingStyles) : startingStyles;\n    const dest = Array.isArray(destinationStyles) ? normalizeStyles(destinationStyles) : destinationStyles;\n    const errors = [];\n    subInstructions = subInstructions || new ElementInstructionMap();\n    const result = buildAnimationTimelines(this._driver, element, this._animationAst, ENTER_CLASSNAME, LEAVE_CLASSNAME, start, dest, options, subInstructions, errors);\n    if (errors.length) {\n      throw buildingFailed(errors);\n    }\n    return result;\n  }\n}\nconst ANIMATION_PREFIX = '@';\nconst DISABLE_ANIMATIONS_FLAG = '@.disabled';\nclass BaseAnimationRenderer {\n  constructor(namespaceId, delegate, engine, _onDestroy) {\n    this.namespaceId = namespaceId;\n    this.delegate = delegate;\n    this.engine = engine;\n    this._onDestroy = _onDestroy;\n    // We need to explicitly type this property because of an api-extractor bug\n    // See https://github.com/microsoft/rushstack/issues/4390\n    this.ɵtype = 0 /* AnimationRendererType.Regular */;\n  }\n  get data() {\n    return this.delegate.data;\n  }\n  destroyNode(node) {\n    this.delegate.destroyNode?.(node);\n  }\n  destroy() {\n    this.engine.destroy(this.namespaceId, this.delegate);\n    this.engine.afterFlushAnimationsDone(() => {\n      // Call the renderer destroy method after the animations has finished as otherwise\n      // styles will be removed too early which will cause an unstyled animation.\n      queueMicrotask(() => {\n        this.delegate.destroy();\n      });\n    });\n    this._onDestroy?.();\n  }\n  createElement(name, namespace) {\n    return this.delegate.createElement(name, namespace);\n  }\n  createComment(value) {\n    return this.delegate.createComment(value);\n  }\n  createText(value) {\n    return this.delegate.createText(value);\n  }\n  appendChild(parent, newChild) {\n    this.delegate.appendChild(parent, newChild);\n    this.engine.onInsert(this.namespaceId, newChild, parent, false);\n  }\n  insertBefore(parent, newChild, refChild, isMove = true) {\n    this.delegate.insertBefore(parent, newChild, refChild);\n    // If `isMove` true than we should animate this insert.\n    this.engine.onInsert(this.namespaceId, newChild, parent, isMove);\n  }\n  removeChild(parent, oldChild, isHostElement) {\n    // Prior to the changes in #57203, this method wasn't being called at all by `core` if the child\n    // doesn't have a parent. There appears to be some animation-specific downstream logic that\n    // depends on the null check happening before the animation engine. This check keeps the old\n    // behavior while allowing `core` to not have to check for the parent element anymore.\n    if (this.parentNode(oldChild)) {\n      this.engine.onRemove(this.namespaceId, oldChild, this.delegate);\n    }\n  }\n  selectRootElement(selectorOrNode, preserveContent) {\n    return this.delegate.selectRootElement(selectorOrNode, preserveContent);\n  }\n  parentNode(node) {\n    return this.delegate.parentNode(node);\n  }\n  nextSibling(node) {\n    return this.delegate.nextSibling(node);\n  }\n  setAttribute(el, name, value, namespace) {\n    this.delegate.setAttribute(el, name, value, namespace);\n  }\n  removeAttribute(el, name, namespace) {\n    this.delegate.removeAttribute(el, name, namespace);\n  }\n  addClass(el, name) {\n    this.delegate.addClass(el, name);\n  }\n  removeClass(el, name) {\n    this.delegate.removeClass(el, name);\n  }\n  setStyle(el, style, value, flags) {\n    this.delegate.setStyle(el, style, value, flags);\n  }\n  removeStyle(el, style, flags) {\n    this.delegate.removeStyle(el, style, flags);\n  }\n  setProperty(el, name, value) {\n    if (name.charAt(0) == ANIMATION_PREFIX && name == DISABLE_ANIMATIONS_FLAG) {\n      this.disableAnimations(el, !!value);\n    } else {\n      this.delegate.setProperty(el, name, value);\n    }\n  }\n  setValue(node, value) {\n    this.delegate.setValue(node, value);\n  }\n  listen(target, eventName, callback) {\n    return this.delegate.listen(target, eventName, callback);\n  }\n  disableAnimations(element, value) {\n    this.engine.disableAnimations(element, value);\n  }\n}\nclass AnimationRenderer extends BaseAnimationRenderer {\n  constructor(factory, namespaceId, delegate, engine, onDestroy) {\n    super(namespaceId, delegate, engine, onDestroy);\n    this.factory = factory;\n    this.namespaceId = namespaceId;\n  }\n  setProperty(el, name, value) {\n    if (name.charAt(0) == ANIMATION_PREFIX) {\n      if (name.charAt(1) == '.' && name == DISABLE_ANIMATIONS_FLAG) {\n        value = value === undefined ? true : !!value;\n        this.disableAnimations(el, value);\n      } else {\n        this.engine.process(this.namespaceId, el, name.slice(1), value);\n      }\n    } else {\n      this.delegate.setProperty(el, name, value);\n    }\n  }\n  listen(target, eventName, callback) {\n    if (eventName.charAt(0) == ANIMATION_PREFIX) {\n      const element = resolveElementFromTarget(target);\n      let name = eventName.slice(1);\n      let phase = '';\n      // @listener.phase is for trigger animation callbacks\n      // @@listener is for animation builder callbacks\n      if (name.charAt(0) != ANIMATION_PREFIX) {\n        [name, phase] = parseTriggerCallbackName(name);\n      }\n      return this.engine.listen(this.namespaceId, element, name, phase, event => {\n        const countId = event['_data'] || -1;\n        this.factory.scheduleListenerCallback(countId, callback, event);\n      });\n    }\n    return this.delegate.listen(target, eventName, callback);\n  }\n}\nfunction resolveElementFromTarget(target) {\n  switch (target) {\n    case 'body':\n      return document.body;\n    case 'document':\n      return document;\n    case 'window':\n      return window;\n    default:\n      return target;\n  }\n}\nfunction parseTriggerCallbackName(triggerName) {\n  const dotIndex = triggerName.indexOf('.');\n  const trigger = triggerName.substring(0, dotIndex);\n  const phase = triggerName.slice(dotIndex + 1);\n  return [trigger, phase];\n}\nclass AnimationRendererFactory {\n  constructor(delegate, engine, _zone) {\n    this.delegate = delegate;\n    this.engine = engine;\n    this._zone = _zone;\n    this._currentId = 0;\n    this._microtaskId = 1;\n    this._animationCallbacksBuffer = [];\n    this._rendererCache = new Map();\n    this._cdRecurDepth = 0;\n    engine.onRemovalComplete = (element, delegate) => {\n      delegate?.removeChild(null, element);\n    };\n  }\n  createRenderer(hostElement, type) {\n    const EMPTY_NAMESPACE_ID = '';\n    // cache the delegates to find out which cached delegate can\n    // be used by which cached renderer\n    const delegate = this.delegate.createRenderer(hostElement, type);\n    if (!hostElement || !type?.data?.['animation']) {\n      const cache = this._rendererCache;\n      let renderer = cache.get(delegate);\n      if (!renderer) {\n        // Ensure that the renderer is removed from the cache on destroy\n        // since it may contain references to detached DOM nodes.\n        const onRendererDestroy = () => cache.delete(delegate);\n        renderer = new BaseAnimationRenderer(EMPTY_NAMESPACE_ID, delegate, this.engine, onRendererDestroy);\n        // only cache this result when the base renderer is used\n        cache.set(delegate, renderer);\n      }\n      return renderer;\n    }\n    const componentId = type.id;\n    const namespaceId = type.id + '-' + this._currentId;\n    this._currentId++;\n    this.engine.register(namespaceId, hostElement);\n    const registerTrigger = trigger => {\n      if (Array.isArray(trigger)) {\n        trigger.forEach(registerTrigger);\n      } else {\n        this.engine.registerTrigger(componentId, namespaceId, hostElement, trigger.name, trigger);\n      }\n    };\n    const animationTriggers = type.data['animation'];\n    animationTriggers.forEach(registerTrigger);\n    return new AnimationRenderer(this, namespaceId, delegate, this.engine);\n  }\n  begin() {\n    this._cdRecurDepth++;\n    if (this.delegate.begin) {\n      this.delegate.begin();\n    }\n  }\n  _scheduleCountTask() {\n    queueMicrotask(() => {\n      this._microtaskId++;\n    });\n  }\n  /** @internal */\n  scheduleListenerCallback(count, fn, data) {\n    if (count >= 0 && count < this._microtaskId) {\n      this._zone.run(() => fn(data));\n      return;\n    }\n    const animationCallbacksBuffer = this._animationCallbacksBuffer;\n    if (animationCallbacksBuffer.length == 0) {\n      queueMicrotask(() => {\n        this._zone.run(() => {\n          animationCallbacksBuffer.forEach(tuple => {\n            const [fn, data] = tuple;\n            fn(data);\n          });\n          this._animationCallbacksBuffer = [];\n        });\n      });\n    }\n    animationCallbacksBuffer.push([fn, data]);\n  }\n  end() {\n    this._cdRecurDepth--;\n    // this is to prevent animations from running twice when an inner\n    // component does CD when a parent component instead has inserted it\n    if (this._cdRecurDepth == 0) {\n      this._zone.runOutsideAngular(() => {\n        this._scheduleCountTask();\n        this.engine.flush(this._microtaskId);\n      });\n    }\n    if (this.delegate.end) {\n      this.delegate.end();\n    }\n  }\n  whenRenderingDone() {\n    return this.engine.whenRenderingDone();\n  }\n}\n\n/**\n * @module\n * @description\n * Entry point for all animation APIs of the animation browser package.\n */\n\n/**\n * @module\n * @description\n * Entry point for all public APIs of this package.\n */\n\n// This file is not used to build this module. It is only used during editing\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { AnimationDriver, NoopAnimationDriver, Animation as ɵAnimation, AnimationEngine as ɵAnimationEngine, AnimationRenderer as ɵAnimationRenderer, AnimationRendererFactory as ɵAnimationRendererFactory, AnimationStyleNormalizer as ɵAnimationStyleNormalizer, BaseAnimationRenderer as ɵBaseAnimationRenderer, NoopAnimationStyleNormalizer as ɵNoopAnimationStyleNormalizer, WebAnimationsDriver as ɵWebAnimationsDriver, WebAnimationsPlayer as ɵWebAnimationsPlayer, WebAnimationsStyleNormalizer as ɵWebAnimationsStyleNormalizer, allowPreviousPlayerStylesMerge as ɵallowPreviousPlayerStylesMerge, camelCaseToDashCase as ɵcamelCaseToDashCase, containsElement as ɵcontainsElement, createEngine as ɵcreateEngine, getParentElement as ɵgetParentElement, invokeQuery as ɵinvokeQuery, normalizeKeyframes as ɵnormalizeKeyframes, validateStyleProperty as ɵvalidateStyleProperty, validateWebAnimatableStyleProperty as ɵvalidateWebAnimatableStyleProperty };\n","/**\n * @license Angular v18.1.4\n * (c) 2010-2024 Google LLC. https://angular.io/\n * License: MIT\n */\n\nimport * as i0 from '@angular/core';\nimport { Injectable, Inject, RendererFactory2, NgZone, ANIMATION_MODULE_TYPE, NgModule, ɵperformanceMarkFeature } from '@angular/core';\nexport { ANIMATION_MODULE_TYPE } from '@angular/core';\nimport { ɵDomRendererFactory2, BrowserModule } from '@angular/platform-browser';\nimport * as i1 from '@angular/animations/browser';\nimport { ɵAnimationEngine, ɵWebAnimationsStyleNormalizer, ɵAnimationRendererFactory, ɵAnimationStyleNormalizer, AnimationDriver, ɵWebAnimationsDriver, NoopAnimationDriver } from '@angular/animations/browser';\nimport { DOCUMENT } from '@angular/common';\nclass InjectableAnimationEngine extends ɵAnimationEngine {\n  // The `ApplicationRef` is injected here explicitly to force the dependency ordering.\n  // Since the `ApplicationRef` should be created earlier before the `AnimationEngine`, they\n  // both have `ngOnDestroy` hooks and `flush()` must be called after all views are destroyed.\n  constructor(doc, driver, normalizer) {\n    super(doc, driver, normalizer);\n  }\n  ngOnDestroy() {\n    this.flush();\n  }\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: InjectableAnimationEngine,\n      deps: [{\n        token: DOCUMENT\n      }, {\n        token: i1.AnimationDriver\n      }, {\n        token: i1.ɵAnimationStyleNormalizer\n      }],\n      target: i0.ɵɵFactoryTarget.Injectable\n    });\n  }\n  static {\n    this.ɵprov = i0.ɵɵngDeclareInjectable({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: InjectableAnimationEngine\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.1.4\",\n  ngImport: i0,\n  type: InjectableAnimationEngine,\n  decorators: [{\n    type: Injectable\n  }],\n  ctorParameters: () => [{\n    type: Document,\n    decorators: [{\n      type: Inject,\n      args: [DOCUMENT]\n    }]\n  }, {\n    type: i1.AnimationDriver\n  }, {\n    type: i1.ɵAnimationStyleNormalizer\n  }]\n});\nfunction instantiateDefaultStyleNormalizer() {\n  return new ɵWebAnimationsStyleNormalizer();\n}\nfunction instantiateRendererFactory(renderer, engine, zone) {\n  return new ɵAnimationRendererFactory(renderer, engine, zone);\n}\nconst SHARED_ANIMATION_PROVIDERS = [{\n  provide: ɵAnimationStyleNormalizer,\n  useFactory: instantiateDefaultStyleNormalizer\n}, {\n  provide: ɵAnimationEngine,\n  useClass: InjectableAnimationEngine\n}, {\n  provide: RendererFactory2,\n  useFactory: instantiateRendererFactory,\n  deps: [ɵDomRendererFactory2, ɵAnimationEngine, NgZone]\n}];\n/**\n * Separate providers from the actual module so that we can do a local modification in Google3 to\n * include them in the BrowserModule.\n */\nconst BROWSER_ANIMATIONS_PROVIDERS = [{\n  provide: AnimationDriver,\n  useFactory: () => new ɵWebAnimationsDriver()\n}, {\n  provide: ANIMATION_MODULE_TYPE,\n  useValue: 'BrowserAnimations'\n}, ...SHARED_ANIMATION_PROVIDERS];\n/**\n * Separate providers from the actual module so that we can do a local modification in Google3 to\n * include them in the BrowserTestingModule.\n */\nconst BROWSER_NOOP_ANIMATIONS_PROVIDERS = [{\n  provide: AnimationDriver,\n  useClass: NoopAnimationDriver\n}, {\n  provide: ANIMATION_MODULE_TYPE,\n  useValue: 'NoopAnimations'\n}, ...SHARED_ANIMATION_PROVIDERS];\n\n/**\n * Exports `BrowserModule` with additional dependency-injection providers\n * for use with animations. See [Animations](guide/animations).\n * @publicApi\n */\nclass BrowserAnimationsModule {\n  /**\n   * Configures the module based on the specified object.\n   *\n   * @param config Object used to configure the behavior of the `BrowserAnimationsModule`.\n   * @see {@link BrowserAnimationsModuleConfig}\n   *\n   * @usageNotes\n   * When registering the `BrowserAnimationsModule`, you can use the `withConfig`\n   * function as follows:\n   * ```\n   * @NgModule({\n   *   imports: [BrowserAnimationsModule.withConfig(config)]\n   * })\n   * class MyNgModule {}\n   * ```\n   */\n  static withConfig(config) {\n    return {\n      ngModule: BrowserAnimationsModule,\n      providers: config.disableAnimations ? BROWSER_NOOP_ANIMATIONS_PROVIDERS : BROWSER_ANIMATIONS_PROVIDERS\n    };\n  }\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: BrowserAnimationsModule,\n      deps: [],\n      target: i0.ɵɵFactoryTarget.NgModule\n    });\n  }\n  static {\n    this.ɵmod = i0.ɵɵngDeclareNgModule({\n      minVersion: \"14.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: BrowserAnimationsModule,\n      exports: [BrowserModule]\n    });\n  }\n  static {\n    this.ɵinj = i0.ɵɵngDeclareInjector({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: BrowserAnimationsModule,\n      providers: BROWSER_ANIMATIONS_PROVIDERS,\n      imports: [BrowserModule]\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.1.4\",\n  ngImport: i0,\n  type: BrowserAnimationsModule,\n  decorators: [{\n    type: NgModule,\n    args: [{\n      exports: [BrowserModule],\n      providers: BROWSER_ANIMATIONS_PROVIDERS\n    }]\n  }]\n});\n/**\n * Returns the set of dependency-injection providers\n * to enable animations in an application. See [animations guide](guide/animations)\n * to learn more about animations in Angular.\n *\n * @usageNotes\n *\n * The function is useful when you want to enable animations in an application\n * bootstrapped using the `bootstrapApplication` function. In this scenario there\n * is no need to import the `BrowserAnimationsModule` NgModule at all, just add\n * providers returned by this function to the `providers` list as show below.\n *\n * ```typescript\n * bootstrapApplication(RootComponent, {\n *   providers: [\n *     provideAnimations()\n *   ]\n * });\n * ```\n *\n * @publicApi\n */\nfunction provideAnimations() {\n  ɵperformanceMarkFeature('NgEagerAnimations');\n  // Return a copy to prevent changes to the original array in case any in-place\n  // alterations are performed to the `provideAnimations` call results in app code.\n  return [...BROWSER_ANIMATIONS_PROVIDERS];\n}\n/**\n * A null player that must be imported to allow disabling of animations.\n * @publicApi\n */\nclass NoopAnimationsModule {\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: NoopAnimationsModule,\n      deps: [],\n      target: i0.ɵɵFactoryTarget.NgModule\n    });\n  }\n  static {\n    this.ɵmod = i0.ɵɵngDeclareNgModule({\n      minVersion: \"14.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: NoopAnimationsModule,\n      exports: [BrowserModule]\n    });\n  }\n  static {\n    this.ɵinj = i0.ɵɵngDeclareInjector({\n      minVersion: \"12.0.0\",\n      version: \"18.1.4\",\n      ngImport: i0,\n      type: NoopAnimationsModule,\n      providers: BROWSER_NOOP_ANIMATIONS_PROVIDERS,\n      imports: [BrowserModule]\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.1.4\",\n  ngImport: i0,\n  type: NoopAnimationsModule,\n  decorators: [{\n    type: NgModule,\n    args: [{\n      exports: [BrowserModule],\n      providers: BROWSER_NOOP_ANIMATIONS_PROVIDERS\n    }]\n  }]\n});\n/**\n * Returns the set of dependency-injection providers\n * to disable animations in an application. See [animations guide](guide/animations)\n * to learn more about animations in Angular.\n *\n * @usageNotes\n *\n * The function is useful when you want to bootstrap an application using\n * the `bootstrapApplication` function, but you need to disable animations\n * (for example, when running tests).\n *\n * ```typescript\n * bootstrapApplication(RootComponent, {\n *   providers: [\n *     provideNoopAnimations()\n *   ]\n * });\n * ```\n *\n * @publicApi\n */\nfunction provideNoopAnimations() {\n  // Return a copy to prevent changes to the original array in case any in-place\n  // alterations are performed to the `provideNoopAnimations` call results in app code.\n  return [...BROWSER_NOOP_ANIMATIONS_PROVIDERS];\n}\n\n/**\n * @module\n * @description\n * Entry point for all animation APIs of the animation browser package.\n */\n\n/**\n * @module\n * @description\n * Entry point for all public APIs of this package.\n */\n\n// This file is not used to build this module. It is only used during editing\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { BrowserAnimationsModule, NoopAnimationsModule, provideAnimations, provideNoopAnimations, InjectableAnimationEngine as ɵInjectableAnimationEngine };\n","import * as i0 from '@angular/core';\nimport { InjectionToken, inject, EventEmitter, ANIMATION_MODULE_TYPE, numberAttribute, Component, ChangeDetectionStrategy, ViewEncapsulation, Optional, Inject, Input, Output, NgModule } from '@angular/core';\nimport { DOCUMENT } from '@angular/common';\nimport { MatCommonModule } from '@angular/material/core';\n\n/** Injection token to be used to override the default options for `mat-progress-bar`. */\nconst MAT_PROGRESS_BAR_DEFAULT_OPTIONS = new InjectionToken('MAT_PROGRESS_BAR_DEFAULT_OPTIONS');\n/**\n * Injection token used to provide the current location to `MatProgressBar`.\n * Used to handle server-side rendering and to stub out during unit tests.\n * @docs-private\n */\nconst MAT_PROGRESS_BAR_LOCATION = new InjectionToken('mat-progress-bar-location', {\n  providedIn: 'root',\n  factory: MAT_PROGRESS_BAR_LOCATION_FACTORY\n});\n/** @docs-private */\nfunction MAT_PROGRESS_BAR_LOCATION_FACTORY() {\n  const _document = inject(DOCUMENT);\n  const _location = _document ? _document.location : null;\n  return {\n    // Note that this needs to be a function, rather than a property, because Angular\n    // will only resolve it once, but we want the current path on each call.\n    getPathname: () => _location ? _location.pathname + _location.search : ''\n  };\n}\nclass MatProgressBar {\n  constructor(_elementRef, _ngZone, _changeDetectorRef, _animationMode, defaults) {\n    this._elementRef = _elementRef;\n    this._ngZone = _ngZone;\n    this._changeDetectorRef = _changeDetectorRef;\n    this._animationMode = _animationMode;\n    /** Flag that indicates whether NoopAnimations mode is set to true. */\n    this._isNoopAnimation = false;\n    this._defaultColor = 'primary';\n    this._value = 0;\n    this._bufferValue = 0;\n    /**\n     * Event emitted when animation of the primary progress bar completes. This event will not\n     * be emitted when animations are disabled, nor will it be emitted for modes with continuous\n     * animations (indeterminate and query).\n     */\n    this.animationEnd = new EventEmitter();\n    this._mode = 'determinate';\n    /** Event handler for `transitionend` events. */\n    this._transitionendHandler = event => {\n      if (this.animationEnd.observers.length === 0 || !event.target || !event.target.classList.contains('mdc-linear-progress__primary-bar')) {\n        return;\n      }\n      if (this.mode === 'determinate' || this.mode === 'buffer') {\n        this._ngZone.run(() => this.animationEnd.next({\n          value: this.value\n        }));\n      }\n    };\n    this._isNoopAnimation = _animationMode === 'NoopAnimations';\n    if (defaults) {\n      if (defaults.color) {\n        this.color = this._defaultColor = defaults.color;\n      }\n      this.mode = defaults.mode || this.mode;\n    }\n  }\n  // TODO: should be typed as `ThemePalette` but internal apps pass in arbitrary strings.\n  /**\n   * Theme color of the progress bar. This API is supported in M2 themes only, it\n   * has no effect in M3 themes.\n   *\n   * For information on applying color variants in M3, see\n   * https://material.angular.io/guide/theming#using-component-color-variants.\n   */\n  get color() {\n    return this._color || this._defaultColor;\n  }\n  set color(value) {\n    this._color = value;\n  }\n  /** Value of the progress bar. Defaults to zero. Mirrored to aria-valuenow. */\n  get value() {\n    return this._value;\n  }\n  set value(v) {\n    this._value = clamp(v || 0);\n    this._changeDetectorRef.markForCheck();\n  }\n  /** Buffer value of the progress bar. Defaults to zero. */\n  get bufferValue() {\n    return this._bufferValue || 0;\n  }\n  set bufferValue(v) {\n    this._bufferValue = clamp(v || 0);\n    this._changeDetectorRef.markForCheck();\n  }\n  /**\n   * Mode of the progress bar.\n   *\n   * Input must be one of these values: determinate, indeterminate, buffer, query, defaults to\n   * 'determinate'.\n   * Mirrored to mode attribute.\n   */\n  get mode() {\n    return this._mode;\n  }\n  set mode(value) {\n    // Note that we don't technically need a getter and a setter here,\n    // but we use it to match the behavior of the existing mat-progress-bar.\n    this._mode = value;\n    this._changeDetectorRef.markForCheck();\n  }\n  ngAfterViewInit() {\n    // Run outside angular so change detection didn't get triggered on every transition end\n    // instead only on the animation that we care about (primary value bar's transitionend)\n    this._ngZone.runOutsideAngular(() => {\n      this._elementRef.nativeElement.addEventListener('transitionend', this._transitionendHandler);\n    });\n  }\n  ngOnDestroy() {\n    this._elementRef.nativeElement.removeEventListener('transitionend', this._transitionendHandler);\n  }\n  /** Gets the transform style that should be applied to the primary bar. */\n  _getPrimaryBarTransform() {\n    return `scaleX(${this._isIndeterminate() ? 1 : this.value / 100})`;\n  }\n  /** Gets the `flex-basis` value that should be applied to the buffer bar. */\n  _getBufferBarFlexBasis() {\n    return `${this.mode === 'buffer' ? this.bufferValue : 100}%`;\n  }\n  /** Returns whether the progress bar is indeterminate. */\n  _isIndeterminate() {\n    return this.mode === 'indeterminate' || this.mode === 'query';\n  }\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.2.0-next.2\",\n      ngImport: i0,\n      type: MatProgressBar,\n      deps: [{\n        token: i0.ElementRef\n      }, {\n        token: i0.NgZone\n      }, {\n        token: i0.ChangeDetectorRef\n      }, {\n        token: ANIMATION_MODULE_TYPE,\n        optional: true\n      }, {\n        token: MAT_PROGRESS_BAR_DEFAULT_OPTIONS,\n        optional: true\n      }],\n      target: i0.ɵɵFactoryTarget.Component\n    });\n  }\n  static {\n    this.ɵcmp = i0.ɵɵngDeclareComponent({\n      minVersion: \"17.0.0\",\n      version: \"18.2.0-next.2\",\n      type: MatProgressBar,\n      isStandalone: true,\n      selector: \"mat-progress-bar\",\n      inputs: {\n        color: \"color\",\n        value: [\"value\", \"value\", numberAttribute],\n        bufferValue: [\"bufferValue\", \"bufferValue\", numberAttribute],\n        mode: \"mode\"\n      },\n      outputs: {\n        animationEnd: \"animationEnd\"\n      },\n      host: {\n        attributes: {\n          \"role\": \"progressbar\",\n          \"aria-valuemin\": \"0\",\n          \"aria-valuemax\": \"100\",\n          \"tabindex\": \"-1\"\n        },\n        properties: {\n          \"attr.aria-valuenow\": \"_isIndeterminate() ? null : value\",\n          \"attr.mode\": \"mode\",\n          \"class\": \"\\\"mat-\\\" + color\",\n          \"class._mat-animation-noopable\": \"_isNoopAnimation\",\n          \"class.mdc-linear-progress--animation-ready\": \"!_isNoopAnimation\",\n          \"class.mdc-linear-progress--indeterminate\": \"_isIndeterminate()\"\n        },\n        classAttribute: \"mat-mdc-progress-bar mdc-linear-progress\"\n      },\n      exportAs: [\"matProgressBar\"],\n      ngImport: i0,\n      template: \"<!--\\n  All children need to be hidden for screen readers in order to support ChromeVox.\\n  More context in the issue: https://github.com/angular/components/issues/22165.\\n-->\\n<div class=\\\"mdc-linear-progress__buffer\\\" aria-hidden=\\\"true\\\">\\n  <div\\n    class=\\\"mdc-linear-progress__buffer-bar\\\"\\n    [style.flex-basis]=\\\"_getBufferBarFlexBasis()\\\"></div>\\n  <!-- Remove the dots outside of buffer mode since they can cause CSP issues (see #28938) -->\\n  @if (mode === 'buffer') {\\n    <div class=\\\"mdc-linear-progress__buffer-dots\\\"></div>\\n  }\\n</div>\\n<div\\n  class=\\\"mdc-linear-progress__bar mdc-linear-progress__primary-bar\\\"\\n  aria-hidden=\\\"true\\\"\\n  [style.transform]=\\\"_getPrimaryBarTransform()\\\">\\n  <span class=\\\"mdc-linear-progress__bar-inner\\\"></span>\\n</div>\\n<div class=\\\"mdc-linear-progress__bar mdc-linear-progress__secondary-bar\\\" aria-hidden=\\\"true\\\">\\n  <span class=\\\"mdc-linear-progress__bar-inner\\\"></span>\\n</div>\\n\",\n      styles: [\".mat-mdc-progress-bar{display:block;text-align:start}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow-x:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:max(var(--mdc-linear-progress-track-height),var(--mdc-linear-progress-active-indicator-height))}.cdk-high-contrast-active .mdc-linear-progress{outline-color:CanvasText}.mdc-linear-progress__bar{position:absolute;top:0;bottom:0;margin:auto 0;width:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:var(--mdc-linear-progress-active-indicator-height)}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}[dir=rtl] .mdc-linear-progress__bar{right:0;transform-origin:center right}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid;border-color:var(--mdc-linear-progress-active-indicator-color);border-top-width:var(--mdc-linear-progress-active-indicator-height)}.mdc-linear-progress__buffer{display:flex;position:absolute;top:0;bottom:0;margin:auto 0;width:100%;overflow:hidden;height:var(--mdc-linear-progress-track-height);border-radius:var(--mdc-linear-progress-track-shape)}.mdc-linear-progress__buffer-dots{-webkit-mask-image:url(\\\"data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E\\\");mask-image:url(\\\"data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E\\\");background-repeat:repeat-x;flex:auto;transform:rotate(180deg);animation:mdc-linear-progress-buffering 250ms infinite linear;background-color:var(--mdc-linear-progress-track-color)}.cdk-high-contrast-active .mdc-linear-progress__buffer-dots{background-color:ButtonBorder}[dir=rtl] .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse 250ms infinite linear;transform:rotate(0)}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);background-color:var(--mdc-linear-progress-track-color)}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(calc(var(--mdc-linear-progress-track-height) * -2.5))}}@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(-83.67142%)}100%{transform:translateX(-200.611057%)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(-37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(-84.386165%)}100%{transform:translateX(-160.277782%)}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}\"],\n      changeDetection: i0.ChangeDetectionStrategy.OnPush,\n      encapsulation: i0.ViewEncapsulation.None\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.2.0-next.2\",\n  ngImport: i0,\n  type: MatProgressBar,\n  decorators: [{\n    type: Component,\n    args: [{\n      selector: 'mat-progress-bar',\n      exportAs: 'matProgressBar',\n      host: {\n        'role': 'progressbar',\n        'aria-valuemin': '0',\n        'aria-valuemax': '100',\n        // set tab index to -1 so screen readers will read the aria-label\n        // Note: there is a known issue with JAWS that does not read progressbar aria labels on FireFox\n        'tabindex': '-1',\n        '[attr.aria-valuenow]': '_isIndeterminate() ? null : value',\n        '[attr.mode]': 'mode',\n        'class': 'mat-mdc-progress-bar mdc-linear-progress',\n        '[class]': '\"mat-\" + color',\n        '[class._mat-animation-noopable]': '_isNoopAnimation',\n        '[class.mdc-linear-progress--animation-ready]': '!_isNoopAnimation',\n        '[class.mdc-linear-progress--indeterminate]': '_isIndeterminate()'\n      },\n      changeDetection: ChangeDetectionStrategy.OnPush,\n      encapsulation: ViewEncapsulation.None,\n      standalone: true,\n      template: \"<!--\\n  All children need to be hidden for screen readers in order to support ChromeVox.\\n  More context in the issue: https://github.com/angular/components/issues/22165.\\n-->\\n<div class=\\\"mdc-linear-progress__buffer\\\" aria-hidden=\\\"true\\\">\\n  <div\\n    class=\\\"mdc-linear-progress__buffer-bar\\\"\\n    [style.flex-basis]=\\\"_getBufferBarFlexBasis()\\\"></div>\\n  <!-- Remove the dots outside of buffer mode since they can cause CSP issues (see #28938) -->\\n  @if (mode === 'buffer') {\\n    <div class=\\\"mdc-linear-progress__buffer-dots\\\"></div>\\n  }\\n</div>\\n<div\\n  class=\\\"mdc-linear-progress__bar mdc-linear-progress__primary-bar\\\"\\n  aria-hidden=\\\"true\\\"\\n  [style.transform]=\\\"_getPrimaryBarTransform()\\\">\\n  <span class=\\\"mdc-linear-progress__bar-inner\\\"></span>\\n</div>\\n<div class=\\\"mdc-linear-progress__bar mdc-linear-progress__secondary-bar\\\" aria-hidden=\\\"true\\\">\\n  <span class=\\\"mdc-linear-progress__bar-inner\\\"></span>\\n</div>\\n\",\n      styles: [\".mat-mdc-progress-bar{display:block;text-align:start}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow-x:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:max(var(--mdc-linear-progress-track-height),var(--mdc-linear-progress-active-indicator-height))}.cdk-high-contrast-active .mdc-linear-progress{outline-color:CanvasText}.mdc-linear-progress__bar{position:absolute;top:0;bottom:0;margin:auto 0;width:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:var(--mdc-linear-progress-active-indicator-height)}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}[dir=rtl] .mdc-linear-progress__bar{right:0;transform-origin:center right}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid;border-color:var(--mdc-linear-progress-active-indicator-color);border-top-width:var(--mdc-linear-progress-active-indicator-height)}.mdc-linear-progress__buffer{display:flex;position:absolute;top:0;bottom:0;margin:auto 0;width:100%;overflow:hidden;height:var(--mdc-linear-progress-track-height);border-radius:var(--mdc-linear-progress-track-shape)}.mdc-linear-progress__buffer-dots{-webkit-mask-image:url(\\\"data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E\\\");mask-image:url(\\\"data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E\\\");background-repeat:repeat-x;flex:auto;transform:rotate(180deg);animation:mdc-linear-progress-buffering 250ms infinite linear;background-color:var(--mdc-linear-progress-track-color)}.cdk-high-contrast-active .mdc-linear-progress__buffer-dots{background-color:ButtonBorder}[dir=rtl] .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse 250ms infinite linear;transform:rotate(0)}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);background-color:var(--mdc-linear-progress-track-color)}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(calc(var(--mdc-linear-progress-track-height) * -2.5))}}@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(-83.67142%)}100%{transform:translateX(-200.611057%)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(-37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(-84.386165%)}100%{transform:translateX(-160.277782%)}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}\"]\n    }]\n  }],\n  ctorParameters: () => [{\n    type: i0.ElementRef\n  }, {\n    type: i0.NgZone\n  }, {\n    type: i0.ChangeDetectorRef\n  }, {\n    type: undefined,\n    decorators: [{\n      type: Optional\n    }, {\n      type: Inject,\n      args: [ANIMATION_MODULE_TYPE]\n    }]\n  }, {\n    type: undefined,\n    decorators: [{\n      type: Optional\n    }, {\n      type: Inject,\n      args: [MAT_PROGRESS_BAR_DEFAULT_OPTIONS]\n    }]\n  }],\n  propDecorators: {\n    color: [{\n      type: Input\n    }],\n    value: [{\n      type: Input,\n      args: [{\n        transform: numberAttribute\n      }]\n    }],\n    bufferValue: [{\n      type: Input,\n      args: [{\n        transform: numberAttribute\n      }]\n    }],\n    animationEnd: [{\n      type: Output\n    }],\n    mode: [{\n      type: Input\n    }]\n  }\n});\n/** Clamps a value to be between two numbers, by default 0 and 100. */\nfunction clamp(v, min = 0, max = 100) {\n  return Math.max(min, Math.min(max, v));\n}\nclass MatProgressBarModule {\n  static {\n    this.ɵfac = i0.ɵɵngDeclareFactory({\n      minVersion: \"12.0.0\",\n      version: \"18.2.0-next.2\",\n      ngImport: i0,\n      type: MatProgressBarModule,\n      deps: [],\n      target: i0.ɵɵFactoryTarget.NgModule\n    });\n  }\n  static {\n    this.ɵmod = i0.ɵɵngDeclareNgModule({\n      minVersion: \"14.0.0\",\n      version: \"18.2.0-next.2\",\n      ngImport: i0,\n      type: MatProgressBarModule,\n      imports: [MatProgressBar],\n      exports: [MatProgressBar, MatCommonModule]\n    });\n  }\n  static {\n    this.ɵinj = i0.ɵɵngDeclareInjector({\n      minVersion: \"12.0.0\",\n      version: \"18.2.0-next.2\",\n      ngImport: i0,\n      type: MatProgressBarModule,\n      imports: [MatCommonModule]\n    });\n  }\n}\ni0.ɵɵngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"18.2.0-next.2\",\n  ngImport: i0,\n  type: MatProgressBarModule,\n  decorators: [{\n    type: NgModule,\n    args: [{\n      imports: [MatProgressBar],\n      exports: [MatProgressBar, MatCommonModule]\n    }]\n  }]\n});\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { MAT_PROGRESS_BAR_DEFAULT_OPTIONS, MAT_PROGRESS_BAR_LOCATION, MAT_PROGRESS_BAR_LOCATION_FACTORY, MatProgressBar, MatProgressBarModule };\n","<section>\n  <div id=\"main-content-area\">\n\n    <div class=\"row\">\n      <div class=\"columns medium-9\">\n        <div class=\"columns medium-12 no-pad-left no-pad-right padding-top-xsmall padding-bottom-small\">\n          <h1>Explore the Complex Portal</h1>\n          <p>\n            The Complex Portal is a manually curated, encyclopaedic resource of macromolecular complexes from a number\n            of key model organisms. The majority of complexes are made up of proteins but may also include nucleic acids\n            or small molecules. All data is freely available for search and <a class=\"readmore\" routerLink=\"/download\">download</a>.\n          </p>\n          <div id=\"cp-definition\" class=\"definition padding-bottom-xlarge padding-top-xlarge\">\n            <i>Complexes are defined as an assembly of any two or more proteins and/or nucleic acids that are stable enough\n            in vitro to be reconstituted and have been demonstrated to have a specific molecular function.</i>\n          </div>\n          <p class=\"padding-top-large\">\n            To perform a search for macromolecular complexes use the search box below. Read more\n            <a class=\"readmore\" routerLink=\"/about\">here</a>.\n          </p>\n        </div>\n        <div class=\"columns medium-12\">\n          <cp-search></cp-search>\n        </div>\n        <div class=\"columns medium-12 margin-top-xlarge\">\n          <cp-tile-menu></cp-tile-menu>\n        </div>\n      </div>\n\n      <div class=\"columns medium-3\">\n        <div class=\"columns medium-12\">\n          <cp-newsletter-subscription></cp-newsletter-subscription>\n        </div>\n        <div class=\"columns medium-12\">\n          <cp-twitter-display></cp-twitter-display>\n        </div>\n      </div>\n    </div>\n  </div>\n</section>\n",".definition{background:#cde4e5;font-family:Lato-Regular,Helvetica,Arial,sans-serif;border-radius:4px;vertical-align:middle;padding:15px}\n/*# sourceMappingURL=home.component.css.map */\n","import {Component, OnInit, AfterViewInit} from '@angular/core';\nimport {ProgressBarComponent} from '../shared/loading-indicators/progress-bar/progress-bar.component';\nimport {Title} from '@angular/platform-browser';\nimport {AnalyticsService} from '../shared/google-analytics/service/analytics.service';\nimport {Router} from '@angular/router';\nimport {Category} from '../shared/google-analytics/types/category.enum';\nimport {environment} from '../../environments/environment';\n\n@Component({\n  selector: 'cp-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.css']\n})\nexport class HomeComponent implements OnInit, AfterViewInit {\n\n  constructor(private titleService: Title, private router: Router, private googleAnalyticsService: AnalyticsService) { }\n\n  ngOnInit() {\n    this.titleService.setTitle('Complex Portal');\n    ProgressBarComponent.display();\n    document.body.scrollTop = 0;\n  }\n\n  ngAfterViewInit(): void {\n    ProgressBarComponent.hide();\n  }\n\n  /* Start COVID banner */\n  search(speciesName: string) {\n    this.googleAnalyticsService.fireSearchTermEvent(Category.organisms, speciesName);\n    this.router.navigate(['complex/search'], {queryParams: {query: '*', species: speciesName, page: 1}});\n  }\n\n  goToComplexSARSCoV2PSI25(): void {\n    this.googleAnalyticsService.fireDownloadResourceEvent(Category.organisms, 'PSIXML25');\n    window.open(environment.complex_psi25 + 'SARS-CoV-2', '_blank');\n  }\n\n  goToComplexSARSPSI25(): void {\n    this.googleAnalyticsService.fireDownloadResourceEvent(Category.organisms, 'PSIXML25');\n    window.open(environment.complex_psi25 + 'Human_SARS_coronavirus', '_blank');\n  }\n\n  goToComplexSARSCoV2PSI30(): void {\n    this.googleAnalyticsService.fireDownloadResourceEvent(Category.organisms, 'PSIXML30');\n    window.open(environment.complex_psi30 + 'SARS-CoV-2', '_blank');\n  }\n\n  goToComplexSARSPSI30(): void {\n    this.googleAnalyticsService.fireDownloadResourceEvent(Category.organisms, 'PSIXML30');\n    window.open(environment.complex_psi30 + 'sars-cov', '_blank');\n  }\n\n  goToComplexSARSCoV2TAB(): void {\n    this.googleAnalyticsService.fireDownloadResourceEvent(Category.organisms, 'ComplexTAB');\n    window.open(environment.complex_tab + '2697049' + '.tsv', '_blank');\n  }\n\n  goToComplexSARSTAB(): void {\n    this.googleAnalyticsService.fireDownloadResourceEvent(Category.organisms, 'ComplexTAB');\n    window.open(environment.complex_tab + '694009' + '.tsv', '_blank');\n  }\n  /* End COVID banner */\n\n}\n","<div class=\"row button-grid\" data-equalizer id=\"large-button-grid\">\n  <div class=\"columns large-3 medium-6 text-center padding-bottom-large\">\n    <a class=\"button medium-12 columns\" data-equalizer-watch (click)=\"goToDownload()\">\n      <h3 class=\"icon icon-functional white-color\" data-icon=\"=\"></h3>\n      <h5 class=\"white-color\" style=\"white-space: normal\">Downloads</h5>\n    </a>\n  </div>\n  <div class=\"columns large-3 medium-6 text-center padding-bottom-large\">\n    <a class=\"button medium-12 columns\" data-equalizer-watch (click)=\"goToBasket()\">\n      <h3 class=\"icon icon-generic white-color\" data-icon=\"b\"></h3>\n      <h5 class=\"white-color\">Basket</h5>\n    </a>\n  </div>\n  <div class=\"columns large-3 medium-6 text-center padding-bottom-large\">\n    <a class=\"button medium-12 columns\" data-equalizer-watch (click)=\"goToOrganisms()\">\n      <h3 class=\"icon icon-species white-color\" data-icon=\"M\"></h3>\n      <h5 class=\"white-color\">Organisms</h5>\n    </a>\n  </div>\n  <div class=\"columns large-3 medium-6 text-center padding-bottom-large\">\n    <a class=\"button medium-12 columns\" data-equalizer-watch (click)=\"goToOntologies()\">\n      <h3 class=\"icon icon-conceptual white-color\" data-icon=\"o\"></h3>\n      <h5 class=\"white-color\">Ontologies</h5>\n    </a>\n  </div>\n  <div class=\"columns large-3 medium-6 text-center padding-bottom-large\">\n    <a class=\"button medium-12 columns training-background\" data-equalizer-watch (click)=\"goToRequestComplex()\">\n      <h3 class=\"icon icon-generic white-color\" data-icon=\"\\\"></h3>\n      <h5 class=\"white-color\" style=\"white-space: normal\">Request Complex</h5>\n    </a>\n  </div>\n  <div class=\"reveal\" id=\"citationModal\" data-reveal>\n    <h3>Citing Complex Portal</h3>\n    <span class=\"lead\">Complex Portal 2018: extended content and enhanced visualization tools for macromolecular complexes.</span>\n    <p>Meldal BHM et al [PMID: 30357405]</p>\n    <p><i>Nucl. Acids Res. (2019) doi: 10.1093/nar/gky1001</i></p>\n    <a class=\"button readmore\" href=\"//europepmc.org/abstract/MED/30357405\" target=\"_blank\">Abstract</a>\n    <a class=\"button readmore\"\n       href=\"https://academic.oup.com/nar/article/47/D1/D550/5144138\" target=\"_blank\">Full\n      text</a>\n\n    <button class=\"close-button\" data-close aria-label=\"Close modal\" type=\"button\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"columns large-3 medium-6 text-center padding-bottom-large\">\n    <a class=\"button medium-12 columns industry-background\" data-equalizer-watch (click)=\"goToDocumentation()\">\n      <h3 class=\"icon icon-common white-color\" data-icon=\"&#xf283;\"></h3>\n      <h5 class=\"white-color\">Documentation</h5>\n    </a>\n  </div>\n  <div class=\"columns large-3 medium-6 text-center padding-bottom-large\">\n    <a class=\"button medium-12 columns industry-background\" data-equalizer-watch data-open=\"citationModal\"\n       (click)=\"goToCitation()\">\n      <h3 class=\"icon icon-generic white-color\" data-icon=\"P\"></h3>\n      <h5 class=\"white-color\">How To Cite Us</h5>\n    </a>\n  </div>\n  <div class=\"columns large-3 medium-6 text-center padding-bottom-large\">\n    <a class=\"button medium-12 columns industry-background\" data-equalizer-watch (click)=\"goToTraining()\">\n      <h3 class=\"icon icon-generic white-color\" data-icon=\"t\"></h3>\n      <h5 class=\"white-color\">Training</h5>\n    </a>\n  </div>\n</div>\n",".menu-blue{background-color:#005c82}.menu-gold{background-color:#bca04d}\n/*# sourceMappingURL=tile-menu.component.css.map */\n","import {AfterViewInit, Component} from '@angular/core';\nimport {NotificationService} from '../../shared/notification/service/notification.service';\nimport {Router} from '@angular/router';\nimport {environment} from '../../../environments/environment';\nimport {AnalyticsService} from '../../shared/google-analytics/service/analytics.service';\n\n@ Component({\n  selector: 'cp-tile-menu',\n  templateUrl: './tile-menu.component.html',\n  styleUrls: ['./tile-menu.component.css']\n})\nexport class TileMenuComponent implements AfterViewInit {\n\n  constructor(private notificationService: NotificationService, private router: Router,\n              private googleAnalyticsService: AnalyticsService) {\n  }\n\n  ngAfterViewInit(): void {\n    // Necessary for layout of tiles (equal size, etc.)\n    $('cp-tile-menu').foundation();\n  }\n\n  public goToDownload(): void {\n    this.googleAnalyticsService.fireClickHomeTileEvent('download');\n    this.router.navigate(['download']);\n  }\n\n  public goToBasket(): void {\n    this.googleAnalyticsService.fireClickHomeTileEvent('basket');\n    this.router.navigate(['basket']);\n  }\n\n  public goToOrganisms(): void {\n    this.googleAnalyticsService.fireClickHomeTileEvent('organisms');\n    this.router.navigate(['complex/organisms']);\n  }\n\n  public goToOntologies(): void {\n    this.googleAnalyticsService.fireClickHomeTileEvent('ontologies');\n    this.notificationService.onFeatureNotAvailableYet();\n    this.router.navigate(['ontologies']);\n  }\n\n  public goToRequestComplex(): void {\n    this.googleAnalyticsService.fireClickHomeTileEvent('request complex');\n    window.open(environment.complex_portal_support_url, '_blank');\n  }\n\n  public goToTraining(): void {\n    this.googleAnalyticsService.fireClickHomeTileEvent('training');\n    window.open(environment.training_url, '_blank');\n  }\n\n  public goToDocumentation(): void {\n    this.googleAnalyticsService.fireClickHomeTileEvent('documentation');\n    this.router.navigate(['documentation']);\n  }\n\n  public goToCitation(): void {\n    this.googleAnalyticsService.fireClickHomeTileEvent('citation');\n  }\n}\n","<div id=\"twitter\">\n  <h3><i class=\"icon icon-common icon-twitter icon-spacer\"></i>Twitter</h3>\n  <a href=\"https://twitter.com/complexportal?ref_src=twsrc%5Etfw\"\n     class=\"twitter-follow-button\"\n     data-size=\"large\"\n     data-show-count=\"false\">\n    Follow &#64;complexportal\n  </a>\n<!--  <a class=\"twitter-timeline\" data-lang=\"en\" data-height=\"530\" data-theme=\"light\"-->\n<!--     data-chrome=\"noheader noborders\" data-link-color=\"var(--primary)\" href=\"https://twitter.com/complexportal\">Tweets-->\n<!--    by Complex Portal</a>-->\n</div>\n","#twitter{max-height:400px}h3{border-bottom:solid;border-color:#5ca23561}\n/*# sourceMappingURL=twitter-display.component.css.map */\n","import {Component, OnInit} from '@angular/core';\n\nconst twitterURL = 'https://platform.twitter.com/widgets.js';\n\ndeclare global {\n  interface Window { twttr: any;\n  }\n}\n\n@Component({\n  selector: 'cp-twitter-display',\n  templateUrl: './twitter-display.component.html',\n  styleUrls: ['./twitter-display.component.css']\n})\nexport class TwitterDisplayComponent implements OnInit {\n\n  constructor() {\n  }\n\n  ngOnInit() {\n    this.initTwitterWidget();\n  }\n\n  private initTwitterWidget() {\n    /* tslint:disable */\n    window.twttr = (function (d, s, id, call) {\n      let js, fjs = d.getElementsByTagName(s)[0],\n        t = window.twttr || {};\n      if (d.getElementById(id)) return t;\n      js = d.createElement(s);\n      js.id = id;\n      js.src = twitterURL;\n      fjs.parentNode.insertBefore(js, fjs);\n\n      t._e = [];\n      t.ready = function (f) {\n        t._e.push(f);\n      };\n    })(document, \"script\", \"twitter-wjs\", this.reloadWidget());\n    /* tslint:enable */\n  }\n\n  private reloadWidget(): void {\n    try {\n      window.twttr.widgets.load(document.getElementById('twitter'));\n    } catch (ignore) {\n      // ignore\n    }\n  }\n}\n","<div class=\"margin-bottom-xlarge\" id=\"mc_embed_signup\">\n  <form ngNoForm action=\"//ebi.us9.list-manage.com/subscribe/post?u=d50725c1556266fd605025eaf&id=91a036cbb0\"\n        method=\"post\"\n        id=\"mc-embedded-subscribe-form\" name=\"mc-embedded-subscribe-form\" class=\"validate\" target=\"_blank\" novalidate>\n    <div id=\"mc_embed_signup_scroll\">\n      <h3><i class=\"icon icon-generic icon-spacer\" data-icon=\"m\"></i>Newsletter</h3>\n      <input type=\"email\" value=\"\" name=\"EMAIL\" class=\"email\" id=\"mce-EMAIL\" placeholder=\"email address\" required>\n      <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->\n      <div style=\"position: absolute; left: -5000px;\" aria-hidden=\"true\"><input type=\"text\"\n                                                                                name=\"b_d50725c1556266fd605025eaf_91a036cbb0\"\n                                                                                tabindex=\"-1\" value=\"\"></div>\n      <div class=\"clear\"><input type=\"submit\" value=\"Subscribe\" name=\"subscribe\" id=\"mc-embedded-subscribe\"\n                                class=\"button\"></div>\n    </div>\n  </form>\n</div>\n","@import\"//cdn-images.mailchimp.com/embedcode/slim-10_7.css\";h3{border-bottom:solid;border-color:#5ca23561}#mc_embed_signup{background:#fff;clear:left;font:14px Helvetica,Arial,sans-serif}#mc_embed_signup form{padding:0}input#mce-EMAIL.email{width:100%!important}input#mc-embedded-subscribe.button{width:100%!important;background-color:var(--primary)}\n/*# sourceMappingURL=newsletter-subscription.component.css.map */\n","import {Component, OnInit} from '@angular/core';\n\n@Component({\n  selector: 'cp-newsletter-subscription',\n  templateUrl: './newsletter-subscription.component.html',\n  styleUrls: ['./newsletter-subscription.component.css']\n})\nexport class NewsletterSubscriptionComponent implements OnInit {\n\n  constructor() {\n  }\n\n  ngOnInit() {\n  }\n\n}\n","<div class=\"row\">\n  <div class=\"columns medium-12 no-pad-left no-pad-right\">\n    <!-- local-search -->\n    <!-- if you do not have a local-search, delete the following form -->\n    <div id=\"content-search\" name=\"content-search\" >\n      <fieldset>\n        <div class=\"input-group margin-bottom-none\">\n          <input #query type=\"text\" name=\"first\" id=\"content-searchbox\" class=\"input-group-field\" (keydown.enter)=\"search(query.value, 'enter')\"\n                 placeholder=\"GO term(s), Gene name(s), UniProt AC(s), Protein name(s), Protein name(s), Complex AC\">\n          <div class=\"input-group-button\">\n            <input type=\"button\" name=\"submit\" value=\"1\" (click)=\"search(query.value, 'button')\"\n                   class=\"button icon icon-functional\">\n          </div>\n        </div>\n      </fieldset>\n    </div>\n  </div>\n  <div class=\"columns callout medium-12 margin-bottom-none\" style=\"font-size: smaller\">\n    <h5><i class=\"icon icon-generic padding-right-medium\" data-icon=\"?\"></i>Examples:</h5>\n    <div class=\"columns medium-4\">\n      <ul>\n        <li>Gene name(s): <a (click)=\"search('Ndc80', 'example')\">Ndc80</a></li>\n        <li>UniProt AC(s): <a (click)=\"search('Q05471', 'example')\">Q05471</a></li>\n      </ul>\n    </div>\n    <div class=\"columns medium-4\">\n      <ul>\n        <li>Complex AC: <a (click)=\"search('CPX-2158', 'example')\">CPX-2158</a></li>\n        <li>Complex Name: <a (click)=\"search('&quot;nuclear pore&quot;', 'example')\">\"nuclear pore\"</a></li>\n      </ul>\n    </div>\n    <div class=\"columns medium-4\">\n      <ul>\n        <li>GO term(s): <a (click)=\"search('GO:0016491', 'example')\">GO:0016491</a></li>\n        <li>List of ACs: <a (click)=\"search('Q15554, P54274, Q96AP0', 'example')\">Q15554, P54274, Q96AP0</a></li>\n       </ul>\n    </div>\n  </div>\n</div>\n","/*# sourceMappingURL=search.component.css.map */\n","import {Component, OnInit} from '@angular/core';\nimport {Category} from '../../shared/google-analytics/types/category.enum';\nimport {SearchService} from '../service/search.service';\n\n@Component({\n  selector: 'cp-search',\n  templateUrl: './search.component.html',\n  styleUrls: ['./search.component.css']\n})\nexport class SearchComponent implements OnInit {\n\n  constructor(private searchService: SearchService) {\n  }\n\n  ngOnInit() {\n  }\n\n  search(query: string, typeOfButton: string) {\n    this.searchService.search(query, Category.home, typeOfButton);\n  }\n}\n","import {NgModule} from '@angular/core';\nimport {RouterModule, Routes} from '@angular/router';\nimport {HomeComponent} from './home.component';\n\nconst routes: Routes = [\n  {\n    path: 'home',\n    component: HomeComponent\n  },\n  {\n    path: '',\n    redirectTo: '/home',\n    pathMatch: 'full'\n  }\n];\n\n@NgModule({\n  exports: [RouterModule],\n  imports: [RouterModule.forChild(routes)]\n})\nexport class HomeRoutingModule { }\n","import {NgModule} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {RouterModule} from '@angular/router';\nimport {HomeComponent} from './home.component';\nimport {TileMenuComponent} from './tile-menu/tile-menu.component';\nimport {TwitterDisplayComponent} from './twitter-display/twitter-display.component';\nimport {NewsletterSubscriptionComponent} from './newsletter-subscription/newsletter-subscription.component';\nimport {SearchComponent} from '../search/home-search/search.component';\nimport {HomeRoutingModule} from './home-routing.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    HomeRoutingModule\n  ],\n  declarations: [\n    HomeComponent,\n    SearchComponent,\n    NewsletterSubscriptionComponent,\n    TwitterDisplayComponent,\n    TileMenuComponent,\n  ]\n})\nexport class HomeModule {\n}\n","<footer id=\"local-footer\" class=\"local-footer\" role=\"local-footer\">\n  <div class=\"row margin-top-medium\">\n    <div id=\"contributors\" class=\"margin-top-large\" style=\"text-align: center\">\n      <h4><p class=\"icon icon-generic\" data-icon=\"}\"> Our Contributors</p></h4>\n    </div>\n\n    <div class=\"columns\">\n\n      <div style=\"text-align: center\">\n        <a href=\"//www.ceitec.eu\" target=\"_blank\">\n          <img src=\"assets/images/contributors/Ceitec.png\" alt=\"CEITEC\">\n        </a>\n        <a href=\"//www.evidenceontology.org/\" target=\"_blank\">\n          <img src=\"assets/images/contributors/eco.png\" alt=\"eco\">\n        </a>\n        <a href=\"//www.ucl.ac.uk/functional-gene-annotation/cardiovascular\" target=\"_blank\">\n          <img src=\"assets/images/contributors/imex_acg_s.png\" alt=\"ACG\">\n        </a>\n        <a href=\"http://matrixdb.univ-lyon1.fr\" target=\"_blank\">\n          <img src=\"assets/images/contributors/matrixdb.png\" alt=\"matrixDB\">\n        </a>\n        <a href=\"//mint.bio.uniroma2.it\" target=\"_blank\">\n          <img src=\"assets/images/contributors/Mint.png\" alt=\"Mint\">\n        </a>\n        <a href=\"//www.ebi.ac.uk/pdbe/\" target=\"_blank\">\n          <img src=\"assets/images/contributors/PDBe.png\" alt=\"PDBe\">\n        </a>\n        <a href=\"//www.yeastgenome.org\" target=\"_blank\">\n          <img src=\"assets/images/contributors/SGD.png\" alt=\"SGD\">\n        </a>\n        <a href=\"//www.sib.swiss\" target=\"_blank\">\n          <img src=\"assets/images/contributors/sib.png\" alt=\"SIB\">\n        </a>\n        <a href=\"//www.uniprot.org\" target=\"_blank\">\n          <img src=\"assets/images/contributors/uniprot.png\" alt=\"UniProt\">\n        </a>\n        <a href=\"//www.flybase.org\" target=\"_blank\">\n          <img src=\"assets/images/contributors/flybase.png\" alt=\"FlyBase\">\n        </a>\n        <a href=\"//www.rappsilberlab.org/\" target=\"_blank\">\n          <img src=\"assets/images/contributors/rap_lab_text_logo.png\" alt=\"RAPPSILBER\">\n        </a>\n      </div>\n\n      <div class=\"label secondary-color float-right\">{{version}}-{{environmentName}}</div>\n    </div>\n  </div>\n</footer>\n","footer a{text-decoration:none;border-width:0}a,a:visited{border:none;padding:2px}a img{max-height:75px;max-width:175px;padding:2px}\n/*# sourceMappingURL=footer.component.css.map */\n","import {Component, Input, OnInit} from '@angular/core';\n\n\n@Component({\n  selector: 'cp-local-footer',\n  templateUrl: './footer.component.html',\n  styleUrls: ['./footer.component.css']\n})\nexport class FooterComponent implements OnInit {\n\n  @Input() environmentName: string;\n  @Input() version: string;\n\n  constructor() { }\n\n  ngOnInit() {\n    $('cp-footer').foundation();\n  }\n\n}\n","/* tslint:disable:max-line-length */\nimport {BrowserModule} from '@angular/platform-browser';\nimport {NgModule} from '@angular/core';\nimport {FormsModule} from '@angular/forms';\nimport {provideHttpClient, withInterceptorsFromDi} from '@angular/common/http';\nimport {AppComponent} from './app.component';\nimport {AppRoutingModule} from './app-routing.module';\nimport {ComplexPortalService} from './complex/shared/service/complex-portal.service';\nimport {NotificationService} from './shared/notification/service/notification.service';\nimport {ReactomeService} from './complex/complex-details/complex-function/reactome-crossreferences/service/reactome.service';\nimport {EuroPmcService} from './complex/complex-details/complex-references/euro-pmc-crossreferences/service/euro-pmc.service';\nimport {OlsService} from './shared/ols/service/ols.service';\nimport {BasketService} from './shared/basket/service/basket.service';\nimport {ProgressBarComponent} from './shared/loading-indicators/progress-bar/progress-bar.component';\nimport {ToastrModule} from 'ngx-toastr';\nimport {LocalSearchComponent} from './search/local-search/local-search.component';\nimport {BrowserAnimationsModule} from '@angular/platform-browser/animations';\nimport {MatProgressBarModule} from '@angular/material/progress-bar';\nimport {OntologiesComponent} from './ontologies/ontologies.component';\nimport {AnalyticsService} from './shared/google-analytics/service/analytics.service';\nimport {LocalStorageService} from './shared/local-storage/service/local-storage.service';\nimport {SearchService} from './search/service/search.service';\nimport {MarkdownModule} from 'ngx-markdown';\nimport {HomeModule} from './home/home.module';\nimport {RouterModule} from '@angular/router';\nimport {AboutComponent} from './navigation/about/about.component';\nimport {DownloadComponent} from './download/download.component';\nimport {DocumentationComponent} from './navigation/documentation/documentation.component';\nimport {NgxPageScrollCoreModule} from 'ngx-page-scroll-core';\nimport {NgxGoogleAnalyticsModule, NgxGoogleAnalyticsRouterModule} from 'ngx-google-analytics';\nimport {environment} from '../environments/environment';\nimport {FooterComponent} from './footer/footer.component';\nimport {SpeciesPipe} from './complex/shared/pipe/species.pipe';\nimport {ProgressSpinnerComponent} from './shared/loading-indicators/progress-spinner/progress-spinner.component';\n\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    ProgressBarComponent,\n    LocalSearchComponent,\n    OntologiesComponent,\n    AboutComponent,\n    DownloadComponent,\n    DocumentationComponent,\n    FooterComponent\n  ],\n  imports: [\n    BrowserAnimationsModule,\n    BrowserModule,\n    RouterModule.forRoot([], {}),\n    FormsModule,\n    ToastrModule.forRoot(),\n    NgxPageScrollCoreModule.forRoot({scrollOffset: 50}),\n    MatProgressBarModule,\n    MarkdownModule.forRoot(),\n    NgxGoogleAnalyticsModule.forRoot(environment.analytics_id),\n    NgxGoogleAnalyticsRouterModule,\n    HomeModule,\n    AppRoutingModule,\n    ProgressSpinnerComponent\n  ],\n  providers: [\n    ComplexPortalService,\n    NotificationService,\n    ReactomeService,\n    EuroPmcService,\n    OlsService,\n    BasketService,\n    LocalStorageService,\n    SpeciesPipe,\n    AnalyticsService,\n    SearchService,\n    provideHttpClient(withInterceptorsFromDi())\n  ],\n  bootstrap: [AppComponent]\n})\n\nexport class AppModule {\n  // To debug routing problems uncomment following code\n  // constructor(private readonly router: Router) {\n  //   router.events\n  //     .subscribe(console.log)\n  // }\n}\n","import {platformBrowserDynamic} from '@angular/platform-browser-dynamic';\nimport {enableProdMode} from '@angular/core';\nimport {environment} from './environments/environment';\nimport {AppModule} from './app/app.module';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule, {\n  preserveWhitespaces: true\n});\n\n"],"mappings":"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","names":["require_package","__commonJSMin","exports","module","_SELECTOR_REGEXP","CssSelector","_CssSelector","selector","results","_addResult","res","cssSel","cssSelector","match","current","inNot","tag","prefix","attribute","attr","result","escaping","i","char","element","name","value","klass","notSelector","SelectorMatcher","_SelectorMatcher","notSelectors","notMatcher","cssSelectors","callbackCtxt","listContext","SelectorListContext","matcher","classNames","attrs","selectable","SelectorContext","isTerminal","className","terminalMap","terminalValuesMap","partialMap","partialValuesMap","map","terminalList","matchedCallback","selectables","starSelectables","nestedSelector","selectors","cbContext","callback","ViewEncapsulation","ChangeDetectionStrategy","InputFlags","CUSTOM_ELEMENTS_SCHEMA","NO_ERRORS_SCHEMA","SecurityContext","MissingTranslationStrategy","parserSelectorToSimpleSelector","selector","classes","parserSelectorToNegativeSelector","parserSelectorToR3Selector","positive","negative","notSelector","parseSelectorToR3Selector","CssSelector","textEncoder","computeDigest","message","sha1","serializeNodes","decimalDigest","computeDecimalDigest","visitor","_SerializerIgnoreIcuExpVisitor","parts","a","computeMsgId","_SerializerVisitor","text","context","container","child","icu","strCases","k","ph","serializerVisitor$1","nodes","str","textEncoder","utf8","words32","bytesToWords32","Endian","len","w","b","c","d","e","i","h0","h1","h2","h3","h4","j","rol32","fkVal","fk","f","temp","add32","toHexU32","value","index","fingerprint","view","hi","hash32","lo","msg","meaning","msgFingerprint","length","end","res","mix","remainder","add32to64","low","high","count","bytes","endian","size","wordAt","byteAt","word","TypeModifier","Type","modifiers","modifier","BuiltinTypeName","BuiltinType","name","ExpressionType","typeParams","DYNAMIC_TYPE","BuiltinType","BuiltinTypeName","INFERRED_TYPE","BOOL_TYPE","INT_TYPE","NUMBER_TYPE","STRING_TYPE","FUNCTION_TYPE","NONE_TYPE","UnaryOperator","BinaryOperator","nullSafeIsEquivalent","base","other","areAllEquivalentPredicate","equivalentPredicate","len","i","areAllEquivalent","baseElement","otherElement","Expression","type","sourceSpan","name","ReadPropExpr","index","ReadKeyExpr","params","pure","InvokeFunctionExpr","InstantiateExpr","trueCase","falseCase","ConditionalExpr","rhs","BinaryOperatorExpr","parens","TYPED_NULL_EXPR","ExpressionStatement","ReadVarExpr","_ReadVarExpr","visitor","context","value","WriteVarExpr","TypeofExpr","_TypeofExpr","expr","WrappedNodeExpr","_WrappedNodeExpr","node","_WriteVarExpr","modifiers","DeclareVarStmt","StmtModifier","WriteKeyExpr","_WriteKeyExpr","receiver","WritePropExpr","_WritePropExpr","_InvokeFunctionExpr","fn","args","arg","TaggedTemplateExpr","_TaggedTemplateExpr","tag","template","a","b","_InstantiateExpr","classExpr","LiteralExpr","_LiteralExpr","TemplateLiteral","_TemplateLiteral","elements","expressions","el","TemplateLiteralElement","_TemplateLiteralElement","text","rawText","escapeForTemplateLiteral","escapeSlashes","LiteralPiece","PlaceholderPiece","associatedMessage","MEANING_SEPARATOR$1","ID_SEPARATOR$1","LEGACY_ID_INDICATOR","LocalizedString","_LocalizedString","metaBlock","messageParts","placeHolderNames","legacyId","createCookedRawString","partIndex","placeholder","messagePart","computeMsgId","str","escapeStartingColon","escapeColons","range","ExternalExpr","_ExternalExpr","typeParams","ConditionalExpr","_ConditionalExpr","Expression","condition","trueCase","falseCase","type","sourceSpan","nullSafeIsEquivalent","visitor","context","NotExpr","_NotExpr","Expression","condition","sourceSpan","BOOL_TYPE","visitor","context","FnParam","_FnParam","name","type","param","FunctionExpr","_FunctionExpr","params","statements","DeclareFunctionStmt","areAllEquivalent","modifiers","p","ArrowFunctionExpr","_ArrowFunctionExpr","body","DeclareVarStmt","INFERRED_TYPE","UnaryOperatorExpr","_UnaryOperatorExpr","operator","expr","parens","NUMBER_TYPE","BinaryOperatorExpr","_BinaryOperatorExpr","lhs","rhs","ReadPropExpr","_ReadPropExpr","receiver","value","WritePropExpr","ReadKeyExpr","_ReadKeyExpr","index","WriteKeyExpr","LiteralArrayExpr","_LiteralArrayExpr","entries","LiteralMapEntry","_LiteralMapEntry","key","quoted","LiteralMapExpr","_LiteralMapExpr","entriesClone","entry","NULL_EXPR","LiteralExpr","TYPED_NULL_EXPR","INFERRED_TYPE","StmtModifier","LeadingComment","text","multiline","trailingNewline","JSDocComment","tags","serializeTags","Statement","modifiers","sourceSpan","leadingComments","modifier","leadingComment","DeclareVarStmt","_DeclareVarStmt","name","value","type","stmt","visitor","context","DeclareFunctionStmt","_DeclareFunctionStmt","params","statements","areAllEquivalent","ExpressionStatement","_ExpressionStatement","expr","ReturnStatement","_ReturnStatement","IfStmt","_IfStmt","condition","trueCase","falseCase","jsDocComment","tags","JSDocComment","variable","name","type","sourceSpan","ReadVarExpr","importExpr","id","typeParams","ExternalExpr","expressionType","expr","typeModifiers","typeParams","ExpressionType","typeofExpr","expr","TypeofExpr","literalArr","values","type","sourceSpan","LiteralArrayExpr","literalMap","LiteralMapExpr","e","LiteralMapEntry","not","expr","sourceSpan","NotExpr","fn","params","body","type","name","FunctionExpr","arrowFn","ArrowFunctionExpr","ifStmt","condition","thenClause","elseClause","leadingComments","IfStmt","taggedTemplate","tag","template","TaggedTemplateExpr","literal","value","LiteralExpr","localizedString","metaBlock","messageParts","placeholderNames","expressions","LocalizedString","tagToString","tag","out","serializeTags","tags","CONSTANT_PREFIX","UNKNOWN_VALUE_KEY","variable","KEY_CONTEXT","POOL_INCLUSION_LENGTH_THRESHOLD_FOR_STRINGS","FixupExpression","_FixupExpression","Expression","resolved","visitor","context","expression","ConstantPool","isClosureCompilerEnabled","literal","forceShared","LiteralExpr","isLongStringLiteral","key","GenericKeyFn","fixup","newValue","name","definition","usage","FunctionExpr","ReturnStatement","INFERRED_TYPE","StmtModifier","def","expr","id","LiteralArrayExpr","argumentsForKey","e","literalArr","entries","expressionForKey","literalMap","value","index","fn","prefix","useUniqueName","isArrow","ArrowFunctionExpr","current","DeclareVarStmt","DeclareFunctionStmt","values","resultMap","literalFactory","literalFactoryArguments","resultExpressions","parameters","isVariable","FnParam","DYNAMIC_TYPE","pureFunctionDeclaration","arrowFn","alwaysIncludeSuffix","count","result","_GenericKeyFn","entry","LiteralMapExpr","ExternalExpr","ReadVarExpr","TypeofExpr","CORE","_Identifiers","Identifiers","DASH_CASE_REGEXP","dashCaseToCamelCase","input","m","splitAtColon","defaultValues","_splitAt","splitAtPeriod","character","characterIndex","noUndefined","val","utf8Encode","str","encoded","index","codePoint","low","stringify","token","res","newLineIndex","Version","full","splits","_global","VERSION$1","JS_B64_PREFIX","SourceMapGenerator","file","url","content","col0","sourceUrl","sourceLine0","sourceCol0","sourcesIndex","sources","sourcesContent","i","mappings","lastCol0","lastSourceIndex","lastSourceLine0","lastSourceCol0","segments","segment","segAsStr","toBase64VLQ","toBase64String","value","b64","encoded","utf8Encode","i1","i2","i3","toBase64Digit","out","digit","B64_DIGITS","_SINGLE_QUOTE_ESCAPE_STRING_RE","_LEGAL_IDENTIFIER_RE","_INDENT_WITH","_EmittedLine","indent","EmitterVisitorContext","_EmitterVisitorContext","_indent","from","lastPart","part","newLine","l","_createIndent","genFilePath","startsAtLine","map","firstOffsetMapped","mapFirstOffsetIfNeeded","line","lineIdx","spans","parts","spanIdx","span","source","sourceLine","sourceCol","column","emittedLine","columnsLeft","partIndex","AbstractEmitterVisitor","_escapeDollarInStrings","stmt","ctx","comment","JSDocComment","hasElseCase","expr","lineWasEmpty","shouldParenthesize","ArrowFunctionExpr","ast","escapeIdentifier","head","opStr","UnaryOperator","BinaryOperator","entry","expressions","separator","handler","incrementedIndent","statements","input","escapeDollar","alwaysQuote","body","match","count","res","typeWithParameters","type","numParams","expressionType","params","DYNAMIC_TYPE","getSafePropertyAccessString","accessor","name","escapedName","escapeIdentifier","jitOnlyGuardedExpression","expr","guardedExpression","guardedExpression","guard","expr","guardExpr","ExternalExpr","guardNotDefined","BinaryOperatorExpr","BinaryOperator","TypeofExpr","literal","guardUndefinedOrTrue","wrapReference","value","wrapped","WrappedNodeExpr","refsToArray","refs","shouldForwardDeclare","values","literalArr","ref","arrowFn","createMayBeForwardRefExpression","expression","forwardRef","convertFromMaybeForwardRefExpression","generateForwardRef","importExpr","Identifiers","R3FactoryDelegateType","FactoryTarget$1","FactoryTarget","compileFactoryFunction","meta","t","variable","baseFactoryVar","typeForCtor","isDelegatedFactoryMetadata","ctorExpr","InstantiateExpr","injectDependencies","body","retExpr","makeConditionalFactory","nonCtorExpr","r","NULL_EXPR","ctorStmt","ifStmt","delegateArgs","factoryExpr","InvokeFunctionExpr","isExpressionFactoryMetadata","getInheritedFactoryCall","baseFactory","ReturnStatement","factoryFn","fn","FnParam","DYNAMIC_TYPE","INFERRED_TYPE","DeclareVarStmt","createFactoryType","ctorDepsType","createCtorDepsType","NONE_TYPE","expressionType","typeWithParameters","deps","target","dep","index","compileInjectDependency","flags","flagsParam","injectArgs","injectFn","getInjectFn","hasTypes","attributeTypes","type","createCtorDepType","entries","literalMap","ParserError","message","input","errLocation","ctxLocation","ParseSpan","start","end","absoluteOffset","AbsoluteSourceSpan","AST","span","sourceSpan","ASTWithName","nameSpan","EmptyExpr$1","visitor","context","ImplicitReceiver","ThisReceiver","Chain","expressions","Conditional","condition","trueExp","falseExp","PropertyRead","receiver","name","PropertyWrite","SafePropertyRead","KeyedRead","key","SafeKeyedRead","KeyedWrite","BindingPipe","exp","args","LiteralPrimitive","LiteralArray","LiteralMap","keys","Interpolation$1","strings","Binary","operation","left","right","Unary","_Unary","operator","binaryOp","binaryLeft","binaryRight","PrefixNot","NonNullAssert","Call","argumentSpan","SafeCall","ASTWithSource","ast","source","location","errors","VariableBinding","ExpressionBinding","RecursiveAstVisitor","asts","ParsedProperty","name","expression","type","sourceSpan","keySpan","valueSpan","ParsedPropertyType","ParsedEventType","ParsedEvent","targetOrPhase","handler","handlerSpan","ParsedVariable","value","BindingType","BoundElementProperty","securityContext","unit","TagContentType","splitNsName","elementName","fatal","colonIndex","isNgContainer","tagName","isNgContent","isNgTemplate","getNsPrefix","fullName","mergeNsAndName","prefix","localName","Comment$1","_visitor","Text$3","visitor","BoundText","i18n","TextAttribute","BoundAttribute","_BoundAttribute","prop","BoundEvent","_BoundEvent","target","phase","event","Element$1","attributes","inputs","outputs","children","references","startSourceSpan","endSourceSpan","DeferredTrigger","nameSpan","prefetchSpan","whenOrOnSourceSpan","BoundDeferredTrigger","whenSourceSpan","IdleDeferredTrigger","ImmediateDeferredTrigger","HoverDeferredTrigger","reference","onSourceSpan","TimerDeferredTrigger","delay","InteractionDeferredTrigger","ViewportDeferredTrigger","BlockNode","DeferredBlockPlaceholder","minimumTime","DeferredBlockLoading","afterTime","DeferredBlockError","DeferredBlock","triggers","prefetchTriggers","placeholder","loading","error","mainBlockSpan","visitAll$1","remainingBlocks","x","keys","k","SwitchBlock","cases","unknownBlocks","SwitchBlockCase","ForLoopBlock","item","trackBy","trackKeywordSpan","contextVariables","empty","ForLoopBlockEmpty","IfBlock","branches","IfBlockBranch","expressionAlias","UnknownBlock","LetDeclaration$1","Template","templateAttrs","variables","Content","selector","Variable","Reference","Icu$1","vars","placeholders","visitAll$1","visitor","nodes","result","node","newNode","Message","placeholders","placeholderToMessage","meaning","description","customId","serializeMessage","Text$2","value","sourceSpan","context","Container","children","Icu","expression","type","cases","expressionPlaceholder","TagPlaceholder","tag","attrs","startName","closeName","isVoid","startSourceSpan","endSourceSpan","Placeholder","name","IcuPlaceholder","BlockPlaceholder","parameters","serializeMessage","messageNodes","visitor","LocalizeMessageStringVisitor","n","text","container","child","icu","strCases","k","ph","children","_Visitor$2","tag","strAttrs","strChildren","node","text","decl","attrs","name","doctype","_visitor","toPublicName","internalName","I18N_ATTR","I18N_ATTR_PREFIX","I18N_ICU_VAR_PREFIX","isI18nAttribute","name","hasI18nAttrs","element","attr","icuFromI18nMessage","message","formatI18nPlaceholderNamesInMap","params","useCamelCase","_params","key","formatI18nPlaceholderName","name","publicName","toPublicName","chunks","postfix","raw","c","UNSAFE_OBJECT_KEY_NAME_REGEXP","TEMPORARY_NAME","CONTEXT_NAME","RENDER_FLAGS","temporaryAllocator","pushStatement","temp","DeclareVarStmt","DYNAMIC_TYPE","variable","asLiteral","value","literalArr","literal","INFERRED_TYPE","conditionallyCreateDirectiveBindingLiteral","map","forInputs","keys","literalMap","key","declaredName","publicName","minifiedName","expressionValue","differentDeclaringName","hasDecoratorInputTransform","flags","InputFlags","result","UNSAFE_OBJECT_KEY_NAME_REGEXP","DefinitionMap","existing","createCssSelectorFromNode","node","elementName","Element$1","attributes","getAttrsForDirectiveMatching","cssSelector","CssSelector","elementNameNoNs","splitNsName","name","nameNoNs","className","elOrTpl","attributesMap","Template","a","isI18nAttribute","i","BindingType","o","compileInjectable","meta","resolveForwardRefs","factoryMeta","FactoryTarget$1","useClassOnSelf","deps","compileFactoryFunction","__spreadProps","__spreadValues","R3FactoryDelegateType","delegateToFactory","arrowFn","importExpr","Identifiers","token","injectableProps","convertFromMaybeForwardRefExpression","createInjectableType","ExpressionType","typeWithParameters","type","useType","unwrapForwardRefs","createFactoryFunction","unwrappedType","t","FnParam","DYNAMIC_TYPE","variable","UNUSABLE_INTERPOLATION_REGEXPS","assertInterpolationSymbols","identifier","start","end","regexp","InterpolationConfig","_InterpolationConfig","markers","DEFAULT_INTERPOLATION_CONFIG","DEFAULT_CONTAINER_BLOCKS","$EOF","$BSPACE","$TAB","$LF","$VTAB","$FF","$CR","$SPACE","$BANG","$DQ","$HASH","$$","$PERCENT","$AMPERSAND","$SQ","$LPAREN","$RPAREN","$STAR","$PLUS","$COMMA","$MINUS","$PERIOD","$SLASH","$COLON","$SEMICOLON","$LT","$EQ","$GT","$QUESTION","$0","$7","$9","$A","$E","$F","$X","$Z","$LBRACKET","$BACKSLASH","$RBRACKET","$CARET","$_","$a","$b","$e","$f","$n","$r","$t","$u","$v","$x","$z","$LBRACE","$BAR","$RBRACE","$NBSP","$AT","$BT","isWhitespace","code","$TAB","$SPACE","$NBSP","isDigit","$0","$9","isAsciiLetter","$a","$z","$A","$Z","isAsciiHexDigit","$f","$F","isNewLine","$LF","$CR","isOctalDigit","$7","isQuote","$SQ","$DQ","ParseLocation","_ParseLocation","file","offset","line","col","delta","source","len","priorLine","ch","maxChars","maxLines","content","startOffset","endOffset","ctxChars","ctxLines","ParseSourceFile","url","ParseSourceSpan","start","end","fullStart","details","ParseErrorLevel","ParseError","span","msg","level","ctx","r3JitTypeSourceSpan","kind","typeName","sourceUrl","sourceFileName","sourceFile","_anonymousTypeIndex","identifierName","compileIdentifier","ref","identifier","stringify","sanitizeIdentifier","name","makeTemplateObjectPolyfill","AbstractJsEmitterVisitor","AbstractEmitterVisitor","ast","stmt","elements","part","escapeIdentifier","expression","isObjectLiteral","LiteralMapExpr","parts","i","params","param","policy","getPolicy","trustedTypes","_global","s","trustedScriptFromString","script","newTrustedFunctionForJIT","args","fnArgs","fnBody","body","fn","JitEvaluator","statements","refResolver","createSourceMaps","converter","JitEmitterVisitor","EmitterVisitorContext","isUseStrictStatement","literal","vars","createSourceMap","fnArgNames","fnArgValues","argName","emptyFn","headerLines","ReturnStatement","resultVar","LiteralMapEntry","variable","result","StmtModifier","value","id","statement","compileInjector","meta","definitionMap","DefinitionMap","literalArr","importExpr","Identifiers","type","createInjectorType","ExpressionType","R3JitReflector","context","R3SelectorScopeMode","R3NgModuleMetadataKind","compileNgModule","refsToArray","setNgModuleScopeCall","generateSetNgModuleScopeCall","createNgModuleType","compileNgModuleDeclarationExpression","WrappedNodeExpr","moduleType","declarations","exports","imports","includeImportTypes","publicDeclarationTypes","tupleTypeOf","tupleOfTypes","NONE_TYPE","scopeMap","fnCall","InvokeFunctionExpr","guardedCall","jitOnlyGuardedExpression","iife","FunctionExpr","exp","types","typeofExpr","expressionType","typeofTypes","compilePipeFromMetadata","metadata","definitionMapValues","literalMap","createPipeType","typeWithParameters","LiteralExpr","R3TemplateDependencyKind","animationKeywords","scopedAtRuleIdentifiers","ShadowCss","cssText","selector","hostSelector","comments","_commentRe","m","_commentWithHashRe","newLinesMatches","_newLinesRe","COMMENT_PLACEHOLDER","scopedCssText","commentIdx","_commentWithHashPlaceHolderRe","scopeSelector","unscopedKeyframesSet","scopedKeyframesCssText","processRules","rule","__spreadProps","__spreadValues","_","quote","keyframeName","endSpaces","unescapeQuotes","keyframe","spaces1","spaces2","animationDeclarations","original","leadingSpaces","quotedName","nonQuotedName","_match","commaSeparatedKeyframes","_cssContentNextSelectorRe","_cssContentRuleRe","unscopedRules","r","_cssContentUnscopedRuleRe","_cssColonHostRe","hostSelectors","otherSelectors","convertedSelectors","hostSelectorArray","p","convertedSelector","_polyfillHostNoCombinator","_polyfillHost","_cssColonHostContextReGlobal","selectorText","contextSelectorGroups","match","_cssColonHostContextRe","newContextSelectors","contextSelectorGroupsLength","repeatGroups","j","contextSelectors","combineHostContextSelectors","_shadowDOMSelectorsRe","pattern","atRule","CssRule","_shadowDeepSelectors","_polyfillHostNoCombinatorRe","deepParts","shallowPart","otherParts","lre","rre","_selectorReSuffix","_polyfillHostRe","replaceBy","hnc","before","colon","after","isRe","attrName","_scopeSelectorPart","scopedP","t","matches","safeContent","SafeSelector","scopedSelector","startIndex","res","sep","shouldScope","separator","scopedPart","_colonHostContextRe","_polyfillHostContext","_colonHostRe","keep","pseudo","_ph","index","_parenSuffix","BLOCK_PLACEHOLDER","_ruleRe","CONTENT_PAIRS","COMMA_IN_PLACEHOLDER","SEMI_IN_PLACEHOLDER","COLON_IN_PLACEHOLDER","_cssCommaInPlaceholderReGlobal","_cssSemiInPlaceholderReGlobal","_cssColonInPlaceholderReGlobal","input","ruleCallback","escaped","escapeInStrings","inputWithEscapedBlocks","escapeBlocks","nextBlockIndex","escapedResult","suffix","contentPrefix","unescapeInStrings","StringWithEscapedBlocks","escapedString","blocks","charPairs","placeholder","resultParts","escapedBlocks","openCharCount","nonBlockStartIndex","blockStartIndex","openChar","closeChar","char","ESCAPE_IN_STRING_MAP","currentQuoteChar","str","isQuoted","hostMarker","otherSelectorsHasHost","combined","length","contextSelector","previousSelectors","groups","multiples","OpKind","ExpressionKind","VariableFlags","SemanticVariableKind","CompatibilityMode","BindingKind","I18nParamResolutionTime","I18nExpressionFor","I18nParamValueFlags","Namespace","DeferTriggerKind","I18nContextKind","TemplateKind","ConsumesSlot","DependsOnSlotContext","ConsumesVarsTrait","UsesVarOffset","TRAIT_CONSUMES_SLOT","TRAIT_DEPENDS_ON_SLOT_CONTEXT","TRAIT_CONSUMES_VARS","hasConsumesSlotTrait","op","hasDependsOnSlotContextTrait","hasConsumesVarsTrait","hasUsesVarOffsetTrait","expr","createStatementOp","NEW_OP","createVariableOp","xref","initializer","flags","createInterpolateTextOp","interpolation","sourceSpan","Interpolation","strings","expressions","i18nPlaceholders","createBindingOp","target","unit","securityContext","isTextAttribute","isStructuralTemplateAttribute","templateKind","i18nMessage","createPropertyOp","isAnimationTrigger","i18nContext","createTwoWayPropertyOp","createStylePropOp","createClassPropOp","createStyleMapOp","createClassMapOp","createAttributeOp","namespace","createAdvanceOp","createConditionalOp","test","conditions","createRepeaterOp","repeaterCreate","targetSlot","collection","createDeferWhenOp","prefetch","createI18nExpressionOp","i18nOwner","handle","icuPlaceholder","i18nPlaceholder","resolutionTime","usage","createI18nApplyOp","owner","createStoreLetOp","declaredName","_a","_b","_c","_d","_e","_f","_g","_h","isIrExpression","ExpressionBase","Expression","LexicalReadExpr","_LexicalReadExpr","visitor","other","ReferenceExpr","_ReferenceExpr","_StoreLetExpr","transform","transformExpressionsInExpression","StoreLetExpr","ContextLetReferenceExpr","_ContextLetReferenceExpr","ContextExpr","_ContextExpr","view","TrackContextExpr","_TrackContextExpr","NextContextExpr","_NextContextExpr","GetCurrentViewExpr","_GetCurrentViewExpr","RestoreViewExpr","_RestoreViewExpr","ResetViewExpr","_ResetViewExpr","TwoWayBindingSetExpr","_TwoWayBindingSetExpr","ReadVariableExpr","_ReadVariableExpr","_PureFunctionExpr","arg","idx","VisitorContextFlag","PureFunctionExpr","PureFunctionParameterExpr","_PureFunctionParameterExpr","_PipeBindingExpr","a","PipeBindingExpr","_PipeBindingVariadicExpr","numArgs","PipeBindingVariadicExpr","SafePropertyReadExpr","_SafePropertyReadExpr","receiver","SafeKeyedReadExpr","_SafeKeyedReadExpr","SafeInvokeFunctionExpr","_SafeInvokeFunctionExpr","SafeTernaryExpr","_SafeTernaryExpr","guard","EmptyExpr","_EmptyExpr","AssignTemporaryExpr","_AssignTemporaryExpr","ReadTemporaryExpr","_ReadTemporaryExpr","SlotLiteralExpr","_SlotLiteralExpr","slot","ConditionalCaseExpr","_ConditionalCaseExpr","alias","ConstCollectedExpr","_ConstCollectedExpr","visitExpressionsInOp","transformExpressionsInOp","transformExpressionsInInterpolation","transformExpressionsInStatement","condition","innerOp","BinaryOperatorExpr","UnaryOperatorExpr","ReadPropExpr","ReadKeyExpr","WritePropExpr","WriteKeyExpr","LiteralArrayExpr","ConditionalExpr","TypeofExpr","WriteVarExpr","LocalizedString","NotExpr","TaggedTemplateExpr","e","ArrowFunctionExpr","ReadVarExpr","ExternalExpr","ExpressionStatement","DeclareVarStmt","IfStmt","caseStatement","isStringLiteral","_OpList","o","oldLast","ops","first","prev","current","next","oldOp","newOp","newOps","listId","oldPrev","oldNext","last","byList","OpList","SlotHandle","elementContainerOpKinds","isElementOrContainerOp","createElementStartOp","tag","startSourceSpan","wholeSourceSpan","createTemplateOp","functionNameSuffix","createRepeaterCreateOp","primaryView","emptyView","track","varNames","emptyTag","emptyI18nPlaceholder","createElementEndOp","createDisableBindingsOp","createEnableBindingsOp","createTextOp","initialValue","createListenerOp","handlerOps","animationPhase","eventTarget","hostListener","handlerList","createTwoWayListenerOp","createPipeOp","createNamespaceOp","createProjectionDefOp","def","createProjectionOp","fallbackView","createExtractedAttributeOp","bindingKind","createDeferOp","main","mainSlot","ownResolverFn","resolverFn","createDeferOnOp","defer","trigger","createDeclareLetOp","createI18nMessageOp","i18nBlock","message","messagePlaceholder","postprocessingParams","needsPostprocessing","createI18nStartOp","root","createI18nEndOp","createIcuStartOp","createIcuEndOp","createIcuPlaceholderOp","createI18nContextOp","contextKind","createI18nAttributesOp","createHostPropertyOp","CTX_REF","CompilationJobKind","CompilationJob","componentName","pool","compatibility","ComponentCompilationJob","relativeContextFilePath","i18nUseExternalIds","deferMeta","allDeferrableDepsFn","ViewCompilationUnit","parent","newConst","initializers","CompilationUnit","listenerOp","job","HostBindingCompilationJob","HostBindingCompilationUnit","deleteAnyCasts","removeAnys","applyI18nExpressions","i18nContexts","needsApplication","nextContext","assignI18nSlotDependencies","updateOp","i18nExpressionsInProgress","state","createOp","opToRemove","createOpXrefMap","map","extractAttributes","extractAttributeOp","lookupElement$2","SecurityContext","extractedAttributeOp","el","extractable","ownerOp","lookupElement$1","specializeBindings","splitNsName","CHAINABLE","MAX_CHAIN_LENGTH","chain","chainOperationsInList","opList","instruction","collapseSingletonInterpolations","generateConditionalExpressions","defaultCase","cond","tmp","conditionalCase","useTmp","BinaryOperator","caseExpressionTemporaryXref","BINARY_OPERATORS","namespaceForKey","namespacePrefixKey","NAMESPACES","keyForNamespace","k","n","prefixWithNamespace","strippedTag","literalOrArrayLiteral","collectElementConsts","allElementAttributes","attributes","ElementAttributes","attrArray","serializeAttributes","getConstIndex","FLYWEIGHT_ARRAY","nameToValue","trustedValueFn","array","getAttributeNameLiterals","taggedTemplate","TemplateLiteral","TemplateLiteralElement","nameLiteral","bindings","classes","i18n","projectAs","styles","template","parsedR3Selector","parseSelectorToR3Selector","convertI18nBindings","i18nAttributesByElem","i18nAttributesForElem","resolveDeferDepsFns","fullPathName","createI18nContexts","attrContextByMessage","blockContextByI18nBlock","contextOp","rootContext","currentI18nOp","deduplicateTextBindings","seen","seenForElement","configureDeferInstructions","resolveDeferTargetNames","scopes","getScopeForView","scope","Scope$1","resolveTrigger","deferOwnerView","placeholderView","placeholderOp","step","defers","deferOp","REPLACEMENTS","IGNORED_OP_KINDS","collapseEmptyInstructions","opReplacements","startKind","mergedKind","prevOp","expandSafeReads","safeTransform","ternaryTransform","requiresTemporary","needsTemporaryInSafeAccess","temporariesIn","temporaries","eliminateTemporaryAssignments","tmps","read","safeTernaryWithTemporary","isSafeAccessExpression","isUnsafeAccessExpression","isAccessExpression","deepestSafeTernary","st","dst","NULL_EXPR","ESCAPE$1","ELEMENT_MARKER","TEMPLATE_MARKER","TAG_CLOSE_MARKER","CONTEXT_MARKER","LIST_START_MARKER","LIST_END_MARKER","LIST_DELIMITER","extractI18nMessages","i18nMessagesByContext","i18nBlocks","i18nMessageOp","createI18nMessage","currentIcu","icuContext","rootI18nBlock","rootMessage","subMessage","formatIcuPlaceholder","formattedParams","formatParams","formattedPostprocessingParams","v","values","formatValue","placeholderValues","serializedValues","formatParamValues","elementValue","templateValue","tagMarker","closeMarker","generateAdvance","slotMap","slotContext","consumer","generateProjectionDefs","share","selectors","projectionSlotIndex","defExpr","generateVariables","recursivelyProcessView","parentScope","generateVariablesInScopeForView","isListener","scopeView","decl","collectConstExpressions","STYLE_DOT","CLASS_DOT","STYLE_BANG","CLASS_BANG","BANG_IMPORTANT","parseHostStyleProperties","isCssCustomProperty","hyphenate$1","property","parseProperty","overrideIndex","unitIndex","mapLiteral","obj","quoted","literalMap","key","IcuSerializerVisitor","text","container","child","icu","strCases","k","ph","context","value","formatI18nPlaceholderName","serializer","serializeIcuNode","TokenType","KEYWORDS","Lexer","scanner","_Scanner","tokens","token","Token","index","end","type","numValue","strValue","code","operator","newCharacterToken","newIdentifierToken","newPrivateIdentifierToken","newKeywordToken","newOperatorToken","newStringToken","newNumberToken","n","newErrorToken","message","EOF","input","$EOF","length","peek","$SPACE","isIdentifierStart","isDigit","start","$PERIOD","$LPAREN","$RPAREN","$LBRACE","$RBRACE","$LBRACKET","$RBRACKET","$COMMA","$COLON","$SEMICOLON","$SQ","$DQ","$HASH","$PLUS","$MINUS","$STAR","$SLASH","$PERCENT","$CARET","$QUESTION","$LT","$GT","$EQ","$BANG","$AMPERSAND","$BAR","$NBSP","isWhitespace","str","one","twoCode","two","threeCode","three","isIdentifierPart","identifierName","simple","hasSeparators","$_","isExponentStart","isExponentSign","parseIntAutoRadix","quote","buffer","marker","$BACKSLASH","unescapedCode","$u","hex","i","unescape","last","offset","position","$a","$z","$A","$Z","$$","isIdentifierPart","code","isAsciiLetter","isDigit","$_","$$","isExponentStart","$e","$E","isExponentSign","$MINUS","$PLUS","unescape","$n","$LF","$f","$FF","$r","$CR","$t","$TAB","$v","$VTAB","parseIntAutoRadix","text","result","SplitInterpolation","strings","expressions","offsets","TemplateBindingParseResult","templateBindings","warnings","errors","Parser$1","_lexer","input","location","absoluteOffset","interpolationConfig","DEFAULT_INTERPOLATION_CONFIG","sourceToLex","tokens","ast","_ParseAST","ASTWithSource","checker","SimpleExpressionChecker","message","errLocation","ctxLocation","ParserError","templateKey","templateValue","templateUrl","absoluteKeyOffset","absoluteValueOffset","AbsoluteSourceSpan","interpolatedTokens","expressionNodes","i","expressionText","s","expression","span","ParseSpan","interpolation","Interpolation$1","inputToTemplateIndexMap","getIndexMapForOriginalTemplate","atInterpolation","extendLastString","interpStart","interpEnd","fullStart","exprStart","exprEnd","fullEnd","offset","start","piece","LiteralPrimitive","outerQuote","char","nextChar","$SLASH","isQuote","end","startIndex","endIndex","charIndex","expressionEnd","currentQuote","escapeCount","ParseContextFlags","parseFlags","EOF","artificialEndIndex","tmp","serial","context","cb","ret","op","operator","tok","n","exprs","expr","$SEMICOLON","errorIndex","artificialStart","artificialEnd","EmptyExpr$1","Chain","nameStart","nameId","nameSpan","fullSpanEnd","args","$COLON","BindingPipe","yes","no","Conditional","right","Binary","TokenType","Unary","PrefixNot","$PERIOD","$LPAREN","$LBRACKET","NonNullAssert","$RPAREN","ThisReceiver","elements","$RBRACKET","LiteralArray","$LBRACE","ImplicitReceiver","value","literalValue","terminator","$COMMA","keys","values","$RBRACE","keyStart","quoted","key","literalMapKey","sourceSpan","PropertyRead","LiteralMap","readReceiver","isSafe","id","receiver","SafePropertyRead","PropertyWrite","argumentStart","argumentSpan","SafeCall","Call","positionals","operatorFound","bindings","letBinding","binding","KeyedWrite","SafeKeyedRead","KeyedRead","spanEnd","asBinding","ExpressionBinding","VariableBinding","spanStart","index","token","extraMessage","errorMessage","RecursiveAstVisitor","offsetMap","consumedInOriginalTemplate","consumedInInput","tokenIndex","currentToken","decoded","encoded","lengthOfParts","sum","current","NodeWithI18n","i18n","Text","visitor","Expansion","switchValue","type","cases","switchValueSourceSpan","ExpansionCase","valueSourceSpan","expSourceSpan","Attribute","name","keySpan","valueSpan","valueTokens","Element","attrs","children","startSourceSpan","endSourceSpan","Comment","Block","parameters","BlockParameter","LetDeclaration","visitAll","nodes","visit","astResult","_SECURITY_SCHEMA","SECURITY_SCHEMA","registerContext","SecurityContext","ctx","specs","spec","IFRAME_SECURITY_SENSITIVE_ATTRS","isIframeSecuritySensitiveAttr","attrName","ElementSchemaRegistry","BOOLEAN","NUMBER","STRING","OBJECT","SCHEMA","_ATTR_TO_PROP","_PROP_TO_ATTR","inverted","propertyName","attributeName","DomElementSchemaRegistry","encodedType","type","events","strType","strProperties","properties","typeNames","superName","tag","superType","prop","value","superEvent","property","tagName","propName","schemaMetas","schema","NO_ERRORS_SCHEMA","isNgContainer","isNgContent","CUSTOM_ELEMENTS_SCHEMA","isAttribute","name","elementProperties","dashCaseToCamelCase","camelCaseProp","userProvidedProp","val","unit","strVal","errorMsg","_isPixelDimensionStyle","valAndSuffixMatch","HtmlTagDefinition","closedByChildren","implicitNamespacePrefix","contentType","TagContentType","closedByParent","isVoid","ignoreFirstLf","preventNamespaceInheritance","canSelfClose","prefix","DEFAULT_TAG_DEFINITION","TAG_DEFINITIONS","getHtmlTagDefinition","knownTagName","getNsPrefix","TAG_TO_PLACEHOLDER_NAMES","PlaceholderRegistry","attrs","signature","upperTag","baseName","content","upperName","uniqueName","parameters","placeholder","start","strAttrs","end","params","base","id","_expParser","Parser$1","Lexer","createI18nMessageFactory","interpolationConfig","containerBlocks","visitor","_I18nVisitor","nodes","meaning","description","customId","visitNodeFn","noopVisitNodeFn","_html","i18n","_expressionParser","_interpolationConfig","_containerBlocks","context","Expansion","i18nodes","visitAll","Message","el","children","attr","startPhName","closePhName","node","TagPlaceholder","attribute","Text$2","text","comment","icu","i18nIcuCases","i18nIcu","Icu","caze","Container","expPh","phName","IcuPlaceholder","_icuCase","_context","block","param","BlockPlaceholder","_parameter","decl","tokens","sourceSpan","previousI18n","hasInterpolation","token","expression","extractPlaceholderName","Placeholder","previous","ParseSourceSpan","reusePreviousSourceSpans","assertSingleContainerMessage","assertEquivalentNodes","i","message","previousNodes","_CUSTOM_PH_EXP","input","I18nError","ParseError","span","msg","NAMED_ENTITIES","NGSP_UNICODE","TokenError","tokenType","TokenizeResult","errors","nonNormalizedIcuExpressions","tokenize","source","url","getTagDefinition","options","tokenizer","_Tokenizer","ParseSourceFile","mergeTextTokens","_CR_OR_CRLF_REGEXP","_unexpectedCharacterErrorMsg","charCode","$EOF","_unknownEntityErrorMsg","entitySrc","_unparsableEntityErrorMsg","entityStr","CharacterReferenceType","_ControlFlowError","error","_file","_getTagDefinition","DEFAULT_INTERPOLATION_CONFIG","c","range","EscapedCharacterCursor","PlainCharacterCursor","e","$LT","$BANG","$LBRACKET","$MINUS","$SLASH","$AT","$RBRACE","spacesInNameAllowed","nameCursor","code","isWhitespace","isBlockNameChar","startToken","$LPAREN","isNotWhitespace","$RPAREN","$LBRACE","isBlockParameterChar","inQuote","openParens","$SEMICOLON","char","$BACKSLASH","isQuote","$EQ","isNewLine","allowDigit","isAsciiLetter","$$","$_","isDigit","inner","isExpansionCaseStart","parts","CursorError","compareCharCodeCaseInsensitive","location","chars","len","initialPosition","predicate","textTokenType","$HASH","isHex","$x","$X","codeStart","isDigitEntityEnd","entityType","strNum","nameStart","isNamedEntityEnd","consumeEntities","endMarkerPredicate","tagCloseStart","foundEndMarker","$AMPERSAND","contentStart","$GT","nameOrPrefixStart","$COLON","isPrefixEnd","isNameEnd","openTagToken","contentTokenType","attrNameStart","$SQ","$DQ","prefixAndName","quoteChar","endPredicate","condition","$COMMA","normalizedCondition","conditionToken","interpolationTokenType","endInterpolation","current","interpolationStart","prematureEndPredicate","expressionStart","inComment","tmp","$a","$z","$A","$Z","isInterpolation","$0","$9","isAsciiHexDigit","peek","code1","code2","toUpperCaseCharCode","srcTokens","dstTokens","lastDstToken","_PlainCharacterCursor","fileOrCursor","state","other","leadingTriviaCodePoints","fullStart","startLocation","endLocation","fullStartLocation","pos","currentChar","$LF","cursor","ParseLocation","_EscapedCharacterCursor","__spreadValues","$n","$r","$CR","$v","$VTAB","$t","$TAB","$b","$BSPACE","$f","$FF","$u","digitStart","length","isOctalDigit","octal","hex","TreeError","_TreeError","elementName","ParseTreeResult","rootNodes","Parser","tokenizeResult","parser","_TreeBuilder","__TreeBuilder","leftoverContainer","Block","prev","_startToken","endToken","Comment","switchValue","cases","expCase","exp","expansionCaseParser","expSourceSpan","ExpansionCase","expansionFormStack","lastOnStack","startSpan","parent","decodeEntity","endSpan","Text","Element","startTagToken","fullName","selfClosing","tagDef","parentEl","isClosedByChild","endTagToken","errMsg","expectedName","expectedType","endSourceSpan","unexpectedCloseTagDetected","stackIndex","mergeNsAndName","attrEnd","valueTokens","valueStartSpan","valueEnd","valueToken","valueSpan","Attribute","paramToken","BlockParameter","startOffset","nameSpan","LetDeclaration","nameString","localName","parentElement","parentTagName","splitNsName","stack","element","match","entity","TRUSTED_TYPES_SINKS","isTrustedTypesSink","setI18nRefs","htmlNode","i18nNode","NodeWithI18n","I18nMetaVisitor","keepI18nAttrs","enableI18nLegacyMessageIdFormat","DEFAULT_CONTAINER_BLOCKS","meta","result","hasI18nAttrs","attrsMeta","I18N_ATTR","I18N_ATTR_PREFIX","expansion","currentMessage","icuFromI18nMessage","expansionCase","parameter","parseI18nMeta","decimalDigest","computeDigest","computeDecimalDigest","previousMessage","I18N_MEANING_SEPARATOR","I18N_ID_SEPARATOR","idIndex","descIndex","meaningAndDesc","i18nMetaToJSDoc","tags","jsDocComment","GOOG_GET_MSG","createGoogleGetMsgStatements","variable$1","closureVar","placeholderValues","messageString","serializeI18nMessageForGetMsg","args","literal","mapLiteral","formatI18nPlaceholderNamesInMap","literalMap","formatI18nPlaceholderName","googGetMsgStmt","variable","i18nAssignmentStmt","ExpressionStatement","GetMsgSerializerVisitor","container","child","serializeIcuNode","ph","serializerVisitor","createLocalizeStatements","messageParts","placeHolders","serializeI18nMessageForLocalize","getSourceSpan","expressions","localizedString$1","localizedString","variableInitialization","LocalizeSerializerVisitor","placeholderToMessage","pieces","LiteralPiece","associatedMessage","PlaceholderPiece","processMessagePieces","startNode","endNode","createEmptyMessagePart","part","NG_I18N_CLOSURE_MODE","TRANSLATION_VAR_PREFIX","I18N_ICU_MAPPING_PREFIX","ESCAPE","CLOSURE_TRANSLATION_VAR_PREFIX","getTranslationConstPrefix","extra","declareI18nVariable","DeclareVarStmt","INFERRED_TYPE","collectI18nConsts","job","fileBasedI18nSuffix","extractedAttributesByI18nContext","i18nAttributesByElement","i18nExpressionsByElement","messages","op","OpKind","attributes","I18nExpressionFor","i18nValuesByContext","messageConstIndices","mainVar","statements","collectMessage","i18nConst","attributesForMessage","OpList","elem","isElementOrContainerOp","i18nAttributes","i18nExpressions","seenPropertyNames","i18nExpr","seen","i18nAttributeConfig","i18nExprValue","LiteralArrayExpr","msgIndex","messageOp","subMessagePlaceholders","subMessageId","subMessage","subMessageVar","subMessageStatements","subMessages","addSubMessageParams","i18nGenerateClosureVar","transformFn","postprocessingParams","formattedPostprocessingParams","extraTransformFnParams","expr","importExpr","Identifiers","getTranslationDeclStmts","literalArr","paramsObject","ifStmt","createClosureModeGuard","typeofExpr","STRING_TYPE","pool","messageId","useExternalIds","suffix","uniqueSuffix","sanitizeIdentifier","convertI18nText","currentI18n","currentIcu","textNodeI18nBlocks","textNodeIcus","icuPlaceholderByText","icuPlaceholderOp","createIcuPlaceholderOp","i18nOp","icuOp","icuPlaceholder","contextId","resolutionTime","I18nParamResolutionTime","ops","createI18nExpressionOp","liftLocalRefs","localRefs","serializeLocalRefs","refs","constRefs","ref","emitNamespaceChanges","activeNamespace","Namespace","createNamespaceOp","parse","styles","parenDepth","quote","valueStart","propStart","currentProp","hyphenate","styleVal","v","parseExtractedStyles","elements","BindingKind","isStringLiteral","target","TemplateKind","parsedStyles","createExtractedAttributeOp","parsedClasses","parsedClass","nameFunctionsAndVariables","addNamesToView","CompatibilityMode","compatibility","varNames","animation","getVariableName","ViewCompilationUnit","emptyView","fallbackView","childView","normalizeStylePropName","stripImportant","visitExpressionsInOp","ReadVariableExpr","SemanticVariableKind","compatPrefix","importantIndex","mergeNextContextExpressions","mergeNextContextsInOps","NextContextExpr","mergeSteps","tryToMerge","candidate","flags","isIrExpression","VisitorContextFlag","ExpressionKind","CONTAINER_TAG","generateNgContainerOps","updatedElementXrefs","lookupElement","xref","disableBindings$1","view","createDisableBindingsOp","createEnableBindingsOp","generateNullishCoalesceExpressions","transformExpressionsInOp","BinaryOperatorExpr","BinaryOperator","assignment","AssignTemporaryExpr","read","ReadTemporaryExpr","ConditionalExpr","NULL_EXPR","LiteralExpr","kindTest","kind","kindWithInterpolationTest","interpolation","Interpolation","basicListenerKindTest","nonInterpolationPropertyKindTest","CREATE_ORDERING","UPDATE_ORDERING","keepLast","UPDATE_HOST_ORDERING","handledOpKinds","orderOps","orderWithin","ordering","CompilationJobKind","opList","opsToOrder","firstTargetInGroup","currentTarget","hasDependsOnSlotContextTrait","reorder","groups","groupIndex","o","group","transform","removeContentSelectors","createOpXrefMap","lookupInXrefMap","isSelectAttribute","map","createPipes","processPipeBindingsInView","updateOp","addPipeToCreationBlock","createPipeOp","afterTargetXref","binding","hasConsumesSlotTrait","pipe","createVariadicPipes","PipeBindingExpr","PipeBindingVariadicExpr","propagateI18nBlocks","propagateI18nBlocksToTemplates","subTemplateIndex","i18nBlock","propagateI18nBlocksForView","forView","i18nPlaceholder","wrapTemplateWithI18n","parentI18n","createI18nStartOp","createI18nEndOp","extractPureFunctions","PureFunctionExpr","constantDef","PureFunctionConstant","GenericKeyFn","numArgs","PureFunctionParameterExpr","declName","keyExpr","fnParams","idx","FnParam","returnExpr","transformExpressionsInExpression","ArrowFunctionExpr","StmtModifier","generatePureLiteralStructures","transformLiteralArray","LiteralMapExpr","transformLiteralMap","derivedEntries","nonConstantArgs","entry","LiteralMapEntry","slot","constIndex","localRefIndex","elementOrContainerBase","elementStart","instruction","call","elementEnd","elementContainerStart","elementContainer","elementContainerEnd","template","templateFnRef","decls","vars","disableBindings","enableBindings","listener","handlerFn","eventTargetResolver","syntheticHost","twoWayBindingSet","twoWayListener","namespaceHTML","namespaceSVG","namespaceMath","advance","delta","reference","nextContext","steps","getCurrentView","restoreView","savedView","resetView","returnValue","initialValue","defer","selfSlot","primarySlot","dependencyResolverFn","loadingSlot","placeholderSlot","errorSlot","loadingConfig","placeholderConfig","enableTimerScheduling","deferTriggerToR3TriggerInstructionsMap","DeferTriggerKind","deferOn","trigger","prefetch","instructions","instructionToCall","a","projectionDef","def","projection","projectionSlotIndex","fallbackFnName","fallbackDecls","fallbackVars","i18nStart","repeaterCreate","viewFnName","trackByFn","trackByUsesComponentInstance","emptyViewFnName","emptyDecls","emptyVars","emptyTag","emptyConstIndex","repeater","collection","deferWhen","declareLet","storeLet","readContextLet","i18nEnd","i18nAttributesConfig","sanitizer","twoWayProperty","namespace","styleProp","classProp","styleMap","classMap","PIPE_BINDINGS","pipeBind","varOffset","pipeBindV","textInterpolate","strings","interpolationArgs","collateInterpolationArgs","callVariadicInstruction","TEXT_INTERPOLATE_CONFIG","i18nExp","i18nApply","propertyInterpolate","extraArgs","PROPERTY_INTERPOLATE_CONFIG","attributeInterpolate","ATTRIBUTE_INTERPOLATE_CONFIG","stylePropInterpolate","STYLE_PROP_INTERPOLATE_CONFIG","styleMapInterpolate","STYLE_MAP_INTERPOLATE_CONFIG","classMapInterpolate","CLASS_MAP_INTERPOLATE_CONFIG","hostProperty","syntheticHostProperty","pureFunction","fn","callVariadicInstructionExpr","PURE_FUNCTION_CONFIG","createStatementOp","conditional","contextValue","config","baseArgs","n","GLOBAL_TARGET_RESOLVERS","reify","reifyCreateOperations","reifyUpdateOperations","reifyCreateOperations","unit","ops","op","transformExpressionsInOp","reifyIrExpression","VisitorContextFlag","OpKind","OpList","text","elementStart","element","elementEnd","elementContainerStart","elementContainer","elementContainerEnd","i18nStart","i18nEnd","i18n","i18nAttributes","ViewCompilationUnit","childView","template","variable","disableBindings","enableBindings","pipe","declareLet","listenerFn","reifyListenerHandler","eventTargetResolver","GLOBAL_TARGET_RESOLVERS","listener","twoWayListener","createStatementOp","DeclareVarStmt","StmtModifier","Namespace","namespaceHTML","namespaceSVG","namespaceMath","timerScheduling","defer","args","DeferTriggerKind","deferOn","projectionDef","fallbackViewFnName","fallbackDecls","fallbackVars","fallbackView","projection","repeaterView","emptyViewFnName","emptyDecls","emptyVars","emptyView","repeaterCreate","reifyUpdateOperations","_unit","advance","Interpolation","propertyInterpolate","property","twoWayProperty","stylePropInterpolate","styleProp","classProp","styleMapInterpolate","styleMap","classMapInterpolate","classMap","i18nExp","i18nApply","textInterpolate","attributeInterpolate","attribute","syntheticHostProperty","hostProperty","conditional","repeater","deferWhen","expr","isIrExpression","ExpressionKind","nextContext","reference","restoreView","resetView","getCurrentView","pureFunction","pipeBind","pipeBindV","literal","readContextLet","storeLet","name","handlerOps","consumesDollarEvent","handlerStmts","params","FnParam","fn","removeEmptyBindings","job","EmptyExpr","removeI18nContexts","removeUnusedI18nAttributesOps","ownersWithI18nExpressions","resolveContexts","processLexicalScope$1","view","scope","SemanticVariableKind","ReadVariableExpr","ContextExpr","resolveDollarEvent","transformDollarEvent","LexicalReadExpr","ReadVarExpr","resolveI18nElementPlaceholders","i18nContexts","elements","resolvePlaceholdersForView","pendingStructuralDirective","currentOps","pendingStructuralDirectiveCloses","recordElementStart","startOp","recordElementClose","TemplateKind","recordTemplateStart","recordTemplateClose","forSlot","forView","emptySlot","i18nContext","i18nBlock","structuralDirective","startName","closeName","flags","I18nParamValueFlags","value","addParam","slot","i18nPlaceholder","getSubTemplateIndexForTemplateTag","i18nOp","childOp","placeholder","subTemplateIndex","values","resolveI18nExpressionPlaceholders","subTemplateIndices","icuPlaceholders","expressionIndices","referenceIndex","I18nExpressionFor","index","updatePlaceholder","I18nParamResolutionTime","resolveNames","processLexicalScope","savedView","localDefinitions","ReadPropExpr","RestoreViewExpr","visitExpressionsInOp","sanitizerFns","SecurityContext","Identifiers","trustedValueFns","resolveSanitizers","createOpXrefMap","CompilationJobKind","trustedValueFn","getOnlySecurityContext","importExpr","sanitizerFn","isIframe","ownerOp","isElementOrContainerOp","isIframeElement","isIframeSecuritySensitiveAttr","securityContext","transformTwoWayBindingSet","TwoWayBindingSetExpr","target","ReadKeyExpr","twoWayBindingSet","saveAndRestoreView","createVariableOp","GetCurrentViewExpr","VariableFlags","needsRestoreView","handlerOp","ReferenceExpr","ContextLetReferenceExpr","addSaveRestoreViewOperationToListener","ReturnStatement","ResetViewExpr","allocateSlots","slotMap","slotCount","hasConsumesSlotTrait","specializeStyleBindings","BindingKind","createClassPropOp","createStylePropOp","createStyleMapOp","createClassMapOp","generateTemporaryVariables","generateTemporaries","opCount","generatedStatements","finalReads","flag","ReadTemporaryExpr","count","assigned","released","defs","AssignTemporaryExpr","assignName","names","generateTrackFns","usesComponentContext","transformExpressionsInExpression","PipeBindingExpr","PipeBindingVariadicExpr","TrackContextExpr","fnParams","FunctionExpr","arrowFn","optimizeTrackFns","isTrackByFunctionCall","rootView","InvokeFunctionExpr","arg0","arg1","generateTrackVariables","countVariables","varCount","hasConsumesVarsTrait","varsUsedByOp","CompatibilityMode","PureFunctionExpr","hasUsesVarOffsetTrait","varsUsedByIrExpression","ComponentCompilationJob","slots","isSingletonInterpolation","optimizeVariables","inlineAlwaysInlineVariables","optimizeVariablesInOpList","Fence","vars","fencesForIrExpression","compatibility","varDecls","varUsages","varRemoteUsages","opMap","collectOpInfo","countVariableUsages","contextIsUsed","opInfo","stmtOp","uncountVariableUsages","toInline","id","isAlwaysInline","candidate","decl","varInfo","targetOp","allowConservativeInlining","tryInlineVariableInitializer","safeToInlinePastFences","fences","variablesUsed","varRemoteUsage","declFences","initializer","inlined","inliningAllowed","exprFences","wrapI18nIcus","currentI18nOp","addedI18nId","createI18nStartOp","createI18nEndOp","optimizeStoreLet","letUsedExternally","expression","StoreLetExpr","removeIllegalLetReferences","current","generateLocalLetReferences","phases","removeContentSelectors","parseHostStyleProperties","emitNamespaceChanges","propagateI18nBlocks","deduplicateTextBindings","specializeBindings","extractAttributes","createI18nContexts","parseExtractedStyles","collapseSingletonInterpolations","orderOps","generateConditionalExpressions","createPipes","configureDeferInstructions","convertI18nText","convertI18nBindings","assignI18nSlotDependencies","applyI18nExpressions","createVariadicPipes","generatePureLiteralStructures","generateProjectionDefs","generateVariables","deleteAnyCasts","resolveDeferTargetNames","liftLocalRefs","generateNullishCoalesceExpressions","expandSafeReads","extractI18nMessages","collectI18nConsts","collectConstExpressions","collectElementConsts","generateAdvance","nameFunctionsAndVariables","resolveDeferDepsFns","mergeNextContextExpressions","generateNgContainerOps","collapseEmptyInstructions","disableBindings$1","extractPureFunctions","reify","chain","transform","kind","phase","emitTemplateFn","tpl","pool","rootFn","emitView","emitChildViews","parent","viewFn","createStatements","updateStatements","createCond","maybeGenerateRfBlock","updateCond","statements","ifStmt","BinaryOperatorExpr","BinaryOperator","emitHostBindingFunction","compatibilityMode","domSchema","DomElementSchemaRegistry","NG_TEMPLATE_TAG_NAME","isI18nRootNode","meta","Message","isSingleI18nIcu","Icu","ingestComponent","componentName","constantPool","relativeContextFilePath","i18nUseExternalIds","deferMeta","allDeferrableDepsFn","ingestNodes","ingestHostBinding","input","bindingParser","HostBindingCompilationJob","bindingKind","securityContexts","context","ingestHostProperty","ingestHostAttribute","event","ingestHostEvent","ast","Interpolation$1","convertAst","createBindingOp","attrBinding","ParsedEventType","eventBinding","createListenerOp","SlotHandle","makeListenerHandlerOps","node","Element$1","ingestElement","Template","ingestTemplate","Content","ingestContent","Text$3","ingestText","BoundText","ingestBoundText","IfBlock","ingestIfBlock","SwitchBlock","ingestSwitchBlock","DeferredBlock","ingestDeferBlock","Icu$1","ingestIcu","ForLoopBlock","ingestForBlock","LetDeclaration$1","ingestLetDeclaration","TagPlaceholder","namespaceKey","elementName","splitNsName","createElementStartOp","namespaceForKey","ingestElementBindings","ingestReferences","i18nBlockId","endOp","createElementEndOp","tmpl","tagNameWithoutNamespace","namespacePrefix","namespace","functionNameSuffix","prefixWithNamespace","templateKind","isPlainTemplate","templateOp","createTemplateOp","ingestTemplateBindings","content","child","Comment$1","createProjectionOp","attr","asMessage","icuPlaceholder","createTextOp","ASTWithSource","Container","i18nPlaceholders","Placeholder","textXref","baseSourceSpan","createInterpolateTextOp","ifBlock","firstXref","conditions","i","ifCase","cView","tagName","ingestControlFlowInsertionPoint","CTX_REF","ifCaseI18nMeta","BlockPlaceholder","caseExpr","conditionalCaseExpr","ConditionalCaseExpr","createConditionalOp","switchBlock","switchCase","switchCaseI18nMeta","ingestDeferView","suffix","i18nMeta","children","sourceSpan","secondaryView","deferBlock","ownResolverFn","main","loading","error","deferXref","deferOp","createDeferOp","prefetch","deferOnOps","deferWhenOps","triggers","deferOnOp","createDeferOnOp","createDeferWhenOp","icu","xref","createIcuStartOp","icuFromI18nMessage","__spreadValues","createIcuEndOp","forBlock","indexName","countName","indexVarNames","getComputedForLoopVariableExpression","convertSourceSpan","track","emptyTagName","varNames","emptyI18nPlaceholder","createRepeaterCreateOp","createRepeaterOp","createDeclareLetOp","createStoreLetOp","PropertyRead","isThisReceiver","ThisReceiver","isImplicitReceiver","ImplicitReceiver","isSpecialNode","PropertyWrite","WritePropExpr","KeyedWrite","WriteKeyExpr","Call","arg","LiteralPrimitive","Unary","UnaryOperatorExpr","UnaryOperator","Binary","operator","BINARY_OPERATORS","KeyedRead","Chain","LiteralMap","entries","key","idx","LiteralMapEntry","LiteralMapExpr","LiteralArray","LiteralArrayExpr","Conditional","ConditionalExpr","NonNullAssert","BindingPipe","SafeKeyedRead","SafeKeyedReadExpr","SafePropertyRead","SafePropertyReadExpr","SafeCall","SafeInvokeFunctionExpr","a","EmptyExpr$1","PrefixNot","not","convertAstWithInterpolation","e","AST","BINDING_KINDS","BindingType","bindings","i18nAttributeBindingNames","astOf","b","output","createTwoWayListenerOp","makeTwoWayListenerHandlerOps","createI18nAttributesOp","TextAttribute","createTemplateBinding","createExtractedAttributeOp","type","isStructuralTemplateAttribute","i18nMessage","isTextBinding","bindingType","handler","handlerSpan","handlerExprs","expressions","returnExpr","ExpressionStatement","handlerExpr","eventReference","twoWaySetExpr","assertIsArray","span","start","end","fullStart","ParseSourceSpan","root","renderFlagCheckIfStmt","RENDER_FLAGS","toQueryFlags","query","getQueryPredicate","predicate","selector","selectors","token","literalArr","createQueryCreateCall","queryTypeFns","prependParams","parameters","CONTEXT_NAME","queryCreateFn","queryAdvancePlaceholder","collapseAdvanceStatements","result","advanceCollapseCount","flushAdvanceCount","st","createViewQueriesFunction","viewQueries","tempAllocator","temporaryAllocator","TEMPORARY_NAME","queryDefinitionCall","temporary","getQueryList","refresh","updateDirective","viewQueryFnName","NUMBER_TYPE","INFERRED_TYPE","createContentQueriesFunction","queries","contentQueriesFnName","HtmlParser","Parser","getHtmlTagDefinition","source","url","options","PRESERVE_WS_ATTR_NAME","SKIP_WS_TRIM_TAGS","WS_CHARS","NO_WS_REGEXP","WS_REPLACE_REGEXP","hasPreserveWhitespacesAttr","attrs","replaceNgsp","NGSP_UNICODE","WhitespaceVisitor","Element","visitAll","visitAllWithSiblings","isNotBlank","hasExpansionSibling","Expansion","tokens","createWhitespaceProcessedTextToken","processWhitespace","Text","comment","expansion","expansionCase","block","Block","parameter","parts","visitAllWithSiblings","visitor","nodes","result","ast","i","context","astResult","PROPERTY_PARTS_SEPARATOR","ATTRIBUTE_PREFIX","CLASS_PREFIX","STYLE_PREFIX","TEMPLATE_ATTR_PREFIX$1","ANIMATE_PROP_PREFIX","BindingParser","_exprParser","_interpolationConfig","_schemaRegistry","errors","_allowInvalidAssignmentEvents","properties","sourceSpan","boundProps","propName","expression","hostListeners","targetEvents","value","interpolatedTokens","sourceInfo","absoluteOffset","e","tplKey","tplValue","absoluteValueOffset","targetMatchableAttrs","targetProps","targetVars","isIvyAst","absoluteKeyOffset","bindings","binding","bindingSpan","moveParseSourceSpan","key","keySpan","VariableBinding","valueSpan","ParsedVariable","srcSpan","bindingsResult","warning","ParseErrorLevel","name","isAnimationLabel","AbsoluteSourceSpan","ParsedProperty","ParsedPropertyType","isHost","isPartOfAssignmentBinding","isAnimationProp","expr","isHostBinding","elementSelector","boundProp","skipValidation","mapPropertyName","BoundElementProperty","BindingType","SecurityContext","unit","bindingType","boundPropertyName","parts","securityContexts","calcPossibleSecurityContexts","nsSeparatorIdx","ns","mergeNsAndName","mappedPropName","isAssignmentEvent","handlerSpan","selector","isAttribute","prop","matches","splitAtPeriod","eventName","phase","ParsedEvent","ParsedEventType","target","splitAtColon","prevErrorCount","isValid","EmptyExpr$1","message","level","ParseError","error","isAttr","report","ASTWithSource","NonNullAssert","PropertyRead","KeyedRead","Binary","Conditional","PrefixNot","isAnimationLabel","name","calcPossibleSecurityContexts","registry","selector","propName","isAttribute","ctxs","CssSelector","elementNames","notElementNames","possibleElementNames","elementName","SecurityContext","moveParseSourceSpan","sourceSpan","absoluteSpan","startDiff","endDiff","ParseSourceSpan","isStyleUrlResolvable","url","schemeMatch","URL_WITH_SCHEMA_REGEXP","NG_CONTENT_SELECT_ATTR","LINK_ELEMENT","LINK_STYLE_REL_ATTR","LINK_STYLE_HREF_ATTR","LINK_STYLE_REL_VALUE","STYLE_ELEMENT","SCRIPT_ELEMENT","NG_NON_BINDABLE_ATTR","NG_PROJECT_AS","preparseElement","ast","selectAttr","hrefAttr","relAttr","nonBindable","projectAs","attr","lcAttrName","normalizeNgContentSelect","nodeName","type","PreparsedElementType","isNgContent","PreparsedElement","FOR_LOOP_EXPRESSION_PATTERN","FOR_LOOP_TRACK_PATTERN","CONDITIONAL_ALIAS_PATTERN","ELSE_IF_PATTERN","FOR_LOOP_LET_PATTERN","CHARACTERS_IN_SURROUNDING_WHITESPACE_PATTERN","ALLOWED_FOR_LOOP_LET_VARIABLES","isConnectedForLoopBlock","isConnectedIfLoopBlock","createIfBlock","connectedBlocks","visitor","bindingParser","errors","validateIfConnectedBlocks","branches","mainBlockParams","parseConditionalBlockParameters","IfBlockBranch","visitAll","block","params","children","ifBlockStartSourceSpan","ifBlockEndSourceSpan","wholeSourceSpan","lastBranch","IfBlock","createForLoop","parseForLoopParameters","node","empty","ParseError","ForLoopBlockEmpty","endSpan","ForLoopBlock","createSwitchBlock","validateSwitchBlock","primaryExpression","parseBlockParameterToBinding","cases","unknownBlocks","defaultCase","Block","UnknownBlock","expression","SwitchBlockCase","SwitchBlock","expressionParam","secondaryParams","match","stripOptionalParentheses","itemName","rawExpression","variableName","variableSpan","result","Variable","emptySpanAfterForBlockStart","param","letMatch","variablesSpan","parseLetParameter","trackMatch","EmptyExpr$1","keywordSpan","span","loopItemName","context","parts","startSpan","part","expressionParts","v","keyLeadingWhitespace","keyName","keySpan","valueSpan","valueLeadingWhitespace","implicit","hasElse","i","hasDefault","Comment","Text","start","end","expressionAlias","aliasMatch","variableStart","spaceRegex","openParens","char","TIME_PATTERN","SEPARATOR_PATTERN","COMMA_DELIMITED_SYNTAX","$LBRACE","$RBRACE","$LBRACKET","$RBRACKET","$LPAREN","$RPAREN","OnTriggerType","parseWhenTrigger","triggers","whenIndex","whenSourceSpan","prefetchSpan","getPrefetchSpan","getTriggerParametersStart","parsed","trackTrigger","BoundDeferredTrigger","parseOnTrigger","placeholder","onIndex","onSourceSpan","OnTriggerParser","Lexer","token","$COMMA","prevErrors","parameters","identifier","triggerNameStartSpan","nameSpan","isFirstTrigger","prefetchSourceSpan","createIdleTrigger","createTimerTrigger","createInteractionTrigger","createImmediateTrigger","createHoverTrigger","createViewportTrigger","e","commaDelimStack","current","TokenType","trigger","message","newStart","newEnd","allTriggers","IdleDeferredTrigger","delay","parseDeferredTime","TimerDeferredTrigger","ImmediateDeferredTrigger","validateReferenceBasedTrigger","HoverDeferredTrigger","InteractionDeferredTrigger","ViewportDeferredTrigger","Element$1","value","startPosition","hasFoundSeparator","time","units","PREFETCH_WHEN_PATTERN","PREFETCH_ON_PATTERN","MINIMUM_PARAMETER_PATTERN","AFTER_PARAMETER_PATTERN","WHEN_PARAMETER_PATTERN","ON_PARAMETER_PATTERN","isConnectedDeferLoopBlock","createDeferredBlock","loading","error","parseConnectedBlocks","prefetchTriggers","parsePrimaryTriggers","lastEndSourceSpan","endOfLastSourceSpan","lastConnectedBlock","sourceSpanWithConnectedBlocks","DeferredBlock","parsePlaceholderBlock","parseLoadingBlock","parseErrorBlock","minimumTime","parsedTime","DeferredBlockPlaceholder","afterTime","DeferredBlockLoading","DeferredBlockError","BIND_NAME_REGEXP","KW_BIND_IDX","KW_LET_IDX","KW_REF_IDX","KW_ON_IDX","KW_BINDON_IDX","KW_AT_IDX","IDENT_KW_IDX","BINDING_DELIMS","TEMPLATE_ATTR_PREFIX","htmlAstToRender3Ast","htmlNodes","options","transformer","HtmlAstToIvyAst","ivyNodes","allErrors","element","isI18nRootElement","isI18nRootNode","preparsedElement","contents","textContents","isTemplateElement","isNgTemplate","parsedProperties","boundEvents","variables","references","attributes","i18nAttrsMeta","templateParsedProperties","templateVariables","elementHasInlineTemplate","attribute","hasBinding","normalizedName","normalizeAttributeName","isTemplateBinding","templateValue","templateKey","parsedVariables","absoluteValueOffset","NON_BINDABLE_VISITOR","parsedElement","attrs","Content","Template","templateAttrs","hoistedAttrs","i18n","TextAttribute","text","expansion","vars","placeholders","key","I18N_ICU_VAR_PREFIX","formattedKey","BoundText","Icu$1","expansionCase","comment","Comment$1","decl","LetDeclaration$1","index","errorMessage","primaryBlockIndex","siblings","predicate","relatedBlocks","properties","i18nPropsMeta","bound","literal","prop","bep","BoundAttribute","matchableAttributes","srcSpan","absoluteOffset","createKeySpan","prefix","normalizationAdjustment","keySpanStart","keySpanEnd","bindParts","events","addEvents","delims","interpolatedTokens","valueNoNgsp","replaceNgsp","expr","Text$3","reference","Reference","targetMatchableAttrs","level","ParseErrorLevel","NonBindableVisitor","nodes","parameter","attrName","BoundEvent","LEADING_TRIVIA_CHARS","parseTemplate","template","templateUrl","interpolationConfig","preserveWhitespaces","enableI18nLegacyMessageIdFormat","allowInvalidAssignmentEvents","makeBindingParser","parseResult","HtmlParser","__spreadProps","__spreadValues","parsedTemplate","rootNodes","i18nMetaVisitor","I18nMetaVisitor","i18nMetaResult","WhitespaceVisitor","styleUrls","styles","ngContentSelectors","commentNodes","elementRegistry","DomElementSchemaRegistry","DEFAULT_INTERPOLATION_CONFIG","BindingParser","Parser$1","COMPONENT_VARIABLE","HOST_ATTR","CONTENT_ATTR","baseDirectiveFields","meta","constantPool","definitionMap","DefinitionMap","selectors","parseSelectorToR3Selector","asLiteral","createContentQueriesFunction","createViewQueriesFunction","createHostBindingsFunction","conditionallyCreateDirectiveBindingLiteral","literalArr","addFeatures","features","providers","viewProviders","inputKeys","args","LiteralArrayExpr","importExpr","Identifiers","createHostDirectivesFeatureArg","compileDirectiveFromMetadata","createDirectiveType","compileComponentFromMetadata","firstSelector","selectorAttributes","templateTypeName","allDeferrableDepsFn","fnName","DeclareVarStmt","StmtModifier","variable","tpl","ingestComponent","transform","CompilationJobKind","templateFn","emitTemplateFn","arrowFn","ReturnStatement","compileDeclarationList","ViewEncapsulation","styleNodes","compileStyles","style","literalMap","ChangeDetectionStrategy","createComponentType","typeParams","createBaseDirectiveTypeParams","stringArrayAsType","expressionType","createHostDirectivesType","list","mode","resolvedList","stringAsType","str","stringMapAsLiteralExpression","map","mapValues","arr","NONE_TYPE","selectorForType","typeWithParameters","getInputsTypeExpression","q","values","hostBindingsMetadata","typeSourceSpan","bindings","eventBindings","hostJob","ingestHostBinding","varCount","emitHostBindingFunction","HOST_REG_EXP","parseHostBindings","host","listeners","specialAttributes","matches","verifyHostBindings","hostSelector","shadowCss","ShadowCss","createHostDirectivesType","meta","expressionType","literalArr","hostMeta","literalMap","typeofExpr","stringMapAsLiteralExpression","NONE_TYPE","createHostDirectivesFeatureArg","hostDirectives","expressions","hasForwardRef","current","keys","inputsLiteral","createHostDirectivesMappingArray","outputsLiteral","FunctionExpr","ReturnStatement","mapping","elements","publicName","literal","R3TargetBinder","directiveMatcher","target","scope","Scope","scopedNodeEntities","extractScopedNodeEntities","directives","eagerDirectives","bindings","references","DirectiveBinder","expressions","symbols","nestingLevel","usedPipes","eagerPipes","deferBlocks","TemplateBinder","R3BoundTarget","_Scope","parentScope","rootNode","DeferredBlock","template","nodeOrNodes","Template","node","IfBlockBranch","ForLoopBlock","v","SwitchBlockCase","ForLoopBlockEmpty","DeferredBlockError","DeferredBlockPlaceholder","DeferredBlockLoading","Content","element","variable","reference","deferred","block","content","decl","attr","event","text","icu","trigger","thing","name","res","_DirectiveBinder","matcher","selectorMatcher","cssSelector","createCssSelectorFromNode","_selector","results","ref","dirTarget","dir","value","setAttributeBinding","attribute","ioType","binding","input","output","child","wasInDeferBlock","_TemplateBinder","RecursiveAstVisitor","level","context","AST","nodes","key","ast","childScope","ImplicitReceiver","LetDeclaration$1","ThisReceiver","exprTargets","rawDeferred","current","expr","symbol","set","dirs","InteractionDeferredTrigger","ViewportDeferredTrigger","HoverDeferredTrigger","Comment$1","Element$1","outsideRef","Reference","refInPlaceholder","targetInPlaceholder","stack","entities","entity","rootScope","entityMap","extractScopeEntities","currentEntities","scopesToProcess","templateEntities","ResourceLoader","CompilerFacadeImpl","jitEvaluator","JitEvaluator","FactoryTarget$1","DomElementSchemaRegistry","angularCoreEnv","sourceMapUrl","facade","metadata","wrapReference","compilePipeFromMetadata","declaration","meta","convertDeclarePipeFacadeToMetadata","expression","statements","compileInjectable","computeProvidedIn","convertToProviderExpression","wrapExpression","convertR3DependencyMetadata","convertR3DeclareDependencyMetadata","WrappedNodeExpr","i","compileInjector","convertDeclareInjectorFacadeToMetadata","R3NgModuleMetadataKind","R3SelectorScopeMode","compileNgModule","compileNgModuleDeclarationExpression","convertDirectiveFacadeToMetadata","typeSourceSpan","convertDeclareDirectiveFacadeToMetadata","constantPool","ConstantPool","bindingParser","makeBindingParser","compileDirectiveFromMetadata","interpolation","defer","parseJitTemplate","__spreadProps","__spreadValues","convertDeclarationFacadeToMetadata","jitExpressionSourceMap","convertDeclareComponentFacadeToMetadata","compileComponentFromMetadata","factoryRes","compileFactoryFunction","convertR3DependencyMetadataArray","kind","typeName","sourceUrl","r3JitTypeSourceSpan","def","preStatements","DeclareVarStmt","StmtModifier","R3JitReflector","convertToR3QueryMetadata","convertQueryPredicate","convertQueryDeclarationToMetadata","predicate","createMayBeForwardRefExpression","inputsFromMetadata","parseInputsArray","outputsFromMetadata","parseMappingStringArray","propMetadata","inputsFromType","outputsFromType","field","ann","isInput","isOutput","hostDirectives","hostDirective","extractHostBindings","getHostDirectiveBindingMapping","inputsPartialMetadataToInputMetadata","convertHostDeclarationToMetadata","host","convertOpaqueValuesToExpressions","array","result","obj","declarations","innerDep","convertDirectiveDeclarationToMetadata","convertPipeDeclarationToMetadata","convertPipeMapToMetadata","ChangeDetectionStrategy","ViewEncapsulation","isComponent","R3TemplateDependencyKind","pipes","pipe","preserveWhitespaces","deferBlockDependencies","interpolationConfig","InterpolationConfig","DEFAULT_INTERPOLATION_CONFIG","parsed","parseTemplate","errors","err","boundTarget","SelectorMatcher","createR3ComponentDeferMetadata","property","providedIn","LiteralExpr","facades","isAttributeDep","rawToken","token","createR3DependencyMetadata","optional","self","skipSelf","attributeNameType","literal","deferredBlocks","blocks","dependencyFn","sourceSpan","parseHostBindings","verifyHostBindings","error","isHostBinding","getSafePropertyAccessString","isHostListener","inputs","minifiedClassName","parseLegacyInputPartialOutput","values","bindingPropertyName","classPropertyName","parseMappingString","alias","fieldName","str","publishFacade","global","ng","VERSION","Version","CompilerConfig","defaultEncapsulation","strictInjectionParameters","preserveWhitespacesDefault","noUndefined","preserveWhitespacesOption","defaultSetting","_VisitorMode","XmlTagDefinition","currentParent","name","TagContentType","_TAG_DEFINITION","FactoryTarget","publishFacade","_global","COMPILER_PROVIDERS","Compiler","JitCompilerFactory","defaultOptions","compilerOptions","ViewEncapsulation$1","options","opts","_mergeOptions","Injector","CompilerConfig","optionsArr","_lastDefined","_mergeArrays","args","i","parts","result","part","platformCoreDynamic","createPlatformFactory","platformCore","COMPILER_OPTIONS","CompilerFactory","_ResourceLoaderImpl","ResourceLoader","url","resolve","reject","promise","res","rej","xhr","response","status","ɵɵngDeclareFactory","core_exports","FactoryTarget","ɵɵngDeclareInjectable","ResourceLoaderImpl","ɵɵngDeclareClassMetadata","Injectable","INTERNAL_BROWSER_DYNAMIC_PLATFORM_PROVIDERS","INTERNAL_BROWSER_PLATFORM_PROVIDERS","PLATFORM_ID","PLATFORM_BROWSER_ID","VERSION","Version","platformBrowserDynamic","_BaseControlValueAccessor","_renderer","_elementRef","_","key","value","fn","isDisabled","ɵɵngDeclareFactory","core_exports","Renderer2","ElementRef","FactoryTarget","ɵɵngDeclareDirective","BaseControlValueAccessor","ɵɵngDeclareClassMetadata","Directive","_BuiltInControlValueAccessor","BuiltInControlValueAccessor","NG_VALUE_ACCESSOR","InjectionToken","CHECKBOX_VALUE_ACCESSOR","forwardRef","CheckboxControlValueAccessor","_CheckboxControlValueAccessor","DEFAULT_VALUE_ACCESSOR","DefaultValueAccessor","_isAndroid","userAgent","getDOM","COMPOSITION_BUFFER_MODE","_DefaultValueAccessor","renderer","elementRef","_compositionMode","normalizedValue","Optional","Inject","isEmptyInputValue","hasValidLength","NG_VALIDATORS","NG_ASYNC_VALIDATORS","EMAIL_REGEXP","minValidator","min","control","isEmptyInputValue","value","maxValidator","max","requiredValidator","requiredTrueValidator","emailValidator","EMAIL_REGEXP","minLengthValidator","minLength","hasValidLength","maxLengthValidator","maxLength","patternValidator","pattern","nullValidator","regex","regexStr","isPresent","o","toObservable","isPromise","from","mergeErrors","arrayOfErrors","res","errors","__spreadValues","executeValidators","validators","validator","isValidatorFn","normalizeValidators","c","compose","presentValidators","composeValidators","composeAsync","observables","forkJoin","map","composeAsyncValidators","mergeValidators","controlValidators","dirValidator","getControlValidators","getControlAsyncValidators","makeValidatorsArray","hasValidator","addValidators","currentValidators","current","v","removeValidators","AbstractControlDirective","fn","errorCode","path","ControlContainer","NgControl","AbstractControlStatus","cd","ngControlStatusHost","ngGroupStatusHost","__spreadProps","_NgControlStatus","ɵɵngDeclareFactory","core_exports","FactoryTarget","ɵɵngDeclareDirective","NgControlStatus","ɵɵngDeclareClassMetadata","Directive","Self","_NgControlStatusGroup","NgControlStatusGroup","Optional","VALID","INVALID","PENDING","DISABLED","ControlEvent","ValueChangeEvent","value","source","PristineChangeEvent","pristine","TouchedChangeEvent","touched","StatusChangeEvent","status","FormSubmittedEvent","FormResetEvent","pickValidators","validatorOrOpts","isOptionsObj","coerceToValidator","validator","composeValidators","pickAsyncValidators","asyncValidator","coerceToAsyncValidator","composeAsyncValidators","assertControlPresent","parent","isGroup","key","controls","RuntimeError","assertAllValuesPresent","control","_","AbstractControl","validators","asyncValidators","computed","signal","Subject","validatorFn","asyncValidatorFn","untracked","v","addValidators","removeValidators","hasValidator","opts","changed","sourceControl","__spreadProps","__spreadValues","skipPristineCheck","changeFn","shouldHaveEmitted","ctrl","emitEvent","obs","toObservable","errors","path","currPath","name","errorCode","x","changedControl","EventEmitter","newPristine","fn","onlySelf","parentDirty","FormGroup","options","controlName","acc","subtreeUpdated","updated","child","cb","condition","initValue","res","FormRecord","FormGroup","CALL_SET_DISABLED_STATE","InjectionToken","setDisabledStateDefault","controlPath","name","parent","setUpControl","control","dir","callSetDisabledState","setUpValidators","setUpViewChangePipeline","setUpModelChangePipeline","setUpBlurPipeline","setUpDisabledChangeHandler","cleanUpControl","validateControlPresenceOnChange","noop","cleanUpValidators","registerOnValidatorChange","validators","onChange","validator","onDisabledChange","isDisabled","getControlValidators","mergeValidators","asyncValidators","getControlAsyncValidators","onValidatorChange","isControlUpdated","updatedValidators","updatedAsyncValidators","asyncValidator","newValue","updateControl","emitModelEvent","setUpFormContainer","cleanUpFormContainer","isPropertyUpdated","changes","viewModel","change","isBuiltInAccessor","valueAccessor","BuiltInControlValueAccessor","syncPendingControls","form","directives","dir","control","selectValueAccessor","valueAccessors","defaultAccessor","builtinAccessor","customAccessor","v","DefaultValueAccessor","removeListItem$1","list","el","index","formDirectiveProvider$1","ControlContainer","forwardRef","NgForm","resolvedPromise$1","_NgForm","untracked","validators","asyncValidators","callSetDisabledState","computed","signal","EventEmitter","FormGroup","composeValidators","composeAsyncValidators","dir","container","setUpControl","group","setUpFormContainer","value","$event","syncPendingControls","path","ɵɵngDeclareFactory","core_exports","NG_VALIDATORS","NG_ASYNC_VALIDATORS","CALL_SET_DISABLED_STATE","FactoryTarget","ɵɵngDeclareDirective","ɵɵngDeclareClassMetadata","Directive","Optional","Self","Inject","Input","removeListItem","list","el","index","isFormControlState","formState","FormControl","AbstractControl","validatorOrOpts","asyncValidator","pickValidators","pickAsyncValidators","isOptionsObj","options","changeFn","condition","fn","cb","isFormControl","control","FormControl","_AbstractFormGroupDirective","ControlContainer","controlPath","ɵɵngDeclareFactory","core_exports","FactoryTarget","ɵɵngDeclareDirective","AbstractFormGroupDirective","ɵɵngDeclareClassMetadata","Directive","modelGroupProvider","ControlContainer","forwardRef","NgModelGroup","_NgModelGroup","AbstractFormGroupDirective","parent","validators","asyncValidators","NgForm","ɵɵngDeclareFactory","core_exports","NG_VALIDATORS","NG_ASYNC_VALIDATORS","FactoryTarget","ɵɵngDeclareDirective","ɵɵngDeclareClassMetadata","Directive","Host","SkipSelf","Optional","Self","Inject","Input","formControlBinding$1","NgControl","NgModel","resolvedPromise","_NgModel","valueAccessors","_changeDetectorRef","callSetDisabledState","FormControl","EventEmitter","selectValueAccessor","changes","oldName","isPropertyUpdated","newValue","setUpControl","value","disabledValue","isDisabled","booleanAttribute","controlName","controlPath","NG_VALUE_ACCESSOR","ChangeDetectorRef","CALL_SET_DISABLED_STATE","Output","_ɵNgNoValidate","ɵNgNoValidate","NUMBER_VALUE_ACCESSOR","NumberValueAccessor","_NumberValueAccessor","BuiltInControlValueAccessor","normalizedValue","fn","RADIO_VALUE_ACCESSOR","RadioControlValueAccessor","_RadioControlRegistry","control","accessor","i","c","controlPair","ɵɵngDeclareFactory","core_exports","FactoryTarget","ɵɵngDeclareInjectable","RadioControlRegistry","ɵɵngDeclareClassMetadata","Injectable","_RadioControlValueAccessor","BuiltInControlValueAccessor","renderer","elementRef","_registry","_injector","inject","CALL_SET_DISABLED_STATE","setDisabledStateDefault","NgControl","value","fn","isDisabled","Renderer2","ElementRef","Injector","ɵɵngDeclareDirective","RADIO_VALUE_ACCESSOR","RadioControlValueAccessor","Directive","Input","RANGE_VALUE_ACCESSOR","NG_VALUE_ACCESSOR","forwardRef","RangeValueAccessor","_RangeValueAccessor","NG_MODEL_WITH_FORM_CONTROL_WARNING","InjectionToken","formControlBinding","FormControlDirective","_FormControlDirective","validators","asyncValidators","valueAccessors","_ngModelWarningConfig","callSetDisabledState","EventEmitter","selectValueAccessor","changes","previousForm","cleanUpControl","setUpControl","isPropertyUpdated","newValue","NG_VALIDATORS","NG_ASYNC_VALIDATORS","Optional","Self","Inject","Output","formDirectiveProvider","ControlContainer","FormGroupDirective","_FormGroupDirective","untracked","computed","signal","cleanUpValidators","dir","ctrl","removeListItem$1","$event","syncPendingControls","FormSubmittedEvent","FormResetEvent","oldCtrl","newCtrl","isFormControl","setUpFormContainer","cleanUpFormContainer","setUpValidators","formGroupNameProvider","FormGroupName","_FormGroupName","AbstractFormGroupDirective","parent","_hasInvalidParent","Host","SkipSelf","formArrayNameProvider","FormArrayName","_FormArrayName","controlPath","controlNameBinding","FormControlName","_FormControlName","SELECT_VALUE_ACCESSOR","SelectControlValueAccessor","_buildValueString$1","id","_extractId$1","valueString","_SelectControlValueAccessor","_NgSelectOption","_element","_renderer","_select","NgSelectOption","SELECT_MULTIPLE_VALUE_ACCESSOR","SelectMultipleControlValueAccessor","_buildValueString","_extractId","_SelectMultipleControlValueAccessor","BuiltInControlValueAccessor","fn","value","optionSelectedStateSetter","ids","v","opt","o","element","selected","selectedOptions","options","i","val","id","valueString","_extractId","ɵɵngDeclareFactory","core_exports","FactoryTarget","ɵɵngDeclareDirective","SELECT_MULTIPLE_VALUE_ACCESSOR","SelectMultipleControlValueAccessor","ɵɵngDeclareClassMetadata","Directive","Input","_ɵNgSelectMultipleOption","_element","_renderer","_select","_buildValueString","ElementRef","Renderer2","ɵNgSelectMultipleOption","Optional","Host","toInteger","toFloat","_AbstractValidatorDirective","nullValidator","changes","input","control","AbstractValidatorDirective","MAX_VALIDATOR","NG_VALIDATORS","forwardRef","MaxValidator","_MaxValidator","max","maxValidator","MIN_VALIDATOR","MinValidator","_MinValidator","min","minValidator","REQUIRED_VALIDATOR","RequiredValidator","CHECKBOX_REQUIRED_VALIDATOR","CheckboxRequiredValidator","_RequiredValidator","booleanAttribute","requiredValidator","_CheckboxRequiredValidator","requiredTrueValidator","EMAIL_VALIDATOR","EmailValidator","_EmailValidator","emailValidator","MIN_LENGTH_VALIDATOR","MinLengthValidator","_MinLengthValidator","minlength","minLengthValidator","MAX_LENGTH_VALIDATOR","MaxLengthValidator","_MaxLengthValidator","maxlength","maxLengthValidator","PATTERN_VALIDATOR","PatternValidator","_PatternValidator","patternValidator","SHARED_FORM_DIRECTIVES","ɵNgNoValidate","NgSelectOption","DefaultValueAccessor","NumberValueAccessor","RangeValueAccessor","CheckboxControlValueAccessor","SelectControlValueAccessor","RadioControlValueAccessor","NgControlStatus","NgControlStatusGroup","TEMPLATE_DRIVEN_DIRECTIVES","NgModel","NgModelGroup","NgForm","REACTIVE_DRIVEN_DIRECTIVES","FormControlDirective","FormGroupDirective","FormControlName","FormGroupName","FormArrayName","_ɵInternalFormsSharedModule","ɵɵngDeclareNgModule","ɵɵngDeclareInjector","ɵInternalFormsSharedModule","NgModule","FormArray","AbstractControl","controls","validatorOrOpts","asyncValidator","pickValidators","pickAsyncValidators","index","adjustedIndex","assertAllValuesPresent","newValue","assertControlPresent","subtreeUpdated","updated","child","cb","condition","name","isAbstractControlOptions","options","_FormBuilder","nnfb","controls","reducedControls","newOptions","FormGroup","FormRecord","formState","validatorOrOpts","asyncValidator","FormControl","__spreadProps","__spreadValues","createdControls","c","FormArray","controlName","AbstractControl","value","validator","ɵɵngDeclareFactory","core_exports","FactoryTarget","ɵɵngDeclareInjectable","FormBuilder","ɵɵngDeclareClassMetadata","Injectable","_NonNullableFormBuilder","inject","NonNullableFormBuilder","_UntypedFormBuilder","controlsConfig","UntypedFormBuilder","VERSION","Version","_FormsModule","opts","CALL_SET_DISABLED_STATE","setDisabledStateDefault","ɵɵngDeclareNgModule","NgModel","NgModelGroup","NgForm","ɵInternalFormsSharedModule","ɵɵngDeclareInjector","FormsModule","NgModule","TEMPLATE_DRIVEN_DIRECTIVES","_ReactiveFormsModule","NG_MODEL_WITH_FORM_CONTROL_WARNING","FormControlDirective","FormGroupDirective","FormControlName","FormGroupName","FormArrayName","ReactiveFormsModule","REACTIVE_DRIVEN_DIRECTIVES","app_component_default","app_component_default","version","environmentName","environment","AppComponent","_a","router","basketService","__publicField","evt","NavigationEnd","ProgressBarComponent","count","ctx","value","__decorate","Component","app_component_default","ontologies_component_default","ontologies_component_default","OntologiesComponent","_a","router","titleService","__publicField","__decorate","Component","ontologies_component_default","about_component_default","about_component_default","AboutComponent","_a","titleService","router","__publicField","environment","ProgressBarComponent","__decorate","Component","about_component_default","download_component_default","download_component_default","DownloadComponent","_a","googleAnalyticsService","titleService","__publicField","ProgressBarComponent","Category","environment","__decorate","Component","download_component_default","documentation_component_default","documentation_component_default","DocumentationComponent","_a","titleService","__publicField","environment","ProgressBarComponent","__decorate","Component","documentation_component_default","routes","m","AboutComponent","DownloadComponent","OntologiesComponent","DocumentationComponent","AppRoutingModule","__decorate","NgModule","RouterModule","local_search_component_default","local_search_component_default","SearchService","_a","router","googleAnalyticsService","__publicField","query","category","typeOfButton","value","__decorate","Injectable","LocalSearchComponent","_a","location","router","route","searchService","__publicField","val","queryParams","query","typeOfButton","Category","__decorate","Component","local_search_component_default","invalidTimingValue","exp","RuntimeError","negativeStepValue","negativeDelayValue","invalidStyleParams","varName","invalidParamValue","invalidNodeType","nodeType","invalidCssUnitValue","userProvidedProperty","value","invalidTrigger","invalidDefinition","invalidState","metadataName","missingSubs","invalidStyleValue","invalidParallelAnimation","prop","firstStart","firstEnd","secondStart","secondEnd","RuntimeError","invalidKeyframes","invalidOffset","keyframeOffsetsOutOfOrder","keyframesMissingOffsets","invalidStagger","invalidQuery","selector","invalidExpression","expr","invalidTransitionAlias","alias","triggerBuildFailed","name","errors","RuntimeError","animationFailed","registerFailed","missingOrDestroyedAnimation","createAnimationFailed","missingPlayer","id","missingTrigger","phase","missingEvent","unsupportedTriggerEvent","unregisteredTrigger","triggerTransitionsFailed","transitionFailed","name","errors","RuntimeError","optimizeGroupPlayer","players","NoopAnimationPlayer","AnimationGroupPlayer","normalizeKeyframes$1","normalizer","keyframes","preStyles","postStyles","errors","normalizedKeyframes","previousOffset","previousKeyframe","kf","offset","isSameOffset","normalizedKeyframe","val","prop","normalizedProp","normalizedValue","ɵPRE_STYLE","AUTO_STYLE","animationFailed","listenOnPlayer","player","eventName","event","callback","copyAnimationEvent","e","phaseName","totalTime","disabled","makeAnimationEvent","data","element","triggerName","fromState","toState","getOrSetDefaultValue","map","key","defaultValue","value","parseTimelineCommand","command","separatorPos","id","action","documentElement","getParentElement","parent","containsVendorPrefix","_CACHED_BODY","_IS_WEBKIT","validateStyleProperty","getBodyNode","result","getBodyNode","containsElement","elm1","elm2","getParentElement","invokeQuery","element","selector","multi","elem","_NoopAnimationDriver","prop","validateStyleProperty","elm1","elm2","containsElement","element","getParentElement","selector","multi","invokeQuery","defaultValue","keyframes","duration","delay","easing","previousPlayers","scrubberAccessRequested","NoopAnimationPlayer","ɵɵngDeclareFactory","core_exports","FactoryTarget","ɵɵngDeclareInjectable","NoopAnimationDriver","ɵɵngDeclareClassMetadata","Injectable","_AnimationDriver","AnimationDriver","AnimationStyleNormalizer","ONE_SECOND","SUBSTITUTION_EXPR_START","SUBSTITUTION_EXPR_END","ENTER_CLASSNAME","LEAVE_CLASSNAME","NG_TRIGGER_CLASSNAME","NG_TRIGGER_SELECTOR","NG_ANIMATING_CLASSNAME","NG_ANIMATING_SELECTOR","resolveTimingValue","value","matches","_convertTimeValueToMS","unit","resolveTiming","timings","errors","allowNegativeValues","parseTimeExpression","exp","regex","duration","delay","easing","invalidTimingValue","delayMatch","easingVal","containsErrors","startIndex","negativeStepValue","negativeDelayValue","normalizeKeyframes","keyframes","kf","setStyles","element","styles","formerStyles","val","prop","camelProp","dashCaseToCamelCase","eraseStyles","_","normalizeAnimationEntry","steps","sequence","validateStyleParams","value","options","errors","params","matches","extractStyleParams","varName","invalidStyleParams","PARAM_REGEX","SUBSTITUTION_EXPR_START","SUBSTITUTION_EXPR_END","match","interpolateParams","original","str","localVal","invalidParamValue","DASH_CASE_REGEXP","input","m","allowPreviousPlayerStylesMerge","duration","delay","balancePreviousStylesIntoKeyframes","element","keyframes","previousStyles","startingKeyframe","missingStyleProps","val","prop","kf","computeStyle","visitDslNode","visitor","node","context","AnimationMetadataType","invalidNodeType","DIMENSIONAL_PROP_SET","WebAnimationsStyleNormalizer","AnimationStyleNormalizer","propertyName","errors","dashCaseToCamelCase","userProvidedProperty","normalizedProperty","value","unit","strVal","valAndSuffixMatch","invalidCssUnitValue","ANY_STATE","parseTransitionExpr","transitionValue","errors","expressions","str","parseInnerTransitionStr","eventStr","result","parseAnimationAlias","match","invalidExpression","fromState","separator","toState","makeLambdaFromStates","isFullAnyStateExpr","alias","invalidTransitionAlias","TRUE_BOOLEAN_VALUES","FALSE_BOOLEAN_VALUES","lhs","rhs","LHS_MATCH_BOOLEAN","RHS_MATCH_BOOLEAN","lhsMatch","rhsMatch","SELF_TOKEN","SELF_TOKEN_REGEX","buildAnimationAst","driver","metadata","warnings","AnimationAstBuilderVisitor","ROOT_SELECTOR","_driver","context","AnimationAstBuilderContext","visitDslNode","normalizeAnimationEntry","queryCount","depCount","states","transitions","invalidTrigger","def","AnimationMetadataType","stateDef","name","n","transition","invalidDefinition","styleAst","astParams","missingSubs","params","style","value","extractStyleParams","sub","invalidState","animation","matchers","normalizeAnimationOptions","currentTime","furthestTime","steps","step","innerAst","timingAst","constructTimingAst","styleMetadata","isEmpty","newStyleData","_styleAst","ast","styles","metadataStyles","styleTuple","AUTO_STYLE","invalidStyleValue","containsDynamicStyles","collectedEasing","styleData","SUBSTITUTION_EXPR_START","timings","endTime","startTime","tuple","prop","collectedStyles","collectedEntry","updateCollectedStyle","invalidParallelAnimation","validateStyleParams","invalidKeyframes","MAX_KEYFRAME_OFFSET","totalKeyframesWithOffsets","offsets","offsetsOutOfOrder","keyframesOutOfRange","previousOffset","keyframes","offsetVal","consumeOffset","offset","invalidOffset","keyframeOffsetsOutOfOrder","length","generatedOffset","keyframesMissingOffsets","limit","currentAnimateTimings","animateDuration","kf","i","durationUpToThisFrame","parentSelector","options","selector","includeSelf","normalizeSelector","getOrSetDefaultValue","invalidStagger","resolveTiming","hasAmpersand","token","NG_TRIGGER_SELECTOR","NG_ANIMATING_SELECTOR","normalizeParams","obj","__spreadValues","duration","makeTimingAst","strValue","v","delay","easing","createTimelineInstruction","element","preStyleProps","postStyleProps","subTimeline","ElementInstructionMap","instructions","existingInstructions","ONE_FRAME_IN_MILLISECONDS","ENTER_TOKEN","ENTER_TOKEN_REGEX","LEAVE_TOKEN","LEAVE_TOKEN_REGEX","buildAnimationTimelines","rootElement","enterClassName","leaveClassName","startingStyles","finalStyles","subInstructions","AnimationTimelineBuilderVisitor","AnimationTimelineContext","resolveTimingValue","timelines","timeline","lastRootTimeline","elementInstructions","innerContext","animationsRefsOptions","animationRefOptions","animationDelay","animationDelayValue","interpolateParams","instruction","instructionTimings","subContextCount","ctx","DEFAULT_NOOP_PREVIOUS_NODE","s","innerTimelines","timingValue","innerTimeline","elms","sameElementTimeline","parentContext","tl","maxTime","startingTime","_AnimationTimelineContext","_enterClassName","_leaveClassName","initialTimeline","TimelineBuilder","skipIfExists","newOptions","optionsToUpdate","newParams","paramsToUpdate","oldParams","newTime","target","updatedTimings","builder","SubTimelineBuilder","time","originalSelector","optional","results","multi","elements","invalidQuery","_TimelineBuilder","_elementTimelineStylesLookup","hasPreStyleStep","input","flattenStyles","val","properties","details1","details0","finalKeyframes","keyframe","finalKeyframe","ɵPRE_STYLE","preProps","postProps","kf0","kf1","_stretchStartingKeyframe","newKeyframes","totalTime","startingGap","newFirstKeyframe","oldFirstKeyframe","roundOffset","oldOffset","timeAtKeyframe","decimalPoints","mult","allStyles","allProperties","createTransitionInstruction","triggerName","isRemovalTransition","fromStyles","toStyles","queriedElements","EMPTY_OBJECT","AnimationTransitionFactory","_triggerName","_stateStyles","currentState","nextState","oneOrMoreTransitionsMatch","stateName","styler","currentOptions","nextOptions","skipAstBuild","transitionAnimationParams","currentAnimationParams","currentStateStyles","nextAnimationParams","nextStateStyles","preStyleMap","postStyleMap","isRemoval","animationOptions","applyParamDefaults","elm","oneOrMoreTransitionsMatch","matchFns","currentState","nextState","element","params","fn","applyParamDefaults","userParams","defaults","result","__spreadValues","key","value","AnimationStateStyles","styles","defaultParams","normalizer","errors","finalStyles","combinedParams","val","prop","interpolateParams","normalizedProp","buildTrigger","name","ast","AnimationTrigger","_normalizer","balanceProperties","AnimationTransitionFactory","createFallbackTransition","f","triggerName","states","matchers","fromState","toState","animation","AnimationMetadataType","transition","stateMap","key1","key2","EMPTY_INSTRUCTION_MAP","ElementInstructionMap","TimelineAnimationEngine","bodyNode","_driver","id","metadata","warnings","buildAnimationAst","registerFailed","i","preStyles","postStyles","keyframes","normalizeKeyframes$1","options","instructions","autoStylesMap","buildAnimationTimelines","ENTER_CLASSNAME","LEAVE_CLASSNAME","inst","getOrSetDefaultValue","missingOrDestroyedAnimation","createAnimationFailed","_","AUTO_STYLE","players","player","optimizeGroupPlayer","index","missingPlayer","eventName","callback","baseEvent","makeAnimationEvent","listenOnPlayer","command","args","QUEUED_CLASSNAME","QUEUED_SELECTOR","DISABLED_CLASSNAME","DISABLED_SELECTOR","STAR_CLASSNAME","STAR_SELECTOR","EMPTY_PLAYER_ARRAY","NULL_REMOVAL_STATE","NULL_REMOVED_QUERIED_STATE","REMOVAL_FLAG","StateValue","input","namespaceId","isObj","normalizeTriggerValue","_a","__objRest","newParams","oldParams","VOID_VALUE","DEFAULT_STATE_VALUE","AnimationTransitionNamespace","hostElement","_engine","addClass","phase","missingTrigger","missingEvent","isTriggerEventValid","unsupportedTriggerEvent","listeners","data","triggersWithStates","NG_TRIGGER_CLASSNAME","trigger","unregisteredTrigger","defaultToFallback","TransitionAnimationPlayer","objEquals","fromStyles","toStyles","eraseStyles","setStyles","playersOnElement","isFallbackTransition","removeClass","entry","elementPlayers","rootElement","context","elements","NG_TRIGGER_SELECTOR","elm","namespaces","ns","destroyAfterComplete","triggerStates","previousTriggersValues","state","elementStates","visitedTriggers","listener","engine","containsPotentialParentTransition","currentPlayers","parent","removalFlag","microtaskId","a","b","d0","d1","p","TransitionAnimationEngine","driver","namespaceList","namespacesByHostElement","found","ancestor","ancestorNs","stateValue","isElementNode","insertBefore","details","hostNS","hasAnimation","subTimelines","enterClassName","leaveClassName","skipBuildAst","containerElement","NG_ANIMATING_SELECTOR","resolve","node","cleanupFns","quietFns","triggerTransitionsFailed","skippedPlayers","skippedPlayersMap","queuedInstructions","queriedElements","allPreStyleElements","allPostStyleElements","disabledElementsSet","nodesThatAreDisabled","allTriggerElements","enterNodeMap","buildRootMap","enterNodeMapIds","nodes","root","className","allLeaveNodes","mergedLeaveNodes","leaveNodesWithoutAnimations","leaveNodeMapIds","leaveNodeMap","allPlayers","erroneousTransitions","previousValue","nodeIsOrphaned","instruction","timelines","tl","tuple","stringMap","setVal","transitionFailed","allPreviousPlayersMap","animationElementMap","prevPlayer","replaceNodes","replacePostStylesAsPre","postStylesMap","cloakAndComputeStyles","preStylesMap","ɵPRE_STYLE","post","pre","rootPlayers","subPlayers","NO_PARENT_ANIMATION_ELEMENT_DETECTED","parentWithAnimation","parentsToAdd","detectedParent","innerPlayer","parentPlayers","playersForElement","queriedPlayerResults","queriedInnerElements","j","queriedPlayers","activePlayers","removeNodesAfterAnimationDone","isQueriedElement","toStateValue","queriedElementPlayers","isRemovalAnimation","targetNameSpaceId","targetTriggerName","timelineInstruction","realPlayer","allQueriedPlayers","allConsumedElements","allSubElements","allNewPlayers","NoopAnimationPlayer","previousPlayers","flattenGroupPlayers","pp","wrappedPlayer","deleteOrUnsetInMap","NG_ANIMATING_CLASSNAME","callbacks","totalTime","phaseName","map","currentValues","cloakElement","oldValue","valuesMap","elementPropsMap","defaultStyle","cloakVals","failedElements","props","roots","rootMap","NULL_NODE","nodeSet","localRootMap","getRoot","finalPlayers","_flattenGroupPlayersRecur","AnimationGroupPlayer","k1","k2","postEntry","preEntry","AnimationEngine","doc","componentId","cacheKey","triggerBuildFailed","disable","property","action","parseTimelineCommand","eventPhase","cb","packageNonAnimatableStyles","startStyles","endStyles","filterNonAnimatableStyles","SpecialCasedStyles","_SpecialCasedStyles","_element","_startStyles","_endStyles","initialStyles","isNonAnimatableStyle","WebAnimationsPlayer","_specialStyles","onFinish","kfs","frame","computeStyle","methods","WebAnimationsDriver","elm1","elm2","containsElement","getParentElement","selector","multi","invokeQuery","defaultValue","duration","delay","easing","fill","playerOptions","previousStyles","previousWebAnimationPlayers","allowPreviousPlayerStylesMerge","_keyframes","normalizeKeyframes","balancePreviousStylesIntoKeyframes","specialStyles","ANIMATION_PREFIX","DISABLE_ANIMATIONS_FLAG","BaseAnimationRenderer","namespaceId","delegate","engine","_onDestroy","node","name","namespace","value","parent","newChild","refChild","isMove","oldChild","isHostElement","selectorOrNode","preserveContent","el","style","flags","target","eventName","callback","element","AnimationRenderer","factory","onDestroy","resolveElementFromTarget","phase","parseTriggerCallbackName","event","countId","triggerName","dotIndex","trigger","AnimationRendererFactory","_zone","hostElement","type","EMPTY_NAMESPACE_ID","cache","renderer","onRendererDestroy","componentId","registerTrigger","count","fn","data","animationCallbacksBuffer","tuple","_InjectableAnimationEngine","AnimationEngine","doc","driver","normalizer","ɵɵngDeclareFactory","core_exports","DOCUMENT","AnimationDriver","AnimationStyleNormalizer","FactoryTarget","ɵɵngDeclareInjectable","InjectableAnimationEngine","ɵɵngDeclareClassMetadata","Injectable","Inject","instantiateDefaultStyleNormalizer","WebAnimationsStyleNormalizer","instantiateRendererFactory","renderer","engine","zone","AnimationRendererFactory","SHARED_ANIMATION_PROVIDERS","RendererFactory2","DomRendererFactory2","NgZone","BROWSER_ANIMATIONS_PROVIDERS","WebAnimationsDriver","ANIMATION_MODULE_TYPE","BROWSER_NOOP_ANIMATIONS_PROVIDERS","NoopAnimationDriver","_BrowserAnimationsModule","config","ɵɵngDeclareNgModule","BrowserModule","ɵɵngDeclareInjector","BrowserAnimationsModule","NgModule","_NoopAnimationsModule","ɵɵngDeclareFactory","core_exports","FactoryTarget","ɵɵngDeclareNgModule","BrowserModule","ɵɵngDeclareInjector","BROWSER_NOOP_ANIMATIONS_PROVIDERS","NoopAnimationsModule","ɵɵngDeclareClassMetadata","NgModule","MAT_PROGRESS_BAR_DEFAULT_OPTIONS","InjectionToken","MAT_PROGRESS_BAR_LOCATION","MAT_PROGRESS_BAR_LOCATION_FACTORY","_document","inject","DOCUMENT","_location","_MatProgressBar","_elementRef","_ngZone","_changeDetectorRef","_animationMode","defaults","EventEmitter","event","value","v","clamp","ɵɵngDeclareFactory","core_exports","ElementRef","NgZone","ChangeDetectorRef","ANIMATION_MODULE_TYPE","FactoryTarget","ɵɵngDeclareComponent","numberAttribute","ChangeDetectionStrategy","ViewEncapsulation$1","MatProgressBar","ɵɵngDeclareClassMetadata","Component","Optional","Inject","Input","Output","min","max","_MatProgressBarModule","ɵɵngDeclareNgModule","MatCommonModule","ɵɵngDeclareInjector","MatProgressBarModule","NgModule","home_component_default","home_component_default","HomeComponent","_a","titleService","router","googleAnalyticsService","__publicField","ProgressBarComponent","speciesName","Category","environment","__decorate","Component","home_component_default","tile_menu_component_default","tile_menu_component_default","TileMenuComponent","_a","notificationService","router","googleAnalyticsService","__publicField","environment","__decorate","Component","tile_menu_component_default","twitter_display_component_default","twitter_display_component_default","twitterURL","TwitterDisplayComponent","_a","d","s","id","call","js","fjs","t","f","__decorate","Component","twitter_display_component_default","newsletter_subscription_component_default","newsletter_subscription_component_default","NewsletterSubscriptionComponent","_a","__decorate","Component","newsletter_subscription_component_default","search_component_default","search_component_default","SearchComponent","_a","searchService","__publicField","query","typeOfButton","Category","__decorate","Component","search_component_default","routes","HomeComponent","HomeRoutingModule","__decorate","NgModule","RouterModule","HomeModule","__decorate","NgModule","CommonModule","HomeRoutingModule","HomeComponent","SearchComponent","NewsletterSubscriptionComponent","TwitterDisplayComponent","TileMenuComponent","footer_component_default","footer_component_default","FooterComponent","_a","__publicField","Input","__decorate","Component","footer_component_default","AppModule","__decorate","NgModule","AppComponent","ProgressBarComponent","LocalSearchComponent","OntologiesComponent","AboutComponent","DownloadComponent","DocumentationComponent","FooterComponent","BrowserAnimationsModule","BrowserModule","RouterModule","FormsModule","ToastrModule","NgxPageScrollCoreModule","MatProgressBarModule","MarkdownModule","NgxGoogleAnalyticsModule","environment","NgxGoogleAnalyticsRouterModule","HomeModule","AppRoutingModule","ProgressSpinnerComponent","ComplexPortalService","NotificationService","ReactomeService","EuroPmcService","OlsService","BasketService","LocalStorageService","SpeciesPipe","AnalyticsService","SearchService","provideHttpClient","withInterceptorsFromDi","environment","platformBrowserDynamic","AppModule"],"x_google_ignoreList":[1,2,3,24,25,26]}